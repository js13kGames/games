<!doctype html><meta name=viewport content="width=device-width,user-scalable=no"><title>Black Cat's Rise - js13kGames 2025</title><style rel=stylesheet crossorigin>body,html{color:#ffffffb3;background-color:#1a361a;background-image:linear-gradient(90deg,#0000000d 50%,#0000 50%);background-size:50px 100%;height:100%;margin:0;font-family:Arial,sans-serif;overflow:hidden}h1{text-transform:uppercase;letter-spacing:.1em;z-index:2;margin:0;font-size:3.5rem;font-weight:700;line-height:1.1;position:relative}h1 span{color:#f7b700}@media screen and (max-width:639px){h1{font-size:2.5rem}}nav{justify-content:center;font-size:1rem;display:flex}nav button{color:#fff;cursor:pointer;font-family:inherit;font-size:inherit;background:0 0;border:none;padding:0;text-decoration:none}#menu{z-index:9;background-color:#1a361a;justify-content:center;align-items:center;width:100%;display:flex;position:sticky;top:0;left:0}#menu nav button{border-left:1px solid #fff3;padding:.75rem 1rem}#menu nav button:last-child{border-right:1px solid #fff3}#menu nav button:hover{background:#2a4b2a;text-decoration:underline}#menu nav button.active{background:#2a4b2a}.intro{text-align:center;box-sizing:border-box;flex-direction:column;justify-content:space-around;align-items:center;height:100%}.intro p{max-width:400px;margin:0;font-size:.8em}.intro>div{-webkit-backdrop-filter:brightness(200%);backdrop-filter:brightness(200%);border-radius:1rem;flex-direction:column;align-items:center;gap:2rem;padding:2rem;font-size:1.5rem;display:flex}.intro>div>div{flex-direction:column;gap:.5rem;display:flex}.intro svg{position:absolute;top:-160px;left:20px}.intro button{background:#16a34a;font-size:1.2rem}.screen.intro.active{display:flex}#continue{color:#fff;background:0 0;border:0;font-size:1rem;text-decoration:underline}main{height:100%;overflow:auto}.screen{max-width:640px;margin:0 auto;padding:1em;display:none}.screen.active{display:block}.hide,.intro.active~main{display:none}header{white-space:nowrap;flex-wrap:wrap;justify-content:space-between;align-items:center;gap:.5rem 2rem;margin-bottom:1rem;display:flex}h2{color:#86efac;margin:0;line-height:2}table{border-collapse:collapse;border-radius:.75rem;width:100%;overflow:hidden}tr{--td-bg:#1a361a}td{border-bottom:1px solid hsla(from var(--td-bg)h s calc(l + 5));background:var(--td-bg)}.r{text-align:right}.c{text-align:center}td.cll,th.cll{white-space:nowrap;width:1%}td.fif{width:50%}tr:last-child td{border-bottom:0}th{color:#86efac;background:#2a4b2a}td,th{text-align:left;padding:.75em .5em}.bold{color:#fff}tr.gk{--td-bg:#303}tr.df{--td-bg:#003}tr.md{--td-bg:#330}tr.at{--td-bg:#300}tr.sub{font-style:italic}tr.bold td{background:hsl(from var(--td-bg)h s calc(l + 15))}tr[data-swap]:hover td{cursor:pointer;background:hsl(from var(--td-bg)h s calc(l + 15))}tr[data-swap].slcd{position:relative}tr[data-swap].slcd:after{content:"";color:#000;background:#ffffff4d;justify-content:center;align-items:center;width:100%;height:100%;animation:.4s infinite blink-color;display:flex;position:absolute;top:0;left:0}@keyframes blink-color{0%{background-color:#ffffff4d}50%{background-color:#fff0}to{background-color:#ffffff4d}}select{color:#fff;background:#1a361a;border:1px solid #1f5734;border-radius:.25em;margin:0;padding:.25em .5em;font-size:110%}label:has(+select){margin-right:.5rem;font-weight:700}.hidden{visibility:hidden}.tshirt{clip-path:url(#tshirt-clip);background-size:cover;width:28px;height:28px;margin:-3px 0;display:inline-block}.tshirt.v{background:repeating-linear-gradient(to right,var(--color1),var(--color1)3px,var(--color2)3px,var(--color2)6px)}.tshirt.h{background:repeating-linear-gradient(to bottom,var(--color1),var(--color1)3px,var(--color2)3px,var(--color2)6px)}.tshirt.m{background:repeating-linear-gradient(to bottom,var(--color1),var(--color1)16px,var(--color2)16px,var(--color2)28px)}.tshirt.p{background:repeating-linear-gradient(to right,var(--color1),var(--color1)14px,var(--color2)14px,var(--color2)28px)}.tshirt.c{background-image:linear-gradient(45deg,var(--color1)25%,transparent 25%),linear-gradient(-45deg,var(--color1)25%,transparent 25%),linear-gradient(45deg,transparent 75%,var(--color1)75%),linear-gradient(-45deg,transparent 75%,var(--color1)75%);background-size:6px 6px;background-color:var(--color2)}.fea{color:#fff;white-space:nowrap}.name{white-space:nowrap;align-items:center;gap:.5rem;display:inline-flex}.pos{text-transform:uppercase;text-align:center;-webkit-backdrop-filter:brightness(200%);backdrop-filter:brightness(200%);border-radius:1em;width:3em;padding:.25em 0;font-size:90%;display:inline-block}.nm{background:#1a361a;border-radius:1rem;align-items:center;gap:.5rem;margin-bottom:2rem;padding:1rem}.nm,.nm>div>div,.nm>div>span{flex-direction:column;display:flex}.nm>div:first-child{white-space:nowrap;grid-template-columns:1fr min-content 1fr;align-items:center;gap:1rem;display:grid}.nm>div:first-child div:first-child{align-items:flex-end}.nm>div:first-child span{flex-direction:row;align-items:center;gap:1rem}.nm>div:first-child i{margin:1rem 0;transform:scale(1.5)}.nm>div:first-child b{color:#fff}.btn{color:#fff;background:#16a34a;border:0;border-radius:1.25rem;padding:.5rem 1rem;font-weight:700}.btn:not(:disabled):hover{cursor:pointer;outline:3px solid #16a34a}.btn:disabled{background:#666}.btn.ld{background:#333}.lg{grid-template-rows:auto min-content 1fr;grid-template-columns:1fr 10px 1fr;gap:1rem;display:grid}.lgh{background:#1a361a;border-radius:.5rem;grid-column:span 3;grid-template-columns:1fr min-content min-content min-content 1fr;align-items:center;gap:1rem;padding:.5rem 0;display:grid}.lgh .t{text-align:left;color:#fff;cursor:pointer;background:0 0;border:0;font-size:1rem}.lgh .t:first-child{text-align:right}.lgh .t:hover span{text-decoration:underline}.lgh .t.a .name{position:relative}.lgh .t.a .name:after{content:"";border-bottom:10px solid #fff;border-left:5px solid #0000;border-right:5px solid #0000;width:0;height:0;display:block;position:absolute;bottom:-10px;left:50%}.lgfw{flex-direction:column;grid-row:span 2;gap:1rem;display:flex}.lgf{background:#2f7147;border-radius:.75rem;flex-direction:column;align-items:center;padding:0 1rem;display:flex}.lgf b{padding:.5rem}.lgf.rev,.lgf.rev>div{flex-direction:column-reverse}.lgf>div{border:1px solid #ffffffb3;flex-direction:column;justify-content:space-between;gap:2rem;height:100%;padding:1rem;display:flex;position:relative}.lgf>div:before{content:"";aspect-ratio:1;border:1px solid #ffffffb3;border-radius:50%;width:28%;margin:-14% 0 0 -14%;position:absolute;top:50%;left:50%}.lgf>div:after{content:"";border-top:1px solid #ffffffb3;width:100%;position:absolute;top:50%;left:0}.fmt{flex-wrap:wrap;justify-content:space-around;align-items:center;gap:.5rem;min-height:6.5rem;display:flex}.fmt button{z-index:2;color:#fff;--lt:15;--bgc:hsl(from var(--bg)h s calc(l + var(--lt)));background:var(--bgc);--p:0;border:0;border-radius:50%;width:3rem;height:3rem;font-size:1.5rem;font-weight:700;position:relative;box-shadow:2px 2px 5px #00000080}.fmt button:not(:disabled):hover{cursor:pointer;--lt:25;outline:3px solid var(--bgc)}.fmt button.df{--bg:#003}.fmt button.md{--bg:#330}.fmt button.at{--bg:#300}.fmt button.ds{--bg:#222}.fmt button:after{content:"";background:conic-gradient(#fff6 calc(var(--p)*1%),transparent 0);border-radius:50%;width:100%;height:100%;display:block;position:absolute;top:0;left:0}.fmt span{flex-basis:100%;height:0}.lgp{--pct:50%;--ang:0;--c1:#fff;--c2:#000;--angc:var(--c1);background:var(--c2);border-radius:.25rem;outline:1px solid #16a34a;grid-row:span 2;min-height:300px;position:relative}.lgp>div{background:var(--c1);height:var(--pct);border-radius:.25rem;font-size:1.25rem;transition:height .25s ease-in-out;position:relative}.lgp>div span{color:#fff;z-index:2;position:absolute;bottom:-.75rem;left:-.375rem}.lgp>div:after{content:"";z-index:1;background:var(--angc);transform:scaleX(var(--ang));transform-origin:0 0;border-radius:.25rem;width:30px;height:10px;display:block;position:absolute;bottom:-5px;left:5px}#lgst{-webkit-backdrop-filter:brightness(140%);backdrop-filter:brightness(140%);border-radius:.75rem;padding:.5rem 1rem}#lgst-a{--p:100;position:relative}#lgst-a:after{content:"";background:linear-gradient(to right,#fff6 calc(var(--p)*1%),transparent 0);border-radius:1.25rem;width:100%;height:100%;display:block;position:absolute;top:0;left:0}.lgst-b{flex-direction:column;gap:.5rem;margin-top:.75rem;display:flex}.lgst-b button{gap:.5rem;display:flex}.lgst-b span{-webkit-backdrop-filter:brightness(80%);backdrop-filter:brightness(80%);color:#eee;border-radius:.5rem;padding:.125rem .25rem;font-size:.8rem}.lgs{-webkit-backdrop-filter:brightness(140%);backdrop-filter:brightness(140%);contain:size;border-radius:.75rem;padding:.5rem 1rem;overflow:auto}.lgs #lgs-ms{flex-direction:column-reverse;gap:.25rem 0;margin:0;padding:1rem 0;display:flex}.lgs #lgs-ms>div{grid-template-columns:min-content 1fr;align-items:baseline;gap:0 .5rem;display:grid}.lgs .tm{text-align:center;background:#fff3;border-radius:.25rem;padding:.25rem}.lgs .hm{color:#c6f7d8}@media screen and (max-width:639px){.lg{grid-template-columns:1fr 10px}.lgh{grid-column:span 2}.lgs{contain:none;grid-column:span 2}#lgst{grid-column:span 2}}.score-w{flex-direction:column;justify-content:center;align-items:center;width:5rem;height:2.5rem;display:flex}.score-w strong{white-space:nowrap;padding:0 .25rem;font-size:1.25rem;line-height:1}.score-w span{color:#86efac;font-size:.8rem;line-height:1}.sr{pointer-events:none}@media screen and (max-width:639px){.sr{display:none}}#msc-tgl:disabled{color:#ffffff4d}#msc-tgl:not(.disabled).off{text-decoration:line-through}</style><body style=visibility:hidden;background-color:#081408><div class="screen intro" id=splash><h1>BLACK CAT'S<br><span>RISE</span></h1><div><svg width=300px height=173px viewBox="0 0 64 37"><g transform="translate(-35 -79)"><path d="m46 79c1.5-0.31 3.6 2.4 5.1 5.2 1.3 2.5 2.7 6.5 4.9 6.3 5.3-0.38 11-0.15 16 1.8 3.3 1.5 15-12 17-11 1.1 0.41-4.4 9-5.8 15 0.36 2.9 0.87 5.9-0.86 8.5 0.45 1.8 0.95 1.6 1.4 4.3 1-1.2 1.8-0.59 2.9-0.41 3-3.9 5.3-1.7 7.8-0.57 5.7-0.44 5.6 8.3 1.3 7-1.6 1-3 0.75-4.2-0.37-1.4 0.78-2.7 0.9-3.9-0.091-1.9 0.24-3.8 0.69-4.7-1.6l-34 2e-3c-0.14 1.8-0.49 3.4-3.1 2.4-2 1.3-3.5 0.92-4.9 0.37-1.6 0.46-3.2 0.85-4.3-0.23-4.3-3-0.91-5.5 0.42-5.8-0.21-2.5 2.8-2.4 5.2-2.8-0.41-2-0.51-4.1 0.82-6.3-1-3.2-1.7-6.3-0.34-9.6 0.064-5.6 0.025-11 3-12z" stroke-width=.96 /><path d="m64 108c-0.24 0.52-0.82 0.5-1.2 0.66-1.1 0.42-3.3 0.38-4.7-9e-3 -1.7-0.48-2.6-3.5-2.1-4.8 4.4-2.4 8.3 1.1 8 4.2z" fill=#fff stroke-width=.96 /><path d="m72 109c0.22 0.47 0.73 0.45 1.1 0.6 0.96 0.38 3 0.34 4.2-8e-3 1.5-0.43 2.3-3.1 1.9-4.4-3.9-2.1-7.5 0.99-7.2 3.8z" fill=#fff stroke-width=.97 /><rect transform="matrix(1 .081 -.063 1 0 0)" x=66 y=96 width=1.1 height=6.8 rx=.57 ry=2.8 stroke-width=.97 /><rect transform="matrix(1 .023 -.02 1 0 0)" x=77 y=101 width=1.1 height=6.3 rx=.57 ry=2.6 stroke-width=.96 /></g></svg><p>Manage the legendary Black Cats, inspired by their 2025 promotion to the UK's EFL Championship. Can you lead them to glory?<div><button class="btn menu" data-id=game>Begin Black Cat's Rise</button> <button id=continue class="menu hide" data-id=continue>Continue existing game</button></div></div></div><main><div id=menu><nav><button class=menu data-id=matches>Fixtures</button> <button class=menu data-id=team>Squad</button> <button class=menu data-id=table><span class=sr>League</span> Table</button> <button id=msc-tgl disabled="">Music</button></nav></div><div class=screen id=matches></div><div class=screen id=live></div><div class=screen id=team></div><div class=screen id=table></div></main><svg><defs><clipPath id=tshirt-clip><path d="m9.5 0c-8.9 3.2-6.2 2.5-9.5 13 1.8 1.9 4.9 2.6 6.1 2.1l-0.81 11c5.3 1.3 11 1.5 16 0l-0.81-11c1.1 0.47 4.3-0.21 6.1-2.1-3.2-10-0.56-9.5-9.5-13-2.1 2-5.6 2.1-7.5 0z"/></clipPath></defs></svg><script>!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const n of t)if("childList"===n.type)for(const t of n.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)}).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const t={"-1":{df:1,md:.5,at:.1},0:{df:.3,md:1,at:.3},1:{df:.1,md:.5,at:1}};function e(e,n){return(e<0?n.df:e>0?n.at:n.md)*(t[e]?.[n.pos??""]??0)}function n(t){return Math.max(Math.min(Math.trunc(t/33),2),0)-1}function s(t){return t.reduce((t,e)=>t+e,0)}function a(t){let e=t.length;for(;0!==e;){const n=Math.floor(Math.random()*e);e--,[t[e],t[n]]=[t[n],t[e]]}return t}function r(t,e){const n=function(t){const e=["df","md","at"];return["gk",...t.split("-").flatMap((t,n)=>Array(Number(t)).fill(e[n]))]}(e);return t.map((t,e)=>({...t,pos:n[e]}))}const i=["3-5-2","3-4-3","3-3-4","4-3-3","4-4-2","4-3-4","5-3-2","5-4-1","5-2-3"];let o=0;function c(){return++o+""}const l="v",d="p";function*u(t,e){const n=t.split(" "),s=e.split(" ");for(const t of n)for(const e of s)yield`${t} ${e}`}function*m(t,e){const n=["df","md","at"],s=t.split("-").map(t=>Number(t));yield h("gk",1,e);let a=2;for(let t=0;t<3;t++)for(let r=0;r<s[t];r++)yield h(n[t],a,e),a++;yield h("gk",12,e);let r=13;for(let t=0;t<3;t++)for(let a=0;a<6-s[t];a++)yield h(n[t],r,e),r++}function h(t,e,n){return{name:n(),number:e,gk:g(f("gk",t)),df:g(f("df",t)),md:g(f("md",t)),at:g(f("at",t))}}function f(t,e){return t===e?.75+Math.random()**3*.25:.66*Math.random()}function g(t){return Math.trunc(100*t)}const p=[["Sunderland Black Cats","Black Cats","Sunderland","red","white",l],["Manchester Metropolis","Citizens","Manchester","skyblue","white",l],["Tottenham Borough","Spurs","London","white","navy","c"],["Liverpool Mersey Reds","Reds","Liverpool","white","red","h"],["Nottingham Greenwood","Forest","Nottingham","red","white",d],["Highbury Arsenal","Gunners","London","red","white","c"],["Leeds Union","Whites","Leeds","white","blue","m"],["Brighton Coast Albion","Seagulls","Brighton","white","blue","h"],["Fulham Riverside","Cottagers","London","lightgray","white","m"],["Aston Vale","Villans","Birmingham","maroon","skyblue","c"],["Chelsea Borough","Blues","London","steelblue","royalblue",d],["Crystal Park","Eagles","London","red","blue",d],["Newcastle Tyne","Magpies","Newcastle","white","black",l],["Everton Park","Toffees","Liverpool","royalblue","royalblue","h"],["Manchester Red Devils","Red Devils","Manchester","red","red",l],["Bournemouth Sands","Cherries","Bournemouth","black","red",l],["Brentford Bees","Bees","London","red","white","m"],["Burnley Clarets","Clarets","Burnley","brown","skyblue",d],["West Ham Ironworks","Hammers","London","brown","skyblue",l],["Wolverhampton Wolves","Wolves","Wolverhampton","gold","black",l]],v=360,b=250,y=12;function M(t,a,r,i,o){const c=t.turns[0]?.momentum??0,l=n(o);let d=s(a.players.map(n=>{const s=i&&t.boost[n.number]?1.5:1;return e(l,w(n,t.strategy[0]))**(1/4)*s})),u=s(r.players.map(n=>{const s=!i&&t.boost[n.number]?1.5:1;return e(-1*l,w(n,t.strategy[1]))**(1/4)*s}));const m=1+Math.random()**2*1.5/10;i?u*=m:d*=m;let h=.25;d<u&&(h*=-1);let f="",g=Math.min(Math.max(c+h,-4),4);0===g&&c<0&&(f=a.name+" takes control"),g<0&&0===c&&(f=r.name+" takes control"),0===t.turns.length&&(f="The match kicks off!"),359===t.turns.length&&(f="The final whistle blows. Full time!");const p=[0,0];if(100===o){const[t,e]=k(a,r);g*=-1,f=e,t&&(p[0]=1)}if(0===o){const[t,e]=k(r,a);g*=-1,f=e,t&&(p[1]=1)}return[p,g,f]}function k(t,e){const n=e.players[0],s=(100-n.gk+25)/100,a=Math.random()>s;let r="";return r=a?"Goal for "+t.name:"Great defense from "+n.name,[a,r]}function w(t,e){const[n,s]=e;let a=1,r=1,i=1;return"att"===n&&s&&(a=1.5,r=1,i=a**-1),"prk"===n&&s&&(i=1.5,r=.8,a=i**-1),"prss"===n&&s&&(i=.8,r=1.5,a=.8),{...t,df:t.df*i,md:t.md*r,at:t.at*a}}const L={"-1":"prk",0:"prss",1:"att"},T={prk:t=>`${t} is locking down the attackers!`,prss:t=>`${t} is pressuring up!`,att:t=>`All of ${t} is attacking!`,cntr:t=>`${t} is counter-attacking!`};function P(t,e,n,s){if(t.turns[0].momentum,!t.strategy[s][1]&&Math.random()>1-.7){const a=L[e];t.strategy[s]=[a,y],t.turns[0].evt||(t.turns[0].evt=T[a]?.(n.name)??"")}}const A={songData:[{i:[0,160,128,64,0,160,128,0,64,210,4,7,52,85,0,0,0,60,4,1,2,255,0,0,32,61,5,32,6],p:[1],c:[{n:[139,,,,,,139,,,,,,139,,,,,142,,,140,,,,,139,,,,,,139,,,,,,139,,,,,144,,,142,,,,135,,,,,,135,,,,,,135,,,,,142,,,140,,,,,139,,,,,,139,,,,,,139,,,,,144,,,142],f:[]}]}],rowLen:5513,patternLen:49,endPattern:0,numChannels:1},D=function(){var t,e,n,s,a,r=function(t){return Math.sin(6.283184*t)},i=function(t){return.003959503758*2**((t-128)/12)},o=function(t,e,n){var s,a,r,o,l,d,u=c[t.i[0]],m=t.i[1],h=t.i[3]/32,f=c[t.i[4]],g=t.i[5],p=t.i[8]/32,v=t.i[9],b=t.i[10]*t.i[10]*4,y=t.i[11]*t.i[11]*4,M=t.i[12]*t.i[12]*4,k=1/M,w=-t.i[13]/16,L=t.i[14],T=n*2**(2-t.i[15]),P=new Int32Array(b+y+M),A=0,D=0;for(s=0,a=0;s<b+y+M;s++,a++)a>=0&&(a-=T,l=i(e+(15&(L=L>>8|(255&L)<<4))+t.i[2]-128),d=i(e+(15&L)+t.i[6]-128)*(1+8e-4*t.i[7])),r=1,s<b?r=s/b:s>=b+y&&(r=(1-(r=(s-b-y)*k))*3**(w*r)),o=u(A+=l*r**h)*m,o+=f(D+=d*r**p)*g,v&&(o+=(2*Math.random()-1)*v),P[s]=80*o*r|0;return P},c=[r,function(t){return t%1<.5?1:-1},function(t){return t%1*2-1},function(t){var e=t%1*4;return e<2?e-1:3-e}];this.init=function(r){t=r,e=r.endPattern,n=0,s=r.rowLen*r.patternLen*(e+1)*2,a=new Int32Array(s)},this.generate=function(){var i,l,d,u,m,h,f,g,p,v,b,y,M,k,w=new Int32Array(s),L=t.songData[n],T=t.rowLen,P=t.patternLen,A=0,D=0,S=!1,I=[];for(d=0;d<=e;++d)for(f=L.p[d],u=0;u<P;++u){var C=f?L.c[f-1].f[u]:0;C&&(L.i[C-1]=L.c[f-1].f[u+P]||0,C<17&&(I=[]));var B=c[L.i[16]],N=L.i[17]/512,F=2**(L.i[18]-9)/T,E=L.i[19],R=L.i[20],x=43.23529*L.i[21]*3.141592/44100,H=1-L.i[22]/255,J=1e-5*L.i[23],O=L.i[24]/32,j=L.i[25]/512,q=6.283184*2**(L.i[26]-9)/T,z=L.i[27]/255,G=L.i[28]*T&-2;for(b=(d*P+u)*T,m=0;m<4;++m)if(h=f?L.c[f-1].n[u+m*P]:0){I[h]||(I[h]=o(L,h,T));var W=I[h];for(l=0,i=2*b;l<W.length;l++,i+=2)w[i]+=W[l]}for(l=0;l<T;l++)(v=w[g=2*(b+l)])||S?(y=x,E&&(y*=B(F*g)*N+.5),D+=(y=1.5*Math.sin(y))*(M=H*(v-D)-(A+=y*D)),v=3==R?D:1==R?M:A,J&&(v=(v*=J)<1?v>-1?r(.25*v):-1:1,v/=J),S=(v*=O)*v>1e-5,k=v*(1-(p=Math.sin(q*g)*j+.5)),v*=p):k=0,g>=G&&(k+=w[g-G+1]*z,v+=w[g-G]*z),w[g]=0|k,w[g+1]=0|v,a[g]+=0|k,a[g+1]+=0|v}return++n/t.numChannels},this.createAudioBuffer=function(t){for(var e=t.createBuffer(2,s/2,44100),n=0;n<2;n++)for(var r=e.getChannelData(n),i=n;i<s;i+=2)r[i>>1]=a[i]/65536;return e},this.createWave=function(){var t=44+2*s-8,e=t-36,n=new Uint8Array(44+2*s);n.set([82,73,70,70,255&t,t>>8&255,t>>16&255,t>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,255&e,e>>8&255,e>>16&255,e>>24&255]);for(var r=0,i=44;r<s;++r){var o=a[r];o=o<-32767?-32767:o>32767?32767:o,n[i++]=255&o,n[i++]=o>>8&255}return n},this.getData=function(t,e){for(var n=2*Math.floor(44100*t),s=new Array(e),r=0;r<2*e;r+=1){var i=n+r;s[r]=t>0&&i<a.length?a[i]/32768:0}return s}};class S{async init(t,e){return this.audio=await function(t,e){const n=new D;return n.init(t),new Promise(t=>{let s,a=!1;setInterval(()=>{if(a)t(s);else if(a=n.generate()>=1,a){const t=n.createWave();s=document.createElement("audio"),s.src=URL.createObjectURL(new Blob([t],{type:"audio/wav"})),s.loop=e}},0)})}(t,e),this}play(t){this.audio&&(this.audio.currentTime=0,this.audio.onended=t??null,this.audio.play(),this.audio)}isPlaying(){return!this.audio?.paused}stop(){this.audio?.pause()}}let I,C="off"!==window.localStorage.getItem("bcr-MUSIC");async function B(){I||(I=new S,await I.init(A,!0))}async function N(){await B(),C&&!I.isPlaying()&&I.play()}let F,E,R=null;function x(t,e,n){const s=function(t){for(const t of document.querySelectorAll(".screen, .menu"))t.classList.remove("active");for(const e of document.querySelectorAll(`#${t}, [data-id=${t}]`))if(e.classList.add("active"),"BUTTON"!==e.tagName)return e;return null}(e);if("live"!==e&&R&&(async function(){I.stop()}(),clearInterval(R),K("msc-tgl").setAttribute("disabled","")),"game"===e)return t.reset(),void x(t,"matches");"continue"!==e?("matches"===e&&s&&H(t,s),"team"===e&&s&&G(t,s),"live"===e&&s&&J(t,s,n),"table"===e&&s&&function(t,e){e.innerHTML=V("League Table","")+"<table><tr><th>POS</th><th>Club</th><th>MP</th><th>W</th><th>D</th><th>L</th><th>GF</th><th>GA</th><th>GD</th><th>PTS</th></tr>"+t.table.map((e,n)=>"<tr"+(e.team.id===t.userTeam.id?' class="bold"':"")+"><td>"+n+"</td><td>"+$(e.team,e.team.id===t.userTeam.id?"bold":"",U(e.team.kit))+"</td><td>"+e.mp+"</td><td>"+e.w+"</td><td>"+e.d+"</td><td>"+e.l+"</td><td>"+e.f+"</td><td>"+e.a+"</td><td>"+e.gd+"</td><td>"+e.pts+"</td></tr>").join("")+"</table>"}(t,s),document.getElementsByTagName("main")[0].scrollTop=0):x(t,"matches")}function H(t,e){const n=t.teams.map(t=>[""+t.id,t.name]),s=t.matches.filter(t=>t.teamIds.includes(F)),a=s.find(t=>t.isCurrent);var r;e.innerHTML=(a?V("Next Match","")+"<div class=nm><div><div><b>"+$((r=a).teams[0])+"</b><span>Home</span></div><span>"+U(r.teams[0].kit)+"vs"+U(r.teams[1].kit)+"</span><div><b>"+$(r.teams[1])+"</b><span>Away</span></div></div><div><button class=btn data-round="+r.round+">"+(r.isPending?"Begin":"Continue")+" Match</button></div></div>":"")+V("Full Fixtures",W("view-team","View Team",n,""+F,n=>{F=Number(n),H(t,e)}))+function(t,e){return"<table>"+t.map(t=>"<tr><td class='r fif'>"+$(t.teams[0],t.teams[0].id===e.id?"bold":"")+"</td><td class=cll>"+U(t.teams[0].kit)+"</td><td class='c cll'>"+(t.isPending?t.date.toLocaleDateString(void 0,{month:"short",day:"numeric"}):"<b>"+t.goals.join("x")+"</b>")+"</td><td class=cll>"+U(t.teams[1].kit)+"</td><td class=fif>"+$(t.teams[1],t.teams[1].id===e.id?"bold":"")+"</td></tr>").join("")+"</table>"}(s,t.userTeam),document.querySelector("[data-round]")?.addEventListener("click",e=>{const n=e.target.dataset.round;n&&x(t,"live",n)})}function J(t,e,n){let s=t.matches.find(t=>t.round===Number(n));if(!s)return;void 0===E&&(E=s.teams.findIndex(e=>e.id===t.userTeam.id));const a=s.teams[E],r=s.teamIds.indexOf(t.userTeam.id),[i,o]=s.strategy[r];var c;e.innerHTML="<div class=lg>"+function(t,e){return'<div class="lgh"><button class=\'t '+(0===E?"a":"")+"' data-setclt=0>"+$(t)+"</button>"+U(t.kit)+"<div class=score-w><button id=start class='btn hide'>Start</button><strong id=score class=hide></strong><span id=matchTime class=hide></span></div>"+U(e.kit)+"<button class='t "+(1===E?"a":"")+"' data-setclt=1>"+$(e)+"</button></div>"}(...s.teams)+function(t,e,n,s,a,r){const i=e.players.slice(1),o="<div class=lgfw><div class='lgf "+(n?"":"rev")+"'><b>Defense</b><div>"+e.formation.split("-").map(Number).map(e=>{const n=i.splice(0,e);return"<div class=fmt>"+n.map((e,a)=>{let i="";n.length>4&&n.length<6&&3===a&&(i="<span></span>"),6===n.length&&3===a&&(i="<span></span>");const o=function(t,e,n,s){let a="class='"+t.pos;n&&(a+=" ld"),a+=e?" ds' disabled":"'";const r="<button id='p"+t.number+"' "+a+">"+t.number+"</button>";return e||setTimeout(()=>{const e=K("p"+t.number);function a(t){const n=(y-t)*b,s=document.timeline.currentTime-n;requestAnimationFrame(function t(n){if(!e.isConnected||0===e.getBoundingClientRect().width)return;const a=(n-s)/3e3;e.style.setProperty("--p",""+100*a),a<1?requestAnimationFrame(e=>t(e)):e.style.setProperty("--p","0")})}n&&a(n),e.addEventListener("click",()=>{const e=s(t.number);e&&a(e)})}),r}(e,s,t.boost[e.number],t.isLive?r:()=>0);return i+o}).join("")+"</div>"}).join("")+"</div><b>Attack</b></div>"+a+"</div>";return o}(s,a,a.id===s.teams[0].id,a.id!==t.userTeam.id,function(t){return setTimeout(()=>{K("fmt-c").addEventListener("click",()=>{x(t,"team")})}),'<button id=fmt-c class="btn">Change Formation</button>'}(t),t=>s?.boostPlayer(t))+function(t,e){return"<div class=lgp style='--c1: "+t.kit.color1+"; --c2: "+(e.kit.color1!==t.kit.color1?e.kit.color1:e.kit.color2)+"'><div id=ball><span>⚽</span><div></div></div></div>"}(...s.teams)+j(i,o,e=>{if(s?.isLive)return s.setStrategy(t.userTeam.id,e)})+"<div class=lgs><div class=c><b>Match Events</b></div><div id=lgs-ms>"+(0===(c=s.turns).length?"<p class=c>Click the <b>Start</b> button above to begin.<br/><br/>To play your next match, or get back to the current match, navigate to the <b>Fixtures</b> menu.</p>":c.filter(t=>t.evt).reverse().map(q).join(""))+"</div></div></div>";const l=K("start"),d=K("score"),u=K("matchTime");var m;s.isPending?l.classList.remove("hide"):(d.classList.remove("hide"),u.classList.remove("hide")),s.isPending?l.addEventListener("click",()=>{s=s.advance(),O(t,e,n)}):(z(s),s.isLive&&(m=s,N(),K("msc-tgl").removeAttribute("disabled"),l.classList.add("hide"),d.classList.remove("hide"),u.classList.remove("hide"),R=setInterval(()=>{m.isLive?(z(m=m.advance()),m.isDone&&(O(t,e,n),E=void 0)):R&&clearInterval(R)},b),N())),document.querySelectorAll("[data-setclt]").forEach(s=>{s.addEventListener("click",()=>{E=Number(s.dataset.setclt),O(t,e,n)})})}function O(t,e,n){R&&clearInterval(R),J(t,e,n)}function j(t,e,n){return setTimeout(()=>{function s(t,e){const s=e*b,a=(y-e)*b,r=document.timeline.currentTime-a;requestAnimationFrame(function e(a){if(!t.isConnected||0===t.getBoundingClientRect().width)return;const i=(a-r)/s;t.style.setProperty("--p",""+100*i),i<1?requestAnimationFrame(t=>e(t)):(t.style.setProperty("--p","100"),K("lgst").outerHTML=j("",0,n))})}document.querySelectorAll("[data-stg]").forEach(a=>{a.dataset.stg===t&&e&&s(K("lgst-a"),e),a.addEventListener("click",()=>{const t=n(a.dataset.stg);if(!t)return;const[e,r]=t;K("lgst").outerHTML=j(e,r,n),s(K("lgst-a"),r)})})}),"<div id=lgst><div class=c><b>Strategy</b></div><div class=lgst-b>"+[["Man Mark",["+df","-at","-md"],"prk"],["Press High",["+md","-df","-at"],"prss"],["All Out Attack",["+at","-df"],"att"]].map(([n,s,a])=>"<button "+(t===a&&e?"id=lgst-a ":"")+(e?"disabled ":"")+"data-stg="+a+" class='btn"+(t===a&&e?" ld":"")+"'><b>"+n+"</b> "+s.map(t=>"<span>"+t+"</span>").join("")+"</button>").join("")+"</div></div>"}function q(t){const e=t.goals.some(t=>t);return"<div id=tm-"+t.id+"><div class=tm>"+t.time+"'</div> <div class='"+(e?"hm":"")+"'>"+t.evt+"</div></div>"}function z(t){const e=K("ball"),n=t.turns[0];e.style.setProperty("--pct",n.ballPosition.toFixed(2)+"%");const s=n.momentum/4,a=.25*s/Math.abs(s)+s;if(e.style.setProperty("--ang",Number.isNaN(a)?"0":a.toFixed(2)),e.style.setProperty("--angc",n.momentum>0?"var(--c1)":"var(--c2)"),K("matchTime").innerHTML=n.time+"min",K("score").innerHTML=t.goals.join("x"),n.evt){const t=K("lgs-ms"),e=t.lastChild?.getAttribute("id");e!=="tm-"+n.id&&(t.innerHTML+=q(n))}}function G(t,e){const n=t.userTeam,s=i.map(t=>[t,t]);e.innerHTML=V("Your Squad",W("change-formation","Change Formation",s,n.formation,n=>{t.userTeam.setFormation(n),G(t,e)}))+"<table><tr><th></th><th>#<th>POS</th><th>NAME</th><th>GK</th><th>DF</th><th>MD</th><th>AT</th></tr>"+n.players.map((t,e)=>"<tr title='Click to select for changing positions' data-swap='"+e+"' class="+(t.pos??"sub")+"><td>⇆</td><td>"+t.number+'<td><b class="pos">'+(t.pos??"sub")+"</b></td><td>"+t.name+"</td><td>"+t.gk+"</td><td>"+t.df+"</td><td>"+t.md+"</td><td>"+t.at+"</td></tr>").join("")+"</table><p class=c>Click a player to select it and click again other player to swap them.</p>";const a=document.querySelectorAll("tbody [data-swap]");for(const n of a)n.addEventListener("click",()=>{let s=null;for(const t of a)t.classList.contains("slcd")&&(s=t),t.classList.remove("slcd");if(null===s)n.classList.add("slcd");else if(s!==n){const a=Number(s.dataset.swap),r=Number(n.dataset.swap);t.userTeam.swapPlayers(Number(a),Number(r)),G(t,e)}})}function W(t,e,n,s,a){const r="<div><label>"+e+":</label><select id="+t+">"+n.map(([t,e])=>"<option value="+t+(t===s?" selected":"")+">"+e+"</option>").join("")+"</select></div>";return setTimeout(()=>{K(t).addEventListener("change",e=>{const n=e.target.value;a(n),function(t){K(t).focus()}(t)})}),r}function K(t){const e=document.querySelector("#"+t);if(!e)throw new Error;return e}function $(t,e="",n=""){return'<div class="name '+e+'">'+n+"<span>"+t.name.slice(0,5)+"<span class=sr>"+t.name.slice(5)+"</span></span></div>"}function U(t){return'<i class="tshirt '+t.pattern[0]+'" style="--color1: '+t.color1+"; --color2: "+t.color2+'"></i>'}function V(t,e){return"<header><h2>"+t+"</h2>"+e+"</header>"}const Y=new Proxy(window.localStorage,{get:(t,e)=>{const n=t.getItem("bcr"+e);if(n)return JSON.parse(n)},set:(t,e,n)=>(t.setItem("bcr"+e,JSON.stringify(n)),!0)});if(Y.teams){const t=document.getElementById("continue");t?.classList.remove("hide")}!function(t){F=t.userTeam.id,R=null;const e=K("msc-tgl");e.addEventListener("click",async()=>{await async function(){return await B(),C?(C=!1,I.stop()):(C=!0,I.play()),C}()?e.classList.remove("off"):e.classList.add("off")});for(const e of document.querySelectorAll(".menu"))e.addEventListener("click",e=>{const n=e.target.dataset.id;x(t,n)});x(t,"splash"),document.body.style.visibility="visible"}(new class{constructor(t,e){this.storage=e,this.userTeamId=t,this.storage.teams||this.reset()}reset(){this.storage.initialDate=Date.now(),this.storage.currentDate=Date.now(),this.storage.teams=function(){const t=function(){const t=[...u("João José Antônio Carlos Pedro Lucas Marcos Rafael Juliano Márcio","Silva Santos Costa Pereira Oliveira Rodrigues Martins Sousa"),...u("Juan Carlos Javier Diego Miguel Angel Jose David Alejandro","Garcia Rodriguez Martinez Hernandez Lopez Gonzalez Perez Sanchez Ramirez Torres"),...u("John Paul Mark Michael Peter David Chris Robert James William Jack Jim Aaron Jay","Smith Jones Baker Hill Taylor Wilson Brown Davis Cox Day Rey Law Key"),...u("Stefan Klaus Mica Thomas Andreas Jurgen Frank","Muller Schmidt Weber Schneider Fischer Meyer"),...u("Leo Hugo Luca Marco Antonio Giovanni Francesco Alessandro","Rossi Ferrari Ricci Romano Bianchi Gallo Conti"),...u("Jean Pierre Michel André Louis Philippe Nicolas","Martin Bernard Dubois Petit Moreau Laurent"),...u("Hiroshi Takeshi","Sato Suzuki"),...u("Femi Ade Kwame Kofi Jide Emeka Chinedu Olu Yaw Kwaku","Adebayo Okafor Nkrumah Mensah Diallo Sow Traoré Keita Bankole Eze")];return a(t),()=>t.pop()||""}();return p.map(([e,n,s,r,o,c],l)=>{const d=a([...i])[0];return{id:l,name:e,nick:n,region:s,kit:{color1:r,color2:o,pattern:c},formation:d,players:Array.from(m(d,t))}})}(),this.storage.matches=Array.from(function(t){const e=[],n=[...Array(t).keys()];for(let s=0;s<t-1;s++){const a=[];for(let e=0;e<t/2;e++){const r=[n[e],n[t-1-e]];void 0!==r[0]&&void 0!==r[1]&&(0===e&&s>=t/2&&r.reverse(),a.push({id:c(),teamIds:r,turns:[],goals:[0,0],boost:{},strategy:[["",0],["",0]]}))}e.push(a);const r=n.pop();r&&n.splice(1,0,r)}return e.sort(()=>Math.random()-.5),e.flatMap((t,e)=>t.map(t=>({...t,round:e})))}(this.teams.length))}get initialDate(){return new Date(this.storage.initialDate)}get currentDate(){return new Date(this.storage.currentDate)}getDateFromInitial(t){const e=this.initialDate;return e.setDate(e.getDate()+7*t),e}get teams(){return this.storage.teams.map(t=>({...t,players:r(t.players,t.formation),setFormation:e=>this.setTeamFormation(t.id,e),swapPlayers:(e,n)=>this.swapPlayers(t.id,e,n)}))}get userTeam(){return this.teams.filter(t=>t.id===this.userTeamId)[0]}get matches(){const t=Object.fromEntries(this.teams.map(t=>[t.id,t]));return this.storage.matches.map(e=>this.getMatch(e,t))}getMatch(t,e){const n=[e[t.teamIds[0]],e[t.teamIds[1]]],s=this.getDateFromInitial(t.round),a=t.round===this.currentRound&&t.teamIds.includes(this.userTeamId),r=this,i={...t,teams:n,date:s,isCurrent:a,advance(){return r.advanceMatch(this,e)},boostPlayer(t){return r.boostPlayerInMatch(this,t)},setStrategy(t,e){return r.setTeamStrategyInMatch(this,t,e)}};return t.turns.length===v?{...i,isPending:!1,isLive:!1,isDone:!0}:t.turns.length>0?{...i,isPending:!1,isLive:!0,isDone:!1,turns:t.turns}:{...i,isPending:!0,isLive:!1,isDone:!1}}advanceMatch(t,e){const a=this.storage.matches;let r=null;for(const i of a)if(i.round===t.round)if(i.id===t.id){if(i.turns.length===v)return this.getMatch(t,e);const s=i.turns[0],a=s?.ballPosition??50,o=e[i.teamIds[0]],c=e[i.teamIds[1]],l=o.id===this.userTeamId,[d,u,m]=M(i,o,c,l,a);let h=a;d.some(t=>t)?h=50:u>0?h+=1:u<0&&(h-=1);const f=Math.round(i.turns.length/4);i.turns.unshift({id:i.turns.length,ballPosition:Math.min(Math.max(h,0),100),momentum:u,time:f,goals:d,evt:m!==s?.evt?m:""}),i.goals=[i.goals[0]+d[0],i.goals[1]+d[1]];for(const t in i.boost){const e=i.boost[t];e>0?i.boost[t]=e-1:delete i.boost[t]}for(const t of[0,1])--i.strategy[t][1]<=0&&(i.strategy[t]=["",0]);const g=l?1:0,p=e[i.teamIds[g]];let b=n(h);l&&(b*=-1),P(i,b,p,g),r=i}else if(i.turns.push({}),i.turns.length===v){const t=i.teamIds.map(t=>e[t]).map(t=>s(t.players.flatMap(t=>[t.df,t.md,t.at]))),n=[6,3];t[1]>t[0]&&n.reverse(),i.goals=[Math.trunc(Math.random()*n[0]),Math.trunc(Math.random()*n[1])]}this.storage.matches=a;const i=this.getMatch(r,e);return i.isDone&&(this.storage.currentDate=this.getDateFromInitial(t.round+1)),i}boostPlayerInMatch(t,e){const n=this.storage.matches,s=n.findIndex(e=>e.id===t.id),a=n[s].boost;return a[e]||Object.keys(a).length>=3?0:(n[s].boost={...a,[e]:y},this.storage.matches=n,y)}setTeamStrategyInMatch(t,e,n){const s=this.storage.matches,a=s.findIndex(e=>e.id===t.id),r=s[a].teamIds.indexOf(e),[i,o]=s[a].strategy[r];return o?[i,o]:(s[a].strategy[r]=[n,y],this.storage.matches=s,[n,y])}setTeamFormation(t,e){const n=this.storage.teams;n[t].formation=e,this.storage.teams=n}swapPlayers(t,e,n){const s=this.storage.teams,a=s[t].players;[a[e],a[n]]=[a[n],a[e]],s[t].players=a,this.storage.teams=s}get currentRound(){const t=this.storage.matches.find(t=>t.turns.length!==v);return t?.round}get table(){return function(t,e){const n=t.map(t=>({team:t,mp:0,w:0,d:0,l:0,f:0,a:0,gd:0,pts:0}));for(const t of e){const{teamIds:[e,s],goals:a,isDone:r}=t;r&&(n[e].mp+=1,n[s].mp+=1,a[0]>a[1]?(n[e].w+=1,n[s].l+=1,n[e].pts+=3):a[0]<a[1]?(n[e].l+=1,n[s].w+=1,n[s].pts+=3):(n[e].d+=1,n[s].d+=1,n[e].pts+=1,n[s].pts+=1),n[e].f+=a[0],n[e].a+=a[1],n[e].gd+=a[0]-a[1],n[s].f+=a[1],n[s].a+=a[0],n[s].gd+=a[1]-a[0])}return n.sort((t,e)=>t.pts!==e.pts?e.pts-t.pts:t.gd!==e.gd?e.gd-t.gd:t.f!==e.f?e.f-t.f:t.a-e.a),n}(this.teams,this.matches)}}(0,Y))</script>