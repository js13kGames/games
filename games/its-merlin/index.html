<!doctype html><title>It's Merlin - js13kGames 2023</title><style>body,html{background:#0f0f11;width:100vw;height:100vh;margin:0;padding:0;position:fixed}div{display:flex;justify-content:center;align-items:center;flex-direction:column;height:100%}#w{position:absolute;width:550px;height:800px;margin:auto;top:0;left:0;right:0;bottom:0;pointer-events:none;transition:all .5s ease;z-index:10}canvas{-ms-interpolation-mode:nearest-neighbor;image-rendering:-webkit-optimize-contrast;image-rendering:-webkit-crisp-edges;image-rendering:-moz-crisp-edges;image-rendering:-o-crisp-edges;image-rendering:pixelated;display:block;background:#06011f;width:480px}canvas:first-of-type{height:128px}canvas:nth-of-type(2){height:640px;cursor:none}</style><div id=w></div><div><canvas id=1></canvas><canvas id=2></canvas></div><script>!function(A){var t={};function e(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return A[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}e.m=A,e.c=t,e.d=function(A,t,i){e.o(A,t)||Object.defineProperty(A,t,{enumerable:!0,get:i})},e.r=function(A){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(A,"__esModule",{value:!0})},e.t=function(A,t){if(1&t&&(A=e(A)),8&t)return A;if(4&t&&"object"==typeof A&&A&&A.__esModule)return A;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:A}),2&t&&"string"!=typeof A)for(var n in A)e.d(i,n,function(t){return A[t]}.bind(null,n));return i},e.n=function(A){var t=A&&A.__esModule?function(){return A.default}:function(){return A};return e.d(t,"a",t),t},e.o=function(A,t){return Object.prototype.hasOwnProperty.call(A,t)},e.p="",e(e.s=3)}([function(A,t){zzfx=(...A)=>zzfxP(zzfxG(...A)),zzfxP=(...A)=>{let t=zzfxX.createBufferSource(),e=zzfxX.createBuffer(A.length,A[0].length,zzfxR);return A.map((A,t)=>e.getChannelData(t).set(A)),t.buffer=e,t.connect(zzfxX.destination),t.start(),t},zzfxG=(A=1,t=.05,e=220,i=0,n=0,a=.1,h=0,s=1,o=0,l=0,r=0,c=0,f=0,g=0,d=0,m=0,p=0,x=1,w=0,M=0)=>{let y,B,u=2*Math.PI,R=o*=500*u/zzfxR**2,E=(0<d?1:-1)*u/4,U=e*=(1+2*t*Math.random()-t)*u/zzfxR,P=[],I=0,z=0,C=0,v=1,b=0,k=0,T=0;for(i=99+zzfxR*i,w*=zzfxR,n*=zzfxR,a*=zzfxR,p*=zzfxR,l*=500*u/zzfxR**3,d*=u/zzfxR,r*=u/zzfxR,c*=zzfxR,f=zzfxR*f|0,B=i+w+n+a+p|0;C<B;P[C++]=T)++k%(100*m|0)||(T=h?1<h?2<h?3<h?Math.sin((I%u)**3):Math.max(Math.min(Math.tan(I),1),-1):1-(2*I/u%2+2)%2:1-4*Math.abs(Math.round(I/u)-I/u):Math.sin(I),T=(f?1-M+M*Math.sin(2*Math.PI*C/f):1)*(0<T?1:-1)*Math.abs(T)**s*A*zzfxV*(C<i?C/i:C<i+w?1-(C-i)/w*(1-x):C<i+w+n?x:C<B-p?(B-C-p)/a*x:0),T=p?T/2+(p>C?0:(C<B-p?1:(B-C)/p)*P[C-p|0]/2):T),y=(e+=o+=l)*Math.sin(z*d-E),I+=y-y*g*(1-1e9*(Math.sin(C)+1)%2),z+=y-y*g*(1-1e9*(Math.sin(C)**2+1)%2),v&&++v>c&&(e+=r,U+=r,v=0),!f||++b%f||(e=U,o=R,v=v||1);return P},zzfxV=.3,zzfxR=44100,zzfxX=new(window.AudioContext||webkitAudioContext)},function(A,t){zzfxM=(A,t,e,i=125)=>{let n,a,h,s,o,l,r,c,f,g,d,m,p,x,w,M=0,y=[],B=[],u=[],R=0,E=0,U=1,P={},I=zzfxR/i*60>>2;for(;U;R++)y=[U=c=d=p=0],e.map((i,d)=>{for(r=t[i][R]||[0,0,0],U|=!!t[i][R],w=p+(t[i][0].length-2-!c)*I,x=d==e.length-1,a=2,s=p;a<r.length+x;c=++a){for(o=r[a],f=a==r.length+x-1&&x||g!=(r[0]||0)|o|0,h=0;h<I&&c;h++>I-99&&f?m+=(m<1)/99:0)l=(1-m)*y[M++]/2||0,B[s]=(B[s]||0)-l*E+l,u[s]=(u[s++]||0)+l*E+l;o&&(m=o%1,E=r[1]||0,(o|=0)&&(y=P[[g=r[M=0]||0,o]]=P[[g,o]]||(n=[...A[g]],n[2]*=2**((o-12)/12),o>0?zzfxG(...n):[])))}p=w});return[B,u]}},function(A,t,e){},function(A,t,e){e.r(t);const i=[16,24,24,24,24,24,24,24,24,24,24,24,24,24,20,21,0,0,0,0,0,0,0,0,0,0,0,0,0,22,21,0,0,0,0,0,0,0,0,0,0,0,0,0,22,30,17,18,18,18,18,18,18,18,18,18,18,18,19,31],n=[[40,17,18,18,18,18,18,18,18,18,18,18,18,19,40,40,12,13,14,15,13,13,14,13,13,14,13,14,13,40,40,1,47,47,47,47,47,47,47,47,47,47,47,2,40,40,3,7,7,7,7,7,7,7,7,7,7,7,4,40,40,3,7,7,7,7,7,7,7,7,7,7,7,4,40,40,3,7,7,7,7,7,7,7,7,7,7,7,4,40,40,3,7,7,7,7,7,7,7,7,7,7,7,4,40,40,3,7,7,7,7,7,7,7,7,7,7,7,4,40,40,3,7,7,7,7,7,7,7,7,7,7,7,4,40,40,3,7,7,7,7,7,7,7,7,7,7,7,4,40,1,7,7,7,7,7,7,7,7,7,7,7,7,7,2,3,7,7,7,7,7,7,7,7,7,7,7,7,7,4,5,7,7,7,7,7,7,7,7,7,7,7,7,7,6,13,3,7,7,7,7,7,7,7,7,7,7,7,4,13,13,3,7,7,7,7,7,7,7,7,7,7,7,4,13,40,3,7,7,7,7,7,7,7,7,7,7,7,4,40,40,3,7,7,7,7,7,7,7,7,7,7,7,4,40,40,3,7,7,7,7,7,7,7,7,7,7,7,4,40,40,5,46,46,46,7,7,7,7,7,46,46,46,6,40,40,40,40,40,40,5,46,46,46,6,40,40,40,40,40],[16,0,36,37,0,0,0,41,0,0,0,36,37,0,20,21,0,38,39,0,0,0,42,0,0,0,38,39,0,22,21,0,0,0,0,0,0,0,0,0,0,0,0,34,22,21,0,10,0,0,0,0,32,0,0,0,0,11,0,22,21,43,0,0,0,0,0,0,0,0,0,0,0,0,22,21,0,0,0,9,0,0,0,0,0,0,33,0,0,22,21,0,0,35,0,0,0,8,0,0,0,0,0,0,22,21,0,0,0,0,0,0,0,0,0,0,0,0,0,22,29,0,0,0,0,0,0,0,0,0,0,9,0,0,28,14,0,0,10,0,0,0,0,10,0,0,0,0,0,15,0,0,0,8,11,0,0,0,0,0,0,0,0,0,0,0,8,0,0,0,0,0,0,0,0,0,0,8,0,0,0,0,0,0,0,0,0,0,32,0,0,0,0,0,0,45,0,0,0,0,0,0,0,0,9,0,0,0,0,44,21,0,0,0,0,0,0,0,0,0,11,0,0,0,22,21,34,0,0,0,0,0,0,0,0,0,0,0,0,22,21,0,0,8,0,0,0,0,0,0,0,0,0,0,22,21,0,32,0,0,0,0,0,11,0,0,0,33,0,22,21,0,34,35,0,10,0,0,0,0,0,0,0,43,22,30,17,18,18,18,20,0,0,0,16,18,18,18,19,31],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1]],a=["s:10-m:6","s:10-m:5-j:1","s:8-m:6-j:2","b1","s:4-j:4-p:5-m:3","p:6-j:5-s:5","p:8-j:6-k:2","b2","k:5-p:5-j:5","k:5-i:3-s:7","i:5-p:5-j:5","b3"],h={s:{hp:20,s:1.8,dm:.8,sdm:0,q:0},m:{hp:30,s:.5,dm:.5,sdm:10,q:1,c1:"#801535",c2:"#803a5d"},j:{hp:40,s:2,dm:.8,sdm:0,q:0},p:{hp:40,s:.8,dm:.7,sdm:15,q:1,c1:"#ee8a2e",c2:"#c56025"},k:{hp:80,s:1,dm:1.4,sdm:0,q:0},i:{hp:30,s:.7,dm:1,sdm:30,q:1,c1:"#effd34",c2:"#a2af05"},b1:{hp:500,s:.35,dm:1.7,sdm:5},b2:{hp:800,s:.45,dm:2.5,sdm:10},b3:{hp:1100,s:.3,dm:5,sdm:20}},s=[{t:0,d:"Increase damage +4",c:0,k:"dm",v:4},{t:0,d:"Number of bullets +1",c:3,k:"bn",v:1},{t:1,d:"Increase HP +30",c:0,k:"mhp",v:30},{t:1,d:"Restore 30% HP",c:0,k:"hp",v:30},{t:1,d:"Restore 0.1% HP per second",c:1,k:"hps",v:.1},{t:1,d:"Restore +1 HP per kill",c:10,k:"hpk",v:1},{t:2,d:"Increase fire rate +10%",c:160,k:"cd",v:-80},{t:2,d:"Increase movement speed +5%",c:3.2,k:"s",v:.2}];class o{constructor(A){this.i=new Image,this.i.src=A}}class l{constructor(A,t){this.x=A,this.y=t,this.vx=2*Math.random()-1,this.vy=2*Math.random()-1,this.alpha=1,this.radius=2}update(){this.x+=this.vx,this.y+=this.vy,this.alpha-=.045}isExpired(){return this.alpha<=0}}e(0),e(1);var r=document.getElementById("w"),c=document.getElementById("2");c.width=480,c.height=640;var f=c.getContext("2d");f.imageSmoothingEnabled=!1,f.textBaseline="alphabetic";var g=document.getElementById("1");g.width=480,g.height=128;var d=g.getContext("2d");d.imageSmoothingEnabled=!1,d.textBaseline="alphabetic";var m=localStorage.getItem("ms")||1;const p=new class{constructor(A,t){this.img=new Image,this.img.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAXCAMAAACMPLmjAAAAHlBMVEUAAAAAAAAiIiL99+1WY70Ak8T2s3zTv6nitpS/gVHFd9grAAAAAnRSTlMAgJsrThgAAADNSURBVHjapZLBDoMwDEOZS1r4/x9eesiMZSGo5sOkh8lLhLZ5gG0lPoB9ycAB8i5OAtkHgOsDUfgCN2QCMLaLyBmZjxkY+0VcEFdDZOZbxnKRLZSN3GnsF07aawMkxnIR75ENo/fW+vwprthFtrAGgHx9ogsh0b4GGgWPQu1L0I6jn2dveCdsJqjgUeh9Bnsp8FJYKUHEUL4XsldBjHshZEB7CkL6icUov/X8BDPJA8S6aCLZe/6XRzIuWMIf8QH7mmcSF3n7aFY5DX/yF8peC5yjxrv/AAAAAElFTkSuQmCC",this.wp=new Image,this.wp.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAMAAACROYkbAAAAFVBMVEUAAAAAAAD/wPteOZKFR5+rXaL0uMA1aT2mAAAAAnRSTlMAgJsrThgAAADTSURBVHjajZNBDoQwDAPbSbv/f/I2bi1YIqS1uBjbkws0KaRmAe1/sfZzaYzwvAUgIC8DyTEBIAInJ4GAKx6UgygF8g0Qu87nowbKbwPbk7sOUwwYceUm1MGVh3zupSkAM2MTziDxZxDOTQimrrMbPAvpSYd9BUy0NyAFLlSgZYD3vlAA8y+AELWAPGK+AHqQBF2N/ijA9uTzAmgdZIG1p8ctpw5+8u5PnzHSsowbzsvgke+JdNkxDKyDe77MVpeOgQP0v+BBPUh7EWwgalyDVg9+AW+nCkl5dVB3AAAAAElFTkSuQmCC",this.x=A,this.y=t,this.s=2,this.hp=100,this.mhp=100,this.a=0,this.dm=10,this.cd=800,this.score=0,this.bn=1,this.hps=0,this.hpk=0,this.inc=0}res(A,t){this.x=A,this.y=t,this.s=2,this.hp=100,this.mhp=100,this.dm=10,this.cd=800,this.score=0,this.bn=1,this.hps=0,this.hpk=0,this.inc=0}pp(A){if("hp"===A.k){const t=A.v/100*this.mhp;this.hp=this.hp+t>this.mhp?this.mhp:this.hp+t}else"mhp"===A.k?(this.mhp+=A.v,this.hp=this.hp+A.v>this.mhp?this.mhp:this.hp+A.v):this[A.k]+=A.v}hpkill(){if(this.hpk>0){const A=this.hp+this.hpk;this.hp=A>this.mhp?this.mhp:A}}}(c.width/2,c.height/2),x=new o("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQBAMAAABUyWQaAAAAD1BMVEUAAACrXaJeOZL99+30uMByECqQAAAAAXRSTlMAQObYZgAAAHNJREFUeF6FkdEJwCAMRK+ZwNAuILhA6ATS/XfqoeX6YWkkfjx5cDEBYO4Ff8euk8IqitFiEcUSVlFM9UsU1wlOi7UVVApwiJsPrVsvgB18oFs7XmYgY4OFAbxEiBNBETEj9iciIM6aTL6ZDiofdb6sdN035TYYG4rgdHUAAAAASUVORK5CYII=").i,w=new o("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAXCAMAAACMPLmjAAAAElBMVEUAAAAAAAD99+3Tv6kiIiK7l2952uM1AAAAAnRSTlMAgJsrThgAAACTSURBVHja3ZJBCoAwDAS12f7/y9I9JOAcIu3NBYUNw6wHr39EmV1BjDHWo71BCyLCAgDtIA/sGQzWwQHQDEBAgELyPPRCCqTV1QvPBeR9mFPSBPBZ4CYA6BjkQv9FHPSPEiEBgBCDGWUDACEGfaoPJFBC8tVfBk9SSN5RmPGhJt2z+gC+Jvyq7iSfIe/cmY3unPQH0BgHya53CnMAAAAASUVORK5CYII=").i,M=new o("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAXCAMAAACMPLmjAAAAElBMVEUAAAAAAAAiIiKAOl2AFTX99+34PHM2AAAAAnRSTlMAgJsrThgAAACbSURBVHja7ZNRCsAgDENdrfe/8uqUdkvmCn4vICwmfQqy8utVctMeoLokBWIBAOxRiwGdkuxGS8CINQdygQHsGcADrYk0zW6UAnLgqjAa24CezZUDuXB9dUhfCGQAF4ygaqXqgC8gFuKdNF4pAVLhBnDrXkwIrHhieMrNhp8FdU2Ae8qHDS3+jRDnZmHjeAg3MAdLA6ULPOQwfwI+LAibkXVnSwAAAABJRU5ErkJggg==").i,y=new o("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAXCAMAAACMPLmjAAAAFVBMVEUAAAAAAAAiIiLaTjifKU799+1fLVbRFcKyAAAAAnRSTlMAgJsrThgAAADASURBVHjapY8BCsJADATj9C7/f7JNlC7HcijtSpHZoVmNf4KeW2FyPXFnkTmZ/WDeC1/sA0B9uffCF4GjArj3whcZxyeEeSt8sQ+MujEI81b4YjPzxLrv3gstiqG0eyt2i5knp3srdov0J92vxW6RBA5y462wxU7CzqvAF3WBRvegAqrQIn7AfxGoALHeWUl47Q0gURaOEBfF5aUH2X8gW7FyIC6MxfeBzvENIC4MENeBxRf/SLCi8ethIh7y47wBPDcJWy7wfYkAAAAASUVORK5CYII=").i,B=new o("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAXCAMAAACMPLmjAAAAJFBMVEUAAAAAAAAAAAAiIiLFYCWPQCnFJThiIy8xQVJLp0c9c0/uii7NXnwpAAAAA3RSTlMAgAdfkck2AAAA+ElEQVR42q2OW3JDIQxDQ0XJw/vfb1VkOzPo47bTioQ7xwKJ2/8IwDn4ZcDzhWPwl4TrAFAHPx6a9USBjTj7tl+4Ym3BA/2B7vN+BDO4IQdioid4IWZMXaCw/ZU880Q1wgozIOgFYwBsXs0VuCR4YQeAfZQzVjcy2Qo1iPrDmPe7kYIV6EnQAoyJ1bi/VpgXpAnjCkBOrVBvFk8ImzOgD/BjhfsKZ1yNEeJ8EI23rJBqs3imINoRXODPCyncUxbYef0i9yl8pnARaL4FXAS63wdA+YEf8sAdY2gXd+A30+kLY5i/D9CoXYxRO3GgRTh9arScD7TBx+0LAGsSV9KDKqQAAAAASUVORK5CYII=").i,u=new o("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAXCAMAAACMPLmjAAAAGFBMVEUAAAAAAABy1s5BcIkiIiL99+3MAACWCwtbFfYZAAAAAnRSTlMAgJsrThgAAADOSURBVHjarZRRDgIhEENdKHD/GztOiVWazXxojZu8KfMw0fj4Q5ARnlzu994iEB68hcpmHUiFNk6WkMHJPKPJySYUf97JzyWDegn3vl/YMmNgM3MjhF8Ygp7hqBBaT4FGhdB7DvgaKIXe4x0KCqH3iHLNMQYFpVC9C+JdCb2PyVprzsmvphJ6L0EjFkLrI+hxILgFVkLrJWg5KITWc4AVNQWl0HsK+PsuhN7rLyGfLmS9FzjwCy/giuSTHHkxyMgFRj0PJH/FmfLbPvIbPwEfOwyJJUWJlQAAAABJRU5ErkJggg==").i,R=new o("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAXCAMAAACMPLmjAAAALVBMVEUAAAAAAAD8y6MiIiJJp5DaTjiPQCnkbjPitpQninMxQVKirwXv/TTFYCXuji6Ftt+WAAAAAnRSTlMAgJsrThgAAADcSURBVHjazY5BisQwDARtVaJ4MrP7/+eOYxFMJINgT9sHg1x0SeV/hDt/7R89+xUy4ZIz2hacEFfwfB7QWtv3X3amcIRHIXDM3+si0hqFh/AAd6HjJhSaWCjqhMUV/EIzShO4+ujnnQkjL6NrT+8nwsDHiSK2Av3RVBj5cdwbVEsujBzOniEgFzo+wtZzyqlQEmHkJhiGTUmFkU9B7+dCz6MgF0ZeeF3RROBmJwCUF0sh21048dxizbXQRivYR1xYodaq47X5/rAZiwKseH3E5sHnPD8in4ZkVtb8C33FD4OdsisfAAAAAElFTkSuQmCC").i,E=new o("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAAAgCAMAAADt/IAXAAAAJ1BMVEUAAAAAAADX0731/+iS6MArK0UiIiJPpLjE+OGAf9Gdk4dQT6PmRTlEULo4AAAAAnRSTlMAgJsrThgAAAHoSURBVHja7ZHhbuMwDIM7W2Ecr+//vMdICBRZ2+mKA7b9GNOgjmmKH5LHjxGQn6K2bfNFmX/Z7/1e0DsywPvmixfzQAfSY8z3e0HPBNYLJIA6D9oLIAV8NAD4KwDGgAOUeTczYD5yL+iJAOD2NkRk48Loy7ybGTAfuReYHSu24zg2Ef1zs8ib2VqLgLrlR/QxFJgPr7BvaD4XfTEbFQE17/3UHbBRRuD5di8wP7wi7Pvl7zucwPMB0PLuRsBGrSdiweV7B33Cy3nTj17O9yuvdgKMALpeC1T+jcx/PoHn03wjqPKWzYAJIBRkgOvAu/BH280irwDzY8AZAFKBd3CG+UNUQ31L13n0+Rng1AkwwlzA7VCBIYCc94DjVXkDmBlwOgCXucAIHYA25MAYOIRLB6jyaLxmBpxqXANmLph3gGnj96Hxc+3vp8rjvDIg1KAUJBc4oVaoL9hFdoj6Nr7OmxAB3bkIU8FF6ADnrkoGHKDOm1bAxyKsBX5CASYbmBa6nDHADQKUedcK+EiKBcHpAAGgcR0BAvBGmXetgBkgFiwWf9xuu6pBTwBl/h8BddRSEH3mlL4NqoF6JV8D5oI1THSbgdhe52vAukAdn5Tt1wGLgkr/Dfi1yoC/+qF6C/pmn/pin/om/w8abieTAM+HggAAAABJRU5ErkJggg==").i,U=new o("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAAAgCAMAAADt/IAXAAAAHlBMVEUAAAAAAAD99+3/iTMiIiLmRTnTv6m7l2/wtUE55kabY1xAAAAAAnRSTlMAgJsrThgAAAFHSURBVHjazY/RjoQgFEPv0orO///wVnbMfQCniYTsNIgPh6Q98W0hHV9bzuOg/o4vEuDBs0A/xxcJiB6ALjq+RiCIvwLQ8TUCwbq3VDq+RkAFLIp+jq8R0IOXGviqdHyNgB6UlkrH1wgEWVh0yDFOzjUChaztFA7bk+cGP9ALZoG2VZ3SFwii1IvXAj1xA71gX1BEa+kLzulgcooXmoFWsC+gyPmdBe+ZyRm8OIPJxwOTe8Es2EkB7n1BJXUnD7LagV6wL1DFPipgu5MrtAOtYFcgtOswCzIdz5iBRjBDbGzZ0DHP/UAvCGBTgEGB5/MCAu9sfMCnBbJhc3xaABEYvtgavh2QHGYg4AXGDcozDp0ciCeC+DwAyWcF2tr7Fxxj4OIxPeA+VOIRb6t5Cd7k4oipzArcDfi5Ap0hz8Rarizn/2wY35NfFwEUZ2wavpoAAAAASUVORK5CYII=").i,P=new o("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAAAgCAMAAADt/IAXAAAAKlBMVEUAAAAAAAAAAAAAAAAiIiLML3tIOzozMzOcKnDrVJv/wqHQnI6X2j9Lp0dRdA7OAAAABHRSTlMAgIGCc4g2HAAAAahJREFUeNrFk4FuwkAMQ+lwCrSX///dJWHFO06Th1qBtbHeOXaeNHrqhNLpUwLMWmhA2A2o88jf1qzdhWMBdR435P5mCDkJjgHUeQQAEEHDssDz8QBAnad9uxmaY8EF8RMMOYGjAHU+Hbh7bA/dH7N0L6DKU7BimOdLas5Dle4G1HmOBH0RzDOWPEWpYS+gylNojnWe5+s1AFZ4q6HdgDpPgAbk/iKokw2AeB1Q5wngDiQA4B4A/B/uBNR5NtSXqPI09wPqPJIVnpl1TXJHXUpA5scFIfoY87/9AsqcIWTZVMiQgMw/L9jy7O/zvR+Ce+0uCvfwc0ICMt8v2PL0u/zot/xjKFladekQgMyPC2qA/pBnQcjqxlrJar6GoQCZ7xcwT595+glgeYespOA/1wqQ+X4B82A/8+wP5UdBPxDqlNcakPl+AfOif9Pj1dleKXr/Khh8WqKfr1InVaB90a8B3udz4nhA3U8fcNrQBcJ/vd8dm+ogCqQv+8cBFoREwet+ivX0OUH94bNA+7p/EEAbH/Cn6YyHztM0+hP96Xj/a3rWe3zqU/437oRI49eK6jgAAAAASUVORK5CYII=").i,I=new o("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAQCAMAAABncAyDAAAALVBMVEUAAABSMz//7oPwtUGdk4fX072GV1fQnI6kfXK9amKPTVd9ODP/rnDPdSurUTA495DpAAAAAXRSTlMAQObYZgAAAM1JREFUeNqVkkGOgzAAxHBIBgib/v+5HUZZOK3Q+tKYjEVVdQmEHF89UgLm3RfWUmooZeXdF6ztAihcjlpQPPcEe4K53/Y5kMgDaQY+H0fvnfiz36gF7N5LzR/Tfez9PE/svwG7tmeQwDyeV7QEa76htOPBit3zcLs5Dxf2GWw/Eu3PAE6eYNQU2ddB/Eoe5+jZd+wOVOls+LpqEK8NO9Px+MyvJAcucArZxyWqQff9BHseUMM90HRGXEyUgM8YCmN8ePcFMwLm1f/99/4CA5QLeXWL3dcAAAAASUVORK5CYII=").i,z=new o("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADUAAAAdCAMAAAA9x9QZAAAAJ1BMVEUAAAAAAAD/2kEiIiJWY72rXaL/wPuFR59eOZIAk8T/2UH0uMARERFihsQcAAAAAnRSTlMAgJsrThgAAAFASURBVHjalZSBcoQgDETxEvc4zv//3mYNCKHUsTtC4g5PAqIpCkD6rwzJAHJmvhyw9jL2fX/7jA8pQt8vMeMSxJSstWiQ5zO0E6qYvEzsWhSB5xHCTqZhkfK2wJBHKjular2qqLUzW1AUcEMVyzWWKPKbEoa6K+rVRkqU1FRhkqskzhfW5Y8KFDBTdV2lUSIfNUkeplpRVL/9UB0jtKVeYfFhcV2sl5jdbfltIoTTNouhUVXiM11zYcungBQpxwYoCjiOY2NEN+OZlLZI5uH8uNxM/Uy6Q6zGSFW1MZUqA1W4S9fTtJ+4MlOmgaIW1Os5xVAj8RIoqlPKq0SKGJM11crqFcpYYRGqUTpSohr2sFOuQBX5+31F43LVKYhCxY8LG3Xms6FuACowDPqcogvUL5Jh+vsB1rpROx92p5tf/g+kqA+bO41NfgAAAABJRU5ErkJggg==").i,C=new o("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAvAAAAAQCAMAAABHo7vjAAAAaVBMVEUAAAAAAAAAAAAAAAAAAABsgaGWqcFAUnNzTEQEBBBAKiYyIyjen0c0QVoQER7UxpJPaGyleFU6TE8RDBaOdkT+4bgsMz0hJzE4NDMA6v9idZJFMjJZPkcYHCF6WFmp9/+Bl5YGAR+1WUUOyDqaAAAABXRSTlMAMkF1tQBSG9wAAAS5SURBVHhe7drZduMoEAZgbAe0b96XpHtm3v8hB1TuckQBJYQdz8X8SUeCUls56q85gC22fHpf5tT7J2dn5Xg87q4Qc34Mtb90xCRS7uQktE2awhdTV+OPQN26n5C0TW8vHlHQi3XrUmVfCp0/nnXTnApInudl3awF5G8rws5qNQxZdpFS1oNwxv/vo4vEoJUk8H34Cig9OV8QxAx/TAB4oE3BqyXgZRp4/nbvB7+HpIBXskHuZSNVHHj5G8F/TgJPwPvAIsH35IwhG7wGK4n5S4cHP+NIwCu5CLxaCD5bCF5lzwffBb1XkH0qeOBeFJHga033guDz/PznO/8E717wioLvveAffhHr7BF++zbwsbGALgEv1TLwIlPx4C3vQqkQeKXsS6GTeD8cgt5LExCfAP7OPR684e4BL8MPTPkg9mDRgO/HFjShDFwf7Bnv7toPzeFxFL+aHLk2Ba+mYdpJ4EVGX4+/fWa9BPRifXqa2ZdCJ/G+CQ7wt3JMGnjkvgC8/B0E735gfvB9j4oFmETvps6D5ut4QdRQPqNIFqU6MfN4MqfOpmHaieDp6/G3n3LFXqxPTifgMRZ36v1wOHRdB43qtt/fdMr9vqwWg6+BO6TOnwpenRr6AJqTFzyYRvBoHYLqfTN0UoeWS/trwCNeCp4/ikeUzjPBK4zwZQl48WzwwuUdxAN4Td7kViWAz2vkXuR57QWvIQ8DkB0GbZqA/zUJPORv4IUTPCFJwFtmt3QI99ah8VO7NDbihDk8FCLBjxHOkJu8Irsw+J19KXQyORRdYcQjeDOLr5LAK/V9W1J5wW/Pd/AXA/5sRvi61uIvssYR/pFPwT3/h00GvA8sX++9/2Eo+PSx3gZ8vU6nLaZ9gkDbqpMpTVwipjSvEh8MEeDz0fnBlxS8lDLbRIFvTcB7WeqGD/wIXEoQ/m1fUkKTgOeev39wRvDeXRZGPNS5KVGccR48XZTSaQuCh4TBM4vcLwiuG94PPvRGmwV+rOlOGs2bTmnEFLz5QkqR4teqObUteC+KU6PC4C+4DYlvPdX16g/4z3tiwFOtLHgQO6fuW/S+FPyYazp4ZpFrb4O+H3xogU7Bw0KdZjMR3+lsNghefyF4kOQS32Dc25Jt2+aj96KRDHiYsyP42mR4gIc161zwvkUlgoeyzzNf92xr4jkPnIL31m3EsQmCp8f/MHhydIPHTiq+ezR0sLEfwVcVbkvKf6T+tsE3spVjWtlQ8Jq69s7vw9uLVBC/GobVSiwFb8THzuHRM1e31EMvFjnw8W3LL4XJAP5/Do/IO+FOtTfkK3MIgG+0dDVGu29cuzRmeG/beeBxSgPidQTkbJj/GmPOzhx4+40mN3h0SVedwToRT9M/OfYiNBn8dTptcby+vgTb7wcPvy1ZY0DbAg+Lkp2Iy4e2blJVH8IxpUHvqrhHUfFr8F7qn/PA0w+LIXjMHPCWQgo+8fOQbPgPDdBeflsyHTzuw0f8XVNTOuw+/OvBu9cYdEoD4KPFm6B3sYHYA3yBcYBXhntrxJvw4C+XeeC558/4Y8BzarfvBp++Dx8J/u378Age8hLw4gPCbDui97zO2zV9p7Udcyc/dw5PxU/C7sNz/v4FjUnuR0oor4wAAAAASUVORK5CYII=").i,v={s:w,m:M,j:y,p:B,k:u,i:R,b1:E,b2:U,b3:P},b=n[0],k=n[1],T=n[2];let F,S,D=c.width/2,V=c.height/2,H=!1,O=!1,L=!1,Q=!0,j=!1,J=!1,Y=null,q=zzfxM([[1.8,0,72,,,.2,,4,-2,6,50,.15,,6],[,0,655,,,.09,3,1.65,,,,,.02,3.8,-.1,,.2],[1.2,0,23,,,.2,3,4,,,3,.9,.05],[1.5,0,740,,,.15,2,.2,-.1,-.15,9,.02,,.1,.12,,.06]],[[[,-1,13,13,13,8,13,,,,,,,,,,,,11,11,11,6,11,,,,,,,,,,,,10,10,10,6,10,,,,,,,,,6,8,10,8,8,8,5,13,,8,8,8,5,13,8,8,8,5,13],[2,-1,13,,25,,13,13,25,13,,13,25,13,13,13,25,27,11,,23,,11,11,23,11,,11,23,11,11,11,23,22,18,,30,,18,18,30,18,,18,30,18,18,18,30,22,13,,25,,13,13,25,13,,13,25,13,13,13,25,,],[,1,25,,25,,,,,,,,,,,,,25,25,,25,,,,,,,,,,,,,,25,,25,,,,,,,,,,,25,25,25,25,,25,,,,,,,,,,,,,,],[1,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13,13,13,13,13,13,13,13]],[[3,-1,13,,,,,,8,,17,,,,18,17,15,,18,,,,13,,,,10,,,,6,,,,8,12,15,12,20,,8,12,15,12,20,,22,20,15,,13,,,,,,10,,8,,,,,8,20,8],[,1,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,],[1,1,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,13,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,13,,13]],[[,1,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,25,,,,25,,,25,,,,25,25,25,25,25],[1,1,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,13,,,,,,13,,,,,,,,13,,,,,,,,13,13,,13,,13,13,13,13,13,13,13]]],[0,0],60,{}),X=!0,G=!1,K={n:0,e:[]},N=null,W=[];const Z=[],_=[],$=[],AA=[];let tA=0;function eA(){for(var A=0;A<i.length;A++){const t=(i[A]-1)%47,e=A%15*32,n=32*Math.floor(A/15);d.drawImage(C,16*t,0,16,16,e-1,n-1,32,32)}if(Q){d.fillStyle="white",d.font="18px Arial",d.fillText("BEST WAVE",185,45);const A=""+m;return void d.fillText(A,232-5*(A.length-1),70)}d.fillStyle="#fff",d.font="18px Arial",d.fillText(`HP   ${p.hp>999?Math.round(p.hp/1e3*10)/10+"K":Math.round(p.hp>0?p.hp:0)} / ${p.mhp>999?Math.round(p.mhp/1e3*10)/10+"K":p.mhp}`,48,45);const t=p.hp/p.mhp*110;d.strokeStyle="#96A9C1",d.strokeRect(50,54,112,22),d.fillStyle="#4ba747",d.fillRect(51,55,t,20),d.fillStyle="#3d734f",d.fillRect(54,69,t>0&&t>=5?t-5:0,4),d.fillStyle="white",d.font="18px Arial",d.fillText("WAVE",380,45);const e=""+(K.n+1);d.fillText(e,402-5*(e.length-1),70)}function iA(){f.drawImage(x,16*tA,0,16,16,D-17,V-20,32,32),BA%6==0&&(tA=(tA+1)%4)}function nA(A){f.beginPath(),f.arc(A.x,A.y,A.s||6,0,2*Math.PI),f.fillStyle=A.c1,f.fill(),f.closePath(),f.beginPath(),f.arc(A.x,A.y,A.s?A.s/2:3,0,2*Math.PI),f.fillStyle=A.c2,f.fill(),f.closePath()}function aA(A){A.animationDirection?f.drawImage(v[A.t],16*tA,0,16,23,A.x,A.y,32,46):(f.save(),f.scale(-1,1),f.drawImage(v[A.t],16*tA,0,16,23,-A.x-32,A.y,32,46),f.restore()),f.fillStyle="red";const t=A.hp/A.mhp*32;f.fillRect(A.x,A.y-8,t,3)}function hA(A,t){return A.x<t.x+t.w&&A.x+A.w>t.x&&A.y<t.y+t.h&&A.y+A.h>t.y}function sA(A,t){for(var e=0;e<T.length;e++)if(1===T[e]&&hA({x:A,y:t,w:32,h:46},{x:e%15*32,y:32*Math.floor(e/15),w:32,h:32}))return!0;return!1}function oA(A,t=0){J||(J=!0,setTimeout(()=>{r.setAttribute("style","box-shadow: inset 0 0 0 290px #0f0f11"),setTimeout(()=>{r.removeAttribute("style"),J=!1,A()},500)},t))}function lA(){Y=zzfxP(...q),Y&&(Y.loop=1)}function rA(A){return 0===W[A].c||("cd"!==W[A].k?p[W[A].k]<W[A].c:p[W[A].k]>W[A].c)}function cA(){const A=fA(s.filter(A=>0===A.c),1),t=fA(s.filter(t=>t.k!==A[0].k),2);W=[...A,...t]}function fA(A,t){let e=[...A];return[...Array(t)].map(()=>e.splice(Math.floor(Math.random()*e.length),1)[0])}function gA(A,t,e){for(let i=0;i<e;i++)AA.push(new l(A,t))}const dA={};let mA=0,pA=0;function xA(){O=!1,H=!1,L=!1,p.inc=Math.floor(K.n/12);const A=a[K.n%12];"b"==A.charAt(0)?function(A){const t=(c.width-96)/2,e=Math.atan2(p.y-t,p.x-50),i=Math.cos(e),n=Math.sin(e),a=h[A];wA?wA=1:(wA=1,MA()),N={x:t,y:50,hp:p.inc?a.hp+25*p.inc/100*a.hp:a.hp,mhp:p.inc?a.hp+25*p.inc/100*a.hp:a.hp,stepX:i,stepY:n,angleToPlayer:e,s:a.s,dm:p.inc?a.dm+25*p.inc/100*a.dm:a.dm,sdm:p.inc?a.sdm+25*p.inc/100*a.sdm:a.sdm,t:A,l:new Date}}(A):(A.split("-").forEach(A=>{const t=A.split(":"),e=t[0],i=+t[1];K.e=[...K.e,...Array(i).fill(e)].sort(()=>.5-Math.random())}),F=setInterval(()=>{!function(){if(!K.e.length)return clearInterval(F),H=!0,void cA();const A=Math.floor(3*Math.random());let t,e;0===A?(t=c.width+16,e=c.height/2):1===A?(t=c.width/2,e=c.height+16):(t=-16,e=c.height/2);const i=Math.atan2(p.y-e,p.x-t),n=Math.cos(i),a=Math.sin(i),s=t-p.x,o=e-p.y;if(Math.sqrt(s*s+o*o)>66){const A=K.e.shift(),s=h[A];_.push({x:t,y:e,hp:p.inc?s.hp+25*p.inc/100*s.hp:s.hp,mhp:p.inc?s.hp+25*p.inc/100*s.hp:s.hp,shooter:!!s.q,stepX:n,stepY:a,angleToPlayer:i,s:s.s,dm:p.inc?s.dm+25*p.inc/100*s.dm:s.dm,sdm:p.inc?s.sdm+25*p.inc/100*s.sdm:s.sdm,t:A,c1:s.c1,c2:s.c2})}}()},K.n?1700:2200))}window.addEventListener("keydown",function(A){dA[A.key]=!0,"m"===A.key&&(X?Y.stop():lA(),X=!X)}),window.addEventListener("keyup",function(A){dA[A.key]=!1}),c.addEventListener("mousemove",function(A){const t=c.getBoundingClientRect();D=A.clientX-t.left,V=A.clientY-t.top;const e=D-p.x,i=V-p.y;p.a=Math.atan2(i,e)}),c.addEventListener("mousedown",function(){S=!0}),c.addEventListener("mouseup",function(){S=!1});var wA=0;function MA(){var A="rotate("+(2*Math.random()-1)*wA+"deg) translate("+(15*Math.random()*2-15)*wA+"px,"+(15*Math.random()-7.5)*wA+"px) scale("+Math.max(1,1.05*wA)+")";c.style.transform=c.style.webkitTransform=A,(wA-=.03)>0?requestAnimationFrame(MA):(wA=0,c.style.transform="matrix(1,0,0,1,0,0)")}let yA=window.performance.now(),BA=0;!function A(){requestAnimationFrame(A);const t=window.performance.now(),e=t-yA;e<1e3/60||(yA=t-e%(1e3/60),BA++,J||function(){if(f.clearRect(0,0,c.width,c.height),d.clearRect(0,0,g.width,g.height),function(){for(var A=0;A<b.length;A++){const t=(b[A]-1)%47,e=A%15*32,i=32*Math.floor(A/15);f.drawImage(C,16*t,0,16,16,e,i,32,32)}for(A=0;A<k.length;A++){const t=(k[A]-1)%47,e=A%15*32,i=32*Math.floor(A/15);f.drawImage(C,16*t,0,16,16,e,i,32,32)}}(),Q)return eA(),function(){f.globalAlpha=.3,f.fillStyle="#06011f",f.fillRect(0,0,c.width,c.height),f.strokeStyle=["#0093c4","#5663bd","#ab5da2","#ffda41"][tA],f.strokeRect(95,346,285,56),f.fillRect(95,346,285,56),f.globalAlpha=1,f.fillStyle="#fff",f.font="24px Arial",f.fillText("PLAY",212,383);const A=16*Math.sin(BA/60);f.drawImage(z,0,0,53,29,80,100+A,312,174)}(),iA(),void(S&&!j&&(D>=95&&D<=380&&V>=346&&V<=406&&oA(()=>{Q=!1,K={n:0,e:[]},clearInterval(F),p.res(c.width/2,c.height/2),_.length=0,$.length=0,Z.length=0,N=null,xA()}),X&&!G&&(G=!0,lA())));if(dA.d&&p.x<c.width-32&&!sA(p.x+p.s,p.y)&&(p.x+=p.s),dA.a&&p.x>0&&!sA(p.x-p.s,p.y)&&(p.x-=p.s),dA.s&&p.y<c.height-46&&!sA(p.x,p.y+p.s)&&(p.y+=p.s),dA.w&&p.y>0&&!sA(p.x,p.y-p.s)&&(p.y-=p.s),p.hps>0){const A=(new Date).getTime();if(A-pA>=1e3&&!O){pA=A;const t=p.hp+p.hps;p.hp=t>p.mhp?p.mhp:t}}for(let A=0;A<Z.length;A++)if(Z[A].x+=Z[A].dx,Z[A].y+=Z[A].dy,nA(Z[A]),Z[A].x<0||Z[A].x>c.width||Z[A].y<0||Z[A].y>c.height)gA(Z[A].x,Z[A].y,5),Z.splice(A,1),A--;else{for(let t=0;t<_.length;t++){const e=_[t];if(hA({x:e.x,y:e.y,w:32,h:46},{x:Z[A].x,y:Z[A].y,w:6,h:6})){const i=Z[A].x-e.x,n=Z[A].y-e.y;if(Z.splice(A,1),e.hp-=p.dm,e.hp<=0)gA(e.x+10,e.y+15,5),_.splice(t,1),p.hpkill();else{gA(e.x+10,e.y+15,5);const A=10,t=Math.sqrt(i*i+n*n),a=i/t*A,h=n/t*A,s=e.x-a,o=e.y-h;e.x=Math.max(0,Math.min(c.width,s)),e.y=Math.max(0,Math.min(c.height,o))}break}}N&&Z[A]&&hA({x:N.x,y:N.y,w:96,h:96},{x:Z[A].x,y:Z[A].y,w:6,h:6})&&(Z.splice(A,1),N.hp-=p.dm,N.hp<=0?(gA(N.x+50,N.y+55,25),N=null,p.hpkill(),H=!0,cA()):gA(N.x+50,N.y+55,5))}if(N){const A=p.x-N.x,t=p.y-N.y,e=Math.atan2(t,A),i=Math.cos(e)*N.s,n=Math.sin(e)*N.s;if(N.x+=i,N.y+=n,hA({x:p.x,y:p.y,w:26,h:36},{x:N.x,y:N.y,w:90,h:90})){p.hp-=N.dm;const e=Math.sqrt(A*A+t*t),i=2.5,n=A/e*i,a=t/e*i,h=p.x+n,s=p.y+a;sA(h,s)||(p.x=Math.max(20,Math.min(c.width-20,h)),p.y=Math.max(20,Math.min(c.height-20,s)))}}for(let A=0;A<_.length;A++){const t=_[A],e=p.x-t.x,i=p.y-t.y,n=Math.atan2(i,e),a=Math.cos(n)*t.s,h=Math.sin(n)*t.s;if(t.x+=a,t.y+=h,hA({x:p.x,y:p.y,w:26,h:36},{x:t.x,y:t.y,w:26,h:36})){p.hp-=t.dm;const A=Math.sqrt(e*e+i*i),n=2.5,a=e/A*n,h=i/A*n,s=p.x+a,o=p.y+h;sA(s,o)||(p.x=Math.max(20,Math.min(c.width-20,s)),p.y=Math.max(20,Math.min(c.height-20,o)))}for(let e=0;e<_.length;e++)if(A!==e){const A=_[e],i=t.x-A.x,n=t.y-A.y;Math.sqrt(i*i+n*n)<42&&(t.x+=.01*i,t.y+=.01*n)}}!function(){const A=D-p.x>=0?1:0,t=10*Math.cos(p.a),e=10*Math.sin(p.a),i=p.x+t,n=p.y+e;f.save(),f.translate(i,n),f.drawImage(p.wp,16*tA,0,16,16,-20,-20,20,20),f.restore(),A?f.drawImage(p.img,16*tA,0,16,23,p.x,p.y,32,46):(f.save(),f.scale(-1,1),f.drawImage(p.img,16*tA,0,16,23,-p.x-32,p.y,32,46),f.restore())}(),function(){for(let A=0;A<_.length;A++){const t=_[A],e=p.x-t.x;if(t.shooter&&Math.random()<.005){const A=p.y-t.y;t.angleToPlayer=Math.atan2(A,e),$.push({x:t.x,y:t.y+20,dx:6*Math.cos(t.angleToPlayer),dy:6*Math.sin(t.angleToPlayer),dm:t.sdm,c1:t.c1,c2:t.c2})}t.animationDirection=e>=0?1:0,aA(t)}}(),N&&function(){const A=p.x-N.x,t=p.y-N.y;if(N.angleToPlayer=Math.atan2(t,A),Math.abs(N.l-new Date)/1e3>=3)switch(N.l=new Date,N.t){case"b1":if(N.s>.5&&(N.s-=1.4),Math.random()>.65)N.s+=1.4;else{const A=30;let t=0;const e=2*Math.PI/10;for(let i=0;i<5;i++){for(let A=0;A<10;A++){const i=e*A,n={x:N.x+t*Math.cos(i)+40,y:N.y+t*Math.sin(i)+40,dx:6*Math.cos(i),dy:6*Math.sin(i),dm:N.sdm,c1:"#504fa3",c2:"#807fd1"};$.push(n)}t+=A}}break;case"b2":if(Math.random()>.85)for(var e=0;e<3;e++){let A,t;0===Math.floor(2*Math.random())?(A=c.width+16,t=c.height/2):(A=-16,t=c.height/2);const e=Math.atan2(p.y-t,p.x-A),i=Math.cos(e),n=Math.sin(e),a=h.s;_.push({x:A,y:t,hp:p.inc?a.hp+25*p.inc/100*a.hp:a.hp,mhp:p.inc?a.hp+25*p.inc/100*a.hp:a.hp,shooter:!!a.q,stepX:i,stepY:n,angleToPlayer:e,s:a.s,dm:p.inc?a.dm+25*p.inc/100*a.dm:a.dm,sdm:p.inc?a.sdm+25*p.inc/100*a.sdm:a.sdm,t:"s"})}else[1,2,3,4,5,6,7,8,9,10].forEach(A=>{$.push({x:N.x+48,y:N.y+48,dx:6*Math.cos(10*A),dy:6*Math.sin(10*A),dm:N.sdm,c1:"#e64539",c2:"#ff8933"})});break;case"b3":N.s>.5&&(N.s-=1.4),Math.random()>.75?N.s+=1.4:[-1,1].forEach(A=>{$.push({x:N.x+48,y:N.y+48,dx:5*Math.cos(N.angleToPlayer-Math.PI/6*A),dy:5*Math.sin(N.angleToPlayer-Math.PI/6*A),dm:N.sdm,c1:"#4ba747",c2:"#97da3f",s:20})})}!function(){f.drawImage(v[N.t],32*tA,0,32,32,N.x,N.y,96,96),f.fillStyle="red";const A=N.hp/N.mhp*96;f.fillRect(N.x,N.y-10,A,3)}()}(),function(){for(let A=0;A<$.length;A++){const t=$[A];if(t.x+=t.dx,t.y+=t.dy,nA(t),t.x<0||t.x>c.width||t.y<0||t.y>c.height)if(t.s){const e=30;let i=0;const n=2*Math.PI/12;for(let A=0;A<2;A++){for(let A=0;A<12;A++){const e=n*A,a=t.x+i*Math.cos(e),h=t.y+i*Math.sin(e);$.push({x:a-30,y:h-30,dx:6*Math.cos(e),dy:6*Math.sin(e),dm:N.sdm/3,c1:"#4ba747",c2:"#97da3f"})}i+=e}gA(t.x,t.y,5),$.splice(A,1),A--}else gA(t.x,t.y,5),$.splice(A,1),A--;else if(hA({x:p.x,y:p.y,w:32,h:46},{x:t.x,y:t.y,w:t.s||6,h:t.s||6})){const e=p.x-t.x,i=p.y-t.y,n=Math.sqrt(e*e+i*i),a=p.hp-t.dm;p.hp=a<0?0:a,$.splice(A,1),A--,gA(p.x+10,p.y+15,5);const h=3,s=e/n*h,o=i/n*h,l=p.x+s,r=p.y+o;sA(l,r)||(p.x=Math.max(20,Math.min(c.width-20,l)),p.y=Math.max(20,Math.min(c.height-20,r)))}}}(),eA(),H&&!_.length&&($.length=0,O=!0,f.fillStyle="#06011f",f.globalAlpha=.3,f.fillRect(0,0,c.width,c.height),[0,1,2].forEach(A=>{f.strokeStyle="#fff",f.strokeRect(95,146+100*A,285,56),f.fillStyle=rA(A)?"#06011f":"#991d0f",f.fillRect(95,146+100*A,285,56)}),f.globalAlpha=1,[0,1,2].forEach(A=>{f.font="15px Arial",f.fillStyle="#fff",f.fillText(W[A].d,160,180+100*A),rA(A)||(f.font="13px Arial",f.fillStyle="#f95946",f.fillText("MAX LVL",323,198+100*A)),f.drawImage(I,16*W[A].t,0,16,16,100,150+100*A,48,48)}),K.n>0&&!((K.n+1)%12)&&(f.fillText("*From next wave enemies will have",118,450),f.fillText(" increased HP and damage by 25%",118,470))),iA();for(let A=AA.length-1;A>=0;A--)AA[A].update(),AA[A].isExpired()?AA.splice(A,1):(f.beginPath(),f.arc(AA[A].x,AA[A].y,AA[A].radius,0,2*Math.PI),f.fillStyle=Math.random()<.5?`rgba(255, 0, 0, ${AA[A].alpha})`:`rgba(255, 255, 255, ${AA[A].alpha})`,f.fill(),f.closePath());if(S&&!O?function(){const A=(new Date).getTime();if(A-mA>=p.cd){mA=A;const t=p.x-5,e=p.y-5,i=[p.a];p.bn>=2&&i.push(p.a-Math.PI/6),3===p.bn&&i.push(p.a+Math.PI/6),i.forEach(A=>{Z.push({x:t,y:e,dx:10*Math.cos(A),dy:10*Math.sin(A),c1:"#f3a7cd",c2:"#e71284"})})}}():S&&O&&!_.length&&L&&D>=95&&D<=380&&(V>=150&&V<=206&&rA(0)?(p.pp(W[0]),W=[],K.n+=1,xA()):V>=250&&V<=306&&rA(1)?(p.pp(W[1]),W=[],K.n+=1,xA()):V>=350&&V<=406&&rA(2)&&(p.pp(W[2]),W=[],K.n+=1,xA())),!O||L||N||_.length||j||(j=!0,setTimeout(()=>{L=!0,j=!1},1500)),dA.d||dA.a||dA.s||dA.w){const A=D-p.x,t=V-p.y;p.a=Math.atan2(t,A)}p.hp<=0&&!J&&oA(()=>{Q=!0;const A=K.n+1;A>m&&(m=""+A,localStorage.setItem("ms",A))},1e3)}())}(),e(2),window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(A){window.setTimeout(A,1e3/60)})}])</script>