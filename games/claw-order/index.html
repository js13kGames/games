<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Claw & Order</title>
<style>*{box-sizing:border-box;margin:0}.c{font-size:100px;width:66px;height:82px;background:#fff;border-radius:3px;position:relative;line-height:.72;display:inline-block;vertical-align:top;margin:2px;cursor:pointer;overflow:hidden;vertical-align:middle}.controls div{margin:6px;min-height:23px;background:#f1f1f1}.controls div button{float:right;padding:2px;cursor:pointer}.stats span{color:red;font-weight:700}.start-hide{display:none}.enable-transitions{transition:all .2s ease-in-out}.center{text-align:center}.story,.game-area-wrapper{transition:all 1.5s ease-out}.card-transitions{transition:all .2s ease-in-out}.main{height:100vh;max-height:450px;max-width:1000px;margin:0 auto;overflow:hidden;position:relative;text-align:center;user-select:none;-webkit-user-select:none;-webkit-touch-callout:none}.table{background-image:url(data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAADdAQAAAABWZ/VNAAAAXElEQVR4Aa1LBxHAQAiLFKRUClIqBSlIqZQSct3j1q8sApZhN07aG3PH2Bu+c96UNB291Z+Vl/cLs2Xt2LAdmfzwjkBuqjBgSm4MztmTUtazqfd2Jaa/ovJdDT4rUQZeAU+TvGEAAAAASUVORK5CYII=);background-position:0%;background-repeat:repeat-x;position:absolute;top:10%;left:0;right:0;height:300px}.table.hide{transform:scaleY(2.5)}.cat{position:relative;z-index:22}.cat.hide{transform:translateY(-200px)}.cop1,.cop2{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHIAAADhAQMAAAAu4XPTAAAABlBMVEVHcEwAAACfKoRRAAAAAXRSTlMAQObYZgAAAN5JREFUeAFiQAaAduoQJ4MgBqDwNCNGViJ7DGSP1qv9R0LiiqVPbDMZdgkJ8kueflY0Vn4UR+brGyWrJ6ywwwFntcATXrDC1tjhgPPa0ng2Xo21sR3aH3Y86n/7w35v/AYv+rCfhx6dY9MOG6yw7DquPWhvbDdb/5jtl+3X1qz2y9/PrDY4qxfs1ZLVCnu1ZLXCDmf1hBV2OKsFnvCCtbE19sbROK8tjeem16a1sW3aNx2bzjPLoeeh16b1h22H9psdNzsbO6zwoA0e9IKH5Kckfu3wgkfAAg+Bx5iRry/vgS9iuUUnvwAAAABJRU5ErkJggg==);width:215px;height:399px;background-repeat:no-repeat;background-size:cover}.cop1{float:right}.cop1.hide{transform:translate(190px)}.cop2-wrapper{float:left;transform:scaleX(-1)}.cop2.hide{transform:translate(190px)}.cops{position:absolute;left:0;right:0;bottom:0;z-index:20}.box{border:5px ridge grey;background:#fff}.story-area{width:500px;height:150px;position:absolute;z-index:25;top:0;left:0;right:0;bottom:0;margin:25% auto}.story-area.hide{transform:translateY(-550px)}.story-area>*,.deck>*{pointer-events:none}.game-area-wrapper{position:absolute;top:0;left:0;right:0;bottom:0;z-index:10;padding:4px}.game-area-wrapper.hide{transform:translateY(-600px)}.game-area{display:flex;position:relative}.zones{position:relative;z-index:2;padding:1px;min-height:98px;max-height:196px;margin:0 2px 4px;text-align:left}.deck{width:86px;height:98px;cursor:pointer}.deck .c{background:#000;position:absolute;top:0;left:0;right:0;bottom:0}.deck .c:after{background:#fff;content:"\1f0a0";position:absolute;top:0;left:0;right:0;bottom:0;color:#000!important}.play,.discard{flex-grow:1}.discard .c:not(:last-child){width:20px;margin:0}.stats{flex-grow:1;min-width:110px}.controls{flex-grow:1;min-width:205px}.text-area,.story-area{padding:4px;overflow-x:auto;text-align:left}.text-area div:not(:last-child),.story-area div:not(:last-child){border-bottom:1px solid grey;margin:0 0 8px;padding:0 0 8px}.top{flex:0 1 auto;max-height:167px}h3{background:white}
</style>
  </head>
  <body>

    <div class="main">
      <div class="table story"></div>
            <img data-f="skip" class="cat story" src="data:image/png;base64,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" />
      <div class="cops">
        <div data-f="difficulty" class="cop1 story"></div>
        <div class="cop2-wrapper">
          <div data-f="sound" class="cop2 story"></div>
        </div>
      </div>
      <div data-f="story" class="story-area box story">
          <h1 style="text-align: center; border-top: 8px solid #000; border-bottom: 8px solid #000; max-width: 200px; margin: 0 auto">Claw & Order</h1>
        <br>
        <div>Bennet: Hello, I'm detective Bennet. I'll be cat translating through this interrogation. Tap on this text to proceed, left cop (or 's') to toggle sound. Right cop (or 'd') to toggle difficulty, cat (or 'space bar') to skip story.</div>
      </div>
      <div class="game-area-wrapper game hide">
        <div class="game-area top">
          <div class="zones box stats">
            <div class="center"><select class="select">
            </select></div>
            <h3 class="center">-Stashes-</h3>
            <div style="display: inline-block;"><div>â™ : <span></span></div>
            <div>â™¥: <span></span></div></div>            
            <div style="display: inline-block; float: right;"><div>â™¦: <span></span></div>
            <div>â™£: <span></span></div></div>
            <div><div>'ðŸ‚¡'/'ðŸ‚«'/'ðŸƒŸ': <span></span></div></div>
            <hr>
            <div class="center" style="margin-top: 6px;"><button data-f="pass">Pass turn</button>
              <div><h3>Total: <span></span>/<span></span></h3></div></div>
          </div>
          <div class="zones box controls">
            <div>20xâ™£<button data-f="add">Add 2</button></div>
            <div>20xâ™ <button data-f="subtract">Subtract 3</button></div>
            <div>20xâ™¦<button data-f="redraw">Redraw</button></div>
            <div>10xâ™ â™£â™¦<button data-f="remove">Remove Card</button></div>
            <div>60xâ™ â™£â™¦â™¥<button data-f="addFaceCard">Add Face Card</button></div>
          </div>
          <div class="zones box text-area">Bennet: He says the rules are as follows.
            <ul style="color:red">
              <li>The goal of the game is to win a round with 20 Aces, Jokers or face cards in our deck.</li>
              <li>Use the dropdown in the top left to see what's currently in our base deck.</li>
              <li>Tap on the deck to draw cards. Each card adds to a stash (â™¥â™£â™ â™¦).</li>
              <li>When the stashes get large enough we can use the abilities to the left.</li>
              <li>Draw at least 2 cards without exceeding the max of 23, similar to Blackjack.</li>
              <li>If the total is exactly 23 after drawing a card we win the round!</li>
              <li>If we go over the max and pass or have 0 â™¥'s in our stash we immediately lose.</li>
              <li>We can pass at any time after we have drawn the required number of cards but if we are under our max that will be subtracted from our â™¥ stash.</li> 
            </ul>
          </div>
        </div>  
        <div class="game-area">
          <div data-f="draw" class="zones box deck zone-area"></div>
          <div class="zones box play zone-area"></div>
        </div>
        <div class="game-area">
          <div class="zones box discard zone-area"></div>
        </div>   
      </div>
    </div>

<script>let V=[2,3,5,10],ee=["Jack","Knight","Queen","King"],ue=["\u{1F0A2}","\u{1F0B2}","\u{1F0C2}","\u{1F0D2}","\u{1F0A3}","\u{1F0B3}","\u{1F0C3}","\u{1F0D3}","\u{1F0A5}","\u{1F0B5}","\u{1F0C5}","\u{1F0D5}","\u{1F0AA}","\u{1F0BA}","\u{1F0CA}","\u{1F0DA}"],ce=["\u{1F0AB}","\u{1F0BB}","\u{1F0CB}","\u{1F0DB}","\u{1F0AC}","\u{1F0BC}","\u{1F0CC}","\u{1F0DC}","\u{1F0AD}","\u{1F0BD}","\u{1F0CD}","\u{1F0DD}","\u{1F0AE}","\u{1F0BE}","\u{1F0CE}","\u{1F0DE}"],fe=["\u{1F0A1}","\u{1F0B1}","\u{1F0C1}","\u{1F0D1}"],f="Mr. Fluffy Pants",z=["You &%$#, you're just toying with us aren't you!",`Is this a game to you??? There's a backyard full of dead birds and it's got ${f} written all over it!`,"Well that orphanage certainly didn't burn itself down.","Don't play coy with me. I invented coy! I've got a goddamn patent on being coy!","You think you're tough! I eat pancakes shaped like your face for breakfast!","You think you're tough! I'll pet you one too many times!","You want to dance tough guy? I'll feed you five minutes after your normal dinner time!","I don't play by your rules.","I get results.","I'm getting too old for this &*^%.","I'm a dog person.","Would you like some fishy-lump treats? Well, tough! We're all out!"],te={d0:["rI'm detective Rivera.",`b${f} do you understand why you are being questioned today?`,"cMeow","bYou are currently being held on the suspicion of number of crimes including, but not limited to, murder one.","cMeow, hiss","rWhat'd he say! Was that about me?!? Look, you little hairball you're on thin ice. We've got so much dirt on you we're going to put you away for life! We have witnesses\u2026","bI'm sorry about my partner. They have a bit of a temper.","cMeow",`bYes ${f}`,"cMeow","bYes, uh huh","cMeow","bYes, I understand that but... there has to be some kind of understanding we can reach. We're prepared to offer you a good deal in exchange for information on the crime syndicate we know you're part of.","cMeow","bHe says he's thinking.","cMeow, meow meow","bHe says he'd like to play a game. His game is Blackjack but that might be boring for detectives as smart as us so he's spiced it up a bit.","bHe says if we win the game he'll answer any questions we have, but if we lose he'll have nothing to say until his lawyer arrives.","rI'm not here to play games!!!!","bAgain, I apologize for my partner... how can we say no to such an offer. Let's play your little game."],d1:["cMeow, meow.","bHe says we're doing well enough that he'd like to raise the stakes. We're now required to draw three cards each round. In return, if we win he'll lead us to a vast treasure he buried.","rTreasure you say...",`bWhoa now Rivera. Let's not have another \u201CIt's a Mad Mad Mad Mad World\u201D debacle. We accept your terms ${f}.`],d2:[`rYou seem to be sweating ${f}, how about you add another required card draw for... let's say the location of your secret lair.`,"cMeow.","bHe says cats don't sweat and he'd be more than happy to give us more information if we make the game harder."],d3:[`rAgain! more required cards to draw! We're taking you down ${f} with your own game!`,"cMeow, hiss, hiss, rawr, hiss","rLet's dance."]},U=["rTake that!","cMeow","bHe says well played but he still has nothing to say to us - just thanks for helping him pass the time.",`rNo, thank you ${f}. That's probably been long enough wouldn't you say Detective Bennet?`,"bYes, we probably have everything we need by now.","cMeow?",`bThat's correct ${f}. This was all a distraction to buy us time to raid the headquarters of the most notorious feline crime syndicate in the city.`,"cMeow, meow, meow",`bYou're wrong ${f}. We will indeed find evidence we need to make a case against you because, you see, ${f} there's a mole in your organization and we know exactly where to look.`,"cMeow, meow, meow",`bHa no, this isn't a bluff. You're going away for a very, very, very long time ${f}.`],X=["cMeow, meow, meow","bHe says it looks like our luck has run out. His little cat whiskers are sealed until his lawyer arrives. Better luck next time detectives. (Click to play again.)"],oe={s:"\u2660",h:"\u2665",d:"\u2666",c:"\u2663"},G=["s","h","d","c","l","t","m"],ae=Object.keys(oe),he=ne(ue),Z=ne(ce,!0),ye=fe.map((e,t)=>({iconK:e,valueK:1,idK:ae[t],nameK:"Ace"})),me={iconK:"\u{1F0DF}",valueK:10,nameK:"Joker"},y=!0,m=0,T=!1,C=0,I=0,q=2,K=16,h,k,u,d,p=!1,F=!1,x=!1,a={sK:0,hK:15,dK:0,cK:0,lK:0,tK:0,mK:23},$=e=>document.querySelectorAll(e),g=e=>document.querySelector(e),H=e=>document.createElement(e),ge=g(".main"),N=$(".zone-area"),we=g(".controls"),Ke=we.querySelectorAll("div"),j=g(".text-area"),W=g(".story-area"),pe=N[0],be=N[1],ke=N[2],ve=$("span"),P=g(".select"),b=e=>({c0:a.cK>19,c1:a.sK>19,c2:a.dK>19,c3:a.sK>9&&a.cK>9&&a.dK>9,c4:a.sK>59&&a.cK>59&&a.dK>59&&a.hK>59})[e],Y=e=>e.innerHTML="",L=(e,t)=>e.appendChild(t.nodeK),D=e=>(e.nodeK=H("div"),e.nodeK.classList.add("c"),e.nodeK.textContent=e.iconK,e.nodeK.dataset.id=e.idK,e.nodeK.dataset.f="select",e),S={pass:()=>{if(p||d.length===0&&u.length===0)return;s("wWe pass the turn.",!1,!1,!0);let e=a.mK-a.tK;if(a.mK<a.tK){p=!0,J(!1);return}if(d.length<q){s("bHe says you have to draw more cards to pass.",!0);return}if(d.length>5){let t=d.length-5;a.cK+=t*3,a.dK+=t*3,a.hK+=t*3,a.sK+=t*3,s("bWe added extra to our stash for drawing over 3 cards (extra x 3 of each stash)!",!0)}if(a.hK-=e,a.hK<1){J(!1);return}a.tK=0,C++,le(),s(`bWe lost ${e} hearts`),e>5&&e<10&&s("cMeow"),e>10&&s("cPurrr"),e<5&&s("cHisss"),B(d,u,d.length)},add:()=>{b("c0")&&(a.cK-=20,a.tK+=2,s("wWe use the 'add 2' ability",!1,!1,!0))},subtract:()=>{b("c1")&&(a.sK-=20,a.tK-=3,s("wWe use the 'subtract 3' ability",!1,!1,!0))},redraw:()=>{b("c2")&&(a.dK-=20,B(d.reverse(),u,1),_(),s("wWe redraw the last card",!1,!1,!0))},remove:()=>{if(T&&s("bMr. Fluffy Pants says we need to tap on a card.",!0),s("bMr. Fluffy Pants says you can click on a discarded card to remove it from your deck forever!",!0),u&&u.length===0){s("bHe says you need to have at least 1 card in your discard!",!0);return}b("c3")&&(a.sK-=10,a.cK-=10,a.dK-=10,T=!0)},addFaceCard:()=>{if(b("c4")){a.sK-=60,a.cK-=60,a.dK-=60,a.hK-=60;let e=Z[R(0,Z.length-1)];e=D(e);let t=e.idK+h.length;u.push({...e,idK:t}),h.push({...e,idK:t}),a.mK+=3,s("bFor each face card added to your deck he'll raise the max by 3. If you win a round with 20 or more Ace, Joker, or face cards you win the game and he'll tell us everything we want to know.",!0)}},skip:()=>{!y||(p&&location.reload(),y&&(Y(W),y=!1,m=0,Q()))},difficulty:()=>{I>0||(K===16?(K=8,s("bWe've switched to medium difficulty",!0,!0)):K===8?(K=4,s("bWe've switched to hard difficulty",!0,!0)):(K=16,s("bWe've switched to easy difficulty",!0,!0)))},sound:()=>{x=!x,s("bSound toggled",!0,!0)},story:()=>{(p&&!X[m]||F&&!U[m])&&location.reload();let e;F?e=U[m]:p?e=X[m]:e=te["d"+I][m],y&&e?(s(e),m++):(Y(W),y=!1,m=0,Q())},draw:()=>{if(a.tK>a.mK){s(`bMr. Fluffy Pants says that you went over ${a.mK}. Either buy an ability or pass to lose the game (followed by maniacal cat laughter.)`,!0);return}k.length===0&&u.length===0||_()},select:e=>{if(!(!T||!e.target.dataset.id)){for(let t=0;t<u.length;t++)e.target.dataset.id===u[t].idK&&(u.splice(t,1),A());for(let t=0;t<h.length;t++)e.target.dataset.id===h[t].idK&&(h.splice(t,1),A());T=!1}}};function O(){$(".story").forEach(o=>{o.classList.remove("hide")});const t=g(".game");t.style.zIndex=0,t.classList.add("hide")}function Q(){const e=g(".game");e.style.zIndex=100,e.classList.remove("hide"),$(".story").forEach(o=>{o.classList.add("hide")})}function _(){var n;if(k.length===0){let r=u.splice(0,u.length);se(r),k=[...r]}B(k,d,1);let e=(n=d[d.length-1])==null?void 0:n.idK;e&&e[0]==="j"&&(s("bMr. Fluffy Pants says we drew a joker so we lose half our hearts.",!0,!0),a.hK=Math.ceil(a.hK/2));let t=d[d.length-1];t.valueK>5&&s("r"+z[R(0,z.length-1)]),a[t.idK[0]+"K"]+=t.valueK+2;let o=0;a.tK=d.reduce((r,i)=>r+i.valueK,o),ie(),A()}ge.addEventListener("click",e=>{!e.target.dataset.f||(S[e.target.dataset.f](e),y||ie(),A())});document.addEventListener("keydown",e=>{if(e.key==" "){S.skip();return}if(e.key=="s"){x=!x;return}if(e.key=="d"){S.difficulty();return}});re();function re(){M("ahgdcaa--ahgdckk---ojkghhc--mgjch","sine",.3),h||(h=Ce()),a.tK=0,k=se([...h]),u=[],d=[],Me()}function Me(){A()}function A(){Ie();let t=[...$(".c")].map(function(o){return o.classList.remove("enable-transitions"),{el:o,first:o.getBoundingClientRect()}});N.forEach(o=>Y(o)),k.forEach(o=>L(pe,o)),d.forEach(o=>L(be,o)),u.forEach(o=>L(ke,o)),ve.forEach((o,n)=>{G[n]==="l"?(a.lK=de(),o.textContent=a.lK):o.textContent=a[G[n]+"K"]}),Ke.forEach((o,n)=>{b("c"+n)?o.style.opacity="1":o.style.opacity="0.1"}),t.forEach(o=>{var n=o.el.getBoundingClientRect(),r={top:o.first.top-n.top,left:o.first.left-n.left};o.el.style.transform=`translate(${r.left}px, ${r.top}px)`,setTimeout(()=>{o.el.classList.add("enable-transitions"),o.el.style.transform=""},200)})}function ne(e,t){return e.map((o,n)=>{let r=Math.floor(n/4),i=ae[n%4],l=V[r];return{idK:i+(t?n+10:l),iconK:o,valueK:t?10:V[r],nameK:t?ee[r]:void 0}})}function Ce(){return he.map((t,o)=>(D(t),t))}function se(e){return e.map(t=>({value:t,sort:Math.random()})).sort((t,o)=>t.sort-o.sort).map(({value:t})=>t)}function Ie(){Y(P);let e=H("option");e.textContent="Base Deck",L(P,{nodeK:e}),h.sort((t,o)=>t.valueK-o.valueK).forEach(t=>{e=H("option");let o=oe[t.idK[0]];e.textContent=`${o||t.idK[0]}-${t.nameK?t.nameK:t.valueK}`,L(P,{nodeK:e})})}function B(e,t,o=1){if(e.length===0||o>e.length)return;e.length,e.splice(0,o).reverse().forEach(r=>t.push(r))}let E=e=>e.split("").sort(function(){return .5-Math.random()}).join("");function s(e,t,o,n){let r=H(o?"h2":"div"),i={w:"Detectives: ",c:`${f}: `,r:"Rivera: ",b:"Bennet: "};const l=e.substring(0,1);n||(y||t)&&(l==="c"&&M(E("hgklrsm"),.1),l==="r"&&M(E("acXUeTVbf"),.1),l==="b"&&M(E("ZYXUTV"),.1),l==="w"&&M(E("VVUXcZaXUTfYe"),.1));const w=e.substring(1);r.textContent=i[l]+w,t&&(r.style.color="red"),y?W.appendChild(r):j.appendChild(r),j.scrollTo(0,j.scrollHeight),W.scrollTo(0,W.scrollHeight)}function J(e){if(e){F=!0,y=!0,O(),s("bWe did it, we won!",!0);return}p=!0,y=!0,O(),s("rGoddamit, we lost!",!0)}function ie(){if(a.tK===a.mK){if(de()>19){J(!0);return}s(`rWe got ${a.mK}!`,!0,!0,!0),s("bHe says that for winning a round he's added an Ace and a Joker to our deck. Aces add 1 to our total but 11 to our stash. Jokers add 10 to our total and nothing to our stash and we lose half our hearts. Also, he's added 20 to our entire stash!",!1,!1,!0);let t={...me,idK:"j"+C};t=D(t),h.push(t);let o=ye[R(0,3)],n={...o,idK:o.idK+(11+C)};n=D(n),h.push(n),a.sK+=20,a.cK+=20,a.dK+=20,a.hK+=20,a.tK=0,C+=4,le(),re()}}function le(){C%K===0&&(I<3&&I++,q++,s(`bLooks like the minimum number of cards we have to draw to pass is now ${q}.`,!0,!0),y=!0,O(),s(te["d"+I][m]),m++)}function de(){let e=[...ee,"Joker","Ace"],t=0;return h.forEach(o=>{e.includes(o.nameK)&&t++}),t}function R(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1)+e)}function M(e,t,o){if(x===!1)return;let n,r={5:.4,4:.3,3:.2,2:.1,1:.05},i=Object.keys(r);i.push("-"),window.AudioContext=window.AudioContext||window.webkitAudioContext;let l=new AudioContext,w=l.createGain();for(let c=0;c<e.length;c++){n=isNaN(e[c+1])?o||.1:r[e[c+1]];let v=l.createOscillator();e[c=+c]&&!i.includes(e[c])&&(v.connect(w),w.connect(l.destination),v.start(c*n+.3),v.frequency.setValueAtTime(440*1.06**(-105+e.charCodeAt(c)),c*n+.3),v.type=t||"sine",w.gain.setValueAtTime(.5,c*n+.3),w.gain.setTargetAtTime(.001,c*n+.3+.1,.05),v.stop(c*n+.3+n-.01))}}
</script>
    
  </body>
</html>
