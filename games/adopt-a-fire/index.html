<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="shortcut icon" href="#"><style type="text/css">body,html{font-family:roboto,helvetica,arial,sans-serif;height:100%;margin:0;padding:0;width:100%}body{background-color:#fff}.container{align-content:stretch;display:flex;flex-direction:column;height:100%}.top{flex:1 0 50%;position:relative}.bg{background-color:#d0e0ff;height:100%;pointer-events:none;width:100%}.bg,.bg-grass{position:absolute}.bg-grass{background-color:#7bde0e;border-radius:50% 50% 0 0;bottom:0;height:50%;left:65%;transform:translateX(-50%);width:170%}.fire{height:100%;width:100%}.trees{background-color:rgba(106,54,0,.001);height:25vh;position:absolute;right:5%;top:15%;width:10vh}.tree-trunk{background-color:#6a3600;bottom:0;height:75%;width:50%}.tree-leaves,.tree-trunk{left:50%;pointer-events:none;position:absolute;transform:translateX(-50%)}.tree-leaves{background-color:#246a00;border-radius:50%;height:60%;top:0;width:170%}.tree-progress,.tree-tips{left:50%;position:absolute;top:65%;transform:translate(-50%,-50%)}.tree-tips{color:#fff;left:50%;position:absolute;text-align:center;top:80%;width:100px}circle{fill:none;stroke:#fff;stroke-dasharray:300;stroke-dashoffset:0;stroke-width:8}circle.animate{animation:rotate 10s linear}@keyframes rotate{0%{stroke-dashoffset:300}to{stroke-dashoffset:0}}circle.refill{animation:rotate2 30s linear}@keyframes rotate2{0%{stroke-dashoffset:0}to{stroke-dashoffset:300}}h1{font-size:16px}h1 small{font-size:12px;font-weight:400}h1.title{left:10px;pointer-events:none;position:absolute;top:0}h1.title a{pointer-events:auto}.result{align-content:stretch;background-color:hsla(0,0%,100%,.6);display:flex;flex-direction:column;height:100%;justify-content:center;left:0;pointer-events:none;position:absolute;text-align:center;top:0;width:100%}.result h2.title{font-size:40px;margin-bottom:0;margin-top:40px}.result button{background-color:#fff;border:1px solid #000;border-radius:8px;font-size:16px;padding:20px;pointer-events:all}.result button:hover{background-color:#eee}.result button:active{background-color:#ddd}.result .filler{margin-top:auto}.debug{pointer-events:none;top:40px}.debug,.debug-toolbar{left:10px;position:absolute}.debug-toolbar{bottom:10px}.fire-wood{height:29px;top:72%;transform:translate(-50%,-50%) scaleY(.5);width:38px}.fire-wood,.wood-plank{left:50%;position:absolute}.wood-plank{background-color:#594220;border:1px solid #5b421c;opacity:0;top:50%}.wood-plank>.temp{background-color:orange}.wood-plank>.ash,.wood-plank>.temp{height:100%;opacity:0;position:absolute;width:100%}.wood-plank>.ash{background-color:grey}.fire-flame{background-image:url(data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAA9CAYAAADvaTpkAAAACXBIWXMAABcSAAAXEgFnn9JSAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA9ZJREFUeNrMWk1O20AUfp5UtKC2DhUqqoqU7Cp1g2+QcAK4AVllm/QEuDeAbTZNbxBOQDhBw6bbumo3SBENooWqUus+eybYCY49P8/JfNFAhMdmPr/v/dnjhGEI0ug5ffx5mPrLBY4RjiGOAbTDCawIjiKRosnnOPpIqL9sIkxx/knB8QaOD0g4wHFgr0W4VQ7iuw7gSsw+xdFFCwX2EeFkPOEXruQZ75DMsX1E9MhE1mmVFRD0iSRkPimcEUW5gzKkxozOboejWDby2I3DNb8BFlkkscxILFIW1zia4kZYYJEEXcX5buxfPaduF5F2OBT6VyUzQDJVmywSQSe87sZkLCOiu6AGWsVfLpEo2vScSA6tDHlNRK2lgyO8ZnOZFonksy/qqazCcGiwlr6Jv5hI6zDDMiaJrobDXxaRyQMLzYZQ04zd0U2WqkRGGSHUB1ocL1taaYnVCYk0dByfKvy2iK3il02kXkDEW5VVVIl4CyMOlxdlVatkZfnqly/0S86MPZHdXUIym7KNGCPU7TExCYibMFJpcb0eShSAYDcRzdhOgH3ZsoVJWMMv6W7LojmjjAU5i0lI6ghWi6ZYS1Sknomevy5PhJu0D6uHN5fD3Kx1sdyymlekthAJ5hJmq5hIz5n2HTbAXVBZ+/lE+LPdDtiE7NK+ln5Qziz1i3lUi8oYlmEuF+xENS/PsLlQ2wF74eVZhZn0AEtGI48Ir365Nc4sJnFSoJbNqUW65P96A8cOXEK1VFndH39E3NkBVHC8gTGswxZ+28YPwB+4gs/wAv6Sy+q+jGFCVnQZPCGRYA1JvEUyJYKp1PyF2IK7ByTSZF7H70VKiWiMVFY7KKI8bCOdSjk5hknoT94alYJk6qC9NnFeSdKiktVYat4r+FUCjyEdkY0FvvHQV7bKkBcjIsFlIwt6eQU0RJ7DD8Xyb2wnkafwU2n+E/hHSqMdxj7y1fhCqgt7TNpCn099xPyl/Rq81DiHCoMpkaHxpVQcPbEKOZEBrAI0Ifh0ukGHiS8fjUKvDp4Z++Z1uhlM9yMXK7yzOiRmNuUwEb4mwB9NqpPR7TFCjHV6uICMnUUsFYsnODwo3oA5i9t4UeqZ+ipuuVTxHhZsj8p+Y8WbLV+6Mo4q35pC5LrEz3clIufAN3kuTBX5r95UCEVOX8cFrucs8A6Pf8PjN0oEfLGNKj8DSL1D5I/xu6KbrBU6f0TKxUU78Dv+2w2ecxv37rI+0Ae+szuQTmUa+349QagpukuXIAINIdmWHuhcxHxPI39k6QF/pJlum5tZDZD4PRGlUUC14/S/AAMA+tQUHk3lTiAAAAAASUVORK5CYII=);background-position:50%;background-repeat:no-repeat;background-size:contain;height:61px;left:50%;opacity:.9;position:absolute;top:70%;transform:translate(-50%,-89%);width:50px}.fire-tips{color:#fff;text-align:center;top:85%;width:200px}.fire-radius,.fire-tips{left:50%;position:absolute;transform:translate(-50%,-50%)}.fire-radius{border:1px solid #fff;height:10px;top:80%;width:100px}.fire-radius div{background-color:#fff;height:100%;width:50%}.inventory{background-color:#7bde0e;flex:1 0 50%}.inventory td div.move.drop{background-color:#eed7b7;overflow:hidden;position:relative}.inventory td div.move.drop:empty{background-color:#faebd7}.inventory-table,.wood{height:100%;width:100%}.wood{background-image:url(data:image/png;charset=utf-8;base64,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);background-position:50% 60%;background-repeat:no-repeat;background-size:100vmin}.inventory-table .move{height:100%;width:100%}</style></head><body><div class="container"><div class="top"><div class="bg"><div class="bg-grass"></div></div><div class="fire drop"><div class="fire-wood" style="transform: translate(-50%, -50%) scaleY(0.5);"></div><div class="fire-flame"></div><div class="fire-tips" style="visibility:hidden">Drag left and right to change air flow</div><div class="fire-radius" style="visibility: hidden;"><div></div></div></div><div class="trees"><div class="tree-trunk"></div><div class="tree-leaves"></div><div class="tree-tips" style="visibility:hidden">Press tree to chop wood</div><div class="tree-progress" style="visibility:hidden"><svg height="100" width="100"><circle cx="50" cy="50" r="20"/></svg></div></div><h1 class="title">Adopt-a-Fire <small>by Dickson (@vicksonzero)</small><br><small><a class="noDrag" href="https://github.com/vicksonzero/adopt-a-fire" target="_blank">Fork me on Github</a></small></h1><div class="debug"></div><div class="result"><h2 class="title">Adopt-a-Fire</h2><div class="body"><p>Drag wood onto fire to add fuel.</p><p>Take care of the fuel amount.</p><button class="start">Make a spark</button></div><div class="filler"></div></div><div class="debug-toolbar"><button class="btn-debug">Status</button><!-- <button class="btn-verbose">V</button> --></div></div><div class="inventory"><table class="inventory-table"></table></div></div><script type="text/javascript">!function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=5)}([function(e,t){const a=t.dist=((e,t)=>Math.sqrt(e*e+t*t)),n=t.ep=(e=>[e.touches?e.touches[0].pageX:e.pageX,e.touches?e.touches[0].pageY:e.pageY]);t.dnd=(e=>{let t,i,r,o,s,l,d,c,u,p,h,m,f;const y=document,v=e.onDrop||(()=>{}),g=e.onDrag||(()=>{}),w=e=>{if(t&&t.classList.contains("noDrag")||e.preventDefault(),s=1,r&&(r.remove(),t.style.visibility="visible"),t=null,r=null,e.touches)t=y.elementFromPoint(e.touches[0].pageX,e.touches[0].pageY);else{if(0!==e.button)return;t=e.target}for(console.log("dragOrigin.classList",t.classList);t!=y&&!t.classList.contains("drag");)t=t.parentNode;if(t==y)t=null;else if(["move","copy"].some(e=>t.parentNode.classList.contains(e))){g(),[l,d]=n(e),c=l,u=d,p=0;const a=t.getBoundingClientRect();h=l-a.left,m=d-a.top,(r=y.createElement("div")).appendChild(t.cloneNode(!0)),y.body.appendChild(r),t.parentNode.classList.contains("move")&&(t.style.visibility="hidden",t.m=1);const i=r.style;i.position="fixed",i.pointerEvents="none",i.width=t.clientWidth+"px",i.height=t.clientHeight+"px",i.left=l-h+"px",i.top=d-m+"px"}},x=e=>{if(e.preventDefault(),s&&r){[l,d]=n(e);const t=a(l-c,d-u);(p=Math.max(t,p))>10&&(r.style.left=l-h-8+"px",r.style.top=d-m-8+"px")}},b=e=>{if(t&&t.classList.contains("noDrag")||e.preventDefault(),r){if(s=0,e.touches)i=y.elementFromPoint(l,d);else{if(0!==e.button)return;i=e.target}for(;i!=y&&!i.classList.contains("drop");)i=i.parentNode;if(i!=y){let a;a=v(e,p,r.firstChild,t,i),(f=null==a||!!a)&&((o=i.appendChild(r.firstChild.cloneNode(!0))).style.position="",o.style.pointerEvents="",o.style.left="",o.style.top=""),t.m&&t.remove()}r.remove(),r=null,t.style.visibility="visible"}};window.addEventListener("mouseup",b),window.addEventListener("touchend",b,{passive:!1}),addEventListener("mousedown",w),addEventListener("touchstart",w,{passive:!1}),addEventListener("mousemove",x),addEventListener("touchmove",x,{passive:!1})})},function(e,t){var a=new function(){var e,t,a,n,i,r,o,s,l,d,c,u;this._params=new function(){this.setSettings=function(e){for(var t=0;t<24;t++)this[String.fromCharCode(97+t)]=e[t]||0;this.c<.01&&(this.c=.01);var a=this.b+this.c+this.e;if(a<.18){var n=.18/a;this.b*=n,this.c*=n,this.e*=n}}},this.reset=function(){var e=this._params;n=100/(e.f*e.f+.001),i=100/(e.g*e.g+.001),r=1-e.h*e.h*e.h*.01,o=-e.i*e.i*e.i*1e-6,e.a||(c=.5-e.n/2,u=5e-5*-e.o),s=1+e.l*e.l*(e.l>0?-.9:10),l=0,d=1==e.m?0:(1-e.m)*(1-e.m)*2e4+32},this.totalReset=function(){this.reset();var n=this._params;return e=n.b*n.b*1e5,t=n.c*n.c*1e5,a=n.e*n.e*1e5+12,3*((e+t+a)/3|0)},this.synthWave=function(p,h){var m=this._params,f=1!=m.s||m.v,y=m.v*m.v*.1,v=1+3e-4*m.w,g=m.s*m.s*m.s*.1,w=1+1e-4*m.t,x=1!=m.s,b=m.x*m.x,M=m.g,S=m.q||m.r,$=m.r*m.r*m.r*.2,F=m.q*m.q*(m.q<0?-1020:1020),_=m.p?32+((1-m.p)*(1-m.p)*2e4|0):0,q=m.d,L=m.j/2,k=m.k*m.k*.01,R=m.a,D=e,E=1/e,A=1/t,T=1/a,C=5/(1+m.u*m.u*20)*(.01+g);C>.8&&(C=.8),C=1-C;for(var H,I,N,O,j,P,z=!1,W=0,U=0,G=0,X=0,Y=0,J=0,B=0,Z=0,K=0,Q=0,V=new Array(1024),ee=new Array(32),te=V.length;te--;)V[te]=0;for(te=ee.length;te--;)ee[te]=2*Math.random()-1;for(te=0;te<h;te++){if(z)return te;if(_&&++K>=_&&(K=0,this.reset()),d&&++l>=d&&(d=0,n*=s),(n*=r+=o)>i&&(n=i,M>0&&(z=!0)),I=n,L>0&&(Q+=k,I*=1+Math.sin(Q)*L),(I|=0)<8&&(I=8),R||((c+=u)<0?c=0:c>.5&&(c=.5)),++U>D)switch(U=0,++W){case 1:D=t;break;case 2:D=a}switch(W){case 0:G=U*E;break;case 1:G=1+2*(1-U*A)*q;break;case 2:G=1-U*T;break;case 3:G=0,z=!0}S&&((N=0|(F+=$))<0?N=-N:N>1023&&(N=1023)),f&&v&&((y*=v)<1e-5?y=1e-5:y>.1&&(y=.1)),P=0;for(var ae=8;ae--;){if(++B>=I&&(B%=I,3==R))for(var ne=ee.length;ne--;)ee[ne]=2*Math.random()-1;switch(R){case 0:j=B/I<c?.5:-.5;break;case 1:j=1-B/I*2;break;case 2:j=.225*(((j=1.27323954*(O=6.28318531*((O=B/I)>.5?O-1:O))+.405284735*O*O*(O<0?1:-1))<0?-1:1)*j*j-j)+j;break;case 3:j=ee[Math.abs(32*B/I|0)]}f&&(H=J,(g*=w)<0?g=0:g>.1&&(g=.1),x?(Y+=(j-J)*g,Y*=C):(J=j,Y=0),X+=(J+=Y)-H,j=X*=1-y),S&&(V[Z%1024]=j,j+=V[(Z-N+1024)%1024],Z++),P+=j}P*=.125*G*b,p[te]=P>=1?32767:P<=-1?-32768:32767*P|0}return h}};t.jsfxr=function(e){a._params.setSettings(e);var t=a.totalReset(),n=new Uint8Array(4*((t+1)/2|0)+44),i=2*a.synthWave(new Uint16Array(n.buffer,44),t),r=new Uint32Array(n.buffer,0,44);r[0]=1179011410,r[1]=i+36,r[2]=1163280727,r[3]=544501094,r[4]=16,r[5]=65537,r[6]=44100,r[7]=88200,r[8]=1048578,r[9]=1635017060,r[10]=i,i+=44;for(var o=0,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l="data:audio/wav;base64,";o<i;o+=3){var d=n[o]<<16|n[o+1]<<8|n[o+2];l+=s[d>>18]+s[d>>12&63]+s[d>>6&63]+s[63&d]}return l}},function(e,t){const a=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1e3/30)},n=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(e){return clearTimeout(e)};window.requestAnimationFrame=a,window.cancelAnimationFrame=n},function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(1);var i=a(0);a(2);const r=i.ep,o=i.dnd,s=document,l=e=>JSON.stringify(e),d=e=>JSON.stringify(e,null,4);let c=1;const u=[];console.log("Dev");let p=360/7+Math.random()*(90-360/7),h=0,m=0,f=0,y=0;const v=s.querySelector(".debug"),g=s.querySelector(".result"),w=s.querySelector(".result h2.title"),x=s.querySelector(".result div.body"),b=s.querySelector(".fire-wood"),M=s.querySelector(".fire-flame"),S=(s.querySelector(".trees"),s.querySelector("circle")),$=s.querySelector(".fire-radius"),F=new class{constructor(){this.sounds={},this.add("chop",3,[[3,,.0138,,.2701,.4935,,-.6881,,,,,,,,,,,1,,,,,.25],[0,,.0639,,.2425,.7582,,-.6217,,,,,,.4039,,,,,1,,,.1,,.25],[3,,.0948,,.2116,.7188,,-.6372,,,,,,,,,,,1,,,.2236,,.25]]),this.add("fire",2,[[3,,.1645,.7236,.1,.0417,,,,,,,,,,,,,1,,,,,.08],[3,,.1645,.7236,.2,.0217,,,,,,,,,,,,,1,,,,,.08],[3,,.1645,1.7236,.2,.0417,,,,,,,,,,,,,1,,,,,.08],[3,,.1645,.7236,.3402,.01,,,,,,,,,,,,,1,,,,,.1],[3,,.1645,.7236,.3402,.01,,,,,,,,,,,,,1,,,,,0]])}add(e,t,a){this.sounds[e]=[],a.forEach((a,i)=>{this.sounds[e].push({tick:0,count:t,pool:[]});for(var r=0;r<t;r++){var o=new Audio;o.src=Object(n.jsfxr)(a),this.sounds[e][i].pool.push(o)}})}play(e,t=1){var a=this.sounds[e],n=a.length>1?a[Math.floor(Math.random()*a.length)]:a[0];n.pool[n.tick].volume=t,n.pool[n.tick].play().catch(e=>{}),n.tick<n.count-1?n.tick++:n.tick=0}},_=M.offsetWidth,q=M.offsetHeight;s.querySelector(".inventory-table").append(...[...Array(4)].map(()=>{const e=s.createElement("tr");return e.append(...[...Array(5)].map(()=>{const e=s.createElement("td");e.style.height=`${25..toFixed(2)}%`;const t=s.createElement("div");(t.classList.add("move","drop"),Math.random()>.5)&&H(t,Math.floor(300*Math.random())+300).classList.add("drag");return e.append(t),e})),e}));let L={},k=!1;o({onDrag(){k=!0},onDrop(e,t,a,n,i){if(k=!1,i.classList.contains("fire")){const e=Number(a.getAttribute("data-size"));return N(E(L,e/300,0,{temp:25})),!1}if(i.children.length>0){if(i.children[0]!==n){console.log("swap");const e=i.children[0],t=i.appendChild(a.cloneNode(!0));return t.style.position="",t.style.pointerEvents="",t.style.left="",t.style.top="",n.parentNode.appendChild(e),n.m=!0,!1}if(a.classList.contains("wood")&&t<10){console.log("split wood");const e=n,t=Number(e.getAttribute("data-size")),a=C();if(a.length>0&&t>=100){const i=a[Math.floor(Math.random()*a.length)],r=Math.floor(t*(.4*Math.random()+.3)),o=H(i,t-r);e.classList.remove("drag"),o.style.visibility="hidden";const s=I(n.parentNode);F.play("chop");const l=setInterval(()=>{F.play("chop")},1e3);setTimeout(()=>{clearInterval(l),e.classList.add("drag"),o.classList.add("drag"),o.style.visibility="visible",e.setAttribute("data-size",""+r),e.style.backgroundSize=r/500*100+"vmin",s.remove()},4e3)}return n.m=!1,!1}console.log("drag into same cell")}return!0}}),s.querySelector("button.btn-debug").addEventListener("pointerup",()=>{y=1!==y?1:0});const R=()=>{if("visible"===S.parentNode.parentElement.style.visibility)return;const e=C();if(e.length<=0)return;const t=H(e[Math.floor(Math.random()*e.length)],Math.floor(500*Math.random())+300);t.style.visibility="hidden",S.classList.add("animate"),S.parentNode.parentElement.style.visibility="visible",s.querySelector(".tree-tips").style.visibility="hidden",F.play("chop");const a=setInterval(()=>{F.play("chop")},1e3);setTimeout(()=>{clearInterval(a),t.classList.add("drag"),t.style.visibility="visible",S.parentNode.parentElement.style.visibility="hidden",S.classList.remove("animate")},4e3)};s.querySelector(".trees").addEventListener("click",R),s.querySelector(".trees").addEventListener("touchend",R);{let e,t,a,n=!1;s.querySelector(".fire").addEventListener("pointerdown",i=>{[e,t]=r(i),n=!0,a=L.radius,$.style.visibility="visible",$.children[0].style.width=`${100*L._radius}%`}),s.querySelector(".fire").addEventListener("pointermove",t=>{if(n){const[n,i]=r(t);L._radius=Math.min(1,Math.max(0,a+(n-e)/window.innerWidth)),$.children[0].style.width=`${100*L._radius}%`}}),s.querySelector(".fire").addEventListener("pointerup",t=>{if(n){n=!1;const[i,o]=r(t);$.style.visibility="hidden",s.querySelector(".fire-tips").style.visibility="hidden",L._radius=Math.min(1,Math.max(0,a+(i-e)/window.innerWidth)),j(L._radius)}})}const D=()=>{let e=!0;s.querySelector("button.start").addEventListener("pointerup",()=>{O(400),e&&(L.fromFrame=L.frameID,setTimeout(()=>{s.querySelector(".tree-tips").style.visibility="visible",s.querySelector(".fire-tips").style.visibility="visible"},5e3),e=!1)});const t=s.querySelector("button.reset");t&&t.addEventListener("pointerup",()=>{A(L.frameID),O(400)})};D();function E(e,t,a,n={}){e.fuelID++;const i=Math.floor(300*t*(1+Math.random()*a));return{frameID:e.frameID,id:e.fuelID,valueStart:i,heatReq:300*t,heatUpRate:.02/t,coolDownRate:.01/t,oxygenReq:4*t,fuelReq:.2,givesHeatPerTick:55*Math.pow(t,1.1),value:i,temp:25,_transferredHeat:0,_heatChange:0,_oxygenGiven:0,_oxygenChange:0,...n}}window.save=(()=>{console.log(u)}),window.state=(()=>{console.log(L)}),window.timeScale=(e=>{c=e});const A=e=>{L={isRunning:!1,woodSpawnRate:.01,maxTemp:0,fromFrame:e,frameID:e,radius:.5,_radius:.5,heat:25,heatTransferRate:.7,oxygen:100,oxygenDepreciation:.92,_remainingOxygen:0,_largestFlame:0,fuelID:0,fuels:[],air:{heat:-5,oxygen:60},wind:{}},b.innerHTML="",N(E(L,.2,.5,{temp:25,givesHeatPerTick:60})),N(E(L,.2,.5,{temp:25,givesHeatPerTick:60})),N(E(L,.5,.5,{temp:25,givesHeatPerTick:60})),N(E(L,.5,.5,{temp:25})),u.push(l(L))},T=e=>{const{isRunning:t,frameID:a,fuels:n,heat:i,oxygen:r,heatTransferRate:o,air:s,wind:l,woodSpawnRate:d,radius:c}=e;let u=Math.max(25,i+s.heat+(l.heat||0));n.map(e=>e.value).reduce((e,t)=>e+t,0);const p={...e};p.frameID+=1,p.heat=0,p.fuels=[];const h=[...p.fuels.map(e=>e.temp),i].reduce((e,t)=>Math.max(e,t),0);p.maxTemp=h,p.isRunning=h>=100,t&&!p.isRunning&&z(e),!t&&p.isRunning&&W(e);for(let e=n.length-1;e>=0;e--){const t=n[e],{heatReq:a,heatUpRate:i,coolDownRate:r,oxygenReq:s,fuelReq:l,givesHeatPerTick:d,value:h,temp:m}=t;if(h<=0&&m<1)continue;const f={...t},y=p.oxygen;let v=(u-m)*o*i/Math.pow(Math.max(.5,(h+1e-5)/300),2);u-=v;let g=0;if(f.temp+=v,f.value<=50&&(f.temp*=1-r*Math.pow(.95,e)),f.temp>=a){const e=Math.min(p.oxygen*Math.pow(c,.5),s*Math.pow(f.temp/a,.05))/s,t=Math.max(1,Math.min(h,l*e))/l,n=Math.max(1e-4,Math.min(e,t));g=s*n,f.value-=l*n*2,u+=d*n,f.value=Math.max(.001,f.value)}p.oxygen*=.98*Math.pow(c,.5);const w=y-p.oxygen,x=f.temp-m;p.fuels.push({...f,_transferredHeat:v,_heatChange:x,_oxygenGiven:g,_oxygenChange:w})}return p.fuels.reverse(),p._heatLoss=Math.pow(1.1-c,1/8)*Math.min(1,Math.pow(p.fuels.length/4.1,4)),p.heat+=u*p._heatLoss,p._remainingOxygen=p.oxygen,p.oxygen=s.oxygen/30*Math.pow(c,.5)+(l.oxygen||0),p._largestFlame=Math.max(p._largestFlame,p.heat),p},C=()=>{return[...s.querySelectorAll(".inventory-table .move.drop:empty")]};function H(e,t){const a=s.createElement("div");return a.classList.add("wood"),a.setAttribute("data-size",""+t),a.style.backgroundSize=t/500*100+"vmin",e.append(a),a}const I=e=>{const t=e.appendChild(S.parentNode.parentNode.cloneNode(!0));return t.querySelector("circle").classList.add("animate"),t.querySelector("svg").style.visibility="visible",t.style.top="50%",t},N=e=>{let t;L.fuels.push(e),b.appendChild(t=(e=>{var t=s.createElement("div");return t.innerHTML=e,t.firstChild})((({valueStart:e,id:t})=>`<div class="wood-plank" data-wood="${t}" style="width: ${.25*e}px; height: ${Math.max(1,.05*e)}px;"><div class="temp"></div><div class="ash"></div></div>`)(e))),t.style.transform=`translate(calc(-50% + 1px), calc(-50% + 1px)) scale(1, 1) rotateZ(${p}deg) translate(${5*Math.random()}px, ${L.radius/Math.pow(L.fuels.length,3)}px)`,p+=360/7+Math.random()*(90-360/7),u.push(l(e))},O=e=>{L.heat+=e,u.push(l(L))},j=e=>{L.radius=Math.max(0,Math.min(1,e)),u.push(l(L))};window.changeRadius=j;const P=e=>{const t=.2*Math.random()+.8,{frameID:a,fromFrame:n,heat:i,_heatLoss:r,radius:o,oxygen:l,_remainingOxygen:u,fuels:p,air:h,wind:g,_largestFlame:w}=e,x=i/700*_*t,b=i/700*q*t;M.style.width=x+"px",M.style.height=b+"px",F.play("fire",Math.min(1,i/700*.8));const S=p.map(e=>e.value).reduce((e,t)=>e+t,0),$=p.filter(e=>e.value>10);let L=0;p.forEach((t,n)=>{const{valueStart:i,value:r,temp:o,id:l,frameID:d}=t,c=r/i,u=.3*Math.pow(c,1.6)+.7,h=s.querySelector(`.wood-plank[data-wood="${l}"]`);if(!h)return;const m=40*Math.min(1,(a-d)/100*20)-40,f=h.style.transform.replace(/scale\([\d\.]+, [\d\.]+\)/,`scale(${u}, ${u})`).replace(/translate\(calc\(-50\% \+ [-\d\.]+px\), calc\(-50\% \+ [-\d\.]+px\)\)/,`translate(calc(-50% + 2px), calc(-50% + ${1.5*$.length+-3*L+m}px))`).split(/deg\) /)[0];L+=1.5*c;const y=10*e._radius*Math.pow(p.length,.15)*(p.length-n<10?Math.pow(1.3,(p.length-n)/2):Math.pow(1.2,5)+(6-6/Math.pow(p.length-n-10,.1)));h.style.transform=`${f}deg) translate(0px, ${y}px)`,h.style.backgroundColor="hsl(36Â°, 49%, 39%)",h.style.opacity=`${.7*Math.pow(Math.max(1,r/50),2)}`,h.querySelector(".temp").style.opacity=`${.5*Math.pow(Math.min(1,o/800),2)}`,h.querySelector(".ash").style.opacity=`${.9*Math.pow(1-c,1.5)}`});const k=[...p].reverse().map(((e,t)=>(a,n)=>[...Array(e+1)].join(" ")+`${t-1-n}.`.padStart(Math.ceil(Math.log10(t))+1)+" "+`${a.value.toFixed(2)}`.padStart(7)+" "+`${a.temp.toFixed(2)}`.padStart(8)+" "+`${a._transferredHeat.toFixed(2)}`.padStart(8)+" "+`(${a._heatChange.toFixed(2)}`.padStart(7)+" "+`${a._oxygenGiven.toFixed(2)}`.padStart(7)+" "+`${a._oxygenChange.toFixed(2)}`.padStart(7)+") ")(4,p.length)).join("\n"),R=p.filter(e=>0===e.value).map(e=>e.temp).reduce((e,t)=>e+t,0);0===y&&(v.style.display="none");const D=100*(a-n)/1e3,E=""+(D<86400?"":`${(""+Math.floor(D/86400)).padStart(2,"0")}d`)+(D<3600?"":`${(""+Math.floor(D%86400/3600)).padStart(2,"0")}h`)+(D<60?"":`${(""+Math.floor(D%3600/60)).padStart(2,"0")}m`)+`${(D%60).toFixed(1).padStart(4,"0")}s`;1===y&&(v.style.display="block",v.innerHTML="<pre>"+`Time: ${E}\n`+`totalFuel: ${S.toFixed(2)}\n`+`heat: ${i.toFixed(2)}\n`+`oxygen: ${u.toFixed(2)}/${l.toFixed(2)}\n`+`Largest Flame: ${w.toFixed(2)}\n`+"</pre>"),2===y&&(v.style.display="block",v.innerHTML="<pre>"+`frameID: #${a} (${E}), timeScale: ${c}\n`+`totalFuel: ${S.toFixed(2)} (${$.length} rich)\n`+`heat: ${i.toFixed(2)} (-${(1-r).toFixed(2)})\n`+`ashHeat: ${R.toFixed(2)}\n`+`radius: ${o.toFixed(2)}\n`+`oxygen: ${u.toFixed(2)}/${l.toFixed(2)}\n`+"fuels:   value     temp   _tHeat  _dHeat     _o2    _dO2\n"+`${k}\n`+`air: \n${d(h)}\n`+`wind: \n${d(g)}\n`+`_largestFrameSkip: ${m}\n`+`_totalFrameSkipped: ${f}\n`+`_largestFlame: ${w}\n`+"</pre>")},z=e=>{const{isRunning:t,fromFrame:a,frameID:n,fuels:i,heat:r,oxygen:o,heatTransferRate:s,air:l,wind:d,woodSpawnRate:c,_largestFlame:u}=e;g.style.display="flex",w.innerHTML="It went out",x.innerHTML=`\n    <ul>\n        <li>Play time: ${(100*(n-a)/1e3).toFixed(1)} seconds</li>\n        <li>Largest flame made: ${u}</li>\n    </ul>\n    <button class="start">Add more spark!</button><br />\n    <button class="reset">Reset</button>\n    `,D()},W=e=>{g.style.display="none"};(()=>{A(0),h=Date.now(),P(L);const e=()=>{let t=0;for(;Date.now()-h>100/c;)L=T({...L}),h+=100/c,t++;t>0&&P(L),t>1&&(m=Math.max(m,t-1)),t>1&&(f+=t-1),requestAnimationFrame(e)};e()})();a(3)}]);</script></body></html>