<meta name=viewport content="width=device-width"><meta name=theme-color content=#000807><title>Floating - js13kGames 2021</title><style>body{margin:0}sbd{background:#ccaaff11;width:100%;top:0;position:absolute;display:block;text-Align:center;color:#fff;font-family:courier}b{color:red}</style><canvas id=canvas></canvas><sbd></sbd><script>class A{static randOpt(t,e){return arguments[Math.floor(Math.random()*arguments.length)]}static resultantOf(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))}}let O={arc:function(t,e,a,r,s,o){this.x=t,this.y=e,this.radius=a,this.startAngle=r,this.endAngle=s,this.styling=o,this.type="arc",this.center={},this.rotation={rad:0,about:this.center},this.alpha=1,this.GCParams={shadow:[0,0,"transparent",0]},this.indexInScene=null,this.updateProps=t=>{this.center.x=this.x,this.center.y=this.y};let i=new O.autoStyle(this.styling,this);this.draw=t=>{t.beginPath(),t.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle),i.call(t),t.closePath(),this.updateProps(t)}},rect:function(t,e,a,r,s){this.x=t,this.lengthX=e,this.y=a,this.breadthY=r,this.styling=s,this.center={},this.rotation={rad:0,about:this.center},this.alpha=1,this.GCParams={shadow:[0,0,"transparent",0]},this.updateProps=t=>{this.center.x=this.x+this.lengthX/2,this.center.y=this.y+this.breadthY/2};let o=new O.autoStyle(this.styling,this);this.draw=t=>{t.beginPath(),o.call(t,()=>{t.strokeRect(this.x,this.y,this.lengthX,this.breadthY)},()=>{t.fillRect(this.x,this.y,this.lengthX,this.breadthY)}),t.closePath(),this.updateProps(t)}},autoStyle:function(t,e){t="string"==typeof t?t.split("_"):t,this.object=e,this.color=e.color=t[1],this.strokeWidth=e.strokeWidth=Number(t[0]),this.styleType="FILL",""==t[0]&&(this.styleType="FILL"),""!=t[0]&&(this.styleType="STROKE"),this.call=(t,e=function(){t.stroke()},a=function(){t.fill()})=>{this.color=this.object.color,this.strokeWidth=this.object.strokeWidth,"FILL"==this.styleType&&(t.fillStyle=this.color,a()),"STROKE"==this.styleType&&(t.lineWidth=this.strokeWidth,t.strokeStyle=this.color,e())}},rotate:function(t,e){0!=t.rotation.rad&&null!=t.center&&(e.translate(t.rotation.about.x,t.rotation.about.y),e.rotate(t.rotation.rad),e.translate(-t.rotation.about.x,-t.rotation.about.y))},shadow:function(t,e){[t.shadowColor,t.shadowOffsetX,t.shadowOffsetY,t.shadowBlur]=[e[2],e[0],e[1],e[3]]},stylesAndComposites:{draw:function(t,e){e.globalAlpha=t.alpha,O.shadow(e,t.GCParams.shadow),e.globalCompositeOperation=null!=t.GCParams.op?t.GCParams.op:"source-over"},restore:function(t){t.globalAlpha=1,O.shadow(t,[0,0,"transparent",0]),t.globalCompositeOperation="source-over"}},useScene:function(t){["rect","arc"].map(t=>{O[t].prototype.shapeName=t}),this.B=t,this.allChildren=[];let e=()=>{O.clearCanvas(this.B),this.allChildren.map((t,e)=>{t.indexInScene=e,this.B.save(),O.stylesAndComposites.draw(t,this.B),O.rotate(t,this.B),t.draw(this.B),O.stylesAndComposites.restore(this.B),this.B.restore()}),requestAnimationFrame(e)};e(),this.add=t=>{t.indexInScene=this.allChildren.length,this.allChildren.push(t)},this.remove=t=>{t.indexInScene&&this.allChildren.splice(t.indexInScene,1)}},clearCanvas:function(t){t.clearRect(0,0,t.canvas.width,t.canvas.height)}};try{let s={paused:!1,over:!1,score:0,scores:[0],time:0},o=new Audio,i=new Audio,n=(i.src="a.mp3",new Audio),h=class{static TAGN(t,e){if("number"==typeof e)return document.getElementsByTagName(t)[e]}}.TAGN("sbd",0),d=0;var P={active:!1},e=document.getElementById("canvas"),T=e.getContext("2d"),X=e.width=screen.width,k=e.height=window.innerHeight,B=(e.style.marginTop=0,e.style.marginLeft=0,X),G=k;A.resultantOf(B,G);let t,l,a,c,u,p,y,m,b=new O.useScene(T),r=T.createLinearGradient(0,0,0,G);r.addColorStop(1,"#000012"),r.addColorStop(0,"black");let w,g,x,f,v,C,M,S=130;function R(t,e,a,r=!0){return r?e-a<t&&t<e+a:e<t&&t<a}function Y(){b.allChildren.map(t=>{b.remove(t)}),s.over=!1,s.score=0,s.time=0,t=new O.rect(0,B,0,G,["",r]),b.add(t),l=[];for(let t=0;t<20;t++){var e=A.randOpt("white","crimson","goldenrod");(e=new O.arc(B/2,G/2,B/5,0,6.3,"_"+e)).x=Math.random()*B*2,e.y=Math.random()*G,e.radius=.05+.2*Math.random(),e.GCParams.shadow=[.1,.1,"transparent",0],e.alpha=1,e.rotationSpeed=5e-4*Math.random()*A.randOpt(1,-1),e.speedX=(.1+.1*Math.random())*A.randOpt(-1,1),l.push(e),b.add(e)}(w=new O.arc(B/2,G+G/2,G/2,0,6.3,"_red")).GCParams.shadow=[.001,.001,"red",2*w.radius],b.add(w),a="#bb112b",c=new O.rect(0,20,0,20,"_"+a),u=new O.rect(0,20,0,20,"_"+a),p=new O.rect(0,20,0,20,"_"+a),y=new O.arc(B/2,G/2,B/40,0,6.28,"_"+a),g=.01,x=y.center,f=0,v={},S=130,b.add(p),b.add(c),b.add(u),b.add(y),y.crash=!1,m=[p,y,c,u],(C=[]).push(new(M=function(t,e,a){let r=1!=a&&0==a?"_red":"_blue",s=new O.arc(0,0,4,0,6.3,r),o=new O.arc(0,0,4,0,6.3,r),i=new O.arc(0,0,4,0,6.3,r);return b.add(s),b.add(o),b.add(i),{type:a,x:t,y:e,r:12,yplus:A.randOpt(!0,!1),rad:0,arc1:s,arc2:o,arc3:i,move:function(){s.x=this.x,s.y=this.y-this.r/2,o.x=this.x-this.r/2,o.y=this.y,i.x=this.x+this.r/2,i.y=this.y,this.x-=3,s.rotation.rad=o.rotation.rad=i.rotation.rad=this.rad,this.rad+=.05,s.rotation.about=o.rotation.about=i.rotation.about={x:this.x,y:this.y}},shoot:function(){}}})(B+Math.random()*B,y.y,A.randOpt(0,1,1)))}Y(),function t(){d++,s.time++,s.over||(s.score=10*Math.floor(s.time/10)),y.y>G-1&&!s.over&&(n.play(),s.over=!0,s.scores.push(s.score)),Math.floor(y.rotation.rad/6.28),l.map(t=>{t.x-=t.speedX,(t.x<0||B<t.x)&&(t.speedX*=-1,t.y=Math.random()*G,t.radius=.2+.9*Math.random(),t.color=A.randOpt("white","crimson","goldenrod"))}),C.map(t=>{t.move(),t.shoot(),C[C.length-1].x<B&&C.push(new M(B+Math.random()*B,y.y,A.randOpt(0,1))),t.x,R(y.x,t.x,y.radius)&&R(y.y,t.y,y.radius)&&!s.over&&(0==t.type&&0<S&&(S-=2.6,i.play()),1==t.type)&&S<130&&(S+=2.6,o.play())}),p.lengthX=5*y.radius,p.x=y.x-p.lengthX/2,p.y=y.y-p.breadthY/2,p.breadthY=y.radius/3,c.lengthX=c.breadthY=u.lengthX=u.breadthY=2*y.radius,c.x=p.x-c.lengthX/2,u.x=p.x+ +p.lengthX-u.lengthX/2,c.y=u.y=y.y-c.breadthY/2,y.x=0+p.lengthX,y.y<G&&!s.over&&y.y++,P.active&&0<y.y&&!s.over&&(y.y-=S/65),!P.active&&.01<g&&(g-=.001),P.active&&g<.05&&(g+=.001),y.crash&&(g/=10),f+=g,12<Math.floor(y.rotation.rad/6.28)&&(f=0),m.map(t=>{t.rotation.rad=f,t.rotation.about=x,y.crash&&(t.alpha=.5)});let e="",a=Math.floor(S/10);for(let t=0;a>t;t++)e+="|";for(let t=0;13-a>t;t++)e+="-";var r=s.score>=Math.max(...s.scores);h.innerHTML="Blues increases, Red increases your power<br>Satellite Power: <b>"+e+"</b> | "+a+"/13 <br>"+(r?"***High":"")+"Score: <b>"+s.score+"</b> Rank: <b>P0S</b><br>"+(s.over?"<b>GAMEOVER</b><br>":"")+"TAP TO RESTART",s.paused||requestAnimationFrame(t)}(),h.onclick=function(){Y()},e.ontouchstart=function(t){P={active:!0}},e.ontouchend=function(t){P.active=!1},document.onkeypress=t=>{P={active:!0}},document.onkeyup=t=>{P.active=!1}}catch(P){}</script>