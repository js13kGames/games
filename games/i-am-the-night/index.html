<!doctype html><title>I am the Night - js13kGames 2025</title><body style='margin:0;padding:0;background-color:#000;height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center'><script>var e,t,r,a,i,o,n,l,d,v,s,c,f,u,h,m,g,p,w,A,y,b,x=Math,S=x.floor,H=x.ceil,k=x.abs,N=x.max,P=x.min,C=x.round,F=x.sqrt,T=x.hypot,V=x.cos,J=x.sin,R=x.tan,E=x.random,M=2.71828,B=3.14159,D=new Float32Array(5),G=(e,t,r,a)=>(D[0]=r-e,D[1]=a-t,D[2]=T(D[0],D[1]),0===D[2]?(D[3]=0,D[4]=0,!1):(D[3]=D[0]/D[2],D[4]=D[1]/D[2],!0)),L=(e,t,r)=>e+(t-e)*r,U=(e,t,r)=>e<t?t:r<e?r:e,q=(e,t,r,a,i,o)=>r<=e&&e<r+i&&a<=t&&t<a+o,I=(e,t,r,a,i)=>(e-r)*(e-r)+(t-a)*(t-a)<i*i,z=(e,t,r)=>{e[0]=t,e[1]=r},Z=(e,t,r,a)=>new Float32Array([e,t,r,a]),j=(e,t)=>{e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]},O=(e,t)=>S(E()*(t-e+1))+e,Y="js13k2025dbrad_final",X=window.localStorage,K=[0,0,0,1],Q=()=>{var e=S(ie[2]/60),t=S(ie[2])%60;return e.toFixed(0).padStart(2,"0")+":"+t.toFixed(0).padStart(2,"0")},$=()=>{var e=JSON.stringify(K);e=btoa(e),X.setItem(Y,e)},_=[0,0],W=[0,0],ee=[0,0],te=0,re=0,ae=(e,t,r,a)=>{ee[0]=e,ee[1]=t,ee[0]=N(168,P(3928,ee[0])),ee[1]=N(168,P(3928,ee[1])),G(W[0],W[1],ee[0],ee[1]),W[0]+=(ee[0]-W[0])*(e=1-M**(-(3+5e-5*D[2])*a)),W[1]+=(ee[1]-W[1])*e,_[0]=C(W[0]),_[1]=C(W[1]),0<te&&(te-=r,t=(E()-.5)*re,a=(E()-.5)*re,_[0]+=t,_[1]+=a,re*=.95,0<te||(re=0))},ie=[0,0,0],oe=4096,ne=4096,le=256,de=new Uint8Array(65536),ve=t=>{var r=e.createBuffer(1,t.length,ue),a=e.createBufferSource();r.getChannelData(0).set(t),a.buffer=r,a.connect(e.destination),a.start()},se=(e=1,t=.05,r=220,a=0,i=0,o=.1,n=0,l=1,d=0,v=0,s=0,c=0,f=0,u=0,h=0,m=0,g=0,p=1,w=0,A=0,y=0)=>{let b,x,S=2*B,H=e=>e<0?-1:1,F=ue,T=d*=500*S/F/F,M=r*=(1+2*t*E()-t)*S/F,D=[],G=0,L=0,U=0,q=1,I=0,z=0,Z=0,j=S*k(y)*2/F,O=V(j),Y=J(j)/4,X=1+Y,K=-2*O/X,Q=(1-Y)/X,$=(1+H(y)*O)/2/X,_=-(H(y)+O)/X,W=$,ee=0,te=0,re=0,ae=0;for(v*=500*S/F**3,h*=S/F,s*=S/F,c*=F,f=f*F|0,e*=fe,x=(a=a*F+9)+(w*=F)+(i*=F)+(o*=F)+(g*=F)|0;U<x;D[U++]=Z*e)++z%(100*m|0)||(Z=n?1<n?2<n?3<n?J(G**3):N(P(R(G),1),-1):1-(2*G/S%2+2)%2:1-4*k(C(G/S)-G/S):J(G),Z=(f?1-A+A*J(S*U/f):1)*H(Z)*k(Z)**l*(U<a?U/a:U<a+w?1-(U-a)/w*(1-p):U<a+w+i?p:U<x-g?(x-U-g)/o*p:0),Z=g?Z/2+(g>U?0:(U<x-g?1:(x-U)/g)*D[U-g|0]/2/e):Z,y&&(Z=ae=W*ee+_*(ee=te)+$*(te=Z)-Q*re-K*(re=ae))),b=(r+=d+=v)*V(h*L++),G+=b+b*u*J(U**5),q&&++q>c&&(r+=s,M+=s,q=0),!f||++I%f||(r=M,d=T,q=q||1);return D},ce=e=>ve(se(...e)),fe=.3,ue=44100,he=0,me=150,ge=0,pe=36,we=10922,Ae=131064,ye=new ArrayBuffer(1572768),be=new Float32Array(ye),xe=new Uint32Array(ye),Se=new Uint16Array(Ae),He=0,ke=(e,t)=>(t=c.createShader(t),c.shaderSource(t,e),c.compileShader(t),t),Ne=(e,t,r)=>{var a=c.createBuffer();return c.bindBuffer(e,a),c.bufferData(e,t,r),a},Pe=(e,t,r,a,i,o,n,l,d,v,s,f,u)=>{He+1<we||(c.bufferSubData(34962,0,ye),c.drawElements(4,6*He,5123,0),He=0);var h=He*pe;be[h++]=e,be[h++]=t,be[h++]=i,be[h++]=o,be[h++]=n,be[h++]=l,be[h++]=d,be[h++]=v,xe[h++]=u,be[h++]=e+r,be[h++]=t+a,be[h++]=i,be[h++]=o,be[h++]=n,be[h++]=l,be[h++]=s,be[h++]=f,xe[h++]=u,be[h++]=e,be[h++]=t+a,be[h++]=i,be[h++]=o,be[h++]=n,be[h++]=l,be[h++]=d,be[h++]=f,xe[h++]=u,be[h++]=e+r,be[h++]=t,be[h++]=i,be[h++]=o,be[h++]=n,be[h++]=l,be[h++]=s,be[h++]=v,xe[h]=u,++He<we||(c.bufferSubData(34962,0,ye),c.drawElements(4,6*He,5123,0),He=0)},Ce=[[0,[1],0,16,4,4],[0,[2],4,16,5,5],[0,[3],9,16,6,6],[0,[4],0,22,7,7],[0,[5],7,22,8,8],[1,[6,7,8,9,10,11,12,13,14,15,16],16,16,16,16],[1,[17,18],192,16,8,8],[1,[19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34],0,32,16,16]],Fe=[],Te=(e,t,r,a,i,o)=>({o:e,i:t,t:r,_:a,l:i,v:o}),Ve=4294309365,Je=4278190080,Re=4294057323,Ee=(Z(107/255,29/255,242/255,1),4279440314),Me=4279211279,Be=(e,t)=>{e[0]=(255&(t>>>=0))/255,e[1]=((65280&t)>>>8)/255,e[2]=((16711680&t)>>>16)/255,e[3]=((4278190080&t)>>>24)/255},De=e=>((((255*e[3]&255)<<8>>>0|255*e[2]&255)<<8>>>0|255*e[1]&255)<<8>>>0|255*e[0]&255)>>>0,Ge=0,Le=0,Ue=(e,t)=>{500<(Ge+=e)&&(1e3<Ge&&(Ge=0),Ge-=500,Le=++Le%2)},qe=1e3,Ie=50,ze=!1,Ze=e=>{0<qe?qe-=e:(ze=!0,0<Ie?Ie-=e:(ce([2,,25,.06,.31,.35,,3.9,,-3,,,,.9,12,.9,.3,.32,.16]),ze=!1,qe=O(50,8e3),Ie=O(50,200)))},je=()=>{qe=1e3,ze=!(Ie=50)},Oe=[],Ye=0,Xe=(e,t,r,a,i,o,n,l,d,v,s,c,f)=>{var u=Oe[Ye];u.u=e,u.p=t,u.o=r,u.i=a,u.m=i,u.h=o,u.t=n,u._=l,u.l=d,u.v=v,u.g=s,u.A=c,u.k=f,Ye++},Ke=()=>{c.clear(16384);for(let e=0;e<Ye;e++){let t=Oe[e],r=0,a=0;t.A&&(r=-t.o,t.m*=-1),t.k&&(a=-t.i,t.h*=-1),Pe(r,a,t.o,t.i,t.u,t.p,t.m,t.h,t.t,t._,t.l,t.v,t.g)}0<He&&(c.bufferSubData(34962,0,be.subarray(0,He*pe)),c.drawElements(4,6*He,5123,0),He=0)},Qe=(e,t,r,a,i)=>{Xe(e,t,r,a,1,1,2,2,2,2,i,!1,!1)},$e=(e,t,r,a=1,i=Ve,o=!1,n=!1,l=!1,d=!1)=>{Xe(t,r+(l?Le:0),(e=Fe[e+(d?Le:0)]).o,e.i-(l?Le:0),a,a,e.t,e._,e.l,e.v-(l?+Le/256:0),i,o,n)},_e={},We=(e,t,r,a=Ve,i=1,o=0,n=0)=>{let l=8*i,d=l+2*i,v=(e=(e+"").toUpperCase()).split("|"),s=v.length,c=l*s+2*i*(s-1),f=0,u=1===n?S(c/2):2===n?c:0,h=0;for(let e=0;e<s;e++){var m,g=v[e],p=(m=g.length)*l;1===o?h=S(p/2):2===o&&(h=p);for(let e=0;e<m;e++){var w=g[e];" "!==w&&(w=Fe[100+_e[w]],Xe(t+f-h,r-u,w.o,w.i,i,i,w.t,w._,w.l,w.v,a,!1,!1)),f+=l}r+=d,f=0}},et=[],tt=[],rt=[],at=[],it=[],ot=[],nt=[],lt=[],dt=[],vt=[],st=[],ct=[],ft=9999,ut={P:[0,0],F:[0,0],M:[250,250],B:16,q:4,Z:2,G:Z(0,0,0,1),U:Z(0,0,0,.1),j:200},ht={P:[0,0],F:[0,0],M:[0,0],B:2,q:0,Z:0,G:Z(1,1,1,1),U:Z(0,0,0,.1),j:20},mt={P:[0,0],F:[0,0],M:[250,250],B:6,q:0,Z:0,G:Z(1,0,0,1),U:Z(0,0,0,0),j:200},gt=new Set,pt=new Float32Array(5),wt=(e,t,r,a)=>{0<pt[e]?pt[e]-=a:(At(t),pt[e]+=r)},At=e=>{gt.add(ft),z(et[ft],e.P[0],e.P[1]),z(rt[ft],e.F[0]+e.M[0]*(E()-.5),e.F[1]+e.M[1]*(E()-.5)),j(nt[ft],e.G),j(lt[ft],e.U),j(dt[ft],nt[ft]),vt[ft]=De(dt[ft]),st[ft]=e.j,ct[ft]=st[ft],at[ft]=S(e.B+e.Z*(E()-.5)),it[ft]=e.q,ot[ft]=at[ft],--ft<0&&(ft=9999)},yt=Array.from({length:100},(e,t)=>+C(10*1.2**(t-1))),bt=[{H:0,J:"Vitality",R:"+20 Max HP",T:0,C:()=>{b.I+=20,b.S+=20}},{H:1,J:"Ferocity",R:"+1 Damage",T:0,C:()=>{b.D+=1}},{H:2,J:"Fortify",R:"+1 Armor",T:0,C:()=>{b.Y+=1}},{H:3,J:"Frequency",R:"+5% Firerate",T:0,C:()=>{b.O+=5}},{H:4,J:"Agility",R:"+1 Movement Speed",T:0,C:()=>{b.V+=1}},{H:5,J:"Cat Claw",R:"Claw nearby enemies|upgrade: range+ pierce+",T:1,C:()=>{xt(5,0,500,e=>{var t,r,i,o,n=.1+.1*(e.N-1);e=e.N,ir(300)?(G(Tt[0],Vt[0],ar[0],ar[1]),o=10*-D[4],i=10*D[3],sr(Tt[0],Vt[0],t=500*D[3],r=500*D[4],2,1,n,e),sr(Tt[0]+o,Vt[0]+i,t,r,2,1,n,e),sr(Tt[0]-o,Vt[0]-i,t,r,2,1,n,e)):(o=0===kt?-500:500,sr(Tt[0],Vt[0],o,0,2,1,n,e),sr(Tt[0],Vt[0]+10,o,0,2,1,n,e),sr(Tt[0],Vt[0]-10,o,0,2,1,n,e)),ve(a)})}},{H:6,J:"The Zoomies",R:"Random direction attack|upgrade: count+",T:1,C:()=>{xt(6,0,250,e=>{for(let a=0;a<e.N;a++){var t=E()*B*2,r=O(150,200),i=V(t)*r;t=J(t)*r,sr(Tt[0],Vt[0],i,t,3,1,2)}ve(a)})}},{H:7,J:"Hairball",R:"Piercing attack|upgrade: damage+ size+",T:1,C:()=>{xt(7,0,2e3,e=>{var t,r=5*e.N;e=5*e.N,ir(300)?(G(Tt[0],Vt[0],ar[0],ar[1]),sr(Tt[0],Vt[0],300*D[3],300*D[4],e,r,5,999)):(t=0===kt?-300:300,sr(Tt[0],Vt[0],t,0,e,r,5,999)),ve(a)})}},{H:8,J:"Menacing Presence",R:"Slow nearby enemies|upgrade: slow+ size+",T:1,C:()=>{xt(8,1,1e6,e=>{var t=N(.7-.1*(e.N-1),.3);e.K=fr(e.K,50+10*e.N,0,-1,587171976,t)})}},{H:9,J:"Nine Lives",R:"Regenerate health|upgrade: frequency+",T:1,C:()=>{xt(9,0,5e3,e=>{e.O=5e3-1e3*(e.N-1),b.S=P(b.I,b.S+1)})}},{H:10,J:"Cardinal Assault",R:"4-way attack|upgrade: pierce+ size+",T:1,C:()=>{xt(10,0,1e3,e=>{sr(Tt[0],Vt[0],300,0,1+e.N,1,2,e.N),sr(Tt[0],Vt[0],-300,0,1+e.N,1,2,e.N),sr(Tt[0],Vt[0],0,300,1+e.N,1,2,e.N),sr(Tt[0],Vt[0],0,-300,1+e.N,1,2,e.N),ve(a)})}},{H:11,J:"Slash",R:"Arc attack|upgrade: count+ size+",T:1,C:()=>{xt(11,0,500,e=>{var t=5+5*e.N,r=B/(6-e.N),i=ir(300)?x.atan2(ar[1]-Vt[0],ar[0]-Tt[0]):0===kt?B:0;for(let a=0;a<t;a++){var o=i-r/2+a/(t-1)*r,n=Tt[0]+64*V(o);o=Vt[0]+64*J(o),sr(n,o,0,0,e.N,1,.1,999)}ve(a)})}},{H:12,J:"Aggressive Shedding",R:"Radial attack|upgrade: count+",T:1,C:()=>{xt(12,0,3e3,e=>{cr(Tt[0],Vt[0],8*e.N,300),ve(a)})}},{H:13,J:"Fel d 1",R:"Damaging aura|upgrade: size+",T:1,C:()=>{xt(13,1,1e6,e=>{e.K=fr(e.K,50+10*e.N,1+b.D,-1,1720223999)})}},{H:14,J:"Extreme Reflexes",R:"Nullify attack|upgrade: frequency+",T:1,C:()=>{xt(14,0,1e4,e=>{b.X=P(1,b.X+1)})}},{H:15,J:"Hiss",R:"Knockback attack|upgrade: count+ knockback+",T:1,C:()=>{xt(15,0,1500,e=>{let t=8+4*e.N,r=B/4,i=0===kt?B:0;ir(300)&&(i=x.atan2(ar[1]-Vt[0],ar[0]-Tt[0]));var o=10+5*e.N;for(let e=0;e<t;e++){var n=i-r/2+(n=1<t?e/(t-1):.5)*r,l=(n+=(E()-.5)*B/12,500*V(n));n=500*J(n),sr(Tt[0],Vt[0],l,n,2,1,.2,1,Ee,!1,o)}ve(a)})}},{H:16,J:"Pounce",R:"Burst attack on dash|upgrade: count+",T:1,C:()=>{xt(16,2,1e6,e=>{b.L=()=>{cr(Tt[0],Vt[0],4+4*e.N,300)}})}},{H:17,J:"Shadow Stalk",R:"Stealth then deal double damage|upgrade: duration+",T:1,C:()=>{xt(17,0,1e4,e=>{b.W=b.$=1e3+1e3*e.N,b.e0=b.o0=1e3+500*e.N,fr(-1,336,0,1+e.N,2852126720)})}}],xt=(e,t,r,a)=>{var i=b.i0.find(t=>t.H===e);i?(i.N++,i.r0=0):b.i0.push({H:e,a0:t,N:1,O:r,r0:0,t0:a,K:-1})},St=2e4,Ht=16,kt=0,Nt=0,Pt=new Uint8Array(St),Ct=new Uint8Array(St),Ft=new Float32Array(St),Tt=new Float32Array(St),Vt=new Float32Array(St),Jt=new Float32Array(St),Rt=new Float32Array(St),Et=new Float32Array(St),Mt=new Float32Array(St),Bt=new Float32Array(St),Dt=new Float32Array(St),Gt=new Float32Array(St),Lt=new Uint32Array(St),Ut=new Float32Array(St).fill(1),qt=new Float32Array(St),It=new Float32Array(St),zt=new Float32Array(St),Zt=new Float32Array(St).fill(1),jt=new Uint32Array(St),Ot=new Int32Array(St),Yt=0,Xt=new Uint32Array(St),Kt=0,Qt=new Uint16Array(65536),$t=new Uint32Array(8388608),_t=Array(St),Wt=new Uint8Array(St);for(let e=0;e<St;e++)_t[e]=new Uint16Array(256);var er,tr,rr,ar=new Float32Array(2),ir=e=>{if(-1!==ar[0]||-1!==ar[1])return!0;let t=Tt[0],r=Vt[0],a=U(S((t-e)/64),0,255),i=U(S((t+e)/64),0,255),o=U(S((r-e)/64),0,255),n=U(S((r+e)/64),0,255),l=e+1;for(let f=o;f<=n;f++)for(let o=a;o<=i;o++){var d=256*f+o,v=Qt[d],s=128*d;for(let a=0;a<v;a++){var c=$t[s+a];Ct[c]&&2&Pt[c]&&(G(t,r,Tt[c],Vt[c]),D[2]<l)&&D[2]<=e&&(l=D[2],ar[0]=Tt[c],ar[1]=Vt[c])}}return l<=e},or=()=>{var e;return 0===Kt?-1:(e=Xt[--Kt],Ut[e]=Ct[e]=1,It[e]=qt[e]=0,Ot[e]=Yt,jt[Yt++]=e)},nr=e=>{Ct[e]=0;var t=Ot[e],r=jt[--Yt];Ot[jt[t]=r]=t,Ot[e]=-1,Xt[Kt++]=e,2&Pt[e]&&Nt--},lr=(e,t,r=8,a=3,i=1,o=Je,n=!1,l=0,d=1)=>!n&&300<=Nt||(n=or())<1?-1:(Pt[n]=2,Ft[n]=r,Tt[n]=e,Vt[n]=t,Jt[n]=Rt[n]=0,Bt[n]=a,Dt[n]=i,Lt[n]=o,l&&(It[n]=l,qt[n]=E()*l),Zt[n]=d,Nt++,n),dr=F(225792)/2+84,vr=(e=3,t=8,r=1,a=Je,i=!1,o=0,n=1)=>{let l=E()*B*2,d=_[0]+V(l)*dr,v=_[1]+J(l)*dr,s=((d<0||v<0||d>oe||v>ne)&&(l=(l+B)%(2*B),d=_[0]+V(l)*dr,v=_[1]+J(l)*dr),d=U(d,0,oe),v=U(v,0,ne),lr(d,v,t,e,r,a,i,o,n));if(-1===s&&!i){let e=Tt[0],t=Vt[0],r=-1,a=-1;for(let i=0;i<Yt;i++){var c=jt[i];Ct[c]&&2&Pt[c]&&(G(e,t,Tt[c],Vt[c]),D[2]>a)&&(a=D[2],r=c)}-1!==r&&(Tt[r]=d,Vt[r]=v,s=r)}return s},sr=(e,t,r,a,i=2,o=1,n=2,l=1,d=Ee,v=!1,s=0)=>{var c=or();return c<1?-1:(Pt[c]=4|(v?32:0),Ft[c]=i,Tt[c]=e,Vt[c]=t,Jt[c]=r,Rt[c]=a,Bt[c]=l,Dt[c]=o,Gt[c]=n,Lt[c]=d,zt[c]=s,c)},cr=(e,t,r,a,i=!1)=>{for(let l=0;l<r;l++){var o=V(n=2*B*l/r)*a,n=J(n)*a;sr(e,t,o,n,3,1,2,1,i?Re:Ee,i)}},fr=(e=-1,t=50,r=5,a=-1,i=1073807232,o=1)=>(e=0<=e&&Ct[e]&&8&Pt[e]?e:or())<1?-1:(Pt[e]=8,Ft[e]=t,Tt[e]=Tt[0],Vt[e]=Vt[0],Rt[e]=Jt[e]=0,Dt[e]=r,Gt[e]=a,Lt[e]=i,Ut[e]=o,e),ur=(e,t)=>{Bt[e]-=t*(0<b.o0?2:1),0<Bt[e]||(((e,t,r,a=0,i=Me)=>{var o=or();o<1||(Pt[o]=Ht,Ft[o]=4,Tt[o]=e,Vt[o]=t,Rt[o]=Jt[o]=0,Dt[o]=r,Lt[o]=i)})(Tt[e],Vt[e],Dt[e],N(2,S(.5*Dt[e]))),ce([.1,,900,.07,.08,.01,1,.1,,,109,,.02,,.9,,,.53,,,662]),mt.P[0]=Tt[e],mt.P[1]=Vt[e],Be(mt.G,Ee),mt.G[3]=.8,Be(mt.U,Ee),mt.U[3]=0,mt.B=Ft[e],((e,t)=>{for(;--t;)At(e)})(mt,10),Ct[e]=0)},hr=e=>{0<Gt[0]||(K[3]&&(re=15,te=50),0<b.X?(b.X=N(0,b.X-1),ce([,,,.05,.05,.3,,3,-20,,,,,,200,.2,,.9])):(b.S-=N(1,e-b.Y),ce([,.6,325,.04,.02,.04,2,3,,,,,,.5,1,.1,,.8,.07])),Gt[0]=.8,0<b.S)||(Ct[0]=0)},mr=(e,t,r,a)=>{((e,t,r,a)=>{var i=Vt[a]+(n=Ft[a]),o=Vt[a]-.125*n,n=(a=U(e,Tt[a]-n,Tt[a]+n),U(t,o,i));return T(e-a,t-n)<=r})(Tt[0],Vt[0],Ft[0],e)&&(Tt[e]+=t*a,Vt[e]+=r*a,hr(Dt[e]))},gr=(e,t)=>{if(!_t[t].includes(e)){if(_t[t][Wt[t]++]=e,ce([.1,,550,.01,.03,.05,1,1.5,-2,,250]),Gt[t]=.1,ur(t,Dt[e]+b.D),0<zt[e]){let r,a,i=T(Jt[e],Rt[e]);if(0<i)r=Jt[e]/i,a=Rt[e]/i;else{if(!G(Tt[e],Vt[e],Tt[t],Vt[t]))return;r=D[3],a=D[4]}Tt[t]+=r*zt[e],Vt[t]+=a*zt[e]}--Bt[e],0<Bt[e]||(Ct[e]=0)}},pr=(e,t)=>{if(0!==Yt&&0!==Ct[0]){Qt.fill(0),ar[0]=-1,ar[1]=-1;var r=Tt[0],a=Vt[0];for(let e=Yt-1;0<=e;e--){var o=jt[e],n=Pt[o];if(Ct[o]){if(2&n){0<Gt[o]&&(Gt[o]-=t);var l=35+2.5*ie[1];(Wt[o]=0)<b.$||(G(Tt[o],Vt[o],r,a),1e-6<D[2]?(Jt[o]=D[3]*l*Zt[o]*Ut[o],Rt[o]=D[4]*l*Zt[o]*Ut[o],Ut[o]=1):Rt[o]=Jt[o]=0,0<It[o]&&(qt[o]-=t,0<qt[o]||(0<D[2]&&D[2]<198&&(l=S(.5*Dt[o]),sr(Tt[o],Vt[o],160*D[3],160*D[4],N(3,l),l,5,1,Re,!0),ve(i)),qt[o]+=It[o])))}else if(4&n){if(Gt[o]-=t,Gt[o]<=0){nr(o);continue}}else if(1&n)0!==Jt[o]&&(kt=Jt[o]<0?0:1,Jt[o]=Jt[o]*M**(-5*t),Jt[o]<1&&-1<Jt[o]&&(Jt[o]=0),Jt[o]=U(Jt[o],-300,300)),0!==Rt[o]&&(Rt[o]=Rt[o]*M**(-5*t),Rt[o]<1&&-1<Rt[o]&&(Rt[o]=0),Rt[o]=U(Rt[o],-300,300)),0<Gt[o]&&(Gt[o]-=t);else if(8&n){if(0<Gt[o]&&(Gt[o]-=t,Gt[o]<=0)){nr(o);continue}Tt[o]=Tt[0],Vt[o]=Vt[0]}else if(n&Ht){Jt[o]*=M**(-2*t),Rt[o]*=M**(-2*t),G(Tt[o],Vt[o],r,a);let e=10;50<D[2]?100<D[2]||(e=100):e=200,Jt[o]=D[3]*e,Rt[o]=D[4]*e}if(Tt[o]+=Jt[o]*t,Vt[o]+=Rt[o]*t,1===n||2===n)Tt[o]=U(Tt[o],0+Ft[o],oe-Ft[o]),Vt[o]=U(Vt[o],0+Ft[o],ne-Ft[o]);else if((4===n||32===n)&&(Tt[o]<0||oe<Tt[o]||Vt[o]<0||ne<Vt[o])){nr(o);continue}Ct[o]&&(n=l=void 0,l=((e,t)=>{let r=S(e/64),a=S(t/64);return r<0?r=0:r<256||(r=255),a<0?a=0:a<256||(a=255),256*a+r})(Tt[J=o],Vt[J]),(n=Qt[l])<128)&&($t[128*l+n]=J,Qt[l]=n+1)}else nr(o)}for(let e=0;e<Qt.length;e++){var d=Qt[e];if(1<d){var v=128*e;for(let e=0;e<d;e++){var s=$t[v+e];if(Ct[s])for(let t=e+1;t<d;t++){var c,f,u,h,m=$t[v+t];Ct[m]&&(G(Tt[s],Vt[s],Tt[m],Vt[m]),D[2]<(c=Ft[s]+Ft[m]))&&0!==D[2]&&(c-=D[2],u=Pt[m],2&(f=Pt[s])&&2&u?(T=c*((h=Ft[m])/(h=0<(h=(V=Ft[s])+h)?h:1)),V=V/h*c,Tt[s]-=D[3]*T,Vt[s]-=D[4]*T,Tt[m]+=D[3]*V,Vt[m]+=D[4]*V):1&f&&2&u?mr(m,D[3],D[4],c):1&u&&2&f?mr(s,D[3],D[4],-c):4&f&&!(32&f)&&2&u?gr(s,m):4&u&&!(32&u)&&2&f?gr(m,s):32&f&&1&u?(hr(Dt[s]),--Bt[s],0<Bt[s]||(Ct[s]=0)):32&u&&1&f?(hr(Dt[m]),--Bt[m],0<Bt[m]||(Ct[m]=0)):(1&f&&u&Ht||f&Ht&&1&u)&&(T=Dt[h=f&Ht?s:m],b.d0+=T,V=yt[b.N],b.d0<V||(b.d0-=V,b.N+=1,b.n0=!0),Ct[h]=0))}}}}for(let e=Yt-1;0<=e;e--){var g=jt[e];if(Ct[g]&&8&Pt[g]){var p=Ft[g],w=U(S((r-p)/64),0,255),A=U(S((r+p)/64),0,255),y=U(S((a-p)/64),0,255),x=U(S((a+p)/64),0,255);for(let e=y;e<=x;e++)for(let i=w;i<=A;i++){var H=256*e+i,k=Qt[H],C=128*H;for(let e=0;e<k;e++){var F=$t[C+e];Ct[F]&&2&Pt[F]&&(G(r,a,Tt[F],Vt[F]),D[2]<p+Ft[F])&&(ur(F,Dt[g]*t),Ut[F]=P(Ut[F],Ut[g]))}}}}}var T,V,J},wr=()=>{var e=window.innerWidth/640;e=(e=>.1*S(e/.1))(P(e,window.innerHeight/360)),er.style.transform="scale("+(e<1?1:e)+")"},Ar=[0,0,0,0,0,0],yr=[0,0,0,0,0,0],br=["accept","cancel"],xr=!1,Sr=!1,Hr=!1,kr=!1,Nr=!1,Pr=!1,Cr=!1,Fr=!1,Tr={ArrowLeft:0,ArrowUp:1,ArrowRight:2,ArrowDown:3,KeyX:4,KeyC:5},Vr=null,Jr=!1,Rr=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],Er=e=>{Jr="t"===e.type[0]},Mr=e=>{e.preventDefault(),Jr&&!document.fullscreenElement&&document.fullscreenEnabled&&(document.fullscreenElement?document.exitFullscreen().then(wr):document.body.requestFullscreen());var t=rr.getBoundingClientRect();Er(e);for(let a=0;a<6;a++){var r=e.touches[a];r?(Rr[a][0]=S((r.clientX-t.left)/t.width*640),Rr[a][1]=S((r.clientY-t.top)/t.height*360)):(Rr[a][0]=0,Rr[a][1]=0)}},Br=e=>void 0!==e,Dr=S(112/3),Gr=[0,0,0,0,0,0],Lr=(e,t)=>0===yr[e]?t:t+2,Ur=()=>{for(let e=0;e<=5;e++)Ar[e]=0,yr[e]=0;Fr=Cr=Pr=Nr=kr=Sr=Hr=xr=!1},qr=-1,Ir=-1,zr=[],Zr=!1,jr=0,Or=!0,Yr=0,Xr=e=>{var t=Yr++;zr[e.H=t]=e,-1==qr&&(e._0(),qr=t)},Kr=e=>{Ir=e,Zr=!(Or=!(jr=300)),Ur()},Qr=0,$r=[],_r=0,Wr=!1,ea=!1,ta=!1,ra=-1,aa=0,ia=!1,oa=0,na=0,la=0,da=[0,0],va=["level up!","i grow stronger","oh lord he coming","i am darkness","i am fear","pstpstpst","time for an ash treat|shaped like a fish"],sa="",ca=[["r.o.u.s.",1e3,96,25,Je,0,.8],["ratromancer",500,64,25,Re,2,.1],["rat king",500,32,25,Ee,0,.2]],fa=[[{S:2,l0:8,s0:1,v0:Ee,c0:0,V:1.2,u0:10},{S:3,l0:12,s0:2,v0:Je,c0:0,V:.9,u0:5}],[{S:10,l0:16,s0:2,v0:Je,c0:0,V:.7,u0:10},{S:5,l0:10,s0:1,v0:Re,c0:3,V:.3,u0:5}],[{S:10,l0:16,s0:2,v0:Je,c0:0,V:.7,u0:10},{S:6,l0:8,s0:2,v0:Ee,c0:0,V:1.2,u0:15}],[{S:15,l0:20,s0:4,v0:Re,c0:5,V:.3,u0:5},{S:6,l0:8,s0:2,v0:Je,c0:0,V:1,u0:20}],[{S:10,l0:16,s0:2,v0:Je,c0:0,V:.7,u0:10},{S:5,l0:12,s0:4,v0:Re,c0:1,V:.2,u0:10}],[{S:10,l0:16,s0:2,v0:Je,c0:0,V:.7,u0:10},{S:8,l0:14,s0:2,v0:Ee,c0:0,V:1.2,u0:30}],[{S:30,l0:24,s0:10,v0:Je,c0:0,V:.5,u0:10}],[{S:10,l0:10,s0:2,v0:Re,c0:4,V:.2,u0:10},{S:10,l0:8,s0:2,v0:Ee,c0:0,V:1.2,u0:15}],[{S:10,l0:8,s0:1,v0:Ee,c0:0,V:1.2,u0:20},{S:30,l0:32,s0:10,v0:Je,c0:0,V:.5,u0:10}],[{S:12,l0:18,s0:2,v0:Re,c0:3,V:.3,u0:3},{S:30,l0:32,s0:5,v0:Je,c0:0,V:.5,u0:5},{S:10,l0:8,s0:1,v0:Ee,c0:0,V:1.2,u0:10}],[{S:12,l0:18,s0:4,v0:Re,c0:3,V:.4,u0:6},{S:30,l0:32,s0:10,v0:Je,c0:0,V:.6,u0:10},{S:10,l0:8,s0:2,v0:Ee,c0:0,V:1.2,u0:20}]],ua=148,ha=(Ae=(e,t,r,a)=>({H:-1,_0:e,p0:t,f0:r,m0:a}))(()=>{var e,t;2<da[0]&&(da[0]=O(0,2)),br[oa=la=na=0]="dash",Wr=ea=ta=!(br[1]="pause"),ra=-1,_[0]=W[0]=ee[0]=2048,_[1]=W[1]=ee[1]=2048,b={S:100,I:100,X:0,V:0,h0:0,L:()=>{},$:0,W:0,o0:0,e0:0,D:0,Y:0,O:0,i0:[],d0:0,N:1,n0:!1},bt[5].C(),ie[0]=0,ie[2]=0;for(let e=ie[1]=0;e<le;e++)for(let r=0;r<le;r++)e<3||r<3||252<e||252<r?de[e+r*le]=1:e<4||r<4||251<e||251<r?de[e+r*le]=2:e<5||r<5||250<e||250<r?de[e+r*le]=3:e<6||r<6||249<e||249<r?de[e+r*le]=4:(t=O(0,32))<8&&(de[e+r*le]=5+t);for(let e=Yt-1;0<=e;e--){var r=jt[e];nr(r)}for(let e=Yt=0;e<St;e++)Xt[e]=St-1-e;Kt=St,Nt=0,je(),e=or(),Pt[e]=1,Ft[e]=8,Vt[e]=Tt[e]=2048,Gt[e]=Rt[e]=Jt[e]=0},(e,t)=>{var r=oa;if(K[2]||0<(me-=e)||(me=L(150,15e3/170,P(1,ie[1]/15)),0===r?(15<ie[1]&&(0===ge&&0===he?ve(d):1===ge&&8===he?ve(v):2===ge&&0===he?ve(s):3===ge&&0===he&&ve(v)),he%2==0&&ve(l),0!==he&&10!==he||ve(o),4!==he&&7!==he&&9!==he&&12!==he||ve(n)):(he%2==0&&ve(l),0!==he&&6!==he&&12!==he||ve(o),4!==he&&10!==he||ve(n)),0==(he=(he+1)%16)&&(ge=(ge+1)%4)),Wr)return-1<la?(pr(0,t),ae(Tt[0],Vt[0],e,t),la+=e,ie[1]=N(0,16-S(la/250)),void(la<6e3||(la=-1,Kr(Na.H)))):void 0;if(ia)Fr&&(ia=!1,br[0]="dash",br[1]="pause");else if(ta&&!(ta=0<Bt[ra])&&(oa=1,je()),0<b.S)if(b.n0)0===$r.length&&(ce([,,440,.3,.14,.27,,3.5,15,,-150,.07,,,,,.15,.7,.24,,280]),sa=va[O(0,6)],aa=1e3,br[Qr=0]="accept",br[1]="",$r=(e=>{var t=bt.filter(t=>{var r;return(0!==t.T||!e)&&(1!==t.T||!(r=b.i0.find(e=>e.H===t.H))&&b.i0.length<4||r&&r.N<5)}),r=[];for(let e=0;e<3&&0<t.length;e++){var a=O(0,t.length-1);r.push(t[a]),t.splice(a,1)}return r})(1===b.N)),0<aa?aa-=e:(Cr&&(br[0]="dash",br[1]="pause",3===Qr?b.S=P(b.I,b.S+.2*b.I):$r[Qr].C(),$r=[],Qr=0,b.n0=!1),Hr?Qr=P(Qr+1,3):xr&&(Qr=N(Qr-1,0)));else if(Fr)ia=!0,br[0]="",br[1]="unpause";else{if(ie[2]+=t,ea){if(!ta&&Nt<=0)return Wr=!0,ka[0]="you are the night",ka[1]="victory",K[0]=N(da[0]+1,K[0]),void $()}else if(r=5===da[1],ie[0]+=t,ie[1]=U(S(r?ie[0]/15:ie[0]/30),-1,16),na<fa.length&&48*na<=ie[2]){for(var a of fa[na])for(let e=0;e<a.u0;e++){var c=S(O(1,1.5*ie[1]));vr(a.S+c+da[1],a.l0+.5*c,a.s0+.5*c+da[1],a.v0,!1,a.c0,a.V)}na++}15<ie[1]&&480<=ie[0]&&(Ze(e),ea||(ra=vr((r=ca[da[0]])[1]+50*da[1],r[2],r[3]+5*da[1],r[4],!0,r[5],r[6]),ta=ea=!0));let o=!1,n=(Cr&&1e3<=b.h0?(b.h0-=1e3,o=!0,b.L()):b.h0=P(1e3,b.h0+e),0),l=Sr?-1:kr?1:0;if(Pr&&(n=1),0===(n=Nr?-1:n)&&0==l||1e-6<(r=T(n,l))&&(Jt[0]+=n/r*(5+b.V)*100*t*(o?100:1),Rt[0]+=l/r*(5+b.V)*100*t*(o?100:1)),0<b.$||(b.o0=N(0,b.o0-e)),b.$=N(0,b.$-e),1e3<=(_r+=e)){if(_r-=1e3,ea&&ta)switch(da[0]){case 1:cr(Tt[ra],Vt[ra],8,200,!0),ve(i);break;case 2:for(let e=0;e<5;e++)lr(Tt[ra],Vt[ra],8,1+da[1],1+da[1],Ee,!0,0,1.5)}if(!ea||ta){var f=S(O(1,1.5*ie[1])),u=O(1,2+S(ie[1]/4));for(let e=0;e<u;e++)ea&&ta&&vr(1+f+da[1],4+f,1+da[1],Ee,!1,0,1.1),E()<.2?vr(5+f+da[1],8+f,1+f+da[1],Re,!1,3,.3):vr(5+f+da[1],8+f,1+f+da[1])}}pr(0,t);var h,m=e;for(h of b.i0)0<h.r0?17===h.H&&0<b.$||(h.r0-=m):0<b.$||(h.t0(h),h.r0+=100*h.O/(100+b.O));ae(Tt[0],Vt[0],e,t)}else Kr(Na.H),ka[0]="you died",ka[1]="game over",Wr=!0},(e,t)=>{Qe(152,0,336,336,Ve);var r=S((_[0]-168)/16)-1,a=H((_[0]+168)/16)+1,i=S((_[1]-168)/16)-1,o=H((_[1]+168)/16)+1,n=N(0,r),l=P(255,a),d=(r=N(0,i),P(255,o));for(let e=r;e<=d;e++)for(let t=n;t<=l;t++){var v=de[t+e*le],s=320+16*t-_[0],c=16*e-(_[1]-168);1===v?Qe(s,c,16,16,Je):1<v&&v<5?$e(36-v,s,c,1,Je):4<v&&$e(17+S((v-=5)/4),s+v%2*8,c+8*S(v/2)%2,1,4289374890),15<ie[1]?ze||Qe(s,c,16,16,Je):$e(19+ie[1],s,c,1,Je)}var f=e;if(0!==Yt){for(let e=0;e<Yt;e++){var u,h=jt[e];8&Pt[h]&&$e(6,Et[h]-(u=Ft[h]),Mt[h]-u,.125*u,Lt[h]||872415231)}for(let e=0;e<Yt;e++){var m=jt[e];if(Et[m]=Tt[m]-_[0]+320,Mt[m]=Vt[m]-_[1]+168,0!==m){var g=Ft[m];if(!(Et[m]<-(w=2*g)||488+w<Et[m]||Mt[m]<-w||336+w<Mt[m])){var p=Pt[m];if(!(8&p))if(p&Ht)$e(142,Et[m]-g,Mt[m]-g,w<9?1:.125*w,Lt[m]||Me),mt.P[0]=Tt[m],mt.P[1]=Vt[m],Be(mt.G,Me),Be(mt.U,Me),mt.G[3]=.8,mt.U[3]=0,mt.B=4,wt(2,mt,16,f);else if(2&p){let e=Lt[m];0<Gt[m]?e=2282951610:ie[1]<16||ze||(e=Je),$e(16,Et[m]-g,Mt[m]-g,.0625*w,e,Jt[m]<0,!1,!0)}else{var w,A=(w=2*g)<4?null:w<9?w-3:5;A?$e(A,Et[m]-g,Mt[m]-g,w<9?1:.125*w,Lt[m]||Ve):Qe(Et[m]-g,Mt[m]-g,w,w,Lt[m]||Ve),4&p&&(mt.P[0]=Tt[m],mt.P[1]=Vt[m],32&p?(Be(mt.G,Re),Be(mt.U,Re)):4&p&&(Be(mt.G,Ee),Be(mt.U,Ee)),mt.U[3]=0,mt.B=w,wt(3,mt,16,f))}}}}a=0<Gt[0]&&S(10*Gt[0])%2==1,0!==Jt[0]||0!==Rt[0]?($e(6,Et[0]-8,Mt[0]-8,1,a?Ee:Je),ut.G[0]=a?.8:0,ut.P[0]=Tt[0],ut.P[1]=Vt[0],ut.M[0]=250,ut.M[1]=250,wt(0,ut,16/7,f),ut.M[0]=75,ut.M[1]=75,wt(1,ut,2,f),ht.P[0]=Tt[0]-3,ht.P[1]=Vt[0]-1,At(ht),ht.P[0]=Tt[0]+3,At(ht)):$e(14,Et[0]-8,Mt[0]-8,1,a?Ee:Je,0===kt,!1,!1,!0),0<b.X&&$e(6,Et[0]-16,Mt[0]-16,2,866779136)}},()=>{if(We(Q(),76,352,Ve,1,1),!ea||ta||Wr||We("finish them all",320,33.6,Ve,2,1),!Wr){var e=H(b.S/b.I*ua),t=yt[b.N];t=U(S(b.d0/t*ua),0,ua),We("lvl  "+b.N,2,0),We("hp",2,10),Qe(2,20,ua,8,Ve),Qe(2,21,e,6,4278190250),We("xp",2,30),Qe(2,40,ua,8,Ve),Qe(2,41,t,6,Me),We("bonuses",2,60,4284900966),We("damage  "+b.D,2,70),We("armor   "+b.Y,2,80),We("move    "+b.V,2,90),We(`rate   +${b.O}%`,2,100),Qe(491,0,ua,1,Ve);for(let e=0;e<b.i0.length;e++){var r=b.i0[e],a=4+35*e;We(bt[r.H].J,491,a),0===r.a0?(Qe(491,10+a,ua,8,Ve),Qe(491,11+a,U((1-r.r0/100/r.O*(100+b.O))*ua,0,ua),6,4278190250)):We(1===r.a0?"aura":"passive",491,10+a,4284900966),We("lvl "+r.N,491,20+a,4284900966),Qe(491,31+a,ua,1,Ve)}if(0<b.$?(We("stealthed",564,286,Ve,1,1,2),Qe(491,286,b.$/b.W*ua,20,4279482899)):0<b.o0&&(We("bonus",564,286,Ve,1,1,2),Qe(491,286,b.o0/b.e0*ua,20,4279482899)),Qe(491,316,ua,20,Ve),Qe(491,316,b.h0/1e3*ua,20,b.h0<1e3?Ee:4279482899),We("dash cooldown",564,326,Ve,1,1,1),ta&&(We(ca[da[0]][0],320,322,Ve,2,1,2),Qe(270,324,100,8,Ve),Qe(270,325,Bt[ra]/ca[da[0]][1]*100,6,4278190250)),b.n0)if(Qe(152,0,337,337,3422552064),0<aa)We(sa,320,168,Ve,2,1,1);else{for(let e=0;e<$r.length;e++)Qr===e&&Qe(152,84*e,337,84,Ve),Qe(153,1+84*e,335,82,Je),We($r[e].J,320,42+84*e,Ve,2,1,2),We($r[e].R,320,51+84*e,Ve,1,1,0);3===Qr&&Qe(235,252,170,84,Ve),Qe(236,253,168,82,Je),We("skip",320,295,Ve,2,1,2),We("heal 20%",320,303,4284900966,1,1,0)}ia&&(Qe(160,111.888,320,111.888,2852126720),We("paused",320,168,Ve,2,1,1))}}),ma=0,ga=[],pa=()=>1===K[2]?"music: off":"music: on",wa=()=>1===K[3]?"screen shake: on":"screen shake: off",Aa=Ae(()=>{ma=0,ga=[pa(),wa(),"back"]},(e,a)=>{if(xr)0<ma&&(ma--,ve(t));else if(Hr)ma<2&&(ma++,ve(t));else if(Cr)switch(ve(r),ma){case 0:K[2]=(K[2]+1)%2,ga[0]=pa(),$();break;case 1:K[3]=(K[3]+1)%2,ga[1]=wa(),$();break;case 2:Kr(Ha.H)}else Fr&&(ve(r),Kr(Ha.H))},(e,t)=>{for(let e=0;e<3;e++)We((ma===e?">":"")+ga[e],160,280+24*e,Ve,2,0,2)},()=>{}),ya=0,ba=0,xa=["new game","options"],Sa=[],Ha=Ae(()=>{var e;(e=X.getItem(Y))?K=JSON.parse(atob(e)):(K=[0,0,0,1],$()),br[ya=ba=0]="accept",br[1]="cancel",Sa=["act I"],0<K[0]&&Sa.push("act II"),1<K[0]&&Sa.push("act III"),2<K[0]&&(Sa.push("random"),Sa.push("i am the night")),Sa.push("back")},(e,a)=>{if(Ze(e),xr)0<ba&&(ba--,ve(t));else if(Hr)ba<(0===ya?1:Sa.length-1)&&(ba++,ve(t));else if(Cr)if(ve(r),0===ya)switch(ba){case 0:ya=1,ba=0;break;case 1:Kr(Aa.H)}else ba===Sa.length-1?ya=ba=0:(da[0]=ba,da[1]=P(2,ba),4===ba&&(da[1]=5),K[1]++,$(),Kr(ha.H));else Fr&&1===ya&&(ve(r),ya=ba=0)},(e,t)=>{ze&&Qe(152,0,336,336,Ve),We("i am the",320,20,ze?Je:Ve,2,1,0),We("night",320,36,ze?Je:Ve,4,1,0),$e(14,384,232,6,Je,!0,!1,!0);for(let e=0;e<(ya?Sa.length:2);e++)We((ba===e?">":"")+(ya?Sa:xa)[e],160,328-24*(ya?Sa.length-1:1)+24*e,ze?Je:Ve,2,0,2)},()=>{}),ka=["",""],Na=Ae(()=>{br[0]=br[1]="continue"},(e,t)=>{(Cr||Fr)&&Kr(Ha.H)},(e,t)=>{We(ka[0],320,164,Ve,2,1,2),We(ka[1],320,180,Ve,3,1,1),We("run duration|"+Q(),320,196,Ve,1,1,0),Le&&We("action / cancel to continue",320,328,Ve,1,1,2)},()=>{});window.addEventListener("load",async()=>{(er=document.createElement("div")).style.cssText="display:flex;flex-direction:column;align-items:center;justify-content:center;max-height:100vh;max-width:100vw;",document.body.appendChild(er),(tr=document.createElement("canvas")).style.cssText="image-rendering:pixelated;",tr.width=640,tr.height=360,er.appendChild(tr),window.addEventListener("resize",wr),wr();let b=tr,x=((()=>{var e=b.getContext("webgl2"),t=(e=(c=e).createProgram(),ke("#version 300 es\nprecision lowp float;in vec2 p,t,s,u;in vec4 c;out vec2 vu;out vec4 vc;void main(){vu=u,vc=c,gl_Position=vec4((floor(p*s+t)/vec2(640,360)*2.-1.)*vec2(1,-1),0.,1.);}",35633)),r=ke("#version 300 es\nprecision lowp float;in vec2 vu;in vec4 vc;uniform lowp sampler2D g;out vec4 oc;void main(){vec4 tex=texture(g,vu);oc=vu.x==2.||tex.x==0.&&tex.y==0.&&tex.z==0.&&tex.w==1.?vc:tex;}",35632);c.attachShader(e,t),c.attachShader(e,r),c.linkProgram(e),c.useProgram(f=e);for(let e=0,t=0;e<6*we;e+=6,t+=4)Se[e+0]=t,Se[e+1]=t+1,Se[e+2]=t+2,Se[e+3]=t+0,Se[e+4]=t+3,Se[e+5]=t+1;A=Ne(34963,Se.byteLength,35044),c.bufferSubData(34963,0,Se),y=Ne(34962,ye.byteLength,35048),c.blendFunc(770,771),c.enable(3042),u=c.getAttribLocation(f,"p"),h=c.getAttribLocation(f,"t"),m=c.getAttribLocation(f,"s"),g=c.getAttribLocation(f,"u"),p=c.getAttribLocation(f,"c"),w=c.getUniformLocation(f,"g"),c.activeTexture(33984),c.viewport(0,0,640,360),c.useProgram(f),c.bindBuffer(34963,A),c.bindBuffer(34962,y),c.vertexAttribPointer(u,2,5126,!1,pe,0),c.enableVertexAttribArray(u),c.vertexAttribPointer(h,2,5126,!1,pe,8),c.enableVertexAttribArray(h),c.vertexAttribPointer(m,2,5126,!1,pe,16),c.enableVertexAttribArray(m),c.vertexAttribPointer(g,2,5126,!1,pe,24),c.enableVertexAttribArray(g),c.vertexAttribPointer(p,4,5121,!0,pe,32),c.enableVertexAttribArray(p),c.uniform1i(w,0)})(),await new Promise(async e=>{var t,r=await(await fetch("data:image/webp;base64,UklGRtICAABXRUJQVlA4TMYCAAAv/8AHEBcw//M///MfgAdKDu2GjaRHgNwzANUzcxsGSO3ZAP/R6sTjODlCRP8Ztm0bhgLazf2kqQIc2to4Y9zlHdjEnmZOx56JCW6a6Bjc2zsq05s2oo33J8tq88LTk0z3yqo7WVmN2Z7MRyRJg4/f8cTItvRXOJi7n7Y2bE/i6Y8G0tp+bAsGanwP7IHmwnH3qle0TUwC9HX3VwIoqClzaPCMBuBdG7mHrGwyuSj2EG0eA7yorEcEtBEZTRtAUo4lXrhX1eDl3tb2dlCZAExYbAFnrA0aaEvGsD0T+MTEMDEGDQZJMwEAyacSAOfbkrvaNjrW9uzp2J3DqVxqajs2Ojbmsdqt2a2pmTPhTGDQhmVmpudbGJ6eTE1m5WX38mfeR4J3ANae7mQmifPGrjzTLzvYxaO9Hb+aA3j7hJM5MeFnDoYPST7y4TnmOTaBZbbnA8OwpMHzATAn8+Z4/7GL8kw808l37VhzhQFkZtZ1pupmzsys8qQ8sxKbxKYyscwEe1ezMbG2Z5nH7hyPqo3dzbFlnjuv6OjAMms65kxgExhfNsZ9h+9yAAlq25iAPTf7942B8ynpbyBxu9/Zc90BHMPhAY9PdFoyYq5iYAImaMlaMhzjdGDwnMcHJZ2R4gMJJCauJ6ej/4438Ho9+NBOrHQ25qx0Nua0ZC3ZQAxc36RIYJ98rG2loxhdilGftbaxbTu7cVqKlsKByfZ7Y2uSFDAxMcFqYmKez6iJqqpqKeZXf5wfa/9kQ3GjbQJpns8Ye1s2an71Z371x/ixtk8/ks4NuLK+Hnv+Py5aCkPx4f1L+8XRUiBF8Pvfd1Y6itH73pK1ZAtn4SAFK5Okz/bnamNu9ncDMRCsjBXfGVOMFMRws0sgMXE9kUBipcMXrbVkH0zABC1ZS1Z3jO+SPuw37YE9rIQkpl582QTsudk/t5JJsvRvAA==")).blob(),a=(r=await createImageBitmap(r),document.createElement("canvas")),i=a.getContext("2d"),o=(a.width=256,a.height=256,i.drawImage(r,0,0),[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5].map(e=>e/16)),n=(r=i.getImageData(0,32,256,16)).data;for(let e=0;e<16;e++)for(let t=0;t<16;t++)for(let r=0;r<16;r++){var l=o[t%4*4+r%4],d=4*(256*t+16*e+r);n[d]=0,n[1+d]=0,n[2+d]=0,n[3+d]=l<e/16?255:0}i.putImageData(r,0,32),i=a,c.activeTexture(33984),r=c.createTexture(),c.bindTexture(3553,r),c.texParameteri(3553,10242,33071),c.texParameteri(3553,10243,33071),c.texParameteri(3553,10240,9728),c.texParameteri(3553,10241,9728),c.texImage2D(3553,0,6408,6408,5121,i);for(let e=33;e<=96;e++){var v=(_e[String.fromCharCode(e)]=e)<65?0:8,s=8==v?8*(e-65):8*(e-33);Fe[100+e]=Te(8,8,s/256,v/256,(8+s)/256,(8+v)/256)}for(t of Ce){var[f,u,h,m,g,p]=t;if(0===f)Fe[u[0]]=Te(g,p,h/256,m/256,(h+g)/256,(m+p)/256);else for(let e=h,t=0;e<256;e+=g)Fe[u[t++]]=Te(g,p,e/256,m/256,(e+g)/256,(m+p)/256)}e()}),c.clearColor(0,0,0,1),(()=>{for(let e=0;e<25e3;e++)Oe[e]={u:0,p:0,o:0,i:0,m:1,h:1,t:0,_:0,l:0,v:0,g:0,A:!1,k:!1}})(),!1),H=c=>{if(!x){(rr=b).addEventListener("touchmove",Mr),rr.addEventListener("touchstart",Mr),rr.addEventListener("touchend",Mr),document.addEventListener("keydown",e=>{var t=Tr[e.code];Br(t)&&(e.preventDefault(),Ar[t]=2)}),document.addEventListener("keyup",e=>{var t=Tr[e.code];Br(t)&&(e.preventDefault(),Ar[t]=0)}),window.addEventListener("gamepadconnected",()=>{Vr=navigator.getGamepads()[0]}),window.addEventListener("gamepaddisconnected",()=>{Vr=null}),Er(c),e=e||new AudioContext,t=se(void 0,void 0,void 0,.05,.05,void 0,void 0,void 0,void 0,void 0,200,.06,void 0,void 0,void 0,void 0,void 0,.5,.05),r=se(void 0,void 0,440,.05,.05,void 0,void 0,void 0,void 0,void 0,200,.06,void 0,void 0,void 0,void 0,void 0,.5,.05,1),a=se(.6,void 0,void 0,.02,void 0,.05,4,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,.2,void 0,.01),i=se(2,void 0,880,.28,void 0,0,2,4,void 0,-83,45,.06,.08,void 0,void 0,void 0,.3,.7,.08,.3),n=se(.9,void 0,655,void 0,void 0,.09,3,1.65,void 0,void 0,void 0,void 0,.02,3.8,-.1,void 0,.2),l=se(.7,void 0,2200,void 0,void 0,.04,3,2,void 0,void 0,800,.02,void 0,4.8,void 0,.01,.1),o=se(2.25,void 0,43,void 0,void 0,.25,void 0,void 0,void 0,void 0,void 0,void 0,void 0,2),d=se(.6,0,65.40639,.08,1.5,1,2,.2,void 0,void 0,void 0,void 0,void 0,.1,void 0,void 0,.19,.42,.15),v=se(.6,0,123.4708,.08,.96,1,2,.2,void 0,void 0,void 0,void 0,void 0,.1,void 0,void 0,.19,.42,.15),s=se(.6,0,110,.08,1.25,1,2,.2,void 0,void 0,void 0,void 0,void 0,.1,void 0,void 0,.19,.42,.15);for(let e=0;e<1e4;e++)et[e]=[0,0],tt[e]=[0,0],rt[e]=[0,0],at[e]=0,it[e]=0,ot[e]=0,nt[e]=Z(1,1,1,1),lt[e]=Z(1,1,1,1),dt[e]=Z(1,1,1,1),vt[e]=De(dt[e]),st[e]=0,ct[e]=0;b.removeEventListener("touchstart",H),b.removeEventListener("pointerdown",H),x=!0,Xr(Ha),Xr(Aa),Xr(ha),Xr(Na)}},k=(b.addEventListener("touchstart",H),b.addEventListener("pointerdown",H),performance.now()),N=e=>{requestAnimationFrame(N);let t,r=e-k,a=.001*r,i=void(k=e);if(x){if(250<r&&(r=16.6,a=.001*r),Ye=0,Ue(r),i=r,t=a,(Zr||0<jr)&&(0<(jr-=i)?jr<175&&(Or||(Or=!0,Ur(),gt.clear(),zr[Ir]._0()),qr=Ir):(jr=0,Zr=!1)),Or){if((Vr||Jr)&&(Ar[4]=0,Ar[5]=0,Ar[1]=0,Ar[3]=0,Ar[0]=0,Ar[2]=0),Jr)for(let e=0;e<6;e++){var[o,n]=Rr[e];q(o,n,0,128,152,Dr+20)&&(Ar[1]=2),q(o,n,0,149+2*Dr,152,Dr+20)&&(Ar[3]=2),q(o,n,0,128,Dr+20,152)&&(Ar[0]=2),q(o,n,21+2*Dr,128,Dr+20,152)&&(Ar[2]=2),I(o,n,536,216,24)&&(Ar[4]=2),I(o,n,596,196,24)&&(Ar[5]=2)}Vr&&(e=Vr.buttons,g=Vr.axes,(e[12].pressed||g[1]<-.2)&&(Ar[1]=2),(e[13].pressed||.2<g[1])&&(Ar[3]=2),(e[14].pressed||g[0]<-.2)&&(Ar[0]=2),(e[15].pressed||.2<g[0])&&(Ar[2]=2),e[0].pressed&&(Ar[4]=2),e[1].pressed)&&(Ar[5]=2);var l=i;for(let e=0;e<=5;e++)0<Gr[e]&&(Gr[e]-=l),2===Ar[e]?yr[e]=2:2!==yr[e]||0<Gr[e]?(yr[e]=0,Gr[e]=0):(yr[e]=1,Gr[e]=250);xr=1===yr[1],Hr=1===yr[3],Sr=2===yr[1],kr=2===yr[3],Nr=2===yr[0],Pr=2===yr[2],Cr=1===yr[4],Fr=1===yr[5];var d,v,s,c,f=i,u=t;if(0!==gt.size)for(d of gt.values())ct[d]<=0||ot[d]<1?gt.delete(d):(ct[d]-=f,et[d][0]+=rt[d][0]*u,et[d][1]+=rt[d][1]*u,v=U(ct[d]/st[d],0,1),ot[d]=S(L(it[d],at[d],v)),s=nt[d],c=lt[d],dt[d][0]=L(s[0],c[0],v),dt[d][1]=L(s[1],c[1],v),dt[d][2]=L(s[2],c[2],v),dt[d][3]=L(s[3],c[3],v),vt[d]=De(dt[d]))}zr[qr].p0(i,t);var h,m,g=r;if(e=a,zr[qr].f0(g,e),0!==gt.size)for(var p of gt)ot[p]<1||(tt[p][0]=et[p][0]-_[0]+320,tt[p][1]=et[p][1]-_[1]+168,h=S(tt[p][0]-(m=.5*ot[p])),m=S(tt[p][1]-m),ot[p]<4?Qe(h,m,ot[p],ot[p],vt[p]):3<ot[p]&&ot[p]<9?$e(ot[p]-3,h,m,1,vt[p]):$e(6,h,m,.0625*ot[p],vt[p]));if(Zr){let t=0;jr<175?0<jr&&(t=L(0,1,jr/150)):t=L(1,0,(jr-175)/150),e=((((255&U(g=255*t,0,255))<<8>>>0|255&U(0,0,255))<<8>>>0|255&U(0,0,255))<<8>>>0|255&U(0,0,255))>>>0,Qe(0,0,640,360,e)}Qe(0,0,152,336,Je),Qe(488,0,152,336,Je),Qe(0,336,640,24,Je),Qe(152,0,1,336,Ve),Qe(488,0,1,336,Ve),Qe(152,0,336,1,Ve),Qe(152,335,336,1,Ve),zr[qr].m0(),Jr&&($e(7,20,148,7,Ve),0!==yr[1]&&$e(8,20,148,7,Ve),0!==yr[3]&&$e(8,20,148,7,Ve,!1,!0),0!==yr[0]&&$e(9,20,148,7,Ve,!0),0!==yr[2]&&$e(9,20,148,7,Ve),$e(Lr(5,11),572,172,3,Ve),$e(Lr(4,10),512,192,3,Ve)),We(Vr||Jr?`dpad / a. ${br[0]} / b. `+br[1]:`arrow keys / x. ${br[0]} / c. `+br[1],320,352,1728053247,1,1),Ke()}else Ue(r),Ye=0,We("i am the night",320,152,Ve,3,1),We("js13k 2025 entry by david brad",320,180,Ve,1,1,0),We("warning: flashing lights",320,320,Ve,2,1,0),We("contains flashing lights and scrolling screen effects",320,340,Ve,1,1,0),Le&&We("tap to start",320,215,Ve,1,1),We("2025.09.12.FINAL",640,360,Ve,1,2,2),Ke()};requestAnimationFrame(N)})</script>