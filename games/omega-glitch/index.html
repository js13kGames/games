<!doctype html><title>Omega Glitch</title><style>body{color:#fff;overflow:hidden;background:#0a0a0a}ul{list-style-type:none}button:focus{outline:0}button:hover{opacity:.8}#background{background:#0a0a0a;position:absolute;width:100%;height:100%}.centered{text-align:center;margin:0 auto}#game_canvas,#grid,#grid_bg,#intro{background-color:rgba(0,0,0,0);text-align:center;position:absolute;margin:auto;display:inline-block;left:30%;top:30%;width:640px;height:480px}#play_tips{position:absolute;left:35%;top:30%;width:640px;height:480px;cursor:default}.play_tip{position:absolute;font-family:Helvetica Neu,sans-serif;color:rgba(230,255,255,.8);font-weight:300;width:200px;text-align:center;border:1px solid;box-shadow:0 0 50px 5px rgba(0,150,254,.4);border-radius:5px;padding:5px;background-color:rgba(0,0,0,.45);font-size:13px}#tip_lv1a{top:140px;left:20px}#custom_level,#game_complete,#level_editor,#select_level,#start_screen{position:absolute;left:0;top:0;background-color:#000;width:100%;height:100%}#level_editor{background-color:rgba(0,0,0,0)}.hidden{display:none}.level_btn{position:absolute;width:75px;height:30px;border:3px solid rgba(0,150,254,.5);border-radius:15px;border-color:#0096fe;text-align:center;cursor:pointer;background:0 0;color:#fff;font-size:16px}.level_btn:disabled{border:3px solid gray;border-color:gray;color:gray;opacity:.3}.left_0{left:5%}.left_1{left:25%}.left_2{left:45%}.left_3{left:65%}.left_4{left:85%}.top_0{top:20%}.top_1{top:40%}#quit_level,#restart_level{position:absolute;top:80%;left:43%}#quit_level{left:55%}.grid_square{position:absolute;border:rgba(13,45,51,.5) 1px dotted}.grid_button{position:absolute}.grid_button.selected{border:#3bbdd6 1px solid}.title{border:3px solid rgba(0,150,254,.5);border-radius:15px;border-color:#0096fe;box-shadow:0 0 50px 5px rgba(0,150,254,.4);height:40px;width:150px;text-align:center;cursor:pointer;background:0 0}.title span{line-height:30px;color:rgba(230,255,255,.8);font-family:Helvetice Neue,sans-serif;font-size:14px;font-weight:400}h1{font-family:Helvetica Neue,sans-serif;font-size:80px;text-align:center;font-weight:300;letter-spacing:3px;margin:0}.blue{color:transparent;text-shadow:0 0 1px #fbfbfb,0 0 4px #b6e5ef,0 0 8px #268398,0 0 8px #268398,0 0 10px #268398;-webkit-filter:url("#glitch");filter:url("#glitch");margin-bottom:100px}#custom_level_back,#level_editor_back,#select_level_back{position:absolute;top:20px;left:20px}.controls{position:absolute;top:26%;left:20px}.export{position:absolute;top:15px;left:67%;width:300px}.direction_button{width:40px;height:25px;border:3px solid rgba(0,150,254,.5);border-radius:15px;border-color:#0096fe;text-align:center;cursor:pointer;background:0 0;color:#fff;font-size:12px;margin:5px 8px 0 0}.direction_button:disabled{border:3px solid gray;border-color:gray;color:gray;opacity:.3;cursor:not-allowed}#level_editor_context_config{position:absolute;top:220px;left:10px;font-family:Helvetica Neue,sans-serif;color:#e6ffff}#level_editor_patrol_config{position:absolute;top:205px;left:10px}.editor_button{width:130px;height:25px;border:3px solid rgba(0,150,254,.5);border-radius:15px;border-color:#0096fe;text-align:center;cursor:pointer;background:0 0;color:#fff;font-size:12px;margin:10px 2px 2px 2px}.editor_button:disabled{border:3px solid gray;border-color:gray;color:gray;opacity:.3;cursor:not-allowed}.charges{position:absolute;top:16%;left:32.5%;font-family:Arial,Helvetica,sans-serif;color:#e6ffff;height:111px}#charges{font-family:serif;font-size:100px;color:#df740c;text-shadow:0 0 1px #fbfbfb,0 0 4px #b6e5ef,0 0 8px #268398,0 0 8px #268398,0 0 10px #268398}.startingCharges{font-family:Helvetica Neue,sans-serif}</style><div id=background><canvas id=game_background class=hidden></canvas><div class=charges><span style=bottom:0>Charges:</span> <span id=charges></span></div><canvas id=game_canvas width=640 height=480></canvas><div id=play_tips></div><div id=play_game class=hidden><button id=restart_level class=title><span>Restart Level</span></button> <button id=quit_level class=title><span>Quit Level</span></button></div><div id=select_level class=hidden><h1 class=blue>Select Level</h1><button id=select_level_back class=level_btn>Back</button></div><div id=game_complete class=hidden><h1>You Beat The Game!!</h1><button id=back_to_start>I'm Awesome!</button></div><div id=start_screen><div id=intro><h1 class=blue>Omega Glitch <svg xmlns=http://www.w3.org/2000/svg version=1.1><defs><filter id=glitch x=0 y=0><feColorMatrix in=SourceGraphic mode=matrix values="1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0" result=r /><feOffset in=r result=r dx=-5><animate attributeName=dx attributeType=XML values="0; -5; 0; -18; -2; -4; 0 ;-3; 0" dur=0.2s repeatCount=indefinite /></feOffset><feColorMatrix in=SourceGraphic mode=matrix values="0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 1 0" result=g /><feOffset in=g result=g dx=-5 dy=1><animate attributeName=dx attributeType=XML values="0; 0; 0; -3; 0; 8; 0 ;-1; 0" dur=0.15s repeatCount=indefinite /></feOffset><feColorMatrix in=SourceGraphic mode=matrix values="0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 1 0" result=b /><feOffset in=b result=b dx=5 dy=2><animate attributeName=dx attributeType=XML values="0; 3; -1; 4; 0; 2; 0 ;18; 0" dur=0.35s repeatCount=indefinite /></feOffset><feBlend in=r in2=g mode=screen result=blend /><feBlend in=blend in2=b mode=screen result=blend /></filter></defs></svg></h1><div class=centered><button id=campaign class=title><span>Play Campaign</span></button> <button id=custom class=title><span>Play Custom Level</span></button> <button id=build class=title><span>Build Custom Level</span></button></div></div></div><div id=custom_level class=hidden><h1 class=blue>Custom Level</h1><button id=custom_level_back class=level_btn>Back</button><p>Place level code snippet here:</p><textarea id=custom_level_textarea> </textarea> <button id=play_custom>Play</button></div><div id=level_editor class=hidden><h1 class=blue>Level Editor</h1><div id=grid_bg></div><div id=grid></div><button id=level_editor_back class=level_btn>Back</button><div class=controls><span class=startingCharges>Starting charges:</span><input style=margin-left:20px id=charge_setter><br><button class=editor_button id=add_spot>Spot</button> <button class=editor_button id=add_objective>Processor</button> <button class=editor_button id=add_charge>Add Charge</button><br><button class=editor_button id=add_gate_generator>Firewall Generator</button> <button class=editor_button id=add_gate>Firewall</button> <button class=editor_button id=add_patrol_generator>Security Hub</button><br><button class=editor_button id=add_patrol>Security Packet</button><br><button class=direction_button id=path_n>N</button> <button class=direction_button id=path_ne>NE</button> <button class=direction_button id=path_e>E</button> <button class=direction_button id=path_se>SE</button> <button class=direction_button id=path_s>S</button> <button class=direction_button id=path_sw>SW</button> <button class=direction_button id=path_w>W</button> <button class=direction_button id=path_nw>NW</button><br><button class=direction_button id=gpath_n>N</button> <button class=direction_button id=gpath_ne>NE</button> <button class=direction_button id=gpath_e>E</button> <button class=direction_button id=gpath_se>SE</button> <button class=direction_button id=gpath_s>S</button> <button class=direction_button id=gpath_sw>SW</button> <button class=direction_button id=gpath_w>W</button> <button class=direction_button id=gpath_nw>NW</button><div id=level_editor_context_config><p><ul></ul></div><div id=level_editor_patrol_config></div></div><div class=export><button class=title id=export><span>Export</span></button><div id=export_text></div><button class=title id=test_level><span>Test Level</span></button></div></div><script>!function(){var AvatarManager=function(){function e(){var e=utils.normalize(i.pos_x,i.pos_y,a[n].x,a[n].y);i.vol_x=e[0]*i.speed,i.vol_y=e[1]*i.speed}function t(e){o=e,l=!1,i.pos_x=e.pos_x,i.pos_y=e.pos_y,e.charge&&(i.charges++,e.charge=!1),i.collision=8,_=!1,s.avatar_on_spot(e)}var s,a,n,o,r={a:"west",s:"south",d:"east",w:"north"},i={pos_x:0,pos_y:0,vol_x:0,vol_y:0,speed:500,charges:0,collision:10,radius:10,graphic:{lineWidth:0,fillStyle:"rgba(12,20,31,0.7)",strokeStyle:"#29c8df",shadowColor:"#39b5a6",shadowBlur:5,shadowOffsetX:0,shadowOffsetY:0},charge_active:!1,charge_explosion:{current_radious:0,speed:250,max_radious:80}},l=!1,_=!1;this.update=function(s){(function(s){function o(){i.pos_x=a[n].x,i.pos_y=a[n].y,++n>=a.length?t(next_spot):e()}if(l)i.pos_x+=i.vol_x*s,i.pos_y+=i.vol_y*s,i.vol_x>0&&i.pos_x>a[n].x||i.vol_x<0&&i.pos_x<a[n].x?o():(a[n]&&i.vol_y>0&&i.pos_y>a[n].y||i.vol_y<0&&i.pos_y<a[n].y)&&o()})(s),function(e){i.charge_active&&(i.charge_explosion.current_radious+=i.charge_explosion.speed*e,i.charge_explosion.current_radious>i.charge_explosion.max_radious&&(i.charge_explosion.current_radious=0,i.charge_active=!1))}(s)},this.get_avatar=function(){return i},this.start_level=function(){t(s.starting_spot)},this.inject_input=function(e){e.add_subscriber(this)},this.key_pressed=function(t){if(!l&&level_ready){if(" "===t)return void(i.charges&&(i.charges--,i.charge_active=!0,s.detonate_charge(o)));var h=s.move_leads_to(o,r[t]);h&&((a=h.path.checkpoints.slice(0))[0].x===i.pos_x&&a[0].y===i.pos_y||a.reverse(),n=1,next_spot=h.spot,e(),l=!0,_=!1,i.collision=4,s.avatar_leaving_spot())}},this.button_pressed=function(){},this.inject_level_manager=function(e){s=e},this.set_avatar_charges=function(e){i.charges=e},this.get_gate_hit=function(){return _},this.hit_gate=function(){_=!0,a.reverse(),n=a.length-1-n,e(),next_spot=o}},CONFIG={canvas_id:"game_canvas",fps:60,grid_width:40,grid_height:30,grid_size:15,direction_to_grid_difference:{1:{x:0,y:-1},2:{x:1,y:-1},3:{x:1,y:0},4:{x:1,y:1},5:{x:0,y:1},6:{x:-1,y:1},7:{x:-1,y:0},8:{x:-1,y:-1}},level_button_width:5},DomManager=function(){for(var e,t={start_screen:document.getElementById("start_screen"),select_level:document.getElementById("select_level"),play_game:document.getElementById("play_game"),game_complete:document.getElementById("game_complete"),custom_level:document.getElementById("custom_level"),level_editor:document.getElementById("level_editor"),export_text:document.getElementById("export_text"),game_background:document.getElementById("game_background")},s=document.getElementById("play_tips"),a=document.getElementById("custom_level_textarea"),n=document.getElementById("grid_bg"),o=document.getElementById("grid"),r=["n","ne","e","se","s","sw","w","nw"],i=["spot","objective","charge","gate_generator","gate","patrol_generator","patrol"],l=document.getElementById("level_editor_patrol_config"),_=0,h=0,c=1;c<=Object.keys(CONTENT.levels).length;c++){var g=document.createElement("button");g.textContent="lv "+c,g.id="level_"+c,g.classList.add("level_btn"),g.classList.add("left_"+_),g.classList.add("top_"+h),g.disabled=!0,++_==CONFIG.level_button_width&&(_=0,h++),t.select_level.appendChild(g),input.add_button("level_"+c)}(function(){for(var e=0;e<=CONFIG.grid_width;e++)for(var t=0;t<=CONFIG.grid_height;t++){var s=document.createElement("div");if(s.classList.add("grid_square"),s.style.top=t*CONFIG.grid_size+"px",s.style.left=e*CONFIG.grid_size+"px",s.style.width=CONFIG.grid_size+"px",s.style.height=CONFIG.grid_size+"px",n.appendChild(s),e<CONFIG.grid_width&&t<CONFIG.grid_height){var a=document.createElement("div"),r="grid_"+(e+1)+"_"+(t+1);a.id=r,a.classList.add("grid_button"),a.style.top=t*CONFIG.grid_size+CONFIG.grid_size/2+"px",a.style.left=e*CONFIG.grid_size+CONFIG.grid_size/2+"px",a.style.width=CONFIG.grid_size+"px",a.style.height=CONFIG.grid_size+"px",o.appendChild(a),input.add_button(r)}}})(),this.close_screen=function(e){t[e].classList.add("hidden")},this.open_screen=function(e){t[e].classList.remove("hidden")},this.unlock_levels=function(e){for(var t=1;t<=e;t++){document.getElementById("level_"+t).disabled=!1}},this.place_game_tips=function(e){s.innerHTML="";for(var t=0;t<e.length;t++){var a=document.createElement("div");a.classList.add("play_tip"),a.style.left=e[t].pos_x+"px",a.style.top=e[t].pos_y+"px",a.textContent=e[t].tip_text,s.appendChild(a)}},this.get_custom_level_input=function(){return a.value},this.select_grid_square=function(t,s){e&&e.classList.remove("selected"),(e=document.getElementById("grid_"+t+"_"+s)).classList.add("selected")},this.get_charge_count=function(){return document.getElementById("charge_setter").value},this.enable_paths=function(e){for(var t=0;t<r.length;t++)document.getElementById("path_"+r[t]).disabled=-1==e.indexOf(r[t])},this.enable_gpaths=function(e){for(var t=0;t<r.length;t++)document.getElementById("gpath_"+r[t]).disabled=-1==e.indexOf(r[t])},this.enable_buttons=function(e){for(var t=0;t<i.length;t++)document.getElementById("add_"+i[t]).disabled=-1==e.indexOf(i[t])},this.build_objective_config=function(e,t){var s=document.getElementById("level_editor_context_config");s.classList.remove("hidden"),s.getElementsByTagName("p")[0].innerHTML="Processor",list=s.getElementsByTagName("ul")[0],list.innerHTML="";for(var a=0;a<t.length;a++){var n=document.createElement("input");n.type="checkbox",n.checked=-1!=e[1].indexOf(a),n.value=a,n.addEventListener("change",(function(){level_editor.path_checkbox_changed(this)}));var o=document.createElement("li");o.appendChild(n),o.appendChild(document.createTextNode("path_"+a)),list.appendChild(o)}},this.build_patrol_config=function(e,t){l.innerHTML="",l.classList.remove("hidden");for(var s,a=t[e[e.length-1]],n=["n","e","s","w"],o=0;o<n.length;o++)if(s=a[n[o]]){var r;if(1==e.length)(r=document.createElement("button")).classList.add("editor_button"),r.id="move_to_"+s[0],r.innerHTML="Move to "+n[o],r.addEventListener("click",(function(){level_editor.move_patrol_to(this)})),l.appendChild(r);(r=document.createElement("button")).classList.add("editor_button"),r.id="route_to_"+s[0],r.innerHTML="Route to "+n[o],r.addEventListener("click",(function(){level_editor.add_route_to(this)})),l.appendChild(r)}if(e.length>1)for(o=0;o<n.length;o++)if(t[e[e.length-1]][n[o]]&&t[e[e.length-1]][n[o]][0]==e[0]){var i=document.createElement("button");i.classList.add("editor_button"),i.innerHTML="Complete Route",i.addEventListener("click",(function(){document.getElementById("level_editor_patrol_config").classList.add("hidden"),level_editor.route_complete()})),l.appendChild(i)}},this.export_level=function(e){export_text.innerHTML=utils.stringify_level(e)},this.hide_context=function(){document.getElementById("level_editor_context_config").classList.add("hidden")},this.display_charges=function(e){for(var t=(document.getElementById("charges")," "),s=0;s<e;s++)t+=".";charges.innerHTML=t}},game;window.onload=function(e){game=new Game};var Game=function(){function e(e){level_ready&&t.update(e)}var t=new GameMaster;level_editor=new LevelEditor,graphics=new Graphics,input=new Input,dom_manager=new DomManager,input.set_up_button_events(),t.inject_graphics(graphics),t.inject_input(input),t.inject_dom_manager(dom_manager),t.inject_level_editor(level_editor),level_editor.inject_game_master(t),level_editor.inject_input(input),level_editor.inject_dom_manager(dom_manager);var s=function(){var t=1e3/CONFIG.fps;return next_tick=last_tick=(new Date).getTime(),num_frames=0,function(){for(current_tick=(new Date).getTime();current_tick>next_tick;)delta=(current_tick-last_tick)/1e3,e(delta),next_tick+=t,last_tick=(new Date).getTime();graphics.draw(),num_frames++}}();window.requestAnimationFrame?window.each_frame=function(e){var t=function(){e(),requestAnimationFrame(t)};t()}:window.mozRequestAnimationFrame?window.each_frame=function(e){var t=function(){e(),mozRequestAnimationFrame(t)};t()}:window.each_frame=function(e){setInterval(e,1e3/CONFIG.fps)},window.each_frame(s)},level_ready=!1,game_paused=!1,level_editor_mode=!0,GameMaster=function(){function update(e){game_paused||(avatar_manager.update(e),level_manager.update(e),dom_manager.display_charges(avatar_manager.get_avatar().charges))}function inject_graphics(e){(graphics=e).inject_avatar(avatar_manager.get_avatar()),level_manager.inject_graphics(e)}function inject_input(e){input=e,avatar_manager.inject_input(e),input.add_subscriber(this)}function inject_dom_manager(e){dom_manager=e}function inject_level_editor(e){level_editor=e}function start_game(){current_level=6,start_level()}function start_level(){level_manager.clear_level(),graphics.clear_level(),level_manager.setup_level(current_level),dom_manager.place_game_tips(level_manager.get_play_tips()),avatar_manager.start_level(),level_ready=!0}function level_complete(){setTimeout((function(){level_ready=!1,++current_level>highest_level&&(highest_level=current_level,dom_manager.unlock_levels(highest_level),document.cookie="omega_glitch_level="+highest_level),start_level()}),1e3)}function game_complete(){dom_manager.open_screen("game_complete")}function reset_level(){level_ready=!1,start_level()}function button_pressed(button){"campaign"==button?(dom_manager.close_screen("start_screen"),dom_manager.open_screen("select_level"),dom_manager.unlock_levels(highest_level)):"level_editor_back"==button?(dom_manager.close_screen("level_editor"),level_editor_mode=!1,dom_manager.open_screen("start_screen")):"select_level_back"==button?(dom_manager.close_screen("select_level"),dom_manager.open_screen("start_screen")):"custom_level_back"==button?(dom_manager.close_screen("custom_level"),dom_manager.open_screen("start_screen")):"level_"==button.substring(0,6)?(current_level=parseInt(button.substring(6)),start_level(),dom_manager.close_screen("select_level"),dom_manager.open_screen("game_background"),dom_manager.open_screen("play_game")):"restart_level"==button?(level_ready=!1,start_level()):"quit_level"==button?(testing_level?(dom_manager.open_screen("level_editor"),level_editor_mode=!0):dom_manager.open_screen("select_level"),dom_manager.close_screen("game_background"),dom_manager.close_screen("play_game")):"back_to_start"==button?(dom_manager.close_screen("game_complete"),dom_manager.open_screen("start_screen")):"custom"==button?(dom_manager.close_screen("start_screen"),dom_manager.open_screen("custom_level")):"play_custom"==button?(set_up_custom_level(eval(dom_manager.get_custom_level_input())),dom_manager.close_screen("custom_level")):"build"==button&&(dom_manager.close_screen("start_screen"),dom_manager.open_screen("level_editor"),level_editor_mode=!0)}function read_in_cookie(){var e=document.cookie;e=e.split(";");for(var t=0;t<e.length;t++)if("omega_glitch_level="==e[t].trim().substring(0,19))return parseInt(e[t].substring(20))}function set_up_custom_level(e,t){CONTENT.levels[0]=e,current_level=0,testing_level=!!t,start_level()}var graphics,input,dom_manager,level_editor,current_level,testing_level,highest_level=read_in_cookie()||1,avatar_manager=new AvatarManager;level_manager=new LevelManager,avatar_manager.inject_level_manager(level_manager),level_manager.inject_avatar_manager(avatar_manager),level_manager.inject_game_master(this),this.update=update,this.inject_graphics=inject_graphics,this.inject_input=inject_input,this.inject_dom_manager=inject_dom_manager,this.inject_level_editor=inject_level_editor,this.key_pressed=function(){},this.button_pressed=button_pressed,this.start_game=start_game,this.level_complete=level_complete,this.reset_level=reset_level,this.game_complete=game_complete,this.set_up_custom_level=set_up_custom_level},GAME_TEXT={lv1a:'This is you: a malicious little Glitch. Use "A", "S", "W", "D" to move.',lv1b:'This is your objective: A system Processor. Use "Space Bar" to detonate your malware charge to disable it.',lv2a:"Some paths are one way. Restart the level if you get stuck.",lv2b:"Sometimes you may happen across a malware package from a fallen comrade. Carry on his work!",lv3a:"Security Routines will stop you in your path. Be careful.",lv4a:"Firewalls will prevent you from proceeding, though otherwise harmless.",lv4b:"Firewalls are powered from these Generators. Detonate your malware on them to disable the generator along with their Firewalls.",lv5a:"Security Routines are also powered by their own Generators. You know what to do...",lv6a:"Some systems take a bit more payload to take down.",lv6b:"You are on your own from here on."},Gate=function(e){this.pos_x=e.x*CONFIG.grid_size,this.pos_y=e.y*CONFIG.grid_size,this.size=8,this.collision=6,active=!0,this.blow_up=function(){active=!1},this.is_active=function(){return active},this.graphic={lineWidth:1,fillStyle:"rgba(204, 51, 51, 0.6)",shadowColor:"#6FC3DF",shadowBlur:5,shadowOffsetX:0,shadowOffsetY:0}},GateGenerator=function(e,t){var s;this.spot=t[e.s],this.gates=e.g;var a=e.gp.slice(0);this.pos_x=this.spot.pos_x,this.pos_y=this.spot.pos_y,this.size=10;for(var n=0;n<a.length;n++)a[n]=new GateGeneratorPath(a[n]);this.blow_up=function(){for(var e=0;e<a.length;e++)a[e].blow_up()},this.inject_graphics=function(e){(s=e).add_to_manifest(this,"gate_generators");for(var t=0;t<a.length;t++)a[t].inject_graphics(s),a[t].set_starting_spot(this.spot)},this.graphic={lineWidth:1,fillStyle:"rgba(204, 104, 51, 0.6)",shadowColor:"#6FC3DF",shadowBlur:5,shadowOffsetX:0,shadowOffsetY:0}},GateGeneratorPath=function(e){var t,s,a=e;this.checkpoints=[],this.graphic={setLineDash:[5,3],lineWidth:2,strokeStyle:"#ff5c33",shadowColor:"#6FC3DF",shadowBlur:5,shadowOffsetX:0,shadowOffsetY:0},this.set_starting_spot=function(e){t=e,this.checkpoints=function(){(s=[]).push({x:t.pos_x,y:t.pos_y});for(var e,n,o=0;o<a.length;o+=2)e=a[o],n=a[o+1],s.push({x:CONFIG.direction_to_grid_difference[e].x*CONFIG.grid_size*n+s[s.length-1].x,y:CONFIG.direction_to_grid_difference[e].y*CONFIG.grid_size*n+s[s.length-1].y});return s}(),graphics.add_to_manifest(this,"gate_generator_paths")},this.inject_graphics=function(e){graphics=e},this.checkpoints=s,this.blow_up=function(){graphics.remove_from_manifest(this,"gate_generator_paths"),this.blown_up=!0}},Graphics=function(){function e(e){for(var t=o[e],s=0;s<t.length;s++){i.save();var a=t[s].graphic;for(var n in a)"setLineDash"!=n?i[n]=a[n]:i.setLineDash(a[n]);c[e](t[s]),i.restore()}}function t(e){i.beginPath(),i.arc(e.pos_x,e.pos_y,e.collision,0,2*Math.PI,!0),i.fill(),i.stroke(),e.charge&&function(e){i.fillStyle="rgba(212, 17, 27, 0.6)",i.shadowColor="#d0161e",i.shadowBlur=10,i.shadowOffsetX=0,i.shadowOffsetY=0,i.beginPath(),i.arc(e.pos_x,e.pos_y,4,0,2*Math.PI,!0),i.fill()}(e)}function s(e){var t=e.pos_x,s=e.pos_y,a=e.size;i.beginPath(),i.moveTo(t-a,s-a),i.lineTo(t+a,s-a),i.lineTo(t+a,s+a),i.lineTo(t-a,s+a),i.lineTo(t-a,s-a),i.fill(),i.stroke()}function a(e){i.beginPath();var t=e.checkpoints;i.moveTo(t[0].x,t[0].y);for(var s=1;s<t.length;s++)i.lineTo(t[s].x,t[s].y);i.stroke()}var n,o={spots:[],paths:[],objectives:[],patrols:[],patrol_generators:[],gates:[],gate_generators:[],gate_generator_paths:[],avatar:[]},r=document.getElementById(CONFIG.canvas_id),i=r.getContext("2d"),l=r.width,_=r.height,h=["paths","spots","objectives","patrols","patrol_generators","gates","gate_generators","gate_generator_paths","avatar"],c={paths:a,spots:t,objectives:s,patrols:t,patrol_generators:s,gates:s,gate_generators:s,gate_generator_paths:a,avatar:t};this.draw=function(){i.clearRect(0,0,l,_);for(var t=0;t<h.length;t++)e(h[t]);n.charge_active&&(i.save(),i.lineWidth=10,i.fillStyle="rgba(212, 17, 27, 0.6)",i.shadowColor="#d0161e",i.shadowBlur=10,i.shadowOffsetX=0,i.shadowOffsetY=0,i.beginPath(),i.arc(n.pos_x,n.pos_y,n.charge_explosion.current_radious,0,2*Math.PI,!0),i.stroke(),i.restore())},this.clear_level=function(){for(var e in o)o[e]=[];o.avatar=[n]},this.inject_avatar=function(e){n=e},this.add_to_manifest=function(e,t){var s=o[t];-1==s.indexOf(e)&&s.push(e)},this.remove_from_manifest=function(e,t){var s=o[t];-1!=s.indexOf(e)&&s.splice(s.indexOf(e),1)}};!function(){function e(e,t,s,a){c.beginPath(),c.moveTo(e,t),c.lineTo(s,a),c.closePath(),c.stroke()}function t(){this.points=[{y:Math.floor(Math.random()*g+1)*i,x:Math.floor(Math.random()*p+1)*i}],this.draw=a,this.move=s,this.dir=Math.floor(8*Math.random()+1)}function s(){var e=Math.floor(3*Math.random()-1),t=this.dir+e;t<0&&(t=7),7<t&&(t=0);var s=this.points[this.points.length-1];s.x<10&&(t=2),s.y<10&&(t=4),o.width-10<s.x&&(t=6),o.height-10<s.y&&(t=0),this.dir=t;var a={x:s.x+v[t].x*i,y:s.y+v[t].y*i};this.points.push(a),10<this.points.length&&this.points.shift()}function a(){var e=this.points;for(m=1;m<e.length;m++)r.beginPath(),r.moveTo(e[m-1].x,e[m-1].y),r.lineTo(e[m].x,e[m].y),r.closePath(),r.lineWidth=1,r.strokeStyle=l,r.stroke(),r.lineWidth=10,r.strokeStyle=_,r.stroke()}function n(){for(var e=0;e<this.snakeys.length;e++)this.snakeys[e].move(),this.snakeys[e].draw()}var o=document.getElementById("game_background");o.width=window.innerWidth,o.height=window.innerHeight;var r=o.getContext("2d");r.translate(.5,.5);var i=12,l="rgba(0,255,255,0.1)",_="rgba(0,100,100,0.1)",h=document.createElement("canvas");h.width=window.innerWidth,h.height=window.innerHeight;var c=h.getContext("2d");c.translate(.5,.5),c.fillStyle="rgba(240,240,240)",c.fillRect(0,0,h.width,h.height);var g=Math.ceil(h.height/i),p=Math.ceil(h.width/i);c.strokeStyle="rgba(0,20,40,0.9)";for(var d=1;d<=p;d++)e(d*i,0,d*i,h.height);for(var u=0;u<=g;u++)e(0,u*i,h.width,u*i);for(u=0;u<=g+p;u++)e(0,u*i-h.width,h.width,u*i),e(0,u*i,h.width,u*i-h.width);var v=[{name:"up",x:0,y:-1},{name:"upright",x:1,y:-1},{name:"right",x:1,y:0},{name:"downright",x:1,y:1},{name:"down",x:0,y:1},{name:"downleft",x:-1,y:1},{name:"left",x:-1,y:0},{name:"upleft",x:-1,y:-1}],f=new function(e){this.snakeys=[];for(var s=0;s<e;s++)this.snakeys.push(new t);this.go=n}(10);r.drawImage(h,0,0),setInterval((function(){r.globalAlpha=.2,r.drawImage(h,0,0),r.globalAlpha=1,f.go()}),1e3/30)}();var Input=function(){var e=[],t=["campaign","select_level_back","level_editor_back","custom_level_back","custom","build","restart_level","quit_level","back_to_start","play_custom","add_spot","add_objective","add_charge","add_gate_generator","add_gate","add_patrol_generator","add_patrol","export","test_level","path_n","path_ne","path_e","path_se","path_s","path_sw","path_w","path_nw","gpath_n","gpath_ne","gpath_e","gpath_se","gpath_s","gpath_sw","gpath_w","gpath_nw"];window.addEventListener("keydown",(function(t){for(var s=0;s<e.length;s++)e[s].key_pressed(t.key)})),this.add_subscriber=function(t){-1===e.indexOf(t)&&e.push(t)},this.remove_subscriber=function(t){-1!==e.indexOf(t)&&t.splice(e.indexOf(t),1)},this.set_up_button_events=function(){for(var s=0;s<t.length;s++){var a=document.getElementById(t[s]);!function(s){a.addEventListener("mouseup",(function(){for(var a=0;a<e.length;a++)e[a].button_pressed(t[s])}))}(s)}},this.add_button=function(e){t.push(e)}},LevelEditor=function(){function e(){o=function(){for(var e in n.hide_context(),response={},c.spots)if(c.spots[e].x==g&&c.spots[e].y==p){response.spot=c.spots[e],response.spot_name=e,v&&(t(response.spot),d=[]);for(var s=0;s<c.objectives.length;s++)c.objectives[s][0]==e&&(response.objective=c.objectives[s],n.build_objective_config(response.objective,c.paths));for(var a=0;a<c.gate_generators.length;a++)c.gate_generators[a].s==e&&(response.gate_generator=c.gate_generators[a],r=c.gate_generators[a]);for(var o=0;o<c.patrol_generators.length;o++)c.patrol_generators[o].s==e&&(response.patrol_generator=c.patrol_generators[o],i=c.patrol_generators[o])}for(var l=0;l<c.gates.length;l++)c.gates[l].x==g&&c.gates[l].y==p&&(response.gate=c.gates[l]);return response}(),function(){if(!o.spot||f||m)if(v){var e=["n","ne","e","se","s","sw","w","nw"];t=((t=d[d.length-2]-1)+4)%8,e.splice(t,1),n.enable_paths(e),o.gate?n.enable_buttons([]):n.enable_buttons(["spot"]),n.enable_gpaths([])}else if(f){var t;e=["n","ne","e","se","s","sw","w","nw"];t=((t=u[u.length-2]-1)+4)%8,e.splice(t,1),n.enable_gpaths(e),n.enable_paths([]),o.spot?n.enable_buttons([]):n.enable_buttons(["gate"])}else o.spot?(n.enable_paths([]),n.enable_gpaths([]),n.enable_buttons([])):(n.enable_paths([]),n.enable_gpaths([]),n.enable_buttons(["spot"]));else{for(var s=(e=["n","e","s","w"]).length-1;s>=0;s--)void 0!==o.spot[e[s]]&&e.splice(s,1);n.enable_paths(e),o.objective||o.spot.charge||o.gate_generator||o.patrol_generator?(n.enable_buttons([]),o.gate_generator?n.enable_gpaths(["n","ne","e","se","s","sw","w","nw"]):o.patrol_generator&&n.enable_buttons("patrol")):n.enable_buttons(["objective","charge","gate_generator","patrol_generator"])}for(a=0;a<c.paths.length;a++)"threat"==c.paths[a].slice(0).pop()&&c.paths[a].pop();if(o.objective)for(var a=0;a<o.objective[1].length;a++)"threat"!=c.paths[o.objective[1][a]].slice(0).pop()&&c.paths[o.objective[1][a]].push("threat")}(),Object.keys(c.spots).length&&(c.charges=parseInt(n.get_charge_count())||0,a.set_up_custom_level(c))}function t(e){var t=[1,3,5,7],a=t.indexOf(d[d.length-2]),n=c.spots[d[0]],o=h[d[1]-1];for(s in c.spots)if(c.spots[s]==e){n[o]=[s,c.paths.length-1];break}a>-1&&(e[h[t[a=(a+2)%4]-1]]=[d[0],c.paths.length-1]),d=[],v=!1}var a,n,o,r,i,l,_={n:1,ne:2,e:3,se:4,s:5,sw:6,w:7,nw:8},h=["n","ne","e","se","s","sw","w","nw"],c={charges:0,spots:{},paths:[],patrols:[],patrol_generators:[],start:!1,objectives:[],gates:[],gate_generators:[],end_of_game:!0},g=0,p=0,d=[],u=[],v=!1,f=!1,m=!1,y=0;this.inject_game_master=function(e){a=e},this.inject_input=function(e){e.add_subscriber(this)},this.inject_dom_manager=function(e){(n=e).enable_paths([]),n.enable_gpaths([]),n.enable_buttons(["spot"])},this.key_pressed=function(){},this.button_pressed=function(s){if("grid_"==s.substring(0,5)){if(v||f||m)return;g=parseInt(s.split("_")[1]),p=parseInt(s.split("_")[2]),n.select_grid_square(g,p)}else if("add_spot"==s)!function(){y++;var e={x:g,y:p};c.spots["s"+y]=e,c.start||(c.start="s"+y),d.length&&t(e),v=!1}();else if("add_objective"==s)!function(){var e=[o.spot_name,[]];c.objectives.push(e)}();else if("add_charge"==s)o.spot.charge=!0;else if("add_gate_generator"==s)!function(){var e={s:o.spot_name,g:[],gp:[]};c.gate_generators.push(e)}();else if("add_gate"==s)!function(){var e={x:g,y:p};c.gates.push(e),r.g.push(c.gates.length-1),u=[],f=!1}();else if("add_patrol_generator"==s)!function(){var e={s:o.spot_name,p:[]};c.patrol_generators.push(e)}();else if("add_patrol"==s)!function(){var e=[i.s];l=e,c.patrols.push(e),i.p.push(c.patrols.length-1),m=!0,n.build_patrol_config(e,c.spots)}();else if("path_"==s.substring(0,5))!function(e){d.length?d[d.length-2]==e?d[d.length-1]++:d.push(e,1):(d.push(o.spot_name,e,1),c.paths.push(d),o.spot[h[e-1]]=c.paths.length-1),g+=CONFIG.direction_to_grid_difference[e].x,p+=CONFIG.direction_to_grid_difference[e].y,n.select_grid_square(g,p),v=!0}(_[s.split("_")[1]]);else if("gpath_"==s.substring(0,6))!function(e){u.length||r.gp.push(u),u[u.length-2]==e?u[u.length-1]++:u.push(e,1),g+=CONFIG.direction_to_grid_difference[e].x,p+=CONFIG.direction_to_grid_difference[e].y,n.select_grid_square(g,p),f=!0}(_[s.split("_")[1]]);else if("export"==s)n.export_level(c);else{if("test_level"!=s)return;n.close_screen("level_editor"),n.open_screen("game_background"),n.open_screen("play_game"),a.set_up_custom_level(c,!0)}e()},this.path_checkbox_changed=function(t){var s=parseInt(t.value),a=o.objective[1];t.checked?(a.push(s),c.paths[s].push("threat")):(a.splice(a.indexOf(s),1),c.paths[s].pop()),e()},this.move_patrol_to=function(t){var s=t.id.split("_")[2];l[0]=s,e(),n.build_patrol_config(l,c.spots)},this.add_route_to=function(t){var s=t.id.split("_")[2];l.push(s),e(),n.build_patrol_config(l,c.spots)},this.route_complete=function(){i=!1,l=!1,m=!1,e()},this.get_level=function(){return c}},LevelManager=function(){var e,t,s,a,n,o,r,l,_,h,c,g;this.starting_spot,this.setup_level=function(a){for(var p in e=CONTENT.levels[String(a)],s.set_avatar_charges(e.charges),e.spots){var d=new Spot(e.spots[p]);n[p]=d,t.add_to_manifest(d,"spots")}for(this.starting_spot=n[e.start],i=0;i<e.paths.length;i++){var u=new Path(e.paths[i]);u.inject_graphics(t),u.set_starting_spot(n[e.paths[i][0]]),o.push(u)}for(i=0;i<e.objectives.length;i++){var v=new Objective(e.objectives[i],n);t.add_to_manifest(v,"objectives"),r.push(v)}for(i=0;i<e.patrols.length;i++){var f=new Patrol(e.patrols[i]);f.make_path_list(o,n),f.inject_graphics(t),l.push(f)}for(i=0;i<e.patrol_generators.length;i++){var m=new PatrolGenerator(e.patrol_generators[i],n);t.add_to_manifest(m,"patrol_generators"),_.push(m)}for(i=0;i<e.gates.length;i++){var y=new Gate(e.gates[i]);t.add_to_manifest(y,"gates"),h.push(y)}for(i=0;i<e.gate_generators.length;i++){var x=new GateGenerator(e.gate_generators[i],n);x.inject_graphics(t),c.push(x)}if(e.tips)for(i=0;i<e.tips.length;i++)g.push(new PlayTip(e.tips[i]))},this.inject_graphics=function(e){t=e},this.inject_avatar_manager=function(e){s=e},this.inject_game_master=function(e){a=e},this.get_play_tips=function(){return g},this.move_leads_to=function(e,t){if(!e[t])return!1;var s={spot:n[e[t][0]],path:o[e[t][1]]};return!s.path.blocked&&s},this.avatar_on_spot=function(e){for(var t=0;t<r.length;t++)if(r[t].pos_x==e.pos_x&&r[t].pos_y==e.pos_y)for(var s=0;s<r[t].paths.length;s++)o[r[t].paths[s]].threaten()},this.avatar_leaving_spot=function(){for(var e=0;e<o.length;e++)o[e].unthreaten()},this.detonate_charge=function(s){for(var n=0;n<r.length;n++)if(r[n].spot==s){r[n].blow_up(),t.remove_from_manifest(r[n],"objectives");for(var i=r[n].paths.length-1;i>-1;i--){o[r[n].paths[i]].blow_up();for(var g=0;g<l.length;g++)l[g].get_current_path()===o[r[n].paths[i]]&&l[g].blow_up()}r.splice(n,1),r.length||(e.end_of_game?a.game_complete():a.level_complete())}for(n=0;n<_.length;n++)if(_[n].spot==s){_[n].blow_up();for(g=_[n].patrols.length-1;g>-1;g--)l[_[n].patrols[g]].blow_up();t.remove_from_manifest(_[n],"patrol_generators")}for(n=0;n<c.length;n++)if(c[n].spot==s){c[n].blow_up();for(var p=c[n].gates.length-1;p>-1;p--)h[c[n].gates[p]].blow_up(),t.remove_from_manifest(h[c[n].gates[p]],"gates"),t.remove_from_manifest(c[n],"gate_generators")}},this.clear_level=function(){n={},o=[],r=[],l=[],_=[],h=[],c=[],g=[]},this.update=function(e){for(var t=0;t<l.length;t++)l[t].update(e),l[t].is_active()&&utils.check_collision(l[t].get_unit(),s.get_avatar())&&a.reset_level();for(t=0;t<h.length;t++)h[t].is_active()&&!s.get_gate_hit()&&utils.check_collision(h[t],s.get_avatar())&&s.hit_gate()}},Objective=function(e,t){this.spot=t[e[0]],this.paths=e[1],this.size=15,this.pos_x=this.spot.pos_x,this.pos_y=this.spot.pos_y,this.graphic={lineWidth:1,fillStyle:"rgba(250,247,91,0.2)",shadowColor:"#6FC3DF",shadowBlur:5,shadowOffsetX:0,shadowOffsetY:0},this.blow_up=function(){}},Path=function(e){function t(){r.shadowColor="#cc0000"}var s,a,n,o=e.slice(0),r={lineWidth:2,strokeStyle:"rgba(209, 243, 248, 1)",shadowColor:"#6FC3DF",shadowBlur:5,shadowOffsetX:0,shadowOffsetY:0};this.graphic=r,"threat"==o[o.length-1]&&(o.pop(),t()),this.set_starting_spot=function(e){a=e,this.checkpoints=function(){(n=[]).push({x:a.pos_x,y:a.pos_y});for(var e,t,s=1;s<o.length;s+=2)e=o[s],t=o[s+1],n.push({x:CONFIG.direction_to_grid_difference[e].x*CONFIG.grid_size*t+n[n.length-1].x,y:CONFIG.direction_to_grid_difference[e].y*CONFIG.grid_size*t+n[n.length-1].y});return n}(),s.add_to_manifest(this,"paths")},this.inject_graphics=function(e){s=e},this.checkpoints=n,this.blow_up=function(){this.blocked=!0,this.blown_up=!0,this.graphic.strokeStyle="rgba(209, 243, 248, 0.25)",this.graphic.shadowBlur=0},this.threaten=t,this.unthreaten=function(){r.shadowColor="#6FC3DF"}},Patrol=function(e){function t(e,t){for(var s=0;s<u.length;s++)if(e[u[s]]&&e[u[s]][0]==t)return e[u[s]][1]}function s(){p.pos_x=r[_].x,p.pos_y=r[_].y,++_>=r.length?a():n()}function a(){if(!(g.length<2)){if(i=(i+l+g.length)%g.length,!(r=o[i])&&level_editor_mode)return i=-1,p.pos_x=h,p.pos_y=c,void a();r.blown_up&&(i=(i+2*(l=-l)+g.length)%g.length,r=o[i]),(r=r.checkpoints.slice(0))[0].x===p.pos_x&&r[0].y===p.pos_y||r.reverse(),_=1,n()}}function n(){var e=utils.normalize(p.pos_x,p.pos_y,r[_].x,r[_].y);p.vol_x=e[0]*p.speed,p.vol_y=e[1]*p.speed}var o,r,i,l,_,h,c,g=e,p={pos_x:0,pos_y:0,vol_x:0,vol_y:0,speed:75,collision:10,graphic:{lineWidth:0,fillStyle:"rgba(207, 19, 28, 0.8)",shadowColor:"#6FC3DF",shadowBlur:20,shadowOffsetX:0,shadowOffsetY:0}},d=!0,u=["north","east","west","south"];this.make_path_list=function(e,s){o=[];for(var n=0;n<g.length;n++)o.push(e[t(s[g[n]],g[(n+1)%g.length])]);p.pos_x=s[g[0]].pos_x,p.pos_y=s[g[0]].pos_y,h=p.pos_x,c=p.pos_y,i=-1,l=1,a()},this.update=function(e){d&&function(e){p.pos_x+=p.vol_x*e,p.pos_y+=p.vol_y*e,(p.vol_x>0&&p.pos_x>r[_].x||p.vol_x<0&&p.pos_x<r[_].x)&&s(),(p.vol_y>0&&p.pos_y>r[_].y||p.vol_y<0&&p.pos_y<r[_].y)&&s()}(e)},this.inject_graphics=function(e){e.add_to_manifest(p,"patrols")},this.get_unit=function(){return p},this.get_current_path=function(){return o[i]},this.blow_up=function(){d=!1,p.graphic.fillStyle="rgba(28, 19 207, 0.8)",p.collision=8},this.is_active=function(){return d}},PatrolGenerator=function(e,t){this.spot=t[e.s],this.patrols=e.p,this.pos_x=this.spot.pos_x,this.pos_y=this.spot.pos_y,this.size=10,this.blow_up=function(){},this.graphic={lineWidth:1,fillStyle:"rgba(84, 84, 51, 0.6)",shadowColor:"#6FC3DF",shadowBlur:5,shadowOffsetX:0,shadowOffsetY:0}},PlayTip=function(e){this.tip_text=GAME_TEXT[e.t],this.pos_x=e.x,this.pos_y=e.y},Spot=function(e){this.pos_x=e.x*CONFIG.grid_size,this.pos_y=e.y*CONFIG.grid_size,this.north=e.n,this.east=e.e,this.south=e.s,this.west=e.w,this.charge=e.charge||!1,this.collision=CONFIG.grid_size/2,this.graphic={fillStyle:"rgba(254, 254, 254, 0.8)",lineWidth:2,strokeStyle:"#29c8df",shadowColor:"#5ad4e6",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0}},Utils=function(){this.normalize=function(e,t,s,a){x_dif=s-e,y_dif=a-t;var n=x_dif*x_dif+y_dif*y_dif;return n=Math.sqrt(n),[x_dif/n,y_dif/n]},this.check_collision=function(e,t){return function(e,t){var s=e.pos_x-t.pos_x,a=e.pos_y-t.pos_y;return Math.sqrt(s*s+a*a)}(e,t)<e.collision+t.collision},this.stringify_level=function(e){var t=["n","e","s","w"],s="({charges:";for(var a in s+=e.charges+",",s+="spots:{",e.spots){var n=e.spots[a];s+=a+":{x:"+n.x+",y:"+n.y;for(var o=0;o<t.length;o++)void 0!==n[t[o]]&&(s+=","+t[o]+":['"+n[t[o]][0]+"',"+n[t[o]][1]+"]");n.charge&&(s+=",charge:true"),s+="},"}s=s.substr(0,s.length-1),s+="},paths:[";for(var r=0;r<e.paths.length;r++)s+="['"+e.paths[r][0]+"',"+e.paths[r].slice(0).splice(1).toString()+"],";for(s=s.substr(0,s.length-1),s+="],patrols:[",r=0;r<e.patrols.length;r++){s+="[";for(var i=0;i<e.patrols[r].length;i++)s+="'"+e.patrols[r][i]+"',";s=s.substr(0,s.length-1),s+="],"}","==s[s.length-1]&&(s=s.substr(0,s.length-1)),s+="],patrol_generators:[";for(var l=0;l<e.patrol_generators.length;l++)s+="{s:'"+e.patrol_generators[l].s+"',p:["+e.patrol_generators[l].p.slice(0).toString()+"]},";","==s[s.length-1]&&(s=s.substr(0,s.length-1)),s+="],start:'"+e.start+"',",s+="objectives:[";for(var _=0;_<e.objectives.length;_++)s+="['"+e.objectives[_][0]+"',["+e.objectives[_][1].toString()+"]],";","==s[s.length-1]&&(s=s.substr(0,s.length-1)),s+="],gates:[";for(var h=0;h<e.gates.length;h++)s+="{x:"+e.gates[h].x+",y:"+e.gates[h].y+"},";","==s[s.length-1]&&(s=s.substr(0,s.length-1)),s+="],gate_generators:[";for(var c=0;c<e.gate_generators.length;c++){s+="{s:'"+e.gate_generators[c].s+"',g:["+e.gate_generators[c].g.toString()+"],gp:[";for(var g=0;g<e.gate_generators[c].gp.length;g++)s+="["+e.gate_generators[c].gp[g].toString()+"],";","==s[s.length-1]&&(s=s.substr(0,s.length-1)),s+="]},"}return","==s[s.length-1]&&(s=s.substr(0,s.length-1)),s+"],end_of_game:true});"}};utils=new Utils;var CONTENT=CONTENT||{levels:{}};CONTENT.levels[1]={charges:1,spots:{s1:{x:8,y:15,e:["s2",0]},s2:{x:20,y:15,w:["s1",0],e:["s3",1]},s3:{x:35,y:15,w:["s2",1]}},paths:[["s1",3,12],["s2",3,15]],patrols:[],patrol_generators:[],start:"s1",objectives:[["s3",[0,1]]],gates:[],gate_generators:[],tips:[{x:20,y:140,t:"lv1a"},{x:420,y:110,t:"lv1b"}]};var CONTENT=CONTENT||{levels:{}};CONTENT.levels[2]={charges:0,spots:{s1:{x:8,y:15,e:["s2",0]},s2:{x:20,y:15,w:["s1",0],e:["s3",1],n:["s4",2]},s3:{x:35,y:15,w:["s2",1],charge:!0},s4:{x:18,y:10}},paths:[["s1",3,12],["s2",3,15],["s2",1,3,8,2]],patrols:[],patrol_generators:[],start:"s1",objectives:[["s4",[0,1,2]]],gates:[],gate_generators:[],tips:[{x:140,y:60,t:"lv2a"},{x:420,y:120,t:"lv2b"}]};var CONTENT=CONTENT||{levels:{}};CONTENT.levels[3]={charges:1,spots:{s1:{x:8,y:15,e:["s2",0]},s2:{x:12,y:15,w:["s1",0],e:["s4",1],n:["s3",2]},s3:{x:12,y:10,s:["s2",2]},s4:{x:16,y:15,w:["s2",1],e:["s5",3]},s5:{x:20,y:15,w:["s4",3],e:["s6",4]},s6:{x:24,y:15,w:["s5",4],e:["s7",5],s:["s8",6]},s7:{x:30,y:11,s:["s6",5]},s8:{x:30,y:19,w:["s6",6]}},paths:[["s1",3,4],["s2",3,4],["s2",1,5],["s4",3,4],["s5",3,4],["s6",3,3,2,3,1,1],["s6",5,2,4,2,3,4]],start:"s1",objectives:[["s7",[0,1,2,3,4,5,6]]],patrols:[["s3","s2","s4","s5","s6","s8","s6","s5","s4","s2"]],patrol_generators:[{s:"s8",p:[0]}],gates:[],gate_generators:[],tips:[{x:130,y:260,t:"lv3a"}]};var CONTENT=CONTENT||{levels:{}};CONTENT.levels[4]={charges:2,spots:{s1:{x:9,y:7,s:["s2",0]},s2:{x:10,y:12,n:["s1",0],e:["s3",1]},s3:{x:14,y:12,w:["s2",1],e:["s4",2],n:["s7",5]},s4:{x:22,y:14,w:["s3",2],e:["s5",3],s:["s6",4]},s5:{x:25,y:11,s:["s4",3]},s6:{x:20,y:17,e:["s4",4]},s7:{x:20,y:8,w:["s3",5]}},paths:[["s1",5,2,4,1,5,2],["s2",3,4],["s3",3,2,4,2,3,4],["s4",3,2,2,1,1,2],["s4",5,2,6,1,7,1],["s3",1,2,2,2,3,4]],start:"s1",objectives:[["s5",[0,1,2,3,4,5]]],patrols:[["s6","s4","s3","s4"]],patrol_generators:[{s:"s6",p:[0]}],gates:[{x:20,y:14,p:2}],gate_generators:[{s:"s7",g:[0],gp:[[5,6]]}],tips:[{x:50,y:230,t:"lv4a"},{x:330,y:40,t:"lv4b"}]};var CONTENT=CONTENT||{levels:{}};CONTENT.levels[5]={charges:1,spots:{s1:{x:8,y:20,n:["s2",0]},s2:{x:9,y:13,s:["s1",0],n:["s3",1],e:["s4",2]},s3:{x:6,y:12,n:["s2",1],charge:!0},s4:{x:16,y:15,w:["s2",2],s:["s5",3],e:["s7",6]},s5:{x:15,y:20,n:["s4",3],s:["s6",4]},s6:{x:22,y:20,w:["s5",4],n:["s7",5]},s7:{x:19,y:15,w:["s4",6],s:["s6",5],e:["s8",7]},s8:{x:23,y:10,s:["s7",7],w:["s9",8]},s9:{x:19,y:11,e:["s8",8]}},paths:[["s1",1,3,2,1,1,3],["s2",1,2,2,1,1,3,8,1,7,3,6,1,5,2,4,1,5,2],["s2",3,2,4,2,3,3],["s4",5,2,6,1,5,2],["s5",5,1,6,9,3,1,2,10,3,1,6,10,3,1,2,10,3,1,6,10,3,1,2,10,3,1],["s6",1,1,8,3,1,1],["s4",3,3],["s7",3,2,2,2,1,3],["s8",7,2,6,1,7,1]],start:"s1",objectives:[["s8",[0,1,2,3,4,5,6,7,8]]],patrols:[["s5","s4","s7","s6"]],patrol_generators:[{s:"s5",p:[0]}],gates:[{x:18,y:15,p:6}],gate_generators:[{s:"s9",g:[0],gp:[[5,1,6,1,5,2]]}],tips:[{x:280,y:360,t:"lv5a"}]};var CONTENT=CONTENT||{levels:{}};CONTENT.levels[6]={charges:4,spots:{s1:{x:28,y:18,n:["s2",0]},s2:{x:20,y:14,e:["s1",0],s:["s3",1]},s3:{x:8,y:18,n:["s2",1],w:["s4",2]},s4:{x:4,y:10,s:["s3",2],n:["s5",3],e:["s9",8]},s5:{x:9,y:4,w:["s4",3],e:["s6",4],n:["s10",9]},s6:{x:15,y:4,w:["s5",4],n:["s7",5]},s7:{x:22,y:1,w:["s6",5],s:["s8",6]},s8:{x:19,y:8,e:["s7",6],w:["s9",7]},s9:{x:14,y:9,e:["s8",7],w:["s4",8]},s10:{x:6,y:1,e:["s5",9]}},paths:[["s1",1,2,8,2,7,6],["s2",5,3,6,2,8,2,1,3,7,6,6,2,5,2],["s3",7,2,8,2,1,6],["s4",1,3,2,3,3,2],["s5",3,6],["s6",1,2,2,1,3,6],["s7",5,6,6,1,7,2],["s8",7,2,6,1,7,2],["s9",7,6,6,1,7,3],["s5",1,2,8,1,7,2]],start:"s1",objectives:[["s4",[0,1,2,3,8,7,6]],["s7",[5,4,9,3]]],patrols:[["s10","s5","s6","s7","s8","s9","s4","s5"],["s8","s9","s4","s5","s10","s5","s6","s7"]],patrol_generators:[{s:"s10",p:[0,1]}],gates:[{x:11,y:9,p:8}],gate_generators:[{s:"s9",g:[0],gp:[[6,1,7,1,8,1]]}],tips:[{x:120,y:-70,t:"lv6a"},{x:320,y:300,t:"lv6b"}]};var CONTENT=CONTENT||{levels:{}};CONTENT.levels[7]={charges:0,spots:{s1:{x:12,y:14,e:["s2",0]},s2:{x:19,y:14,n:["s5",3],e:["s3",1],w:["s1",0]},s3:{x:26,y:14,n:["s6",5],e:["s4",2],w:["s2",1]},s4:{x:32,y:14,n:["s7",6],w:["s3",2]},s5:{x:19,y:8,e:["s6",4],s:["s2",3]},s6:{x:25,y:8,s:["s3",5],w:["s5",4]},s7:{x:33,y:9,s:["s4",6],charge:!0}},paths:[["s1",3,7],["s2",3,7],["s3",3,6],["s2",1,6],["s5",3,6],["s6",5,2,4,1,5,3],["s4",1,2,2,1,1,2]],patrols:[["s4","s3","s2","s3"],["s6","s3","s2","s5"]],patrol_generators:[{s:"s4",p:[0,1]}],start:"s1",objectives:[["s6",[0,1,2,3,4,5]]],gates:[],gate_generators:[]},CONTENT.levels[8]={charges:0,spots:{s1:{x:5,y:22,n:["s2",0],w:["s4",2]},s2:{x:6,y:14,e:["s3",1],s:["s1",0],w:["s9",7]},s3:{x:14,y:16,e:["s10",8],w:["s2",1]},s4:{x:3,y:28,n:["s1",2],e:["s6",4]},s5:{x:14,y:24,e:["s10",10],w:["s1",3]},s6:{x:6,y:28,w:["s4",4],charge:!0},s7:{x:9,y:10,e:["s8",5],w:["s2",6],charge:!0},s8:{x:19,y:11,e:["s10",9],w:["s7",5]},s9:{x:2,y:10,s:["s2",7]},s10:{x:21,y:15,n:["s8",9],s:["s5",10],w:["s3",8]}},paths:[["s1",1,4,2,1,1,3],["s2",3,3,4,2,3,3],["s1",7,1,6,1,5,5],["s5",7,3,8,1,7,4,8,1],["s4",3,3],["s7",3,5,4,1,3,4],["s7",7,1,6,1,5,2,6,1],["s2",7,2,8,2,1,2],["s3",3,3,2,1,3,3],["s10",1,4,7,2],["s10",5,6,6,1,5,2,7,6]],patrols:[["s2","s3","s10","s8","s7"],["s10","s8","s7","s2","s3"]],patrol_generators:[{s:"s9",p:[0,1]}],start:"s1",objectives:[["s4",[0,1,2,3,4,5,6,7,8,9,10]]],gates:[{x:3,y:26}],gate_generators:[{s:"s5",g:[0],gp:[[6,2,7,9]]}],end_of_game:!0}}()</script></div>