<!doctype html><meta name=viewport content="width=device-width,maximum-scale=1,user-scalable=0"><title>The Knighting of Sr Isaac - js13kGames 2023</title><style>body,html{height:100%;width:100%;display:flex;overflow:hidden;position:fixed;flex-direction:column;justify-content:center;align-items:center;image-rendering:-moz-crisp-edges;image-rendering:-webkit-crisp-edges;image-rendering:pixelated;image-rendering:crisp-edges}.hidden{display:none}#game,#main{height:100%;width:100%;display:initial}#gameoverscreen{opacity:.9}.enemy,.item,.player,.room,.weapon,canvas{position:absolute}</style><style>@keyframes takedmg{0%,30%,50%,80%{transform:translate(1px,1px) rotate(0);filter:sepia(1) saturate(1.5) hue-rotate(-23deg)}10%,40%,60%,90%{transform:translate(-1px,-2px) rotate(-1deg);filter:sepia(1) saturate(1.5) hue-rotate(-23deg)}100%,20%,50%,70%{transform:translate(-3px,0) rotate(1deg);filter:sepia(1) saturate(1.5) hue-rotate(-23deg)}}</style><div id=main></div><script>var i={834:(t,s,i)=>{i.d(s,{t:()=>e});class e{constructor(t,s,i,e){this.x=t,this.y=s,this.w=i,this.i=e}}},909:(t,s,i)=>{i.r(s),i.d(s,{h:()=>e,l:()=>o,u:()=>d});var h=i(834),l=i(253),n=i(485),c=i(85),a=i(152),r=i(652);class e{constructor(t,s,i,e){this.o=t,this.p=s,this.g=i,this.k=new h.t(s*(0,c.R)(16),i*(0,c.R)(16),(0,c.R)(16),(0,c.R)(16)),this.O=e,this.P=n.s.T}I(){const t=this.o.Y.getContext("2d");switch(this.O){case l.j.q:var s=u(),i=this.o.L.getContext("2d");i.fillStyle=s.md,i.fillRect(this.k.x,this.k.y,(0,c.R)(16),(0,c.R)(16)),(0,a.G)(this.o.L,f(this.k.x),f(this.k.y),f(this.k.w-(0,c.R)(2)),f(this.k.i-(0,c.R)(2)),(0,c.R)(2),s.dk,(t,s,i,e)=>(0,r.N)(100)<3||this.H(t,s,i,e,(t,s,i,e)=>0===t||s===e,(t,s,i,e)=>0===t,(t,s,i,e)=>0===t||s===e,(t,s,i,e)=>0===t&&s===e,(t,s,i,e)=>s===e,(t,s,i,e)=>t===i-3||s===e,(t,s,i,e)=>0===t||s===e-4)),(0,a.G)(this.o.L,f(this.k.x),f(this.k.y),f(this.k.w-(0,c.R)(2)),f(this.k.i-(0,c.R)(2)),(0,c.R)(2),s.lt,(t,s,i,e)=>this.H(t,s,i,e,(t,s,i,e)=>0===s||t===i,(t,s,i,e)=>0===s,(t,s,i,e)=>t===i&&0===s,(t,s,i,e)=>t===i||0===s,(t,s,i,e)=>t===e,(t,s,i,e)=>t===i-4||0===s,(t,s,i,e)=>t===i||s===e-3));break;case l.j._:const e=this.P===n.s.C?{lt:"#ffff57",md:"#cd9722",dk:"#9e6800"}:this.P===n.s.F?{lt:"#703a33",md:"#641f14",dk:"#431313"}:{lt:"#865433",md:"#843d0d",dk:"#2f1519"};this.K(t,()=>{t.fillStyle=e.md,t.fillRect(this.k.x,this.k.y,(0,c.R)(16),(0,c.R)(16)),(0,a.G)(this.o.Y,f(this.k.x),f(this.k.y),f(this.k.w-(0,c.R)(2)),f(this.k.i-(0,c.R)(2)),(0,c.R)(2),e.lt,(t,s,i,e)=>0===s&&1!==this.g&&this.g<Math.round(c.X.U)-1||t===i&&0<this.p&&this.p!==Math.round(c.X.J)-2||s<3&&0===this.g||i-3<t&&this.p===Math.round(c.X.J)-1),(0,a.G)(this.o.Y,f(this.k.x),f(this.k.y),f(this.k.w-(0,c.R)(2)),f(this.k.i-(0,c.R)(2)),(0,c.R)(2),e.dk,(t,s,i,e)=>s===e&&0<this.g&&this.g!==Math.round(c.X.U)-2||0===t&&(0===this.p||this.p===Math.round(c.X.J)-2||1<this.p&&this.p<Math.round(c.X.J)-2)||s<2&&0===this.g||e-2<s&&this.g===Math.round(c.X.U)-1||t<2&&0===this.p||i-2<t&&this.p===Math.round(c.X.J)-1),this.g<3||this.g>Math.round(c.X.U)-3?this.Z(t,this.k.x,this.k.y,(0,c.R)(16),(0,c.R)(8)):this.Z(t,this.k.x+(0,c.R)(8),this.k.y,(0,c.R)(8),(0,c.R)(16)),this.P===n.s.C&&((1===this.p&&this.o.$[this.g-1][this.p].O==l.j.tt&&this.o.$[this.g+1][this.p].O==l.j.tt||this.p===Math.round(c.X.J)-1&&this.o.$[this.g-2][this.p].O==l.j.tt&&this.o.$[this.g+2][this.p].O==l.j.tt)&&this.st(t,this.k.x,this.k.y+(0,c.R)(4)),0===this.g&&this.o.$[this.g][this.p-2].O==l.j.tt&&this.o.$[this.g][this.p+2].O==l.j.tt||this.g===Math.round(c.X.U)-2&&this.o.$[this.g][this.p-1].O==l.j.tt&&this.o.$[this.g][this.p+1].O==l.j.tt)&&this.st(t,this.k.x+(0,c.R)(6),this.k.y+(0,c.R)(10))});break;case l.j.it:this.K(t);break;case l.j.tt:o(this.o.L,this.k.x,this.k.y)}}H(t,s,i,e,h,l,n,a,r,u,d){return(0<this.p&&this.p<c.X.J-1&&0<this.g&&this.g<c.X.U-1?h:0===this.p&&0===this.g?l:0===this.p&&this.g>=c.X.U-1?n:this.p>=c.X.J-1&&0===this.g?a:this.p>=c.X.J-1&&this.g>=c.X.U-1?r:0===this.g&&0<this.p&&this.p<c.X.J-1||this.g>=c.X.U-1?u:d)(t,s,i,e)}K(t,s){(this.p===this.o.$[0].length-1||0===this.p)&&0<this.g-1&&this.o.$[this.g-1][this.p].O==l.j.q?(d(t,this.k.x,this.k.y-(0,c.R)(8)),this.Z(t,this.k.x,this.k.y+(0,c.R)(8),(0,c.R)(16),(0,c.R)(8))):(this.p===this.o.$[0].length-1||0===this.p)&&this.g+1<this.o.$.length&&this.o.$[this.g+1][this.p].O==l.j.q?(d(t,this.k.x,this.k.y+(0,c.R)(8)),this.Z(t,this.k.x,this.k.y,(0,c.R)(16),(0,c.R)(8))):(this.g===this.o.$.length-1||0===this.g)&&0<this.p-1&&this.o.$[this.g][this.p-1].O==l.j.q?(d(t,this.k.x-(0,c.R)(8),this.k.y),this.Z(t,this.k.x+(0,c.R)(8),this.k.y,(0,c.R)(8),(0,c.R)(16))):(this.g===this.o.$.length-1||0===this.g)&&this.p+1<this.o.$[0].length&&this.o.$[this.g][this.p+1].O==l.j.q?(d(t,this.k.x+(0,c.R)(8),this.k.y),this.Z(t,this.k.x,this.k.y,(0,c.R)(8),(0,c.R)(16))):s&&s()}Z(t,s,i,e,h){t.fillStyle="#843d0d",t.fillRect(s,i,e,h),t.fillStyle="#865433",t.fillRect(s,i,e,(0,c.R)(2)),t.fillRect(s+e-(0,c.R)(2),i,(0,c.R)(2),h),t.fillStyle="#2f1519",t.fillRect(s+(0,c.R)(e/(0,c.R)(2)),i+(0,c.R)(h/(0,c.R)(2)-2),(0,c.R)(2),(0,c.R)(2)),t.fillRect(s,i+h-(0,c.R)(2),e,(0,c.R)(2)),t.fillRect(s,i,(0,c.R)(2),h)}st(t,s,i){t.fillStyle="#000000",t.fillRect(s,i,(0,c.R)(6),(0,c.R)(6)),t.fillStyle="#3e3846",t.fillRect(s,i+(0,c.R)(6),(0,c.R)(6),(0,c.R)(2)),t.fillRect(s-(0,c.R)(2),i,(0,c.R)(2),(0,c.R)(6)),t.fillStyle="#999a9e",t.fillRect(s,i-(0,c.R)(2),(0,c.R)(6),(0,c.R)(2)),t.fillRect(s+(0,c.R)(6),i,(0,c.R)(2),(0,c.R)(6))}ht(t,s=2){return t/(0,c.R)(s)}}const u=()=>c.X.et<3?{lt:"#999a9e",md:"#686b7a",dk:"#3e3846"}:c.X.et<5?{lt:"#703a33",md:"#38252e",dk:"#1b1116"}:{lt:"#431313",md:"#2f1519",dk:"#100f0f"},d=(t,s,i)=>{var e=u();t.fillStyle=e.md,t.fillRect(s,i,(0,c.R)(16),(0,c.R)(16)),t.fillStyle=e.dk,t.fillRect(s,i+(0,c.R)(14),(0,c.R)(16),(0,c.R)(2)),t.fillRect(s,i,(0,c.R)(2),(0,c.R)(16)),t.fillStyle=e.lt,t.fillRect(s,i,(0,c.R)(16),(0,c.R)(2)),t.fillRect(s+(0,c.R)(14),i,(0,c.R)(2),(0,c.R)(16))},o=(t,s,i)=>{var e=c.X.et<3?{lt:"#52804d",md:"#41663d"}:c.X.et<5?{lt:"#41663d",md:"#2f492c"}:{lt:"#703a33",md:"#38252e"},h=t.getContext("2d");h.fillStyle=e.md,h.fillRect(s,i,(0,c.R)(16),(0,c.R)(16)),(0,a.G)(t,f(s),f(i),f((0,c.R)(14)),f((0,c.R)(14)),(0,c.R)(2),e.lt,()=>(0,r.N)(100)<5)},f=(t,s=2)=>t/(0,c.R)(s)},392:(t,s,i)=>{i.r(s),i.d(s,{nt:()=>e,key:()=>l,at:()=>h});const e=[[null,"ho","ho",null,"ho","ho",null],["ho","hi","hi","ho","hi","hi","ho"],["ho","hi","hi","hi","hi","hi","ho"],["ho","hi","hi","hi","hi","hi","ho"],[null,"ho","hi","hi","hi","ho",null],[null,null,"ho","hi","ho",null,null],[null,null,null,"ho",null,null,null]],h=[["hd","hl","hd"],["hl","hl","hl"],["#000000","hl","#000000"],["#e7c688","#e7c688","#e7c688"],["cm","cm","cm"],["cm","cm","cm"],["cm","cm","cm"],["#000000",null,"#000000"]],l=[["#edeef7","#edeef7","#edeef7"],["#edeef7",null,"#edeef7"],["#edeef7","#edeef7","#edeef7"],[null,"#edeef7",null],["#edeef7","#edeef7",null],[null,"#edeef7",null],["#edeef7","#edeef7",null]]},253:(t,s,i)=>{i.d(s,{j:()=>e});const e={q:0,tt:1,it:2,_:3}},485:(t,s,i)=>{i.d(s,{s:()=>e});const e={T:0,C:1,F:2}},496:(t,s,i)=>{i.r(s),i.d(s,{ut:()=>h,rt:()=>e,ct:()=>a,ot:()=>l,dt:()=>n,ft:()=>r,wt:()=>d});const e={xt:0,vt:1,gt:2,kt:3,Mt:4,yt:5,St:6,Rt:7,Ot:8,Pt:9,At:10,Wt:11},h={Tt:0,Bt:1,yt:2},l=t=>{switch(t){case e.kt:return h.Bt;case e.St:return h.yt}return h.Tt},n=t=>{switch(t){case e.vt:return R;case e.At:return d;case e.kt:return p;case e.St:return w;case e.Wt:return y;case e.Rt:return X;case e.Mt:return o;case e.yt:return f;case e.gt:return c;case e.Pt:return k;case e.Ot:return x}return u},a=t=>{switch(t){case h.Bt:return p;case h.yt:return w}return g},r=t=>{switch(t){case e.kt:case e.St:case e.Pt:return!0}return!1},u=[["#e7c688","#e7c688"],["#e7c688","#e7c688"]],d=[[null,"#edeef7",null],[null,"#edeef7",null],[null,"#edeef7",null],[null,"#edeef7",null],[null,"#edeef7",null],["#999a9e","#999a9e","#999a9e"],[null,"wc",null],[null,"wc",null]],c=[[null,"#edeef7",null],["#edeef7","#edeef7","#edeef7"],[null,"#edeef7",null],[null,"wc",null]],o=[["#edeef7","#edeef7","#edeef7"],["#999a9e","#999a9e","#edeef7"],["#999a9e","#999a9e","#edeef7"],[null,"wc",null],[null,"wc",null]],f=[[null,"#edeef7","#edeef7"],["#edeef7","#999a9e","#edeef7"],[null,"#999a9e","#edeef7"],[null,"wc",null],[null,"wc",null],[null,"wc",null]],R=[["wc","#edeef7","wc"],["#edeef7","#edeef7","#edeef7"],["wc","#edeef7","wc"],["wc","#edeef7","wc"]],X=[["wc"],["wc"],["wc"],["wc"],["wc"],["wc"],["wc"],["wc"],["wc"],["wc"],["wc"],["#686b7a"],["#edeef7"],["#edeef7"]],y=[[null,null,null,"#edeef7",null,null,null],[null,null,"#999a9e","#999a9e","#edeef7",null,null],[null,null,"#999a9e","#999a9e","#edeef7",null,null],[null,null,"#999a9e","#999a9e","#edeef7",null,null],[null,null,"#999a9e","#999a9e","#edeef7",null,null],[null,null,"#999a9e","#999a9e","#edeef7",null,null],[null,null,"#999a9e","#999a9e","#edeef7",null,null],["#3e3846","#3e3846","#3e3846","#3e3846","#3e3846","#3e3846","#3e3846"],[null,null,null,"wc",null,null,null],[null,null,null,"wc",null,null,null],[null,null,null,"wc",null,null,null],[null,null,null,"#3e3846",null,null,null]],k=[[null,null,null,"#edeef7",null,null,null],[null,null,null,"#edeef7",null,null,null],[null,"#999a9e","#999a9e","wc","#999a9e","#999a9e",null],[null,"#999a9e",null,"wc",null,"#999a9e",null],["#999a9e","#999a9e",null,"wc",null,"#999a9e","#999a9e"],[null,null,"#3e3846","wc","#3e3846",null,null],[null,null,null,"wc",null,null,null],[null,null,null,"#edeef7",null,null,null]],x=[[null,"#edeef7",null],[null,"#edeef7",null],[null,"#edeef7","#edeef7"],["#edeef7","#999a9e","#edeef7"],[null,"#999a9e","#edeef7"],[null,"#686b7a",null],[null,"wc",null],[null,"wc",null],[null,"wc",null],[null,"wc",null],[null,"wc",null],[null,"wc",null],[null,"wc",null],[null,"wc",null]],g=[["#edeef7"],["#edeef7"],["wc"],["wc"],["wc"],["wc"],["wc"],["#edeef7"]],p=[["wc"],["#edeef7"],["#edeef7"]],w=[["#edeef7","#999a9e"],["#edeef7","wc"],[null,"wc"],[null,"wc"]]},85:(t,s,i)=>{i.r(s),i.d(s,{X:()=>h,R:()=>l});const e="igorfie-the-knighting-of-sr-isaac",h={Dt:e,Et:parseInt(localStorage.getItem(e))||0,It:1<navigator.maxTouchPoints&&256!==navigator.maxTouchPoints,Yt:void 0,qt:void 0,jt:void 0,Lt:void 0,Gt:60,zt:void 0,Nt:void 0,Vt:void 0,Ht:void 0,_t:void 0,Ct:void 0,Ft:void 0,Kt:void 0,et:void 0,Ut:void 0,Xt:void 0,keys:{},Jt:void 0,Qt:void 0,Zt:void 0,$t:void 0,ts:void 0,J:33,U:17,ss:void 0,hs:void 0,es:void 0,ls:void 0,ns:void 0,us:void 0,rs:6,cs:()=>{h.Jt=-1,h.Kt=5,h.et=1,h.Qt=0,h.Zt=0,h.$t=0,h.es=null,h.ls=null,h.ns=null,h.us=null},os:(t,s)=>{var i,e;h.Yt=h.jt,h.qt=h.Lt,h.jt=t,h.Lt=s,h.Vt=1<=(i=(i=Math.round(2/830*(h.Lt-270)+2))<(e=Math.round(2/520*(h.jt-480)+2))?i:e)?i:1,h.Ht=t/h.Vt,h._t=s/h.Vt,h.J=h.Ht/16,h.U=h._t/16},ds:(t,s)=>(t=h.jt*t/h.Yt,s=h.Lt*s/h.qt,{x:t<l(48)?l(48):t>h.jt-l(48)?h.jt-l(48):t,y:s<l(48)?l(48):s>h.Lt-l(48)?h.Lt-l(48):s})},l=t=>t*h.Vt},497:(N,t,s)=>{s.r(t),s.d(t,{fs:()=>D});var a=s(85),h=s(485);const l=t=>{switch(t){case 1:case 2:case 3:return!0}return!1};var n=s(652),u=s(253);const i="#2f492c",e="#431313",r="#3c4f68",E=[i,e,r];var d=s(496);const c=(t,s)=>{var i=Math.abs(t.x-s.x-s.w/2),e=Math.abs(t.y-s.y-s.i/2);return!(i>s.w/2+t.r||s.i/2+t.r<e||!(i<=s.w/2||e<=s.i/2||(i-=s.w/2)*i+(i=e-s.i/2)*i<=t.r*t.r))},o=(t,s)=>{var i=t.x-s.x,e=t.y-s.y;return Math.sqrt(i*i+e*e)<=t.r+s.r},f=(t,s)=>{var i=t.x-s.x;return t=t.y-s.y,Math.sqrt(i*i+t*t)},R=(s,t,i,e,h)=>{a.X.ss.ps[i][t].ws.find(t=>c(s,t.k))||a.X.ss.ps[i][t].xs.find(t=>c(s,t.k))||a.X.ss.ps[i][t].vs.find(t=>t!==h&&o(s,t.k))||h&&o(s,a.X.es.k)||a.X.ss.ps[i][t].gs.find(t=>t.O!==u.j.it&&c(s,t.k))||e(s)},X=(t,s)=>{return i=t[0],t=t[1],h={x:(n=y(e=s,i),h=l=y(t,i),(h={x:(n=k(n,h)/k(h,h))*h.x,y:n*h.y}).x+i.x),y:h.y+i.y},n=y(h,i),((n=Math.abs(l.x)>Math.abs(l.y)?n.x/l.x:n.y/l.y)<=0?Math.sqrt(x(e,i)):1<=n?Math.sqrt(x(e,t)):Math.sqrt(x(e,h)))<s.r;var i,e,h,l,n},y=(t,s)=>({x:t.x-s.x,y:t.y-s.y}),k=(t,s)=>t.x*s.x+t.y*s.y,x=(t,s)=>k(y(t,s),y(t,s));var g=s(879),p=s(909);class w{constructor(t,s,i){this.x=t,this.y=s,this.r=i}}var m=s(28);class _{constructor(t,s,i){this.o=i,this.ks=(0,g.bs)(i.Ms,"div",null,["bonfire"]),this.ys=(0,g.bs)(this.ks,"canvas"),this.Ss=(0,g.bs)(this.ks,"canvas"),this.Rs=(0,g.bs)(this.ks,"canvas"),this.init(t,s)}init(t,s){this.x=t,this.y=s,this.Os=0,this.k=new w(t,s,(0,a.R)(16)),(0,g.Ps)(this.Ss,v.length*(0,a.R)(2),v.length*(0,a.R)(2)),this.ks.style.translate=t-this.Ss.width/2+"px "+(s-this.Ss.height/2)+"px",(0,g.Ps)(this.ys,d.wt.length*(0,a.R)(2),d.wt.length*(0,a.R)(2)),this.ys.style.translate=(0,a.R)(0)+"px "+(0,a.R)(-8)+"px",this.ys.style.rotate="-160deg",(0,g.Ps)(this.Rs,(0,a.R)(80),(0,a.R)(6)),this.Rs.style.translate=(0,a.R)(-30)+"px "+(0,a.R)(-10)+"px",this.I()}update(){0===this.o.vs.length&&(0===this.Os&&this.As(),1<=+this.Os?o(a.X.es.k,this.k)&&(a.X.keys.v||a.X.keys.V||a.X.keys.b||a.X.keys.B)&&(a.X.Nt.Ws(),a.X.Ct.innerHTML="",a.X.ls=a.X.es.Bs.Ts,a.X.ns=a.X.es.Es.Ds,a.X.us=a.X.es.Is.Ds,a.X.et++,a.X.Kt++,a.X.Ft=new D):this.Os+=a.X.zt)}Ys(t,s){this.k.x=t,this.k.y=s,this.ks.style.translate=this.k.x-this.Ss.width/2+"px "+(this.k.y-this.Ss.height/2)+"px"}I(){(0,g.qs)(this.ys,d.wt,(0,a.R)(2),null,null),(0,g.qs)(this.Ss,v,(0,a.R)(2),null,null,{bt:"#686b7a",bm:"#3e3846"})}As(){(0,m.js)((0,m.Ls)("ascend to next level"),this.Rs,(0,a.R)(1),40,3,"#edeef7",1),this.Ss.getContext("2d").clearRect(0,0,this.Ss.width,this.Ss.height),(0,g.qs)(this.Ss,v,(0,a.R)(2),null,null,{bt:"#edeef7",bm:"#cd9722"})}Gs(){this.o.items.splice(this.o.items.indexOf(this),1),this.ks.remove()}}const v=[[null,null,null,null,"bm",null,null],[null,null,null,"bm",null,null,null],[null,"#38252e","bm","bm","bm","#38252e",null],["#38252e","bm","bm","bm","bm","bm","#38252e"],["#38252e","bm","bm","bt","bm","bm","#38252e"],["#38252e","bm","bt","bt","bt","bm","#38252e"],["#38252e","#38252e","bt","bt","bt","#38252e","#38252e"],[null,"#38252e","#38252e","#38252e","#38252e","#38252e",null]];class T extends p.h{constructor(t,s,i,e,h,l){super(t,s,i,e),this.zs=h,this.Ns=l}}var b=s(834);class q{constructor(t,s,i){this.o=t,this.elapsedTime=0,this.init(s*(0,a.R)(16)+(0,a.R)(2),i*(0,a.R)(16)+(0,a.R)(2))}init(t,s){this.k=new b.t(t,s,(0,a.R)(12),(0,a.R)(12))}update(){1<=this.elapsedTime/.25?(a.X.hs.vs.forEach(t=>{c(t.k,this.k)&&(a.X.Nt.Vs(),t.Bs.Hs(1))}),c(a.X.es.k,this.k)&&(a.X.Ct.parentNode.style.animation="takedmg 400ms ease-in-out",a.X.Nt._s(),a.X.es.Bs.Hs(1)),this.elapsedTime=0):this.elapsedTime+=a.X.zt}I(){var t=this.o.Cs.getContext("2d");t.fillStyle="#00000044",t.fillRect(this.k.x,this.k.y,(0,a.R)(12),(0,a.R)(12));for(let s=-1;s<6;s+=4)for(let t=-1;t<8;t+=5)(0,g.qs)(this.o.Cs,Y,(0,a.R)(2),this.k.x/(0,a.R)(2)+t,this.k.y/(0,a.R)(2)+s)}}const Y=[[null,"#edeef7",null],["#999a9e","#3e3846","#edeef7"]];var j=s(152);class B{constructor(t,s,i){this.o=t,this.elapsedTime=0,this.init(s*(0,a.R)(16)+(0,a.R)(4),i*(0,a.R)(16)+(0,a.R)(4))}init(t,s){this.k=new b.t(t,s,(0,a.R)(8),(0,a.R)(8))}I(){(0,j.Fs)(this.o.Cs,Math.round(this.k.x/(0,a.R)(2)-3),Math.round(this.k.y/(0,a.R)(2)-1),9,8,(0,a.R)(2),"#00000044","#00000044"),(0,g.qs)(this.o.Cs,W,(0,a.R)(2),Math.round(this.k.x/(0,a.R)(2))-2,Math.round(this.k.y/(0,a.R)(2))-2,{lt:"#999a9e",md:"#686b7a",dk:"#3e3846"})}}const W=[[null,"lt","lt","lt","lt","lt","lt",null],["dk","md","md","md","md","lt","md","lt"],["dk","md","md","md","lt","dk","md","lt"],["dk","md","md","lt","dk","md","md","lt"],["dk","md","dk","dk","md","md","lt","lt"],["dk","dk","md","md","dk","dk","md","lt"],["dk","md","md","dk","md","md","md","lt"],[null,"dk","dk","dk","dk","dk","dk",null]],z=()=>({translate:[0,"0 "+(0,a.R)(-3)+"px",0],rotate:["0deg",(0,a.R)(-3)+"deg","0deg"],offset:[0,.5,1]}),M=()=>({translate:[(0,a.R)(-2)+"px "+(0,a.R)(-2)+"px",0,(0,a.R)(-2)+"px "+(0,a.R)(-2)+"px"],rotate:[(0,a.R)(-2)+"deg","0deg",(0,a.R)(-2)+"deg"],offset:[0,.5,1]}),L=()=>({translate:[(0,a.R)(2)+"px "+(0,a.R)(-2)+"px",0,(0,a.R)(2)+"px "+(0,a.R)(-2)+"px"],rotate:[(0,a.R)(2)+"deg","0deg",(0,a.R)(2)+"deg"],offset:[0,.5,1]});var C=s(392);class O{constructor(t,s,i,e,h){this.o=h,this.Ks=!1,this.x=t,this.y=s,this.itemType=i,this.Us=e,this.Xs=this.Js(i,e),this.Os=0,this.Qs=(0,g.bs)(h.Ms,"div",null,["item"]),this.Zs=(0,g.bs)(this.Qs,"canvas"),this.$s=(0,g.bs)(this.Qs,"canvas"),this.init(t,s)}init(t,s){this.x=t,this.y=s,this.size=(0,a.R)(0===this.itemType?1:2),this.k=new w(t+this.Xs[0].length*this.size/2,s+this.Xs.length*this.size/2,(this.Xs[0].length>this.Xs.length?this.Xs[0]:this.Xs).length*this.size),this.ti=new w(this.k.x,this.k.y,this.k.r),this.Qs.style.translate=this.x+"px "+this.y+"px",t=5*(0,a.R)(2),(0,g.Ps)(this.Zs,t,t),this.Zs.style.translate=-this.size+"px "+(this.size*this.Xs.length-t/2)+"px",(0,g.Ps)(this.$s,this.Xs[0].length*this.size,this.Xs.length*this.size),this.I()}Js(t,s){switch(t){case 2:return C.key;case 0:return C.nt}return(0,d.dt)(s)}update(){if(1<=+this.Os){if(o(a.X.es.k,this.k)){switch(this.itemType){case 2:a.X.Qt++,a.X.es.si=!0,this.Ks=!0;break;case 0:a.X.es.Bs.Ts!==a.X.es.Bs.ii&&(a.X.es.Bs.ei(),this.Ks=!0);break;case 1:this.Ks||!a.X.keys.v&&!a.X.keys.B||(this.Ks=!0,a.X.es.li(this.x,this.y,this.Us,-1),a.X.Ut.update()),this.Ks||!a.X.keys.b&&!a.X.keys.B||(this.Ks=!0,a.X.es.li(this.x,this.y,this.Us,1),a.X.Ut.update())}this.Ks&&(a.X.Nt.ni(),this.Gs())}}else this.Os+=a.X.zt}Ys(t,s){this.k.x=t,this.k.y=s,this.Qs.style.translate=this.k.x-this.Xs[0].length*this.size/2+"px "+(this.k.y-this.Xs.length*this.size/2)+"px"}Gs(){this.o.items.splice(this.o.items.indexOf(this),1),this.Qs.remove()}I(){(0,j.Fs)(this.Zs,0,0,4,4,(0,a.R)(2),"#00000033","#00000033"),(0,g.qs)(this.$s,this.Xs,this.size,null,null,0===this.itemType?{ho:"#edeef7",hi:"#a80000"}:{wc:"#cd9722"})}}class I{constructor(t,s,i,e,h){this.ai=s,this.ui=i,this.ii=t,this.Ts=h||t,this.ri=e,this.ci=(0,g.bs)(s?a.X.Ct:e,"canvas",null,["heartB"]),this.oi=(0,g.bs)(s?a.X.Ct:e,"canvas",null,["heart"]),this.init()}init(){this.I(),this.di=!0,this.update()}ei(){this.Ts+=a.X.rs,this.Ts=this.Ts>this.ii?this.ii:this.Ts,this.I(),this.di=!0}Hs(t){this.Ts-=this.ui?t/2:t,this.Ts=this.Ts<0?0:this.Ts,this.di=!0}update(){this.ai||(this.fi=this.ri.getBoundingClientRect(),this.ci.style.translate=this.fi.width/2-this.oi.width/2+"px "+-(0,a.R)(13)+"px",this.oi.style.translate=this.fi.width/2-this.oi.width/2+(0,a.R)(2)+"px "+-(0,a.R)(13)+"px"),this.di&&(this.di=!1,this.oi.getContext("2d").clearRect(this.Ts*this.oi.width/this.ii,0,this.oi.width,this.oi.height))}I(){(0,g.Ps)(this.ci,(0,a.R)(this.ii/a.X.rs*7+this.ii/a.X.rs+3),(0,a.R)(11)),(0,g.Ps)(this.oi,(0,a.R)(this.ii/a.X.rs*8-1),(0,a.R)(11)),this.ai&&(this.ci.style.translate=(0,a.R)(12)+"px "+(0,a.R)(24)+"px",this.oi.style.translate=(0,a.R)(14)+"px "+(0,a.R)(24)+"px"),this.ci.getContext("2d").clearRect(0,0,this.ci.width,this.ci.height),this.oi.getContext("2d").clearRect(0,0,this.oi.width,this.oi.height),(0,j.Fs)(this.ci,0,0,this.ii/a.X.rs*8+2,10,(0,a.R)(1),"#00000066","#100f0f66");for(let t=0;t<this.ii/a.X.rs;t++)(0,g.qs)(this.ci,C.nt,(0,a.R)(1),2+8*t,2,{ho:"#2f1519",hi:"#100f0f"}),(0,g.qs)(this.oi,C.nt,(0,a.R)(1),8*t,2,{ho:"#edeef7",hi:"#a80000"})}}class F{constructor(t,s,i,e,h,l,n){this.dir=i,this.color=e,this.size=h,this.wi=l,this.Xs=(0,d.ct)(l),this.ai=n,this.mi=this.pi()*(h-1),this.speed=(0,a.R)(this.xi()*(h-1)),this.vi=!1,this.gi=(0,g.bs)(a.X.hs.Ms,"canvas",null,null,this.Xs[0].length*(0,a.R)(h),this.Xs.length*(0,a.R)(h)),l!==d.ut.Tt?(this.gi.style.transformOrigin="50% 50%",this.ki=this.gi.animate({rotate:["0deg","-360deg"],offset:[0,1]},{duration:300}),this.ki.persist()):this.gi.style.transformOrigin="50% 0%",this.k=new w(t,s,this.Xs[0].length*(0,a.R)(h)),this.I(),this.update()}pi(){switch(this.wi){case d.ut.Bt:return 2;case d.ut.yt:return 4}return 3}xi(){switch(this.wi){case d.ut.Bt:return 1;case d.ut.yt:return 2}return 3}update(){switch(this.k.x+=this.speed*this.dir,this.speed=99*this.speed/100,this.wi){case d.ut.Tt:this.k.y-=this.speed,this.gi.style.rotate=45*this.dir+"deg";break;case d.ut.Bt:this.k.y+=this.speed,this.gi.style.rotate=-45*this.dir+"deg"}return this.wi!==d.ut.Tt&&"finished"===this.ki.playState&&this.ki.play(),this.move(),this.ai?a.X.hs.vs.forEach(t=>{!this.vi&&o(t.k,this.k)&&(this.Gs(),a.X.Nt.Vs(),t.Bs.Hs(this.mi))}):!this.vi&&o(a.X.es.k,this.k)&&(this.Gs(),a.X.Ct.parentNode.style.animation="takedmg 400ms ease-in-out",a.X.Nt._s(),a.X.es.Bs.Hs(this.mi)),Math.round(this.speed)<=0&&!this.vi&&this.Gs(),!this.vi}move(){this.gi.style.translate=this.wi===d.ut.Tt?this.k.x+"px "+this.k.y+"px":this.k.x-this.gi.width/2+"px "+(this.k.y-this.gi.height/2)+"px"}Gs(){this.vi=!0,this.gi.remove()}I(){(0,g.qs)(this.gi,this.Xs,(0,a.R)(this.size),null,null,{wc:this.color})}}class P{constructor(t,s,i,e,h,l){this.color=e,this.bi=s,this.Ds=t,this.Mi=i.div,this.size=h||2,this.mi=this.pi()*(this.size-1),this.yi=new Map,this.Xs=(0,d.dt)(this.Ds),this.Si=!1,this.ai=l,this.Ri=(0,g.bs)(this.Mi,"div",null,["weapon"]),this.Oi=(0,g.bs)(this.Ri,"canvas"),this.init()}init(){(0,g.Ps)(this.Oi,this.Xs[0].length*(0,a.R)(this.size),this.Xs.length*(0,a.R)(this.size)),this.Pi=this.Ai(),this.Wi=this.Ti(),this.Bi(),this.Di=this.Ei(),this.I()}Ai(){switch(this.Ds){case d.rt.xt:return this.Oi.animate({transform:["translateY(0)","translateY( "+(0,a.R)(3*this.size)+"px)","translateY(0)"],Ii:["ease-in","ease-out","ease-out"],offset:[0,.5,1]},100);case d.rt.gt:return this.Oi.animate({transform:["rotate(0)","rotate("+360*this.bi+"deg)"],Ii:["ease-in","ease-out"],offset:[0,1]},175);case d.rt.vt:return this.Oi.animate({transform:["translateY(0) scale(1)","translateY( "+(0,a.R)(3*this.size)+"px)  scale(2)","translateY(0) scale(1)"],Ii:["ease-in","ease-out","ease-out"],offset:[0,.5,1]},200);case d.rt.At:return this.Oi.animate({transform:["rotate(0)","rotate("+180*this.bi+"deg)","rotate(0)"],Ii:["ease-in","ease-out","ease-in"],offset:[0,.25,1]},250);case d.rt.St:return this.Oi.animate({transform:["translateY(0) rotate(0)","translateY("+(0,a.R)(8)+"px) rotate("+180*this.bi+"deg)","translateY(0) rotate(0)"],Ii:["ease-in","ease-out","ease-in"],offset:[0,.15,1]},1200);case d.rt.yt:return this.Oi.animate({transform:["rotate(0)","rotate("+225*this.bi+"deg)","rotate(0)"],Ii:["ease-in","ease-out","ease-in"],offset:[0,.35,1]},300);case d.rt.kt:return this.Oi.animate({transform:["translateY(0) rotate(0)","translateY("+(0,a.R)(8)+"px) rotate("+225*this.bi+"deg)","translateY(0) rotate(0)"],Ii:["ease-in","ease-out","ease-in"],offset:[0,.35,1]},300);case d.rt.Rt:return this.Oi.animate({transform:["translateY(0)","translateY( "+(0,a.R)(12*this.size)+"px)","translateY(0)"],Ii:["ease-in","ease-out","ease-out"],offset:[0,.5,1]},500);case d.rt.Ot:return this.Oi.animate({transform:["rotate(0) translateY(0)","rotate("+-20*this.bi+"deg) translateY( "+-(0,a.R)(6*this.size)+"px)","rotate(0) translateY(0)"],Ii:["ease-in","ease-out","ease-out"],offset:[0,.45,1]},500);case d.rt.Mt:return this.Oi.animate({transform:["rotate(0)","rotate("+-180*this.bi+"deg)","rotate(0)"],Ii:["ease-in","ease-out","ease-in"],offset:[0,.4,1]},750);case d.rt.Pt:return this.Oi.animate({transform:["translateY(0)","translateY( "+(0,a.R)(4*this.size)+"px)","translateY(0)"],Ii:["ease-in","ease-out","ease-out"],offset:[0,.1,1]},900);case d.rt.Wt:return this.Oi.animate({transform:["rotate(0)","rotate("+360*this.bi+"deg)"],Ii:["ease-in","ease-out"],offset:[0,1]},1e3)}}Ti(){switch(this.Ds){case d.rt.xt:return{x:(0,a.R)(-1===this.bi?-this.size:2*this.size),y:(0,a.R)(4.5*this.size)};case d.rt.vt:return{x:(0,a.R)(2*this.size*this.bi),y:(0,a.R)(3*this.size)};case d.rt.At:return{x:(0,a.R)(3*this.size*this.bi),y:-(0,a.R)(2),r:-90};case d.rt.Wt:return{x:(0,a.R)(-1===this.bi?-10*this.size:8*this.size),y:-(0,a.R)(-1===this.bi?.5*this.size:5.5*this.size),r:45*this.bi};case d.rt.kt:case d.rt.Rt:return{x:(0,a.R)(-1===this.bi?-2*this.size:4*this.size),y:-(0,a.R)(this.size)};case d.rt.Ot:return{x:(0,a.R)(-1===this.bi?-4*this.size:4*this.size),y:-(0,a.R)(8*this.size),r:0};case d.rt.Mt:return{x:(0,a.R)(-1===this.bi?-4*this.size:9*this.size),y:-(0,a.R)(-1===this.bi?8*-this.size:6*-this.size),r:135*this.bi};case d.rt.yt:return{x:(0,a.R)(-1===this.bi?-6*this.size:7*this.size),y:-(0,a.R)(-1===this.bi?2*-this.size:0),r:45*this.bi};case d.rt.gt:return{x:(0,a.R)(-1===this.bi?-5*this.size:6*this.size),y:-(0,a.R)(-1===this.bi?4*-this.size:2*-this.size),r:45*this.bi};case d.rt.Pt:return{x:(0,a.R)(-1===this.bi?-10*this.size:8*this.size),y:(0,a.R)(-1===this.bi?2*this.size:3*-this.size),r:45*this.bi};case d.rt.St:return{x:(0,a.R)(-1===this.bi?-6*this.size:8*this.size),y:(0,a.R)(-1===this.bi?2*this.size:+this.size),r:45*this.bi}}}Bi(){switch(this.Ri.style.translate=this.Wi.x+"px "+this.Wi.y+"px",this.Ds){case d.rt.At:this.Oi.style.transformOrigin="50% 90%";break;case d.rt.Wt:case d.rt.Mt:case d.rt.yt:case d.rt.gt:case d.rt.Pt:case d.rt.kt:case d.rt.St:case d.rt.Ot:this.Ri.style.rotate=this.Wi.r+"deg",this.Oi.style.transformOrigin="50% 100%"}}Ei(){switch(this.Ds){case d.rt.xt:case d.rt.vt:return[{x:this.Wi.x,y:this.Wi.y+this.Xs.length*(0,a.R)(this.size)},{x:this.Wi.x+this.Xs[0].length*(0,a.R)(this.size),y:this.Wi.y+this.Xs.length*(0,a.R)(this.size)}];case d.rt.At:return[{x:this.Wi.x+this.Xs[0].length/2*(0,a.R)(this.size),y:this.Wi.y+90*this.Xs.length*(0,a.R)(this.size)/100}];case d.rt.Wt:case d.rt.Mt:case d.rt.yt:case d.rt.gt:var t=this.Yi(this.Wi.x,this.Wi.y,this.Xs.length*(0,a.R)(this.size),this.Wi.r+72.5),s=this.Yi(this.Wi.x,this.Wi.y,this.Xs[0].length/2*(0,a.R)(this.size),this.Wi.r);return[{x:t.x,y:t.y},{x:s.x,y:s.y}];case d.rt.Ot:return[{x:this.Wi.x+this.Xs[0].length/2*(0,a.R)(this.size),y:this.Wi.y+this.Xs.length*(0,a.R)(this.size)/2},{x:this.Wi.x+this.Xs[0].length/2*(0,a.R)(this.size),y:this.Wi.y}];case d.rt.Rt:return[{x:this.Wi.x+(0,a.R)(this.size/2),y:this.Wi.y+this.Xs.length*(0,a.R)(this.size)/2},{x:this.Wi.x+(0,a.R)(this.size/2),y:this.Wi.y+this.Xs.length*(0,a.R)(this.size)}]}}qi(t,s){switch(this.Ds){case d.rt.xt:return[{x:t.x+this.Di[0].x,y:t.y+this.Di[0].y+1.5*s.f},{x:t.x+this.Di[1].x,y:t.y+this.Di[1].y+1.5*s.f}];case d.rt.vt:return[{x:t.x+this.Di[0].x-(0,a.R)(this.size)*(s.m11-1),y:t.y+this.Di[0].y+s.f*s.m11},{x:t.x+this.Di[1].x+(0,a.R)(this.size)*(s.m11-1),y:t.y+this.Di[1].y+s.f*s.m11}];case d.rt.At:var i=this.Yi(t.x+this.Di[0].x,t.y+this.Di[0].y,this.Xs.length*(0,a.R)(this.size),180*Math.atan2(s.b,s.a)/Math.PI+this.Wi.r);return[{x:t.x+this.Di[0].x,y:t.y+this.Di[0].y},{x:i.x,y:i.y}];case d.rt.Wt:case d.rt.Mt:case d.rt.yt:case d.rt.gt:return i=this.Yi(t.x+this.Di[0].x,t.y+this.Di[0].y,this.Xs.length*(0,a.R)(this.size),180*Math.atan2(s.b,s.a)/Math.PI+this.Wi.r-90),[{x:t.x+this.Di[0].x,y:t.y+this.Di[0].y},{x:i.x,y:i.y}];case d.rt.Ot:var i=this.Yi(t.x+this.Di[1].x,t.y+this.Di[1].y+this.Xs.length*(0,a.R)(this.size)+1.1*s.f,this.Xs.length*(0,a.R)(this.size),180*Math.atan2(s.b,s.a)/Math.PI+this.Wi.r-90),e=this.Yi(t.x+this.Di[1].x,t.y+this.Di[1].y+this.Xs.length*(0,a.R)(this.size)+1.1*s.f,this.Xs.length*(0,a.R)(this.size)/2,180*Math.atan2(s.b,s.a)/Math.PI+this.Wi.r-90);return[{x:e.x,y:e.y},{x:i.x,y:i.y}];case d.rt.Rt:return[{x:t.x+this.Di[0].x,y:t.y+this.Di[0].y+1.1*s.f},{x:t.x+this.Di[1].x,y:t.y+this.Di[1].y+1.1*s.f}]}}Yi(t,s,i,e){return{x:Math.round(t+i*Math.cos(e*Math.PI/180)),y:Math.round(s+i*Math.sin(e*Math.PI/180))}}update(){if(this.Si&&!(0,d.ft)(this.Ds)){let t=new WebKitCSSMatrix(window.getComputedStyle(this.Oi).transform),s=this.qi(this.Mi.getBoundingClientRect(),t);this.ai?a.X.hs.vs.forEach(t=>X(s,t.k)&&this.ji(t)):X(s,a.X.es.k)&&this.ji(a.X.es)}}ji(t){this.yi.has(t)||(this.ai?a.X.Nt.Vs():(a.X.Ct.parentNode.style.animation="takedmg 400ms ease-in-out",a.X.Nt._s()),this.yi.set(t,!0),t.Bs.Hs(this.mi),this.Ds===d.rt.vt&&t.Ys(t.k.x+(0,a.R)(6*this.bi),t.k.y+(0,a.R)(12)))}pi(){switch(this.Ds){case d.rt.xt:return 1;case d.rt.vt:return 2;case d.rt.At:case d.rt.gt:return 3;case d.rt.yt:return 5;case d.rt.Rt:return 6;case d.rt.Mt:return 7;case d.rt.Ot:return 8;case d.rt.Wt:return 9}}action(){this.Si||(a.X.Nt.Li(),this.Si=!0,(0,d.ft)(this.Ds)&&this.Gi(),this.Pi=this.Ai(),this.Pi.finished.then(()=>{this.Si=!1,this.yi.clear()}))}Gi(){var t=this.Oi.getBoundingClientRect();a.X.hs.zi.push(new F(t.x+t.width/2,t.y+t.height/2,this.bi,this.color,this.size,(0,d.ot)(this.Ds),this.ai))}I(){(0,g.qs)(this.Oi,this.Xs,(0,a.R)(this.size),null,null,{wc:this.color})}Gs(){this.Ri.remove()}}class ${constructor(t,s,i,e,h){this.Ni=!0,this.o=t,this.Vi=e,this.Hi=h||E[0===e?(0,n.N)(3):(0,n._i)(1,2)],this.Ci=0===e?2:4,this.Fi=1+(0,n._i)(-5,0)/10,this.Ki=new Map,this.Ui=0,this.div=(0,g.bs)(t.Ms,"div",null,["enemy"]),this.Zs=(0,g.bs)(this.div,"canvas"),this.Xi=(0,g.bs)(this.div,"canvas"),this.Bs=new I(this.Ji()*a.X.rs,!1,1===e,this.div),this.init(s,i)}init(t,s){this.Qi=this.Ci*this.Zi(),this.k=new w(t,s,(0,a.R)(2.5*this.Ci)),this.ti=new w(this.k.x,this.k.y,this.k.r),this.$i=new w(this.k.x,this.k.y,this.k.r),(0,g.Ps)(this.Zs,7*(0,a.R)(this.Ci),6*(0,a.R)(this.Ci)),this.Zs.style.translate=-(0,a.R)(2*this.Ci)+"px "+(0,a.R)(4*this.Ci)+"px",(0,g.Ps)(this.Xi,C.at[0].length*(0,a.R)(this.Ci),C.at.length*(0,a.R)(this.Ci)),this.th(),this.sh=this.Xi.animate(z(),{duration:160}),this.Bs.init(),this.I()}Zi(){switch(this.Hi){case e:return 8;case r:return 16}return 19}th(){var t,s;this.ih?(this.ih.init(),this.hh.init()):(t=a.X.et+5>=Object.keys(d.rt).length?Object.keys(d.rt).length-1:a.X.et+5,s=0===(0,n.N)(2),a.X.et<4&&1!==this.Vi?(this.ih=new P(s?d.rt.xt:(0,n._i)(0,t),-1,this,"#3e3846",this.Ci),this.hh=new P(s?(0,n._i)(0,t):d.rt.xt,1,this,"#3e3846",this.Ci)):a.X.et<9?(this.ih=new P(s?d.rt.vt:(0,n._i)(2,t),-1,this,"#3e3846",this.Ci),this.hh=new P(s?(0,n._i)(2,t):d.rt.vt,1,this,"#3e3846",this.Ci)):(this.ih=new P((0,n._i)(2,t),-1,this,"#3e3846",this.Ci),this.hh=new P((0,n._i)(2,t),1,this,"#3e3846",this.Ci))),this.eh=this.lh(this.ih),this.nh=this.lh(this.hh),this.ah=this.ih.Ds===d.rt.xt||this.ih.Ds===d.rt.vt?this.hh:this.ih}lh(t){return(0,a.R)(t.Xs.length*t.size)*(t.Ds===d.rt.xt?4:(0,d.ft)(t.Ds)?16:2)}Ji(){return a.X.et<3?0===this.Vi?1:6:a.X.et<5?0===this.Vi?(0,n._i)(1,2):(0,n._i)(8,10):0===this.Vi?(0,n._i)(2,3):(0,n._i)(12,14)}update(){0<this.Bs.Ts?(this.uh(),this.rh(),this.Bs.update()):this.Ni&&(1===this.Vi?a.X.$t++:a.X.Zt++,a.X.Nt.oh(),this.Bs.update(),this.Ni=!1,this.div.animate({rotate:["0deg","90deg"],Ii:["ease-in-out","ease-in-out"],offset:[0,1]},{duration:500,fill:"forwards"}).finished.then(()=>{if(1===this.Vi)for(let t=(0,n._i)(1,2);0<t;t--)this.o.items.push(new O(a.X.jt/2+(0,a.R)((0,n._i)(-32,32)),a.X.Lt/2+(0,a.R)((0,n._i)(-32,32)),0,null,this.o));(0,n.N)(100)<10&&this.ah.Ds!==d.rt.xt&&(a.X.Nt.dh(),a.X.hs.items.push(new O(this.k.x,this.k.y,1,this.ah.Ds,a.X.hs))),this.Gs()}))}uh(){let t=this.k.x,s=this.k.y,i=(this.fh(),0);for(;(this.o.vs.find(t=>t!==this&&o(this.$i,t.k))||this.o.xs.find(t=>c(this.$i,t.k))||this.o.wh.find(t=>c(this.$i,t.k)))&&(this.fh(),!(10<++i)););var e=this.$i.x-this.k.x,h=this.$i.y-this.k.y;(e<-(0,a.R)(4)||e>(0,a.R)(4))&&this.Ki.set(0<e?"d":"a",!0),(h<-(0,a.R)(4)||h>(0,a.R)(4))&&this.Ki.set(0<h?"s":"w",!0),0<this.Ki.size&&"finished"===this.sh.playState&&(this.sh=this.Xi.animate(z(),{duration:160}),this.hh.Si||this.hh.Oi.animate(M(),{duration:160}),this.ih.Si||this.ih.Oi.animate(L(),{duration:160}),a.X.Nt.mh()),e=(0,a.R)(1<this.Ki.size?this.Fi/1.4142:this.Fi),this.Ki.has("d")&&(t+=e),this.Ki.has("a")&&(t-=e),this.Ki.has("w")&&(s-=e),this.Ki.has("s")&&(s+=e),this.Ki.clear(),this.Ys(this.k.x,s),this.Ys(t,this.k.y)}fh(){switch(this.Hi){case e:f(this.k,a.X.es.k)<(0,a.R)(this.Qi)?o(this.k,this.$i)||1<=this.Ui/.4?(this.ph(this.Qi),this.Ui=0):this.Ui+=a.X.zt:(this.$i.x=a.X.es.k.x,this.$i.y=a.X.es.k.y);break;case r:1<=this.Ui/.2?(o(this.k,this.$i)||(0,n.N)(100)<66?this.ph(this.Qi):(this.$i.x=this.k.x,this.$i.y=this.k.y),this.Ui=0):this.Ui+=a.X.zt;break;case i:var t,s;1<=this.Ui/.6?(f(this.k,a.X.es.k)<=(0,a.R)(this.Qi)?(t=Math.round(this.k.x-a.X.es.k.x),s=Math.round(this.k.y-a.X.es.k.y),this.$i.x=this.k.x+(Math.abs(t)<(0,a.R)(20)?(0,n._i)(2*-this.Qi,2*this.Qi):t),this.$i.y=this.k.y+(Math.abs(s)<(0,a.R)(20)?(0,n._i)(2*-this.Qi,2*this.Qi):s)):0===(0,n.N)(2)?this.ph(this.Qi):(this.$i.x=this.k.x,this.$i.y=this.k.y),this.Ui=0):this.Ui+=a.X.zt}}ph(t){switch(this.$i.x=a.X.es.k.x,this.$i.y=a.X.es.k.y,this.ah.Ds){case d.rt.xt:case d.rt.vt:case d.rt.Rt:this.$i.x+=(0,a.R)((0,n._i)(-t,t)),this.$i.y+=(0,a.R)((0,n._i)(-t,-t/8));break;case d.rt.At:case d.rt.yt:case d.rt.St:case d.rt.kt:case d.rt.Pt:case d.rt.gt:this.$i.x+=(0,a.R)(0<this.ah.bi?(0,n._i)(-t,-t/8):(0,n._i)(t/8,t)),this.$i.y+=(0,a.R)((0,n._i)(-t,t));break;case d.rt.Mt:case d.rt.Ot:this.$i.x+=(0,a.R)(0<this.ah.bi?(0,n._i)(-t,-t/8):(0,n._i)(t/8,t)),this.$i.y+=(0,a.R)((0,n._i)(t/8,t));break;case d.rt.Wt:this.$i.x+=(0,a.R)((0,n._i)(-t,t)),this.$i.y+=(0,a.R)((0,n._i)(-t,t))}}Ys(t,s,i){this.ti.x=t,this.ti.y=s,i?this.move(this.ti):R(this.ti,this.o.xh,this.o.gh,t=>this.move(t),this)}move(t){this.k.x=t.x,this.k.y=t.y,this.div.style.translate=this.k.x-C.at[0].length*(0,a.R)(this.Ci)/2+"px "+(this.k.y-C.at.length*(0,a.R)(this.Ci)/4*3)+"px"}rh(){f(a.X.es.k,this.k)<this.eh&&(0,n.N)(100)<this.kh()&&this.ih.action(),f(a.X.es.k,this.k)<this.nh&&(0,n.N)(100)<this.kh()&&this.hh.action(),this.ih.update(),this.hh.update()}kh(){switch(this.Hi){case e:return 75;case r:return 50}return 25}I(){(0,j.Fs)(this.Zs,0,0,6,5,(0,a.R)(this.Ci),"#00000033","#00000033"),(0,g.qs)(this.Xi,C.at,(0,a.R)(this.Ci),0,0,{hd:"#999a9e",hl:"#686b7a",cm:this.Hi});var t=this.Xi.getBoundingClientRect();this.div.style.width=t.width+"px",this.div.style.height=t.height+"px",this.div.style.transformOrigin="70% 95%"}Gs(){this.o.vs.splice(this.o.vs.indexOf(this),1),this.div.remove()}}class S{constructor(t,s){this.xh=t,this.gh=s,this.x=0,this.y=0,this.bh=0,this.items=[],this.vs=[],this.zi=[],this.Ms=(0,g.bs)(a.X.Ct,"div",null,["room"]),this.L=(0,g.bs)(this.Ms,"canvas"),this.Y=(0,g.bs)(this.Ms,"canvas"),this.Cs=(0,g.bs)(this.Ms,"canvas"),this.Mh(),this.yh(),this.Sh()}Mh(){var i,e;this.$=[],this.Rh=[],this.ws=[],this.gs=[],this.Oh=[];for(let s=0;s<a.X.U;s++){this.$.push([]);for(let t=0;t<a.X.J;t++)e=s<=1||t<=1||s>=a.X.U-2||t>=a.X.J-2?u.j.q:u.j.tt,i=new p.h(this,t,s,e),this.$[s].push(i),(e===u.j.q?this.ws:this.Rh).push(i)}}Sh(){for(var t=10<(t=(0,n._i)(a.X.et,a.X.et+1))?10:t;this.vs.length!==t;){let s=new $(this,(0,n._i)(a.X.jt/3,a.X.jt/3*2),(0,n._i)(a.X.Lt/3,a.X.Lt/3*2),0);this.vs.find(t=>o(s.k,t.k))||this.xs.find(t=>c(s.k,t.k))||this.wh.find(t=>c(s.k,t.k))?s.div.remove():this.vs.push(s)}}yh(){this.wh=[],this.xs=[];for(let s=0;s<a.X.U;s++)for(let t=0;t<a.X.J;t++){var i;!(3<s&&s<a.X.U-4&&3<t&&t<a.X.J-4)||6<s&&s<a.X.U-7&&6<t&&t<a.X.J-7||s>a.X.U/2-3&&s<a.X.U/2+3&&t>a.X.J/2-3&&t<a.X.J/2+3||(5<=(i=(0,n.N)(100))&&i<15&&this.xs.push(new B(this,t,s)),i<5&&this.wh.push(new q(this,t,s)))}}Ph(t){switch(this.bh=t,this.bh){case 2:this.items.push(new O(a.X.jt/2,a.X.Lt/2,2,null,this));break;case 1:this.Ah(),this.items.push(new O(a.X.jt/2+(0,a.R)((0,n._i)(-32,32)),a.X.Lt/2+(0,a.R)((0,n._i)(-32,32)),0,null,this));const t=a.X.et+6>=Object.keys(d.rt).length?Object.keys(d.rt).length-1:a.X.et+6;this.items.push(new O(a.X.jt/2,a.X.Lt/2,1,(0,n._i)(t-3,t),this));break;case 3:this.Ah(),this.items.push(new _(a.X.jt/2,a.X.Lt/2,this)),this.vs.push(new $(this,a.X.jt/2,a.X.Lt/2,1))}}Ah(){for(;0<this.vs.length;)this.vs[0].Gs()}Wh(){this.wh=this.wh.filter(t=>this.Th(t.k)),this.xs=this.xs.filter(t=>this.Th(t.k)),this.Cs.getContext("2d").clearRect(0,0,this.Cs.width,this.Cs.height),this.wh.forEach(t=>t.I()),this.xs.forEach(t=>t.I())}Th(t){return t.x<a.X.jt/2-(0,a.R)(64)||t.x>a.X.jt/2+(0,a.R)(64)}Bh(){this.Ms.classList.remove("hidden"),this.Mh(),(0,g.Ps)(this.Cs,(0,a.R)(a.X.Ht),(0,a.R)(a.X._t)),this.Cs.getContext("2d").clearRect(0,0,this.Cs.width,this.Cs.height),this.wh.forEach(t=>{var s=a.X.ds(t.k.x,t.k.y);t.init(s.x,s.y),t.I()}),this.xs.forEach(t=>{var s=a.X.ds(t.k.x,t.k.y);t.init(s.x,s.y),t.I()}),this.zi.forEach(t=>t.Gs()),this.items.forEach(t=>{var s=a.X.ds(t.x,t.y);t.init(s.x,s.y)}),this.vs.forEach(t=>{var s=a.X.ds(t.k.x,t.k.y);t.init(s.x,s.y)}),this.Ms.classList.add("hidden")}Dh(i,e,t,h,l,n,a){var r;for(let s=Math.round(t);s<=Math.round(h);s++)for(let t=Math.round(i);t<=Math.round(e);t++)r=this.$[s][t],this.ws.splice(this.ws.indexOf(r),1),r.O=u.j._,r.P=a,this.gs.push(r),this.$[s][t]=new T(this,r.p,r.g,u.j.tt,l,n),this.Rh.push(this.$[s][t]),(-1===l&&0===t||1===l&&t===this.$[0].length-1||-1===n&&0===s||1===n&&s===this.$.length-1)&&this.Oh.push(this.$[s][t])}update(t,e){if(void 0!==t&&void 0!==e){let s=t-this.x,i=e-this.y;this.x=t,this.y=e,this.Ms.style.translate=this.x+"px "+this.y+"px",this.vs.forEach(t=>t.Ys(t.k.x+s,t.k.y+i,!0)),this.items.forEach(t=>t.Ys(t.k.x+s,t.k.y+i)),this.zi.forEach(t=>t.Gs()),this.zi=[]}else this.items.forEach(t=>t.update()),this.vs.forEach(t=>t.update()),this.zi=this.zi.filter(t=>t.update()),this.wh.forEach(t=>t.update());0===this.vs.length&&this.Eh()}Eh(){const t=!!(a.X.keys.v||a.X.keys.V||a.X.keys.b||a.X.keys.B),i=t&&a.X.es.si&&this.Ih(h.s.C),e=t&&this.Ih(h.s.F);0<this.gs.filter(t=>{var s=t.O;if(t.O!==u.j.it)switch(t.P){case h.s.C:i&&(t.O=u.j.it,a.X.Nt.Yh());break;case h.s.F:e&&(t.O=u.j.it,a.X.Nt.Yh());break;default:t.O=u.j.it,a.X.Nt.Yh()}return s!==t.O}).length&&(this.Y.getContext("2d").clearRect(0,0,this.Y.width,this.Y.height),this.gs.forEach(t=>t.I()))}Ih(s){return!!this.gs.find(t=>t.P===s&&f(a.X.es.k,t.k)<(0,a.R)(32))}I(){(0,g.Ps)(this.L,(0,a.R)(a.X.Ht),(0,a.R)(a.X._t)),(0,g.Ps)(this.Y,(0,a.R)(a.X.Ht),(0,a.R)(a.X._t)),(0,g.Ps)(this.Cs,(0,a.R)(a.X.Ht),(0,a.R)(a.X._t)),this.Rh.forEach(t=>t.I()),this.qh(),this.ws.forEach(t=>t.I()),this.gs.forEach(t=>t.I()),this.wh.forEach(t=>t.I()),this.xs.forEach(t=>t.I())}qh(){var t=this.L.getContext("2d");t.fillStyle="#00000033",t.fillRect(0,0,(0,a.R)(34),(0,a.R)(a.X._t)),t.fillRect((0,a.R)(34),0,(0,a.R)(a.X.Ht),(0,a.R)(34)),t.fillRect(this.$[0][this.$[0].length-2].k.x-(0,a.R)(2),(0,a.R)(34),(0,a.R)(34),(0,a.R)(a.X._t)),t.fillRect((0,a.R)(34),this.$[this.$.length-2][0].k.y-(0,a.R)(2),this.$[this.$.length-2][this.$[0].length-4].k.x-(0,a.R)(4),(0,a.R)(34))}}class U{constructor(t){this.size=t,this.ps=[],this.jh=[]}init(){this.Lh(),this.Gh(),this.zh(),this.I(),this.Nh()}Lh(){for(let s=0;s<2*this.size;s++){this.ps.push([]);for(let t=0;t<2*this.size;t++)this.ps[s].push(null)}}Gh(){let t=Math.floor(this.ps.length/2),s=Math.floor(this.ps.length/2);for(;this.jh.length!=this.size;)switch(null==this.ps[s][t]&&(this.ps[s][t]=new S(t,s),this.jh.push(this.ps[s][t])),(0,n.N)(4)){case 0:0<=s-1&&s--;break;case 1:s+1<this.ps.length&&s++;break;case 2:0<=t-1&&t--;break;case 3:t+1<this.ps.length&&t++}this.Vh(2),this.Vh(1),this.Vh(3)}Vh(t){let s=(0,n.N)(this.ps.length),i=(0,n.N)(this.ps.length);for(;!this.Hh(s,i);)s=(0,n.N)(this.ps.length),i=(0,n.N)(this.ps.length);this.ps[i][s]=new S(s,i),this.ps[i][s].Ph(t),this.jh.push(this.ps[i][s])}Hh(s,i){if(null!=this.ps[i][s])return!1;{let t=0;return 0<=i-1&&null!=this.ps[i-1][s]&&t++,i+1<this.ps.length&&null!=this.ps[i+1][s]&&t++,0<=s-1&&null!=this.ps[i][s-1]&&t++,s+1<this.ps.length&&null!=this.ps[i][s+1]&&t++,(1==t||2==t)&&!this._h(s,i)}}_h(i,e){for(let s=-1;s<=1;s++)for(let t=-1;t<=1;t++)if(0<=i+t&&i+t<this.ps.length&&0<=e+s&&e+s<this.ps.length&&null!=this.ps[e+s][i+t]&&l(this.ps[e+s][i+t].bh))return!0;return!1}zh(){let s,i,e;this.jh.forEach(t=>{s=t.$[0].length,i=t.$.length,0<=t.gh-1&&this.ps[t.gh-1][t.xh]&&(e=this.Ch((l(this.ps[t.gh][t.xh].bh)?this.ps[t.gh]:this.ps[t.gh-1])[t.xh].bh),t.Dh(s/2-3,s/2+1,0,0,0,-1,e),t.Dh(s/2-2,s/2,1,1,0,-1,e)),t.gh+1<this.ps.length&&this.ps[t.gh+1][t.xh]&&(e=this.Ch((l(this.ps[t.gh][t.xh].bh)?this.ps[t.gh]:this.ps[t.gh+1])[t.xh].bh),t.Dh(s/2-2,s/2,i-2,i-2,0,1,e),t.Dh(s/2-3,s/2+1,i-1,i-1,0,1,e)),0<=t.xh-1&&this.ps[t.gh][t.xh-1]&&(e=this.Ch((l(this.ps[t.gh][t.xh].bh)?this.ps[t.gh][t.xh]:this.ps[t.gh][t.xh-1]).bh),t.Dh(0,0,i/2-3,i/2+1,-1,0,e),t.Dh(1,1,i/2-2,i/2,-1,0,e)),t.xh+1<this.ps[0].length&&this.ps[t.gh][t.xh+1]&&(e=this.Ch((l(this.ps[t.gh][t.xh].bh)?this.ps[t.gh][t.xh]:this.ps[t.gh][t.xh+1]).bh),t.Dh(s-2,s-2,i/2-2,i/2,1,0,e),t.Dh(s-1,s-1,i/2-3,i/2+1,1,0,e))})}Ch(t){switch(t){case 1:return h.s.C;case 3:return h.s.F}return h.s.T}I(){this.jh.forEach(t=>t.I())}Nh(){this.jh.forEach(t=>t.Ms.classList.add("hidden"))}}class A{constructor(){this.si=!1,this.Ni=!0,this.div=(0,g.bs)(a.X.Ct,"div",null,["player"]),this.Zs=(0,g.bs)(this.div,"canvas"),this.Fh=(0,g.bs)(this.div,"canvas"),this.Kh=(0,g.bs)(a.X.Ct,"canvas",null,["hidden"]),this.Bs=new I(3*a.X.rs,!0,!1,this.Fh,a.X.ls),this.init(a.X.jt/2,a.X.Lt/2)}init(t,s){this.Uh=(0,a.R)(2),this.k=new w(t,s,(0,a.R)(4)),this.ti=new w(this.k.x,this.k.y,this.k.r),(0,g.Ps)(this.Zs,7*(0,a.R)(2),6*(0,a.R)(2)),this.Zs.style.translate=-(0,a.R)(4)+"px "+(0,a.R)(8)+"px",(0,g.Ps)(this.Fh,C.at[0].length*(0,a.R)(2),C.at.length*(0,a.R)(2)),this.Es?(this.Es.init(),this.Is.init()):(this.Es=new P(a.X.ns||d.rt.xt,-1,this,"#cd9722",null,!0),this.Is=new P(a.X.us||d.rt.xt,1,this,"#cd9722",null,!0)),this.sh=this.Fh.animate(z(),{duration:160,fill:"forwards"}),this.Bs.init(),(0,g.Ps)(this.Kh,C.key[0].length*(0,a.R)(2)+(0,a.R)(4),C.key.length*(0,a.R)(2)+(0,a.R)(4)),this.Kh.style.translate=(0,a.R)(12)+"px "+(0,a.R)(37)+"px",this.I()}li(t,s,i,e){0<e?(this.Xh(t,s,this.Is),this.Is=new P(i,e,this,"#cd9722",null,!0)):(this.Xh(t,s,this.Es),this.Es=new P(i,e,this,"#cd9722",null,!0))}Xh(t,s,i){i.Ds!=d.rt.xt&&a.X.hs.items.push(new O(t,s,1,i.Ds,a.X.hs)),i.Gs()}update(){0<this.Bs.Ts?(this.si&&this.Kh.classList.remove("hidden"),this.uh(),this.rh(),this.Bs.update()):this.Ni&&(this.Bs.update(),this.Ni=!1,this.div.animate({rotate:["0deg","90deg"],Ii:["ease-in-out","ease-in-out"],offset:[0,1]},{duration:500,fill:"forwards"}).finished.then(()=>{a.X.Nt.Jh(),a.X.ts=!0}))}uh(){let t=this.k.x,s=this.k.y,i=Object.keys(a.X.keys).filter(t=>("w"===t||"s"===t||"a"===t||"d"===t||"W"===t||"S"===t||"A"===t||"D"===t||"ArrowUp"===t||"ArrowDown"===t||"ArrowLeft"===t||"ArrowRight"===t)&&a.X.keys[t]);0<i.length&&"finished"===this.sh.playState&&(this.sh.play(),this.Is.Oi.animate(M(),{duration:160}),this.Es.Oi.animate(L(),{duration:160}),a.X.Nt.mh()),i=1<i.length?this.Uh/1.4142:this.Uh,(a.X.keys.d||a.X.keys.D||a.X.keys.ArrowRight)&&(t+=i),(a.X.keys.a||a.X.keys.A||a.X.keys.ArrowLeft)&&(t-=i),(a.X.keys.w||a.X.keys.W||a.X.keys.ArrowUp)&&(s-=i),(a.X.keys.s||a.X.keys.S||a.X.keys.ArrowDown)&&(s+=i),this.Ys(this.k.x,s),this.Ys(t,this.k.y)}Ys(t,s,i){this.ti.x=t,this.ti.y=s,i?this.move(this.ti):R(this.ti,a.X.hs.xh,a.X.hs.gh,t=>this.move(t))}move(t){this.k.x=t.x,this.k.y=t.y,this.div.style.translate=this.k.x-C.at[0].length*(0,a.R)(2)/2+"px "+(this.k.y-C.at.length*(0,a.R)(2)/4*3)+"px"}rh(){(a.X.keys.v||a.X.keys.V)&&this.Es.action(),(a.X.keys.b||a.X.keys.B)&&this.Is.action(),this.Es.update(),this.Is.update()}I(){(0,j.Fs)(this.Zs,0,0,6,5,(0,a.R)(2),"#00000033","#00000033"),(0,g.qs)(this.Fh,C.at,(0,a.R)(2),0,0,{hd:"#cd9722",hl:"#ffff57",cm:"#9e6800"}),(0,j.Fs)(this.Kh,0,0,4,8,(0,a.R)(2),"#00000066","#100f0f66"),(0,g.qs)(this.Kh,C.key,(0,a.R)(2),1,1);var t=this.Fh.getBoundingClientRect();this.div.style.width=t.width+"px",this.div.style.height=t.height+"px",this.div.style.transformOrigin="70% 95%"}}class H{constructor(){this.Qh=(0,g.bs)(a.X.Ct,"canvas","minimap"),this.Zh={},this.update()}update(){(0,g.Ps)(this.Qh,(0,a.R)(46),(0,a.R)(46)),this.Qh.style.translate=a.X.jt-this.Qh.width-(0,a.R)(12)+"px "+(0,a.R)(24)+"px",this.Zh[a.X.hs.gh+"|"+a.X.hs.xh]||(this.Zh[a.X.hs.gh+"|"+a.X.hs.xh]=!0),this.Qh.getContext("2d").clearRect(0,0,this.Qh.width,this.Qh.height),(0,j.Fs)(this.Qh,0,0,22,22,(0,a.R)(2),"#00000066","#100f0f66");for(let s=-2;s<=2;s++)for(let t=-2;t<=2;t++)0===t&&0===s||this.$h(a.X.hs.xh+t,a.X.hs.gh+s)&&(this.Zh[a.X.hs.gh+s+"|"+(a.X.hs.xh+t)]?this.te(t,s,"#703a33","#2f1519"):a.X.ss.ps[a.X.hs.gh+s][a.X.hs.xh+t]&&this.se(a.X.hs.xh+t,a.X.hs.gh+s)&&this.te(t,s,"#703a3366","#2f151966"));this.te(0,0,"#ffff57","#cd9722")}te(t,s,i,e){(0,j.Fs)(this.Qh,4*(t+2)+1,4*(s+2)+1,4,4,(0,a.R)(2),i,e),this.ie(t,s)}ie(t,s){var i=a.X.ss.ps[a.X.hs.gh+s][a.X.hs.xh+t].bh;l(i)&&2!==i&&(this.Qh.getContext("2d").fillStyle=3===i?"#a80000":1===i?"#ffff57":"",this.Qh.getContext("2d").fillRect((t+2)*(0,a.R)(8)+(0,a.R)(5),(s+2)*(0,a.R)(8)+(0,a.R)(5),(0,a.R)(4),(0,a.R)(4)))}$h(t,s){return 0<=s&&s<a.X.ss.ps.length&&0<=t&&t<a.X.ss.ps[0].length}se(t,s){return this.$h(t-1,s)&&this.Zh[s+"|"+(t-1)]||this.$h(t+1,s)&&this.Zh[s+"|"+(t+1)]||this.$h(t,s-1)&&this.Zh[s-1+"|"+t]||this.$h(t,s+1)&&this.Zh[s+1+"|"+t]}}class V{constructor(){this.he=(0,g.bs)(a.X.Ct,"canvas",null,null,null,null,a.X.It,null,t=>{var s=!0!==a.X.keys.v;a.X.keys.v=!0,s&&this.update()},t=>{a.X.keys.v=!1,this.update()}),this.ee=(0,g.bs)(a.X.Ct,"canvas",null,null,null,null,a.X.It,null,t=>{var s=!0!==a.X.keys.b;a.X.keys.b=!0,s&&this.update()},t=>{a.X.keys.b=!1,this.update()}),this.update()}update(){(0,g.Ps)(this.he,(0,a.R)(30),(0,a.R)(30)),(0,g.Ps)(this.ee,(0,a.R)(30),(0,a.R)(30)),this.ee.style.translate=a.X.jt-this.ee.width-(0,a.R)(12)+"px "+(a.X.Lt-this.ee.height-(0,a.R)(12))+"px",this.he.style.translate=a.X.jt-this.ee.width-(0,a.R)(54)+"px "+(a.X.Lt-this.ee.height-(0,a.R)(12))+"px",this.le(this.he,a.X.It?"A":"V",a.X.es.Es.Ds,a.X.keys.v||a.X.keys.V),this.le(this.ee,"B",a.X.es.Is.Ds,a.X.keys.b||a.X.keys.B)}le(t,s,i,e){t.getContext("2d").clearRect(0,0,t.width,t.height),(0,j.Fs)(t,0,0,14,14,(0,a.R)(2),e?"#ffffffaa":"#00000066",e?"#ffffff66":"#100f0f66"),this.ne(t,i),(0,j.Fs)(t,9,9,5,5,(0,a.R)(2),"#ffff57","#100f0f66"),(0,m.js)((0,m.Ls)(s),t,(0,a.R)(1),24,24,"#edeef7",1)}ne(t,s){let i,e,h;switch(s){case d.rt.St:case d.rt.kt:case d.rt.xt:i=6,e=1,h=1;break;case d.rt.yt:case d.rt.vt:i=5,e=1,h=1;break;case d.rt.At:i=5,e=1,h=-2;break;case d.rt.Wt:i=4,e=0,h=-2;break;case d.rt.Rt:i=5,e=2,h=-8;break;case d.rt.Mt:case d.rt.gt:i=5,e=1,h=2;break;case d.rt.Ot:i=5,e=1,h=-1;break;case d.rt.Pt:i=4,e=-1,h=0}(0,g.qs)(t,(0,d.dt)(s),(0,a.R)(i),e,h,{wc:"#cd9722"})}}class J{constructor(){this.ae=(0,g.bs)(a.X.Ct,"canvas",null,null,null,null,a.X.It,null,t=>{var s=this.ae.getBoundingClientRect(),i=((t=t.changedTouches[0]).pageX-s.x-this.ae.width/2)/(this.ae.width/2);t=(t.pageY-s.y-this.ae.height/2)/(this.ae.height/2),s=(.2<=Math.abs(i)?1:0)*(i<0?-1:1),i=(.2<=Math.abs(t)?1:0)*(t<0?-1:1),t=a.X.keys.w!==i<0||a.X.keys.s!==0<i||a.X.keys.a!==s<0||a.X.keys.d!==0<s,a.X.keys.w=i<0,a.X.keys.s=0<i,a.X.keys.a=s<0,a.X.keys.d=0<s,t&&this.update()},t=>{a.X.keys.w=!1,a.X.keys.s=!1,a.X.keys.a=!1,a.X.keys.d=!1,this.update()}),this.update()}update(){(0,g.Ps)(this.ae,(0,a.R)(64),(0,a.R)(64)),this.ae.style.translate=(0,a.R)(12)+"px "+(a.X.Lt-this.ae.height-(0,a.R)(12))+"px",this.ae.getContext("2d").clearRect(0,0,this.ae.width,this.ae.height),(0,j.Fs)(this.ae,13,13,6,6,(0,a.R)(2),"#ffff57","#100f0f66"),(0,j.Fs)(this.ae,11,1,10,10,(0,a.R)(2),a.X.keys.w?"#ffffffaa":"#00000066",a.X.keys.w?"#ffffff66":"#100f0f66"),(0,m.js)((0,m.Ls)("^"),this.ae,(0,a.R)(3),11,4,"#edeef7",1),(0,j.Fs)(this.ae,1,11,10,10,(0,a.R)(2),a.X.keys.a?"#ffffffaa":"#00000066",a.X.keys.a?"#ffffff66":"#100f0f66"),(0,m.js)((0,m.Ls)("<"),this.ae,(0,a.R)(3),4,11,"#edeef7",1),(0,j.Fs)(this.ae,21,11,10,10,(0,a.R)(2),a.X.keys.d?"#ffffffaa":"#00000066",a.X.keys.d?"#ffffff66":"#100f0f66"),(0,m.js)((0,m.Ls)(">"),this.ae,(0,a.R)(3),18,11,"#edeef7",1),(0,j.Fs)(this.ae,11,21,10,10,(0,a.R)(2),a.X.keys.s?"#ffffffaa":"#00000066",a.X.keys.s?"#ffffff66":"#100f0f66"),(0,m.js)((0,m.Ls)("~"),this.ae,(0,a.R)(3),11,18,"#edeef7",1)}}class D{constructor(){a.X.ts=!1,a.X.ss=new U(a.X.Kt),a.X.ss.init(),this.ue=this.re(a.X.ss.ps[a.X.ss.ps.length/2][a.X.ss.ps[0].length/2]),this.ue.Wh(),a.X.hs=this.ue,a.X.hs.Ah(),this.ce(),a.X.es=new A,a.X.ss.ps[a.X.hs.gh][a.X.hs.xh].Ms.classList.remove("hidden"),this.oe=new H,a.X.Ut=new V,a.X.It&&(a.X.Xt=new J),this.de=!1}re(t){return l(t)?this.re(a.X.ss.jh[(0,n.N)(a.X.ss.jh.length)]):t}update(){var t,s;this.de||(this.fe=a.X.hs.Oh.find(t=>c(a.X.es.k,t.k)),this.fe&&(this.de=!0,this.we=a.X.ss.ps[a.X.hs.gh+this.fe.Ns][a.X.hs.xh+this.fe.zs],this.we.Ms.classList.remove("hidden"),this.we.update(a.X.jt*this.fe.zs,a.X.Lt*this.fe.Ns),this.me=-(a.X.jt*this.fe.zs+a.X.Lt*this.fe.Ns)/16,this.pe=this.me+(0,a.R)(4)*this.fe.zs+(0,a.R)(4)*this.fe.Ns)),this.de?(t=0!=this.fe.zs?this.me:0,s=0!=this.fe.Ns?this.me:0,a.X.hs.update(a.X.hs.x+t,a.X.hs.y+s),this.we.update(this.we.x+t,this.we.y+s),a.X.es.Ys(a.X.es.k.x+(t?this.pe:0),a.X.es.k.y+(s?this.pe:0),!0),0===this.we.x&&0===this.we.y&&(a.X.hs.Ms.classList.add("hidden"),a.X.hs=this.we,this.de=!1,this.oe.update())):(a.X.hs.update(),a.X.es.update())}resize(){a.X.ss.jh.forEach(t=>t.Bh()),a.X.ss.zh(),a.X.ss.I(),a.X.hs.Ms.classList.remove("hidden"),this.ce();var t=a.X.ds(a.X.es.k.x,a.X.es.k.y);a.X.es.init(t.x,t.y),this.oe.update(),a.X.It&&a.X.Xt.update(),a.X.Ut.update()}ce(){var t=a.X.et<3?"#2f492c":a.X.et<5?"#38252e":"#1b1116";(0,m.js)((0,m.Ls)("level "+a.X.et),this.ue.L,(0,a.R)(2),a.X.jt/(0,a.R)(4),a.X.Lt/(0,a.R)(4)-20,t,1),(0,m.js)((0,m.Ls)("^"),this.ue.L,(0,a.R)(2),a.X.jt/(0,a.R)(4),a.X.Lt/(0,a.R)(4)-6,t,1),(0,m.js)((0,m.Ls)("~"),this.ue.L,(0,a.R)(2),a.X.jt/(0,a.R)(4),a.X.Lt/(0,a.R)(4)+6,t,1),(0,m.js)((0,m.Ls)("<"),this.ue.L,(0,a.R)(2),a.X.jt/(0,a.R)(4)-6,a.X.Lt/(0,a.R)(4),t,1),(0,m.js)((0,m.Ls)(">"),this.ue.L,(0,a.R)(2),a.X.jt/(0,a.R)(4)+6,a.X.Lt/(0,a.R)(4),t,1),a.X.It||((0,m.js)((0,m.Ls)("w"),this.ue.L,(0,a.R)(2),a.X.jt/(0,a.R)(4),a.X.Lt/(0,a.R)(4)-12,t,1),(0,m.js)((0,m.Ls)("s"),this.ue.L,(0,a.R)(2),a.X.jt/(0,a.R)(4),a.X.Lt/(0,a.R)(4)+12,t,1),(0,m.js)((0,m.Ls)("a"),this.ue.L,(0,a.R)(2),a.X.jt/(0,a.R)(4)-12,a.X.Lt/(0,a.R)(4),t,1),(0,m.js)((0,m.Ls)("d"),this.ue.L,(0,a.R)(2),a.X.jt/(0,a.R)(4)+12,a.X.Lt/(0,a.R)(4),t,1)),(0,m.js)((0,m.Ls)("r atk"),this.ue.L,(0,a.R)(2),a.X.jt/(0,a.R)(4)-18,a.X.Lt/(0,a.R)(4)+20,t,1),(0,m.js)((0,m.Ls)(a.X.It?"a":"v"),this.ue.L,(0,a.R)(2),a.X.jt/(0,a.R)(4)-18,a.X.Lt/(0,a.R)(4)+28,t,1),(0,m.js)((0,m.Ls)("l atk"),this.ue.L,(0,a.R)(2),a.X.jt/(0,a.R)(4)+18,a.X.Lt/(0,a.R)(4)+20,t,1),(0,m.js)((0,m.Ls)("b"),this.ue.L,(0,a.R)(2),a.X.jt/(0,a.R)(4)+18,a.X.Lt/(0,a.R)(4)+28,t,1)}}},776:(t,s,i)=>{i.r(s),i.d(s,{xe:()=>e});class e{constructor(){var t=window.AudioContext||window.webkitAudioContext;this.context=new t,this.ve=.016,this.ge=4,this.ke=32,this.currentTime=this.ge/this.ke,this.be=0,this.Me=0,this.ye=!0,this.Se=!1}Re(){this.ye=!this.ye}Oe(){this.Se=!0,this.context.resume()}dh(){this.Pe("square",174.6,.14,0,.2)}Vs(){this.Pe("square",32.7,.12,0,.1),this.Pe("square",36.71,.12,.1,.2),this.Pe("square",16.35,.14,.2,.2)}_s(){this.Pe("square",130.81,.14,0,.1),this.Pe("square",146.83,.14,.1,.2),this.Pe("square",65.41,.16,.2,.2)}Ws(){this.Pe("square",293.7,.1,0,.2)}oh(){this.Pe("square",18.35,.1,0,.1),this.Pe("square",36.71,.1,.1,.2),this.Pe("square",73.42,.1,.2,.2)}ni(){this.Pe("square",932.3,.1,0,.1),this.Pe("square",1865,.1,.1,.2)}Li(){this.Pe("sine",82.41,.4,0,.2)}mh(){this.Pe("triangle",110,.05,0,.1)}Yh(){this.Pe("triangle",293.66,.05,0,.1),this.Pe("triangle",146.83,.05,.1,.2)}Jh(){this.Pe("square",32.7,.3,0,.1),this.Pe("square",36.71,.2,.1,.2),this.Pe("square",16.35,.3,.2,.1)}Ae(){this.ye&&this.Se&&(this.currentTime>=this.ge/this.ke?(this.Pe("triangle",h[this.be],.5,0,.4),this.be++,this.be>=h.length&&(this.be=0),this.Pe("square",l[this.Me],.08,0,.4),this.Me++,this.Me>=l.length&&(this.Me=0),this.currentTime=0):this.currentTime=this.currentTime+this.ve)}Pe(t,s,i,e,h){var l,n;this.ye&&this.Se&&(l=this.context.createOscillator(),n=this.context.createGain(),l.type=t,l.frequency.value=s,n.gain.setValueAtTime(i,this.context.currentTime),n.gain.linearRampToValueAtTime(1e-5,this.context.currentTime+h),l.connect(n),n.connect(this.context.destination),l.start(e),l.stop(this.context.currentTime+h))}}const h=[null,null,null,null,73.42,null,65.41,null,73.42,null,null,null,null,null,null,null,73.42,null,null,null,null,null,null,null,65.41,null,null,null,null,null,null,null,73.42,null,null,null,null,null,null,null,73.42,null,null,null,null,null,null,null,65.41,null,null,null,null,null,null,null,73.42,null,null,null,null,null,null,null,87.31,null,null,null,null,null,null,null,87.31,null,null,null,null,null,null,null],l=[329.63,null,null,null,349.23,null,392,null,440,null,146.83,null,440,null,146.83,null,440,null,146.83,null,440,null,null,null,392,null,329.63,349.23,392,349.23,329.63,349.23,146.83,null,440,null,146.83,null,null,null,146.83,null,329.63,null,349.23,329.63,349.23,146.83,261.63,null,392,null,261.63,null,null,null,146.83,null,null,null,392,null,null,349.23,329.63,349.23,329.63,293.66,329.63,293.66,261.63,293.66,329.63,null,null,null,246.94,null,null,null]},152:(t,s,i)=>{i.r(s),i.d(s,{Fs:()=>e,G:()=>r});const e=(t,s,i,e,h,l,n,a)=>{a&&u(t,s,i,e,h,l,a),r(t,s,i,e,h,l,n,(t,s,i,e)=>0===s&&0<t&&t<i||s===e&&0<t&&t<i||0===t&&0<s&&s<e||t===i&&0<s&&s<e)},r=(t,i,e,h,l,n,a,r)=>{var u=t.getContext("2d");for(let s=0;s<=l;s++)for(let t=0;t<=h;t++)r(t,s,h,l)&&(u.fillStyle=a,u.fillRect(Math.round(i*n+t*n),Math.round(e*n+s*n),n,n))},u=(t,s,i,e,h,l,n)=>{(t=t.getContext("2d")).fillStyle=n,t.fillRect(Math.round(s*l+l),Math.round(i*l+l),Math.round(e*l-l),Math.round(h*l-l))}},879:(t,s,i)=>{i.r(s),i.d(s,{bs:()=>l,qs:()=>e,Ps:()=>h});const e=(t,s,e=1,h=0,l=0,n=null)=>{const a=t.getContext("2d");s.forEach((t,i)=>t.forEach((t,s)=>{null!==t&&(a.fillStyle=n&&n[t]||t,a.fillRect(h*e+s*e,l*e+i*e,e,e))}))},h=(t,s,i)=>{t.width=s,t.height=i},l=(t,s,i,e,h,l,n,a,r,u)=>{let d=document.createElement(s);return i&&(d.id=i),e&&e.forEach(t=>d.classList.add(t)),h&&(d.width=h),l&&(d.height=l),a&&(d.style.backgroundColor=a),r&&(d.addEventListener(n?"touchstart":"mousedown",t=>c(t,r)),n)&&d.addEventListener("touchmove",t=>c(t,r)),u&&d.addEventListener(n?"touchend":"mouseup",t=>c(t,u)),t.appendChild(d),d},c=(t,s)=>{t.preventDefault(),s(t)}},652:(t,s,i)=>{i.r(s),i.d(s,{We:()=>l,N:()=>h,_i:()=>e});const e=(t,s)=>Math.floor(Math.random()*(s-t+1))+t,h=t=>Math.floor(Math.random()*t),l=()=>Math.random().toString(16).slice(2)},28:(N,t,s)=>{s.r(t),s.d(t,{Ls:()=>e,js:()=>i});const i=(t,s,i,e,h,l="black",n=1)=>{const a=s.getContext("2d"),r=i*n,u=e*i-t[0].length*r/2,d=h*i-t.length*r/2;t.forEach((t,i)=>t.forEach((t,s)=>{t&&(a.beginPath(),a.fillStyle=l,a.fillRect(Math.round(u+s*r),Math.round(d+i*r),r,r))}))},e=t=>{const h=t.toString().split("");let s=[];return n.forEach((t,i)=>{let e=[];h.forEach((t,s)=>{0<s&&e.push([!1]),s=l(h[s]),e.push(s[i])}),s.push(e.flat())}),s},l=t=>{switch(t.toLowerCase()){case"a":return h;case"b":return a;case"c":return r;case"d":return u;case"e":return d;case"f":return c;case"g":return o;case"h":return f;case"i":return R;case"j":return X;case"k":return y;case"l":return k;case"m":return x;case"n":return g;case"o":return p;case"p":return w;case"r":return m;case"s":return v;case"t":return b;case"u":return j;case"v":return z;case"w":return M;case"x":return L;case"y":return C;case"z":return O;case"!":return I;case"+":return P;case"/":return $;case"(":return q;case")":return Y;case"-":return S;case"<":return _;case">":return T;case"^":return E;case"~":return D;case"0":return B;case"1":return W;case"2":return F;case"3":return U;case"4":return A;case"5":return H;case"6":return V;case"7":return J;case"8":return Z;case"9":return K;default:return n}},n=[[!1],[!1],[!1],[!1],[!1]],h=[[!0,!0,!0],[!0,!1,!0],[!0,!0,!0],[!0,!1,!0],[!0,!1,!0]],a=[[!0,!0,!1],[!0,!1,!0],[!0,!0,!0],[!0,!1,!0],[!0,!0,!0]],r=[[!0,!0,!0],[!0,!1,!1],[!0,!1,!1],[!0,!1,!1],[!0,!0,!0]],u=[[!0,!0,!1],[!0,!1,!0],[!0,!1,!0],[!0,!1,!0],[!0,!0,!0]],d=[[!0,!0,!0],[!0,!1,!1],[!0,!0,!0],[!0,!1,!1],[!0,!0,!0]],c=[[!0,!0,!0],[!0,!1,!1],[!0,!0,!0],[!0,!1,!1],[!0,!1,!1]],o=[[!0,!0,!0],[!0,!1,!1],[!0,!1,!0],[!0,!1,!0],[!0,!0,!0]],f=[[!0,!1,!0],[!0,!1,!0],[!0,!0,!0],[!0,!1,!0],[!0,!1,!0]],R=[[!0],[!0],[!0],[!0],[!0]],X=[[!0,!0,!0],[!1,!1,!0],[!0,!1,!0],[!0,!1,!0],[!0,!0,!0]],y=[[!0,!1,!0],[!0,!1,!0],[!0,!0,!1],[!0,!1,!0],[!0,!1,!0]],k=[[!0,!1,!1],[!0,!1,!1],[!0,!1,!1],[!0,!1,!1],[!0,!0,!0]],x=[[!0,!0,!0,!0,!0],[!0,!1,!0,!1,!0],[!0,!1,!0,!1,!0],[!0,!1,!0,!1,!0],[!0,!1,!0,!1,!0]],g=[[!0,!0,!0],[!0,!1,!0],[!0,!1,!0],[!0,!1,!0],[!0,!1,!0]],p=[[!0,!0,!0],[!0,!1,!0],[!0,!1,!0],[!0,!1,!0],[!0,!0,!0]],w=[[!0,!0,!0],[!0,!1,!0],[!0,!0,!0],[!0,!1,!1],[!0,!1,!1]],m=[[!0,!0,!0],[!0,!1,!0],[!0,!0,!1],[!0,!1,!0],[!0,!1,!0]],v=[[!1,!0,!0],[!0,!1,!1],[!0,!0,!0],[!1,!1,!0],[!0,!0,!1]],b=[[!0,!0,!0],[!1,!0,!1],[!1,!0,!1],[!1,!0,!1],[!1,!0,!1]],j=[[!0,!1,!0],[!0,!1,!0],[!0,!1,!0],[!0,!1,!0],[!0,!0,!0]],z=[[!0,!1,!0],[!0,!1,!0],[!0,!1,!0],[!0,!1,!0],[!1,!0,!1]],M=[[!0,!1,!0,!1,!0],[!0,!1,!0,!1,!0],[!0,!1,!0,!1,!0],[!0,!1,!0,!1,!0],[!0,!0,!0,!0,!0]],L=[[!0,!1,!0],[!0,!0,!0],[!1,!0,!1],[!0,!0,!0],[!0,!1,!0]],C=[[!0,!1,!0],[!0,!1,!0],[!0,!0,!0],[!1,!0,!1],[!1,!0,!1]],O=[[!0,!0,!0],[!1,!1,!0],[!1,!0,!1],[!0,!1,!1],[!0,!0,!0]],I=[[!0,!0],[!0,!0],[!0,!1],[!1,!1],[!0,!1]],P=[[!1,!1,!1],[!1,!0,!1],[!0,!0,!0],[!1,!0,!1],[!1,!1,!1]],$=[[!1,!0],[!1,!0],[!0,!0],[!0,!1],[!0,!1]],S=[[!1,!1],[!1,!1],[!0,!0],[!1,!1],[!1,!1]],D=[[!1,!1,!1],[!1,!1,!1],[!0,!0,!0],[!1,!0,!1],[!1,!1,!1]],E=[[!1,!1,!1],[!1,!0,!1],[!0,!0,!0],[!1,!1,!1],[!1,!1,!1]],_=[[!1,!1,!1],[!1,!0,!1],[!0,!0,!1],[!1,!0,!1],[!1,!1,!1]],T=[[!1,!1,!1],[!1,!0,!1],[!1,!0,!0],[!1,!0,!1],[!1,!1,!1]],q=[[!1,!0],[!0,!1],[!0,!1],[!0,!1],[!1,!0]],Y=[[!0,!1],[!1,!0],[!1,!0],[!1,!0],[!0,!1]],B=[[!0,!0,!0],[!0,!1,!0],[!0,!1,!0],[!0,!1,!0],[!0,!0,!0]],W=[[!0],[!0],[!0],[!0],[!0]],F=[[!0,!0,!0],[!1,!1,!0],[!0,!0,!0],[!0,!1,!1],[!0,!0,!0]],U=[[!0,!0,!0],[!1,!1,!0],[!0,!0,!0],[!1,!1,!0],[!0,!0,!0]],A=[[!1,!0,!0],[!0,!1,!0],[!0,!1,!0],[!0,!0,!0],[!1,!1,!0]],H=[[!0,!0,!0],[!0,!1,!1],[!0,!0,!0],[!1,!1,!0],[!0,!0,!0]],V=[[!0,!0,!0],[!0,!1,!1],[!0,!0,!0],[!0,!1,!0],[!0,!0,!0]],J=[[!0,!0,!0],[!1,!1,!0],[!1,!0,!0],[!1,!0,!1],[!1,!0,!1]],Z=[[!0,!0,!0],[!0,!1,!0],[!0,!0,!0],[!0,!1,!0],[!0,!0,!0]],K=[[!0,!0,!0],[!0,!1,!0],[!0,!0,!0],[!1,!1,!0],[!0,!0,!0]]}},e={};function I(t){var s=e[t];return void 0===s&&(s=e[t]={exports:{}},i[t](s,s.exports,I)),s.exports}I.d=(t,s)=>{for(var i in s)I.Te(s,i)&&!I.Te(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},I.Te=(t,s)=>Object.prototype.hasOwnProperty.call(t,s),I.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"Be",{value:!0})};{let i,h,s,e,l,n,a,r,u,d,{X:c,R:o}=I(85),f=I(497).fs,{bs:R,qs:X,Ps:y}=I(879),{Ls:k,js:x}=I(28),g=I(152).Fs,p=I(776).xe,w=I(392).at,{u:m,l:v}=I(909),b=I(496).dt,t=I(652)._i,j=[[null,null,null,"#edeef7",null],[null,"#edeef7","#edeef7","#edeef7",null],["#edeef7","#edeef7","#edeef7","#edeef7","#edeef7"],["#edeef7","#edeef7","#edeef7","#edeef7","#edeef7"],[null,"#edeef7","#edeef7","#edeef7",null],[null,null,null,"#edeef7",null]],z=[[null,null,null,null],[null,null,"#edeef7",null],["#edeef7",null,null,"#edeef7"],[null,"#edeef7",null,"#edeef7"],[null,"#edeef7",null,"#edeef7"],[null,"#edeef7",null,"#edeef7"],[null,"#edeef7",null,"#edeef7"],["#edeef7",null,null,"#edeef7"],[null,null,"#edeef7",null],[null,null,null,null]],M=!0,L=1e3/c.Gt,C=Date.now(),O=0;const P=(t,s)=>{var i=c.keys[t]!==s;c.keys[t]=s,"v"!==t&&"V"!==t&&"b"!==t&&"B"!==t||!i||c.Ut?.update(),$()},$=()=>{c.Nt||(c.Nt=new p,c.Nt.Oe())},S=t=>{y(i,c.jt,c.Lt),y(h,c.jt,c.Lt),D(),y(s,o(66),o(30)),N(s,-o(78),c.It?"":"v to ","with l weapon"),y(e,o(66),o(30)),N(e,o(12),c.It?"":"b to ","with r weapon"),y(n,o(23),o(12)),_(t),y(a,o(23),o(12)),E(t),y(l,c.jt,c.Lt)},D=()=>{for(let s=0;s<c.Lt;s+=o(16))for(let t=0;t<c.jt;t+=o(16))s<c.Lt/2?m(h.getContext("2d"),t,s):v(h,t,s);var t=(c.jt%2==0?c.jt:c.jt+1)/o(10)/2,s=(c.Lt%2==0?c.Lt:c.Lt+1)/o(10)/2,i=(g(h,t-3.5,1+s,6,5,o(10),"#00000033","#00000033"),X(h,w,o(10),t-1.5,s-3.5,{hd:"#cd9722",hl:"#ffff57",cm:"#9e6800"}),b(r)),e=b(u);X(h,i,o(10),t-4-i[0].length/2,s-1.5,{wc:"#cd9722"}),X(h,e,o(10),4+t-e[0].length/2,s-1.5,{wc:"#cd9722"}),g(h,-1,-1,Math.floor(h.width/o(2))+2,32,o(2),"#060606","#060606"),x(k("the knighting of"),h,o(3),Math.round(c.jt/2/o(3)),11,"#edeef7",1),x(k("sr isaac"),h,o(2),Math.round(c.jt/2/o(2)),25,"#edeef7",1),g(h,-1,Math.floor(h.height/o(2))-16,Math.floor(h.width/o(2))+2,17,o(2),"#060606","#060606"),x(k("each weapon has a different atk pattern"),h,o(1),c.Ht/2,c._t-24,"#edeef7",1),x(k("js13kgames 2023 - igor estevao"),h,o(1),c.Ht/2,c._t-8,"#edeef7",1)},N=(t,s,i,e)=>{t.style.translate=c.jt/2+s+"px "+(h.height-o(36)-t.height)+"px",g(t,0,0,32,14,o(2),"#060606","#060606"),x(k(i+"start game"),t,o(1),35,10,"#edeef7",1),x(k(e),t,o(1),33,20,"#edeef7",1)},E=t=>{var s=c.Nt&&c.Nt.ye;(M!==s||t)&&(a.style.translate=c.jt-a.width-o(24)+"px "+o(10)+"px",M=s,a.getContext("2d").clearRect(0,0,a.width,a.height),g(a,0,0,22,11,o(1),s?"#00000066":"#ffffffaa",s?"#100f0f66":"#ffffff66"),X(a,j,o(1),10,3),x(k("m"),a,o(1),6,6,"#edeef7",1),s)&&X(a,z,o(1),15,1)},_=t=>{if(d!=c.Jt||t){n.style.translate=o(12)+"px "+o(10)+"px";const t=k(c.Ft?"Score - "+c.Jt:"top score - "+c.Et),s=t[0].length*o(1);n.width=s+o(4),g(n,0,0,t[0].length+3,11,o(1),"#00000066","#100f0f66"),x(t,n,o(1),(t[0].length+4)/2,6,"#edeef7",1)}},T=(t,s)=>{$(),c.Nt.dh(),i.classList.add("hidden"),c.Ct.classList.remove("hidden"),c.cs(),s<(O=0)&&(c.ns=t)||(c.us=t),c.Ft=new f},q=()=>{c.Nt.dh(),l.classList.add("hidden"),i.classList.remove("hidden"),c.Ct.innerHTML="",c.Ft=null,c.Et<c.Jt&&(c.Et=c.Jt,localStorage.setItem(c.Dt,c.Et)),d=0,_(),r=t(1,6),u=t(1,6),D()},Y=()=>{var t;(elapsed=Date.now()-C)>L&&(C=Date.now()-elapsed%L,c.zt=elapsed/1e3,c.Ft?(d=c.Jt,c.Jt=10*c.Zt+50*c.Qt+100*c.$t+500*(c.et-1),_(),c.ts?(l.getContext("2d").clearRect(0,0,l.width,l.height),g(l,-20,c._t/2-85,c.Ht+40,180,c.Vt,"black","white"),x(k("Game over"),l,c.Vt,c.Ht/2,c._t/2-40,"black",5),t=l,x(k("score"),t,c.Vt,c.Ht/2,c._t/2-10,"black",4),x(k("enemies killed - "+10*c.Zt),t,c.Vt,c.Ht/2,c._t/2+15,"black",2),x(k("boss enemies killed - "+100*c.$t),t,c.Vt,c.Ht/2,c._t/2+30,"black",2),x(k("keys caught - "+50*c.Qt),t,c.Vt,c.Ht/2,c._t/2+45,"black",2),x(k("level - "+500*(c.et-1)),t,c.Vt,c.Ht/2,c._t/2+60,"black",2),x(k((c.Jt>c.Et?"new record!":"total")+" - "+c.Jt),t,c.Vt,c.Ht/2,c._t/2+75,"black",2),l.classList.remove("hidden"),1<=+O?(c.keys.Enter||c.keys.v||c.keys.V||c.keys.b||c.keys.B)&&(q(),O=0):O+=c.zt):c.Ft.update()):1<=+O?c.keys.v||c.keys.V?T(r,-1):(c.keys.b||c.keys.B)&&T(u,1):O+=c.zt,(c.keys.m||c.keys.M)&&(c.keys.m=!1,c.keys.M=!1,c.Nt.Re()),E(),c.Nt)&&c.Nt.Ae(),window.requestAnimationFrame(()=>Y())};c.os(window.innerWidth,window.innerHeight),c.cs(),r=t(1,6),u=t(1,6),window.addEventListener("keydown",t=>P(t.key,!0)),window.addEventListener("keyup",t=>P(t.key,!1)),window.addEventListener("click",t=>$()),window.addEventListener("resize",()=>{c.os(window.innerWidth,window.innerHeight),S(!0),c.Ft&&c.Ft.resize()});{let t=document.getElementById("main");t.addEventListener("animationend",()=>t.style.animation=""),c.Ct=R(t,"div","game",["hidden"]),i=R(t,"div"),h=R(i,"canvas","main-menu"),s=R(i,"canvas",null,null,null,null,c.It,null,()=>T(r,-1)),e=R(i,"canvas",null,null,null,null,c.It,null,()=>T(u,1)),n=R(t,"canvas","score"),a=R(t,"canvas","soundbtn",null,null,null,c.It,null,()=>{c.Nt?c.Nt.Re():(c.Nt=new p,c.Nt.Oe())}),l=R(t,"canvas","gameoverscreen",["hidden"],c.jt,c.Lt,c.It,"#ff4b4be6",()=>1<=+O&&q())}S(!0),window.requestAnimationFrame(()=>Y())}</script>