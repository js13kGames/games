<!doctype html><meta name=viewport content="width=device-width"><title>Black Cat's Herbs & Brews - js13kGames 2025</title><style>@keyframes pop{0%{opacity:0;transform:scale(.5,.5)}100%{opacity:1;transform:scale(1,1)}}@keyframes bounce{0%{transform:scale(1,1)}30%{transform:scale(1.1,.9)}60%{transform:scale(.9,1.1)}100%{transform:scale(1,1)}}@keyframes leave{0%{bottom:calc(20vh - 10px);right:512px;transform:scale(1,1)}20%{bottom:calc(20vh - 10px);right:512px;transform:scale(1.1,.9)}30%{bottom:calc(20vh + 50px);right:512px;transform:scale(.9,1.1)}40%{bottom:-180px;right:512px;transform:scale(1,1)}50%{bottom:-180px;right:512px;transform:scale(1,1)}100%{bottom:-180px;right:calc(100% + 460px);transform:scale(1,1)}}*{margin:0;padding:0;box-sizing:border-box;image-rendering:pixelated;user-select:none;text-transform:uppercase;font-family:monospace;color:#fff;text-shadow:-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000}body,html{height:100%;width:100%;overflow:hidden}#ctn{display:flex;background:#322}#sa{display:flex;flex-direction:column;flex-grow:1;height:100vh}#wrk{width:500px;height:100vh;border-left:6px solid #000}#dlg_c{display:none;position:absolute;top:82vh;width:calc(100% - 532px);left:16px;background:#ba9;padding:4px;font-size:2em;overflow:hidden;letter-spacing:.15em;border-radius:8px;animation-name:pop;animation-timing-function:cubic-bezier(0.26,0.53,0.74,1.48);animation-duration:.3s;transition:all .3s ease}#dlg{display:flex;border:2px solid #665;border-radius:4px;padding:8px;justify-content:space-between}#dlgo li{padding:4px 8px;border-bottom:1px solid #665;cursor:pointer}#dlgo li:hover{background:#665}#cstmr{position:absolute;bottom:0;left:-332px;transition:left .7s}#c:hover,#cldrn:hover,#cstmr:hover,#shlf:hover{filter:brightness(1.3)}#shlf{position:absolute;top:10vh;left:32px}#cntr{position:absolute;top:80vh;width:calc(100% - 500px);height:20vh;background:#420;border-top:6px solid #000}#w{position:absolute;bottom:calc(20vh - 20px);left:calc((100% - 500px)/ 2 - 190px)}#c{position:absolute;bottom:calc(20vh - 10px);right:512px}#cldrn{position:absolute;bottom:20vh;right:562px}#cldrnfx{position:absolute;bottom:calc(19vh - 50px);right:572px;width:300px;height:320px}#cldrnfx canvas{width:300px;height:320px}#clndr{display:flex;position:absolute;top:calc(10vh + 122px);right:630px;width:190px;height:245px;background:#ffe;align-items:center;justify-content:center;flex-direction:column;gap:4px;padding:4px;border-radius:2px;border:4px solid #000}#clndrm{display:flex;align-items:center;justify-content:center;font-size:1.6em}#clndrd{display:flex;align-items:center;justify-content:center;font-size:4em}#clndrds{display:flex;flex-wrap:wrap;gap:1px}#clndrds .day,#clndrds .day-empty{width:24px;height:24px}#clndrds .day{border:1px solid #000}#clndrds .day.day-w0,#clndrds .day.day-w6{background:#ccc}#clndrds .day-1,#clndrds .day.ticked{background:linear-gradient(-45deg,#0000 0,#0000 47%,#900 48%,#900 21%,#0000 53%,#0000 100%)}#clndrds .day-1.day-w0,#clndrds .day-1.day-w6,#clndrds .day.day-w0.ticked,#clndrds .day.day-w6.ticked{background:linear-gradient(-45deg,#ccc 0,#ccc 47%,#900 48%,#900 21%,#ccc 53%,#ccc 100%)}#clndrds .day:last-child::before{display:flex;align-items:center;justify-content:center;font-size:10px;padding-top:5px;color:#000;text-shadow:none;content:'rent';transform:rotate(-45deg)}.rcp{display:flex;flex-wrap:wrap;gap:2px;justify-content:flex-start;align-items:center;margin-bottom:8px}.op{font-size:32px}.item-holder{display:flex;flex-wrap:wrap;overflow-y:auto;max-height:calc(100vh - 250px)}.item-holder .item-container,.rcp .item-container{display:flex;width:94px;height:94px;background:#111;border-radius:8px;align-items:center;justify-content:center}.item-holder .item-container .item,.rcp .item-container .item{display:flex;width:86px;height:86px;padding:8px;background:#111;border:1px solid #fff;border-radius:4px;font-size:.9em;align-items:center;justify-content:center;text-align:center;background-repeat:no-repeat;background-position:center;background-size:contain}.item-holder .item-container:not(.empty){cursor:pointer}.item-holder .item-container:hover:not(.empty){background:#ef0}.item-holder .item-container .item:hover,.item-holder .item-container:hover .item{border:1px solid #111;background-color:#222}.item-holder .item-container.empty .item{width:92px;height:92px;background:#111;border:1px solid #111;border-radius:4px}.inventory .item-holder{gap:4px;padding:4px}.inventory{display:flex;flex-direction:column;align-items:center;justify-content:flex-start}.cauldron{display:flex;flex-direction:column;align-items:center;justify-content:center}.cauldron .item-holder{gap:4px;padding:16px 6px;justify-content:space-evenly}button{padding:8px;margin:4px;background:#ba9;border:2px solid #665;cursor:pointer;font-size:16px;font-weight:700}button:hover{background:#665}button:disabled{background:#555;border:2px solid #333;cursor:not-allowed}#o{display:none;position:fixed;width:100%;height:100%;background:#0008;align-items:center;justify-content:center;z-index:1000}#msg{display:none;background:#ba9;padding:16px;border-radius:4px;max-height:90vh;overflow-y:auto;animation-name:pop;animation-timing-function:cubic-bezier(0.26,0.53,0.74,1.48);animation-duration:.3s;transition:all .3s ease}#msgt{display:flex;flex-direction:column;align-items:center;justify-content:center}#msgt button{display:flex;width:100%;justify-content:space-between}.bounce{animation:bounce .5s}#c.out{bottom:-180px;right:calc(100% + 460px)}#c.out-anim{animation:leave 1s}#c.in-anim{animation:leave 1s;animation-direction:reverse}#ttip{display:none;position:absolute;right:10px;bottom:10px;background:#000;width:350px}#ttip .item-icon-holder{display:flex;align-items:center;justify-content:center}#ttip .item-icon{width:100px;height:100px;object-fit:contain}.tooltipc{display:flex;align-items:flex-start;justify-content:flex-start;padding:16px;gap:8px;border:1px solid #fff;border-radius:4px}.tooltipt{display:flex;flex-direction:column;align-items:flex-start;justify-content:center}.tooltipn{font-weight:700}.gdisp{display:flex;align-items:center;justify-content:flex-start;gap:8px;font-size:2em;margin-left:8px}.gdisp img{width:1em;height:1em}.debt{color:red}#tglm{position:fixed;top:10px;left:10px}#tgls{position:fixed;top:10px;left:60px}</style><button id=tglm>ðŸŽµ</button><button id=tgls>ðŸ”ˆ</button><div id=o><div id=msg><div id=msgt></div></div></div><div id=ctn><div id=sa><canvas id=shlf></canvas><div id=clndr><div id=clndrm></div><div id=clndrds></div><div id=clndrd>1</div></div><div id=cldrnfx></div><canvas id=cldrn></canvas><div id=cntr></div><canvas id=w></canvas><canvas id=c></canvas><div id=dlg_c><div id=dlg><p id=dlgt></div><div id=dlgo></div></div></div><div id=wrk></div></div><div id=ttip></div><script>var e={"./src/audio/music.js":(e,t,n)=>{n.r(t),n.d(t,{music:()=>r});var i=n("./src/utils/audio-utils.js");let s=new i.Track([i.Note.new("c",5,4),null,i.Note.new("c#",5,4),i.Note.new("d#",5,4),null,i.Note.new("f#",5,4),i.Note.new("e",5,4),null,i.Note.new("g#",5,4),i.Note.new("a#",5,4),null,i.Note.new("b",5,4),i.Note.new("a#",5,4),i.Note.new("g#",5,4),i.Note.new("f#",5,4),null,i.Note.new("c",6,4),null,i.Note.new("c#",6,4),i.Note.new("d#",6,4),null,i.Note.new("f#",6,4),i.Note.new("e",6,4),null,i.Note.new("g#",6,4),i.Note.new("a#",6,4),null,i.Note.new("b",6,4),i.Note.new("a#",6,4),i.Note.new("g#",6,4),i.Note.new("f#",6,4),null,i.Note.new("f#",5,4),null,i.Note.new("c",5,4),null,i.Note.new("f#",5,4),null,i.Note.new("c#",5,4),i.Note.new("d#",5,4),null,i.Note.new("e",5,4),null,i.Note.new("g#",5,4),i.Note.new("a#",5,4),null,i.Note.new("b",5,4),null,i.Note.new("a#",5,4),i.Note.new("g#",5,4),null,i.Note.new("f#",5,4),i.Note.new("e",5,4),null,i.Note.new("d#",5,4),i.Note.new("c#",5,4),null,i.Note.new("c",5,4),null,i.Note.new("b",4,4),i.Note.new("c",5,4),null,i.Note.new("f#",5,4),null],"triangle",2,.012,0),o=new i.Track([i.Note.new("f#",3,5),null,i.Note.new("c",3,5),null,i.Note.new("g#",2,5),null,i.Note.new("c#",3,5),null,i.Note.new("f#",3,5),null,i.Note.new("c",3,5),null,i.Note.new("g#",2,5),null,i.Note.new("c#",3,5),null,i.Note.new("f#",3,5),null,i.Note.new("c",3,5),null,i.Note.new("g#",2,5),null,i.Note.new("c#",3,5),null,i.Note.new("f#",3,5),null,i.Note.new("c",3,5),null,i.Note.new("g#",2,5),null,i.Note.new("c#",3,5),null,i.Note.new("f#",3,5),null,i.Note.new("c",3,5),null,i.Note.new("g#",2,5),null,i.Note.new("c#",3,5),null,i.Note.new("f#",3,5),null,i.Note.new("c",3,5),null,i.Note.new("g#",2,5),null,i.Note.new("c#",3,5),null,i.Note.new("f#",3,5),null,i.Note.new("c",3,5),null,i.Note.new("g#",2,5),null,i.Note.new("c#",3,5),null,i.Note.new("f#",3,5),null,i.Note.new("c",3,5),null,i.Note.new("g#",2,5),null,i.Note.new("c#",3,5),null],"triangle",2,.02,0),a=new i.Track([i.Note.new("c",2,4),i.Note.new("b",3,4),i.Note.new("f#",2,4),i.Note.new("a#",3,4),i.Note.new("c",2,4),i.Note.new("b",3,4),i.Note.new("f#",2,4),i.Note.new("a#",3,4),i.Note.new("c",2,4),i.Note.new("b",3,4),i.Note.new("f#",2,4),i.Note.new("a#",3,4),i.Note.new("c",2,4),i.Note.new("b",3,4),i.Note.new("f#",2,4),i.Note.new("a#",3,4),i.Note.new("c",2,4),i.Note.new("b",3,4),i.Note.new("f#",2,4),i.Note.new("a#",3,4),i.Note.new("c",2,4),i.Note.new("b",3,4),i.Note.new("f#",2,4),i.Note.new("a#",3,4),i.Note.new("c",2,4),i.Note.new("b",3,4),i.Note.new("f#",2,4),i.Note.new("a#",3,4),i.Note.new("c",2,4),i.Note.new("b",3,4),i.Note.new("f#",2,4),i.Note.new("a#",3,4),i.Note.new("c",2,4),i.Note.new("b",3,4),i.Note.new("f#",2,4),i.Note.new("a#",3,4),i.Note.new("c",2,4),i.Note.new("b",3,4),i.Note.new("f#",2,4),i.Note.new("a#",3,4),i.Note.new("c",2,4),i.Note.new("b",3,4),i.Note.new("f#",2,4),i.Note.new("a#",3,4),i.Note.new("c",2,4),i.Note.new("b",3,4),i.Note.new("f#",2,4),i.Note.new("a#",3,4),i.Note.new("c",2,4),i.Note.new("b",3,4),i.Note.new("f#",2,4),i.Note.new("a#",3,4),i.Note.new("c",2,4),i.Note.new("b",3,4),i.Note.new("f#",2,4),i.Note.new("a#",3,4),i.Note.new("c",2,4),i.Note.new("b",3,4),i.Note.new("f#",2,4),i.Note.new("a#",3,4),i.Note.new("c",2,4),i.Note.new("b",3,4),i.Note.new("f#",2,4),i.Note.new("a#",3,4)],"square",2,.004,0),r=new i.Music([s,o,a])},"./src/config/ItemManager.js":(e,t,n)=>{n.r(t),n.d(t,{ItemManager:()=>l});var i=n("./src/entities/Recipe.js"),s=n("./src/entities/Item.js"),o=n("./src/utils/draw.js"),a=n("./src/drawables/images.js");let r=Object.fromEntries([new s.Item("lunar moss","herb",3,(0,o.asCanvas)(a.moss,["#000000ff","#225639ff","#289769ff","#2ccea6ff"]).toDataURL()),new s.Item("emberleaf","herb",5,(0,o.asCanvas)(a.leaf,["#000000ff","#7c2929ff","#552828ff","#943737ff"]).toDataURL()),new s.Item("frostmoss","herb",13,(0,o.asCanvas)(a.moss,["#000000ff","#223856ff","#285897ff","#2c65ceff"]).toDataURL()),new s.Item("dreamcap","herb",4,(0,o.asCanvas)(a.moss,["#000000ff","#285897ff","#2c65ceff","#223856ff"]).toDataURL()),new s.Item("ironwood root","herb",43,(0,o.asCanvas)(a.root,["#000000ff","#2c65ceff","#285897ff","#a8aba6ff","#223856ff"]).toDataURL()),new s.Item("sap","liquid",4,(0,o.asCanvas)(a.drop,["#000000ff","#928a19ff","#afb125ff","#d7c144ff","#eeedafff"]).toDataURL()),new s.Item("blood","liquid",10,(0,o.asCanvas)(a.drop,["#000000ff","#740c0cff","#b12525ff","#d74444ff","#eeafafff"]).toDataURL()),new s.Item("water","liquid",2,(0,o.asCanvas)(a.drop,["#000000ff","#195292ff","#2575b1ff","#44a3d7ff","#afe4eeff"]).toDataURL()),new s.Item("ooze","liquid",5,(0,o.asCanvas)(a.drop,["#000000ff","#225639ff","#1f7a54ff","#289769ff","#2ccea6ff"]).toDataURL()),new s.Item("liver","animal",10,(0,o.asCanvas)(a.moss,["#000000ff","#552828ff","#a53e35ff","#7c2929ff"]).toDataURL()),new s.Item("weird bone","animal",10,(0,o.asCanvas)(a.root,["#000000ff","#646453ff","#818173ff","#969681ff","#bdc2c0ff"]).toDataURL()),new s.Item("roe","animal",10,(0,o.asCanvas)(a.moss,["#000000ff","#2f383dff","#7a888cff","#6d828aff"]).toDataURL()),new s.Item("vial","container",5,(0,o.asCanvas)(a.vial,["#000000ff","#794129ff","#a16a48ff","#546a77ff","#6d858fff","#a8aba6ff","#546a77ff","#6d858fff","#546a77ff","#a8aba6ff"]).toDataURL()),new s.Item("healing potion","potion",17,(0,o.asCanvas)(a.vial,["#000000ff","#794129ff","#a16a48ff","#546a77ff","#6d858fff","#a8aba6ff","#740c0cff","#d74444ff","#b12525ff"]).toDataURL(),"#740c0cff"),new s.Item("coolant","potion",98,(0,o.asCanvas)(a.vial,["#000000ff","#794129ff","#a16a48ff","#546a77ff","#6d858fff","#a8aba6ff","#223856ff","#2c65ceff","#285897ff"]).toDataURL(),"#285897ff"),new s.Item("underwater breathing potion","potion",180,(0,o.asCanvas)(a.vial,["#000000ff","#794129ff","#a16a48ff","#546a77ff","#6d858fff","#a8aba6ff","#223856ff","#2c65ceff","#285897ff"]).toDataURL(),"#223856ff"),new s.Item("frostmoss wine","potion",120,(0,o.asCanvas)(a.vial,["#000000ff","#794129ff","#a16a48ff","#546a77ff","#6d858fff","#a8aba6ff","#223856ff","#2c65ceff","#285897ff"]).toDataURL(),"#223856ff"),new s.Item("strength potion","potion",230,(0,o.asCanvas)(a.vial,["#000000ff","#794129ff","#a16a48ff","#546a77ff","#6d858fff","#a8aba6ff","#928a19ff","#d7c144ff","#afb125ff"]).toDataURL(),"#928a19ff"),new s.Item("sleep potion","potion",56,(0,o.asCanvas)(a.vial,["#000000ff","#794129ff","#a16a48ff","#546a77ff","#6d858fff","#a8aba6ff","#382929ff","#3f3a3aff","#3f3434ff"]).toDataURL(),"#645050ff"),new s.Item("vampiric tonic","potion",180,(0,o.asCanvas)(a.vial,["#000000ff","#794129ff","#a16a48ff","#546a77ff","#6d858fff","#a8aba6ff","#552828ff","#943737ff","#7c2929ff"]).toDataURL(),"#552828ff"),new s.Item("love potion","potion",225,(0,o.asCanvas)(a.vial,["#000000ff","#794129ff","#a16a48ff","#546a77ff","#6d858fff","#a8aba6ff","#682072ff","#a534b4ff","#8c3397ff"]).toDataURL(),"#8c3397ff"),new s.Item("poison potion","potion",125,(0,o.asCanvas)(a.vial,["#000000ff","#794129ff","#a16a48ff","#546a77ff","#6d858fff","#a8aba6ff","#225639ff","#289769ff","#1f7a54ff"]).toDataURL(),"#1f7a54ff")].map(e=>[e.name,e]));class l{static items=r;static recipes=[new i.Recipe(r["healing potion"],[r["lunar moss"],r.sap,r.vial],10),new i.Recipe(r.coolant,[r.frostmoss,r.water,r.vial],10),new i.Recipe(r["underwater breathing potion"],[r.roe,r.water,r.vial],12),new i.Recipe(r["frostmoss wine"],[r.frostmoss,r.sap,r.vial],20),new i.Recipe(r["strength potion"],[r["ironwood root"],r.blood,r.vial],12),new i.Recipe(r["sleep potion"],[r["lunar moss"],r.dreamcap,r.water,r.vial],18),new i.Recipe(r["vampiric tonic"],[r["weird bone"],r.liver,r.blood,r.vial],25),new i.Recipe(r["love potion"],[r["weird bone"],r.dreamcap,r.emberleaf,r.water,r.vial],30),new i.Recipe(r["poison potion"],[r["weird bone"],r["ironwood root"],r.emberleaf,r.ooze,r.vial],30)];static get basicPotions(){return this.allItems.filter(e=>"potion"===e.type).slice(0,4)}static get advancedPotions(){return this.allItems.filter(e=>"potion"===e.type).slice(4)}static get allItems(){return Object.values(l.items)}static get ingredients(){return this.allItems.filter(e=>"potion"!==e.type)}static findRecipe(e){let t=e.toSorted((e,t)=>e.name.localeCompare(t.name));return l.recipes.find(e=>e.ingredients.map(e=>e.name).join(", ")===t.map(e=>e.name).join(", "))}static makeItem(e){return l.items[e].clone()}}},"./src/config/setup.js":(e,t,n)=>{n.r(t),n.d(t,{setup:()=>h});var i=n("./src/entities/Shop.js"),s=n("./src/entities/Player.js"),o=n("./src/entities/Cauldron.js"),a=n("./src/entities/Inventory.js"),r=n("./src/utils/interaction.js"),l=n("./src/config/ItemManager.js"),d=n("./src/entities/Cat.js");let h=()=>{window.shop=new i.Shop,window.shelves=new a.Inventory(shlf,wrk),window.cat=new d.Cat(c),window.player=new s.Player(w,100,shelves),window.player.inventory.addAll([l.ItemManager.makeItem("lunar moss"),l.ItemManager.makeItem("liver"),l.ItemManager.makeItem("vial"),l.ItemManager.makeItem("vial"),l.ItemManager.makeItem("roe"),l.ItemManager.makeItem("sap"),l.ItemManager.makeItem("sap"),l.ItemManager.makeItem("water")]),window.cauldron=new o.Cauldron(cldrn,wrk),window.customer=null,shop.resetCalendar(),shop.selectShelf(),shop.drawables=[window.shelves,window.cauldron,window.player,window.cat,window.customer],(0,r.onClick)(cldrn,()=>{shop.selectCauldron()}),(0,r.onClick)(shlf,()=>{shop.selectShelf()}),(0,r.onMouseUp)(document,e=>(window.shop.currentlyHolding&&(window.shop.currentlyHolding=null,window.shop.currentlyHoldingOrigin=null),!1),!1);let e=()=>{window.playMusic=!window.playMusic,window.playMusic?tglm.innerHTML="ðŸŽµ":tglm.innerHTML="ðŸš«"},t=()=>{window.playSounds=!window.playSounds,window.playSounds?tgls.innerHTML="ðŸ”ˆ":tgls.innerHTML="ðŸš«"};(0,r.onClick)(tglm,e),(0,r.onClick)(tgls,t),e(),t()}},"./src/drawables/images.js":(e,t,n)=>{n.r(t),n.d(t,{cat:()=>c,cauldronTop:()=>i,cupboard:()=>s,drop:()=>r,femaleVillagerSkirt:()=>u,leaf:()=>l,maleVillagerBeard:()=>w,moss:()=>a,root:()=>d,vial:()=>o,witch:()=>h});let i=[[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0],[0,0,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,0,0],[0,0,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,1,0],[0,1,3,4,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,4,3,1,0],[1,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,1],[1,3,4,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,4,3,1],[1,3,4,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,4,3,1]],s=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[0,1,2,3,3,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2],[0,1,2,3,3,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2],[0,1,2,3,3,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2],[0,1,2,3,1,1,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,2],[0,1,2,3,1,1,3,3,3,2,3,3,3,3,2,3,3,3,3,2,3,3,3,3,2,3,3,3,3,2,3,3,3,2],[0,1,2,3,1,1,3,3,3,2,3,3,3,3,2,3,3,3,3,2,3,3,3,3,2,3,3,3,3,2,3,3,3,2],[0,1,2,3,1,1,3,3,3,2,3,3,3,3,2,3,3,3,3,2,3,3,3,3,2,3,3,3,3,2,3,3,3,2],[0,1,2,3,3,2,3,3,3,2,3,3,3,3,2,3,3,3,3,2,3,3,3,3,2,3,3,3,3,2,3,3,3,2],[0,1,2,3,3,2,3,3,3,2,3,3,3,3,2,3,3,3,3,2,3,3,3,3,2,3,3,3,3,2,3,3,3,2],[0,1,2,3,3,2,3,3,3,2,3,3,3,3,2,3,3,3,3,2,3,3,3,3,2,3,3,3,3,2,3,3,3,2],[0,1,2,3,3,2,3,3,3,2,3,3,3,3,2,3,3,3,3,2,3,3,3,3,2,3,3,3,3,2,3,3,3,2],[0,1,2,3,3,2,3,3,3,2,3,3,3,3,2,3,3,3,3,2,3,3,3,3,2,3,3,3,3,1,1,3,3,2],[0,1,2,3,3,2,3,3,3,2,3,3,3,3,2,3,3,3,3,2,3,3,3,3,2,3,3,3,1,1,1,1,3,2],[0,1,2,3,3,2,3,3,3,2,3,3,3,3,2,3,3,3,3,2,3,3,3,3,2,3,3,3,1,1,1,1,3,2]];s=[...s=[...s.map(e=>[...e,...e.toReversed().slice(1)])],...s.toReversed().slice(1)];let o=[[0,0,0,0,1,1,1,1,1,1,0,0,0,0],[0,0,0,0,1,2,3,3,3,1,0,0,0,0],[0,0,0,0,1,2,2,2,3,1,0,0,0,0],[0,0,0,0,1,2,2,2,2,1,0,0,0,0],[0,0,0,0,1,1,1,1,1,1,0,0,0,0],[0,0,0,0,1,4,4,4,4,1,0,0,0,0],[0,0,0,0,1,4,5,5,4,1,0,0,0,0],[0,0,0,1,4,5,5,5,6,5,1,0,0,0],[0,0,1,4,5,5,5,5,5,6,5,1,0,0],[0,1,5,5,5,5,5,5,5,6,6,5,1,0],[1,5,5,5,5,5,5,5,5,5,6,4,4,1],[1,5,7,8,8,8,8,9,9,9,6,9,4,1],[1,4,7,7,9,8,8,8,8,8,8,9,4,1],[1,4,4,7,7,9,9,9,9,9,9,4,4,1],[0,1,4,4,4,7,7,7,7,4,4,4,1,0],[0,0,1,4,4,4,4,4,4,4,4,1,0,0],[0,0,0,1,1,1,1,1,1,1,1,0,0,0]],a=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0],[0,0,0,0,1,1,2,2,2,3,3,3,1,1,0,0,0,0],[0,0,1,1,2,2,2,2,3,4,4,3,3,3,1,1,0,0],[0,1,2,2,3,3,3,3,3,3,3,3,3,3,3,3,1,0],[0,1,2,2,2,3,3,3,3,3,3,3,3,3,3,3,1,0],[1,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,2,1],[1,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,2,1],[1,1,2,2,2,3,2,3,3,3,3,3,3,3,3,2,1,1],[0,0,1,2,2,1,1,2,2,2,2,3,1,2,2,1,0,0],[0,0,1,2,1,0,0,1,2,1,1,3,0,1,1,0,0,0],[0,0,0,1,1,0,0,1,1,0,1,2,0,0,0,0,0,0],[0,0,0,0,1,0,0,0,1,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0]],r=[[0,0,0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,1,2,0,0,0,0,0,0],[0,0,0,0,0,1,3,1,0,0,0,0,0],[0,0,0,0,0,1,3,1,0,0,0,0,0],[0,0,0,0,1,2,3,3,1,0,0,0,0],[0,0,0,0,1,2,3,3,1,0,0,0,0],[0,0,0,1,2,3,3,4,4,1,0,0,0],[0,0,1,2,3,3,3,4,5,3,1,0,0],[0,1,2,2,3,3,3,4,5,5,3,1,0],[0,1,2,3,3,3,3,4,5,5,4,1,0],[1,2,2,3,3,3,3,4,5,5,5,3,1],[1,2,3,3,3,3,3,4,4,5,5,3,1],[1,2,2,3,3,3,3,3,3,3,3,2,1],[1,2,2,2,3,3,3,3,3,3,2,2,1],[0,1,2,2,2,2,4,4,4,2,2,1,0],[0,0,1,1,2,2,2,2,2,1,1,0,0],[0,0,0,0,1,1,1,1,1,0,0,0,0]],l=[[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,1,2],[0,0,0,0,0,1,3,2],[0,0,0,0,1,2,2,4],[0,0,0,1,4,2,4,3],[0,0,1,2,2,2,4,3],[0,0,1,2,2,3,2,3],[0,1,2,4,4,2,3,3],[0,1,2,4,4,4,2,3],[1,2,3,2,2,4,4,3],[1,2,2,3,3,2,4,3],[1,2,2,2,2,3,2,3],[1,2,4,4,4,3,3,3],[1,2,2,4,4,4,2,3],[0,1,2,3,3,2,4,3],[0,1,2,2,3,3,2,3],[0,0,1,2,2,3,3,3],[0,0,0,1,1,2,2,3],[0,0,0,0,0,1,3,3],[0,0,0,0,0,0,1,3],[0,0,0,0,0,0,1,3],[0,0,0,0,0,0,1,3],[0,0,0,0,0,0,0,1]];l=[...l.map(e=>[...e,...e.toReversed().slice(1)])];let d=[[0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0],[0,0,0,1,2,1,0,1,0,0,0,1,0,0,0,0],[0,0,0,1,2,3,1,3,1,0,0,1,0,0,0,0],[0,0,0,1,2,2,3,3,1,0,1,0,0,0,1,0],[0,0,0,0,1,2,4,3,1,0,1,0,0,1,3,1],[0,0,0,0,0,1,4,3,3,1,2,1,1,3,1,0],[0,0,0,0,0,0,1,4,5,2,2,3,3,1,0,0],[0,0,0,0,0,0,1,4,5,3,3,4,1,0,0,0],[0,0,0,0,0,0,1,3,5,3,4,1,0,0,0,0],[0,0,0,0,0,0,1,3,5,3,1,0,0,0,0,0],[0,0,0,0,0,1,2,3,3,4,1,0,0,0,0,0],[0,0,0,0,1,1,2,5,4,1,0,0,0,0,0,0],[0,0,0,1,3,3,3,3,4,1,0,0,0,0,0,0],[0,0,1,3,3,4,3,5,2,3,1,1,0,0,0,0],[0,1,4,1,1,4,4,5,5,2,2,3,1,0,0,0],[0,1,1,0,0,1,4,3,4,1,3,5,5,1,0,0],[0,1,0,0,0,0,1,3,1,0,1,1,3,1,0,0],[1,0,0,0,0,0,1,2,1,0,0,0,1,0,0,0],[0,0,0,0,0,1,3,1,0,0,0,0,0,1,0,0]],c=[[0,0,0,0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,1,2,1,0,0],[0,0,0,0,0,0,0,0,0,1,2,3,1,1],[0,0,0,0,0,0,0,0,1,3,2,2,3,3],[0,0,0,0,0,0,0,0,1,2,2,2,2,2],[0,0,0,0,0,0,0,1,3,2,2,2,2,2],[0,0,0,0,0,0,0,1,2,2,1,2,2,2],[0,0,0,0,0,0,0,1,2,2,1,2,2,1],[0,0,0,0,0,0,1,3,2,2,2,2,1,2],[0,0,0,0,0,0,1,3,2,2,2,2,2,2],[0,0,0,0,0,0,1,2,2,2,2,2,2,2],[0,0,0,0,0,0,1,2,2,2,2,2,2,2],[0,0,0,0,0,1,3,3,2,2,2,2,2,2],[0,0,0,0,0,1,3,2,2,2,2,2,2,2]];c=[...c.map(e=>[...e,...e.toReversed().slice(1)]),[0,0,0,0,0,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,0,0,1,1,0],[0,0,0,0,0,1,3,3,2,2,2,2,2,2,2,2,2,2,2,3,3,1,0,1,2,2,1],[0,0,0,0,0,1,3,2,2,2,2,2,2,2,2,2,2,2,2,2,3,1,0,0,1,3,1],[0,0,0,0,0,1,2,2,2,1,2,2,2,2,2,2,2,1,2,2,2,1,0,0,1,2,1],[0,0,0,0,0,1,3,2,2,1,2,1,2,2,2,1,2,1,2,2,3,1,1,1,2,2,1],[0,0,0,0,0,0,1,3,2,1,2,1,2,2,2,1,2,1,2,3,1,2,2,3,2,1,0],[0,0,0,0,0,0,0,1,1,1,2,1,1,1,1,1,2,1,1,1,1,1,1,1,1,0,0],[0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0]];let h=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,2,2,2],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,3,3,3],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,3,3,3,3,3],[0,0,0,0,0,0,0,0,0,0,0,0,1,3,3,3,3,3,3,3],[0,0,0,0,0,0,0,0,0,0,0,1,2,3,3,3,3,3,2,2],[0,0,0,0,0,0,0,0,0,0,0,1,3,3,3,3,3,2,4,4],[0,0,0,0,0,0,0,0,0,0,1,2,3,3,3,3,2,4,4,4],[0,0,0,0,0,0,0,0,0,0,1,2,3,3,3,2,4,5,4,4],[0,0,0,0,0,0,0,0,0,0,1,2,3,3,2,4,5,4,5,4],[0,0,0,0,0,0,0,0,0,0,1,3,3,3,1,4,6,7,4,4],[0,0,0,0,0,0,0,0,0,1,3,3,3,2,1,4,6,7,4,4],[0,0,0,0,0,0,0,0,0,1,3,3,3,2,1,4,4,4,4,4],[0,0,0,0,0,0,0,0,0,1,3,3,3,2,2,1,4,4,4,8],[0,0,0,0,0,0,0,0,1,3,3,3,2,2,2,1,4,4,4,4],[0,0,0,0,0,0,0,0,1,3,3,3,2,2,2,2,1,4,4,9],[0,0,0,0,0,0,0,1,3,3,3,2,2,1,1,1,1,1,4,4],[0,0,0,0,0,0,0,1,3,3,3,2,1,4,4,4,8,4,1,1],[0,0,0,0,0,0,0,1,3,3,2,1,4,4,4,4,4,8,4,4],[0,0,0,0,0,0,0,1,3,3,1,4,4,4,4,4,4,4,4,4],[0,0,0,0,0,0,0,1,3,2,1,4,4,4,4,4,4,4,4,4],[0,0,0,0,0,0,0,1,3,1,4,4,4,8,4,4,4,4,4,4],[0,0,0,0,0,0,0,1,3,1,4,4,4,8,4,1,1,4,4,4],[0,0,0,0,0,0,0,1,1,1,4,4,4,8,1,1,1,1,4,4],[0,0,0,0,0,0,0,0,1,1,1,4,4,1,1,1,1,1,1,4],[0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,1,1,1,1,1,1,2,1,1,1,1,1,1],[0,0,0,0,0,0,1,1,1,1,1,1,2,2,2,1,1,1,1,1],[0,0,0,0,0,1,1,1,1,1,1,1,2,2,2,1,1,1,1,1],[0,0,1,1,1,1,1,1,1,1,1,1,1,2,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];h=[...h.map(e=>[...e,...e.toReversed()])];let w=[[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,2,2,3,3,3,3,3,3,3,3,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,2,2,3,3,3,3,3,3,3,3,3,3,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,0,0,0,0,0],[0,0,0,0,0,0,0,1,2,3,3,3,3,3,3,4,4,4,4,4,4,4,4,1,1,0,0,0,0,0],[0,0,0,0,0,0,0,1,2,3,3,3,3,3,3,4,4,4,4,4,4,4,4,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,2,3,3,3,3,3,4,4,2,2,2,4,4,2,2,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,2,3,4,2,2,4,4,3,3,3,3,4,4,3,3,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,2,4,4,4,2,4,4,4,5,6,4,4,4,5,6,1,0,0,0,0,0,0],[0,0,0,0,0,0,1,2,2,4,4,4,2,4,4,4,5,6,4,4,4,5,6,1,0,0,0,0,0,0],[0,0,0,0,0,0,1,2,2,2,4,4,2,4,4,4,4,4,4,4,4,4,4,1,0,0,0,0,0,0],[0,0,0,0,0,1,2,2,2,2,4,4,2,3,4,4,4,4,4,7,7,4,4,1,0,0,0,0,0,0],[0,0,0,0,0,1,2,2,2,2,2,2,2,3,3,4,4,3,3,3,3,3,4,1,0,0,0,0,0,0],[0,0,0,0,0,0,1,2,2,2,2,1,2,3,3,4,3,2,2,2,2,2,2,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,2,2,2,2,1,2,3,3,3,2,8,8,8,8,2,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,2,2,2,2,1,2,3,3,3,3,3,3,3,2,1,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,1,2,4,1,2,3,3,3,3,3,3,2,1,0,0,0,0,0,0],[0,0,0,0,0,1,9,9,10,10,10,10,1,4,1,1,2,3,3,3,3,2,2,1,0,0,0,0,0,0],[0,0,0,0,1,11,1,1,9,10,10,10,10,1,4,4,1,2,3,3,3,2,1,10,1,0,0,0,0,0],[0,0,0,0,1,12,11,11,1,9,10,10,10,10,1,4,4,1,2,2,2,1,10,10,1,1,0,0,0,0],[0,0,0,1,12,12,12,12,11,1,10,10,10,10,10,1,11,4,1,1,1,10,10,10,1,11,1,0,0,0],[0,0,0,1,12,12,12,12,12,1,9,10,10,10,10,10,1,11,4,1,10,10,10,10,1,11,1,0,0,0],[0,0,0,1,12,12,12,12,12,11,1,9,10,10,10,10,10,1,11,1,10,10,10,10,1,12,1,0,0,0],[0,0,1,12,12,12,12,12,12,11,1,9,10,10,10,10,10,10,1,10,10,10,10,10,1,12,1,0,0,0],[0,0,1,12,12,12,12,12,12,11,1,9,10,10,10,10,10,10,10,10,10,10,10,10,1,12,1,0,0,0],[0,1,12,12,12,12,12,12,12,11,1,9,10,10,10,10,10,10,10,10,10,10,10,10,1,12,12,1,0,0],[0,1,12,12,12,12,12,12,12,11,1,9,10,10,10,10,10,10,10,10,10,10,10,1,11,12,12,1,0,0],[0,1,12,12,12,12,12,12,12,11,1,9,10,10,10,10,10,10,10,10,10,10,10,1,11,12,12,1,0,0],[0,1,12,12,12,12,12,12,11,1,9,10,10,10,10,10,10,10,10,10,10,10,10,1,11,12,12,1,0,0],[1,11,12,12,12,12,12,12,11,1,10,10,10,10,10,10,10,10,10,10,10,10,10,1,11,12,12,1,0,0],[1,11,12,12,12,12,12,12,11,1,10,10,10,10,10,10,10,10,10,10,10,10,10,1,11,12,12,1,0,0],[1,11,12,12,12,12,12,11,1,9,10,10,10,10,10,10,10,10,10,10,10,10,10,1,11,12,12,12,1,0],[1,11,12,12,12,12,12,11,1,9,9,10,10,10,10,10,10,10,10,10,10,10,10,1,11,11,12,12,1,0],[1,11,11,12,12,12,12,11,1,9,9,9,10,10,10,10,10,10,10,10,10,10,10,1,11,11,12,12,12,1],[1,11,11,11,12,12,12,11,1,1,1,1,1,1,1,1,13,13,13,13,13,1,1,1,11,11,12,12,12,1],[1,11,11,11,11,11,11,11,1,2,2,2,2,2,2,2,13,2,2,2,13,2,2,1,11,11,12,12,12,1],[1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,13,2,2,2,13,2,2,1,1,1,1,1,1,1],[0,1,4,4,4,4,4,1,1,1,1,1,1,1,1,1,13,13,13,13,13,1,1,1,1,4,4,4,1,0],[0,1,4,4,4,4,4,1,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,1,4,4,4,1,0],[0,1,4,4,4,4,4,4,1,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,1,4,4,4,1,0],[0,1,4,4,4,4,4,4,4,1,9,10,10,10,10,10,10,10,10,10,10,10,10,10,1,4,4,4,1,0],[0,1,4,4,4,4,4,4,4,1,9,10,10,10,10,10,10,10,1,10,10,10,10,10,1,4,4,4,1,0],[0,1,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,14,1,1,1,1,1,4,4,4,4,1,0],[0,1,4,4,4,4,4,4,4,1,14,15,15,15,15,15,15,15,1,14,15,15,15,1,4,4,4,4,1,0],[0,0,1,4,4,4,4,4,1,14,15,15,15,15,15,15,15,1,14,15,15,15,15,1,4,4,4,1,0,0],[0,0,0,1,1,1,1,1,14,15,15,15,15,15,15,15,1,14,15,15,15,15,15,1,1,1,1,0,0,0],[0,0,0,0,0,0,1,14,15,15,15,15,15,15,15,1,14,14,15,15,15,15,15,1,0,0,0,0,0,0],[0,0,0,0,0,0,1,15,15,15,15,15,15,15,15,1,14,15,15,15,15,15,15,1,0,0,0,0,0,0],[0,0,0,0,0,0,1,15,15,15,15,15,15,15,15,1,14,15,15,15,15,15,15,1,0,0,0,0,0,0],[0,0,0,0,0,0,1,15,15,15,15,15,15,15,15,1,14,15,15,15,15,15,15,1,0,0,0,0,0,0],[0,0,0,0,0,0,1,15,15,15,15,15,15,15,15,1,14,15,15,15,15,15,15,1,0,0,0,0,0,0],[0,0,0,0,0,0,1,15,15,15,15,15,15,15,15,1,14,15,15,15,15,15,15,1,0,0,0,0,0,0],[0,0,0,0,0,0,1,15,15,15,15,15,15,15,1,1,14,15,15,15,15,15,15,1,0,0,0,0,0,0],[0,0,0,0,0,1,15,15,15,15,15,15,15,15,1,14,15,15,15,15,15,15,1,0,0,0,0,0,0,0],[0,0,0,0,0,1,15,15,15,15,15,15,15,15,1,14,15,15,15,15,15,15,1,0,0,0,0,0,0,0]],u=[[0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,2,2,2,2,2,2,2,2,2,1,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,1,2,3,3,3,3,3,3,3,3,3,2,2,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,2,3,3,3,3,3,3,3,3,3,3,3,3,2,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,2,3,3,3,3,3,3,3,3,3,3,3,2,3,3,3,3,3,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,3,3,3,3,3,3,3,3,3,2,2,2,4,2,3,3,3,3,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,3,3,3,3,3,3,3,3,3,2,4,4,4,4,4,2,3,3,3,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,3,3,3,3,3,3,3,3,2,4,4,4,4,4,4,4,2,3,3,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,3,3,3,3,3,3,3,2,4,4,4,4,4,4,4,4,4,2,3,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,3,3,3,3,3,3,3,2,3,3,3,4,4,4,3,3,3,2,3,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,3,3,3,3,3,3,2,4,4,3,3,4,4,4,3,3,4,2,3,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,3,3,3,3,3,2,4,4,4,4,4,4,4,4,4,4,4,2,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,2,3,3,4,4,3,2,4,4,5,6,4,4,4,4,5,6,4,2,1,0,0,0,0,0,0,0],[0,0,0,0,0,1,2,3,3,3,4,4,3,2,4,4,5,6,4,4,4,4,5,6,4,2,1,0,0,0,0,0,0,0],[0,0,0,0,0,1,2,3,3,3,4,4,3,2,4,4,5,6,4,4,4,4,5,6,4,2,1,0,0,0,0,0,0,0],[0,0,0,0,0,1,2,3,3,3,4,7,3,2,4,4,4,4,4,4,4,4,4,4,4,2,3,1,0,0,0,0,0,0],[0,0,0,0,0,1,2,3,3,3,3,3,3,2,4,4,4,4,4,4,8,8,4,4,4,2,3,1,0,0,0,0,0,0],[0,0,0,0,1,2,3,3,3,3,3,3,3,3,2,4,4,4,4,4,4,4,4,4,1,2,3,3,1,0,0,0,0,0],[0,0,0,1,2,2,3,3,3,3,3,3,3,3,2,4,4,4,9,9,9,9,4,4,1,3,3,3,1,0,0,0,0,0],[0,0,0,1,2,3,3,3,3,3,3,3,3,3,2,1,4,4,4,4,4,4,4,1,2,3,3,3,1,0,0,0,0,0],[0,0,0,1,2,3,3,3,3,3,3,3,3,3,3,2,1,4,4,4,4,4,1,2,3,3,3,3,1,0,0,0,0,0],[0,0,0,0,1,2,3,3,3,3,3,3,3,3,3,2,4,1,1,4,4,1,2,2,3,3,3,1,0,0,0,0,0,0],[0,0,0,0,1,2,3,3,3,2,3,3,3,3,3,2,4,4,4,1,1,2,2,3,3,3,3,1,0,0,0,0,0,0],[0,0,0,1,2,2,3,3,2,2,3,3,3,3,3,2,4,4,4,4,4,4,2,3,3,3,3,1,0,0,0,0,0,0],[0,0,0,1,2,3,3,1,1,2,2,3,3,2,1,4,4,4,4,4,4,4,4,2,3,3,3,1,0,0,0,0,0,0],[0,0,1,2,3,3,1,10,10,1,2,3,3,3,2,1,4,4,4,4,4,4,4,2,3,3,2,1,1,0,0,0,0,0],[0,0,1,2,3,1,10,11,11,10,1,2,3,3,2,12,1,4,4,4,4,4,4,2,1,3,1,11,1,1,0,0,0,0],[0,0,1,2,3,1,10,11,11,11,10,1,2,3,2,12,7,1,11,4,4,4,11,1,2,2,1,11,11,1,0,0,0,0],[0,0,0,1,2,1,11,11,11,11,11,1,2,3,12,7,7,7,1,11,4,11,1,7,7,7,1,11,11,1,0,0,0,0],[0,0,0,0,1,10,11,11,11,11,11,1,2,12,7,7,7,7,7,1,11,1,7,7,7,7,1,11,11,1,0,0,0,0],[0,0,0,0,1,10,11,11,11,11,11,1,2,12,7,7,7,7,7,7,1,7,7,7,7,7,1,11,11,11,1,0,0,0],[0,0,0,0,1,10,11,11,11,11,11,1,12,12,7,7,7,7,7,7,7,7,7,7,7,7,1,11,11,11,1,0,0,0],[0,0,0,1,10,10,11,11,11,11,11,1,12,7,12,7,7,7,7,7,7,7,7,7,7,7,1,11,11,11,1,0,0,0],[0,0,0,1,10,11,11,11,11,11,10,1,12,7,7,12,7,7,12,12,12,12,12,12,7,12,1,11,11,11,1,0,0,0],[0,0,0,1,10,11,11,11,11,11,10,1,12,12,7,7,12,12,7,7,7,7,7,7,12,1,10,11,11,11,1,0,0,0],[0,0,0,1,10,11,11,11,11,11,1,0,1,12,7,7,7,7,7,7,7,7,7,7,7,1,10,11,11,11,11,1,0,0],[0,0,1,10,11,11,11,11,11,11,1,0,1,12,7,7,7,7,7,7,7,7,7,7,7,1,10,11,11,11,11,1,0,0],[0,0,1,10,11,11,11,11,11,11,1,0,1,12,12,7,7,7,7,7,7,7,7,7,7,1,10,11,11,11,11,1,0,0],[0,1,10,10,11,11,11,11,11,11,1,1,1,1,12,12,7,7,7,7,7,7,7,7,12,1,10,11,11,11,11,11,1,0],[1,10,11,11,11,11,11,11,11,11,1,13,1,2,1,1,1,1,1,1,1,1,1,1,1,2,10,11,11,11,11,11,11,1],[1,10,11,11,11,11,11,11,11,11,1,13,1,2,2,2,2,2,2,2,2,2,2,2,2,2,10,11,11,11,11,11,11,1],[1,10,11,11,11,11,11,11,11,11,1,13,13,1,2,2,2,2,2,2,2,2,2,2,2,1,10,11,11,11,11,11,11,1],[1,10,11,11,11,11,11,11,11,1,13,13,13,13,1,2,2,2,2,2,2,2,2,1,1,1,1,10,11,11,11,11,11,1],[1,10,10,11,11,11,11,11,10,1,13,13,6,13,13,1,1,1,1,1,1,1,1,1,13,13,13,1,11,11,11,11,11,1],[1,10,10,10,10,11,11,10,1,13,13,6,6,6,13,13,13,13,13,13,13,13,13,13,13,6,6,1,10,11,11,11,11,1],[0,1,1,1,1,1,1,1,1,13,13,6,6,6,6,6,6,6,6,6,13,6,6,13,13,6,6,6,1,1,1,1,1,0],[0,0,1,2,2,2,2,2,1,13,13,6,6,6,6,6,6,6,6,6,13,6,6,6,13,6,6,6,1,2,2,2,1,0],[0,0,1,1,1,1,1,1,1,13,6,6,6,6,6,6,6,6,6,6,6,6,6,6,13,6,6,6,1,1,1,1,1,0],[0,1,4,4,4,4,4,4,1,13,6,6,6,6,6,6,6,6,6,6,6,6,6,6,13,6,6,6,1,4,4,4,4,1],[0,1,4,4,4,4,4,4,4,1,13,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,1,4,4,4,4,1],[0,1,4,4,4,4,4,4,4,1,13,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,1,4,4,4,4,1],[0,1,4,4,4,4,4,4,4,1,13,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,1,4,4,4,4,1],[0,1,4,4,4,4,4,4,4,1,13,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,1,4,4,4,1],[0,0,1,4,4,4,4,4,1,13,13,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,1,4,4,1,0],[0,0,1,4,4,4,4,4,1,13,13,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,1,4,1,0,0],[0,0,0,1,1,1,1,1,13,13,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,1,1,0,0,0],[0,0,0,0,0,0,1,13,13,13,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,1,0,0,0,0],[0,0,0,0,0,0,1,13,13,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,1,0,0,0,0],[0,0,0,0,0,1,1,13,13,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,1,0,0,0,0]]},"./src/effects/fumes.js":(e,t,n)=>{n.r(t),n.d(t,{WebGLHandler:()=>s,makeFumesShader:()=>i});let i=(e,t,n)=>`#version 300 es\n#define oct 5\nprecision highp float;uniform float v;uniform vec2 f;in vec2 m;out vec4 o;float n(vec2 v){return fract(sin(dot(v.xy,vec2(1,300)))*43758.5453123);}float t(vec2 v){vec2 m=floor(v);v=fract(v);float f=n(m),x=n(m+vec2(1,0));v=v*v*(3.-2.*v);return mix(f,x,v.x)+(n(m+vec2(0,1))-f)*v.y*(1.-v.x)+(n(m+vec2(1))-x)*v.x*v.y;}float x(vec2 v){float m=0.,x=.4;for(int f=0;f<oct;f++)m+=x*t(v),v*=2.,x*=.4;return m;}void main(){vec2 e=m.xy;e.x*=f.x/f.y;float n=mix(e.y*.2+.1,e.y*1.2+.9,x(e));e=vec2(e.x,e.y-v*.2)*9.;float i=x(e),d=.9*x(e+i+v)-.5,D=.9*x(vec2(i,d));i=x(vec2(d,i));o=vec4(mix(vec3(0),vec3(${e/255},${t/255},${n/255}),i+.5)+vec3(i-n),.5);}`;class s{vertexShaderSource="#version 300 es\nprecision mediump float;const vec2 e[6]=vec2[6](vec2(-1),vec2(1,-1),vec2(-1,1),vec2(-1,1),vec2(1,-1),vec2(1));out vec2 m;void main(){m=e[gl_VertexID];gl_Position=vec4(e[gl_VertexID],0,1);}";constructor(e,t){this.cn=e,this.gl=e.getContext("webgl2"),this.gl.colorMask(!0,!0,!0,!1),this.startTime=Date.now(),this.program=this.gl.createProgram(),this.compileShader(this.vertexShaderSource,this.gl.VERTEX_SHADER),this.compileShader(t,this.gl.FRAGMENT_SHADER),this.gl.linkProgram(this.program),this.gl.useProgram(this.program),this.timeLocation=this.gl.getUniformLocation(this.program,"v"),this.resolutionLocation=this.gl.getUniformLocation(this.program,"f"),this.render()}compileShader(e,t){let n=this.gl.createShader(t);return this.gl.shaderSource(n,e),this.gl.compileShader(n),this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS)?this.gl.attachShader(this.program,n):(this.gl.deleteShader(n),null)}render=()=>{this.gl.uniform1f(this.timeLocation,(Date.now()-this.startTime)/1e3),this.gl.uniform2fv(this.resolutionLocation,[this.cn.width,this.cn.height]),this.gl.drawArrays(this.gl.TRIANGLES,0,6),window.requestAnimationFrame(this.render)}}},"./src/entities/Cat.js":(e,t,n)=>{n.r(t),n.d(t,{Cat:()=>l});var i=n("./src/config/ItemManager.js"),s=n("./src/drawables/images.js"),o=n("./src/utils/interaction.js"),a=n("./src/utils/random.js"),r=n("./src/entities/generic/Drawable.js");class l extends r.Drawable{constructor(e){super(e,s.cat,["#000000ff","#282828ff","#171717ff"],{x:5,y:0,width:23,height:22}),this.canvas=e,this.hunger=0,this.isGone=!1,(0,o.onClick)(this.canvas,()=>{this.onClick()}),(0,o.onMouseUp)(this.canvas,e=>(window.shop.currentlyHolding&&"animal"===window.shop.currentlyHolding.type&&(window.shop.currentlyHoldingOrigin.remove(window.shop.currentlyHolding),window.shop.drawCurrentWindow(),window.shop.currentlyHoldingOrigin.draw(),window.shop.currentlyHolding=null,window.shop.currentlyHoldingOrigin=null,this.hunger=0),!1)),(0,o.onMouseIn)(this.canvas,()=>(window.tooltipShowWithIcon(e.toDataURL(),"your black cat","she "+(this.hunger>70?"looks hungry":this.hunger<50?"is purring happily":"looks restless")),!1),!1),this.doMischief()}doMischief(){if(window.paused||this.isGone)setTimeout(()=>{this.doMischief()});else{if(this.hunger>70&&(0,a.pick)(!0,!0,this.hunger>=100))if(window.player.inventory.items.length>0){this.bounce();let e=(0,a.pick)(...window.player.inventory.items);"animal"===e.type&&(this.hunger=0),window.player.inventory.remove(e),window.shop.drawCurrentWindow()}else this.isGone||(this.disappear(),setTimeout(()=>{this.appear(),this.hunger=0},3e4));setTimeout(()=>{this.doMischief(),this.hunger=Math.min(this.hunger+(0,a.int)(0,10),100)},(0,a.int)(6e3,1e4))}}bounce(){this.canvas.classList.add("bounce"),setTimeout(()=>{this.canvas.classList.remove("bounce")},1e3)}appear(){this.isGone=!1,setTimeout(()=>{this.canvas.classList.add("out"),this.canvas.classList.remove("in"),this.canvas.classList.remove("out-anim"),this.canvas.classList.remove("in-anim"),setTimeout(()=>{this.canvas.classList.remove("out"),this.canvas.classList.add("in-anim")},1)},1),setTimeout(()=>{this.canvas.classList.remove("in-anim")},1e3)}disappear(){this.isGone=!0,setTimeout(()=>{this.canvas.classList.remove("out"),this.canvas.classList.remove("in"),this.canvas.classList.remove("out-anim"),this.canvas.classList.remove("in-anim"),setTimeout(()=>{this.canvas.classList.add("out-anim")},1)},1),setTimeout(()=>{this.canvas.classList.add("out"),this.canvas.classList.remove("out-anim")},1e3)}findItem(){return(0,a.pick)(...i.ItemManager.ingredients,...i.ItemManager.allItems).clone()}onClick(){this.hunger>=100||(this.disappear(),setTimeout(()=>{window.player.inventory.hasSpace&&setTimeout(()=>{(0,a.pick)(!0,!1,!1,!1,!1)?window.player.gold+=5===(0,a.int)(5,10)?(0,a.int)(10,100):(0,a.int)(5,10):window.player.inventory.add(this.findItem()),window.shop.drawCurrentWindow()},1e3),this.appear()},(0,a.int)(5e3,1e4)))}animate(){return this.blink([6,7],[10,16],2,1,1),!0}}},"./src/entities/Cauldron.js":(e,t,n)=>{n.r(t),n.d(t,{Cauldron:()=>d});var i=n("./src/utils/interaction.js"),s=n("./src/entities/generic/ItemContainer.js"),o=n("./src/effects/fumes.js"),a=n("./src/config/ItemManager.js"),r=n("./src/drawables/images.js"),l=n("./src/utils/colour.js");class d extends s.ItemContainer{constructor(e,t){super(e,t,r.cauldronTop,["#000000ff","#453333ff","#382828ff","#423030ff"]),this.size=3,this.sizeIncrement=1,this.brewingRecipe,this.resultSlot,this.brewProgressInterval}brew(){if(this.brewingRecipe)return;if(this.brewingRecipe=a.ItemManager.findRecipe(this.items),!this.brewingRecipe)throw this.items=[],this.drawContents(),Error("oops... ingredients ruined");window.player.knownRecipes.includes(this.brewingRecipe)||window.player.knownRecipes.push(this.brewingRecipe),this.items=[],this.draw(),setTimeout(()=>{this.resultSlot=this.brewingRecipe.result.clone(),this.brewingRecipe=null,this.draw(),window.shop.drawCurrentWindow(),this.drawProgress(e)},1e3*this.brewingRecipe.brewingTimeInSeconds);let e=this.brewingRecipe.brewingTimeInSeconds;return this.brewProgressInterval=setInterval(()=>{this.drawProgress(--e)},1e3),this.brewingRecipe}drawProgress(e){let t=document.getElementById("brewProgress");if(this.brewingRecipe&&t){let n=e/this.brewingRecipe.brewingTimeInSeconds*100+"%";t.style.background=`linear-gradient(90deg,${this.brewingRecipe.result.mainColour} 0%, ${this.brewingRecipe.result.mainColour} ${n}, #00000000 ${n})`}else clearInterval(this.brewProgressInterval)}drawContents(){super.drawContents(),this.parentElement.classList=["cauldron"];let e=document.createElement("button");e.innerText="recipes",(0,i.onClick)(e,()=>{let e=document.createElement("div");e.classList.add("recipes-container"),window.player.knownRecipes.forEach(t=>{e.appendChild(t.asElement())});let t=document.createElement("button");t.innerText="close",(0,i.onClick)(t,()=>{window.closePopUp()}),window.popUp([e,t])});let t=document.createElement("button");t.innerText="brew",this.brewingRecipe&&(t.disabled=!0),(0,i.onClick)(t,()=>{try{this.brew()}catch(e){window.popUpMsg(e.message,2500)}});let n=document.createElement("div");n.id="brewProgress",n.style.height="5px",n.style.width="100px",this.parentElement.appendChild(t),this.parentElement.appendChild(n);let s=document.createElement("div");if(s.classList.add("item-holder"),this.resultSlot){let e=this.resultSlot.draw();(0,i.onClick)(e,()=>{window.shelves.add(this.resultSlot),this.resultSlot=null}),s.appendChild(e)}else{let e=document.createElement("div");e.classList.add("item-container","empty");let t=document.createElement("div");t.classList.add("item"),e.appendChild(t),s.appendChild(e)}this.parentElement.appendChild(s),this.parentElement.appendChild(e)}draw(){if(super.draw(),this.brewingRecipe){let e=cldrnfx.appendChild(document.createElement("canvas"));e.style.display="block",e.width=cldrnfx.clientWidth/10,e.height=cldrnfx.clientHeight/10;let[t,n,i,s]=(0,l.hexToRgbA)(this.brewingRecipe.result.mainColour);new o.WebGLHandler(e,(0,o.makeFumesShader)(t,n,i))}else cldrnfx.innerHTML=""}}},"./src/entities/Customer.js":(e,t,n)=>{n.r(t),n.d(t,{Customer:()=>p});var i=n("./src/drawables/images.js"),s=n("./src/utils/audio-utils.js"),o=n("./src/utils/colour.js"),a=n("./src/utils/interaction.js"),r=n("./src/utils/random.js"),l=n("./src/entities/generic/Drawable.js");let d=e=>1===e.length?e[0].name:`${e.slice(0,-1).map(e=>e.name).join(", ")} and ${e[e.length-1].name}`,c=e=>{dlg_c.style.display="none",dlgt.innerHTML="",dlgo.innerHTML="",setTimeout(()=>{dlg_c.style.display="block",dlgt.innerHTML=e.text,setTimeout(()=>{h(e.options||[])},650)},200)},h=e=>{let t=document.createElement("ul");e.forEach(e=>{let n=document.createElement("li");n.innerHTML=e.text,(0,a.onClick)(n,()=>{e.action()}),(0,a.onMouseDown)(n,()=>{},s.Note.new("c",5,.05)),(0,a.onMouseIn)(n,()=>{},s.Note.new("f#",4,.05)),t.appendChild(n)}),dlgo.innerHTML="",dlgo.appendChild(t)},w=()=>{window.customer.disappear()},u=()=>{window.customer.doDialogue(window.customer.nextLine)},f=()=>{dlg_c.style.display="none",dlgt.innerHTML="",dlgo.innerHTML="",window.customer.waitForSale()};class p extends l.Drawable{constructor(e,t){let n=(0,o.newColour)((0,r.int)(0,360)/360,.5,.4)+"ff",s=(0,o.adjust)(n,-50)+"ff",l=(0,o.newColour)((0,r.int)(0,360)/360,.7,.3)+"ff",d=(0,o.newColour)((0,r.int)(0,360)/360,.8,.5)+"ff",c=`${(0,r.int)(22,99)}`.padStart(2,"0"),h=`${(0,r.int)(0,20)}`.padStart(2,"0"),w=`${(0,r.int)(0,20)}`.padStart(2,"0"),u=(0,o.base10ToHex)((0,r.int)(0,200)),f=(0,r.pick)(`#${u}${u}${u}ff`,`#${c}${h}${w}ff`),p=(0,o.adjust)(f,-20)+"ff",m=(0,r.pick)("#513021ff","#803716ff","#a96238ff","#f9bf91ff","#dfc9b8ff"),g=(0,r.pick)(!0,!1);super(e,g?i.femaleVillagerSkirt:i.maleVillagerBeard,g?["#000000ff",p,f,m,"#ffffffff",d,n,"#cd6644ff","#ce3b4dff","#77624cff","#e7d3bcff",s,(0,o.adjust)(d,-50)+"ff"]:["#000000ff",p,f,m,"#ffffffff",d,"#a2462dff","#8b2d16ff",s,n,"#b38558ff","#e9c897ff","#b26824ff",(0,o.adjust)(l,-50)+"ff",l]),this.isFemale=g,this.wants=t,this.inventory=[],this.goldNeeded=this.wants.reduce((e,t)=>e+t.value,0),this.gold=(0,r.pick)(this.goldNeeded,this.goldNeeded,(0,r.int)(this.goldNeeded/2,2*this.goldNeeded),30),this.currentLineIndex=-1,this.justBrowsing=(0,r.pick)(!0,!1,!1,!1),this._waitingTimeout=null,this.hasWaited=!1,(0,a.onMouseUp)(this.canvas,()=>{this.onMouseUp()}),(0,a.onMouseIn)(this.canvas,()=>{this.onMouseIn()},!1)}get lines(){let e=`${(0,r.pick)("do you have","may i have")} ${d(this.wants)}?`,t=(0,r.pick)("just browsing","i'm just looking");return[{text:(0,r.pick)("hi!","hello!"),options:[{text:`${(0,r.pick)("hello!","hi!")} ${(0,r.pick)("how can i help?","need something?")}`,action:u},{text:"get the hells out of my shop!",action:w}]},this.justBrowsing?{text:t,options:[{text:"sure",action:()=>{(0,r.pick)(!0,!1,!1)&&(this.justBrowsing=!1,this.currentLineIndex=0),dlg_c.style.display="none",dlgt.innerHTML="",dlgo.innerHTML="",setTimeout(()=>{u()},(0,r.int)(1e3,5e3))}},{text:(0,r.pick)("get the hells out of my shop!","this isn't a museum"),action:w}]}:{text:e,options:[{text:`that will be ${this.goldNeeded}ðŸª™`,action:f},{text:`that will be ${Math.floor(1.5*this.goldNeeded)}ðŸª™`,action:()=>{this.goldNeeded=Math.floor(1.5*this.goldNeeded),f()}},{text:"i can't help you with that",action:w}]},{text:(0,r.pick)("bye!","have a good day"),options:[{text:(0,r.pick)("come again!","take care!"),action:w}]}]}get nextLine(){return this.currentLineIndex++,this.lines[this.currentLineIndex]}doDialogue(e){c(e||this.nextLine)}appear(){this.canvas.style.bottom=10*(0,r.pick)(-4,0)+"px",this.canvas.style.transform="scale(1,1)",this.canvas.style.left="32px",setTimeout(()=>{this.doDialogue()},650)}disappear(){this.canvas.style.transform="scale(-1,1)",dlg_c.style.display="none",dlgt.innerHTML="",dlgo.innerHTML="",setTimeout(()=>{this.canvas.style.left="-340px",setTimeout(()=>{this.canvas.remove(),window.customer=null},1e3)},200)}pay(e){this.gold-=e,c({text:(0,r.pick)(`here's ${e}ðŸª™`),options:[{text:"thanks!",action:()=>{player.gold+=e,window.shop.drawCurrentWindow(),w()}}]})}returnItems(){try{window.player.inventory.addAll(this.inventory)}catch(e){return void window.popUpMsg("not enough shelf space",2e3)}this.inventory=[],w(),window.shop.drawCurrentWindow()}waitForSale(){this._waitingTimeout=setTimeout(()=>{window.customer?this.hasAllItems(this.wants.map(e=>e.name))?(clearTimeout(this._waitingTimeout),this.gold>=this.goldNeeded?this.pay(this.goldNeeded):(0,r.pick)(!0,!1)?c({text:`i can't afford ${this.gold}ðŸª™ bye`,options:[{text:"okay",action:()=>{this.returnItems()}}]}):c({text:`i only have ${this.gold}ðŸª™`,options:[{text:"get the hells out of my shop!",action:()=>{this.returnItems()}},{text:"okay",action:()=>{this.pay(this.gold)}}]})):(0,r.int)(0,10)>8?this.hasWaited&&(0,r.pick)(!0,!0,!1)?c({text:"this is taking too long",options:[{text:"okay",action:()=>{this.returnItems()}}]}):c({text:(0,r.pick)("will it take long?","is it ready yet?"),options:[{text:(0,r.pick)("just a moment longer","i'm almost done"),action:()=>{this.hasWaited=!0,clearTimeout(this._waitingTimeout),f()}},{text:(0,r.pick)("i can't help you with that","i don't have that"),action:()=>{this.returnItems()}}]}):(clearTimeout(this._waitingTimeout),f()):clearTimeout(this._waitingTimeout)},1e3)}addAll(e){e.forEach(e=>this.add(e))}add(e){this.inventory.push(e)}hasItemType(e){return this.inventory.some(t=>t.name===e)}hasAllItems(e){return e.every(e=>this.hasItemType(e))}remove(e){if(!e)throw Error("item not found");return this.inventory=this.inventory.filter(t=>t.uuid!==e.uuid),e}wantsItem(e){return this.wants.map(e=>e.name).includes(e)}onMouseUp(){if(window.shop.currentlyHolding&&window.shop.currentlyHoldingOrigin!==this){if(!this.wantsItem(window.shop.currentlyHolding.name))return void this.doDialogue({text:"i don't want that",options:[{text:"okay",action:()=>{this.currentLineIndex=0,u()}}]});window.shop.currentlyHoldingOrigin.remove(window.shop.currentlyHolding),this.add(window.shop.currentlyHolding),window.shop.currentlyHolding=null,window.shop.currentlyHoldingOrigin=null,clearTimeout(this._waitingTimeout),this.waitForSale()}}onMouseIn(){let e=this.currentLineIndex>0?this.justBrowsing?"they're just browsing":`they want ${d(this.wants)}`:"you don't know what they want",t=this.inventory.length>0?`holding ${d(this.inventory)}`:"";window.tooltipShowWithIcon(this.canvas.toDataURL(),"customer",`${e}\n${t}`)}animate(){let e=[9,10],t=[16,17,21,22];return this.isFemale&&(e=[13,14,15],t=[16,17,22,23]),this.blink(e,t,4,5,6),!0}}},"./src/entities/Inventory.js":(e,t,n)=>{n.r(t),n.d(t,{Inventory:()=>r});var i=n("./src/config/ItemManager.js"),s=n("./src/drawables/images.js"),o=n("./src/utils/interaction.js"),a=n("./src/entities/generic/ItemContainer.js");class r extends a.ItemContainer{constructor(e,t){super(e,t,s.cupboard,["#000000ff","#5b2d19ff","#703c25ff"]),this.sizeIncrement=5,this.size=10,this.items=[]}drawContents(){super.drawContents(),this.parentElement.classList=["inventory"];let e=document.createElement("div");e.innerText=`${window.player.gold}ðŸª™`;let t=document.createElement("div");t.classList.add("debt"),t.innerText=window.player.debt>0?"(â†˜)":"",(0,o.onMouseIn)(t,()=>{window.tooltipShowWithIcon(null,"debt",`you owe ${window.player.debt}ðŸª™ (${window.player.dailyDebt}ðŸª™/day)`)},!1);let n=document.createElement("button");n.innerText="shop",n.onclick=()=>{let e=i.ItemManager.ingredients.map(e=>[`${e.shopPrice}ðŸª™ - ${e.name}`,()=>{window.player.buyItem(e.clone())}]),t=i.ItemManager.recipes.filter(e=>!window.player.knownRecipes.includes(e)).map(e=>[`${2*e.result.shopPrice}ðŸª™ - recipe: ${e.result.name}`,()=>{window.player.buyRecipe(e,2*e.result.shopPrice)}]);window.popUpWithOptions("shop",{...Object.fromEntries(e),...Object.fromEntries(t),close:window.closePopUp})};let s=document.createElement("button");s.innerText="take a loan (250ðŸª™)",s.onclick=()=>{window.player.debt>=750||(window.player.addDebt(312.5),window.player.gold+=250,this.drawContents())};let a=document.createElement("div");a.classList.add("gdisp"),a.appendChild(e),a.appendChild(t),a.appendChild(n),a.appendChild(s),this.parentElement.appendChild(a)}}},"./src/entities/Item.js":(e,t,n)=>{n.r(t),n.d(t,{Item:()=>i});class i{constructor(e,t,n,i,s){this.uuid=crypto.randomUUID(),this.name=e,this.type=t,this.value=n,this.icon=i,this.mainColour=s}get shopPrice(){return Math.ceil(this.value*window.shop.priceModifier)}draw(){let e=document.createElement("div");e.classList.add("item-container",`type-${this.type}`);let t=document.createElement("div");return t.classList.add("item"),t.innerText=this.name,t.style.backgroundImage=`url(${this.icon})`,e.appendChild(t),e}clone(){return new i(this.name,this.type,this.value,this.icon)}}},"./src/entities/Player.js":(e,t,n)=>{n.r(t),n.d(t,{Player:()=>a});var i=n("./src/config/ItemManager.js"),s=n("./src/drawables/images.js"),o=n("./src/entities/generic/Drawable.js");class a extends o.Drawable{constructor(e,t,n){super(e,s.witch,["#000000ff","#a8aba6ff","#bdc2c0ff","#d29558ff","#3f3a3aff","#ffffffff","#289769ff","#b46a47ff","#740c0cff"]),this.gold=t,this._debt=[],this.inventory=n,this.chosenOption,this.previousLine,this.knownRecipes=[i.ItemManager.recipes[0]]}get debt(){return this._debt.reduce((e,t)=>e+t.current,0)}get dailyDebt(){return this._debt.map(e=>{let t=Math.ceil(e.original/30);return Math.min(e.current,t)}).reduce((e,t)=>e+t,0)}get debtPortion(){return this._debt.reduce((e,t)=>e+t,0)/365}addDebt(e){this._debt.push({current:Math.ceil(e),original:Math.ceil(e)})}payDebt(){this._debt=this._debt.map(e=>{let t=Math.ceil(e.original/30),n=Math.min(e.current,t);return this.gold-=n,{...e,current:Math.max(0,Math.ceil(e.current-n))}}).filter(e=>e.current>0)}buyRecipe(e,t){if(this.gold<t)return window.closePopUp(100),void setTimeout(()=>{window.popUpMsg("you don't have enough ðŸª™",1500)},500);this.gold-=t,this.knownRecipes.push(e)}buyItem(e){if(this.gold<e.shopPrice)return window.closePopUp(100),void setTimeout(()=>{window.popUpMsg("you don't have enough ðŸª™",1500)},500);try{this.inventory.add(e)}catch(e){return window.closePopUp(500),void setTimeout(()=>{window.popUpMsg(e.message,1500)},500)}this.gold-=e.shopPrice}animate(){return this.blink([10,11],[16,17,22,23],4,7,6,!window.customer),!0}}},"./src/entities/Recipe.js":(e,t,n)=>{n.r(t),n.d(t,{Recipe:()=>i});class i{constructor(e,t,n){this.result=e,this.ingredients=t.toSorted((e,t)=>e.name.localeCompare(t.name)),this.brewingTimeInSeconds=n}asElement(){let e=document.createElement("div");e.classList.add("rcp");let t=document.createElement("div");return t.classList.add("op"),t.innerText=" = ",e.appendChild(this.result.draw()),e.appendChild(t),this.ingredients.forEach(t=>{let n=document.createElement("div");n.classList.add("op"),n.innerText=" + ",e.appendChild(t.draw()),e.appendChild(n)}),e.lastChild.remove(),e}}},"./src/entities/Shop.js":(e,t,n)=>{n.r(t),n.d(t,{Shop:()=>a});var i=n("./src/utils/dates.js"),s=n("./src/utils/draw.js"),o=n("./src/utils/random.js");class a{constructor(){this.currentWindow="inventory",this._currentlyHolding,this.currentlyHoldingOrigin,this.drawables=[],this.date=new Date(2025,0,1),this.previousDate,this.priceModifier=1.2}get currentlyHolding(){return this._currentlyHolding}set currentlyHolding(e){this._currentlyHolding=e,e&&e.icon?(0,s.resizeImage)(e.icon,4,e=>{document.body.style.cursor=`url(${e}), pointer`}):document.body.style.cursor="auto"}resetCalendar(){clndrds.innerHTML="",clndrm.innerHTML=`${(0,i.getMonth)(this.date)} ${this.date.getFullYear()}`;let e=this.date.getDay()||7;for(let t=0;t<e-1;t++){let e=document.createElement("div");e.classList.add("day-empty"),clndrds.appendChild(e)}for(let t=0;t<(0,i.daysInMonth)(this.date);t++){let n=document.createElement("div");n.classList.add("day",`day-${t+1}`,"day-w"+(e+t)%7),clndrds.appendChild(n)}}selectCauldron(){this.currentWindow="cauldron"}selectShelf(){this.currentWindow="inventory"}increaseTime(){(0,i.incrementDate)(this.date),clndrd.innerHTML=this.date.getDate(),document.querySelector(`.day-${this.date.getDate()}`).classList.add("ticked"),1===this.date.getDate()&&(this.dueRent(),this.resetCalendar()),this.priceModifier=(0,o.int)(2,30)/10,this.dueDebt()}dueDebt(){window.player.debt&&(window.player.payDebt(),this.drawCurrentWindow())}dueRent(){window.paused=!0,window.popUpWithOptions("rent is due",{"pay (1000ðŸª™)":()=>{window.player.gold-=1e3,window.paused=!1,window.closePopUp()}})}drawCurrentWindow(){"cauldron"===this.currentWindow?window.cauldron.drawContents():window.player.inventory.drawContents()}draw(){this.drawCurrentWindow(),this.drawables.forEach(e=>e?.draw())}}},"./src/entities/generic/Drawable.js":(e,t,n)=>{n.r(t),n.d(t,{Drawable:()=>o});var i=n("./src/utils/draw.js"),s=n("./src/utils/random.js");class o{constructor(e,t,n,i){this.canvas=e,this.background=n[1],this.imageMatrix=t,this.colours=n,this.crop=i,this.animateInterval}draw(){if(this.imageMatrix){this.canvas.width=this.crop?this.crop.width:this.imageMatrix[0].length,this.canvas.height=this.crop?this.crop.height:this.imageMatrix.length,this.canvas.style.width=10*this.canvas.width+"px",this.canvas.style.height=10*this.canvas.height+"px";let e=this.canvas.getContext("2d");e.clearRect(0,0,e.canvas.width,e.canvas.height),(0,i.makeImage)(e,this.imageMatrix,this.colours,this.crop),this.animate()&&(clearInterval(this.animateInterval),this.animateInterval=setInterval(()=>{this.animate(),e.clearRect(0,0,e.canvas.width,e.canvas.height),(0,i.makeImage)(e,this.imageMatrix,this.colours,this.crop)},250))}}animate(){return!1}blink(e,t,n,i,o,a){this.imageMatrix[e[0]][t[0]]!==n&&1>(0,s.int)(0,35)?e.forEach(e=>{t.forEach((t,i)=>{this.imageMatrix[e][t]=n})}):e.forEach(e=>{t.forEach((t,n)=>{this.imageMatrix[e][t]=n%2?o:i,a&&n<2&&(this.imageMatrix[e][t]=n%2?i:o)})})}}},"./src/entities/generic/ItemContainer.js":(e,t,n)=>{n.r(t),n.d(t,{ItemContainer:()=>o});var i=n("./src/utils/interaction.js"),s=n("./src/entities/generic/Drawable.js");class o extends s.Drawable{constructor(e,t,n,s,o){super(e,n,s,o),this.triggerElement=e,this.parentElement=t,this.upgradeCost=50,this.size=10,this.items=[],(0,i.onMouseUp)(this.triggerElement,()=>{this.onMouseUp()})}get hasSpace(){return this.items.length<this.size}addAll(e){e.forEach(e=>this.add(e))}add(e){if(!this.hasSpace)throw Error("it's full");this.items.push(e)}hasItemType(e){return this.items.some(t=>t.name===e)}hasAllItems(e){return e.every(e=>this.hasItemType(e))}remove(e){if(!e)throw Error("item not found");return this.items=this.items.filter(t=>t.uuid!==e.uuid),e}upgrade(){window.player.gold>=this.upgradeCost&&(this.size=this.size+this.sizeIncrement,window.player.gold-=this.upgradeCost,this.upgradeCost=Math.ceil(1.5*this.upgradeCost)),this.drawContents()}onMouseDownItem(e,t,n){window.shop.currentlyHolding=e,window.shop.currentlyHoldingOrigin=this}onMouseInItem(e,t,n){return window.tooltipShowWithIcon(e.icon,e.name,`${e.type}\n\nsells for: ${e.value}ðŸª™`),!1}onMouseUp(){if(window.shop.currentlyHolding&&window.shop.currentlyHoldingOrigin!==this){try{this.add(window.shop.currentlyHolding),window.shop.currentlyHoldingOrigin.remove(window.shop.currentlyHolding)}catch(e){window.popUpMsg(e.message,1500)}window.shop.currentlyHolding=null,window.shop.currentlyHoldingOrigin=null}}drawContents(){this.parentElement.innerHTML="",this.parentElement.style.background=this.background;let e=document.createElement("button");e.innerText=`upgrade (${this.upgradeCost}ðŸª™)`,window.player.gold>=this.upgradeCost?e.onclick=()=>this.upgrade():e.disabled=!0,this.parentElement.appendChild(e);let t=document.createElement("div");t.classList.add("item-holder"),this.items.forEach(e=>{let n=e.draw();(0,i.onMouseDown)(n,t=>this.onMouseDownItem(e,n,t)),(0,i.onMouseIn)(n,t=>this.onMouseInItem(e,n,t)),t.appendChild(n)});for(let e=this.items.length;e<this.size;e++){let e=document.createElement("div");e.classList.add("item-container","empty");let n=document.createElement("div");n.classList.add("item"),e.appendChild(n),t.appendChild(e)}this.parentElement.appendChild(t)}}},"./src/utils/audio-utils.js":(e,t,n)=>{n.r(t),n.d(t,{Music:()=>w,Note:()=>c,Track:()=>h,isMuted:()=>d,toggleSound:()=>l});let i=null,s=window.AudioContext||window.webkitAudioContext,o="undefined"!=typeof InstallTrigger,a=0,r={c:16.35,"c#":17.32,"d#":19.45,e:20.6,"f#":23.12,"g#":25.96,"a#":29.14,b:30.87},l=()=>a=!a,d=()=>a;class c{constructor(e,t,n){this.f=e,this.t=t,this.d=n}play(e,t){a||((e,t,n,a,r)=>{i||(i=new s);let l=n||.1,d=o?1e3*l:t||1e3*l,c=i.createGain(),h=i.createOscillator();h.connect(c),c.connect(i.destination),c.gain.value=a||.3,o?c.gain.setValueCurveAtTime([c.gain.value,c.gain.value/2,c.gain.value/4,c.gain.value/8,1e-5,0],i.currentTime,l):c.gain.exponentialRampToValueAtTime(1e-5,i.currentTime+l),h.type=r||"sine",h.frequency.value=e||440,h.start(),d&&setTimeout(()=>{h.stop()},d)})(this.f,this.d,this.t,e,t)}static new=(e,t,n,i)=>new c(r[e]*Math.pow(2,t),n,i)}class h{constructor(e,t,n,i){this.type=t,this.tempo=n||1,this.volume=i,this.noteIndex=0,this.notes=e,this.lastTime=0}playNextNote(e,t){e-this.lastTime>=t*this.tempo&&(this.notes[this.noteIndex]&&this.notes[this.noteIndex].play(this.volume,this.type),this.noteIndex++,this.noteIndex>=this.notes.length&&(this.noteIndex=0),this.lastTime=e)}}class w{constructor(e){this.tracks=e}play(e){window.playMusic&&this.tracks.forEach(t=>{t.playNextNote(e,234.375)})}}},"./src/utils/colour.js":(e,t,n)=>{n.r(t),n.d(t,{adjust:()=>s,base10ToHex:()=>l,hexToRgbA:()=>d,hsvToHex:()=>a,hsvToRgb:()=>o,newColour:()=>r});var i=n("./src/utils/random.js");let s=(e,t)=>e?"#"+e.replace(/^#/,"").replace(/../g,e=>("0"+Math.min(255,Math.max(0,parseInt(e,16)+t)).toString(16)).substr(-2)):"#00000000",o=(e,t,n)=>{let i,s,o,a=Math.floor(6*e),r=6*e-a,l=n*(1-t),d=n*(1-r*t),c=n*(1-(1-r)*t);switch(a%6){case 0:i=n,s=c,o=l;break;case 1:i=d,s=n,o=l;break;case 2:i=l,s=n,o=c;break;case 3:i=l,s=d,o=n;break;case 4:i=c,s=l,o=n;break;case 5:i=n,s=l,o=d}return[255*i,255*s,255*o]},a=(e,t,n)=>"#"+o(e,t,n).map(e=>Math.floor(e).toString(16).padStart(2,"0")).join("")+"ff",r=(e,t,n)=>a(null!==e?e:(0,i.int)(0,360)/360,t||.7,n||1),l=e=>e.toString(16).padStart(2,"0"),d=e=>[parseInt(e.slice(1,3),16),parseInt(e.slice(3,5),16),parseInt(e.slice(5,7),16),parseInt(e.slice(7,9),16)]},"./src/utils/dates.js":(e,t,n)=>{n.r(t),n.d(t,{daysInMonth:()=>i,getMonth:()=>s,incrementDate:()=>o});let i=e=>new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),s=e=>e.toLocaleString("default",{month:"long"}),o=e=>{e.setDate(e.getDate()+1)}},"./src/utils/draw.js":(e,t,n)=>{n.r(t),n.d(t,{asCanvas:()=>o,makeImage:()=>s,resizeImage:()=>a});var i=n("./src/utils/colour.js");let s=(e,t,n,s)=>{let o=t.map(e=>e.map(e=>(0,i.hexToRgbA)(["#00000000",...n][e]))),a=o[0].length,r=new ImageData(a,o.length);o.forEach((e,t)=>{e.forEach((e,n)=>{r.data.set(e,4*(t*a+n))})}),e.imageSmoothingEnabled=!1,e.putImageData(r,-s?.x||0,-s?.y||0)},o=(e,t,n)=>{let i=document.createElement("canvas"),o=i.getContext("2d");return i.width=e[0].length,i.height=e.length,s(o,e,t,n),i},a=(e,t,n)=>{let i=new Image;i.onload=function(){let e=document.createElement("canvas");e.width=i.width*t,e.height=i.height*t;let s=e.getContext("2d");s.imageSmoothingEnabled=!1,s.drawImage(i,0,0,e.width,e.height),n(e.toDataURL())},i.src=e}},"./src/utils/interaction.js":(e,t,n)=>{n.r(t),n.d(t,{onClick:()=>s,onMouseDown:()=>a,onMouseIn:()=>o,onMouseUp:()=>r});var i=n("./src/utils/audio-utils.js");let s=(e,t,n)=>e.addEventListener("click",e=>{!1!==n&&window.playSounds&&setTimeout(()=>(n||i.Note.new("f#",5,.05)).play(1),100),!1!==t(e)&&window.shop.draw()}),o=(e,t,n)=>e.addEventListener("mouseenter",e=>{!1!==n&&window.playSounds&&(n||i.Note.new("f#",5,.05)).play(1,"sine"),!1!==t(e)&&window.shop.draw()}),a=(e,t,n)=>e.addEventListener("mousedown",e=>{!1!==n&&window.playSounds&&(n||i.Note.new("c",5,.05)).play(1),!1!==t(e)&&window.shop.draw()}),r=(e,t,n)=>e.addEventListener("mouseup",e=>{!1!==n&&window.playSounds&&(n||i.Note.new("c",4,.05)).play(1),!1!==t(e)&&window.shop.draw()})},"./src/utils/random.js":(e,t,n)=>{n.r(t),n.d(t,{int:()=>s,pick:()=>i});let i=(...e)=>e.length?e[s(0,e.length-1)]:null,s=(e,t)=>Math.floor(Math.random()*(t+1-e)+e)}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};(()=>{n.r(i);var e=n("./src/audio/music.js"),t=n("./src/config/ItemManager.js"),s=n("./src/config/setup.js"),a=n("./src/entities/Customer.js"),r=n("./src/utils/interaction.js"),l=n("./src/utils/random.js");window.paused=!1,window.popUpMsg=function(e,t){let n=document.createElement("p");n.innerText=e,window.popUp([n],t)},window.popUpWithOptions=function(e,t){let n=document.createElement("h1");n.innerText=e;let i=[n];Object.entries(t).forEach(([e,t])=>{let n=document.createElement("button");n.innerText=e,(0,r.onClick)(n,()=>{t()}),i.push(n)}),window.popUp(i)},window.popUp=function(e,t){msg.style.display="block",o.style.display="flex",e.forEach(e=>{msgt.appendChild(e)}),t&&window.closePopUp(t)},window.closePopUp=function(e){setTimeout(()=>{msg.style.top="-50%",setTimeout(()=>{msg.style.top="50%",o.style.display="none",msg.style.display="none",msgt.innerHTML=""},e/4)},(e=e||100)/4*3)},window.tooltipShowWithIcon=function(e,t,n){let i=document.createElement("div");i.classList.add("tooltipc");let s=document.createElement("div");s.classList.add("tooltipt");let o=document.createElement("div");o.classList.add("tooltipn"),o.innerText=t;let a=document.createElement("div");if(a.classList.add("item-icon-holder"),e){let t=document.createElement("img");t.classList.add("item-icon"),t.src=e,a.appendChild(t)}let r=document.createElement("div");r.innerText=n,s.appendChild(o),s.appendChild(r),i.appendChild(a),i.appendChild(s),tooltipShow(i)},window.tooltipShow=function(e){ttip.innerHTML="",ttip.appendChild(e),ttip.style.display="block"},window.tooltipHide=function(){ttip.innerHTML="",ttip.style.display="none"},window.main=function(){window.shop.draw(),setInterval(()=>{if(!window.paused&&!window.customer&&3>(0,l.int)(0,7)){let e=(0,l.int)(1,3),n=[],i=[...t.ItemManager.advancedPotions,...t.ItemManager.advancedPotions,...t.ItemManager.basicPotions,...t.ItemManager.allItems];1===window.shop.date.getDate()&&2025===window.shop.date.getFullYear()&&0===window.shop.date.getMonth()?(e=1,i=[t.ItemManager.basicPotions[0]]):2025===window.shop.date.getFullYear()&&0===window.shop.date.getMonth()?(e=(0,l.int)(1,2),i=[...t.ItemManager.basicPotions,...t.ItemManager.basicPotions,...t.ItemManager.basicPotions,...t.ItemManager.ingredients]):(window.shop.date.getMonth()>=3||2025===window.shop.date.getFullYear())&&(i=[...t.ItemManager.basicPotions,...t.ItemManager.basicPotions,...t.ItemManager.advancedPotions,...t.ItemManager.ingredients]);for(let t=0;t<e;t++)n.push((0,l.pick)(...i));let s=document.createElement("canvas");s.id="cstmr",c.after(s),window.customer=new a.Customer(s,[...new Set(n)]),window.customer.draw(),window.customer.appear()}},2e3),setInterval(()=>{!window.paused&&(window.shop.increaseTime(),window.player.gold<0&&(setTimeout(()=>{let e=250+Math.abs(window.player.gold),t=500+Math.abs(window.player.gold),n={restart:()=>window.location.reload()};window.player.debt<750&&(n[`take a loan (${e}ðŸª™)`]=()=>{window.player.gold+=e,window.player.addDebt(1.25*e),window.closePopUp(),window.shop.drawCurrentWindow(),window.paused=!1},n[`take a loan (${t}ðŸª™)`]=()=>{window.player.gold+=t,window.player.addDebt(1.25*t),window.closePopUp(),window.shop.drawCurrentWindow(),window.paused=!1}),window.popUpWithOptions("you're broke"+(window.player._debt.length>2?" and have too much debt":""),n)},1e3),window.paused=!0))},3e4)};let d=t=>{e.music.play(t),window.requestAnimationFrame(d)};(0,s.setup)(),main(),d()})()</script>