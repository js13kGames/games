function t(t){let e=0,s=2**(t/12)/1.24;return function(){var t=Math.tan(Math.cbrt(Math.sin(e*s/30)));if(!(44e3<=++e))return t*Math.pow(.9999,2*e)*.2}}const e=t=>t.split(",").map(t=>t.split(" ").flatMap(t=>isNaN(parseInt(t))?[]:[parseInt(t)])),s="11 -1 11,,11 15 18,,-9 3,,11 15 18,,-2 10,,18 13 10 10,,3 -9,,18 13 10 10,,",n="10 -2 10,,13 9 4,,3 -9,,9 13 4,,3 -9,,10 13 6,,4 -8,,-6 6 10 13,",r=""+s+s+s+n+",11 -1,,11 15 18,,-9 3,,11 15 18,,-2 10,,18 13 10 10,,3 -9,,18 13 10 10,,"+s+s+n,i={gen:function(t){let e=0,s=2**(t/12)*1.24;return function(){var t=(e*s/2&128)/96-.75;if(!(8800<=++e))return.2*t*Math.pow(.99985,e)}},notes:e(`${r},${r},,,`)},a="17,18 6,19 7,20 8,21 9,,22 10,,23 11,,24 12,,25 13,,26 14,,27 15 26,,27 15 26,,27 15 26,,",h="27 15 26,,27 15 26,,26 14,,25 13,,24 12,,5",o={gen:t,notes:e(`5 9 ${a} ${h} ${a} 26 15,,27 26 15,,27 26 15,,28 16,,28 16,,5 ${a} ${h} 17,18 6,19 7,20 8,21 9,,22 10,22 10,23 11,,24 12,,25 13,,26 14,,27 15 26,,27 15 26,,27 15 26,,27 26 15,,28 16,,28 16,,28 16,,28 16,,5 17 22 29,,5 17 20 29,,,,5 17 21 29,,0 12 21 29,,4 21 16 28,,3 21 15 27,,2 21 14 26,,4 12 24,,2 14 26,,1 13 25,,0 12 24,,3 -1 11 23,,0 12 24,,-2 10 22,,-2 10 22,,29 24 21 19 14,,29 21 19 14 24,,,,29 21 19 14,,29 14 19 21,,28 21 17 12,,27 21 16 11,,26 21 14,,-6 18,29 17,16 28,27 15,26 14,25 13,24 12,23 11,22 10,21 9,20 8,19 7,18 6,17 5,16 4,15 3,17 28 29,,17 29,,17 29,,17 29,,17 29,,28 15,,27 14,,26 13,,25 12,,24 11,,23 10,,22 9,,21 8,,22 10,,23 11,,24 12,,12 17 28 29 5,,28 17 12 5 29 24,,28 26 17 12 5 29,,28 17 12 5 29,,28 17 12 5 29,,4 16 28,,27 15,,26 14,,25 13,,,,19 8,,6,,5 17,,,,14,,,`)},c={gen:t,notes:e("17 29,30 18,31 19,32 20,33 21,34 22,23 35,36 24")};let p=[o,i],u=[];const d=(t,e,s)=>{t=Math.round(t*e);let n=0;if((t|=0)%5500==0)for(var r of s)if(void 0!==r.notes[t/5500]){var i;for(i of r.notes[t/5500])u.push(r.gen(i))}for(let t=0;t<u.length;++t){var a=u[t]();void 0!==a?n+=a:u.splice(t,1)}return n/8};class l extends AudioWorkletProcessor{speedUp=!1;playbackRate=1;state=0;constructor(){super(),this.currentIndex=0,this.chunkSize=128,this.sampleCount=44e3*o.notes.length/8,this.port.onmessage=this.handleMessage.bind(this)}handleMessage(t){"speed-up"===(t=t.data).name&&(this.speedUp=!0,this.currentIndex=0),"voices"===t.name&&(t.high&&1===this.state?this.state=2:t.high||(this.state=1,p=[i]))}process(t,e,s){var n=e[0][0],r=this.currentIndex,a=this.currentIndex+this.chunkSize;e=44e3/this.playbackRate;for(let t=r;t<a;t++)n[t-r]=d(t,this.playbackRate,this.speedUp?[c]:p);return this.currentIndex=a,this.speedUp&&this.currentIndex>c.notes.length*e/8&&(this.currentIndex=0,this.speedUp=!1,this.playbackRate=1.2),e=this.sampleCount/this.playbackRate,this.currentIndex>e&&(this.currentIndex=0),(0===this.currentIndex||this.currentIndex>=e/4)&&2===this.state&&(this.currentIndex=0,this.state=0,p=[o,i]),!0}}registerProcessor("music-processor",l);