<!doctype html><meta content="width=device-width,user-scalable=no,maximum-scale=1,user-scalable=0" name=viewport><meta content=#000 name=theme-color><style>body{margin:0;padding:0;background:#000}canvas{display:block;margin:0 auto;background:#644e39}</style><canvas></canvas><img id=obstacle src=./images/rock.png style=display:none> <img id=small_formation src=./images/small.png style=display:none> <img id=large_formation src=./images/big.png style=display:none> <img id=heart src=./images/heart.png style=display:none> <img id=jumbit_logo src=./images/logo.png style=display:none><script>$={},$.width=320,$.height=480,$.entities=[],$.gameOverWait=100,$.init=function(){$.RATIO=$.width/$.height,$.currentWidth=$.width,$.currentHeight=$.height,$.canvas=document.getElementsByTagName("canvas")[0],$.canvas.width=$.width,$.canvas.height=$.height,$.ctx=$.canvas.getContext("2d"),$.gameState="menu",$.speed=2,$.maxObstaclesOnScreen=15,$.nextObstacle=30,$.nextFormation=30,$.nextPowerup=$.util.random(2e3,6e3),$.gravity=.31875,$.base_y=$.canvas.height-41,$.resize(),$.resetGame(),$.loop()},$.resize=function(){$.currentHeight=window.innerHeight,$.currentWidth=$.currentHeight*$.ratio,($.android||$.ios)&&(document.body.style.height=window.innerHeight+50+"px"),$.canvas.style.width=$.currentWidth+"px",$.canvas.style.height=$.currentHeight+"px",window.setTimeout((function(){window.scrollTo(0,1)}),1)},$.resetGame=function(){$.startTime=(new Date).getTime(),$.entities=[],$.hero=new $.Hero,$.entities.push($.hero)},$.states={menu:function(){$.Draw.startScreen()},game:function(){$.update(),$.render()},game_over:function(){$.Draw.gameOverScreen()}},$.update=function(){$.distanceCoveredStr=($.hero.distanceCovered/1e3).toString().match(/^\d+(?:\.\d{0,2})?/);var t=(new Date).getTime(),e=Math.floor((t-$.startTime)/60);if($.nextObstacle-=1+.001*e,$.nextObstacle<0){var i=$.generateRandomObstacleCoordinate($.base_y,400);"object"==typeof i&&$.entities.push(new $.Obstacle(i.x,i.y)),$.nextObstacle=80*Math.random()+30-.01*e}$.nextFormation-=1+.001*e,$.nextFormation<0&&($.entities.push(new $.Formation(350,0,$.util.random(0,1))),$.nextFormation=$.util.random(80,25)),$.nextPowerup-=10,$.nextPowerup<0&&$.hero.lives<=3&&($.entities.push(new $.Powerup($.util.random(100,400),$.base_y)),$.nextPowerup=$.util.random(2e3,2e4));for(var a=0;a<$.entities.length;a++){var n=$.entities[a];n.update();var r=$.checkRectCollision(n,$.hero);"obstacle"==n.type&&r.collide&&$.hero.invincible<=0?!1===n.hit&&(n.hit=!0,$.generateRockBlast(n.x,n.y,-1,r.ydir,5,n.w),$.hero.takeHit(),$.entities.splice(a,1)):"powerup"==n.type&&r.collide&&$.hero.invincible<=0&&($.hero.oneUp(),n.remove=!0),$.checkRectAbove(n,$.hero)&&(n.falling=!0),n.remove&&$.entities.splice(a,1)}0===$.hero.lives&&(0===$.gameOverWait?($.gameOverWait=100,$.gameState="game_over"):$.gameOverWait-=1)},$.renderStatusBar=function(){for(var t=0;t<$.hero.lives;t++)$.Draw.heart(10+21*t,25);$.Draw.text($.distanceCoveredStr,240,35,12,"#ddbeac"),$.Draw.text(" km",275,35,12,"#ddbeac")},$.render=function(){$.Draw.clear();for(var t=0;t<$.entities.length;t++)$.entities[t].render();$.renderStatusBar(),$.Draw.line({x:53,y:$.base_y+$.hero.height},{x:$.hero.width+100,y:$.base_y+$.hero.height})},$.loop=function(){window.requestAnimFrame($.loop),$.states[$.gameState]()},$.applyTapEvent=function(t){"game"===$.gameState?$.hero.startJump(t):"game_over"===$.gameState?($.resetGame(),$.gameState="menu"):$.gameState="game"};var touchStarted=!1;window.addEventListener("load",$.init,!1),window.addEventListener("resize",$.resize,!1),window.addEventListener("keyup",$.keyup),window.addEventListener("click",$.applyTapEvent),window.addEventListener("touchstart",(function(t){t.preventDefault(),"game"!==$.gameState?(touchStarted=!0,setTimeout((function(){touchStarted||$.applyTapEvent(t)}),200)):$.applyTapEvent(t)})),window.addEventListener("touchend",(function(t){t.preventDefault(),touchStarted=!1})),$.Draw={clear:function(){$.ctx.clearRect(0,0,$.width,$.height)},rect:function(t,e,i,a,n){$.ctx.beginPath(),$.ctx.rect(t,e,i,a),$.ctx.fillStyle=n,$.ctx.fill()},line:function(t,e){$.ctx.save(),$.ctx.strokeStyle="rgba(221, 189, 172, 0.5)",$.ctx.moveTo(t.x,t.y),$.ctx.lineTo(e.x,e.y),$.ctx.stroke(),$.ctx.restore()},text:function(t,e,i,a,n){$.ctx.font="bold "+a+"px Monospace",$.ctx.fillStyle=n,$.ctx.fillText(t,e,i)},obstacle:function(t,e){var i=document.getElementById("obstacle");$.ctx.drawImage(i,t,e)},formation:function(t,e,i){var a=document.getElementById(i),n=(t+22)/100;$.ctx.save(),$.ctx.globalAlpha=n,$.ctx.drawImage(a,t,e),$.ctx.restore()},heart:function(t,e){var i=document.getElementById("heart");$.ctx.save(),$.ctx.globalAlpha=1,$.ctx.drawImage(i,t,e),$.ctx.restore()},startScreen:function(){$.Draw.clear();for(var t=5,e=0;10>e;e++){var i=e%2==0?"small_formation":"large_formation";$.Draw.formation(t,0,i),t+=30}var a=document.getElementById("jumbit_logo");$.ctx.save(),$.ctx.globalAlpha=1,$.ctx.drawImage(a,50,80),$.ctx.restore();for(var n=["A spark of flame trapped in a cold cave.","Traveling through a breeze of wind, ","how long can you survive the unstable ","frozen formations in your way?"],r=180,o=0;o<n.length;o++)$.Draw.text(n[o],20,r,12,"#ddbdac"),r+=18;r+=45,$.Draw.text("Tap to survive!",40,r,25,"#dd1919"),r+=160,$.Draw.text("Art work ",20,r,12,"#ddbeac"),$.Draw.text("@shadeed9",80,r,12,"#ac907e"),r+=16,$.Draw.text("Programming ",20,r,12,"#ddbeac"),$.Draw.text("@aymanfarhat",105,r,12,"#ac907e")},gameOverScreen:function(){$.Draw.clear();for(var t=5,e=0;10>e;e++){var i=e%2==0?"small_formation":"large_formation";$.Draw.formation(t,0,i),t+=30}$.Draw.text("Game Over",70,180,35,"#ddbeac"),$.Draw.text("Managed to survive "+$.distanceCoveredStr+" km!",25,230,18,"#ddbeac"),$.Draw.text("Tap or click to continue",60,300,15,"#967a64")}},$.Formation=function(t,e,i){this.type="formation",this.x=t,this.y=e,this.vx=$.speed,this.formationType=.5>=i?"small_formation":"large_formation",this.remove=!1,this.opacity=1,this.fade=.01,this.pixelSize=5},$.Formation.prototype.render=function(){$.Draw.formation(this.x,this.y,this.formationType)},$.Formation.prototype.update=function(){this.x-=this.vx,this.x<=100&&(this.opacity-=this.fade),this.opacity<=0&&(this.remove=!0)},$.Hero=function(){this.x=75,this.y=$.base_y,this.vy=0,this.width=30,this.height=30,this.background=[240,47,47],this.opacity=1,this.onGround=!0,this.lives=6,this.distanceCovered=0,this.invincible=0,this.invincibleCount=0},$.Hero.prototype.render=function(){$.Draw.rect(this.x,this.y,this.width,this.height,$.util.arrayToRGBAString(this.background,this.opacity))},$.Hero.prototype.update=function(){this.width=5*this.lives,this.height=5*this.lives,this.vy+=$.gravity,this.y+=this.vy,this.y>$.base_y&&(this.vy=0,this.y=$.base_y,this.onGround=!0),this.distanceCovered+=$.speed,this.invincible>0?this.invincibleCount<5?(this.background=[255,165,0],this.invincibleCount++):(this.invincible-=this.invincibleCount,this.invincibleCount=0,this.background=[221,25,25]):this.background=[221,25,25]},$.Hero.prototype.startJump=function(){this.onGround&&this.y>70&&(this.vy=-8)},$.Hero.prototype.takeHit=function(){this.invincible=80,this.lives-=1},$.Hero.prototype.oneUp=function(){this.invincible=80,this.lives+=1},$.Obstacle=function(t,e){this.type="obstacle",this.x=t,this.y=e,this.vx=$.speed,this.vy=0,this.height=35,this.width=35,this.background="#aa856a",this.remove=!1,this.hit=!1,this.falling=!1},$.Obstacle.prototype.render=function(){$.Draw.obstacle(this.x,this.y,this.width,this.background)},$.Obstacle.prototype.update=function(){this.falling&&(this.vy+=$.gravity,this.y+=this.vy),this.x-=this.vx,this.remove=this.x<-100},$.Particle=function(t,e,i,a,n,r){this.type="particle",this.x=t,this.y=e,this.height=r,this.width=n,this.remove=!1,this.background=[188,151,125],this.opacity=1,this.fade=.01,this.dir=2*Math.random()>1?1:-1,this.vx=4*Math.random()*i,this.vy=7*Math.random()*a},$.Particle.prototype.render=function(){$.Draw.rect(this.x,this.y,this.width,this.height,$.util.arrayToRGBAString(this.background,this.opacity))},$.Particle.prototype.update=function(){this.x+=this.vx,this.y+=this.vy,this.vx*=.99,this.vy*=.99,this.opacity-=this.fade,this.opacity<=0&&(this.remove=!0)},$.Powerup=function(t,e){this.x=t,this.y=e,this.type="powerup",this.vx=$.speed,this.vy=1,this.width=18,this.height=18},$.Powerup.prototype.render=function(){$.Draw.heart(this.x,this.y)},$.Powerup.prototype.update=function(){this.x-=this.vx,this.y-=this.vy,this.remove=this.x<-100},window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},$.util={},$.checkRectCollision=function(t,e){var i=Math.max(t.x,e.x),a=Math.min(t.x+t.width,e.x+e.width),n=Math.max(t.y,e.y),r=Math.min(t.y+t.height,e.y+e.height);return{collide:a>=i&&r>=n&&t!=e,ydir:t.y<e.y?-1:1}},$.checkRectAbove=function(t,e){var i=Math.max(t.x,e.x);return Math.min(t.x+t.width,e.x+e.width)>=i&&t.y<e.y&&t!=e},$.generateRockBlast=function(t,e,i,a,n,r){$.entities.push(new $.Particle(t,e,i,a,r/3,r/3));for(var o=0;12>o;o++){var s=Math.floor(Math.random()*(n+1))+1;$.entities.push(new $.Particle(t,e,i,a,s,s))}},$.generateRandomObstacleCoordinate=function(t,e){var i=0,a=0;for(a=0;a<$.entities.length;a++)"obstacle"===$.entities[a].type&&i++;if(i<$.maxObstaclesOnScreen)return{x:$.canvas.width+10,y:t-Math.floor(Math.random()*e)+1}},$.util.arrayToRGBAString=function(t,e){return"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+e+")"},$.util.random=function(t,e){return Math.random()*(e-t)+t}</script>