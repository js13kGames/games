<!DOCTYPE html><html><body style="overflow:hidden;background-color:black"><script>const t=(t,i)=>{const h=document.createElement("canvas");return h.width=t,h.height=i,h},i=(t,i,h,s,e,o,a)=>{for(let n=h;n<h+8;++n)for(let h=i;h<i+8;++h){const i=n*s+h,r=a[o[e[Math.round(t.data[4*i]/85)]??0]??0]??[];for(let h=0;h<4;++h)t.data[4*i+h]=r[h]??255}},h=(h,s,e)=>{var o=m;const a=t(h.width,h.height),n=a.getContext("2d");n.drawImage(h,0,0);const r=n.getImageData(0,0,h.width,h.height),l=a.width/8|0,c=a.height/8|0;let g=0;for(let t=0;t<c;++t)for(let a=0;a<l;++a){if(g>=s.length)continue;const n=(s[g]??"0000").split("").map(t=>parseInt(t,32));i(r,8*a,8*t,h.width,n,o,e),++g}return n.putImageData(r,0,0),a},s=(i,h,s,e,o,a,n,r=0)=>{const l=t(s,e),c=l.getContext("2d");for(c.font=h,c.textAlign="center",i=i.split("\n"),--a;a>=0;--a)for(var g of(c.fillStyle=0==a?"#ffffff":"#000000",h=0,i)){for(let t=-r;t<=r;++t)for(let i=-r;i<=r;++i)Math.abs(t)==Math.abs(i)&&0!=t||c.fillText(g,s/2+t,a+(h+1)*o+i);++h}for(o=c.getImageData(0,0,s,e),r=0;r<s*e;++r)if(o.data[4*r+3]<127)o.data[4*r+3]=0;else{for(g=o.data[4*r]>128?0:1,i=0;i<3;++i)o.data[4*r+i]=n[g][i];o.data[4*r+3]=255}return c.putImageData(o,0,0),l},e=(t,i)=>((0|t)%(i|=0)+i)%i;function o(t,i){t.x=i.x,t.y=i.y}function a(t,i,h){return t.x=i,t.y=h,t}class n{constructor(t=0,i=0){this.x=t,this.y=i}length(){return Math.hypot(this.x,this.y)}rotate(t){const i=Math.sin(t);t=Math.cos(t);const h=this.x,s=this.y;return this.x=t*h-i*s,this.y=i*h+t*s,this}clone(){return new n(this.x,this.y)}}function r(t){var i=window.innerWidth,h=window.innerHeight;const s=t.i.width/t.i.height;let e=i,o=h;i/h>=s?e=Math.round(o*s):o=Math.round(e/s),t.i.style.width=String(e)+"px",t.i.style.height=String(o)+"px",t.i.style.left=String(i/2-e/2|0)+"px",t.i.style.top=String(h/2-o/2|0)+"px"}function l(t,i){t.h.fillStyle=i,t.h.fillRect(0,0,t.i.width,t.i.height)}function c(t,i,h=0,s=0,e=0,o=0,a=0,n=i.width,r=i.height,l=n,c=r,g=l/2,f=c/2,d){o|=0,a|=0,n|=0,r|=0,s=s+t.g.x|0,e=e+t.g.y|0,l|=0,c|=0,t=t.h;const u=0!=h||void 0!==d;u&&t.save(),1&h&&(t.translate(n,0),t.scale(-1,1),s*=-1),2&h&&(t.translate(0,r),t.scale(1,-1),e*=-1),void 0!==d&&(t.translate(g+s,f+e),t.rotate(-d),s=-g,e=-f),t.drawImage(i,o,a,n,r,s,e,l,c),u&&t.restore()}function g(t,i,h,s,e,o=0,a=0,n=0,r=0,l=0,g=i.width,f=i.height){s=2*Math.PI/s;const d=-Math.sin(e)*h/2;for(let u=0;u<f;++u)c(t,i,1&o,a+Math.sin(e+s*u)*h+d,n+u,r,l+(2&o?f-1-u:u),g,1)}function f(t,i,h,s,e,o=0,a=0,n=0,r=0,l=0,c=0){const g=i.width/16|0;s=s+t.g.x|0,e=e+t.g.y|0;var f=(h.length+1)*(g+o);for(1==n?s-=f/2|0:2==n&&(s-=0|f),n=s,r/=h.length,f=0;f<h.length;++f){const d=h.charCodeAt(f);10==d?(n=s,e+=g+a):(t.h.drawImage(i,d%16*g,((d/16|0)-2)*g,g,g,n,e+Math.round(Math.sin(c+f*r)*l),g,g),n+=g+o)}}function d(t,i,h,s,e=s){i=i+t.g.x|0,h=h+t.g.y|0,s|=0;for(let a=-(e|=0);a<=e;++a){var o=a/e;(o=Math.round(Math.sqrt(1-o*o)*s))<=0||t.h.fillRect(i-o,h+a,2*o,1)}}function u(t,i,h,s,e){if(!((s|=0)>=(e|=0))){i=i+t.g.x|0,h=h+t.g.y|0;for(let n=-e;n<=e;++n){var o=n/e;if(!((o=Math.round(Math.sqrt(1-o*o)*e))<=0)){var a=0;Math.abs(n)<s&&(a=n/s,a=Math.round(Math.sqrt(1-a*a)*s)),a<=0?t.h.fillRect(i-o,h+n,2*o,1):(t.h.fillRect(i-o,h+n,o-a,1),t.h.fillRect(i+a,h+n,o-a,1))}}}}function w(t,i=1){t.h.globalAlpha=Math.max(0,Math.min(1,i))}class p{constructor(t,i,h=!1){this.g=new n,this.width=t,this.height=i,[this.i,this.h]=((t,i,h=!0)=>{let s=null;h&&(s=document.createElement("div"),s.id="d",s.setAttribute("style","position: absolute; top: 0; left: 0; z-index: -1;"));const e=document.createElement("canvas");return e.setAttribute("style","position: absolute;z-index: -1;image-rendering: optimizeSpeed;image-rendering: pixelated;image-rendering: -moz-crisp-edges;"),e.width=t,e.height=i,h&&null!=s&&(s.appendChild(e),document.body.appendChild(s)),(t=e.getContext("2d")).imageSmoothingEnabled=!1,t.globalAlpha=1,[e,t]})(t,i,h),h&&(window.addEventListener("resize",()=>{r(this)}),r(this))}setColor(t){this.h.fillStyle=t,this.h.strokeStyle=t}fillRect(t=0,i=0,h=this.width,s=this.height){this.h.fillRect(t+this.g.x|0,i+this.g.y|0,0|h,0|s)}move(t,i){this.g.x+=t,this.g.y+=i}moveTo(t=0,i=0){this.g.x=t,this.g.y=i}}const m=[4,0,511,219,365,168,376,344,508,418,500,264,408,499,328,472,491,264,331,413,495,272,505],y="1002 1002 1002 109A 109A 109A 0009 10HG 1002 1002 1002 109A 109A 109A 10L9 10L9 1056 1056 1058 1076 1056 1056 1078 1078 1078 1078 1078 1078 1078 1078 1078 1078 107A 107A 10CA 10CB 10CD 10CD 10EF 10EF 107A 107A 10CB 10CB 10CD 10CD 10DF 10EF 10JK 10JK 10JK 10JK 10JK 10JK 000I 000I 10JK 10JK 10JK 10JK 10JK 10JK 000I 000I 1042 1042 0000 0000 0000 0000 0000 0000 1042 1042 0000 0000 0000 0000 0000 0000".split(" ");function A(t,i){if(void 0===(t=t.F.get(i)))throw Error(`Could not find a bitmap with id ${i}!`);return t}function v(t,i){if(void 0===(t=t.L.get(i)))throw Error(`Could not find a sample with id ${i}!`);return t}class M{get loaded(){return 0==this.g||this.h>=this.g}constructor(){this.g=this.h=0,this.F=new Map,this.L=new Map}}const C=["square","triangle","sawtooth","sine"];class x{constructor(t,i,h,s,e){this.i=0,this.j=void 0,this.h=t,this.g=Array.from(i),this.l=h,this.type=s,this.m=e,this.i=.4}play(t){const i=this.h.currentTime,h=this.h.createOscillator(),s=this.h.createGain(),e=["setValueAtTime","linearRampToValueAtTime","exponentialRampToValueAtTime"][this.m];h.type=C[this.type]??"square",t*=this.l;let o=this.g[2]*t;h.frequency.setValueAtTime(this.g[0],i),s.gain.setValueAtTime(this.i*o,i);let a=0;for(let n=0;n<this.g.length;n+=3){const r=this.g[n],l=this.g[n+1];o=Math.max(1e-4,Math.min(1,this.g[n+2]*t)),h.frequency[e](r,i+a),s.gain[e](o,i+a),a+=1/60*l}s.gain.exponentialRampToValueAtTime(.5*o,i+a),h.connect(s).connect(this.h.destination),h.start(i),h.stop(i+a),h.onended=()=>h.disconnect(),this.j?.disconnect(),this.j=h}}function b(t,i,h=1,s=0,e=2){return new x(t.h,i,h,s,e)}function E(t,i,h=.6){if(t.g)try{i.play(.6*h)}catch(t){}}function R(t,i=!t.g){t.g=i}function I(t){return"AUDIO: "+(t.g?"ON ":"OFF")}class T{constructor(t){this.g=!0,this.h=t}}class j{constructor(t=[],i=[]){this.timestamp=this.state=0,this.keys=t,this.H=i}ja(){return{state:this.state,timestamp:this.timestamp}}}function S(t,i,h,s,e){let o=i.get(h);void 0===o&&(o=[0,0],i.set(h,o)),e?1!=o[0]&&(o[0]=3,o[1]=s,t.g=!0):0!=o[0]&&(o[0]=2,o[1]=0)}function k(t){for(const i of t.values())3==i[0]?i[0]=1:2==i[0]&&(i[0]=0),!(1&i[0])&&(i[1]=0)}function N(t){for(const s of t.actions.values()){var i=t;s.state=0,s.timestamp=0;for(const t of s.keys){var h=i.h.get(t)??[0,0];0!=h[0]&&(s.state=h[0],h[1]>s.timestamp&&(s.timestamp=h[1]))}if(0==s.state)for(const t of s.H)0!=(h=i.i.get(t)??[0,0])[0]&&(s.state=h[0],h[1]>s.timestamp&&(s.timestamp=h[1]))}}function D(t){k(t.h),k(t.i),t.g=!1}function L(t,i){return t.actions.get(i)?.ja()??{state:0,timestamp:0}}class K{constructor(){this.g=!1,this.h=new Map,this.i=new Map,this.actions=new Map;const t=[],i=[];for(const h of[{id:0,keys:["ArrowRight","KeyD"],H:[],M:!0},{id:2,keys:["ArrowLeft","KeyA"],H:[],M:!0},{id:1,keys:["ArrowUp","KeyW"],H:[],M:!0},{id:3,keys:["ArrowDown","KeyS"],H:[],M:!0},{id:4,keys:["Space","Enter"],H:[],M:!0},{id:5,keys:[],H:["r","R"],M:!0},{id:6,keys:["Backspace"],H:[],M:!0},{id:7,keys:["Escape"],H:[],M:!1},{id:8,keys:["Escape","Enter"],H:[],M:!1}])h.M&&(t.push(...h.keys),i.push(...h.H)),this.actions.set(h.id,new j(h.keys,h.H));this.j=Array.from(new Set(t)),this.l=Array.from(new Set(i)),window.addEventListener("keydown",t=>{(this.j.includes(t.code)||this.l.includes(t.key))&&t.preventDefault(),S(this,this.h,t.code,t.timeStamp,!0),S(this,this.i,t.key,t.timeStamp,!0)}),window.addEventListener("keyup",t=>{(this.j.includes(t.code)||this.l.includes(t.key))&&t.preventDefault(),S(this,this.h,t.code,t.timeStamp,!1),S(this,this.i,t.key,t.timeStamp,!1)}),window.addEventListener("mousemove",()=>window.focus()),window.addEventListener("mousedown",()=>window.focus())}}const O=[0,1,0,-1,0],P=[0,0,-1,0,1],B=[0,3,4,1,2],F=["#000000","#ffb66d","#db6d00","#922400"];function J(t,i){const h=1e3/60*t.A,s=t.g.loaded;t.R=Math.min(t.R+(i-t.ba),5*h),t.ba=i,i=t.R>=h;let e=!0;for(;t.R>=h;t.R-=h)N(t.controller),t.W&&t.fa(),s&&!t.W&&(t.da(),t.W=!0),e&&(D(t.controller),e=!1);i&&s&&t.ea(),window.requestAnimationFrame(i=>J(t,i))}class G{constructor(t){var i=60;this.ba=this.R=0,this.W=!1,this.A=1,this.h=new p(256,192,!0),this.controller=new K,this.audio=new T(t),this.g=new M,i=0|Math.max(1,i),this.A=1/i/(1/60)}ca(){}da(){}fa(){}ea(){}}class H{constructor(t,i,h){this.width=i,this.height=h,t=t.map(t=>t<=8?t:0),this.g=Array(this.width*this.height*4).fill(0),function(t,i){for(let c=0;c<t.height;++c)for(let g=0;g<t.width;++g){var h=i[c*t.width+g];if(0!=h)if(1==h){var s=t,o=c,a=s,n=i,r=h=g,l=o;const f=Array(9).fill(!1);for(let t=-1;t<=1;++t){const i=e(l+t,a.height);for(let h=-1;h<=1;++h)f[3*(t+1)+(h+1)]=1==n[i*a.width+e(r+h,a.width)]}a=f,h=o*s.width*4+2*h,s.g[h]=1,a[1]?a[3]&&!a[0]?s.g[h]=5:a[3]||(s.g[h]=9):s.g[h]=a[3]?7:3,++h,s.g[h]=2,a[1]?a[5]&&!a[2]?s.g[h]=6:a[5]||(s.g[h]=10):s.g[h]=a[5]?8:4,h+=2*s.width-1,s.g[h]=11,a[7]?a[3]&&!a[6]?s.g[h]=15:a[3]||(s.g[h]=19):s.g[h]=a[3]?17:13,++h,s.g[h]=12,a[7]?a[5]&&!a[8]?s.g[h]=16:a[5]||(s.g[h]=20):s.g[h]=a[5]?18:14}else switch(s=t,o=c*s.width*4+2*g,h-1){case 2:s.g[o]=21,s.g[o+1]=22;break;case 4:o+=2*s.width,s.g[o]=31,s.g[o+1]=32;break;case 3:s.g[o]=23,s.g[o+2*s.width]=33;break;case 1:s.g[o+1]=24,s.g[o+2*s.width+1]=34}}}(this,t)}B(t,i){for(let h=0;h<2*this.height;++h)for(let s=0;s<2*this.width;++s){const e=this.g[h*this.width*2+s]-1;-1!=e&&c(t,i,0,8*s,8*h,e%10*8,8*Math.floor(e/10),8,8)}}}const V=[!1,!1,!1,!0,!1,!0,!0],U=[!0,!1,!0,!0,!1,!1,!0],Y=[!0,!1,!0,!1,!1,!1,!1];function q(t){return new n(16*(t.J.x+.5),16*(t.J.y+.5))}function $(t,i){const h=q(t);for(let s=0;s<16;++s){const s=2*(2*Math.random()-1),e=5*Math.random()-4;_(t.j.next(),h.x,h.y,s,e,t.orientation,i,!0)}}function W(t,i,h){const s=16*t.J.x,e=16*t.J.y;for(let a=0;a<4;++a){var o=Math.PI/4+Math.PI/2*a;const n=1.5*Math.cos(o);o=1.5*Math.sin(o)-1;const r=a<2?a%2:1-a%2,l=a/2|0;_(t.j.next(),s+8*r+4,e+8*l+4,n,o,h,2,!0,8*(i+r),8*(6+l))}}function z(t,i,h,s){if(!t.C||t.G||!i.C||i.G||!i.O||(0|t.o.x)!=(0|i.o.x)||(0|t.o.y)!=(0|i.o.y))return!1;if(3==t.type&&0==i.type)return t.G=!0,t.h=0,E(h,v(s,2),.6),!1;if((1==t.type||5==t.type)&&4==i.type)return t.C=!1,W(t,5==t.type?4:0,i.orientation),E(h,v(s,4),.8),!1;if(6==t.type){let e=!1;return 1==i.type?(i.C=!1,W(i,0,i.orientation),E(h,v(s,4),.8)):4==i.type?E(h,v(s,4),.8):0!=i.type&&2!=i.type||(E(h,v(s,1),.5),i.C=!1,$(i,0==i.type?0:1),E(h,v(s,1),.5),e=!0),t.h=0,t.G=!0,e}return!!Y[t.type]&&(t.C=!1,$(t,0==t.type?0:1),E(h,v(s,1),.5),!0)}class X{constructor(t,i,h,s,e){this.i=this.h=this.g=this.S=0,this.$=this.O=!1,this.C=!0,this.G=!1,this.o=new n(t,i),this.J=this.o.clone(),this.N=new n,this.type=h,this.ha=this.orientation=s,this.ia=U[this.type]??!1,this.l=V[this.type]??!1,this.g=t%2==i%2?0:1,this.j=e}update(t,i){this.C&&(this.G?(this.S=0,this.h+=i,this.h>=20&&(this.C=this.G=!1)):(this.O&&this.C&&!this.G&&(this.J.x=this.o.x-(1-t)*this.N.x,this.J.y=this.o.y-(1-t)*this.N.y,0==this.type&&(this.i+=t,this.i>=1&&(--this.i,t=q(this),_(this.j.next(),t.x,t.y,0,0,0,3,!1)))),this.g=(this.g+1/30*i)%2,3==this.type?this.S=2:(this.S=0,this.O&&(this.S=0==this.type?3:1)),this.$=!1))}B(t,i){if(this.C)if(this.G){var h=this.h/20,s=16*(this.J.x+.5),e=16*(this.J.y+.5);if(3==this.type||6==this.type){i=h*h*16,h=4+12*h;var o=3==this.type?"#ffdbff":"#ff9200";t.setColor(3==this.type?"#db6db6":"#b62400"),u(t,s,e,i,h),t.setColor(o),u(t,s-1,e-1,i,h-2)}}else{s=this.g%1*4|0,e=16*this.J.x,h=16*this.J.y,o=this.orientation,o=new n(O[o],P[o]);var a=this.orientation*Math.PI/2;switch(this.type){case 2:case 0:c(t,i,0,e+o.x,h+o.y,16*s,2==this.type?16:0,16,16,16,16,8,8,a);break;case 1:c(t,i,0,e,h,0,48,16,16);break;case 4:case 5:c(t,i,0,e,h,16*(this.type-3),48,16,16);break;case 3:c(t,i,0,e,h+Math.round(Math.sin(this.g*Math.PI)),16*s,32,16,16);break;case 6:g(t,i,1,4*Math.PI,this.g/2*Math.PI*2,0,e,h+1,48,48,16,16)}}}move(t,i){if(!this.C||this.O||this.l||0==i)return!1;this.ha=this.orientation,this.orientation=i;const h=new n(O[i],P[i]);t:{var s=this.o.x+h.x,e=this.o.y+h.y;if(s<0||e<0||s>=t.width||e>=t.height)t=!1;else{var a=t.aa[e*t.width+s];if(1==a||a-1==B[i])t=!1;else{for(const i of t.v)if(i.C&&!i.G&&!i.ia&&(0|i.o.x)==(0|s)&&(0|i.o.y)==(0|e)){if((1==(t=i.getType())||5==t)&&4==this.getType()&&this.$)break;t=!1;break t}t=!0}}}return!!t&&(o(this.N,h),this.O=!0,this.o.x+=this.N.x,this.o.y+=this.N.y,this.i=0,!0)}V(){return this.C}getType(){return this.type}}const Z=(t,i,h)=>t<i?Math.min(i,t+h):Math.max(i,t-h),Q=["#000000","#ff2400"];function _(t,i,h,s,e,n,r,l,c=0,g=0){n=-n*Math.PI/2,a(t.o,i,h),a(t.speed,s,e).rotate(n),o(t.j,t.speed),t.g=30,t.i=30,t.type=r,0!=r&&1!=r||(t.diameter=2+(3*Math.random()|0)),3!=r&&a(t.j,s,6).rotate(n),a(t.l,c,g),t.Z=l,t.h=!0}class tt{constructor(){this.type=this.diameter=this.i=this.g=0,this.Z=!0,this.o=new n,this.speed=new n,this.j=new n,this.m=new n(.125,.125),this.l=new n,this.h=!1}update(t){this.h&&(this.g-=t,this.g<=0?this.h=!1:(this.speed.x=Z(this.speed.x,this.j.x,this.m.x*t),this.speed.y=Z(this.speed.y,this.j.y,this.m.y*t),this.o.x+=this.speed.x*t,this.o.y+=this.speed.y*t))}B(t,i){if(this.h){var h=1;switch(this.g<this.i/4&&(h=this.g/(this.i/4)),w(t,h),this.type){case 0:case 1:i=this.o.x-this.diameter/2,h=this.o.y-this.diameter/2,t.setColor(Q[this.type]),t.fillRect(i,h,this.diameter,this.diameter);break;case 3:i=this.g/this.i*6,t.setColor("#000000"),d(t,this.o.x,this.o.y,i,i);break;case 2:c(t,i,0,this.o.x-4,this.o.y-4,this.l.x,this.l.y,8,8)}w(t)}}V(){return this.h}}class it{constructor(){this.g=[]}next(){for(var t of this.g)if(!t.V())return t;return t=new tt,this.g.push(t),t}update(t){for(const i of this.g)i.update(t)}}function ht(t,i,h){i.length=0;for(const s of t.g)i.push(new X(s.x,s.y,s.type,s.orientation,h))}class st{constructor(t){this.g=[];for(const i of t)i.V()&&!i.G&&this.g.push({x:i.o.x-i.N.x,y:i.o.y-i.N.y,orientation:i.ha,type:i.type})}}function et(t,i){let h;t.h=!1;do{h=!1;for(const s of t.v)s.move(t,i)&&(h=t.h=!0)}while(h);return t.h&&(t.j=0,t.D=i),t.h}function ot(t){return 0!=t.u.length&&(ht(t.u.pop(),t.v,t.m),nt(t),!0)}function at(t,i=!1){!i&&t.u.length>0&&t.u.push(new st(t.v)),nt(t),ht(t.I,t.v,t.m)}function nt(t){t.h=!1,t.l=0,t.D=0,t.i=!1,t.g=0}class rt{constructor(t){this.l=this.j=0,this.h=!1,this.D=0,this.i=!1,this.g=0,this.A=!1,this.width=parseInt(t[0],32),this.height=parseInt(t[1],32),this.aa=t.substring(2).split("").map(t=>parseInt(t,32)),this.K=new H(this.aa,this.width,this.height),this.m=new it,this.v=[],function(t){for(let i=0;i<t.height;++i)for(let h=0;h<t.width;++h){const s=t.aa[i*t.width+h];s<=8||t.v.push(new X(h,i,s-9,4,t.m))}}(this),this.I=new st(this.v),this.u=[]}update(t,i,h,s){this.i&&(this.g-=s,this.g<=0&&(ot(this)||at(this,!0),this.i=!1,this.g=0)),function(t,i,h,s){if(!(t.A||t.h||t.i)){var e=0,o=0,a=!1;for(let t=0;t<4;++t){const h=L(i,t);1&h.state&&h.timestamp>=o&&(o=h.timestamp,e=t+1,a=!0)}a&&et(t,e)&&(t.u.push(new st(t.v)),E(h,v(s,3),.4))}}(this,t,i,h),function(t,i,h,s){if(t.h&&(t.l+=1/120*s,t.l>.5&&(t.l=.5),t.j+=t.l*s,t.j>=1)){for(t.h=!1,--t.j,s=0;s<t.v.length;++s)for(let e=s+1;e<t.v.length;++e){let o=z(t.v[s],t.v[e],i,h);(o=z(t.v[e],t.v[s],i,h)||o)&&(t.i=!0,t.g=45)}for(i=0;i<t.v.length;++i)t.v[i].V()||t.v.splice(i,1);for(var e of t.v)e.C&&!e.G&&e.O&&(e.O=!1,e.$=!0,(i=e.N).x=0,i.y=0,o(e.J,e.o));if(!et(t,t.D)){t.D=0,t.l=0,t.j=0;t:if(t.i)e=!1;else{for(const i of t.v)if(3==i.getType()&&i.V()&&!i.G){e=!1;break t}e=!0}t.A=e}}}(this,i,h,s),this.i&&(this.g-=s,this.g<=0&&!this.h&&(ot(this)||at(this,!0),this.i=!1,this.g=0));for(const t of this.v)t.update(this.j,s);this.v.sort((t,i)=>t.S-i.S),this.m.update(s)}B(t,i){t.setColor("#248fdb"),t.fillRect(0,0,16*this.width,16*this.height),t.setColor("#49b6ff");for(var h=0;h<this.height;++h)for(let i=0;i<this.width;++i)i%2!=h%2&&t.fillRect(16*i,16*h,16,16);for(var s of(h=A(i,6),i=A(i,7),this.K.B(t,h),(h=this.m).g))s.Z||s.B(t,i);for(const h of this.v)h.B(t,i);s=this.m;for(const h of s.g)h.Z&&h.B(t,i)}}const lt="871111111110C000111000A00111101001190A0001110A010111111111 871111111110010C0110A0011110110101100900011001A0B111111111 7711111111C00491110011110000011111C011A020011111111 871111111110100B0110900131101B02011C11011110400C0111111111 871111111110A000D1101011111029100110111C01100AA00111111111 8811111111100011011E100131109E00011311010110000EE11D0B0EC111111111 87111111111C0040C1111011E1101010E1100000A11900E0D111111111 97111111111100000001100F0A90110110111110000F00110A0010C1111111111 871111111110090FC111013111100100011BF000A1111000A111111111 9811111111110400E001101B001011011100011090D0F011010131111000F0C01111111111 98111111111100010001100C1C0011001110011A00100A1110010011100919001111111111 971111111111104010C1100101011190101F011101011011CF1A19A1111111111 B91111111111110E0000C0011011EE111E11C01000010110010CE1101100100D91C11E111E111011000C00E00111111111111".split(" "),ct=["#00246d","#929292","#ffffff","#000000"];class gt{get text(){return this.Y}constructor(t,i){this.Y=t,this.g=i}evaluate(){return this.g()}}class ft{constructor(t,i=!1){this.g=0,this.buttons=t,this.active=i,this.width=Math.max(...this.buttons.map(t=>t.text.length+2)),this.height=this.buttons.length}update(t,i,h,s=!1){this.active&&(s&&3==L(t,7).state?(E(i,v(h,7),.6),this.active=!1):(s=this.g,3==L(t,1).state?--this.g:3==L(t,3).state&&++this.g,s!=this.g&&(this.g=e(this.g,this.buttons.length),E(i,v(h,6),.5)),3==L(t,4).state&&(this.buttons[this.g].evaluate()&&(this.active=!1),E(i,v(h,7),.6))))}B(t,i,h=0,s=0,e=0){if(this.active){e>0&&(t.setColor(`rgba(0,0,0,${e})`),t.fillRect()),e=t.width/2-4*this.width;var o=t.height/2-12*this.height/2,a=A(i,2);i=A(i,3);var n=8*this.width+2*h,r=12*this.height+2*s,l=ct.length-1;for(t.setColor("rgba(0,0,0,0.33)"),t.fillRect(e-l+2,o-l+2,n+2*l,r+2*l),l=ct.length-1;l>=0;--l)t.setColor(ct[l]),t.fillRect(e-l,o-l,n+2*l,r+2*l);for(n=0;n<this.buttons.length;++n)f(t,n==this.g?i:a,(n==this.g?"$%":"")+this.buttons[n].text,e+h+2,o+s+2+12*n,-1)}}isActive(){return this.active}}const dt=()=>{try{return null!=window.localStorage.getItem("lsjn25a")}catch(t){}return!1},ut=["#6db6ff","#4992db"],wt=[["#000000","#b66d00","#ffb649"],["#000000","#db6d00","#ffdb6d"],["#000000","#499200","#92db00"],["#000000","#6db600","#dbff49"]],pt=1/12;function mt(t){const i=t.D/2-52,h=(1-t.i)*t.h.y+t.i*t.g.y;t.m.x=t.I/2-88+48*((1-t.i)*t.h.x+t.i*t.g.x)+16,t.m.y=i+40*h+12}function yt(t){for(const i of t.j)if(!i)return!1;return!0}class At{constructor(t,i,h){this.i=0,this.u=!1,this.l=0,this.h=new n,this.g=new n,this.m=new n,this.K=h,this.A=Array(12).fill(0),this.j=Array(12).fill(!1),this.I=t,this.D=i,mt(this)}update(t,i,h,s){this.l=(this.l+1/60*s)%4;for(var a=0;a<3;++a)for(var n=0;n<4;++n){var r=4*a+n;this.A[r]=Z(this.A[r],Number(this.g.x==n&&this.g.y==a),pt*s)}3==L(t,4).state&&(E(i,v(h,7),.6),this.u=!1,o(this.h,this.g),this.K(4*this.h.y+this.h.x)),mt(this),this.u?(this.i+=pt*s,this.i>=1&&(this.u=!1,this.i=0,o(this.h,this.g))):(s=L(t,0),a=L(t,1),n=L(t,2),t=L(t,3),r=Math.max(s.timestamp,a.timestamp,n.timestamp,t.timestamp),1&s.state&&s.timestamp>=r?++this.g.x:1&n.state&&n.timestamp>=r?--this.g.x:1&t.state&&t.timestamp>=r?++this.g.y:!!(1&a.state)&&a.timestamp>=r&&--this.g.y,this.g.x=e(this.g.x,4),this.g.y=e(this.g.y,3),(this.g.x!=this.h.x||this.g.y!=this.h.y)&&(this.u=!0,this.i=0,E(i,v(h,6),.5)))}B(t,i){for(var h=1+(t.width/32|0),s=1+(t.height/32|0),e=this.l%1*32,o=0;o<s;++o)for(var a=0;a<h;++a)t.setColor(ut[Number(a%2==o%2)]),t.fillRect(32*a-e,32*(o-1)+e,32,32);for(f(t,A(i,4),"SELECT A LEVEL",t.width/2,12,-7,0,1,4*Math.PI,2,this.l*Math.PI*2),h=t.width/2-88,s=t.height/2-52,e=A(i,4),o=1,a=0;a<3;++a){const i=s+40*a;for(let s=0;s<4;++s){const n=h+48*s,r=4*this.A[4*a+s]|0,l=wt[Number(s==this.h.x&&a==this.h.y)+2*Number(this.j[4*a+s])];t.setColor(l[0]),t.fillRect(n,i+r,32,30-r),t.setColor(l[1]),t.fillRect(n+1,i+r+1,30,28-r),t.setColor(l[2]),t.fillRect(n+1,i+r+1,30,22),f(t,e,`${o}`,n+16,i+r+12-7,-8,0,1),++o}}c(t,i=A(i,5),0,this.m.x+32/6,this.m.y+6+Math.round(Math.sin(this.l*Math.PI*4)),0,64,16,16)}}function vt(t,i,h,s,e=()=>{},o=t.m/2,n=t.l/2){t.type=i,t.speed=h,t.i=s,t.j=e,t.h=0,a(t.g,o,n),t.active=!0}class Mt{constructor(t,i){this.speed=this.h=this.type=0,this.active=this.i=!1,this.j=()=>{},this.g=new n,this.m=t,this.l=i}update(t){this.active&&(this.h+=this.speed*t,this.h>=1&&(--this.h,(this.active=this.i)&&this.j(),this.i=!1))}B(t){if(this.active&&0!=this.type){var i=this.i?this.h:1-this.h;switch(this.type){case 1:t.setColor(`rgba(0,0,0,${i})`),t.fillRect();break;case 2:i=(1-i)*(1-i)*Math.max(Math.hypot(this.g.x,this.g.y),Math.hypot(t.width-this.g.x,this.g.y),Math.hypot(t.width-this.g.x,t.height-this.g.y),Math.hypot(this.g.x,t.height-this.g.y)),t.setColor("#000000"),function(t,i,h=t.width/2,s=t.height/2){h=h+t.g.x|0,s=s+t.g.y|0;var e=0|Math.max(0,s-i);const o=0|Math.min(t.height,s+i);for(e>0&&t.fillRect(0,0,t.width,e),o<t.height&&t.fillRect(0,o,t.width,t.height-o);e<o;++e){var a=e-s;if(Math.abs(a)>=i){t.h.fillRect(0,e,t.width,1);continue}const o=Math.round(h-Math.sqrt(i*i-a*a));a=Math.round(h+Math.sqrt(i*i-a*a)),o>0&&t.h.fillRect(0,e,o,1),a<t.width&&t.h.fillRect(a,e,t.width-o,1)}}(t,i,this.g.x,this.g.y)}}}isActive(){return this.active}}class Ct{constructor(t,i){this.i=!1,this.g=0,this.h=new ft([new gt("NEW GAME",()=>(this.j(!0),!1)),new gt("CONTINUE",()=>(this.j(!1),!1)),new gt(I(t),()=>{R(t);var i=this.h,h=I(t);return i.buttons[2].Y=h,h.length>=i.width-2&&(i.width=h.length+2),!1})],!0),this.j=i,dt()&&function(t){t.g=e(1,t.buttons.length-1)}(this.h)}update(t,i,h,s){this.g=(this.g+2*Math.PI/90*s)%(4*Math.PI),this.i?this.h.update(t,i,h,!1):3==L(t,4).state&&(E(i,v(h,10),.7),this.i=!0)}B(t,i){t.setColor("rgba(0,0,0,0.25)"),t.fillRect();var h=A(i,10);g(t,h,2,24*Math.PI,this.g,0,t.width/2-h.width/2,16+Math.round(4*Math.sin(this.g/2))),f(t,h=A(i,3),"*2025 JANI NYK@NEN",t.width/2,t.height-10,-1,0,1),this.i?(t.move(0,40),this.h.B(t,i,4,4),t.moveTo()):f(t,i=A(i,4),"PRESS ENTER OR SPACE",t.width/2,t.height-56,-8,0,1,3*Math.PI,4,this.g)}}const xt=["#92dbff","#49b6ff","#248fdb"],bt=[0,2,8],Et=["   HINT: COLLECT ALL GEMS TO WIN THE STAGE.","   HINT: YOU NEED TO KEEP ALL HUMANS ALIVE."],Rt=["#000049","#929292","#ffffff"];function It(t,i){t.D=i,t.l=new rt(lt[i-1]),t.X=!1,t.U=0}function Tt(t){const i=t.h;l(i,"#49b6ff");const h=A(t.g,8);var s=Math.ceil(i.width/h.width)+1;t=t.K*h.width|0;for(let e=0;e<s;++e)c(i,h,0,e*h.width-t,88,0,0,128,64);for(s=0;s<3;++s)i.setColor(xt[s]),t=152+bt[s],i.fillRect(0,t,i.width,i.height-t);c(i,h,0,i.width-56,8,0,64,48,48)}class jt extends G{constructor(t){super(t),this.U=this.K=0,this.X=!1,this.T=this.m=this.i=0,this.D=1,this.u=2,this.l=new rt(lt[this.D-1]),this.P=new ft([new gt("RESUME",()=>!0),new gt("UNDO",()=>(ot(this.l),!0)),new gt("RESTART",()=>(at(this.l),!0)),new gt(I(this.audio),()=>{R(this.audio);var t=this.P,i=I(this.audio);return t.buttons[3].Y=i,i.length>=t.width-2&&(t.width=i.length+2),!1}),new gt("QUIT",()=>(vt(this.j,1,.05,!0,()=>{this.u=1}),!0))]),this.I=new At(this.h.width,this.h.height,t=>{const i=this.I.m.clone();vt(this.j,2,1/30,!0,()=>{this.u=0,It(this,t+1),this.T=0,a(this.j.g,this.h.width/2,this.h.height/2)},i.x,i.y)}),this.ga=new Ct(this.audio,t=>{vt(this.j,2,1/30,!0,()=>{if(t||!dt())this.j.active=!1,this.u=5,this.i=this.m=0;else{var i=this.I;i.j.length=0,i.j=(()=>{try{return(window.localStorage.getItem("lsjn25a")??"").split("").map(t=>1==Number(t))}catch(t){}return Array(12).fill(!1)})(),yt(this.I)?(It(this,13),this.u=this.T=0):this.u=1}})}),this.j=new Mt(this.h.width,this.h.height)}ca(){!function(t){for(const i of[{id:0,path:"f.png"},{id:1,path:"b.png"}]){++t.g;const h=new Image;h.onload=()=>{++t.h,t.F.set(i.id,h)},h.src=i.path}}(this.g)}da(){for(var t=this.g,i=this.audio,e=255/7,o=[],a=0;a<512;++a)o[a]=[(a>>6&7)*e|0,(a>>3&7)*e|0,(7&a)*e|0,4==a?0:255];var n=A(t,0);e=h(n,Array(64).fill("0002"),o);var r=h(n,Array(64).fill("000M"),o);a=h(n,Array(64).fill("0001"),o),t.F.set(0,n),t.F.set(2,e),t.F.set(3,r),n=new p(2*e.width,2*e.height),r=e.height/8|0;for(var l=0;l<r;++l)for(var g=16*l+4,f=0;f<16;++f){const t=16*f+4;for(let i=-1;i<=1;++i){for(let h=-1;h<=2;++h)0==i&&0==h||c(n,a,0,t+i,g+h,8*f,8*l,8,8);c(n,e,0,t,g,8*f,8*l,8,8)}}for(t.F.set(4,n.i),e=A(t,1),o=h(e,y,o),t.F.set(5,o),e=["#ffdb6d","#db9224"],a=["#ffff92","#924900"],n=new p(80,32,!1),r=0;r<2;++r)for(l=0;l<10;++l)g=0,f=8,l>=2&&l<=3&&(g=2==l?1:0,f=7),n.setColor(e[Number(l%2==r%2)]),n.fillRect(8*l+g,8*r,f,8),l>=2&&l<=3&&0==r&&(n.setColor(a[Number(3==l)]),n.fillRect(8*l+(2==l?1:6),1,1,7));for(c(n,o,0,16,0,0,16,64,16),c(n,o,0,0,16,48,8,16,8),c(n,o,2,0,24,48,8,16,8),c(n,o,0,16,16,48,8,16,8,16,8,8,8,Math.PI/2),c(n,o,1,16,16,48,8,16,8,16,8,8,8,Math.PI/2),t.F.set(6,n.i),e=[0,1,0,2],a=[1,2,1,0],(n=new p(64,64,!1)).setColor("#924900"),n.fillRect(1,48,14,16),r=0;r<4;++r)for(l=0;l<4;++l)2==r?(c(n,o,0,16*l+2,16*r+2,48,48,12,12),c(n,o,0,16*l+2,16*r+2,12*l,48,12,12)):3==r?c(n,o,0,16*l,16*r,16*l,32,16,16):(c(n,o,0,16*l,16*r,g=24*r+8*e[l],0,8,16),c(n,o,1,16*l+8,16*r,g,0,8,16),1==r&&c(n,o,0,16*l+5,16*r+a[l],48,0,8,8));for(t.F.set(7,n.i),o=["#248fdb","#92dbff","#ffffff"],e=[0,2,5],a=new p(128,112),n=0;n<3;++n)for(a.setColor(o[n]),r=0;r<128;++r)l=(r%16-8)/10,l=1+12*(1-Math.sqrt(1-l*l)+(1+Math.sin(r/128*Math.PI*2)))+e[n],a.fillRect(r,l,1,64-l+1);for(a.setColor("#ffb600"),d(a,24,88,24,24),a.setColor("#ffff92"),d(a,22,86,22,22),t.F.set(8,a.i),o=s("LEVEL\nCLEAR!","bold 24px Arial",96,64,28,4,[[255,219,0],[219,109,0]]),t.F.set(9,o),o=s("GRAVITY","bold 32px Arial",160,40,32,5,[[255,146,0],[182,36,0]]),e=s("CAT","bold 48px Arial",160,64,48,6,[[255,146,0],[182,36,0]],1),c(a=new p(192,128),o,0,16,0),c(a,e,0,16,28),t.F.set(10,a.i),o=b(i,[160,4,.6,100,2,.8,256,8,1],.35,0,0),t.L.set(2,o),o=b(i,[128,2,.8,160,3,1,96,12,.6],.6,0,2),t.L.set(1,o),o=b(i,[112,4,1,80,2,.3],.4,0,0),t.L.set(3,o),o=b(i,[128,4,1,112,3,.9,80,12,.6],.4,2,1),t.L.set(4,o),o=b(i,[130.81,15,.5,146.83,7.5,.7,164.81,7.5,1,174.61,7.5,1,164.81,7.5,1,174.61,15,1,220,40,.8],.3,0,0),t.L.set(5,o),n=0;n<2;++n)o=t,e=0==n?6:7,a=b(i,[128-8*n,6+2*n,1,96-8*n,2+4*n,.3],.25,0,0),o.L.set(e,a);o=b(i,[128,5,1,96,3,.4],.4,2,0),t.L.set(8,o),o=b(i,[144,6,.9,96,6,.2],.4,0,0),t.L.set(9,o),i=b(i,[136,10,.9],.3,0,0),t.L.set(10,i)}fa(){const t=1/480;if(this.j.isActive())this.j.update(this.A);else switch(this.u){case 0:!function(t){t.P.isActive()?t.P.update(t.controller,t.audio,t.g,!0):(t.T=(t.T+.25*t.A)%352,t.l.A||3!=L(t.controller,8).state?(t.l.update(t.controller,t.audio,t.g,t.A),t.K=(t.K+1/240)%1,t.l.A?(t.X||(E(t.audio,v(t.g,5),.6),t.X=!0),t.U+=t.A,t.U>=120&&vt(t.j,1,.05,!0,()=>{if(13==t.D)t.i=0,t.u=4;else{var i=t.I;i.j[t.D-1]=!0,(t=>{try{const i=t.map(t=>String(Number(t))).join("");window.localStorage.setItem("lsjn25a",i)}catch(t){}})(i.j),yt(t.I)?It(t,13):t.u=1}})):(3==L(t.controller,5).state&&(E(t.audio,v(t.g,9),.6),at(t.l)),3==L(t.controller,6).state&&(E(t.audio,v(t.g,8),.5),ot(t.l)))):(E(t.audio,v(t.g,10),.6),function(t,i=t.g){t.g=e(i,t.buttons.length),t.active=!0}(t.P,0)))}(this);break;case 1:this.I.update(this.controller,this.audio,this.g,this.A);break;case 4:!function(t){t.i+=t.A,t.i>=300&&vt(t.j,1,1/30,!0,()=>{t.u=1})}(this);break;case 3:this.K=(this.K+t*this.A)%1,this.ga.update(this.controller,this.audio,this.g,this.A);break;case 2:!function(t){0==t.m?t.controller.g&&(E(t.audio,v(t.g,6),.5),++t.m,vt(t.j,1,.05,!1,()=>{})):(t.i+=t.A,(t.i>=90||t.controller.g)&&vt(t.j,1,.05,!0,()=>{++t.m,3==t.m?(vt(t.j,2,1/30,!1,()=>{}),t.u=3):t.i=0}))}(this);break;case 5:1==this.m?this.controller.g&&(E(this.audio,v(this.g,6),.5),++this.m,this.i=0):(this.i+=this.A,this.i>=30&&(this.i=0,++this.m,3==this.m&&(this.u=1,vt(this.j,2,1/30,!1))))}}ea(){switch(this.u){case 0:var t=this.h;Tt(this);var i=this.l,h=0,s=0;i.g>0&&(h=Math.floor(4*(2*Math.random()-1)),s=Math.floor(4*(2*Math.random()-1))),t.moveTo(t.width/2-16*i.width/2+h,t.height/2-16*i.height/2+s),i=t;var e=this.g;if(h=16*this.l.width,s=16*this.l.height,i.setColor("rgba(0,0,0,0.2)"),i.fillRect(-4,-4,h+16,s+16),i.setColor(F[0]),i.fillRect(-8,-8,h+16,s+16),i.setColor(F[1]),i.fillRect(-7,-7,h+16-2,s+16-2),i.setColor(F[2]),i.fillRect(-6,-6,h+16-4,s+16-4),i.setColor(F[3]),i.fillRect(-2,-2,h+4,s+4),i.setColor(F[0]),i.fillRect(-1,-1,h+2,s+2),c(i,e=A(e,5),1,-8,-8,56,0,8,8),c(i,e,0,h,-8,56,0,8,8),c(i,e,0,-8,s,56,0,8,8),c(i,e,1,h,s,56,0,8,8),this.l.B(t,this.g),t.moveTo(),f(t,A(this.g,4),`LEVEL ${this.D}`,t.width/2,5,-7,0,1,2*Math.PI,2,this.K*Math.PI*6),h=this.h,!(this.D>Et.length))for(i=A(this.g,3),h.setColor("rgba(0,0,0,0.33)"),h.fillRect(0,h.height-20,h.width,16),s=0;s<2;++s)f(h,i,Et[this.D-1],-this.T+352*s,h.height-16,-1);if(this.P.isActive())this.P.B(t,this.g,2,2,.5);else if(this.l.A){t=this.h,i=A(this.g,9),h=t.width/2-i.width/2,s=t.height/2-i.height/2,e=(t.width/2+i.width/2)*(1-Math.min(1,this.U/30)),t.setColor("rgba(0,0,0,0.40)"),t.fillRect();for(var o=0;o<2;++o){const a=i.height/2*o;c(t,i,0,h+(2*(1-o)-1)*e,s+a,0,a,i.width,i.height/2)}}break;case 1:this.I.B(this.h,this.g);break;case 4:l(t=this.h,"#000000"),f(t,i=A(this.g,2),"   CONGRATULATIONS!\n\nYOU HAVE BEATEN THE GAME!\nI HEREBY DECLARE YOU THE\nMASTER OF THE GRAVITY.",t.width/2-87.5,64,-1,4);break;case 3:Tt(this),this.ga.B(this.h,this.g);break;case 2:switch(l(t=this.h,"#000000"),i=A(this.g,2),h=A(this.g,3),s=t.width/2,e=t.height/2,this.m){case 0:f(t,i,"PRESS ANY KEY",s,e-4,-1,0,1);break;case 1:f(t,h,"A GAME BY",s,e-10,-1,0,1),f(t,i,"JANI NYK@NEN",s,e+2,-1,0,1);break;case 2:f(t,h,"CREATED FOR",s,e-10,-1,0,1),f(t,i,"JS13K 2025",s,e+2,-1,0,1)}break;case 5:for(t=this.h,i=A(this.g,2),h=A(this.g,3),l(t,"#000000"),s=t.width/2-96,e=t.height/2-80,o=this.i/30,0==this.m?e+=t.height*(1-o):2==this.m&&(e-=t.height*o),t.moveTo(s,e),s=Rt.length-1;s>=0;--s)t.setColor(Rt[s]),t.fillRect(-s,-s,192+2*s,160+2*s);f(t,i,"CONTROLS",96,8,-1,0,1),f(t,h,"CONTROL GRAVITY:",96,32,-1,0,1),f(t,i,"ARROW KEYS OR WASD",96,44,-1,0,1),f(t,h,"UNDO MOVE:",96,64,-1,0,1),f(t,i,"BACKSPACE",96,76,-1,0,1),f(t,h,"RESTART STAGE:",96,96,-1,0,1),f(t,i,"R",96,108,-1,0,1),f(t,h,"PAUSE MENU:",96,128,-1,0,1),f(t,i,"ENTER OR ESCAPE",96,140,-1,0,1),t.moveTo()}this.j.B(this.h)}}window.onload=()=>{var t=new AudioContext;(t=new jt(t)).ca(),J(t,0)}</script></body></html>