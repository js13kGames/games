<!doctype html><meta name=viewport content="width=device-width"><title>WitchCup1276 - js13kGames 2023</title><style>body{margin:0;padding:0;font-family:sans-serif;overflow:hidden}canvas{width:100vw;height:100vh;display:block;position:absolute;top:0;left:0}#status{position:absolute;top:10px;left:50px;width:100px;color:#fff;white-space:nowrap}</style><canvas id=bgCanvas></canvas><canvas id=gameCanvas></canvas><div id=status></div><script>function I(){function B(t){return Math.sin(6.283184*t)}function F(t){return.003959503758*2**((t-128)/12)}let U,D,H,J,_,K=[B,function(t){return t%1<.5?1:-1},function(t){return t%1*2-1},function(t){return(t=t%1*4)<2?t-1:3-t}];this.init=function(t){U=t,D=t.endPattern,H=0,J=t.rowLen*t.patternLen*(D+1)*2,_=new Int32Array(J)},this.generate=function(){let t,e,s,i,r,h,a,n,o,c,l,d,p,f,u=new Int32Array(J),g=U.songData[H],w=U.rowLen,y=U.patternLen,x=0,m=0,b=!1,v=[];for(s=0;s<=D;++s)for(a=g.p[s],i=0;i<y;++i){var k=a?g.c[a-1].f[i]:0,z=(k&&(g.i[k-1]=g.c[a-1].f[i+y]||0,k<17)&&(v=[]),K[g.i[16]]),M=g.i[17]/512,R=2**(g.i[18]-9)/w,C=g.i[19],T=g.i[20],S=43.23529*g.i[21]*3.141592/44100,P=1-g.i[22]/255,j=1e-5*g.i[23],q=g.i[24]/32,A=g.i[25]/512,I=6.283184*2**(g.i[26]-9)/w,L=g.i[27]/255,E=g.i[28]*w&-2;for(l=(s*y+i)*w,r=0;r<4;++r)if(h=a?g.c[a-1].n[i+r*y]:0){v[h]||(v[h]=function(t,e,s){let i,r,h,a,n,o,c=K[t.i[0]],l=t.i[1],d=t.i[3]/32,p=K[t.i[4]],f=t.i[5],u=t.i[8]/32,g=t.i[9],w=t.i[10]*t.i[10]*4,y=t.i[11]*t.i[11]*4,x=t.i[12]*t.i[12]*4,m=1/x,b=-t.i[13]/16,v=t.i[14],k=s*2**(2-t.i[15]),z=new Int32Array(w+y+x),M=0,R=0;for(i=0,r=0;i<w+y+x;i++,r++)0<=r&&(v=v>>8|(255&v)<<4,r-=k,n=F(e+(15&v)+t.i[2]-128),o=F(e+(15&v)+t.i[6]-128)*(1+8e-4*t.i[7])),h=1,i<w?h=i/w:i>=w+y&&(h=(1-(h=(i-w-y)*m))*3**(b*h)),M+=n*h**d,a=c(M)*l,R+=o*h**u,a+=p(R)*f,g&&(a+=(2*Math.random()-1)*g),z[i]=80*a*h|0;return z}(g,h,w));var W=v[h];for(e=0,t=2*l;e<W.length;e++,t+=2)u[t]+=W[e]}for(e=0;e<w;e++)n=2*(l+e),(c=u[n])||b?(d=S,C&&(d*=z(R*n)*M+.5),d=1.5*Math.sin(d),x+=d*m,p=P*(c-m)-x,m+=d*p,c=3==T?m:1==T?p:x,j&&(c=(c*=j)<1?-1<c?B(.25*c):-1:1,c/=j),c*=q,b=1e-5<c*c,o=Math.sin(I*n)*A+.5,f=c*(1-o),c*=o):f=0,E<=n&&(f+=u[n-E+1]*L,c+=u[n-E]*L),u[n]=0|f,u[1+n]=0|c,_[n]+=0|f,_[1+n]+=0|c}return++H/U.numChannels},this.createAudioBuffer=function(t){var s=t.createBuffer(2,J/2,44100);for(let e=0;e<2;e++){var i=s.getChannelData(e);for(let t=e;t<J;t+=2)i[t>>1]=_[t]/65536}return s},this.createWave=function(){var t=44+2*J-8,e=t-36,s=new Uint8Array(44+2*J);s.set([82,73,70,70,255&t,t>>8&255,t>>16&255,t>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,255&e,e>>8&255,e>>16&255,e>>24&255]);for(let t=0,e=44;t<J;++t){var i=(i=_[t])<-32767?-32767:32767<i?32767:i;s[e++]=255&i,s[e++]=i>>8&255}return s},this.getData=function(e,s){var i=2*Math.floor(44100*e),r=new Array(s);for(let t=0;t<2*s;t+=1){var h=i+t;r[t]=0<e&&h<_.length?_[h]/32768:0}return r}}let B={songData:[{i:[2,219,147,0,2,116,128,6,0,28,31,99,56,0,0,0,0,68,3,1,3,48,125,0,83,53,4,120,1],p:[,,1,1,2,3,1,1,2,3,4,5,6,7,1,1,2,3,1,1,2,3,1,1,2,3,4,5,6,7,,,,,,,1,1,2,3,4,5,6,7,4,5,1,1,6,7,4,5,1,1,2,3,4,5,6,7],c:[{n:[144,,146,,147,,146,,144,,146,,147,,149,,151,,,,,,144,,151,,,,,,144],f:[12,,,,,,,,,,,,,,,,12,,,,,,12,,12,,,,,,12,,31,,,,,,,,,,,,,,,,59,,,,,,31,,59,,,,,,31]},{n:[151,,152,,151,,149,,147,,,,144,,,,147,,149,,147,,146,,144,,,,144],f:[12,,,,,,,,12,,,,,,,,12,,,,,,,,12,,,,,,,,31,,,,,,,,52,,,,,,,,31,,,,,,,,52]},{n:[151,,152,,151,,149,,147,,,,146,,,,144,,,,,,,,,,,,,,144],f:[12,,,,,,,,12,,,,,,,,12,,,,,,,,,,,,,,12,,31,,,,,,,,52,,,,,,,,95,,,,,,,,,,,,,,31]},{n:[149,,,,,,147,,149,,,,151,,,,149,,,,147,,,,146],f:[12,,,,,,12,,12,,,,,,,,,,,,,,,,12,,,,,,,,59,,,,,,31,,52,,,,,,,,,,,,,,,,59]},{n:[149,,,,,,147,,149,,,,151,,,,149,,,,,,,,,,,,,,144],f:[12,,,,,,12,,12,,,,,,,,12,,,,,,,,,,,,,,12,,59,,,,,,31,,52,,,,,,,,95,,,,,,,,,,,,,,31]},{n:[144,,,,,,146,,147,,,,149,,,,151,,,,,,,,151,,,,,,152],f:[12,,,,,,12,,12,,,,,,,,12,,,,,,,,,,,,,,12,,59,,,,,,31,,52,,,,,,,,59,,,,,,,,,,,,,,31]},{n:[151,,,,,,149,,147,,,,146,,,,144],f:[12,,,,,,12,,12,,,,,,,,12,,,,,,,,,,,,,,,,59,,,,,,31,,52,,,,,,,,99]}]},{i:[0,255,122,51,3,201,128,0,28,59,0,37,61,0,0,0,0,0,0,1,2,106,158,0,81,0,0,124,3],p:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],c:[{n:[120,,,,120,,,,,,,,,,,,120,,,,120],f:[]}]},{i:[3,255,128,0,0,255,140,0,0,127,2,20,47,61,0,0,0,96,3,1,3,94,79,0,32,84,2,12,4],p:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],c:[{n:[,,,,,,,,132,,,,132,,132,,,,,,,,,,132,,,,132,,132],f:[]}]},{i:[2,235,123,0,2,192,116,0,0,125,88,120,88,0,0,0,0,0,0,0,2,13,97,149,151,61,4,0,0],p:[,,,,,,,,,,,,,,,,,,,,,,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,2,2,1,1,1,1,2,2,1,1,1,1,2,2,1,1],c:[{n:[144],f:[]},{n:[149],f:[]}]},{i:[2,255,128,0,2,130,128,15,0,20,23,63,49,0,0,0,0,0,0,0,2,69,120,0,32,47,2,152,1],p:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,2,3,4,5,5,6],c:[{n:[151,,,,,,,,,,,,,,,,,,,,,,,,147,,,,151],f:[12,,,,,,,,,,,,,,,,,,,,,,,,12,,,,,,,,150,,,,,,,,,,,,,,,,,,,,,,,,53]},{n:[149,,,,,,,,,,,,,,,,,,,,,,,,146,,,,149],f:[12,,,,,,,,,,,,,,,,,,,,,,,,12,,,,,,,,142,,,,,,,,,,,,,,,,,,,,,,,,53]},{n:[147,,,,,,,,,,,,,,,,,,,,,,,,144,,,,147],f:[12,,,,,,,,,,,,,,,,,,,,,,,,12,,,,,,,,150,,,,,,,,,,,,,,,,,,,,,,,,53]},{n:[146,,,,,,,,,,,,,,,,,,,,,,,,144,,,,142],f:[12,,,,,,,,,,,,,,,,,,,,,,,,12,,,,,,,,150,,,,,,,,,,,,,,,,,,,,,,,,53]},{n:[144,,142,,144,,,,142,,147,,,,,,144,,142,,144,,,,142,,147],f:[12,,,,12,,,,12,,12,,,,,,12,,,,12,,,,12,,12,,,,,,37,,,,45,,,,28,,63,,,,,,37,,,,45,,,,28,,63]},{n:[144],f:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,134]}]},{i:[0,0,140,0,0,0,140,0,0,255,158,158,158,0,0,0,0,51,2,1,2,58,239,0,32,88,1,157,2],p:[1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,,1],c:[{n:[146],f:[]}]}],rowLen:3675,patternLen:32,endPattern:59,numChannels:6},F={songData:[{i:[3,176,126,0,3,142,118,25,0,24,8,29,117,120,0,0,0,231,6,0,3,76,92,25,70,0,0,0,0],p:[1],c:[{n:[99],f:[]}]}],rowLen:5513,patternLen:6,endPattern:0,numChannels:1};const a=t=>t*(k/180),l=(t,e,s)=>Math.min(Math.max(t,e),s),b=t=>Math.cos(t),U=t=>Math.sin(t),v=(t,e)=>Math.random()*(e-t)+t,u=(t,e)=>Math.round(v(t,e)),n=t=>Math.floor(t),p=t=>Math.ceil(t),g=(t,e)=>Math.hypot(t.x-e.x,t.y-e.y),e=t=>parseInt("0x"+t),D=(t,e,s)=>{t.width=e,t.height=s},h=t=>{document.querySelector("#status").innerText=t},k=Math.PI;let d=1;const z=t=>t*d,o=t=>t/d,c=t=>Math.round(t*d),f="Papyrus, Palatino Linotype, Book Antiqua, Palatino, Serif",H=t=>t.match(/.{2}/g).map(t=>parseInt(t,36)),s=H("2a332s703d563x72542w00005k4t517r00005m3l8g3e00006y2o6h7l0000994e7m4p7a778t7k00009y379w7p0000cd34c47l00009d5hcf5c0000fz3hdy3qdj7nfj7h0000gq4jgm7bi279i64f0000ja3aiz7f0000ib3akz3ckx4xjb4z00004z9y6i8w6ccn00005ocp6yco00007o9k8i8l9y9l85cha4ch0000ao8qd68pbjci0000fp8mea8udicffhckflavdsaq"),w={w:100,d:[],c(){for(let e=-1;e<40;e++){w.d[e]=[];for(let t=-1;t<30;t++)w.d[e][t]=[]}},a(t){var e=w.w,s=p(e/2+1),i=n((t.p.x-s)/e),r=n((t.p.x+s)/e),h=n((t.p.y-s)/e),s=n((t.p.y+s)/e);w.s(t,i,h),w.s(t,r,h),w.s(t,i,s),w.s(t,r,s)},s(t,e,s){w.d[e]||(w.d[e]=[]),w.d[e][s]||(w.d[e][s]=[]),w.d[e][s].push(t)},g:(t,e)=>(t=n(t/w.w),e=n(e/w.w),w.d[t]&&w.d[t][e]?w.d[t][e]:[])};class t{constructor(){this.p=[],this.c=-1}a(t){this.p.push(t)}i(t,e){this.p[t]=e}g(t){return void 0!==t?this.p[t]:(this.c++,this.c>=this.p.length&&(this.c=0),this.p[this.c])}l(){return this.p.length}}const y=new t,M=new t,R=new t,J=new t,_=new t,K=new t,O=new t,C=(t,e)=>new Z(c(t),c(e)),N=(t,e,s)=>t.translate(c(e),z(s)),V=(t,e,s)=>{let h=s.clone(),a=null;switch(e){case"t":a=C(60,80),N(a.ctx,30,73),i=a.ctx,n=h.rand(40).rgba(),r=xt(),(c=[]).push(["t",n,v(-5,5),v(-25,-40),v(8,14),v(8,14)]),c.push(["t",n,v(-8,8),v(-20,-35),v(10,16),v(10,16)]),c.push(["t",n,v(-10,-5),v(-15,-20),v(12,17),v(12,17)]),c.push(["t",n,v(5,10),v(-15,-20),v(12,17),v(12,17)]),c.sort(()=>v(-.5,.5)),ut(i,r.concat(c)),y.a(a);break;case"p":a=C(60,80),N(a.ctx,30,73);{var n=a.ctx,o=h.rand(40).rgba();let t=xt(),e=[],s=v(18,25),i=v(2,5),r=-8;for(let t=s;0<t;t-=i)r-=5,e.push(["t",o,0,r,t,t/3]);ut(n,t.concat(e))}M.a(a);break;case"r":a=C(60,80),N(a.ctx,30,73);{var x=a.ctx,i=[0,0,h.lightness(u(-20,20)).rgba()],m=a;let[g,w,t]=i,y=new S(t||"777777");j(x,"#00000022"),L(x,[g,w,z(24),z(7)]),L(x,[g,w,z(21),z(6)]),[v(20,32),v(15,22),v(10,15),v(7,13)].forEach((t,e)=>{t=z(t),e=z(v(5,7)*e*(.5<=v(0,1)?-1:1));var i=x,[r,h,a,n,e]=(e=[g+e,w-t,.8*t,t,y.rgba()],t=m,e),o=new S(e||"777777"),s=(j(i,o.rgb()),[]),c=2*k/10;for(let t=0;t<=2*k-c;t+=c){var l=t+v(-c/3,c/3);s.push(r+b(l)*(a+2)),s.push(h+U(l)*(n+2))}q(i,s,2);for(let s=0;s<z(30)*k;s+=k/z(20)){let t=s%(2*k),e=0;0<=t&&t<2.5||5.1<t?e=-30:3<=t&&t<=5&&(e=40);var d=o.clone().lightness(v(-10,10)+e).rand(10),p=(u=v(0,1))*a,f=u*n,u=(e*=u,r+b(s)*p),p=h+U(s)*f;j(i,d.rgb()),L(i,[u,p,v(1,3),v(1,3),2,v(0,k)])}t&&t.colCircles.push({x:r,y:h+z(6),r:a-z(1)})})}R.a(a)}var r,c;0<t&&setTimeout(()=>V(t-1,e,s),1)},r=(t,e,s)=>{s=void 0!==s?s:0;var i=C(25,35);ft(i.ctx,s,!1,t),e.i(s,i),i=C(25,35),ft(i.ctx,s,!0,t),e.i(s+360,i),s<359&&setTimeout(()=>r(t,e,s+1),1)},x={raceAudio:null,crashAudio:null,playCrash(){this.crashAudio&&(this.crashAudio.currentTime=0,this.crashAudio.play())},play(){this.raceAudio&&(this.raceAudio.currentTime=0,this.raceAudio.play())},stop(){this.raceAudio&&(this.raceAudio.pause(),this.raceAudio.currentTime=0)}},X=t=>String(t).padStart(2,"0"),G=t=>{let e=!0,s="preparing worldcup: ";(y.l()<30||M.l()<30)&&(s+="planting trees... ",e=!1),R.l()<20&&(s+="placing rocks... ",e=!1),0<y.l()&&0<M.l()&&t.addSprite(new dt({x:v(40,t.w-40),y:v(40,t.h-40)})),0<R.l()&&t.addSprite(new pt({x:v(40,t.w-40),y:v(40,t.h-40)}));var i=J.l()+_.l()+K.l()+O.l();i<2880&&(s+="finding witches ("+i+"/2880)... ",e=!1),h(s),e?(h(""),t.menu()):setTimeout(()=>G(t),200)};class Q{constructor(t,e,s,i){this.x=z(t),this.y=z(e),this.w=z(s),this.h=z(i)}}const Y=(e,s)=>{e.flyPath=[];for(let t=0;t<=s.length-2;t+=2)e.flyPath.push(new m(z(s[t]),z(s[t+1])))};class Z{constructor(t,e){this.c=document.createElement("canvas"),this.c.width=t,this.c.height=e,this.ctx=this.c.getContext("2d"),this.colCircles=[]}}class m{constructor(t,e){this.x=t,this.y=e}clone(){return new m(this.x,this.y)}add(t,e){return new m(this.x+t,this.y+e)}addP(t){return this.add(t.x,t.y)}diffP(t){return new m(this.x-t.x,this.y-t.y)}div(t){return new m(this.x/t,this.y/t)}}class i{constructor({x:t,y:e}){this.p=new m(z(t),z(e)),this.game=null,this.colliders=[],this.ttl=1/0,this.sortModifier=0}addColliderCircle(t,e,s){((t=new lt(t,e,s)).parent=this).colliders.push(t)}update(t){this.ttl-=t}doRender(t,e,s){this.renderStart(t,e),this.render(t,e,s),this.renderEnd(t,e)}renderStart(t,e){t.save(),t.translate(this.p.x,this.p.y)}render(t,e){}renderEnd(t,e){t.restore()}}class $ extends i{constructor(t){super(t),this.d=[];let e=[];for(let t=0;t<s.length;t+=2)0!=s[t]&&(e.push(z(s[t])),e.push(z(s[t+1])),0==s[t+2])&&(this.d.push(e),e=[]);1<e.length&&this.d.push(e),this.wiggle=.1,this.lw=0,this.rd=[]}update(t){this.lw-=t,this.lw<=0&&(this.rd=this.d.map(t=>t.map(t=>u(t-3,t+3))),this.lw=this.wiggle)}render(e,t){e.lineCap="round",[[8,"#00000088"],[4,"#ffffaacc"],[1,"#ffffff"]].forEach(t=>{e.lineWidth=t[0],P(e,t[1]),this.rd.forEach(t=>q(e,t,1))})}}class tt extends i{constructor(t){super(t),this.items=t.items||[],this.selected=0,this.sortModifier=2e3}keydown(t){0<this.selected&&("KeyW"==t||"ArrowUp"==t)&&this.selected--,this.selected<this.items.length-1&&("KeyS"==t||"ArrowDown"==t)&&this.selected++;var e=this.items[this.selected];!e.cb||"Space"!=t&&"Enter"!=t&&(!e.o&&!e.n||"ArrowLeft"!=t&&"ArrowRight"!=t)||(e.cb("ArrowLeft"==t?-1:1),e.remove&&(this.ttl=-1))}render(r,t){r.textAlign="left",this.items.forEach((t,e)=>{r.font=c(24)+"px "+f;let s=e==this.selected,i=s?"> ":"";i+=t.t,null!=t.o&&(r.font=c(14)+"px "+f,i+=": "+(this.game[t.o]?"on":"off")),null!=t.n&&(r.font=c(14)+"px "+f,i+=": "+this.game[t.n]),null!=t.u&&(i+=": "+this.game[t.u]+(0<=t.c()?" (costs "+t.c()+" witchcraft)":" (max)")),i+=s?" <":"",j(r,"#000000"),r.fillText(i,0,z(30*e)),j(r,s?"#ffff88":"#ffffff"),r.fillText(i,z(-2),z(30*e-2))})}}class et extends i{constructor(t){super(t),this.sortModifier=2e3}update(t){W.startIn<=-.5&&(this.ttl=-1)}render(t,e){t.font="40px "+f,t.textAlign="center",j(t,"#ffffff"),t.fillText("Mount thy broom! The race starteth in...",0,0),t.font="100px "+f;var s=p(W.startIn);t.fillText(s,0,100)}}class st extends i{constructor(t){super(t),this.ttl=t.ttl||1,this.initTtl=this.ttl,this.rot=0,this.color=new S(t.col||"ffffaa25"),this.fadeRate=this.color.a/this.initTtl,this.size=null!=t.size?t.size:1,this.growRate=null!=t.grow?t.grow:30,this.rotationRate=null!=t.rot?t.rot:720,this.dpos=new m(v(-10,10),v(-15,5))}update(t){super.update(t),this.color.fade(this.fadeRate*t),this.size+=this.growRate*t,this.rot+=this.rotationRate*t,this.p=this.p.add(this.dpos.x*t,this.dpos.y*t)}render(t){j(t,this.color.rgba()),t.rotate(a(this.rot)),t.fillRect(-this.size/2,-this.size/2,this.size,this.size)}}class it extends i{constructor(t){super(t),this.rot=0,this.speed=0,this.maxFw=z(220+3*W.maxFw),this.maxBw=z(-200),this.turnspeed=110+2*W.turnspeed,this.accFw=z(200),this.accBw=z(500),this.airbrake=.5,this.acc=0,this.lastParticle=0,this.particleRate=.02,this.imgs=t.ip,this.rounds=-1,this.cp=0,this.isPlayer=!1,this.place=0}update(s){super.update(s),0!=this.acc&&(this.speed+=this.acc*s,this.speed=l(this.speed,this.maxBw,this.maxFw)),null==[0,15,-15,25,-25].find(t=>{var e=ht(this.p,this.speed,this.rot+t,s);if(!at(this.game,e,this.isPlayer))return this.p=e,this.rot+=t,0!=t&&(this.speed*=.5,this.acc*=.1),!0;rt(this.game,this.p,1)})&&(this.speed*=-.2),this.rot<0&&(this.rot+=360),360<this.rot&&(this.rot-=360);var t=Math.abs(this.speed);(t>z(50)&&this.lastParticle>6*this.particleRate||120<t&&this.lastParticle>this.particleRate)&&(this.lastParticle=0,this.game.addSprite(new st({x:o(this.p.x),y:o(this.p.y)-1}))),nt(this.game,this),this.lastParticle+=s}nextP(t,e){var s=this.p.clone();return.5<=Math.abs(this.speed)&&(s.x+=Math.cos(a(t))*this.speed*e,s.y+=Math.sin(a(t))*this.speed*e),s}render(t,e,s){let i=Math.round(this.rot)%360;s&&(i+=360),t.drawImage(this.imgs.g(i).c,z(-11),z(-19)),this.game.dbg&&(j(t,"#ffff00"),L(t,[0,0,1,1]))}}const rt=(e,s,i,r)=>{for(let t=0;t<(i||1);t++)e.addSprite(new st({x:o(s.x)+v(-5,5),y:o(s.y)+v(-5,5),size:15,col:r||"ffffaa66",ttl:.5,rot:1200}))},ht=(t,e,s,i)=>(t=t.clone(),.5<=Math.abs(e)&&(t.x+=Math.cos(a(s))*e*i,t.y+=Math.sin(a(s))*e*i),t),at=(t,e,s,i)=>{if(s&&t.optCollide||i)for(var r of t.otherWitches)if(!(0<r.dizzy)&&new lt(r.p.x,r.p.y,i?15:9).isInside(e))return i&&i.damage(r),x.playCrash(),!0;return w.g(e.x,e.y).find(t=>t.colliders.find(t=>((t=t.isInside(e))&&x.playCrash(),t)))},nt=(t,e)=>{var s,i;0!=t.cps.length&&(s=e.p,i=t.cps[e.cp],s.x>=i.x)&&s.x<=i.x+i.w&&i.y<=s.y&&s.y<=i.y+i.h&&(0==e.cp&&(e.rounds++,e.rounds==t.roundsToRun)&&(t.finished++,e.place=t.finished,e.isPlayer)&&(t.xp+=5-e.place),e.cp++,e.cp>=t.cps.length)&&(e.cp=0)};class T extends it{constructor(t){super(t),this.t=null,this.ti=-1,this.dizzy=0}nt(){this.ti++,this.ti>=this.game.flyPath.length&&(this.ti=0),this.t=this.game.flyPath[this.ti].clone(),this.t.x+=u(-10,10),this.t.y+=u(-10,10)}update(t){var e,s;0<this.game.flyPath.length&&(this.t||this.nt(),(e=g(this.p,this.t))<30&&this.nt(),s=Math.atan2(this.t.y-this.p.y,this.t.x-this.p.x)/(k/180),s=ot(s),ot(360+this.rot-s)<=180?this.rot-=this.turnspeed*t:this.rot+=this.turnspeed*t,Math.abs(this.rot-s)<20?this.acc=70<e?this.accFw:.2*this.accFw:(this.acc=0,this.speed*=1-2*this.airbrake*t)),0<this.game.startIn&&(this.acc=0,this.speed=0),(4==this.game.finished||this.game.player&&0<this.game.player.place)&&(this.acc=0,this.speed*=.9),this.dizzy-=t,0<this.dizzy&&(this.acc*=.1),super.update(t)}}const ot=t=>360<t?t-360:t<0?t+360:t;class ct extends it{constructor(t){super(t),this.isPlayer=!0,this.lastJinx=0,this.maxFw=z(210+5*W.maxFw),this.maxBw=z(-200),this.turnspeed=100+4*W.turnspeed}update(t){this.lastJinx+=t,this.game.actions.l&&(this.rot-=this.turnspeed*t),this.game.actions.r&&(this.rot+=this.turnspeed*t),this.game.actions.u?this.acc=this.accFw:this.game.actions.d?this.acc=-this.accBw:(this.acc=0,this.speed*=1-this.airbrake*t),0<this.game.startIn&&(this.acc=0,this.speed=0),4!=this.game.finished&&!this.place||(this.acc=0,this.speed*=.9),super.update(t),this.game.actions.f&&this.lastJinx>=this.game.jinxCooldown&&(this.game.actions.f=!1,this.game.addSprite(new wt({x:o(this.p.x),y:o(this.p.y),rot:this.rot})),this.lastJinx=0)}render(t,e,s){super.render(t,e,s),this.lastJinx<this.game.jinxCooldown&&(P(t,"#00000055"),A(t,[-11,-26,9,-26])),P(t,"#ffffaaaa"),e=[-11,-26,20*l(this.lastJinx/this.game.jinxCooldown,0,1)-11,-26],this.lastJinx>=this.game.jinxCooldown&&(P(t,"#ffffaa88"),t.lineWidth=3,t.lineCap="round",A(t,e)),t.lineWidth=1,A(t,e)}}class lt{constructor(t,e,s){this.p=new m(t,e),this.r=s,this.parent=null}getP(){return this.parent?this.p.addP(this.parent.p):this.p}isInside(t){return g(this.getP(),t)<=this.r}intersets(t){return g(this.getP(),t)<=this.r+t.r}render(t){P(t,"#ffff0088"),L(t,[this.p.x,this.p.y,this.r,this.r,1])}}class S{constructor(t){t="#"==t[0]?t.substr(1):t,this.r=e(t.substring(0,2)),this.g=e(t.substring(2,4)),this.b=e(t.substring(4,6)),this.a=8==t.length?e(t.substring(6,8)):255}rgb(){return"#"+this._toHex(this.r)+this._toHex(this.g)+this._toHex(this.b)}rgba(){return"#"+this._toHex(this.r)+this._toHex(this.g)+this._toHex(this.b)+this._toHex(this.a)}clone(){return new S(this.rgba())}lightness(t){return t=Math.round(t),this.r=l(this.r+t,0,255),this.g=l(this.g+t,0,255),this.b=l(this.b+t,0,255),this}rand(t){return this.r=l(this.r+u(-t,t),0,255),this.g=l(this.g+u(-t,t),0,255),this.b=l(this.b+u(-t,t),0,255),this}fade(t){t=Math.round(t),this.a=l(this.a-t,0,255)}_toHex(t){return(t<=15?"0":"")+Number(t).toString(16)}}class dt extends i{constructor(t){switch(super(t),this.img=null,u(1,2)){case 1:this.img=y.g();break;case 2:this.img=M.g()}this.addColliderCircle(z(0),z(-9),z(14))}render(e,t){e.drawImage(this.img.c,z(-30),z(-73)),this.game.dbg&&this.colliders.forEach(t=>t.render(e))}}class pt extends i{constructor(t){super(t),this.img=R.g(),this.img.colCircles.forEach(t=>this.addColliderCircle(t.x,t.y,t.r))}render(e,t){e.drawImage(this.img.c,z(-30),z(-73)),this.game.dbg&&this.colliders.forEach(t=>t.render(e))}}const P=(t,e)=>t.strokeStyle=e,j=(t,e)=>t.fillStyle=e,ft=(t,e,s,i)=>{N(t,11,19),i=i||"#000000",e=a(e);var r=b(e),h=(t.globalAlpha=s?.4:1,s?1:2);s||(j(t,"#00000015"),E(t,[0,8,12,4]),E(t,[0,8,10,3]),E(t,[0,8,8,2])),t.lineWidth=z(1),t.rotate(e),P(t,"#5a3000"),A(t,[-10,0,10,0]),P(t,"#ffffaa"),A(t,[-10,-2,-6,-1,-6,0,-10,0,-6,0,-6,1,-10,2]),t.rotate(-e),s&&t.clearRect(-5,-5,10,10),j(t,i),P(t,i),t.lineWidth=1,E(t,[0,-3,3,7,h,.4*r]),e=2*r,j(t,"#ffffff"),P(t,"#ffffff"),E(t,[e,-7,2,2,h]),j(t,i),P(t,i),E(t,[e,-10,7,2,h]),A(t,[e,-19,3+e,-10,e-3,-10,e,-19,3+e],h),t.globalAlpha=1},ut=(e,t)=>{t.forEach(t=>{switch("string"==typeof t?t[0]:t.shift()){case"s":P(e,t.substr(1));break;case"f":j(e,t.substr(1));break;case"l":A(e,t);break;case"lf":A(e,t,2);break;case"t":yt(e,t);break;case"e":E(e,t)}})},gt=(t,e)=>{1==e?t.stroke():t.fill()},q=(e,s,t)=>{e.beginPath(),e.moveTo(s[0],s[1]);for(let t=2;t<s.length;t+=2)e.lineTo(s[t],s[t+1]);gt(e,t||1)},A=(t,e,s)=>{q(t,e.map(t=>z(t)),s)},L=(t,e)=>{var[e,s,i,r,h,a]=e,a=a||0,h=h||2;t.beginPath(),t.ellipse(e,s,i,r,a,0,2*k),gt(t,h)},E=(t,e)=>{var[e,s,i,r,h,a]=e;L(t,[z(e),z(s),z(i),z(r),h,a])};class wt extends i{constructor(t){super(t),this.rot=t.rot,this.ttl=5,this.speed=480,this.col=new S(t.col||"#ffdd0088"),this.col=this.col.rand(80)}update(t){super.update(t),t=ht(this.p,this.speed,this.rot,t),at(this.game,t,!1,this)?(this.ttl=-1,rt(this.game,this.p,3,this.col.rgba())):this.p=t}damage(t){t.speed=0,t.acc=0,t.dizzy=1.5}render(t,e){var s=this.col.clone().lightness(200),i=(s.a=150,this.col.clone()),r=(i.a=10,[]),h=(r.push("f"+i.rgba()),r.push(["e",0,0,12,5,2]),r.push(["e",0,0,11,4,2]),r.push(["e",0,0,10,3,2]),r.push(["e",0,0,9,2,2]),r.push(["e",0,0,8,1,2]),r.push(["e",0,-9,6,6,2]),r.push(["e",0,-9,5,5,2]),r.push(["e",0,-9,4,4,2]),r.push("f"+this.col.rgba()),r.push(["e",0,-9,3,3,2]),r.push("s"+s.rgba()),ut(t,r),[]);for(let t=0;t<10;t++)h.push(u(-5,5)),h.push(u(-14,-4));t.lineWidth=2,q(t,h),t.lineWidth=1,q(t,h)}}const yt=(i,t)=>{var[t,r,h,a,n]=t,n=n||a,r=z(r),h=z(h),a=z(a),o=(n=z(n),new S(t));(t=o.clone()).a=100,j(i,t.rgba()),L(i,[r,h,a,n]);for(let s=0;s<z(10*k);s+=k/z(8)){let t=s%(2*k),e=0;0<=t&&t<=2?e=-30:3<=t&&t<=5&&(e=20);var c=o.clone().lightness(u(-10,10)+e).rand(20),l=(p=v(0,1))*a,d=p*n,p=(e*=p,r+b(s)*l),l=h+U(s)*d;j(i,c.rgba()),L(i,[p,l,z(3),z(1),2,v(0,k)])}},xt=()=>["f#00000033",["e",0,2,14,5],["e",0,2,9,4],"s#883300",["l",-2,2,1,-8],["l",2,3,1,-9],["l",u(2,4),2,u(-1,0),-8],"s#aa5500",["l",0,3,0,-10],["l",u(-4,-2),2,u(0,1),-8]],mt=(a,n,t,e)=>{var o=new S(t||"#44371f55"),c=z(e||15);n=n.map(t=>z(t));for(let h=0;h<=n.length-4;h+=2){let t=new m(n[h],n[h+1]),e=new m(n[h+2],n[h+3]),s=t.clone(),i=g(t,e),r=e.diffP(t).div(i);0==h&&(s=s.add(-r.x,-r.y)),a.bgc.lineCap="round";for(let t=0;t<=i;t+=.3){var l=(s=s.add(.3*r.x,.3*r.y)).add(r.x*v(3,5)+v(-1,1),r.y*v(3,5)+v(-1,1)),d=v(-c,c),p=v(-c,c),f=o.clone().rand(30);P(a.bgc,f.rgba()),a.bgc.lineWidth=u(1,3),q(a.bgc,[s.x+d,s.y+p,l.x+d,l.y+p])}}},bt=(t,e,s,i)=>{var r=new I;for(r.init(t);r.generate()<1;);t=r.createWave(),x[s]=document.createElement("audio"),x[s].src=URL.createObjectURL(new Blob([t],{type:"audio/wav"})),x[s].loop=!!i,i&&(x.play(),h("musicians aquired"),setTimeout(()=>h(""),2e3),i())};let W=new class{constructor(){this.dbg=!1,this.lastUpdate=Date.now(),this.canvas=document.querySelector("#gameCanvas"),this.c=this.canvas.getContext("2d"),this.bgcanvas=document.querySelector("#bgCanvas"),this.bgc=this.bgcanvas.getContext("2d"),this.w=window.innerWidth,this.h=window.innerHeight,this.optMusic=!0,this.optCollide=!0,this.sprites=[],this.ghostSprites=[],this.otherWitches=[],this.keyListeners=[],this.player=null,this.treeBaseColor=new S("008800dd"),this.rockBaseColor=new S("666666"),this.resize(),this.keys={KeyA:"l",KeyD:"r",KeyW:"u",KeyS:"d",ArrowLeft:"l",ArrowRight:"r",ArrowUp:"u",ArrowDown:"d",Space:"f"},this.actions={l:!1,r:!1,u:!1,d:!1};let e=this;document.addEventListener("keydown",t=>e.keydown(t)),document.addEventListener("keyup",t=>e.keyup(t)),this.levels=[],this.currentLevel=-1,this.state=1,this.raceMenu=null,this.flyPath=[],this.cps=[],this.roundsToRun=5,this.finished=0,this.startTime=-1,this.xp=0,this.jinxCooldown=10,this.maxFw=0,this.turnspeed=0}keydown(e){this.keys[e.code]&&(this.actions[this.keys[e.code]]=!0),"Escape"==e.code&&(3==this.state?this.displayRaceMenu(!0):4==this.state&&(this.state=3,this.raceMenu.ttl=-1)),this.keyListeners.forEach(t=>t.keydown(e.code))}displayRaceMenu(t){this.raceMenu||(t&&(this.state=4),this.raceMenu=new tt({x:200,y:200,items:[{t:"Restart Race",cb:()=>W.lvl(W.currentLevel),remove:!0},{t:"Abort to Mainmenu",cb:()=>W.menu(),remove:!0},{t:"Continue Race",cb:()=>W.state=3,remove:!0}]}),this.keyListeners.push(this.raceMenu))}keyup(t){this.keys[t.code]&&(this.actions[this.keys[t.code]]=!1)}resize(){this.w=window.innerWidth,this.h=window.innerHeight;var[t,e]=[this.w,this.h],s=(D(this.canvas,t,e),this.c.clearRect(0,0,t,e),D(this.bgcanvas,t,e),this.bgc),i=t,r=e,h=new S("#285526"),a=new S("#ffffffaa");j(s,h.rgb()),s.fillRect(0,0,i,r);for(let e=0;e<=i;e+=5)for(let t=0;t<=r;t+=5){var n=h.clone().lightness(u(-10,30)).rand(20),o=(P(s,n.rgb()),s.beginPath(),n=e+v(-2,2),t+v(-2,2)),c=n+v(-2,2),l=o+v(-5,-2);s.moveTo(n,o),s.lineTo(c,l),s.stroke(),.95<v(0,1)&&(P(s,a.clone().rand(200).rgba()),s.beginPath(),s.moveTo(c-.5,l-.5),s.lineTo(c+.5,l+.5),s.stroke())}d=Math.min(t/1366,e/629)}gameloop(){let t=this,e=Date.now(),s=(e-this.lastUpdate)/1e3;s=l(s,0,.1),this.lastUpdate=e,this.update(s),this.render(),requestAnimationFrame(()=>t.gameloop())}update(e){4==this.state&&this.raceMenu?this.raceMenu.update(e):(this.startIn-=e,this.sprites=this.sprites.filter(t=>0<=t.ttl),this.ghostSprites=this.ghostSprites.filter(t=>0<=t.ttl),this.keyListeners=this.keyListeners.filter(t=>0<=t.ttl),this.raceMenu&&this.raceMenu.ttl<0&&(this.raceMenu=null),this.sprites.forEach(t=>t.update(e)),this.sprites.sort((t,e)=>t.p.y+t.sortModifier-(e.p.y+e.sortModifier)),this.startIn<=0&&this.raceTime<0&&(this.raceTime=0),0<=this.raceTime&&this.player&&this.player.place<=0&&(this.raceTime+=e),this.player&&0<this.player.place&&this.displayRaceMenu(!1))}render(e){let s=this.c;var t,i,r,h;if(s.clearRect(0,0,this.canvas.width,this.canvas.height),this.player&&3==this.state&&(t=this.cps[this.player.cp])){var a=s,n=t;j(a,"#ffffaa11"),a.fillRect(n.x,n.y,n.w,n.h),a.fillRect(n.x+2,n.y+2,n.w-4,n.h-4),a.fillRect(n.x+4,n.y+4,n.w-8,n.h-8),j(a,"#ffffaaaa");for(let t=0;t<20;t++){var o=v(n.x,n.x+n.w-2),c=v(n.y,n.y+n.h-2);a.fillRect(o,c,2,2)}}this.sprites.forEach(t=>t.doRender(s,e)),this.ghostSprites.forEach(t=>t.doRender(s,e,!0)),this.raceMenu&&this.raceMenu.doRender(s,e),j(s,"#ffffff"),!this.player||3!=this.state&&4!=this.state||(s.font="20px "+f,s.textAlign="center",t="Round "+l(this.player.rounds+1,0,this.roundsToRun)+" of "+this.roundsToRun,h=l(this.raceTime,0,9999),i=Math.floor(h/60),r=Math.floor(h-60*i),h=Math.floor(100*(h-Math.floor(h))),t+=" - Elapsed Time: "+X(i)+":"+X(r)+","+X(h),s.fillText(t,this.w/2,30),this.player.place&&(s.font="40px "+f,s.textAlign="center",s.fillText("The race is over!",this.w/2,150),s.font="60px "+f,s.fillText("Thou finished as "+this.player.place+".",this.w/2,250))),s.font="20px "+f,s.textAlign="right",s.fillText("Witchcraft Points: "+this.xp,this.w-30,30),2==this.state&&(s.font="16px "+f,s.fillText('The music is a cover of "Furatum Alci Provinciam" by CORVUS CORAX',this.w-30,this.h-30)),this.dbg&&(j(s,"ffff00"),this.flyPath.forEach(t=>L(s,[t.x,t.y,3,3])),P(s,"ffffff"),this.cps.forEach(t=>{s.beginPath(),s.rect(t.x,t.y,t.w,t.h),s.stroke()}))}addSprite(t){return t.game=this,t.keydown&&this.keyListeners.push(t),this.sprites.push(t),it.prototype.isPrototypeOf(t)&&(this.ghostSprites.push(t),t.isPlayer||this.otherWitches.push(t)),t}init(){h("preparing worldcup..."),this.resize(),this.lastUpdate=Date.now(),this.gameloop(),V(30,"t",this.treeBaseColor),V(30,"p",this.treeBaseColor),V(20,"r",this.rockBaseColor),setTimeout(()=>r("#000000",J),10),setTimeout(()=>r("#ff0000",_),20),setTimeout(()=>r("#ff9900",K),30),setTimeout(()=>r("#00aaff",O),40),G(this)}clean(){this.sprites=[],this.ghostSprites=[],this.keyListeners=[],this.player=null,this.cps=[],this.otherWitches=[],this.raceTime=-1,this.finished=0}menu(){w.c(),x.stop(),h(""),this.state=2;let e=this,t=(this.resize(),this.clean(),this.addSprite(new tt({x:20,y:350,items:[]}))),s=[],i=[{t:"Witchcraft and Jinxes",cb:()=>{t.items=s,t.selected=0}},{t:"Racing-Music",cb:()=>e.optMusic=!e.optMusic,o:"optMusic"},{t:"Collide with witches",cb:()=>e.optCollide=!e.optCollide,o:"optCollide"},{t:"Laps per Race",cb:t=>{e.roundsToRun+=t,10<e.roundsToRun&&(e.roundsToRun=3),e.roundsToRun<3&&(e.roundsToRun=10)},n:"roundsToRun"},{t:"Start Race in Vienna",cb:()=>e.lvl(0)},{t:"Start Race in Nottingham",cb:()=>e.lvl(1)},{t:"Start Race in Warsaw",cb:()=>e.lvl(2)},{t:"Start Race in Rome",cb:()=>e.lvl(3)}];s=[{t:"Upgrade Jinx-Interval",cb:()=>{var t=11-e.jinxCooldown;e.xp>=t&&2<e.jinxCooldown&&(e.jinxCooldown--,e.xp-=t)},u:"jinxCooldown",c:()=>2<e.jinxCooldown?11-e.jinxCooldown:-1},{t:"Upgrade broomstick / max speed",cb:()=>{var t=e.maxFw+1;e.xp>=t&&(e.maxFw+=1,e.xp-=t)},u:"maxFw",c:()=>e.maxFw+1},{t:"Upgrade broom bristles / turn rate",cb:()=>{var t=e.turnspeed+1;e.xp>=t&&(e.turnspeed+=1,e.xp-=t)},u:"turnspeed",c:()=>e.turnspeed+1},{t:"Back to main",cb:()=>{t.items=i,t.selected=0}}],t.items=i,this.addSprite(new $({x:450,y:0})),this.addSprite(new T({x:50,y:50,ip:_})),this.addSprite(new T({x:o(this.w-300),y:50,ip:K})),this.addSprite(new T({x:50,y:o(this.h-100),ip:O})),Y(this,[this.w-180,180,this.w-180,this.h-180,180,180,180,this.h-180].map(t=>o(t)))}lvl(s){if(this.levels.length<=s)alert("level "+s+" missing");else{this.currentLevel=s;let t=this.levels[s],e=(h(t.n+" loading..."),this.clean(),this.resize(),this.render(),this);null==x.crashAudio&&bt(F,0,"crashAudio"),this.optMusic&&null==x.raceAudio?(h("recruiting Corvus Corax as minstrels..."),setTimeout(()=>bt(B,0,"raceAudio",()=>e.loadLevel(t)),10)):e.loadLevel(t)}}loadLevel(t){w.c(),this.player=this.addSprite(new ct({x:300,y:120,ip:J})),t.d.forEach(t=>{var e={t:(t=t.split("#"))[0],d:H(t[1])};switch(e.t){case"t":this.treeBaseColor;var n=e.d;for(let a=0;a<=n.length-4;a+=2){let t=new m(n[a],n[a+1]),e=new m(n[a+2],n[a+3]),s=t.clone(),i=g(t,e),r=p(i/22),h=e.diffP(t).div(r);0==a&&(s=s.add(-h.x,-h.y));for(let t=0==a?0:1;t<=r;t++){var o=(s=s.addP(h)).clone(),o=this.addSprite(new dt({x:o.x+z(v(-3,3)),y:o.y+z(v(-3,3))}));w.a(o)}}break;case"d":mt(this,e.d);break;case"f":mt(this,e.d,"ffffff22",2);break;case"r":var c=e.d,l=new S("666666");for(let a=0;a<=c.length-4;a+=2){let t=new m(c[a],c[a+1]),e=new m(c[a+2],c[a+3]),s=t.clone(),i=g(t,e),r=p(i/45),h=e.diffP(t).div(r);0==a&&(s=s.add(-h.x,-h.y));for(let t=0==a?0:1;t<=r;t++){var d=(s=s.addP(h)).clone(),d=this.addSprite(new pt({x:d.x+z(v(-3,3)),y:d.y+z(v(-3,3)),f:l.rgba()}));w.a(d)}}break;case"ps":this.player.p.x=z(e.d[0]),this.player.p.y=z(e.d[1]);break;case"p":Y(this,e.d);break;case"cp":for(let t=0;t<=e.d.length-4;t+=4)this.cps.push(new Q(e.d[t],e.d[t+1],e.d[t+2],e.d[t+3]))}}),this.addSprite(new T({x:o(this.player.p.x)+20,y:o(this.player.p.y)-10,ip:_})),this.addSprite(new T({x:o(this.player.p.x)+40,y:o(this.player.p.y)+10,ip:K})),this.addSprite(new T({x:o(this.player.p.x)+60,y:o(this.player.p.y)-10,ip:O})),h(""),this.addSprite(new et({x:o(this.w/2),y:o(this.h/2-60)})),this.state=3,this.optMusic&&x.play(),this.startIn=3}};W.levels.push({n:"Lobau / Vienna",d:["t#1i2ems2qnq8kp480p430xg2gyu3kzogwjkfi928q9a9yb8e49ugw2wgw0zf4132m","t#506450bo6ed24qci465ki264jgaktwc4v5bev9a7ub64","t#2c1pnx20oa7b","r#tjbeufanud8qu26z","d#dv40he4aji5sl27xmy97p696qj7u","d#sj5qts4mvs4pwn6bxb8j","d#9v767z6z6t81729q7yc07udx6pf14ifa2zdy2ec3","d#2f6g2t5340475t3y","r#hvg0eidvbbc4c8e7b8gm","ps#7r48","p#ig51l98foc9usz4wvv5gwmblu1dbk4c5es7t8w6w77a081dg4seo2mb2245z5c41eo3y","f#ce2pce5m","cp#cg2h123ev89a43144z9u5418"]},{n:"Sherwood / Nottingham",d:["ps#53ee","t#6agwulgvxug0zccxzl3nyb1lu50eg30r3i0m1h1z0f760idq2bgc5ygt","t#cm12at279r6k9n7x8s7x89698j2z710y9q1x906g","t#475b4e9c69c0becce3amg360lb4uow5uqr81rncf","t#l39lkgd5iwghl3eklmg6ntgfmbeelg9m","r#vebfv8av","r#wk4zw74z","r#qk3wqz46","d#gobcj799lq8wo8azqsdjsydf","d#6p6p584s354k1y731e9r","p#cvd2kw84suepxac1w880oe41hh36at8q8h8t4z4j285z2jbi8ydo","f#aucmasgh","cp#avcf124irobo7l154b673z14"]},{n:"Kampinoski / Warsaw",d:["t#r593oe82el7mbt92are5g2gbxcglzefmzgc7yq2fvo0k450m131y0rbt18f73ygm98geb4eo","r#f1bnh0cwped3nebfgcbn","t#q2d7tod3vbarv173rq4qil44b347605d5bco","ps#fp9f","p#lx9gqibdteaotg7hoi5ucr6r8icm5ae21tah5i4edd2sro37we6swsbgudecfyf5djblgb9u","f#m08blzb3","d#92a86wd84je033c0","d#oc9zqtaxsc9qs181pn6h","d#gefbe6dddpbof3a9hc9i","cp#m27z1c3jen461f3cnd0j1g3xrod51a3f"]},{n:"Rome",d:["t#0x4t1a2r2y1i7v1lfn6hng1wrt0zxf1zym6nymc1x8g9srh2nwgqj4exgdd1ccf99wgi5fgn2jfq0scb0r54","r#cp9vbkba8dcg54c24g8z5b6v7i67b48fcb9i","r#kd9nn97cqx63uj86u3azrtcunqbkko9u","f#6y1t6y60","ps#2844","d#68ds4id239af367i4l51","d#qu4nua5ow78svlc9t2dup9dz","r#6n7u5ub589b87u8fan9z","r#qp7smk9lt59bppatrobi","t#971hfo59ln1tay1efh3zim2ge227fe2w","t#bdglgee7lpgyd0gngefbirgafsg3","t#fqa4ga9z","p#at4wnjd3t0ecx0a5ut52od4egtb78rer3jdo238v534q","t#ydgoz7d6zf6qz31vvb0f1z0n056m0cdr0zgt4lh21bf0","d#kk6vhy92h8akfhbjbud4","d#bp63f18tgj8zhla3kxcl","d#e38gewapgrbhj0bp","d#iz7kg08reladcxch","cp#701o134jqvck1n4cp11l154y7bcg1d44"]}),W.init()</script>