<!doctype html><title>Timber Terry - js13kGames 2012</title><script>var game=function(){var t,r,e,a,i,n,o,h,s,l,d,u,c,y,f,w,b,x,p,v,T,S,g,m,R,C,L,Q,P,M,Y,U=0,N={},I=!1,W=0,j=0,V=!1,O=(new Date).getTime(),F=O;function X(){o=wt("terry"),t=wt("bg"),n=wt("score"),i=wt("chips"),r=wt("tree"),a=wt("p"),e=wt("bear"),c=o.getContext("2d"),y=t.getContext("2d"),s=r.getContext("2d"),a.getContext("2d"),h=e.getContext("2d"),l=i.getContext("2d"),u=o.width,d=o.height,.5*u,.5*d,w=new D({Q:y}),x=new E({Q:y,y:330,height:70}),p=new K({Q:l}),M=new rt({Q:h}),R=new J({Q:s,x:470,y:360,fC:p,bear:M}),C=new A({x:300,y:300,gY:300,tree:R}),P=new tt({x:200,y:200,follow:C}),v=new $({Q:y,y:10,nT:50}),T=new $({Q:y,nT:100,cL:-.1,tX:.6,tY:.6}),S=new $({Q:y,nT:100,cL:-.2,tX:.7,tY:.7}),g=new $({Q:y,nT:100,cL:-.3,tX:.7,tY:.7}),m=new $({Q:y,nT:100,cL:-.4,tX:.7,tY:.7}),w.draw(),w.gAI();var f=xt(44,30),b=f.getContext("2d"),U=new z({Q:b,x:22,y:15,h:!1});U.draw(),Tt(f,"bn"),document.addEventListener("ILbn",(function(t){U&&(U.I=t.I);for(var r=C.tree.b.length,e=0;e<r;e++)C.tree.b[e]&&C.tree.b[e].bN&&(C.tree.b[e].bN.I=t.I);f=b=U=null}),!1);var W=xt(250,80),j=W.getContext("2d"),H=new et({Q:j,m1:"OH NO! That bear",m2:"will rip me apart!",width:250,height:80,dur:3e3});H.draw(),Tt(W,"s1",H.width,H.height),document.addEventListener("ILs1",(function(t){H&&(H.I=t.I),H.Q=c,C.sBs.opening=H,W=j=null}),!1);var V=xt(250,100),O=V.getContext("2d"),F=new et({Q:O,m1:"I'll escape up this tree",m2:"and save those",m3:"poor bird's nests!",width:250,height:100});F.draw(),Tt(V,"s2",F.width,F.height),document.addEventListener("ILs2",(function(t){F&&(F.I=t.I),F.Q=c,C.sBs.opening2=F,V=null,O=null}),!1);var X=xt(250,100),k=X.getContext("2d"),G=new et({Q:k,m1:"Must chop down this tree and",m2:" put that bear to rest!",width:250,height:100});G.draw(),Tt(X,"s3",G.width,G.height),document.addEventListener("ILs3",(function(t){G&&(G.I=t.I),G.Q=c,C.sBs.end=G,X=k=null}),!1);var Z=[v,T,S,g,m];for(var q in Z)y.Z(0,0,u,d),Z[q].draw(),Z[q].gAI();l.Z(0,0,u,d),y.Z(0,0,u,d),x.draw(),x.dDP({x:R.x+.5*R.width,y:30}),x.gAI(),I||document.addEventListener("ll",(function(){var t=[w,m,g,S,T,v,x];for(var r in t)y.O(t[r].I,0,0,u,d,0,0,u,d);I=!0}),!1),L=new at({el:n,score:0}),document.onkeydown=function(t){t.preventDefault();var r=t.keyCode;N[r]=!0},document.onkeyup=function(t){t.preventDefault();var r=t.keyCode;N[r]=!1},Q=new dt,Y||B(),Y=!0}function B(t,r){V||(U<F&&(L.U9Score(C.getScore()),U=F+300),r>0&&(C.r2+=r,C.rT+=r,C.j1+=r,C.j2+=r,C.j7+=r,C.runsT+=r,C.RT+=r,C.a1+=r,C.a2+=r,C.aT+=r,C.d2+=r,C.dET+=r,C.dT+=r,Q.offset(r)),F=t,c.Z(0,0,u,d),s.Z(0,0,u,d),y.Z(0,0,u,d),h.Z(0,0,u,d),c.S(),h.S(),s.S(),C.y<100?j+=.02*(200-C.y-j):j+=.2*(0-j),c.T(W,j),h.T(W,j),s.T(W,j),i.style.top=j+"px",R.draw(),C.draw(),P.draw(),M.draw(),Q.U9(t),I&&w.I&&(y.O(w.I,0,0,u,d,0,0,u,d),y.O(m.I,0,0,u,d,0,.2*j,u,d),y.O(g.I,0,0,u,d,0,.3*j,u,d),y.O(S.I,0,0,u,d,0,.5*j,u,d),y.O(T.I,0,0,u,d,0,.7*j,u,d),y.O(v.I,0,0,u,d,0,1.1*j,u,d),y.O(x.I,0,0,u,d,0,j,u,d)),c.Re(),h.Re(),s.Re(),N[37]||N[65]?C.t("run",{iRs:!1}):N[39]||N[68]?C.t("run",{iRs:!0}):C.t("rest"),(N[40]||N[83])&&C.t("dropdown"),(N[38]||N[87])&&C.t("jump"),N[32]&&C.t("action"),requestAnimFrame(B),O=F)}function A(t){for(var r in this.Q=c,t)this[r]=t[r];this.IN()}function D(t){for(var r in this.Q=c,t)this[r]=t[r];this.IN()}function E(t){var r=this;for(var e in r.Q=c,t)r[e]=t[e];r.IN()}function J(t){var r=this;for(var e in r.Q=c,t)r[e]=t[e];r.IN(),r.bear.x=r.x}function k(t){var r=this;for(var e in r.Q=c,t)r[e]=t[e];r.fill=r.Q.X(0,0,0,8),r.fill.addColorStop(0,"#826D3F"),r.fill.addColorStop(1,"#564629"),r.bushFill=r.Q.X(0,0,0,50),r.bushFill.addColorStop(0,"rgba(68,74,35,.99)"),r.bushFill.addColorStop(1,"rgba(48,54,15,1)"),r.bushU=ft(.4,1),r.width>130&&(r.hasBush=!0)}function z(t){var r=this;for(var e in r.Q=c,t)r[e]=t[e];r.fill=r.Q.X(0,0,0,8),r.fill.addColorStop(0,"#8F7442"),r.fill.addColorStop(1,"#7F6331"),r.eF=r.Q.X(0,0,0,5),r.eF.addColorStop(0,"rgb(255,255,255)"),r.eF.addColorStop(1,"rgb(140,140,140)")}function G(t){var r=this;for(var e in r.Q=c,t)r[e]=t[e];r.fill=r.Q.X(0,0,0,50),r.fill.addColorStop(0,"rgba(68,74,35,1)"),r.fill.addColorStop(1,"rgba(48,54,15,1)")}function Z(t){for(var r in this.Q=c,t)this[r]=t[r];this.r=yt(0,360),this.isKnot=random()<.2}function q(t){for(var r in t)this[r]=t[r]}function K(t){for(var r in this.Q=c,t)this[r]=t[r]}function $(t){for(var r in this.Q=c,t)this[r]=t[r];this.IN()}function _(t){var r=this;for(var e in r.Q=c,t)r[e]=t[e];r.random&&(r.V=ft(r.V-.2,r.V+.2),r.U=r.V,r.x=yt(0,u))}function tt(t){var r=this;for(var e in r.Q=c,t)r[e]=t[e];r.BF=c.X(0,0,0,20),r.BF.addColorStop(0,"#CFD0F2"),r.BF.addColorStop(1,"#9292DE"),r.bwF=st("#9292DE",-.1),r.yHover=0,r.fIv=F,r.wU=!1}function rt(t){var r=this;for(var e in r.Q=c,t)r[e]=t[e];r.bearFill=c.X(0,0,0,200),r.bearFill.addColorStop(0,"#333"),r.bearFill.addColorStop(1,"#111"),r.tF=c.X(0,0,0,25),r.tF.addColorStop(0,"#222"),r.tF.addColorStop(1,"#333"),r.bwF=st("#000",-.1),r.yHover=0,r.CIn=F,r.aY=0,r.bearUp=!0,r.sT=F,r.dur=1e3}function et(t){var r=this;for(var e in r.Q=c,t)r[e]=t[e];r.textY=0,r.m1&&(r.textY=.5*r.height),r.m2&&(r.textY=.5*r.height-10),r.m3&&(r.textY=.5*r.height-20)}function at(t){for(var r in this.Q=c,t)this[r]=t[r]}function it(t,r,e,a,i,n,o,h){this.x=t,this.y=r,this.z=0,this.radius=e,this.fill=a,this.As=i?i*DR:0,this.AsSs=n?n*DR:TP,this.V=o||1,this.U=h||1,this.Q=c}function nt(t,r,e,a,i,n){var o=this;o.x=t,o.y=r,o.z=0,o.width=e,o.height=a,o.r=i?i*DR:0,o.fill=n,o.Q=c}function ot(t){this.Q=c,this.shape=t}function ht(t){this.s=arguments;var r=arguments.length;if(r){this.s=[];for(var e=0;e<r;e++)this.s.push(arguments[e]);this.s.sort()}this.Q=c}function st(t,r){(t=String(t).replace(/[^0-9a-f]/gi,"")).length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),r=r||0;var e,a,i="#";for(a=0;a<3;a++)e=parseInt(t.substr(2*a,2),16),i+=("00"+(e=Math.round(Math.min(Math.max(0,e+e*r),255)).toString(16))).substr(e.length);return i}function lt(t,r,e){return e||(e=0),c.S(),c.T(r.x,r.y),c.bP(),c.rect(0,0,r.width,r.height),c.fillStyle="rgba(255,255,255,.05)",c.Re(),t.x>r.x-e&&t.x<r.x+r.width+e&&t.y>r.y-e&&t.y<r.y+r.height+e}function dt(){this.tweens=[]}function ut(t,r,e,a,i){return r+(r>e?-1:1)*i(t,0,abs(r-e),a)}function ct(t,r){var e=0,a=0;return e=r.x-t.x,e*=e,a=r.y-t.y,a*=a,Math.sqrt(e+a)}function yt(t,r){return Math.floor(random()*(r-t+1))+t}function ft(t,r){return random()*(r-t)+t}function wt(t){return document.getElementById(t)}function bt(t,r){return setTimeout(t,r)}function xt(t,r){var e=document.createElement("canvas");return e.setAttribute("width",t),e.setAttribute("height",r),e}function pt(){var t=this,r=t.Q.canvas.toDataURL(),e=new Image,a=t.Q.canvas.getAttribute("d1t");a?(a=parseInt(a)+1,t.Q.canvas.setAttribute("d1t",a)):t.Q.canvas.setAttribute("d1t",1),e.onload=function(){t.I=e;var r=t.Q.canvas.getAttribute("d1l");if(r?(r=parseInt(r)+1,t.Q.canvas.setAttribute("d1l",r)):t.Q.canvas.setAttribute("d1l",1),parseInt(t.Q.canvas.getAttribute("d1t"))==r){var a=new CustomEvent("ll");document.dispatchEvent(a)}},e.src=r}function vt(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function Tt(t,r){t.getContext("2d");var e=t.toDataURL(),a=new Image;a.onload=function(){var t=new CustomEvent("IL"+r);t.name=r,t.I=a,document.dispatchEvent(t)},a.src=e}return A.prototype={x:0,y:0,z:0,vx:0,vy:0,height:70,r:0,V:1,U:1,bP:null,hS:13,hC:"#6D471B",tC:"#191E82",sC:"#FBE1BC",srC:"#7F7F7F",pC:"#454545",shC:"#AB8726",hY:30,bLn:15,brDW:25,eyS:2,eyC:"#111",e1:2,eyS:2,bodyW:18,bdH:17,bdY:30,pH:6,lW:7,lH:15,shW:12,shH:6,aH:19,aW:5,hSz:4,aY:30,aXW:4,axeH:40,axW:16,aXSH:8,aXEH:10,aHC:"#603C0E",aXC:"#B00",aEC:"#EEE",af:null,gvY:8,aPw:10,aRd:20,aP:{},JH:140,gY:300,INGY:0,tree:null,hTrvd:0,sBs:null,IN:function(){var t=this,r=0;r=-4,t.hat=new it(0,r-2,t.hS+2,t.tC,180,360,1,1.6),r=-10,t.ears=new ht(new it(-t.hS,r-1,.3*t.hS,t.sC),new it(t.hS,r-1,.3*t.hS,t.sC)),r=-10;var e=c.X(0,.5*r,0,2*t.hS+.5*r);e.addColorStop(0,t.sC),e.addColorStop(1,"#B8A07C"),t.hSP=new it(0,r,t.hS,e),r=-11,t.beard=new ot((function(){c.bP(),c.N(-t.hS,r,.5*-t.brDW,r+t.bLn,0,r+t.bLn),c.N(0,r+t.bLn,.5*t.brDW,r+t.bLn,t.hS,r),c.N(t.hS,r,.5*t.brDW,r+.3*t.bLn,0,r+.3*t.bLn),c.N(0,r+.3*t.bLn,.5*-t.brDW,r+.3*t.bLn,-t.hS,r),c.fillStyle=t.hC,c.j(),c.g()})),r=-14,t.browL=new ht(new nt(3*-t.eyS*.5,.5*-t.e1,3*t.eyS,t.e1,0,t.hC)),t.browL.x=3*t.eyS*.5+.5*t.eyS,t.browL.y=r+.5*t.e1-3,t.browL.r=20,t.browR=new ht(new nt(3*-t.eyS*.5,.5*-t.e1,3*t.eyS,t.e1,0,t.hC)),t.browR.x=3*-t.eyS*.5-.5*t.eyS,t.browR.y=r+.5*t.e1-3,t.browR.r=-20,t.brows=new ht(t.browL,t.browR),t.eyes=new ht(new nt(-t.eyS-t.eyS,r,t.eyS,t.eyS,0,t.eyC),new nt(t.eyS,r,t.eyS,t.eyS,0,t.eyC)),r=-10,t.MM=new ht(new nt(.5*-t.hS-2,r,t.hS+4,2,0,t.hC),new nt(.5*-t.hS-2,r,2,4,0,t.hC),new nt(.5*t.hS,r,2,4,0,t.hC)),t.head=new ht(t.hat,t.ears,t.hSP,t.beard,t.brows,t.eyes,t.MM),t.head.y=t.hY,t.body=new ht(new nt(.5*-t.bodyW,t.bdY+t.pH,t.bodyW,t.bdH,0,t.pC),new nt(.5*-t.bodyW,t.bdY,t.bodyW,t.bdH,0,t.srC)),t.footL=new nt(.5*-t.lW-.5*t.shW+2,t.lH-2,t.shW,t.shH,0,t.shC),t.lL=new ht(new nt(.5*-t.lW,-2,t.lW,t.lH,0,t.pC),t.footL),t.lL.x=.5*-t.bodyW+.5*t.lW,t.lL.y=t.bdY+t.pH+t.lH,t.footR=new nt(.5*-t.shW-2+.5*t.lW,t.lH-2,t.shW,t.shH,0,st(t.shC,-.1)),t.lR=new ht(new nt(-t.lW+.5*t.lW,-2,t.lW,t.lH,0,t.pC),t.footR),t.lR.x=.5*t.bodyW-.5*t.lW,t.lR.y=t.bdY+t.pH+t.lH,t.ax=new ht(new ot((function(){c.bP(),c.lT(0,0),c.lT(t.axW,4+.5*t.aXEH),c.lT(t.axW,-t.aXSH-.5*t.aXEH),c.lT(0,-t.aXSH),c.fillStyle=t.aXC,c.j(),c.g(),c.bP(),c.lT(t.axW,4+.5*t.aXEH),c.lT(t.axW,-t.aXSH-.5*t.aXEH),c.lT(t.axW+3,-t.aXSH-.5*t.aXEH),c.lT(t.axW+3,4+.5*t.aXEH),c.fillStyle=t.aEC,c.j(),c.g()}))),t.ax.x=t.aXW-.5*t.aXW,t.ax.y=t.axeH-.5*t.aXSH,t.axe=new ht(new nt(-2,-4,t.aXW,t.axeH,0,t.aHC),t.ax),t.axe.r=80,t.axe.x=.5*-t.aXW,t.axe.y=t.aH,t.armL=new ht(new nt(.5*-t.aW,0,t.aW,t.aH,10,t.srC),new it(.5*-t.hSz,t.aH,t.hSz,t.sC),t.axe),t.armL.x=.5*-t.bodyW-.5*t.aW,t.armL.y=t.aY,t.armR=new ht(new nt(-t.aW+.5*t.aW,0,t.aW,t.aH,-10,t.srC),new it(.5*t.hSz,t.aH,t.hSz,t.sC)),t.armR.x=.5*t.bodyW+.5*t.aW,t.armR.y=t.aY,t.aP={x:t.aH+t.axeH-t.aXSH,y:t.aY+t.aH-25},t.bP=new ht(t.lL,t.lR,t.armR,t.body,t.head,t.armL),t.bP.autoZ(),t.INGY=t.gY,t.t("rest"),t.sBs=[]},run:function(){var t=this;if(t.axe.U=-1,t.footL.x=.5*-this.lW-.5*t.shW+5,t.RT=F-t.runsT,0!==t.vy)return t.lL.r=50,t.lR.r=-80,t.iA||(t.armL.r=-70,t.armR.r=80),t.d1=!0,!1;t.iRU?t.runUp():t.runDown()},runUp:function(){var t=this,r=190;t.lL.r=ut(t.RT,-70,70,r,Math.e1),t.lR.r=ut(t.RT,80,-80,r,Math.e1),t.iA||(t.armL.r=ut(t.RT,70,-70,r,Math.e1),t.armR.r=ut(t.RT,-80,80,r,Math.e1)),t.head.r=ut(t.RT,5,-5,r,Math.e1),t.head.y=ut(t.RT,t.hY+2,t.hY-2,r,Math.e1),t.RT>r&&(t.runsT=F,t.RT=0,t.iRU=!1)},runDown:function(){var t=this,r=190;t.lL.r=ut(t.RT,70,-70,r,Math.e1),t.lR.r=ut(t.RT,-80,80,r,Math.e1),t.iA||(t.armL.r=ut(t.RT,-70,70,r,Math.e1),t.armR.r=ut(t.RT,80,-80,r,Math.e1)),t.head.r=ut(t.RT,-5,5,r,Math.e1),t.head.y=ut(t.RT,t.hY-2,t.hY+2,r,Math.e1),t.RT>r&&(t.runsT=F,t.RT=0,t.iRU=!0)},jump:function(){var t=this;t.footL.x=.5*-this.lW-.5*t.shW+5,t.axe.U=-1,t.j7=F-t.j1,t.j1Up?t.JUP():t.JUD()},JUP:function(){var t=this,r=240;t.lL.r=ut(t.j7,0,50,r,Math.e1),t.lR.r=ut(t.j7,0,-80,r,Math.e1),t.iA||(t.armL.r=ut(t.j7,0,-70,r,Math.e1),t.armR.r=ut(t.j7,0,80,r,Math.e1)),t.y=ut(t.j7,t.gY,t.gY-t.JH,r,Math.e2),t.j7>r&&(t.j1=F,t.j7=0,t.j1Up=!1)},JUD:function(){var t=this;t.lL.r=50,t.lR.r=-80,t.iA||(t.armL.r=-70,t.armR.r=80),t.j7>200&&(t.armL.r=-70,t.armR.r=80,t.j1=F,t.j7=0,t.j1Up=!1)},drop:function(){var t=this;t.axe.U=-1,t.dT=F-t.d2,t.dropDown()},dropDown:function(){var t=this;t.lL.r=50,t.lR.r=-80,t.iA||(t.armL.r=-70,t.armR.r=80),t.y>t.gY&&(t.d2=0,t.dT=0)},action:function(){var t=this;t.armR.z=6,t.bP.refreshOrder(),t.axe.U=1,t.aT=F-t.a1,t.cy3?(t.s1=!0,t.searchUp()):t.actionUp()},searchUp:function(){var t=this,r=800;t.head.r=20,t.head.x=10,t.head.y=28,t.MM.y=1,t.browL.r=30,t.browR.r=-30,t.body.r=24,t.body.x=20,t.body.y=2,t.lL.r=40,t.lL.y=47,t.armL.x=0,t.armL.y=25,t.armR.x=16,t.armR.y=35,t.aT<400?(t.armL.r=ut(t.aT,40,50,r,Math.e1),t.armR.r=ut(t.aT,-50,50,r,Math.e1)):(t.armL.r=ut(t.aT,50,40,r,Math.e1),t.armR.r=ut(t.aT,50,-50,r,Math.e1)),t.aT>r&&(t.aT=0,t.a1=F,t.iA=!1,t.s1=!1,t.b2.bN&&(t.b2.bN.r3(t.b2,t.x),t.tree.n1+=1),(t.iR||t.r1)&&t.reset())},actionUp:function(){var t=this,r=260;t.MM.y=1,t.browL.r=ut(t.aT,-10,0,r,Math.e1),t.browR.r=ut(t.aT,10,0,r,Math.e1),t.axe.r=ut(t.aT,80,10,r,Math.e1),t.axe.U=ut(t.aT,.5,1,r,Math.e1),t.armL.r=ut(t.aT,70,-110,r,Math.e1),t.armL.x=ut(t.aT,.5*-t.bodyW-.5*t.aW,.5*-t.bodyW-.5*t.aW+15,r,Math.e1),t.armL.y=ut(t.aT,t.aY,t.aY+15,r,Math.e1),t.armR.r=ut(t.aT,90,-50,r,Math.e1),t.armR.x=ut(t.aT,.5*t.bodyW+.5*t.aW-14,.5*t.bodyW+.5*t.aW,r,Math.e1),t.armR.y=ut(t.aT,t.aY+10,t.aY,r,Math.e1),t.aT>r&&(t.aT=0,t.axe.x=.5*-t.aXW,t.axe.y=t.aH,t.MM.y=0,t.browL.r=20,t.browR.r=-20,t.axe.r=80,t.axe.U=1,t.armL.r=0,t.armL.x=.5*-t.bodyW-.5*t.aW,t.armL.y=t.aY,t.armR.r=0,t.armR.x=.5*t.bodyW+.5*t.aW,t.armR.y=t.aY,f={power:t.aPw,radius:t.aRd,x:t.x+t.aP.x*t.V,y:t.y+t.aP.y},t.iA=!1)},stop:function(){var t=this;t.lL.r=0,t.lR.r=0,t.armL.r=0,t.armR.r=0,t.head.r=0,t.armR.z=2,t.bP.refreshOrder(),t.axe.U=1,t.rT=F-t.r2,t.IRSU?t.restUp():t.restDown()},restUp:function(){var t=this,r=300;t.iA||(t.armL.y=ut(t.rT,t.aY,t.aY+.5,r,Math.e3),t.armR.y=ut(t.rT,t.aY,t.aY+.5,r,Math.e3),t.head.y=ut(t.rT,t.hY+1,t.hY-0,r,Math.e1)),t.rT>r&&(t.r2=F,t.rT=0,t.IRSU=!1)},restDown:function(){var t=this,r=300;t.iA||(t.armL.y=ut(t.rT,t.aY+.5,t.aY,r,Math.e3),t.armR.y=ut(t.rT,t.aY+.5,t.aY,r,Math.e3),t.head.y=ut(t.rT,t.hY-0,t.hY+1,r,Math.e1)),t.rT>r&&(t.r2=F,t.rT=0,t.IRSU=!0)},t:function(t,r){var e=this;if(e.s1)return e.vx=0,e.af=e.stop,void(e.iR=!1);switch(r&&(r.iRs?(e.V=1,e.vx=4):(e.V=-1,e.vx=-4)),t){case"rest":e.r1||e.j1||e.d1||e.s1||(e.r1=!0,e.r2=F,e.af=e.stop,e.iR=!1,e.j2=0,e.reset()),e.vx=0;break;case"jump":e.j1||e.y!=e.gY||(e.j1=!0,e.iR=!1,e.r1=!1,e.j1=F,e.af=e.jump,e.j1Up=!0,e.j2=F+440);break;case"run":e.iR||e.j1||e.s1||(e.iR=!0,e.r1=!1,e.j1=!1,e.runsT=F,e.af=e.run,e.iRU=!0);break;case"action":e.iA||(e.iA=!0,e.r1=!1,e.a1=F,e.a2=F+260);break;case"dropdown":!e.d1&&!e.j1&&e.y<=e.gY&&(e.d1=!0,e.d3=!0,e.gY=e.gY,e.j1=!1,e.iR=!1,e.r1=!1,e.d2=F,e.af=e.drop,e.dET=F+200)}},U9:function(){var t=this;if(t.af(),t.iA&&t.action(),t.y<t.gY){var r=.002*(F-O);t.vy=t.vy+t.gvY*r}else t.vy=0,t.y=t.gY,t.d1=!1,t.j1=F,t.j7=0,t.j1Up=!1,t.j1=!1;var e=-(t.y-t.INGY);if(e>t.hTrvd&&(t.hTrvd=e),!t.tree.iT){t.b2=null;for(var a=t.y+t.height,i=t.tree.b.length,n=0;n<i;n++){var o=t.tree.b[n];o&&a<=o.y&&t.x>o.x-10&&t.x<o.x+o.width+10&&(t.b2?o.y<t.b2.y&&(t.b2=o):t.b2=o,t.j1Up||(t.gY=o.y-t.height))}t.d3&&(t.b2=null,t.gY=t.INGY,t.d3=!1),t.b2&&t.d1&&(t.gY=t.b2.y-t.height),t.b2||t.j1Up||(t.gY=t.INGY),t.b2&&!t.d1&&t.b2.hasBush&&!t.j1?t.b2.onLeft?t.x-t.b2.x<80?t.cy3=!0:t.cy3=!1:t.b2.x+t.b2.width-t.x<80?t.cy3=!0:t.cy3=!1:t.cy3=!1}t.x=t.x+t.vx,t.y=t.y+t.vy,t.bP.x=t.x,t.bP.y=t.y,t.bP.r=t.r,t.bP.V=t.V,t.bP.U=t.U,!t.tree.bear.hsS&&t.y<-200&&t.tree.bear.start()},draw:function(){var t=this;t.U9(),t.bP.draw();var r=t.sBs.opening,e=t.sBs.opening2,a=t.sBs.end;r&&(r.x=t.x,r.y=t.y),e&&(e.x=t.x,e.y=t.y),a&&(a.x=t.x,a.y=t.y),r&&!t.s1Trd&&(Q.add(r,{prop:"opacity",start:0,end:1},F+500,500,Math.e2),Q.add(r,{},F+1e3,4e3,Math.e2),Q.add(e,{},F+5e3,4e3,Math.e2),Q.add(e,{prop:"opacity",start:1,end:0},F+9e3,500,Math.e2),t.s1Trd=!0),t.y>t.tree.bear.y&&!t.eTrG&&(Q.add(a,{prop:"opacity",start:0,end:1},F+2e3,500,Math.e2),Q.add(a,{},F+2500,4e3,Math.e2),t.eTrG=!0)},reset:function(){var t=this;t.lL.r=t.lR.r=t.armL.r=t.armR.r=t.head.r=t.head.x=t.MM.y=t.body.r=t.body.x=t.body.y=0,t.head.y=30.82,t.browL.r=20,t.browR.r=-20,t.lL.y=51,t.armL.x=-11.5,t.armL.y=t.armR.y=30,t.armR.x=11.5},getScore:function(){return 500*this.tree.n1+parseInt(this.hTrvd)}},D.prototype={Q:null,bg:null,gSXO:-90,gEXO:200,LBC:"#b4ecf7",DBC:"#91c2f7",nOs:10,cp1:{x:150,y:100},cp2:{x:200,y:350},iD:null,dataURL:null,image:null,IN:function(){var t=this;t.drawBg(),t.ccp1={x:0,y:0},t.ccp2={x:0,y:0},t.sXOs=[],t.eXOs=[],t.cp1s=[],t.cp2s=[],t.isStripe=[];for(var r=0;r<t.nOs;r++)t.sXOs[r]=yt(10,100),t.eXOs[r]=yt(50,300),t.cp1s[r]=yt(50,300),t.cp2s[r]=yt(50,300),t.isStripe[r]=random()<.6},gAI:pt,drawBg:function(){var t=this.Q.createRadialGradient(50,350,100,50,350,900);t.addColorStop(0,this.LBC),t.addColorStop(1,this.DBC),this.bg=new nt(0,0,u,d,0,t),this.bg.Q=this.Q},drwS:function(){var t=this;t.Q.bP(),t.ccp1.x=t.ccp1.x+t.sXOs[t.c1],t.ccp2.x=t.ccp2.x+t.eXOs[t.c1];var r={x:t.cSxO,y:d},e={x:t.cExO,y:0},a=t.sXOs[t.c1],i=t.eXOs[t.c1];t.Q.J(r.x,r.y),t.Q.N(t.ccp1.x,t.ccp1.y,t.ccp2.x,t.ccp2.y,e.x,e.y),t.Q.lT(e.x+i,0),t.Q.N(t.ccp2.x,t.ccp2.y,t.ccp1.x,t.ccp1.y,r.x+a,r.y);var n=t.Q.X(0,0,0,d);n.addColorStop(0,"rgba(255,255,255,.05)"),n.addColorStop(1,"rgba(255,255,255,.1)"),t.Q.fillStyle=n,this.isStripe[t.c1]&&t.Q.j(),t.Q.g(),t.cSxO=t.cSxO+a,t.cExO=t.cExO+i},draw:function(){var t=this;t.cSxO=t.gSXO,t.cExO=t.gEXO,t.ccp1.x=t.cp1.x,t.ccp1.y=t.cp1.y,t.ccp2.x=t.cp2.x,t.ccp2.y=t.cp2.y,t.bg.draw(),t.c1=0;for(var r=0;r<t.nOs;r++)t.drwS(),t.c1=t.c1+1}},E.prototype={Q:null,x:0,y:0,ground:null,width:800,height:40,GBladeNum:200,GLengthMin:3,GLengthMax:5,image:null,IN:function(){var t=this,r=t.Q.X(0,0,0,t.height);r.addColorStop(0,"#b2ce70"),r.addColorStop(1,"#69612c");var e=new nt(0,0,t.width,t.height,0,r);e.Q=t.Q,t.ground=new ht(e),t.ground.Q=t.Q},gAI:pt,dDP:function(t){var r=this,e=r.Q,a={x:300,y:10,radius:300,fill:null,V:1,U:.1};for(var i in t)a[i]=t[i];if(!(t=a).fill){var n=this.Q.createRadialGradient(0,0,0,0,0,t.radius);n.addColorStop(0,"rgba(219,205,162,.8)"),n.addColorStop(1,"rgba(219,205,162,0)"),t.fill=n}var o=new ht(new it(0,0,t.radius,t.fill));o.Q=e,o.x=r.x+t.x,o.y=r.y+t.y,o.V=t.V,o.U=t.U,o.draw(),o.V=t.V+.4,o.draw();for(var h=0;h<20;h++){e.bP();var s=o.x+yt(-t.radius,t.radius),l=o.y+yt(-5,10),d=ft(.4,1.5),u=ft(.05,.8);e.arc(s,l,d,0,TP),e.fillStyle="rgba(100,100,100,"+u+")",e.j()}},draw:function(){var t,r,e,a=this,i=a.Q;for(a.ground.x=a.x,a.ground.y=a.y,a.ground.draw(),i.lineWidth=.4,i.strokeStyle="#b2bc3e",t=0;t<a.GBladeNum;t++)r=yt(a.x,a.width),e=a.y,i.bP(),i.J(r,e),i.N(r-yt(-5,9),e-yt(-5,4),r-yt(-5,9),e-2,r-4,e-yt(a.GLengthMin,a.GLengthMax)),i.J(r,e),i.N(r-yt(-5,9),e-yt(-5,4),r-yt(-5,9),e-yt(-5,9),r-4,e-yt(a.GLengthMin,a.GLengthMax)),i.stroke()}},J.prototype={Q:null,x:0,y:0,r:0,tree:null,bear:null,width:70,height:5e3,color:"#826d3f",fill:null,chipSize:{w:4,h:2},ch5:[],numChips:200,chipPool:[],abC:[],tHO:35,tWO:2,b:[],maxNumb:155,mBw:250,m2:110,wS:[],numwS:150,player:null,canopy:null,nBn:13,n1:0,cBy:-36,bTC:!1,IN:function(){for(var t=this,r=0;r<t.numChips;r++){var e=new q;e.rV(),t.chipPool.push(e)}for(t.wS=[],r=0;r<t.numwS;r++){var a=new Z;a.Q=t.Q,a.x=yt(5,t.width-5),a.y=yt(t.y-t.height-200,t.y-400),a.size=ft(.3,.5),t.wS.push(a)}var i,n=0,o=t.y-110;for(t.b=[],r=0;r<t.maxNumb;r++){var h=random()>.5||0===r,s=new k({Q:t.Q,onLeft:h,width:yt(20,t.mBw)});if(s.x=h?t.x-s.width-.5*t.width:t.x+t.width-.5*t.width,s.y=0===r?o:o-yt(70,t.m2),s.height=.1*s.width,o=s.y,t.b.push(s),o-t.m2-400<t.y-t.height){t.canopy=new G({Q:t.Q,y:o-350});break}}for(;n!=t.nBn;){for(r=t.b.length-1;r>=0&&!((i=t.b[r]).hasBush&&random()>.7&&(i.B2(),(n+=1)==t.nBn));r--);}t.fill=c.X(0,0,t.width,0),t.fill.addColorStop(0,t.color),t.fill.addColorStop(.2,st(t.color,.1)),t.fill.addColorStop(.4,t.color),t.fill.addColorStop(1,st(t.color,-.4)),t.ch5=[]},LCs:function(t){t||(t=50);for(var r,e=[],a=0;a<t;a++)r=this.chipPool.pop(),this.abC.push(r),e.push(r);return e},draw:function(){var t,r,e,a=this,i=a.Q,n=f;for(i.S(),i.rotate(0*DR),i.T(a.x-.5*a.width,a.y),i.bP(),i.J(0,-a.tHO),i.lT(a.width,-a.tHO),i.N(a.width+a.tWO,0,a.width+a.tWO+8,0,a.width+a.tWO,0),i.lT(-a.tWO,0),i.N(-a.tWO-8,0,-a.tWO,0,0,-a.tHO),i.S(),i.J(-a.tWO,0),i.N(.5*a.width+a.tWO,10,.5*a.width+a.tWO,10,a.width+a.tWO,0),i.Re(),i.fillStyle=a.fill,i.j(),a.iT&&(i.bP(),i.J(0,-35),i.N(.5*a.width-20,-25,.5*a.width+20,-25,a.width,-35),i.J(0,-35),i.N(.5*a.width-20,-45,.5*a.width+20,-45,a.width,-35),i.fillStyle="rgba(239,228,201,1)",i.j(),i.S(),i.bP(),i.rect(0,-35,a.width,80),i.clip(),a.lTC.draw(),i.Re()),i.Re(),i.S(),i.T(a.x-.5*a.width,a.y),i.rotate(a.r*DR),i.bP(),i.rect(0,-35,a.width,-a.height-a.tHO),i.J(0,-35),i.N(.5*a.width-20,-25,.5*a.width+20,-25,a.width,-35),i.fillStyle=a.fill,i.j(),r=a.wS.length,t=0;t<r;t++){a.wS[t].draw()}if(i.bP(),!a.iT&&f&&lt(n,{x:a.x-.5*a.width,y:a.y-a.height,width:a.width,height:a.height},.2*n.radius)){var o=!1,h=new ht(new it(0,0,n.radius,"rgba(239,228,201,.7)",0,180,1,1),new it(0,0,n.radius,"rgba(86,71,39,.7)",180,360,1,1));h.Q=i,h.U=.15,h.width=2*n.radius*h.U,h.height=h.width,h.x=n.x+.5*a.width-a.x,h.y=n.y-a.y,h.r=yt(-4,4),r=a.ch5.length;for(t=0;t<r;t++){if(lt(h,a.ch5[t],2)){o=a.ch5[t];break}a.ch5[t].y==a.cBy&&1,a.ch5[t].U>1.2&&1}o?(a.ch5[t].V=a.ch5[t].V+.02,a.ch5[t].U=a.ch5[t].U+.02,a.ch5[t].U>.65&&a.ch5[t].y==a.cBy&&null!==a.bTC&&(a.bTC=!0,a.lTC=a.ch5[t],a.iT=!0,bt((function(){wt("e").className="",bt((function(){wt("e").className="show"}),10);var t=a.n1;wt("nN").innerHTML=t,wt("O").innerHTML=vt(parseInt(500*t)),wt("hScore").innerHTML=vt(parseInt(C.hTrvd)),wt("e-s").innerHTML=vt(parseInt(500*t+C.hTrvd))}),3e3))):a.ch5.push(h),r=10;var s=a.LCs(r);for(t=0;t<r;t++)(e=s[t])&&(e.x=n.x,e.y=n.y,e.rV())}for(i.S(),i.bP(),a.iT?(i.rect(0,a.y-a.height,a.width,a.height-a.y-34),i.J(0,-34),i.N(.5*a.width-20,-25,.5*a.width+20,-25,a.width,-34)):i.rect(0,a.y-a.height,a.width,a.height-a.y),i.clip(),r=a.ch5.length,t=0;t<r;t++)a.ch5[t].draw();i.Re(),i.Re();var l=!1;if(!a.iT){for(r=a.b.length,t=0;t<r;t++){var d=a.b[t];d&&a.b[t].y<a.bear.y?(d.draw(),l||(d.bN&&ct(d,P)<300&&ct(C,d)<200&&t%2==0?(P.ff=d,l=!0):P.ff=C)):a.b[t]=null}a.canopy.draw()}for(a.bTC&&(Q.add(a,{prop:"r",start:0,end:-90},F,2500,Math.e4),a.bTC=null),r=a.abC.length,i.bP(),i.fillStyle="#eddcb4",t=0;t<r;t++)(e=a.abC[t])&&(e.U9(),e.hasHitGround()?(a.fC.drawChip(e),a.chipPool.push(e),a.abC.splice(t,1)):(i.S(),i.T(e.x-.5*e.w,e.y-.5*e.h),i.rotate(e.r*DR),i.rect(.5*-e.w,.5*-e.h,e.w,e.h),i.Re()));i.j(),f=null,a.bear.draw()}},k.prototype={Q:null,x:10,y:14,width:100,height:8,r:0,V:1,U:1,fill:null,bushFill:"rgba(68,74,35,1)",bV:.5,bushU:.5,onLeft:!0,hasBush:!1,hBN:!0,bN:null,B2:function(){var t=this,r=t.onLeft?t.x:t.x+t.width;t.bN=new z({x:r,y:t.y}),t.ss5=F,t.ST=F-t.ss5,t.hBN=!0,t.INbV=t.bV,t.ss1=yt(5e3,12e3),t.ss2=F+t.ss1,t.ss6=1e3,t.ss4=F+t.ss6},draw:function(){var t=this,r=t.Q;new ot((function(){if(r.bP(),r.S(),t.onLeft?(r.T(t.x,t.y),r.lT(t.width,0),r.lT(t.width,t.height),r.lT(0,.4*t.height),r.lT(0,0)):(r.T(t.x,t.y),r.lT(t.width,0),r.lT(t.width,.4*t.height),r.lT(0,t.height),r.lT(0,0)),r.fillStyle=t.fill,r.j(),F>t.ss2&&(t.ss5=F,t.ss2=F+t.ss1,t.ss4=F+t.ss6),t.bN&&F<t.ss4){var e=100;t.ST=F-t.ss5,t.ss3?t.bV=ut(t.ST,t.INbV-.02,t.INbV,e,Math.e2):t.bV=ut(t.ST,t.INbV,t.INbV-.02,e,Math.e2),t.bV>2&&(t.bV=t.INbV),t.ST>e&&!t.ss3&&(t.ST=0,t.ss3=!0),t.ST>e&&t.ss3&&(t.ss5=F,t.ST=0,t.ss3=!1)}if(t.width>130){r.S(),r.scale(t.onLeft?1:-1,1),r.T(t.onLeft?0:-t.width,0),r.bP();var a=90,i=t.width/250*.8*t.bV,n=t.bushU;r.J(a,0),r.N(-40*i,-50*n,-80*i,-30*n,-30*i,-10*n),r.N(-140*i,0*n,-170*i,40*n,-130*i,40*n),r.N(-200*i,84*n,-70*i,84*n,-60*i,54*n),r.N(-70*i,34*n,110*i,124*n,0*i,14*n),r.N(30*i,95*n,110*i,85*n,100*i,25*n),r.N(120*i,15*n,140*i,65*n,a,0),r.fillStyle=t.bushFill,r.j(),r.Re()}r.Re()})).draw(),t.hBN&&t.bN&&t.bN.draw()}},z.prototype={Q:null,x:0,y:0,r:0,opacity:1,fill:"#7F6331",eF:"#FFF",h:!0,isFound:!1,image:null,r3:function(t,r){var e=this;e.revealsT=F,e.iY=e.y,e.x=t.onLeft?r-44:r,e.h=!1,e.isFound=!0,e.revea=!0,e.branch=t},draw:function(){var t=this;if(!t.h){if(t.revea){if(t.rTi=F-t.revealsT,t.rVe||(t.y=ut(t.rTi,t.iY-10,t.iY-20,400,Math.e2)),t.fadeStart&&(t.opacity=ut(t.rTi,4,0,1200,Math.e4)),t.rTi>400&&!t.rVe&&(t.y=t.iY-20,t.revealsT=F,t.rTi=0,t.rVe=!0,t.fadeStart=!0),t.rTi>1200&&t.fadeStart)return t.draw=function(){},t.branch.bN=null,void delete t.branch.bN}var r=t.Q;r.S(),r.globalAlpha=t.opacity,t.I?(r.S(),r.T(t.x,t.y),r.O(t.I,0,0,44,30,0,0,44,30),r.Re()):(r.S(),r.T(t.x,t.y),r.scale(1,.6),r.bP(),r.arc(0,0,20,0,TP),r.fillStyle=t.fill,r.j(),r.Re(),r.S(),r.T(t.x,t.y-4),r.scale(.9,.3),r.bP(),r.arc(0,0,15,0,TP),r.fillStyle="rgba(0,0,0,.3)",r.j(),r.Re(),r.S(),r.S(),r.T(t.x,t.y-4),r.scale(.9,.3),r.bP(),r.arc(0,0,15,0,TP),r.arc(0,-8,15,0,TP),r.arc(0,-18,20,0,TP),r.fillStyle="rgba(0,0,0,0)",r.j(),r.Re(),r.clip(),r.S(),r.T(t.x,t.y-4),r.scale(.6,1),r.bP(),r.arc(-13,0,7,0,TP),r.arc(12,-2,7,0,TP),r.fillStyle=t.eF,r.j(),r.Re(),r.S(),r.T(t.x,t.y-4),r.scale(.6,1),r.bP(),r.arc(0,-2,10,0,TP),r.shadowColor="rgba(0,0,0,.3)",r.shadowBlur=4,r.shadowOffsetX=0,r.shadowOffsetY=0,r.fillStyle=t.eF,r.j(),r.Re(),r.Re()),r.Re()}}},G.prototype={Q:null,x:0,y:0,r:0,V:5,U:5,fill:"rgba(68,74,35,.98)",draw:function(){var t=this,r=t.Q;r.S(),r.scale(1,1),r.T(t.x,t.y);for(var e=200,a=0;a<5;a++)r.bP(),r.J(e,0),r.N(3*(e-130),-450,3*(e-170),-500,3*(e-120),-250),r.N(3*(e-230),-200,3*(e-260),0,3*(e-220),0),r.N(3*(e-290),220,3*(e-160),220,3*(e-150),70),r.N(3*(e-160),-30,3*(e+20),420,3*(e-90),-130),r.N(3*(e-60),275,3*(e+20),225,3*(e+10),-75),r.N(3*(e+30),-125,3*(e+50),-125,e,0),e+=100,r.fillStyle=t.fill,r.j();r.Re()}},Z.prototype={Q:null,x:10,y:14,size:.5,r:0,V:1,U:1,isKnot:!1,draw:function(){var t=this,r=t.Q;new ht(new ot((function(){if(t.isKnot){var e=t.size;r.S(),r.bP(),r.T(t.x,t.y),r.rotate(t.r*DR);for(var a=0;a<80;a++){var i=.1*a,n=0+(1+e*i)*Math.cos(i),o=0+(1+e*i)*Math.sin(i);r.lT(n,o)}r.strokeStyle="rgba(178,160,123,.4)",r.stroke(),r.Re()}else r.S(),r.bP(),r.T(t.x,t.y),r.J(0,0),r.lT(0,10),r.lT(3,10),r.J(3,3),r.lineWidth=1,r.strokeStyle="rgba(68,57,33,.2)",r.stroke(),r.Re()}))).draw()}},q.prototype={x:0,y:0,vx:0,vy:0,vr:0,r:0,w:6,h:2,gvY:4,color:"#eddcb4",hitLimit:3,curHits:0,isAttached:!0,gY:370,rV:function(){var t=this;t.vy=ft(-5,5),t.vx=ft(-3,3),t.vr=ft(-8,8)},U9:function(){var t=this,r=.002*(F-O);t.vy=t.vy+t.gvY*r,t.x=t.x+t.vx,t.y=t.y+t.vy,t.r=t.r+t.vr},isOutofBounds:function(){return this.x<0||this.x>u||this.y<0||this.y>this.gY},hasHitGround:function(){return this.y>this.gY}},K.prototype={Q:null,drawChip:function(t){this.count=this.count+1;var r=this.Q;r.fillStyle=Math.random()>.5?"#d3c198":"#eddcb4",r.S(),r.bP(),r.T(t.x-.5*t.w,t.y-.5*t.h+ft(-5,5)),r.rotate(t.r*DR),r.rect(.5*-t.w,.5*-t.h,t.w,t.h),r.j(),r.Re()}},$.prototype={Q:null,x:10,y:14,width:400,height:50,r:0,V:1,U:1,nT:400,trees:[],image:null,cL:0,tX:.5,tY:.5,IN:function(){var t,r=this;for(r.trees=[],t=0;t<r.nT;t++){var e=new _({random:!0,y:r.y,cL:r.cL,V:r.tX,U:r.tY});e.Q=r.Q,r.trees.push(e)}},gAI:pt,draw:function(){var t;for(t=0;t<this.nT;t++){this.trees[t].draw()}}},_.prototype={Q:null,x:100,y:0,gY:350,V:.3,U:.3,random:!1,cL:0,draw:function(){var t=this,r=t.Q;r.S();var e=new ht(new ot((function(){r.J(0,0),r.N(10,25,10,55,50,50),r.N(25,60,25,60,0,55),r.N(-25,60,-25,60,-50,50),r.N(-10,55,-10,25,0,0)})));e.x=t.x*(1/t.V),e.y=(t.gY+t.y)*(1/t.U),r.S(),r.scale(t.V,t.U),r.T(0,-280),r.bP(),r.rect(e.x-5,e.y+80,10,300),r.fillStyle="#7A663B",r.j(),r.bP(),e.Q=r,e.V=.5,e.draw(),e.y=e.y+20,e.V=.6,e.draw(),e.y=e.y+20,e.V=.8,e.U=1.2,e.draw(),e.y=e.y+20,e.V=1,e.U=1.5,e.draw(),r.shadowColor="rgba(0,0,0,.06)",r.shadowBlur=2,r.shadowOffsetX=2,r.shadowOffsetY=0,r.fillStyle=Math.random()>.5?st("#7b8740",0+t.cL):st("#7b8740",-.05+t.cL),r.j(),r.Re()}},tt.prototype={Q:null,x:0,y:0,r:0,vx:0,vy:0,follow:null,V:.5,U:.5,U9:function(){var t=this,r=t.ff.x;0==t.ff.onLeft&&(r+=t.ff.width);var e=t.ff.y;t.x=t.x+.02*(r+30-t.x),t.y=t.y+.02*(e-20-t.y),t.yHover=t.yHover+.03,t.y=t.y+1*Math.sin(t.yHover),t.x=t.x+1*Math.sin(t.yHover+.25*PI),t.ff.x<t.x&&t.V>0?t.V=-1*abs(t.V):t.ff.x>t.x&&t.V<0&&(t.V=abs(t.V));var a=t.ff.y-20-t.y;abs(a)>10&&abs(a)<60&&(t.r=.4*a)},draw:function(){var t=this;t.U9();var r=t.Q;F-t.fIv>60&&(t.wU=!t.wU,t.fIv=F),r.S(),r.T(t.x,t.y),r.scale(t.V,t.U),r.rotate(t.r*DR),r.bP(),r.J(0,8),r.lT(-23,25),r.J(-4,8),r.lT(-30,21),r.lineWidth=2.3,r.strokeStyle="#A52307",r.stroke(),r.J(15,-9),r.lT(33,-2),r.lT(8,4),r.fillStyle="#FF6600",r.j(),r.bP(),r.J(8,4),r.lT(30,-2),r.lT(8,12),r.fillStyle="#C74519",r.j(),r.g(),r.S(),r.bP(),t.wU?r.rotate(30*DR):r.rotate(0*DR),r.bP(),r.scale(1,.2),r.T(-15,-5),r.arc(0,0,20,0,TP),r.fillStyle=t.bwF,r.j(),r.Re(),r.bP(),r.arc(0,0,20,0,TP),r.fillStyle=t.BF,r.j(),r.S(),r.bP(),t.wU?r.rotate(15*DR):r.rotate(-15*DR),r.bP(),r.scale(1,.25),r.T(-20,6),r.arc(0,0,20,0,TP),r.fillStyle=t.BF,r.j(),r.Re(),r.bP(),r.arc(12,-4,3.8,0,TP),r.fillStyle="#000",r.j(),r.bP(),r.arc(13,-3,1.7,0,TP),r.fillStyle="#FFF",r.j(),r.Re()}},rt.prototype={Q:null,x:0,y:400,r:0,vx:0,vy:2,follow:null,V:1,U:1,armInterval:1e3,lY:215,llY:215,start:function(){this.y=250,this.hsS=!0},U9:function(){var t=this,r=F-t.sT;t.bearUp?(t.aY=ut(r,0,-40,t.dur,Math.e2),t.lY=ut(r,215,240,t.dur,Math.e3),t.hsS&&(t.y=ut(r,t.y,t.y-t.vy,t.dur,Math.e2)),t.llY=t.lY):(t.aY=ut(r,-40,0,t.dur,Math.e3),t.lY=ut(r,240,215,t.dur,Math.e2)),r>t.dur&&(t.bearUp=!t.bearUp,t.sT=F)},draw:function(){var t=this;if(t.U9(),t.hsS){var r=t.Q;r.S(),r.T(t.x,t.y),r.scale(t.V,t.U),r.rotate(t.r*DR),r.S(),r.bP(),r.J(-40,55),r.N(-70,35,-70,25,-50,t.aY),r.J(40,55),r.N(70,35,70,25,50,t.aY),r.lineWidth=40,r.lineCap="round",r.strokeStyle="#222",r.stroke(),r.Re(),r.S(),r.bP(),r.J(-30,155),r.N(-40,185,-40,185,-30,t.lY),r.J(30,155),r.N(40,185,40,185,30,t.lY),r.lineWidth=40,r.lineCap="round",r.strokeStyle="#222",r.stroke(),r.Re(),r.S(),r.bP(),r.J(0,-45),r.lT(11,-38),r.lT(-11,-38),r.fillStyle="#412C1C",r.j(),r.Re(),r.S(),r.scale(1,.7),r.bP(),r.arc(0,-40,19,0,TP),r.fillStyle="#A88E62",r.j(),r.Re(),r.bP(),r.arc(0,0,37,0,TP),r.arc(0,140,66,0,TP),r.J(-37,0),r.lT(37,0),r.lT(66,135),r.lT(-66,135),r.fillStyle=t.bearFill,r.j(),r.S(),r.T(0,200),r.bP(),r.arc(-10,0,12,0,TP),r.fillStyle=t.tF,r.j(),r.Re(),r.bP(),r.arc(-30,-18,11,0,TP),r.arc(30,-18,11,0,TP),r.fillStyle="#333",r.j(),r.g(),r.Re()}}},et.prototype={Q:null,x:0,y:0,textY:0,m1:null,m2:null,m3:null,width:200,height:100,V:1,U:1,opacity:1,draw:function(){var t=this,r=t.Q;if(t.I){var e=t.x-20,a=t.y-t.height-20;r.S(),r.globalAlpha=t.opacity,r.O(t.I,0,0,t.width,t.height,e,a,t.width,t.height),e+=40,a+=t.height-2,r.bP(),r.J(e,a),r.lT(e+20,a),r.lT(e-5,a+20),r.lT(e,a),r.fillStyle="#FFF",r.j(),r.g(),r.Re()}else r.roundRect(0,0,t.width,t.height,10),r.fillStyle="#FFF",r.j(),r.fillStyle="#333",r.textBaseline="middle",r.font="13pt Comic Sans MS",r.textAlign="center",t.m1&&r.fillText(t.m1,.5*t.width,t.textY),t.m2&&r.fillText(t.m2,.5*t.width,t.textY+20),t.m3&&r.fillText(t.m3,.5*t.width,t.textY+40)}},at.prototype={el:null,score:0,U9Score:function(t){this.el.innerHTML=vt(t)}},it.prototype={Q:null,draw:function(){var t=this.Q;t.S(),t.bP(),t.scale(this.V,this.U),t.arc(this.x,this.y,this.radius,this.As,this.AsSs,!1),t.fillStyle=this.fill,t.j(),t.Re()}},nt.prototype={Q:null,draw:function(){var t=this.Q;t.S(),t.T(this.x,this.y),t.rotate(this.r),t.bP(),t.rect(0,0,this.width,this.height),t.fillStyle=this.fill,t.j(),t.Re()}},ot.prototype={Q:null,x:0,y:0,z:0,r:0,V:1,U:1,draw:function(){c.S(),c.T(this.x,this.y),c.rotate(this.r*DR),c.scale(this.V,this.U),this.shape(),c.Re()}},ht.prototype={Q:null,x:0,y:0,z:0,r:0,V:1,U:1,s:null,draw:function(){var t=this.Q;t.S(),t.T(this.x,this.y),t.rotate(this.r*DR),t.scale(this.V,this.U);var r=this.s.length;if(r)for(var e=0;e<r;e++)this.s[e].Q=t,this.s[e].draw();else this.s.draw();t.Re()},autoZ:function(){var t=this.s.length;if(t)for(var r=0;r<t;r++)this.s[r].z=r},refreshOrder:function(){this.s.length&&this.s.sort((function(t,r){return t.z-r.z}))}},dt.prototype={add:function(t,r,e,a,i){this.tweens.push({obj:t,sT:e,twP:r,dur:a,ease:i})},U9:function(t){var r,e,a,i,n,o=this,h=o.tweens.length;for(r=0;r<h;r++)(e=o.tweens[r])&&(a=e.obj,i=t-e.sT,a[(n=e.twP).prop]=ut(i,n.start,n.end,e.dur,e.ease),t>e.sT+e.dur?o.tweens[r]=null:t>e.sT&&a.draw());o.cleanup()},offset:function(t){var r,e,a=this.tweens.length;for(r=0;r<a;r++)(e=this.tweens[r])&&(e.sT=e.sT+t)},cleanup:function(){var t=this,r=t.tweens.length;for(b=0;b<r;b++)t.tweens[b]||t.tweens.splice(b,1)}},{IN:function(){X()},replay:function(){X(),wt("e").className=""},tgp:function(){var t,r;r=(new Date).getTime(),""===H.className?(H.className="play",V=!0,t=r,H.setAttribute("dpT",t),wt("cv").className="on"):(H.className="",V=!1,B(r,r-(t=H.getAttribute("dpT"))),wt("cv").className="")}}}();window.onload=game.IN;var PI=Math.PI,TP=2*PI,DR=PI/180;window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};var abs=Math.abs,random=Math.random,ceil=Math.ceil,round=Math.round,uu=CanvasRenderingContext2D.prototype;uu.O=uu.drawImage,uu.J=uu.moveTo,uu.j=uu.fill,uu.g=uu.closePath,uu.N=uu.bezierCurveTo,uu.bP=uu.beginPath,uu.lT=uu.lineTo,uu.S=uu.save,uu.Re=uu.restore,uu.Z=uu.clearRect,uu.T=uu.translate,uu.X=uu.createLinearGradient,uu.R=uu.rotate,uu.roundRect=function(t,r,e,a,i){var n=this;return e<2*i&&(i=e/2),a<2*i&&(i=a/2),n.bP(),n.J(t+i,r),n.arcTo(t+e,r,t+e,r+a,i),n.arcTo(t+e,r+a,t,r+a,i),n.arcTo(t,r+a,t,r,i),n.arcTo(t,r,t+e,r,i),n.g(),n},Math.e1=function(t,r,e,a){return e*t/a+r},Math.e4=function(t,r,e,a){return e*(t/=a)*t*t+r},Math.e2=function(t,r,e,a){return t/=a,e*(--t*t*t+1)+r},Math.e3=function(t,r,e,a){return(t/=a/2)<1?e/2*t*t*t+r:e/2*((t-=2)*t*t+2)+r}</script><style>body{background:#000;perspective:150px;font-family:"Comic Sans MS";transform-style:preserve-3d}#ctr{width:800px;height:400px;position:relative;overflow:hidden}#ctr>canvas,#score{position:absolute}#score{color:#fff;margin:10px 15px;font-size:20px;font-weight:700}#cv{background:rgba(0,0,0,.5);width:100%;height:100%;position:absolute;opacity:0;transition:opacity .5s ease-out 0s}#cv.on{opacity:1}#cv.hide{display:none}#e.show{transform:translateY(0)}#e.hide{display:none}#e{position:absolute;width:300px;top:15px;margin:auto -150px;left:50%;text-align:center;background:#fff;border-radius:5px;box-shadow:0 10px 10px -3px rgba(0,0,0,.3),0 -25px 50px -16px rgba(0,0,0,.2) inset;padding:10px 0;transform:translateY(-250px);transition:all .9s cubic-bezier(.85,-.53,.62,.93) 0s}#e>*{margin:0;color:#575757}#e h2{font-size:34px;margin:20px 0 0;letter-spacing:-2px}#e h2:before{content:"Total Score";position:absolute;font-size:14px;margin-top:-9px;letter-spacing:0;text-align:center;width:100%;left:0}#e a{background:#a2b378;color:#fff;text-decoration:none;padding:2px 10px;border-radius:10px;margin:10px auto 0;display:block;box-shadow:0 -7px 20px 0 rgba(0,0,0,.2) inset;width:100px}#e a:hover{box-shadow:0 0 20px 0 rgba(0,0,0,.2) inset}#e h3{font-size:22px;margin:0 0 15px}#e h4{font-size:17px;text-align:left;color:#999;line-height:19px;margin:0 30px;letter-spacing:-1px}#e h4 span{display:block;float:right}#dd{color:#fff}</style><div id=ctr><canvas id=bg width=800 height=400></canvas><canvas id=tree width=800 height=400></canvas><canvas id=chips width=800 height=400></canvas><canvas id=p width=800 height=400></canvas><canvas id=terry width=800 height=400></canvas><canvas id=bear width=800 height=400></canvas><div id=score></div><div id=cv></div><section id=e class=hide><h3>TIMBER!!</h3><h4>Nests Found (<b id=nN></b> x 500) <span id=O></span></h4><h4>Height Bonus <span id=hScore></span></h4><h2 id=e-s>0</h2><a href=javascript:game.replay()>Play Again?</a></section></div><p id=dd>Move: W,A,S,D<br>Chop/Collect: space