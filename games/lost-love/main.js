!function(){"use strict";function e(){return"undefined"!=typeof AudioContext?new AudioContext:"undefined"!=typeof webkitAudioContext?new webkitAudioContext:"undefined"!=typeof mozAudioContext?new mozAudioContext:($=!0,void console.log("Web Audio API is not supported"))}function t(e){return e>0?1:-1}function n(e,t,n,a,o){return a+(e-t)/(n-t)*(o-a)}function a(e,t,n,a){return n*e/a+t}function o(e){if(e>=U)return f(1),p("LOST LOVE"),void(be=!1);for(console.log(e,pe[e].id,pe[e].m,fe[pe[e].m]),f(pe[e].m),p(pe[e].id),be=!1,ie.length=0,we=pe[e].w,C=we.length/9,M=0;M<C;M++)(Y={}).x1=10*parseInt(we.substr(1+9*M,2),16),Y.y1=10*parseInt(we.substr(3+9*M,2),16),Y.x2=10*parseInt(we.substr(5+9*M,2),16),Y.y2=10*parseInt(we.substr(7+9*M,2),16),Y.v=parseInt(we.substr(0+9*M,1),16),ie.push(Y);i(e)}function i(e){oe=0,ye.x=pe[e].hx,ye.y=pe[e].hy,me.x=pe[e].px,me.y=pe[e].py,ae=pe[e].t}function r(){ye.t++,ye.s=a(ye.t,1.2,.6,150),_&&(me.x+=ue),ee&&(me.x-=ue),te&&(me.y-=ue),ne&&(me.y+=ue),c(),u()}function c(){ae-++oe/60<=0&&(be=!1,de=!0,se--,v(),0===se?(f(2),le=!0):f(3)),T(ae-oe/60)}function u(){for(C=ie.length,M=0;M<C;M++)(Y=ie[M]).v?me.y>=Y.y1-me.q&&me.y<Y.y2+me.q&&(R=me.x-Y.x1,Math.abs(R)<me.r&&(me.x+=15*t(R),y(!0))):me.x>=Y.x1-me.q&&me.x<Y.x2+me.q&&(N=me.y-Y.y1,Math.abs(N)<me.r&&(me.y+=15*t(N),y(!0)));R=ye.x-me.x,N=ye.y-me.y,V=Math.sqrt(R*R+N*N),ye.v=Math.max(0,n(V,500,30,0,1)),V<me.r+ye.r&&(y("h"),ye.v=0,o(++xe))}function s(){E.clearRect(0,0,J,Q),E.fillStyle=me.h,I(),E.arc(me.x,me.y,me.r,0,j),E.fill(),d(),m()}function d(){E.fillStyle=ye.h,I(),l(11,-3,11,-3),l(11,-9,8,-11),l(4,-13,0,-9),l(-3,-13,-7,-11),l(-10,-9,-10,-3),l(-10,3,0,11),l(11,3,11,-3),E.fill()}function l(e,t,n,a){E.quadraticCurveTo(ye.x+e*ye.s,ye.y+t*ye.s,ye.x+n*ye.s,ye.y+a*ye.s)}function m(){for(C=ie.length,M=0;M<C;M++)Y=ie[M],re.x=65*(Y.x1-me.x),re.y=65*(Y.y1-me.y),ce.x=65*(Y.x2-me.x),ce.y=65*(Y.y2-me.y),E.fillStyle="rgba(0,0,0,.7)",I(),S(Y.x1,Y.y1),O(re.x,re.y),O(ce.x,ce.y),O(Y.x2,Y.y2),E.fill(),I(),E.strokeStyle="#000",E.lineWidth="7",S(Y.x1,Y.y1),O(Y.x2,Y.y2),E.stroke()}function y(e){if(!$){var t=F.createGain(),n=F.createOscillator();switch(t.connect(F.destination),t.gain.setValueAtTime(0,F.currentTime),t.gain.linearRampToValueAtTime(e?1:ye.v,F.currentTime+.001*X),t.gain.linearRampToValueAtTime(0,F.currentTime+.001*Z),e){case!0:B=82;break;case"h":B=233;break;default:B=92}n.frequency.value=B,n.connect(t),n.start(0),setTimeout(function(){n.stop(0),n.disconnect(t),t.disconnect(F.destination)},Z)}}function b(){ye.t=0,y(),setTimeout(function(){ye.t=0,y()},350),setTimeout(function(){b()},1500)}function h(){be&&(r(),s(),requestAnimFrame(h))}function f(e){H.style.display="block",he.length=0,W=0,G="",he=fe[e].split(" "),H.innerHTML="",x()}function x(){var e=he[W++];void 0===e&&(e=""),G+=e+" ",H.innerHTML=G,W<he.length?K=setTimeout(x,100):L()}function w(){H.innerHTML=""}function p(e){P.innerHTML="LEVEL "+(xe+1)+": &ldquo;"+e+"&rdquo;"}function v(){D.className="l"+se}function T(e){z.innerHTML="TIME:"+(Math.ceil(e)<10?"0":"")+Math.ceil(e)}function L(){H.addEventListener("click",g,!1)}function k(){H.removeEventListener("click",g,!1)}function g(e){H.style.display="none",k(),w(),le&&(le=!1,se=3,v()),de&&(de=!1,i(xe)),be=!0,xe===U&&(xe=0,se=3,v(),o(xe),s(),clearTimeout(K),f(0)),h()}function A(e){switch(e.keyCode){case 37:case 65:ee=!0;break;case 38:case 87:te=!0;break;case 39:case 68:_=!0;break;case 40:case 83:ne=!0}}function q(e){switch(e.keyCode){case 37:case 65:ee=!1;break;case 38:case 87:te=!1;break;case 39:case 68:_=!1;break;case 40:case 83:ne=!1}}window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)};var M,C,E,I,S,O,F,B,R,N,V,Y,z,H,P,D,W,G,K,U,j=2*Math.PI,J=800,Q=600,X=50,Z=400,$=!1,_=!1,ee=!1,te=!1,ne=!1,ae=9,oe=0,ie=[],re={x:0,y:0},ce={x:0,y:0},ue=3,se=3,de=!1,le=!1,me={r:15,q:5,h:"#eee"},ye={r:10,h:"#f11",v:0},be=!1,he=[],fe=["LOST LOVE     <br><br>Your passion is bright but will you be able to beat the 7 trials and find Love in the shadows . . . <br>. . . in time?    <br><br>Use AWSD or arrow keys (&lArr;&uArr;&dArr;&rArr;) to move     <br><br><em>Click here to PLAY</em>","You walked away in order to find Love, and overcame Love&rsquo;s seven trials!    <br><br>You found the Lost and Lasting Love!    <br><br><em>Throw it all away and search again?</em>","You&rsquo;ve had all your chances    <br><br>Maybe you should ...    <br><em>try again!</em>","Too slow!    <br><br>Love doesn&rsquo;t wait around    <br><em>Try faster</em>","Love was in the air!   <br><br>But blew away in the wind.    <br><br><em>Next Level ...</em>","Love led you a merry dance.   <br><br>And skipped away.    <br><br><em>Next Level ...</em>","Did Love leave you in a spin?!   <br><br>Don&rsquo;t be dizzy.    <br><br><em>Next Level ...</em>","There is no lasting Love before the mast.    <br><br>Time to cast off.    <br><br><em>Next Level ...</em>","You walked the pathway LOST    <br><br>One more trial for Love be found.   <br><br><em>Next Level ...</em>"],xe=0,we="",pe=[];pe.push({px:400,py:350,hx:400,hy:150,t:20,m:0,id:"First Kiss",w:"0000050000003c503c10000003c15000503c000140a14014143c140461450140001e231e02d1e501e00028232802d285028000320a32014323c32046325032"}),pe.push({px:750,py:550,hx:50,hy:500,t:30,m:4,id:"Square Dance",w:"0000050000003c503c10000003c15000503c00a0a460a01e143c1401e1e3c1e02828462801432503210a0a0a3c11414143211e1e1e3213c143c1e1460a4628"}),pe.push({px:450,py:150,hx:750,hy:250,t:30,m:5,id:"Snail",w:"0000050000003c503c10000003c15000503c0000a280a0320a460a014143c1404614501401e1e321e02828322800a32143202832463210a140a3211414143211e1e1e3c1321e322813c143c321460a4632"}),pe.push({px:550,py:150,hx:650,hy:550,t:25,m:6,id:"Pirate&rsquo;s Skull",w:"0000050000003c503c10000003c15000503c00a0a1e0a0320a460a000140a14014141e1403214461401e1e3c1e014282828032283c2800a32463211414142811e0a1e1412800281e1282828321320a321413c1e3c2814632463c"}),pe.push({px:50,py:150,hx:650,hy:550,t:25,m:7,id:"L O S T",w:"0000050000003c503c10000003c15000503c0000a0a0a0140a460a0281446140461e501e0281e3c1e00a28322800032143202832323210a000a281140a141e11e141e2811e321e3c12814281e13214321e13228323213c0a3c1413c1e3c3c1461e463c"}),pe.push({px:350,py:350,hx:450,hy:350,t:30,m:8,id:"Think Outside the Box",w:"0-a-a5a-a0000050000003c503c0-a465a461-a-a-a4610000001e10028003c12800283c15000501e15028503c15a-a5a46"}),U=pe.length,function(){z=document.getElementById("t"),D=document.getElementById("l"),H=document.getElementById("m"),P=document.getElementById("n");var t=document.createElement("canvas",J,Q);t.width=J,t.height=Q,document.getElementById("w").appendChild(t),(E=t.getContext("2d")).lineCap="round",F=e(),I=function(){return E.beginPath()},S=function(e,t){return E.moveTo(e,t)},O=function(e,t){return E.lineTo(e,t)},document.onkeydown=A,document.onkeyup=q,o(xe),s(),clearTimeout(K),f(0)}(),b(),h()}();