<html><head><meta charset=UTF-8><title>js13kgames</title><style>body{background:#e3e3e3}img{display:none}#c{border:1px solid #181818;position:absolute;left:0;top:0;right:0;bottom:0;margin:auto;width:640px;height:384px;background:#e3e3e3;cursor:crosshair}</style></head><body><div id=c><canvas id=c1></canvas></div><script>function aa(){this.Db=function(b){for(var c=0;24>c;c++)this[String.fromCharCode(97+c)]=b[c]||0;.01>this.c&&(this.c=.01);b=this.b+this.c+this.e;.18>b&&(b=.18/b,this.b*=b,this.c*=b,this.e*=b)}}
var ba=new function(){this.Xa=new aa;var b,c,d,l,e,r,s,B,N,I,z,na;this.reset=function(){var b=this.Xa;l=100/(b.f*b.f+.001);e=100/(b.g*b.g+.001);r=1-b.h*b.h*b.h*.01;s=-b.i*b.i*b.i*1E-6;b.a||(z=.5-b.n/2,na=5E-5*-b.o);B=1+b.l*b.l*(0<b.l?-.9:10);N=0;I=1==b.m?0:(1-b.m)*(1-b.m)*2E4+32};this.Fb=function(){this.reset();var e=this.Xa;b=e.b*e.b*1E5;c=e.c*e.c*1E5;d=e.e*e.e*1E5+12;return 3*((b+c+d)/3|0)};this.Eb=function(La,oa){var n=this.Xa,pa=1!=n.s||n.v,J=n.v*n.v*.1,qa=1+3E-4*n.w,C=n.s*n.s*n.s*.1,Ma=1+1E-4*
n.t,Na=1!=n.s,Oa=n.x*n.x,Pa=n.g,ra=n.q||n.r,Qa=n.r*n.r*n.r*.2,ca=n.q*n.q*(0>n.q?-1020:1020),sa=n.p?((1-n.p)*(1-n.p)*2E4|0)+32:0,Ra=n.d,ta=n.j/2,Sa=n.k*n.k*.01,da=n.a,ea=b,Ta=1/b,Ua=1/c,Va=1/d,n=5/(1+n.u*n.u*20)*(.01+C);.8<n&&(n=.8);for(var n=1-n,fa=!1,ua=0,Q=0,R=0,W=0,O=0,S,P=0,v,D=0,K,ga=0,q,va=0,E,ha=0,X=Array(1024),T=Array(32),A=X.length;A--;)X[A]=0;for(A=T.length;A--;)T[A]=2*Math.random()-1;for(A=0;A<oa;A++){if(fa)return A;sa&&++va>=sa&&(va=0,this.reset());I&&++N>=I&&(I=0,l*=B);r+=s;l*=r;l>e&&
(l=e,0<Pa&&(fa=!0));v=l;0<ta&&(ha+=Sa,v*=1+Math.sin(ha)*ta);v|=0;8>v&&(v=8);da||(z+=na,0>z?z=0:.5<z&&(z=.5));if(++Q>ea)switch(Q=0,++ua){case 1:ea=c;break;case 2:ea=d}switch(ua){case 0:R=Q*Ta;break;case 1:R=1+2*(1-Q*Ua)*Ra;break;case 2:R=1-Q*Va;break;case 3:R=0,fa=!0}ra&&(ca+=Qa,K=ca|0,0>K?K=-K:1023<K&&(K=1023));pa&&qa&&(J*=qa,1E-5>J?J=1E-5:.1<J&&(J=.1));E=0;for(var Wa=8;Wa--;){D++;if(D>=v&&(D%=v,3==da))for(S=T.length;S--;)T[S]=2*Math.random()-1;switch(da){case 0:q=D/v<z?.5:-.5;break;case 1:q=1-D/
v*2;break;case 2:q=D/v;q=6.28318531*(.5<q?q-1:q);q=1.27323954*q+.405284735*q*q*(0>q?1:-1);q=.225*((0>q?-1:1)*q*q-q)+q;break;case 3:q=T[Math.abs(32*D/v|0)]}pa&&(S=P,C*=Ma,0>C?C=0:.1<C&&(C=.1),Na?(O+=(q-P)*C,O*=n):(P=q,O=0),P+=O,W+=P-S,q=W*=1-J);ra&&(X[ga%1024]=q,q+=X[(ga-K+1024)%1024],ga++);E+=q}E=.125*E*R*Oa;La[A]=1<=E?32767:-1>=E?-32768:32767*E|0}return oa}};
window.jsfxr=function(b){ba.Xa.Db(b);var c=ba.Fb();b=new Uint8Array(4*((c+1)/2|0)+44);var c=2*ba.Eb(new Uint16Array(b.buffer,44),c),d=new Uint32Array(b.buffer,0,44);d[0]=1179011410;d[1]=c+36;d[2]=1163280727;d[3]=544501094;d[4]=16;d[5]=65537;d[6]=44100;d[7]=88200;d[8]=1048578;d[9]=1635017060;d[10]=c;for(var c=c+44,d=0,l="data:audio/wav;base64,";d<c;d+=3)var e=b[d]<<16|b[d+1]<<8|b[d+2],l=l+("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e>>18]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e>>
12&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e>>6&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e&63]);return l};function ia(){this.fb={}}ia.prototype.add=function(b,c,d){this.fb[b]=[];d.forEach(function(d,e){this.fb[b].push({sa:0,count:c,vb:[]});for(var r=0;r<c;r++){var s=new Audio;s.src=jsfxr(d);this.fb[b][e].vb.push(s)}},this)};
ia.prototype.play=function(b){b=this.fb[b];b=1<b.length?b[Math.floor(Math.random()*b.length)]:b[0];b.vb[b.sa].play();b.sa<b.count-1?b.sa++:b.sa=0};var a,ja=document.getElementById("c1"),ka=ja.getContext("2d"),la=document.createElement("canvas"),ma=la.getContext("2d");a={width:640,height:384,A:32,now:0,tb:0,qb:0,eb:[],Ba:ja,D:ka,ya:la,Ja:ma,pb:document.getElementById("c")};function f(b){for(g=0+b;g<34+b;g++)a.eb.push(g);for(g=37+b;g<56+b;g++)a.eb.push(g)}f(0);f(60);f(120);f(180);
function h(b,c){return Math.round(b+Math.random()*(c-b))}function k(b){return b[h(0,b.length-1)]}function wa(b,c){return Math.sqrt(Math.pow(b-(m.x*a.A+a.A/2),2)+Math.pow(c-(m.y*a.A+a.A/2),2))}function p(b,c){a.width=a.Ba.width=a.pb.style.width=b;a.height=a.Ba.height=a.pb.style.height=c}Array.prototype.remove=function(b,c){var d=this.slice((c||b)+1||this.length);this.length=0>b?this.length+b:b;return this.push.apply(this,d)};a.L=[];a.L.arcade=[];
a.L.arcade[0]={X:["pistol"],Z:20,Y:25,T:20,S:25,ba:"air",U:[!0,!1],V:["machineGun"],W:4};a.L.arcade[1]={X:["pistol"],Z:22,Y:23,T:22,S:23,ba:"air",U:[!0,!1],V:["machineGun","shotGun"],W:4};a.L.arcade[2]={X:["shotGun","machineGun"],Z:25,Y:28,T:25,S:28,ba:"air",U:[!0,!1,!1],V:["machineGun","shotGun","revolver"],W:6};a.L.arcade[3]={X:["shotGun","machineGun"],Z:28,Y:30,T:28,S:30,ba:"air",U:[!0,!1,!1],V:["machineGun","shotGun","revolver","rockedLauncher"],W:8};
a.L.arcade[4]={X:["shotGun","machineGun"],Z:30,Y:32,T:30,S:32,ba:"water",U:[!0,!1,!1],V:["machineGun","shotGun","revolver","rockedLauncher"],W:10};a.L.arcade[5]={X:["pistol","machineGun"],Z:25,Y:30,T:25,S:30,ba:"water",U:[!0,!1,!1],V:["machineGun","shotGun","revolver","rockedLauncher"],W:10};a.L.arcade[6]={X:["pistol","machineGun","revolver"],Z:28,Y:35,T:28,S:35,ba:"water",U:[!0,!1,!1],V:["machineGun","shotGun","revolver","rockedLauncher"],W:12};
a.L.arcade[7]={X:["pistol","machineGun","revolver"],Z:30,Y:38,T:30,S:38,ba:"water",U:[!0,!1,!1],V:["machineGun","shotGun","revolver","rockedLauncher"],W:14};a.L.arcade[8]={X:["pistol","machineGun","revolver"],Z:32,Y:40,T:20,S:40,ba:"earth",U:[!0,!1,!1],V:["machineGun","shotGun","revolver","rockedLauncher"],W:16};a.L.arcade[9]={X:["pistol","machineGun","revolver","rockedLauncher"],Z:20,Y:40,T:30,S:35,ba:"earth",U:[!0,!1,!1],V:["machineGun","shotGun","revolver","rockedLauncher"],W:16};
a.L.arcade[10]={X:["pistol","machineGun","revolver","rockedLauncher"],Z:20,Y:40,T:20,S:25,ba:"earth",U:[!0,!1,!1],V:["machineGun","shotGun","revolver","rockedLauncher"],W:17};a.L.arcade[11]={X:["pistol","machineGun","revolver","rockedLauncher"],Z:20,Y:40,T:20,S:30,ba:"earth",U:[!0,!1,!1],V:["machineGun","shotGun","revolver","rockedLauncher"],W:18};
a.L.arcade[12]={X:["pistol","machineGun","revolver","rockedLauncher"],Z:20,Y:25,T:20,S:40,ba:"fire",U:[!0,!1,!1],V:["machineGun","shotGun","revolver","rockedLauncher"],W:19};a.L.arcade[13]={X:["pistol","machineGun","revolver","rockedLauncher"],Z:20,Y:25,T:35,S:40,ba:"fire",U:[!0,!1,!1],V:["machineGun","shotGun","revolver","rockedLauncher"],W:20};
a.L.arcade[14]={X:["pistol","machineGun","revolver","rockedLauncher"],Z:20,Y:25,T:35,S:40,ba:"fire",U:[!0,!1,!1],V:["machineGun","shotGun","revolver","rockedLauncher"],W:23};a.L.arcade[15]={X:["pistol","machineGun","revolver","rockedLauncher"],Z:20,Y:25,T:35,S:40,ba:"fire",U:[!0,!1,!1],V:["machineGun","shotGun","revolver","rockedLauncher"],W:25};a.L.survivor=[];a.L.survivor[0]={X:["pistol"],Z:20,Y:23,T:20,S:23,U:[!0,!1],V:["machineGun"],W:4};
a.L.survivor[1]={X:["pistol"],Z:22,Y:25,T:22,S:25,U:[!0,!1],V:["machineGun","shotGun"],W:6};a.L.survivor[2]={X:["machineGun","shotGun"],Z:25,Y:32,T:25,S:32,U:[!0,!1,!1],V:["machineGun","shotGun","revolver"],W:8};a.L.survivor[3]={X:["machineGun","shotGun","revolver"],Z:25,Y:32,T:25,S:32,U:[!0,!1,!1],V:["machineGun","shotGun","revolver","rockedLauncher"],W:10};
a.L.survivor[4]={X:["machineGun","shotGun","revolver","rockedLauncher"],Z:30,Y:35,T:30,S:34,U:[!0,!1,!1],V:["machineGun","shotGun","revolver","rockedLauncher"],W:10};a.L.survivor[5]={X:["machineGun","shotGun","revolver","rockedLauncher"],Z:40,Y:45,T:40,S:45,U:[!0,!1,!1],V:["machineGun","shotGun","revolver","rockedLauncher"],W:10};a.L.survivor[6]={X:["machineGun","shotGun","revolver","rockedLauncher"],Z:20,Y:50,T:20,S:50,U:[!0,!1,!1],V:["machineGun","shotGun","revolver","rockedLauncher"],W:10};
a.key={nb:!1,right:!1,va:!1,left:!1,rb:!1,sb:!1,ib:!1,Ra:!1,Fa:!1};
document.addEventListener("keydown",function(b){if(38===b.keyCode||87===b.keyCode)a.key.nb=!0;if(39===b.keyCode||68===b.keyCode)a.key.right=!0;if(40===b.keyCode||83===b.keyCode)a.key.va=!0;if(37===b.keyCode||65===b.keyCode)a.key.left=!0;27===b.keyCode&&(a.key.ib=!0);13===b.keyCode&&(a.key.Ra=!0);a.key.rb=!0;49===b.keyCode&&p(384,384);50===b.keyCode&&p(512,384);51===b.keyCode&&p(640,384);52===b.keyCode&&p(640,512);53===b.keyCode&&p(640,640)});
document.addEventListener("keyup",function(b){if(38===b.keyCode||87===b.keyCode)a.key.nb=!1;if(39===b.keyCode||68===b.keyCode)a.key.right=!1;if(40===b.keyCode||83===b.keyCode)a.key.va=!1;if(37===b.keyCode||65===b.keyCode)a.key.left=!1;27===b.keyCode&&(a.key.ib=!1);13===b.keyCode&&(a.key.Ra=!1,a.key.Fa=!1);a.key.rb=!1;a.key.sb=!1});a.K={};a.K.machineGun={size:10,speed:8,ga:7,Va:!1,La:4,ua:-2,ta:2,Pa:1,Ka:[10],Na:1};a.K.pistol={size:10,speed:8,ga:2,Va:!0,La:16,ua:0,ta:0,Pa:1,Ka:[8],Na:1};
a.K.revolver={size:10,speed:26,ga:8,Va:!0,La:26,ua:0,ta:0,Pa:1,Ka:[8],Na:5};a.K.rockedLauncher={size:16,speed:10,ga:16,Va:!0,La:32,ua:0,ta:0,Pa:1,Ka:[12],Na:10};a.K.shotGun={size:10,speed:8,ga:12,Va:!1,La:20,ua:-20,ta:20,Pa:3,Ka:[8,10],Na:1};a.audio=new ia;a.audio.add("powerup",3,[[1,,.072,,.3288,.3329,,.3597,,,,,,,,.4752,,,1,,,,,.5]]);a.audio.add("teleport",1,[[1,,.3481,,.3814,.2927,,.4332,,,,,,,,.4656,,,1,,,,,.5]]);
a.audio.add("machineGun",4,[[0,,.2303,,.0648,.7337,.0117,-.5985,,,,,,.0261,.1966,,,,1,,,.053,,.36],[0,,.29,,.0648,.7337,.0117,-.5985,,,,,,.41,.1966,,,,1,,,.053,,.36]]);a.audio.add("shotGun",10,[[0,,.2303,,.0648,.7337,.0117,-.5985,,,,,,.0261,.1966,,,,1,,,.053,,.36],[0,,.29,,.0648,.7337,.0117,-.5985,,,,,,.41,.1966,,,,1,,,.053,,.36]]);a.audio.add("pistol",3,[[0,,.2303,,.0648,.7337,.0117,-.5985,,,,,,.0261,.1966,,,,1,,,.053,,.36],[0,,.29,,.0648,.7337,.0117,-.5985,,,,,,.41,.1966,,,,1,,,.053,,.36]]);
a.audio.add("revolver",2,[[1,,.1416,.284,.1369,.5758,.0167,-.454,,,,,,.2509,.015,,,,1,,,,,.35],[1,.0392,.1389,.2418,.1445,.5909,.0513,-.4599,,.0117,.0203,,,.2409,-.0697,,-.0121,-.0434,.9783,.0236,.0184,,-.0226,.35]]);a.audio.add("rockedLauncher",3,[[0,,.1022,,.3855,.8689,.2,-.3429,,,,,,.7715,-.4361,,.1768,-.0335,1,,,,,.5],[0,.0295,.0811,.0827,.3482,.9271,.246,-.3145,.0183,,.0629,.0324,,.7798,-.4505,.0536,.2884,-.084,.9301,-.0068,.0684,.0242,.0249,.5]]);
a.audio.add("damage",12,[[3,,.0275,,.1524,.6908,,-.5489,,,,,,,,,,,1,,,.1386,,.43],[3,.0444,.0275,.0279,.1524,.6908,.0221,-.5489,.0309,,,.003,,,,,.0261,,.9645,.0306,,.1386,-.0024,.43],[3,.0444,.0568,.0279,.1665,.7045,.0513,-.5511,.0633,,,.0115,.0418,,,,-.0149,,.9645,.0563,,.1386,.0089,.43]]);
a.audio.add("damageWall",12,[[3,,.0275,,.1524,.6908,,-.5489,,,,,,,,,,,1,,,.1386,,.1],[3,.0444,.0275,.0279,.1524,.6908,.0221,-.5489,.0309,,,.003,,,,,.0261,,.9645,.0306,,.1386,-.0024,.1],[3,.0444,.0568,.0279,.1665,.7045,.0513,-.5511,.0633,,,.0115,.0418,,,,-.0149,,.9645,.0563,,.1386,.0089,.1]]);a.audio.add("orb",6,[[0,,.0591,.3995,.2508,.6791,,,,,,.4199,.5033,,,,,,1,,,,,.43]]);a.$={x:0,y:0,ia:0,va:!1};
a.Ba.addEventListener("mousemove",function(b){var c=a.Ba.getBoundingClientRect();a.$.x=b.clientX-c.left;a.$.y=b.clientY-c.top});a.Ba.addEventListener("mousedown",function(){a.$.va=!0});a.Ba.addEventListener("mouseup",function(){a.$.va=!1});var t=minY=maxX=maxY=0,xa,m;function u(b,c,d,l,e,r,s,B){this.x=this.y=this.size=this.ia=0;this.next={x:this.x,y:this.y};this.speed=8;this.Ga(b,c,d,l);this.ra=!1;this.xa=!0;this.yb=e;this.type=r;this.J=s||!0;this.color=B}
u.prototype.Ga=function(b,c,d,l,e,r,s,B,N){this.x=b;this.y=c;this.next.x=this.x;this.next.y=this.y;this.size=l||8;this.ia=d;this.xa=!1;this.type=r;this.J=s;this.ub=B;this.speed=e;this.color=N;a.K[a.C.N].Ka&&"bullet"===r&&(this.speed=k(a.K[a.C.N].Ka));a.K[a.C.N].ua&&a.K[a.C.N].ta&&"bullet"===r&&(this.ia=Math.atan2(h(a.$.y-8+a.K[a.C.N].ua,a.$.y-8+a.K[a.C.N].ta)-(a.C.y-a.B.J.y),h(a.$.x-8+a.K[a.C.N].ua,a.$.x-8+a.K[a.C.N].ta)-(a.C.x-a.B.J.x)))};
u.prototype.bullet=function(){if(this.ra)return!1;this.next.x+=Math.cos(2*Math.PI+this.ia)*this.speed;this.next.y+=Math.sin(2*Math.PI+this.ia)*this.speed;t=this.next.x/a.A>>0;maxX=(this.next.x+this.size)/a.A>>0;minY=this.next.y/a.A>>0;maxY=(this.next.y+this.size)/a.A>>0;for(w=minY;w<=maxY&&0<=w;w++)for(x=t;x<=maxX&&0<=x;x++)if(m=a.B.map[a.B.cols*w+x],xa!==m.ab){if(this.bb(m)&&m.qa){if("enemy"===m.type)m[m.type]();a.audio.play("damageWall");this.ra=!0}xa=m.ab}this.x=this.next.x;this.y=this.next.y};
u.prototype.enemyBullet=function(){if(this.ra)return!1;this.next.x+=Math.cos(2*Math.PI+this.ia)*this.speed;this.next.y+=Math.sin(2*Math.PI+this.ia)*this.speed;t=this.next.x/a.A>>0;maxX=(this.next.x+this.size)/a.A>>0;minY=this.next.y/a.A>>0;maxY=(this.next.y+this.size)/a.A>>0;for(w=minY;w<=maxY&&0<=w;w++)for(x=t;x<=maxX&&0<=x;x++)if(m=a.B.map[a.B.cols*w+x],this.bb(m)&&m.qa&&m.ab!==this.ub)return a.audio.play("damageWall"),this.ra=!0,!1;if(ya(this))return a.C.ha.x+=4*Math.cos(2*Math.PI+this.ia),a.C.ha.y+=
4*Math.sin(2*Math.PI+this.ia),a.B.M.y+=h(-14,14),a.B.M.x+=h(-14,14),a.C.ma-=a.K[a.B.map[this.ub].Aa].Na/2,a.audio.play("damage"),this.ra=!0,!1;this.x=this.next.x;this.y=this.next.y};u.prototype.orb=function(){if(this.ra)return!1;this.x+=.1*(a.C.x-this.x);this.y+=.1*(a.C.y-this.y);ya(this)&&(a.C.ma+=this.size/2,a.audio.play("orb"),this.ra=!0)};u.prototype.bb=function(b){return b&&b.x*a.A<this.next.x+this.size&&b.y*a.A<this.next.y+this.size&&b.x*a.A+a.A>this.next.x&&b.y*a.A+a.A>this.next.y?!0:!1};
u.prototype.oa=function(){if(this.ra)return!1;a.D.fillStyle=this.color;this.J?a.D.fillRect(this.x-(a.B.J.x+a.B.M.x),this.y-(a.B.J.y+a.B.M.y),this.size,this.size):a.D.fillRect(this.x+a.B.M.x,this.y+a.B.M.y,this.size,this.size)};a.Gb=u;function za(b){this.Ua=this.next=null;this.data=b}za.prototype.remove=function(){this.next&&(this.next.Ua=this.Ua);this.Ua&&(this.Ua.next=this.next)};function Aa(){this.hb=this.head=null;this.length=0;this.Ma=[]}
Aa.prototype.push=function(b){"undefined"===typeof this.Ma[b]&&(this.Ma[b]=new za(b));this.head?(this.Ma[b].Ua=this.hb,this.hb.next=this.Ma[b],this.hb=this.Ma[b]):this.head=this.hb=this.Ma[b];this.length++};Aa.prototype.shift=function(){var b=this.head;this.head=b.next;b.remove();b.next=null;this.length--;null==this.head&&(this.length=0)};a.zb=Aa;function Ba(){this.elements=[];this.Sa=new a.zb}
Ba.prototype.get=function(b,c,d,l,e,r,s,B,N){if(0===this.Sa.length){var I=this.elements.length,z=I+2;this.elements.length=z;for(g=I;g<z;g++)this.elements[g]=new u(0,0,0,0,g),this.Sa.push(g)}this.elements[this.Sa.head.data].Ga(b,c,d,l,e,r,s,B,N);this.Sa.shift()};Ba.prototype.xa=function(b){b.xa||(b.xa=!0,b.ra=!1,this.Sa.push(b.yb))};a.Ab=Ba;var x=0,w=0,g=0,Ca=0,Da=0,F=[];F[11]="w";F[48]="e";F[56]="pz";F[57]="t";F[34]="f";F[58]="p";var G=[];G.w={Wa:"w",Ca:11,rules:[]};
G.f={Wa:"f",Ca:[34,34,34,35,36],rules:[]};G.e={Wa:"e",Ca:48,rules:[]};G.pz={Wa:"pz",Ca:56,rules:[]};G.t={Wa:"t",Ca:57,rules:[]};G.p={Wa:"p",Ca:58,rules:[]};function H(b,c){G.w.rules.push({mb:b,map:c})}H(3,{F:"!w",I:"!w",H:"!w",G:"!w"});H(7,{G:"w",O:"w",F:"w",Q:"!w",H:"w",R:"w",I:"w",P:"w"});H(4,{G:"!w",F:"w",Q:"!w",H:"w",I:"!w"});H(9,{G:"w",O:"w",F:"w",Q:"w",H:"w",R:"!w",I:"w",P:"w"});H(11,{G:"w",O:"w",F:"w",Q:"w",H:"w",R:"w",I:"w",P:"w"});H(2,{G:"!w",F:"!w",H:"w",I:"w",R:"w"});
H(0,{I:"!w",G:"!w",F:"w",H:"w",Q:"w"});H(27,{G:"w",O:"!w",F:"w",Q:"w",H:"w",R:"w",I:"w",P:"w"});H(29,{G:"w",O:"w",F:"w",Q:"w",H:"w",R:"w",I:"w",P:"!w"});H(28,{G:"w",O:"!w",F:"w",Q:"w",H:"w",R:"w",I:"w",P:"!w"});H(38,{G:"w",O:"!w",F:"w",Q:"w",H:"w",R:"w",I:"w",P:"!w"});H(1,{G:"!w",F:"w",Q:"w",H:"w",R:"w",I:"w"});H(8,{G:"w",O:"w",F:"w",Q:"!w",H:"w",R:"!w",I:"w",P:"w"});H(5,{G:"!w",F:"w",Q:"!w",H:"w",R:"!w",I:"w"});H(6,{G:"!w",F:"!w",H:"w",R:"!w",I:"w"});
H(39,{G:"w",O:"w",F:"w",Q:"w",H:"w",R:"!w",I:"w",P:"!w"});H(10,{G:"w",O:"w",F:"w",H:"w",Q:"w",I:"!w"});H(12,{I:"w",H:"w",R:"w",G:"w",P:"w",F:"!w"});H(13,{G:"!w",F:"!w",H:"w",I:"!w"});H(37,{G:"w",O:"!w",F:"w",Q:"!w",H:"w",R:"w",I:"w",P:"w"});H(14,{G:"w",O:"!w",F:"w",Q:"!w",H:"w",I:"!w"});H(16,{G:"w",F:"!w",H:"w",R:"!w",I:"w",P:"!w"});H(17,{G:"w",O:"!w",F:"w",Q:"!w",H:"w",R:"w",I:"w",P:"w"});H(18,{G:"w",O:"!w",F:"w",Q:"!w",H:"w",R:"!w",I:"w",P:"!w"});
H(19,{G:"w",O:"w",F:"w",Q:"w",H:"w",R:"!w",I:"w",P:"!w"});H(20,{G:"w",O:"w",F:"w",H:"!w",I:"!w"});H(21,{G:"w",O:"w",F:"w",H:"!w",I:"w",P:"w"});H(22,{G:"w",F:"!w",H:"!w",I:"w",P:"w"});H(23,{G:"w",F:"!w",H:"w",I:"!w"});H(24,{G:"w",O:"!w",F:"w",H:"!w",I:"!w"});H(25,{G:"w",O:"!w",F:"w",H:"!w",I:"w",P:"!w"});H(26,{G:"w",F:"!w",H:"!w",I:"w",P:"!w"});H(30,{G:"!w",F:"w",H:"!w",I:"!w"});H(31,{G:"!w",F:"w",H:"!w",I:"w"});H(32,{G:"!w",F:"!w",H:"!w",I:"w"});H(33,{G:"w",F:"!w",H:"!w",I:"!w"});
H(40,{G:"!w",F:"w",Q:"!w",H:"w",R:"w",I:"w"});H(41,{G:"w",F:"!w",H:"w",R:"!w",I:"w",P:"w"});H(42,{G:"w",O:"w",F:"w",Q:"!w",H:"w",I:"!w"});H(43,{G:"!w",F:"w",Q:"w",H:"w",R:"!w",I:"w"});H(44,{G:"w",O:"!w",F:"w",Q:"!w",H:"w",R:"!w",I:"w",P:"w"});H(45,{G:"w",O:"w",F:"w",Q:"!w",H:"w",R:"!w",I:"w",P:"!w"});H(46,{G:"w",O:"!w",F:"w",Q:"w",H:"w",R:"!w",I:"w",P:"w"});H(47,{G:"w",O:"w",F:"w",Q:"!w",H:"w",R:"w",I:"w",P:"!w"});H(50,{G:"w",O:"!w",F:"w",Q:"w",H:"w",I:"!w"});
H(51,{G:"w",O:"w",F:"w",H:"!w",I:"w",P:"!w"});H(52,{G:"w",O:"!w",F:"w",H:"!w",I:"w",P:"w"});H(53,{G:"w",F:"!w",H:"w",R:"w",I:"w",P:"!w"});H(54,{G:"w",O:"!w",F:"w",Q:"!w",H:"w",R:"w",I:"w",P:"!w"});H(55,{G:"w",O:"!w",F:"w",Q:"w",H:"w",R:"!w",I:"w",P:"!w"});function L(b,c,d){this.ea=[];this.wa=[];this.Ga(b,c,d)}L.prototype.Ga=function(b,c,d){this.qa=null;M(this,k([34,34,11]));this.x=b;this.y=c;this.ab=d;this.ea.length=0;this.wa.length=0;this.wb=null};
L.prototype.enemy=function(){this.ma-=a.K[a.C.N].Na;a.audio.play("damage");a.B.M.y+=k([-a.K[a.C.N].ga/2,a.K[a.C.N].ga/2]);a.B.M.x+=k([-a.K[a.C.N].ga/2,a.K[a.C.N].ga/2]);0>=this.ma&&(this.za=3+60*a.B.type,this.type="w",a.B.Oa--,a.$a++,k([!0,!1,!1,!1])&&M(this,58+60*a.B.type,"p"),k(a.L[a.mode][a.fa].U)&&a.aa.get(this.x*a.A+a.A/2,this.y*a.A+a.A/2,4.2,k([4,4,6,6,10]),8,"orb",!0,null,"hsl(120, 10%, 30%)"),a.Ja.fillStyle="rgba(18,18,18, 0.6)",a.Ja.clearRect(3*this.x,3*this.y,3,3),a.Ja.fillRect(3*this.x,
3*this.y,3,3),a.B.M.y+=k([-a.K[a.C.N].ga,a.K[a.C.N].ga]),a.B.M.x+=k([-a.K[a.C.N].ga,a.K[a.C.N].ga]))};
L.prototype.enemyUpdate=function(){var b;if(0==a.sa%a.K[this.Aa].La&&k([!0,!1])&&!a.Ta){for(g=0;g<a.K[this.Aa].Pa;g++)b=Math.atan2(h(a.C.y-(a.B.J.y+a.B.M.y)+a.K[this.Aa].ua,a.C.y-(a.B.J.y+a.B.M.y)+a.K[this.Aa].ta)-(this.y*a.A+a.A/4-a.B.J.y),h(a.C.x-(a.B.J.x+a.B.M.x)+a.K[this.Aa].ua,a.C.x-(a.B.J.x+a.B.M.x)+a.K[this.Aa].ta)-(this.x*a.A+a.A/4-a.B.J.x)),a.aa.get(this.x*a.A+a.A/4,this.y*a.A+a.A/4,b,a.K[this.Aa].size,k(a.K[this.Aa].Ka),"enemyBullet",!0,this.ab,a.B.Cb[a.B.type]);a.B.M.y+=h(-1,1);a.B.M.x+=
h(-1,1)}};function M(b,c,d){b.za=c;b.type=d||F[c];b.qa=-1<a.eb.indexOf(c)}function U(b){this.rows=this.cols=64;this.map=[];this.J={x:0,y:0};this.Za={x:500,y:500};this.M={x:0,y:0};this.viewport={width:a.width,height:a.height};this.Oa=0;this.types=["air","water","earth","fire"];this.type=this.types.indexOf(b);this.pa=!1;this.Cb=["hsl(91, 40%, 25%)","hsl(205, 40%, 25%)","hsl(40, 40%, 25%)","hsl(0, 40%, 25%)"];this.Ea=[];this.jb=[];this.na={x:0,y:0}}
function Ea(b,c,d,l,e,r,s){for(w=c;w<l;w++)for(x=d;x<e;x++)"undefined"!==typeof b.map[b.cols*w+x]&&(r instanceof Array?M(b.map[b.cols*w+x],k(r),s):M(b.map[b.cols*w+x],r))}U.prototype.reset=function(){Fa(this)};
function Fa(b){b.pa=!1;a.Ta=!0;b.rows=h(a.L[a.mode][a.fa].Z,a.L[a.mode][a.fa].Y)>>0;b.cols=h(a.L[a.mode][a.fa].T,a.L[a.mode][a.fa].S)>>0;for(g=b.Oa=0;g<a.aa.elements.length;g++)a.aa.elements[g].xa||a.aa.xa(a.aa.elements[g]);for(w=0;w<b.rows;w++)for(x=0;x<b.cols;x++)"undefined"==typeof b.map[b.cols*w+x]?b.map[b.cols*w+x]=new L(x,w,b.cols*w+x):b.map[b.cols*w+x].Ga(x,w,b.cols*w+x),0===w&&M(b.map[b.cols*w+x],11),0===x&&M(b.map[b.cols*w+x],11),w===b.rows-1&&M(b.map[b.cols*w+x],11),x===b.cols-1&&M(b.map[b.cols*
w+x],11);a.C.ca=a.C.x=b.na.x=b.cols*a.A/2;a.C.da=a.C.y=b.na.y=b.rows*a.A/2;Ea(b,(b.na.x/a.A>>0)-2,(b.na.y/a.A>>0)-2,(b.na.x/a.A>>0)+2,(b.na.y/a.A>>0)+2,56);for(w=0;w<b.rows;w++)for(x=0;x<b.cols;x++)V(b.map[b.cols*w+x],b.map[b.cols*(w+1)+x]),V(b.map[b.cols*w+x],b.map[b.cols*(w-1)+x]),V(b.map[b.cols*w+x],b.map[b.cols*w+(x+1)]),V(b.map[b.cols*w+x],b.map[b.cols*w+(x-1)]);var c;for(w=0;w<b.rows;w++)for(x=0;x<b.cols;x++)"w"===b.map[b.cols*w+x].type&&(c=Ga(b,x,w,G.w.rules[0])?48:3,48===c&&k([!0,!1])&&(M(b.map[b.cols*
w+x],c),b.Oa++));for(w=0;w<b.rows;w++)for(x=0;x<b.cols;x++)if(48===b.map[b.cols*w+x].za){c=b;var d=x,l=w,e=void 0;c.Ea.length=0;c.jb.length=0;for(c.Ea.push(c.map[c.cols*Math.floor(a.C.y/a.A)+Math.floor(a.C.x/a.A)]);0<c.Ea.length;){e=k(c.Ea);if(e.x===d&&e.y===l){for(;e;){48===e.za&&e.x!==d&&e.y!==l?(M(e,34),c.Oa--):48!==e.za&&56!==e.za&&M(e,34);for(g=e.ea.length-1;0<=g;g--)48!==e.ea[g].za&&56!==e.ea[g].za&&0<e.ea[g].x&&e.ea[g].x<c.cols-1&&0<e.ea[g].y&&e.ea[g].y<c.rows-1&&k([!0,!1,!1])&&M(e.ea[g],34);
e=e.wb}break}c.Ea.remove(c.Ea.indexOf(e));c.jb.push(e);for(g=e.ea.length-1;0<=g;g--)-1==c.Ea.indexOf(e.ea[g])&&-1==c.jb.indexOf(e.ea[g])&&0<e.x&&e.x<c.cols-1&&0<e.y&&e.y<c.rows-1&&(e.ea[g].wb=e,c.Ea.push(e.ea[g]))}}for(w=0;w<b.rows;w++)for(x=0;x<b.cols;x++){d=b.check(x,w)+60*b.type;c=b.map[b.cols*w+x];c.za=d;if(48===d||108===d||168===d||228===d)c.type="enemy",c.ma=a.L[a.mode][a.fa].W,c.Aa=k(a.L[a.mode][a.fa].X);c.qa=-1<a.eb.indexOf(d);b.map[b.cols*w+x].qa&&("undefined"===typeof b.map[b.cols*(w+1)+
x]||b.map[b.cols*(w+1)+x].qa||b.map[b.cols*w+x].wa.push("b"),"undefined"===typeof b.map[b.cols*(w-1)+x]||b.map[b.cols*(w-1)+x].qa||b.map[b.cols*w+x].wa.push("t"),"undefined"===typeof b.map[b.cols*w+(x+1)]||b.map[b.cols*w+(x+1)].qa||b.map[b.cols*w+x].wa.push("r"),"undefined"===typeof b.map[b.cols*w+(x-1)]||b.map[b.cols*w+(x-1)].qa||b.map[b.cols*w+x].wa.push("l"))}a.ya.width=3*b.cols;a.ya.height=3*b.rows;a.Ja.fillStyle="rgba(18,18,18, 0.3)";a.Ja.fillRect(0,0,a.ya.width,a.ya.height);for(w=0;w<b.rows;w++)for(x=
0;x<b.cols;x++)b.map[b.cols*w+x].qa&&(a.Ja.fillStyle="enemy"===b.map[b.cols*w+x].type?"rgba(255,35,35, 0.8)":"rgba(18,18,18, 0.6)",a.Ja.fillRect(3*b.map[b.cols*w+x].x,3*b.map[b.cols*w+x].y,3,3));b.pa=!0}U.prototype.check=function(b,c){var d=G[this.map[this.cols*c+b].type].rules;for(g=0;g<d.length;g++)if(Ga(this,b,c,d[g]))return d[g].mb instanceof Array?k(d[g].mb):d[g].mb;return G[this.map[this.cols*c+b].type].Ca instanceof Array?k(G[this.map[this.cols*c+b].type].Ca):G[this.map[this.cols*c+b].type].Ca};
function Ga(b,c,d,l){return Y(b,c,d-1,l.map.G,c,d)&&Y(b,c+1,d-1,l.map.O,c,d)&&Y(b,c+1,d,l.map.F,c,d)&&Y(b,c+1,d+1,l.map.Q,c,d)&&Y(b,c,d+1,l.map.H,c,d)&&Y(b,c-1,d+1,l.map.R,c,d)&&Y(b,c-1,d,l.map.I,c,d)&&Y(b,c-1,d-1,l.map.P,c,d)?!0:!1}function Y(b,c,d,l,e,r){var s=b.map[b.cols*d+c];if(!s||0>c||0>d||c>=b.cols||d>=b.rows)s=b.map[b.cols*r+e];return l?/(!\w*)/.test(l)?-1<~l.indexOf(s.type):l===s.type:!0}function V(b,c){"undefined"!==typeof c&&b.ea.push(c)}
U.prototype.oa=function(){var b=(a.width+this.J.x)/a.A>>0,c=(a.height+this.J.y)/a.A>>0;w=this.J.y/a.A>>0;this.J.x%a.A&&(b+=1);for(this.J.y%a.A&&(c+=1);w<c&&w<this.rows;w++)for(x=this.J.x/a.A>>0;x<b&&x<this.cols;x++){var d=this.map[this.cols*w+x].za,l=x,e=w;Da=d/10>>0;Ca=d-10*Da;a.D.drawImage(a.gb,Ca*a.A,Da*a.A,a.A,a.A,l*a.A-(this.J.x+this.M.x),e*a.A-(this.J.y+this.M.y),a.A,a.A);"enemy"===this.map[this.cols*w+x].type&&this.map[this.cols*w+x].enemyUpdate()}a.D.drawImage(a.ya,a.width-a.ya.width-16,a.height-
a.ya.height-16);a.D.fillStyle="#e3e3e3";a.D.fillRect(a.width-a.ya.width-16+3*(a.C.x/32>>0),a.height-a.ya.height-16+3*(a.C.y/32>>0),3,3)};U.prototype.update=function(){var b=.05*(this.Za.y-this.J.y)>>0;this.J.x+=.05*(this.Za.x-this.J.x)>>0;this.J.y+=b;this.J.x=Math.max(0,Math.min(this.J.x,a.A*this.cols-a.width));this.J.y=Math.max(0,Math.min(this.J.y,a.A*this.rows-a.height));0===a.sa%8&&(this.M.x=this.M.y=0)};var Z=y=t=minY=maxX=maxY=0;
function Ha(b,c){this.size=16;this.x=b;this.y=c;this.ka=this.ja=0;this.speed=.8;this.cb=20;this.ca=this.x;this.da=this.y;this.ma=10;this.N="pistol";this.ha={x:0,y:0}}
Ha.prototype.update=function(){this.ka*=.72;this.ja*=.72;this.x=this.ca;this.y=this.da;a.key.nb&&this.ka>-this.cb&&(this.ka-=this.speed);a.key.va&&this.ka<this.cb&&(this.ka+=this.speed);a.key.right&&this.ja<this.cb&&(this.ja+=this.speed);a.key.left&&this.ja>-this.cb&&(this.ja-=this.speed);a.K[a.C.N].Va?(this.ja+=this.ha.x,this.ka+=this.ha.y):(this.ca+=this.ha.x,this.da+=this.ha.y);this.ca+=this.ja;this.da+=this.ka;t=Math.floor(this.ca/a.A);maxX=Math.floor((this.ca+this.size)/a.A);minY=Math.floor(this.da/
a.A);maxY=Math.floor((this.da+this.size)/a.A);for(w=minY;w<=maxY;w++)for(x=t;x<=maxX;x++)if(m=a.B.map[a.B.cols*w+x],this.bb(m)&&m.qa){if(-1<m.wa.indexOf("r")&&Ia(this)){for(Z=Math.floor(this.ca);!Ia(this,Z);)Z++;this.ca=Z;this.ja=0}if(-1<m.wa.indexOf("t")&&Ja(this)){for(y=Math.floor(this.da);!Ja(this,y);)y--;this.da=y;this.ka=0}if(-1<m.wa.indexOf("b")&&Ka(this)){for(y=Math.floor(this.da);!Ka(this,y);)y++;this.da=y;this.ka=0}if(-1<m.wa.indexOf("l")&&Xa(this)){for(Z=Math.floor(this.ca);!Xa(this,Z);)Z--;
this.ca=Z;this.ja=0}}else if("p"===m.type){var b=a.L[a.mode][a.fa].V,c=k(b),d=b.indexOf(c)+1;d>b.length-1&&(d=0);this.N===c&&(c=b[d]);this.N=c;M(m,34+60*a.B.type,"w");a.audio.play("powerup")}else"t"===m.type&&0===a.B.Oa?10>=wa(this.x+this.size/2,this.y+this.size/2)&&(b=a.B,a.Da++,"survivor"===a.mode&&(b.pa=!1,b.type=b.types.indexOf(k(b.types)),a.la="map",a.fa=Math.max(a.Da,a.L[a.mode].length-1)),"arcade"===a.mode&&(b.pa=!1,b.type=b.types.indexOf(a.L[a.mode][a.fa].ba),a.la="map",a.fa++,a.fa>a.L[a.mode].length-
1&&(a.fa=0,a.Ya++)),a.audio.play("teleport")):"pz"!==m.type&&a.Ta&&16>=wa(this.x+this.size/2,this.y+this.size/2)&&(a.Ta=!1,Ea(a.B,(a.B.na.x/a.A>>0)-2,(a.B.na.y/a.A>>0)-2,(a.B.na.x/a.A>>0)+2,(a.B.na.y/a.A>>0)+2,[34+60*a.B.type,34+60*a.B.type,34+60*a.B.type,35+60*a.B.type,36+60*a.B.type],"f"),M(a.B.map[a.B.cols*(a.B.na.y/a.A>>0)+(a.B.na.x/a.A>>0)],57+60*a.B.type,"t"));this.ha.x=0;this.ha.y=0;if(this.x-a.B.J.x>a.width/2||this.x-a.B.J.x<a.width/2)a.B.Za.x=this.x-a.width/2+this.size/2;if(this.y-a.B.J.y>
a.width/2||this.y-a.B.J.y<a.width/2)a.B.Za.y=this.y-a.height/2+this.size/2};Ha.prototype.bb=function(b){return b&&b.x*a.A<this.ca+this.size&&b.y*a.A<this.da+this.size&&b.x*a.A+a.A>this.ca&&b.y*a.A+a.A>this.da?!0:!1};function ya(b){var c=a.C;return b.x<c.ca+c.size&&b.y<c.da+c.size&&b.x+b.size>c.ca&&b.y+b.size>c.da?!0:!1}function Ja(b,c){var d=m;c=c||b.y;return d.x*a.A<=b.x+b.size&&d.x*a.A+a.A>=b.x&&d.y*a.A>=c+b.size?!0:!1}function Ia(b,c){var d=m;c=c||b.x;return d.x*a.A+a.A<=c?!0:!1}
function Xa(b,c){var d=m;c=c||b.x;return d.x*a.A>=c+b.size?!0:!1}function Ka(b,c){var d=m;c=c||b.y;return d.x*a.A+a.A>=b.x&&d.y*a.A+a.A<=c?!0:!1}Ha.prototype.oa=function(){a.D.fillStyle="#181818";a.D.fillRect(this.x-(a.B.J.x+a.B.M.x),this.y-(a.B.J.y+a.B.M.y),this.size,this.size)};function $(b,c,d,l,e){a.xb.fillStyle=e;a.xb.fillRect(b,c,d,l)}
function Ya(b,c,d,l,e,r,s){$(3*a.A,a.A*b,a.A,a.A,c);$(3*a.A+2,a.A*b+2,a.A-4,a.A/2,d);$(3*a.A,a.A*b+20,a.A,12,l);$(4*a.A,a.A*(3+b),a.A,a.A,e);$(5*a.A,a.A*(3+b),a.A,a.A,e);$(5*a.A+20,a.A*(3+b)+20,2,2,d);$(5*a.A+12,a.A*(3+b)+8,2,2,d);$(5*a.A+8,a.A*(3+b)+15,2,2,d);$(5*a.A+14,a.A*(3+b)+6,2,2,d);$(6*a.A,a.A*(3+b),a.A,a.A,e);$(6*a.A+10,a.A*(3+b)+5,2,2,d);$(6*a.A+16,a.A*(3+b)+9,2,2,d);$(6*a.A+12,a.A*(3+b)+10,2,2,d);$(6*a.A+18,a.A*(3+b)+9,2,2,d);$(8*a.A,a.A*(4+b),a.A,a.A,c);$(8*a.A+2,a.A*(4+b)+2,a.A-4,a.A/
2,r);$(8*a.A,a.A*(4+b)+20,a.A,12,l);$(0,a.A*b,3*a.A,3*a.A,c);$(2,a.A*b+2,3*a.A-4,3*a.A-16,d);$(0,a.A*(3+b)-12,3*a.A,12,l);$(0,a.A*(3+b),3*a.A,a.A,c);$(2,a.A*(3+b)+2,3*a.A-4,a.A/2,d);$(0,a.A*(4+b)-12,3*a.A,12,l);$(3*a.A,a.A*(1+b),a.A,3*a.A,c);$(3*a.A+2,a.A*(1+b)+2,a.A-4,3*a.A-16,d);$(3*a.A,a.A*(4+b)-12,a.A,12,l);$(4*a.A,a.A*b,3*a.A,3*a.A,c);$(4*a.A+2,a.A*b+2,3*a.A-4,3*a.A-16,d);$(4*a.A,a.A*(3+b)-12,3*a.A,12,l);$(5*a.A-2,a.A*(1+b)-14,4,16,c);$(5*a.A-2,a.A*(2+b)-14,4,16,c);$(6*a.A-2,a.A*(1+b)-14,4,16,
c);$(6*a.A-2,a.A*(2+b)-14,4,16,c);$(7*a.A,a.A*b,3*a.A,3*a.A,d);$(8*a.A-2,a.A*(1+b)-14,4,16,c);$(8*a.A-2,a.A*(2+b)-2,4,4,c);$(9*a.A-2,a.A*(1+b)-14,4,16,c);$(9*a.A-2,a.A*(2+b)-2,4,4,c);$(7*a.A,a.A*(3+b),3*a.A,a.A,d);$(8*a.A-2,a.A*(4+b)-14,4,14,c);$(8*a.A-2,a.A*(3+b),4,2,c);$(9*a.A-2,a.A*(4+b)-14,4,14,c);$(9*a.A-2,a.A*(3+b),4,2,c);$(0,a.A*(4+b),6*a.A,2*a.A,d);$(a.A-2,a.A*(5+b)-14,4,16,c);$(0,a.A*(4+b),a.A,2,c);$(2*a.A-2,a.A*(4+b),2,a.A,c);$(a.A,a.A*(6+b)-14,a.A,2,c);$(a.A,a.A*(6+b)-12,a.A,12,l);$(0,
a.A*(5+b),2,a.A,c);$(3*a.A-2,a.A*(5+b)-14,4,16,c);$(3*a.A,a.A*(4+b),a.A,2,c);$(2*a.A,a.A*(4+b),2,a.A,c);$(2*a.A,a.A*(6+b)-14,a.A,2,c);$(2*a.A,a.A*(6+b)-12,a.A,12,l);$(4*a.A-2,a.A*(5+b),2,a.A,c);$(5*a.A-2,a.A*(5+b)-14,4,16,c);$(4*a.A,a.A*(5+b)-14,2,16,c);$(6*a.A-2,a.A*(5+b)-14,2,16,c);$(5*a.A-2,a.A*(4+b),4,2,c);$(5*a.A-2,a.A*(6+b)-14,4,14,c);$(6*a.A,a.A*(4+b),2*a.A,a.A,d);$(6*a.A,a.A*(5+b)-14,2,14,c);$(8*a.A-2,a.A*(5+b)-14,2,14,c);$(7*a.A-2,a.A*(4+b),4,2,c);$(6*a.A,a.A*(5+b),a.A,a.A,s);for(e=e=0;8>
e;e++)$(7*a.A+2*e,a.A*(5+b)+2*e,a.A-4*e,a.A-4*e,0==e%2?c:d);for(e=0;2>e;e++)$(8*a.A+2*e,a.A*(5+b)+2*e,a.A-4*e,a.A-4*e,0==e%2?l:d);$(8*a.A+4,a.A*(5+b)+4,a.A-8,a.A-8,r);for(e=2;4>e;e++)$(8*a.A+4*e,a.A*(5+b)+4*e,a.A-8*e,a.A-8*e,0==e%2?d:"#ccc")}
a.Ga=function(){a.Ba.width=a.width;a.Ba.height=a.height;a.Hb=[];a.Jb=50;a.Ib=0;a.sa=10;a.Ta=!0;a.gb=document.createElement("canvas");a.xb=a.gb.getContext("2d");a.gb.width=320;a.gb.height=768;Ya(0,"hsl(91, 29%, 52%)","hsl(91, 37%, 68%)","hsl(91, 40%, 60%)","hsl(91, 63%, 79%)","hsl(91, 23%, 49%)","hsl(91, 53%, 60%)");Ya(6,"hsl(205, 29%, 52%)","hsl(205, 37%, 68%)","hsl(205, 40%, 60%)","hsl(205, 63%, 79%)","hsl(205, 23%, 49%)","hsl(205, 53%, 60%)");Ya(12,"hsl(40, 27%, 48%)","hsl(40, 37%, 68%)","hsl(40, 40%, 60%)",
"hsl(40, 63%, 79%)","hsl(40, 23%, 49%)","hsl(40, 53%, 60%)");Ya(18,"hsl(0, 29%, 52%)","hsl(0, 37%, 68%)","hsl(0, 40%, 60%)","hsl(0, 63%, 79%)","hsl(0, 23%, 49%)","hsl(0, 53%, 60%)");a.la="menu";a.C=new Ha(128,128);a.aa=new a.Ab;a.B=new U("air");a.mode=null;a.ob=a.K[a.C.N].La;a.Ha=20;a.kb="#FFFAB9";a.Ia=20;a.lb="#FFFAB9";a.Qa=".";a.Bb=a.L.arcade.length;a.$a=0;a.Da=0;a.fa=0;a.Ya=0;a.loop()};a.state=[];
a.state.play={update:function(){a.key.ib&&(a.B.pa=!1,a.$a=0,a.Da=0,a.fa=0,a.Ya=0,a.C.N="pistol",a.la="menu");a.key.Ra&&!a.key.Fa&&(a.la="pause",a.key.Fa=!0);0>=a.C.ma&&(a.la="death",a.key.sb=!0);a.B.update();a.$.ia=Math.atan2(a.$.y-8-(a.C.y-a.B.J.y),a.$.x-8-(a.C.x-a.B.J.x));if(a.$.va&&a.ob>a.K[a.C.N].La&&!a.Ta){for(g=0;g<a.K[a.C.N].Pa;g++)a.aa.get(a.C.x+(a.C.size/2-4),a.C.y+(a.C.size/2-4),a.$.ia,a.K[a.C.N].size,a.K[a.C.N].speed,"bullet",!0,null,"#181818"),a.audio.play(a.C.N);a.B.M.y+=h(-1,1);a.B.M.x+=
h(-1,1);a.C.ha.x-=Math.cos(2*Math.PI+a.$.ia)*a.K[a.C.N].ga;a.C.ha.y-=Math.sin(2*Math.PI+a.$.ia)*a.K[a.C.N].ga;a.ob=0}a.C.update();for(g=0;g<a.aa.elements.length;g++)if(!a.aa.elements[g].xa)if(a.aa.elements[g].ra)a.aa.xa(a.aa.elements[g]);else a.aa.elements[g][a.aa.elements[g].type]();a.ob++;a.sa++},oa:function(){a.B.oa();a.C.oa();for(g=0;g<a.aa.elements.length;g++)a.aa.elements[g].xa||a.aa.elements[g].oa();a.D.textAlign="left";a.D.font="normal 14px arial";a.D.fillStyle="rgba(255,255,255,0.3)";a.D.fillRect(0,
0,a.width,32);a.D.fillStyle="#181818";a.D.fillText("Health: "+a.C.ma,16,20);a.D.fillText("Enemies: "+a.B.Oa,112,20);"arcade"===a.mode&&a.D.fillText("Maps: "+(a.Da+1)+"/"+a.Bb,208,20);"survivor"===a.mode&&a.D.fillText("Maps: "+a.Da,208,20)}};
a.state.menu={update:function(){a.$.x<a.width/2&&(a.Ia+=.3*(20-a.Ia),a.Ha+=.3*(30-a.Ha),a.lb="#e3e3e3",a.kb="#ECE894",a.$.va&&(a.mode="arcade",a.la="map",a.C.ma=10));a.$.x>a.width/2&&(a.Ha+=.3*(20-a.Ha),a.Ia+=.3*(30-a.Ia),a.lb="#ECE894",a.kb="#e3e3e3",a.$.va&&(a.mode="survivor",a.la="map",a.C.ma=10))},oa:function(){a.D.fillStyle=a.kb;a.D.fillRect(0,0,a.width/2,a.height);a.D.font="normal "+a.Ha+"px arial";a.D.textAlign="center";a.D.fillStyle="#181818";a.D.fillText("ARCADE",a.width/2/2,a.height/2);
a.D.fillStyle=a.lb;a.D.fillRect(a.width/2,0,a.width/2,a.height);a.D.font="normal "+a.Ia+"px arial";a.D.fillStyle="#181818";a.D.fillText("SURVIVOR",a.width/2+a.width/4,a.height/2);a.D.fillRect(a.width/2-1,0,2,a.height);a.D.font="normal 22px arial";a.D.fillText("ELEMENTAL BLOCK SHOOTERS",a.width/2,64);a.D.font="normal 12px arial";a.D.textAlign="right";a.D.fillText("Made by @EdoardoLopes",a.width-16,a.height-16)}};
a.state.pause={update:function(){a.key.Ra&&!a.key.Fa&&(a.la="play",a.key.Fa=!0)},oa:function(){a.D.fillStyle="#181818";a.D.font="normal 25px arial";a.D.clearRect(0,0,a.width,a.height);a.D.fillText("PAUSE",a.width/2,a.height/2)}};
a.state.death={update:function(){a.key.Ra&&!a.key.Fa&&(a.B.pa=!1,a.la="menu",a.$a=0,a.Da=0,a.fa=0,a.Ya=0,a.C.N="pistol",a.key.Fa=!0)},oa:function(){a.D.textAlign="center";a.D.fillStyle="#181818";a.D.font="normal 20px arial";a.D.clearRect(0,0,a.width,a.height);a.D.fillText("ENEMIES KILLED: "+a.$a,a.width/2,a.height/2-128);0<a.Da&&a.D.fillText("SURVIVED IN "+a.Da+" MAPS",a.width/2,a.height/2-96);a.D.fillText("MODE: "+a.mode.toUpperCase(),a.width/2,a.height/2-64);"arcade"===a.mode&&a.D.fillText("Loop: "+
a.Ya,a.width/2,a.height/2-160);a.D.font="normal 25px arial";a.D.fillText("YOU DIED!",a.width/2,a.height/2);a.D.font="normal 22px arial";a.D.fillText("PRESS ENTER",a.width/2,a.height/2+96)}};
a.state.map={update:function(){!0===a.B.pa&&(a.la="play");!1===a.B.pa&&(0===a.sa%30&&(a.Qa+="."),25<a.Qa.length&&(a.Qa="."));!1===a.B.pa&&"arcade"===a.mode&&Fa(a.B);!1===a.B.pa&&"survivor"===a.mode&&a.B.reset();a.sa++},oa:function(){a.D.textAlign="center";a.D.fillStyle="#181818";a.D.font="normal 22px arial";a.D.clearRect(0,0,a.width,a.height);!1===a.B.pa&&(a.D.fillText("LOADING MAP",a.width/2,a.height/2),a.D.fillText(a.Qa,a.width/2,a.height/2+8));a.D.font="normal 12px arial"}};
a.loop=function(b){a.qb=b-a.tb;a.state[a.la].update();a.state[a.la].oa();a.tb=b-a.qb%1E3/30;requestAnimationFrame(a.loop)};window.addEventListener("load",function(){a.Ga()});</script></body></html>