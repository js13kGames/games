<title>Evil Glitch - js13kGames 2016</title><style>body{background:#000;margin:0;padding:0}canvas{cursor:none;display:none}#c{height:100vh;margin:auto;display:block}#f{font-family:monospace;position:absolute;bottom:10px;left:10px;font-size:21px;color:#993;text-decoration:none}#f:hover{color:#9aa}</style><body allowfullscreen><div id=d><canvas id=c></canvas><canvas id=g moz-opaque></canvas></div><a href=# id=f title=fullscreen>FullScreen</a><script>function cb(e){return 300*(e/=300)*e+360}function Ha(e,a){return Math.atan2(a[1]-e[1],a[0]-e[0])}function Ra(e,a){return Math.sqrt(e*e+a*a)}function Q(e){var a;a=k.VERTEX_SHADER,a=k.createShader(a),k.shaderSource(a,"attribute vec2 p;varying vec2 uv;void main(){gl_Position=vec4(p,.0,1.);uv=.5*(p+1.);}"),k.compileShader(a);var t=a;return a=k.FRAGMENT_SHADER,a=k.createShader(a),k.shaderSource(a,e),k.compileShader(a),e=k.createProgram(),k.attachShader(e,t),k.attachShader(e,a),k.linkProgram(e),k.useProgram(e),t=k.getAttribLocation(e,"p"),k.enableVertexAttribArray(t),k.vertexAttribPointer(t,2,k.FLOAT,!1,0,0),[e]}function ha(e,a){return e[a]||(e[a]=k.getUniformLocation(e[0],a))}function db(){var e=k.createTexture();return k.bindTexture(k.TEXTURE_2D,e),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,k.LINEAR),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.LINEAR),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE),e}function Jb(e){return k.activeTexture(k.TEXTURE0+0),k.bindTexture(k.TEXTURE_2D,e),0}function eb(){var e=k.createFramebuffer();k.bindFramebuffer(k.FRAMEBUFFER,e);var a=db();return k.texImage2D(k.TEXTURE_2D,0,k.RGBA,R,H,0,k.RGBA,k.UNSIGNED_BYTE,null),k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,a,0),[e,a]}function Kb(){this.T=function(e){for(var a=0;24>a;a++)this[String.fromCharCode(97+a)]=e[a]||0;.01>this.c&&(this.c=.01),.18>(e=this.b+this.c+this.e)&&(e=.18/e,this.b*=e,this.c*=e,this.e*=e)}}function Lb(e,a,t){Sa.G.T(e);var r=Sa.V();e=new Uint8Array(4*((r+1)/2|0)+44);r=2*Sa.U(new Uint16Array(e.buffer,44),r);var i=new Uint32Array(e.buffer,0,44);for(i[0]=1179011410,i[1]=r+36,i[2]=1163280727,i[3]=544501094,i[4]=16,i[5]=65537,i[6]=44100,i[7]=88200,i[8]=1048578,i[9]=1635017060,i[10]=r,r+=44,i=0;i<r;i+=3);a&&a.decodeAudioData(e.buffer,t)}function la(e){e=e.split(Mb),this.frequency=la.M(e[0])||0,this.duration=la.L(e[1])||0}function A(e,a,t){this.C=e||new Ia,this.J(),this.D=a||120,this.loop=!0,this.F=this.I=0,this.B=[],this.push.apply(this,t||[])}function I(a,t,r,i){e.moveTo(a,t),e.lineTo(a+r,t+i)}function fb(a,t,r,i,o,n){for(e.save(),e.beginPath(),p(o),o=0;o<a.length;o++){var s=Nb["0123456789?abcdefghijklmnopqrstuvwxyz .-'/".indexOf(a[o])],c=D[0]+t-(i+n)*(a.length-o),f=D[1]+r,l=i,b=l-4,u=l/2-4;1&s&&I(c+2,f-1,b,0),2&s&&I(l+c+1,f,0,l-1),4&s&&I(l+c+1,l+f+1,0,l-1),8&s&&I(c+2,2*l+f+1,b,0),16&s&&I(c-1,f+l+1,0,l-1),32&s&&I(c-1,f,0,l-1),64&s&&I(c+2,l+f,u,0),128&s&&I(c+2,f+2,u,b),256&s&&I(l/2+c,f+2,0,b),512&s&&I(l+c-2,f+2,-u,b),1024&s&&I(l/2+c+2,l+f,u,0),2048&s&&I(l/2+c+2,l+f+2,u,b),4096&s&&I(l/2+c,l+f+2,0,b),8192&s&&I(c+2,2*l+f-2,u,4-l)}e.closePath(),e.stroke(),e.restore()}function C(e,a,t,r,i,o){var n;n=n||i.length,o=o||0;for(var s=25>r?10:.5*r,c=0;c<n;c++)Ob[o](e,a+c,t+c,r,i[c]||i[0],s)}function gb(e){return Math.round(e[0]/84)+"-"+Math.round(e[1]/84)}function Ta(e){for(var a,t={},r=0;9>r;r++)if(!t[a=gb([e[0]+84*(r%3-1),e[1]+84*(~~(r/3)-1)])])for(t[a]=1,a=ia[a],r=0;a&&r<a.length;r++)if(Ra(e[1]-a[r][1],e[0]-a[r][0])<a[r][2]+e[2])return a[r]}function p(a,t,r){e[["strokeStyle","fillStyle","lineWidth"][t||0]]=r||hb[a]}function ma(e,a,t,r,i){k.bindFramebuffer(k.FRAMEBUFFER,e[0]),k.useProgram(t[0]),k.uniform1i(ha(t,"tex"),Jb(a)),null!=r&&k.uniform1f(ha(t,"time"),r),i&&k.uniform3fv(ha(t,"colors"),i),k.drawArrays(k.TRIANGLES,0,6)}function ib(e,a){for(var t=[],r=0;r<a;r++){var i=e.slice();i[5]=.05*(r-a/2)+e[5],t.push(S(i))}return t}function jb(){ia={},ea=!1,ja=0,T=[],Ua=.3,l=[(800-(v=(Z=21)*(n=40)))/2,(600-v)/2,370,270],F=[],f=[10.5*n,10.5*n,16,0,150,0,0,12,0,0],ya=[[0,1,0,-1],[-1,1,.5,1]],U=[],oa=[],Va="",kb=Math.PI/2,aa=J=0,wave=1,E=[0,0,0,0,0,0,0,0],ra={500:[1,K],2500:[0,10,5,10],8999:[5,"what are you doing?"],10500:[1,z],10800:[8,2],11e3:[0,5,5,10],18e3:[0,15,15,10],18001:[5,""],25e3:[0,15,5,10],31e3:[0,5,15,10],37e3:[0,10,11,11],37500:[1,fa],46e3:[5,"are you trying to stop us?"],48500:[2,10,0,0,0,10,10,10],49e3:[2,10,10,10,15,10,20,10],49001:[4,z,1],49002:[4,fa,1],49003:[4,K,1],49500:[8,3],50004:[2,60,60,68,55,50,45,60],51e3:[4,z,138],51001:[4,fa,138],51002:[4,K,138],51003:[5,"we are perfection"],52e3:[0,4,10,11],53e3:[0,14,10,10],55550:[5,""],61e3:[0,10,16,11],61003:[5,"we are creation"],66550:[5,""],67e3:[0,16,10,11],68e3:[0,6,10,10],72e3:[0,10,4,11],80501:[2,1e3,0,0,0,0,0,10],83e3:[0,10,9,12],83500:[1,L],95050:[5,"you must stop this"],99950:[5,"is inevitable!"],99980:[8,4],1e5:[0,10,1,12],103050:[5,""],106e3:[0,1,10,12],111e3:[0,19,10,12],116e3:[0,10,19,12],14e4:[8,5],140001:[5,"can't you understand?"],141600:[0,10,12,10],141601:[0,12,13,10],141602:[0,12,15,10],141603:[0,10,16,10],141604:[0,8,15,10],141605:[0,8,13,10],145050:[5,""],156800:[6,"stop"],156900:[6,"now"],157e3:[0,10,14,13],18e4:[6,"you"],180100:[6,"are"],180200:[6,"the"],180300:[6,"glitch"],181e3:[8,6],182e3:[7,fa],182050:[7,L],182100:[7,z],182150:[7,K],185100:[2,300,0,300,0,0,0,0],187e3:[0,10,10,14],189e3:[1,fa],189001:[1,L],189002:[1,z],189003:[1,K],300100:[1,K],305e3:[0,10,5,10],308e3:[1,z],31e4:[0,10,6,11],311e3:[1,K],315e3:[0,14,6,10],317e3:[0,14,14,10],319e3:[0,6,14,10],32e4:[0,6,6,10],335e3:[0,11,11,12],336e3:[0,9,11,12],337e3:[0,11,9,12],338e3:[0,9,9,12],35e4:[0,19,19,11],352e3:[0,1,19,11],354e3:[0,1,1,11],355e3:[0,19,1,11],365e3:[0,10,8,10],366e3:[0,11,9,10],367e3:[0,12,10,10],368e3:[0,11,11,10],369e3:[0,10,12,10],37e4:[0,9,11,10],371e3:[0,8,10,10],372e3:[0,9,9,10],395e3:[0,1,1,12],395001:[0,1,19,12],395002:[0,19,19,12],395003:[0,20,1,12],395004:[0,10,10,12],425e3:[0,0,10,13],425001:[0,20,10,13],570001:[0,10,10,13]},Wa=void 0;for(var e=0;e<Z;e++){T.push([]);for(var a=0;a<Z;a++)T[e].push([])}for(e=0;e<Z-1;e++)10!=e&&(ra[45e4+6e3*e]=[0,e,e,10],ra[453e3+6e3*e]=[0,Z-e-1,e,10]);for(V=Object.keys(ra).map((function(e){return parseInt(e)})),fa.stop(),L.stop(),z.stop(),K.stop(),record=parseFloat(Ja.getItem("agar3sjs13k-record")||0),e=0;W&&e<W.length;e++)W[e][3]=!1;Ka=!1,lb(),mb()}function mb(){if(za&&(ya=[[0,-.5,-.25,-1,-.5,-.4,-.5,-.25,0,.25,.5,.4,.5,1,.25,.5],[-.25,0,-1,.25,.75,.5,.25,.2,.8,.2,.25,.5,.75,.25,-1,0]],f[4]=160,f[2]=20,f[7]=22),nb){J=3e5,wave=7;for(var e=V.length-1;0<=e;e--)3e5>V[e]&&V.splice(e,1)}}function M(a,t,r,i,o){e.moveTo(a,t),e.lineTo(a+(i?o:r),t+(i?r:o))}function Xa(e,a){M(e,0,a,!0,0),M(0,e,a,void 0,0)}function ob(){N=.01}function Aa(e,a){E[6]=30,Ya=a||30,aa=10,sa=e}function pb(){return"I reached "+J.toFixed()+" "+(za?"#evilMode ":"")+"points in #evilGlitch #js13k #js13kgames by @agar3s "}function w(e,a){return Math.random()*(e||1)+(a||0)}function lb(){var e=w(10,5);E=[e,e,e,w(10,5),w(10,5),w(10,5),0]}function La(e,a,t,r){14==r[2]&&(t*=2,O(Pb)),ta.push([e,a,t,t,r])}function qb(e,a){var t=ua([e[0]+10*Math.cos(Math.PI*a/3),e[1]+10*Math.sin(Math.PI*a/3),4]);t[13]=e,t[9]=Ha(t,e),t[3]=t[9]+e[11],t[15]=0,t[16]=0,F.push(t)}function ua(e){if(12==(e=e.slice(0,2).concat(Ma[e[2]].slice(0)))[5]||14==e[5])for(var a=0;6>a;a++)qb(e,a);return e}function Qb(e){if(.99<e)return 1;var a=1/e;return 100*e%a>a/2?1:0}function Ba(e,a){return e?w(2*a,-a):0}function Za(a,t,r){e.moveTo(a[0]*r,t[0]*r);for(var i=1;i<a.length;i++)e.lineTo(a[i]*r,t[i]*r);e.lineTo(a[0]*r,t[0]*r)}function $a(e,a,t,r,i,o){for(var n=-r;n<r;n++)oa.push([e,a,w(kb*n,t),i||60,o])}function rb(a){if(Na||(Na=a),dt=Math.min(100,a-Na)/1e3,Na=a,ja++,Ca)30<++Da&&(Da=0);else if(Ea){switch(ka){case 90:Aa("what",30);break;case 120:Aa("have",30);break;case 150:Aa("you",30);break;case 180:Aa("done?",120);break;case 185:E=[100,100,100,0,0,0,0];break;case 215:E=[100,100,100,100,100,100,100],fa.stop(),L.stop(),L.D=1,L.play(),z.stop(),z.D=1,z.play(),K.stop();break;case 320:L.stop(),z.stop(),L.D=138,z.D=138,sa="";break;case 434:ba=0}435<ka&&1694>ka&&(sa=Rb[~~((ka-435)/180)]),1694<ka&&(Ea=!1,J=3e5,wave=7,F=[],U=[],za=!0,Ja.setItem("agar3sjs13k-gm","qyui"),mb()),ka++}else if(0>E[6]){if(a=dt,!ea){t=a*f[4]*(0<f[8]?Ua:1);var r=a*f[4]*(0<f[8]?1.4:1);T[Math.round(f[1]/n)]&&1==T[Math.round(f[1]/n)][Math.round(f[0]/n)]&&(r-=.5),ca&da[65]&&(f[0]-=r,f[0]<f[2]&&(f[0]=f[2]),f[0]>l[2]&&f[0]<v-l[2]&&(l[0]+=r),32<l[0]&&(l[0]=32)),ca&da[87]&&(f[1]-=r,f[1]<f[2]&&(f[1]=f[2]),f[1]>l[3]&&f[1]<v-l[3]&&(l[1]+=r),27<l[1]&&(l[1]=27)),ca&da[83]&&(f[1]+=r,f[1]>v-f[2]&&(f[1]=v-f[2]),f[1]>l[3]&&f[1]<v-l[3]&&(l[1]-=r),-272>l[1]&&(l[1]=-272)),ca&da[68]&&(f[0]+=r,f[0]>v-f[2]&&(f[0]=v-f[2]),f[0]>l[2]&&f[0]<v-l[2]&&(l[0]-=r),-67>l[0]&&(l[0]=-67)),f[3]=Ha([f[0]+l[0],f[1]+l[1]],B),f[5]+=25*t*(8*B[2]+1),f[5]%=360,Ta(f)&&(O(Sb),$a(f[0],f[1],f[2],10,80,6),ya=[[],[]],ea=!0,fa.stop(),L.stop(),z.stop(),K.stop(),W[0][3]=!0,t=30*dt,(Ka=J>record)&&(record=J,Ja.setItem("agar3sjs13k-record",J),W[1][3]=!0,W[2][3]=!0),ja=0),B[2]&&0>=f[6]&&0>=f[8]?(U.push([f[0]+Ba(1,2+f[7]/30),f[1]+Ba(1,2+f[7]/30),2,f[3]+Ba(1,.05+.001*f[7])]),O(sb[~~w(sb.length)]),f[6]=1/f[7]):f[6]-=a,B[3]&&0>=f[8]&&0>=f[9]?(O(tb),f[8]=.55,f[9]=1.2):(f[8]-=a,f[9]-=a)}for(a=U.length-1;0<=a;a--){(r=U[a])[0]+=Math.cos(r[3])*t*r[2],r[1]+=Math.sin(r[3])*t*r[2],(-20>r[0]||r[0]>v+20||-20>r[1]||r[1]>v+20)&&U.splice(a,1),(i=Ta(r))&&(0<--i[6]&&$a(r[0],r[1],-r[3],2,10,9),U.splice(a,1),i[4]=200,9<i[5]&&O(ub[~~w(ub.length)]))}for(a=0;a<oa.length;a++)(r=oa[a])[0]+=Math.cos(r[2])*w(3,2),r[1]+=Math.sin(r[2])*w(3,2),0>--r[3]&&oa.splice(a,1);for(0<ba&&(ba-=.1),ia={},a=F.length-1;0<=a;a--)e:if(r=F[a],i=a,0>=r[6]){if(F.splice(i,1),5!=r[5])if(14==r[5]&&(Ea=!0),$a(r[0],r[1],r[2],Ma[r[5]][0],2*Ma[r[5]][0],r[5]+24),9<r[5]){for(var i=r[0],o=r[1],s=(r=r[10],~~(i/n)),c=~~(o/n),b=Math.ceil(r/n),u=c-b;u<c+b;u++)if(void 0!==T[u])for(var h=s-b;h<s+b;h++)(1==T[u][h]||Ra((u+.5)*n-o,(h+.5)*n-i)<=r)&&(T[u][h]=0);ba=4,O(Tb)}else O(Ub)}else{if(0<r[4]&&(r[4]-=50),10>r[5]){if(0<r[10]*(r[9]-r[3])&&(r[3]=2==r[5]?Ha(r,Wa||[0,0]):4==r[5]?r[3]+(r[9]+r[11]):Ha(r,f),r[10]=r[3]>r[9]?r[11]:-r[11]),o=Ta(r),r[9]=4==r[5]?r[9]+r[10]*t:3!=r[5]||o&&3==o[5]?r[9]+(o?-1:1)*r[10]:r[9]+r[10],5==r[5]&&(r[6]-=t/10),5<r[5]&&10>r[5]&&(r[13]-=dt,0>r[13])){La((r=[(.5+~~(r[0]/n))*n,(.5+~~(r[1]/n))*n,r[5]+4])[0],r[1],1,r),F.splice(i,1);break e}4!=r[5]?(r[0]+=Math.cos(r[9])*t*r[12],r[1]+=Math.sin(r[9])*t*r[12]):(1>r[13][6]&&(r[10]*=.99),r[15]=2*n*(1.2-Math.cos(r[16])),r[16]+=t/200,r[0]=r[13][0]+Math.cos(r[9])*r[15],r[1]=r[13][1]+Math.sin(r[9])*r[15])}else for(r[9]-=t,12<=r[5]&&(r[3]+=r[12]*t),0>r[9]&&!ea&&Vb[r[5]](r),r[10]+=dt*r[11],i=r[0],o=r[1],s=r[10],c=~~(i/n),h=(b=~~(o/n))-(u=Math.ceil(s/n));h<b+u;h++)if(void 0!==T[h])for(var m=c-u;m<c+u;m++)1==T[h][m]||Ra((h+.5)*n-o,(m+.5)*n-i)>=s||(T[h][m]=1);i=gb(r),ia[i]=ia[i]||[],ia[i].push(r)}if(0<V.length&&J>V[0])switch(a=ra[V.splice(0,1)[0]],a.splice(0,1)[0]){case 0:a[0]=(a[0]+.5)*n,a[1]=(a[1]+.5)*n,La(a[0],a[1],1,a);break;case 1:a[0].play();break;case 2:E=a;break;case 3:O(a[0]);break;case 4:a[0].D=a[1],138==a[1]&&(a[0].stop(),a[0].play());break;case 5:Va=a[0];break;case 6:Aa(a[0]);break;case 7:a[0].stop();break;case 8:wave=a[0]}else 0==V.length&&(ab++>=vb.length&&(ab=0),ra[J+5e3]=[0,~~w(21),~~w(21),vb[ab]],V.push(J+5e3));for(a=0;a<ta.length;a++)(r=ta[a])[2]-=dt,0>r[2]&&(F.push(ua(r[4])),9<r[4][2]&&(aa=10,O(Wb)),3==r[4][2]&&(Wa=F[F.length-1]),ta.splice(a,1))}if(Ca||ea)switch(ja){case 240:case 280:case 500:lb(),O(Xb);break;case 700:ja=0}for(a=0;a<W.length;a++)!(r=W[a])[3]||B[0]<r[0]||B[0]>r[0]+r[2]||B[1]<r[1]||B[1]>r[1]+42?r[6]=r[7]=!1:(r[7]=!0,1==B[2]?r[6]=!0:0==B[2]&&r[6]&&(r[6]=!1,r[8]()));if(e.save(),Ca){for(e.save(),e.beginPath(),p(23,1),e.fillRect(0,0,800,600),p(0),e.beginPath(),a=0;10>a;a++)r=cb(30*a+Da),p(1),M(0,r+.5,800,void 0,0);for(e.stroke(),e.beginPath(),a=0;10>a;a++)r=cb(30*a+Da),p(2),M(0,600-r-.5,800,void 0,0);for(e.stroke(),p(2),e.beginPath(),M(0,240,800,void 0,0),M(400,240,-240,!0,0),e.stroke(),p(1),e.beginPath(),M(0,360,800,void 0,0),M(400,360,240,!0,0),e.stroke(),e.beginPath(),a=1;a<800/60;a++)r=a*a*5+25,p(2),M(30*a+400,240,-240,!0,r),M(30*-a+400,240,-240,!0,-r);for(e.stroke(),e.beginPath(),a=1;a<800/60;a++)r=a*a*5+25,p(1),M(30*a+400,360,240,!0,r),M(30*-a+400,360,240,!0,-r);e.stroke(),va?(C("controls",400,130,12,[0,16]),C("move             awsd",400,251,12,[0,0]),C("fire       left click",400,290,12,[0,0]),C("warptime  right click",400,330,12,[0,0])):(C("winners don't use drugs",401,50,9,[0,0]),C("evil glitch",400,270-50*N,30*(1+N),[0,9,0,9])),C("made by agar3s",401,520,9,[0,10]),e.closePath(),e.fill(),e.stroke(),e.restore()}else if(!Oa){for(p(7,1),e.fillRect(0,0,800,600),p(-1,1,"rgba("+~~w(180,0)+","+~~w(185,0)+","+~~w(185,0)+","+w(0,1)+")"),a=0;6>a;a++)e.fillRect(~~w(800),~~w(600),2,2);for(e.save(),e.beginPath(),D=ea?[0,0]:[Ba(B[2]||0<ba,ba+2),Ba(B[2]||0<ba,ba+2)],p(-1,1,"rgba(7,8,12,"+(.2-(0<f[8]?.1:0))+")"),e.translate(l[0]+D[0],l[1]+D[1]),e.fillRect(0,0,v,v),p(1),e.beginPath(),a=0;a<=Z;a++)Xa(a*n-.5,v);for(e.stroke(),e.beginPath(),p(5),a=0;a<=Z;a++)Xa(a*n+.5,v);for(e.stroke(),e.restore(),e.save(),e.beginPath(),p(8,1),p(2),r=0;r<Z;r++)for(a=0;a<Z;a++)0!=T[r][a]&&(e.fillRect(a*n+l[0]+D[0],r*n+l[1]+D[1],n,n),e.strokeRect(a*n+l[0]+D[0]-.5,r*n+l[1]+D[1]-.5,n+2,n+2));for(e.stroke(),e.beginPath(),p(2),r=0;r<Z;r++)for(a=0;a<Z;a++)0!=T[r][a]&&e.strokeRect(a*n+l[0]+D[0]+.5,r*n+l[1]+D[1]+.5,n,n);for(e.fill(),e.closePath(),e.restore(),e.save(),e.beginPath(),a=0;a<ta.length;a++)o=(s=ta[a])[4][2],r=Ma[o][0],i=s[2],i=1*(i/=s[3])*(i-2)+1,c=s[0]+l[0]+D[0],s=s[1]+l[1]+D[1],14==o?(o=c,e.translate(o,s),e.beginPath(),p(-1,1,"rgba(210,0,0,0.9)"),e.arc(0,0,v*(1-i),0,2*Math.PI),e.stroke(),e.fill(),e.beginPath(),p(0),.3>i?(e.moveTo(-r*i/.3,0),e.lineTo(r*i/.3,0)):(p(0,1),e.bezierCurveTo(-r,0,0,-r*i/3.5,r,0),e.bezierCurveTo(r,0,0,r*i/3.5,-r,0),e.fill()),e.closePath(),e.translate(-o,-s)):(p(-1,0,"rgba(38,82,255,"+i+")"),e.fillRect(c-i*r,s-i*r,i*r*2,i*r*2));for(e.closePath(),e.fill(),e.stroke(),e.restore(),e.save(),e.translate(f[0]+l[0],f[1]+l[1]),e.rotate(f[3]+Math.PI/2),p(-1,2,2),p(6),e.beginPath(),Za(ya[0],ya[1],f[2]),e.closePath(),e.stroke(),e.restore(),e.save(),a=0;a<F.length;a++)if(!(20>(o=F[a])[0]+l[0]||o[0]+l[0]>R-20||20>o[1]+l[1]||o[1]+l[1]>H-20)){if(r=o[0]+l[0]+D[0]+(.5<w()?1:-1)*o[4]/40,i=o[1]+l[1]+D[1]+(.5<w()?1:-1)*o[4]/40-(9<o[5]?5*Math.sin(ja/50%(2*Math.PI))+5:0),e.translate(r,i),e.beginPath(),10>o[5])p(o[5]+24),p(-1,2,2),e.rotate(o[9]),Za(o[7],o[8],o[2]),e.rotate(-o[9]);else if(14==o[5]){for(s="hsla("+20*o[3]+",50%,60%, 0.5)",p(-1,2,2),e.beginPath(),p(-1,0,0<o[4]?hb[3]:s),s=o[2]/3.5,e.arc(0,0,s/2,0,2*Math.PI,!1),e.stroke(),e.beginPath(),e.bezierCurveTo(-s,0,0,-s,s,0),e.bezierCurveTo(s,0,0,s,-s,0),e.stroke(),e.rotate(o[3]),c=0;6>c;c++)b=ga[2*c],u=ga[2*c+1],e.beginPath(),e.arc(4*b*s,4*u*s,s,0,2*Math.PI,!1),e.stroke(),e.beginPath(),e.arc(2*b*s,2*u*s,s,0,2*Math.PI,!1),e.stroke(),e.beginPath(),e.moveTo(b*s*4,u*s*4),e.lineTo(4*s*ga[(2*c+2)%12],4*s*ga[(2*c+3)%12]),e.lineTo(4*s*ga[(2*c+6)%12],4*s*ga[(2*c+7)%12]),e.moveTo(b*s*2,u*s*2),e.lineTo(2*s*ga[(2*c+2)%12],2*s*ga[(2*c+3)%12]),e.lineTo(2*s*ga[(2*c+6)%12],2*s*ga[(2*c+7)%12]),e.stroke();e.beginPath(),e.rotate(-o[3])}else for(p(-1,2,2),s=(Fa[o[5]]-o[9])/Fa[o[5]],s=0<o[4]?-55:~~(200*s)*wb[s.toFixed(4)],p(16),c=0;c<o[7].length;c++)b=o[7][c],u=o[8][c],h=o[2],m=[80+o[4],55+s,130+~~(s/2),0<o[4]?.9:.2],e.beginPath(),p(-1,1,"rgba("+m+")"),Za(b,u,h),e.closePath(),e.fill(),e.stroke();e.closePath(),e.stroke(),e.translate(-r,-i)}for(e.closePath(),e.restore(),e.save(),p(9,1),a=0;a<U.length;a++)20>(r=U[a])[0]+l[0]||r[0]+l[0]>R-20||20>r[1]+l[1]||r[1]+l[1]>H-20||(e.beginPath(),e.arc(r[0]+l[0],r[1]+l[1],r[2],0,2*Math.PI,!1),e.closePath(),e.fill());for(e.restore(),e.save(),a=0;a<oa.length;a++)5>(r=oa[a])[0]+l[0]||r[0]+l[0]>R-5||5>r[1]+l[1]||r[1]+l[1]>H-5||(e.beginPath(),p(r[4],1),e.arc(r[0]+l[0]+D[0],r[1]+l[1]+D[1],2,0,2*Math.PI,!1),e.closePath(),e.fill());e.restore(),e.save(),C(Va,401,501,14,[26,21,21]),ea?(p(22,1),e.fillRect(0,0,v,v),za&&C("evil mode",400,80,22,[0,16]),Ka?(C("-new record-",400,240,22,[10,18]),C("-share it-",400,400,14,[24,18])):C("game over",400,240,20,[0,13]),C(J.toFixed(0),400,160,Ka?20:16,[0,9])):(C(6<wave?"evil":wave+"/6",400,60,9,[0,3]),C(J.toFixed(0),750,60,18,[32,9],1),C(J>record?"record":record.toFixed(0),750,110,9,[24,3],1)),e.restore()}for(Oa||Ea||(e.save(),e.beginPath(),p(-1,2,2),e.translate(B[0],B[1]),p(6),e.translate(-10,-10),Xa(10,20),e.stroke(),e.closePath(),e.restore()),e.save(),a=0;a<W.length;a++)(r=W[a])[3]&&(p(i=r[7]?14:r[4]),p(-1,2,2),e.strokeRect(r[0],r[1],r[2],42),C(r[5],r[0]+r[2]/2,r[1]+9,12,[0,i]));for(e.restore(),Oa?(e.save(),e.beginPath(),p(2,1),e.fillRect(0,0,800,600),C(sa,430,180,5>sa.length?120:70,[20,20,20,20,20,20,20,20,20,20,20,20]),e.closePath(),e.fill(),e.restore()):!Ea||300>ka||(a=[0,0,0,0],e.save(),e.beginPath(),436>ka?(p(-1,1,"rgba(0,0,0,"+(1-(436-ka)/120)+")"),e.fillRect(0,0,800,600)):(p(23,1),e.fillRect(0,0,800,600),C(sa,400,250,16,a)),e.closePath(),e.fill(),e.restore()),0<N&&(.51==(N+=.05)&&O(Yb)),1<N&&(Ca=!1,N=0,jb()),0<N&&1>N&&(p(-1,1,"rgba(220,220,220,"+N+")"),e.fillRect(0,0,800,600)),(Oa=0<Ya)&&--Ya,e.restore(),a=g,k.bindTexture(k.TEXTURE_2D,xb),k.texImage2D(k.TEXTURE_2D,0,k.RGBA,k.RGBA,k.UNSIGNED_BYTE,a),aa--,a=0;a<E.length;a++)E[a]--;ma(pa,xb,yb,ja/60%180,[0<aa+1||0<E[0]?1:0,0<aa+2||0<E[1]?1:0,0<aa||0<E[2]?1:0]),ma(wa,pa[1],zb,0<aa||0<E[3]?15:0),ma(pa,wa[1],Ab,0<aa+1||0<E[4]?1:0),ma(wa,pa[1],Bb,0<E[7]&&0==ja%3?0:1),ma(pa,wa[1],Cb,0<aa||0<E[5]?9:1),ma(wa,pa[1],Db,ja),ma(pa,wa[1],Eb),k.bindFramebuffer(k.FRAMEBUFFER,null),k.drawArrays(k.TRIANGLES,0,6),k.flush(),ea||Ca||(J+=1e3*dt*(0<f[8]?Ua:1)),requestAnimationFrame(rb)}var xa,Pa,S,O,Sa=new function(){var e,a,t,r,i,o,n,s,c,f,l,b;this.G=new Kb,this.r=function(){var e=this.G;r=100/(e.f*e.f+.001),i=100/(e.g*e.g+.001),o=1-e.h*e.h*e.h*.01,n=-e.i*e.i*e.i*1e-6,e.a||(l=.5-e.n/2,b=5e-5*-e.o),s=1+e.l*e.l*(0<e.l?-.9:10),c=0,f=1==e.m?0:(1-e.m)*(1-e.m)*2e4+32},this.V=function(){this.r();var r=this.G;return e=r.b*r.b*1e5,a=r.c*r.c*1e5,t=r.e*r.e*1e5+12,3*((e+a+t)/3|0)},this.U=function(u,h){var v=1!=(z=this.G).s||z.v,g=z.v*z.v*.1,m=1+3e-4*z.w,p=z.s*z.s*z.s*.1,d=1+1e-4*z.t,k=1!=z.s,x=z.x*z.x,D=z.g,y=z.q||z.r,F=z.r*z.r*z.r*.2,E=z.q*z.q*(0>z.q?-1020:1020),A=z.p?32+((1-z.p)*(1-z.p)*2e4|0):0,T=z.d,P=z.j/2,R=z.k*z.k*.01,M=z.a,C=e,B=1/e,I=1/a,U=1/t;.8<(z=5/(1+z.u*z.u*20)*(.01+p))&&(z=.8);for(var S,G,_,L,O,z=1-z,N=!1,H=0,q=0,W=0,j=0,J=0,K=0,X=0,V=0,Z=0,Q=0,Y=Array(1024),$=Array(32),ee=Y.length;ee--;)Y[ee]=0;for(ee=$.length;ee--;)$[ee]=w(2,-1);for(ee=0;ee<h;ee++){if(N)return ee;if(A&&++Z>=A&&(Z=0,this.r()),f&&++c>=f&&(f=0,r*=s),(r*=o+=n)>i&&(r=i,0<D&&(N=!0)),G=r,0<P&&(Q+=R,G*=1+Math.sin(Q)*P),8>(G|=0)&&(G=8),M||(0>(l+=b)?l=0:.5<l&&(l=.5)),++q>C)switch(q=0,++H){case 1:C=a;break;case 2:C=t}switch(H){case 0:W=q*B;break;case 1:W=1+2*(1-q*I)*T;break;case 2:W=1-q*U;break;case 3:W=0,N=!0}y&&(0>(_=0|(E+=F))?_=-_:1023<_&&(_=1023)),v&&m&&(1e-5>(g*=m)?g=1e-5:.1<g&&(g=.1)),O=0;for(var ae=8;ae--;){if(++X>=G&&(X%=G,3==M))for(S=$.length;S--;)$[S]=w(2,-1);switch(M){case 0:L=X/G<l?.5:-.5;break;case 1:L=1-X/G*2;break;case 2:L=.225*((0>(L=1.27323954*(L=6.28318531*(.5<(L=X/G)?L-1:L))+.405284735*L*L*(0>L?1:-1))?-1:1)*L*L-L)+L;break;case 3:L=$[Math.abs(32*X/G|0)]}v&&(S=K,0>(p*=d)?p=0:.1<p&&(p=.1),k?(J+=(L-K)*p,J*=z):(K=L,J=0),j+=(K+=J)-S,L=j*=1-g),y&&(Y[V%1024]=L,L+=Y[(V-_+1024)%1024],V++),O+=L}O*=.125*W*x,u[ee]=1<=O?32767:-1>=O?-32768:32767*O|0}return h}},Ia=window.AudioContext||window.webkitAudioContext;if(Ia){xa=new Ia,Pa=xa.createDynamicsCompressor();var bb=xa.createGain();bb.gain.value=window.chrome?.2:.4,Pa.connect(bb),bb.connect(xa.destination),S=function(e){var a=[];return Lb(e,xa,(function(e){a.push(e)})),a},O=function(e){if(e[0]){var a=xa.createBufferSource();a.context.sampleRate+=~~w(500),a.buffer=e[0],a.start(0),a.connect(Pa),setTimeout((function(){a.disconnect(Pa)}),1e3*e[0].duration+300)}}}else S=O=function(){};var Zb=440*Math.pow(Math.pow(2,1/12),-9),$b=/^[0-9.]+$/,Mb=/\s+/,ac=/(\d+)/,Fb={};"B#-C C#-Db D D#-Eb E-Fb E#-F F#-Gb G G#-Ab A A#-Bb B-Cb".split(" ").forEach((function(e,a){e.split("-").forEach((function(e){Fb[e]=a}))})),la.M=function(e){return e=e.split(ac),Zb*Math.pow(Math.pow(2,1/12),Fb[e[0]])*Math.pow(2,(e[1]||4)-4)},la.L=function(e){return $b.test(e)?parseFloat(e):e.toLowerCase().split("").reduce((function(e,a){return e+("w"===a?4:"h"===a?2:"q"===a?1:"e"===a?.5:"s"===a?.25:0)}),0)},A.prototype.J=function(){var e=this.gain=this.C.createGain();[["bass",100],["mid",1e3],["treble",2500]].forEach(function(a,t){(t=this[a[0]]=this.C.createBiquadFilter()).type="peaking",t.frequency.value=a[1],e.connect(e=t)}.bind(this)),e.connect(this.C.destination)},A.prototype.push=function(){return Array.prototype.forEach.call(arguments,function(e){this.B.push(e instanceof la?e:new la(e))}.bind(this)),this},A.prototype.createOscillator=function(){return this.stop(),this.A=this.C.createOscillator(),this.K?this.A.setPeriodicWave(this.C.createPeriodicWave.apply(this.C,this.K)):this.A.type=this.W||"square",this.A.connect(this.gain),this},A.prototype.R=function(e,a){var t=60/this.D*this.B[e].duration,r=t*(1-(this.F||0));return this.H(this.B[e].frequency,a),this.I&&this.B[e].frequency&&this.S(e,a,r),this.H(0,a+r),a+t},A.prototype.N=function(e){return this.B[e<this.B.length-1?e+1:0]},A.prototype.O=function(e){return e-Math.min(e,60/this.D*this.I)},A.prototype.S=function(e,a,t){var r=this.N(e);this.H(this.B[e].frequency,a+this.O(t)),this.P(r.frequency,a+t)},A.prototype.H=function(e,a){this.A.frequency.setValueAtTime(e,a)},A.prototype.P=function(e,a){this.A.frequency.linearRampToValueAtTime(e,a)},A.prototype.play=function(e){return e="number"==typeof e?e:this.C.currentTime,this.createOscillator(),this.A.start(e),this.B.forEach(function(a,t){e=this.R(t,e)}.bind(this)),this.A.stop(e),this.A.onended=this.loop?this.play.bind(this,e):null,this},A.prototype.stop=function(){return this.A&&(this.A.onended=null,this.A.disconnect(),this.A=null),this};var Nb=[8767,518,1115,1039,1126,1133,1149,7,1151,1135,5123,1143,5391,57,4367,121,113,1085,1142,4361,30,2672,56,694,2230,63,1139,2111,3187,1133,4353,62,8752,10294,10880,4736,8713,0,16,1088,256,8704],Ob=[function(e,a,t,r,i,o){fb(e,a+=(r+o)*e.length/2,t,r,i,o)},fb],ia={},Gb={preserveDrawingBuffer:!0},k=c.getContext("webgl",Gb)||c.getContext("experimental-webgl",Gb),e=g.getContext("2d"),R=800,H=600,Ja=localStorage,D=[0,0],aa=0,ja=0,E=[0,0,0,0,0,0,0],za=!1,Hb=!!Ja.getItem("agar3sjs13k-gm"),nb=!1;d.style.webkitTransformOrigin=d.style.transformOrigin="0 0",g.width=c.width=R,g.height=c.height=H,c.style.top="0px",c.style.left="0px",document.oncontextmenu=function(e){e.preventDefault()},k.viewport(0,0,R,H),k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,!0);var bc=k.createBuffer();k.bindBuffer(k.ARRAY_BUFFER,bc),k.bufferData(k.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),k.STATIC_DRAW);var Db=Q("precision highp float;uniform vec2 dim;uniform sampler2D tex;varying vec2 uv;uniform float time;uniform vec3 colors;void main(){vec2 a=uv*dim;vec4 b=texture2D(tex,uv);vec4 c=vec4(.0);float d=.02*sin(time)+.3;float e=.03;vec4 f=texture2D(tex,uv+vec2((-15./dim.x)*d,0));for(int g=0;g<9;g++){float h=float(mod(float(g),4.));float i=float(g/3);vec2 j=vec2(a.x+h,a.y+i);vec2 k=vec2(a.x-h,a.y+i);vec2 l=vec2(a.x+h,a.y-i);vec2 m=vec2(a.x-h,a.y-i);c+=texture2D(tex,j/dim)*e;c+=texture2D(tex,k/dim)*e;c+=texture2D(tex,l/dim)*e;c+=texture2D(tex,m/dim)*e;}b+=c;vec4 n=texture2D(tex,uv+vec2((8./dim.x)*d,0));vec4 o=texture2D(tex,uv+vec2((-7.5/dim.x)*d,0));float p=max(1.,sin(uv.y*dim.y*1.2)*2.5)*d;b.r=b.r+n.r*p;b.b=b.b+f.b*p;b.g=b.g+o.g*p;vec2 q=uv*sin(time);float r=fract(sin(dot(q.xy,vec2(12.,78.)))*43758.);vec3 s=vec3(r);b.rgb=mix(b.rgb,s,.015);gl_FragColor.rgba=b;}");k.uniform2f(ha(Db,"dim"),R,H);var Eb=Q("precision highp float;uniform vec2 dim;uniform sampler2D tex;varying vec2 uv;uniform float time;uniform vec3 colors;void main(){vec2 a=uv*dim;a-=dim/2.;float b=length(a);if(b<600.){float c=b/600.;a*=mix(1.,smoothstep(0.0,600./b,c),.125);}a+=dim/2.;vec4 d=texture2D(tex,a/dim);float e=distance(uv,vec2(.5,.5));d.rgb*=smoothstep(.8,.2*.8,e);gl_FragColor=d;}");k.uniform2f(ha(Eb,"dim"),R,H);var yb=Q("precision highp float;uniform vec2 dim;uniform sampler2D tex;varying vec2 uv;uniform float time;uniform vec3 colors;void main(){float a=sin(time);vec4 b=texture2D(tex,uv);vec4 c=texture2D(tex,uv+vec2((-15./dim.x),0));vec4 d=texture2D(tex,uv+vec2((15./dim.x),0));vec4 e=texture2D(tex,uv+vec2((-7.5/dim.x),0));if(colors.r==1.){b.r=b.r+d.r*max(1.,sin(uv.y*dim.y*1.2))*a;}if(colors.g==1.){b.b=b.b+c.b*max(1.,sin(uv.y*dim.y*1.2))*a;}if(colors.b==1.){b.g=b.g+e.g*max(1.,sin(uv.y*dim.y*1.2))*a;}gl_FragColor.rgba=b.rgba;}");k.uniform2f(ha(yb,"dim"),R,H);var zb=Q("precision highp float;uniform vec2 dim;uniform sampler2D tex;varying vec2 uv;uniform float time;uniform vec3 colors;void main(){float a=5.;float b=.5;vec2 c=uv*dim;vec2 d=c+vec2(floor(sin(c.y/a*time+time*time))*b*time,0);d=d/dim;vec4 e=texture2D(tex,d);gl_FragColor.rgba=e.rgba;}");k.uniform2f(ha(zb,"dim"),R,H);var Ab=Q("precision highp float;uniform vec2 dim;uniform sampler2D tex;varying vec2 uv;uniform float time;uniform vec3 colors;void main(){float a=.3;float b=.3;float c=10.*time;float d=10.*time;float e=dim.x;float f=dim.y;vec2 g=uv*dim;vec2 h=vec2(max(3.,min(float(e),g.x+sin(g.y/(153.25*a*a)*a+a*c+b*3.)*d)),max(3.,min(float(f),g.y+cos(g.x/(251.57*a*a)*a+a*c+b*2.4)*d)-3.));vec4 i=texture2D(tex,h/dim);gl_FragColor.rgba=i.rgba;}");k.uniform2f(ha(Ab,"dim"),R,H);var Bb=Q("precision highp float;uniform vec2 dim;uniform sampler2D tex;varying vec2 uv;uniform float time;uniform vec3 colors;void main(){vec4 a=texture2D(tex,uv);if(time==.0){gl_FragColor.rgba=a.bgra;}else{gl_FragColor.rgba=a.rgba;}}");k.uniform2f(ha(Bb,"dim"),R,H);var Cb=Q("precision highp float;uniform vec2 dim;uniform sampler2D tex;varying vec2 uv;uniform float time;uniform vec3 colors;void main(){vec2 a=uv*dim;vec2 b=vec2(3.+floor(a.x/time)*time,a.y);vec4 c=texture2D(tex,b/dim);gl_FragColor.rgba=c.rgba;}");k.uniform2f(ha(Cb,"dim"),R,H);var pa=eb(),wa=eb(),xb=db(),hb="#FFF;rgba(40,77,153,0.6);rgba(234,34,37,0.6);rgba(180,0,50,0.3);#F952FF;rgba(0,77,153,0.6);rgb(72,255,206);rgba(0,0,0,0.1);rgba(7,8,12,0.2);rgb(40,145,160);#F66;#69F;#32F;#6FF;#066;#0FF;rgba(235,118,71,0.8);#559;#F6F;#2F2;#000;#973;rgba(0,0,0,0.71);rgb(2,1,2);rgba(255,102,192,0.8);rgba(255,102,102,0.8);rgba(252,233,128,0.8);rgba(150,127,254,0.8);rgba(179,72,108,0.8);rgba(179,88,52,0.8);rgba(128,108,26,0.8);rgba(128,155,15,0.8);rgba(128,131,51,0.8);hsla(324,50%, 60%, 0.88);hsla(360,50%, 60%, 0.88);hsla(10,50%, 60%, 0.88);hsla(20,50%, 60%, 0.88);hsla(30,50%, 60%, 0.88);rgba(7,8,12,0.2)".split(";"),B=[0,0,0];c.onmousedown=function(e){B[2]=3==e.which?0:1,B[3]=3==e.which?1:0,e.preventDefault()},c.onmouseup=function(e){B[2]=0,B[3]=0,e.preventDefault()},c.onmousemove=function(e){0<E[6]||(B[0]=800*e.offsetX/c.offsetWidth,B[1]=600*e.offsetY/c.offsetHeight)};var ca=0,da={65:1,87:2,68:4,83:8};document.onkeydown=function(e){var a=e.keyCode||e.which;da[a]&&(ca|=da[a],e.preventDefault())},document.onkeyup=function(e){var a=e.keyCode?e.keyCode:e.which;ca&da[a]&&(ca^=da[a],e.preventDefault())};var fa,L,z,K,Qa=new Ia;g2e="G2 e",c2e="C2 e",lead="Bb1 s;D2 s;Bb1 s;D2 s;Bb1 s;D2 s;Bb1 s;D2 s;Bb1 s;D2 s;Bb1 s;D2 s;Bb1 s;D2 s;Bb1 s;D2 s;Ab1 s;D2 s;Ab1 s;D2 s;Ab1 s;D2 s;Ab1 s;D2 s;Ab1 s;D2 s;Ab1 s;D2 s;Ab1 s;D2 s;Ab1 s;D2 s".split(";"),harmony=[g2e,"G2b e",g2e,"G2b e",g2e,"G2b e",g2e,"G2b e",c2e,"G2b e",c2e,"G2b e",c2e,"G2b e",c2e,"G2b e"],bass2="- w;D1 s;- s;D1 e;- q;- m;- w".split(";"),bass=basebass=["C1 e","- e","A1 e","- e"],fa=new A(Qa,138,lead),L=new A(Qa,138,harmony),z=new A(Qa,138,bass),K=new A(Qa,138,bass2),fa.F=.81,L.F=.55,z.F=.05,z.I=.35,K.F=.05,fa.gain.gain.value=.12,L.gain.gain.value=.09,z.gain.gain.value=.11,K.gain.gain.value=.1;var Yb=S([3,.2421,.1876,.1891,.2844,.5008,,-.0619,.2484,,.0432,-.7113,.3743,.007,8e-4,.0474,-.0023,.705,.7098,.0034,.011,.0259,5e-4,.42]),sb=ib([0,,.12,.14,.3,.8,,-.3399,.04,,,-.04,,.51,-.02,,-.74,,.21,.24,,,.02,.41],6),Wb=S([1,,.38,,.03,.03,,.8799,.96,.9411,.9785,-.9219,.82,.7513,.6049,.8,-.6041,-.8402,.28,.7,.78,.1423,-.7585,.5]),Ub=S([3,.0597,.11,.2,.2513,.5277,,.5841,-.0248,-.076,.5312,-.2978,.7065,-.9091,.4202,.966,.7036,.4575,1,-.9064,.6618,.0266,-.0655,.42]),tb=S([2,,.09,.06,.45,.27,.02,-.28,.82,.41,.58,-.88,.07,.448,-.355,1,.54,-.073,1,,,,,.42]),Tb=S([3,.002,.6302,.499,.0804,.5224,,-.0324,4e-4,.5448,,-.7762,-.1765,.6762,-.4386,.7747,-.0347,-.2051,.931,-.0732,.4693,.1444,,.42]),Sb=S([1,.145,.2094,.4645,.4954,.7134,,-.1659,-.8866,.9733,,-.572,-.7927,-.1186,.4699,.6044,.4604,.1762,.9998,.0236,.1554,,.659,.42]);S([1,.0076,.66,,,.09,,.96,.32,.1,.97,-1,,.0615,-.1587,1,,-.02,.83,.12,.23,.0231,-.02,.96]);var Z,n,ea,v,T,Ua,l,F,f,ya,U,oa,Va,kb,J,ra,Wa,V,Ka,ub=ib([3,.0691,.183,.0949,.5678,.46,,-1e-4,,,,-.542,-.2106,-.2402,-.1594,,-.3133,-.0707,.1592,-.4479,.5788,.0169,-.919,.42],8),Xb=S([3,.0258,.16,.0251,.16,.05,,-.86,-.4088,.0956,.256,-.62,,-6e-4,-.0352,,-.0882,-.0443,.9219,-.0531,.8727,.031,2e-4,.6]),Pb=S([0,.95,.34,.03,.05,.51,,.96,.84,.05,.51,-.84,.99,.82,,1,,-.88,.87,1,.5,.21,.94,.65]),Ca=!0,Da=0,va=!1,N=0;jb();var Ea,Oa=!1,sa="",Ya=0,Rb=";now i see;i am creation;you are destruction;we are going to be;in this battle;forever".split(";"),ka=0,Ga=!1;document.getElementById("f").onclick=function(e){document.fullscreenEnabled?Ga?document.exitFullscreen():document.body.requestFullscreen():document.webkitFullscreenEnabled?Ga?document.webkitExitFullscreen():document.body.webkitRequestFullscreen():document.mozFullScreenEnabled&&(Ga?document.mozCancelFullScreen():document.body.mozRequestFullScreen()),Ga=!Ga,e.preventDefault()};for(var W=[[250,320,300,!1,10,"start again",!1,!1,ob],[120,460,250,!1,11,"twitter",!1,!1,function(){window.open("https://twitter.com/home?status="+encodeURIComponent(pb()+"https://js13kgames.com/games/evil-glitch"))}],[430,460,250,!1,12,"facebook",!1,!1,function(){window.open("https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent("https://js13kgames.com/2016/games/evil-glitch")+"&description="+encodeURIComponent(pb()))}],[240,380,320,!0,13,"fire to start",!1,!1,ob],[280,440,240,!0,13,"controls",!1,!1,function(){O(tb),va=!va,W[3][3]=!va,W[5][3]=!va&&Hb,W[4][5]=va?"go back":"controls"}],[280,130,240,Hb,16,"evil mode",!1,!1,function(){za=nb=!0,N=.01}]],ta=[],vb=[10,10,11,11,11,12,12,10,10,11,13,10,11,12,12],ab=0,Ma=[[15,0,0,0,1,[1,.25,-1,.25],[0,-.75,0,.75],0,3,.1,1.1],[15,0,0,1,4,[1,.3,0,-2,0,.3],[0,1,.3,0,-.3,-1],0,3,.05,.8],[8,0,0,2,2,[1,.25,-1,.25],[0,-.5,0,.5],0,3.5,.15,1.6],[20,0,0,3,9,[0,.25,.75,.75,1,.75,.75,.25,0,-.25,-.75,-.75,-1,-.75,-.75,-.25],[-1,-.75,-.75,-.25,0,.25,.75,.75,1,.75,.75,.25,0,-.25,-.75,-.75],0,1,.12,1.05],[12,0,0,4,5,[0,.25,1,.25,0,-.25,-1,-.25],[-1,-.25,0,.25,1,.25,0,-.25],0,3,.03,2.5,0,0,0],[3,0,0,5,150,[1,-1,-1],[0,1,-1],0,0,0,1.4],[16,0,0,6,9,[1,.25,-1,.25],[0,-.75,0,.75],0,0,0,.6,3.5],[18,0,0,7,8,[1,.25,-1,.25],[0,.75,0,-.75],0,0,0,.8,2.5],[20,0,0,8,7,[1,.25,-1,.25],[0,.75,0,-.75],0,0,0,1.2,1.5],,[n/2,0,0,10,9,[[-1,0,0],[0,0,1],[-1,1,0]],[[-1.5,-.5,.5],[-.5,.5,-1.5],[-1.5,-1.5,-.5]],100,0,7],[n/2,0,0,11,10,[[-1,0,0,-1],[1,0,0,1],[-1,0,1,0],[-1,0,1,0],[-1,0,0,-1],[1,0,0,1]],[[-1.25,-.5,.8,.25],[-1.25,-.5,.8,.25],[-1.25,-.5,-1.25,-1.8],[.25,-.5,.25,.8],[.25,-.5,-1.8,-1.25],[.25,-.5,-1.8,-1.25]],100,0,6],[.8*n,0,0,12,15,[[-.5,0,.5,0],[-.5,0,0],[.5,0,0],[-.5,0,0],[.5,0,0]],[[-.75,-1,-.75,-.5],[-.75,-.5,.25],[-.75,-.5,.25],[-.75,-1.75,-.5],[-.75,-1.75,-.5]],.9,0,4,.004],[1.2*n,0,0,13,50,[[0,-.75,0],[0,.75,0],[-.75,.75,0],[-.75,.75,0],[-.35,.35,0]],[[-1,.5,0],[-1,.5,0],[.5,.5,0],[-.5,-.5,1],[.25,.25,-.5]],.9,0,13,.1],[2.5*n,0,0,14,200,[],[],.9,0,60,.003,1,0,[6,7,6,7,8]]],Fa={10:2800,11:2600,12:60,13:200},ba=0,ga=[],P=0;6>P;P++){var Ib=(P-3)*Math.PI/3+Math.PI/6;ga.push(Math.cos(Ib),Math.sin(Ib))}var wb={};for(P=0;1e4>P;P++)wb[(P/1e4).toFixed(4)]=Qb(P/1e4);var Na,Vb={10:function(e){for(var a=0;9>a;a++)if(4!=a){var t=e[0]+(a%3-1)*n,r=e[1]+(~~(a/3)-1)*n;La(t,r,.65,[t,r,1==a?1:0])}e[9]=Fa[10]},11:function(e){for(var a=0;12>a;a++)if(4!=a){var t=e[0]+(a%3-1)*n,r=e[1]+(~~(a/3)-1)*n;La(t,r,.65,[t,r,1==a?3:2])}e[9]=Fa[11]},12:function(e){for(var a=0;2>a;a++){var t=ua([e[0],e[1],5]);t[9]=e[3]+a*Math.PI,F.push(t)}e[9]=Fa[12]},13:function(e){for(var a=0;6>a;a++){var t=ua([e[0],e[1],5]);t[9]=e[3]+(a-3)*Math.PI/3,t[12]+=.5,F.push(t)}e[9]=45},14:function(e){for(var a=0;6>a;a++){var t=ua([e[0],e[1],5]);t[9]=e[3]+(a-3)*Math.PI/3+Math.PI/6,t[12]-=.6,F.push(t)}if(0==e[13]%16&&((t=ua([e[0],e[1],e[15][e[14]%e[15].length]]))[9]=e[3]/2,F.push(t),e[14]++),0==e[13]%100)for(a=0;6>a;a++)qb(e,a);e[9]=70,e[13]++}};requestAnimationFrame(rb)</script>