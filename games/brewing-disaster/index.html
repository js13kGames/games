<html><head><meta name=viewport content="width=device-width"><title>Brewing Disaster - js13kGames 2024</title><style>body{--pd:#3f2631;--sx:#000;--pl:#fff;--lb:#cbcab8;--leb:#d1d0c4;--mb:#bdbcab;--s:rgba(255, 255, 255, 0.3);--b:#8c8d7a;--r:3px;font-family:monospace;background-color:var(--pd);image-rendering:optimizeSpeed;image-rendering:-moz-crisp-edges;image-rendering:-o-crisp-edges;image-rendering:-webkit-optimize-contrast;image-rendering:pixelated;image-rendering:optimize-contrast;-ms-interpolation-mode:nearest-neighbor;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:8px;margin:8px;min-width:768px;min-height:700px}._1{position:absolute;top:-999px;left:-999px;width:64px;height:64px;z-index:20;offset-path:path("M 6 8 C -19 -66 -79 -227 -161 -31");offset-distance:0;offset-rotate:reverse;transform:scale(3)}._1.fromPlayer{offset-path:path("M 50 8 C 75 -66 135 -227 217 -31");offset-rotate:auto}[data-current-section=title] #_37,body:not([data-current-section]) #_37{display:none}#_37{font-size:1rem;font-weight:700;color:var(--pl);display:flex;justify-content:center;align-items:center}#_37 label{cursor:pointer}#_37 input{cursor:pointer;margin:0;position:relative;top:2px}main{width:768px;height:700px;box-sizing:border-box;border:4px solid var(--b);background-color:var(--mb);display:flex;flex-shrink:0;align-items:stretch;justify-content:stretch;overflow:hidden;border-radius:var(--r);-ms-user-select:none;-webkit-user-select:none;user-select:none}body:not([data-current-section]) main{background-color:var(--sx)}main>section{width:100%;position:relative;display:none;flex-direction:column;overflow:hidden}.st{font-size:1.5rem;margin:12px;text-align:center}.subTitle{font-weight:bolder;margin:8px;font-size:1.8rem;text-align:center;margin-bottom:0}.subtitle span{font-size:1.2rem;vertical-align:middle;color:var(--pd)}.p{margin:12px}.subText{font-size:1.1rem;text-align:center;margin:0}q{font-style:italic;font-size:1.2rem}#_4{display:flex;flex-wrap:wrap;gap:16px;justify-content:center}.characters .card{width:300px}#_4 .card.d{filter:grayscale(1) brightness(.5);opacity:.8}#_4 .card.d .image{filter:contrast(0) brightness(.5)}#_24{flex-direction:row}#_24>div{display:none;flex-shrink:0}#_24[data-type=ingredients] #_25,#_24[data-type=passives] #_27{display:flex;flex-direction:column;width:60%}#_24 #_29{display:flex;flex-direction:column;flex:auto;border-left:3px solid var(--b);text-align:center;background:var(--sx);color:var(--pl)}#_30{width:auto;gap:8px;overflow:auto}#_30 .card{width:100%;flex-direction:row;align-items:center;height:48px}#_30 .card>*{margin:0;transform-origin:left center}#_30 .card .image{margin:0 20px 0 4px}#_30 .card .name{font-size:15px}#_30 .card .effect{margin-left:auto}#_30 .card::after{content:"x" attr(data-total);width:32px;margin-left:8px;background:var(--sx);color:var(--pl);height:100%;display:flex;align-items:center;justify-content:center;border-left:3px solid var(--b)}.chooseTitle{flex:1;align-items:center;display:flex;justify-content:center;text-align:center}#_29 .chooseTitle{font-size:1rem;flex:0}.gameEnd{font-size:1.3rem;text-align:center;padding:32px}.gameEnd .k{padding:12px}.gameEnd .card{margin:20px auto}#_33,#_35,#_36{display:none}#_32._33 #_33,#_32._35 #_35,#_32._36 #_36{display:block}#title{background:var(--sx);color:var(--pl);text-align:center;overflow:hidden}#title .st{font-family:monospace;font-size:3rem;margin-top:96px;z-index:5}#title a{font-size:2rem;text-transform:uppercase;display:inline-block;border:3px solid currentColor;padding:24px;margin-top:96px;background:var(--sx);z-index:5;position:relative}#title a:focus,#title a:hover{background:var(--pd);transform:translateY(-4px)}#_32 .cauldron,#title .cauldron{z-index:5;transform:scale(8);transform-origin:bottom center;position:absolute;bottom:-24px;left:calc(50% - 16px)}#title .sprites{position:absolute;pointer-events:none;display:flex;justify-content:space-around;left:0;right:0;top:0}#title .sprites .sprite{z-index:0;transform:scale(4) translateY(-16px);animation:falling 10s ease-in infinite}@keyframes falling{from{transform:scale(4) translateY(-16px) rotate(0)}to{transform:scale(4) translateY(300px) rotate(3600deg)}}#title .sprite.a{animation-delay:33ms}#title .sprite.s{animation-delay:3s}#title .sprite.f{animation-delay:6s}#title .sprite.y{animation-delay:9s}#title .sprite.m{animation-delay:12s}#title .sprite.w{animation-delay:15s}#title .sprite.r{animation-delay:18s}#title .sprite.b{animation-delay:21s}#rules{text-align:center}#rules .p .sprite{transform:scale(2);transform-origin:center;vertical-align:middle;margin:0 8px}#rules .p .sprite.cauldron{margin:0 16px}#rules .p{line-height:48px}#_11{display:flex;width:100%;justify-content:space-around;position:relative;flex-wrap:wrap;align-self:center}#_11::after,#_11::before{content:"";display:block;position:absolute;left:0;right:0;top:calc(25% - 1.5px);border-top:3px solid var(--b);z-index:20}#_11::after{top:unset;bottom:calc(25% - 1.5px)}#_11 a::before{content:"";display:block;border:12px solid transparent;position:absolute;bottom:56px;border-top-width:16px;border-top-color:var(--pd);animation:upAndDown 333ms linear infinite alternate-reverse}@keyframes upAndDown{from{transform:translateY(0)}to{transform:translateY(-8px)}}#_11 a::after{content:"click!";display:block;text-align:center;color:var(--pd);pointer-events:none;position:absolute;top:68px;opacity:0;animation:blink 1s steps(2,jump-none) infinite;animation-delay:5s}@keyframes blink{from{opacity:0}to{opacity:1}}#_11>*{background-color:var(--lb);position:relative;z-index:30;display:flex;width:64px;height:64px;margin:24px 48px;border:3px solid var(--b);justify-content:center;align-items:center;border-radius:50%}#_11>div:not(.prev){filter:grayscale(1) brightness(.5)}#_11>div:not(.prev) .sprite{filter:contrast(0) brightness(.5)}#_11 .sprite{transform:scale(3);transform-origin:center!important}._14{flex-grow:1;flex-shrink:0;position:relative;transform-style:preserve-3d;perspective:400px;height:392px;overflow:hidden;--dark-amount:100%}._14:after{content:"";display:block;background:radial-gradient(circle at center 310px,transparent 10%,rgba(0,0,0,.9) var(--dark-amount));position:absolute;pointer-events:none;left:0;right:0;top:0;bottom:0;z-index:20;transform:translateZ(40px)}._14 .shelf{overflow:visible;position:absolute;pointer-events:none;transform:scale(2);transform-origin:top left;z-index:0}._14 .sprite.reversed{transform:scale(-2,2) translateX(-17px)}._14 .shelf::after{content:"";display:block;width:100%;height:8px;position:absolute;bottom:-8px;border:1px solid var(--b);background-color:var(--lb);box-shadow:inset 1px 1px 0 var(--s),inset -1px -1px 0 var(--s)}._14 .character{transform:scale(4);transform-origin:bottom center;position:absolute;left:24%;top:83%;z-index:3}.character{animation:spriteAnimation 1s steps(2) infinite}#_16{transform:scale(-4,4)}#_21{left:75%}#_15{position:absolute;bottom:0;left:-48px;z-index:1;transform:rotateX(50deg)}.footer{color:var(--pl);background-color:var(--sx);height:300px;box-sizing:border-box;padding:8px 0;display:flex;align-items:stretch;justify-content:stretch;flex-shrink:0;position:relative;margin-top:auto}.fi{border-top:2px solid var(--pl);border-bottom:2px solid var(--pl);width:100%;display:flex;gap:8px;align-items:center;box-sizing:border-box;padding:8px;overflow:hidden}.column{flex-direction:column}#hand{height:100%;gap:8px;justify-content:flex-start;display:flex;align-items:center;box-sizing:border-box;margin:auto}.sprite{--x:0;--y:0;display:inline-block;width:16px;height:16px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAACAAgMAAADG74f5AAAACVBMVEUAAAA/JjH///9w5z/KAAAAAXRSTlMAQObYZgAAA2BJREFUSMe1lVGL00AQx/8bskV9qmCE+qSCIH6KFazo21Z2gtsnheuB/RTBJ7mnCo1wb0W84y6f0vnPNl5QERQcyLW/XyY7O5M0BwcETMNEPRF3XXih9ibmy1XNpKaeJ2Chokk10jLIciVA1subNHciUTTg4g61yNyLpGXuV6i6CD0bvLSJn3DPo162ATMgAhXBMkzkHnXVwRY1sdjDu1D2YcInzGYUrx7VLAuvBTZQMa9rWAUtcKKiVoemAdT/IX456e4Bdw4T0URgGMb0uWYEVMPQoUkqXr8HRIpYX6hYruD681C1fcngH5fFBHcLvziJlZyGan3R2QiwydqDhDvX20MZ0vlpcG0GhZccMdvkHXrB7e31Oy/bCP/5ZUTeozo970rGbrbjTisRFRLhggvwATg/hS06Bnth2Zt4dmWb/F8xVq/wsAiRsbwJv2yHoV/p3qvu6UdVjVyLbCUBH6+uqgMQW17Se1TdMJypWBWxRHU408HfCHb3ZeDQi+DoPywTJou6pThhWWFZieBNuWcZDJblEzcVjH8Uvoj4W9E9nAr2j6moHp7hYAO0CKi+3jk7MKcIveJKu2dKM1YdhuEjhR+LbPvt0I2LBPBRXKZxr/xS5jENzmPKnMdvwiY3zdoD9/eTK2bfLKM5GX83suOZIpIKL8HEAxVOam6piIaiUSFtqbI4WQju1uxCRZM0Y3EBzI9CBPeZESNFUJGZIfwlqLCJUXywsx/SDyFO2uAv4g/RM+OB7nOsIhT3Tfhogpn+14nI+GVewEk4QizgczxChEHTpiNEGIjsCfb+MVhf7Ai2F4NN7gqIwKBvg4E7lUCoc//CgK0T7K1J8INEggmDy96EW0sEQZ8VGKwlgIC1HgSh4NutVSEmoHAN3PtGoZ/38Lfh5SdoJIxYQNIR6hcgVMPhCM0R5A3GeRg4yZ2B2/SB4M5XINg8CI6ZBD7+BE9hoJ0S/FoFgXfeQLiGFGEgkYIgBDtu5kCIFIxbHW7isR5uBBfH/z6fivCJKeURmiVrTLEuCXlDERW55hyuzbzzget84pqzLzkWcXs/5+JPPly+dRBbhxJr+XLin1NIMimXedOsWMklk/fzZtMIhReTtyW/9dbc3RRMzi6TM+FSkS7vtCpFXSSagAajqK1T4nfmikOr+GFpawAAAABJRU5ErkJggg==);color:transparent;overflow:hidden;background-position:var(--x) var(--y)}.es::after,.es::before,.isp::after,.isp::before,.ps::after,.ps::before,.sprite.s,.ssp::after,.ssp::before{--x:0;--y:0}.ea::after,.ea::before,.iap::after,.iap::before,.pa::after,.pa::before,.sap::after,.sap::before,.sprite.a{--x:-16px;--y:0}.eb::after,.eb::before,.ibp::after,.ibp::before,.pb::after,.pb::before,.sbp::after,.sbp::before,.sprite.b{--x:-32px;--y:0}.ew::after,.ew::before,.iwp::after,.iwp::before,.pw::after,.pw::before,.sprite.w,.swp::after,.swp::before{--x:-48px;--y:0}.ef::after,.ef::before,.ifp::after,.ifp::before,.pf::after,.pf::before,.sfp::after,.sfp::before,.sprite.f{--x:0;--y:-16px}.ey::after,.ey::before,.iyp::after,.iyp::before,.py::after,.py::before,.sprite.y,.syp::after,.syp::before{--x:-16px;--y:-16px}.sprite.pa,.sprite.pb,.sprite.pf,.sprite.ps,.sprite.pw,.sprite.py,.sprite.skull{--x:-32px;--y:-16px}.sprite.cauldron{width:32px;height:32px;--x:0;--y:-32px}.sprite.fatPotion,.sprite.sap,.sprite.sbp,.sprite.sfp,.sprite.ssp,.sprite.swp,.sprite.syp{--x:-48px;--y:-16px}.sprite.fitPotion,.sprite.iap,.sprite.ibp,.sprite.ifp,.sprite.isp,.sprite.iwp,.sprite.iyp{--x:0;--y:-64px}.sprite.books{--x:-16px;--y:-64px}.sprite.flower{--x:-32px;--y:-64px}.sprite.m{--x:-48px;--y:-64px}.sprite.r{--x:-32px;--y:-112px}.sprite.ea,.sprite.eb,.sprite.ef,.sprite.es,.sprite.ew,.sprite.ey,.sprite.ok{--x:-48px;--y:-112px}.sprite.totter{--x:0;--y:-96px;--target-x:-32px;--target-y:-96px}.sprite.old{--x:0;--y:-80px;--target-x:-32px;--target-y:-80px}.sprite.haste{--x:-32px;--y:-80px;--target-x:-64px;--target-y:-80px}.sprite.boast{--x:-32px;--y:-96px;--target-x:-64px;--target-y:-96px}.sprite.cough{--x:0;--y:-112px;--target-x:-32px;--target-y:-112px}.sprite.custom{background:0 0}.sprite.custom::after{content:"?";color:var(--pd)}@keyframes spriteAnimation{from{background-position:var(--x) var(--y)}to{background-position:var(--target-x) var(--target-y)}}.card{border:3px solid var(--b);border-radius:var(--r);background-color:var(--lb);color:var(--pd);width:160px;height:200px;font-family:Impact,fantasy;box-shadow:inset 3px 3px 0 var(--s),inset -3px -3px 0 var(--s);display:flex;flex-direction:column;align-items:center;box-sizing:border-box;text-align:center}.card.big{width:350px}.card.mini{border-width:2px;width:84px;height:105px;box-shadow:inset 1px 1px 0 var(--s),inset -1px -1px 0 var(--s)}.card *,a>*{pointer-events:none}.card .image{margin:8px 4px;transform:scale(4);transform-origin:top center;overflow:visible;flex-shrink:0}.card.big .image::after,.card.big .image::before{content:"";position:absolute;width:inherit;height:inherit;background-image:inherit;background-position:var(--x) var(--y);display:block;transform:scale(-.75,.75) translate(20px,0) rotate(45deg)}.card.big .image::after{transform:scale(.75) translate(20px,0) rotate(45deg)}.card.mini .image{margin:4px 2px;transform:scale(2);transform-origin:top center}.card .name{font-weight:700;font-size:28px;margin-top:auto;margin-bottom:8px}.card.wp .name{font-size:22px}.card.mini .name{font-size:14px;margin-bottom:4px}.card.mini.wp .name{font-size:12px}.card .effect{font-size:20px;margin-bottom:24px}.card.mini .effect{font-size:14px;margin-bottom:12px}.card .effect .subEffect.sprite{transform:scale(1.5);transform-origin:left center}.card.mini .effect .subEffect.sprite{transform:scale(.75)}.card .effect .sprite{transform:scale(2);margin-right:4px;vertical-align:middle}.card.mini .effect .sprite{transform:scale(1);margin-right:0}.card.big .effect .sprite{margin-right:8px;margin-left:8px}.card.poisoned .image,.pv,.sprite.poisoned{filter:brightness(2) hue-rotate(300deg)}.card.safe .image,.sprite.safe{filter:sepia(1) brightness(2)}.cardList{display:flex;flex-wrap:wrap;justify-content:center;gap:8px;padding:0;margin:12px;width:70%}#_17{z-index:10;height:128px;transform-origin:bottom center;position:absolute;left:calc(50% - 64px);top:calc(50% + 20px);overflow:visible;width:128px}#_18{z-index:15;color:var(--pl);font-weight:700;line-height:40px;font-size:6px;display:flex;justify-content:flex-start;align-items:center;animation:shaking 0s linear infinite;width:128px;height:128px;background-size:256px;--y:-128px}#_18[data-putridity="1"],#_18[data-putridity="12"]{animation-duration:.75s}#_18[data-putridity="11"],#_18[data-putridity="2"]{animation-duration:1.25s}#_18[data-putridity="10"],#_18[data-putridity="3"]{animation-duration:2s}#fire{--x:-128px;--y:-128px;--target-x:-128px;--target-y:-256px;z-index:20;content:"";position:absolute;left:0;bottom:-4px;width:128px;height:64px;background-size:256px;background-position:var(--x) var(--y);animation:spriteAnimation .5s steps(2) infinite}#_18 .skull{transform-origin:right center;transform:scale(2);margin-left:40px}#_18 div{position:relative;top:12px;font-size:16px}#_18 #_19{font-size:32px}#_22{position:absolute;width:0;height:128px;bottom:47px;z-index:20;pointer-events:none;overflow:hidden;transition:width 3s ease-out;display:flex;flex-direction:row;gap:64px;justify-content:flex-end;align-items:center}#_22.shown{width:100%}#_22.won{left:52%}#_22.lost{right:52%;justify-content:flex-start}#_22::after,#_22::before{content:"";display:block;position:absolute;left:0;right:0;bottom:0;border-top:36px solid var(--pd);z-index:0}#_22::before{border-top-style:dashed;border-top-width:6px;bottom:36px}#_22 .sprite{transform:rotate(45deg) scale(3) translateY(8px);flex-shrink:0}#_22.lost .sprite{transform:translateX(12px) rotate(-45deg) scale(3) translateY(8px)}@keyframes shaking{0%{transform:translate(0,0) rotate(0)}25%{transform:translate(1px,1px) rotate(0)}50%{transform:translate(0,0) rotate(0)}75%{transform:translate(-1px,1px) rotate(0)}100%{transform:translate(0,0) rotate(0)}}.battleResults{margin:0;padding:16px 0;z-index:30;position:relative;background-color:var(--sx);color:var(--pl);display:none;animation:fromTop 333ms ease-in-out forwards}@keyframes fromTop{from{transform:translateY(-100px)}to{transform:translateY(50px)}}#_22.won+.battleResults{display:block}#_22.lost+.battleResults{display:block;animation:fromTopBroken 333ms ease-in-out forwards}@keyframes fromTopBroken{0%{transform:translateY(-100px) rotate(0)}25%{transform:translateY(50px) rotate(0)}75%{transform:translateY(50px) rotate(0)}100%{transform:translateY(50px) rotate(2deg)}}.battleResults>.resultsTitle{text-transform:uppercase;font-size:2rem;text-align:center;display:none;border:2px solid var(--pl);border-width:2px 0;margin:0;padding:16px}#_22.lost+div>.lost,#_22.won+div>.won{display:block}.options{counter-reset:ai;margin-top:auto}.options ul{list-style:none;padding:0;display:flex;margin:0;justify-content:center;counter-increment:ai;position:relative}.options ul::before{display:block;width:42px;height:42px;line-height:42px;flex-shrink:0;margin-left:12px;text-align:center;content:counter(ai);font-weight:700;align-self:center;font-size:2rem;font-family:Impact,fantasy;border:3px solid var(--b);border-radius:50%;background-color:var(--lb);color:var(--pd);box-shadow:inset 3px 3px 0 var(--s),inset -3px -3px 0 var(--s)}.options .card.big{transform:scale(.75)}.option .card.mini{margin:48px 20px;transform:scale(1.35)}.options .option{display:block;width:100%;margin:0;padding:0;color:var(--pd);border-top:3px solid var(--b)}.options .option:not(div):focus,.options .option:not(div):hover{background-color:var(--leb)}a,button{cursor:pointer;appearance:none;color:inherit;text-decoration:none}button{background-color:transparent;border:0}.k{background-color:var(--lb);color:var(--pd);display:inline-block;padding:0 4px;font-size:18px;text-transform:uppercase;border:3px solid var(--b);font-weight:700;border-radius:var(--r)}#_11 a:focus,#_11 a:hover,#_4 a:focus .card,#_4 a:hover .card,.k:focus,.k:hover,button.card:focus,button.card:hover{background-color:var(--leb);transform:translateY(-4px)}@media screen and (orientation:portrait) and ((max-width:780px) or (max-height:750px)){body{padding:0;margin:0;width:100vw;height:100vh;min-width:auto;min-height:auto}main{border:0;border-radius:0;width:100%;height:100%;flex-shrink:1;position:absolute;inset:0}.st{font-size:1rem}#title .st{font-size:2rem;margin-top:24px}#title a{font-size:1rem}#_4{margin-top:48px}.card{height:140px}.characters .card{width:125px}.card .image{margin:16px;transform:scale(2)}.card .name{font-size:14px;margin-bottom:4px}.card.wp .name{font-size:12px}.card.mini .name{font-size:10px;margin-bottom:2px}.card.mini.wp .name{font-size:8px}.card .effect{font-size:12px;margin-bottom:4px}.card .effect .sprite{transform:scale(1);margin-right:2px}.footer{height:auto}#_13 .footer{flex:1}q{font-size:12px}#_37{position:absolute;bottom:0;right:8px;background-color:rgba(0,0,0,.4);padding:0 8px;border-radius:var(--r);z-index:30}#_13,#_24,#_7,#rules{overflow:scroll}.p{margin:4px}.cardList{width:100%}#rules .p{line-height:36px}#rules .p .sprite,#rules .p .sprite.cauldron{transform:scale(1);margin:0}.subTitle{margin:4px;font-size:1.1rem}.subText{font-size:.9rem}#_11{margin-top:20px}#_11>*{margin:12px}._14{flex-grow:0}#_15{bottom:-20px}._14 .character{left:15%}#_21{left:85%}#hand{flex-wrap:wrap;justify-content:center;gap:4px}#hand .card{width:100px}.chooseTitle{font-size:1rem;flex-shrink:1;flex-grow:0;padding:16px 0}.options{margin-top:0;display:flex;flex-direction:column;border-bottom:3px solid var(--b)}.options ul{flex-wrap:wrap}.options ul:before{display:none}.option .card.mini{transform:scale(1);margin:8px 6px}#_30{gap:4px;margin:12px 4px}}@media screen and (max-width:780px){#_11::after,#_11::before{display:none}}</style><link id="_0" rel="icon shortcut" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAtElEQVR4AZzQ2w3CMBBE0UAz/FMBpVMB/1QDORJj2etYirA02tfs3SjXbfE+5S1s2wTIXl1Y9QcAU12sdfUMgGo+U0+Ax+2+RQGkFtNLnAAZnI1LwPP9aow+b81f0gD5Ocxk7pNJrkfyeOUNoPhHA8A1CshFSm1GqcUGuOyvmhmoX+LZrRd9agBFlAWR9BPlvQYAsgsMiX2ux6MXDYA0GeUiJRerJkC90C8czSaABcYjmVV9AQAA//8KDoI/AAAABklEQVQDAHVvZiHWxmuiAAAAAElFTkSuQmCC"><style>body[data-current-section="title"] section#title,body[data-current-section="_3"] section#_3,body[data-current-section="rules"] section#rules,body[data-current-section="_7"] section#_7,body[data-current-section="_13"] section#_13,body[data-current-section="_24"] section#_24,body[data-current-section="_31"] section#_31,body[data-current-section="_32"] section#_32{display:flex;}</style></head><body data-current-section="title"><div id="_1" class="_1 sprite"></div><main><section id="title"><h1 class="st">Brewing Disaster</h1><p class="p"><a href="#_3">Click to start</a></p><div class="sprite cauldron"></div><div class="sprites"><div class="sprite w"></div><div class="sprite y"></div><div class="sprite f"></div><div class="sprite a"></div><div class="sprite s"></div><div class="sprite m"></div><div class="sprite b"></div><div class="sprite r"></div></div></section><section id="_3"><h2 class="st">Select your character</h2><div id="_4" class="characters"></div></section><section id="rules"><h2 class="st">So, you want to be the best wizard?</h2><p class="p">You share a <span class="sprite cauldron"></span> <em>(cauldron)</em> with another wizard.<br>This cauldron has an amount of <span class="sprite skull"></span> <em>(putridity)</em>.<br>Add ingredients to the cauldron to increase or decrease <span class="sprite skull"></span>.<br>First wizard to reach an amount of <span class="sprite skull"></span> of <b>13</b> or <b>0</b> has <b>lost</b>.<br>Good luck!<br><a class="k" href="#_7">Start</a></p><div class="footer"><div class="fi column"><p style="margin:0"><b>Your starter ingredients:</b></p><ul id="_6" class="cardList"></ul></div></div></section><section id="_7"><h2 class="st">Your next duel is against:</h2><h3 id="_8" class="subTitle"></h3><q id="_9" class="subText"></q><p class="subText" style="margin:4px 0">Initial <span class="sprite skull"></span>: <span id="_10"></span></p><div style="flex-grow:1"><div id="_11"></div></div><div class="footer"><div class="fi column"><p style="margin:0"><b>Next opponent's ingredients:</b></p><ul id="_12" class="cardList"></ul></div></div></section><section id="_13"><div id="_14" class="_14"><canvas id="_15" width="848" height="92"></canvas><div id="_16" class="sprite character"></div><div id="_17"><div id="_18" class="sprite cauldron"><div class="sprite skull"></div><div>:</div><div id="_19"></div></div><div id="fire" class="sprite"></div></div><div id="_21" class="sprite character"></div><div id="_22"></div><div class="battleResults"><h2 class="resultsTitle won">Victory!</h2><h2 class="resultsTitle lost">Defeat...</h2></div></div><div class="footer"><div class="fi"><div id="hand"></div></div></div></section><section id="_24"><div id="_25"><h2 class="chooseTitle">Choose a pack of new ingredients</h2><div id="_26" class="options"></div></div><div id="_27"><h2 class="chooseTitle">Choose an ingredient improvement</h2><div id="_28" class="options"></div></div><div id="_29"><h2 class="chooseTitle">Current ingredients</h2><ul id="_30" class="cardList"></ul></div></section><section id="_31" class="gameEnd"><h2 class="st">Too bad...</h2><p class="p">You'll do better next time!</p><p class="p">Since this is your first defeat, you have unlocked this very special character:</p><div class="characters"><div class="card"><div class="image sprite custom"></div><div class="name">Wizard of the Custom</div><div class="effect">Choose your starter ingredients!</div></div></div><p class="p">You can create your very own list of starter ingredients!<br>But please note playing with this character <b>won't</b> unlock any other.</p><p class="p"><a class="k" href="#_3">Play again</a></p></section><section id="_32" class="gameEnd"><h2 class="st">Congratulations!</h2><p class="p">You have defeated all the wizards!</p><div id="_33"><p class="p">You have unlocked a new character:</p><div id="_34" class="characters"></div></div><div id="_35"><p class="p">Play with other character to unlock another ones!</p></div><div id="_36"><p class="p">And you have already unlocked all characters, meaning you have completed the game, very well done!<br><br>Thanks for playing &lt;3</p></div><p class="p"><a class="k" href="#_3">Play again</a></p><div class="sprite cauldron"></div></section></main><p class="p" id="_37"><label><input id="_38" type="checkbox"> Enable sounds</label></p><script>let e=[],t={},a=()=>{};function n(e,a={}){t=a,window.location.hash=e}function s(e){return Math.floor(Math.random()*(e+1))}function r(e){return s(99)+1<=e}function i(e){let t=[...e];for(let e=t.length-1;e>0;e-=1){let a=s(e),n=t[e];t[e]=t[a],t[a]=n}return t}function d(e){return e[0].toUpperCase()+e.slice(1)}let o=(e,t)=>0===t?e:`<span class="pv">${e}</span>`;class c{constructor(e,t,a){this.id=e,this.name=t,this.value=a}getDesc(e=0){let t=this.value+e;return o("{P} "+(t>=0?"+":"")+t,e)}applyEffect(e,t){return e+this.value+t}}let l=[new c("w","Worm",1),new c("f","Fly",2),new c("b","Bat",3),new c("s","Spider",4),new c("a","Apple",-1),new c("y","Berry",-2),new class extends c{getDesc(e=0){return o(`{P} /${this.value+e}`,e)}applyEffect(e,t){return Math.floor(e/(this.value+t))}}("m","Meat",2),new class extends c{getDesc(e=0){return o(`{P} x${this.value+e}`,e)}applyEffect(e,t){return e*(this.value+t)}}("r","Brain",2)];function u(e=1,t=[]){let[a,n,s]=i([e>4?"s":"w",e>2?"f":"w",e>2?"f":"w",e>4?"m":"w",e>4?"r":"w","f","f",e>2?"a":"f",e>2?"a":"f","b",e>2?"s":"b",e>4?"s":"b",e>2?"s":"f",e>2?"s":"b","a","a","a",e>4?"y":"a",e>4?"y":"a","y","y","y",e>4?"m":"y",e>4?"r":"b"]);return[a,n,s].map((e=>new f(e,t)))}let p=1;class f{constructor(e,t=[]){this.uniqId=p++;let a=(n=e,l.find((({id:e})=>e===n)));var n;this.id=e,this.name=a.name,this.initialValue=a.value,this.value=a.value,this.baseCardGetDesc=a.getDesc.bind(this),this.baseCardEffect=a.applyEffect.bind(this),this.hasActivePassive=!1,this.size="normal",this.status="none",this.applyPassives(t)}applyEffect(e,t,a){let n=this.baseCardEffect(e,t);return"poisoned"===this.status?a(this.initialValue>0?1:-1):a(0),"safe"===this.status?Math.max(1,Math.min(12,n)):n}getName(){let{size:e,status:t,name:a}=this;return("normal"!==e?`${d(e)} `:"")+("none"!==t?`${d(t)} `:"")+a}getDesc(e=0){let t={poisoned:" ► "+(this.initialValue>0?"+1":"-1"),safe:' <span class="subEffect sprite ok"></span>'};return this.baseCardGetDesc(e)+(t[this.status]||"")}applyPassives(e){e.filter((({ingredientId:e})=>e===this.id)).forEach((e=>{switch(this.hasActivePassive=!0,e.value){case"poisoned":this.status="poisoned";break;case"expert":this.status="safe";break;default:{let t=e.id.startsWith("i");t&&"maxi"===this.size||!t&&"mini"===this.size?this.size="normal":this.size=t?"mini":"maxi",this.value+=e.value;break}}}))}}let m=(e,t,a,n,s,r,i="")=>({id:e,linkedId:i,getName:()=>t,ingredientId:a,getDesc:()=>n,value:s,level:r}),h=(e,t,a,n)=>({id:a,name:e,plural:t,sign:n}),y=[h("Worm","Worms","w",1),h("Fly","Flies","f",1),h("Bat","Bats","b",1),h("Spider","Spiders","s",1),h("Apple","Apples","a",-1),h("Berry","Berries","y",-1)].flatMap((({id:e,name:t,plural:a,sign:n})=>{let s=`{${e.toUpperCase()}}`;return[m(`s${e}p`,`Superior ${t} Potion`,e,`Your ${s} have {P} ${n>0?"+":"-"}1`,n>0?1:-1,1),m(`i${e}p`,`Inferior ${t} Potion`,e,`Your ${s} have {P} ${n>0?"-":"+"}1`,n>0?-1:1,1),m(`p${e}`,`Poisoned ${t}`,e,`When adding ${s}, next opponent's ingredient has {P} ${n>0?"+":"-"}1`,"poisoned",2,`e${e}`),m(`e${e}`,`Expert of ${a}`,e,`You cannot lose when adding ${s}`,"expert",3,`p${e}`)]}));function g(e){return y.find((({id:t})=>t===e))}let w=document.getElementById("_19"),b=document.getElementById("_14"),v=document.getElementById("hand"),I=document.getElementById("_16"),E=document.getElementById("_21"),_=document.getElementById("_22"),k=document.getElementById("_1"),M=document.getElementById("_26"),P=document.getElementById("_28"),$=document.getElementById("_4"),C=document.getElementById("_11"),B=document.getElementById("_8"),L=document.getElementById("_9"),S=document.getElementById("_12"),D=document.getElementById("_10"),x=document.getElementById("_6"),H=document.getElementById("_30"),N=document.getElementById("_24"),q=document.getElementById("_38"),T=document.getElementById("_32"),A=document.getElementById("_0"),W=document.getElementById("_15"),z=W?.getContext("2d"),F={"{P}":"skull","{W}":"w","{F}":"f","{B}":"b","{S}":"s","{A}":"a","{Y}":"y"};function O(e,t="div",a,n){let{id:s,uniqId:r,hasActivePassive:i,status:d}=e,o=document.createElement(t);o.className="card",r&&(o.dataset.uniqId=r),n&&(o.dataset.total=n),i&&o.classList.add("wp"),o.classList.add(d);let c=e.getDesc(a);return o.innerHTML=`<div class="image sprite ${s}"></div><div class="name">${e.getName()}</div><div class="effect">${c.replace(new RegExp(Object.keys(F).join("|"),"g"),(e=>`<span class="sprite ${F[e]}"></span>`))}</div>`,o}let R=!1;function U(e){_18.dataset.putridity=e,w.innerHTML=e}function Y(e){T.className="gameEnd "+e}function j(e,t){return new Promise((a=>{_.innerHTML=t.reduce(((e,t)=>e+`<div class="sprite ${t.id} ${t.status}"></div>`),""),_.addEventListener("transitionend",a,{once:!0}),_.classList.add("shown",e?"won":"lost"),_18.style.transform=`rotate(${e?90:-90}deg)`}))}function G({putridity:e,opponentId:t}){!function(){let e=Math.floor(848/66)+1,t=Math.floor(92/18)+1;for(let a=0;a<t;a++)for(let t=0;t<e;t++){let e=66*t,n=18*a;z.fillStyle="#cbcab8",z.fillRect(e,n+2,64,16),z.strokeStyle="#8c8d7a",z.lineWidth=2,z.strokeRect(e,n+2,64,16)}}(),function(){let e=100,t=1;R=!0,function a(){R&&((e<=80||e>=100)&&(t*=-1),e+=t,b.style.setProperty("--dark-amount",e+"%"),window.setTimeout((()=>{window.requestAnimationFrame(a)}),132))}()}(),function(e){for(let e of document.querySelectorAll(".shelf"))e.remove();e.forEach(((e,t)=>{e.forEach(((e,a)=>{void 0!==e&&function(e,t,a){let n=["fitPotion","fatPotion","books","flower"][e],s="books"===n,i=document.createElement("div");i.className=`shelf sprite ${n} ${s&&r(50)?"reversed":""}`,i.style.left=32*t+"px",i.style.top=48*a+"px",b.append(i)}(e,a,t)}))}))}(new Array(5).fill(void 0).map((()=>new Array(24).fill(void 0).map((()=>r(25)?s(3):void 0))))),U(e),_.classList.remove("shown","won","lost"),_18.style.removeProperty("transform"),E.className="sprite character "+t,v.innerHTML=""}function J(e){let t=O(e,"button"),a=v.querySelector('.card[data-played="1"]');a?(v.insertBefore(t,a),a.remove()):v.append(t)}function V(e,t){t.innerHTML="";let a=document.createDocumentFragment();e.forEach((e=>{let t=O(e,"li");t.classList.add("mini"),a.append(t)})),t.append(a)}function K(e){V(e,x);let t=e.reduce(((e,t)=>(e[t.id]||(e[t.id]={card:t,total:0}),e[t.id].total++,e)),{});H.innerHTML="";let a=document.createDocumentFragment();for(let{card:e,total:n}of Object.values(t)){let t=O(e,"li",0,n);t.classList.add("mini"),a.append(t)}H.append(a)}function Q(e,t,a){C.innerHTML="",B.innerHTML=`${a.name}${t>3?" <span>(hard)</span>":""}`,L.innerHTML=a.desc,D.innerHTML=a.sp,V(a.deck.cards,S);let n=document.createDocumentFragment();e.forEach(((e,a)=>{let s=a===t,r=a<t,i=document.createElement(s?"a":"div");s&&(i.href="#_13"),r&&(i.className="prev"),i.innerHTML=`<div class="sprite ${s?"character":""} ${r?"ok":e}"></div>`,n.append(i)})),C.append(n)}function X(e){q.checked=e}let Z="brewing-disaster";function ee(){let e=localStorage.getItem(Z);try{return JSON.parse(e)||{}}catch(e){return{}}}let te,ae={},ne=()=>ae,se=e=>{return t=te(ae,e),ae=t,void function(e,t){!function(e){localStorage.setItem(Z,JSON.stringify(e))}({...ee(),[e]:t})}("state",ae);var t},re=(e,t=1)=>new Array(t).fill(e),ie=e=>({cards:e.flat()}),de=(e,t,a,n,s,r)=>({name:e,sp:t,id:a,desc:n,bp:s,deck:r}),oe=[de("Hairy Totter",5,"totter","I wanna be the very best wizard!",["pw","swp","ef"],ie([re("w",3),re("f",2),re("b",2),re("a",2),re("y")])),de("Wizard of the Cough",4,"cough","I... like... flies...",["sfp","iap","ef"],ie([re("f",6),re("b",3),re("a",1)])),de("Wizard of the Old",5,"old","I am old and wise...",["pw","ifp","iwp"],ie([re("w",2),re("f"),re("b"),re("s"),re("y"),re("a",2),re("r"),re("m")])),de("Wizard of the Boast",6,"boast","I have the best ingredients!",["sbp","ps","eb"],ie([re("b",4),re("y",2),re("s",2),re("r"),re("m")])),de("Wizard of the Haste",9,"haste","It's already too putrid!",["pa","sap","ey"],ie([re("a",4),re("y",4),re("m",2)])),de("Wizard of the Custom",0,"custom","Choose your starter ingredients!")],ce=e=>structuredClone(oe.find((({id:t})=>t===e))),le={unlockedChars:["totter"],muted:!1,cg:{playerId:null,_30Cards:[],opponentIds:[],passiveIds:[],wins:0},cb:null},ue=!1;function pe(e,t){if(t<4)return[];let a=e.map(g);return t<6?[a[0]]:a}function fe(e=le,{type:t,payload:a}){switch(t){case"startGame":{let{playerCharacterId:t,customDeckString:s}=a,r=!!s,d=r?function(e){return{cards:e.split("_").flatMap((e=>{let[t,a]=e.split("-");return new Array(+a).fill(t)}))}}(s):ce(t).deck;r&&history.replaceState("","","./#rules");let o=r?"totter":t;n=o,I.className="sprite character "+n;let c=d.cards.map((e=>new f(e)));K(c);let l=oe.filter((({id:e})=>e!==o&&"custom"!==e)).map((({id:e})=>e)),u=[...l,...i(l)],p=ce(u[0]);return p.deck.cards=p.deck.cards.map((e=>new f(e))),Q(u,0,p),{...e,cg:{playerId:t,_30Cards:c,opponentIds:u,passiveIds:[],wins:0},cb:null}}case"toggleMuteSounds":{let t=a.isMuted;return{...e,muted:t}}case"startBattle":{let{wins:t,opponentIds:a}=e.cg,n=a[t],s=ce(n),{deck:r,sp:d,bp:o}=s,c=i(e.cg._30Cards),l=i(r.cards.map((e=>new f(e,pe(o,t)))));return G({putridity:d,opponentId:n}),{...e,cb:{poison:0,putridity:d,_30:c,opponentDeck:l,history:[],playerHand:[],opponentHand:[],playerDiscard:[],opponentDiscard:[]}}}case"setPutridity":{let{putridity:t}=a;return ue||U(t),{...e,cb:{...e.cb,putridity:t}}}case"draw":{let{_30:t,playerHand:n,playerDiscard:s,opponentDeck:r,opponentHand:d,opponentDiscard:o}=e.cb,{user:c,index:l=n.length}=a,u="p"===c,[p,f,m]=u?[t,n,s]:[r,d,o],h=1;if(0===p.length){if(0!==f.length)return e;p=i(m),m.length=0,u?(e.cb._30=p,h=4):(e.cb.opponentDeck=p,h=2)}for(let e=0;e<h;e++){let e=p.shift();1===h?f.splice(l,0,e):f.push(e),u&&J(e)}return e}case"playCard":{if(ue)return e;let{playerDiscard:t,playerHand:n,opponentDiscard:s,opponentHand:r}=e.cb,{uniqCardId:i,user:d}=a,o="p"===d,[c,l]=o?[t,n]:[s,r],[u]=l.splice(l.findIndex((({uniqId:e})=>e===i)),1);return c.push(u),e.cb.history.push(u),e}case"addPlayerCards":{let{cards:t}=a;return{...e,cg:{...e.cg,_30Cards:[...e.cg._30Cards,...t]}}}case"addPlayerPassive":{let t=g(a.passiveId),n=e.cg._30Cards;return n.forEach((e=>{e.applyPassives([t])})),{...e,cg:{...e.cg,_30Cards:n,passiveIds:[...e.cg.passiveIds,a.passiveId]}}}case"addWin":{let{wins:t,opponentIds:a}=e.cg,n=t+1,s={...e,cb:null,cg:{...e.cg,wins:n}},r=ce(a[n]);return r?(r.deck.cards=r.deck.cards.map((e=>new f(e,pe(r.bp,n)))),Q(a,n,r),s):s}case"_33":return{...e,unlockedChars:[...e.unlockedChars,a.characterId]};case"setPoison":{let{value:t,user:n}=a,s=0===t?0:t>0?1:-1;return"o"===n&&function(e,t){v.innerHTML="",e.forEach((e=>{let a=O(e,"button",t);v.append(a)}))}(e.cb.playerHand,s),{...e,cb:{...e.cb,poison:s}}}default:return e}var n}let me,he=e=>se({type:"setPutridity",payload:{putridity:e}}),ye=(e,t)=>se({type:"draw",payload:{user:e,index:t}}),ge=e=>se({type:"_33",payload:{characterId:e}}),we=()=>{let{cb:e}=ne();if(!e)return!0;let{putridity:t}=e;return t>0&&t<13},be=()=>ne().cb.putridity,ve=()=>ne().cb.history,Ie=()=>ne().cg.passiveIds.map(g),Ee=()=>ne().cg._30Cards,_e=e=>ne().unlockedChars.includes(e),ke=()=>ne().cg.wins,Me=(e,t)=>se({type:"setPoison",payload:{value:e,user:t}});function Pe(e,t){he(e.applyEffect(be(),ne().cb.poison,(e=>Me(e,t))))}let $e=0,Ce=44100,Be=(...e)=>{let t=me.createBufferSource(),a=me.createBuffer(e.length,e[0].length,Ce);return e.map(((e,t)=>a.getChannelData(t).set(e))),t.buffer=a,t.connect(me.destination),t.start(),t},Le=(e=1,t=.05,a=220,n=0,s=0,r=.1,i=0,d=1,o=0,c=0,l=0,u=0,p=0,f=0,m=0,h=0,y=0,g=1,w=0,b=0)=>{let v,I,E=2*Math.PI,_=o*=500*E/Ce**2,k=(0<m?1:-1)*E/4,M=a*=(1+2*t*Math.random()-t)*E/Ce,P=[],$=0,C=0,B=0,L=1,S=0,D=0,x=0;for(c*=500*E/Ce**3,m*=E/Ce,l*=E/Ce,u*=Ce,p=Ce*p|0,I=(n=99+Ce*n)+(w*=Ce)+(s*=Ce)+(r*=Ce)+(y*=Ce)|0;B<I;P[B++]=x)++D%(100*h|0)||(x=i?1<i?2<i?3<i?Math.sin(($%E)**3):Math.max(Math.min(Math.tan($),1),-1):1-(2*$/E%2+2)%2:1-4*Math.abs(Math.round($/E)-$/E):Math.sin($),x=(p?1-b+b*Math.sin(2*Math.PI*B/p):1)*(0<x?1:-1)*Math.abs(x)**d*e*.4*(B<n?B/n:B<n+w?1-(B-n)/w*(1-g):B<n+w+s?g:B<I-y?(I-B-y)/r*g:0),x=y?x/2+(y>B?0:(B<I-y?1:(I-B)/y)*P[B-y|0]/2):x),v=(a+=o+=c)*Math.sin(C*m-k),$+=v-v*f*(1-1e9*(Math.sin(B)+1)%2),C+=v-v*f*(1-1e9*(Math.sin(B)**2+1)%2),L&&++L>u&&(a+=l,M+=l,L=0),!p||++S%p||(a=M,o=_,L=L||1);return P},Se=e=>((e,t,a,n=125)=>{let s,r,i,d,o,c,l,u,p,f,m,h,y,g,w=0,b=[],v=[],I=[],E=0,_=0,k=1,M={},P=Ce/n*60>>2;for(;k;E++)b=[k=u=h=0],a.map(((n,$)=>{for(l=t[n][E]||[0,0,0],k|=!!t[n][E],g=h+(t[n][0].length-2-!u)*P,y=$==a.length-1,r=2,d=h;r<l.length+y;u=++r){for(o=l[r],p=r==l.length+y-1&&y||f!=(l[0]||0)|o,i=0;i<P&&u;i++>P-99&&p?m+=(m<1)/99:0)c=(1-m)*b[w++]/2||0,v[d]=(v[d]||0)-c*_+c,I[d]=(I[d++]||0)+c*_+c;o&&(m=o%1,_=l[1]||0,(o|=0)&&(b=M[[f=l[w=0]||0,o]]=M[[f,o]]||(s=[...e[f]],s[2]*=2**((o-12)/12),o>0?Le(...s):[])))}h=g}));return[v,I]})(...e),De=(e,t=!1)=>{Be(...e).loop=t},xe=1,He=e=>$e>0&&((...e)=>Be(Le(...e)))(...[$e/2,,...e]),Ne=e=>{e?($e=0,me.suspend()):($e=xe,me.resume())},qe=Se([[[2,0,261.6255653005986,,1,,1,,,,,,.2,,,,.01,.5,.01,.2],[,0,130.8127826502993,,1,,,2,,,.5,,,,,.1,,.4,.05],[1.3,0,65.40639132514966,,.02,,,1.5,,,,,,5,,,,.7,.02],[.5,0,260,,,.04,,,,,,,.1,99,,,,2,.005,.2]],[[[0,0,18,-1,14,19,14,-1,16,19,16,-1,18,-1,14,-1,18,-1,16,19,14,-1,14,19,16,-1,18,-1,14,-1,18,-1,16,19,16,-1,14,19,14,-1,18,-1,16,-1,18,24,14,26,26,-1,24,19,14,-1,18,-1,16,-1,18,-1,14,19,14,24,16,26,26,-1,24,-1,29,0,0,0,16,19,14,-1,14,19,16,-1,18,-1,14,-1,18,-1,16,19,16,-1,14,19,14,-1,18,-1,16,-1,18,-1,14,19,16,-1,16,19,14,-1,18,-1,16,-1,18,-1,14,24,14,26,26,19,24,-1,18,-1,14,-1,18,-1,16,19,14,-1,14,24,16,26,26,-1,24,-1,29,0,0,0,16,-1,14,19,14,-1,18,-1,16,-1,18,-1,14,19,16,-1,16,19,14,-1,18,-1,16,-1,18,-1,14,19,14,-1,16,19,16,-1,18,-1,14,-1,18,-1,16,19,14,24,14,26,26,-1,24,-1,14,-1,18,-1,16,19],[0,0,16,-1,,,,,,,,,14,-1,,,16,-1,,,,,,,,,16,-1,,,14,-1,,,,,,,,,16,-1,,,14,-1,,19,16,-1,16,-1,,,14,-1,,,16,-1,,,,,,19,16,-1,18,-1,14,-1,18,-1,,,,,,,,,16,-1,,,14,-1,,,,,,,,,16,-1,,,14,-1,,,,,,,,,14,-1,,,16,-1,,19,-1,,16,-1,16,-1,14,-1,,,16,-1,,,,,,19,-1,,18,-1,14,-1,18,-1,16,19,-1,,,,,,16,-1,,,14,-1,,,,,,,,,14,-1,,,16,-1,,,,,,,,,14,-1,,,16,-1,,,,,,19,16,-1,18,-1,,,14,-1,,],[0,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14,-1,,,16,-1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,16,-1,,,14,-1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,16,-1,,,,,,],[1,0,,19,18,-1,18,-1,18,-1,18,19,-1,19,-1,19,-1,19,18,-1,18,-1,18,-1,18,19,-1,19,-1,19,-1,19,18,-1,18,-1,18,-1,18,19,-1,19,-1,19,-1,19,18,-1,18,-1,18,-1,18,19,-1,19,-1,19,-1,19,18,-1,18,-1,18,-1,18,19,-1,19,-1,19,-1,19,18,-1,18,-1,18,-1,18,19,-1,19,-1,19,-1,19,18,-1,18,-1,18,-1,18,19,-1,19,-1,19,-1,19,18,-1,18,-1,18,-1,18,19,-1,19,-1,19,-1,19,18,-1,18,-1,18,-1,18,19,-1,19,-1,19,-1,19,18,-1,18,-1,18,-1,18,19,-1,19,-1,19,-1,19,18,-1,18,-1,18,-1,18,19,-1,19,-1,19,-1,19,18,-1,18,-1,18,-1,18,19,-1,19,-1,19,-1,19,18,-1,18,-1,18,-1,18,19,-1,19,-1,19,-1,19,18,-1,18,-1,18,-1,18,19,-1,19,-1,19,-1,19,18,-1]]],[0],100]),Te=Se([[[2,0,261.6255653005986,,1,,1,,,,,,.2,,,,.01,.5,.01,.2],[,0,130.8127826502993,,1,,,2,,,.5,,,,,.1,,.4,.05],[1.3,0,65.40639132514966,,.02,,,1.5,,,,,,5,,,,.7,.02],[.5,0,260,,,.04,,,,,,,.1,99,,,,2,.005,.2]],[[[0,0,24,36,48,60,0,-1]]],[0],100]),Ae=()=>He([40,.5,,1.5,,11,,,,,,199]),We=()=>He([539,0,.04,.29,1,1.92,,,567,.02,.02,,,,.04]);function ze(e=!1){var t;!function({defaultMuted:e=!1,maxVolume:t=1}={}){me=new(window.AudioContext||webkitAudioContext),xe=t,Ne(e)}({defaultMuted:e}),X(!e),De(qe,!0),t=e=>{var t;t=!e.currentTarget.checked,Ne(t),X(!t),(e=>{se({type:"toggleMuteSounds",payload:{isMuted:e}})})(t)},q.onchange=t,document.body.addEventListener("click",(e=>{"A"!==e.target.tagName&&"INPUT"!==e.target.tagName&&"BUTTON"!==e.target.tagName||He([20,.02,,.04,1,3,41,,,,,,1,,,,,1])}))}(async()=>{async function r(e,t){let a=t?"p":"o";((e,t)=>{se({type:"playCard",payload:{uniqCardId:e,user:t}})})(e,a);let n=(e=>{let{cg:t,cb:a}=ne(),n=[...t._30Cards];return a&&n.push(...a.opponentDeck,...a.opponentHand,...a.opponentDiscard),n.find((({uniqId:t})=>e===t))})(e);return He([537,.02,.02,.22,1,1.59,-6.98,4.97]),await async function(e,t){let a="p"===e,n=(a?I:E).getBoundingClientRect(),{left:s,top:r}=n;switch(k.style.left=`${s}px`,k.style.top=`${r}px`,k.classList.add(t.id,t.status),t.size){case"mini":k.style.transform="scale(2)";break;case"maxi":k.style.transform="scale(4)";break;default:k.style.removeProperty("transform")}a&&k.classList.add("fromPlayer");let i=k.animate([{offsetDistance:"0%"},{offsetDistance:"100%"}],{duration:700,iterations:1,fill:"forwards"});await i.finished,i.cancel(),k.style.removeProperty("left"),k.style.removeProperty("top"),k.classList.remove(t.id,"fromPlayer",t.status)}(a,n),Pe(n,a),!we()}await async function({onPlayCard:e}){!function(){let e=document.createElement("canvas");e.width=16,e.height=16;let t=e.getContext("2d"),a=["transparent","#fff","#3f2631"];[[0,0,0,0,1,1,1,1],[0,0,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,1,1],[0,1,2,2,2,1,1,2,2,2,1],[0,1,2,2,2,1,1,2,2,2,1],[0,1,2,2,1,1,1,1,2,2,1],[1,1,1,1,1,2,2,1,1,1,1,1],[1,1,1,1,1,2,2,1,1,1,1,1],[1,2,2,1,1,1,1,1,1,2,2,1],[0,1,2,1,2,1,1,2,1,2,1],[0,1,2,2,2,2,2,2,2,2,1],[0,0,1,2,1,2,2,1,2,1],[0,0,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,1,1]].forEach(((e,n)=>{e.forEach(((e,s)=>{t.fillStyle=a[e],t.fillRect(s+2,n,1,1)}))})),A.href=e.toDataURL()}(),v.onclick=async t=>{let a=t.target;if(!("uniqId"in a.dataset))return;document.body.inert=!0;let n=a.animate([{transform:"translateY(0)"},{transform:"translateY(-500px)"}],{duration:300,iterations:1,fill:"forwards"});a.dataset.played=1,await n.finished,await e(a),document.body.inert=!1}}({async onPlayCard(e){let t=Array.from(e.parentNode.children).indexOf(e),a=await r(Number(e.dataset.uniqId),!0);if(a)return Ae(),He([925,.04,.3,.6,1,.3,,6.27,-184,.09,.17]),await j(!1,ve()),void(_e("custom")?n("_3"):(ge("custom"),n("_31")));ye("p",t);let i=await(async()=>{let{cb:e,cg:t}=ne();if(t.wins<4)return e.opponentHand[s(e.opponentHand.length-1)].uniqId;ue=!0;let a=e.putridity,n=e.poison,r=e.opponentHand.map((e=>{Pe(e,"o");let t=we(),s=be();if(he(a),Me(n),!t)return{uniqId:e.uniqId,weight:999};let r=13-s,i=s-0;return{uniqId:e.uniqId,weight:Math.min(i,r)}})).sort(((e,t)=>e.weight-t.weight));return ue=!1,r[0].uniqId})();if(a=await r(i),a)return Ae(),De(Te),await j(!0,ve()),se({type:"addWin"}),void n(8===ke()?"_32":"_24");ye("o")}}),function(e,t){te=e,ae=t}(fe,ee().state||le);let d=!1;!function(s){a=s;let r=[];for(let t of document.querySelectorAll("section[id]"))e.push(t.id),r.push(`body[data-current-section="${t.id}"] section#${t.id}`);function i(){!function(n){let s=function(t){return e.includes(t)}(n)?n:"title";s!==document.body.dataset.currentSection&&(document.body.dataset.currentSection&&(document.body.dataset.prevSection=document.body.dataset.currentSection),!1!==a({nextSection:s,currentSection:document.body.dataset.prevSection,vars:t})?document.body.dataset.currentSection=s:window.history.forward())}(window.location.hash.substring(1))}document.head.insertAdjacentHTML("beforeend",`<style>${r.join(",")+"{display:flex;}"}</style>`),window.addEventListener("hashchange",i),document.body.addEventListener("click",(e=>{"A"===e.target.tagName.toUpperCase()&&(t=JSON.parse(JSON.stringify(e.target.dataset)))})),n("#rules"===window.location.hash?"rules":"title"),i()}((({currentSection:e,nextSection:t,vars:a})=>{switch("_13"===e&&(R=!1),!d&&("title"===e&&"title"!==t||"rules"===e&&"rules"!==t)&&(d=!0,ze(ne().muted)),t){case"_3":r=oe.map((e=>_e(e.id)?{...e,d:!1}:{...e,name:"Locked",desc:("custom"===e.id?"Loose a game":"Play")+" to unlock this character!",d:!0})),$.innerHTML="",r.forEach((e=>{let t,a=O({id:e.id,getName:()=>e.name,getDesc:()=>e.d?e.desc:`<q>${e.desc}</q>`});if(e.d)a.classList.add("d"),t=document.createElement("div"),t.append(a);else if(t=document.createElement("a"),"custom"===e.id){let{origin:e,pathname:n}=window.location;t.href="https://tinyurl.com/ybs6bmv8?b="+encodeURIComponent(e+n),t.append(a)}else t.href="#rules",t.dataset.characterId=e.id,t.append(a);$.append(t)}));break;case"rules":{let o=new URLSearchParams(window.location.search).get("d");(a.characterId||o)&&((e,t)=>{se({type:"startGame",payload:{playerCharacterId:e,customDeckString:t}})})(a.characterId,o);break}case"_32":{if(ne().unlockedChars.length===oe.length){Y("_36");break}let c=(e=>{let t=oe.findIndex((({id:t})=>t===e));return oe[t+1]})(ne().cg.playerId);_e(c.id)?Y("_35"):(ge(c.id),function(e){let t=O({id:e.id,getName:()=>e.name,getDesc:()=>`<q>${e.desc}</q>`});_34.innerHTML="",_34.append(t)}(c),Y("_33"),We());break}case"_13":if("_7"!==e)return!1;se({type:"startBattle"}),ye("p"),ye("p"),ye("p"),ye("p"),ye("o"),ye("o"),ye("o"),ye("o");break;case"_24":{if("_13"!==e)return!1;let l=ke();function s(){let e=Ie();!async function(e,t){N.dataset.type="ingredients",M.innerHTML="";let a=document.createDocumentFragment();e.forEach((e=>{let n=document.createElement("button");n.type="button",n.className="option",n.onclick=()=>{t(e)};let s=document.createElement("ul");e.forEach((e=>{let t=document.createElement("li"),a=O(e);a.classList.add("mini"),t.append(a),s.append(t)})),n.append(s),a.append(n)})),M.append(a)}([u(l,e),u(l,e),u(l,e)],(e=>{We(),(e=>{se({type:"addPlayerCards",payload:{cards:e}})})(e),n("_7")}))}switch(K(Ee()),l){case 1:case 3:case 5:case 7:!async function(e){N.dataset.type="passives",P.innerHTML="";let t=document.createDocumentFragment();e.forEach((e=>{let a=document.createElement("button");a.type="button",a.className="option",a.onclick=()=>{(e=>{We(),(e=>{se({type:"addPlayerPassive",payload:{passiveId:e}})})(e),K(Ee()),s()})(e.id)};let n=document.createElement("ul"),r=O(e,"li");r.classList.add("big"),n.append(r),a.append(n),t.append(a)})),P.append(t)}(function(e,t){let a,n=y.filter((({level:e})=>1===e)),s=y.filter((({level:e})=>2===e)),r=y.filter((({level:e})=>3===e));switch(e){case 1:a=[...n];break;case 3:a=[...n,...s];break;case 5:a=[...n,...s,...r];break;case 7:a=[...s,...r]}let[d,o,c]=i(a.filter((({id:e,linkedId:a})=>!t.includes(e)&&!t.includes(a))));return[d,o,c]}(l,Ie().map((({id:e})=>e))));break;default:s()}break}case"_7":if("rules"!==e&&"_24"!==e)return!1}var r}))})()</script></body></html>