<html><title>Infernal Throne - js13kGames 2022</title><link rel="shortcut icon"/><style>body{overflow:hidden;background:#000;margin:0;font-family:sans-serif}h1{color:#fff;text-align:center;margin-top:150px;}</style><h1>ðŸ”¥ INFERNAL THRONE ðŸ‘‘<br>press any key</h1><canvas/><script>var t={};function e(e,a){(t[e]||(t[e]=[])).push(a)}function a(e,a){t[e]=(t[e]||[]).filter(t=>t!=a)}function n(e,a){(t[e]||[]).map(t=>t(a))}var r=[["#e22",9,0],[14,-40,18,-26,1,0,-1,0,-18,-26,-14,-40],[-7,-11,7,-11],["#fff",4,5],[-9,-11,-3,-9],[9,-11,3,-9]],o=[["#fff",6,0],[-11,-7,-7,-7,7,7,7,11],[-7,-11,-7,-7,7,7,11,7]],i=[[["#4af",2,0],[10,-12,15,12,-15,12,0,0,-10,0]],[["#4af",2,0],[10,-15,-10,-7,10,0,-10,7,10,15]],[["#4af",2,0],[0,-18,0,-5,12,0,0,12,-12,0]],[["#4af",2,0],[-15,-11,-15,11,0,11,0,-11,15,-11,15,11]],[["#4af",2,0],[0,-15,10,0,0,15,-10,0,0,-15]]],h=[["#a63",8,0],[20,0,-20,0,-28,-23,28,-23,20,0],[-28,-23,-24,-40,24,-40,28,-23],["#ffa",8,0],[0,-27,0,-19]],l=["The Crossroads","Undergrowth","Boneyard Caverns","Fields of Mourning","Throne Room"],s=(t,e)=>{let a=g.createLinearGradient(t,e,t,e-200);return a.addColorStop(0,"rgba(255,255,110,0.3)"),a.addColorStop(1,"rgba(255,255,110,0.0)"),a},f=document.getElementsByTagName("canvas")[0];function u(t,e){g.strokeStyle=t,g.fillStyle=e||t}function c(t,e,a,n){g.translate(e,a),g.scale(t,n||t),g.translate(-e,-a)}function M(t,e,a,n,r,o,i){d(()=>{g.translate(e,a),g.rotate(o);var h=Math.cos(r),l=Math.sin(r);let s=n;for(let e=0;e<t.length;e++){var f=t[e];if(3==f.length)u(f[0],i||f[0]),g.lineWidth=f[1],s=n+f[2];else{g.beginPath(),g.moveTo(f[0]*h-s*l,f[1]);for(let t=2;t<f.length;t+=2)g.lineTo(f[t]*h-s*l,f[t+1]);i&&g.fill(),g.stroke()}}})}function p(t,e,a,n){g.fillStyle="#fff",g.textAlign="left",g.font=`bold ${n}px arial`,g.fillText(t,e,a)}function d(t){var e=g.getTransform();t(),g.setTransform(e)}f.width=innerWidth,f.height=innerHeight;var m=document.createElement("canvas"),g=(m.width=m.height=64,g=m.getContext("2d"),M(r,32,48,0,0,0),f.getContext("2d")),y=(document.querySelector("link").href=m.toDataURL(),g.textBaseline="middle",g.lineJoin="round",g.lineCap="round",g.imageSmoothingEnabled=!1,c(3,f.width/2,160),M(r,f.width/2,160,0,0,0),g.setTransform(1,0,0,1,0,0),0),x=[],b={},v=[],T=0,w=0;function V(t){let e=Math.min(.001*(t-T),.018);g.clearRect(0,0,f.width,f.height),d(()=>{let a=q(y)[0];var n;a.set(g),v.length=0,x.map(t=>{t.update?.(e)&&v.push(t)}),v.length&&(x=S(x,n=v),n.map(t=>{t.tags?.map(e=>{b[e]=S(b[e],[t])})})),x.map(t=>{t.inView(a.x,a.y)&&t.render?.(g)}),requestAnimationFrame(V),T=t})}function A(t){t.inView||(t.inView=()=>1),x.push(t),x.sort((t,e)=>(t.order||0)-(e.order||0)),t.tags?.map(e=>{b[e]=b[e]??[],b[e].push(t)})}function S(t,e){return t.filter(t=>!e.includes(t))}function q(t){return b[t]||[]}var k=0,F=3,R=0,K=0,L=0;function W(t,e,a,n){return t<a+n&&a<t+e}function E(t,e,a){return e>t.x+t.ox&&e<t.x+t.ox+t.w&&a>t.y+t.oy&&a<t.y+t.oy+t.h}function J(t,e){return W(t.x+t.ox,t.w,e.x+e.ox,e.w)&&W(t.y+t.oy,t.h,e.y+e.oy,e.h)}function I(t,e,a,n,r,o){let i={set:(t,e,a,n,r,o)=>{i.x=t,i.y=e,i.ox=a,i.oy=n,i.w=r,i.h=o},isTouching:t=>J(i,t)};return i.set(t,e,a,n,r,o),i}function U(t,e,a){return Math.max(Math.min(t,a),e)}function C(t){return JSON.parse(JSON.stringify(t))}function Z(t,e,a,n){return!(a+1e3<t||n+700<e||t<a-1e3||e<n-700)}var N=[0,0,!1,!1,!1,!1];function P(t){let e=t.x,a=t.y,n=!1,r=!1,o=!1,i=!1;return q(3).map(({physics:h})=>{if(t.isTouching(h)){let l=!1;a+t.oy+10<h.y+h.h&&a+t.oy+t.h-10>h.y&&(e-10<h.x&&(e=h.x+h.ox-t.ox-t.w+.1,r=!0,l=!0),e+10>h.x+h.w&&(e=h.x+h.ox+h.w-t.ox-.1,o=!0,l=!0)),l||(a-45<h.y&&(a=h.y+h.oy-t.oy-t.h+.1,n=!0),a+t.oy+t.h/2>h.y+h.h&&(a=h.y+h.oy+h.h-t.oy+.1,i=!0)),t.x=e,t.y=a}}),N[0]=e,N[1]=a,N[2]=n,N[3]=r,N[4]=o,N[5]=i,N}var j=[!1,!1];function H(t,e=1,a=0){let n=!1,r=!1;return q(3).map(({physics:o})=>{E(o,t.x+40*e-4*a,t.y+4*e+40*a)&&(n=!0),E(o,t.x-40*e-4*a,t.y+4*e-40*a)&&(r=!0)}),j[0]=n,j[1]=r,j}var B={},G=(onkeydown=t=>{B[t.code]||(B[t.code]=Date.now()),n(17)},onkeyup=t=>delete B[t.code],t=>Date.now()-B[t]<100),D=function(){let t,a,n,i=C(r),s=C(o),u=C(h);return e(11,function(e){t=l[e],n=4,a=n}),e(15,function(){t="Checkpoint",n=4,a=n}),e(14,function(e){let r=(Date.now()-w)/1e3;var o=parseInt(r/60);r-=60*o,t=["Twisted Horns - [C] to dash","Iron Claws - Climb walls","Fireball - [V] to cast","Wingspan - [Z] to use",`VICTORY! ðŸ¦´${k}  âŒ›${o}:${r.toFixed(1)}  ðŸ’€`+K][e],n=4==e?30:5,a=n}),{update:function(t){a-=t},render:function(e){d(()=>{var r;B.KeyM&&(e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0,0,0,0.7)",e.fillRect(0,0,f.width,f.height),e.setTransform(4,0,0,4,f.width/2-252,f.height/2-252),e.drawImage(q(4)[0].m,0,0),Math.cos(Date.now()/50)<.5&&(r=q(1)[0].playerHitbox,e.fillStyle="#e22",e.fillRect(r.x/100-.5,r.y/100-1.5,2,2))),e.setTransform(.8,0,0,.8,0,0);for(let t=0;t<3;t++)t>=F?i[0][0]=i[3][0]="#555":(i[0][0]="#e22",i[3][0]="#fff"),M(i,50+55*t,72,0,0,0);M(s,50,144,0,-a,0),p(k,80,146,30),0<a&&(e.globalAlpha=U(a,0,1)*U(-a+n,0,1),e.lineWidth=18,p(t,36,1.15*f.height,80),e.strokeStyle="#000",e.strokeText(t,36,1.15*f.height),p(t,36,1.15*f.height,80),e.globalAlpha=1),p(L+" / 34",80,103,30),c(.5,50,102),M(u,50,120,0,0,0,"#742")})},order:1e4}},O=function(t,e,a,n,r=0){let o=0,i=a;return{update:function(t){if(o+=5*t,n-=t,a=Math.min(i*o*2,i),n<.5&&(a=i*n*2,o+=3*t),n<0)return!0},render:function(n){d(()=>{n.translate(t,e),n.rotate(-r),n.fillStyle="#f93";for(let t=0;t<6;t++){var i=(t+o)%6/6,h=a*U(10*i/(1+i*i*15)*(1-i),0,1);n.beginPath(),n.arc(Math.cos(4*t)*a,40*-i*a,10*h,0,6.28),n.fill()}n.fillStyle="#f53",n.beginPath(),n.arc(Math.cos(13*o)*a/2,4*-a,5*a*(1+.1*Math.cos(11*o)),0,6.28),n.fill()})},set:e=>{t=e},end:()=>{n=.25},inView:(a,n)=>Z(t,e,a,n),order:-4500}};function z(t,r,o){let i=10*Math.random(),h=0,l=0,s=127<o?-1:1,f=s,u=0,p=3,m=I(t,r,0,0,0,0),g=[["#fff",5,0],[0,-13,4,-29,13,-40],[0,-16,-2,-17],[2,-22,-3,-24],[4,-28,0,-30],[6,-33,4,-35]],y=[["#fff",5,0],[-8,0,0,-13,8,0]],x=[["#fff",5,0],[0,0,14,15]],b=[["#fff",9,0],[3,10,-3,10,-3,0,-6,-4,0,-10,6,-4,3,0,3,10],["#000",4,5],[-5,-6,-3,-5],[5,-6,3,-5]];function v([e,a,o,i]){m.isTouching(e)&&0<p&&(h=600*a,s=-Math.sign(a),u=1,(p-=i?2:1)<=0&&n(19,[t,r-55,4,1]),n(1,[o]))}return e(0,v),{update:function(e){if(p<=0)return a(0,v),!0;var o,c,M,d;l+=1400*e,[t,r,o,c,M,d]=P(m),[hasRight,hasLeft]=H(m,.5),o&&500<l&&(p=0,n(19,[t,r-55,4,1])),(c||!hasRight&&o)&&(s=-1),(M||!hasLeft&&o)&&(s=1),(o||d)&&(l=0),u<=0&&o&&(h=60*f),0<u&&(h-=12*h*e),i+=e,t+=h*e,r+=l*e,f+=8*(s-f)*e,u=Math.max(0,u-2*e),m.set(t,r,-20,-59,40,60)},render:function(e){let a=.6*f,n=6*i;d(()=>{c(1.3,t,r);var o=Math.cos(n)/20*1-f*u*.3;y[1][0]=8*Math.cos(n)*f*1,y[1][1]=4*Math.min(0,Math.sin(n))*1,y[1][4]=8*Math.cos(3+n)*f*1,y[1][5]=4*Math.min(0,Math.sin(3+n))*1,.2<u&&(e.globalAlpha=0<Math.cos(25*u)?.2:1),M(y,t,r,0,a,0),M(x,t+7*a*1+50*o,r+ +(-33-2*a+Math.cos(n-1)),-4,2.1*a,-a/3),M(x,t+7*a*1+50*o,r+ +(2*a-33+Math.cos(2+n)),4,2.1*a+3.14,-a/3),M(g,t,r,0,2*a-1.57,o),M(b,t,r+ +(-40+Math.cos(1+n)),23+70*o*f,-a,-u*f*.6),e.globalAlpha=1})},inView:(e,a)=>Z(t,r,e,a),order:500,tags:[2],enemyHitbox:m}}var Y=[0,3.1,4.7,1.5];function X(t,r,o){let i=10*Math.random(),h=0,l=0,s=127<o?-1:1,f=o%4,u=s,p=0,m=4,g=0,y=0,x=!1,b=3*Math.random(),v=[-50,0,-50,-59].map(t=>1.1*t/1.3),T=[-59,-50,0,-50].map(t=>1.1*t/1.3),w=[100,60,100,60].map(t=>1.1*t/1.3),V=[60,100,60,100].map(t=>1.1*t/1.3),A=6.28*f/4,S=f%2==0,q=Math.cos(A),k=Math.sin(A),F=I(t-=50*k,r+=50*q,0,0,0,0),R=[];for(let t=0;t<21;t++)R.push(24*Math.cos(t/20*6.28),17*Math.sin(t/20*6.28));let K=[["#fff",5,0],R],L=[["#000",4,0],[-7,-6,-3,-5],[7,-6,3,-5],["#000",4,3],[-7,0,-3,1],[7,0,3,1],["#000",4,4],[-7,6,-3,7],[7,6,3,7]],W=[["#fff",5,10],[6,0],[-6,0],["#fff",5,-10],[6,0],[-6,0]];function E([e,a,o,i]){F.isTouching(e)&&0<m&&(p<=0&&(h=300*a*Math.abs(q)+200*k,l-=200*q),g<=0&&y<=0&&(s=-a),p=1,(m-=i?2:1)<=0&&n(19,[t+F.ox+F.w/2,r+F.oy+F.h/2,7,1]),n(1,[o,i?0:a]))}return e(0,E),{update:function(e){if(m<=0)return a(0,E),!0;var n,o,c,M;h-=1300*k*e,l+=1300*q*e,[t,r,n,o,c,M]=P(F),[hasRight,hasLeft]=H(F,1.3*q*1.1,1.3*k*1.1),S&&(hasRight||(s=-1),hasLeft||(s=1),c&&(s=q),o&&(s=-q)),0==f&&n&&0<l&&(l=0),1==f&&(!n&&hasRight||(s=-1),!M&&hasLeft||(s=1),c&&h<0&&(h=0)),2==f&&M&&l<0&&(l=0),3==f&&(!n&&hasLeft||(s=1),!M&&hasRight||(s=-1),o&&0<h&&(h=0)),b<0&&(y=.5,h=0,l=0,x=!0,b=2*Math.random()+1.5),y<=0&&x&&(g=.6,x=!1),0<g&&(S?h=(800*g+100)*u*q:l=(800*g+100)*u*k),y<=0&&(p<=0?g<=0&&(S?h=50*u*q:l=50*u*k):S?h-=12*h*e:l-=12*l*e),i+=0<y?2*-e:e*(1+2*g),t+=h*e,r+=l*e,u+=8*(s-u)*e,p=Math.max(0,p-2*e),g=Math.max(0,g-e),y=Math.max(0,y-e),b-=e,F.set(t,r,v[f],T[f],w[f],V[f])},render:function(e){let a=.6*u,n=11*i;d(()=>{c(1.1,t,r);var o=32+Math.cos(n),i=x?(40*y*y-10)*u:0,h=Math.cos(n/2)/15*1+A+g*u;for(let t=0;t<4;t++){var l=t%2?1:-1,s=Y[t],f=t<2?-3:7,d=t<2?1+t:2+t;W[d][2]=11*l-4*Math.cos(n+s)*u*1,W[d][3]=12,W[d][4]=(40+f)*l-2*Math.cos(n+s)*u*1,W[d][5]=4*Math.cos(n+s)*1-5,W[d][6]=(44+f)*l-9*Math.cos(n+s)*u*1,W[d][7]=+Math.min(10*-Math.sin(n+s),0)+20}.2<p&&(e.globalAlpha=0<Math.cos(25*p)?.2:1),M(W,t+21*k,r-21*q,0,1.4*-a,A),M(K,t+o*k+i*q,r-o*q+i*k,0,a/2,a/2+h,"#fff"),M(L,t+o*k+i*q,r-o*q+i*k,17,-a,-a/2+h,"#fff"),e.globalAlpha=1})},inView:(e,a)=>Z(t,r,e,a),order:500,tags:[2],enemyHitbox:F}}function Q(t,r,o){let i=0,l=0,s=3*o,f=I(t-25,(r+=50)-55,0,0,50,55);var u=["#a63","#889","#db1"][o-1];let p=["#742","#667","#b90"][o-1],m=C(h);function g([e,,a]){f.isTouching(e)&&(i=1,l=7*Math.random(),--s,n(19,[t,r-20,1,1]),n(1,[a]))}return m[0][0]=u,e(0,g),{update:function(e){if(s<=0)return n(19,[t,r-20,[7,14,11][o-1],1]),n(19,[t,r-20,[1,3,7][o-1],2]),a(0,g),L++,q(4)[0].d(parseInt(t/100),parseInt(r/100),null),!0;i=Math.max(i-e,0)},render:function(){d(()=>{c(.75+.15*o,t,r),M(m,t,r-2-Math.abs(12*Math.cos(20*i))*Math.exp(6*i-3)/10,0,0,Math.cos(30*i+l)*i*Math.exp(6*i-3)/60,p)})},inView:(e,a)=>Z(t,r,e,a),order:-6e3}}var $=[["#f52",6,0]];for(let t=-50;t<50;t+=26)$.push([t,50,t+10,25,t+10,140,t+10,25,t+20,50]);var tt=[["#f82",40,0],[-47,50,47,50]],et=[-45,-125,-45,35],at=[35,-45,-125,-45];function nt(t,e,a){let n,r=0,o=Math.random(),i=Math.random()+.5,h=80*(Math.random()-.5),l=0,s=a<4?1:0;return{update:function(t){1<(o+=t*i)&&(i=2*Math.random()+.5,o=0,h=80*(Math.random()-.5));var e=(Date.now()+1500*s)%3e3;let n=0;4<=a&&a<=7&&0==(l=1500<e?1:0)&&500<e&&(n=Math.cos(e/20)/20),r+=15*(l+n-r)*t},render:function(i){var l=1.57*a,s=Math.sin(l)*r*91,f=-Math.cos(l)*r*91;8==a?(i.fillStyle="#f82",i.beginPath(),i.arc(t+h,e+50-40*o,40*(o-o*o),0,2*Math.PI),i.fill(),M(tt,t,e,0,0,0)):M($,t+s,e+f,0,0,l),n.x=t+s,n.y=e+f},inView:(a,n)=>Z(t,e,a,n),order:-6e3,tags:[2],enemyHitbox:n=I(t,e,et[a%4],at[a%4],90,90)}}function rt(t,a,n){let r=!1,o=50,i=[["#fff",8,0],[0,0,0,-200],[-50,-190,50,-190],[-50,-20,50,-20]],h=([-1,1].map(t=>{i.push([20*t,0,25*t,-200],[40*t,0,43*t,-230,40*t,-260,30*t,-260,25*t,-250,33*t,-245])}),I(t-50,a-220,0,0,100,220));return e(10,function([t,e]){t==n&&(r=e)}),{update:function(t){o+=((r?-150:50)-o)*t,h.y=a+o-220},render:function(e){M(i,t,a+o,0,0,0)},inView:(e,n)=>Z(t,a-100,e,n),tags:[3],physics:h,order:-7e3}}function ot(t,a,r,o=0){let i=!1,h=1==o,l=0,s=I(t-40,a-15,0,0,80,65),f=[["#a53",8,0],[0,0,0,-60,-5,-68,0,-76,5,-68,0,-60]],u=[["#a53",8,0],[-30,50,-16,28,16,28,30,50],[-18,50,-10,38,10,38,18,50]];return e(0,function([t,,e]){s.isTouching(t)&&!i&&(i=!0,n(10,[r,i]),n(1,[e]),s.x=-1e3)}),{update:function(t){l+=10*(.7*(i^h?1:-1)-l)*t,f[0][0]=i?"#5af":"#a53"},render:function(e){M(f,t,a+50,0,0,l),M(u,t,a,0,0,0)},inView:(e,n)=>Z(t,a,e,n),order:-6e3}}function it(t,e,a){return ot(t,e,a,1)}function ht(t,e,a){let r=0,o=0,h=!1,l=!1,f=[["#777",5,0],[200,60,-200,60,-200,0,-100,0,-100,-50,100,-50,100,0,200,0,200,60]],u=[["#911",10,0],[-100,-40,-100,-50,100,-50,100,-25],[-70,-50,-70,-25],[40,-50,40,-15],[60,-50,60,-35]],c=[["#fff",6,0]],p=[],d=[],m=1.256;for(let t=0;t<6;t++)p.push(100*Math.sin(t*m),100*-Math.cos(t*m)),d.push(100*Math.sin(t*m*2),100*-Math.cos(t*m*2));c.push(p,d);let g=C(i),x=s(t,e);var b=I(t-200,e,0,0,400,50);let v=I(t-75,e-60,0,0,150,10);return A({tags:[3],physics:I(t-100,e-50,0,0,200,50)}),{update:function(i){if(r+=i,h)o=3;else if(J(v,q(1)[0].playerHitbox)){l||(n(12),l=!0),o+=i;let r=q(y)[0];var s=o/3,f=1-s;r.aim(r.x*f+t*s,r.y*f+(e-100)*s,1+.4*Math.sqrt(o)*s,s),3<o&&(h=!0,c[0][0]="#ee2",g.map(t=>{t[0][0]="#ee2"}),n(19,[t,e-100,a<4?20:0,1]),n(14,a))}else o-=2*o*i,l&&(n(13),l=!1)},render:function(n){var i=5*Math.sin(2*r)-200;M(f,t,e,0,0,0,"#777"),h?(c[0][1]=4,n.fillStyle=x,n.fillRect(t-100,e-250,200,200)):(n.globalAlpha=.5*Math.cos(o*o*10)+.5,c[0][1]=6*(1-o/3)),M(c,t,e+i,0,0,1.256*-o/3),n.globalAlpha=1,M(u,t,e,0,0,0);for(let n=0;n<5;n++){var l=3*Math.cos(.2*n+3*r)+130;M(g[a],t+Math.sin(n*m)*l,e+i-Math.cos(n*m)*l,0,0,o*o*7*(n%2-.5))}},inView:(a,n)=>Z(t,e-100,a,n),tags:[3],physics:b,order:-8e3}}function lt(t,a,o){let h=0,l=0,f=!1,u=!1,c=[["#777",5,0],[100,60,-100,60,-100,0,100,0,100,60]],p=[["#911",10,0],[-100,10,-100,0,100,0,100,25],[30,0,30,25],[-70,0,-70,35],[60,0,60,15]],d=C(r),m=(d[0][0]="#ee2",d.splice(3,3),C(i)),g=s(t,a);var x=I(t-100,a,0,0,200,50);let b=I(t-75,a-10,0,0,150,10);return e(20,function(){o==R&&q(1)[0].reset(t,a-150)}),{update:function(e){if(f=R==o,h+=e,f)l=3;else if(J(b,q(1)[0].playerHitbox)){u||(n(12),u=!0),l+=e;let h=q(y)[0];var r=l/3,i=1-r;h.aim(h.x*i+t*r,h.y*i+(a-100)*r,1+.4*Math.sqrt(l)*r,r),3<l&&n(15,[o])}else u&&(n(13),u=!1),l-=3*l*e},render:function(e){m.map(t=>{t[0][0]=f?"#ee2":"#4af"}),M(c,t,a,0,0,0,"#777"),f?(e.fillStyle=g,e.fillRect(t-50,a-200,100,200),M(d,t,a-50+4*Math.cos(5*h),0,h,0)):e.globalAlpha=.5*Math.cos(l*l*15)+.5;for(let e=0;e<5;e++)M(m[e],t-40*(e-1.9),a+25,0,0,0);e.globalAlpha=1,M(p,t,a,0,0,0)},inView:(e,n)=>Z(t,a,e,n),tags:[3],physics:x,order:-8e3}}var st=[0,0,["#b72","#741",1,2,7,7,5,3,[3,3,1,2,0],3],0,function(t,r){r-=50;let o=!1,i=0,h=0,l=0,s=[["#fff",4,0]],f=[],u=[];for(let t=0;t<8;t++){let e=(Math.random()-.5)/4-2.3+t%4/2;3<t&&(e+=3.14);var c=110/Math.abs(Math.sin(e));f.push(e),u.push(c),s.push([0,0,Math.cos(e)*c,Math.sin(e)*c])}let p=[],d=(s.push(p),I(t-50,r-100,0,0,100,200));function m(){var t=l*Math.cos(h),e=.8*l*Math.cos(h/1.4);for(let a=0;a<8;a++)s[1+a][0]=t,s[1+a][1]=e;for(let o=0;o<32;o++){var a=f[o%8],n=(o/70+.07)/(1-.5*Math.abs(Math.sin(a))),r=u[o%8]*n;p[2*o]=Math.cos(a)*r+t*(1-n),p[2*o+1]=Math.sin(a)*r+e*(1-n)}}function g([e,,a,i]){if(d.isTouching(e)){if(l=10,i&&!o){o=!0;for(let e=0;e<18;e++)setTimeout(()=>{n(18,[t+170*(Math.random()-.5),r+190*(Math.random()-.5)+20,+Math.random()+1,.5*Math.random()+.5])},Math.random()*(100+33*e));d.h=0}i||n(16),n(1,[a])}}return e(0,g),m(),{update:function(t){if(h+=56*t,l-=5*l*t,m(),o&&1<(i+=t))return a(0,g),!0},render:function(e){var a,n;o&&(a=1-i,n=Math.max(255-1e3*i,0),s[0][0]=`rgb(${n},${n},${n})`,s[0][1]=4*a),M(s,t,r,0,0,0)},inView:(e,a)=>Z(t,r,e,a),order:-9e3,tags:[3],physics:d}},0,Q,2,z,0,Q,1,Q,3,X,2,nt,3,nt,1,X,3,nt,8,z,128,0,0,lt,4,nt,0,rt,6,ht,3,["#fc1","#a71",9,9,3,1,1,0,[0],4],0,it,6,ht,4,["#b5c","#535",7,7,4,2,1,2,[1,1,1,3,0],2],0,X,0,["#a99","#433",5,1,4,9,2,1,[0,0,0,1,3],0],0,["#474","#242",2,3,1,1,5,4,[2,2,2,0],1],0,X,128,nt,6,ot,1,rt,1,ht,0,rt,4,function(t,a){let o=0,i=0,h=0,l=0,s=1,f=1,c=0,p=0,m=0,g=0,x=0,b=I(t,a,-14,-55,28,50),v=0,T=!1,w=!1,V=0,A=!1,S=0,k=0,R=0,K=2,L=2,W=1,E=!1,J=0,Z=1,N=!1,j=!1,H=!1,D=0,O=!1,z=0,Y=0,X=0,Q=0,$=0,tt=C(r),et=(tt[1].pop(),tt[1].pop(),tt[1].shift(),tt[1].shift(),tt[1][0]=10,tt[1][6]=-10,tt[1][1]=tt[1][7]=-16,tt.unshift([10,-16,11,-27]),tt.unshift([-10,-16,-11,-27]),tt.unshift(["#caa",6,0]),[["#e22",9,0],[0,-37,0,-17],[0,-17,7,0],[0,-17,-7,0]]),at=[["#e22",9,0],[4,0,14,6],["#e66",2,0],[18,5,20,6],[15,9,17,11]],nt=[["#e22",9,0],[0,-17,-16,0,-26,0,0,0,0,0]],rt=[["#f93",6,0],[0,0,-5,-5,0,-17,5,-5],["#f53",6,0],[0,0,0,-9]],ot=[["#e22",3,0]],it="rgba(230,100,70,0.5)";function ht(t){0==t&&(H=!0,tt=C(r)),1==t&&(T=!0,at.pop(),at.pop(),at.pop(),at.push(["#def",3,0],[18,5,25,8],[15,9,22,13])),2==t&&(O=!0),3==t&&($=1,ot.push([0,0,-20,-10,-50,-5,-55,15,-25,6,-40,-5,-25,6,-20,-10,-25,6,0,4]))}return e(14,ht),e(1,function([,t]){t&&(h=300*-t)}),{update:function(e){if(!w){o+=e,W=Math.min(W+e,1),K=Math.min(K+2*e,1),L=Math.min(L+2*e,1),D+=e,Z+=e;var r=(B.ArrowLeft?-1:0)+(B.ArrowRight?1:0);let d=(B.ArrowUp?1:0)+(B.ArrowDown?-1:0);var u=G("KeyX"),M=G("KeyV");G("KeyC")&&j&&H&&!A&&.8<Z&&(Z=0,N=!0,W=0,j=!1,h=1e3*f,n(5)),A&&Math.abs(d)<.3&&.3<Math.abs(r)&&Math.sign(r)==Math.sign(s)&&(d=1);let y,C,tt,et,at=([t,a,y,C,tt,et]=P(b),C&&0<s||tt&&s<0);at&&0<=S&&(at=!1),y&&(l=0,g=.15,z=0,y=!0,j=!0),et&&(l=0),A?(z=0,.3<Math.abs(d)?(a-=370*Math.sign(d)*e*Math.min(6*k,1),i+=18*e*d*Math.min(6*k,1),.13<(V+=e)&&(n(3),V=-Math.random()/40)):(o+=e,i-=15*Math.sin(i)*e)):(N||(.3<Math.abs(r)?(.2<W&&(h+=3e3*Math.sign(r)*e*Math.pow(1-p,6),o+=2*e,c+=4*(1-c)*e),f=Math.sign(r),y&&.13<(V+=e)&&(n(3),V=-Math.random()/40)):c+=4*(0-c)*e,(Math.sign(r)!=Math.sign(h)||W<.2)&&(h-=14*h*e)),u&&.18<W&&J<3&&(E?K=0:L=0,J+=1,E=!E,W=0,R=1,h=850*f,l=.25*l-100,n(0,[I(t,a,50*f-50,-50,100,50),f])),.4<W&&(J=0),M&&1<D&&O&&(D=0,W=0,R=1,h=850*-f,l=.25*l-100,n(7,[t,a-30,f]))),G("KeyZ")&&.15<Q&&(A?(l=-1e3,h=300*-s,S=.1,A=!1,z=0,g=0,Q=0,at=!1,n(4)):0<g?(l=-1e3,Q=0,g=0,N=!1,n(4)):z<$&&(z+=1,Y=1,l=-1e3,Q=0,g=0,N=!1,j=!0,Z=1,n(6))),at?y&&A?A=!1:(at&&!y&&(.3<W||N)&&T||at&&y&&.3<d&&T)&&(A=!0,Z=1,N=!1,W=1,h=0):(A&&(.3<d||l<-.3)&&(l=-518,h=300*s,S=.1),A=!1),A?(j=!0,0<=l?(l-=20*l*e,i+=l/10*e):(l-=10*l*e,i+=-l/10*e)):(W<.2?l+=1e3*e:(g<=.1||l<0)&&(!B.KeyZ&&l<0?l+=6e3*e:l+=2e3*e),k=0),q(2).map(({enemyHitbox:e})=>{w||Z<.3||b.isTouching(e)&&v<=0&&.15<W&&(v=1,W=0,h=1100*Math.sign(t-e.x-e.w/2),l=-100,A&&(A=!1,h=300*-f),n(2,1),F<=0&&(b.ox=-1e3,n(19,[t,a-30,1,2]),n(19,[t,a-30,8,1]),w=!0,setTimeout(()=>n(20),1500)))}),N&&(Z<.27?(h=4800*f*(.33-Z),l=0):N=!1),s+=15*(f-s)*e,v<=.7&&(N||(h=U(h,-400,400))),l=Math.min(l,800),m+=17*(l-m)*e,x+=17*((0<g?1:0)-x)*e,p+=((A?1:0)-p)*(A?17:8)*e,R+=17*((W<.35?1:0)-R)*e,X+=17*(Y-X)*e,b.x=t,b.y=a;for(let n=0;n<3;n++)b.x+=e*h/3,b.y+=e*l/3,[t,a,_,_,_,et]=P(b),et&&(l=0),w||b.set(t,a,-14,-55,28,50);g-=e,S-=e,k+=e,Y=Math.max(Y-(A?3*e:e),0),Q+=e,v=Math.max(0,v-e)}},render:function(e){if(!w){var n=Math.sign(h)*Math.pow(Math.abs(h/400),.5),r=R,l=1-r,f=p,g=1-f,y=(1-x)*g,b=1-y,V=c*g*l,A=(1-V)*g,S=X,q=1-S,k=1-Math.exp(6*-K),F=k-Math.pow(K/1.5,2),W=1-Math.exp(6*-L),E=W-Math.pow(L/1.5,2),J=6*o,I=(.7*-s+.2*Math.cos(2*o))*A+(-.6*n+.1*Math.cos(.5*J))*V+-.6*s*f,U=5*n+Math.min(5*Math.cos(1.5*i),0)*s*f+(0<s?15+35*F-40*F*F:-15*F)*r,C=-37*A*l+(-31-n)*V*l+(2*Math.sin(1.5*i)-39)*f+(0<s?10*F-40:-28)*r,P=-.5*V+-1.2*m/800*g*l+(.9-2*s)*f+(0<s?2.8*F-1.2:4*F-.9)*r,j=4*n*l+Math.min(5*Math.cos(1.5*i+3),0)*s*f+(0<s?15*E-3:-15-35*E+40*E*E)*r,H=-37*A*l+(n-31)*V*l+(-37-2*s+2*Math.sin(1.5*i+3))*f+(0<s?-28:10*E-40)*r,B=.5*V*l+1.2*m/800*g+(-1.5*s-1)*f+(0<s?.9-4*E:1.6-2.9*E)*r,G=10*(n*g*l+r*s)+s*f*6,D=-37*A*l+-23*(V*l+r)+-43*f,z=.3*I+.2*n+s*m/2e3*g+1.1*-s*f+(N?4*(.3-Z)*s:0);F=I+(.15*Math.sin(1.2*i)-.2)*f+(.5*F-.5*E)*r;let w=0<s?k:W,Q=0<s?W:k;d(()=>{u(T?"#3af":"#999"),e.translate(t,a),s<0&&e.scale(-1,1),w<.95&&(e.lineWidth=T?4:2,e.beginPath(),e.ellipse(5,-25,86,20,.1,4*w-2.5,.5+w),e.stroke(),e.beginPath(),e.ellipse(5,-25,76,30,-.2,4*w-2.5,.5+w),e.stroke())}),et[1][0]=10*n*l-7*f*s+15*r*s,et[1][1]=-37*A*l-23*(V*l+r)-35*f,et[2][2]=(7*A+(7*Math.cos(J)-4)*n)*b*g+(5+m/50)*y*s*g+(14*s+Math.min(7*Math.sin(-i),0))*f,et[2][3]=Math.min(7*Math.sin(J),0)*V*b*g+(-4-m/70)*y*g+(9*Math.cos(i)*s-8)*f,et[3][2]=(-7*A+(7*Math.cos(3.2+J)-4)*n)*b*g+(m/50-6)*y*s*g+(14*s+Math.min(7*Math.sin(3-i),0))*f,et[3][3]=Math.min(7*Math.sin(3.2+J),0)*V*b*g+(2-m/70)*y*g+(9*Math.cos(i+3)*s-8)*f,nt[1][3]=Math.cos(J)+31-37-m/50,nt[1][5]=Math.cos(1+J)+31-37-m/40,nt[1][6]=-32-Math.abs(m/290),nt[1][7]=2*Math.cos(2+J)+22-37-m/30,nt[1][8]=m/70-34,nt[1][9]=Math.cos(3+J)+15-37-m/20,.1<v&&(e.globalAlpha=0<Math.cos(50*v)?.2:1),M(nt,t,a-8,0,1.57+I+.3*I,0),O&&M(rt,t,a+nt[1][9]-8,nt[1][8],I+.3*I,.3*-n+.1*Math.cos(a/14)),0<s?M(at,t+U,a+C-1.5*Math.cos(3+J)+1,0,I,P):M(at,t+j,a+H-1.5*Math.cos(3+J)+1,0,3.14+I,B),e.fillStyle,M(ot,t-2,a-37+6*r,0,0*S+(.4*I+1.4)*q,-.7*q+m/2e3-S*S*4+2.8*Y,it),M(ot,t+2,a-37+6*r,0,3.14*S+(.4*I+1.6)*q,.7*q+m/2e3+S*S*4.4-2.8*Y,it),M(et,t,a-8,0,I,0),M(tt,t+G,a+D+1.5*Math.cos(1+J)+1,10,F,z),0<s?M(at,t+j,a+H-1.5*Math.cos(3+J)+1,0,3.14+I,B):M(at,t+U,a+C-1.5*Math.cos(3+J)+1,0,I,P),e.globalAlpha=1,d(()=>{u(T?"#3af":"#999"),e.translate(t,a),s<0&&e.scale(-1,1),Q<.95&&(e.lineWidth=T?4:2,e.beginPath(),e.ellipse(5,-25,86,20,.2,-Q,3-4*Q),e.stroke(),e.beginPath(),e.ellipse(5,-25,76,30,.1,-Q,3-4*Q),e.stroke()),Z<.24&&(e.translate(-120,0),u("#eee"),e.lineWidth=4,e.beginPath(),e.ellipse(5,-36,80,10,-.1,1-8*Z,3-15*Z),e.stroke(),e.beginPath(),e.ellipse(5,-36,70,5,.1,1-8*Z,3-15*Z),e.stroke())})}},order:1e3,tags:[1],playerHitbox:b,grant:ht,reset:function(t,e){w=!1,b.x=t,b.y=e,h=l=0,q(y)[0].aim(t,e,1,!0)}}},0,ot,2,rt,2,it,4,lt,2,rt,0,lt,1,it,0,lt,0,X,1,it,5,lt,3,nt,2,rt,3,it,3,it,8,rt,5,nt,4,rt,7,rt,8,it,7,ht,2,ht,1],ft=function(){let t,r,o,i,h=new Image,l=document.createElement("canvas"),s=100,f={},u=(st.map((t,e)=>{t[0]&&(f[e]=t)}),0),p={};function m(t){for(let e=0;e<o;e++)for(let a=0;a<i;a++)t(e,a)}function x(t,e){return r[2+(t=t+e*o<<2)]}let b=[0,0,0,0,0,0,null];function v(e,a,n){(t.fillStyle=n)?(t.fillRect(e,a,1,1),r[4*(e+a*o)+2]=0):t.clearRect(e,a,1,1)}return{generate:async function(){await new Promise(t=>{h.onload=t,h.src="data:image/png;base64,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"}),g.drawImage(h,0,0),o=h.width,i=h.height,r=g.getImageData(0,0,o,i).data,l.width=l.height=128,t=l.getContext("2d"),m((t,e)=>{var a=x(t,e);let n=st[2*a];a=st[2*a+1],n&&!n[0]&&A(n(t*s,e*s,a)),p[t]=p[t]||{},p[t][e]=function(t,e){let a=[0,0,0,0,0,0,null],n={},r=.001;for(let h=0;h<49;h++){var o=x(t+parseInt(h/7-3),e+h%7-3)<<1,i=f[o];if(i){n[o]=!0;for(let t=0;t<6;t++)a[t]+=i[2+t];r++}}var h=Object.keys(n);return a=a.map(t=>10*t/r),1==h.length&&(a[6]=h[0]),a}(t,e)});let u={},y=(m((t,e)=>{var a=x(t,e)<<1;if(f[a]&&!u[t+","+e]){let n=e;for(;n<i&&a==x(t,n)<<1;)u[t+","+n]=!0,n++;u[t+","+e]=[e,n,a]}}),{});m((t,e)=>{var a=u[t+","+e];if(a?.length&&!y[t+","+e]){let i=t;for(;i<o;){var n=u[i+","+e];if(!n?.length)break;if(n[1]!=a[1]||n[2]!=a[2])break;y[i+","+e]=!0,i++}var r=function(t,e,a,n){let r=[],o=[],i=[],h=[];for(let u=e;u<n;u++){var l=x(a,u)<<1;l=(i.length||f[l]||i.push(a-t,u-e),i.length&&f[l]&&(i.push(a-t,u-e),r.push(i.map(t=>t*s)),i=[]),x(t-1,u)<<1);h.length||f[l]||h.push(0,u-e),h.length&&f[l]&&(h.push(0,u-e),o.push(h.map(t=>t*s)),h=[])}return i.length&&(i.push(a-t,n-e),r.push(i.map(t=>t*s))),h.length&&(h.push(0,n-e),o.push(h.map(t=>t*s))),[r,o]}(t,e,i,a[1]);A(function(t,e,a,n,r,o,i){let h=(a-t)*o,l=(n-e)*o,s=(a=I(t=(t-.5)*o,e=(e-.5)*o,0,0,h,l),[[i[0],5,0]]),f=[],u=6*Math.random()+6;for(let t=0;t<h;t+=u)f.push(t,6*Math.random(),Math.min(h,t+u),2*-Math.random()),u=6*Math.random()+6;return s.push(f,...r[0],[h,l,0,l],...r[1]),{render:function(a){a.fillStyle=i[1],a.fillRect(t-1,e,2+h,l),M(s,t,e,0,0,0)},inView:function(a,n){return!(a+900<t||n+600<e||t+h<a-900||e+l<n-600)},tags:[3],physics:a,order:-5e3}}(t,e,i,a[1],r,s,f[a[2]]))}}),m((t,r)=>{var o=f[x(t,r)<<1];o&&!x(t,r-1)&&.5<Math.cos(1321*t+2831*r)&&A(function(t,r,o){let i=!1,h=0,l=.1*Math.cos(t*t*18+291*r),s=[],f=1,u=.5<Math.random()?1:-1,p=(0==o&&s.push([["#445",8,0],[0,15,0,0,-7,-7,7,-7,0,0]],[["#445",8,0],[0,50,0,15]]),1==o&&(s.push([["#ccc",7,0],[-17,50,-23,14]],[["#ccc",7,0],[-6,50,-11,3]],[["#ccc",7,0],[5,50,6,-9]],[["#ccc",7,0],[15,50,19,3]]),f=.5*Math.random()+.6),2==o&&(s.push([["#5a5",6,0],[-5,50,-7,20,-10,10]],[["#5a5",6,0],[-10,10,-20,5,-30,15,-35,25,-25,30]],[["#5a5",6,0],[5,50,7,30,10,20]],[["#5a5",6,0],[10,20,20,15,25,25,30,35,20,40]]),f=.5*Math.random()+.7),3==o&&(s.push([["#bb8",6,0],[0,50,0,10],[-10,15,10,15],[-16,40,16,40]]),s.push([["#bb8",6,0],[0,10,0,-20],[-20,-50,0,-20,20,-50],[-13,-10,13,-10]]),f=.5*Math.random()+.6),[0,0,0,0]),m=[0,0,0,0],g=[0,0,0,0],y=null,x=I(t,r,-10,-20,20,70);function b([t,,e,a]){a||i||!x.isTouching(t)||(n(1,[e]),i=!0,s.map((t,e)=>{p[e]=250*(Math.random()-.5),m[e]=200*-Math.random()-500,g[e]=(4*Math.random()+2)*(.5<Math.random()?1:-1)}),y?.end())}return 0==o&&((y=O(t,r-7,1,1/0)).order=-6500,A(y)),e(0,b),{update:function(t){if(i&&.7<(h+=t))return a(0,b),!0},render:function(e){d(()=>{c(f*u,t,r+50,f),e.globalAlpha=1-h/.7,s.map((e,a)=>{M(e,t+p[a]*h,r+m[a]*h+h*h*1200,0,0,l+g[a]*h)}),e.globalAlpha=1})},inView:(e,a)=>Z(t,r,e,a),order:-6e3}}(t*s,(r-1)*s,o[8][(13*t+17*r)%o[8].length]))})},update:function(){var t=q(y)[0];for(let r=0;r<135;r++){var e=parseInt(t.x/100+r%15-7),a=parseInt(t.y/100)+parseInt(r/15)-4,n=x(e,a)<<1;f[n]&&e<125&&v(e,a,f[n][0]),st[n]==Q&&v(e,a,"#ff0")}},tags:[4],getTheme:function(t,e){return(t=p[parseInt(t)]?.[parseInt(e)])&&(b=t)[6]&&u!=t[6]&&(n(11,f[t[6]][9]),u=t[6]),b},m:l,d:v}},ut=function(t,a){let n=q(1)[0],r=(t=n.playerHitbox.x,a=n.playerHitbox.y+200,{}),o=0,i=0,h=t,l=a,s=4,u=s,c=[0,0,0],M=[0,0,0];function p(){i=.5}return e(2,p),e(14,p),e(15,p),r={update:function(e){var p,d,m,g;o+=e,i=Math.max(i-e,0),t=r.x=t+12*(h-t)*e,a=r.y=a+12*(l-a)*e,u+=3*(s-u)*e,s+=4*(f.width/1500-s)*e,0<F&&(p=n.playerHitbox.x,d=n.playerHitbox.y,({width:m,height:g}=f),p<t-(m/=10)&&(h=p+m),t+m<p&&(h=p-m),d<a-(g/=8)&&(l=d+g),a+.8*g<d&&(l=d-.8*g));var y=q(4)[0].getTheme(t/100,a/100);for(let t=0;t<3;t++)M[t]+=3*(y[t]-M[t])*e,c[t]+=3*(y[t+3]-c[t])*e;document.body.style=`background:linear-gradient(0deg,rgb(${c}) 0%,rgb(${M}) 100%)`},set:function(e){var n=3*Math.cos(o)+15*Math.cos(40*o)*i,r=3*Math.cos(.8*o)+8*Math.cos(23*o)*i;e.translate(f.width/2,f.height/2),e.scale(u,u),e.translate(n-t,r-a)},aim:function(e,n,r,o){h=e,l=n,s=r*f.width/1500,o&&(t=h,a=l,u=s)},x:t,y:a,order:-1e4,tags:[y]}},ct=function(t,e,a,r,i=1){let h,l=7*Math.random(),s=7*Math.random(),f=0,c=!1,p=0,d=10+3*Math.random(),m=20*Math.random()-15,g=I(t,e);return h=1==i?C(o):[["#fff",9,0],[3,10,-3,10,-3,0,-6,-4,0,-10,6,-4,3,0,3,10],["#000",4,5],[-5,-6,-3,-5],[5,-6,3,-5]],{update:function(o){var h,s,u,M;if(l+=o,p+=o,r+=2e3*o,p>d&&(c=!0),[t,e,h,s,u,M]=P(g),(s||u)&&(a=-a),h&&(200<r?(n(9),r*=-.4):r=0,a-=9*a*o),M&&(r=0),c?f+=3*o:q(1).map(({playerHitbox:t})=>{g.isTouching(t)&&.35<p&&(c=!0,n(8,9*i-8))}),.5<f)return!0;t+=a*o,e+=r*o,g.set(t,e,-15,-20,30,40)},render:function(a){c?(u(`rgba(255,255,180,${1-2*f})`),a.beginPath(),a.arc(t,e+m,40*f+10,0,6.28),a.fill()):M(h,t,e+m,0,3*l,.2*Math.cos(l+s)+s)},collectHitbox:g}},Mt=1;e(17,async function t(){a(17,t);let r=document.getElementsByTagName("h1")[0],o=(r.innerText="Loading...",await new Promise(setTimeout),function(){let t,a,n,r,o,i,h,l,s,f,u,c,M,p,d,m,g,y,x,b,v=null,T=null,w=!0,V=t=>Math.sin(t),A=t=>(t%6.28-3.14)/6.28,S=t=>U(1e3*Math.sin(t),-1,1);function q(t,e){let a=v.createBuffer(1,T*t,T),n=a.getChannelData(0);var r=a.length;for(let t=0;t<r;t++)n[t]=e(44100*t/T)*(1-t/r);return a}function k(t){return()=>{let e=v.createBufferSource();e.buffer=t,e.connect(v.destination),e.start()}}{v=new AudioContext,T=v.sampleRate,t=q(.2,t=>.05*A(t/(.3-220*Math.exp(-t/500)))),a=q(.2,t=>.1*(.3*V(t/(20+t/150))+Math.random())),n=q(.5,t=>.1*(.3*S(t/(120+t/250))+Math.random())*(.5*S(t/600)+.5)),r=q(.02,t=>.06*V(t/30)*Math.exp(-t/100)),o=q(.1,t=>.02*S(t/(20+150*Math.exp(-t/1600)))),i=q(.3,t=>.06*(V(t/(14+t*t/1e6))+Math.random()/2)),h=q(.3,t=>.05*V(t/(200-t/30))),l=q(.4,t=>.03*S(t/(20+t/100)+Math.random())),s=q(.06,t=>.03*A(t/4)),f=q(1.5,t=>.1*(.5*S(t/800)+.5)*A(t/110)),u=q(2,t=>.04*S(t/(1+t/900))),c=q(.6,t=>.06*V(t/(20+V(t/900)+t/1300))),d=v.createBuffer(1,T,T),m=d.getChannelData(0);var F=.1*T;for(let t=0;t<F;t++)m[t]+=.01*(V(t/(70+t/300))+Math.random()/3)*(1-t/F),m[parseInt(.5*T)+t]+=.01*Math.random()*(1-t/F);let e=(M=v.createBuffer(1,3*T,T)).getChannelData(0);for(let t=0;t<3*T;t++){var R=t/T;e[t]=U(Math.sin(t/120)*(10+10*V(t/1e4+R*R*R*4)),-1,1)*R/50}p=[[[0,2,3,5,7,12],1.6],[[0,2,3,5,7,8,11,12],.5],[[0,2,3,7,8,12],.9],[[0,2,3,7,8,12],1.2],[[0,4,5,7,12],.8]].map(function([t,e],a){let n=[],r=[];var o=[4,2,.5,3,4][a],i=[1,.5,.25,2,2][a++],h=[-15,-20,-19,-12];r.push([a*a*3*.5%2,a%2],[.5*(a*a*3+9*a)%2,(a+1)%2],[.5*(a*a*2+11*a)%2,(a+1)%2]);for(let e=0;e<3;e++){var l=8*e,s=[0,3,-5][e];for(let t=0;t<8;t++)n.push([h[(7*a+2*e+(t>>1)+t*t*3)%4]+s,t+l,6,1]);for(let r=0;r<8/i;r++)(r+r*r+e+3*a)%7<4&&n.push([-3+s+t[(r+r*r*2+e*e*2+a)%t.length],r*i+l,o,2])}let f=v.createBuffer(1,8*T*3*e,T),u=f.getChannelData(0);for(let t=0;t<n.length;t++){[c,M,p,d]=n[t];var c,M,p,d,g=parseInt(M*e*T),y=p*e*T;for(let t=0;t<y;t++){var x=0,b=t/y;x+=1==d?2*U(V(t/(6*2**(-c/12)*2*2)+V(t/8e3))*(44*Math.exp(23*-b)+1),-1,1):7*A(t/(24.18*2**(-c/12)*2)),u[g+t]+=x*Math.min(b*Math.exp(-b*(10+7*d))*100,1)/500}}for(let t=0;t<44;t+=2)for(let a=0;a<r.length;a++){[S,w]=r[a];var w,S,q=parseInt(.5*T*w),k=parseInt((S+t)*T*e);for(let t=0;t<.1*T;t++)u[t+k]+=m[t+q]}return f})}e(0,([,,,e])=>e?0:k(t)()),e(1,k(a)),e(2,k(n)),e(3,k(r)),e(4,k(o)),e(5,k(i)),e(6,k(h)),e(7,k(l)),e(8,k(s)),e(9,k(s)),e(10,k(f)),e(11,function(t){{t=p[t];let e=g;(g=v.createBufferSource()).buffer=t,g.loop=!0,g.connect(w?y:x),g.start(),setTimeout(()=>{e?.stop()},700),y.gain.setTargetAtTime(w?1:0,v.currentTime,.5),x.gain.setTargetAtTime(w?0:1,v.currentTime,.5),w=!w}}),e(12,()=>{(b=v.createBufferSource()).buffer=M,b.connect(v.destination),b.start()}),e(13,()=>b.stop()),e(14,k(u)),e(15,k(u)),e(16,k(c)),(y=new GainNode(v)).connect(v.destination),(x=new GainNode(v)).connect(v.destination)}(),ft());await o.generate(),[o,ut(),D()].map(A),e(7,([t,r,o])=>A(function(t,r,o){let i=300*o,h=Mt++,l=0,s=O(t+=40*o,r,2,10,1.57*o),f=(A(s),I(t,r,-20,-15,30,30));function u([t]){t==h&&(h=null)}return e(1,u),{update:function(e){var r,c;return l+=e,!h||9<l||(n(0,[f,o,h,!0]),[,,,r,c]=P(f),r||c)?(a(1,u),s.end(),!0):(i=U(i+1e3*e*o,-750,750),t+=i*e,f.x=t,void s.set(t))}}}(t,r,o))),e(18,([t,e,a,n])=>A(O(t,e,a,n))),e(19,([t,e,a,n])=>{for(;0<a--;)A(ct(t,e,400*(Math.random()-.5),300*-Math.random()-200,n))}),e(8,t=>{k=Math.max(k+t,0)}),e(2,t=>{F+=-t}),e(15,t=>{R=t,F=3}),e(20,t=>{k>>=1,F=3,K++}),requestAnimationFrame(V),w=Date.now(),r.remove()})</script>