<!doctype html><title>Black Cat - Nine Lives, No Mercy - js13kGames 2025</title><style>body{margin:0;background-color:#000}canvas{position:absolute;width:1920px;height:1080px;transform-origin:top left}</style><body oncontextmenu=return!1 ondragstart=return!1><canvas id=C width=1920 height=1080></canvas><script>let e,f=document,t=window,l=Math,r=l.abs,o=l.min,c=l.max,n=l.sin,x=l.cos,s=l.atan2,y=l.sqrt,a=l.PI,z=2*a,u=0,A=[],h=(e,f,t,i,s,y,a,u,h,O,p,E,T,v,d,N,g,I,R)=>{let Y,b,C=u*=500*z/48e3/48e3,S=f*=z/48e3,L=[],m=0,B=0,G=0,D=1,W=0,V=0,P=0;for(h*=500*z/48e3**3,v*=z/48e3,O*=z/48e3,p*=48e3,E=48e3*E|0,b=(t*=48009)+(I*=48e3)+(i*=48e3)+(s*=48e3)+(N*=48e3)|0;G<b;L[G++]=P)++V%(100*d|0)||(P=y?y>1?y>2?y>3?n(m**3):c(o(l.tan(m),1),-1):1-(2*m/z%2+2)%2:1-4*r(l.round(m/z)-m/z):n(m),P=(E?1-R+R*n(z*G/E):1)*(P>0?1:-1)*r(P)**a*e*.5*(G<t?G/t:G<t+I?1-(G-t)/I*(1-g):G<t+I+i?g:G<b-N?(b-G-N)/s*g:0),P=N?P/2+(N>G?0:(G<b-N?1:(b-G)/N)*L[G-N|0]/2):P),Y=(f+=u+=h)*x(v*B++),m+=Y-Y*T*(1-1e9*(n(G)+1)%2),D&&++D>p&&(f+=O,S+=O,D=0),!E||++W%E||(f=S,u=C,D=D||1);A.push({S:L,B:0})},O=f=>{if(e.a){u||p();let e=A[f];e.B&&e.B.disconnect(u.destination);let t=u.createBuffer(1,e.S.length,48e3),l=u.createBufferSource();t.getChannelData(0).set(e.S),l.buffer=t,l.connect(u.destination),l.start(0),e.B=l}},p=()=>u=new t.AudioContext,E=(e,f,t)=>e<f?f:e>t?t:e,T=Date.now(),v=e=>{T^=T<<13,T^=T>>>17,T^=T<<5;let f=(T>>>0)/4294967296*(1|e);return e?~~f:f},d=(e,f)=>v(f)+e,N=e=>1-l.pow(1-e,3),g=()=>localStorage.setItem("com.antix.nlnm",JSON.stringify(e)),I=(e,f="ANTIX")=>({n:f,s:e}),R=e=>({k:e});h(.05,379,.02,.02,.06,0,3.4,0,25,468,.07,.06,0,22,.1,.02,.59,.04,0),h(.02,246,.01,.03,.08,1,.3,-4,11,0,0,0,0,0,0,0,.53,.07,0),h(.02,838,.01,.45,.003,0,4.1,0,0,0,0,0,0,.1,0,0,.96,.41,0),h(.04,80,.01,.05,.58,4,.4,-1,0,0,0,0,.7,0,.4,0,.36,.07,0),h(.05,1e3,.05,.2,.2,2,1,3,-15,0,0,0,.2,0,0,0,.7,.05,0),h(.01,188,0,.03,.04,0,1.8,-55,0,6,.34,0,0,0,.1,0,.69,.03,0),h(.05,56,.02,.09,.24,3,2.8,-9,3,0,0,0,.5,0,.8,.1,.5,.06,0),h(.05,321,.01,.15,.006,2,.8,-12,-60,0,0,0,0,21,0,.49,.64,.25,0),h(.05,439,.01,.17,.06,3,3.3,15,-20,0,0,0,0,0,.5,0,.92,.08,0),h(.1,71,.06,.13,.43,2,2.4,-9,0,0,0,0,1.9,63,.5,0,.37,.12,0),h(.005,356,.04,.03,.09,0,1,0,194,0,0,0,0,0,0,0,.55,.05,0),h(.3,96,.02,.25,.58,2,1.8,-1,0,0,0,.15,1.4,0,.2,.35,.47,.06,.28),h(.02,209,0,.05,.06,0,1.2,5,-15,0,0,0,0,16,0,.15,.96,.09,0),h(.07,732,0,.01,.08,3,3.7,0,0,157,0,.02,0,0,0,.16,.76,.01,0),h(.1,286,.03,0,.01,0,4.3,-.3,.3,50,.01,.02,.1,-1,-.1,0,.33,.01,0),h(.03,89,.04,.22,.24,2,2.8,4,-5,0,0,0,1.5,28,.4,0,.46,.11,0),h(.03,159,.02,.02,.05,2,1.9,1,37,0,0,0,0,15,0,.14,.79,.07,0),h(.03,370,.02,.05,.05,3,0,13,-10,0,0,0,0,0,.3,.1,.71,.09,0),h(.2,159,.02,.02,.05,2,1.9,1,37,0,0,0,0,15,0,.14,.79,.07,0),h(.2,499,0,.02,.06,0,.4,-17,27,0,0,.07,0,1.1,.3,.11,.76,.06,.04),h(.1,376,.02,.14,.08,3,3.8,-11,48,0,0,0,0,18,0,0,.72,.07,0),h(.05,529,.04,.1,.28,4,3.6,0,1,0,0,0,0,85,0,0,.58,.01,0),h(.2,96,.02,.25,.58,2,1.8,-1,0,0,0,.15,1.4,0,.2,.35,.47,.06,.28),h(.05,796,.42,0,.02,4,.4,0,0,261,.1,0,0,0,.5,0,.79,0,.07),h(.02,150,.01,.1,.25,4,.6,20,0,0,0,0,0,0,0,.02,.8,.02,0),h(.002,261,.1,.2,.4,4,.2,0,0,0,0,0,.4,0,0,0,.4,.1,0);let Y,b,S,L,m,B,G,D,W,V,P,w,M,H,U,k,F,X,K,_,J,q,Z,j,$,Q,ee,fe,te,le,re,ie,oe,ce,ne,xe,se,ye,ae,ze,ue,Ae,he,Oe,pe,Ee,Te,ve,de,Ne,ge,Ie,Re,Ye,be,Ce,Se,Le,me,Be,Ge,De,We=0,Ve=D-1,Pe=["fc8f","f00f",,"f80f",,"f00f",,"4f8c"],we=["305","d0f","0af","f8c","fea"],Me=["fff","ff0","f80","f00"],He=["f00","e01","d13","b14","a25","927","838","639","54b","44c"],Ue=[[0,"f84",.6,15,20,1,.8,10,14,0,0,0,0,0,0],[1,"f44",.6,10,13,1,.8,10,15,.5,.5,0,0,0,0],[2,"04f",.5,0,0,0,0,0,0,10,16,.02,.04,3.2,1],[3,"ccc",.5,0,0,1,.6,9,14,3,5,1.15,1.1,3.2,1],[4,"0c0",.7,0,0,1,1,0,0,3,5,.5,.5,3.2,1],[5,"f00",.7,300,310,1,.6,10,14,3,5,.85,.95,3.2,1],[6,"f4f",.4,,,,,,,,,,,.05,,],,[8,"fc4",,,,,,,,,,,,,,],[9,"8f4",.5,,,,,,,,,,,,,],[10,"8cf",.4,,,,,,,,,,,,,],[11,"44c",.4,,,.25,,,,,,,,,1],[12,"f80f",.4,,,,,,,40,,1,,3.2,0]],ke=["(),,),,)(()(*,*","()*)+*+(+,,*(,,)",")*))*++*++*))+(++()+,++,+,(),(++)+,)),))+)","()+*(+(,+-,-).*/)*./,.-/-010,1032314435452",")*)+*))*++*+*+**)*","()(**+)+,)-)(-(,-+*-*,,+","**,)*((*(,*(+*(*+(*)(+*)","*)*(,+(+)--,(-)..,(,.(",",)(,+(,+,,),(),(+,(+**+**)(*)**+(()*","()+*)*(+,+,--*./010(022)2/313.3,.-1/","**)+**)**)*+**,+*+*+*++))+)*)+++()+(","()*(*++,,-)-,.+..-(/0(1,1(1)*1(.*..)2/303((2",",,,,*,+),)),(*,(,,)+,++,)(,*),+(,*+,+)+))*)(*))++(*+)******)*+(*)*",")(*)+*,+,--..//(0+01122*245+65670784899*3*+3:95::3;:;<=86=/),.",",*(+*(*+()*((*((*)**,,*))*)*+)+*)*)(*))",")(*)+*,+,--../(/+0*1.1)2.212010.2/-0+33)34044.42","(((,((,,((,(,,,,(,((,(,,","())*+*(+-,*,)-.-.//,(.+/","*(*(**(,**+*,,*,***(*,**,,**+*(,*(**(+*,+*()*,)*","*++,+,*+6(7,(76*","*+(**))*(+*(+**)****(**,*++",")(*+*))+),-).(-//,)00,-0/0","**(+)*))*)+*++******,","()*)*++(*(),+,(,-.","**,*+(*)(+*()*(","()*)*((+,+,(","++()+())(+)(+())()(+)())),)+,),+),)),)+,+++,++(+++,+),),+)+,(++)),)(+()+",")(*++(*),+-*.)/*/./-)0.0(112(2,3+3-,32344525651674,70198947985:686;8;:0:.<<;=;=9->>=?=?</??>>7<:",",(**)*((*)**(,**+*,,*+***((**)*,(*(,**+*,,",")(*)*+,+,--././(0)0112-23)3445-5","*+(*)(*()*(+*),*+,*,+*,)),*+,*,+*,)*+(*)(*()*(+*",")(*)*++,,--.(//.0112324354656770","**+)*)+*)",")((*)*",")*,+*,,*+,*)+*()*((*)(*+","())*+*,+-,.-.//(","",""],Fe=(e,f,t,l,r,i)=>({c:e,M:f,C:t,_size:l,B:r,J:i}),Xe=Fe(0,7,"4fff",0,"4ff",.5),Ke=[],_e=[],Je=0,qe=0,Ze=0,je=0,$e=0,Qe=0,ef=[0,0,0],ff=[0,0,0],tf=[0,0,0],lf=[0,0,0],rf=new Float32Array(36e4),of=new Float32Array(54e4),cf=C.getContext("webgl"),nf=(e,f)=>{let t=cf.createShader(e);return cf.shaderSource(t,f),cf.compileShader(t),t};Se=cf.createProgram(),cf.attachShader(Se,nf(35633,"attribute vec2 A;attribute vec4 B;uniform vec2 C;varying vec4 color;void main(){vec2 D=A/C;vec2 E=D*2.0;vec2 F=E-1.0;gl_Position=vec4(F*vec2(1,-1),0,1);color=B;}")),cf.attachShader(Se,nf(35632,"precision mediump float;varying vec4 color;void main(){gl_FragColor=color;}")),cf.linkProgram(Se),Le=cf.getAttribLocation(Se,"A"),me=cf.getAttribLocation(Se,"B"),Be=cf.getUniformLocation(Se,"C"),cf.viewport(0,0,C.width,C.height),cf.clearColor(.1,.1,.15,1),cf.enable(3042),cf.blendFunc(770,771),cf.useProgram(Se),cf.uniform2f(Be,C.width,C.height),Ge=cf.createBuffer(),De=cf.createBuffer();let xf,sf,yf,af=e=>[parseInt(e[0],16)/15,parseInt(e[1],16)/15,parseInt(e[2],16)/15,parseInt(e[3],16)/15],zf=e=>"0123456789abcdef"[15*e|0],uf=(e,f,t,l,r,i=0)=>{if(ef[0]+ef[1]+ef[2]<3e4){let[o,c,n,x]=af(r),s=12*(tf[i]+ef[i]);rf[s++]=e,rf[s++]=f,rf[s++]=o,rf[s++]=c,rf[s++]=n,rf[s++]=x,rf[s++]=t,rf[s++]=l,rf[s++]=o,rf[s++]=c,rf[s++]=n,rf[s++]=x,ef[i]++}},Af=(e,f,t,l,r,i,o,c=0)=>{if(ff[0]+ff[1]+ff[2]<3e4){let[n,x,s,y]=af(o),a=18*(lf[c]+ff[c]);of[a++]=e,of[a++]=f,of[a++]=n,of[a++]=x,of[a++]=s,of[a++]=y,of[a++]=t,of[a++]=l,of[a++]=n,of[a++]=x,of[a++]=s,of[a++]=y,of[a++]=r,of[a++]=i,of[a++]=n,of[a++]=x,of[a++]=s,of[a++]=y,ff[c]++}},hf=(e,f,t,l,r,i=0)=>{Af(e,f,e+t,f,e,f+l,r,i),Af(e+t,f,e+t,f+l,e,f+l,r,i)},Of=(e,f,t)=>{let l=0,r=t.length-1;for(let i=0;i<t.length;i++){let[o,c]=t[i],[n,x]=t[r];c>f!=x>f&&e<(n-o)*(f-c)/(x-c)+o&&(l=!l),r=i}return l},pf=(e,f=1)=>10*e.length*f,Ef=(e,f=2.5)=>(1920-pf(e,f))/2,Tf=(e,f,t,l="ffff",r=1)=>{let i=e+=r;for(let o=0;o<t.length;o++){let c=t.charCodeAt(o)-32;if(3===c)f+=14*r,i=e;else{let e=yf[c];if(e){let t=e[0],o=e[1];for(let c=2;c<e.length;c+=2){let n=e[c],x=e[c+1];n<0?(t=-n,o=x):(uf(i+t*r,f+o*r,i+n*r,f+x*r,l,2),t=n,o=x)}}i+=10*r}}},vf=(e,f=2)=>{let t=e.v,l=e===sf?"ffff":e.bc,r="0006",[i,o,c,n,x,s]=t;Af(i[0],i[1],o[0],o[1],s[0],s[1],r,f),Af(o[0],o[1],c[0],c[1],x[0],x[1],r,f),Af(o[0],o[1],x[0],x[1],s[0],s[1],r,f),Af(c[0],c[1],n[0],n[1],x[0],x[1],r,f);for(let e=0;e<t.length;e++){let r=t[e],i=t[(e+1)%t.length];uf(r[0],r[1],i[0],i[1],l,f)}let y=e.Y,a=e.X,z=e.x+e.w/2-pf(a,y)/2;Tf(z,e.y+e.h/2-10*y/2,a,e.Z,y)},df=(e,f,t,l,r,i,o,c,n,x=1)=>{let s=.5*l,y=f+s;return{b:0,x:e,y:f,w:t,h:l,X:r,Y:i,Z:o,bc:c,a:n,v:[[e-s,y],[e,f],[e+t,f],[e+t+s,y],[e+t,f+l],[e,f+l]],W:x}},Nf=(e,f,t,l,r,i=1)=>({b:1,x:e,y:f,X:t,Y:l,Z:r,W:i}),gf=(e,f,t,l,r,i=1)=>({b:2,x:e,y:f,w:t,h:l,C:r,W:i}),If=(e,f,t,l,r,i=1)=>({b:3,x:e,y:f,w:t,h:l,C:r,W:i}),Rf=e=>{let f=C.getBoundingClientRect();return[1920*(e.clientX-f.left)/f.width,1080*(e.clientY-f.top)/f.height]};onclick=e=>{let[f,t]=Rf(e),l=0;if(xf&&!Mf)for(let r of xf)if(r.W&&r.b<1&&Of(f,t,r.v)){r.a&&(O(0),r.a(e)),l=1;break}l||2!==Y||Mf||k||C.requestPointerLock()},onmousemove=e=>{let[f,t]=Rf(e),l=0;if(xf&&!Mf)for(let e of xf)if(e.W&&e.b<1&&Of(f,t,e.v)){l=e;break}sf=l};let Yf,bf,Cf,Sf,Lf,mf,Bf,Gf,Df,Wf,Vf,Pf,wf,Mf,Hf,Uf,kf=[Nf(474,50,"BLACK CAT",11,"55ff"),Nf(536,155,"NINE LIVES NO MERCY",4.5,"f6ff"),df(1400,299,400,80,"OPTIONS",3.5,"f80f","ff0f",e=>xf=Jf),df(1400,499,400,80,"HIGHSCORES",3.5,"f80f","ff0f",e=>xf=Xf),df(1400,699,400,80,"TRAINING",3.5,"f80f","ff0f",e=>{b=1,F=0,C.requestPointerLock(),Tt()}),df(710,885,510,100,"LAUNCH",6.5,"f80f","ff0f",e=>{C.requestPointerLock(),Tt()}),Nf(624,1030,"A TINY SHMUP FOR JS13K 2025",2.5,"ffff")],Ff=f=>{for(let f=5;f--;){let t=e.s[f],l=t.n+" "+t.s,r=Xf[f];r.X=l,r.x=Ef(l,5)}},Xf=[Nf(536,330,"",5,"0f0f"),Nf(536,430,"",5,"ff0f"),Nf(536,530,"",5,"f0ff"),Nf(536,630,"",5,"0fff"),Nf(536,730,"",5,"ffff"),Nf(420,100,"HIGHSCORES",11,"ffff"),df(719,920,400,80,"OKAY",4,"f80f","ff0f",e=>xf=kf)],Kf=(e,f)=>Jf[e].X=["FORWARDS","REVERSE","LEFT","RIGHT","LAND","SOUND EFFECTS"][e]+" "+f.toUpperCase(),_f=f=>{e.a=!e.a,Kf(5,e.a?"ON":"OFF")},Jf=[df(160,420,720,80,"",4,"f80f","ff0f",e=>yt(0)),df(1e3,420,720,80,"",4,"f80f","ff0f",e=>yt(1)),df(160,560,720,80,"",4,"f80f","ff0f",e=>yt(2)),df(1e3,560,720,80,"",4,"f80f","ff0f",e=>yt(3)),df(569,700,720,80,"",4,"f80f","ff0f",e=>yt(4)),df(569,250,700,80,"",4,"f80f","ff0f",e=>_f()),Nf(439,820,"PRESS NEW CONTROL KEY",5,"ffff",0),Nf(585,100,"OPTIONS",11,"f0ff"),df(719,920,400,80,"OKAY",4,"f80f","ff0f",e=>{xf=kf,g()})],qf=e=>{b=0,Zf[9].W=0,tt(1),xf=kf,Y=1,Mf&&f.exitPointerLock()},Zf=[gf(480,1e3,0,20,"8f8f",0),If(480,1e3,960,20,"eeef",0),Nf(20,20,"",6,"ffff"),Nf(692,20,"",6,"ffff"),Nf(20,980,"",6,"ffff"),Nf(20,980,"",6,"ffff"),gf(360,800,1200,90,"0008",0),If(360,800,1200,90,"ff0f",0),Nf(370,835,"",2.5,"ffff",0),df(1200,962,600,80,"END TRAINING",4,"f80f","ff0f",e=>qf(),0),df(1830,20,40,60,"E",4,"f80f","ff0f",e=>{C.requestPointerLock(),_f()})],jf=[gf(400,400,1120,200,"0003",0),If(400,400,1120,200,"ff0f",0),Nf(686,525,"",2.5,"ffff",0),Nf(543,450,"YOU GOT A NEW HIGH SCORE",3.5,"ff8f",0),df(657,900,600,100,"CONTINUE",5,"f80f","ff0f",e=>qf()),Nf(475,80,"GAME OVER",11,"f84f")],$f=(e,f,t,l,r)=>({x:e,y:f,z:t,Y:l,p:r}),Qf=(e,f,t)=>{let l=e.x-f.x,r=e.z-f.z;return l*l+r*r<t},et=e=>$f(d(16,D-32),0,d(16,D-32)),ft=(e,f,t)=>{let l=x(bf.Y),r=n(bf.Y),i=x(bf.p),o=n(bf.p),c=e-bf.x,s=f-bf.y,y=t-bf.z,a=y*l-c*r,z=s*o+a*i;return z<=.1?0:{x:(c*l+y*r)/z*1536+960,y:-(s*i-a*o)/z*1536+540}},tt=(e=0)=>{Wf=1,D=e?80:128,W=D/2,Cf=[],Sf=[],Lf=[],mf=[],Bf=[],Gf=[];let t=f.createElement("canvas");t.width=D,t.height=D;let l=t.getContext("2d"),r=new Image;r.onload=f=>{l.drawImage(r,0,0);let t=l.getImageData(0,0,D,D).data;for(let e=0;e<D;e++){let f=[],l=[];for(let r=0;r<D;r++){let i=t[4*(e*D+r)]/255*(1-y((W-r)*(W-r)+(W-e)*(W-e))/W);i<.03?(f.push(0),l.push("04c"),r>1&&r<D-2&&e>1&&e<D-2&&Gf.push([r,e])):i<.08?(f.push(0),l.push("48f"),Gf.push([r,e])):i<.13?(f.push(.4),l.push("fe7"),Lf.push([r,e])):i<.3?(f.push(.6),l.push("7f2"),mf.push([r,e])):i<.4?(f.push(.9+.25*v()),l.push("4f8"),Bf.push([r,e])):i<.6?(f.push(1.2+.5*v()),l.push("987")):(f.push(1.6+1.5*v()),l.push("fff"))}Cf.push(f),Sf.push(l)}Df=[...Lf,...mf,...Bf],e?(Y=0,xt(),xf=kf,Y=1,mainGameLoop(0)):Nt(),Wf=0},r.src=`data:image/svg+xml;base64,${btoa(`<svg width="256" height="256" version="1.1" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg"><filter id="n"><feTurbulence type="turbulence" seed="${1e6*v()}" baseFrequency="0.04" numOctaves="5"/><feColorMatrix values="0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0 0 1"/></filter><rect x="0" y="0" width="256" height="256" filter="url(#n)"/></svg>`)}`},lt=(e,f)=>{let t=0|e,r=f-.5|0;for(let e=-1;e<=0;e++)for(let f=-1;f<=0;f++){let i=t+f,o=r+e;i<0||i>=D||o<0||o>=D||(Cf[o][i]=l.max(0,Cf[o][i]-.5))}for(let e=-1;e<=2;e++)for(let f=-1;f<=2;f++){let l=t+f,o=r+e;l<0||l>=D||o<0||o>=D||(Sf[o][l]=(i=Cf[o][l])<.5?"48f":i<.7?"fe7":i<1?"7f2":i<1.3?"4f8":"897")}var i},rt=(e,f,t)=>{let l,r,i,o=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];do{let f=d(0,e.length-1);if([l,r]=e.splice(f,1)[0],r<0||r>=D||l<0||l>=D){i=0;continue}let t=Sf[r][l];i=o.every(([e,f])=>{let i=l+e,o=r+f;return o<0||o>=D||i<0||i>=D?0:Sf[o][i]===t})}while(!i);for(let[f,t]of o){let i=l+f,o=r+t,c=e.findIndex(e=>e[0]===i&&e[1]===o);c>-1&&e.splice(c,1)}return $f(l+.5,t?3.2:Cf[r][l]+f,r+.5,v()*z,0)},it=Fe($f(-1.25,.5,-27,0,0),7,"4ff"),ot=v(),ct=v(),nt=Fe($f(0,0,0,0,0),18),xt=e=>{let f=[],t=[],l=48-W,r=48+W;for(let e=0;e<=96;e++){let t=e*a/96,i=n(t),o=x(t);for(let t=0;t<=96;t++){let c=t*z/96,s=n(c),y=x(c),a=0;e>=l&&e<r&&t<D&&(a=Cf[e-l][t]);let u=6+.35*a;f.push(u*(y*i),u*o,u*(s*i))}}for(let e=0;e<96;e++)for(let f=0;f<96;f++){let l=97*e+f,r=l+96+1;t.push(l,l+1),t.push(l,r)}Ke[36]=f,Ke[37]=t},st=[],yt=e=>{Pf=e,wf=1,Jf[6].W=1},at=[],zt="";onkeydown=f=>{if(Uf){let t=f.key;"Enter"===t?(""===zt&&(zt="RANDOM CAT"),jf[4].W=0,jf[0].W=0,jf[1].W=0,jf[2].W=0,jf[3].W=0,e.s[Hf].n=zt,e.s[Hf].s=V,Uf=0,Ff(),g(),tt(1),Y=1,xf=Xf):"Backspace"===t?zt=zt.slice(0,-1):1===t.length&&zt.length<10&&/^[a-z0-9 ]$/i.test(t)&&(zt+=t.toUpperCase());let l=jf[2];l.X=zt,l.x=Ef(zt)}else at[f.code]=1},onkeyup=t=>{var l;wf?(at[l=t.code]=0,e.c[Pf].k=l,Kf(Pf,l),Jf[6].W=0,wf=0):(2!=Y&&(at.Enter||at.Space)&&(xf===kf?Tt():xf&&(xf===Jf&&(Jf[6].W=0,wf=0),xf===jf&&(f.exitPointerLock(),tt(1),Y=1,_e=[]),xf=kf)),at[t.code]=0)},f.onpointerlockchange=e=>Mf=f.pointerLockElement===C,f.onmousemove=e=>{2!==Y||X||(Yf.Y-=.001*e.movementX)},onmousedown=e=>{if(2===Y){let f=performance.now();if(0===e.button&&(f-qe)/1e3>.1&&!X){qe=f;let e=15*-n(Yf.Y),t=15*x(Yf.Y);St(7,Yf.x,Yf.y,Yf.z,e,0,t);for(let f of pe)if(f.V){let l=f.c;St(7,l.x,l.y,l.z,e,0,t)}O(1)}2===e.button&&(f-Je)/1e3>.5&&!X&&(Je=f,be.push({bDh:Ye,x:Yf.x,y:Yf.y,z:Yf.z,Y:Yf.Y,vx:10*-n(Yf.Y),vy:Re,vz:10*x(Yf.Y)}),O(2))}};let ut,At,ht,Ot=(e,f,t,l,r,i,o,c,n,x=1,s=0,y=0,a=0,z=0,u=0,A=-1,h=-1)=>{let O={x:e,y:f,z:t,vx:l,vy:r,vz:i,ttl:o,T:c,B:n,_size:x,gy:s?9.8:0,b:y,C:0,M:a,Y:z,p:u,S:A,E:h,c:0};O.c=O,_e.push(O)},pt=(e,f,t,l="fff",r=-1,i=0,o=0)=>{for(let r=30;r--;)Ot(e,f,t,8*(v()-.5),10*v(),8*(v()-.5),1.5*v(),1.5,l,d(4,6),1);for(let l=2;l--;)Ot(e,f,t,0,0,0,[1.5,1.5][l],1.5,["f80","ccc"][l],1,0,2,[15,13][l],v()*a,v()*a,[2,.2][l],[.5,4][l]);r>-1&&Ot(e,f,t,0,5,0,1.6,1.6,l,1,1,2,r,o,i,1,1)},Et=(e,f,t,l,r)=>{let[i,c,n,x,s,y,a,u,A,h,O,p,E,T,d]=Ue[e],N=l||rt(f,T,t);if(e<6){let e=o(ut-1,10);x+=s*e,y+=a*e,u+=A*e,h+=O*e,p+=E*e}let g={b:e,c:N,M:i,B:c,C:c+"f",f:d,J:n,K:x,L:y,H:0,N:u,d:h,bm:h,ax:N.x,az:N.z,al:T,Q:p,bt:0,R:et(),vx:0,vy:0,vz:0,I:v()*z,dp:0,j:0,nr:1,V:0,A:0,D:0,G:0,U:v(),fl:0,fc:v(),gr:N.y,cg:0,P:0,T:0};return r||oe.push(g),g},Tt=e=>{Ee=0,ue=0,Vt(0),V=0,gt(0),P=9,It(),k=0,ut=0,vt()},vt=e=>{Y=0,tt()},dt=[[5,6,4,6,0],[10,9,8,12,3],[15,12,12,16,5],[20,15,16,20,9]],Nt=e=>{let f,t,l,r,i,c=0|E(.5*ut+2,0,6);if(ut<4)[f,t,l,r,i]=dt[ut];else{[f,t,l,r,i]=dt[3];let e=4,c=14,n=c-e,x=1+(o(ut,c)-e)/n*1.5;f=f*x|0,t=t*x|0,l=l*x|0,r=r*x|0,i=i*x|0}ut++,Yf=$f(W,3.2,W,0,0),Xe.c=Yf;for(let e of Te)e.T=0;if(ve=0,Oe=0,Ae.H=0,j=0,Z=0,J=0,q=0,re=0,K=0,ee=0,fe=0,te=0,w=c,H=c,M=0,de=[],Ne=0,be=[],Ce=[],oe=[],b)S=0,Zf[9].W=1,w=0,H=9;else{for(let e=f;e--;)Et(0,mf);for(let e=t;e--;)Et(1,Gf);for(let e=l;e--;)Et(3,Df,1);for(let e=r;e--;)Et(4,Df,1);for(let e=i;e--;)Et(5,Df,1);ce=oe.length;for(let e=c;e--;)de.push(Et(6,mf))}Rt(),xf=Zf,Y=2,F=0,$=1,Q=1,U=0,X=1;for(let e=5;e--;)Ot(Yf.x,Yf.y,Yf.z,0,0,0,1,1,we[d(0,4)],1,0,2,13,v()*z,v()*z,5+v(),v());Ot(Yf.x,Yf.y,Yf.z,0,0,0,2,3,"4cf",1,0,2,7,0,0,0,1),O(23)},gt=e=>{b||(V+=e,Zf[2].X=""+V)},It=e=>Zf[3].X="@".repeat(P),Rt=e=>Zf[4].X="@"+M+"/"+w,Yt=e=>{let f=e.c,t=s(-(Yf.x-f.x),Yf.z-f.z)-f.Y;t>a&&(t-=z),t<-a&&(t+=z);let l=e.Q*G;return f.Y+=E(t,-l,l),r(t)<.001},bt=(e=1)=>{F&&(P-=e,P>-1&&It(),P<0?(X=1,k=1,F=0):(Ot(Yf.x,Yf.y,Yf.z,0,0,0,.5,.5,"f00",1,0,2,14,v()*z,v()*z,.2,5),O(9)))},Ct=(e,f,t)=>{let l=s(-(f.x-e.c.x),f.z-e.c.z)-e.I;l>a&&(l-=z),l<-a&&(l+=z);let r=e.Q*t;return E(l,-r,r)},St=(e,f,t,l,r=0,i=0,o=0)=>{Ce.push({b:e,x:f,y:t,z:l,vx:r,vy:i,vz:o})},Lt=e=>{Zf[0].W=e,Zf[1].W=e},mt=(e,f)=>{let t=e.x,l=e.z,i=[];for(let e=ye.length;e--;){let o=ye[e];if(!o.f){let e=r(t-o.c.x),c=r(l-o.c.z);e<f&&c<f&&i.push(o)}}return i.length?i:0},Bt=e=>{let f=mt(Yf,6);if(f)for(let e=f.length;e--;){let t=f[e];6===t.b?t.nr&&(fe=t,Lt(1),ie=0,re=1):8===t.b&&(te=t,Lt(1),ie=0,re=1),le=.1,O(14)}},Gt=e=>{for(let e of ze)if(e.V)return e.V=0,O(13),pt(e.c.x,e.c.y,e.c.z,e.B),1;return 0},Dt=e=>{for(let f=5;f--;){let t=ze[f];t.V=e,t.A=z/5*f}},Wt=e=>{e.V=0,pt(e.c.x,e.c.y,e.c.z,e.B,e.b,e.c.p,e.c.Y),O(20)},Vt=e=>{for(let f of pe)f.V=e},Pt=e=>{ue=0,pt(Ae.c.x,Ae.c.y,Ae.c.z,Ae.B,Ae.b,Ae.c.p,Ae.c.Y),O(6)},wt=(e,f=-1)=>{if(b&&f<0)return;let t=e.c,l=f>-1?1:.6;if(v()<l){let e=v();e=e>95?6:e>.9?4:e>.85?3:e>.75?2:e>.3?1:0,f>-1&&(e=f);let l=Et(8,0,0,$f(t.x,t.y,t.z,0,0));l.cg=e,l._size=.5;let r=["ff0f","aaaf","0f0f","0fff","f80f","48ff"][e];return l.B=r,l.C=r,l}},Mt=(e,f=0,t=2,l=1)=>{e?(Zf[8].X=e,Zf[8].x=Ef(e),l&&O(13),ne=f?99:t,xe=1,Zf[6].W=xe,Zf[7].W=xe,Zf[8].W=xe):xe=0},Ht=e=>{re=0,fe=0,te=0,Lt(0)},Ut=["LAND CLOSE CARGO TO BEGIN LOADING","NAVIGATE TO NEXT CARGO"],kt=[[3,2,"TRAINING BEGINS"],[0,0,"TO MOVE FORWARDS"],[0,1,"TO MOVE BACKWARDS"],[0,2,"TO MOVE LEFT"],[0,3,"TO MOVE RIGHT"],[3,3,"AIM WITH MOUSE"],[1,0,"SHOOT"],[1,1,"BOMB"],[0,4,"TO LAND"],[3,1,""],[0,4,"TO DUSTOFF"],[3,2,""],[3,3,"LIBERATE PYRA AND DO NOT BOMB THEM"],[5,6,"FOLLOW THE FLASHING ARROW"],[4,,"LAND CLOSE TO PYRA"],[3,1,"PYRA LIBERATED"],[0,4,"TO DUSTOFF"],[5,1,"NAVIGATE TO BOTA"],[2,,"BOMB BOTA"],[3,2,"GOT IT"],[5,0,"NAVIGATE TO TURI"],[2,,"BOMB TURI"],[3,2,"GOOD"],[5,4,"NAVIGATE TO TRIA"],[2,,"SHOOT TRIA"],[3,2,"WELL DONE"],[5,3,"NAVIGATE TO DART"],[2,,"SHOOT DART"],[3,2,"MASTERFUL"],[5,5,"NAVIGATE TO PROWLER"],[2,,"SHOOT PROWLER"],[3,2,"EXCELLENT"],[3,3,"BOTA AND TURI CAN DROP CARGO ON DEATH"],[5,-3,Ut[1]],[4,,Ut[0]],[3,2,""],[3,3,"WINGMEN INCREASE YOUR SHOOTING ABILITY"],[5,-4,Ut[1]],[4,,Ut[0]],[3,2,""],[3,3,"HORNETS AUTO TARGET GROUND ENEMIES"],[5,0,"NAVIGATE TO TURI"],[2,,"MOVE INTO HORNET RANGE"],[3,2,"KABOOM"],[5,-6,Ut[1]],[4,,Ut[0]],[3,2,""],[3,3,"LASERS AUTO TARGET FLYING ENEMIES"],[5,4,"NAVIGATE TO TRIA"],[2,,"MOVE INTO LASER RANGE"],[3,2,"ZAP"],[3,2,""]],Ft=(e,f,t)=>{let l,r;do{l=rt(e,f,t);let i=Yf.x-l.x,o=Yf.z-l.z;r=i*i+o*o}while(r<2e3);return l},Xt=e=>{m=1,B=.6,Mt(0,0)},Kt=f=>{if(S===kt.length)return Mt("TRAINING COMPLETE",1),void(b=0);let[t,l,r]=kt[S];if(t<1)l=e.c[l].k,Mt("PRESS "+l.toUpperCase()+" "+r,1);else if(t<2)Mt("PRESS "+["LEFT","RIGHT"][l]+" MOUSE BUTTON TO "+r,1);else if(t<3)Mt(r,1);else if(t<4)Mt(r,0,3);else if(t<5)Mt(r,1);else{let e=1===l?Gf:mf;L=l<0?wt(Fe(Ft(e,0,0)),-l):Et(l,0,0,Ft(e,Ue[l][13],Ue[l][14])),L.V=1,Mt(r,1)}At=t,ht=l,S++},_t=e=>{for(let e=30;e--;)Ot(Yf.x,Yf.y,Yf.z,3*(v()-.5),0,3*(v()-.5),1.5*v(),1.5,"ca7",d(1,4),0);Ot(Yf.x,Yf.y,Yf.z,0,0,0,2.5,objectstodraw=2.5,"889",1,0,2,17,Yf.Y,0,.1,9),O(25)},Jt=e=>{w&&M===w?(gt(1e3*M),Mt("PYRA X 1000 BONUS"),X=1,j=1,_t(),O(22)):e||Mt("PYRA LIBERATED",0,2,0)};mainGameLoop=t=>{if(G=(t-We)/1e3,We=t,requestAnimationFrame(mainGameLoop),Y){if((()=>{ef=[0,0,0],ff=[0,0,0];for(let e=0;e<3;e++)tf[e]=1e4*e,lf[e]=1e4*e})(),se=[],2===Y){if(!at[e.c[4].k]||J||q||k||(K?(re&&Ht(),Yf.vy=3.2-_,_=3.2,K=0,J=0,q=1,_t()):(_=Cf[0|Yf.z][0|Yf.x],Yf.vy=2*-(3.2-_),J=1),X=1),k){if(U&&(Yf.y-=5*G)<=0){Yf.y=0,Dt(0),pt(Yf.x-.5+v(),Yf.y-.5+v(),Yf.z-.5+v(),Xe.B),Ot(Yf.x,Yf.y,Yf.z,0,5,0,2,2,Xe.B,0,1,2,7,Yf.Y,0);for(let e of pe)e.V&&Ot(e.c.x,e.c.y,e.c.z,0,5,0,3,3,e.B,0,1,2,10,e.c.Y,0);if(Ee){Ee=0;for(let e of Te)Ot(e.c.x,e.c.y,e.c.z,0,d(4,7),0,4,4,e.B,0,1,2,12,e.c.Y,0)}Pt(),lt(Yf.x,Yf.z),Ze=0,$e=0,U=0,f.exitPointerLock(),ae=0;let t=e.s;t.push(I(V,"")),t.sort((e,f)=>f.s-e.s),t.length=5;for(let f=5;f--;)if(""===t[f].n){e.s=t,jf[4].W=0,jf[0].W=1,jf[1].W=1,jf[3].W=1;let l="ENTER YOUR NAME PLAYER";jf[2].W=1,jf[2].X=l,jf[2].x=Ef(l),Hf=f,zt="",Uf=1;break}xf=jf,O(11)}}else at[e.c[0].k]&&!X?(je=E(je+G,0,1),Ze=10*N(je/1)):at[e.c[1].k]&&!X?(je=E(je+G,0,1),Ze=10*-N(je/1)):(je=0,Ze*=.95,r(Ze)<.01&&(Ze=0)),at[e.c[3].k]&&!X?(Qe=E(Qe+G,0,1),$e=10*N(Qe/1)):at[e.c[2].k]&&!X?(Qe=E(Qe+G,0,1),$e=10*-N(Qe/1)):(Qe=0,$e*=.95,r($e)<.01&&($e=0));if(Yf.p=-Ze/10*.3,0!==Ze||0!==$e){let e=Yf.Y,f=n(e),t=x(e),l=(t*Ze+f*$e)*G;Yf.x=E(Yf.x+(-f*Ze+t*$e)*G,1,Ve),Yf.z=E(Yf.z+l,1,Ve)}if(bf=$f(Yf.x+.5,Yf.y+18,Yf.z-31,0,-.6),!k){let e=Yf.Y,f=Yf.x+14*-n(e),t=Yf.z+14*x(e);if(f>=0&&f<D&&t>=0&&t<D){Ye=Cf[0|t][0|f],Re=-Yf.y/14*10;let e=ft(f,0,t);e&&(uf(e.x-20,e.y,e.x+20,e.y,"ffff"),uf(e.x,e.y-20,e.x,e.y+20,"ffff"),se.push(Fe($f(f,0,t,0,0),17,"fff6",2.5)))}}let t=20.5,l=0|Yf.x,i=0|Yf.z,a=.6*t,u=t-a,A=[];for(let e=t;e>=-t;e--){let f=[];for(let o=-t;o<=t;o++){let t=l+o+.5,n=i+e+.5;if(t<.5||t>=D-.5||n<.5||n>=D-.5){f.push(0);continue}let x=ft(t,Cf[n-.5|0][t-.5|0],n);if(!x){f.push(0);continue}let s=c(r(o),r(e)),y=1;u>0&&s>a?y=1-(s-a)/u:s>a&&(y=0),f.push({x:x.x,y:x.y,a:c(0,y),c:Sf[0|n][0|t]+zf(c(0,y))})}A.push(f)}for(let e=0;e<A.length;e++)for(let f=0;f<A[e].length;f++){let t=A[e][f];if(t&&t.a){if(f<A[e].length-1){let l=A[e][f+1];l&&l.a&&uf(l.x,l.y,t.x,t.y,t.c+zf(o(l.a,t.a)))}if(e<A.length-1){let l=A[e+1][f];l&&l.a&&uf(l.x,l.y,t.x,t.y,t.c+zf(o(l.a,t.a)))}}}ye=[];let h,p=Yf.x,T=Yf.y,g=Yf.z,R=Yf.Y,Y=n(R),C=x(R),S=3.2==T,W=(e,f,t,l)=>{let r=e.c;e.A+=t*G,e.A>z&&(e.A-=z),e.A<0&&(e.A+=z);let i=e.A,o=n(i),c=x(i);if(l){let e=o*f;r.y=T+c*f,r.x=p+C*e,r.z=g+Y*e}else r.x=p-o*f,r.z=g+c*f,r.y=T},ee=(e,f)=>{let t=e.b;oe.splice(f,1),pt(e.c.x,e.c.y,e.c.z,e.B,t,e.c.p,e.c.Y),O(6),b&&e===L?Xt():(t<6&&0==--ce&&Mt("LEVEL PURGED"),gt([100,150,10,250,200,400,0,0,0,0,0,0,0][t]))},ne=e=>{for(let f=Ce.length;f--;){let t=Ce[f];if(7===t.b&&Qf(t,e.c,e.J))return Ce.splice(f,1),1}return 0};ue&&(Ae.c.Y=R,W(Ae,Ae.D,Ae.G,1),se.push(Ae));for(let e of ze)e.V&&(W(e,e.D,e.G),se.push(e));for(let e=2;e--;){let f=pe[e];f.V&&(f.A=[z/4,-z/4][e]+R,f.c.Y=R,W(f,f.D,0),se.push(f))}if(Ee)for(let e of Te)if(e.V){e.A=z/2+R,e.c.Y=R,W(e,2,0),e.xc+=e.xr*G,e.zc+=e.zr*G;let f=n(e.xc)*e.xm,t=n(e.zc)*e.zm,l=f*Y+t*C;e.c.x+=f*C-t*Y,e.c.z+=l,se.push(e)}else if(e.T){let f=e.T,t=e.c;if(-1===oe.indexOf(f)){e.T=0;continue}t.x+=e.vx*G,t.y+=e.vy*G,t.z+=e.vz*G;let l=1/(y(e.vx*e.vx+e.vy*e.vy+e.vz*e.vz)||1),r=-e.vx*l,i=-e.vy*l,o=-e.vz*l;for(let e=2;e--;)Ot(t.x,t.y,t.z,5*r+4*(v()-.5),5*i+4*(v()-.5),5*o+4*(v()-.5),.5,.5,Me[d(0,3)],d(2,4));let c=f.c;t.y<=c.y&&(pt(t.x,c.y,t.z,e.B),Qf(t,c,e.J+f.J)&&(ee(f,oe.indexOf(f)),wt(f)),e.T=0,e.vx=e.vy=e.vz=0,t.p=0),se.push(e)}for(let e=Ce.length;e--;){let f,t=Ce[e],l=t.b;if(l<=1&&t.y<3.2&&(t.y=E(t.y+t.vy*G,0,3.2),f=1,3.2===t.y&&1===l)){let e=v()*z;for(let f=6;f--;)St(l,t.x,3.2,t.z,16*-n(e),1,16*x(e)),e+=z/6;O(17)}f||(t.x+=t.vx*G,t.z+=t.vz*G);let r=t.x-p,i=t.z-g,o=r*r+i*i;if(o>576){Ce.splice(e,1);continue}if(l<7&&(o<.5&&S&&(Gt()||bt(),Ce.splice(Ce.indexOf(t),1)),S&&F))for(let f of pe)if(f.V){let l=f.c.x-t.x,r=f.c.z-t.z;if(l*l+r*r<f.J*f.J){Ce.splice(e,1),Wt(f);break}}let c=ft(t.x,t.y,t.z);if(c){let e=6;hf(c.x-e/2,c.y-e/2,e,e,Pe[l])}}S&&Ee&&(ve-=G)<=0&&(h=1);e:for(let e=oe.length;e--&&!k;){let f=oe[e],t=f.b;if(11===t&&!ue)continue;let l=f.c,r=0,i=l.x-p,o=l.z-g,c=i*i+o*o,a=(e,l=1)=>{if(r&&c<f.K*f.K&&(f.H-=G)<0){f.H=f.L;let r=f.c.Y;return l&&(r=s(-(Yf.x-f.c.x),Yf.z-f.c.z)),St(t,f.c.x,f.c.y+e,f.c.z,-n(r)*f.N,1,x(r)*f.N),1}return 0},u=e=>{Qf(l,f.R,5)&&(f.R=et()),f.I+=Ct(f,f.R,G),l.x+=-n(f.I)*f.d*G,l.z+=x(f.I)*f.d*G,r&&A(f)},A=t=>(f.f&&!K||!f.f&&K)&&Qf(l,Yf,f.J)?(Gt()||bt(),ee(f,e),1):0;if(c<1152){if(9!==t){if(f.f&&ne(f)){ee(f,e);continue}if(se.push(f),ye.push(f),8===t&&(f.fl?(f.fc-=G)<0&&(f.fl=0,f.fc=2,f.C=f.B):(f.fc-=G)<0&&(f.fl=1,f.fc=.05,f.C="ffff")),S&&f.f)for(let t of pe)if(t.V&&Qf(l,t.c,f.J+t.J)){ee(f,e),Wt(t);continue e}}if(S&&ue&&!Ae.fl&&(Ae.H-=G)<0&&t<6&&c<200&&f.f){0==he--&&Pt(),Ae.C=He[he],Ae.H=Ae.L,Oe=f,Ae.fl=1,Ae.fc=1,O(21),ee(f,e),f.f||6===t||wt(f);continue}if(S&&Ee&&h&&t<2&&c<200)for(let e of Te)if(e.V&&!f.P){ve=.2,e.T=f,f.P=1,e.V=0;let t=e.c,l=f.c,r=l.x-t.x,i=l.y-t.y,o=l.z-t.z;t.Y=s(-r,o),t.p=s(-i,y(r*r+o*o));let c=y(r*r+i*i+o*o)||1,n=i/c,x=o/c;e.vx=r/c*e.d,e.vy=n*e.d,e.vz=x*e.d,O(24);break}r=1}if(6===t&&r)f.j?(l.y+=f.vy*G,f.vy-=9.8*G,l.Y-=.03,l.y<f.gr&&(l.y=f.gr,f.j=0,f.U=2*v())):(f.U-=G)<0&&(f.j=1,f.vy=5,O(10));else if(0===t)a(1)&&O(12);else if(2===t)l.Y+=f.d*G,l.p+=f.d*G,(f.d*=.968)<.01&&(f.d=0),l.x+=-n(f.I)*f.d*G,l.z+=x(f.I)*f.d*G,(f.U-=G)<0?(oe.splice(oe.indexOf(f),1),0==--ce&&Mt("ALL ENEMY UNITS DESTROYED"),r&&(pt(l.x,l.y,l.z,f.C),Ot(l.x,l.y,l.z,0,0,0,1.2,1,"fff",0,0,2,17,l.Y,0,.5,10),O(15))):r&&A(f);else if(1===t){if(r){(f.U-=G)<0&&(f.U=2,f.bm=v()<.5?.5:-.5);let e=2-f.U,t=f.bm*(e<.5?2*e:e>1.5?2*(2-e):1);l.x+=-n(l.Y)*t*G,l.z+=x(l.Y)*t*G;let r=f.az-l.z;l.x+=.1*(f.ax-l.x)*G,l.z+=.1*r*G,a(.5,1),A(f)}}else if(3===t){if(u(),l.Y=f.I,r&&(A(f),(f.H-=G)<0)){f.H=f.L;let e=-n(l.Y)*f.N,r=x(l.Y)*f.N;St(t,l.x,l.y,l.z,e,0,r),O(16)}}else if(8===t)r&&(f.c.Y+=1.1*G);else if(4===t){if(l.Y+=4.5*G,!b&&(f.U-=G)<0){let e=Et(2,0,0,$f(l.x,l.y,l.z,v()*z,v()*z));ce++,e.U=9,f.U=4*v()+3,r&&O(5)}u()}else if(5===t){let e;u(),r&&c<f.K&&(e=1,f.d=E(f.d*=.98,0,f.bm),Yt(f)&&(f.H-=G)<0&&(f.H=f.L,St(t,l.x,3.2,l.z,-n(l.Y)*f.N,1,x(l.Y)*f.N),O(18))),e||(f.d=f.bm,l.Y=f.I)}}if(ue&&Ae.fl){if(Oe){let e=ft(Ae.c.x,Ae.c.y,Ae.c.z),f=ft(Oe.c.x,Oe.c.y,Oe.c.z);e&&f&&uf(e.x,e.y,f.x-5+d(0,10),f.y-5+d(0,10),["fff","fff","0ff","00f"][d(0,3)]+zf(Ae.fc))}(Ae.fc-=G)<=0&&(Ae.fl=0,Oe=0)}if(U&&se.push(Xe),k&&U)Ot(Yf.x-.5+v(),Yf.y,Yf.z-.5+v(),0,v(),0,3,3,["fff","ccc","999","666"][d(0,3)],0,0,0,0,0,0,d(2,3),d(20,30));else{if(r(Ze)>.1){let e=r(Ze)/10*200*G|0,f=-n(Yf.Y),t=x(Yf.Y),l=Ze<0,i=l?-f:f,o=l?-t:t,c=Yf.x+(l?.5*f:.5*-f),s=Yf.y,y=Yf.z+(l?.5*t:.5*-t);for(let f=e;f--;)Ot(c,s,y,5*i+4*(v()-.5),4*(v()-.5),5*o+4*(v()-.5),.5,.5,"fff",2)}if(r($e)>.1){let e=Yf.Y,f=n(e),t=x(e),l=$e>0,i=l?-t:t,o=l?-f:f,c=5*i,s=5*o,y=.5,a=Yf.x+i*y/2,z=Yf.y,u=Yf.z+o*y/2;for(let e=r($e)/10*200*G|0;e--;)Ot(a,z,u,c+4*(v()-.5),4*(v()-.5),s+4*(v()-.5),.5,.5,"fff",2)}}let xe,Se=(()=>{let e,f=1e9;for(let t of de){let l=t.c.x-p,r=t.c.z-g,i=l*l+r*r;i<f&&(f=i,e=t)}return e&&(e.dp=f),e})(),Le=Se&&Se.dp>576;if(Ie&&Ne&&(Le&&Se===ge||(xe=Ne.c)),Le&&!k&!X){let e=Se.c,f=s(-(e.x-p),e.z-g),t=3,l=p-n(f)*t,r=T,i=g+x(f)*t;Ne=Fe($f(l,r,i,f,0),16,we[d(0,4)],1),se.push(Ne)}if(xe&&Ot(xe.x,xe.y,xe.z,0,0,0,1,1,"fff",1,0,2,16,xe.Y,xe.p,1,1),Ie=Le,ge=Se,re){if((le-=G)<=0){le+=.1,O(14);let e=te||fe,f=e.c;Ot(f.x,f.y,f.z,0,20,0,1,1,e.B,7)}if((ie+=G/2)>=1){let e;if(b&&(fe||te)&&Xt(),fe)O(4),e=fe,e.nr=0,oe.splice(oe.indexOf(e),1),b||(de.splice(de.indexOf(e),1),gt(1250),M++,Rt(),Jt()),fe=0;else{ye.splice(ye.indexOf(te),1),oe.splice(oe.indexOf(te),1),O(7),gt(150);let f=te.cg;if(Mt(["POINTS","LIFE","SHIELDS","WINGMEN","HORNETS","LASER"][f],0,1,0),0===f)gt(1e3);else if(1===f)P=E(P+1,0,9),It();else if(2===f)Dt(1);else if(3===f)Vt(1);else if(4===f){Ee=1;for(let e of Te)e.V=1}else 6===f&&(ue=1,Oe=0,he=9,Ae.C=He[he]);e=te,te=0}let f=e.c;Ot(f.x,f.y,f.z,0,15,0,.8,.8,e.B,1,0,2,e.M,f.Y,0,e._size,e._size),re=0,Lt(0),Bt()}Zf[0].w=960*ie}J?(Yf.y+=Yf.vy*G,Yf.Y-=.03,Yf.y<=_&&(Yf.y=_,re=0,K=1,J=0,Bt())):q&&(Yf.y+=Yf.vy*G,Yf.y>=_&&(Yf.y=_,X=0,q=0));for(let e=be.length;e--;){let f=be[e];f.x+=f.vx*G,f.y+=f.vy*G,f.z+=f.vz*G;let t=f.x,l=f.z;if(t<0||t>=D||l<0||l>=D){be.splice(e,1);continue}if(f.y<=0){let t=mt(f,3);if(t)for(let e=t.length;e--;){let f=t[e],l=f.b;8!==l&&(6!==l?wt(f):(Ht(),Mt("DO NOT BOMB THE PYRA"),de.splice(de.indexOf(f),1),w--,w<1&&bt(1e9),Rt(),O(8),Jt(1)),ee(f,oe.indexOf(f)))}else{let e=0|f.x,t=0|f.z;(e>0||e<D||t>0||t<D)&&pt(f.x,f.y,f.z,Sf[t][e])}lt(f.x,f.z),O(3),be.splice(e,1);continue}let r=ft(f.x,f.y,f.z);if(r){let e=5;hf(r.x-e/2,r.y-e/2,e,e,"fc8f")}Ot(f.x,f.y,f.z,5*-n(f.Y)+4*(v()-.5),2*(v()-.5),5*x(f.Y)+4*(v()-.5),.5,.5,["f00f","f80f","ff0f","ffff"][d(0,3)],2)}let me=30;if(j){Yf.y+=me*G,Yf.Y+=.02;let e=8,f=25;T<8?Ot(p,T,g,(v()-.5)*e,-f-15*v(),(v()-.5)*e,.5,.5,"ffff",d(2,4)):Ot(p,T,g,0,me,0,1,1,we[d(0,4)],1,0,2,17,v()*z,v()*z,.5,40),Yf.y>25&&(Z=1,j=0,Q=2,U=0,Ot(p,T,g,0,me,0,1,1,Xe.B,1,0,2,7,Yf.Y,0,1,1))}else Z?(Yf.y+=me*G,(Q-=G)<0&&vt()):$&&(Q-=G)<0&&(F=1,X=0,$=0,U=1,b?Kt():Mt(`LEVEL ${ut} LIBERATE ${H} PYRA`,0,3));if(b&&(m?(B-=G)<0&&(m=0,Kt()):At<1?at[ht]&&Xt():At<2?ht<1?Ce.length&&Xt():be.length&&Xt():At<4?(ht-=G)<0&&Xt():At>4&&L&&Qf(Yf,L.c,600)&&Xt(),L&&L.V)){let e=L.c,f=e.x-p,t=e.z-g,l=f*f+t*t;if(l>144){let e=y(l),r=1,i=r+(10-r)*E((e-24)/76,0,1),o=s(-f,t),c=p-n(o)*i,a=T,z=g+x(o)*i;se.push(Fe($f(c,a,z,o,0),16,we[d(0,4)],1))}}}var l;if(1===Y){Yf=$f(0,0,0,0,0),bf=$f(0,0,-31,0,0),nt.c.Y+=.0011,nt.c.p-=.0013;let e=it.c,f=.3,t=.15;ot+=f*G,ct+=f*G,e.x=n(ot)*t-1.25,e.y=.5+x(ct)*t;let l=0-e.x,r=0-e.z;e.Y=s(-l,r);let i=0-e.y,o=y(l*l+r*r);e.p=s(i,o),(()=>{for(let e of st){if(e.x+=10*Vf.x*G,e.y+=10*Vf.y*G,e.z+=10*Vf.z*G,e.x*e.x+e.y*e.y+e.z*e.z<216)continue;e.z<-30&&(e.x=90*v()-30,e.y=90*v()-30,e.z+=60);let f=ft(e.x,e.y,e.z);f&&hf(f.x,f.y,e.size,e.size,"fff"+zf(E(1-e.z/30,0,1)))}})(),se=[nt,it]}if((()=>{for(let e=_e.length;e--;){let f=_e[e];if((f.ttl-=G)<=0)_e.splice(e,1);else if(f.x+=f.vx*G,f.y+=f.vy*G,f.z+=f.vz*G,f.vy-=f.gy*G,f.C=f.B+zf(f.ttl/f.T),-1!==f.S&&-1!==f.E&&(f._size=f.S+(f.E-f.S)*(1-f.ttl/f.T)),f.b>1)se.push(f),f.y<1&&f.y>0&&Ot(f.x-.5+v(),f.y,f.z,0,v(),0,3,3,["888","666","444","222"][d(0,3)],0,0,0,0,0,0,d(2,3),d(20,30));else{let e=ft(f.x,f.y,f.z);if(e){let t=f._size;hf(e.x-t/2,e.y-t/2,t,t,f.C)}}}})(),xf){if(xe&&(ne-=G)<0&&(xe=0,Zf[6].W=0,Zf[7].W=0,Zf[8].W=0),xf===jf){ae=o(2,ae+G);let e=1-ae/2;Yf.y=5*(1-e*e*e),jf[0].Z=["f00f","f80f","ff0f","0f0f","0fff","000f","ffff"][d(0,6)]}for(let e of xf)if(e.W){let f=e.b;if(f<1)vf(e);else if(f<2)Tf((l=e).x,l.y,l.X,l.Z,l.Y);else if(f<3)hf(e.x,e.y,e.w,e.h,e.C,2);else{let f=e.x,t=e.y,l=f+e.w,r=t+e.h;uf(f,t,l,t,e.C,2),uf(l,t,l,r,e.C,2),uf(f,r,l,r,e.C,2),uf(f,r,f,t,e.C,2)}}}(()=>{for(let e of se){let f=e.c,t=[],l=n(f.Y),r=x(f.Y),i=n(f.p),o=x(f.p),c=Ke[2*e.M];for(let n=0;n<c.length;){let x=c[n++],s=c[n++],y=c[n++];if(e._size){let f=e._size;x*=f,s*=f,y*=f}let a=y*o-s*i,z=x*r-a*l;a=x*l+a*r;let u=ft(f.x+z,f.y+(y*i+s*o),f.z+a);t.push(u)}if(18!==e.M||Wf){let f=Ke[2*e.M+1];for(let l=0;l<f.length;){let r=t[f[l++]],i=t[f[l++]];r&&i&&uf(r.x,r.y,i.x,i.y,e.C+"f")}}else{let f=xf===Xf||xf===Jf?"6":"f",c=96,n=96,x=Ke[2*e.M],s=48,y=D/2,a=s-y,z=s+y;for(let e=0;e<c;e++)for(let c=0;c<n;c++){let s=e*(n+1)+c,y=3*s,u=x[y],A=x[y+1],h=x[y+2],O=h*o-A*i,p=h*i+A*o,E=u*r-O*l;if(O=u*l+O*r,E*(bf.x-E)+p*(bf.y-p)+O*(bf.z-O)>0){let l="04c"+f;e>=a&&e<z&&c<D&&(l=Sf[e-a][c]+f);let r=t[s],i=t[s+1],o=t[s+n+1];r&&i&&uf(r.x,r.y,i.x,i.y,l),r&&o&&uf(r.x,r.y,o.x,o.y,l)}}}}})(),(()=>{cf.clear(16384);for(let e=0;e<3;e++){if(ff[e]>0){cf.bindBuffer(34962,De);let f=18*lf[e];cf.bufferData(34962,of.subarray(f,f+18*ff[e]),35048),cf.enableVertexAttribArray(Le),cf.vertexAttribPointer(Le,2,5126,!1,24,0),cf.enableVertexAttribArray(me),cf.vertexAttribPointer(me,4,5126,!1,24,8),cf.drawArrays(4,0,3*ff[e])}if(ef[e]>0){cf.bindBuffer(34962,Ge);let f=12*tf[e];cf.bufferData(34962,rf.subarray(f,f+12*ef[e]),35048),cf.enableVertexAttribArray(Le),cf.vertexAttribPointer(Le,2,5126,!1,24,0),cf.enableVertexAttribArray(me),cf.vertexAttribPointer(me,4,5126,!1,24,8),cf.drawArrays(1,0,2*ef[e])}}})()}},onload=f=>{onresize=e=>{C.style.transform="scale("+o(innerWidth/1920,innerHeight/1080)+")",C.style.left=((innerWidth-C.getBoundingClientRect().width)/2|0)+"px"},onresize(),(e=localStorage.getItem("com.antix.nlnm"))?e=JSON.parse(e):(e={s:[I(8e6),I(4e5),I(2e5),I(1e5),I(5e4)],a:1,c:[R("KeyW"),R("KeyS"),R("KeyA"),R("KeyD"),R("KeyE"),R("KeyQ")]},g());for(let f=6;f--;)5===f?Kf(5,e.a?"ON":"OFF"):Kf(f,e.c[f].k);Ff();let t=[-.6,-.3,0,.3,.6],l="";for(i=40;i<127;i++)l+=String.fromCharCode(i);for(let e=0;e<ke.length;)Ke.push([...ke[e++]].map(e=>t[l.indexOf(e)])),Ke.push([...ke[e++]].map(e=>l.indexOf(e)));(()=>{let e=y(17830.8125);Vf=$f(-41.25/e,.5/e,-127/e);for(let e=400;e--;)st.push({x:90*(v()-.5),y:90*(v()-.5),z:30*v(),size:4*v()+1})})(),tt(1),ze=[];for(let e=5;e--;){let f=Et(9,0,0,$f(0,3.2,0,0,0),1);f.D=4,f.A=z/5*e,f.G=4,f._size=.5,ze.push(f)}Te=[];for(let e=5;e--;){let e=Et(12,0,0,$f(0,3.2,0,0,0),1);e._size=.5,e.xc=v()*z,e.zc=v()*z,e.xr=1.5+v(),e.zr=1.5+v(),e.xm=.5+v(),e.zm=.5+v(),Te.push(e)}pe=[];for(let e=2;e--;){let e=Et(10,0,0,$f(0,3.2,0,0,0),1);e.D=2,e._size=1,pe.push(e)}Ae=Et(11,0,0,$f(0,3.2,0,0,0),1),Ae.D=1.25,Ae._size=1,Ae.G=4,yf=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"0880","0448844004","134048A808","0060826424060888","00608264866808?424","00022484A088","80000464866808","802002062868866404","00808448","2060826486682806240220;464","086886826020022484",0,0,0,0,0,0,"002262808668280600","0804408488A404","0008688664826000?404","8040044888","004084480800","80000888A404","800008A404","804004488884","0008A404A088","0080=048A808","4080844804","0008A0826404A88664","000888","0800448088","08008880","0448844004","046482600008","0448844004>588","08006082648688?404","8020022464866808","0080=048","0004488880","0004488480","0008448880","0088A008","004448=480","00800888"].map(e=>e?[...e].map(e=>(i="012345678:;<=>?@A".indexOf(e))<9?i:8-i):0);let r=[3,5,7,9,11];for(let e=0;e<6;e++){let f=Ue[e];for(let e of r)f[e+1]=(f[e+1]-f[e])/10}}</script>