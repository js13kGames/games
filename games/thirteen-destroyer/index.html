<!doctype html><title>Thirteen Destroyer - js13kGames 2012</title><meta content="An incredible (Ugly?) Html5 Retro Arcade Shoot Em Up" name=description><style>body{margin:0;padding:0;background-image:url('pattern.png');background-color:#333;text-align:center;color:#f1f1f1;font-family:helvetica,arial,verdana,sans-serif;text-transform:uppercase}h1{color:#fff;text-shadow:1px 1px 10px #19ff6a}#info{width:800px;height:50px;margin:0 auto;overflow:hidden}.sx{float:left;margin:15px 0;font-size:22px;text-shadow:2px 2px 3px #ff3bdc}.dx{float:right;margin:15px 0;font-size:22px;text-shadow:2px 2px 3px #36eaff}#bottomInfo{margin:15px 0;font-size:22px;text-shadow:2px 2px 3px #36eaff}#gameCanvas{display:block;margin:0 auto;background-color:#000;border-radius:10px;box-shadow:1px 1px 30px #19ff6a;border:1px solid #111}</style><header><h1>Thirtheen Destroyer</h1></header><section><div id=info><div class=dx>Score: <span id=score>0</span></div><div class=sx>Shield: <span id=shield>50</span></div></div><canvas id=gameCanvas></canvas><div id=bottomInfo>Difficulty: <span id=difficulty>0</span></div></section><script>var r={playState:0,score:0,key:{left:37,up:38,right:39,down:40,w:87,a:65,s:83,d:68,space:32},pressedKeys:[],bullet:[],enemies:[],enemiesDestroyed:0,difficulty:0};r.canvas=document.getElementById("gameCanvas"),r.canvas.width=800,r.canvas.height=500,r.ctx=r.canvas.getContext("2d"),r.clamp=function(e,t,i){return(e=i<e?i:e)<t?t:e},r.init=function(){r.ctx.font="32px Arial",r.ctx.fillStyle="#FFFFFF",r.ctx.fillText("PRESS SPACEBAR TO START THE GAME",100,100),r.ctx.fillText("MOVE WITH ARROW KEYS",180,200),r.ctx.fillText("SHOOT IN 4 DIRECTION WITH WASD",120,300),r.ctx.fillText("GOOD LUCK!",290,400)},r.start=function(){r.playState=1,r.loop=setInterval(function(){r.draw(),r.update()},30),r.difficultyLoop=setInterval(function(){r.difficulty+=1,document.getElementById("difficulty").innerHTML=r.difficulty},13e3),r.enemyLoop=setInterval(function(){for(var e=r.difficulty;0<=e;e--)r.enemies.push(r.createEnemies())},2e3)},r.reset=function(){clearInterval(r.loop),clearInterval(r.enemyLoop),clearInterval(r.difficultyLoop),r.playState=0,r.player.x=320,r.player.y=240,r.player.shield=50,r.bullet=[],r.enemies=[],r.enemiesDestroyed=0,r.difficulty=0,r.score=0,document.getElementById("shield").innerHTML=r.player.shield,document.getElementById("difficulty").innerHTML=r.difficulty,document.getElementById("score").innerHTML=r.score},r.draw=function(){r.ctx.clearRect(0,0,r.canvas.width,r.canvas.height),r.background(),r.player.draw();for(var e=r.bullet.length-1;0<=e;e--)r.bullet[e].draw();for(e=r.enemies.length-1;0<=e;e--)r.enemies[e].draw()},r.update=function(){r.pressedKeys[r.key.w]&&(setTimeout(function(){r.bullet.push(r.createBullet(r.player.shootFromX(),r.player.shootFromY(),0,-1))},500),r.pressedKeys[r.key.a]=!1,r.pressedKeys[r.key.s]=!1,r.pressedKeys[r.key.d]=!1),r.pressedKeys[r.key.a]&&(setTimeout(function(){r.bullet.push(r.createBullet(r.player.shootFromX(),r.player.shootFromY(),-1,0))},500),r.pressedKeys[r.key.w]=!1,r.pressedKeys[r.key.s]=!1,r.pressedKeys[r.key.d]=!1),r.pressedKeys[r.key.s]&&(setTimeout(function(){r.bullet.push(r.createBullet(r.player.shootFromX(),r.player.shootFromY(),0,1))},500),r.pressedKeys[r.key.a]=!1,r.pressedKeys[r.key.w]=!1,r.pressedKeys[r.key.d]=!1),r.pressedKeys[r.key.d]&&(setTimeout(function(){r.bullet.push(r.createBullet(r.player.shootFromX(),r.player.shootFromY(),1,0))},500),r.pressedKeys[r.key.a]=!1,r.pressedKeys[r.key.s]=!1,r.pressedKeys[r.key.w]=!1),r.pressedKeys[r.key.left]&&(r.player.x-=r.player.xVelocity),r.pressedKeys[r.key.up]&&(r.player.y-=r.player.yVelocity),r.pressedKeys[r.key.right]&&(r.player.x+=r.player.xVelocity),r.pressedKeys[r.key.down]&&(r.player.y+=r.player.yVelocity),(r.player.x<=10||r.player.x+r.player.width>=r.canvas.width-10||r.player.y<=10||r.player.y+r.player.height>=r.canvas.height-10)&&(--r.player.shield,r.player.checkShield()),r.player.x=r.clamp(r.player.x,10,r.canvas.width-r.player.width-10),r.player.y=r.clamp(r.player.y,10,r.canvas.height-r.player.height-10);for(var e=r.bullet.length-1;0<=e;e--)r.bullet[e].update(),!1===r.bullet[e].active&&r.bullet.splice(e,1);for(e=r.enemies.length-1;0<=e;e--)r.enemies[e].update(),!1===r.enemies[e].active&&r.enemies.splice(e,1);for(e=r.bullet.length-1;0<=e;e--)for(var t=r.enemies.length-1;0<=t;t--)r.bullet[e].x<r.enemies[t].x+r.enemies[t].width&&r.bullet[e].x+r.bullet[e].width>r.enemies[t].x&&r.bullet[e].y<r.enemies[t].y+r.enemies[t].height&&r.bullet[e].y+r.bullet[e].height>r.enemies[t].y&&r.enemies[t].explosion();for(e=r.enemies.length-1;0<=e;e--)r.enemies[e].x<r.player.x+r.player.width&&r.enemies[e].x+r.enemies[e].width>r.player.x&&r.enemies[e].y<r.player.y+r.player.height&&r.enemies[e].y+r.enemies[e].height>r.player.y&&(r.player.checkShield(),r.enemies[e].explosion())},r.background=function(){r.ctx.fillStyle="#000000",r.ctx.fillRect(0,0,r.canvas.width,r.canvas.height),r.ctx.rect(5,5,r.canvas.width-10,r.canvas.height-10),r.ctx.strokeStyle="#7DE0FF",r.ctx.stroke();for(var e=500*Math.random();0<=e;e--)r.ctx.beginPath(),r.ctx.arc(800*Math.random(),500*Math.random(),1.1*Math.random(),0,2*Math.PI),r.ctx.fillStyle="#FEFEFE",r.ctx.fill(),r.ctx.closePath()},r.player={x:320,y:240,xVelocity:8,yVelocity:8,width:30,height:30,shield:50,image:function(){var e=new Image;return e.src="ship.gif",e},draw:function(){r.ctx.drawImage(r.player.image(),r.player.x,r.player.y)},shootFromX:function(){return r.player.x+r.player.width/2},shootFromY:function(){return r.player.y+r.player.height/2},checkShield:function(){r.player.shield<=0?(r.ctx.clearRect(0,0,r.canvas.width,r.canvas.height),r.ctx.font="40px Arial",r.ctx.fillStyle="#FFFFFF",r.ctx.fillText("YOU LOSE!",300,150),r.ctx.fillText("PRESS SPACEBAR",220,220),r.ctx.fillText("TO RESTART THE GAME",170,270),r.reset()):(--r.player.shield,document.getElementById("shield").innerHTML=r.player.shield,r.ctx.beginPath(),r.ctx.arc(r.player.x+r.player.width/2,r.player.y+r.player.height/2,35,0,2*Math.PI),r.ctx.fillStyle="rgba(54,254,253, 0.5)",r.ctx.fill(),r.ctx.closePath())}},r.createBullet=function(e,t,i,l){var a={active:!0};return a.x=e,a.y=t,a.directionX=i,a.directionY=l,a.velocity=20,a.setWidth=function(e){return 0===e?4:8},a.setHeight=function(e){return 0===e?4:8},a.width=a.setWidth(a.directionX),a.height=a.setHeight(a.directionY),a.draw=function(){r.ctx.fillStyle="#FF3BDC",r.ctx.fillRect(a.x,a.y,a.width,a.height)},a.update=function(){0<=a.x&&a.x<=r.canvas.width&&0<=a.y&&a.y<=r.canvas.height?a.active=!0:a.active=!1,a.x+=a.velocity*a.directionX,a.y+=a.velocity*a.directionY},a},r.createEnemies=function(){var e={active:!0};return e.x=Math.random()*r.canvas.width,e.y=Math.random()*r.canvas.height,e.width=30,e.height=30,e.xVelocity=8,e.yVelocity=8,e.explosion=function(){e.active=!1,r.enemiesDestroyed+=1,r.setScore(),r.ctx.beginPath(),r.ctx.arc(e.x,e.y,50,0,2*Math.PI),r.ctx.fillStyle="#FEFEFE",r.ctx.fill(),r.ctx.stroke(),r.ctx.closePath()},e.image=function(){var e=new Image;return e.src="enemy.gif",e},e.draw=function(){r.ctx.drawImage(e.image(),e.x,e.y)},e.update=function(){e.x>=r.canvas.width-e.width&&(e.xVelocity=-1*e.xVelocity),e.x<=0&&(e.xVelocity=-1*e.xVelocity),e.y>=r.canvas.height-e.height&&(e.yVelocity=-1*e.yVelocity),e.y<=0&&(e.yVelocity=-1*e.yVelocity),e.x+=e.xVelocity,e.y+=e.yVelocity,e.x=r.clamp(e.x,0,r.canvas.width-r.player.width),e.y=r.clamp(e.y,0,r.canvas.height-r.player.height)},e},r.setScore=function(){r.score+=10,document.getElementById("score").innerHTML=r.score},window.addEventListener("keydown",function(e){if(r.pressedKeys[e.which]=!0,32===e.which){if(0!==r.playState)return!1;r.start()}}),window.addEventListener("keyup",function(e){r.pressedKeys[e.which]=!1}),r.init()</script>