<!doctype html><html><meta content="width=device-width,maximum-scale=1,user-scalable=0" name=viewport><title>Witches Cauldron - js13kGames 2025</title><style>*{touch-action:manipulation;user-select:none;touch-action:none}body,html{margin:0;display:flex;justify-content:center;align-items:center;height:100%}#gc,#mc{position:absolute;width:100vw;outline:0}@media (max-aspect-ratio:3/2){#gc,#mc{width:100vw}}@media (min-aspect-ratio:3/2){#gc,#mc,#oc{height:100vh;width:auto}}</style><body style="background: black;"><canvas height=2000 id=mc tabindex=0 width=3000 style="background: white;"></canvas><canvas height=2000 id=gc tabindex=0 width=3000></canvas>
<script>function t(t,s){return`${t},${s}`}function s(t,s){return Pt.t.path.findIndex(([i,e])=>i===t&&e===s)}function i(t,s){return t=Math.ceil(t),s=Math.floor(s),Math.floor(Math.random()*(s-t+1))+t}function e(){return document.getElementById("gc")}function h(t,s){const i=e(),h=s-i.offsetTop;return{i:Math.round((t-i.offsetLeft)/Ct()),h:Math.round(h/Ct())}}function n(t,s){return{o:Math.floor(t/R)*R,u:Math.floor(s/R)*R}}function a(t,s){const{i:i,h:e}=h(t,s),{o:a,u:o}=n(i,e);Wt.x=a,Wt.y=o}function o(){Pt.l=!1}function r(){Pt.k=Date.now();const t=wt[`${Wt.x/R},${Wt.y/R}`];if(t&&t.p){const s=()=>{Pt.m+=.5*t.J.v,Pt.M(),t.J.Y()};Pt.C([`Really? Sell this tower for ${.5*t.J.v}?`],s,!0)}}function c(t,s,i){return t>=s&&i>=t}function l(t,s){const i=c(t.x,s.x,s.x+s.width)||c(s.x,t.x,t.x+t.width),e=c(t.y,s.y,s.y+s.height)||c(s.y,t.y,t.y+t.height);return i&&e}function d(t,s){const{o:i,u:e}=n(t,s);return{T:i/R,$:e/R}}function u(t,s){const[i,e]=t,h=i*R,n=e*R;let a,o,r,c;switch(s){case Kt.SW:case Kt.S:case Kt.SE:case Kt.NW:case Kt.N:case Kt.NE:a=(i-1)*R,o=(i+2)*R,r=n,c=(e+1)*R;break;default:a=h,o=(i+1)*R,r=(e-1)*R,c=(e+2)*R}return{O:h,X:n,j:t[0]*R+R,F:t[1]*R+R,H:t[0]*R+25,R:t[1]*R+25,A:a,L:o,I:r,B:c}}function f(t,s){return Math.atan2(s.y-t.y,s.x-t.x)}function y(t,s,i){return{x:t.x+Math.cos(s)*i,y:t.y+Math.sin(s)*i}}function g(t){const s=localStorage.getItem(""+t);let i;if(s)try{i=JSON.parse(s)}catch(t){}return i&&"object"==typeof i?i:{D:t,P:0}}function p(){this.complete=!0}function x(t){30===t.G&&t.C(["Oh no! The Witch is making her evil soup...","dont let her catch critters to fill her cauldron!","","Drag towers from menu to map to catch critters...","catching critters earns you $ to build more towers!","",'Get some "High-energy Kids" out there now...',"a tower covers the blue squares shown while dragging!"]),this.complete||.75*this.q>t.K||(this.U.push(_,z),this.complete=!0,t.C(["Oh no, a Black Cat!! Its much faster than critters!","","It will also CURSE many of your towers as it passes!","","There are new towers in the menu...","place a Fish on a Stick to distract it!","","Click a tower to sell it for extra cash if needed."],()=>new zt))}function w(t){30===t.G&&t.C(["FLIIIES!","","The kids cant catch flies.","","Send out the guy with the net!","","Watch out for Black Cats and snakes..."]),900===t.G&&(t.C(["SNAKES ON A PATH!","","Snakes are too sneaky for a net...","put out some kids to chase them down!","","Black Cats are coming soon...","Fish on a Stick anyone?!"]),this.U.push(X,_,z),this.V.push(H)),1350===t.G&&(new zt,this.complete=!0)}function m(t){for(let s=1;t>=s;s++)setTimeout(()=>{new zt},500*s)}function k(t){30===t.G&&t.C(["Oh geez oh geez the Witch is right there!","","And our critter catching kids have fallen behind!","","Slow the critters down with these fans...","until the kids catch up!"]),1200===t.G&&(t.C(["Ahh here they are, put those kids to work!","","Watch out for snakes sneaking under the fans."]),this.U.push(X),this.V.push(H),this.complete=!0)}function J(t){30===t.G&&t.C(["Oh geez, the rest of our team is lost again!","","But we found some vaccuums to go with our fans!","","Stop the critters with fans...","and collect them with vaccuums!"]),this.complete||this.q>t.K||0!==bs.length||new zt,this.complete||this.q>t.K||Ss.length>10||(this.U.push(_,z),new zt,this.complete=!0,t.C(["Oh no a herd of Black Cats!","","Our appliances are no match for them!!","","Quickly, put out a Scratching Post!",""],()=>{m(3)}))}function v(t){60!==t.G&&400!==t.G||new zt,30===t.G&&t.C(["Well, our guys havent caught up yet...","and we are out of appliances!","","Hold off these Black Cats until we can regroup!"]),800===t.G&&t.C(["Oooh I found $200 under a rock!","","Good things too, more Black Cats are coming!","","Sell a Fish on a Stick to buy a Scratching Post...","but be quick, selling it will release the cat!"],()=>{t.m+=200,new zt,m(2),this.complete=!0})}function E(t){30===t.G&&t.C(["Whew, everyone has caught up!","","Use everything you can to thwart the Witch!"]),600>t.G||t.G%240!=0||3>=i(0,10)&&Ss.length&&new zt,this.complete||this.q>t.K||(this.complete=!0)}function T(t){30===t.G&&t.C(["Uh-oh the witch is really mad now!","","She cast a spell to speed up the critters!!","","Stay strong, and save those critters!"]),600>t.G||t.G%240!=0||3>=i(0,10)&&Ss.length&&new zt,this.complete||this.q>t.K||(this.complete=!0)}function S(t,s){if(t&&s)return t[0]>s[0]?t[1]>s[1]?7:s[1]>t[1]?5:6:s[0]>t[0]?t[1]>s[1]?1:s[1]>t[1]?3:2:t[1]>s[1]?0:4}function b(){Pt.paused||(requestAnimationFrame(b),Pt.state!==Ht.dialog&&Nt.clearRect(0,0,W,Y),Pt.state===Ht.playing?(Pt._+=1,Pt.G+=1,Pt.Z(),Rs.forEach(t=>t.tt()),Cs.forEach(t=>t.tt()),Ss.forEach(t=>t.tt()),bs.forEach(t=>t.tt()),Ws.forEach(t=>t.tt()),$s.forEach(t=>t.tt()),Ys.forEach(t=>t.tt()),js.forEach(t=>t.tt()),Ms.forEach(t=>t.tt()),Qs.forEach(t=>t.tt()),xs.tt(),Ls.forEach(t=>t.tt()),C(Ss,M),C(bs),C(Rs),C(js),C(Qs),C(Cs),C(Ws),C($s),C(Ls),C(Pt.st),C(Pt.it)):Pt.state===Ht.start?(Nt.fillStyle="green",Nt.fillRect(0,0,W,Y),Nt.fillStyle="white",Nt.save(),Rt(250),Nt.textAlign="center",Nt.fillText("Witches Cauldron",1500,300),Nt.restore(),Os.tt(1200,500,600,900),ws.tt(),ms.tt("WAVE "+Pt.D),Nt.fillText(`${Pt.ht} / ${Pt.et} Wave Stars Earned`,1450,1800),Pt.st.forEach(t=>t.tt()),Pt.it.forEach(t=>t.tt()),C(Pt.st),C(Pt.it)):Pt.state===Ht.dialog&&Ts.tt())}function C(t,s){for(let i=0;t.length>i;i++)t[i].deleted&&(s&&s(t,i),t.splice(i,1),i--)}function M(t,s){delete t[s].rt?.nt[t[s].id]}const W=3e3,Y=2e3,R=50,$=150,L=2400,Q=50,j=30,I=2.75,O="#26700dff",N="#164e04ff",G="fetcher",A="catcher",D="cat",B="fly",F="frog",H="snake",P="lizard",K="witch",X="kid",U="fan",q="vaccuum",V="net",_="fish",z="scratch",Z="curse",tt="tree1",st="tree2",it="grass1",et="grass2",ht="starEmpty",nt="starFull",at={[X]:150,[U]:50,[q]:100,[V]:300,[_]:100,[z]:250},ot=[[-2,22],[0,22],[2,22],[4,22],[6,22],[8,22],[10,22],[12,22],[14,22],[16,22],[18,22],[20,22],[22,22],[24,22],[26,22],[28,22],[30,22],[32,22],[34,22],[36,22],[38,22],[40,22],[42,22],[44,22],[46,22]],rt=[[18,40],[16,38],[14,36],[12,34],[10,32],[8,30],[8,28],[8,26],[8,24],[8,22],[8,20],[8,18],[10,16],[10,14],[12,12],[14,12],[16,12],[18,14],[18,16],[18,18],[20,20],...ot.slice(12,ot.length)],ct=[[50,8],[48,8],[46,8],[44,10],[42,10],[40,12],[40,12],[40,14],[40,16],[40,18],[40,20],[40,22],[40,24],[40,26],[40,28],[40,30],[40,32],[40,34],[42,34],[44,34],[46,34]],lt=[...ot.slice(0,12),[20,20],[22,20],[24,20],[24,18],[24,16],[24,14],[26,12],[26,10],[26,8],[26,6],[28,6],[30,6],[32,6],[32,8],[32,10],[32,12],[34,14],[34,16],[36,18],[38,20],...ot.slice(21,ot.length)],dt=[...ot.slice(0,5),[8,20],[10,18],[12,16],[14,16],[16,18],[18,20],[16,22],[14,24],[12,26],[12,28],[12,30],[14,32],[16,34],[18,32],[20,30],[22,28],[24,28],[26,26],[28,24],[30,22],[32,20],[32,18],[34,16],[34,14],[36,12],[36,10],[38,8],[38,6],[40,6],[42,6],[44,6],[46,6]],ut=[[8,-2],[8,0],[8,2],[6,4],[6,6],[6,8],[4,10],[4,12],[6,14],[6,16],[8,18],[8,20],[8,22],[8,24],[8,26],[6,28],[4,30],[4,32],[6,34],[8,34],[10,34],[12,34],[14,32],[16,30],[18,28],[18,26],[18,24],[20,22],[20,20],[22,18],[22,16],[24,14],[24,12],[22,10],[20,8],[20,6],[22,4],[24,4],[26,4],[28,6],[28,8],[30,10],[32,10],[34,12],[34,14],[36,16],[36,18],[36,20],[38,22],[40,22],[42,22],[44,22],[46,22]],ft=[[12,40],[10,38],[8,36],[6,36],[4,34],[4,32],[4,30],[6,28],[8,26],[8,24],[8,22],[8,20],[8,18],[6,16],[6,14],[4,12],[4,10],[6,8],[6,6],[6,4],[8,2],[10,2],[12,2],[14,4],[14,6],[14,8],[12,10],[12,12],[10,14],[12,16],[12,18],[12,20],[12,22],[12,24],[12,26],[12,28],[10,30],[12,32],[14,32],[16,34],[18,32],[20,34],[22,32],[24,34],[26,32],[28,34],[30,32],[32,34],[34,32],[36,34],[38,32],[40,30],[40,28],[40,26],[38,24],[36,22],[34,20],[32,18],[32,16],[32,14],[32,12],[34,10],[36,10],[38,12],[40,12],[42,12],[44,12],[46,12]],yt={};class gt{constructor(t,s,i,e,h,n,a,o,r){this.ot=0,this.count=0,this.ct=[],this.ut=[],this.type=t,this.x=s,this.y=i,this.frames=e,this.speed=h,this.width=n,this.height=a||n,this.lt=o||1,this.s=this.dt(this.x,this.y,this.width,this.height);for(let t=0;e>t;t++)this.ut.push(this.dt(this.x+this.width*t,this.y,this.width,this.height)),this.ct.push(this.dt(this.x+this.width*t,this.y,this.width,this.height,r))}dt(t,s,i,e,h=!1){const n=document.createElement("canvas");n.style.backgroundColor="black";const a=n.getContext("2d");return n.width=i,n.height=e,a.imageSmoothingEnabled=!1,a.translate(h?i:0,0),a.scale(h?-1:1,1),a.drawImage(Pt.image,t,s,i,e,0,0,i,e),n}draw(t,s,i,e,h,n=!1){const a=this.ft&&this.ft>s;this.ft=s,this.count>this.speed*(this.ot+1)&&(this.count>this.frames*this.speed?(this.count=0,this.ot=0):this.ot++),t.drawImage(n?this.ut[0]:a?this.ct[this.ot]:this.ut[this.ot],0,0,this.width,this.height,s,i,e||this.width,h||e||this.width),this.count++}}const pt={[D]:()=>new gt(D,0,20,2,20,10,10,1,!0),[B]:()=>new gt(B,0,30,2,20,10,10,1,!0),[F]:()=>new gt(F,0,40,2,20,10,10,1,!0),[H]:()=>new gt(H,0,50,2,20,10,10,1,!0),[P]:()=>new gt(P,0,60,2,20,10,10,1,!0),[X]:()=>new gt(X,20,10,1,0,30),[U]:()=>new gt(U,20,40,1,0,30),[q]:()=>new gt(q,20,70,1,0,30),[V]:()=>new gt(V,20,100,1,0,30),[K]:()=>new gt(K,0,130,2,20,20,30),[_]:()=>new gt(_,0,90,1,1,20),[z]:()=>new gt(z,0,70,1,1,20),[G]:()=>new gt(G,0,10,2,8,10,10,1,!0),[A]:()=>new gt(A,40,0,1,0,10),[Z]:()=>new gt(Z,0,110,2,8,10,10),[tt]:()=>new gt(tt,0,120,1,8,10,10),[st]:()=>new gt(st,10,120,1,8,10,10),[it]:()=>new gt(it,40,130,1,8,10,10),[et]:()=>new gt(et,40,140,1,8,10,10),[ht]:()=>new gt(ht,40,0,1,1,10,10),[nt]:()=>new gt(nt,40,150,1,8,10,10)};class xt{constructor(t,s,i=!1,e){this.p=!1,this.wt=[],this.nt={},this.kt=0,this.x=t,this.y=s,this.gt=i,this.vt=e}xt(){this.p=!1,this.J=void 0}yt(t){this.p=!0,this.J=t}}const wt={},mt=(t,s)=>`${t},${s}`,kt=(t,s)=>wt[mt(t,s)],Jt=[tt,st,it,et],vt={x:30},Et={x:20},Tt={x:10},St={x:0};let bt=1;const Ct=()=>bt,Mt=()=>{bt=e().offsetWidth/W},Wt={x:0,y:0},Yt=t=>Pt.m>=t,Rt=(t,s,i)=>{s&&(Pt.Jt.fillStyle=s),Pt.Jt.font=i?`${i} ${t}px 'Courier New'`:t+"px 'Courier New'"},$t=t=>(Rt(j),Yt(t)?(Pt.Jt.fillStyle="white","- $ "+t):(Pt.Jt.fillStyle="#ffb607",`- $ ${t} (unaffordable))`));class Lt{constructor(t,s,i,e,h,n,a,o,r=p){this.U=[],this.V=[],this.path=[],this.complete=!1,this.U=t,this.V=s,this.path=i,this.q=e,this.Mt=h,this.bt=n,this.Yt=a,this.St=o,this.Ct=r.bind(this)}restart(){this.complete=!1}}const Qt={1:()=>new Lt([X],[F,P,H],ot,25,55,400,I,5,x),2:()=>new Lt([V],[B],rt,50,40,400,2.25,5,w),3:()=>new Lt([U],[P,F],ct,50,50,450,2.25,5,k),4:()=>new Lt([q,U,_,z],[B,P,F],lt,50,30,500,I,5,J),5:()=>new Lt([_,z],[],dt,0,20,200,I,5,v),6:()=>new Lt([U,X,q,V,_,z],[B,F,H,P],ut,150,10,500,I,5,E),7:()=>new Lt([U,X,q,V,_,z],[B,F,H,P],ft,300,15,650,3.5,5.75,T)},jt=Object.keys(Qt).length,It=document.querySelector("#mc").getContext("2d"),Ot=document.querySelector("#gc"),Nt=Ot.getContext("2d"),Gt=44100;new(window.AudioContext||webkitAudioContext);const At=new(window.AudioContext||webkitAudioContext),Dt=(...t)=>Bt(At,Ft(...t)),Bt=(t,...s)=>{let i=t.createBufferSource(),e=t.createBuffer(s.length,s[0].length,Gt);return s.map((t,s)=>e.getChannelData(s).set(t)),i.buffer=e,i.connect(t.destination),i.start(),i},Ft=(t=1,s=.05,i=220,e=0,h=0,n=.1,a=0,o=1,r=0,c=0,l=0,d=0,u=0,f=0,y=0,g=0,p=0,x=1,w=0,m=0)=>{let k,J,v=2*Math.PI,E=r*=500*v/Gt**2,T=(y>0?1:-1)*v/4,S=i*=(1+2*s*Math.random()-s)*v/Gt,b=[],C=0,M=0,W=0,Y=1,R=0,$=0,L=0;for(c*=500*v/Gt**3,y*=v/Gt,l*=v/Gt,d*=Gt,u=Gt*u|0,J=(e=99+Gt*e)+(w*=Gt)+(h*=Gt)+(n*=Gt)+(p*=Gt)|0;J>W;b[W++]=L)++$%(100*g|0)||(L=a?a>1?a>2?a>3?Math.sin((C%v)**3):Math.max(Math.min(Math.tan(C),1),-1):1-(2*C/v%2+2)%2:1-4*Math.abs(Math.round(C/v)-C/v):Math.sin(C),L=(u?1-m+m*Math.sin(2*Math.PI*W/u):1)*(L>0?1:-1)*Math.abs(L)**o*t*.3*(e>W?W/e:e+w>W?1-(W-e)/w*(1-x):e+w+h>W?x:J-p>W?(J-W-p)/n*x:0),L=p?L/2+(p>W?0:(J-p>W?1:(J-W)/p)*b[W-p|0]/2):L),k=(i+=r+=c)*Math.sin(M*y-T),C+=k-k*f*(1-1e9*(Math.sin(W)+1)%2),M+=k-k*f*(1-1e9*(Math.sin(W)**2+1)%2),Y&&++Y>d&&(i+=l,S+=l,Y=0),!u||++R%u||(i=S,r=E,Y=Y||1);return b};var Ht=(t=>(t[t.start=0]="start",t[t.playing=1]="playing",t[t.gameoverLost=2]="gameoverLost",t[t.gameoverWon=3]="gameoverWon",t[t.dialog=4]="dialog",t))(Ht||{});const Pt=new class{constructor(){var t,s,i,e,h,n,a,o,r,c;this.k=0,this.Tt=0,this.l=!1,this.Qt=!1,this.$t=!1,this.Ot=!1,this.Wt=0,this.Xt=0,this.jt=Object.keys(Qt).length,this._=0,this.paused=!1,this.state=void 0,this.D=1,this.m=250,this.Ft=!1,this.Ht=0,this.Rt=!1,this.At=0,this.K=0,this.G=0,this.Lt=0,this.It=0,this.ended=!1,this.Bt=!1,this.Et=[],this.Dt=!1,this.st=[],this.it=[],this.Nt=()=>{this.M()},this.Pt=0,this.zt=Qt[1](),this.Gt=!1,this.canvas=Ot,this.Jt=Nt,this.qt=()=>{},this.p1=(n={},a=[...Array(12).keys()].map(()=>new AudioContext),o=(t,s)=>Math.sin(6.28*t+s),r=t=>o(t,o(t,0)**2+.75*o(t,.25)+.1*o(t,.5)),c=(t,s,i)=>{var e=s.createGain();e.gain.value=.1,e.connect(s.destination);var h=s.createBufferSource();h.buffer=t,h.connect(e),h.start(),i&&h.stop()},o=>{var l=125,d=.5;t=o[s=0].replace(/[\!\|]/g,"").split("\n").map(t=>t>0?(t=t.split("."),l=t[0],d=t[1]/100||d):t.split("").map((i,h)=>{var o=1,u=i.charCodeAt(0);for(u-=u>90?71:65;"-"==t[h+o];)o++;return h>s&&(s=h+1),((t,s,i)=>{var h=t+""+s,o=n[h];if(t>=0&&!o){t=65.406*1.06**t/i;var l,d=i*s|0,u=i*(s-.002);for(l=(o=n[h]=a[0].createBuffer(1,d,i)).getChannelData(0);d--;)l[d]=(88>d?d/88.2:(1-(d-88.2)/u)**((Math.log(1e4*t)/2)**2))*r(d*t);e||a.map(t=>c(o,t,e=1))}return o})(u,o*d*l/125,44100)})),h=0,clearInterval(i),i=setInterval(i=>{t.map((t,s)=>{t[i=h%t.length]&&c(t[i],a[3*s+h%3])}),h++,h%=s},l)}),this.Bt=/android/i.test(navigator.userAgent||navigator.vendor)}Kt(t){switch(t){case 0:this.Ut(),ws.addListener(),ms.addListener(),this.Vt(),this.state=t;break;case 1:xs.addListener(),this.state=t}}get et(){return 3*this.jt}get ht(){return this.Pt}Vt(){let t=0;for(let s=1;Pt.jt>=s;s++)t+=g(s).P||0;this.Pt=t}_t(){this.Lt++}Zt(){this.It++}M(t=1){this.Kt(t),this.Gt=!1,Ts.ts=!1}get t(){return this.zt}ss(e=!0){this.zt=Qt[this.D](),this.Ut(),this.ended=!1,this.hs=void 0,this.m=this.t.bt,this.t.restart(),this.G=0,this.At=0,this.K=0,this.It=0,this.Lt=0,this.Ht=g(this.D).P,js.push(new ks(2575,150,this.Ht>0,!1),new ks(2645,150,this.Ht>1,!1),new ks(2715,150,this.Ht>2,!1)),e&&(e=>{function h(t,s,i,h=0){const n=document.createElement("canvas"),a=n.getContext("2d");n.width=R,n.height=R,a.imageSmoothingEnabled=!1,a.translate(25,25),a.rotate(h*Math.PI/180),a.drawImage(Pt.image,i.x,i.y||0,10,10,-25,-25,R,R),e.drawImage(n,t,s)}e.clearRect(0,0,W,Y),Object.keys(yt).forEach(t=>{delete yt[t]}),Object.keys(wt).forEach(t=>{delete wt[t]}),Pt.t.path.forEach(t=>{yt[""+t]=1}),e.fillStyle="#39941a",e.fillRect(0,0,W,Y);for(let i=0;42>i;i++)for(let e=0;60>e;e++){const h=s(e,i);if(yt[t(e,i)])for(let t=e-1;e+2>t;t++)for(let s=i-1;i+2>s;s++){const i=kt(t,s);i?(i.gt=!0,i.vt=h):wt[mt(t,s)]=new xt(t,s,!0,h)}else kt(e,i)||(wt[mt(e,i)]=new xt(e,i,!1))}for(let i=0;40>i;i++)for(let h=0;60>h;h++)if(yt[t(h,i)]){const t=s(h,i),n=S(Pt.t.path[t-1],Pt.t.path[t]);if(n){let t;e.fillStyle="teal",n===Kt.SW&&(t=kt(h,i-2),t.es=Kt.SW,t.gt=!0,t=kt(h+2,i),t.es=Kt.SW,t.kt=180,t.gt=!0),n===Kt.NW&&(t=kt(h+2,i),t.es=Kt.NW,t.gt=!0,t=kt(h,i+2),t.es=Kt.NW,t.gt=!0),n===Kt.NE&&(t=kt(h-2,i),t.es=Kt.NE,t.gt=!0,t=kt(h,i+2),t.kt=180,t.es=Kt.NE,t.gt=!0),n===Kt.SE&&(t=kt(h-2,i),t.kt=270,t.es=Kt.SE,t.gt=!0,t=kt(h,i-2),t.kt=90,t.es=Kt.SE,t.gt=!0)}}for(let t=0;40>t;t++)for(let s=0;60>s;s++){const n=kt(s,t);if(n.gt){let i=vt,e=0;const{O:a,X:o}=u([s,t]);if(kt(s-1,t).gt||kt(s,t-1).gt)if(kt(s+1,t).gt||kt(s,t+1).gt)if(kt(s+1,t).gt||kt(s,t-1).gt)if(kt(s-1,t).gt||kt(s,t+1).gt)if(kt(s-1,t).gt)if(kt(s+1,t).gt)if(kt(s,t-1).gt)if(kt(s,t+1).gt){if(n.es)return i=Tt,void(e=n.kt)}else i=Et,e=270;else i=Et,e=90;else i=Et,e=180;else i=Et;else i=St,e=270;else i=St,e=90;else i=St,e=180;else i=St;h(a,o,i,e)}else if(L>s*R){const h=i(0,100);if((Pt.Bt?3:10)>h){const h=i(0,3);pt[Jt[h]]().draw(e,s*R,t*R,2>h?150:R)}}}})(It),new qt}Ut(){Cs.forEach(t=>t.remove()),Qs.forEach(t=>t.deleted=!0),bs.forEach(t=>t.deleted=!0),$s.forEach(t=>t.deleted=!0),Ss.forEach(t=>t.deleted=!0),Rs.forEach(t=>t.deleted=!0),js.forEach(t=>t.deleted=!0)}ns(){this.D+=1,this.ss()}Z(){if(this.t.Ct(this),this.t.complete&&this.K>=this.t.q&&0===Ss.length&&bs.every(t=>t.rs)&&!this.ended){this.ended=!0,this.hs=((t,s)=>{let i=3;return t>0&&i--,s>0&&i--,(t>10||s>1)&&i--,i})(Pt.Lt,Pt.It),((t,s)=>{const i=g(t);localStorage.setItem(""+t,JSON.stringify({D:t,P:i.P>s?i.P:s}))})(this.D,this.hs);const t=[`Wave ${this.D} complete!`,""];jt>this.D?t.push(`On to Wave ${this.D+1}!`):this.D===jt&&t.push("Whew, you made it to the end!","","That will teach the witch not to make evil soup!"),setTimeout(()=>{this.C(t,()=>{this.D===jt?(this.D=1,this.Kt(0)):this.ns()})},2e3)}this.G%this.t.Mt===0&&this.t.q>this.K&&this.t.V.length&&(this.K++,new _t)}C(t,s,i=!1){this.Gt||(Dt(...[.5,,966,.08,,.23,2,3.4,,-26,-1,.03,.06,100,,,,.64,,.15,487]),this.state=4,this.qt=s||this.Nt,this.Et=t,this.Dt=i,this.Gt=!0)}play(){this.Ft||(this.Ft=!0,this.p1`120.100
|Y-c-h-h-|----fdf-|a-a-----|d-h-k-h-|f---Y-c-|d-a-----|----aca-|Y-c-h-h-|----d-h-|k-h-f---|----aca-|fdh-khk-|h-h-hkh-|dkd-d---|c-a-Y-Y-|c-a-Y---|Y-c-h-h-|----fdf-|a-a-----|d-h-k-h-|f---Y-c-|d-a-----|----aca-|Y-c-h-h-|----d-h-|k-h-f---|----aca-|fdf-k-k-|h-h-hkh-|dkd-d---|c-a-Y-Y-|c-a-Y-h-|h-a-j-k-|hhaajjkk|k---j-h-|kkccddff|f-c-h---|k-h-c-a-|ccccddff|a-Y-c-j-|h-------|l-h-t-j-|k---j-h-|kkcch-tt|wwvvkk--|d-c-h-a-|Y-a-c-Y-|h---h---|h-------|hhaajjkk|k---j-h-|k-h-c-a-|d-c-h---|ccccddff|a-Y-c-j-|f-c-h---|h-------|kkccddff|h-h-k-k-|wwvvkk--|Y-Y-a-a-|k-j-h-d-|c-a-Y-c-|c-h-k-h-|h-------|
|J---J---|O---O---|J-------|F-------|H-------|J-------|H-------|F-------|J-------|H-------|J-------|J---J---|H-------|H-------|F-------|F-------|J---J---|O---O---|J-------|F-------|H-------|J-------|H-------|F-------|J-------|H-------|J-------|J---J---|H-------|H-------|F-------|F-------|J---Q   |J-Q-J-Q-|R---Q-J-|T---Q-J-|R---Q-J-|J---Q-R-|T---Q-J-|J-Q-J-Q-|J-------|J-T-J-T-|R-Q-J-Q-|J-J-J-J-|R-R-R-R-|T-Q-J-Q-|R---J-Q-|J---J---|J-------|J-Q-J-Q-|R---Q-J-|J---Q-R-|T---Q-J-|J-Q-J-Q-|T-Q-J-Q-|R---Q-J-|J-------|J-J-J-J-|R-R-R-R-|T-T-T-T-|Q---Q-J-|Q---Q---|Q-Q-J-J-|J---J---|J-------|`)}};var Kt=(t=>(t[t.N=0]="N",t[t.NE=1]="NE",t[t.E=2]="E",t[t.SE=3]="SE",t[t.S=4]="S",t[t.SW=5]="SW",t[t.W=6]="W",t[t.NW=7]="NW",t))(Kt||{});class Xt{constructor(t,s,i=0,e=0,h=0,n=0,a=10){this.deleted=!1,this.count=0,this.cs=0,this.us=0,this.id=++Xt.ls,this.x=t,this.y=s,this.dx=i,this.dy=e,this.direction=1,this.ds=!1,this.frame=0,this.fs=100,this.ws=0,this.ks=a,this.width=h,this.height=n}static{this.ls=0}ps(t){return Math.hypot(this.x-t.x,this.y-t.y)}add(){}tt(){}}const Ut=[["Wing of fly","Eye of newt","Chop em up","Into soup!"],["Here kitty kitty!","Pspspspsps!"],["Pspspspsps!","Pspspspsps!"],["Cant a girl","Just make soup","In peace?!"],["Eye of newt","Toe of frog","This fire needs","Another log"],["Where oh where","Has my little","Black cat gone?"],["Where oh where","Is that cat?!"],["Slime of frog","Skin of snake","Its really nice","The soup I make"],["Kitty cat","Black as night","Come to me","Give them a fright"],["Skin of snake","Wing of fly","Soup just splashed","Into my eye","Ow ow ow!"],["Oh come on","Just leave me","Some critters!"],["You know","I would share","Some soup if","Youd calm down"],["For how hard","Youre trying","I sure hope","Youre a vegan"],["Wait are you","Going to eat","These critters","Yourself?!"]];class qt extends Xt{constructor(t=!1){const[s,i]=Pt.t.path[Pt.t.path.length-1];super((s-4)*R+20,(i-4)*R+20),this.gs=!1,this.vs=0,this.speaking=[],this.xs=pt[K](),t||$s.push(this)}tt(t,s,e,h){this.xs?.draw(Pt.Jt,t||this.x,s||this.y,e||150,h||250),Pt.state!==Ht.start&&(Ls.length||this.speaking.length||600>=Pt._-this.vs||1!==i(0,200)?Ls.length&&.6>Ls[Ls.length-1].opacity&&this.speaking.length&&(new hs(this.x+100,this.y,this.speaking.shift()),this.vs=Pt._):(this.speaking=[...Ut[i(0,Ut.length-1)]],new hs(this.x+100,this.y,this.speaking.shift())))}}class Vt extends Xt{constructor(){super(0,0,0,0,20,20,30),this.ys=2,this.Js=!1,this.Ms=!1,this.rs=!1,this.bs=!1,this.Ys=!1,this.Ss=!1,this.Cs=0,this.vt=0,this.speed=this.ys,this.Ts=S(Pt.t.path[this.vt],Pt.t.path[this.Qs]);const{A:t,L:s,B:e,I:h}=u(Pt.t.path[this.vt],this.Ts);this.x=i(t,s-this.width),this.y=i(h,e-this.height),this.$s()}get Os(){return Pt.t.Yt||this.ys}get Qs(){return this.vt+1}$s(){const{A:t,L:s,I:e,B:h}=u(Pt.t.path[this.Qs],this.Ts);this.cs=i(t,s-this.width),this.us=i(e,h-this.height),this.Cs=f({x:this.x,y:this.y},{x:this.cs,y:this.us})}Ws(){this.rt&&delete this.rt.nt[this.id]}Xs(){this.rt&&(this.rt.nt[this.id]=this)}js(){new ns(this.x,this.y),Pt.m+=10,this.Ms=!0,this.Fs()}Fs(){this.ks=55,this.dx=0,this.dy=0,this.Ws()}Hs(){this.bs=!1,this.Ms=!1,this.rs=!1,this.Ys=!1,this.$s()}Rs(){this.Cs=f({x:this.x,y:this.y},{x:this.cs,y:this.us})}get As(){return!this.Ms&&!this.Ys}tt(){if(this.As){const{x:t,y:s}=y(this,this.Cs,this.speed);if(this.x=t,this.y=s,l(this,{x:this.cs-5,y:this.us-5,width:10,height:10})||this.Ss&&l(this,{x:this.cs-15,y:this.us-15,width:30,height:30})){if(this.Ss=!1,this.speed=this.Os,this.rs)return;if(this.vt+=1,!Pt.t.path[this.Qs+1]||this.Ms)return this.Ms||(Dt(...[.35,,481,.01,.08,.01,,,,4,-17,.09,.01,,45,,,.96,.14,,-726]),this.type?Pt._t():Pt.Zt()),void(this.deleted=!0);this.Ts=S(Pt.t.path[this.vt],Pt.t.path[this.Qs]),this.$s()}const{o:i,u:e}=n(this.x,this.y),h=wt[`${i/R},${e/R}`];!h||this.rt&&h===this.rt||(this.Ws(),this.Ls=this.rt,this.rt=h,this.Xs())}this.xs?.draw(Pt.Jt,this.x-25,this.y-25,50,50,this.Ys||this.Ms&&!this.rs)}}class _t extends Vt{constructor(){super(),this.ys=3;const t=i(0,Pt.t.V.length-1),s=Pt.t.V[t];"fly"===s&&(this.Js=!0),this.xs=pt[s](),this.type=s,Ss.push(this)}static{this.types=[F,B,P,H]}Is(){this.Ys=!0,this.Fs()}Bs(){const t=this.Js?4:3;this.Ss=!0,this.speed=6,this.vt=t>this.vt?0:this.vt-=t,this.$s()}get As(){return!this.Ys&&!this.deleted}tt(){super.tt()}}class zt extends Vt{constructor(){super(),this.ys=6,this.playing=!1,this.Es=0,this.xs=pt[D](),this.speed=this.ys,bs.push(this),Dt(.2,.05,301,.5,.15,.1,2,0,0,1,0,0,0,100,0,0,0,1,.5,0,0)}get Os(){return Pt.t.St||this.ys}get As(){return!this.playing}Hs(){this.playing=!1,super.Hs()}tt(){if(super.tt(),this.rs)this.playing?this.playing&&Pt._%this.Es===0&&(this.cs=i(this.Ds.x,this.Ds.x+$),this.us=i(this.Ds.y,this.Ds.y+$),this.Rs(),this.Es=i(20,60),this.playing=!1):l(this,{x:this.cs-10,y:this.us-10,width:20,height:20})&&(this.Es=i(20,60),this.playing=!0);else{const t=[];if(this.rt?.wt.forEach(s=>{s.xs?.type===z||s.xs?.type===_?t.push(s):s.Ns||s.Ps()}),t)for(const s of t)if(s.zs>s.Gs.length){this.Ds=s,this.rs=!0,s.catch(this),this.cs=i(s.x,s.x+$),this.us=i(s.y,s.y+$),this.Rs();break}}}}class Zt extends Xt{constructor(t,s,i=40){super(t,s,0,0,$,$,i),this.v=0}tt(){this.xs?.draw(Pt.Jt,this.x,this.y,$)}}class ts extends Zt{constructor(t,s,i){super(t,s,70),this.qs=!1,this.Ks=!0,this.xs=pt[i](),this.v=at[i],window.addEventListener("mousedown",this.Us.bind(this)),window.addEventListener("touchstart",this.Vs.bind(this)),window.addEventListener("mouseup",this._s.bind(this)),window.addEventListener("touchend",this.Zs.bind(this)),Ms.push(this)}tt(){var t,s;if(Pt.t.U.includes(this.xs?.type||"")&&(super.tt(),this.qs)){Pt.l?(Pt.$t&&L>Wt.x&&(Pt.$t=!1),!Pt.$t&&Wt.x>2500&&(0===Pt.Xt?Pt.Xt=-250:Pt.Xt*=-1,Pt.$t=!0),Pt.Ot=!0):(Pt.Ot=!1,Pt.Xt=0),this.Ks=!0;const{ti:i,si:e,ii:h,hi:a}={ti:(Wt.x+(t=Pt.Xt)-R)/R,si:(Wt.x+t+R)/R,ii:(Wt.y+(s=Pt.Wt)-R)/R,hi:(Wt.y+s+R)/R};if(this.Ks=!(0>i||e>47||0>h/R||a>39)&&((t,s,i,e)=>{let h=!0;return[[t,i],[t,i+1],[t+1,i],[s,i],[s,i+1],[t,e],[t+1,e],[s,e]].forEach(t=>{const s=(t=>{const s=wt[""+t];return!s.gt&&!s.p})(t);s||(h=s)}),h})(i,e,h,a),Pt.Jt.fillStyle=this.Ks?"rgba(140, 243, 248, 0.33)":"rgba(255, 0, 0, .33)","vaccuum"===this.xs?.type||"fan"===this.xs?.type){const{o:t,u:s}=n(Wt.x,Wt.y),i="vaccuum"===this.xs?.type?ls.ei:cs.ei;for(let e=0;i.length>e;e+=2){const h=i[e]*R,n=i[e+1]*R;Pt.Jt?.fillRect(t-R+h+Pt.Xt,s-R+n+Pt.Wt,R,R)}}else"net"===this.xs?.type?(Pt.Jt?.fillRect(Wt.x-200+Pt.Xt,Wt.y-200+Pt.Wt,450,450),Pt.Jt?.clearRect(Wt.x-R+Pt.Xt,Wt.y-R+Pt.Wt,150,150)):(Pt.Jt?.fillRect(Wt.x-$+Pt.Xt,Wt.y-$+Pt.Wt,350,350),Pt.Jt?.clearRect(Wt.x-R+Pt.Xt,Wt.y-R+Pt.Wt,150,150));this.xs?.draw(Pt.Jt,Wt.x-R+Pt.Xt,Wt.y-R+Pt.Wt,$)}}Us(t){const{i:s,h:i}=h(t.pageX,t.pageY);this.qs||!Yt(this.v)||Pt.state!==Ht.playing||s>this.x&&this.x+this.width>s&&i>this.y&&this.y+this.height>i&&(this.qs=!0)}Vs(t){if(1===t.targetTouches.length){const s=t.targetTouches[0];Pt.Xt=-250,Pt.$t=!0,this.Us(s)}}Zs(){o(),this._s()}_s(){if(this.qs){if(this.qs=!1,Pt.Gt)return;if(Dt(...[.5,,1500,.01,,.23,4,5,,,,,,1,-30,,,.5,,1]),this.Ks){const t=Wt.x-R+Pt.Xt,s=Wt.y-R+Pt.Wt;switch(this.xs?.type){case X:new os(t,s);break;case U:new cs(t,s);break;case q:new ls(t,s);break;case V:new rs(t,s);break;case z:new us(t,s);break;case _:new fs(t,s)}}Pt.Ot=!1,Pt.Xt=0,Pt.Wt=0}}}class ss extends Zt{constructor(t,s,i){super(t,s),this.ni=[],this.ri=0,this.v=at[i],Pt.m-=this.v;const{T:e,$:h}=d(t,s);for(let t=e;e+2>=t;t++)for(let s=h;h+2>=s;s++)kt(t,s).yt(this);Cs.push(this)}tt(){super.tt(),this.Ns&&Pt._-120>this.ri?this.oi():this.Ns&&this.Ns.draw(Pt.Jt,this.x,this.y,this.width,this.height)}Ps(){this.Ns=pt[Z](),this.ri=Pt._}oi(){this.Ns=void 0}remove(){this.deleted=!0,this.ni.forEach(t=>{t.wt=t.wt.filter(t=>!t.deleted)});const{T:t,$:s}=d(this.x,this.y);for(let i=t;t+2>=i;i++)for(let t=s;s+2>=t;t++){const s=wt[mt(i,t)];s&&s.xt()}}Y(){this.remove()}}const is=(t,s)=>{let i=[];for(let e=t;s>e;e++)for(let h=t;s>h;h++)!(0>e||e>2||0>h||h>2)||i.push(e,h);return i};class es extends Xt{constructor(t,s,e,h,n=!1,a,o,r,c=!1){super(t,s),this.Cs=0,this.ai=!1,this.speed=i(5,10),this.cx=0,this.cy=0,this.angle=0,this.radius=0,this.ci=0,this.time=0,this.ui=0,this.li=0,this.di=!1,this.fi=[],this.cs=e,this.us=h,this.cx=a||0,this.cy=o||0,this.ai=n,this.di=c,n&&(this.radius=r||0,this.ci=this.radius,this.angle=0),this.Cs=f({x:t,y:s},{x:e,y:h}),Rs.push(this)}tt(){if(this.ai){if(this.x=this.cx+this.radius*Math.cos(this.angle),this.y=this.cy+this.radius*Math.sin(this.angle),0===this.time&&(this.ui=this.x,this.li=this.y),this.angle>2*Math.PI)return this.fi.forEach(t=>{t.deleted=!0}),void(this.deleted=!0);if(this.angle+=.15,this.time+=1,this.di){const{o:t,u:s}=n(this.x,this.y),i=kt(t/R,s/R);if(i){const t=Object.values(i.nt);t.length&&t.forEach(t=>{t.type!==B&&t.type!==F||(t.Ys=!0,t.js(),this.fi.push(t))})}const e=this.angle*(300/Math.PI);this.radius===this.ci&&(e>35&&55>e||e>125&&140>e||e>215&&235>e||e>305&&325>e)?this.radius+=40:this.radius!==this.ci&&(35>e||e>55)&&(125>e||e>140)&&(215>e||e>235)&&(305>e||e>325)&&(this.radius=this.ci),this.fi.forEach(t=>{t.x=this.x,t.y=this.y})}}else{if(l(this,{x:this.cs-10,y:this.us-10,width:25,height:25}))return void(this.deleted=!0);const{x:t,y:s}=y(this,this.Cs,this.speed);this.x=t,this.y=s}Pt.Jt.fillStyle="#dedede",Pt.Jt.fillRect(this.x,this.y,6,6)}}class hs extends es{constructor(t,s,i){super(t,s,t,s-250,!1),this.wi=0,this.opacity=1,this.text=i,this.speed=.25,Ls.push(this)}tt(){if(0>=this.opacity)return void(this.deleted=!0);this.wi>120&&(this.opacity-=.005),this.wi++;const{x:t,y:s}=y(this,this.Cs,this.speed);this.x=t,this.y=s,Rt(35,"white","bold"),Pt.Jt.textAlign="right",Pt.Jt.fillStyle=`rgba(255, 255, 255, ${this.opacity})`,Pt.Jt.fillText(this.text,this.x,this.y)}}class ns extends Xt{constructor(t,s){super(t,s),this.ki=0,this.opacity=1,Qs.push(this)}tt(){Rt(30),Pt.Jt.fillStyle=`rgba(255, 255, 255, ${this.opacity})`,Pt.Jt.fillText("$",this.x,this.y),this.ki>30&&(this.opacity-=.01),this.opacity>0||(this.deleted=!0),this.y-=1,this.ki++}}class as extends ss{constructor(t,s,i,e){super(t,s,e),this.ni=[];let h=i;for(let t=0;h.length>t;t+=2){const{o:s,u:i}=n(this.x+h[t]*R,this.y+h[t+1]*R),e=wt[`${s/R},${i/R}`];e&&(this.ni.push(e),e.wt.push(this))}this.ni.sort((t,s)=>s.vt-t.vt)}}class os extends as{constructor(t,s){super(t,s,is(-2,5),X),this.pi=[],this.xs=pt[X](),this.pi.push(new ys(this),new ys(this))}remove(){this.pi.forEach(t=>t.remove()),super.remove()}Y(){this.pi.forEach(t=>t.remove()),super.Y()}}class rs extends as{constructor(t,s){super(t,s,is(-3,6),V),this.gi=0,this.mi={},this.xs=pt[V](),this.xi=this.x+75,this.yi=this.y+75,this.ni.forEach(t=>{this.y+R>t.y*R||t.y*R>=this.y+100||this.x+$>t.x*R||(this.mi[`${t.x},${t.y}`]=t)})}tt(){super.tt(),this.Ns||this.gi%180==0&&(Dt(...[.05,,214,.34,,0,4,0,,,,.35,,2,,,,0,.2,,-597]),this.ni.forEach(t=>{let s=!1,e=i(90,220);this.mi[`${t.x},${t.y}`]&&(s=!0,e=t.x*R===this.x+$?124:t.x*R===this.x+$+R?174:224),new es(t.x*R+25,t.y*R,this.x*R*1.5,this.y*R*1.5,!0,this.xi,this.yi,e,s)})),++this.gi}}class cs extends as{constructor(t,s){super(t,s,cs.ei,U),this.Ji=0,this.xs=pt[U]()}static{this.ei=[1,-1,1,-2,1,-3,3,1,4,1,5,1,1,3,1,4,1,5,-1,1,-2,1,-3,1]}tt(){if(super.tt(),this.Ns)++this.Ji;else if(++this.Ji%30==0){Dt(...[.15,,214,,,1,4,10,,,-12,.35,,1,,,,0,.1,,-597]);const t=this.x+75,s=this.y+75;this.ni.forEach(e=>{const h=i(2,4);for(let n=0;h>n;n++)new es(t,s,i(e.x*R,e.x*R+R),i(e.y*R,e.y*R+R));Object.values(e?.nt).forEach(t=>{!t.type||t.type===D||t.type===H||t.Ss||t.Ms||t.Bs()})})}}}class ls extends as{constructor(t,s){super(t,s,ls.ei,q),this.Ji=0,this.xs=pt[q]()}static{this.ei=[-1,-1,-2,-2,-3,-3,3,3,4,4,5,5,-1,3,-2,4,-3,5,3,-1,4,-2,5,-3]}tt(){if(super.tt(),this.Ns)++this.Ji;else if(++this.Ji%60==0){Dt(...[.1,,425,.2,.25,,2,1.4,,,,,.05,50,,,,.63,,.25]);const t=this.x+75,s=this.y+75;this.ni.forEach(e=>{const h=i(2,4);for(let n=0;h>n;n++)new es(i(e.x*R,e.x*R+R),i(e.y*R,e.y*R+R),t,s);Object.values(e?.nt).forEach(i=>{i.type&&(i.js(),i.cs=t,i.us=s,i.Rs())})})}}}class ds extends as{constructor(t,s,i,e){super(t,s,is(-2,5),e),this.Gs=[],this.zs=i}catch(t){this.Gs.push(t)}release(){this.Gs.forEach(t=>{t.Hs()})}Y(){this.release(),super.Y()}}class us extends ds{constructor(t,s){super(t,s,4,z),this.xs=pt[z]()}}class fs extends ds{constructor(t,s){super(t,s,1,_),this.xs=pt[_]()}}class ys extends Xt{constructor(t){super(-100,-100,0,0,30,30,50),this.Mi=4,this.bi=2,this.state=1,this.parent=t,this.xs=pt[G](),this.x=i(t.x,t.x+t.width-this.width),this.y=i(t.y,t.y+t.width-this.height),Ws.push(this),this.Ps=pt[Z]()}remove(){(2===this.state||this.Yi)&&this.Yi?.Hs(),this.state=1,this.deleted=!0}search(){for(const t of this.parent.ni){const s=Object.entries(t.nt);if(s.length){let i=0;for(const e of s){if(!e[1].bs&&!e[1].Ms&&!e[1].Js){const[e,h]=s[i];delete t.nt[e],this.Yi=h,h.bs=!0,this.state=0;break}i++}}if(0===this.state)break}}tt(){if(!this.parent.Ns)switch(this.state){case 0:if(this.Yi?.deleted||this.Yi?.rs){this.Yi=void 0,this.state=1,this.search();break}const t=f(this,this.Yi),{x:s,y:e}=y(this,t,this.Mi);this.x=s,this.y=e,l(this,this.Yi)&&this.Yi?.type&&(this.Yi.Is(),Dt(...[.5,,1836,.14,.01,.07,4,2.9,28,74,,,.19,,,,,.33,,.91]),this.state=2);break;case 2:0===this.cs&&(this.cs=i(this.parent.x+this.width,this.parent.x+this.parent.width-this.width),this.us=i(this.parent.y+this.width,this.parent.y+this.parent.height-this.height));const h=f(this,{x:this.cs,y:this.us}),{x:n,y:a}=y(this,h,this.bi);this.x=n,this.y=a,this.Yi.x=this.x+5,this.Yi.y=this.y+5,l(this,{x:this.cs,y:this.us,width:4,height:4})&&(this.cs=0,this.us=0,this.state=1,this.Yi.js(),this.Yi.deleted=!0,this.Yi=void 0);break;case 1:Pt._%10==0&&this.search()}switch(this.state){case 0:case 2:this.xs?.draw(Pt.Jt,this.x,this.y,R,R);break;default:this.xs?.draw(Pt.Jt,this.x,this.y,R,R,!0)}this.parent.Ns&&this.Ps.draw(Pt.Jt,this.x,this.y,R,R)}}class gs extends Xt{constructor(){super(L,0,0,0,600,Y,60),Ys.push(this),[X,V,q,U,_,z].forEach((t,s)=>{new ts(2400,575+R*s*5,t)})}tt(){const t=Pt.Jt;t.textAlign="left",t.textBaseline="middle",t.fillStyle=O,t.fillRect(L,0,this.width,this.height),t.fillStyle=N,t.fillRect(2300,0,R,this.height),t.fillStyle=O,t.fillRect(2350,0,R,this.height),t.strokeStyle="white",t.fillStyle="white",Rt(63),t.fillText("Witches Cauldron",2375,50),Rt(40),t.fillText("Missed Critters: "+Pt.Lt,L,235),t.fillText("Missed Cats: "+Pt.It,L,285),Rt(Q),t.fillText(`Wave: ${Pt.D} / ${Pt.jt}`,L,110),t.fillText("Best:",L,175),Rt(60),t.fillText("Cash: $"+Pt.m,L,375);const s=t=>575+R*t,i=2600;let e=0;t.fillText("Towers",L,s(-2)),Pt.t.U.includes(X)&&(Rt(Q),t.fillText("High-energy Kids",L,s(-.5)),Rt(j),t.fillText("Fast",i,s(.5)),t.fillText("Cant catch flies",i,s(1.5)),e=at[X],t.fillText(""+$t(e),i,s(2.5))),Pt.t.U.includes(V)&&(Rt(Q,"white"),t.fillText("Guy with a Net",L,s(4.5)),Rt(j),t.fillText("Very Slow",i,s(5.5)),t.fillText("Catch flies & frogs",i,s(6.5)),e=at[V],t.fillText(""+$t(e),i,s(7.5))),Pt.t.U.includes(U)&&(Rt(Q,"white"),t.fillText("Really Big Fans",L,s(14.5)),Rt(j),t.fillText("Blows critters back",i,s(15.5)),t.fillText("Cant blow snakes",i,s(16.5)),e=at[U],t.fillText(""+$t(e),i,s(17.5))),Pt.t.U.includes(q)&&(Rt(Q,"white"),t.fillText("Powerful Vaccuums",L,s(9.5)),Rt(j),t.fillText("Slow",i,s(10.5)),t.fillText("Cover many angles",i,s(11.5)),e=at[q],t.fillText(""+$t(e),i,s(12.5))),Pt.t.U.includes(_)&&(Rt(Q,"white"),t.fillText("Fish on a Stick",L,s(19.5)),Rt(j),t.fillText("Distract 1 Black Cat",i,s(20.5)),e=at[_],t.fillText(""+$t(e),i,s(21.5))),Pt.t.U.includes(z)&&(Rt(Q,"white"),t.fillText("Scratching Post",L,s(24.5)),Rt(j),t.fillText("Distract 4 Black Cat",i,s(25.5)),e=at[z],t.fillText(""+$t(e),i,s(26.5)))}}class ps extends Xt{constructor(t,s,i,e,h,n,a=!0){super(t,s,0,0,i,e),this.Si=!1,this.Ci=()=>{},this.font=100,this.text=h,this.Ti=n,this.Qi=a,this.$i=this.Oi.bind(this)}tt(t){super.tt(),t&&(this.text=t),Pt.Jt.fillStyle="green",Pt.Jt.fillRect(this.x,this.y,this.width,this.height),Pt.Jt.fillStyle="white",Pt.Jt.strokeStyle="white",Pt.Jt.lineWidth=5,Pt.Jt.strokeRect(this.x,this.y,this.width,this.height),Rt(this.font),Pt.Jt.textAlign="center",Pt.Jt.textBaseline="middle",Pt.Jt.fillText(this.text,this.x+.5*this.width,this.y+.5*this.height,this.width)}Oi(){if(Ts.ts){if(console.log(Pt.Qt,Ts.Wi>Pt.k,Ts.Wi>Pt.Tt),Pt.Qt&&Ts.Wi>Pt.Tt)return;if(Ts.Wi>Pt.k)return}l(this,{x:Wt.x,y:Wt.y,width:1,height:1})&&this.Xi()}Xi(){this.removeListener(),this.Ti(),this.Ci()}addListener(){this.Si||(Pt.canvas.addEventListener("click",this.$i),this.Si=!0)}removeListener(t=!1){(t||this.Qi)&&(Pt.canvas.removeEventListener("click",this.$i),this.Si=!1)}ji(){this.removeListener(!0),this.deleted=!0}}const xs=new ps(2075,25,200,100,"MENU",()=>{Pt.M(),Pt.Kt(Ht.start)},!0);xs.font=50;const ws=new ps(1600,1500,400,150,"START",()=>{Pt.Rt=!0,Pt.C(["Loading..."],void 0,!1),setTimeout(()=>{Pt.play(),Pt.ss(),ms.removeListener(!0),Pt.st.forEach(t=>t.ji()),Pt.it.forEach(t=>t.deleted=!0),Pt.Rt=!1,Pt.M(),Pt.Kt(Ht.playing)})}),ms=new ps(900,1500,500,150,"WAVE 1",()=>{const t=6>Pt.jt?350:10>Pt.jt?250:150,s=W/Pt.jt,i=W-(s*(Pt.jt-1)+t);for(let e=1;Pt.jt>=e;e++){const h=i/2+s*(e-1);for(let t=0;3>t;t++){const s=g(e);Pt.it.push(new ks(15+h+70*t,ms.y-225,s.P>=t+1))}const n=new ps(h,ms.y-200,t,150,""+e,()=>{Pt.D=e,Pt.st.forEach(t=>t.ji()),Pt.it.forEach(t=>t.deleted=!0)});n.addListener(),Pt.st.push(n)}},!1);class ks extends Xt{constructor(t,s,i,e=!0){super(t,s,0,0,50,50),this.xs=i?pt[nt]():pt[ht](),this.Fi=e}tt(){this.Fi&&(Pt.Jt.fillStyle="green",Pt.Jt.fillRect(this.x-10,this.y-10,this.width+20,this.width+20)),this.xs?.draw(Pt.Jt,this.x,this.y,this.width)}}const Js=new ps(1650,1100,200,100,"Okay",()=>{Pt.M(),Es.removeListener(),vs.removeListener()}),vs=new ps(1650,950,200,100,"Retry",()=>{Pt.M(),Pt.ss(!1),Js.removeListener()}),Es=new ps(450,1100,200,100,"Cancel",()=>{Pt.M(),Js.removeListener()});Js.font=50,vs.font=50,Es.font=50;const Ts=new class extends Xt{constructor(){super(0,0),this.ts=!1,this.Wi=0}tt(){if(!this.ts){this.ts=!0,this.Wi=Date.now();const t=Pt.ended&&void 0!==Pt.hs;Pt.Jt.fillStyle="rgba(255, 255, 255, .25)",Pt.Jt.fillRect(0,0,W,Y),Pt.Jt.fillStyle=O,Pt.Jt.strokeStyle=N,Pt.Jt.lineWidth=50;const s=Pt.Rt?300:0,i=400+s,e=1250;if(Pt.Jt.fillRect(i,550,1500,700),Pt.Jt.strokeRect(375+s,525,1550,750),Pt.Rt||(Js.addListener(),Js.Ci=Pt.qt,Pt.Dt&&(Es.addListener(),Es.tt()),t?(vs.addListener(),vs.tt(),Js.tt(Pt.D===Pt.jt?"Menu":"Next")):Js.tt("Okay")),Pt.Et.forEach((t,i)=>{Rt(45),Pt.Jt.fillStyle="white",Pt.Jt.textAlign="left",Pt.Jt.textBaseline="bottom",Pt.Jt.fillText(t,450+s,650+i*R)}),t){for(let t=0;3>t;t++){const s=new ks(i+50+125*t,e-150,Pt.hs>t,!1);s.width=100,s.tt()}switch(Pt.hs){case 0:Pt.Jt.fillText("The witch appreciates your",850,e-105),Pt.Jt.fillText("contribution! Try again!",850,e-55);break;case 1:Pt.Jt.fillText("A valient effort, but",850,e-105),Pt.Jt.fillText("maybe give it another try!",850,e-55);break;case 2:Pt.Jt.fillText("Almost caught em all! This",850,e-105),Pt.Jt.fillText("isnt pokemon, but still...!",850,e-55);break;case 3:Pt.Jt.fillText("Haha, no soup for the witch!",850,e-105),Pt.Jt.fillText("She is very sad, nice work!",850,e-55)}}}}},Ss=[],bs=[],Cs=[],Ms=[],Ws=[],Ys=[],Rs=[],$s=[],Ls=[],Qs=[],js=[];window.addEventListener("resize",()=>{Mt()}),document.addEventListener("DOMContentLoaded",()=>{Mt()});const Is=new Image;let Os;Is.src="path.png",Is.onload=()=>{Pt.image=Is,Pt.Kt(Ht.start),new gs,Os=new qt(!0),It.imageSmoothingEnabled=!1,Nt.imageSmoothingEnabled=!1,(t=>{t.addEventListener("mousedown",()=>{r()}),t.addEventListener("touchstart",t=>{(t=>{if(1===t.targetTouches.length){Pt.l=!0,Pt.Qt=!0,Pt.Tt=Date.now();const s=t.targetTouches[0];a(s.pageX,s.pageY),r()}})(t)}),t.addEventListener("touchcancel",t=>{0===t.targetTouches.length&&o()}),t.addEventListener("mousemove",t=>{a(t.pageX,t.pageY)}),t.addEventListener("touchmove",t=>{if(1===t.targetTouches.length){const s=t.targetTouches[0];a(s.pageX,s.pageY)}})})(Ot),requestAnimationFrame(b)}</script>