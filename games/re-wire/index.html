<!doctype html><title>Re-Wire</title><style>.btn{box-shadow:inset 0 -3px 7px 0 #333;background:linear-gradient(to bottom,#2e2e2e 5%,#212121 100%);background-color:#2e2e2e;border:1px solid #adadad;display:inline-block;cursor:pointer;color:#fff;font-family:sans-serif;font-size:14px;padding:12px 20px;text-decoration:none;text-shadow:0 1px 0 #3d3d3d;text-align:center;margin:6px}.btn:hover{background:linear-gradient(to bottom,#212121 5%,#2e2e2e 100%);background-color:#212121;color:#3e7ff9}.btn:active{position:relative;top:1px}*{margin:0;padding:0;user-select:none}body{background:#222}.blueFont{font-family:sans-serif;color:#fff;text-shadow:0 4px 3px rgba(0,0,0,.4),0 8px 13px rgba(0,0,0,.8),0 18px 23px rgba(0,0,0,.1)}h1{font-size:100px}h2{font-size:20px;font-weight:lighter}h3{margin-top:10px;font-size:15px;font-weight:lighter}.center{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}#title{top:40%}#game{box-shadow:11px 10px 34px 0 rgba(0,0,0,.75);background:#1c242e;width:1280px;height:720px;border:1px solid grey}#loading{top:53.4%}#menu{top:70%}#menu .btn{margin-top:20px;width:200px;display:block}.hidden{visibility:hidden}#levelDone{text-align:center;background-color:rgba(0,0,0,.5);box-shadow:0 10px 34px -10px rgba(0,0,0,.75);width:100%;padding:80px 0 80px 0;border-top:1px solid grey;border-bottom:1px solid grey}#levelDone a{margin-top:20px}#content{position:absolute;width:100%;height:100%}#reset{position:absolute;left:20px;bottom:15px}#levelInfo{font-size:20px;position:absolute;left:20px;top:15px}#nodeInfo{font-size:20px;position:absolute;right:20px;top:15px}#description{width:550px;text-align:center;top:53%}.tutorial{position:absolute;right:100px;top:50px;background-color:rgba(0,0,0,.3);border:1px solid #999;box-shadow:11px 10px 34px 0 rgba(0,0,0,.75)}</style><div id=game class=center><div id=content></div><div id=levelInfo class="hidden blueFont">Level 6</div><div id=nodeInfo class="hidden blueFont">3 / 10</div><div id=title class="hidden center"><h1 class=blueFont>Re-Wire</h1></div><div id=description class="hidden center blueFont"><h2>Bring the system back online by rewiring the power nodes.</h2><h3>The game saves progress automatically, you can come back later and continue from the last played level.</h3></div><div id=loading class="hidden center"></div><div id=menu class="hidden center"><a class=btn id=startBtn>START NEW GAME</a> <a class=btn id=continueBtn>CONTINUE GAME</a></div><div id=levelDone class="hidden center"><div><h1 class=blueFont id=nextMsg>Level completed!</h1></div><a class=btn id=nextBtn>NEXT LEVEL</a></div><div id=reset class=hidden><a class=btn id=resetBtn>RESET</a> <a class="hidden btn" id=backBtn>BACK</a> <a class="hidden btn" id=skipBtn>NEXT</a></div></div><script>"use strict";var n,t,r=function(n,t){var r=document.createElement("canvas");return r.width=n,r.height=t,[r,r.getContext("2d")]},o=function(){var e=N();return{t:function(a,i,o){var u,c=r(1280,720),f=c[0],s=c[1],v=hn(),l=cn(f),h=vn(i),y=ln(),d=function(){u(),l.o(),v.o(),document.body.style.cursor="default"},x=Mn((function(){d(),o()})),p=sn(l);v.i(h),v.i(x),v.i(y),v.i(p),a.u.forEach((function(n){var r={s:{x:n[0],y:n[1]},v:{size:n[2],type:t.v},l:{type:t.v}};v.h(r)})),a.p.forEach((function(n){var r={s:{x:n[0],y:n[1]},M:{size:n[2]},l:{type:t.M}};v.h(r)})),a.m.forEach((function(n){var r={s:{x:n[0],y:n[1]},v:{size:n[2],type:t.k},l:{type:t.k}};v.h(r)}));var m={s:{x:a.start[0],y:a.start[1]},v:{size:0,type:t.start},l:{type:t.start}},g={s:{x:a.end[0],y:a.end[1]},v:{size:0,type:t.end},l:{type:t.end},g:{size:30}},A={A:{attachments:[{B:m,D:n.left},{B:g,D:n.left}]}},M={finish:{},l:{type:t.finish},s:{x:a.finish[0],y:a.finish[1]}};return v.h(m),v.h(M),v.h(g),v.h(A),u=mn((function(n){!function(n){p.update(n),x.update(n)}(n),function(n){s.drawImage(e,0,0),y.l(s,n),h.l(s,n)}(n)})),{canvas:f,o:d}}}},i=function(n,t,r){return n<t?t:n>r?r:n},u=function(n,t,r,e){var a=t.x-n.x,i=t.y-n.y,o=((r.x-n.x)*a+(r.y-n.y)*i)/(i*i+a*a);return(o>=0&&o<=1?Math.pow(n.x+a*o-r.x,2)+Math.pow(n.y+i*o-r.y,2):o<0?Math.pow(n.x-r.x,2)+Math.pow(n.y-r.y,2):Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))<e*e},a=function(n,t){return Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2)},e=function(n,t,r,e){var a=(n.x-r.x)*(n.x-r.x)+(n.y-r.y)*(n.y-r.y);if(a<=(t-e)*(t-e))return[];for(var i=Math.sqrt(a),o=(r.x-n.x)/i,u=(r.y-n.y)/i,c=[],f=0,s=1;s>=-1;s-=2){var v=(t-s*e)/i;if(!(v*v>1))for(var l=Math.sqrt(Math.max(0,1-v*v)),h=1;h>=-1;h-=2){var y=o*v-h*l*u,d=u*v+h*l*o;c[f]=[];var x=c[f]=new Array(2);x[0]={x:n.x+t*y,y:n.y+t*d},x[1]={x:r.x+s*e*y,y:r.y+s*e*d},f++}}return c},c=function(n){return(n%1+1)%1},f=function(n,t){return{x:n.x-t.x,y:n.y-t.y}},s=function(n,t){return{x:n.x+t.x,y:n.y+t.y}},v=function(n,t){return{x:n.x*t,y:n.y*t}},l=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)},d=function(n,t){return l(f(n,t))},h=function(n){return function(n,t){return v(n,1/t)}(n,l(n)||1)},p=function(n,t){n.x=t.x,n.y=t.y},y=function(n,t,r){return(1-r)*n+r*t},M=function(n,t,r){return{r:y(n.r,t.r,r),I:y(n.I,t.I,r),b:y(n.b,t.b,r),a:y(n.a,t.a,r)}},b={x:.5,y:.5},m={x:1,y:0},k={x:0,y:1},x={x:1,y:1},g=function(n){return 564*(Math.sin(100*n.x+6574*n.y)+1)%1},w=function(n){var t=function(n){return{x:c(n.x),y:c(n.y)}}(n),r=function(n){return{x:~~n.x,y:~~n.y}}(n),e=g(r),a=g(s(r,m)),i=y(e,a,t.x),o=g(s(r,k)),u=g(s(r,x)),f=y(o,u,t.x);return y(i,f,t.y)},A=function(n,t,r){var e=i((r-n)/(t-n),0,1);return e*e*(3-2*e)},B=function(n,t,r,e){return void 0===n&&(n=1),void 0===t&&(t=1),void 0===r&&(r=1),void 0===e&&(e=1),{r:n,I:t,b:r,a:e}},z=function(n,t){return{r:n.r*t,I:n.I*t,b:n.b*t,a:n.a}},D=function(n,t){return{r:n.r+t.r*t.a,I:n.I+t.I*t.a,b:n.b+t.b*t.a,a:n.a+t.a}},E=function(n,t,e){for(var a=r(n,t),o=a[0],u=a[1],c=u.getImageData(0,0,n,t),f=new ArrayBuffer(c.data.length),s=new Uint8ClampedArray(f),v=new Uint32Array(f),l={},h=0;h<t;h++)for(var y=0;y<n;y++){l.x=y/(n-1),l.y=h/(t-1);var d=e(l);v[h*n+y]=i(255*d.a,0,255)<<24|i(255*d.b,0,255)<<16|i(255*d.I,0,255)<<8|i(255*d.r,0,255)}return c.data.set(s),u.putImageData(c,0,0),o},I=function(n,t){var r=v(n,t),e=r.x,a=r.y;return e*=1.1547,a+=Math.floor(e)%2*.5,e=Math.abs(e%1-.5),a=Math.abs(a%1-.5),Math.abs(Math.max(1.5*e+a,2*a)-1)},G=function(n,t){var r=A(.91,.94,t)-A(.41,.42,t);return n+=r,.9+.1*Math.sin(6*n)*.9+.1*Math.sin(4*n)-.1*w({x:2*(n+4+5*t),y:80*t})+.2*r},U=function(n){var t=4/n,r=n/4,e=B(.615,.705,1,1),a=B(1,1,1,1);return E(Math.round(1.1*n),Math.round(1.1*n),(function(n){n=v(n,1.1);var i=f(n,b),o=Math.atan2(i.y,i.x),u=2*l(i),c=.7*A(.3,1,1-I(n,r));c-=1*(1-(A(.87,.8-.1,u)-A(.6,.425,u)));var s=.4*G(o,u),h=A(.8,.8+t,u)+A(.5,.5-t,u),y=M(z(e,c),z(a,s),h),d=.5*A(1,.8,2*l(f(i,{x:.04,y:.04}))/1.1),x=B(0,0,0,d);return M(y,x,A(1-t,1,u))}))},S=function(n){var t=4/n,r=n/8,e=B(.815,.2705,.2,1),a=B(1,1,1,1);return E(Math.round(1.1*n),Math.round(1.1*n),(function(n){n=v(n,1.1);var i=f(n,b),o=Math.atan2(i.y,i.x),u=2*l(i),c=.7*A(.02,.41,1-I(n,r));c-=.6*(1-(A(.9025,.85-.2,u)-A(.5,.255,u)));var s=.4*G(o,u),h=A(.85,.85+t,u)+A(.3,.3-t,u),y=M(z(e,c),z(a,s),h),d=.5*A(1,.8,2*l(f(i,{x:.04,y:.04}))/1.1),x=B(0,0,0,d);return M(y,x,A(1-t,1,u))}))},q=function(n){return E(n,n,(function(t){var r=f(t,b),e=2*l(r),a=Math.atan2(r.y,r.x),o=a/(2*Math.PI)+.5,u=(a/(2*Math.PI)+.5+.3*e)*Math.round(8+n/50),s=o*Math.round(5+n/200),v=Math.min(c(u),c(1-u)),h=A(0,.08,.5*v-e+.7),d=1-A(.9,.2,e),x=1.4*e-.5*h,p=function(n,t,r,e,a){var o=2*Math.min(c(n),c(1-n)),u=A(0,8*a,o-t),f=A(.52,.54,1-t),s=A(.45+a,.45,1-t);return i(u+f-s,0,1)}(s,e,0,0,.02),m=.5+.5*G(1*a,e);return x=y(y(d,x,h),.3*p*m,p),B(x,x,x,h+(1-d))}))},C=function(){return E(21,21,(function(n){var t=f(n,b),r=function(n){var t=2*l(n),r=2*l(f(n,v(x,.05))),e=.2*A(1,.5,.8*r),a=A(1,.85,t);return B(e,e,e,a)}(t),e=function(n){var t=2*l(n)*1.2,r=.25*A(1,0,t),e=A(.99,.9,t);return B(r,r,r,e)}(t),a=function(n){var t=2*l(n)*1.5,r=1.01*l(f(n,v(x,.14))),e=A(1,.6,t)*A(.2,.5,r);return B(e,e,e,e)}(t);return D(D(r,e),a)}))},F=B(1,1,1,1),L=function(n){return E(80,80,(function(t){var r=f(t,b),e=1-2*l(r),a=M(n,F,A(.6,.89,e)),i=A(0,1,e);return B(a.r,a.I,a.b,i*i*i)}))},O=function(n,t){return E(t,t,(function(t){t=v(t,1.1);var r,e,a=f(t,b),i=Math.atan2(a.y,a.x),o=2*l(a),u=A(1,.96,o),c=.3*A(.9,.8,o)+.3,s=(r=i+3*(c-=A(.7,.6,o)*A(.2,.3,o)*.4),e=o,(.9+.1*Math.sin(6*r)*.9+.1*Math.sin(4*r)-.1*w({x:2*(r+4+5*e),y:80*e}))*c),h=B(s,s,s,u),y=A(.35,.45,o)*A(.55,.45,o),d=M(h,n,y),x=.2*A(1,.8,2*l(f(a,{x:.04,y:.04}))/1.1),p=B(0,0,0,x);return M(d,p,A(.8,1,o))}))},N=function(){for(var n=r(1920,1280),t=n[0],e=n[1],a=E(64,64,(function(n){var t=v(n,4),r=1-.7*A(.7,1,I(t,1));return B(.117*r,.149*r,.188*r,1)})),i=E(256,144,(function(n){var t=A(0,.006,n.x)*A(1,.994,n.x)*A(0,.01,n.y)*A(1,.99,n.y);return B(1,1,1,.04*(1-t))})),o=0;o<12;o++)for(var u=0;u<24;u++)e.drawImage(a,54*u,63*o);return e.drawImage(i,0,0,1280,720),t},P=function(n){return document.getElementById(n)},T=P("title"),j=P("game"),H=P("loading"),J=P("menu"),K=P("levelDone"),Q=P("nextMsg"),R=P("nextBtn"),V=P("startBtn"),W=P("continueBtn"),X=P("content"),Y=P("reset"),Z=P("resetBtn"),$=P("levelInfo"),_=P("nodeInfo"),nn=P("description"),tn=P("skipBtn"),rn=P("backBtn"),on=function(n){try{localStorage.setItem("level",""+n)}catch(n){}},un=function(n){n.parentNode.removeChild(n)},an=function(n,t){var r=Array.isArray(n)?n:[n];r.forEach((function(n){n.style.visibility="visible",n.style.opacity="0"})),kn(0,1,.4,(function(n){r.forEach((function(t){t.style.opacity=n.toString()}))}),(function(){t&&t()}))},en=function(n,t){var r=Array.isArray(n)?n:[n];kn(1,0,.4,(function(n){r.forEach((function(t){t.style.opacity=n.toString()}))}),(function(){r.forEach((function(n){n.style.visibility="hidden"})),t&&t()}))},cn=function(n){var t=!1,r={x:0,y:0},e=[],a=[],i=[],o=function(t){var e=n.getBoundingClientRect();r.x=t.clientX-e.left,r.y=t.clientY-e.top,t.preventDefault()},u=function(n){t=!0,e.forEach((function(n){var t=n[1].G;t&&t(),i.push(n)})),n.preventDefault()},c=function(n){t=!1,i.forEach((function(n){var t=n[1].U;t&&t()})),i.length=0};return document.addEventListener("mousemove",o),document.addEventListener("mousedown",u),document.addEventListener("mouseup",c),{update:function(){for(var n=a.length-1;n>=0;--n){var i=(o=a[n])[1];d(r,o[0].s)<=o[0].g.size&&(i.S&&i.S(),a.splice(n,1),e.push(o))}for(n=e.length-1;n>=0;--n){var o;i=(o=e[n])[1],t&&i.q&&i.q(),d(r,o[0].s)>o[0].g.size&&(i.C&&i.C(),e.splice(n,1),a.push(o))}},F:function(n,t){a.push([n,t])},L:r,O:function(){return t},o:function(){document.removeEventListener("mousemove",o),document.removeEventListener("mousedown",u),document.removeEventListener("mouseup",c)},N:e}},fn={P:[{u:[[460,207,70],[468,516,70]],m:[],p:[],start:[50,360],finish:[1230,360],end:[110,360]},{u:[[440,540,60],[846,556,60],[645,173,90]],m:[],p:[[777,369,110],[249,461,70]],start:[50,360],finish:[1230,360],end:[110,360]},{u:[[871,447,50],[659,590,50],[629,267,40]],m:[[438,561,40],[497,148,40]],p:[[241,435,70],[675,422,90],[324,215,50]],start:[50,360],finish:[1230,360],end:[110,360]},{u:[[872,496,130],[508,234,60],[508,486,60],[871,190,130]],m:[[234,525,40],[237,182,40]],p:[[667,288,60],[669,427,60],[593,132,60],[597,588,60]],start:[50,360],finish:[1230,360],end:[110,360]},{u:[[845,156,70],[595,443,60],[668,609,60],[396,416,50]],m:[[832,396,40],[556,247,40]],p:[[696,204,60],[721,392,60],[498,345,50]],start:[50,360],finish:[1230,360],end:[110,360]},{u:[[664,338,70],[365,171,90],[929,170,90],[1011,559,80],[372,558,90]],m:[[729,561,40],[1149,266,40]],p:[[757,203,70],[846,375,70],[585,549,80],[1150,429,50]],start:[50,360],finish:[1230,360],end:[110,360]},{u:[[502,259,60],[508,458,60],[979,356,50],[346,573,60],[319,141,60]],m:[[724,361,40],[720,142,40]],p:[[609,353,60],[379,451,50],[848,360,70]],start:[50,360],finish:[1230,360],end:[110,360]},{u:[[957,156,70],[378,570,70],[507,109,60]],m:[[568,536,40],[382,198,40],[659,112,40],[940,348,40]],p:[[756,445,100],[1122,234,50]],start:[50,360],finish:[1230,360],end:[110,360]},{u:[[629,130,40],[811,482,50],[385,491,50],[386,317,50],[976,569,40],[844,139,60],[1161,138,50]],m:[[222,230,40],[216,587,30]],p:[[619,367,160],[1015,255,130]],start:[50,360],finish:[1230,360],end:[110,360]},{u:[[922,509,150],[257,552,60],[201,200,50],[509,519,50],[520,134,50],[937,257,50],[1111,133,50]],m:[[678,465,40],[679,291,40]],p:[[887,113,80],[392,438,70],[699,573,50],[1163,468,50]],start:[50,360],finish:[1230,360],end:[110,360]},{u:[[228,193,150],[326,563,80],[557,209,70],[785,199,50],[1043,593,80],[1015,188,130],[791,548,50],[543,544,50],[511,373,30],[685,333,30]],m:[[687,446,30],[1205,455,30]],p:[[442,116,50],[982,400,50],[1203,265,50],[1185,563,50],[776,382,60],[408,428,50]],start:[50,360],finish:[1230,360],end:[110,360]},{u:[[669,355,80],[668,187,50],[666,70,30],[668,514,50],[673,653,30],[473,361,50],[852,353,50],[986,348,30],[335,361,30]],m:[],p:[[804,476,50],[552,244,60],[857,174,90],[489,541,80]],start:[50,360],finish:[1230,360],end:[110,360]},{u:[[549,114,60],[213,345,30],[389,186,50],[834,93,70],[297,272,40],[389,564,50],[606,542,50],[815,566,50]],m:[],p:[[839,300,130],[1062,343,80],[483,354,50],[337,419,70],[485,537,30],[204,507,50]],start:[50,360],finish:[1230,360],end:[110,360]},{u:[[402,380,90],[758,379,90],[890,195,50],[324,166,50],[1036,91,40],[1038,461,50],[1055,622,40]],m:[[600,100,40],[595,617,40]],p:[[159,251,50],[733,156,70],[886,553,80],[988,303,80],[1167,238,50],[1082,536,30]],start:[50,360],finish:[1230,360],end:[110,360]},{u:[[647,360,160],[326,233,30],[462,111,30],[646,71,30],[819,120,30],[932,277,30],[930,468,30],[809,602,30],[626,644,30],[438,579,30],[334,404,30]],m:[[188,119,30],[192,568,30]],p:[[1069,367,90],[354,134,50],[561,106,40],[828,232,50],[855,392,50],[711,577,50],[447,466,50],[431,258,60]],start:[50,360],finish:[1230,360],end:[110,360]},{u:[[335,304,50],[655,299,60],[961,191,50],[318,584,50],[650,580,50],[1007,591,50],[346,115,40],[1139,136,50],[1198,581,30],[901,497,30]],m:[],p:[[1090,294,70],[985,487,40],[765,482,60],[846,192,50],[538,149,50],[1037,134,30],[1135,530,30]],start:[50,360],finish:[1230,360],end:[110,360]}]},sn=function(n){var r,e,a={x:0,y:0},o=[],u=!1,c=!1;return{h:function(i){!i.v||i.v.type!==t.v&&i.v.type!==t.k||o.push(i),i.finish&&(e=i),i.g&&n.F(i,{S:function(){c=!0,n.O()||(document.body.style.cursor="pointer",r=i,i.l.T=!0)},C:function(){document.body.style.cursor="default",c=!1,u||(i.l.T=!1)},G:function(){u=!0,p(a,f(n.L,i.s))},U:function(){u=!1,c||(i.l.T=!1)},q:function(){}})},update:function(t){if(n.update(),r){u&&p(r.s,f(n.L,a));var c=r.s;c.x=i(c.x,0,1280),c.y=i(c.y,0,720),o.forEach((function(n){if(n!==r){var t=n.s,e=10+n.v.size;if(d(c,t)<e){var a=h(f(c,t));0==a.x&&0==a.y&&(a.x=1);var i=v(a,e);r.s=s(t,i)}}})),d(c,e.s)<30?(e.finish.connected=!0,p(r.s,e.s)):e.finish.connected=!1}}}},vn=function(n){var r=[],e=n.j,a=n.p,i=n.m,o=n.H,u=n.finish,c=n.start;return{h:function(n){n.l&&r.push(n)},l:function(f,s){r.forEach((function(r){switch(r.l.type){case t.v:f.drawImage(e[r.v.size],r.s.x-r.v.size-6,r.s.y-r.v.size-6),f.drawImage(n.J,r.s.x-11,r.s.y-11),r.v.K?f.drawImage(n.R,r.s.x-40,r.s.y-40):r.v.V&&f.drawImage(n.W,r.s.x-40,r.s.y-40);break;case t.k:f.drawImage(i[r.v.size],r.s.x-r.v.size-6,r.s.y-r.v.size-6);break;case t.M:f.save(),f.translate(r.s.x,r.s.y),f.rotate(s);var v=a[r.M.size];f.drawImage(v,-v.width/2,-v.height/2),f.restore();break;case t.finish:f.drawImage(u,r.s.x-32,r.s.y-32);break;case t.start:f.drawImage(c,r.s.x-24,r.s.y-24);break;case t.end:f.drawImage(o,r.s.x-32,r.s.y-32),r.l.T?(f.globalAlpha=.8+.2*Math.sin(6*s),f.drawImage(n.X,r.s.x-31,r.s.y-31)):(f.globalAlpha=.2+.2*Math.sin(3*s),f.drawImage(n.X,r.s.x-31,r.s.y-31)),f.globalAlpha=1}}))}}},ln=function(){var n=[];return{h:function(t){t.A&&n.push(t)},l:function(t){n.forEach((function(n){for(var r=n.A.attachments,e=0;e<r.length-1;e++){var a=r[e],i=r[e+1];t.save(),a.Y&&t.setLineDash([5,10]),a.Z?(t.strokeStyle="#d04533",t.lineWidth=5):(t.strokeStyle="white",t.lineWidth=3),t.lineCap="round",t.beginPath(),t.moveTo(a.$.x,a.$.y),t.lineTo(i._.x,i._.y),t.stroke(),t.restore()}}))}}},dn=function(n,t){var e=[],a={},i={},o={};[30,40,50,60,70,80,90,100,110,120,130,140,150,160].forEach((function(n){e.push((function(){a[n]=U(2*n+10)}))})),[30,40,50,60,70,80,90,100,110,120,130,140,150,160].forEach((function(n){e.push((function(){i[n]=q(2*n+6)}))})),[30,40,50,60,70,80].forEach((function(n){e.push((function(){o[n]=S(2*n+10)}))}));var u,c=C(),s=L(B(0,1,0)),v=L(B(1,0,0)),h=O(B(.2,.6,.2),70),y=O(B(.2,.2,.2),52),d=(u=B(0,1,0),E(62,62,(function(n){var t=f(n,b),r=1-2*l(t),e=M(u,F,A(.45,.5,r)*A(.55,.5,r)),a=A(0,.5,r)*A(1,.5,r);return B(e.r,e.I,e.b,a*a*a)}))),x=O(B(1,.4,.4),70),p=r(450,264),m=p[0],g=p[1];m.className="tutorial",g.font="20px sans-serif",g.fillStyle="#ccc",g.fillText("1. Drag the cable ...",20,50),g.drawImage(h,358,10),g.fillText("2. ...around the power nodes...",20,140),g.drawImage(U(80),350,90),g.fillText("3. ...and plug it into the socket!",20,230),g.drawImage(x,358,190);var I=r(450,100),w=I[0],k=I[1];w.className="tutorial",k.font="20px sans-serif",k.fillStyle="#ccc",k.fillText("Isolated cables can overlap others ",20,55),k.drawImage(S(80),358,10);var P=e.length,z=0;!function r(){var u=e.shift();u?(u(),n(100/P*++z),requestAnimationFrame(r)):t({j:a,p:i,m:o,W:s,R:v,J:c,H:h,X:d,finish:x,nn:m,tn:w,start:y})}()},hn=function(){var n=[],t=[];return{i:function(t){n.push(t)},h:function(r){t.push(r),n.forEach((function(n){n.h(r)}))},o:function(){n.forEach((function(n){return n.o&&n.o()}))},entities:t}},pn=function(t){for(var r=0;r<t.length-1;r++){var a=t[r],i=t[r+1],o=e(a.B.s,a.B.v.size,i.B.s,i.B.v.size),u=a.D==n.left?i.D==n.left?1:3:i.D==n.left?2:0;o[u],a.$=o[u][0],i._=o[u][1]}},yn=function(n,t,r,e,i){return r.filter((function(r){return r!=e&&r!=i&&u(n,t,r.s,r.v.size)})).sort((function(t,r){return a(t.s,n)>a(r.s,n)?1:-1}))},Mn=function(r){var e,a=[],i=[],o=[],c=0,s=0;return{h:function(n){n.v&&(a.push(n),n.v.type==t.v&&(s++,_.innerHTML="0 / "+s)),n.A&&o.push(n),n.M&&i.push(n),n.finish&&(e=n)},update:function(v){o.forEach((function(o){var v=o.A.attachments;o.A.K=!1,v.forEach((function(n){n.Y=!1})),a.forEach((function(n){n.v.V=n.v.K=!1}));var l=0;pn(v),function(t,r){var e,a,i,o;do{e=!0;for(var u=0;u<t.length-1;u++){var c=t[u],f=t[u+1],s=yn(c.$,f._,r,c.B,f.B)[0];if(s){if(!s.v.rn){s.v.rn=!0;var v={B:s,D:(a=c.$,i=f._,o=s.s,(i.x-a.x)*(o.y-a.y)-(i.y-a.y)*(o.x-a.x)>0?n.left:n.right)};t.splice(u+1,0,v),e=!1,pn([c,v,f]);break}c.Y=!0}}}while(!e)}(v,a),function(t){var r;do{r=!0;for(var e=1;e<t.length-1;e++){var a=t[e-1],i=t[e],o=t[e+1],u=f(a.$,i._),c=f(i.$,o._),s=Math.atan2(c.y,c.x)-Math.atan2(u.y,u.x);if(s<0&&(s+=2*Math.PI),i.D==n.left&&s>1.8*Math.PI||i.D==n.right&&s<.2*Math.PI){t.splice(e,1),i.B.v.rn=!1,r=!1,pn([a,o]);break}}}while(!r)}(v);var h,y,d,x,p,m,g,A,M,b,I=!1;o.A.attachments.forEach((function(n){n.B.v.type==t.k&&(I=!I),n.Z=I}));for(var B=0;B<v.length-1;B++){var w=v[B],k=v[B+1];if(!w.Z)for(var E=0;E<v.length-1;E++){var P=v[E],z=v[E+1];P.Z||(h=w.$,y=k._,d=P.$,x=z._,p=y.x-h.x,m=y.y-h.y,g=x.x-d.x,A=x.y-d.y,M=(-m*(h.x-d.x)+p*(h.y-d.y))/(-g*m+p*A),b=(g*(h.y-d.y)-A*(h.x-d.x))/(-g*m+p*A),M>=0&&M<=1&&b>=0&&b<=1&&(w.Y=P.Y=!0))}}for(B=0;B<v.length-1;B++)for(w=v[B],k=v[B+1],E=0;E<i.length;E++)u(w.$,k._,i[E].s,i[E].M.size)&&(w.Y=!0,o.A.K=!0);var L=!0;o.A.attachments.every((function(n){return!(!L||(!n.Z||n.Y)&&(n.B.v.V?(n.B.v.K=!0,o.A.K=!0,1):(n.B.v.V=!0,n.Y?L=!1:n.B.v.type==t.v&&l++,0)))})),L&&e.finish.connected&&!o.A.K&&l===s&&r(),l!=c&&(_.innerHTML=l+" / "+s),c=l}))}}};!function(n){n[n.left=-1]="left",n[n.right=1]="right"}(n||(n={})),function(n){n[n.v=0]="spool",n[n.start=1]="start",n[n.end=2]="end",n[n.M=3]="block",n[n.finish=4]="finish",n[n.k=5]="isolator"}(t||(t={}));var bn=requestAnimationFrame,mn=function(n){var t=!1,r=function(e){n(.001*e),t||bn(r)};return bn(r),function(){t=!0}},kn=function(n,t,r,e,a){var i=performance.now(),o=function(u){var c=1/r*(u-i)*.001;c<1?(e(n+(t-n)*c),bn(o)):(e(t),bn(a))};o(i)},xn=function(n,t,r){var e=o(),a=r,i=function(){var r;0==a&&(r=t.nn,j.appendChild(r),an(r)),2==a&&(r=t.tn,j.appendChild(r),an(r));var o=e.t(fn.P[a],t,(function(){r&&en(r,(function(){un(r)})),a<fn.P.length-1?(on(++a),en(Y),an([K],(function(){R.onclick=function(){R.onclick=null,en([K,o.canvas,$,_],(function(){un(o.canvas),i()}))}}))):(Q.innerHTML="Thanks for playing!",R.innerHTML="AGAIN",an(K,(function(){R.addEventListener("click",(function(n){location.reload()}))})),on(0))}));n.appendChild(o.canvas),$.innerHTML="Level "+(a+1),an([o.canvas,Y,$,_]);var u=function(){r&&en(r,(function(){un(r)})),rn.onclick=tn.onclick=Z.onclick=null,en([o.canvas,Y,$,_],(function(){o.o(),un(o.canvas),i()}))};Z.onclick=u,tn.onclick=function(){a>fn.P.length-2||(a++,u())},rn.onclick=function(){a<1||(a--,u())}};i()};an(T,(function(){var n=r(200,7),t=n[0],e=n[1];t.id="loadingbar",H.appendChild(t),an(t),e.strokeStyle="grey",e.fillStyle="grey",e.lineWidth=1,e.strokeRect(.5,.5,199,4),dn((function(n){e.fillRect(.5,.5,1.99*n,4)}),(function(n){en(t,(function(){an([J,nn]);var t=function(){try{return parseInt(localStorage.getItem("level"))||0}catch(n){return 0}}();W.style.visibility=t?"visible":"hidden";var r=function(t){V.onclick=W.onclick=null,en([T,J,nn],(function(){xn(X,n,t)}))};V.onclick=function(){on(0),r(0)},W.onclick=function(){r(t)}}))}))}))</script>