<!doctype html><title>VOIDCALL</title><style>*{font-size:1.2vw;-webkit-touch-callout:none;-webkit-user-select:none;margin:0}#a,#p,#pc,#pu,#t{position:absolute}#c{display:block}#p{top:1vw;right:2vw;height:.5vw;width:12vw;background:rgba(0,0,0,.7);display:none}#pc,#pu{height:100%;background:rgba(0,149,255,.83);transition:width 1s;width:0}#pu{background:0 0;border-right:2px solid #fff}#a{top:2vw;left:2vw;font-size:1.2vw;width:94%;text-shadow:0 0 7px #fff;color:#fff}#t{top:2vw;left:0;right:0;font-family:sans-serif;text-align:center;color:#000}h1{font-size:16vw;margin:8vw 0 0 0}</style><body style=background:#000><canvas id=c></canvas><code id=a><div id=p><div id=pc></div><div id=pu></div></div></code><div id=t><h1>VOIDCALL</h1>Graphics & Programming – Dominic Szablewski – phoboslab.org<br>Music – Andreas Lösch – no-fate.net<br><br>CLICK TO START</div><script>let i,s,h=256,e=128,_=8,n=208,l=16,r=1280,f=720,o=16/9;function u(t,i,s){return t+(i-t)*s}function d(t,i,s,h,e,n,l,r,a){let o=t-h,u=i-e,c=s-n,f=l-h,x=r-e,y=a-n,M=u*y-c*x,v=c*f-o*y,m=o*x-u*f,z=Math.sqrt(M*M+v*v+m*m);return[M/z,v/z,m/z]}function w(){return s=s+(i=(i<<16)+(i>>16)+s&4294967295)&4294967295,(i>>>0)/4294967295}function v(t,i){return t+w()*(i-t+1)|0}function m(t){i=t||3134984190,s=1231121986^t}function M(t){return t[v(0,t.length-1)]}function x(t,i,s,h){let e=t-s,n=i-h;return e*e+n*n}let y=new Uint16Array(h*h),g=new Uint8Array(h*h),A=new Float32Array(h*h),q=new Float32Array(h*h),F=new Uint16Array(4*h),b=0,k=[-1-h,-h,1-h,-1,1,-1+h,h,1+h],U=0,T=1,z=2;function C(t,i){let s=(255&t)-(255&i),h=(t>>8)-(i>>8);return Math.sqrt(s*s+h*h)}function E(t,i,s,h){y[t]=i,g[t]=T,A[t]=s,q[t]=h}function I(t,i,s,e){let n=(i>>3)*h+(t>>3),l=N(n,(e>>3)*h+(s>>3)),r=[];for(;l>=0&&l!=n;){let t=255&l,i=l>>8,s=y[l];for(;s>=0&&s!=n&&!si(t,i,255&s,s>>8);)s=y[s];r.unshift({x:8*t+4,z:8*i+4}),l=s}return r}function N(t,i){for(g.fill(U),E(i,0,0,0),E(t,0,0,0),F[0]=t,b=1;b--;){let t=F[b];if(t==i)return t;g[t]=z;for(let s=0;s<k.length;s++){let h=t+k[s],e=g[h];if(!(e==z||Jt[h]||e&&h!=i)){let s=A[t]+C(t,h),e=s+C(h,i);E(h,t,s,e);let n=0;for(;n<b&&q[F[n]]>e;)n++;F.copyWithin(n+1,n,b),F[n]=h,b++}}}return-1}let O,D=44100,L=0,Y=4096,B=Y-1,H=new Float32Array(4*Y);for(let t=0;t<Y;t++)H[t]=Math.sin(6.283184*t/Y),H[t+Y]=H[t]<0?-1:1,H[t+2*Y]=t/Y-.5,H[t+3*Y]=t<Y/2?t/(Y/4)-1:3-t/(Y/4);function K(t,i,s,h,e){let n=h.t*e>>1,l=h.i/255,r=0;for(;r<s-n;){let s=r,h=r+n;t[h]+=i[s]*l,i[h]+=t[s]*l,r++}}function P(t){return.00390625*Math.pow(1.059463094,t-128)}function R(t,i,s,h,e,n){let l=t.s*Y,r=t.h*Y,a=t._*Y,o=t.o,u=t.u,c=t.m,f=Math.pow(2,t.M-8)/i,x=Math.pow(2,t.g-8)/i,y=0,M=0,v=P(s+12*(t.A-8)+t.q)*(1+8e-4*t.F),m=P(s+12*(t.k-8)+t.U)*(1+8e-4*t.T);L++;let z=t.C/255,g=0,d=0,p=h.length;for(let i=o+u+c-1;i>=0;--i){let s=i+n,w=H[(s*x*Y&B)+l]*t.I/512+.5,A=1;i<o?A=i/o:i>=o+u&&(A-=(i-o-u)/c);let b=v;t.N&&(b+=w),t.O&&(b*=A*A);let F=H[((y+=b)*Y&B)+r]*t.D;b=m,t.L&&(b*=A*A),F+=H[((M+=b)*Y&B)+a]*t.Y,t.B&&(F+=(2*Math.random()-1)*t.B*A),F*=A/255;let _=t.H;t.K&&(_*=w);let J=z*(F-d)-(g+=(_=1.5*H[.5*_/D*Y&B])*d);switch(d+=_*J,t.P){case 1:F=J;break;case 2:F=g;break;case 3:F=d;break;case 4:F=g+J}b=H[s*f*Y&B]*t.R/512+.5,F*=.00476*t.S,s<p&&(h[s]+=F*(1-b),e[s]+=F*b)}}function S(t){let i=D*t.songLen,s=new Float32Array(i),h=new Float32Array(i);for(var e=0;e<t.V.length;e++){let n=t.V[e],l=new Float32Array(i),r=new Float32Array(i),a=0,o=0,u=0;for(;;){if(32==u){u=0,o+=1;continue}if(o==t.Z-1){K(l,r,i,n,t.$);for(let t=0;t<i;t++)s[t]+=l[t],h[t]+=r[t];break}let e=n.p[o];if(e){let i=n.c[e-1].n[u];i&&R(n,t.$,i,l,r,a)}a+=t.$,u++}}return $(s,h)}function V(t,i){let s=t.o+t.u+t.m-1+179360,h=new Float32Array(s),e=new Float32Array(s);return R(t,5605,i,h,e,0),K(h,e,s,t,5605),$(h,e)}function Z(){(O=new(window.webkitAudioContext||window.AudioContext)).resume()}function $(t,i){let s=O.createBuffer(2,t.length,D);return s.getChannelData(0).set(t),s.getChannelData(1).set(i),s}function j(t,i){var s=O.createBufferSource();s.buffer=t,s.loop=i,s.connect(O.destination),s.start()}let G=new Float32Array(9),J=new Float32Array(9),Q=new Float32Array(9);async function W(t){let i=new Uint16Array(await(await fetch(t)).arrayBuffer()),s=[],h=i[0]+1;for(let t=0;t<i[0];t++){let e=h+i[t+1]/2;s.push(i.subarray(h,e)),h=e}return s}function X(t,i,s){let h=255&t[0],e=t[0]>>8,n=t[1],l=new Float32Array(e*h*3),r=new Float32Array(e*h*3),a=new Uint8Array(3*n),o=new Uint8Array(e*h),c=0,f=2,x=16,y=-16,M=16,v=-16;for(let s=0;s<e*h*3;s+=3){let h=t[f++];l[s]=((h>>10)-15)*i,l[s+1]=((h>>5&31)-15)*i,l[s+2]=((31&h)-15)*i,s<3*e&&(x=Math.min(x,l[s]),y=Math.max(y,l[s]),M=Math.min(M,l[s+1]),v=Math.max(v,l[s+1]))}for(let i=0;i<3*n;i+=3){let s=t[f++];c+=s>>14,a[i]=c,a[i+1]=s>>7&127,a[i+2]=127&s}for(let t=0;t<h;t++)for(let i=0;i<3*n;i+=3){let s=3*a[i],h=3*a[i+1],n=3*a[i+2],u=d(l[h],l[h+1],l[h+2],l[s],l[s+1],l[s+2],l[n],l[n+1],l[n+2]);for(let s=0;s<3;s++){let h=a[i+s],n=t*e+h,l=++o[n],c=l+1;for(let t=0;t<3;t++)r[3*n+t]=(r[3*n+t]*l+u[t])/c}}let m=1/(y-x)*rt,z=s*rt-x*m,g=1/(v-M),p=v*g;return function(t,i,s,h,o,c,f,x){let y=Math.cos(h||0),M=Math.sin(h||0),v=(o||0)*e*3,d=(c||0)*e*3;f=f||0;for(let h=0;h<3*(n-(x||0));h+=3){for(let t=0,i=0;t<3;t++){let s=3*a[h+t];for(let t=0;t<3;t++,i++)G[i]=u(l[v+s+t],l[d+s+t],f),J[i]=u(r[v+s+t],r[d+s+t],f),Q[i]=l[s+t]}qt.set([t+G[0]*y-G[2]*M,i+G[1],s+G[0]*M+G[2]*y,z+Q[0]*m,p-Q[1]*g,J[0]*y-J[2]*M,J[1],J[0]*M+J[2]*y,t+G[3]*y-G[5]*M,i+G[4],s+G[3]*M+G[5]*y,z+Q[3]*m,p-Q[4]*g,J[3]*y-J[5]*M,J[4],J[3]*M+J[5]*y,t+G[6]*y-G[8]*M,i+G[7],s+G[6]*M+G[8]*y,z+Q[6]*m,p-Q[7]*g,J[6]*y-J[8]*M,J[7],J[6]*M+J[8]*y],8*At),At+=3}}}function tt(t){let i=new Float32Array(t),s=new Float32Array(t),h=new Uint16Array(t);for(var e=0;e<t;e++)i[e]=2*w()-1,s[e]=2*w()-1,h[e]=e;for(let t=h.length-1;t>0;t--){let i=v(0,t+1),s=h[i];h[i]=h[t],h[t]=s}return function(e,n){let l=0|e,r=l+1,a=e-l,o=a-1,u=0|n,c=u+1,f=n-u,x=f-1;r%=t,c%=t;let y=h[((u%=t)+h[l%=t])%t],M=h[(u+h[r])%t],v=h[(c+h[l])%t],m=h[(c+h[r])%t],z=i[y]*a+s[y]*f,g=i[M]*o+s[M]*f,d=i[v]*a+s[v]*x,p=(3-2*a)*a*a,w=z-p*(z-g);return w-(3-2*f)*f*f*(w-(d-p*(d-(i[m]*o+s[m]*x))))}}let it,st,ht,et,_t,nt,lt=c.getContext("webgl")||c.getContext("experimental-webgl"),rt=l/n,at=.5/n,ft=524288,ot=16,ut=1/Math.tan(.25*Math.PI/2),ct="precision highp float;varying vec3 vp;varying vec2 vuv;varying vec3 vn;",dt="attribute vec",wt="uniform ",vt=ct+dt+"3 p;"+dt+"2 uv;"+dt+"3 n;"+wt+"vec4 cam;"+wt+"float l[7*"+ot+"];void main(void){gl_Position=mat4("+ut+",0,0,0,0,"+ut+"*cam.w,0,0,0,0,-1,-1,0,0,-2,0)*mat4(1,0,0,0,0,0.819,0.573,0,0,-0.573,0.819,0,0,0,0,1)*(vec4(p+cam.xyz,1.));vn=n;vuv=uv;",pt=vt+"vp=p;}",mt=ct+wt+"sampler2D s;"+wt+"float l[7*"+ot+"];void main(void){vec4 t=texture2D(s,vuv);if(t.a==0.0)discard;else{vec3 vl=vec3(0.2,0.2,0.2);for(int i=0;i<"+ot+";i++) {vec3 lp=vec3(l[i*7],l[i*7+1],l[i*7+2]);vl+=vec3(l[i*7+3],l[i*7+4],l[i*7+5])*max(dot(vn,normalize(lp-vp)),0.)*(1./(l[i*7+6]*(length(lp-vp))));}",Mt=mt+"float d=(t.r*0.3+t.g*0.6+t.b*0.11);t.rgb=mix(t.rgb,vec3(d,d,d),(vp.y*0.02-0.2));gl_FragColor=t*vec4(vl,t.a);}}",xt=mt+"gl_FragColor=t*vec4(vl,t.a);}}",yt=vt+"vp=vec3(p.x+cam.x, p.y, p.z+cam.z);}",gt=ct+"void main(void){gl_FragColor=vec4(vp.x/512.0+0.5,vp.y/"+e+".0,vp.z/512.0+1.2,1.0);}",At=0,qt=new Float32Array(8*ft),Ft=0,bt=new Float32Array(65536),kt=0,Ut=new Float32Array(7*ot),Tt=[],zt=0,Ct=0,Et=0;function It(){for(let t in lt)null!=lt[t].length&&(lt[t.match(/(^..|[A-Z]|\d.|v$)/g).join("")]=lt[t]);nt=lt.crB(),ht=Nt(yt,gt),et=Nt(pt,Mt),_t=Nt(pt,xt),window.onresize=Lt,Lt()}function Nt(t,i,s){let h=lt.crP();lt.atS(h,Ot(35633,t)),lt.atS(h,Ot(35632,i)),lt.liP(h),lt.usP(h);let e=lt.geUL(h,"cam"),n=lt.geUL(h,"l");return lt.en(2929),lt.en(3042),lt.blF(770,771),{p:h,c:e,l:n}}function Ot(t,i){let s=lt.crS(t);return lt.shS(s,i),lt.coS(s),s}function Dt(t,i,s,h,e){let n=lt.geAL(t,i);lt.enVAA(n),lt.veAP(n,s,5126,!1,4*h,4*e)}function Lt(){let t=window.innerWidth,i=window.innerHeight;c.width=it=Math.min(t,i*o),c.height=st=it/o,lt.vi(0,0,it,st)}function Yt(t){lt.biT(3553,lt.crT()),lt.teI2D(3553,0,6408,6408,5121,t),lt.teP(3553,10240,9729),lt.teP(3553,10241,9729),lt.teP(3553,10242,33071),lt.teP(3553,10243,33071)}function Bt(){let t=lt.crB();lt.biB(34962,t),lt.buD(34962,qt.subarray(0,8*At),35044),Tt.push({b:t,v:At}),At=0}function Ht(){At=0,Ft=0,kt=0,Ut.fill(1)}function Kt(){lt.clC(0,0,0,1),lt.cl(16640)}function Pt(t){lt.usP(t.p),lt.un4f(t.c,ki,Ui,Ti,o),lt.un1fv(t.l,Ut)}function Rt(t,i,s){lt.biB(34962,t),Dt(et.p,"p",3,8,0),Dt(et.p,"uv",2,8,3),Dt(et.p,"n",3,8,5),s&&lt.buD(34962,s.subarray(0,8*i),35048),lt.drA(4,0,i)}function St(){Kt(),Pt(ht),Rt(Tt[0].b,Tt[0].v);let t=new Uint8Array(4);lt.reP(ns/r*it,st-ls/f*st,1,1,6408,5121,t),zt=512*(t[0]/255-.5)-ki,Ct=t[1]/255*e,Et=512*(t[2]/255-1.2)-Ti,Kt(),Pt(et),Rt(Tt[0].b,Tt[0].v),Pt(_t),Rt(Tt[1].b,Tt[1].v),Rt(nt,At,qt),lt.deM(!1),Rt(nt,Ft,bt),lt.deM(!0)}function Vt(t,i,s,h,e,n,l,r,a,o,u,c,f){let x=f*rt+at,y=d(t,i,s,h,e,n,l,r,a);return[t,i,s,x,0,y[0],y[1],y[2],h,e,n,x+rt-at,0,y[0],y[1],y[2],l,r,a,x,1,y[0],y[1],y[2],h,e,n,x+rt-at,0,y[0],y[1],y[2],l,r,a,x,1,y[0],y[1],y[2],o,u,c,x+rt-at,1,y[0],y[1],y[2]]}function Zt(t,i,s,h,e,n,l,r,a,o,u,c,f){qt.set(Vt(t,i,s,h,e,n,l,r,a,o,u,c,f),8*At),At+=6}function $t(t,i,s,h,e,n,l,r,a,o,u,c,f){bt.set(Vt(t,i,s,h,e,n,l,r,a,o,u,c,f),8*Ft),Ft+=6}function jt(t,i,s,h,e,n,l){kt<ot&&(Ut.set([t,i,s,h,e,n,l],7*kt),kt++)}let Gt=new Float32Array(h*h),Jt=new Uint8Array(h*h);function Qt(t){m(t);let i=tt(1024),s=document.createElement("canvas"),n=s.getContext("2d");s.width=s.height=h;for(let t=0,s=0;t<h;t++)for(let e=0;e<h;e++,s++){let s=Math.max(0,8-t,t-(h-8),8-e,e-(h-8)),l=i(e/35,t/35),r=i(e/50,t/50);n.fillStyle=90*l+200*r+100*s*(l+3)>7?"#fff":"#000",n.fillRect(e,t,1,1)}n.fillStyle="#000",n.fillRect(230,193,20,30),n.globalAlpha=.2;for(let t=-2;t<2;t++)for(let i=-2;i<2;i++)n.drawImage(s,t,i);let l=n.getImageData(0,0,h,h).data,r=1/0,a=-r;for(let t=0,s=0;t<h;t++)for(let e=0;e<h;e++,s++){let n=l[4*(t*h+e)],o=8*i(e/12,t/12),u=4*i(e/30,t/30)+2*i(e/10,t/10)+i(e/5,t/5)+i(e/3,t/3),c=6*n+300*u+5*o+n*(o+5)*2.5+n*(u+1)*1.5+(255-n)*o*-1*.5;r=Math.min(r,c),a=Math.max(a,c),Jt[s]=n?255:0,Gt[t*h+e]=c}for(let t=0;t<Gt.length;t++)Gt[t]=(Gt[t]-r)/(a-r)*e;for(let t=0,i=0;t<h;t++)for(let s=0;s<h;s++,i++){let e=v(0,1),n=s*_,l=Gt[i],r=Gt[i+1],a=Gt[i+h],o=Gt[i+h+1],u=t*_;Zt(n,l,u,n+_,r,u,n,a,u+_,n+_,o,u+_,e)}let o=[0,5,1,2,1,4,h,1,h,3,h+1,0];for(let t=0;t<h*h;t++)for(let i=0;i<3;i++){let s=0;for(let h=0;h<12;h+=2)s+=qt[8*(6*(t+o[h])+o[h+1])+5+i];for(let h=0;h<12;h+=2)qt[8*(6*(t+o[h])+o[h+1])+5+i]=s/6}Bt(),Wt(2e3,4,2,2,7,255),Wt(5e3,6,.15,2,1,0),Wt(100,7,.5,3,2,255),Wt(200,7,.1,3,2,0),Bt()}function Wt(t,i,s,e,n,l){let r=X(rs[i],s,e);for(var a=0;a<t;a++){let t=8*v(0,h),i=8*v(0,h),s=w()*Math.PI*2;ti(t,i)||(r(t+6,Xt(t,i)+n,i+5,s),ii(t,i,l))}}function Xt(t,i){let s=t/_|0,e=i/_|0,n=(t-s*_)/_,l=(i-e*_)/_,r=Gt[e*h+s],a=Gt[e*h+s+1],o=Gt[(e+1)*h+s],c=Gt[(e+1)*h+s+1];return u(u(r,a,n),u(o,c,n),l)}function ti(t,i){return Jt[(i/_|0)*h+(t/_|0)]}function ii(t,i,s){Jt[(i/_|0)*h+(t/_|0)]=s}function si(t,i,s,e){let n=Math.max(Math.abs(t-s),Math.abs(i-e)),l=(s-t)/n,r=(e-i)/n;for(let s=0;s<n;s++){if(Jt[(0|i)*h+(0|t)])return!0;t+=l,i+=r}return!1}let hi=[1,[0]];class ei{constructor(t,i,s){this.x=t,this.z=i,this.vx=this.vy=this.vz=this.ax=this.ay=this.az=0,this.f=0,this.j=1,this.G=0,this.J=[],this.W=0,this.X=hi,this.tt=w(),this.it=27,this.y=Xt(this.x,this.z),this.st(s)}ht(t){(t||this.et)&&(ii(this.x,this.z,t),this.et=t)}st(t){this._t&&this._t.push(this)}nt(){}lt(t){let i=this.x-t.x,s=t.z-this.z;this.W=Math.atan2(i,s)}rt(){this.x,this.z,this.vx+=this.ax*Mi-this.vx*Math.min(this.f*Mi,1),this.vy+=this.ay*Mi-this.vy*Math.min(this.f*Mi,1),this.vz+=this.az*Mi-this.vz*Math.min(this.f*Mi,1),this.x+=this.vx*Mi,this.y+=this.vy*Mi,this.z+=this.vz*Mi}at(t,i){let s=t,h=i,e=0;for(;ti(s,h);)s=t+Math.cos(e)*e,h=i-Math.sin(e)*e,e++;this.J=I(this.x,this.z,s,h),this.J.length&&this.ht(0)}ft(){let t=this.J[0];if(1==this.J.length&&ti(t.x,t.z)&&!this.ot&&(this.at(t.x,t.z,this.ut),t=this.J[0]),!t)return this.vx=this.vz=0,0;let i=this.x-t.x,s=t.z-this.z;return this.W=Math.atan2(i,s),this.vx=-this.it*Math.sin(this.W),this.vz=1.25*this.it*Math.cos(this.W),this.rt(),Math.abs(i)+Math.abs(s)<1&&(this.J.shift(),!this.J.length)?(this.ot=0,this.ht(1),this.ct(),0):1}ct(){}dt(t,i,s,h){this.tt+=Mi+.01*w();let e=this.tt/this.X[0],n=e-(0|e),l=this.X[1][(0|e)%this.X[1].length],r=this.X[1][(e+1|0)%this.X[1].length];this.wt(this.x+t,this.y+i,this.z+s,this.W,l,r,n,h)}vt(t,i,s,h){for(var e=0;e<t;e++){var n=Vi(ci,this.x+(s||0),this.z+(h||0),i);n.vx=228*(w()-.5),n.vy=300*w(),n.vz=228*(w()-.5)}}pt(t,i){this.j-=i,this.j<=0&&this.Mt()}Mt(){this.G||(this.G=1,this._t&&this._t.splice(this._t.indexOf(this),1),Fi.push(this),this.ht(0))}}class _i extends ei{st(){this.xt=[],this.yt=X(rs[3],.3,8),this.gt=X(rs[3],.12,7),this.At=0}nt(){if(this.x=zt,this.z=Et+1,this.y=Xt(this.x,this.z),this.qt&&!Ji[Qi]){this.qt=0;let t=gi.filter((function(t){return t.Ft}));if(t.length){let i=t[this.At++%t.length];this.xt=[i],zi=i.x,Ei=i.z+350}}else Ji[Qi]&&(this.qt=1);if(Ji[hs]&&(this.xt=[],this.bt=null),this.kt&&Ji[ss]?this.bt=this.kt:!this.Ut&&Ji[ss]&&(this.Ut=1,this.Tt=this.x,this.zt=this.z,this.Ct=ns,this.Et=ls),this.Ut&&!Ji[ss]){this.Ut=0;let t=Zi(gi,this.Tt,this.zt,this.x,this.z),i=Math.abs(this.Ct-ns)+Math.abs(this.Et-ls)>4;if(t.length)this.xt=t,M(this.xt).It(),this.bt=null;else if(i)this.xt=[],this.bt=null;else if(this.xt.length)if(this.bt)this.xt[0].Nt(this.x-4,this.z,this.bt[0]),this.bt=null;else{let t=this.xt.filter((function(t){return t.Ft})),i=(Math.pow(t.length,.5)-1)/2;for(let s=0,h=-i,e=-i;s<t.length;s++,h++)t[s].at(this.x-4+8*h,this.z+8*e),h>i&&(h=-i,e++);t.length&&M(t).Ot()}}else if(!this.Ut){let t=Zi(gi,this.x,this.z,this.x,this.z)[0];t&&-1==this.xt.indexOf(t)&&this.Dt(t.x+1,t.z+3,t.x+7,t.z+9,this.gt)}if(this.bt&&!ti(this.x-4,this.z)){let i=((this.x-4)/_|0)*_,s=(this.z/_|0)*_;this.Dt(i+4,s+4,i+12,s+12,this.gt,Math.PI);for(var t=2;t<this.bt.length;t++)this.bt[t](i+8,this.y+2,s+8,0)}for(let t=0;t<this.xt.length;t++){let i=this.xt[t];i.G&&(this.xt.splice(t,1),t--),this.Dt(i.x+1,i.z+3,i.x+7,i.z+9,this.gt),Zt(i.x+1,i.y+15,i.z+4,i.x+1+6*i.j,i.y+15,i.z+4,i.x+1,i.y+14,i.z+4,i.x+1+6*i.j,i.y+14,i.z+4,8)}if(this.Ut){let t=Math.min(this.Tt,this.x),i=Math.min(this.zt,this.z),s=Math.max(this.Tt,this.x),h=Math.max(this.zt,this.z);s-t+h-i>8&&this.Dt(t,i,s,h,this.yt)}if(this.kt=null,1==this.xt.length){let t=this.xt[0].Lt;for(let i=0;i<t.length;i++){let s=t[i],h=0;ns>64+112*i&&ns<138+112*i&&ls>625&&ls<688&&(this.tt+=Mi,h=this.tt,this.kt=s);for(let t=2;t<s.length;t++)s[t](-ki-60+12*i,132-4*i,-Ti-124,h)}}}Dt(t,i,s,h,e,n){n=n||0;let l=Xt(t,i)+2,r=Xt(t,h)+2,a=Xt(s,i)+2,o=Xt(s,h)+2;e(t,l,i,n+Math.PI,0,0),e(t,r,h,n+.5*Math.PI,0,0),e(s,a,i,n+1.5*Math.PI,0,0),e(s,o,h,n+0,0,0)}}class ni extends ei{st(t){this.Yt=X(rs[2],.5,7),this.Bt=t,this.Lt=[],this._t=gi,this.Ft=1,this.Ht=0,this.ht(1),super.st()}Kt(t){let i=document.createElement("div");i.textContent="<"+this.Bt+">: "+t,a.appendChild(i),setTimeout((function(){a.removeChild(i)}),8e3),j(cs)}It(){this.Kt(this.Ft?"reporting in":"operational / uptime: "+(0|this.tt)+"s / mfree: "+v(1400,1900)+"bytes")}Ot(){this.Kt("on my way")}at(t,i){super.at(t,i),this.Pt=null}ct(){this.X=hi}nt(){this.ft()&&(this.X=[.2,[1,2,3,4]]),this.y=Xt(this.x+4,this.z+4),this.dt(4,5,4);for(var t=0;t<this.J.length;t++){let i=this.J[t],s=Xt(i.x,i.z);this.Yt(i.x+4,s+1+2*Math.sin(2*this.tt+i.x+i.z),i.z+4,2*this.tt)}jt(this.x,this.y+64,this.z+7,.3,.3,.7,.02),$t(this.x-.5,this.y+.1,this.z+1,this.x+16,this.y+1.5,this.z+5,this.x-.5,this.y+.1,this.z+10,this.x+16,this.y+1.5,this.z+14,12)}Mt(){super.Mt(),this.Ft?(this.Kt("aaaaaaaaaarrrgh"),bi--):this.Kt("MALFUNCTION"),this.vt(4,this.Rt),this.vt(4,13)}pt(t,i){this.G||(j(us),super.pt(t,i))}}class li extends ni{st(t){super.st(t),this.wt=X(rs[9],.4,4),this.Lt=[[ui,qi,X(rs[8],.3,8)],[oi,0,X(rs[1],.3,8),X(rs[0],.3,8)]]}ct(){super.ct(),this.Pt&&(Vi(this.Pt,this.x,this.z,this.St),this.et=0,this.at(this.x-8,this.z),this.Kt("all done"),this.Pt=0)}Nt(t,i,s){this.St=Zi(qi,t+8,i+8,t+8,i+8)[0],s!=ui||this.St&&!this.St.Vt?s==oi&&Oi-Di<10?this.Kt("not enough energy"):(this.at(t,i),this.J[0]&&(this.Kt("building!"),this.Pt=s)):this.Kt("I can only build this on a well")}}let ri=[.2,[0,5,5,5,5,5,5,5]];class ai extends ni{st(t){super.st(t),this.wt=X(rs[9],.4,5),this.it=31,this.Zt=0,this.$t=0,this.Ht=1,this.jt=0}nt(){if(this.Zt-=Mi,this.$t-=Mi,!this.J[0]&&this.Zt<0){let t=$i(Ai,this.x,this.z,64);t?(this.Gt=t,this.Zt=1,this.X!=ri?(this.X=ri,this.tt=0):this.tt=.1,this.lt(this.Gt)):this.X=hi}this.Zt>.7&&(this.$t<0&&(this.Gt.pt(this,.04),this.$t=.1,j(fs)),jt(this.x,this.y+15,this.z+7,1,.4,0,.005/this.$t)),super.nt()}}class fi extends ni{st(t){super.st(t),this.wt=X(rs[9],.4,6),this.it=22}nt(){if(super.nt(),!this.J[0]){let t=$i(gi,this.x,this.z,10,this);t&&t.j<1?(this.X=[.4,[0,5,5,0,0,5,5,5]],this.lt(t),t.j+=.1*Mi):this.X=hi}}}class oi extends ni{st(){super.st(),this.Jt=X(rs[1],.3,9),this.Qt=X(rs[0],.3,9),this.W=w()*Math.PI*2,this.Wt=this.W,this.Xt=this.W,this.W+=Math.PI,this.Ft=0,this.Ht=1,this.Bt="turret#0x"+v(4369,65535).toString(16),this.Zt=0,this.$t=0,Di+=7,Si()}nt(){this.Wt=this.Wt%(2*Math.PI);let t=this.Wt-this.W,i=Math.abs(t)%(2*Math.PI),s=t>=0&&t<=Math.PI||t<=-Math.PI&&t>=2*-Math.PI?-4:4;if(i>.1&&(this.Wt+=s*Mi),this.Jt(this.x+4,this.y+1,this.z+4,this.Xt),this.Qt(this.x+4,this.y+1,this.z+4,this.Wt-Math.PI),this.Zt-=Mi,this.$t-=Mi,this.Zt<0&&i<.5){let t=$i(Ai,this.x,this.z,64);t&&(this.Zt=.15,this.lt(t),t.pt(this,.01),j(fs),jt(this.x,this.y+15,this.z+7,1,.4,0,.02/this.Zt))}}Mt(){super.Mt(),this.vt(16,9),j(ds),Di-=7,Si()}}class ui extends ni{st(t){super.st(),this.wt=X(rs[8],.3,9),this.Ft=0,this.ti=t,this.ti.Vt=1,this.Bt="harvester#"+v(0,65535).toString(16),Oi+=18,Si()}nt(){this.dt(4,5,4)}Mt(){super.Mt(),j(ds),this.vt(16,9),this.ti.Vt=0,Oi-=18,Si()}}class ci extends ei{st(t){this.wt=X(rs[7],.05,t),this.f=4,this.W=w()*Math.PI*2}nt(){this.ay=-320;let t=Xt(this.x,this.z);this.y<t&&(this.y=t,this.vy=.48*-this.vy),this.tt>3&&this.Mt(),super.rt(),this.dt(4,1,4),$t(this.x+4+this.y-t,t+.1,this.z+1,this.x+9+this.y-t,t+1.5,this.z+2,this.x+4+this.y-t,t+.1,this.z+4,this.x+9+this.y-t,t+1.5,this.z+5,12)}}class di extends ei{st(t){this.wt=X(rs[10],.7,10),this.it=28,this.ii=0,this._t=Ai,this.si=0,this.hi=0,this.ei=0,super.st()}nt(){this.hi-=Mi,this.ei-=Mi,!this.ot&&this.hi<0&&(this.hi=1.5,this.ut&&!this.ut.G||(this.ut=$i(gi,this.x,this.z,8*h),this.si=0),this.ut&&this.at(this.ut.x,this.ut.z)),!this.ot&&this.ei<0&&this.ut&&x(this.x,this.z,this.ut.x,this.ut.z)<64&&(this.at(this.ut.x,this.ut.z),this.ei=2,this.ut.pt(this,.35)),this.ft()?this.X=[.15,[1,0,2,0]]:this.X=hi,this.y=Xt(this.x+4,this.z+4),this.dt(4,.5,4,this.ii?10:0),$t(this.x-2,this.y+.5,this.z-4,this.x+32,this.y+3.5,this.z+1,this.x-2,this.y+.5,this.z+14,this.x+32,this.y+3.5,this.z+18,12)}Mt(){this.vt(25,10),super.Mt()}pt(t,i){this.G||(this.si&&this.ut||(this.ut=t,this.si=1),this.j-=i,this.vt(1,10),this.j<.3&&!this.ii&&(this.ii=1,this.it=20,this.vt(10,10),j(os)),this.j<0&&(j(os),this.Mt()))}}class wi extends ei{st(){this._t=qi,super.st(),this.wt=X(rs[7],.3,8),this.Ft=0}nt(){jt(this.x,this.y+15,this.z+4,.1,.1,.9,.02),this.Vt||(this.tt+=Mi,this.tt>1&&(this.tt=0,this.vt(2,8,-4,-4)),this.dt(0,.8,0))}}class vi extends ei{st(t){this.wt=X(rs[5],4,9),this._i=0,this.ni=0}nt(){let t=Xt(this.x,this.z)+14,i=3*Math.sin(5e-4*pi);if(this.ni)super.rt(),this.y>300&&(this.Mt(),ji("THE END","You rescued "+bi+" crew"),Ci=900,zi=950,Ei=3e3);else if(this._i){if(super.rt(),this.y<t+4){this.ay=24,this.ax=-48,this.az=48,this.ni=1;for(let t=0;t<this.li.length;t++)this.li[t].G=1}}else if(Li){if(this.li=Zi(gi,this.x-64,this.z-64,this.x+64,this.z+64).filter((function(t){return t.Ft})),bi&&this.li.length==bi){this._i=1,this.ay=-5,_s=0,zi=this.x,Ci=192,Ei=this.z+230;for(let t=0;t<this.li.length;t++)this.li[t].at(this.x-16,this.z-32)}}else this.y=t+18+i;this.wt(this.x,this.y,this.z,4.1),jt(this.x-10,t+37,this.z+4,1,1,1,.05-.03*Li*Math.sin(.01*pi)),$t(this.x-34,t+.1,this.z+18,this.x+44,t+1.5,this.z-38,this.x-18+i,t+.1,this.z+34+i,this.x+52+i,t+1.5,this.z-6+i,12)}}let pi,mi,Mi=0,xi=0,yi=[],gi=[],Ai=[],qi=[],Fi=[],bi=6,ki=-668,Ui=-255,Ti=-1296,zi=619,Ci=256,Ei=1680,Ii=0,Ni=45,Oi=10,Di=0,Li=0,Yi=[[0,2,"kill it"],[0,9,"kill it!!1"],[0,1,"patch me up, doc"],[5,4,"on my way"],[0,2,"they..."],[0,3,"they killed isaacs"],[2,2,"screw the mission"],[2,3,"we have to get BACK!"],[1,2,"I saw some energy wells"],[1,8,"we can build harversters to get enough energy for a launch"],[0,0,"use wasd/arrow keys to scroll, tab to cycle your selection"]],Bi=[104,225,222,155,96,78,30,85,210,46],Hi={bowman:[li,106,162],floyd:[li,67,172],cooper:[ai,77,156],miller:[ai,74,160],peck:[ai,79,176],"dr.brown":[fi,64,174]};function Ki(){for(name in ki=-619,Ui=-600,Ti=-1980,Hi){let t=Hi[name];Vi(t[0],8*t[1],8*t[2],name)}yi[0].at(536,1328),yi[0].j=.5;let t=Vi(di,880,1296);t.at(544,1328),t.j=.7,Vi(vi,515,1370);for(let t=0;t<Bi.length;t+=2)Vi(wi,8*Bi[t],8*Bi[t+1]);Vi(_i,0,0),setTimeout(Ri,1e3),setTimeout(Pi,1e3*Ni)}function Pi(){let t,i,s,e,n=v(0,1),l=0;for(v(0,1)?(s=t=8*v(16,h-32),e=i=n*(h-1)*8):(s=t=n*(h+1)*8,e=i=8*v(16,h-32));s<0||s>8*h||e<0||e>8*h||ti(s,e);)s=t+Math.cos(l)*l,e=i-Math.sin(l)*l,l++;let r=Vi(di,t,i);r.ot=1,r.J=[{x:s,z:e}],Ni=Math.max(.95*Ni,20),setTimeout(Pi,1e3*Ni-150*Oi)}function Ri(){let t=Yi[Ii];yi[t[0]].Kt(t[2]),++Ii<Yi.length&&setTimeout(Ri,1e3*t[1]),2==Ii&&(yi[2].at(680,1272),yi[3].at(664,1320),yi[4].at(704,1336)),4==Ii&&yi[5].at(yi[0].x,yi[0].z),7==Ii&&yi[2].at(672,1280),9==Ii&&(yi[1].at(544,1352),_s=1,p.style.display="block",Si())}function Si(){pc.style.width=Oi+"%",pu.style.width=Di+"%",Oi>=99&&!Li&&(Li=1,gi[0].Kt("we're ready. get EVERYONE back to the ship!"))}function Vi(t,i,s,h){let e=new t(i,s,h);return yi.push(e),e}function Zi(t,i,s,h,e,n){let l=Math.min(i,h)-8,r=Math.max(i,h),a=Math.min(s,e)-8,o=Math.max(s,e);return t.filter((function(t){return!(t==n||t.x>r||t.x<l||t.z>o||t.z<a)}))}function $i(t,i,s,h,e){return Zi(t,i-h,s-h,i+h,s+h,e).sort((function(t,h){return x(t.x,t.z,i,s)-x(h.x,h.z,i,s)}))[0]}function ji(i,s){t.innerHTML="<h1>"+i+"</h1>"+s,t.style.display="block",t.style.color="#fff"}function Gi(t){0==bi&&ji("YOU LOST","no one made it back"),Mi=Math.min(t-(pi||t),66)/1e3,pi=t;let i=document.fullscreen&&_s?32:0;zi+=Ji[ts]||ns<i&&ns>=0?-8:Ji[is]||ns>r-i&&i?8:0,Ei+=Ji[Wi]||ls<i&&ls>=0?-8:Ji[Xi]||ls>f-i&&i?8:0,zi=Math.min(1824,Math.max(224,zi)),Ei=Math.min(2192,Math.max(556,Ei)),ki=.92*ki-.08*zi,Ui=.92*Ui-.08*Ci,Ti=.92*Ti-.08*Ei,Ht(),jt(-1024,1024,-1024,.03,.03,.03,8e-6);for(let t=0;t<yi.length;t++)yi[t].G||yi[t].nt();St(),yi=yi.filter((function(t){return-1===Fi.indexOf(t)})),Fi=[],Ji[hs]=0,requestAnimationFrame(Gi)}let Ji={37:0,38:0,39:0,40:0,32:0},Qi=32,Wi=38,Xi=40,ts=37,is=39,ss=512,hs=513,es={65:37,87:38,68:39,83:40,9:32},_s=0,ns=0,ls=0;document.onkeydown=function(t){let i=es[t.keyCode]||t.keyCode;null!=Ji[i]&&(t.preventDefault(),Ji[i]=_s)},document.onkeyup=function(t){let i=es[t.keyCode]||t.keyCode;null!=Ji[i]&&(t.preventDefault(),Ji[i]=0)},document.onmousemove=function(t){let i=c.getBoundingClientRect();ns=(t.clientX-i.x)/i.width*r,ls=(t.clientY-i.y)/i.height*f},document.onmousedown=function(t){t.preventDefault(),1==t.which&&_s&&(Ji[ss]=_s)},document.onmouseup=function(t){t.preventDefault(),1==t.which&&(Ji[ss]=0)},document.oncontextmenu=function(t){t.preventDefault(),Ji[hs]=_s};let rs,as,fs,os,us,cs,ds,ws=0;function vs(t){let i=Math.min(3e-4*t,1);i*=2-i,Ht(),jt(2048*Math.sin(4e-4*t),2048,5800*i-7e3+512*Math.sin(53e-5*t),.03*i,.03*i,.06*i,8e-6),St(),ws||requestAnimationFrame(vs)}!async function(){rs=await W("m/m.rmfc"),It(),Qt(-1233871127);let i=new Image;i.src="m/t.png",i.onload=function(){Yt(i),requestAnimationFrame(vs),document.onclick=document.ontouchend=function(){document.onclick=null,document.ontouchend=null,document.body.requestFullscreen&&document.body.requestFullscreen(),Z(),fs=V(ms,140),os=V(Ms,134),us=V(xs,144),cs=V(ps,156),ds=V(ys,114),j(S(gs),!0),ws=1,t.style.display="none",Ki(),requestAnimationFrame(Gi)}}}();let ps={A:6,q:0,F:0,O:0,D:0,h:0,k:10,U:0,T:0,L:0,Y:168,_:3,B:0,o:351,u:0,m:444,S:192,P:2,H:7355,C:130,t:3,i:36,M:0,R:0,N:0,K:0,g:0,I:0,s:0},ms={A:7,q:0,F:0,O:0,D:192,h:0,k:2,U:0,T:0,L:0,Y:192,_:0,B:28,o:269,u:0,m:444,S:255,P:0,H:272,C:25,t:5,i:29,M:0,R:47,N:0,K:0,g:0,I:0,s:0},Ms={A:8,q:0,F:0,O:1,D:160,h:3,k:8,U:0,T:0,L:1,Y:99,_:2,B:60,o:50,u:200,m:6800,S:125,P:4,H:11025,C:254,t:0,i:13,M:5,R:0,N:0,K:1,g:4,I:60,s:0},xs={A:7,q:3,F:140,O:1,D:232,h:3,k:6,U:0,T:9,L:0,Y:30,_:1,B:17,o:4611,u:1403,m:34215,S:256,P:4,H:948,C:196,t:0,i:0,M:0,R:1,N:0,K:1,g:13,I:255,s:2},ys={A:8,q:0,F:0,O:1,D:147,h:1,k:6,U:0,T:0,L:1,Y:159,_:1,B:255,o:197,u:1234,m:21759,S:232,P:2,H:1052,C:255,t:4,i:73,M:3,R:25,N:0,K:0,g:0,I:0,s:0},gs={$:6615,Z:27,V:[{A:7,q:0,F:0,O:0,D:180,h:0,k:7,U:0,T:9,L:0,Y:116,_:0,B:0,o:197,u:88,m:10614,S:45,P:0,H:11025,C:255,t:2,i:146,M:3,R:47,N:0,K:0,g:0,I:0,s:0,p:[1,1,1,1,1,1,1,1],c:[{n:[145,145,0,150,150,0,153,153,0,150,150,0,0,0,0,0,145,145,0,0,150,150,0,153,153,0,152,152,0,0,0,0]}]},{A:4,q:0,F:0,O:0,D:223,h:3,k:4,U:0,T:0,L:1,Y:240,_:0,B:0,o:100,u:10909,m:1234,S:162,P:2,H:11024,C:240,t:6,i:57,M:0,R:0,N:0,K:1,g:7,I:80,s:0,p:[0,0,0,0,1,2,3,4,1,2,3,2,0,0,0,0,1,2,3,2],c:[{n:[157,0,157,0,157,0,157,0,157,0,157,0,157,0,157,0,157,0,157,0,157,0,157,0,157,0,157,0,157,0,157,0]},{n:[162,0,162,0,162,0,162,0,162,0,162,0,162,0,162,0,162,0,162,0,162,0,162,0,162,0,162,0,162,0,162,0]},{n:[165,0,165,0,165,0,165,0,165,0,165,0,165,0,165,0,165,0,165,0,165,0,165,0,165,0,165,0,165,0,165,0]},{n:[169,0,169,0,169,0,169,0,169,0,169,0,169,0,169,0,167,0,167,0,167,0,167,0,165,0,165,0,165,0,165,0]}]},{A:7,q:0,F:0,O:0,D:183,h:2,k:8,U:0,T:18,L:0,Y:140,_:2,B:0,o:1e5,u:56363,m:1e5,S:199,P:2,H:200,C:254,t:8,i:24,M:0,R:0,N:0,K:0,g:0,I:0,s:0,p:[2,3,4,3,2,3,4,5,2,3,4,3,2,3,4,5,2,3,4,3,2,3,4,5,3,6],c:[{n:[121,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,121,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[121,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,121,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[126,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,126,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[129,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,129,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[133,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,131,0,0,0,0,0,0,0,129,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]},{A:7,q:0,F:0,O:1,D:218,h:0,k:7,U:0,T:0,L:1,Y:227,_:0,B:0,o:444,u:548,m:8772,S:93,P:2,H:1052,C:243,t:7,i:32,M:7,R:0,N:0,K:1,g:0,I:67,s:0,p:[0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1],c:[{n:[134,0,0,0,134,0,134,0,0,0,0,0,135,0,0,0,134,0,0,0,134,0,134,0,0,0,0,0,135,0,0,0]}]},{A:7,q:0,F:0,O:0,D:255,h:3,k:8,U:0,T:0,L:0,Y:255,_:1,B:45,o:140347,u:13706,m:94082,S:35,P:3,H:200,C:188,t:8,i:24,M:0,R:167,N:0,K:0,g:14,I:43,s:0,p:[0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,1],c:[{n:[133,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[138,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[141,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[133,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,143,0,0,0,0,0,0,0,141,0,0,0,0,0,0,0]}]},{A:7,q:0,F:0,O:0,D:23,h:1,k:6,U:0,T:0,L:0,Y:192,_:3,B:0,o:200,u:137,m:1776,S:192,P:4,H:2235,C:222,t:4,i:125,M:0,R:0,N:0,K:0,g:0,I:116,s:0,p:[0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,1,2,3,2,1,2,3,4],c:[{n:[157,0,0,0,0,0,157,0,160,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[162,0,0,0,0,0,162,0,164,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[165,0,0,0,0,0,167,0,164,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[157,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,167,0,0,0,0,0,0,0,165,0,0,0,164,0,0,0]}]},{A:6,q:0,F:0,O:1,D:160,h:0,k:8,U:0,T:0,L:1,Y:160,_:0,B:127,o:50,u:200,m:6800,S:55,P:4,H:11025,C:254,t:6,i:32,M:5,R:61,N:0,K:1,g:4,I:60,s:0,p:[0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1],c:[{n:[0,0,139,0,0,0,0,0,0,0,139,0,0,0,0,0,0,0,139,0,0,0,0,0,142,0,0,0,0,0,0,0]}]}],songLen:131}</script>