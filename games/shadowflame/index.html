<!doctype html><meta name=viewport content="width=device-width"><title>Shadowflame - js13kGames 2025</title><style>body,html{background-color:#181a1b;margin:0;padding:0;overflow:hidden}</style><audio id=fire><source src=fire.mp3 type=audio/mp3></audio><audio id=impact><source src=impact.mp3 type=audio/mp3></audio><audio id=pickup></audio><audio id=music loop></audio><canvas id=my_canvas></canvas><script>document.getElementById("fire"),document.getElementById("fire").volume=.5,document.getElementById("impact"),document.getElementById("impact").volume=.5;let t=document.getElementById("pickup");document.getElementById("pickup").volume=.5;let i=document.getElementById("music");document.getElementById("music").volume=.5;const h=document.getElementById("my_canvas"),e=h.getContext("2d"),s={w:"up",a:"left",s:"down",d:"right",arrowup:"up",arrowleft:"left",arrowdown:"down",arrowright:"right"," ":"space"};let a,n,r,d,l,o,f,x,m,_=[],y=0,c=0,g=[],w=[],u=0,p=0,v=!1;class E{constructor(t,i){this.x=t,this.y=i,this.width=8,this.height=8,this.collected=!1,this.frame_index=0,this.frame_timer=0,this.frame_interval=12,this.y_offset=0,this.float_speed=.02,this.max_float=2,this.float_dir=1}update(){this.collected||(this.y_offset+=this.float_speed*this.float_dir,(this.y_offset>this.max_float||this.y_offset<-this.max_float)&&(this.float_dir*=-1),this.frame_timer++,this.frame_timer>=this.frame_interval&&(this.frame_timer=0,this.frame_index++,this.frame_index>=4&&(this.frame_index=0)),n.x<this.x+this.width&&n.x+n.width>this.x&&n.y<this.y+this.height&&n.y+n.height>this.y&&(this.collected=!0,n.can_fire=!0,v=!0,t.play(),i.play(),function(){let t=setInterval(()=>{if(u<w.length){const t=w[u];g.push(new A(t.x,t.y)),u++}else clearInterval(t)},500)}()))}draw(){this.collected||e.drawImage(l,8*this.frame_index,16,8,8,this.x,this.y+this.y_offset,this.width,this.height)}}class I{constructor(t,i,h,e){this.x=t,this.y=i,this.width=h,this.height=e}update(){}draw(){e.fillStyle="rgba(0,0,0,1)",e.fillRect(this.x,this.y,this.width,this.height)}}class b{constructor(t,i,h,e,s,a){this.x=t,this.y=i,this.width=h,this.height=e,this.dx=s,this.dy=a,this.frame_index=0,this.frame_timer=0,this.frame_interval=12,this.life_span=300}update(){this.y+=this.dy,this.x+=this.dx,this.life_span--,this.frame_timer++,this.frame_timer>=this.frame_interval&&(this.frame_timer=0,this.frame_index++,this.frame_index>=4&&(this.frame_index=0))}draw(){e.save(),this.dx<0?(e.scale(-1,1),e.drawImage(l,8*this.frame_index,16,8,8,-this.x-this.width,this.y,this.width,this.height)):e.drawImage(l,8*this.frame_index,16,8,8,this.x,this.y,this.width,this.height),e.restore()}}class A{constructor(t,i){this.x=t,this.y=i,this.width=8,this.height=8,this.alive=!0,this.is_counted=!1,this.dy=0,this.is_on_ground=!0,this.speed=.1,this.jump_height=.8,this.fireballs=[],this.fire_cooldown=0,this.facing="left",this.frame_index=0,this.frame_timer=0,this.frame_interval=12,this.frame_index_y=0}update(){this.alive&&(this.is_on_ground=!1,n.x<this.x?(this.x-=this.speed,this.facing="left",this.frame_index_y=8):n.x>this.x?(this.x+=this.speed,this.facing="right",this.frame_index_y=8):this.frame_index_y=0,g.forEach(t=>{t!==this&&t.alive&&Math.abs(this.x-t.x)<this.width&&Math.abs(this.y-t.y)<this.height&&(this.x<t.x?(this.x-=.1,t.x+=.1):(this.x+=.1,t.x-=.1))}),this.x<0&&(this.x=0),this.x+this.width>x&&(this.x=x-this.width),this.is_on_ground||(this.dy+=.02),this.y+=this.dy,this.y+this.height>=f.y&&(this.y=f.y-this.height,this.dy=0,this.is_on_ground=!0),_.forEach(t=>{this.y+this.height+this.dy>=t.y&&this.y+this.height<=t.y+t.height&&this.x+this.width>t.x&&this.x<t.x+t.width&&(this.y=t.y-this.height,this.is_on_ground=!0,this.dy=0)}),this.is_on_ground&&Math.random()<.005&&(this.dy=-this.jump_height,this.is_on_ground=!1),this.frame_timer++,this.frame_timer>=this.frame_interval&&(this.frame_timer=0,this.frame_index++,this.frame_index>=4&&(this.frame_index=0)))}draw(){this.alive&&(e.save(),"left"===this.facing?(e.scale(-1,1),e.drawImage(l,8*this.frame_index,this.frame_index_y,8,8,-this.x-this.width,this.y,this.width,this.height)):e.drawImage(l,8*this.frame_index,this.frame_index_y,8,8,this.x,this.y,this.width,this.height),e.restore())}}class k{constructor(t,i){this.x=t,this.y=i,this.width=8,this.height=8,this.health=3,this.alive=!0,this.input={up:!1,left:!1,down:!1,right:!1,space:!1},this.dx=0,this.dy=0,this.is_on_ground=!1,this.max_speed=.4,this.jump_height=1.1,this.facing="right",this.frame_index=0,this.frame_timer=0,this.frame_interval=12,this.current_animation="idle",this.frame_index_y=0,this.fireballs=[],this.fire_cooldown=0,this.can_fire=!1}update(){if(this.is_on_ground=!1,this.y+this.height+this.dy>=f.y&&this.x+this.width>f.x&&this.x<f.x+f.width&&(this.y=f.y-this.height,this.is_on_ground=!0),this.is_on_ground?this.dy=0:this.dy+=.02,_.forEach(t=>{this.y+this.height+this.dy>=t.y&&this.y+this.height<=t.y+t.height&&this.x+this.width>t.x&&this.x<t.x+t.width&&(this.y=t.y-this.height,this.is_on_ground=!0,this.dy=0)}),this.y+=this.dy,this.x+=this.dx,this.x<0&&(this.x=0,this.dx=0),this.x+this.width>x&&(this.x=x-this.width,this.dx=0),this.is_on_ground&&this.input.up&&this.dy<this.max_speed&&(this.dy-=this.jump_height,this.is_on_ground=!1),this.input.left&&this.dx>-this.max_speed&&(this.dx-=this.max_speed,this.facing="left",this.current_animation="walking",this.frame_index_y=8),this.input.left||this.input.right||(this.dx=0,this.current_animation="idle",this.frame_index_y=0),this.fire_cooldown>0&&this.fire_cooldown--,this.can_fire&&this.input.space&&0===this.fire_cooldown){this.firing=!0;let t=0;0==this.dx?"left"===this.facing?t-=2*this.max_speed:t=2*this.max_speed:t=2*this.dx;const i=new Audio("fire.mp3");i.volume=.5,i.play();let h=new b(this.x,this.y,8,8,t,0);this.fireballs.push(h),this.fire_cooldown=30}this.input.right&&this.dx<this.max_speed&&(this.dx+=this.max_speed,this.facing="right",this.current_animation="walking",this.frame_index_y=8),this.frame_timer++,this.frame_timer>=this.frame_interval&&(this.frame_timer=0,this.frame_index++,this.frame_index>=4&&(this.frame_index=0)),this.fireballs.forEach(t=>{t.update()})}draw(){this.fireballs.forEach(t=>{t.draw()}),e.save(),"left"===this.facing?(e.scale(-1,1),e.drawImage(l,8*this.frame_index,this.frame_index_y,8,8,-this.x-this.width,this.y,this.width,this.height)):e.drawImage(l,8*this.frame_index,this.frame_index_y,8,8,this.x,this.y,this.width,this.height),e.restore()}}function S(){n.alive&&(n.update(),g.forEach(t=>t.update()),o&&!o.collected?o.update():o&&o.collected&&(o=null),n.fireballs.forEach((t,i)=>{g.forEach(h=>{if(h.alive&&t.x<h.x+h.width&&t.x+t.width>h.x&&t.y<h.y+h.height&&t.y+t.height>h.y){h.is_counted||(p--,h.is_counted=!0),h.alive=!1;const t=new Audio("impact.mp3");t.volume=.5,t.play(),n.fireballs.splice(i,1)}}),t.life_span<0&&n.fireballs.splice(i,1)}),g.forEach(t=>{if(t.alive&&n.x<t.x+t.width&&n.x+n.width>t.x&&n.y<t.y+t.height&&n.y+n.height>t.y){n.health--;const i=new Audio("impact.mp3");i.volume=.5,i.play(),t.alive=!1,p--,t.is_counted=!0}}),n.health<=0&&(n.alive=!1,cancelAnimationFrame(a)),y=n.x-r/2+n.width/2,c=n.y-d/2+n.height/2,y<0&&(y=0),y+r>x&&(y=x-r),c<0&&(c=0),c+d>m&&(c=m-d)),e.clearRect(0,0,h.width,h.height),e.save(),e.translate(-y,-c),e.fillStyle="rgba(52,140,49)",e.fillRect(f.x,f.y,f.width,f.height),g.forEach(t=>t.draw()),n.draw(),_.forEach(t=>t.draw()),u<w.length&&(e.strokeStyle="rgba(255, 0, 0, 0.1)",e.lineWidth=.1,w.forEach(t=>{e.strokeRect(t.x,t.y,8,8)})),o&&o.draw(),e.restore(),function(){p>0&&n.health>0&&(e.font="6px Arial",e.textAlign="start",e.fillStyle="white",e.fillText("Enemies Remaining: "+p,0,10)),e.font="6px Arial",e.textAlign="start",e.fillStyle="white",e.fillText("Health: ",0,17);for(let t=0;t<n.health;t++)e.fillStyle="red",e.fillRect(23+8*t,13,5,5);0===p?(e.fillStyle="white",e.font="8px Arial",e.textAlign="center",e.fillText("You Win!",50,10)):n.health<=0&&(e.fillStyle="white",e.font="8px Arial",e.textAlign="center",e.fillText("Game Over",50,10))}(),a=requestAnimationFrame(S)}document.addEventListener("keydown",t=>{const i=s[t.key.toLocaleLowerCase()];i&&(n.input[i]=!0)}),document.addEventListener("keyup",t=>{const i=s[t.key.toLocaleLowerCase()];i&&(n.input[i]=!1)}),function(){e.imageSmoothingEnabled=!1,e.setTransform(1,0,0,1,0,0),h.width=window.innerWidth,h.height=window.innerHeight,r=h.width/5,d=h.height/5,e.scale(5,5),e.imageSmoothingEnabled=!1,x=2*r,m=d,n=new k(r/3,d-8-40),f={x:0,y:d,width:x,height:8},_=[new I(r/2,d-16,32,8),new I(r/2+40,d-32,24,8),new I(r/2+72,d-48,16,8),new I(r/2-40,d-32,32,8),new I(r/2-72,d-48,24,8),new I(r/2,d-64,16,8),new I(r/2+120,d-16,40,8),new I(r/2+152,d-32,24,8),new I(r/2-120,d-16,40,8),new I(r/2-152,d-32,24,8),new I(r/2-120,d-56,16,8)];const t=[{x:50,y:f.y-8},{x:100,y:f.y-8},{x:200,y:f.y-8},{x:_[6].x+8,y:_[6].y-8},{x:_[8].x+8,y:_[8].y-8},{x:_[0].x+8,y:_[0].y-8},{x:_[1].x+8,y:_[1].y-8},{x:_[4].x+8,y:_[4].y-8},{x:_[5].x+8,y:_[5].y-8}];w=t.concat(t,t),p=w.length;const i=_.at(1);o=new E(i.x+4,i.y-16);let s=new Image;s.src="s.png",s.onload=function(){l=s,a=requestAnimationFrame(S)}}()</script>