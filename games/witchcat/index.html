<html><title>Witchcat - js13kGames 2025</title><head><meta name="viewport" content="width=device-width"><style>body{margin:0;padding:0;overflow:hidden;height:100%;width:100%;display:flex}#game{position:relative;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}#gbc{position:absolute;top:-5%;left:-5%;width:110%;height:110%;object-fit:cover;filter:blur(15px) brightness(50%)}</style></head><body><canvas id="gbc"></canvas><div id="game"><canvas id="gc"></canvas></div><script>var e,M;function t(e,M,t){return Math.max(M,Math.min(t,e))}let r,Y=["spring","summer","fall","winter"],n=[],o={spring:["2d2122","5f4d2e","519034","76af2b","8ec42b","b7c42b","576c87","6b94ab"],summer:["2d2122","8b4f44","c89132","e4b000","e4ce00","ffe224","576c87","6b94ab"],fall:["2d2122","802c36","c16624","dc752b","e2892c","fab770","6e5b86","9b7ba3"],winter:["2d2122","644683","7382dd","9dace0","aac4e1","c2e8f7","cfd3e1"],o:["0d1b2a","5a5a7c","73849c","3b2e72"],q:["0d1b2a","73849c","c2e8f7","3b2e72"]};const f=1,a=2,c=3,N=4,i={g:{Z:"16MD[ESB[AMDMAMANBZAMAMKYAO[QZAYO[NAMA[OAMZMCM[NAMBYNDZNA[AYDMAYEZCZAMAYCYBZAZAZMCZBZAZM[AM[ANYMYNAZNZMAPZAMAYBYPANZMBYDMAMDYANLYA",_:[2,4],u:1},plant:{Z:"16B[EPBMB[AMfBRfCfAeCMBeBeBeBeMYCMfAeMAMfRAMfNBPAMAMBOENfAMAZNCZAfAeAZE[AeBeMYBfBZBMfNBfAeAYNBOANeBeNBfAYAYANfNBeBeBYAQCfAeMAYPANBMfNAYJOC",_:[2,4,5],u:1},w:{Z:"128LLINYfddZLLINZfddYLAMHNCMFMYfddZLAMHNCMFMZfddYINBPCOCOFMfddZINBPCOCOFMYfddYGPCPCNBM[PCMeddZGPCPCNBM[PCMfddYHPBM[MBMYN`Oedd[HPBM[MBMYN`OfddZDNCMZMAMYgMAMpgdd[DNCMZMAM\\MAMdZfddZCNYOhMjMpgdd\\CNYO\\MYiMphdd[CMZnddddCM]ppgdd\\DMhdddd_DMZlddddYEMeddddaEMgdddd_BOeddddbBOYfdddd`CNeddddbCNYeddddaEMddddbEMeddddaFMddddaFMddddaNEMdddd`NEMdddd`SddddaSdddda",_:[1,6,7],h:900,m:0},ice:{Z:"64LLIN[gYe[g]eYe]fLAMHNCMFMZeYeYe[g]eYe]gINBPCOCOFMeYeYe[g]g]eYeYGPCPCNBNfPCMe]eYe]gYe[eYeZHPBM[MBMYNYg\\Oe]eYe]gYe[eYe[DNCMfMAMZfMAM[g]eYe[eYeYe]eYeYe[g[eCNYOfZMZgYM[g]g[eYg]eYeYe[g[eYCM[eYeYe[g]gYe[g[eYg]eYe]eYe[eYeDMYeYeYe[eYe[eYeYeYe[g[eYg]g]eYeYeYeYeYEMYeYe[eYe[eYeYeYe[eYe[eYg]eYe]eYeYe[eYeBOf]eYe[eYeYeYe[eYe]eYe]eYe]gYe[gYCNe]gYeYeYgYeYeYeYe]eYe]eYe]gYe[gZEM\\eYeYe[g[eYg]eYe]eYeYe[g]gYeYFMZeYeYe[g[eYgYe[gYe[gYe[gYe[gYeZNEMeYe]g[eYgYe[gYe[gYe[gYe[gYe[Sg]g[eYgYe[gYe[gYe[g]g]e",_:[1,3,6],u:1},c:{Z:"64LLLLLLLLLLLLLLLLHOLLLLLQIOLFOLLBRGQLDQLOIQHRLCSJQHM[MJQLAMZNLSCVHVCTZMKMZNEMbNDNYQYPAN_OETZMDMZT[MBOYQYRZQ[NCN_ODMYWZQZOZRYUZMBMZQ[NCTeQYR]RAOeTYMAMYUZMBOePeOeXSBNeQeOYMAOeTYMBNeMeMfMeMeXRDMeMgMeOYMBNeQeOYMAOfMfMfOBXNCMfMhRCMeMgMeOYMBNlNDXDMkQCMfMhRDMjMHTGMiPEMkQDMeReMFMeNfNeMGQJMiPEMeOfNfMEMeRfMGMfNJRHMeSfMFTeMGMfOJMfOHWEVHSHNfQFMgRFWFUFWEVFWFUFWB",_:["000",3,"ffaa87"],k:[18,4,1,4],size:[1,1.5]},tr:{Z:"32FNBRAPLDMYeN[gMYfYOAOHMYjZfYgYfYMfYMGOfYfafZhMEMfdZfZjMCMgddYMBMYfYfdZhYNYMAMYeMYi`f\\hYMBMeM[gYMf[jMfZfNAN[gNfZMgYMgMfYMeOYMYNgMgYNgYMgMgYMYNePeOgPfNfOfNYNeMZNYNfNZNeOePeMYMBMe_MeM\\NZN[NZMAMfYMeYe[MZebe[eMAMfMhM\\fYMeYe[eYfYgNeOfMfYMgMiYfMfNfMANYNeMfMgNfMfMfMeRAMfYReYOeReOYeYMBMg\\QYO\\OYeYgMAMfMYfYeZfZfZf\\fMfMBOgNYgYMfNgYMgOEMfPfTfNfMIOqXRHrMtNrMrNqNtNrDrM[qMtMsMrNqYsMrBrM[qMZrNZqMsMq\\qMrAqMZsMZrMqZqMqZOqZrMqAqMrOZsMqZqMq[qPrMCtMZrO\\Nq[rMrMqDwOqZsPZqOqGwSyD",_:[0,2,4,1],u:1,size:[2,2]},hole:{Z:"16AeBYeAZAeYBeAeMYeMZNZMeYMeAYMYTYMYAfXfZXZXPeXNeAYXYBYXYAeXNeXPZXZfXfAYMYTYMYAeMYeMZNZMeYMeAeBYeAZAeYBeA",_:[0,6],u:1},leaves:{Z:"16eYPeSf[OfNhMeMYMfNYMfMZQeMYOeMZQeMeYPZNfMgYMhOfYQfMeSfNfMeYNhMgMgYNfMYNePeYOfZMeNfSZNeMeMeYNfTf[MfYNgOeZMgYMgYMePgYNfYNfT[Ne",_:[1,2,4],u:1},b:{Z:"16LEPFPBMeZMrBM[MBMe[MrM\\MqAMfYqPrfMqBNqMYfYMqNrAMZMYhYMqYMqAMeYMjMYeMqAMfNYfYNfMqBNYqPqYNrAMqbqMqAM]eMe\\MqAMeZfNfZeMqAMhMrMhMqBPsAPrDtDsA",_:["000",2,4,1]},cat:{Z:"16IMCMJMYMAMYMHMYqeMeqMGMYkMFMYkMBOAMlMAMZeNfMeYeMeNYeMYNgYqYfNeMAOf]MAMfNZg[MBMf[jNCMnYMCMnYMCMgPgNCMfNCMeMeMCMYMeMCMYMeMB",_:["000","222","444","e54350"]},fireball:{Z:"32LLLLLLLLLLLBPLPKM\\MJMhMIMZfZMHMfZfMHMYhYMHMe\\eMHMYhYMHMe\\eMHMZfZMHMfZfMIM\\MJMhMKPLPLLLLLLLLLLLB",_:o.fall,h:100,X:3,k:[7,7,7,7]},wall:{Z:"112XqXOqXOrQqXP|M|sPxRYlYMYpeYMYplYMYkYS|M|sPxQYnMpgMpnMmYOqN|M|sMqNxNqNfYTqXOqXVqTYeYOYMqbqMqdYqNYMq^qMYOfMd\\MZqd[Md\\q[MfPYTqRsQtPYTYPfM_M]qZP]q[sQYtbM[MfOsfqMqpeqMqjNsjsNqNqYqZqZMZqZqZMZMZqZq_q]q`sPYMfNs\\Md[M_Ms`sNfMYqZqZqZrYMZqZqZu^M]MdYqZMfOr\\Md[q_Nr`rOfMYMZMqNZqZNrZMZqZq[sOqPq]q^qZMfNqMq\\Md[M_MqMq`qMqNfMYPZOqZMZqZOqZq]q]M`M^MZMfOYM\\MqdZM_NYM`MYOfMYqZMZqZqZq]MZqZqcq^qOqRqMfPYqZqRqZqQqMq^OYq^qYPfM_qcqdYqOrdZMZMfOqYQiPiWqYTYqOfYQqXRqR\\M]Rq]qZqNqMshM]MfM]MlMslsNYjYMYphYMYhYM[q\\MYhYMYvYMfMqMr\\q]qZq]q`qMr`rMqNYjMpjMjM`MjM`MfMrMq\\q]qZq]q`rMq`qMrUqXRqOYfM`MfZfM`MfMYrXXQYrVrY",_:o.o,u:1},sn:{Z:"112eqeYQYgYP\\X\\X\\RYeqeMYevlxkMYezeYMqYNYgYQ[RYlYRYlYRYgYNYqMYftosnMYfxfYMeMYetf[greZf{eZf{eZfueYMeMYm^n]MYpYMYMe||||zeMYMZidYg`MZnZNY|||||YNdd_MdZNe|||||eOdd^NdOe|||||eOdd^NdOe|||||eOdd^NdOe||||{eYOdd^NdOe||||{eMYNdd^NdOe||||{YMeNdd^NdOY||||{YMeYMdd_MdMZMe||||zYMeYNd_P_NbNYeMYe||||yeMYePdYXZeP^PeqYNYo|||yeYMqeXXRqeXeqeqeYX|||yeYMeqeZXQ\\ReqeZRZeqe",_:[1,3,5,6],u:1},s:{Z:"32LGMGMLJMYMEMYMLIMYMEMYMDQCQCNYNCNYNCNYNCNYNCMeYeMCMeYeMCNYNCNYNCMqYqMCMqYqMCQCQCQCQLLLLEMGMLJMYMEMYMLIMYMEMYMDQCQCNYNCNYNCNYNCNYNCMeYeMCMeYeMCNYNCNYNCMqYqMCMqYqMCQCQCQCQLLJ",h:1200,_:o.o},bt:{Z:"16GNLAMYeMKMYfYMJMqfqMIMqhqMFNrPrNCMYqeMqZqMeqYMAMhM\\MhNYgMqZqMgYOYqeReqYNAOrPrOCOqhqOFNqfqNIMYfYMJNZNKPF",_:o.q,X:2.5,j:.75,k:[1,1,1,1]}, se:{Z:"32DPLFNHMgMLEMeMHMZeMHQCMYeMGRCNAMgRYeMFNhPeNeZNhNeMENfNfMZeRfNfODMeMfNfMYfMCNfNfOCMfMYhYMfMCOYhYOBMfYN\\NeNBMYO\\OYMAMe[TYMBNeSYMYMAMeTYNYMBNeYRZQYOf[NYMBNe[O\\eMAMZOfZMZMBNeZOiMBNZfMfYMYNBNeYMgRCSgNDNeUEVFVC",_:o.q,h:100,X:1.3,k:[1,1,1,1]},h:{Z:"16LLLLDNCNHMZMAMZMFM\\M\\MEMaMEMaMFM_MHM]MJM[MLMYMLBMLLLLH",_:["000","f00","fff"]},dg:{Z:"16riseZeYreYeYeZqeZeYfq[e[qZeYeYeq_qYeYeYfq_q\\gq_q[eYfq_q^eqSqSrisgYereYeYgqeYe\\q[eYfqYe]q\\eYeq_q_q^eq_q]eYq_q\\gqSqS",_:["514970","7676a2","8686b4","6a648e"],u:1},cr:{Z:"16XSeZMYM[ePYNqNqMtMYNZOrMsYMYNqYNsMsNYXQYfN\\MYNf\\OsMqMq^MYMsOq^MqMrOr[XQYfYMZMZMYfNZrMrMrMqZN[qNqMrNZN[rOsNYO[qNsZO",_:o.o,u:1},l:{Z:"16QZMYQYOr[MetfOrZMqfseNrMZNqMeMreNfqZNqMeYMZNgZNrM[fMqgYMgMZMfsNZfNZMqetMZeNZNvMeYNqYMgrPfNqZfPsfMr[NqNsYeMqZMZrNrfYMZOZqNqg\\MqfZOfM\\MqfMYM",_:["0d1b2a",2,4,"3b2e72"],u:1},m:{Z:"16DSFOf[fMDMZMe^eMCMfNYNYMYeNBMZSYeMYMAMfM\\hMZNZMf]eMeYNfMeZfOZeNeZMeZMZeZeMAMeYePZeYeMCMjRBM_iMBMhOe\\MAM\\QhX]MAXO",_:o.o,h:400,X:.8,J:a,k:[1,1,1,1]},sk:{Z:"16FRIMjMGMgYhMFMeNZNeMCPeMhMeOAMfMYfNfYMeMAMfOhNfMBMgMeNeMfMBMYMfReMYMAQZNZNYMAMfMYNZNYOAMfNZNZMfMBWfMDMfOZODMgRFQH",_:o.o,h:500,X:.8,J:c,k:[1,1,1,1]},r:{Z:"16DsQqFqYiZMqDqfYgZqNDqg[tMCqjuMqBqf]tMqBqe^uMAqf_tMAqe`tMre`uMqM_vMqM^qMuMqMq\\qOsNAqMqZqTqBqWrD{A",_:[0,2,5,1],u:1},root:{Z:"16BPKMgYMBQBMg[Nf[MAMfYNYMf]NeYQeZOYN[OeZQBM[NeYOYNCMZNZN[MCMYOZOYeMDUfMDMfZPfMCMf\\OfMBMe^NfYMBM[NZMeZMCMZNAMYMZMDMZMDMZMC",_:[0,1,2],u:1},checkpoint:{Z:"16LLLLLLLLLLLLLLLLLLLLLD",_:[],u:1},trigger:{Z:"16FPJNYfYNGMe]eYMEMeYeYre[MCMqZrZreYqMAM[q^qeZNeYqYe[fYqYeNeYqeqeYfqYqYeNeYeqe]q[NYeZrZrZeYMAMqeYeYr[eqMCMeqe\\eqYMEMYfreZMGN\\NJPLJ",_:[...o.o],h:900},orb:{Z:"32LDfDhDfAfAlAfAgAlAgAhYPYhBhYPYhCfqM\\MqfDfqMq[MqfCfqMZfZMqfBfqMrYeZMqfBeYM[fsMYeBeYMqf]MYeBeMZeZrerMeAfMqgqYfZMfAeMsYrgYMeAfMresfrMfAeMqftfYMeAfMYyMfAeMqfs\\MeAfMZet[MfAeYMvZMYeBeYM[qfZMYeBfqMZqerMqfBfqMsfYMqfCfqMYsMqfDfqMsYMqfChYPYhBhYPYhBfAlAfAgAlAgLDfDhDf",_:[0,2,5,1],h:340},sg:{Z:"16AXNAMYpYNqdqXRqMYlYMqNqMeMYeMeOeMqNYMkMfMYNYMePYeNeMeNYMYlYMYXRq[j[qMAXNGMrMKqMrMqIrMZMrIvE",_:o.o},msh:{Z:"16ERHNhYqNEMqi[qMCM[g^MAMqafZNh]hqNi\\hqNj\\frMAMYh]rMCMq[vMENvNFqTqEsNrNsDtMZMtEzHvE",_:[0,2,5,1],u:1},sf:{Z:"16GYOIPqeMGOqMeZNFNYeqMYMeMFMqMYeqMeZMEMeqMYMeZNEMfqMeZMeMEMeYeqMYMeYMEMeqeqNeZMDNgqMeYMYNBMeMYgMe[MeMAMqeMZeMeZMYeMAMqfSYfMAeMseYNYgMYBeQBPYLF",_:o.o},flower:{Z:"16LJOINAM[MANDMZM]MZMCMZNYMYNZMBOZQZNBMZNqYqYqNZMAMZMqYqYqYqMZMANYNqYqYqNYNBNYSYNBQ]QAMgSgMAMfMgMgMfMBNgOgNDQAQLG",_:["000",5,2,6]}},s=16,q=100,l=63,Z=27,d=15,_=["tr","b","wall","cr","r","sn","root","sg","msh","sf","flower"],A=[10,7,5,7],u={fall:{hole:"leaves"},winter:{w:"ice"},summer:{cr:"l"},spring:{sf:"flower"}},g={sn:"winter",root:"summer",msh:"fall"};e=function (){var e,M,t,r,Y,n=e=>Math.sin(6.283184*e),o=e=>.003959503758*2**((e-128)/12),f=(e,M,t)=>{var r,Y,n,f,c,N,i=a[e.i[0]],s=e.i[1],q=e.i[3]/32,l=a[e.i[4]],Z=e.i[5],d=e.i[8]/32,_=e.i[9],A=e.i[10]*e.i[10]*4,u=e.i[11]*e.i[11]*4,g=e.i[12]*e.i[12]*4,O=1/g,L=-e.i[13]/16,h=e.i[14],C=t*2**(2-e.i[15]),E=new Int32Array(A+u+g),B=0,P=0;for(r=0,Y=0;r<A+u+g;r++,Y++)Y>=0&&(Y-=C,c=o(M+(15&(h=h>>8|(255&h)<<4))+e.i[2]-128),N=o(M+(15&h)+e.i[6]-128)*(1+8e-4*e.i[7])),n=1,r<A?n=r/A:r>=A+u&&(n=(1-(n=(r-A-u)*O))*3**(L*n)),f=i(B+=c*n**q)*s,f+=l(P+=N*n**d)*Z,_&&(f+=(2*Math.random()-1)*_),E[r]=80*f*n|0;return E},a=[n,e=>e%1<.5?1:-1,e=>e%1*2-1,e=>{var M=e%1*4;return M<2?M-1:3-M}];this.init=n=>{e=n,t=0,r=n.rowLen*n.patternLen*((M=n.endPattern)+1)*2,Y=new Int32Array(r)},this.generate=()=>{var o,c,N,i,s,q,l,Z,d,_,A,u,g,O,L,h,C,E,B,P,S,y,p,x,w,R,T,m,D,b=new Int32Array(r),Q=e.songData[t],I=e.rowLen,H=e.patternLen,k=0,F=0,X=0,v=[];for(N=0;N<=M;++N)for(l=Q.p[N],i=0;i<H;++i){for((L=l?Q.c[l-1].f[i]:0)&&(Q.i[L-1]=Q.c[l-1].f[i+H]||0,L<17&&(v=[])),h=a[Q.i[16]],C=Q.i[17]/512,E=2**(Q.i[18]-9)/I,B=Q.i[19],P=Q.i[20],S=135.82764118168*Q.i[21]/44100,y=1-Q.i[22]/255,p=1e-5*Q.i[23],x=Q.i[24]/32,w=Q.i[25]/512,R=6.283184*2**(Q.i[26]-9)/I,T=Q.i[27]/255,m=Q.i[28]*I&-2,A=(N*H+i)*I,s=0;s<4;++s)if(q=l?Q.c[l-1].n[i+s*H]:0)for(v[q]||(v[q]=f(Q,q,I)),D=v[q],c=0,o=2*A;c<D.length;c++,o+=2)b[o]+=D[c];for(c=0;c<I;c++)(_=b[Z=2*(A+c)])||X?(u=S,B&&(u*=h(E*Z)*C+.5),F+=(u=1.5*Math.sin(u))*(g=y*(_-F)-(k+=u*F)),_=3==P?F:1==P?g:k,p&&(_=(_*=p)<1?_>-1?n(.25*_):-1:1,_/=p),X=(_*=x)*_>1e-5,O=_*(1-(d=Math.sin(R*Z)*w+.5)),_*=d):O=0,Z>=m&&(O+=b[Z-m+1]*T,_+=b[Z-m]*T),b[Z]=0|O,b[Z+1]=0|_,Y[Z]+=0|O,Y[Z+1]+=0|_}return ++t/e.numChannels},this.createWave=()=>{var e,M,t,n=44+2*r-8,o=n-36,f=new Uint8Array(44+2*r);for(f.set([82,73,70,70,255&n,n>>8&255,n>>16&255,n>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,255&o,o>>8&255,o>>16&255,o>>24&255]),e=0,M=44;e<r;++e)f[M++]=255&(t=(t=Y[e])<-32767?-32767:t>32767?32767:t),f[M++]=t>>8&255;return f}};const O={A:"01101001111110011001",B:"110101110101110",C:"011100100100011",D:"110101101101110",E:"111100111100111",F:"111100111100100",G:"01111000101110010110",H:"10011001111110011001",I:"111010010010111",L:"100100100100111",M:"1000111011101011000110001",N:"10011101101110011001",O:"01101001100110010110",P:"11101001111010001000",R:"11101001111010101001",S:"01111000011000011110",T:"111010010010010",U:"10011001100110010110",V:"1000110001010100101000100",W:"1010110101101010101001010",Y:"10011001111100011110"," ":"000000000000000",",":"000000000100100","!":"010010010000010","^":"0010001110111110010000100",v:"0010000100111110111000100","<":"0010001100111110110000100",">":"0010000110111110011000100"};function L(e){let M=0;for(let t=0;t<e.K.length;t++){const r=e.K.charAt(t),Y=O[r],n=Y.length/5;for(let r=0;r<5;r++)for(let o=0;o<n;o++)"1"===Y[r*n+o]&&e.ctx.rect((e.$+(o+M+t))*p*e.ee,(e.Me+r)*p*e.ee,p*e.ee,p*e.ee);M+=n}}function h(e){const M=performance.now()-$,t=e.K.slice(0,.05*M|0).split("|");B.beginPath();for(let M=0;M<t.length;M++)L({ctx:B,$:e.$,Me:e.Me+8*M,K:t[M],ee:e.ee});B.fillStyle=e.te,B.fill()}function C(e){K=e,AM("text"),$=performance.now()}const E=document.getElementById("gc"),B=E.getContext("2d"),P=document.getElementById("gbc"),S=P.getContext("2d"),y={};let p=1,x=[];const w=1e3/60;let R,T,m,D=0,b=0,Q={cX:784,cY:336,cS:"summer",cML:3,aS:n,cCL:[]},I=0,H=0,k=0;const F=1500,X={};let v=0,U=0;let G=0,W=0,j=0,J=0,V=0,z=0,K="",$=0,ee={};function Me(e){return 1&e?2^e:6^e}let te=document.createElement("audio"),re=new e,Ye=1,ne=0,oe=0,fe=0,ae=0,ce=1e3,Ne=null;function ie(e,M){ce=e||1e3,Ne=M||null,oe=1,fe=1,ae=performance.now()}let  se=(()=>{const e=[];let M=0;for(const [t,r]of Object.entries({dg:"206,8,48,7,37,8,48,7,37,8,48,7,37,8,48,7,37,8,48,7,,4,32,8,51,,4,,33,,,,3,,4,8,42,,4,,33,19,39,10,,,30,14,2,3,39,2,,7,,,30,14,3,,51,,11,,18,2,10,2,3,,51,,11,,18,16,53,,5,,5,,18,15,52,15,17,16,90,2,21,,71,5,64,19,12,11,57,20,98,2,198,2,98,2,1431,2,97,3,,,94,6,96,2,98,2,49,2,47,2,49,2,98,2,47,6,4,4,25,5,7,6,9,6,33,2,32,,3,,12,,9,6,67,,3,,12,,9,2,71,,2,11,3,,2,9,24,,2,,10,3,5,,37,,3,,2,9,24,,3,2,7,3,6,,37,,3,,34,2,3,2,7,8,,,29,2,6,,3,,34,2,3,2,7,5,32,4,5,2,3,,34,3,2,3,43,,,8,4,,13,3,20,,14,,33,,13,,13,3,8,,27,,32,,13,,14,,9,,27,3,30,15,14,,6,7,24,3,56,7,3,7,26,,56,7,3,7,26,,56,7,3,7,26,3,54,7",wall:"0,43,18,40,5,,7,,23,,22,,7,,,,,,,,2,,6,,,,11,2,5,,7,,23,,22,,7,,,,,,,,2,,6,,13,2,5,,7,,23,,22,,7,,,,,,,,2,2,5,,13,2,2,,2,,7,,23,,22,,7,,,,,,,,3,4,,2,2,2,9,2,2,,2,,7,,23,,22,,7,,15,,2,2,9,2,2,,2,,7,,23,,22,,7,,15,,3,,9,2,2,,2,4,,4,8,,5,10,22,4,,4,,2,,3,8,,3,,9,2,2,,2,,16,,5,,8,,22,,10,,12,,3,,9,2,2,,2,,16,,5,,8,3,18,3,10,,11,2,3,,9,2,2,,2,,7,2,2,2,3,,5,,8,3,18,3,10,,11,,4,,9,2,2,,2,10,2,3,,2,5,,34,9,5,3,3,,4,,9,2,2,,16,,2,7,34,,,,,,,3,,5,,5,,4,9,2,2,,16,,43,,,,,,,,18,,9,2,2,,15,2,17,3,18,3,2,,,,,,,,18,,9,2,2,7,2,8,18,3,18,3,2,,,,,,,3,,16,9,2,8,4,25,,22,,2,,,,,,,,28,2,37,,22,,37,2,37,,22,,37,23,2,15,22,29,2,8,20,2,2,2,40,,21,2,2,2,26,2,2,2,40,,21,2,2,2,72,,99,,94,3,,2,94,2,98,2,98,2,98,2,536,,59,5,35,,59,5,35,,8,2,,3,45,5,35,3,11,,85,3,11,3,83,3,97,3,19,2,2,2,45,2,2,2,7,5,9,3,19,2,2,2,45,2,2,2,7,,3,,9,24,2,14,22,13,2,10,3,12,37,,22,,5,,12,,18,2,37,,22,,5,,12,,19,,23,4,3,6,,,22,,2,2,,12,,4,16,,16,3,2,3,2,,8,,,,22,,2,,13,,12,2,3,,3,,6,,,5,3,,6,,2,,8,,,4,,19,2,,13,,12,2,3,,3,,6,,5,2,,2,6,,2,,8,,,,22,,2,6,,4,3,,12,2,3,,3,,6,,5,,10,,2,,8,,,,22,,2,,,,2,,,,6,,,4,8,,3,,3,3,,4,5,,10,,2,,8,,,,22,,2,,4,3,6,,2,,9,2,3,,3,,12,,13,,8,,,,22,,2,,13,,2,,4,4,,2,3,,2,2,12,,13,4,,2,4,,22,,2,,,,8,4,,2,,4,11,3,12,3,,4,,,10,3,2,,22,,2,,,10,,2,,,17,,,4,,4,26,,2,,13,3,,6,2,,15,,9,4,,4,,,7,,26,,2,,13,3,,6,2,,15,,9,,7,,,,7,,26,,2,,12,2,8,,2,5,2,8,,,9,,7,,,,7,,17,8,,,2,,22,,6,4,6,3,9,,7,,,,7,8,2,9,6,,4,,22,,28,,7,,,,7,,6,,2,,14,,4,,22,,28,,7,,,9,5,2,2,2,13,12,4,50,15,2,2,2,24,6",w:"220,3,16,4,77,3,16,4,72,8,16,4,72,8,16,4,72,7,17,4,74,5,19,2,98,2,89,6,3,2,89,6,3,2,89,2,2,2,3,2,89,2,2,7,89,2,2,7,89,6,3,2,89,6,94,6,94,6,,4,89,6,,4,96,3,97,3,84,15,30,17,38,15,30,17,36,17,34,6,43,9,369,4,96,4,49,4,43,2,51,4,43,2,50,5,92,10,90,10,90,2,39,3,97,3,97,3,97,7,88,12,88,12,91,9,91,9,310,3,97,3,8,2,6,3,89,2,6,3,89,2,401,2,98,2,98,2,14,7,77,2,14,7,93,3,,3,270,2,98,2,98,2",tr:"43,,,,,,,,,,,,,,,,,,155,,,,5,,10,,,,7,,7,,4,,,,16,,18,,28,,10,,19,,40,,29,,7,,8,,9,,3,,,,73,,,,19,,40,,18,,9,,17,,9,,5,,35,,48,,7,,5,,37,,21,,6,,17,,2,,3,,2,,2,,69,,3,,13,,7,,4,,22,,14,,47,,9,,28,,4,,108,,97,,98,,,,14,,17,,14,,,,,,3,,,,,,,,72,,10,,255,,261,,45,,11,,76,,66,,33,,,,14,,6,,51,,,,24,,98,,20,,53,,26,,2,,,,,,,,,,,,,,,,61,,,,,,,,,,,,,,4,,,,2,,17,,3,,,,5,,,,,,,,,,40,,,,5,,,,9,,26,,,,11,,18,,20,,,,13,,,,,,17,,6,,13,,,,5,,,,3,,11,,,,,,19,,2,,6,,42,,3,,,,2,,19,,28,,10,,6,,7,,4,,,,2,,4,,47,,9,,71,,5,,10,,7,,3,,17,,,,,,7,,,,9,,36,,,,3,,,,,,23,,10,,,,,,5,,,,,,14,,17,,5,,10,,11,,17,,22,,22,,,,11,,10,,12,,,,,,7,,,,48,,5,,5,,152,,110,,87,,12,,27,,80,,87,,,,,,,,3,,3,,,,,,,,94,,,,,,100,,35,,,,57,,,,38,,,,98,,5,,95,,5,,16,,53,,20,,12,,34,,5,,7,,39,,58,,13,,3,,20,,46,,,,3,,,,6,,89,,61,,98,,88,,11,,5,,,,98,,80,,45,,,,,,149,,28,,2,,77,,,,11,,2,,72,,20,",r:"201,,17,,81,,99,,74,2,324,,99,,99,,22,,45,,109,,226,2,2,,5,,6,3,73,,99,,111,,48,,63,2,34,,304,2,98,2,661,,,2,4,,189,2,109,,201,,322,,237,,99,2,45,,18,2,525,,98,2,23,,63,2,108,,,,72,,15,,8,,203,,28,,69,2,28,,10,,9,,,2,95,2,88,,12,2,18,,52,,114,,29,,8,2,59,,8,,101,",bt:"270,,,,,,11,,908,,123,,45,,,,,,118,,1661,,190,,1423,,225,",hole:"724,,99,,99,,3,,95,,3,,73,,21,5,572,,99,,718,2,98,2,98,2,72,,18,,80,,18,3,99,3,65,,,3,16,,79,2,16,3,656,2,98,2,98,2,98,2,250,,3,,275,2,68,,12,2,2,2,11,,69,,16,2,11,2,17,,57,,23,,17,,49,,11,,19,,67,,30,2,67,,73,2,6,3,89,,99,2,12,,86,,98,2,126,3,5,2,71,,,4,94,3",s:"203,,84,2,13,,84,2,12,,101,2,80,2,98,2,313,,288,4,409,,99,,2904,,99,,258,,99,2,98,2,,2,439,2",b:"684,,294,,98,2,242,,100,2,168,2,113,,822,2,98,2,355,,99,,80,2,17,,81,,1251,2,13,,99,,99,,497,",sn:"445,,99,3,2,3,93,6,96,2,98,2,57,3,52,3,42,3,52,2,153,,98,2,97,3,80,,96,4,21,2,71,3,22,4,70,3,23,2,69,4,29,2,66,2,30,2,748,,99,3,98,2,86,,11,2,39,4,42,2,11,2,30,2,7,,46,,12,3,26,4,67,3,25,3,,2,68,,54,2,54,,43,2,53,3,43,,46,,5,2,91,2,5,2,91,2,44,,53,2,43,2,53,2,43,2,187,2,4,2,92,,503,2,13,3,83,,12,3,254,3,73,,24,2,23,4,46,,24,2,24,3,65,2,3,2,92,4,2,2,98,",root:"370,,,,,,95,,105,3,99,,368,5,99,2,106,2,98,3,30,,85,,11,3,172,,99,,98,7,935,2,98,2,99,,205,,98,2,69,2,27,,70,2,27,,116,2,99,,244,4,95,2,2,,99,3,228,2,72,2,99,,129,3,98,,99,,415,,55,3,39,3,56,2,99,,199,,99,,88,3,7,",m:"693,,83,,12,,93,,1779,,61,,207,,256,,88,,10,,101,,50,,23,,86,,211,,1160,,180,,199,",cr:"483,,99,,189,,99,,699,,99,,790,,99,,1045,,99,,1031,,99,,160,,99,,86,,91,,7,,30,,60,,38,,33,,99,,99,",checkpoint:"810,,54,,377,,99,,118,2,758,2,66,2,528,2,1301,2,149,2,1318,",sk:"2367,2,19,,182,,407,,82,,105,,465,,,,,,172,,300,,22,,,,263,,3,,300,,195,,15,,508,,57,,42,,345,2",trigger:"2249,,1498,,133,,36,,467,,127,,318,,407,,13,,467,,61,,55,,15,", se:"3027,,1440,,1096,",msh:"1717,,99,,372,2,623,3,98,2,755,3,100,,145,2,99,2,384,2,58,4,9,,496,,204,,63,,142,2,53,,,,32,,69,,29,,99,,297,2",sf:"1449,2,98,2,1433,4,16,3,37,2,38,,59,2,169,3,98,2,99,,223,2,98,2,171,2,98,2,131,2,98,2,293,,563,2,17,,81,,17,,21,2,76,,100,,21,2,76,,20,2,106,"})){const Y=r.split(",").map(((e,M)=>+e||(M?1:0)));let n=0;for(const r of Y){for(let Y=0;Y<r;Y++)n&&e.push({tile:t,x:M%q,y:M/q|0,J:i[t]?.J||null}),M++;n=!n}M=0}return e})();function qe(e,M,t,r){ se.push({tile:"orb",x:e,y:M,season:t,text:r})}function le(e,M,t){ se.push({tile:"sg",x:e,y:M,text:t})}le(34,24,"BURN BUSHES AND ENEMIES|WITH FIREBALLS"),le(21,23,"^ WINTER TEMPLE|v SPRING TEMPLE"),le(45,11,"< WINTER TEMPLE|> SUMMER TEMPLE"),le(80,35,"STAND ON STONE|AND PRESS ACTION"),le(74,25,"v AUTUMN TEMPLE|> SUMMER TEMPLE"),le(73,37,"< SPRING TEMPLE|v AUTUMN TEMPLE"),le(25,36,"v SPRING TEMPLE|^ WINTER TEMPLE");let Ze=0;function de(e){const M=(e=>{const M=[],t=+e.match(/^\d+/)[0];e=e.replace(/^\d+/,"");for(let t=0;t<e.length;++t){const r=e[t].charCodeAt(0)-65,Y=r/12|0;M.push(...Array(r%12+1).fill(Y))}return {pixels:M,imageWidth:t}})(i[e].Z),t=((e,M)=>{const t=[];for(let r=0;r<e.length;r+=M)t.push(e.slice(r,r+M));return t})(M.pixels,M.imageWidth);return ((e,M,t)=>{const r=[],Y=e.length,n=e[0].length;for(let o=0;o<Y;o+=t)for(let Y=0;Y<n;Y+=M){const n=[];for(let r=0;r<t;r++)n.push(e[o+r].slice(Y,Y+M));r.push(n)}return r})(t,16*i[e].size?.[0]||16,16*i[e].size?.[1]||16)}function _e(e,M,t){const r=i[e].k||[0,0,0,0];return {l:M+r[3],r:M+s-r[1],t:t+r[0],b:t+s-r[2]+("c"===e?s/2:0)}}function Ae(e){const M=t(e.l/s|0,0,q-1),r=t((e.r-1)/s|0,0,q-1),Y=t(e.t/s|0,0,l-1),n=t((e.b-1)/s|0,0,l-1),o=[];for(let e=Y;e<=n;e++)for(let t=M;t<=r;t++)o.push({x:t,y:e});return o}function ue(e,M){return !(e.r<=M.l||e.l>=M.r||e.b<=M.t||e.t>=M.b)}function ge(e,M,t){if(M===t)return 1;const Y=X[r],n=t>M?1:-1;for(let r=M+n;r!==t;r+=n)if(_.includes(Y[e][r]))return 0;return 1}function Oe(e,M,t){if(M===t)return 1;const Y=X[r],n=t>M?1:-1;for(let r=M+n;r!==t;r+=n)if(_.includes(Y[r][e]))return 0;return 1}function Le(){const e=y[r];e&&(S.clearRect(0,0,P.width,P.height),S.drawImage(e,0,0,P.width,P.height))}function he(e=0,M=B){const {offsetX:t,offsetY:r}=Pe(),Y=(0|t)-1,n=(0|r)-1,o=Y+Z+2,q=n+d+2; se.forEach((t=>{if(!e&&(t.x<Y||t.x>o||t.y<n||t.y>q))return ;let r,l=Ee(t.tile);if(!l)return ;const Z=i[l];if(e&&!Z.u||!e&&Z.u)return ;if("cat"!==l||tM||(t.re=Qe/s<t.x),["w","ice"].includes(l)){const {type:e,Ye:M}=(e=>{let M=e.x,t=e.y;const r=(M,t)=>!!we(M,t,[e.tile]),Y=r(M,t-1),n=r(M,t+1),o=r(M-1,t),i=r(M+1,t),s=r(M-1,t-1),q=r(M+1,t-1),l=r(M-1,t+1),Z=r(M+1,t+1),d={nw:s,ne:q,sw:l, se:Z,n:Y,s:n,e:i,w:o};if(Object.values(d).every(Boolean))return {type:3,Ye:f};const _=[{key:"nw",Ye:f},{key:"ne",Ye:a},{key:"se",Ye:c},{key:"sw",Ye:N}].filter((e=>!d[e.key])),A=[Y,n,i,o].filter(Boolean).length;if(1===_.length&&4===A){const {Ye:e}=_[0];return {type:2,Ye:e}}const u=[{key:"n",Ye:f},{key:"e",Ye:a},{key:"s",Ye:c},{key:"w",Ye:N}],g=u.filter((e=>!d[e.key])),O=u.filter((e=>d[e.key]));if(1===g.length&&3===O.length){const {Ye:e}=g[0];return {type:1,Ye:e}}return Y&&o&&s?{type:0,Ye:c}:Y&&i&&q?{type:0,Ye:N}:n&&i&&Z?{type:0,Ye:f}:n&&o&&l?{type:0,Ye:a}:{type:3,Ye:0}})(t);t.oe=e+4*(t.m||0),t.Ye=M}if(["wall","sn"].includes(t.tile)){const {type:e,Ye:r}=(e=>{const {x:M,y:t,tile:r}=e,Y=(e,M)=>!!we(e,M,[r]),n=Y(M,t-1)?1:0,o=Y(M+1,t)?1:0,i=Y(M,t+1)?1:0,s=Y(M-1,t)?1:0,q=n+o+i+s;if(1===q)return {type:0,Ye:o?f:i?a:s?c:N};if(o&&s&&!n&&!i)return {type:1,Ye:f};if(n&&i&&!o&&!s)return {type:1,Ye:a};if(3===q)return {type:2,Ye:n?o?i?N:c:a:f};if(2===q){if(o&&i)return {type:3,Ye:N};if(i&&s)return {type:3,Ye:f};if(s&&n)return {type:3,Ye:a};if(n&&o)return {type:3,Ye:c}}return {type:1,Ye:f}})(t);t.oe=e,t.Ye=r;const Y=t.y+1;if(!we(t.x,Y)){const e=we(t.x-1,t.y)?.tile===t.tile,r=we(t.x+1,t.y)?.tile===t.tile;let n=5,o=0;!e&&r?n=4:e&&!r?(n=4,o=1):e||r||(n=6),Be(Z.fe[n],Ce(Z._),t.x,Y,{Ye:f,re:o,context:M})}}const d=Z.fe[t.oe||0];r=Ce(i[l]._),"orb"===t.tile&&(r=Ce(i[l]._,t.season)),Be(d,r,t.x,t.y,{Ye:t.Ye||f,ee:t.scale||1,context:M,re:t.re})}))}function Ce(e,M=r){return e.map((e=>"#"+(o[M][e]||e)))}function Ee(e,M=r){return g[e]&&g[e]!==M?"":u[M]&&u[M][e]||e}function Be(e,M,t,r,Y={}){const {Ye:n=f,ee:o=e.ee||1,context:a=B,re:c=0,alpha:N=1}=Y;a.save();const i=s/2;a.translate(Math.floor((t+.5)*s),Math.floor((r+.5)*s));let q=1;c&&(q=-1),a.scale(o*q,o),a.rotate((n-1)*Math.PI/2),a.translate(-i,-i),a.globalAlpha=N;for(let t=0;t<e.length;t++)for(let r=0;r<e[t].length;r++){const Y=e[t][r];Y>0&&(a.fillStyle=M[Y-1],a.fillRect(r,t,1,1))}a.restore()}function Pe(){const e=Z*s,M=d*s;let r=Qe-e/2,Y=Ie-M/2;const n=l*s-M;return r=t(r,0,q*s-e),Y=t(Y,0,n),{offsetX:r/s,offsetY:Y/s}}(()=>{for(const e in i)i[e].fe=de(e)})();const Se=[],ye=[];let pe=[];const xe=e=>e/s|0;function we(e,M,t=[]){for(let r= se.length-1;r>=0;--r){const Y= se[r];if(Y.x===e&&Y.y===M&&(0===t.length||t.includes(Y.tile)))return Y}return null}function Re(e,M,t){ se= se.filter((r=>r.tile!==e||r.x!==M||r.y!==t))}function Te(e){return {dx:(e===a)-(e===N),dy:(e===c)-(e===f)}}let me=0;function De(e){switch(e){case "ArrowUp":case "z":case "w":return "up";case "ArrowDown":case "s":return "down";case "ArrowLeft":case "q":case "a":return "left";case "ArrowRight":case "d":return "right";case "Enter":case " ":return "action";default:return e}}let be,Qe,Ie,He=1,ke=0,Fe=0,Xe=1;function ve(e,M,t,Y=1){const n=X[r],o=_e(e,M,t);for(const {x:e,y:M}of Ae(o)){if(e<0||M<0||e>=q||M>=l)return 0;const t=n[M][e];if(_.includes(t))return {x:e,y:M,tile:t}}if(!Y)return null;const f={l:M+A[3],r:M+s-A[1],t:t+A[0]+.8*s,b:t+s-A[2]+.8*s};for(const {x:e,y:r}of Ae(f)){if(e<0||r<0||e>=q||r>=l)continue;const Y=n[r][e];if("hole"===Y||"w"===Y)return je(),a=M,c=t,I=1,v=1,AM("fall"),U=performance.now(),G=Qe,W=Ie,V=Math.sign(a-Qe),z=Math.sign(c-Ie),j=Qe+V*s*.5,J=Ie+z*s*.5,z>0&&(J+=.2*s),{x:e,y:r,tile:Y}}var a,c;return null}function Ue(e){be=e,Fe=Ge(be)}function Ge(e){switch(e){case f:return 1;case a:case N:return 2;case c:return 0}}let We=0;function je(){H||(AM("damage"),--m,H=1,k=performance.now(),setTimeout((()=>{H=0}),F),m<=0&&(We=1))}let Je=0;function Ve(e){if( se.forEach((M=>{i[M.tile].h&&(M.elapsed=(M.elapsed||0)+e,M.elapsed>=i[M.tile].h&&("trigger"===M.tile?n.length>1&&(Je=(Je+1)%n.length,i[M.tile]._[3]=o[n[Je]][4]):i[M.tile].fe.length<2&&(M.re=!M.re),M.oe=(M.oe+1)%i[M.tile].fe.length||0,M.m=((M.m||0)+1)%2,M.elapsed=0));let t=M.J;if(t){let {dx:r,dy:Y}=Te(t),n=i[M.tile][M.isReturning?"j":"X"]||1,o=M.x+r*n/e,f=M.y+Y*n/e;M.x=o,M.y=f;let a=ve(M.tile,o*s,f*s,0);if(a&&("fireball"===M.tile&&(M.J=null,Re("fireball",M.x,M.y),["b","flower"].includes(a.tile)&&(Re("flower"==a.tile?"sf":a.tile,a.x,a.y),Object.keys(X).forEach((e=>{X[e][a.y][a.x]=null})))),"se"===M.tile&&(M.J=null,M.x=Math.round(M.x),M.y=Math.round(M.y),_M. se.pause()),"bt"===M.tile&&(M.isReturning?(M.isReturning=0,M.J=null):(M.isReturning=1,_M. se.pause(),M.J=Me(M.J)),M.x=Math.round(M.x),M.y=Math.round(M.y)),["sk","m"].includes(M.tile)&&(M.J=Me(M.J),M.x=Math.round(M.x),M.y=Math.round(M.y))),"fireball"===M.tile){const e=_e("fireball",M.x*s,M.y*s);for(let t=ye.length-1;t>=0;--t){const r=ye[t];if(ue(e,_e(r.tile,r.x*s,r.y*s))){Re(r.tile,r.x,r.y),ye.splice(t,1),Re("fireball",M.x,M.y);break}}}}})),!tM&&!I&&!oe&&!We&&x.length>0&&!K){let M=0,t=0;if(x.length>0){const e=x.slice(-2).reverse();for(const r of e)switch(r){case "left":0===M&&(M=-1);break;case "right":0===M&&(M=1);break;case "up":0===t&&(t=-1);break;case "down":0===t&&(t=1)}}if(0!==M||0!==t){const r=Qe+1*M,Y=Ie+1*t;let o=0,i=0;Qe!==r&&(ve("c",r,Ie)?I||(ve("c",r,Ie+5)?ve("c",r,Ie-5)||(Ie-=1,i=1):(Ie+=1,i=1)):(Qe=r,o=1)),i||(ve("c",Qe,Y)?o||I||(ve("c",Qe+5,Y)?ve("c",Qe-5,Y)||(Qe-=1):Qe+=1):Ie=Y);for(let e=x.length-1;e>=0;e--)switch(x[e]){case "left":Ue(N),e=-1;break;case "right":Ue(a),e=-1;break;case "up":Ue(f),e=-1;break;case "down":Ue(c),e=-1}(()=>{const e={l:Qe+A[3],r:Qe+s-A[1],t:Ie+A[0],b:Ie+s-A[2]+s/2};for(const {x:M,y:t}of Ae(e)){let e=we(M,t,["cat"]);if(e&&!e.ae&&(e.x=e.cx,e.y=e.cy,e.ae=1,Re("sg",e.cx,e.cy),R.cCL.push(e.i),R.cCL.length>=pe.length&&(tM=1,rM=-1,oM=0,MM=aM,cM())),we(M,t,["orb"])){T+=1;let e=we(M,t,["orb"]);const r=e.season;OM(r),n.push(r),Re("orb",M,t),C(e.text)}we(M,t,["checkpoint"])&&LM(),Se.forEach((e=>{e.J||(e.x===M&&Oe(M,t,e.y)?e.J=t<e.y?f:c:e.y===t&&ge(t,M,e.x)&&(e.J=M<e.x?N:a),e.J&&AM("se",1))}))}})(),(e=>{ze+=e;const M=Ge(be),t=be===N||be===a;t&&(ke=be===a),ze>=$e&&(ze=0,t?(Ke^=1,ke=be===a):ke=!ke),Fe=t?M+Ke:M})(e)}}}let ze=0,Ke=0;const $e=120;function eM(e){if(!v)return ;const M=t((e-U)/420,0,1);Qe=G+(j-G)*M,Ie=W+(J-W)*M,He=1-M,M>=1&&(v=0,I=0,He=1,Qe=j-V*s*.7|0,Ie=J-z*s*.7|0)}let MM,tM=0,rM=-1,YM=0,nM=0,oM=0;const fM=[{ce:2e3,$:784,Me:336,Ye:N,Ne:1,ie:1,qe:2},{ce:5e3,K:"MY CATS VANISHED|I MUST SAVE THEM!",Ye:c,qe:2},{ce:2500,Ne:0,K:"THEY ARE ACROSS THE WORLD",$:1360,Me:440,qe:0},{ce:2500,$:560,Me:184,qe:3},{ce:6e3,$:144,Me:488,K:"OH NO! THE SEASONS ARE IN CHAOS!",ie:2,qe:0},{ce:1500,$:16,Me:16,K:"FIND SEASON ORBS IN TEMPLES|SAVE THE CATS",le:750,qe:3},{ce:1500,$:1024,le:750,qe:1},{ce:1500,$:1400,Me:872,le:750,qe:2},{ce:1500,$:16,le:750,qe:0},{ce:2e3,$:784,Me:336,qe:1,K:"MOVE WITH ARROWS|ACTION TO INTERACT",Ne:1,le:1e3},{ce:2e3,K:"",qe:1}],aM=[{ce:2e7,$:784,Me:336,Ye:N,Ne:1,ie:4,qe:2,le:1e3,K:"CONGRATS! YOU FOUND ALL THE CATS!"}];function cM(){if(++rM,rM>=MM.length)return K="",void(tM=0);const e=MM[rM],M=()=>{e.$&&(Qe=e.$),e.Me&&(Ie=e.Me),r=Y[e.qe],null!=e.Ne&&(Xe=!!e.Ne),e.Ye&&Ue(e.Ye),e.K&&C(e.K),nM=0|e.ie,YM=0|e.ce};e.le?(oM=1,ie(e.le,(()=>{M(),oM=0}))):M()}function NM(e){var M;(M=e)&&!x.includes(M)&&["up","down","left","right"].includes(M)&&x.push(M),"action"!==M||tM||(K?K="":((()=>{if(be!==f)return ;const e=we(xe(Qe+s/2),xe(Ie+s/4),["sg"]);e?.text&&C(e?.text)})(),(()=>{if(!n.length||ne)return 0;const e=_e("c",Qe,Ie);for(const {x:M,y:t}of Ae(e)){const e=we(M,t,["trigger"]);let Y=n[(n.indexOf(r)+1)%n.length];if(e)return OM(Y),1}return 0})()||ne||K||me||tM||(me=1,(()=>{let {dx:e,dy:M}=Te(be);((e,M,t,r={})=>( se[r.isUnder?"unshift":"push"]({tile:e,x:M,y:t,...r}), se[r.isUnder?0: se.length-1]))("fireball",Qe/s+(.5*e||.1),Ie/s-(M>0?-.8:0)+.5*Math.abs(e)).J=be})())))}function iM(e){(e=>{if(e){const M=x.indexOf(e);-1!==M&&x.splice(M,1)}"action"===e&&(me=0)})(e)}let sM=Array(16).fill(0),qM=null;const lM={12:"up",13:"down",14:"left",15:"right",0:"action"};window.addEventListener("gamepadconnected",(e=>{"standard"===e.gamepad.mapping&&(qM=e.gamepad.index)})),window.addEventListener("gamepaddisconnected",(e=>{e.gamepad.index===qM&&(qM=null)}));let ZM=[20,45,70,90];M={songData:[{i:[1,152,128,0,1,20,128,9,0,0,7,23,0,0,0,0,0,0,0,0,2,255,0,0,32,47,3,24,2],p:[1],c:[{n:[142,,139,,,,142,,138,,146,,,,144,,142,,139,,,,135,,134,,139,141,146,,144,,142,,,,144,,146,,147,,149,,151,,152,,154,,,,152,,148,,151,,,,149,,,,156,,152,,,,151,,150,,158,159,158,,156,,154,,151,,,,154,,148,,156,157,156,,154,,154,,152,,151,,152,,156,,159,,163,,161,,159,,163,,161,,,,166,,,,161],f:[]}]},{i:[1,192,128,0,1,191,116,9,0,0,6,25,34,0,0,0,0,69,2,1,1,23,167,0,32,77,6,25,6],p:[1],c:[{n:[123,,127,,118,,127,,122,,127,,123,,127,,123,,127,,117,,127,,122,,126,,118,,126,,123,,127,,118,,127,,122,,126,,117,,126,,125,,128,,120,,128,,118,,120,,122,,118,,128,,132,,123,,128,,122,,129,,126,,129,,127,,130,,122,,130,,120,,127,,124,,127,,125,,128,,120,,128,,125,,128,,120,,119,,118,,125,,113,,125,,118,,118,,120,,122],f:[]}]}],rowLen:5513,patternLen:128,endPattern:0,numChannels:2};let dM={text:{songData:[{i:[0,255,152,0,0,255,152,12,0,0,8,9,12,196,0,0,0,0,0,0,2,94,0,0,32,47,9,5,2],p:[1],c:[{n:[123,123,,123,123,123,123],f:[]}]}],rowLen:4410,patternLen:32,endPattern:0,numChannels:1},damage:{songData:[{i:[0,255,106,64,0,255,106,0,64,0,5,7,111,47,0,0,0,0,0,0,2,255,0,2,32,83,5,25,1],p:[1],c:[{n:[158],f:[]}]}],rowLen:4410,patternLen:32,endPattern:0,numChannels:1},fall:{songData:[{i:[0,255,106,64,0,255,106,0,64,0,5,20,132,0,0,0,0,0,0,0,2,255,0,2,32,83,5,25,1],p:[1],c:[{n:[161],f:[]}]}],rowLen:4410,patternLen:32,endPattern:0,numChannels:1}, se:{songData:[{i:[3,0,128,0,3,68,128,0,64,218,20,0,44,21,0,0,1,55,4,1,2,67,115,124,190,67,6,39,1],p:[1],c:[{n:[135,147],f:[]}]}],rowLen:5513,patternLen:2,endPattern:0,numChannels:1}},_M={};function AM(e,M=0){_M[e]&&(_M[e].currentTime=0,_M[e].loop=M,_M[e].play())}function uM(){p=Math.min(window.innerWidth/(Z*s)|0,.89*window.innerHeight/(d*s)|0),E.width=Z*s*p,E.height=d*s*p,window.innerWidth/window.innerHeight>Z/d?(P.width=window.innerWidth,P.height=window.innerWidth*(d/Z)):(P.height=window.innerHeight,P.width=window.innerHeight*(Z/d))}function gM(){((e,M=0)=>{const t=te.currentTime||0;Ze=performance.now(),te.src=URL.createObjectURL(new Blob([e],{type:"audio/wav"})),te.loop=M,te.onloadedmetadata=()=>{te.currentTime=(t+(performance.now()-Ze)/100)%te.duration,te.volume=Ye?.2:0,te.play()}})(ee[r],1),Ye?te.play():te.pause()}function OM(e){m=T,ne=1,ie(1e3,(()=>{r=e,gM(),Le(),LM(),ne=0}))}function LM(){R={cX:Qe,cY:Ie,cS:r,cML:T,aS:n,cCL:R.cCL},localStorage.setItem("witchcat",JSON.stringify(R))}function hM(){try{return JSON.parse(localStorage.getItem("witchcat"))||{}}catch{return {}}}window.addEventListener("resize",(()=>{uM(),Le()})),uM(),(()=>{for(let t in dM){let r=document.createElement("audio"),Y=new e;for(Y.init(dM[t]);Y.generate()<1;);var M=Y.createWave();r.src=URL.createObjectURL(new Blob([M],{type:"audio/wav"})),_M[t]=r}})(),Y.forEach(((e,t)=>{M.songData[0].i[12]=ZM[t],ee[e]=(()=>{for(re.init(M);re.generate()<1;);return re.createWave()})()})), se.forEach((e=>{["bt","se"].includes(e.tile)&&Se.push(e)})), se.forEach((e=>{["sk","m"].includes(e.tile)&&ye.push(e)})),((e=0)=>{R=e?{...Q}:{...Q,...hM()},({cX:Qe,cY:Ie,cS:r,cML:T,aS:n}=R),m=T})(),n.includes("winter")||qe(10,4,"winter","IN WINTER, SNOW COVERS|AND WATER TURNS ICE"),n.includes("summer")||qe(65,4,"summer","IN SUMMER, ROOTS GROW|AND USE THE VINES TO CLIMB"),n.includes("fall")||qe(94,57,"fall","IN FALL, MUSHROOM GROW|AND LEAVES FILL HOLES"),n.includes("spring")||qe(4,57,"spring","IN SPRING, STONE FLOWERS|BLOOM"),[{x:81,y:44,text:"IN AUTUMN TEMPLE",cx:52,cy:25},{x:89,y:59,text:"IN AUTUMN TEMPLE",cx:50,cy:26},{x:48,y:50,text:"AT SOUTH",cx:48,cy:26},{x:26,y:47,text:"IN SPRING TEMPLE",cx:46,cy:25},{x:9,y:31,text:"AT WEST",cx:45,cy:23},{x:29,y:5,text:"IN WINTER TEMPLE",cx:45,cy:21},{x:35,y:12,text:"IN WINTER TEMPLE",cx:46,cy:19},{x:49,y:4,text:"AT NORTH",cx:48,cy:18},{x:84,y:2,text:"IN SUMMER TEMPLE",cx:50,cy:18},{x:97,y:2,text:"IN SUMMER TEMPLE",cx:52,cy:19},{x:62,y:21,text:"AT EAST",cx:53,cy:21},{x:85,y:28,text:"AT EAST",cx:53,cy:23}].forEach(((e,M)=>{R.cCL.includes(M)? se.push({tile:"cat",x:e.cx,y:e.cy,ae:1}):( se.push({tile:"cat",x:e.x,y:e.y,cx:e.cx,cy:e.cy,i:M}),le(e.cx,e.cy,""+e.text))})), se.forEach((e=>{["cat"].includes(e.tile)&&pe.push(e)})),Y.forEach((e=>{(e=>{const M=Array.from({length:l},(()=>Array.from({length:q},(()=>null))));for(const t of se){let r=Ee(t.tile,e);const Y=i[r];if(!Y)continue;const n=Y.size||[1,1];for(let e=0;e<n[0];++e)for(let Y=0;Y<n[1];++Y){const n=t.x+e,o=t.y+Y;n<q&&o<l&&(M[o][n]=r),["wall","sn"].includes(r)&&(M[o+1][n]=r)}}X[e]=M})(e)})),Y.forEach((e=>{r=e;const M=document.createElement("canvas");M.width=q*s,M.height=l*s;const t=M.getContext("2d");y[e]=M,t.fillStyle="#"+o[e][3],t.fillRect(0,0,M.width,M.height);const Y="g",n=i[Y].fe[0];let f=Ce(i[Y]._,e);const a=i.plant.fe[0];let c=Ce(i.plant._,e);for(let e=0;e<l;e++)for(let M=0;M<q;M++)928371*(M-812347*e)*(M+156468+e)%17==0?Be(a,c,M,e,{context:t}):Be(n,f,M,e,{context:t});he(1,t)})),Le(),r=R.cS,gM(),hM()?.cML||(tM=1,rM=-1,oM=0,MM=fM,cM()),document.addEventListener("keydown",(e=>{NM(De(e.key))})),document.addEventListener("keyup",(e=>{iM(De(e.key))})),requestAnimationFrame((function e(M){D||(D=M);let t=M-D;for(t>100&&(t=100),D=M,b+=t;b>=w;)Ve(w),eM(M),b-=w;var n;B.imageSmoothingEnabled=0,(()=>{const {offsetX:e,offsetY:M}=Pe();B.drawImage(y[r],e*s,M*s,Z*s,d*s,0,0,Z*s*p,d*s*p),B.save(),B.scale(p,p),B.translate(Math.round(-e*s),Math.round(-M*s)),he(0),B.restore()})(),(()=>{if(!Xe)return ;const {offsetX:e,offsetY:M}=Pe(),t=Qe-e*s,r=Ie-M*s,Y=i.c.fe[Fe];let n=Ce(i.c._);if(H){const e=performance.now();Math.floor((e-k)/200)%2==0&&(n=Ce(o.winter))}B.save(),B.scale(p,p),B.translate(t,r),Be(Y,n,0,0,{ee:He,re:ke}),B.restore()})(),(()=>{if(H)return ;const e=_e("c",Qe,Ie);for(const M of Se)if(M.J&&ue(e,_e(M.tile,M.x*s,M.y*s))){je();break}for(const {x:M,y:t}of Ae(e)){const Y=X[r][t]?.[M];if("s"!==Y)continue;const n=we(M,t);if(n&&0!==(n.oe||0)&&ue(e,_e("s",M*s,t*s))){je();break}}for(const M of ye)if(ue(e,_e(M.tile,M.x*s,M.y*s))){je();break}})(),(()=>{const e=i.h.fe[0],M=Ce(i.h._);for(let t=0;t<T;++t){const r=1*p,Y=(Z-t-1)*s;B.save(),B.scale(p,p),B.translate(Y,r),Be(e,[M[0],M[t<m?1:2]],0,0),B.restore()}})(),h({K:r.toUpperCase(),$:5,Me:5,ee:1.2,te:"#000"}),We&&(()=>{const e=performance.now()-0;Ue(Math.floor(e/100)%4+1),oe||(ie(1500,(()=>{Qe=R.cX,Ie=R.cY,m=T,r=R.cS,Ue(c)})),setTimeout((()=>{We=0}),1e3)),ze=0,Ke=0})(),(()=>{if(!oe)return ;const e=performance.now(),M=Math.min(1,(e-ae)/ce);B.globalAlpha=1===fe?M:1-M,B.fillStyle="#fff",B.fillRect(0,0,E.width,E.height),B.globalAlpha=1,M>=1&&(1===fe?("function"==typeof Ne&&Ne(),fe=0,ae=e):(oe=0,fe=0,Ne=null))})(),K&&(B.fillStyle="#000",B.fillRect(40*p,10*p,Z*s*p-80*p,40*p),h({K,$:24,Me:9,ee:2,te:"#fff"})),n=M,tM&&(oM||(YM-=t,1&nM&&(ke=n%500<250),2&nM&&(r=Y[(n/800|0)%Y.length]),4&nM&&(r=Y[(n/5e3|0)%Y.length],ke=n%500<250,Ue((n/1400|0)%3+1),pe.forEach((e=>{e.re=(n/700|0)%2}))),YM<=0&&cM())),(()=>{const e=navigator.getGamepads();if(!e)return ;const M=e[qM];if(M)for(let e=0;e<M.buttons.length;e++){if(!lM[e])continue;const t=M.buttons[e].pressed;t&&!sM[e]&&NM(lM[e]),!t&&sM[e]&&iM(lM[e]),sM[e]=t}})(),requestAnimationFrame(e)}));</script></body></html>