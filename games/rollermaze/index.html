<!doctype html><title>Rollermaze</title><style>*{margin:0;padding:0;user-select:none;-webkit-user-select:none;-moz-user-select:none;touch-action:none}body{overflow:hidden;background:#000}#wrapper{position:absolute;left:0;top:0;width:100%;height:100%;overflow:hidden}canvas{position:absolute;image-rendering:pixelated;image-rendering:crisp-edges}</style><script>const aa=[,,,,68,68,64,64,170,160,,,85,245,245,80,78,142,46,64,162,68,138,,234,136,72,224,68,128,,,104,136,136,96,194,34,34,192,4,228,228,,4,78,68,,,,68,128,,14,,,,,4,64,34,68,136,,74,170,170,64,76,68,68,224,234,46,136,224,234,36,42,224,136,170,226,32,232,226,42,224,234,142,170,224,226,34,34,32,234,164,170,224,234,174,42,224,4,64,4,64,4,64,4,72,2,72,66,,,224,224,,8,66,72,,234,38,64,64,234,162,234,224,234,174,170,160,202,172,170,192,234,136,138,224,202,170,170,192,234,140,138,224,234,140,136,128,234,138,170,224,170,174,170,160,228,68,68,224,226,34,42,224,170,204,170,160,136,136,138,224,174,234,170,160,170,238,234,160,234,170,170,224,234,174,136,128,234,170,172,32,234,174,202,160,234,142,42,224,228,68,68,64,170,170,170,224,170,170,170,64,170,170,238,160,170,68,74,160,170,228,68,64,234,36,138,224,232,136,136,224,8,132,66,32,226,34,34,224,78,160,,,,,,14,136,64,,,,226,234,224,136,234,170,224,,234,138,224,34,234,170,224,,234,232,224,,232,200,128,,234,174,46,136,234,170,160,64,196,68,224,32,98,34,174,136,170,202,160,196,68,68,224,,174,234,160,,234,170,160,,234,170,224,,234,174,136,,234,174,34,,234,136,128,,232,226,224,68,228,68,96,,170,170,224,,170,164,64,,170,238,160,,170,74,160,,170,174,46,,226,72,224,2,100,196,98,4,68,4,68,8,196,100,200,10,232,,,];function d(t,e,a,i,r){var n=ba;for(n.save(),n.fillStyle=r,r=0;r<a.length;r++){var h=a.charCodeAt(r)-32;if(!(0>h||94<h))for(var o=0,s=0,c=0;4>c;c++){for(var u=aa[4*h+c]||0,l=0;8>l;l++)u&1<<8-l&&n.fillRect(Math.floor(t+4*r*i+o*i),Math.floor(e+i*s),Math.ceil(i),Math.ceil(i)),4==++o&&(o=0,s++);n.stroke()}}n.restore()}var ca=[{width:3,height:2,title:"Simple",g:[,,2,3,1,1]},{width:3,height:2,title:"Block",g:[1,1,1,3,4,2]},{width:3,height:3,title:"Button",g:[5,,,1,,,3,4,2]},{width:7,height:5,title:"Count",g:[3,,,5,,1,,1,1,1,1,1,4,1,,,6,,,,1,2,4,,5,,1,1,,1,1,1,1,1]},{width:7,height:7,title:"Untitled",g:[1,1,7,1,4,6,1,1,,,1,,,1,1,,,1,,,1,1,,,1,,,1,1,,,1,,,1,1,5,,1,,2,1,,,,3,,,]},{width:8,height:8,title:"Amelie",g:[1,1,,,,5,,2,7,,,1,7,1,1,4,1,,,1,,,,,1,5,,1,4,1,,,1,,,,,1,5,6,1,1,4,1,,,,1,1,,,1,1,,1,1,3,,,,1,1,1]},{width:8,height:8,title:"Seven",g:[,1,5,1,,1,1,1,1,1,,1,7,1,,3,4,,,,,,,4,1,1,,1,5,1,,1,,7,1,1,,1,7,1,1,1,,,,,,,1,,1,7,1,,1,2,1,5,1,,1,4,1]},{width:8,height:8,title:"Ethan",g:[3,1,1,,5,1,1,,,,1,7,1,,4,1,,,,,,,1,1,1,1,1,7,1,1,6,1,1,,,,,,,,1,1,1,6,4,1,1,,,7,,,,,1,,6,5,6,,,1,1,2]},{width:8,height:8,title:"UWU",g:[,,,,,1,1,1,1,5,,1,7,4,,1,7,,,1,7,,,1,1,1,3,,2,,1,4,1,,,,,1,6,,1,,,1,1,1,,,1,,1,1,,1,1,,1,1,1,,,,5]},{width:8,height:8,title:"Dix",g:[3,,7,1,1,1,1,7,1,,1,,,,,1,1,,1,,1,1,1,1,1,,1,,1,,,,1,,1,,1,6,1,1,1,,1,,7,,,1,1,,1,,1,,,4,1,7,1,,5,,,2]},{width:8,height:8,title:"Legs",g:[1,1,7,1,6,1,1,,1,,1,,,1,1,1,1,,1,,,,,4,1,,1,1,1,,1,1,7,,1,,5,,7,,1,,1,1,1,,1,2,1,,,,,,,,1,1,1,1,7,1,1,3]},{width:8,height:8,title:"Zwolf",g:[1,1,1,6,5,,2,,1,,,,,,4,,1,1,1,1,1,1,1,1,,,1,,,,,,1,1,4,,5,1,1,,1,,,,,,1,1,1,1,1,1,1,1,1,,,1,,3,,1,,]},{width:8,height:8,title:"Unlucky for some",g:[,,,,2,,,,,1,4,1,4,,1,,,1,,,,,1,,1,1,,1,1,1,1,5,5,1,1,7,1,,1,1,,1,,,,,1,,,1,1,1,1,1,1,,,,,3,1,,,]},{width:8,height:8,title:"14",g:[3,,,,,,,7,7,,,,,1,1,1,1,,,,1,1,,1,1,,,7,1,,,1,1,,1,1,,,,1,1,1,1,,,,,7,7,1,,,,,,4,5,,,,,,,2]},{width:8,height:8,title:"Cans",g:[,7,,,1,1,1,1,1,5,,,2,,,1,,1,,,,,,1,,1,,,,,,1,,1,,,,7,1,7,,1,,,,,,1,,1,,,1,,,1,1,3,1,4,1,1,1,1]},{width:8,height:8,title:"Bruh",g:[5,,,,,,,6,6,7,1,7,1,1,,1,,,,,,7,4,1,,1,7,1,,1,,7,1,1,,1,,7,,1,7,,,1,7,1,,7,1,1,,,,,,1,,3,,2,1,7,1,1]},{width:8,height:8,title:"Seventeen",g:[1,7,1,7,1,,2,,6,,5,,1,,1,,,,,7,1,4,7,1,1,7,1,1,7,,1,,,1,,,,,7,1,1,7,,5,7,,,,,4,,,1,1,1,3,,1,1,1,7,1,,]},{width:8,height:8,title:"One Eight",g:[1,1,1,1,1,1,1,1,1,4,4,4,4,4,1,1,1,3,4,4,4,7,1,4,4,4,4,4,1,1,4,4,4,4,4,1,7,4,4,4,4,4,7,1,4,4,4,4,4,1,1,4,4,4,4,4,2,7,4,4,4,4,4,4]},{width:11,height:9,title:"XIX",g:[,,,4,4,4,4,4,,,,,,,4,1,1,1,4,,,,4,4,4,4,1,1,1,4,4,4,4,4,1,1,4,4,7,4,4,1,1,4,4,1,1,1,7,3,7,1,1,1,4,4,1,1,4,4,7,4,4,1,1,4,4,4,4,4,1,1,1,4,4,4,4,,,,4,1,2,1,4,,,,,,,4,4,4,4,4,,,]},{width:22,height:18,title:"Vingt",g:[1,1,1,,1,1,1,,,1,,,1,1,,,1,,1,,1,1,,1,,,1,,,,1,1,,,,,1,,1,,1,,1,1,,1,,,1,1,1,,,1,,,1,1,,,1,1,,,1,1,,1,,,,,1,,,1,,,,,1,,1,,1,,,,1,1,,,1,1,1,,1,1,1,,1,1,,,1,,1,,1,1,,,,,,,,,,,,,,,,,,,,,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,6,1,1,1,1,,,1,,,,,,,,,,,,,,,,,,,1,5,,1,,1,1,1,1,1,1,1,1,6,1,1,1,1,1,1,1,,1,,,1,,1,,,,,,,,,,,,,,,1,,1,,,1,,1,,1,1,1,1,1,6,1,1,1,1,1,1,,1,,1,,,1,,1,,1,,,,,,,,,,,4,,1,,1,,,1,,6,,1,,2,,,,,,,,,1,,1,,1,,5,1,,1,,1,,4,1,1,1,1,6,1,1,1,1,,6,,1,,,1,,1,,1,,,,,,,,,,,,,1,,1,,,1,,1,,1,1,1,1,6,1,1,1,1,1,1,1,1,1,,1,,,3,,1,,,,,,,,,,,,,,,,,1,,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,6,1,1,1,1]},{width:8,height:8,title:"Twist",g:[7,1,,7,1,1,1,,,5,,4,,,7,5,,7,,1,,,6,,,1,1,7,,,1,,,1,,,,1,4,7,,1,,5,1,1,,7,,1,,,,,,7,5,3,1,,2,4,1,7]},{width:15,height:15,title:"22NC",g:[,4,2,4,1,7,1,7,1,1,4,2,4,1,,,1,,,,,,,,,,,,7,,,7,,1,1,1,1,6,1,1,1,1,,1,,1,1,,1,4,4,4,4,4,4,4,1,,1,1,1,1,,1,4,2,2,2,2,2,4,1,,1,1,1,1,,1,4,4,4,4,4,4,4,1,,1,1,6,1,7,1,1,1,1,3,1,1,1,1,7,1,6,1,1,,1,4,4,4,4,4,4,4,1,,1,1,1,1,,1,4,2,2,2,2,2,4,1,,1,1,7,1,,1,4,4,4,4,4,4,4,1,,1,7,,1,,1,1,1,1,6,1,1,1,1,,1,,,1,,,,,,,,,,,,1,,,1,1,1,1,1,1,6,1,1,1,1,1,1,,,,7,,,,,,,,,,7,,,,1,1,1,1,1,1,2,1,1,1,1,1,1]},{width:15,height:15,title:"22rd",g:[1,1,1,1,1,1,4,1,1,1,5,1,1,1,1,1,,,,,,,1,,,,,,,1,1,,,1,2,1,,1,,1,2,1,,,1,1,1,4,1,1,1,,1,,1,1,1,1,1,1,,,,,,,,1,,,,,,,,5,1,1,1,1,1,5,1,4,1,1,1,1,1,1,1,1,,,,,,1,,,,,,1,1,,,,,,,,1,,,,,,,,,1,1,1,1,1,4,1,5,1,1,1,1,1,,,1,1,,,,,1,,,,,1,1,,,,,,,,,1,,,,,,,,1,1,,,,,,1,,,,,,1,1,1,1,4,1,1,5,1,1,1,1,5,1,4,1,1,,,,,,,,1,,,,,,,,,,,,,,,3,,,,,,,]},{width:15,height:15,title:"24 club",g:[,,,1,,,,6,,,,1,,,,,7,1,1,1,1,1,1,1,1,1,1,1,7,,6,1,,,,,,,,,,6,,1,,,1,,,7,1,7,,7,1,7,,,1,1,1,1,,7,7,,7,1,7,,7,1,1,7,,,1,,4,,,,,,,,,,,,3,1,,7,1,6,1,1,1,1,1,1,1,1,2,,1,,,,,,,,,,,,,,,1,,7,1,1,1,1,1,7,,7,1,7,,6,1,,1,,6,,,,5,,1,,1,,,1,,1,,,,6,,,,1,,1,,1,1,,7,1,1,1,1,1,1,1,7,,1,6,,1,,,,,,,,,,,,1,,,7,1,1,1,1,1,1,1,1,1,1,1,7,,,,,6,,,,1,,,,6,,,]},{width:15,height:15,title:"Quarter C",g:[,7,,,,7,,1,1,1,,,,2,,7,5,7,,7,5,,4,,1,1,,1,1,,,7,,,7,,,1,,,5,,4,,,,1,4,7,6,7,,6,,1,1,,1,1,,,1,,,,5,,4,,1,4,4,4,1,,,7,,1,1,7,,1,,1,1,1,1,1,,,5,,4,,,,1,,,5,,4,,,,7,,7,1,1,1,1,,4,4,4,4,4,4,,1,,,,,,,,4,,4,,,,,7,1,1,1,4,5,1,1,5,1,5,1,7,,,,6,,,,,,,,,,,1,,4,2,4,2,4,2,4,2,4,2,4,2,,4,1,,,,,,,,,,,,,,5,,5,4,3,4,1,4,1,4,6,4,1,4,1,1,,1,1,7,1,1,1,1,1,7,1,1,1,1,,]}];const da=[{t:"coriolis",C:[[1,0,1],[0,1,1],[-1,0,1],[0,-1,1],[1,-1,0],[1,0,1],[0,-1,1],[1,0,1],[1,1,0],[0,1,1],[0,1,1],[-1,1,0],[-1,0,1],[-1,0,1],[-1,-1,0],[0,-1,1],[1,-1,0],[0,-1,1],[-1,-1,0],[0,-1,-1],[1,0,-1],[1,1,0],[1,0,1],[1,-1,0],[-1,0,-1],[-1,-1,0],[-1,0,1],[-1,1,0],[0,1,1],[1,1,0],[0,1,-1],[-1,1,0],[0,-1,-1],[-1,-1,0],[-1,0,-1],[0,-1,-1],[1,0,-1],[1,-1,0],[0,1,-1],[1,1,0],[1,0,-1],[-1,0,-1],[-1,1,0],[0,1,-1],[0,-1,-1],[-1,0,-1],[0,1,-1],[1,0,-1]],f:[[1,2,3],[1,3,4],[5,6,7],[8,9,10],[11,12,13],[14,15,16],[17,18,19],[17,19,20],[21,22,23],[21,23,24],[25,26,27],[25,27,28],[29,30,31],[29,31,32],[33,34,35],[36,37,38],[39,40,41],[42,43,44],[45,46,47],[45,47,48]],c:[7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],i:3},{t:"stealth",C:[[-1354,0,25],[-1054,-200,25],[265,-535,25],[929,-1242,25],[1061,-1329,25],[1155,-1181,25],[1027,-783,25],[1353,-250,25],[1198,0,25],[1353,250,25],[1027,783,25],[1155,1181,25],[1061,1329,25],[929,1242,25],[265,535,25],[-1054,200,25],[-1034,0,149],[-958,-78,129],[-691,-114,165],[-578,-45,227],[-550,0,239],[-578,45,227],[-691,114,165],[-958,78,129],[1092,-351,60],[1272,-384,25],[1274,-126,25],[1091,-150,60],[1173,-252,80],[1091,150,60],[1274,126,25],[1272,384,25],[1092,351,60],[1173,250,80],[649,-351,109],[649,-150,109],[649,0,58],[649,150,109],[649,351,109],[-445,-348,25],[-393,-291,-97],[-445,-70,-87],[-445,70,-87],[-393,291,-97],[-445,348,25],[301,-340,-102],[301,340,-102],[-1147,0,-79],[877,250,-71],[877,-250,-71],[-564,0,-83],[-564,0,-238],[159,269,-104],[234,369,-225],[159,-269,-104],[234,-369,-225],[1092,-351,30],[1091,-150,30],[1159,-252,30],[1091,150,30],[1092,351,30],[1159,250,30]],f:[[17,18,21],[18,19,21],[19,20,21],[17,21,24],[24,21,23],[21,22,23],[1,2,17],[2,18,17],[2,19,18],[2,3,19],[3,20,19],[3,21,20],[3,4,7],[4,5,6],[4,6,7],[7,26,3],[26,25,3],[9,28,27],[25,29,28],[25,28,36],[36,35,25],[25,35,3],[36,28,9],[9,37,36],[35,36,21],[21,3,35],[21,36,37],[1,17,16],[24,16,17],[23,16,24],[23,15,16],[22,15,23],[21,15,22],[15,11,14],[11,12,14],[12,13,14],[32,11,15],[33,32,15],[9,31,30],[30,34,33],[33,39,30],[39,38,30],[39,33,15],[9,30,38],[38,37,9],[38,39,21],[15,21,39],[21,37,38],[40,42,41],[43,45,44],[42,40,2],[42,2,1],[41,42,46],[46,42,43],[3,40,41],[3,41,46],[3,46,50],[3,50,4],[46,47,49],[50,9,8],[8,7,50],[50,6,4],[5,4,6],[6,50,7],[1,43,42],[45,43,16],[43,1,16],[43,44,47],[46,43,47],[44,45,15],[15,47,44],[49,15,14],[49,47,15],[49,50,46],[49,10,9],[49,14,12],[10,49,11],[12,14,13],[12,11,49],[50,49,9],[57,25,26],[57,26,8],[57,8,59],[59,8,27],[59,27,58],[58,27,28],[58,28,29],[58,29,59],[59,29,25],[59,25,57],[60,30,31],[60,31,10],[10,62,60],[62,10,32],[62,32,61],[61,32,33],[61,33,34],[61,34,62],[62,34,30],[62,30,60]],c:[8,8,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,8,8,6,6,6,6,8,8,8,8,8,8,6,6,6,6],i:.0068},{t:"chipcube",C:[[-8,10,-10],[-10,10,-8],[-10,10,8],[-8,10,10],[8,10,10],[10,10,8],[10,10,-8],[8,10,-10],[-8,-10,-10],[-10,-10,-8],[-10,-10,8],[-8,-10,10],[8,-10,10],[10,-10,8],[10,-10,-8],[8,-10,-10],[-10,8,-10],[-10,8,10],[10,8,10],[10,8,-10],[-10,-8,-10],[-10,-8,10],[10,-8,10],[10,-8,-10]],f:[[1,2,3],[1,3,4],[1,4,5],[1,5,6],[1,6,7],[1,7,8],[16,15,14],[16,14,13],[16,13,12],[16,12,11],[16,11,10],[16,10,9],[3,2,17],[3,17,21],[3,21,10],[3,10,11],[3,11,22],[3,22,18],[7,6,19],[7,19,23],[7,23,14],[7,14,15],[7,15,24],[7,24,20],[17,1,8],[17,8,20],[17,20,24],[17,24,16],[17,16,9],[17,9,21],[4,18,22],[4,22,12],[4,12,13],[4,13,23],[4,23,19],[4,19,5],[1,17,2],[3,18,4],[5,19,6],[7,20,8],[10,21,9],[12,22,11],[14,23,13],[16,24,15]],c:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],i:10},{t:"tree",C:[[-.5,-.5,4],[-.5,.5,4],[.5,.5,4],[.5,-.5,4],[-.5,-.5,0],[-.5,.5,0],[.5,.5,0],[.5,-.5,0],[-3,-3,0],[-3,3,0],[3,3,0],[3,-3,0],[0,0,-8]],f:[[1,5,8],[1,8,4],[4,8,7],[4,7,3],[1,2,6],[1,6,5],[7,6,2],[7,2,3],[9,13,12],[12,13,11],[11,13,10],[10,13,9],[9,12,11],[9,11,10]],c:[9,9,9,9,9,9,9,9,10,10,10,10,10,10],i:10}];function h(t,e=1){t.v=0,t.u=null==e?1:e,t.l=!0,window.requestAnimationFrame(t.D.bind(t))}class ea{constructor(){this.h=[],this.o=this.s=0,this.m=[],this.A=[],this.l=!1,this.v=0,this.u=1}add(t,e){return this.h.push({start:t,item:e,done:!1}),this.h.sort((function(t,e){return e.start<t.start?1:e.start==t.start?0:-1})),this}D(t){var e=0;if(this.l){0==this.s&&(this.o=t);for(var a=t-this.o,i=0;i<this.h.length;i++){if(!this.h[i].done&&this.h[i].start<a&&(this.h[i].done=!0,null!=this.h[i].item))try{this.h[i].item()}catch(t){}1==this.l&&this.h.length-1>=i&&!this.h[i].done&&e++}if(0<this.m.length&&(1==this.h.length&&null==this.h[0].item&&0<this.h[0].start?this.m.forEach((t=>{try{this.A.forEach((e=>t(e,a/this.h[0].start*100)))}catch(t){}})):this.m.forEach((t=>{try{this.A.forEach((e=>t(e)))}catch(t){}}))),this.s=t,this.s==this.o||0<e)window.requestAnimationFrame(this.D.bind(this));else if(this.v++,0==this.u||this.v<this.u){for(this.l=!1,i=this.o=this.s=0;i<this.h.length;i++)this.h[i].done=!1;this.l=!0,window.requestAnimationFrame(this.D.bind(this))}else this.l=!1}}end(){return this.l=!1,this}reset(){return this.l=!1,this.h=[],this.o=this.s=0,this.m=[],this.A=[],this.v=0,this.u=1,this}}const fa=[[.4,.4,.4],[1,0,0],[0,1,0],[0,0,1],[0,1,1],[1,0,1],[1,1,0],[1,1,1],[0,0,0],[.5,0,0],[0,.5,0],[0,0,.5],[0,.5,.5],[.5,0,.5],[.5,.5,0],[.8,.8,.8]];var ha=()=>{var t,e,a=k,i=l;i.clearColor(...a.b.c),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.DEPTH_TEST),i.shaderSource(t=i.createShader(i.VERTEX_SHADER),"#version 300 es\n      precision lowp float;\n      in vec4 fc,p;\n      uniform mat4 M,m;\n      out vec4 C,P;\n\n      void main()\n      {\n        gl_Position=M*p;\n        P=m*p;\n        C=fc;\n      }"),i.compileShader(t),i.shaderSource(e=i.createShader(i.FRAGMENT_SHADER),"#version 300 es\n      precision lowp float;\n      uniform vec3 c,d,a;\n      in vec4 C,P;\n      out vec4 o;\n\n      void main()\n      {\n        float n=max(dot(d,-normalize(cross(dFdx(P.xyz),dFdy(P.xyz)))),0.);\n        o=vec4(c*C.rgb*n+a*C.rgb,1.);\n      }"),i.compileShader(e);var r=i.createProgram();return i.attachShader(r,t),i.attachShader(r,e),i.linkProgram(r),i.useProgram(r),i.uniform3f(i.getUniformLocation(r,"c"),...a.d.c),i.uniform3f(i.getUniformLocation(r,"d"),...a.d.p),i.uniform3f(i.getUniformLocation(r,"a"),...a.a.c),i.blendFunc(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA),i.enable(i.BLEND),i.activeTexture(i.TEXTURE0),r};function ia(){return[[[1,1,1],[-1,1,1],[-1,-1,1],[1,-1,1],[1,-1,-1],[1,1,-1],[-1,1,-1],[-1,-1,-1]],[[0,1,2],[0,2,3],[5,0,3],[5,3,4],[5,6,1],[5,1,0],[1,6,7],[1,7,2],[6,5,4],[6,4,7],[3,2,7],[3,7,4]],[7,7,1,1,2,2,3,3,6,6,5,5]]}function ja(t,e){switch(t.code){case"ArrowLeft":case"KeyA":case"KeyZ":m=1==e?1|m:-2&m,t.preventDefault();break;case"ArrowUp":case"KeyW":case"Semicolon":m=1==e?2|m:-3&m,t.preventDefault();break;case"ArrowRight":case"KeyD":case"KeyX":m=1==e?4|m:-5&m,t.preventDefault();break;case"ArrowDown":case"KeyS":case"Period":m=1==e?8|m:-9&m,t.preventDefault();break;case"Enter":case"ShiftLeft":case"ShiftRight":case"Space":m=1==e?16|m:-17&m,t.preventDefault();break;case"KeyI":1==e&&(n=!n),t.preventDefault()}}function p(t,e){1==e?r?(e=t.clientX-ka,t=t.clientY-la,m=0,Math.abs(e)>=ma&&(m=0<e?4|m:1|m),Math.abs(t)>=na&&(m=0<t?8|m:2|m)):(m=0,ka=t.clientX,la=t.clientY,r=!0):(r=!1,m=0)}function oa(t,e){try{p(t.touches[0]||t.changedTouches[0],e)}catch(t){}}var u=null,x=null,pa=null,z=[],qa=1;function ra(){try{if(null==u)try{u=new(window.AudioContext||window.webkitAudioContext),(x=u.createGain()).connect(u.destination),x.gain.setValueAtTime(.05,u.currentTime),(pa=u.createStereoPanner()).connect(x);var t=1;const a=[[0,4],[0,2],[116,2],[136,2],[136,2],[152,2],[152,2],[136,4],[116,2],[116,2],[116,3],[116,1],[144,1],[136,1],[132,1],[124,1],[116,4],[0,2],[116,2],[136,2],[136,2],[152,2],[152,2],[136,4],[116,2],[136,2],[132,2],[124,1],[132,1],[136,2],[112,2],[116,4],[0,2],[116,2],[132,2],[132,2],[136,1],[132,1],[124,1],[132,1],[136,4],[116,2],[136,2],[132,2],[132,2],[132,1],[156,1],[144,1],[132,1],[136,6],[136,2],[124,2],[124,2],[124,2],[136,2],[136,4],[116,2],[116,2],[116,3],[116,1],[144,2],[132,2],[136,6],[136,2],[132,1],[124,1],[124,2],[124,1],[136,1],[132,1],[144,1],[136,4],[116,2],[116,2],[116,3],[116,1],[144,2],[132,2],[136,4],[0,4]];for(var e of a)z.push([parseInt(e[0],10),t]),t+=parseInt(e[1],10);qa=t+2}catch(t){}for(var a in z)if(0!=z[parseInt(a,10)][0]){var i=u.currentTime+.2*z[parseInt(a,10)][1],r=u.createOscillator();r.connect(pa),pa.pan.setValueAtTime(z[parseInt(a,10)][0]/245*2-1,i),r.type="triangle",r.frequency.value=65.41*Math.pow(2,(z[parseInt(a,10)][0]-5)/4/12),r.start(i),r.stop(i+.2)}setTimeout(ra,200*qa)}catch(t){}}const sa=Math.PI/180;var A=1/60,B=0,ta=0,ua=0,D=[],E=null,l=null,F=null,ba=null,va=1,wa=640/360,k={b:{c:[.3,.3,.7,1]},c:{p:[0,-5,-20],r:[20,10,0]},d:{p:[.5,-.3,-.7],c:[1,1,1]},a:{c:[.5,.5,.5]},B:[]},xa=null,m=0,ka=0,la=0,r=!1,ma=0,na=0,G=0,H=[0,0,0],I=[0,0,0],J=1,K=0,L=null,M=[],ya=[],N=-1,za=!1,O=0,P=0,Q=0,R=0,S=[],T=0,Aa=0,Ba=0,Ca=[],U=-1,V=[],Da=!1,Ea=new ea,n=!1;function Fa(){var t=window.innerHeight,e=Math.floor(640/360*t),a=0,i=Math.floor(window.innerWidth/2-e/2);e>window.innerWidth&&(e=window.innerWidth,t=Math.floor(.5625*e),i=0,a=Math.floor(window.innerHeight/2-t/2)),ma=window.innerWidth/20,na=window.innerHeight/20,va=t/360,E.style.top=a+"px",E.style.left=i+"px",E.style.transformOrigin="0 0",E.style.transform="scale("+va+")",F.style.top=a+"px",F.style.left=i+"px",F.style.transformOrigin="0 0",F.style.transform="scale("+va+")"}function X(){return Math.random()}function Ga(){var t=S[T].p[0],e=S[T].p[1],a=S[T].p[2],i={};if(!(100<V.length))for(var r=0;60>r;r++)V.push({j:ia(),i:.3*X(),p:[t,e,a],r:[0,0,0],c:[i.r||1*X(),i.J||1*X(),i.b||1*X()],t:[.1*X()-.05,.1*X()-.05,.1*X()-.05],a:2})}function Ha(){var t;for(t=0;t<V.length;t++)V[t].p[0]+=V[t].t[0],V[t].p[1]+=V[t].t[1],V[t].p[2]+=V[t].t[2],V[t].r[0]+=5*X(),V[t].r[1]+=5*X(),V[t].r[2]+=5*X(),V[t].a-=.007,V[t].i=Math.abs(V[t].i-.001);for(t=V.length;t--;)0>=V[t].a&&V.splice(t,1)}function Ia(){Ga()}function Ja(t){var e=0,a=0;switch(t){case 1:e=-1;break;case 4:e=1;break;case 2:a=-1;break;case 8:a=1}try{var i=Math.floor((S[T].p[0]-O+2+2*e)/6),r=Math.floor((S[T].p[2]-Q+2+2*a)/6);if(0>i||i>=L.width||0>r||r>=L.height)return!1;var n=L.g[r*L.width+i]||0;switch(n){case 2:return J=3,N=-1,S[T].p[0]=6*i+O,S[T].p[2]=6*r+Q,++K>=ca.length?(J=4,K=0,h(Ea.reset().add(13e3,Ka).add(3e3,Ia).add(6e3,Ia).add(9e3,Ia),1)):h(Ea.reset().add(5e3,Ka),1),Ga(),!1;case 4:t:{for(const t of M)if(t.x==i&&t.y==r){var o=t.H;break t}o=!0}return!o;case 5:for(e=t=null,a=0;a<M.length;a++){var s=Math.abs(i-M[a].x),c=Math.abs(r-M[a].y),u=Math.sqrt(s*s+c*c);(null==t||u<e)&&(t=a,e=u)}try{null!=t&&(delete S[M[t].id].c,S[M[t].id].p[1]=0,M[t].H=!1)}catch(t){}break;case 6:La(13)}}catch(t){n=0}return 0!=n}function Ma(){k.c.p=[0-S[T].p[0]+2*Math.cos(R),-8+Math.sin(R),0-S[T].p[2]-4+2*Math.sin(R)],k.c.r=[60,10*Math.cos(R),0],S[T].r[1]+=4,S[T].r[0]+=4,S[T].p[1]=1+Math.sin(R),R+=.025,Ha()}function Na(t){if(n){for(;0<D.length&&D[0]<=t-1e3;)D.shift();D.push(t),ua=D.length}if(0<ta){for((B+=(t-ta)/1e3)>A&&900<B/A&&(B=2*A);B>A;){switch(J){case 2:Ha();break;case 1:if(S[T].p[1]<=P){if(n){0!=(1&m)&&--k.c.r[1],0!=(4&m)&&(k.c.r[1]+=1),0!=(2&m)&&(k.c.p[0]-=.2*Math.sin(k.c.r[1]*sa),k.c.p[2]+=.2*Math.cos(k.c.r[1]*sa)),0!=(8&m)&&(k.c.p[0]+=.2*Math.sin(k.c.r[1]*sa),k.c.p[2]-=.2*Math.cos(k.c.r[1]*sa));for(var e=0;3>e;e++)0>k.c.r[e]&&(k.c.r[e]+=360),360<=k.c.r[e]&&(k.c.r[e]-=360)}else{if(0==G&&0!=(1&m)&&Ja(1)&&(G=1,(H=[].concat(S[T].p))[0]-=2,(I=[].concat(S[T].r))[2]+=90),0==G&&0!=(4&m)&&Ja(4)&&(G=4,(H=[].concat(S[T].p))[0]+=2,(I=[].concat(S[T].r))[2]-=90),0==G&&0!=(2&m)&&Ja(2)&&(G=2,(H=[].concat(S[T].p))[2]-=2,(I=[].concat(S[T].r))[0]-=90),0==G&&0!=(8&m)&&Ja(8)&&(G=8,(H=[].concat(S[T].p))[2]+=2,(I=[].concat(S[T].r))[0]+=90),0!=G){-1==N&&La(13),e=0;var a=16/45;if(0!=G){for(var i=0;3>i;i++)S[T].p[i]<H[i]?(S[T].p[i]+=a,S[T].p[i]>H[i]&&(S[T].p[i]=H[i])):S[T].p[i]>H[i]?(S[T].p[i]-=a,S[T].p[i]<H[i]&&(S[T].p[i]=H[i])):e++,S[T].r[i]<I[i]?(S[T].r[i]+=16,S[T].r[i]>I[i]&&(S[T].r[i]=I[i])):S[T].r[i]>I[i]?(S[T].r[i]-=16,S[T].r[i]<I[i]&&(S[T].r[i]=I[i])):e++;6==e&&(S[T].r=[0,0,0],G=0)}}for(e of(e=void 0,Ca))e.F&&(S[e.id].p[0]<S[T].p[0]&&(S[e.id].p[0]+=.04),S[e.id].p[0]>S[T].p[0]&&(S[e.id].p[0]-=.04),S[e.id].p[2]<S[T].p[2]&&(S[e.id].p[2]+=.04),S[e.id].p[2]>S[T].p[2]&&(S[e.id].p[2]-=.04));0-S[T].p[0]>k.c.p[0]&&(k.c.p[0]+=.2),0-S[T].p[0]<k.c.p[0]&&(k.c.p[0]-=.2),0-S[T].p[2]-15>k.c.p[2]&&(k.c.p[2]+=.2),0-S[T].p[2]-15<k.c.p[2]&&(k.c.p[2]-=.2)}Ha();t:{for(e of(e=void 0,Ca))if(i=Math.abs(S[T].p[2]-S[e.id].p[2]),1.5>Math.abs(S[T].p[0]-S[e.id].p[0])&&1.5>i){S[e.id].c=[.5,1,.5],e.F?La(1):La(13),e=e.F=!0;break t}e=!1}e&&(H=[0,0,0],I=[0,0,0],G=0,S[T].p=[O+6*Aa,P,Q+6*Ba],k.b={c:[.1,.1,.3,1]},l.clearColor(...k.b.c))}break;case 3:case 4:Ma()}B-=A}for(var r of(k.B=[],S))k.B.push(r);for(var o of V)k.B.push(o);var s,c,u,p;for(s of(r=k,e=xa,a=[1,1,1],(o=l).clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),r.B)){[u,w,p]=s.j||ia(),i=[];var f=[],g=0;for(c of w){var w=s.c?s.c:fa[p[g]];f.push(...w.concat(1)),f.push(...w.concat(1)),f.push(...w.concat(1)),g++,i.push(...u[c[0]]),i.push(...u[c[1]]),i.push(...u[c[2]])}o.bindBuffer(o.ARRAY_BUFFER,o.createBuffer()),o.bufferData(o.ARRAY_BUFFER,new Float32Array(i),o.STATIC_DRAW),o.vertexAttribPointer(g=o.getAttribLocation(e,"p"),3,o.FLOAT,!1,0,0),o.enableVertexAttribArray(g),null!=s.i&&(a="number"==typeof s.i?[s.i,s.i,s.i]:s.i),g=(new DOMMatrix).translate(...s.p||[0,0,0]).rotate(...s.r||[0,0,0]).scale(...a),o.uniformMatrix4fv(o.getUniformLocation(e,"m"),!1,g.toFloat32Array()),o.bindBuffer(o.ARRAY_BUFFER,o.createBuffer()),o.bufferData(o.ARRAY_BUFFER,new Float32Array(f),o.STATIC_DRAW),o.vertexAttribPointer(f=o.getAttribLocation(e,"fc"),4,o.FLOAT,!1,0,0),o.enableVertexAttribArray(f),o.uniformMatrix4fv(o.getUniformLocation(e,"M"),!1,new DOMMatrix([1.8/wa,0,0,0,0,1.8,0,0,0,0,-1.001,-1,0,0,-.2,0]).rotate(...r.c.r).translate(...r.c.p).multiply(g).toFloat32Array()),o.drawArrays(o.TRIANGLES,0,i.length/3)}n&&(document.title=ua+" fps")}if(ta=t,ba.clearRect(0,0,F.width,F.height),-1!=N)0>=(t=Math.round((N-Date.now())/1e3))&&!za&&(za=!0,N=-1,J=2,h(Ea.reset().add(6e3,Ka),1)),0>t&&(t=0),d(10,10,t+"s",8,"rgba(255,0,255,0.5)");else switch(J){case 2:d(50,50,"FAILED !",8,"rgba(255,0,0,0.9)"),d(300,280,"Please try again",5,"rgba(255,0,0,0.9)");break;case 3:d(50,50,"Level Complete !",8,"rgba(255,128,0,0.7)");break;case 1:S[T].p[1]<=P&&(0==K?(d(20,20,"Cursors or WASD to roll",4,"rgba(255,128,0,0.7)"),d(120,300,"GET TO THE FOREST IN 13 SECONDS",4,"rgba(255,128,0,0.7)")):d(20,20,"GO when you're ready",4,"rgba(255,128,0,0.7)"));break;case 4:d(30,50,"WELL DONE",8,"rgba(255,128,0,0.7)"),d(20,280,"YOU'VE COMPLETED ALL LEVELS",5,"rgba(255,128,0,0.7)")}1==J&&S[T].p[1]>P&&(--S[T].p[1],k.c.p[1]=0-S[T].p[1]-5),window.requestAnimationFrame(Na)}function Oa(t){for(var e of da)if(e.t==t){for(var a in t=JSON.parse(JSON.stringify(e.f)))t[a][0]--,t[a][1]--,t[a][2]--;return[e.C,t,e.c]}return ia()}function Pa(t){1==t.G?t.p[0]--:t.p[0]++,(-300>t.p[0]||300<t.p[0])&&(t.G=1-t.G,t.r[1]=180-t.r[1],t.r[0]=0),t.r[0]++}function Ka(){L=JSON.parse(JSON.stringify(ca[K])),M=[],ya=[],V=[],N=-1,r=za=!1,m=0,Ca=[],H=[0,0,0],I=[0,0,0],G=0,k.b={c:[.3,.3,.7,1]},l.clearColor(...k.b.c),O=-6*(L.width-1)/2,P=0,Q=-6*(L.height-1)/2,S=[];for(var t=0;t<L.height;t++)for(var e=0;e<L.width;e++){var a={i:1,p:[O+6*e,P,Q+6*t],r:[90,0,0]};switch(L.g[t*L.width+e]||0){case 0:default:continue;case 1:case 6:a.j=Y();break;case 2:var i=a,n=Y();n=Qa(n,{x:2.75,y:2.75,z:-1}),n=Qa(n,{x:2.75,y:-2.75,z:-1}),n=Qa(n,{x:-2.75,y:2.75,z:-1}),n=Qa(n,{x:-2.75,y:-2.75,z:-1}),i.j=n;break;case 3:U=S.length,S.push({j:Oa("stealth"),i:.01,p:[O+6*e+10,P+6,Q+6*t-20],r:[270,0,0]}),S[U].G=1,T=S.length,S.push({j:Oa("coriolis"),i:1,p:[O+6*e,P+30,Q+6*t],r:[0,0,0],c:[1,.5,0]}),Aa=e,Ba=t,a.j=Y();break;case 4:M.push({x:e,y:t,id:S.length,H:!0}),a.p[1]-=.5,a.c=[.2,.2,.2],a.j=Y();break;case 5:ya.push({x:e,y:t,id:S.length}),a.c=[1,0,1],a.j=Y();break;case 7:Ca.push({id:S.length,F:!1}),S.push({j:Oa("chipcube"),i:.1,p:[O+6*e,P,Q+6*t],r:[0,0,0],c:[.5,.5,.5]}),a.j=Y()}S.push(a)}k.c.p=[0,-5,-20],k.c.r=[20,10,0],k.c.p[0]=0-S[T].p[0],k.c.p[1]=0-S[T].p[1]-5,k.c.p[2]=0-S[T].p[2]-15,J=1,S[U].I=new ea,(t=S[U].I.reset().add(1e4,void 0)).A.push(S[U]),t.m.push(Pa),h(t,0)}function Y(){for(var t=[],e=[],a=[],i=0,r=0;6>r;r++)for(var n=0;6>n;n++)t.push([-3+n,-3+r,1]),i++,t.push([-3+n,r+-2,1]),i++,t.push([n+-2,r+-2,1]),i++,t.push([n+-2,-3+r,1]),i++,e.push([i-4,i-3,i-2]),e.push([i-4,i-2,i-1]),a.push(7+(n+r&1)),a.push(7+(n+r&1)),6==r+1&&(t.push([-3+n,r+-2,1]),i++,t.push([n+-2,r+-2,1]),i++,t.push([n+-2,r+-2,1.5]),i++,t.push([-3+n,r+-2,1.5]),i++,e.push([i-4,i-3,i-2]),e.push([i-4,i-2,i-1]),a.push(7+(n+r&1)),a.push(7+(n+r&1))),0==n&&(t.push([-3+n,-3+r,1]),i++,t.push([-3+n,r+-2,1]),i++,t.push([-3+n,r+-2,1.5]),i++,t.push([-3+n,-3+r,1.5]),i++,e.push([i-4,i-3,i-2]),e.push([i-4,i-2,i-1]),a.push(7+(n+r&1)),a.push(7+(n+r&1))),6==n+1&&(t.push([n+-2,-3+r,1]),i++,t.push([n+-2,r+-2,1]),i++,t.push([n+-2,r+-2,1.5]),i++,t.push([n+-2,-3+r,1.5]),i++,e.push([i-4,i-2,i-3]),e.push([i-4,i-1,i-2]),a.push(7+(n+r&1)),a.push(7+(n+r&1)));return[t,e,a]}function Qa(t,e){var a,i=Oa("tree"),r=(t=JSON.parse(JSON.stringify(t)))[0].length;for(a in i[0])t[0].push([.5*i[0][a][0]+e.x,.5*i[0][a][1]+e.y,.5*i[0][a][2]+e.z]);for(var n in i[1])t[1].push([i[1][n][0]+r,i[1][n][1]+r,i[1][n][2]+r]);return t[2]=t[2].concat(i[2]),t}function La(t){N=Date.now()+1e3*t}function Z(){Da?"suspended"===u.state&&u.resume():(Da=!0,ra())}function Ra(){document.onkeydown=function(t){ja(t=t||window.event,1),Z()},document.onkeyup=function(t){ja(t=t||window.event,0),Z()},window.ondragstart=function(t){(t=t||window.event).preventDefault()},E=document.getElementById("canvas"),l=E.getContext("webgl2"),F=document.getElementById("osd"),ba=F.getContext("2d"),F.onmousedown=function(t){p(t=t||window.event,1),Z(),t.preventDefault()},F.onmousemove=function(t){t=t||window.event,r&&p(t,1)},F.onmouseup=function(t){p(t=t||window.event,0),Z()},F.onmouseout=function(){r=!1,m=0},F.addEventListener("touchstart",(function(t){oa(t=t||window.event,1),Z()})),F.addEventListener("touchmove",(function(t){t=t||window.event,r&&oa(t,1)})),F.addEventListener("touchend",(function(t){oa(t=t||window.event,0),Z()})),window.addEventListener("resize",(function(){Fa()})),Fa(),Ka(),xa=ha(),window.requestAnimationFrame(Na)}window.onload=function(){Ra()}</script><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" name=viewport><div id=wrapper><canvas height=360 id=canvas width=640></canvas><canvas height=360 id=osd width=640></canvas></div>