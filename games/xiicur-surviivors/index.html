<!doctype html><meta name=viewport content="width=device-width,maximum-scale=1,user-scalable=no"><title>Xiicur Surviivors - js13kGames 2024</title><style>body,html{padding:0;margin:0;width:100%;height:100%;background:#000}#a{width:100%;height:100%;position:relative;user-select:none}canvas{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}</style><div id=a><canvas id=c></canvas></div><script>var e,a,t,r,A,i=(e,a,t)=>{var r=Math.min(innerWidth/a,innerHeight/t);e.width=a,e.height=t,e.style.width=a*r+"px",e.style.height=t*r+"px"},c=(e,a,t)=>{var r=document.createElement("canvas"),A=(r.width=a,r.height=t,r.getContext("2d"));return A.clearRect(0,0,a,t),e(A),r},l=async e=>{let a=new Image;return a.src=e,await new Promise(e=>{a.onload=e}),a},s=(e,a,t,r,A,i)=>{e.drawImage(a,A*i,0,A,A,~~t,~~r,A,A)},o=(e,a,t,r,A,i)=>{e.save(),e.translate(t,r),e.scale(-1,1),s(e,a,-A,0,A,i),e.restore()},n="#212123",h="#352b42",d="#f2f0e5",u="#b45252",g="#a2dcc7",x="#567b79",y="#4e584a",p=(e=0,a=1)=>a+(e-a)*Math.random(),v=(e,a)=>Math.round(p(e,a)),m=(e,a,t)=>e<a?a:t<e?t:e,k=(e,a,t,r)=>(t-=e,e=r-a,Math.sqrt(t*t+e*e)),f=(e,a,t,r,A,i,c,l)=>e<A+c&&A<e+t&&a<i+l&&i<a+r,b=e=>{var a=k(0,0,e.x,e.y);1<a&&(e.x*=a=1/a,e.y*=a)},R=e=>({x:Math.sin(e),y:Math.cos(e)}),w=e=>{var a=v(0,e.length-1),[e]=e.splice(a,1);return e},S={dir:{x:0,y:0},ptr:{x:0,y:0},touchStartPos:void 0,clampedTouchPos:{x:0,y:0},btn:{spc:!1,clk:!1},btnp:{up:!1,lf:!1,dn:!1,rt:!1,spc:!1,clk:!1}},I=[],B=!1,D=e=>{B=e},E=e=>(I.push(e),()=>{I=I.filter(a=>a!==e)}),C=[],Q=e=>(C.push(e),()=>{C=C.filter(a=>a!==e)}),M=new AudioContext,T=(...e)=>{let a=M.createBuffer(e.length,e[0].length,44100),t=M.createBufferSource();return e.map((e,t)=>a.getChannelData(t).set(e)),t.buffer=a,t.connect(M.destination),t.start(),t},U=(e=1,a=.05,t=220,r=0,A=0,i=.1,c=0,l=1,s=0,o=0,n=0,h=0,d=0,u=0,g=0,x=0,y=0,p=1,v=0,m=0,k=0)=>{let f,b,R=2*Math.PI,w=e=>e<0?-1:1,S=s*=500*R/44100/44100,I=t*=(1+2*a*Math.random()-a)*R/44100,B=[],D=0,E=0,C=0,Q=1,M=0,T=0,U=0,P=R*Math.abs(k)*2/44100,G=Math.cos(P),V=Math.sin(P)/2/2,O=1+V,Y=-2*G/O,L=(1-V)/O,H=(1+w(k)*G)/2/O,N=-(w(k)+G)/O,K=H,z=0,J=0,W=0,X=0;for(o*=500*R/44100**3,g*=R/44100,n*=R/44100,h*=44100,d=44100*d|0,e*=.3,b=(r=44100*r+9)+(v*=44100)+(A*=44100)+(i*=44100)+(y*=44100)|0;C<b;B[C++]=U*e)++T%(100*x|0)||(U=c?1<c?2<c?3<c?Math.sin(D**3):Math.max(Math.min(Math.tan(D),1),-1):1-(2*D/R%2+2)%2:1-4*Math.abs(Math.round(D/R)-D/R):Math.sin(D),U=(d?1-m+m*Math.sin(R*C/d):1)*w(U)*Math.abs(U)**l*(C<r?C/r:C<r+v?1-(C-r)/v*(1-p):C<r+v+A?p:C<b-y?(b-C-y)/i*p:0),U=y?U/2+(y>C?0:(C<b-y?1:(b-C)/y)*B[C-y|0]/2/e):U,k&&(U=X=K*z+N*(z=J)+H*(J=U)-L*W-Y*(W=X))),f=(t+=s+=o)*Math.cos(g*E++),D+=f+f*u*Math.sin(C**5),Q&&++Q>h&&(t+=n,I+=n,Q=0),!d||++M%d||(t=I,s=S,Q=Q||1);return B},P=()=>{e.stop()},G=()=>T(Ha),V=()=>T(Na),O=()=>T(za),Y=()=>T(Ja),L=(e,a=!0)=>{let t=e,r={ticks:0,tick:e=>(r.ticks+=e)>t&&(a&&(r.ticks=0),!0),reset:()=>{r.ticks=0},clear:()=>{t=e,r.reset()},interval:e=>{t=e,r.reset()}};return r},H=0,N=!1,K=!1,z=0,J={x:160,y:90},W=L(700),X=L(200),F=L(5e3),j=L(200),q=L(3e3),Z=0,_={0:[0,1,2,0],1:[3,0,4,0],2:[0,0,0,0]},$=_[0].length,ee=(e,a,t,r)=>f(J.x,J.y,8,8,e,a,t,r),ae=(e,a,t,r)=>f(J.x-160,J.y-160,320,320,e,a,t,r),te={x:[],y:[],active:[]},re=[],Ae=!1,ie={x:0,y:0},ce=e=>{for(let a=0;a<te.x.length&&(!te.active[a]||!e(te.x[a],te.y[a],a));a++);},le={A:[[0,1],[1,0,1],[1,0,1],[1,1,1],[1,0,1]],B:[[1,1],[1,0,1],[1,1,1],[1,0,1],[1,1]],C:[[1,1,1],[1],[1],[1],[1,1,1]],D:[[1,1],[1,0,1],[1,0,1],[1,0,1],[1,1]],E:[[1,1,1],[1],[1,1,1],[1],[1,1,1]],F:[[1,1,1],[1],[1,1],[1],[1]],G:[[0,1,1],[1],[1,0,1,1],[1,0,0,1],[0,1,1]],H:[[1,0,1],[1,0,1],[1,1,1],[1,0,1],[1,0,1]],I:[[1,1,1],[0,1],[0,1],[0,1],[1,1,1]],J:[[1,1,1],[0,0,1],[0,0,1],[1,0,1],[1,1,1]],K:[[1,0,0,1],[1,0,1],[1,1],[1,0,1],[1,0,0,1]],L:[[1],[1],[1],[1],[1,1,1]],M:[[1,1,1,1,1],[1,0,1,0,1],[1,0,1,0,1],[1,0,0,0,1],[1,0,0,0,1]],N:[[1,0,0,1],[1,1,0,1],[1,0,1,1],[1,0,0,1],[1,0,0,1]],O:[[1,1,1],[1,0,1],[1,0,1],[1,0,1],[1,1,1]],P:[[1,1,1],[1,0,1],[1,1,1],[1],[1]],Q:[[0,1,1],[1,0,0,1],[1,0,0,1],[1,0,1,1],[1,1,1,1]],R:[[1,1],[1,0,1],[1,0,1],[1,1],[1,0,1]],S:[[1,1,1],[1],[1,1,1],[0,0,1],[1,1,1]],T:[[1,1,1],[0,1],[0,1],[0,1],[0,1]],U:[[1,0,1],[1,0,1],[1,0,1],[1,0,1],[1,1,1]],V:[[1,0,0,0,1],[1,0,0,0,1],[0,1,0,1],[0,1,0,1],[0,0,1]],W:[[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,1,0,1],[1,1,1,1,1]],X:[[1,0,0,0,1],[0,1,0,1],[0,0,1],[0,1,0,1],[1,0,0,0,1]],Y:[[1,0,1],[1,0,1],[0,1],[0,1],[0,1]],Z:[[1,1,1,1,1],[0,0,0,1],[0,0,1],[0,1],[1,1,1,1,1]],0:[[1,1,1],[1,0,1],[1,0,1],[1,0,1],[1,1,1]],1:[[0,1],[0,1],[0,1],[0,1],[0,1]],2:[[1,1,1],[0,0,1],[1,1,1],[1,0,0],[1,1,1]],3:[[1,1,1],[0,0,1],[1,1,1],[0,0,1],[1,1,1]],4:[[1,0,1],[1,0,1],[1,1,1],[0,0,1],[0,0,1]],5:[[1,1,1],[1,0,0],[1,1,1],[0,0,1],[1,1,1]],6:[[1,1,1],[1,0,0],[1,1,1],[1,0,1],[1,1,1]],7:[[1,1,1],[0,0,1],[0,0,1],[0,0,1],[0,0,1]],8:[[1,1,1],[1,0,1],[1,1,1],[1,0,1],[1,1,1]],9:[[1,1,1],[1,0,1],[1,1,1],[0,0,1],[1,1,1]]," ":[[0,0],[0,0],[0,0],[0,0],[0,0]],".":[[],[],[],[1,1],[1,1]],"-":[[],[],[1,1],[],[]],_:[[],[],[],[],[1,1,1]],"%":[[1,0,0,0,1],[0,0,0,1],[0,0,1],[0,1],[1,0,0,0,1]],"/":[[0,0,0,0,1],[0,0,0,1],[0,0,1],[0,1],[1]],x:[[],[],[1,0,1],[0,1],[1,0,1]],"+":[[],[],[0,1],[1,1,1],[0,1]],":":[[],[1],[],[1],[],[]],"!":[[1],[1],[1],[0],[1]]},se=(e,a,t,r,A)=>{let i=r;for(let r=0;r<a.length;r++){let l=le[a[r]],s=A,o=0;for(let a=0;a<l.length;a++){var c=l[a];for(let a=0;a<c.length;a++)c[a]&&e.fillRect(i+a*t,s,t,t);o=Math.max(o,c.length*t),s+=t}i+=t+o}},oe={};for(let e in le){let a=+Math.max(...le[e].map(e=>e.length)),t=c(a=>{a.fillStyle=d,se(a,e,1,0,0)},a,5);oe[e]={i:t,w:a}}var ne,he,de,ue,ge,xe,ye,pe,ve,me,ke,fe=(e,a,t,r)=>{let A=t,i=r;for(let r=0;r<a.length;r++){var c=a[r];"\n"===c?(i+=6,A=t):(c=oe[c],e.drawImage(c.i,~~A,~~i),A+=c.w+1)}},be={x:[],y:[],dur:[],str:[],active:[]},Re=[],we=e=>{for(let a=0;a<be.x.length&&(!be.active[a]||!e(a,be.x[a],be.y[a],be.str[a],be.dur[a]));a++);},Se={x:[],y:[],health:[],flipped:[],near:[],frame:[],frameTicker:[],dmgTicker:[],type:[],active:[]},Ie=[],Be=!1,De=!1,Ee=L(2e3),Ce=L(1e3),Qe=L(500),Me=L(250),Te=L(100),Ue=L(7e3),Pe=[0,1,2,1],Ge=Pe.length,Ve={0:10,1:30,2:55,3:70},Oe={0:.02,1:.03,2:.04,3:.05},Ye={0:10,1:12,2:20,3:30},Le={x:0,y:0},He=e=>{var a,t=R(p(0,2*Math.PI));return t.x=160*t.x+J.x,t.y=160*t.y+J.y,0<Ie.length?(a=Ie.pop(),Se.x[a]=t.x,Se.y[a]=t.y,Se.health[a]=Ve[e],Se.flipped[a]=!1,Se.frame[a]=0,Se.frameTicker[a]=0,Se.dmgTicker[a]=0,Se.near[a]=!1,Se.type[a]=e,Se.active[a]=!0,a):(Se.x.push(t.x),Se.y.push(t.y),Se.health.push(Ve[e]),Se.flipped.push(!1),Se.frame.push(0),Se.frameTicker.push(0),Se.dmgTicker.push(0),Se.near.push(!1),Se.type.push(e),Se.active.push(!0))},Ne=(e,a)=>{var t,r,A;Se.health[e]-=a,t=Se.x[e],r=Se.y[e],0<Re.length?(A=Re.pop(),be.x[A]=t,be.y[A]=r,be.dur[A]=0,be.str[A]=a,be.active[A]=!0):(be.x.push(t),be.y.push(r),be.dur.push(0),be.str.push(a),be.active.push(!0)),De=!0,Se.health[e]<=0?(Se.active[e]=!1,Ie.push(e),A=Se.x[e],t=Se.y[e],0<re.length?(r=re.pop(),te.x[r]=A,te.y[r]=t,te.active[r]=!0):(te.x.push(A),te.y.push(t),te.active.push(!0)),la.score+=1):Se.dmgTicker[e]=200},Ke=e=>{for(let a=0;a<Se.x.length&&(!Se.active[a]||!e(Se.x[a],Se.y[a],a,Se.flipped[a],Se.near[a],Se.frame[a],Se.frameTicker[a],Se.type[a],Se.dmgTicker[a]));a++);},ze=(e,a,t,r,A)=>f(a,t,r,A,Se.x[e]+4,Se.y[e]+4,8,8),Je=()=>{let e,a=1e3;if(Ke((t,r,A)=>{(t=k(J.x,J.y,t,r))<a&&(a=t,e=A)}),void 0!==e&&ae(Se.x[e],Se.y[e],8,8))return{x:Se.x[e],y:Se.y[e]}},We={x:[],y:[],dirx:[],diry:[],age:[],active:[]},Xe=[],Fe=L(2500),je=L(500),qe={x:[],y:[],dirx:[],diry:[],age:[],charge:[],active:[]},Ze=[],_e=L(2500),$e={x:Array(60).fill(0),y:Array(60).fill(0),age:Array(60).fill(0)},ea={x:Array(7).fill(0),y:Array(7).fill(0),charge:Array(7).fill(0)},aa=()=>{ge(),xe()},ta=e=>{We.active[e]=!1,Xe.push(e)},ra=e=>{for(let a=0;a<We.x.length&&(!We.active[a]||!e(We.x[a],We.y[a],We.dirx[a],We.diry[a],a));a++);},Aa=(e,a)=>{switch(e){case 0:case 1:return a.eBullet;case 2:case 13:return a.eHeart;case 4:case 5:case 6:return a.ePlasma;case 7:case 8:case 9:return a.eOrbs;case 3:return a.eShoes;case 10:case 11:return a.eSaber;case 12:return a.eMagnet}},ia=e=>{switch(e){case 0:return"++BULLET DMG";case 1:return"SHOOT FASTER";case 2:return"++MAX HEALTH";case 4:return 0<la.auraRadius?"++PLASMA SIZE":"PLASMA FIELD";case 5:return"++PLASMA DMG";case 6:return"++PLASMA PWR";case 7:return 0<la.orbs?"+1 ORB":"LASER ORB";case 8:return"LARGER SIZE";case 9:return"ORB ++DMG";case 3:return"MOVE FASTER";case 10:return la.saber?"FASTER THROWS":"LIGHTSABER";case 11:return"++DMG";case 12:return"++PICKUP DIST";case 13:return"HEAL"}},ca=e=>{switch(e){case 0:return la.bulletDmg<50;case 1:return 100<la.bulletRate;case 2:return la.maxHealth<200;case 4:return la.auraRadius<60;case 5:return 0<la.auraRadius&&la.auraDmg<52;case 6:return 0<la.auraRadius&&200<la.auraDmgRate;case 7:return la.orbs<7;case 8:return 0<la.orbs&&la.orbRadius<40;case 9:return 0<la.orbs&&la.orbsDmg<70;case 3:return la.speed<.15;case 10:return 400<la.saberRate;case 11:return la.saber&&la.saberDmg<80;case 12:return la.pickupRadius<70;case 13:return!0}},la={won:!1,score:0,time:0,health:0,maxHealth:0,xp:0,levelXp:0,speed:0,bulletDmg:0,bulletRate:0,auraRadius:0,auraDmg:0,auraDmgRate:0,orbs:0,orbRadius:0,orbsDmg:0,saber:!1,saberRate:0,saberDmg:0,pickupRadius:0},sa={x:0,y:0},oa=()=>{ye()},na={},ha=(e,a)=>{na[e].forEach(e=>e(a))},da=[[4,18],[181,42],[320/3,135],[45,131]],ua=[[320/3+81,28],[40,180/7*4]],ga=()=>{ve(),me()};na[0]=[];var xa,ya,pa=()=>{2===ke&&(oa(),pe(),de(),ue(),r(),A(),a(),t(),aa(),ga(),ne(),he())},va=()=>{pa(),ha(0,ke=4),P()},ma=()=>{ga(),aa(),oa(),P(),ha(0,ke)},ka=0,fa=[],ba=e=>()=>{switch(fa[e]){case 0:la.bulletDmg+=10;break;case 1:la.bulletRate-=600,Fe.interval(la.bulletRate);break;case 2:la.maxHealth+=20;break;case 4:0===la.auraRadius?la.auraRadius=30:la.auraRadius+=10;break;case 5:la.auraDmg+=7;break;case 6:la.auraDmgRate-=100,je.interval(la.auraDmgRate);break;case 7:la.orbs+=1;break;case 8:la.orbRadius+=10;break;case 9:la.orbsDmg+=10;break;case 3:la.speed+=.01;break;case 10:la.saber=!0,la.saberRate-=700,_e.interval(la.saberRate);break;case 11:la.saberDmg+=10;break;case 12:la.pickupRadius+=10;break;case 13:la.health=m(la.health+5,0,la.maxHealth)}D(!1),ha(0,ke=2)},Ra=L(900),wa=L(500),Sa=L(4e3,!1),Ia=!1,Ba=!1,Da=(na[0]=na[0]||[],na[0].push(e=>{var a;3!==e&&(1!==xa&&4!==xa||2!==e)||(Ra.reset(),Ba=!0),3===e&&(fa.splice(0),fa.push(...((a=[0,1,2,3,4,5,6,7,8,9,11,10,12,13].filter(ca)).length<3&&a.push(13,13),[w(a),w(a),w(a)]))),ya=xa,xa=e}),(e,a,t,r,A)=>{let i={x:e,y:a,w:t,h:r,hovered:!1,update:()=>{var c,l;Ba||(i.hovered=(c=320*S.ptr.x,l=180*S.ptr.y,e<c&&a<l&&c<e+t&&l<a+r),S.btnp.clk&&i.hovered&&A())},click:A};return i}),Ea=32,Ca=Da(126,120,72,Ea,()=>{sa.x=0,sa.y=0,ye=E((e,a)=>{sa.x+=a.dir.x*la.speed*e,sa.y+=a.dir.y*la.speed*e}),pe=Q((e,a)=>{e.fillStyle="#7b7243",e.fillRect(0,0,320,180);for(let A=0;A<da.length;A++){var t=~~(da[A][0]-sa.x),r=~~(da[A][1]-sa.y);e.drawImage(a.rocks[0],0<t?t%320:320+t%320,0<r?r%180:180+r%180)}for(let t=0;t<ua.length;t++){var A=~~(ua[t][0]-sa.x),i=~~(ua[t][1]-sa.y);e.drawImage(a.rocks[1],0<A?A%320:320+A%320,0<i?i%180:180+i%180)}}),J.x=160,J.y=90,la.health=100,z=0,N=K=!1,W.clear(),X.clear(),F.clear(),a=E((e,a)=>{2===z?(F.tick(e)&&va(),j.tick(e),q.tick(e)):(J.x+=a.dir.x*la.speed*e,J.y+=a.dir.y*la.speed*e,0===a.dir.x&&0===a.dir.y?z=0:(z=1,0!==a.dir.x&&(K=a.dir.x<0)),N=N&&!W.tick(e),0<H&&(--la.health,--H,la.health<=0)&&(ma(),z=2),X.tick(e)&&(Z=(Z+1)%$))}),t=Q((e,a)=>{var t;N&&W.ticks%10==0&&2!==z||(t=K?5:0,a=a.hero[_[z][Z]+t],2!==z||(t=F.ticks)<1e3?e.drawImage(a,~~(J.x-4-sa.x),~~(J.y-4-sa.y)):t<3e3?(e.drawImage(a,~~(J.x-4-sa.x),~~(J.y-4-sa.y)),t=j.ticks/200,e.strokeStyle=d,e.beginPath(),e.arc(J.x+4-sa.x,J.y+4-sa.y,20*t,0,2*Math.PI),0==t&&V(),e.stroke()):0===q.ticks&&O())}),te.x=[],te.y=[],te.active=[],re=[],r=E(e=>{ce((a,t,r)=>{k(a,t,J.x,J.y)<la.pickupRadius&&(ie.x=J.x-a,ie.y=J.y-t,b(ie),te.x[r]+=ie.x*e*.16,te.y[r]+=ie.y*e*.16),ee(te.x[r]-4,te.y[r]-4,8,8)&&(la.xp+=10,la.xp>la.levelXp&&(la.xp-=la.levelXp,la.levelXp+=70,D(!0),ha(0,ke=3),T(Ka)),Ae=!0,te.active[r]=!1,re.push(r))}),Ae&&(T(La),Ae=!1)}),A=Q((e,a)=>{ce((t,r)=>{e.drawImage(a.coin,~~(t-4-sa.x),~~(r-4-sa.y))})}),Se.x=[],Se.y=[],Se.health=[],Se.flipped=[],Se.near=[],Se.frame=[],Se.frameTicker=[],Se.dmgTicker=[],Se.type=[],Se.active=[],Ie=[],Ee.clear(),Ce.clear(),Qe.clear(),Me.clear(),Be=!1,de=E(e=>{la.time<30?Ce.tick(e)&&He(0):la.time<60?Qe.tick(e)&&He(0):la.time<90?(Ce.tick(e)&&He(0),Ee.tick(e)&&He(1)):la.time<120?(Qe.tick(e)&&He(0),Ce.tick(e)&&He(1)):la.time<180?(Me.tick(e)&&He(0),Qe.tick(e)&&He(1)):la.time<240?Me.tick(e)&&(He(0),He(1)):la.time<270?Te.tick(e)&&(He(0),He(0),He(0)):la.time<300?Te.tick(e)&&(He(1),He(1)):la.time<330?(Qe.tick(e)&&He(1),Ee.tick(e)&&He(2)):la.time<360?(Me.tick(e)&&He(1),Qe.tick(e)&&(He(0),He(2))):la.time<420?(Me.tick(e)&&(He(0),He(1)),Qe.tick(e)&&He(2)):la.time<480?Te.tick(e)&&He(2):la.time<540?(Te.tick(e)&&(He(1),He(1)),Me.tick(e)&&He(2)):la.time<600?Te.tick(e)&&(He(1),He(2)):la.time<630?(Te.tick(e)&&(He(1),He(1),He(2)),Me.tick(e)&&He(2),Ce.tick(e)&&He(3)):la.time<660?(Qe.tick(e)&&He(2),Ce.tick(e)&&(He(3),He(0))):la.time<690?(Qe.tick(e)&&He(3),Me.tick(e)&&He(2)):la.time<720?(Me.tick(e)&&He(3),Qe.tick(e)&&(He(2),He(1))):la.time<750?(Me.tick(e)&&(He(2),He(1)),Qe.tick(e)&&(He(3),He(0))):la.time<780?Te.tick(e)&&(He(3),He(3),He(2),He(1),He(0),He(0),He(0)):(Be||(la.won=!0,ma(),Ke((e,a,t)=>{Ne(t,1e3)}),Be=!0),Ue.tick(e)&&(Y(),va())),Ke((a,t,r,A,i,c,l,s)=>{Se.near[r]=ae(a+4,t+4,8,8),Se.near[r]&&ee(a+4,t+4,8,8)?N||(H+=Ye[s],N=!0,W.reset(),O()):(Le.x=J.x-a,Le.y=J.y-t,b(Le),a=Oe[s],Se.x[r]+=Le.x*a*e,Se.y[r]+=Le.y*a*e,Se.flipped[r]=Le.x<0),200<(Se.frameTicker[r]+=e)&&(Se.frameTicker[r]=0,Se.frame[r]=(Se.frame[r]+1)%Ge),0<Se.dmgTicker[r]&&(Se.dmgTicker[r]-=e)});for(let e=0;e<Se.active.length;e++)if(Se.active[e]&&Se.near[e])for(let r=e+1;r<Se.active.length;r++){var a,t;Se.active[r]&&Se.near[r]&&f(Se.x[e],Se.y[e],8,8,Se.x[r],Se.y[r],8,8)&&(a=Math.max(Se.x[e]+8-Se.x[r],1),(t=Math.max(Se.y[e]+8-Se.y[r],1))<a?(Se.y[e]-=t/2,Se.y[r]+=t/2):(Se.x[e]-=a/2,Se.x[r]+=a/2))}De&&(V(),De=!1)}),ue=Q((e,a)=>{Ke((t,r,A,i,c,l,s,o,n)=>(o=(0===o?a.mob0:1===o?a.mob1:2===o?a.mob2:a.mob3)[Pe[l]+(i?3:0)],0<n&&n%10==0||e.drawImage(o,~~(t-sa.x),~~(r-sa.y)),!1))}),We.x=[],We.y=[],We.dirx=[],We.diry=[],We.age=[],We.active=[],Xe=[],Fe.clear(),je.clear(),qe.x=[],qe.y=[],qe.dirx=[],qe.diry=[],qe.age=[],qe.charge=[],qe.active=[],Ze=[],_e.clear(),ge=E(e=>{var a,t,r,A,i,c,l,s;if(Fe.tick(e)&&(r=Je())&&(A=r.x-J.x,r=r.y-J.y,A=Math.atan2(A,r),i=J.x,c=J.y,l=R(A),0<Xe.length?(s=Xe.pop(),We.x[s]=i,We.y[s]=c,We.dirx[s]=l.x,We.diry[s]=l.y,We.age[s]=0,We.active[s]=!0):(We.x.push(i),We.y.push(c),We.dirx.push(l.x),We.diry.push(l.y),We.age.push(0),We.active.push(!0)),G()),ra((a,t,r,A,i)=>{We.x[i]+=.2*r*e,We.y[i]+=.2*A*e,We.age[i]+=e,3e3<We.age[i]?ta(i):Ke((e,a,t)=>{if(ze(t,We.x[i],We.y[i],8,8))return Ne(t,la.bulletDmg),ta(i),!0})}),0<la.auraRadius){for(let r=0;r<~~(la.auraRadius/2);r++)500<=($e.age[r]+=e)&&($e.age[r]=v(0,250),a=p(0,2*Math.PI),t=p(0,la.auraRadius),$e.x[r]=J.x+Math.sin(a)*t,$e.y[r]=J.y+Math.cos(a)*t);je.tick(e)&&Ke((e,a,t)=>{k(J.x,J.y,e+4,a+4)<la.auraRadius&&Ne(t,la.auraDmg)})}if(0<la.orbs)for(let a=0;a<la.orbs;a++){var o=a/la.orbs*2*Math.PI-4*la.time;ea.x[a]=J.x+4+Math.sin(o)*la.orbRadius,ea.y[a]=J.y+4+Math.cos(o)*la.orbRadius,ea.charge[a]+=e,200<=ea.charge[a]&&(ea.charge[a]=0,Ke((e,t,r)=>{ze(r,ea.x[a]-4,ea.y[a]-4,8,8)&&Ne(r,la.orbsDmg)}))}if(la.saber){_e.tick(e)&&(r=Je())&&(A=r.x-J.x,r=r.y-J.y,A=Math.atan2(A,r),r=R(A),0<Ze.length?(A=Ze.pop(),qe.x[A]=J.x,qe.y[A]=J.y,qe.dirx[A]=r.x,qe.diry[A]=r.y,qe.age[A]=0,qe.charge[A]=0,qe.active[A]=!0):(qe.x.push(J.x),qe.y.push(J.y),qe.dirx.push(r.x),qe.diry.push(r.y),qe.age.push(0),qe.charge.push(0),qe.active.push(!0)),G());for(let a=0;a<qe.x.length;a++)qe.active[a]&&(qe.x[a]+=.09*qe.dirx[a]*e,qe.y[a]+=.09*qe.diry[a]*e,qe.age[a]+=e,qe.charge[a]+=e,3e3<qe.age[a]?(qe.active[a]=!1,Ze.push(a)):200<=qe.charge[a]&&(qe.charge[a]=0,Ke((e,t,r)=>{if(ze(r,qe.x[a],qe.y[a],16,16))return Ne(r,la.saberDmg),!0})))}}),xe=Q((e,a)=>{if(ra((t,r,A,i,c)=>{e.drawImage(a.bullet,~~(t-sa.x),~~(r-sa.y),8,8)}),0<la.auraRadius){e.fillStyle=g+"33",e.beginPath(),e.arc(J.x+4-sa.x,J.y+4-sa.y,la.auraRadius,0,2*Math.PI),e.fill(),e.fillStyle=g;for(let a=0;a<~~(la.auraRadius/2);a++)e.fillRect(~~($e.x[a]-sa.x),~~($e.y[a]-sa.y),1,1)}if(0<la.orbs)for(let t=0;t<la.orbs;t++)e.drawImage(a.orb,~~(ea.x[t]-4-sa.x),~~(ea.y[t]-4-sa.y));if(la.saber)for(let A=0;A<qe.x.length;A++){var t,r;qe.active[A]&&(t=qe.x[A]-sa.x,r=qe.y[A]-sa.y,f(t,r,16,16,0,0,320,180))&&(e.save(),e.translate(8+t,8+r),e.rotate(20*la.time),e.translate(-(8+t),-(8+r)),e.drawImage(a.saber,~~t,~~r),e.restore())}}),ne=E(e=>{we((a,t,r,A,i)=>{be.dur[a]+=e,300<=be.dur[a]&&(be.active[a]=!1)})}),he=Q(e=>{we((a,t,r,A,i)=>{e.fillStyle=d,fe(e,A+"",t-sa.x,r-sa.y-i/10)})}),ve=E(e=>{la.time+=e/1e3}),me=Q((e,a)=>{e.fillStyle=n+"44",e.beginPath(),e.arc(J.x-sa.x,J.y-sa.y,120,0,2*Math.PI),e.rect(320,0,-320,180),e.fill(),e.beginPath(),e.arc(J.x-sa.x,J.y-sa.y,100,0,2*Math.PI),e.rect(320,0,-320,180),e.fill(),e.fillStyle=u,e.fillRect(30,10,~~(la.health/la.maxHealth*160),5),e.fillStyle="#4b80ca",e.fillRect(30,20,~~(la.xp/la.levelXp*160),5),e.strokeStyle=h,e.strokeRect(30,10,160,5),e.strokeRect(30,20,160,5),e.drawImage(a.eHeart,20,8,8,8),e.drawImage(a.eXp,20,18,8,8);var t=(a=~~la.time)%60;fe(e,~~(a/60)+":"+(t<10?"0"+t:t),270,10),S.touchStartPos&&(e.fillStyle="#ffe7",e.beginPath(),e.arc(320*S.touchStartPos.x,180*S.touchStartPos.y,30,0,2*Math.PI),e.closePath(),e.fill(),e.beginPath(),e.arc(320*(S.touchStartPos.x+S.clampedTouchPos.x),180*(S.touchStartPos.y+S.clampedTouchPos.y),10,0,2*Math.PI),e.closePath(),e.fill())}),ha(0,ke=2),la.won=!1,la.score=0,la.time=0,la.health=100,la.maxHealth=100,la.xp=0,la.levelXp=50,la.speed=.06,la.bulletDmg=10,la.bulletRate=2500,la.auraRadius=0,la.auraDmg=10,la.auraDmgRate=500,la.orbs=0,la.orbRadius=20,la.orbsDmg=10,la.saber=!1,la.saberRate=2500,la.saberDmg=20,la.pickupRadius=20,Y(),setTimeout(()=>{(e=T(...Ya)).loop=!0},2e3)}),Qa=Da(45,80,Ea,Ea,ba(0)),Ma=Da(135,80,Ea,Ea,ba(1)),Ta=Da(225,80,Ea,Ea,ba(2)),Ua=document.getElementById("c"),Pa=document.createElement("canvas"),Ga=Pa.getContext("2d"),Va=(e=>{let a,t=!1,r="ontouchstart"in window,A={up:!1,lf:!1,dn:!1,rt:!1},i={up:!1,lf:!1,dn:!1,rt:!1,spc:!1,clk:!1,esc:!1},c=e=>({key:a})=>{switch(t=!0,a){case"ArrowUp":case"w":case"z":A.up=e;break;case"ArrowDown":case"s":A.dn=e;break;case"ArrowLeft":case"a":case"q":A.lf=e;break;case"ArrowRight":case"d":A.rt=e;break;case" ":S.btn.spc=e}};return onkeydown=c(!0),onkeyup=c(!1),window.ongamepadconnected=e=>{1<e.gamepad.axes.length&&0<e.gamepad.buttons.length&&(a=e.gamepad)},window.ongamepaddisconnected=()=>{a=void 0},oncontextmenu=e=>{e.preventDefault()},e.onpointerdown=()=>S.btn.clk=!0,e.onpointerup=()=>S.btn.clk=!1,e.onpointermove=a=>{S.ptr.x=a.offsetX/e.clientWidth,S.ptr.y=a.offsetY/e.clientHeight},r&&(e.ontouchstart=e.ontouchmove=e.ontouchend=e.ontouchcancel=a=>{var t;a.preventDefault(),S.btn.clk&&(t=e.getBoundingClientRect(),a=a.touches[0],S.ptr.x=(a.clientX-t.left)/e.clientWidth,S.ptr.y=(a.clientY-t.top)/e.clientHeight)}),()=>{var e;t&&(S.dir.x=S.dir.y=0,S.dir.x+=A.rt?1:0,S.dir.x-=A.lf?1:0,S.dir.y-=A.up?1:0,S.dir.y+=A.dn?1:0,b(S.dir),t=!1),a&&(S.dir.x=a.axes[0],S.dir.y=a.axes[1],S.btn.spc=a.buttons[0]?.pressed),r&&(S.btn.clk?S.touchStartPos?(e=30/180,S.clampedTouchPos.x=m(S.ptr.x-S.touchStartPos.x,-.09375,.09375),S.clampedTouchPos.y=m(S.ptr.y-S.touchStartPos.y,-e,e),S.dir.x=S.clampedTouchPos.x/.09375,S.dir.y=S.clampedTouchPos.y/e,b(S.dir)):S.touchStartPos={x:S.ptr.x,y:S.ptr.y}:S.touchStartPos&&(S.touchStartPos=void 0,S.dir.x=0,S.dir.y=0)),S.btnp.up=A.up&&!i.up,S.btnp.dn=A.dn&&!i.dn,S.btnp.lf=A.lf&&!i.lf,S.btnp.rt=A.rt&&!i.rt,S.btnp.clk=S.btn.clk&&!i.clk,S.btnp.spc=S.btn.spc&&!i.spc,i.up=A.up,i.dn=A.dn,i.lf=A.lf,i.rt=A.rt,i.clk=S.btn.clk,i.spc=S.btn.spc}})(Ua),Oa=((e,a,t)=>{let r=e.getContext("webgl2");i(e,1280,720),e.width=1280,e.height=720,r.viewport(0,0,1280,720),r.enable(3042),r.blendFunc(770,771),e=r.createVertexArray(),a=r.createBuffer(),t=r.createTexture();var A=r.createProgram(),c=r.createShader(35633),l=r.createShader(35632);return r.shaderSource(c,"#version 300 es\nprecision lowp float;layout(location=0)in vec2 aPos;out vec2 vTex;void main() {vec2 vwPos = aPos * 2. - 1.;vTex = vec2(aPos.x, 1. - aPos.y);gl_Position = vec4(vwPos, 0., 1.);}"),r.shaderSource(l,"#version 300 es\nprecision lowp float;in vec2 vTex;out vec4 outColor;uniform sampler2D uTex;void main() {vec2 uv = vTex;vec2 dc = abs(0.5-uv);dc *= dc;uv.x -= 0.5; uv.x *= 1.0+(dc.y*(0.3*0.25)); uv.x += 0.5;uv.y -= 0.5; uv.y *= 1.0+(dc.x*(0.4*0.25)); uv.y += 0.5;if(uv.y > 1.0 || uv.x < 0.0 || uv.x > 1.0 || uv.y < 0.0)outColor = vec4(0.0,0.0,0.0,1.0);else{float apply = abs(sin(vTex.y*720.)*0.5*0.25);outColor = vec4(mix(texture(uTex,uv).rgb,vec3(0.0),apply),1.0);}}"),r.compileShader(c),r.compileShader(l),r.attachShader(A,c),r.attachShader(A,l),r.linkProgram(A),r.useProgram(A),r.bindVertexArray(e),r.enableVertexAttribArray(0),r.bindBuffer(34962,a),r.bufferData(34962,new Float32Array([0,0,1,0,1,1,0,0,1,1,0,1]),35044),r.vertexAttribPointer(0,2,5126,!1,0,0),r.bindTexture(3553,t),r.texParameteri(3553,10240,9728),r.texParameteri(3553,10241,9728),e=>{r.texImage2D(3553,0,6408,6408,5121,e.canvas),r.clearColor(0,0,0,1),r.clear(16384),r.drawArrays(4,0,6)}})(Ua),Ya=((e,a,t)=>{let r,A,i,c,l,s,o,n,h,d,u,g,x,y,p=0,v=[],m=[],k=[],f=0,b=0,R=1,w={};for(;R;f++)v=[R=n=g=0],t.map((S,I)=>{for(o=a[S][f]||[0,0,0],R|=!!a[S][f],y=g+5292*(a[S][0].length-2-!n),x=I==t.length-1,A=2,c=g;A<o.length+x;n=++A){for(l=o[A],h=A==o.length+x-1&&x||d!=(o[0]||0)|l|0,i=0;i<5292&&n;5193<i++&&h&&(u+=(u<1)/99))s=(1-u)*v[p++]/2||0,m[c]=(m[c]||0)-s*b+s,k[c]=(k[c++]||0)+s*b+s;l&&(u=l%1,b=o[1]||0,l|=0)&&(v=w[[d=o[p=0]||0,l]]=w[[d,l]]||((r=[...e[d]])[2]*=2**((l-12)/12),0<l?U(...r):[]))}g=y});return[m,k]})([[,0,84,,,,,.7,,,,.5,,6.7,1,.05],[,0,25,.002,.02,.08,3,,,,,,,,,.1,.01],[,0,655,,,.09,3,1.65,,,,,.02,3.8,-.1,,.2],[,0,740,,,.15,2,.2,-.1,-.15,9,.02,,.1,.12,,.06]],[[[1,-.3,,,,,,,,,,,,,,15,15,15],[,.2,13,,,,25,,,,13,,,,25,,,,],[2,,,,27,,,,27,,,,27,,,,27,,]],[[1,-.3,,,,,,,,,,,,,,15,15,15],[,.2,13,,,,25,,,,13,,,,25,,,,]],[[1,-.3,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20],[,.2,13,,,,25,,,,13,,,,25,,,,13,,,,25,,,,13,,,,25,,,,13,,,,25,,,,13,,,,25,,,,13,,,,25,,,,13,,,,25,,,,]],[[1,-.3,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20],[,.2,13,,,,25,,,,13,,,,25,,,,13,,,,25,,,,13,,,,25,,,,13,,,,25,,,,13,,,,25,,,,13,,,,25,,,,13,,,,25,,,,],[2,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,],[3,,29,,24,,20,,15,,29,,24,,20,,15,,27,,24,,20,,15,,27,,24,,20,,15,,29,,24,,20,,15,,29,,24,,20,,15,,27,,24,,20,,15,,27,,24,,20,,15,,]],[[1,-.3,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20],[,.2,13,,,,25,,,,13,,,,25,,,,13,,,,25,,,,13,,,,25,,,,13,,,,25,,,,13,,,,25,,,,13,,,,25,,,,13,,,,25,,,,],[2,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,]],[[1,-.3,29,29,25,25,24,24,20,20,29,29,25,25,24,24,20,20,27,27,25,25,24,24,20,20,27,27,25,25,24,24,20,20,29,29,25,25,24,24,20,20,29,29,25,25,24,24,20,20,27,27,25,25,24,24,20,20,27,27,25,25,24,24,20,20],[,.2,13,,,,25,,,,13,,,,25,,,,13,,,,25,,,,13,,,,25,,,,13,,,,25,,,,13,,,,25,,,,13,,,,25,,,,13,,,,25,,,,],[2,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,],[3,,29,,24,,20,,15,,29,,24,,20,,15,,27,,24,,20,,15,,27,,24,,20,,15,,29,,24,,20,,15,,29,,24,,20,,15,,27,,24,,20,,15,,27,,24,,20,,15,,]],[[2,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,],[3,,29,,24,,20,,15,,29,,24,,20,,15,,27,,24,,20,,15,,27,,24,,20,,15,,29,,24,,20,,15,,29,,24,,20,,15,,27,,24,,20,,15,,27,,24,,20,,15,,]],[[1,-.3,29,29,25,25,24,24,20,20,29,29,25,25,24,24,20,20,27,27,25,25,24,24,20,20,27,27,25,25,24,24,20,20,29,29,25,25,24,24,20,20,29,29,25,25,24,24,20,20,27,27,25,25,24,24,20,20,27,27,25,25,24,24,20,20],[,.2,13,,,,25,,,,13,,,,25,,,,13,,,,25,,,,13,,,,25,,,,13,,,,25,,,,13,,,,25,,,,13,,,,25,,,,13,,,,25,,,,],[2,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,,,27,,]]],[1,1,1,1,0,0,0,0,0,0,2,2,4,4,3,3,5,5,6,7,1,1,5,3,4,4]),La=U(void 0,void 0,600,void 0,void 0,.25,void 0,void 0,void 0,void 0,200,.05,void 0,void 0,void 0,void 0,void 0,1.5,void 0,.01),Ha=U(void 0,void 0,500,.05,.04,.02,1,1.1,-10,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,.3),Na=U(void 0,void 0,246,void 0,.02,.17,4,.4,-8,void 0,void 0,void 0,void 0,1,20,void 0,void 0,.2,.02),Ka=U(2.1,void 0,139,.05,.16,.36,1,1.1,void 0,1,357,.07,.04,void 0,void 0,void 0,.2,.53,.12,.21),za=U(.6,0,270,.01,void 0,.2,3,3,void 0,-26,void 0,void 0,void 0,void 0,void 0,void 0,void 0,.05,.07),Ja=U(1.6,void 0,521,.1,.25,.34,1,3.2,void 0,void 0,437,.09,.02,void 0,void 0,void 0,.13,.5,.27);(async()=>{let e=await(async()=>{let e=await l("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAQCAYAAACBSfjBAAAB80lEQVRYR2NkGAUUhQAjRbqxaDbVdvqPz8zTV/fhtXOo6cfwDCUeAOk1nj4RZ/hZSX1hmOxfzYArEAezfpDbjz3jYTibmY/ifpQApMQDIL1ioR0Msk6ceBM1rkAcCvqxBSI8AIeCB0AxM5ARQPMADG2VA6e+e0LFJGdjUAQOdv0EA5BaHjh4IQtvVkYvR0ChjRyAA60fXwIAuRXZ/ShZGBaA1PAAyCJc5SExATjQ+vGV5UQFICUewFeLWChzMBRH3MKoiZFT4GDVD3L7ibs/GFZXP4K7H2sKJMcDsGzIyisG1h5QwYHVGGTL0RWAAnEw68cW+RjNGEo8gB6I3DzfUcLow/PPONuAMIXIgTgU9GNtSMMCkVwPzCtVY5ByNAOHydzzhxiSDe3AbA+vJTgDsGtDArgHA0qh+PTDyumygAVwt8P0gsRAEUDIfmT1yDEME/f8wAF3f+as2wzT01Th7pfU5WDYtGIb3G4MR5DjAZDpyAEAssQmApKVkQHIbGwBQKl+9ADEZz+oF0QoAI+seIXT/UQFIL0DADmQQSmIUADgK6PprR9rFvaW+8HAla4Gzk4ggMwnZjBgOOkH+RcUKbjCAGcAqhspMkS2LgXLN3ha/Qfx+zY8J6oSAFk2UPphFRnMDTfP3Qe7hVS3o6uHBSK6WQByWKEvYrCHVwAAAABJRU5ErkJggg=="),a=await l("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAQCAYAAABQrvyxAAAA8UlEQVRIS9WWvRHCMAyFnZIhmCAlxwLZhiqzUGWbLMBRZgKGoIRT7pQzsqyfmBji2u9Z37OtUxN2vpqd1x9YgHPbvTiw2zT+HXBSEBR/Gq7sxdwvfbBA1AzgA0AqHok0iNoBqABQcHwjEsAvAhABoFhcCOEF2DoA8Q9QAO/zqRGACgDJY4prAEr18Qvgzjd3IW/xXBvzesTBYRC0C6qf+Bvdx+JhaQDgQ0NYADQDb3reG9DOz4WQADzGZ3L2sTsk5HQTFsDpYa/moelzHjPAWjFCWPQShFXPeSwAnqGOfqTc6JDzLNWDL3psMsyVzkIe/RvbKi8gvX+8OQAAAABJRU5ErkJggg=="),t=await l("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAQCAYAAABQrvyxAAABdElEQVRIS9VWO27CQBC1cwAKCitHQKLmAhQoQkqRBm4CVapUcA6apElBR8EFUkfKEZALChACKQXRLBrreTxjdr0iEtvw8by3780P0uTOT4r6e93+mT5/fa9L34fG/GdOCqEk/m0+dXe/TmaqCYp5GQ1czOfHqohh49fM0/OQWJ9EOAMonkHSBIpHAxJLOD5YSRbOCZAcUqzsAjSO/GoFpAlLvGX+Gr4uAYi1KoBdUJkBbCOLoC47PnjZalYHtB47hYTjYeve/+7zhAxQC9OpDCuXKsuy5PTQVgl8hjwUL1sE8Sx++T5InscrZ4KTUKkAAfmwAY1AM0EimuIlljTg/SyeXp+Gi2KBlGYAL/clYLNNBWj4PL9kWKsCtxEnUDUQQhArAPHU87vNj7qecR6x+iUDTQhiBaAwqqKmgQXTc9m6lRkIJYgVIDed9kOHwqUJcwvhqqsjiBVgrWqZGKsK5n8eX4JYAT74uhgvA7GX3BJ/9wb+AKXXn2JBm/VRAAAAAElFTkSuQmCC"),r=await l("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAQCAYAAABQrvyxAAABT0lEQVRIS9WWMQrCQBBFN51VSksbwcZasPYOgvewtJAUlp7CRvAOXiCtglqJpZV4AWUCH8ZkZ2Y3MYKpwuruvD/zZzaJ+/Mn8fGPhpOXbz0/7r3//3YOYuJ/AGHjejvwMs1nl2LdEhIDwAPViV8RwOGfy3txfpp1Hd6z80MUUAegLCA2fkXAdNVz435HdAVVQaoACYgFKAuIjV/xNEFIh2jwBKLtBWiTM3x7xSYui7ACA7BJArQzpPjiVCk3otW4lhVCE8BFSD7mLOYYhacxgUKmEOwUAiCNcXLAdZO6/HRwxEDx+RpEqBYKOaApgHUPWQlspQLcfhaAlgA+DaN6wNeIMR7+5X6xAjxzmEihIr4pAN7fLW7e+0e8B6i02AQgvqZ9/3ABBIAmrDPJiEEbHGoP8IDwdSgERBAAVVDKoJQI3kdazFa/LkMhtGpav70BoUZSIApIX7UAAAAASUVORK5CYII="),A=await l("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAQCAYAAABQrvyxAAABJklEQVRIS72VLQ7CQBCFtwKJxXABEhCYGurgHJyDA+C4BucAh6pBQMIFMLVIBGRoJpndbDs/y3ZN06Zv533bmdfCZVrlfP2JbV3fz8U/S3ZulmIAtPvDzq2qhed1U22dFEBaPwqQaoDqwfTpcnRwhSUB0NRnAVIN5NZnB6A9JG0hzRdkAawGUAftA2vwFkoxQKFxGCW9jzo6wNwBsJFmMQBGYimigQhhurSqGJUaAPOj8cSL0PerESVQ7Cvgs1j9zhlIMYAAy2kLcX02TgOgOYBegFQDQ+izAOAMlLP2T1w/bur2gQ6QHEDvDFgNUABt+9AZkNRnASwGoIehuEUbAnB7eABQGCbdYoBqafxIkgu1WvPw/g+AbhDmN2cgLO5lp/LG8u/4AmmZYSCJrToFAAAAAElFTkSuQmCC"),i=await l("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAVklEQVQYV2NkQAKm2k7/QdzTV/cxwoThDJBkc1c5g5W1DoOzdSxcEVgBTBLEBikAAZgiKioIDHMDG21kYgima8s6we5AcSRIEUgBTBKkEK4A5lh0bwIASnsyCb4xmwAAAAAASUVORK5CYII="),n=await l("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAQ0lEQVQYV2NkIAAYYfKm2k7/kdWevroPLAcmQJI7tsWgmOXhtYQBpAhFASu/O1jR7487GchTgGwHigkwd+B0JD6fAgA0lyoJwxgCagAAAABJRU5ErkJggg=="),h=await l("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAAAICAYAAABatbkrAAAB6UlEQVRIS6VVMSxEQRDdKyQKCa1SFAoSjYtwUSBBNGhUVCgUokOIXC5C0CpRUWnQCBIUcoccxQWF4kgUrqW7REHeJrOZP3b+/3Lb3O3uzO7bN+/NT5gYI9nc80Nh+efLhJZCcTJmLbPu8nnuYnohcJaWjxyOAXMNB+L4ng972HvkPRagBMbn+H96MubeNTC47wWHuJXNedOZajG9qXEXo5FDBxJJyJ85XjW5jxrzMD0buAN7DcPtpi1ZMvf5epv6dnTnYiQpvAiEa3luIxAPrHyNchA/Mtpnp4cH5yaBhXRTnV3IvHzaXzkHQVW1/eb768z4COLk0EVEUqUEETnlYsFUN7YGxAuSMEDs1tDSn8JRoSUZPtIkQa/vRVO4LQYJktYhwsIU5COHk0TV0GzJFYSHYMhqQz1ygLDSY9mS4lMQKRLEoeB4C1mPRCHX6I6AgrDIVURBWrLP+9K3dAZiJyemvP2HYnZ2t53NOTD+GE6QZjNfAQhXFEFkq6vrG9Pd1WGPcgri0uLWimrGYfsc7H8I8vUgshjOlDaL04fitBCfyv8QRErCbxQ5sJzWrGUlKyWIcEmbSXJkH+K2C3MI9i6yewHYueyTs7r6ydZ6BgGOqyDEaySRvbiKtQJFfeYlIRKflq+1B8L0C2GZriA+26fSAAAAAElFTkSuQmCC"),d=await l("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAICAYAAADwdn+XAAAAWklEQVQoU2NkoBAwIutv8LT6D+I3bD9GlDhILVyhqbbTf2+5H3DzYIbADIVJoBsONgCkGZtPTl/dx4huALoLUZyKzRB8hqN4AV9YIhsCchWyWoIuIBRJFBsAAMlEIQkNy0rpAAAAAElFTkSuQmCC"),u=await l("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA+0lEQVQ4T2NkoBAwUqifAWyAqbbTf3IMOn11HyMjSHNgmBuDkYkhSWacO3OeYf2qXQxgA5q7ysGaQYLI4MT1Q2CuhaYdijjMstqyToQBIM3Irrj0ezmKJj3WSDgfphbFAGzuhxmCrBlZHdwA5DBAdwmyBmQ5lDAAGQAC+w8fZyguzMIIC5ghIC/29k9jcLS1BAvBAxHZAJAETAG6t0AWIMvDDRCQ5AVrQlcAC1RY7CDLg9gfnn+GxIK+hTLDw4evMMJRXl4MLIZL7uKJuwgDlOSUMVyAzwv3Ht1lgBsAUojsCpjN6AbAXAKSB2kGAcrzAswWUjMUKCOB9AIA8X2M/BEdxqQAAAAASUVORK5CYII="),g=await l("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAArUlEQVQ4T2NkIAOYajv9h2ljJFU/SHPuxlawtsn+1QwkGYCs+dgzHoazmfnEG4BN8+mr+xiJcgEuzSBvEDQAn2aCBoA0N3eVM7xS52OA+RnkbOSAx+kCkGYBSV6G4sIshnNnzjOsX7WLAV0zThfAbO7tnwa27MPzz1g1YzUA5mexm5/w2ow1IREKMGyJDh4G5GiGe4FczWADKNGMYgCueCaU2cAugCnCFs+EDAAA6iGC9K9ePj0AAAAASUVORK5CYII="),x=await l("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAXklEQVQYV2NkgAJTbaf/MDaIPn11HyOIBhMgSePpExmspL6A1Rx7xsNwNjMfrIgRJtmlJ8Sw4c0jsIIAETmGskvvwIrACnI3tsIlQAyYwsn+1UQqANmP0wqCjiTkTQAGCUCN2E8zpwAAAABJRU5ErkJggg==");return{coin:i,hero:[c(a=>s(a,e,0,0,16,0),16,16),c(a=>s(a,e,0,0,16,1),16,16),c(a=>s(a,e,0,0,16,2),16,16),c(a=>s(a,e,0,0,16,3),16,16),c(a=>s(a,e,0,0,16,4),16,16),c(a=>o(a,e,0,0,16,0),16,16),c(a=>o(a,e,0,0,16,1),16,16),c(a=>o(a,e,0,0,16,2),16,16),c(a=>o(a,e,0,0,16,3),16,16),c(a=>o(a,e,0,0,16,4),16,16)],mob0:[c(e=>s(e,a,0,0,16,0),16,16),c(e=>s(e,a,0,0,16,1),16,16),c(e=>s(e,a,0,0,16,2),16,16),c(e=>o(e,a,0,0,16,0),16,16),c(e=>o(e,a,0,0,16,1),16,16),c(e=>o(e,a,0,0,16,2),16,16)],mob1:[c(e=>s(e,t,0,0,16,0),16,16),c(e=>s(e,t,0,0,16,1),16,16),c(e=>s(e,t,0,0,16,2),16,16),c(e=>o(e,t,0,0,16,0),16,16),c(e=>o(e,t,0,0,16,1),16,16),c(e=>o(e,t,0,0,16,2),16,16)],mob2:[c(e=>s(e,r,0,0,16,0),16,16),c(e=>s(e,r,0,0,16,1),16,16),c(e=>s(e,r,0,0,16,2),16,16),c(e=>o(e,r,0,0,16,0),16,16),c(e=>o(e,r,0,0,16,1),16,16),c(e=>o(e,r,0,0,16,2),16,16)],mob3:[c(e=>s(e,A,0,0,16,0),16,16),c(e=>s(e,A,0,0,16,1),16,16),c(e=>s(e,A,0,0,16,2),16,16),c(e=>o(e,A,0,0,16,0),16,16),c(e=>o(e,A,0,0,16,1),16,16),c(e=>o(e,A,0,0,16,2),16,16)],bullet:n,crate:u,saber:g,orb:x,eHeart:c(e=>s(e,h,0,0,8,0),8,8),eBullet:c(e=>s(e,h,0,0,8,1),8,8),eArrow:c(e=>s(e,h,0,0,8,2),8,8),eBg:c(e=>s(e,h,0,0,8,3),8,8),eSaber:c(e=>s(e,h,0,0,8,4),8,8),ePlasma:c(e=>s(e,h,0,0,8,5),8,8),eOrbs:c(e=>s(e,h,0,0,8,6),8,8),eMagnet:c(e=>s(e,h,0,0,8,7),8,8),eShoes:c(e=>s(e,h,0,0,8,8),8,8),eXp:i,rocks:[c(e=>s(e,d,0,0,8,0),8,8),c(e=>s(e,d,0,0,8,1),8,8)]}})();innerWidth<innerHeight&&alert("for best experience use landscape mode"),pa(),ha(0,ke=0),(onresize=()=>{i(Pa,320,180),i(Ua,1280,720)})();{let a,t=performance.now();!function r(A){a=A-t,t=A,A=a=1e3<a?0:a,Va();var i=A;for(let e=0;e<I.length;e++)I[e](B?0:i,S);var c=A;switch(wa.tick(c)&&(Ia=!Ia),xa){case 0:Sa.tick(c)&&(pa(),ha(0,ke=1));break;case 1:case 4:Ca.update();break;case 3:Qa.update(),Ma.update(),Ta.update(),ka=Qa.hovered?0:Ma.hovered?1:Ta.hovered?2:ka,S.btnp.rt&&(ka=m(ka+1,0,2)),S.btnp.lf&&(ka=m(ka-1,0,2)),S.btnp.spc&&(0===ka&&Qa.click(),1===ka&&Ma.click(),2===ka)&&Ta.click()}Ba&&Ra.tick(c)&&(Ba=!1);var l=Ga,s=e;l.clearRect(0,0,320,180);for(let e=0;e<C.length;e++)C[e](l,s);((e,a)=>{if(Ba){var t,r=Ra.ticks/900;switch(xa){case 2:1!==ya&&4!==ya||(t=1-r,e.fillStyle="#000",e.fillRect(0,0,320,0+180*t));break;case 3:return e.fillStyle=n+"77",e.fillRect(0,0,320,180),e.fillStyle=y,e.fillRect(0,52,32+~~(320*r),60),e.fillStyle=x,e.fillRect(0,60,~~(320*r),60)}}switch(xa){case 0:e.fillStyle=d,fe(e,"XIICUR SURVIIVORS VERSION 1.0.0\nA JS13K 2024 GAME\nMADE BY SAUD WWW.SAUD.WTF\n\nLOADING...",20,20);break;case 1:e.fillStyle=n,e.fillStyle=h,se(e,"XIICUR SURVIIVORS",3,66,62),e.fillStyle=u,se(e,"XII",3,64,60),e.fillStyle=d,se(e,"   CUR SURVI",3,79,60),e.fillStyle=u,se(e,"I",3,217,60),e.fillStyle=d,se(e,"VORS",3,229,60),Ia&&se(e,"START",3,Ca.x+10,Ca.y+10),fe(e,"BY SAUD",270,170);break;case 3:e.fillStyle=n+"77",e.fillRect(0,0,320,180),e.fillStyle=y,e.fillRect(0,52,320,60),e.fillStyle=x,e.fillRect(0,60,320,60),e.fillStyle=d,se(e,"SELECT UPGRADE",3,45,25),e.imageSmoothingEnabled=!1,e.drawImage(a.eBg,Qa.x,Qa.y,Ea,Ea),e.drawImage(a.eBg,Ma.x,Ma.y,Ea,Ea),e.drawImage(a.eBg,Ta.x,Ta.y,Ea,Ea),e.drawImage(Aa(fa[0],a),Qa.x,Qa.y,Ea,Ea),e.drawImage(Aa(fa[1],a),Ma.x,Ma.y,Ea,Ea),e.drawImage(Aa(fa[2],a),Ta.x,Ta.y,Ea,Ea),e.fillStyle=d,fe(e,ia(fa[0]),Qa.x,Qa.y+Ea+5),fe(e,ia(fa[1]),Ma.x,Ma.y+Ea+5),fe(e,ia(fa[2]),Ta.x,Ta.y+Ea+5),e.strokeStyle=d,e.strokeRect(45*(2*ka+1),Qa.y,Ea,Ea),e.drawImage(a.eArrow,45*(2*ka+1)+6,Qa.y+48+(Ia?2:0),16,16);break;case 2:break;case 4:e.fillStyle=d,se(e,la.won?"YOU WIN!":"GAME OVER!",3,96,36),la.won&&fe(e,"YOU HAVE LIFTED THE CURSE!",106,61);var A=~~la.time,i=A%60;fe(e,"TIME: "+~~(A/60)+":"+(i<10?"0"+i:i),140,76),fe(e,"SCORE: "+la.score,140,86),Ia&&fe(e,"RESTART",Ca.x+10,Ca.y+10)}})(Ga,e),Oa(Ga),requestAnimationFrame(r)}(t)}})()</script>