<link rel=icon href=data:image/bmp;base64,Qk1+AAAAAAAAAD4AAAAoAAAAEAAAABAAAAABAAEAAAAAAAAAAADEDgAAxA4AAAIAAAACAAAA/////wAAAP8P8AAAH/gAAD/8AAB//gAAf/4AAH/+AABxjgAAcY4AAHGOAAB//gAAP/wAAD/8AAA+fAAAHDgAABw4AAAIEAAA><script src=/2025/webxr/aframe.js></script><title>Kittens Crossing</title><script>"use strict";class Rl{constructor(t){Object.assign(this,{size:t.size,scale:t.scale,Tj:t.Tj,Jg:t.Jg,Pf:t.Pf,colors:t.colors,Zf:this.Xd(t.Zf??[])}),this.voxels=new Ql(this.size.x,this.size.y,this.size.z,t.voxels)}Xd(t){const i={};for(const e of t)for(const t in e)if(t[0]>="A"&&t[0]<="Z"){i[t]={color:e[t]};for(const s in e)s[0]>="a"&&s[0]<="z"&&(i[t][s]=e[s])}return i}}class Ql{constructor(t,i,e,s){this.size={x:t,y:i,z:e},this.Mh=[],this.Mh[Md.NX]={dx:-1,dy:0,dz:0,ox:0,oy:1,oz:1},this.Mh[Md.PX]={dx:1,dy:0,dz:0,ox:0,oy:1,oz:1},this.Mh[Md.NY]={dx:0,dy:-1,dz:0,ox:1,oy:0,oz:1},this.Mh[Md.PY]={dx:0,dy:1,dz:0,ox:1,oy:0,oz:1},this.Mh[Md.NZ]={dx:0,dy:0,dz:-1,ox:1,oy:1,oz:0},this.Mh[Md.PZ]={dx:0,dy:0,dz:1,ox:1,oy:1,oz:0};const o=Ql.Ec(s),h=this.size.x*this.size.y*this.size.z;if(o.length!==h)throw new Error(`${o.length}instead of ${h}voxels found`);this.Wb(o)}static Ec(t){const i=t.matchAll(/(\d*([(]|-|[A-Z][a-z]*)|[)])/gm);return function t(){let e=[],s=i.next();for(;s.value&&")"!==s.value[0];){const o=s.value[0],h=parseInt(o)||1;let n=o.replace(/^\d+/,"");if("("===n){const i=t();for(let t=0;t<h;t++)for(let t=0;t<i.length;t++)e.push(i[t])}else for(let t=0;t<h;t++)e.push(n);s=i.next()}return e}()}Wb(t){let i=0,e=0,s=0;this.voxels=[];for(const o of t)this.Nj(s,e,i,o),s++,s>=this.size.x&&(s=0,e++,e>=this.size.y&&(e=0,i++))}Nj(t,i,e,s){if(null===s||"-"===s)return;if(this.Qh(t,i,e))throw new Error("Out of bounds");let o=(t>>4)+(i>>4<<10)+(e>>4<<20),h=this.voxels[o];h||(h=this.voxels[o]=[]),h[(15&t)+((15&i)<<4)+((15&e)<<8)]=s}Te(t,i,e){if(this.Qh(t,i,e))return null;let s=(t>>4)+(i>>4<<10)+(e>>4<<20),o=this.voxels[s];if(o){return o[(15&t)+((15&i)<<4)+((15&e)<<8)]}return null}Qh(t,i,e){return t<0||t>=this.size.x||i<0||i>=this.size.y||e<0||e>=this.size.z}Sd(t,i,e,s){const o=this.Mh[s];return this.Qh(t+o.dx,i+o.dy,e+o.dz)}Rd(t,i,e,s){const o=this.Mh[s];return!!this.Te(t+o.dx,i+o.dy,e+o.dz)}Ud(t,i,e,s){const o=this.Mh[s];for(let s=-1*o.ox;s<=1*o.ox;s++)for(let h=-1*o.oy;h<=1*o.oy;h++)for(let n=-1*o.oz;n<=1*o.oz;n++)if(this.Te(t+o.dx+s,i+o.dy+h,e+o.dz+n))return!0;return!1}}const Mk={Rg:{}};class Ok{constructor(t){const i={Da:1,ao:0,Rc:{x:1,y:1,z:1},color:"#FFF",...t.Pf||{}};Object.assign(this,{...t,Pf:i,scale:t.scale??1,position:[],Li:[],Nd:[],Qd:[],Od:[],Tf:[],Il:new Map}),this.Ub(),this.Tb();const e=Math.max(...Object.values(t.Zf).map((t=>t.deform??0)));for(let t=1;t<=e;t++)this.deform(t);this.scatter(),delete this.voxels,delete this.Il,delete this.Li}Ub(){const t=Ok.Ef(this.Pf.color);for(let i in this.Zf){let e=this.Zf[i];e.rgbColor=Ok.Re(e.color??"#F0F",t)}for(const i in this.Zf)this.Zf[i+"Oj"]={...this.Zf[i],rgbColor:Ok.Re(this.Zf[i].color,t,this.Pf.Da)},this.Zf[i+"ao"]={...this.Zf[i],rgbColor:Ok.Re(this.Zf[i].color,t,1-this.Pf.ao)},this.Zf[i+"shadowao"]={...this.Zf[i],rgbColor:Ok.Re(this.Zf[i].color,t,this.Pf.Da*(1-this.Pf.ao))}}static Ef(t){if(!/^#([0-9A-Fa-f]{3})$/.test(t))throw`Invalid color ${t}`;return{r:17*parseInt(t[1],16)/255,g:17*parseInt(t[2],16)/255,b:17*parseInt(t[3],16)/255}}static Re(t,i,e=1){let s=Ok.Ef(t);return Ok.toSRgb(s,i,e)}static toSRgb(t,i,e){const s=new THREE.Color(t.r,t.g,t.b);return s.r=s.r*i.r*e,s.g=s.g*i.g*e,s.b=s.b*i.b*e,s.convertSRGBToLinear(),{r:s.r,g:s.g,b:s.b}}Tb(){const t={color:"F0F",rgbColor:{r:1,g:0,b:1}},i=1!=this.Pf.Da,e=0!=(this.Pf.ao??0),s=[{id:Md.NX,axis:Ia.X,Rc:{x:-1,y:0,z:0},Jl:[0,3,7,4],getX:t=>Math.floor(t/this.size.z)%this.size.x,getY:t=>Math.floor(t/(this.size.x*this.size.z)),getZ:t=>t%this.size.z},{id:Md.PX,axis:Ia.X,Rc:{x:1,y:0,z:0},Jl:[2,1,5,6],getX:t=>Math.floor(t/this.size.z)%this.size.x,getY:t=>Math.floor(t/(this.size.x*this.size.z)),getZ:t=>this.size.z-1-t%this.size.z},{id:Md.NY,axis:Ia.Y,Rc:{x:0,y:-1,z:0},Jl:[0,1,2,3],getX:t=>t%this.size.x,getY:t=>Math.floor(t/(this.size.x*this.size.z)),getZ:t=>Math.floor(t/this.size.x)%this.size.z},{id:Md.PY,axis:Ia.Y,Rc:{x:0,y:1,z:0},Jl:[7,6,5,4],getX:t=>t%this.size.x,getY:t=>Math.floor(t/(this.size.x*this.size.z)),getZ:t=>Math.floor(t/this.size.x)%this.size.z},{id:Md.NZ,axis:Ia.Z,Rc:{x:0,y:0,z:-1},Jl:[1,0,4,5],getX:t=>this.size.x-1-t%this.size.x,getY:t=>Math.floor(t/(this.size.x*this.size.z)),getZ:t=>Math.floor(t/this.size.x)%this.size.z},{id:Md.PZ,axis:Ia.Z,Rc:{x:0,y:0,z:1},Jl:[3,2,6,7],getX:t=>t%this.size.x,getY:t=>Math.floor(t/(this.size.x*this.size.z)),getZ:t=>Math.floor(t/this.size.x)%this.size.z}],o=[],h=this.size.x*this.size.y*this.size.z;for(const n of s)for(let s=0;s<h;s++){const h=n.getX(s),a=n.getY(s),C=n.getZ(s);let r=this.voxels.Te(h,a,C);if(r){let s=this.Zf[r]??t,c=this.Zf[r+"Oj"]??t,l=this.Zf[r+"ao"]??t,R=this.Zf[r+"shadowao"]??t;if(n.id===Md.NX?(o[0]=this.Qe(h,a,C,s),o[1]=this.Qe(h+1,a,C,s),o[2]=this.Qe(h+1,a,C+1,s),o[3]=this.Qe(h,a,C+1,s),o[4]=this.Qe(h,a+1,C,s),o[5]=this.Qe(h+1,a+1,C,s),o[6]=this.Qe(h+1,a+1,C+1,s),o[7]=this.Qe(h,a+1,C+1,s)):(o[0]=this.Se(h,a,C),o[1]=this.Se(h+1,a,C),o[2]=this.Se(h+1,a,C+1),o[3]=this.Se(h,a,C+1),o[4]=this.Se(h,a+1,C),o[5]=this.Se(h+1,a+1,C),o[6]=this.Se(h+1,a+1,C+1),o[7]=this.Se(h,a+1,C+1)),this.Tj&n.id&&this.voxels.Sd(h,a,C,n.id))continue;if(!this.voxels.Rd(h,a,C,n.id)){const t=0===(s.deform??0)||s.clamp===n.axis,r=i&&this.Gf(h,a,C,n.id,n.Rc),A=e&&!1!==s.ao&&this.voxels.Ud(h,a,C,n.id);let d=r&&A?R:r?c:A?l:s;this.Qd.push(d),this.Od.push(t?n.axis:0);const B=n.Jl;for(let i=0;i<4;i++)this.Nd.push(o[B[i]]),this.Aa(o[B[i]],o[B[t?i:(i+1)%4]])}}}}Qe(t,i,e,s){const o=t+1024<<22|i+1024<<11|e+1024;let h=this.Il.get(o);if(h){const t=this.Li[h];t.deform=Math.min(t.deform,s.deform??0),t.scatter=Math.min(t.scatter,s.scatter??0),t.clamp|=s.clamp}else h=this.position.length/3,this.position.push(t,i,e),this.Il.set(o,h),this.Tf.push([]),this.Li[h]={deform:s.deform??0,scatter:s.scatter??0,clamp:s.clamp};return h}Se(t,i,e){const s=t+1024<<22|i+1024<<11|e+1024;return this.Il.get(s)}Aa(t,i){this.Tf[t].includes(i)||this.Tf[t].push(i),this.Tf[i].includes(t)||this.Tf[i].push(t)}Gf(t,i,e,s,o){const h=this.Pf.Rc;if(s===Md.NX&&h.x>=0||s===Md.PX&&h.x<=0||s===Md.NY&&h.y>=0||s===Md.PY&&h.y<=0||s===Md.NZ&&h.z>=0||s===Md.PZ&&h.z<=0)return!0;let n=0;for(;;){const s=Math.round(t+.55*o.x+n*h.x),a=Math.round(i+.55*o.y+n*h.y),C=Math.round(e+.55*o.z+n*h.z);if(this.voxels.Qh(s,a,C))return!1;if(this.voxels.Te(s,a,C))return!0;n+=.5}return!1}deform(t){let i=[...this.position];for(let s=0;s<this.Tf.length;s++){const o=this.Li[s];o.deform>=t&&(0==(o.clamp&Hb.X)&&(i[3*s+0]=e(this.position,s,this.Tf[s],0)),0==(o.clamp&Hb.Y)&&(i[3*s+1]=e(this.position,s,this.Tf[s],1)),0==(o.clamp&Hb.Z)&&(i[3*s+2]=e(this.position,s,this.Tf[s],2)))}function e(t,i,e,s){let o=t[3*i+s];for(const i of e)o+=t[3*i+s];return o/(e.length+1)}this.position=i}scatter(){const t=t=>(2*Math.random()-1)*t;for(let i=0;i<this.Li.length;i++){const e=this.Li[i];e.scatter&&(0==(e.clamp&Hb.X)&&(this.position[3*i+0]+=t(e.scatter)),0==(e.clamp&Hb.Y)&&(this.position[3*i+1]+=t(e.scatter)),0==(e.clamp&Hb.Z)&&(this.position[3*i+2]+=t(e.scatter)))}}}var Pd=0,Hg=0;class Nk{static He(t,i){if(!i)throw`Unknown Og '${t}'`;const e=new Rl(i),s=new Ok(e),o=new Map;function h(t,i,e,s,h,n,a){const C=`${t},${i},${e},${s.fade?"":s.color},${h}`;let r=n.length/3;if(o.has(C))r=o.get(C);else{o.set(C,r),n.push(t,i,e);const h=s.rgbColor;a.push(h.r,h.g,h.b)}return r}const n=[],a=[],C=[];!function(t,i,e,s){const{size:o,scale:n,position:a,Nd:C,Od:r,Qd:c}=t;let l=null,R=0,A=0,d=0,B=0,f=0,u=0;for(let t=0;t<=c.length;t++){Pd++;let S=[];if(t!=c.length){const s=c[t],m=r[t];for(let r=0;r<4;r++){const c=3*C[4*t+r];S[r]=h((a[c+0]-o.x/2)*n,a[c+1]*n,(a[c+2]-o.z/2)*n,s,m,i,e)}if(l&&S[0]===l[1]&&S[3]===l[2]&&Math.abs(i[3*l[1]+0]+R-i[3*S[1]+0])<.001&&Math.abs(i[3*l[1]+1]+A-i[3*S[1]+1])<.001&&Math.abs(i[3*l[1]+2]+d-i[3*S[1]+2])<.001&&Math.abs(i[3*l[2]+0]+B-i[3*S[2]+0])<.001&&Math.abs(i[3*l[2]+1]+f-i[3*S[2]+1])<.001&&Math.abs(i[3*l[2]+2]+u-i[3*S[2]+2])<.001&&e[3*S[0]+0]===e[3*l[0]+0]&&e[3*S[0]+1]===e[3*l[0]+1]&&e[3*S[0]+2]===e[3*l[0]+2]&&e[3*S[1]+0]===e[3*l[0]+0]&&e[3*S[1]+1]===e[3*l[0]+1]&&e[3*S[1]+2]===e[3*l[0]+2]&&e[3*S[2]+0]===e[3*l[3]+0]&&e[3*S[2]+1]===e[3*l[3]+1]&&e[3*S[2]+2]===e[3*l[3]+2]&&e[3*S[3]+0]===e[3*l[3]+0]&&e[3*S[3]+1]===e[3*l[3]+1]&&e[3*S[3]+2]===e[3*l[3]+2]){l[1]=S[1],l[2]=S[2],Hg++;continue}}if(l){let t=3*l[0],i=3*l[1],o=3*l[2],h=3*l[3];Math.abs(e[t+0]+e[t+1]+e[t+2]-(e[o+0]+e[o+1]+e[o+2]))>Math.abs(e[i+0]+e[i+1]+e[i+2]-(e[h+0]+e[h+1]+e[h+2]))?s.push(l[1],l[2],l[3],l[3],l[0],l[1]):s.push(l[0],l[1],l[2],l[2],l[3],l[0])}t!=c.length&&(l=S,R=i[3*l[1]+0]-i[3*l[0]+0],A=i[3*l[1]+1]-i[3*l[0]+1],d=i[3*l[1]+2]-i[3*l[0]+2],B=i[3*l[2]+0]-i[3*l[3]+0],f=i[3*l[2]+1]-i[3*l[3]+1],u=i[3*l[2]+2]-i[3*l[3]+2])}}(s,n,a,C);let r=[];const c=`Mesh${s.Jg?.material??"Standard"}Material`;if("undefined"!=typeof THREE&&THREE[c]){let t={vertexColors:!0};t={...t,...s.Jg??{}},delete t.material;const i=THREE[c];r.push(new i(t))}else console.error(`Bad material or THREE not defined:${c}`);let l=new THREE.BufferGeometry;return l.setAttribute("position",new THREE.Float32BufferAttribute(n,3)),l.setAttribute("color",new THREE.Float32BufferAttribute(a,3)),l.setIndex(C),l.addGroup(0,C.length,0),l.computeVertexNormals(),l.computeBoundingBox(),new THREE.Mesh(l,r)}}const Md={NX:1,PX:2,NY:4,PY:8,NZ:16,PZ:32},Gi={NX:Md.NX,PX:Md.PX,X:Md.NX|Md.PX,NY:Md.NY,PY:Md.PY,Y:Md.NY|Md.PY,NZ:Md.NZ,PZ:Md.PZ,Z:Md.NZ|Md.PZ},Sj=Gi,Ia={X:1,Y:2,Z:4},Hb=Ia;AFRAME.registerComponent("svox",{schema:{type:"string"},init:function(){const t=this.constructor.Ig=this.constructor.Ig??{},i=this.data,e=t[i];e?this.mesh=new THREE.Mesh(e.geometry,e.material):(this.mesh=Nk.He(i,Mk.Rg[i]),t[i]=this.mesh),this.el.setObject3D("mesh",this.mesh)}}),AFRAME.registerComponent("city",{schema:{},init:function(){this.mesh=City.mesh,this.el.setObject3D("mesh",this.mesh)}});class City{static mesh=null;static Rj=13;static La=21;static Hj=.5;static Df=3;static Cb=Math.floor(this.Rj/2);static Ue=null;static voxels=null;static Xe=5;static Ye=12;static Af=new Ql(11,60,11,"22S66-33B11A22S7(3B4-B3-)22B11A22S81-7A11-11A22S61-2(A10-)5A11-11A22S3B6(5-6B)5-25B11A22S-5(3B8-)3B7-33B11A22S4B6(3WB2W5B)3WB2W23B11A22S81-7A11-11A22S6-7(A10-)5A11-11A22S3B6(2WB2W6B)2WB2W25B11A22S-5(3B8-)3B7-33B11A22S99B11A22S2-6(5B6-)2(9B2-)9B11A22S2-7(5B6-)9B2-9B11A22S99B11A22S-5(3B8-)3B7-33B11A22S7(-10W)22B11A22S6(2-5B3WB)3(2-9B)11A22S2-6(5B6-)2(9B2-)9B11A22S7(-10W)22B11A22S66-33B11A22S7(-10W)22B11A22S7(2-9B)11A2-9B11A22S6(2-5B3WB)3(2-9B)11A22S7(-10W)22B11A22S66-33B11A22S7(-10W)22B11A22S7(2-9B)11A2-9B11A22S9(2-9B)11A22S6(-10B)-32B11A22S6-5B4(6-B3WB)6-38B11A22S7(-10W)22B11A22S7(2-9B)11A2-9B11A22S5(-A9B)3(2A9B)2-9B11A22S7(-10W)22B11A22S6(7-4W)33B11A22S99B11A22S6(3-8W)2(2-9B11A)22S6(4-7W)3-8B11A2-9B11A22S7(-10W)22B2(11A22S6(7-4W)33B11A22S7(-10W)22B11A22S6(3-8W)2(2-9B11A)22S6(4-7W)3-8B11A2-9B11A22S99B)11A22S5(7-4B)7-37B11A22S6(-10B)-32B11A22S6(3-8B)2(2-9B11A)22S6(4-7B)3-8B11A2-9B11A22S99B11A");static Zd=8;static Ae=8;static Ce=new Ql(11,64,11,"11A24B3(5-B3-2B)5-B3-11B11A11-11A44-11B2(11A3-2B5-B)4(3-2B5-B)11A24B3(8-3B)8-12B11A11-11A3(10-B)10-12B11A2B8-B11A2B4(8-3B)8-4B2(8A3B8-3B)3(8-3B)8-11A13B4(3-B4-3B)3-B4-12B11A24B3(5WB3W2B)5WB3W11B11A7-4BA6-B3A4(7-B3W)11B11A-10B11A5(-2W2B5WB)11A24B3(8W3B)8W12B11A-10B11A3(-B8WB)-B8W12B11A11B11A2B4(8W3B)8W37B4(8W3B)8W11A13B4(3WB4W3B)3WB4W12B11A22B4(-10W)11B11A7-4BA6-B3A3(7-4B)7-15B11A-10B11A-W9B4(-10W)11A22B2(4(-10W)11B11A-10B11A)5(-10W)88B11A11B5(-10W)11B11A22B4(-10W)11B11A7-4BA6-B3A3(7-4B)7-15B11A11B11A55B11A22B2(4(-10W)11B11A-10B11A)5(-10W)11A-10B11A5(-10W)11A11B5(-10W)11B11A22B4(-10W)11B11A-B4W5BAB4WB4A3(-B4W5B)-B4W16B11A11B11A55B11A22B2(4(-10W)11B11A-10B11A)5(-10W)11A-10B11A5(-10W)11A11B5(-10W)11B11A22B2(4(-10W)11B11A-10B11A)-W9B4(-10W)11A22B2(4(-10W)11B11A-10B11A)5(-10W)11A-10B11A5(-10W)11A77B11A22B2(4(-10W)11B11A-10B11A)-W9B4(-10W)11A22B2(4(-10W)11B11A-10B11A)5(-10W)11A-10B11A5(-10W)11A11B5(-10W)11B11A77B2(11A-10B)2(-10B)-21B11A-10B11A2(-W9B4(-10W)11A22B2(4(-10W)11B11A-10B11A)5(-10W)11A-10B11A5(-10W)11A11B5(-10W)11B11A22B2(4(-10W)11B11A-10B11A))-W9B4(-10W)11A22B2(4(-10W)11B11A-10B11A)5(-10W)11A-10B11A5(-10W)11A11B5(-10W)11B11A22B4(-10W)11B11A-10B11A4(-10W)2(11B11A)55B11A77B11A-10B11A55B11A11B11A55B11A-10B11A5(-10W)11A77B");static Wh=4;static Yh=12;static Gb=new Ql(11,48,11,"5(11G121-)11G-10D-10F99-3(11G121-)11G-10D-10F99-11G2-9H110-2(11G121-)11G-2D9-2F107-3G8J2-H118-2(11G121-)11G-2D9-2F107-3GJ7I2-H118-2(11G121-)11G-2D2-6H-2F107-3GJ3I2J2I2-H118-2(11G121-)11G-2D2-6H-2F3-5H99-3GJ6IJ2-H118-11G6-5H110-11G121-11G-2D2-2H4J-2F3-H103-3G2(JI)J2IJ2-H118-7G4D6-H67-3K2(7-4F)8-3F11-11G121-11G-2D2-2HJ3I-2F3-H103-3GJI2(J2I)2-H118-7G4D6-H57-2D7-4K3(7-4F)9-2F11G121-11G-2D2-2H2(JI)-2F3-H103-3GJ7I2-H118-7G3DG6-H3-4(E10-)E8-3D7-4K3(7-4F)8-3F11G121-11G-2D2-2H2(JI)-2F3-H103-3G2(J2I)2J2-H118-7G2D2G6-H2-4(2E9-)2E8-3D7-4K3(7-4F)8-3F");static Bi=[[3,2,3],[0,1,0],[3,2,3]];static Cj=Ql.Ec("4S13R4S4(P3R)P8S13R4S8P5R8P4S13R29S6RQ6R8S4(P3R)P4S13R3(29S6RQ6R)8S13R4S4(P3U)P8S13R4SPV2(5RP)5RVP4S13R29S6RQ6R8S4(P3U)P4S13R3(29S6RQ6R)8S13R4S4(P3R)P8S13R4SPV2(5RP)5RVP4S13R19SX9S6RQ6R8S4(P3R)P4S13R14SX14S6RQ6R9SX19S6RQ6R14SX14S6RQ6R7S15R3S4(P3R)PR7S6RQ7R3SPV2(5RP)5RVP4S6RQ6R29S7Q7R6SR4(P3R)P3S7RQ6R28S2R6Q7R27S2R6Q6R28S2R6Q7R3S8P5R9P4(3RP)4R4S6RQ10R8P5R8P4S6RQ6R10S15R4S21R4(P3R)P10RQ6R4S57R6S17R4S17RQ24RPV2(5RP)5RV2P4(3RP)4R4S6RQ10RPV2(5RP)5RVP4S6RQ6R9S16R4S13RQ7R4(P3R)P10RQ6RSZ2S8R5Q25RQ19R5S17R4S17RQ20RQ3RPV5RP3RQRP5RV2P4(3RP)4R4S6RQ10RPV2(5RP)5RVP4S13R8S17R4S13RQ7R4(P3R)P10RQ6R4S38RQ20R2(4S17R)Q20RQ3RPV5RP3RQRP5RV18P4R4S6RQ10RPV2(5RP)5RVP4S13R8S17R4S13RQ7R17P10RQ6R4S8R5Q25RQ20R2(4S17R)Q20RQ3R8P3RQR8P21R4S17R8PR3QR8P4S6(RQ)R8S17R4S13RQ41R4S38RQ20R2(4S17R)Q20RQ3RPV5RPR3QRP5RVP8R4Q9R4S17RPV5RP2(RQ)RP5RVP4S6(RQ)R8S17R4S13RQ9R7Q25R4S8R5Q25RQ20R2(4S17R)Q20RQ3RPV5RP2(RQ)RP5RVP8RQ2RQ9R4S9R5Q3RPV5RP2(RQ)RP5RVP2SZS6(RQ)RSZ6S9R5Q3R2SZS13R4Q9RQ2RQ11R5Q9R4S3R3Q9R3Q3R4Q13R4Q3R5Q9R4S4Q13RSZ2S4Q13R8Q13R4QPV5RP2(RQ)RP5RVP8R7Q6R4S17RPV5RPR3QRP5RVP4S6(RQ)R8S17R4S26R4Q25R4S8R5Q11RQ34R4S3RQ13R4S3RQ20RQ17R8PR3QR8P21R4S17R8PRQ3R8P4S6(RQ)R8S17R4S55R4S24RQ34R4S3RQ13R4S3RQ20RQ17RPV2(5RP)5RV18P4R4S17RPV5RPRQ3RP5RVP4S13R8S6RQ10R4S21R17P17R4S8R5Q11RQ27RQ6R4S3RQ13R4S3RQ20RQ17RPV2(5RP)5RV2P4(3RP)4R4S17RPV5RPRQ3RP5RVP4S13R8S6RQ10R4S21R4(P3R)P17R4S24RQ27RQ6R4S3RQ13R4S3RQ20RQ17RPV2(5RP)5RV2P4(3RP)4R5S16RPV2(5RP)5RVP4S6RQ6R6SZS6RQ10R4S21R4(P3R)P16R5S8R5Q11RQ27RQ6RSZ2S3RQ13R4S3RQ20RQ17R8P5R9P4(3RP)4R6S15R8P5R8P4S6RQ6R8S6RQ10R4S21R4(P3R)P15R6S24RQ27RQ6R4S17R4S42RPV2(5RP)5RV2P4(3RP)R27S15R7S6RQ6R8S6RQ7R7S6R6Q2R6SR4(P3R)P66S7RQ6R7S7R7Q7S7R6Q2R6S7R6Q2R3SPV2(5RP)5RV2P4(3RP)29S3(13R8S)6RQ6R8S4(P3R)P5SX25SX20SX14S13R3(8S6RQ6R)4SPV2(5RP)5RV2P4(3UP)29S3(13R8S)6RQ6R8S4(P3U)P67S13R3(8S6RQ6R)4S8P5R9P4(3RP)29S3(13R8S)6RQ6R8S4(P3R)P67S13R3(8S6RQ6R)4S");static Qc={N:1,E:2,S:4,W:8};static He(){let t=null;for(;!t;)t=this.Sb(),t=this.Lb(t);this.Kb(t),this.Jb(t),this.Lc(t);const i=this.Ne(t);this.Ue=t;const e=this.Vb(i);return this.voxels=new Rl(e).voxels,e}static Sb(){const t=[];for(let i=0;i<this.Rj;i++){t[i]=[];for(let e=0;e<this.Rj;e++){const s=Math.random(),o=e%2<1&&i%2<1,h=s>.4&&(e%2<1||i%2<1),n=e>=this.Cb-1&&i>=this.Cb-1&&e<=this.Cb+1&&i<=this.Cb+1,a=(e<this.Cb-2||i<this.Cb-2||e>this.Cb+2||i>this.Cb+2)&&(0===e||0===i||e===this.Rj-1||i===this.Rj-1||!o&&!h);t[i][e]=n?{type:"Park",Zh:this.Bi[i-(this.Cb-1)][e-(this.Cb-1)]}:a?{type:"Building"}:o||s>.4&&h?{type:"Road"}:{type:"Road",Zh:Math.floor(Math.random()*this.Wh)}}}return t}static Lb(t){function i(e,s,o){const h=t[s][e];"Road"===h.type&&void 0===h.group&&(h.group=o,i(e-1,s,o),i(e+1,s,o),i(e,s-1,o),i(e,s+1,o))}let e=0;for(let s=0;s<this.Rj;s++)for(let o=0;o<this.Rj;o++){const h=t[s][o];"Road"===h.type&&void 0===h.group&&i(o,s,e++)}return e>1?null:t}static Kb(t){for(let i=0;i<this.Rj;i++)for(let e=0;e<this.Rj;e++){const s=t[i][e];if("Road"===s.type){s.x=e,s.z=i;let o=0;o+="Road"===t[i-1][e].type?this.Qc.N:0,o+="Road"===t[i][e+1].type?this.Qc.E:0,o+="Road"===t[i+1][e].type?this.Qc.S:0,o+="Road"===t[i][e-1].type?this.Qc.W:0,s.Fc=o}}}static Jb(t){function i(){const t="abcdefghijklmno",i=Math.floor(15*Math.random());return"C"+t.charAt(i)}for(let e=0;e<this.Rj;e++)for(let s=0;s<this.Rj;s++){const o=t[e][s];if("Building"===o.type){o.x=s,o.z=e,o.Ze=Math.floor(Math.random()*this.Xe),o.Be=Math.floor(Math.random()*this.Zd),o.We={S:"S",A:i(),B:i(),W:"W","-":"-"},o.Yd={S:"S",A:o.We.B,B:o.We.A,W:"W","-":"-"};const t=Math.floor((this.Df*this.La-this.Ye)/this.Ae),h=Math.max(Math.abs(s-this.Cb),Math.abs(e-this.Cb))/this.Cb;o.height=this.Ye+this.Ae*Math.floor(Math.random()*t*h)}}}static Lc(t){for(let i=0;i<this.Rj;i++)for(let e=0;e<this.Rj;e++){const s=t[i][e];if("Building"===s.type){let o=[];o[this.Qc.N]=0===i?999:"Building"===t[i-1][e].type?t[i-1][e].height:0,o[this.Qc.E]=e===this.Rj-1?999:"Building"===t[i][e+1].type?t[i][e+1].height:0,o[this.Qc.S]=i===this.Rj-1?999:"Building"===t[i+1][e].type?t[i+1][e].height:0,o[this.Qc.W]=0===e?999:"Building"===t[i][e-1].type?t[i][e-1].height:0,s.Lh=o}}}static Ne(t){let i="";for(let e=0;e<this.Rj*this.La;e++){const s=Math.floor(e/this.La),o=e%this.La;for(let h=0;h<this.Df*this.La;h++){Math.floor(h/this.La),this.La;for(let n=0;n<this.Rj*this.La;n++){const a=Math.floor(n/this.La),C=n%this.La,r=t[s][a];switch(r.type){case"Road":if(h<=13){const t=(r.Fc-1)*this.La,e=this.Cj[C+t+o*this.La*15],s=this.Cj[C+1+t+o*this.La*15],n=this.Cj[C-1+t+o*this.La*15],a=this.Cj[C+t+(o-1)*this.La*15],c=this.Cj[C+t+(o+1)*this.La*15];i+="X"===e||"Z"===e?"Y":"X"===s||"X"===n||"Z"===a||"Z"===c?h<=1?"S":12===h?"Z":13===h?"Y":"-":h>1?"-":"S"==e?Math.random()<.75?"S":"T":"U"===e||"V"===e?e:1==h?"-":e}else i+="-";break;case"Park":if(0===h)i+="S";else if(h<this.Yh+1){const t=r.Zh;let e=this.Gb.Te(C<11?C:20-C,t*this.Yh+h-1,o<11?o:20-o);i+="G"===e?Math.random()<.66?"G":"C":e??"-"}else i+="-";break;case"Building":const t=r.Lh[this.Qc.N]>=h&&r.Lh[this.Qc.E]>=h&&r.Lh[this.Qc.S]>=h&&r.Lh[this.Qc.W]>=h,s=0===n||0===e||n===this.Rj*this.La-1||e===this.Rj*this.La-1;if(t||h<this.Ye&&s)i+=r.We.B;else if(h<this.Ye){const t=r.Ze;let e=this.Af.Te(C<11?C:20-C,t*this.Ye+h,o<11?o:20-o);i+="S"===e?Math.random()<.75?"S":"T":r.We[e??"-"]}else if(h<=r.height){const t=r.Be;let e=this.Ce.Te(C<11?C:20-C,t*this.Ae+(h-this.Ye)%this.Ae,o<11?o:20-o);e||(o<this.La/2&&C>0&&C<this.La-1&&r.Lh[this.Qc.N]>=h-1||C>this.La/2&&o>0&&o<this.La-1&&r.Lh[this.Qc.E]>=h-1||o>this.La/2&&C>0&&C<this.La-1&&r.Lh[this.Qc.S]>=h-1||C<this.La/2&&o>0&&o<this.La-1&&r.Lh[this.Qc.W]>=h-1)&&(e="B"),i+=r.Yd[e??"-"]}else i+="-";break;default:i+="Error"}}i+=" "}i+="\r\n"}return i}static Vb(t){return{size:{x:this.Rj*this.La,y:this.Df*this.La,z:this.Rj*this.La},scale:this.Hj,Tj:Sj.NX|Sj.PX|Sj.NY|Sj.PY|Sj.NZ|Sj.PZ,Pf:{Da:.5,Rc:{x:.5,y:1,z:.5},color:"#FC9",ao:.2},Jg:{material:"Basic"},Zf:[{deform:10,clamp:Hb.Y,P:"#FB0",Q:"#DDD",R:"#444"},{deform:3,clamp:Hb.Y,S:"#888",T:"#999"},{deform:2,Y:"#AAA"},{deform:3,ao:!1,Z:"#FFF"},{deform:3,clamp:Hb.X,U:"#DDD"},{deform:3,clamp:Hb.Z,V:"#DDD"},{deform:5,scatter:.4,clamp:Hb.Y,fade:!0,G:"#0C0",C:"#0B0"},{deform:5,clamp:Hb.Y,H:"#FDB",E:"#960"},{deform:2,scatter:.2,fade:!0,ao:!1,I:"#38C",J:"#49D"},{deform:2,scatter:.5,fade:!0,ao:!1,F:"#0A0",K:"#070",D:"#040"},{A:"#222",B:"#444",Ca:"#321",Cb:"#654",Cc:"#987",Cd:"#CBA",Ce:"#FED",Cf:"#C88",Cg:"#CAA",Ch:"#CB8",Ci:"#DC9",Cj:"#8C8",Ck:"#BCB",Cl:"#AAC",Cm:"#BCD",Cn:"#456",Co:"#789",W:"#234"}],voxels:t}}static Oe(t){let i=Math.floor(2*t.x+(City.Cb+.5)*City.La),e=Math.floor(2*t.z+(City.Cb+.5)*City.La);return this.voxels.Te(i,2,e)?-1:this.voxels.Te(i,1,e)?.5:0}}AFRAME.registerComponent("avoidbuildings",{schema:{radius:{default:1},preservePosition:{default:!1}},init:function(){this.Ph=new THREE.Vector3,this.Yb=new THREE.Vector3,this.Kf=new THREE.Vector3,this.Ph.copy(this.el.object3D.position),this.el.object3D.getWorldPosition(this.Kf)},tick:function(t,i){this.Eb()},Eb:function(){this.data.preservePosition&&this.el.object3D.position.lerp(this.Ph,.05),this.el.object3D.getWorldPosition(this.Yb),this.Yb.multiplyScalar(2),this.Yb.x+=(City.Cb+.5)*City.La,this.Yb.z+=(City.Cb+.5)*City.La;const t=(t,i,e)=>Math.max(i,Math.min(t,e)),i=this.data.radius,e=Math.floor(this.Yb.x),s=Math.floor(this.Yb.z);if(City.voxels.Te(e,2,s))return this.el.object3D.parent.worldToLocal(this.Kf),void this.el.object3D.position.copy(this.Kf);for(let o=0;o<8;o++){let o=Number.MAX_VALUE,h=Number.MAX_VALUE,n=Number.MAX_VALUE;for(let a=Math.floor(s-i-1);a<=Math.floor(s+i+1);a++)for(let s=Math.floor(e-i-1);s<=Math.floor(e+i+1);s++)if(City.voxels.Te(s,2,a)){const e=t(this.Yb.x,s,s+1),C=t(this.Yb.z,a,a+1),r=this.Yb.x-e,c=this.Yb.z-C,l=Math.sqrt(r**2+c**2);l<i&&l<n&&l>0&&(o=r,h=c,n=l)}if(n>i)break;{const t=i-n,e=o/n*t,s=h/n*t;this.Yb.x+=e,this.Yb.z+=s}}this.Yb.x-=(City.Cb+.5)*City.La,this.Yb.z-=(City.Cb+.5)*City.La,this.Yb.multiplyScalar(.5);let o=(new THREE.Vector3).copy(this.Yb);this.el.object3D.parent.worldToLocal(o),this.el.object3D.position.copy(o),this.el.object3D.getWorldPosition(this.Kf)}});const Cl=new Ql(53,9,16,"107-5(6A3-)6A2-5(AQ2AQA3-)AQ2AQA2-5(6A3-)6A214-2(5(T4-T3-)T4-T2-)2(5(6B3-)6B2-)5(6B3-)6B38-A4WA3-A4WA161-2(5(T4-T3-)T4-T2-)2(5(6B3-)6B2-)5(6B3-)6B38-6A3-6A2(38-A4WA3-A4WA)55-2(5(T4-T3-)T4-T2-)2(5(6B3-)6B2-)3(6B3-)6B2-2(8A-8A36-)8A-8A37-6A3-6A38-6A3-6A2(2-5(T4-T3-)T4-T)3(2-5(6B3-)6B)2-4(A4WA3-)3(6W3-6W38-)6A3-6A108-3(5(6B3-)6B2-)4(6A3-)6W3-6W2-4(A4WA3-)6W3-6W11-6A12-A4WA2(3-6W)38-6A3-6A108-5(6B3-)6B2-5(6B3-)6B4(-8A)2-6B3-6B4(-8A)2-6A3-2(6A2-)8A2-6A2-8A2-A4WA3-A4WA2-5(6A3-)6A29-2(6A3-)6A108-5(6B3-)6B2-2(3(6B3-)6B20-)2(3(6W3-)6W20-)3(6A3-)6W47-6A126-5(6B3-)6B2-C4BC3(3-6B)3-C4BC3-6B2-4(6B3-)6C3-6C2-4(6W3-)6C3-6C2-3(6W3-)6W12-6C2-2(6B3-)6A3-6W12-6C2-3S3R3-3S3R12-6A12-6C108-5(6B3-)6B2-C4BC3(3-6B)3-6C3-6B2-4(6B3-)C4-C3-6C2-4(6A3-)C4-C3-6C2-3(6A3-)6A12-6C2-2(6B3-)6A3-6A12-6C2-3S3R3-3S3R12-6A12-6C108-5(6B3-)6B2-C4BC3(3-6B)3-6C3-6B2-4(6B3-)C4-C3-6C2-2(6W3-6A3-)C4-C3-6C2-6W3-6A3-6W3-6A12-6C2-3(6A3-)6A12-6C29-6A12-6C2(2-5(T4-T3-)T4-T)2-5(6B3-)6B2-C4BC3(3-6B)3-6C3-6B2-4(6B3-)C4-C3-6C2-2(6W3-6C3-)C4-C3-6C2-6W3-6A3-6W3-6C12-6C2-3(6A3-)6C12-6C29-6A12-6C2(2-5(T4-T3-)T4-T)2-5(6B3-)6B2-C4BC3(3-6B)3-6C3-6B2-6B3-6C2(3-6B)3-C4-C3-6C2-2(6W3-6C3-)C4-C3-6C2-6W3-6C3-6W3-6A12-6C2-3(6A3-)6C12-6C29-6A12-6C2(2-5(T4-T3-)T4-T)2-5(6B3-)6B2-4(6B3-)6C3-6B2-4(6B3-)C4-C3-6C2-2(6A3-6C3-)C4-C3-2(6C2-3(6A3-)6C12-)6C29-6A12-6C2(2-5(T4-T3-)T4-T)2-5(6B3-)6B2-4(6B3-)6C3-6B2-4(6B3-)C4-C3-6C2-4(6A3-)C4-C3-6C2-A4WA3-6A3-A4WA3-6A12-6C11-2(6A12-)6C29-6A12-6C108-5(6A3-)6A2-4(2R2A2R3-)2R2C2R3-2R2A2R2-4(6A3-)6C3-6C2-2(A4WA3-6A3-)6C3-2(6C11-2(6A12-))6C29-6A12-6C-");function Ie(t,i,e){let s="";const o=9*t;for(let t=0;t<16;t++)for(let i=0;i<9;i++)for(let e=0;e<8;e++)s+=Cl.Te(o+e,i,t)??"-";return{size:{x:8,y:9,z:16},scale:.25,Jg:{material:"Lambert"},Zf:[{B:i,C:e},{deform:3,clamp:Hb.X,A:i},{deform:2,clamp:Hb.X,Q:"#FC0",R:"#F00",S:"#03C"},{deform:3,clamp:Hb.X,W:"#234"},{deform:4,clamp:Hb.X,T:"#222"}],voxels:s}}Mk.Rg.PoliceCar=Ie(0,"#CCC","#00F"),Mk.Rg.Ambulance=Ie(1,"#CCC","#C00"),Mk.Rg.FireTruck=Ie(1,"#D21","#D21"),Mk.Rg.CarRed=Ie(2,"#A00","#A00"),Mk.Rg.CarGreen=Ie(2,"#482","#482"),Mk.Rg.CarBlue=Ie(2,"#59A","#59A"),Mk.Rg.CarGrey=Ie(2,"#667","#667"),Mk.Rg.CarTan=Ie(2,"#987","#987"),Mk.Rg.Van=Ie(3,"#CCC","#048"),Mk.Rg.PickupTruck=Ie(4,"#CCC","#840"),Mk.Rg.Truck=Ie(4,"#CCC","#482");const Dh=0,Em=0,Ak=1,Ed=1,Ch=.33,Bm=Ch,Uj=1-Ch,Yc=1-Ch,Ng=.5,Ai=.5,Fh=[{x:Yc,z:1},{x:Yc,z:0}],Fd=[{x:0,z:Uj},{x:1,z:Uj}],Kk=[{x:Ch,z:0},{x:Ch,z:1}],Jm=[{x:1,z:Ch},{x:0,z:Ch}],Eh=[{x:Yc,z:1},{x:Yc,z:Uj},{x:1,z:Uj}],Gd=[{x:0,z:Uj},{x:Ng,z:Ng},{x:Yc,z:0}],Kd=[{x:0,z:Uj},{x:Ch,z:Uj},{x:Ch,z:1}],Hk=[{x:Ch,z:0},{x:Ng,z:Ng},{x:1,z:Uj}],Lk=[{x:Ch,z:0},{x:Ch,z:Ch},{x:0,z:Ch}],Im=[{x:1,z:Ch},{x:Ng,z:Ng},{x:Ch,z:1}],Fm=[{x:1,z:Ch},{x:Yc,z:Ch},{x:Yc,z:0}],Ih=[{x:Yc,z:1},{x:Ng,z:Ng},{x:0,z:Ch}],Uh=.5,Ci=2.5/21,Di=18.5/21,Xh=Di,Ei=Ci,Jk=[{x:Ch,z:0},{x:Ng,z:Uh},{x:Ci,z:Uh,Pc:90},{x:Ng,z:Uh,Pc:90},{x:Yc,z:0,Pc:0}],Ik=[{x:Ch,z:0},{x:Ng,z:Uh},{x:Di,z:Uh,Pc:-90},{x:Ng,z:Uh,Pc:-90},{x:Yc,z:0,Pc:0}],Gm=[{x:1,z:Ch},{x:Uh,z:Ng},{x:Uh,z:Ci,Pc:0},{x:Uh,z:Ng,Pc:0},{x:1,z:Uj,Pc:-90}],Hm=[{x:1,z:Ch},{x:Uh,z:Ng},{x:Uh,z:Di,Pc:180},{x:Uh,z:Ng,Pc:180},{x:1,z:Uj,Pc:-90}],Gh=[{x:Yc,z:1},{x:Ng,z:Uh},{x:Di,z:Uh,Pc:-90},{x:Ng,z:Uh,Pc:-90},{x:Ch,z:1,Pc:180}],Hh=[{x:Yc,z:1},{x:Ng,z:Uh},{x:Ci,z:Uh,Pc:90},{x:Ng,z:Uh,Pc:90},{x:Ch,z:1,Pc:180}],Jd=[{x:0,z:Uj},{x:Ai,z:Uj},{x:Ai,z:Ch},{x:0,z:Ch}],Id=[{x:0,z:Uj},{x:Uh,z:Ng},{x:Uh,z:Di,Pc:180},{x:Uh,z:Ng,Pc:180},{x:0,z:Ch,Pc:90}],Hd=[{x:0,z:Uj},{x:Uh,z:Ng},{x:Uh,z:Ci,Pc:0},{x:Uh,z:Ng,Pc:0},{x:0,z:Ch,Pc:90}],Dl=[{},{S:[Jk,Ik]},{W:[Gm,Hm]},{S:[Hk],W:[Fm]},{N:[Gh,Hh]},{N:[Fh],S:[Kk]},{N:[Eh],W:[Im]},{S:[Kk,Hk],N:[Fh,Eh],W:[Im,Fm]},{E:[Id,Hd]},{S:[Lk],E:[Gd]},{E:[Fd],W:[Jm]},{E:[Fd,Gd],W:[Jm,Fm],S:[Hk,Lk]},{N:[Ih],E:[Kd]},{N:[Fh,Ih],S:[Kk,Lk],E:[Gd,Kd]},{E:[Fd,Kd],W:[Jm,Im],N:[Eh,Ih]},{N:[Fh,Ih,Eh],S:[Kk,Hk,Lk],W:[Jm,Im,Fm],E:[Fd,Gd,Kd]}],Fl=1500,El=[];AFRAME.registerComponent("vehicle",{schema:{type:"string"},init:function(){this.Fi()},tick(t,i){this.Gk+=i/Fl;let e=this.Gk>1?this.Gk-Math.floor(this.Gk):0;this.Gk=this.Gk>1?1:this.Gk;let s=this.Cf();e&&(this.Gk=e,this.Ck(s,t),this.Cf())},Fi(){for(this.Bb=null;!this.Bb;){const t=Math.floor(Math.random()*City.Rj),i=Math.floor(Math.random()*City.Rj);if("Road"===City.Ue[i][t].type&&!City.Ue[i][t].Nh){for(this.Bb=City.Ue[i][t],City.Ue[i][t].Nh=!0,this.position={x:t-City.Rj/2,z:i-City.Rj/2},this.Rc=0,this.Sg=null;!this.Sg;){let t="NESW"[Math.floor(4*Math.random())];this.Sg=Dl[this.Bb.Fc]?.[t]?.[0]}this.Gk=0,this.Cf(),this.el.object3D.position.x=this.position.x*City.La*.5,this.el.object3D.position.z=this.position.z*City.La*.5}}},Cf(){const t=this.Ta(this.Sg,this.Gk-.2),i=this.Ta(this.Sg,this.Gk),e=this.Ta(this.Sg,this.Gk+.2),s=e.x-t.x,o=e.z-t.z;let h=Math.atan2(s,o)+Math.PI;null!=i.Pc&&(h=i.Pc/180*Math.PI);const n=this.el.object3D.position;n.x=(9*n.x+(this.position.x+i.x)*City.La*.5)/10,n.z=(9*n.z+(this.position.z+i.z)*City.La*.5)/10;const a=this.el.object3D.rotation;let C=h-a.y;return C>Math.PI&&(C-=2*Math.PI),C<-Math.PI&&(C+=2*Math.PI),a.y=(a.y+C/10+2*Math.PI)%(2*Math.PI),i},Ck(t,i){let e=null,s=null;t.x<.1?(e=City.Ue[this.Bb.z][this.Bb.x-1],s="W"):t.x>.9?(e=City.Ue[this.Bb.z][this.Bb.x+1],s="E"):t.z<.1?(e=City.Ue[this.Bb.z-1][this.Bb.x],s="N"):t.z>.9&&(e=City.Ue[this.Bb.z+1][this.Bb.x],s="S");let o=e.Fc.toString(2).split("1").length-1;if(!e.Nh||1===o||2===o&&e.Nh!==s||this.Dg&&this.Dg<i){this.Bb.Nh=!1,e.Nh=s,this.Bb=e;let t=Dl[e.Fc]?.[s];this.position={x:e.x-City.Rj/2,z:e.z-City.Rj/2};let i=Math.floor(Math.random()*t.length);this.Sg=t[i],this.Dg=null}else this.Dg?this.Gk=1:this.Dg||(this.Gk=1,this.Dg=i+Fl+Math.random()*Fl)},Ta(t,i){i=Math.max(0,Math.min(1,i));const e=t.length-1;if(e<=0)return t[0]||{x:0,z:0};const s=Math.floor(i*e),o=t[s],h=t[Math.min(s+1,e)],n=i*e-s;function a(t,i,e){return t+(i-t)*e}return{x:a(o.x,h.x,n),z:a(o.z,h.z,n),Pc:h.Pc}}}),AFRAME.registerComponent("catwalk",{schema:{default:"#222"},init:function(){this.Za=new Ql(36,18,28,"433-11(E2-)E506-5(4C2-)4C-108C-4(4C2-)4C-6C468-181C5(4-2C)4-3C11(2-4C)2-3C5(4-2C)4-C10-2C6-2C304-254C5(2-4C)2-3C5(4-2C)4-C10-2(2C6-2C26-)2C6-2C64-2C14-2C151-5(4C2-)4C-108C-11(4C2-)4C109-2C2-2(2C4-)4C2(4-2C)2-2C10-4C4-2C8-2C16-2C6-2C26-4C4-2C8-2C16-4C4-2C8-2(2C18-2C14-)2C44-5(2C4-)2C3-29(4C2-)4C3-5(2C4-)2C110-2C2-2C10-2C6-2C4-2C2-4C2(2(2-2C6-2C)2(2-4C))2(2-2C4-4C2-4C4-2C2(2-4C))17(2-4C)2-110C-11(4C2-)4C3-5(2C4-)2C146-2C2-4C8-2C4-4C4-2C2-4C2-2C10-2C6-2C4-2C2-4C2(2-2C6-2C)3(2-4C)2(8-2C4-4C4-2C2(2-4C))10(2-4C)2-182C-5(4C2-)4C3-5(2C4-)2C152-4(2C14-2C18-)2C14-2C84-180C2-4(2C4-)2C3-4C33-2C152-2(2C14-2C6-2C2-2C6-)2C14-2C116-5(2C4-)2C3-4C-180C2-5(2C4-)2C212-2C2-2C30-2C2-2C67-4C32-4C3-4(2C4-)2C3-5(4C2-)4C-180C-4C3-5(2C4-)2C212-2C2-2C30-2C2-2C66-6C31-4C3-4(2C4-)2C2-6C-4(4C2-)4C-180C2-5(2C4-)2C218-3(2C2-2C30-)6C30-6C2-4(2C4-)2C2-6C-4(4C2-)4C-114C-4(4C2-)4C3-2C3-4(4C2-)4C9-4(2C4-)2C10-4(2C4-)2C182-4(6C30-)6C2-4(2C4-)2C2-3(6C-4(4C2-)4C-)6C-4(4C2-)4C3-2C3-4(4C2-)4C8-4(4C2-)4C9-4(2C4-)2C10-4(2C4-)2C158-2C14-2C6-4(6C30-)6C2-4(2C4-)2C2-2(6C-4(4C2-)4C-)36C2(2-2C2-30C)7-4(4C2-)4C8-4(4C2-)4C9-4(2C4-)2C158-2C14-2C6-6C6-2C14-2C6-4(6C30-)6C2-4(2C4-)2C2-36C-4C-30C2-2C2-2(30C6-)30C7-4(4C2-)4C9-4(2C4-)2C152-2C2-4C4-2C8-2C4-8C6-2C8-2C4-4C4-2(6C6-2C14-2C6-)2(6C30-)6C31-4C-30C2-2C2-3(30C6-)30C7-4(4C2-)4C9-4(2C4-)2C152-2C2-2C6-2C14-3(2C2-)4C4-2C2-2C4-4C2(2-2C)2(8-2C)4-4C16-2C14-2C18-2C14-2C12-2(2C4(2-4C)2-2C6-)4(30C6-)30C7-4(4C2-)4C187-2C2-2C4-4C4-2C8-3(2C2-)2(2C6-2C2-)3(2C2-)2(4C4-2C2-2C4-4C2-2C6-2C2-)4(4C2-)2(2C6-2C4(2-4C)2-)2C4(6-30C)8-4(2C4-)2C234-2C6-2C12-2(2C2-)2C4-4C4-2C8-3(2C2-)2C4-4C2-4C4-4(2C2-)2C4-4C2-4C4-2C4(2-2C6-2C4(2-4C))2-2C2(6-30C)8-4(2C4-)2C10-4(2C4-)2C234-2C6-2C26-2C6-2C12-2(2C2-)2C4-4C4-2C8-3(2C2-)2(2C4-4C2-4C4-4(2C2-))2C4-4C2-4C4-2(2C2-)4(2C34-)11(2C4-)2C10-4(2C4-)3(2C10-2C3-2(2C5-)2C3-)2C126-2C6-2C26-2C6-2(2C12-)2C6-2C12-7(2C34-)11(2C4-)4(2C10-2C3-2(2C5-)2C3-)2C436-2(2C34-)2C76-2(2C3-2(2C5-)2C3-2C10-)2C3-2(2C5-)2C3-2C436-2C34-2C112-4(2C3-2(2C5-)2C3-2C10-2C3-2(2C5-)2C3-2C586-)2C3-2(2C5-)2C3-2C10-2C3-2(2C5-)2C3-2C8-"),this.Va={size:{x:10,y:10,z:16},scale:"#222"===this.data?.04:.02,Jg:{material:"Phong",shininess:200},Zf:[{deform:2,C:this.data,E:"#975",B:"#A00"}],voxels:"2B-3B2-2B90-2B-4B-2B91-9B92-8B93-5B94-3B2-B93-2(2B-)2B92-2B2-B2-2B92-2B-5B44-2(2C8-)2C2(4-6C)4-9B45-2(2C8-)2C2(4-6C)4-8B46-2C8-2C37-5B5-4B37-2C8-2(2C36-7B4-4B7-4(2C8-))2C35-6B-2B3-4B83-3B5-2B90-"},this.Wa=Nk.He("Cat.Stand",this.Va),this.catStand=Nk.He("Cat.Stand",this.Je(0)),this.catSit=Nk.He("Cat.Sit",this.Je(5)),this.Am=[Nk.He("Cat.Walk1",this.Je(1)),Nk.He("Cat.Walk2",this.Je(2)),Nk.He("Cat.Walk3",this.Je(3)),Nk.He("Cat.Walk4",this.Je(4))],this.Bc=!1,this.Al=0,this.Gc=0,this.Yb=new THREE.Vector3,this.Kf=new THREE.Vector3,this.Kf.copy(this.el.object3D.position)},tick(t,i){if(this.Bc)return;this.Yb.copy(this.el.object3D.position);const e=this.Yb.x-this.Kf.x,s=this.Yb.z-this.Kf.z,o=Math.sqrt(e*e+s*s);this.Kf.copy(this.Yb),this.Al+=o,this.Gc=(9*this.Gc+this.Al)/10;const h=Math.abs(this.Al-this.Gc);this.mesh=h<1e-5?this.catSit:h<.1?this.catStand:this.Am[Math.floor(4*this.Al)%4],this.el.setObject3D("mesh",this.mesh);this.el.sceneEl.querySelectorAll("[vehicle]").forEach((t=>{const i=t.object3D.position;this.Yb.distanceTo(i)<1&&this.el.object3D.position.y<.1&&(this.mesh=this.Wa,this.el.setObject3D("mesh",this.mesh),this.Bc=!0,this.el.setAttribute("spray",""),this.el.removeAttribute("movecontrols"),this.el.components.sound.playSound())}))},Je(t){let i="";const e=6*t;for(let t=0;t<28;t++)for(let s=0;s<18;s++)for(let o=0;o<6;o++)i+=this.Za.Te(e+o,s,t)??"-";return{size:{x:6,y:18,z:28},scale:"#222"===this.data?.04:.02,Jg:{material:"Phong",shininess:200},Zf:[{deform:2,C:this.data,E:"#975"}],voxels:i}}}),AFRAME.registerComponent("walk-up-and-down",{schema:{length:{type:"number",default:.5}},tick:function(){const t=new THREE.Vector3;this.el.object3D.getWorldPosition(t);const i=new THREE.Vector3(0,0,1).applyQuaternion(this.el.object3D.quaternion),e=this.data.length/2,s=new THREE.Vector3(t.x+i.x*e,0,t.z+i.z*e),o=new THREE.Vector3(t.x-i.x*e,0,t.z-i.z*e);let h=City.Oe(s),n=City.Oe(o);h=Math.abs(h),n=Math.abs(n);const a=(h+n)/2;this.el.object3D.position.y+=.1*(a-this.el.object3D.position.y);const C=h-n,r=-Math.atan2(C,1);this.el.object3D.rotation.x=r}}),AFRAME.registerComponent("spray",{init:function(){this.Qb=100,this.Mi=new Float32Array(3*this.Qb);for(let t=0;t<this.Qb;t++)this.Mi[3*t+0]=(Math.random()-.5)/2,this.Mi[3*t+1]=Math.random()/2,this.Mi[3*t+2]=(Math.random()-.5)/2;const t=new THREE.BufferGeometry;t.setAttribute("position",new THREE.BufferAttribute(this.Mi,3));const i=new THREE.PointsMaterial({color:"red",size:.05});this.Ii=new THREE.Points(t,i),this.el.object3D.add(this.Ii),this.Ek=null},tick:function(t){this.Ek=this.Ek??t;const i=(t-this.Ek)/1e3,e=1+.05*(1-i);for(let t=0;t<this.Qb;t++)this.Mi[3*t+0]*=e,this.Mi[3*t+1]*=e,this.Mi[3*t+2]*=e,this.Mi[3*t+1]-=.1*i;this.Ii.geometry.attributes.position.needsUpdate=!0,i>=1&&(this.el.object3D.remove(this.Ii),this.el.removeAttribute("spray"))}}),AFRAME.registerComponent("movecontrols",{schema:{type:"selector"},init:function(){this.data;this.Wk=0,this.Mb=new THREE.Clock,this.Vj={x:0,z:0},this.Wj=0,this.Uf={},this.attachEventListeners()},tick:function(t,i){let e=this.Vj.x,s=this.Vj.z,o=i/1e3;if(e=e<-.6||e>.6?Math.min(4*o,.25)*Math.sign(e):0,s=s<-.6||s>.6?Math.min(4*o,.25)*Math.sign(s):0,0!==e||0!==s){let t=this.data.object3D.position.clone(),i=this.data.object3D.rotation.y;t.x+=Math.cos(i)*e+Math.sin(i)*s,t.z+=-Math.sin(i)*e+Math.cos(i)*s,this.data.object3D.position.x=t.x,this.data.object3D.position.z=t.z}let h=this.Wj;h=h<-.6||h>.6?Math.min(2*o,.25)*Math.sign(h):0,this.data.object3D.rotation.y-=h},play:function(){this.attachEventListeners()},pause:function(){this.Yi()},remove:function(){this.pause()},attachEventListeners:function(){this.el.addEventListener("thumbstickmoved",this.thumbstickMoved.bind(this)),this.el.id.includes("left")&&(window.addEventListener("keydown",this.onKeyDown.bind(this)),window.addEventListener("keyup",this.onKeyUp.bind(this))),window.addEventListener("blur",this.onBlur.bind(this))},Yi:function(){this.el.removeEventListener("thumbstickmoved",this.thumbstickMoved),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp),window.removeEventListener("blur",this.onBlur)},thumbstickMoved:function(t){this.Wj=t.detail.x,this.Vj.z=t.detail.y},onKeyDown:function(t){AFRAME.utils.shouldCaptureKeyEvent(t)&&("KeyW"!==t.code&&"ArrowUp"!==t.code||(this.Vj.z=-1),"KeyA"!==t.code&&"ArrowLeft"!==t.code||(this.Wj=-1),"KeyS"!==t.code&&"ArrowDown"!==t.code||(this.Vj.z=1),"KeyD"!==t.code&&"ArrowRight"!==t.code||(this.Wj=1),this.emit(t))},onKeyUp:function(t){AFRAME.utils.shouldCaptureKeyEvent(t)&&("KeyW"!==t.code&&"ArrowUp"!==t.code||(this.Vj.z=0),"KeyA"!==t.code&&"ArrowLeft"!==t.code||(this.Wj=0),"KeyS"!==t.code&&"ArrowDown"!==t.code||(this.Vj.z=0),"KeyD"!==t.code&&"ArrowRight"!==t.code||(this.Wj=0),this.emit(t))},onBlur:function(){for(let t in this.Uf)this.Uf.hasOwnProperty(t)&&delete this.Uf[t]},emit:function(t){this.el.emit(t.type+":"+t.code,new window.KeyboardEvent(t.type,t))}}),AFRAME.registerComponent("third-person-camera",{schema:{target:{type:"selector"},distance:{type:"number",default:-1},rotationSpeed:{type:"number",default:.05}},init:function(){this.Rk=null,this.Rk=this.data.target,this.Rk?(this.Kf=new THREE.Vector3,this.Lf=new THREE.Vector3):console.warn("Missing 3rd person target")},tick:function(){if(!this.Rk)return;const t=this.Rk.object3D.position,i=new THREE.Vector3(t.x,t.y+0,t.z),e=new THREE.Vector3(0,0,this.data.distance),s=(new THREE.Quaternion).setFromEuler(new THREE.Euler(0,this.Rk.object3D.rotation.y,0));e.applyQuaternion(s),i.sub(e),this.el.object3D.position.distanceTo(i)>2*Math.abs(this.data.distance)?this.el.object3D.position.copy(i):this.el.object3D.position.lerp(i,.1),this.el.object3D.quaternion.slerp(s,this.data.rotationSpeed)},remove:function(){this.Rk=null}}),AFRAME.registerComponent("kitten",{schema:{},init:function(){this.Fk="S",this.Rk=null,this.Sk=new THREE.Vector3,this.Ad=new THREE.Vector3,this.Ya=document.querySelector("#cat");do{this.el.object3D.position.x=(Math.random()-.5)*(City.Rj-4)*City.La*City.Hj,this.el.object3D.position.y=.5,this.el.object3D.position.z=(Math.random()-.5)*(City.Rj-4)*City.La*City.Hj}while(.5!=City.Oe(this.el.object3D.position)||this.el.object3D.position.distanceTo(this.Ya.object3D.position)<20);this.el.object3D.rotation.y=Math.random()*Math.PI*2},tick:function(t,i){if("D"===this.Fk)return;if(!this.Ya)return;const e=this.el,s=(this.data,e.object3D.position),o=this.Ya.object3D.position,h=this.Ya.components.catwalk.Bc?Number.MAX_VALUE:s.distanceTo(o);if(this.el.components.catwalk.Bc)this.Fk="D";else if("S"===this.Fk&&h<15)this.Fk="M";else if("M"===this.Fk&&h<1.5){this.Fk="F";let t=null;const i=document.querySelectorAll("[kitten]");for(const e of i){const i=e.components.kitten;if(i&&i.Fk&&i.Rk===this.Ya){t=e;break}}this.Rk=this.Ya,t&&(t.components.kitten.Rk=e)}else"F"===this.Fk&&(this.Rk.components.catwalk.Bc||this.Rk.components.kitten&&"F"!=this.Rk.components.kitten.Fk)&&(this.Fk="M",this.Rk=null);let n=null;if("M"===this.Fk){const t=4,e=.2;this.Gl=this.Gl??new THREE.Vector3(Math.random()-.5,0,Math.random()-.5),this.el.object3D.position.x+=this.Gl.x*t*i/1e3,this.el.object3D.position.z+=this.Gl.z*t*i/1e3,n=this.el.object3D.position.clone().add(this.Gl),Math.random()<e*(i/1e3)&&(this.Gl=null)}else if("F"===this.Fk){const t=.6;n=this.Rk.object3D.position.clone(),n.y=e.object3D.position.y;const i=(new THREE.Vector3).subVectors(n,s).normalize(),o=(new THREE.Vector3).copy(n).sub(i.multiplyScalar(t));e.object3D.position.lerp(o,1)}n&&(e.object3D.lookAt(n),e.components.catwalk.mesh.rotation.y=Math.PI)}}),AFRAME.registerComponent("score",{init(){this.arrow=Nk.He("Arrow",{size:{x:9,y:1,z:9},scale:.03,Pf:{color:"#FFF",Rc:{x:0,y:1,z:-1},Da:.7},Zf:[{A:"#08A"},{B:"#08A",deform:10,clamp:Hb.Y},{C:"#08A",deform:4,clamp:Hb.Y}],Jg:{material:"Basic"},voxels:"4(3-3A3-)C7AC-B5AB3-B3AB5-BAB7-C4-"}),this.el.setObject3D("arrow",this.arrow),this.arrow.position.set(0,-.25,0),this.Jf=[...document.querySelectorAll("[kitten]")],this.worldPosition=new THREE.Vector3,this.text=document.getElementById("text")},tick(){if(this.cat=this.cat??document.getElementById("cat").components.catwalk,!this.cat)return;const t=this.Jf.map((t=>t.components.kitten.Fk)).join("-");this.last!=t&&(this.mesh=Nk.He("Score",{size:{x:t.length,y:1,z:1},scale:.04,Pf:{color:"#FFF",Rc:{x:0,y:0,z:1},Da:.7},Zf:[{S:"#08A",M:"#08A",F:"#0C0",D:"#222"}],Jg:{material:"Basic"},voxels:t}),this.el.setObject3D("mesh",this.mesh),this.last=t),this.el.object3D.getWorldPosition(this.worldPosition);const i=this.Jf.filter((t=>"SM".includes(t.components.kitten.Fk))).map((t=>(t.distance=t.object3D.position.distanceTo(this.worldPosition),t))).sort(((t,i)=>t.distance-i.distance))[0];let e="";const s=this.Jf.map((t=>"F"===t.components.kitten.Fk?"F":"")).join("").length;i&&!this.cat.Bc?this.arrow.lookAt(i.object3D.position):(this.arrow.removeFromParent(),[...document.querySelectorAll("[movecontrols]")].map((t=>t.pause())),e=this.cat.Bc?"You should\nhave looked!\nMi-ouch!":s!=this.Jf.length?`You saved only\n${s}Jf out of ${this.Jf.length}Mi-aww...`:"Wow!\nYou can\nsave them all!\nPurrfect!",setTimeout((()=>{window.location.reload()}),7500)),this.text.setAttribute("value",e)}});const P=(t,i)=>{if(!t)return;const e=new AudioContext,s=e.createGain();for(let o=0;o<t.length;o++){const h=e.createOscillator();t[o]&&"0"!=t[o]&&(h.connect(s),s.connect(e.destination),h.start(o*i+.3),h.frequency.setValueAtTime(440*1.06**(-105+t.charCodeAt(o)),o*i+.3),h.type="sine",s.gain.setValueAtTime(.01,o*i+.3),s.gain.setTargetAtTime(.001,o*i+.3+.1,.05),h.stop(o*i+.3+i-.01))}},Fg="a0d000000a0d000000a0d000000a0d000000aaddaadd0aaddaadd0aaddaadd0aaddaadd0",Gg="hijklm000mlkjih000hijklm000mlkjih000hhiijjkk0kkjjiihh0hhiijjkk0kkjjiihh0";function Hi(){P(Fg,.3),P(Gg,.3)}let Oh=!0;function Bk(){Oh&&(Oh=!1,Hi(),setInterval(Hi,22e3))}function Bd(t,i){const e=new ArrayBuffer(44+2*t.length),s=new DataView(e);Dm(s,0,"RIFF"),s.setUint32(4,36+2*t.length,!0),Dm(s,8,"WAVE"),Dm(s,12,"fmt "),s.setUint32(16,16,!0),s.setUint16(20,1,!0),s.setUint16(22,1,!0),s.setUint32(24,i,!0),s.setUint32(28,2*i,!0),s.setUint16(32,2,!0),s.setUint16(34,16,!0),Dm(s,36,"data"),s.setUint32(40,2*t.length,!0);let o=44;for(let i=0;i<t.length;i++,o+=2){const e=Math.max(-1,Math.min(1,t[i]));s.setInt16(o,e<0?32768*e:32767*e,!0)}return"data:audio/wav;base64,"+btoa(String.fromCharCode.apply(null,new Uint8Array(e)))}function Dm(t,i,e){for(let s=0;s<e.length;s++)t.setUint8(i+s,e.charCodeAt(s))}function Ke(){const t=44100,i=new Float32Array(22050);for(let e=0;e<22050;e++){const s=e/t;i[e]=1*Math.sin(2*Math.PI*20*s)+.4*Math.sin(4*Math.PI*20*s)+.4**2*Math.sin(8*Math.PI*20*s)+.4**3*Math.sin(16*Math.PI*20*s)}return Bd(i,t)}function Me(){const t=44100,i=new Float32Array(22050);for(let e=0;e<22050;e++){const s=e/t;i[e]=(24*(i[e-1]??0)+(e>5512.5&&e<11025?0:1)*Math.abs(Math.sin(200*Math.PI*s)))/25}return Bd(i,t)}function Pa(){let t="";for(let i=0;i<20;i++){new THREE.Vector3(0,0,0);t+=`<a-entity catwalk="${["#C84","#DB9","#777","#AAA"][Math.floor(4*Math.random())]}" kitten avoidbuildings walk-up-and-down mixin="deathsound"></a-entity>`}let i=["CarRed","CarGreen","CarBlue","CarGrey","CarTan","Van","PickupTruck","Truck"].map((t=>`<a-entity vehicle svox="${t}" mixin="enginesound"></a-entity>`)).join("");i+=i,document.body.innerHTML=`\n<a-scene id="scene" fpscounter renderer="highRefreshRate:true; logarithmicDepthBuffer:false; colorManagement:true; antialias:true;">\n<a-assets>\n<audio id="engine" src="${Mk.sounds.Engine}"></audio>\n<audio id="death" src="${Mk.sounds.Death}"></audio>\n<a-mixin id="enginesound" sound="src:#engine;autoplay:true;volume:0.1;loop:true;positional:true;distanceModel:linear;refDistance:5;maxDistance:25;rolloffFactor:1;"></a-mixin>\n<a-mixin id="deathsound" sound="src:#death;autoplay:false;volume:1;positional:true;distanceModel:linear;refDistance:10;maxDistance:250;rolloffFactor:1;"></a-mixin>\n</a-assets>\n<a-entity id="cat" catwalk position="-6 0.5 0" avoidbuildings walk-up-and-down mixin="deathsound">\n<a-text id="text" align="center" width="8" color="red" value="" position="0 1.5 0"></a-text>\n<a-entity score position="0 1.25 0"></a-entity>\n</a-entity>\n<a-entity id="camerarig" position="-10 0 1.5" third-person-camera="target:#cat;">\n<a-camera id="camera" look-controls wasd-controls="enabled:false" position="0 1.6 1.5" avoidbuildings="preservePosition:true;"></a-camera>\n<a-entity id="lefthand" meta-touch-controls="hand:left;Og:true;" movecontrols="#cat"></a-entity>\n<a-entity id="righthand" meta-touch-controls="hand:right;Og:true;" movecontrols="#cat"></a-entity>\n</a-entity>\n<a-sky src="data:image/bmp;base64,Qk1SAAAAAAAAAEIAAAAoAAAAAQAAAAQAAAABAAgAAAAAAAAAAADEDgAAxA4AAAMAAAADAAAA/5QA////AP//////AgAAAAIAAAABAAAAAAAAAA=="></a-sky>\n<a-entity id="City" city position="0 -0.5 0"></a-entity>\n<a-entity vehicle svox="Ambulance" mixin="enginesound"></a-entity>\n<a-entity vehicle svox="FireTruck" mixin="enginesound"></a-entity>\n<a-entity vehicle svox="PoliceCar" mixin="enginesound"></a-entity>\n${i}\n${t}\n</a-scene>\n`}Mk.sounds=Mk.sounds??{},Mk.sounds.Engine=Ke(),Mk.sounds.Death=Me(),setTimeout((function(){Mk.Rg.City=City.He(),City.mesh=Nk.He("City",Mk.Rg.City),document.getElementById("wait").classList.add("hide"),document.getElementById("start").classList.remove("hide")}),200),document.addEventListener("DOMContentLoaded",(function(){document.getElementById("start").onclick=function(){Bk(),Pa()}}))</script><style>body{background:#000;min-height:100vh;margin:0;padding:0;overflow:hiddden}.c{position:fixed;top:0;left:0;width:100vw;height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(#0ff,#0094ff,#0094ff)}.b{font-family:'Brush Script MT',cursive}.s{font-size:1rem;font-style:italic;color:#fff;font-weight:300;margin:0 0 2rem}.start{background:#db2777;color:#fff;font-weight:600;padding:.5rem 1.5rem;border-radius:9999px;border:none;cursor:pointer}.hide{display:none}</style><div class=c><svg viewBox="0 0 2000 500" style="width:50%;height:auto;margin:0 0 .5rem"><path id=p d="M 50 400 Q 1000 100 1950 400" fill=none stroke=none /><text class=b fill=white style=font-size:300px><textPath href=#p startOffset=50% text-anchor=middle>Kittens Crossing</textPath></text></svg><p class=s>PG-13: You can't save them all...<p id=wait class=s>Generating the city may take a minute...</p><button id=start class="start hide">Start</button></div>