<html style=height:100%><head style=height:100%><title>TATD js13kgame</title><script>function SfxrParams(){this.setSettings=function(t){for(var e=0;24>e;e++)this[String.fromCharCode(97+e)]=t[e]||0;this.c<.01&&(this.c=.01);var n=this.b+this.c+this.e;if(.18>n){var i=.18/n;this.b*=i,this.c*=i,this.e*=i}}}function SfxrSynth(){var t,e,n,i,o,r,s,a,p,h,l,c;this._params=new SfxrParams,this.reset=function(){var t=this._params;i=100/(t.f*t.f+.001),o=100/(t.g*t.g+.001),r=1-t.h*t.h*t.h*.01,s=-t.i*t.i*t.i*1e-6,t.a||(l=.5-t.n/2,c=5e-5*-t.o),a=1+t.l*t.l*(t.l>0?-.9:10),p=0,h=1==t.m?0:(1-t.m)*(1-t.m)*2e4+32},this.totalReset=function(){this.reset();var i=this._params;return t=i.b*i.b*1e5,e=i.c*i.c*1e5,n=i.e*i.e*1e5+12,3*((t+e+n)/3|0)},this.synthWave=function(u,f){var d=this._params,_=1!=d.s||d.v,m=d.v*d.v*.1,y=1+3e-4*d.w,v=d.s*d.s*d.s*.1,g=1+1e-4*d.t,w=1!=d.s,b=d.x*d.x,k=d.g,q=d.q||d.r,T=d.r*d.r*d.r*.2,S=d.q*d.q*(d.q<0?-1020:1020),x=d.p?32+((1-d.p)*(1-d.p)*2e4|0):0,E=d.d,M=d.j/2,C=d.k*d.k*.01,L=d.a,H=t,N=1/t,A=1/e,P=1/n,j=5/(1+d.u*d.u*20)*(.01+v);j>.8&&(j=.8),j=1-j;for(var I,B,W,z,O,F,R=!1,U=0,V=0,D=0,Y=0,J=0,X=0,$=0,G=0,K=0,Q=0,Z=new Array(1024),tt=new Array(32),et=Z.length;et--;)Z[et]=0;for(et=tt.length;et--;)tt[et]=2*Math.random()-1;for(et=0;f>et;et++){if(R)return et;if(x&&++K>=x&&(K=0,this.reset()),h&&++p>=h&&(h=0,i*=a),(i*=r+=s)>o&&(i=o,k>0&&(R=!0)),B=i,M>0&&(Q+=C,B*=1+Math.sin(Q)*M),8>(B|=0)&&(B=8),L||(0>(l+=c)?l=0:l>.5&&(l=.5)),++V>H)switch(V=0,++U){case 1:H=e;break;case 2:H=n}switch(U){case 0:D=V*N;break;case 1:D=1+2*(1-V*A)*E;break;case 2:D=1-V*P;break;case 3:D=0,R=!0}q&&(0>(W=0|(S+=T))?W=-W:W>1023&&(W=1023)),_&&y&&(1e-5>(m*=y)?m=1e-5:m>.1&&(m=.1)),F=0;for(var nt=8;nt--;){if(++$>=B&&($%=B,3==L))for(var it=tt.length;it--;)tt[it]=2*Math.random()-1;switch(L){case 0:O=l>$/B?.5:-.5;break;case 1:O=1-$/B*2;break;case 2:O=.225*((0>(O=1.27323954*(z=6.28318531*((z=$/B)>.5?z-1:z))+.405284735*z*z*(0>z?1:-1))?-1:1)*O*O-O)+O;break;case 3:O=tt[Math.abs(32*$/B|0)]}_&&(I=X,0>(v*=g)?v=0:v>.1&&(v=.1),w?(J+=(O-X)*v,J*=j):(X=O,J=0),Y+=(X+=J)-I,O=Y*=1-m),q&&(Z[G%1024]=O,O+=Z[(G-W+1024)%1024],G++),F+=O}F*=.125*D*b,u[et]=F>=1?32767:-1>=F?-32768:32767*F|0}return f}}var synth=new SfxrSynth;jsfxr=function(t){synth._params.setSettings(t);var e=synth.totalReset(),n=new Uint8Array(4*((e+1)/2|0)+44),i=2*synth.synthWave(new Uint16Array(n.buffer,44),e),o=new Uint32Array(n.buffer,0,44);o[0]=1179011410,o[1]=i+36,o[2]=1163280727,o[3]=544501094,o[4]=16,o[5]=65537,o[6]=44100,o[7]=88200,o[8]=1048578,o[9]=1635017060,o[10]=i,i+=44;for(var r=0,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a="data:audio/wav;base64,";i>r;r+=3){var p=n[r]<<16|n[r+1]<<8|n[r+2];a+=s[p>>18]+s[p>>12&63]+s[p>>6&63]+s[63&p]}return a},console.log("ss"),window.onload=function(){function t(t,e){return B?e:t}function e(t){J=t,start.innerHTML=J}function n(t,e){return t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function i(t,e){n(t,e)||(t.className+=" "+e)}function o(t,e){if(n(t,e)){var i=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(i," ")}}function r(t,e){var n=[t,G+e];return gt.push(n),n}function s(t,e){t[0]+=e[0],t[1]+=e[1]}function a(t){if("object"!=typeof t)return t;if(null==t)return t;if(t.concat)var e=[];else e={};for(var n in t)e[n]=a(t[n]);return e}function p(t,e){for(var n in e)t[n]=e[n]}function h(t,e,n){return null==t[n][e]?1:parseInt(t[n][e])}function l(t,e,n){var i=[[0,-e],[e,0],[0,e],[-e,0]];if(null==n){for(var o in i){var r=t(i[o][0],i[o][1],o);if(r)return r}return!1}return t(i[n][0],i[n][1],n)}function c(t,e){return X.sqrt(X.pow(X.abs(t[0]-e[0]),2)+X.pow(X.abs(t[1]-e[1]),2))}function u(t){return[50*(t[0]+.5),50*(t[1]+.5)]}function f(t,e){if(e){for(;e.parentNode;){if("function"==typeof t){if(t(e))return t(e)}else if(e.parentNode==t)return e.parentNode;e=e.parentNode}return!1}}function d(t,e,n,i){return i&&D&&towers_map&&(towers_map[t]++,D.set_tower_panel()),new Tower(t,[e,n])}function _(t,e){i(D.start_grid.querySelector(".startp"),"out"),setTimeout((function(){o(D.start_grid.querySelector(".startp"),"out")}),500),r((function(){emy_create(t,e)}),.3*W)}function m(t){return o(t=t.cloneNode(!0),"hide"),o(t,"trans"),t.id="",t}function y(){return void 0!==Tt}function v(){y()&&(Tt.parentNode.removeChild(Tt),Tt=void 0,o(body,"catching"))}function w(t,e){var n=m(U("#emy_panel_to_copy")),o=m(U("#emy_to_copy[kind='"+e+"']")),r=[t.hp,1e3*ht.emy[e],t.str],s=[.2,1,15];return Array.prototype.forEach.call(n.querySelectorAll(".bar span"),(function(t,e){t.style.width=r[e]*s[e]+"px";var n=document.createElement("label");i(n,"prop-value"),n.innerHTML=parseInt(r[e]),t.appendChild(n)})),n.querySelector(".top").appendChild(o),n.querySelector(".bottom p").innerHTML=t.des,n}function b(t,e,n){var o=m(U("#tower_panel_to_copy")),r=m(U("#tower_to_copy[kind='"+e+"']")),s=[t.power,t.range,1/ht.tower[e]/3*900,t.cost+(n?0:5*towers_map[e])];return tower_lens_k=[3,20,3,2],Array.prototype.forEach.call(o.querySelectorAll(".bar span"),(function(t,e){t.style.width=s[e]*tower_lens_k[e]+"px";var n=document.createElement("label");i(n,"prop-value"),n.innerHTML=1!=e?parseInt(s[e]):s[e],t.appendChild(n)})),o.querySelector(".top").appendChild(r),o.querySelector(".bottom p").innerHTML=t.des,o}function k(t){var e="scaleX(-1)";if(t.style.transform.lastIndexOf(e)>-1){var n=t.style.transform,i=n.split(" ");n=i.length>1?i[0]:"",t.style.transform=n}else t.style.transform+=e}function q(t,e){D&&D.destroy(e),e?setTimeout((function(){D=new Et(t)}),300):D=new Et(t)}function T(t){t.step()}function S(t,e){(new Array).forEach.call(V(".speed .top-btn"),(function(t){i(t,"inactive")})),o(t,"inactive"),function(t){it=t*nt}(e)}function x(t,e,n){i(t,"fadingout"),t.style.transition="all "+e+"ms",n&&o(t,"center"),i(t,"trans"),t.dataset.fadingcb=setTimeout((function(){o(t,"fadingout"),C(t)}),e)}function E(t,e,n){t.style.transition="all "+e+"ms",M(t),setTimeout((function(){n&&i(t,"center"),o(t,"trans")}),100)}function M(t){o(t,"displaynone")}function C(t){i(t,"displaynone")}function L(){q(I,!0),N("level_setting"),N("level_failed"),D.reversing=!1}function H(){level_state="normal",D.td_enter(),N("level_failed"),N("level_setting"),D.reversing=!1}function N(t){x(U("#"+t),500,!0),x(body_mask,500),O=!1}function A(t){v(),D.reversing||(E(body_mask,500),i(U("#"+t),"down"),E(U("#"+t),300,!0),O=!0)}function P(t){var e=jsfxr(t),n=new Audio;n.src=e,B||n.play()}var j="ta",I=0;g={};var B="true"==localStorage.getItem("dbg");B&&(my_panel.style.transition="transform 0s",I=0,j="td");var W=60,z=!1,O=!1,F=["bul","tower","emy"],R=document,U=function(t){return R.querySelector(t)},V=function(t){return R.querySelectorAll(t)};body=U("body");var D,Y,J,X=Math,$=console,G=0,K={emy:[],bul:[],tower:[]},Q=!1,Z=!1,tt=[],et={bul:[],tower:[],emy:[]},nt=1,it=1,ot=[[1,,.1693,.111,.0106,.8855,.0802,-.5639,,,,,,.0314,.1647,,,,1,,,,,.5],[3,,.01,,.206,.4598,,-.4236,,,,,,,,,,,1,,,,,.44],[0,,.2368,.1023,,.7157,.2,-.2371,,,,,,.446,-.1164,,,,1,,,.2673,,.44],[2,,.2386,.2191,.3293,.6307,.0235,-.405,,,,,,.7376,-.6784,,,,1,,,,,.5]],rt=[3,,.2585,.7193,.0618,.7524,,-.389,,,,.4458,.8618,,,,.1306,-.1808,1,,,,,.44],st=[0,,.2352,,.4135,.4361,,.4238,,,,,,.1343,,.5811,,,1,,,,,.44],at=[1,,.3399,,.4035,.3884,,.4556,,,,,,,,.5184,,,1,,,,,.44],pt=[{map:["","","00000000000000","11111111111110","10000000000000","10","10","100000000000000","",""],start:[0,2],end:[14,7],hp:1,power:45,preset:[[6,1,0],[8,1,0],[8,3,0]]},{map:["","","0000","1110","1000","10","10","100000000000000","",""],start:[0,2],end:[14,7],hp:3,power:50,preset:[[2,5,1],[2,6,1],[2,3,0],[1,3,0]]},{map:["11111110","11111110","111111100","111111110","111100000","11110","11110","11110","11110","11110"],start:[7,0],end:[4,9],hp:2,power:60,preset:[[5,5,1],[7,3,1],[6,2,1]]},{map:["11111110","11111110","111111100","111111110","111111100","11111110","111111100","111111110","111111110","111111110"],start:[7,0],end:[8,9],hp:5,power:70,preset:[[7,3,2],[8,5,0],[8,1,2],[7,7,1]]},{map:["11111110","11111110","11111110","11111110","11111110","11111110","11111110","11111110","11111110","11111110"],start:[7,0],end:[7,9],hp:5,power:80,preset:[[8,4,2],[6,6,2],[8,5,1],[8,6,1]]},{map:["0","00","100","1100","11100","111100","1111100","11111100","111111100","111111110"],start:[0,0],end:[8,9],hp:5,power:95,preset:[[5,4,2],[7,6,3],[3,5,1],[4,6,1],[6,5,1]]},{map:["0","00000","11110","11000","11011000","11000010","11111110","11111110","111111100","111111110"],start:[0,0],end:[8,9],hp:10,power:75,preset:[[5,3,3],[6,6,0],[3,4,1],[4,4,0],[6,5,1]]}],ht={bul:[4,5,5,5,5,5],tower:[30,50,50,60],emy:[.03,.05,.03,.02]},lt=[{hp:70,str:1,des:"Basic warrior.",cb:function(){},cd:.5},{hp:70,str:1,des:"Fast warrior.",cb:function(){},cd:.3,st:2},{hp:110,str:2,des:"Solid warrior.",cb:function(){},cd:1,st:4},{hp:300,str:3,des:"Final warrior.",cb:function(){},cd:1.5,st:6}],ct=function(){var t=navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"];for(var n in e)if(t.indexOf(e[n])>0)return e[n]}(),ut=function(){var t=parseInt(document.documentElement.clientHeight),e=parseInt(document.documentElement.clientWidth),n=e/1020,i=t/620,o=100*Math.min(n,i);("iPhone"==ct||"iPad"==ct||"iPod"==ct)&&(o=Math.max(100,o)),body.style.zoom=o+"%",console.log(o,n,i,e)};if(ct){var ft=R.createElement("meta");ft.name="viewport",nt=2,i(body,"phone"),it*=nt,ft.content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no",U("head").appendChild(ft),ut(),window.addEventListener("resize",ut,!1)}var dt={cold:{add:function(t){i(t.d,"cold"),null==t.cold_cnt&&(t.cold_cnt=0),t.cold_cnt++,1==t.cold_cnt&&(t.speed_k*=.4),r((function(){t.cold_cnt--,0==t.cold_cnt&&(o(t.d,"cold"),t.speed_k/=.4)}),W)}}},_t=[{range:2,power:10,des:"Basic tower.",cost:10,rotate:!0},{range:1.5,power:10,des:"AOE tower.",emit:function(t){var e=R.createElement("div");i(e,"loop"),t.d.appendChild(e),r((function(){K.emy.forEach((function(e){c(e.pos,t.pos)<_t[t.kind].range&&e.suffer(t.kind)}))}),.225*W),setTimeout((function(){t&&t.d.removeChild(e)}),900)},cost:15,rotate:!1,st:1},{range:2.5,power:5,des:"Cold tower.",blast:function(t){t.add_state(dt.cold)},cost:20,bias:[0,-15],rotate:!1,st:3},{range:1.5,power:30,des:"Powerful tower.",cost:25,bias:[0,0],rotate:!1,st:5}];body.onkeypress=function(){};var mt=10,yt=15,vt=[];F.forEach((function(t,e){var n=V("#"+t+"_to_copy");F.forEach.call(n,(function(e){et[t].push([e.offsetWidth,e.offsetHeight])}))})),$.log("std_size",et),e("Pause"),Array.prototype.last=function(){return this[this.length-1]},Array.prototype.remove=function(t){for(var e=0;e<this.length;e++)this[e]==t&&this.splice(e,1)},Array.prototype.r_forEach=function(t){for(var e=0;e<this.length;e++)if(t(this[e]))return};for(var gt=[],wt=0;mt*yt>wt;wt++){var bt=parseInt(wt/yt),kt=wt%yt;vt[kt]||(vt[kt]=[]);var qt=R.createElement("div");vt[kt][bt]=qt,qt.className="grid",qt.dataset.x=kt,qt.dataset.y=bt,mn.appendChild(qt)}U(".grid"),miao_obj=function(){},miao_obj.prototype.init=function(t,e,n){var i=U("#"+this.name+"_to_copy[kind='"+t+"']").cloneNode(!0);this.kind=t,this.d=i,this.d.id="",ht[this.name]&&(this.speed=ht[this.name][t]),o(this.d,"hide"),this.style=i.style,this.set_pos(e),this.register()},miao_obj.prototype.set_pos=function(t){this.pos=a(t);var e=u(t);e[0]-=et[this.name][this.kind][0]/2,e[1]-=et[this.name][this.kind][1]/2,this.bias&&s(e,this.bias),this.style.transform="translate("+e[0]+"px,"+e[1]+"px)"},miao_obj.prototype.register=function(){K[this.name].push(this),mn.insertBefore(this.d,mn.firstChild)},miao_obj.prototype.unregister=function(){K[this.name].remove(this),mn.removeChild(this.d)},miao_obj.prototype.r_unregister=function(){K[this.name].remove(this)},miao_obj.prototype.r_remove=function(){mn.removeChild(this.d)},Bul=function(t,e,n,i,o){t>1&&(t=1),this.tower=o,o.target=n,this.name="bul",this.bias=i,this.target=n,this.init.apply(this,arguments),this.target.add_bul(this),this.step()},Bul.prototype=new miao_obj,Bul.prototype.blast=function(){this.target.suffer(this.tower.kind,this.tower),this.unregister()},Bul.prototype.cal_pos=function(t,e,n){var i=c(t,e);if(e[0],t[0],e[1],t[1],n>=i)return!1;var o=i;return t[0]+=(e[0]-t[0])/o*n,t[1]+=(e[1]-t[1])/o*n,t},Bul.prototype.step=function(){var t=this.cal_pos(this.pos,this.target.pos,this.speed*it/W);t?this.set_pos(t):this.blast()},Tower=function(t,e){this.name="tower",this.init.apply(this,arguments),this.model=_t[this.kind],p(this,{level:0,base_trans:"translate(-50%, -50%)",prepare:0,prepare_max:ht.tower[t]});var n=this;this.d.querySelector(".fill").onmouseout=function(){var t=n.d.childNodes;for(var e in t)t[e].className&&o(t[e],"active")},this.d.dataset.x=e[0],this.d.dataset.y=e[1],this.d.dataset.kind=t,this.d.querySelector(".fill").onmouseover=function(){var t=n.d.childNodes;for(var e in t)t[e].className&&i(t[e],"active")}},Tower.prototype=new miao_obj,Tower.prototype.set_pos=function(t){this.pos=a(t);var e=u(t);p(this.style,{left:e[0],top:e[1]})},Tower.prototype.f_rotate=function(t,e){var n=X.atan2(t,e);this.style.transform=this.base_trans+" rotate("+(180*n/X.PI+90)+"deg)"},Tower.prototype.step=function(){this.ready||(this.prepare+=it,this.prepare>this.prepare_max&&(this.ready=!0));var t=this;K.emy.r_forEach((function(e){if(c(e.pos,t.pos)<_t[t.kind].range)return t.model.rotate&&t.f_rotate(t.pos[1]-e.pos[1],t.pos[0]-e.pos[0]),t.ready&&(_t[t.kind].emit?_t[t.kind].emit(t):new Bul(t.kind,t.pos,e,t.model.bias?t.model.bias:null,t),t.ready=!1,t.prepare=0),!0}))};var Tt,St,xt=function(t,e){this.name="emy",this.init.apply(this,arguments),p(this,{is_continue:!0,path_len:0,initted:!1,hp:lt[t].hp,str:lt[t].str,click_callback:lt[t].cb,hp_max:lt[t].hp,bf:this.d.querySelector(".fill"),dead:!1,buls:[]}),this.states=[],this.speed_k=1;var n=this;setTimeout((function(){o(n.d,"trans")}),10),this.step()};(xt.prototype=new miao_obj).add_bul=function(t){this.buls.push(t)},xt.prototype.add_state=function(t){t.add(this)},xt.prototype.destroy=function(){if(!this.dead){this.dead=!0;var t=this;this.buls.forEach((function(t){i(t.d,"trans")})),i(this.d,"trans"),this.r_unregister(),setTimeout((function(){t.r_unregister(),D.step()}),500)}},xt.prototype.suffer=function(t){P(ot[t]),this.hp-=_t[t].power,_t[t].blast&&_t[t].blast(this),this.bf.style.right=100*(1-this.hp/this.hp_max)+"%",this.hp<=0&&this.destroy()},xt.prototype.step=function(){if(!this.initted)return this.initted=!0,void this.set_pos(pt[0].start);if(this.is_continue){this.path_len+=this.speed*it*this.speed_k;var t=Math.floor(this.path_len);t>=D.dirs.length&&(D.suffer(this),this.destroy(),this.is_continue=!1);var e=a(tt[t]);l((function(t,n){s(e,[t,n])}),this.path_len-t,D.dirs[t]),this.pos=e,this.set_pos(e)}},emy_create=function(t,e){return new xt(t,e)},body.oncontextmenu=function(){return y()?(v(),!1):void 0},my_panel.onmousemove=function(t){St=t,y()&&(t?(Tt.style.left=t.x,Tt.style.top=t.y):(console.log(my_panel),Tt.style.left=my_panel.x,Tt.style.top=my_panel.y))},my_panel.onmouseover=function(){Q||(Q=!0,i(mn,"active"),i(body,"active"),o(body,"inactive"))},my_panel.onmouseout=function(t){t&&f(mn,t.toElement)||(Q=!1,o(mn,"active"),o(body,"active"),i(body,"inactive"))},mn.oncontextmenu=function(t){if(y())return v(),!1;var e=f((function(t){return!!n(t,"tower")&&t}),t.target);return e?("Start"!=J||(function(t){D&&towers_map&&(towers_map[parseInt(t.dataset.kind)]--,D.set_tower_panel(),K.tower.r_forEach((function(e,n){return e.d==t?(K.tower.remove(e),!0):void 0})),mn.removeChild(t))}(e),t.stopPropagation()),!1):void 0},mn.onclick=function(t){Tt&&"wall"==t.target.lang&&(D.left_tower_points>=_t[Tt.kind].cost+5*towers_map[Tt.kind]?(D.left_tower_points-=_t[Tt.kind].cost,D.tower_points_update(),d(Tt.kind,parseInt(t.target.dataset.x),parseInt(t.target.dataset.y),!0)):(i(tower_points_label,"zoom"),setTimeout((function(){o(tower_points_label,"zoom")}),100)))};var Et=function(t){this.side="ta",this.level_state="normal",this.new_unitted=!1,"td"==j?(this.emy_seq=JSON.parse("[[0,0],[14,0],[33,0],[90,0]]"),i(title,"td"),setTimeout((function(){title.innerHTML="LV"+(t+1)+"&nbsp;-&nbsp;TD"}),300),this.half_level_finish("ta")):(this.emy_seq=[],title.innerHTML="LV"+(t+1)+"&nbsp;-&nbsp;TA"),this.tipped=!1,this.load_map(t),this.reversing=!1,Y=pt[t].map,this.level=t,this.hp=pt[t].hp,this.hp_max=this.hp,this.map_start=pt[t].start,this.map_end=pt[t].end,this.dirs=function(t,e,n){var i=[],o=0;return function e(n,r,s){var a=function(e,n){function i(e,i){return n&&e==n[0]&&i==n[1]?void 0:(h(t,e,i)||(o=!0),[!1,e,i])}var o=!1;return l((function(t,n,r){if(!function(t){var e=[0,0,0,0];return t[0]<=0&&(e[3]=1),t[0]>=yt&&(e[1]=1),t[1]<=0&&(e[0]=1),t[1]>=mt&&(e[2]=1),e}(e)[r]){var s=i(e[0]+t,e[1]+n);if(o)return s[0]=r,s}}),1)}(n,s);i.push(a[0]),s=n,n=[a[1],a[2]],100!=++o&&(n[0]!=r[0]||n[1]!=r[1])&&e(n,r,s)}(e,n),i}(Y,this.map_start,this.map_end),(tt=[]).push(a(this.map_start)),this.dirs.forEach((function(t){tt.push(a(tt.last())),l((function(t,e){s(tt.last(),[t,e])}),1,t)})),"ta"==j?this.ta_enter():this.td_enter()};Et.prototype.set_hp=function(t){this.hp=t,null==this.hp&&(this.hp=this.hp_max),this.hp<=0&&(this.hp=0,this.half_level_finish(this.side)),U(".endp>.fill").style.opacity=.2+.8*(this.hp_max-this.hp)/this.hp_max,progress.innerHTML=this.hp+"/"+this.hp_max},Et.prototype.suffer=function(t){P(rt),this.set_hp(this.hp-t.str)},Et.prototype.enter_init=function(){};var Mt=[];Eq=function(t,e){this.kind=t,this.cb=e,this.emy=m(U("#emy_to_copy[kind='"+t+"']")),this.grid=emy_queue_grid_to_copy.cloneNode(!0),this.grid.id="",this.wrap=this.grid.querySelector(".wrap"),this.wrap.appendChild(this.emy),left_panel.querySelector(".emy_queue").appendChild(this.grid),this.height=150*lt[t].cd,this.height_max=this.height,this.wrap.style.height=this.height,this.set_height(this.height),Mt.push(this)},Eq.prototype.set_height=function(t){this.height=t,this.grid.style.height=t,this.wrap.style.top=-(this.height_max-t)},Eq.prototype.unregister=function(){"ta"==D.side&&this.cb(),Mt.remove(this)},Eq.prototype.step=function(){this.height-=150/W,this.set_height(this.height),this.height<=0&&this.unregister()},Et.prototype.ta_enter=function(){var t=this;e("Pause"),emys_left.innerHTML="",this.remove_things(),left_panel.innerHTML="",setTimeout((function(){function e(e,n){if(e.st===t.level){if($.log(e.st,t.level),this.new_unitted)return;this.new_unitted=!0,A("new_panel"),P(at),U("#new_panel").querySelector("#panel").innerHTML="",e.range?(U("#new_panel").querySelector("h1").innerHTML="New Tower",U("#new_panel").querySelector("#panel").appendChild(b(e,n,!0))):(U("#new_panel").querySelector("h1").innerHTML="New Warrior",U("#new_panel").querySelector("#panel").appendChild(w(e,n)))}}emys_left.innerHTML="",B||(lt.forEach(e),_t.forEach(e))}),50),this.hp=this.hp_max,this.set_hp(pt[I].hp),this.queue=emy_queue_to_copy.cloneNode(!0),left_panel.appendChild(this.queue),lt.forEach((function(e,n){if(!(e.st&&I<e.st)){var i=w(e,n);i.onclick=function(){new Eq(n,(function(){_(n,t.map_start);var e=G;0==t.emy_seq.length&&(t.pre_time=e),t.emy_seq.push([e-t.pre_time,n]),t.pre_time=e}))},left_panel.appendChild(i)}})),pt[this.level].preset.forEach((function(t){i((t=d(t[2],t[0],t[1],!1)).d,"preset")}))},Et.prototype.td_enter=function(){towers_map=[0,0,0,0,0,0],this.level_state="normal",Z=!1,e("Start"),this.remove_things(),this.emy_seq_len=this.emy_seq.length,emys_left.innerHTML=this.emy_seq.length+"/"+this.emy_seq_len,this.hp=this.hp_max,this.set_hp(),this.set_tower_panel()},Et.prototype.set_tower_panel=function(){this.side_init(),_t.forEach((function(t,e){if(!(t.st&&I<t.st)){var n=b(t,e);left_panel.appendChild(n),n.onclick=function(){!function(t){Tt&&Tt.parentNode.removeChild(Tt),(Tt=m(U("#tower_to_copy[kind='"+t+"']"))).style["pointer-events"]="none",Tt.kind=t,i(Tt,"catching"),i(body,"catching"),body.appendChild(Tt),i(U("body"),"inactive"),Q=!0,my_panel.onmouseout(),my_panel.onmouseover(),my_panel.onmousemove(St)}(e,X.map_start)}}}))},Et.prototype.tower_points_update=function(){tower_points_value.innerHTML=this.left_tower_points},Et.prototype.side_init=function(){if("ta"==this.side);else{left_panel.innerHTML="",tower_points=tower_points_to_copy.cloneNode(!0),tower_points.id="tower_points",tower_points_value=tower_points.querySelector("#tower_points_value"),tower_points_label=tower_points.querySelector("#tower_points_label"),left_panel.appendChild(tower_points),this.left_tower_points=pt[this.level].power;for(var t=0;t<_t.length;t++)for(var e=0;e<towers_map[t];e++)this.left_tower_points-=_t[t].cost+5*e;tower_points_value.innerHTML=this.left_tower_points}},Et.prototype.remove_things=function(){F.forEach((function(t){for(var e=K[t].length-1;e>=0;e--){var n=K[t][e];n.destroy?n.destroy():n.unregister()}})),gt.length=0,Mt.length=0},Et.prototype.start=function(){var t,e=D.emy_seq,n=0,i=this;e.length&&(t=e[0][1],function o(){emys_left.innerHTML=D.emy_seq_len-n-1+"/"+D.emy_seq_len,_(t,D.map_start),++n<e.length?(t=e[n][1],i.outputing=r(o,e[n][0])):Z=!0}())},Et.prototype.td_enter_finish=function(){console.log(this.level,this.tipped),0!=this.level||this.tipped||(this.tipped=!0,console.log("tip"),A("game_tip0"),btn_tip0_continue.onclick=function(){N("game_tip0")})},Et.prototype.ta_enter_finish=function(){},Et.prototype.half_level_finish=function(e){P(st),towers_map=[0,0,0,0,0,0];var n=this;if(!this.reversing){var r=U(".endp>.fill");r.style.transition="transform "+t("3.5","0.1")+"s ease-in","ta"==e?(this.reversing=!0,i(r,"rotate"),setTimeout((function(){n.reversing=!1,"td"==n.side?n.td_enter_finish():n.ta_enter_finish()}),t(4e3,0)),setTimeout((function(){k(startp_to_copy),k(endp_to_copy),my_panel.style.transform+=" rotateY(180deg)",k(my_panel.querySelector(".ftr")),r.style.transition="transform "+t("3.5","0.1")+"s ease-out",o(r,"rotate")}),t(3e3,0)),setTimeout((function(){k(left_panel),n.side="td",n.td_enter(),i(title,"td"),setTimeout((function(){title.innerHTML="LV"+(n.level+1)+"&nbsp;-&nbsp;TD"}),250)}),t(3300,0))):(A("level_failed"),this.level_state="failed")}},Et.prototype.load_map=function(t){for(var e=0;mt>e;e++)for(var n=(parseInt(pt[t].map[e],2),0);yt>n;n++)vt[n][e].lang=h(pt[t].map,n,e)?"wall":"road";this.start_grid=vt[pt[t].start[0]][pt[t].start[1]],this.start_grid.lang="start",this.start_grid.appendChild(U("#startp_to_copy")),this.end_grid=vt[pt[t].end[0]][pt[t].end[1]],this.end_grid.lang="end",this.end_grid.appendChild(endp_to_copy)},Et.prototype.destroy=function(t){if(gt.remove(this.outputing),"td"==this.side){var e=this;k(startp_to_copy),k(endp_to_copy),my_panel.style.transform+=" rotateY(180deg)",k(left_panel),k(my_panel.querySelector(".ftr"))}e=this,t?(z=!0,setTimeout((function(){e.remove_things(),z=!1}),300)):this.remove_things()},Et.prototype.step=function(){if(0==K.emy.length&&Z&&"td"==this.side&&"normal"==this.level_state){this.level_state="success",console.log("finish");var t=0;this.emy_seq.forEach((function(e){t+=e[0]})),t/=W,t*=1e3,console.log(this.emy_seq),function(){for(var t=0;3>t;t++)U("#scores>div:nth-child("+(t+1)+")>label:nth-child(2)").innerHTML=arguments[t]}(this.emy_seq.length,pt[this.level].power-this.left_tower_points,parseInt(t)+"ms"),A("level_finish")}},q(I),start.onclick=function(){switch(J){case"Pause":e("Play");break;case"Start":D.start(),e("Pause");break;case"Play":e("Pause")}},speedfor1.onclick=function(){S(speedfor1,1)},speedfor2.onclick=function(){S(speedfor2,2)},speedfor4.onclick=function(){S(speedfor4,4)},btn_restart.onclick=function(){"ta"==D.side?C(U("#level_setting #btn_restart_defence1")):M(U("#level_setting #btn_restart_defence1")),A("level_setting")},btn_restart_attack.onclick=L,btn_restart_whole_level.onclick=L,btn_restart_defence1.onclick=H,btn_restart_defence2.onclick=H,btn_continue.onclick=function(){N("level_setting")},btn_next_level.onclick=function(){N("level_finish"),setTimeout((function(){I==pt.length-1?A("game_over"):q(++I,!0)}),550)},btn_new_start.onclick=function(){N("new_panel")},btn_start_game.onclick=function(){N("game_cover")},B||0!=I||A("game_cover"),console.log(jsfxr),requestAnimationFrame((function t(){if("Pause"==J&&!O&&!z){for(var e in K.emy.sort((function(t,e){return t.path_len>e.path_len?-1:t.path_len==e.path_len?0:1})),gt.forEach((function(t,e){G>=t[1]&&(t[0](),gt.splice(e,1))})),K)K[e].forEach(T);(function(){for(var t=0;it>t;t++)Mt[0]&&Mt[0].step()})(),G+=it}requestAnimationFrame(t)}))}</script><style>#head>#title,body{font-family:Arial,Verdana,Sans-serif}#head>#title,#my_panel,#right_panel .ftr{transition:transform 1s}.ftr .speed,.grid,.start{display:inline-block}#head,#right_panel .ftr,#scores,.endp,.grid,.m-panel,.startp,.top-btn{text-align:center}.zoom{transform:scale(1.3)}#stage,.blood{transform:translate(-50%,-50%)}#stage{width:1000px;height:600px;background-color:#222;top:50%;left:50%;position:absolute;border:10px solid #222;perspective:2000px}#left_panel,#right_panel{height:90%;background-color:#333}#left_panel,#right_panel,#stage>div{position:relative}#left_panel{width:246px;float:left;box-sizing:border-box}#right_panel{margin-left:246px;box-sizing:content-box;perspective:2000px;border-left:4px #bbb solid}#head,#mn,.grid,.start button{box-sizing:border-box}#right_panel .ftr{height:40px;width:100%;background:#111;position:absolute;bottom:0}.ftr .speed{width:30%;position:absolute;left:0;height:100%;float:left}.ftr .speed button{width:33%;margin:0}.ftr button{height:39px;position:relative;bottom:-1px}.start{width:20%;position:absolute;left:30%;height:100%}.start button{width:100%;margin:0}.top-btn{background:#595b5b;box-shadow:0 0 0 1px #303233;border:none;border-top:1px solid #666767;color:#fff;text-shadow:0 -1px 0 #000;padding:3px 20px 4px 8px;-webkit-appearance:none;padding-left:0;padding-right:0;font-size:22px;position:relative;bottom:-1px;outline:0}.top-btn.inactive:hover{background-color:#454545}*{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.src{float:right;width:37%;color:#ddd;line-height:40px}.src a{color:#4682b4}#head{height:10%;background:#333;border-bottom:4px #bbb solid;perspective:500px}#head>#title{color:#f0f1f1;font-size:35px;top:50%;left:50%;position:absolute;transform:translate(-50%,-50%) rotateX(0)}.emy-panel,.grid{position:relative}#head>#title.td{transform:translate(-50%,-50%) rotateX(360deg)}#mn{background-color:#333}.grid{height:50px;width:50px;-webkit-transition:.1s linear;-o-transition:.1s linear;transition:.1s linear}.grid[lang=wall]{background-color:#444}.phone .tower.catching{display:none;visibility:hidden;opacity:0}body.inactive .catching{display:none}body.catching #mn.active .grid[lang=wall]{border:1px solid #555}body.catching #mn.active .grid[lang=wall]:hover{cursor:pointer;border:3px solid #4682b4}.grid[lang=end],.grid[lang=road],.grid[lang=start]{background-color:#222}.emy-panel{margin:0;margin-right:50px;background-color:rgba(255,255,255,.15);padding-top:10px;border-bottom:1px #222 solid}.emy-panel.tower-panel{margin-right:0}.emy-panel *{cursor:pointer}#new_panel .emy-panel,#new_panel .emy-panel *{cursor:auto!important}.emy-panel .emy,.emy-panel .tower{top:50%;left:15%}.emy-panel .emy{animation:none!important}.emy-panel .abt{position:absolute;left:30%;top:50%;transform:translate(0,-50%)}.emy-panel .abt .bar{margin:25px;line-height:0;position:relative;margin-left:0;color:#fff;font-size:14px}.emy-panel.tower-panel .abt .bar{margin:20px;line-height:0;position:relative;margin-left:0;color:#fff}.emy-panel .abt .bar span{color:#fff;background-color:#4682b4;width:30px;height:10px;display:inline-block;line-height:100%;vertical-align:middle;position:absolute;left:55px;top:50%;transform:translate(0,-50%)}.emy-panel p{text-indent:2em;margin-top:10px;color:#fff}.emy-panel .top{height:70px;position:relative}.emy-panel.tower-panel .top{height:70px}.emy-panel.tower-panel:nth-child(2){margin-top:8px}.emy-panel .bottom{overflow:auto;position:relative}.hide{visibility:hidden}.displaynone{display:none!important}#scores,.endp>.fill{display:inline-block}.bul{z-index:1}.bul[kind="0"]{background-color:#6cf;position:absolute;transform:translate(-50%,-50%);border:4px solid transparent;border-radius:50%;height:0;width:0;left:0;top:0;transition:opacity .3s}.bul[kind='1'],.bul[kind='1']:after{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;position:absolute}.bul[kind='1']{border-bottom:10px solid #4682b4}.bul[kind='1']:after{border-top:10px solid #4682b4;content:"";top:3px;left:-5px}.bul[kind='2']{width:10px;height:2px;background-color:#4682b4;position:absolute}.blood{width:25px;height:5px;border:1px solid green;position:absolute;top:-10px;left:50%;overflow:hidden;box-shadow:none!important}.blood>.fill,.endp{width:100%;position:absolute;right:0}.blood>.fill{height:100%;background-color:red;box-sizing:content-box;top:1px;box-shadow:none!important}.endp{-webkit-perspective:250;perspective:200;left:0;top:0}.endp>.fill{position:relative;top:-15px;height:0;width:0;border-width:40px 11px;border-style:solid;border-color:transparent;border-top-color:#4682b4;border-bottom-width:0;animation:rotate 2s linear infinite;margin:0;opacity:.2;transition:transform 3s ease-in;left:2px}.endp>.fill.rotate{transform:rotateY(1440deg)}.startp{width:100%;box-sizing:border-box;position:relative;height:100%}.startp>.fill{position:absolute;left:0;right:0;top:0;bottom:0;border:25px solid #4682b4;opacity:.5;transition:all .5s}.startp.out>.fill{border-width:13px;opacity:.8}@keyframes rotate{0%,100%{top:-10px}50%{top:-20px}}#progress{color:#fff;position:relative;bottom:13px}#emys_left{position:absolute;left:50%;top:0;transform:translate(-50%,0);font-size:13px;color:#fff;font-weight:700}#level_finish{height:280px;width:500px}#level_finish>h1{margin-bottom:0}.m-panel{border:10px solid #222;background-color:#4a4d4e;z-index:1000;position:fixed;top:50%;left:50%;transform:translate(-50%,-100%);color:#fff;border-radius:20px}.m-panel.center{transform:translate(-50%,-50%)}#next_level{position:absolute;bottom:30px;left:50%;transform:translate(-50%,0);width:150px;border-radius:10px;padding:8px;padding-bottom:12px}.top-btn.inactive,.top-btn:active{background-color:#3f4041}#scores{margin-top:5px;width:300px}#scores>div{margin:15px;font-size:20px;overflow:auto;display:block}#scores>div>label:first-child{float:left}#scores>div>label:last-child{float:right}#level_setting{height:150px;width:600px}.m-panel .top-btn{margin:15px;border-radius:10px;padding:8px 15px}#game_over{width:400px}.m-panel li.chinese{font-size:12px;list-style:none;margin-top:0;margin-bottom:10px}#game_cover,#level_failed{width:500px}#game_cover ul{display:inline-block;text-align:left;font-size:20px;margin:5px}.trans{opacity:0}#tower_points{text-align:center;margin-top:10px;color:#fff}div#tower_points label{transition:.1s all}div#tower_points label.zoom{transform:scale(1.3)}#body_mask{position:fixed;width:100%;height:100%;background-color:rgba(255,255,255,.43);top:0;z-index:999}.emy,.emy[kind='2'] .head{transform:translate(-50%,-50%);z-index:1;position:absolute}.emy{left:0;top:0;text-align:center;transition:opacity .5s;opacity:1}.emy.trans{opacity:0}.emy[kind='0']{height:10px;width:10px}.emy[kind='0'] .body{height:10px;width:10px;background-color:#faebd7}.emy[kind='1']{height:16px;width:16px}.emy[kind='1'] .body{height:16px;width:16px;border-radius:5px;background-color:#faebd7}.emy[kind='1'] .eye{height:4px;width:4px;right:6px;top:5px;background-color:#000;position:absolute;animation:blink 4s infinite;box-shadow:none!important}.emy[kind='2']{height:30px;width:30px;animation:float 3s infinite}.emy[kind='2'] .head{height:18px;width:18px;border-radius:5px;background-color:#faebd7;top:10px;left:50%}.emy[kind='2'] .leg{height:20px;width:5px;border-radius:5px;background-color:#faebd7;position:absolute;bottom:0;left:50%;transform:translate(-50%,0)}.emy[kind='3']{height:30px;width:30px}.emy[kind='3'] .outline{height:30px;width:30px;border-radius:10px;border:5px solid #faebd7;box-sizing:border-box;position:absolute;transform:translate(-50%,-5%)}.emy[kind='3'] .core{height:10px;width:10px;left:50%;top:50%;border:6px solid #faebd7;border-radius:50%;box-sizing:border-box;position:absolute;transform:translate(-50%,-50%);box-shadow:none!important}@keyframes blink{0%,100%,40%,60%,80%{transform:scaleY(1)}50%,70%{transform:scaleY(0)}}@keyframes float{0%,100%{top:0}50%{top:-10px}}@keyframes r_rotate{0%{transform:translate(-50%,-50%) rotate(0)}50%{transform:translate(-50%,-50%) rotate(180deg)}100%{transform:translate(-50%,-50%) rotate(360deg)}}.tower,.tower.preset,.tower>.range{transform:translate(-50%,-50%);position:absolute}.tower,.tower.preset{height:50px;width:50px;overflow:visible;z-index:10;box-sizing:border-box}.tower>.range{left:50%;top:50%;border:2px solid #4682b4;border-radius:50%;box-sizing:border-box;transition:.3s ease-out;width:0;height:0;background-color:rgba(51,122,182,.1);opacity:0}.tower>.range.active{opacity:1}.tower[kind='0']>.range.active{width:200px;height:200px}.tower[kind='1']>.range.active{width:150px;height:150px}.tower[kind='2']>.range.active{width:300px;height:300px}.tower[kind='3']>.range.active{width:150px;height:150px}.tower[kind="0"] .shape{height:50px;width:50px;border:13px solid rgba(51,122,182,.6);border-bottom-color:transparent;border-radius:50%;box-sizing:border-box;display:inline-block}.tower[kind="0"] .shape .core{background-color:#6cf;top:50%;position:absolute;left:50%;transform:translate(-50%,-50%);display:inline-block;border:6px solid rgba(102,204,255,0);border-radius:50%}.tower[kind="0"]>.fill{height:100%;width:100%;position:absolute;top:0}.tower[kind="1"] .outline1{height:30px;width:30px;border:5px solid rgba(51,122,182,.8);top:50%;left:50%;transform:translate(-50%,-50%) rotate(45deg) skew(10deg,10deg);box-sizing:border-box;display:inline-block;position:absolute}.tower[kind="1"] .core{background-color:#6cf;top:50%;position:absolute;left:50%;transform:translate(-50%,-50%);display:inline-block;border:4px solid rgba(102,204,255,0);border-radius:50%}.tower[kind="2"] .head{height:0;width:0;border:5px solid #6cf;top:20%;left:50%;transform:translate(-50%,-50%);box-sizing:border-box;display:inline-block;position:absolute;border-radius:50%}.tower[kind="2"] .body{height:0;width:0;top:40%;position:absolute;left:50%;transform:translate(-50%,-50%);display:inline-block;border:5px solid #4682b4;border-bottom-width:35px;border-left-color:transparent;border-right-color:transparent;border-top-color:transparent}.tower[kind="2"] .base{top:80%;position:absolute;left:50%;height:10px;width:20px;transform:translate(-50%,-50%);display:inline-block;border:3px solid #4682b4;opacity:.6;border-radius:50%}.tower[kind="3"] .outline{height:40px;width:40px;top:50%;position:absolute;left:50%;transform:translate(-50%,-50%);display:inline-block;border:3px solid #4682b4;opacity:.8}.tower[kind="3"] .core{height:0;width:0;border-radius:50%;top:50%;position:absolute;left:50%;transform:translate(-50%,-50%);display:inline-block;border:5px solid #6cf}.tower[kind="3"] .shield{height:23px;width:23px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);border-radius:50%;border:4px solid transparent;border-right-color:#4682b4;animation:r_rotate 2s infinite linear;opacity:1}.emy_queue,.tower>.fill{top:0;position:absolute}.tower>.fill{height:100%;width:100%}label.prop-value{line-height:13px;font-size:13px;left:100%;position:absolute;margin-left:2px}.emy-panel span.cd{height:3px;position:absolute;background-color:#4682b4;bottom:0}.emy_queue{width:100px;background-color:rgba(51,122,182,.1);bottom:0;right:0;transform:scale(.5,.5) translate(50%,-50%);height:200%;overflow:auto;overflow-x:hidden}.emy_queue .emy{position:absolute;transform:translate(-50%,-50%);left:50%;top:60%;animation:none!important}.emy_queue_grid{height:50px;width:100px;position:relative;background-color:rgba(250,235,215,.2);margin-bottom:2px}.emy_queue_grid .wrap{position:absolute;top:0;bottom:0;left:0;right:0;height:50px}.cold *{box-shadow:0 0 0 3px #4682b4}.tower[kind='1'] .loop{left:50%;top:50%;position:absolute;border:3px solid #4682b4;border-radius:50%;transform:translate(-50%,-50%);animation:scale 1s}@keyframes scale{0%{height:10px;width:10px;opacity:1}100%{height:150px;width:150px;opacity:0}}#new_panel{height:270px;width:500px}#new_panel .emy-panel{margin-right:0;width:400px;display:inline-block;margin-top:10px;background:0 0;border-bottom:none;text-align:left;position:relative;left:80px}#new_panel .emy-panel .emy,#new_panel .emy-panel .tower{margin:0}</style><body style=background-color:#4a4d4e;height:100%;margin:0><div id=stage><div id=head><label id=title>LV1 - TA</label></div><div id=my_panel><div id=left_panel></div><div id=right_panel><div id=mn></div><div class=ftr><span class=speed><button class=top-btn id=speedfor1>×1</button><button class="top-btn inactive" id=speedfor2>×2</button><button class="top-btn inactive" id=speedfor4>×4</button></span><div class=start><button class=top-btn id=start>Start</button></div><div class=start style=left:initial;right:37%;width:13%><button class=top-btn id=btn_restart>Restart</button></div><div class=src>TATD for <a href=//js13kgames.com/2015/ target=_blank>js13kgames</a> by <a href=https://github.com/blackmiaool target=_Blank>blackmiaool</a></div></div></div></div></div><div class="hide emy trans" id=emy_to_copy kind=0><div class=blood><div class=fill></div></div><div class=body></div></div><div class="hide emy trans" id=emy_to_copy kind=1><div class=blood><div class=fill></div></div><div class=body></div><div class=eye></div></div><div class="hide emy trans" id=emy_to_copy kind=2><div class=blood><div class=fill></div></div><div class=head></div><div class=leg></div></div><div class="hide emy trans" id=emy_to_copy kind=3><div class=blood><div class=fill></div></div><span class=outline><span class=core></span></span></div><div class="hide tower" id=tower_to_copy kind=0><div class=range></div><div class=shape><div class=core></div></div><div class=fill></div></div><div class="hide tower" id=tower_to_copy kind=1><div class=range></div><div class=core></div><div class=outline1></div><div class=fill></div></div><div class="hide tower" id=tower_to_copy kind=2><div class=range></div><div class=base></div><div class=body></div><div class=head></div><div class=fill></div></div><div class="hide tower" id=tower_to_copy kind=3><div class=range></div><div class=outline></div><div class=core></div><div class=shield></div><div class=fill></div></div><div class="hide emy-panel tower-panel" id=tower_panel_to_copy><div class=top><div class=abt><div class=bar><label>Str</label><span></span></div><div class=bar><label>Range</label><span></span></div><div class=bar><label>Speed</label><span></span></div><div class="bar cost"><label>Cost</label><span></span></div></div></div><div class=bottom><p>Basic warrior.</div></div><div class="hide emy-panel" id=emy_panel_to_copy><div class=top><div class=abt><div class=bar><label>HP</label><span></span></div><div class=bar><label>Move</label><span></span></div><div class=bar><label>Str</label><span></span></div></div></div><div class=bottom><p></div></div><div class="hide bul" id=bul_to_copy kind=0></div><div class="hide bul" id=bul_to_copy kind=1></div><div class="hide bul" id=bul_to_copy kind=2></div><div class=endp id=endp_to_copy><div class=fill></div><br><label id=progress>0/10</label></div><div class=startp id=startp_to_copy><div class=fill></div><label id=emys_left>10/10</label></div><div id=hide_div style=display:none><div id=tower_points_to_copy><label id=tower_points_label>Tower Points : <font id=tower_points_value></font></label></div><div class=emy_queue id=emy_queue_to_copy></div><div class=emy_queue_grid id=emy_queue_grid_to_copy><div class=wrap></div></div></div><div class="trans displaynone" id=body_mask></div><style></style><div class="trans displaynone m-panel" id=level_finish><h1>You Win!</h1><div id=scores><div><label>Warrior Cost :</label><label></label></div><div><label>Tower Points Cost :</label><label></label></div><div><label>Attack Time :</label><label></label></div></div><br><button class=top-btn id=btn_next_level>Next Level</button></div><div class="trans displaynone m-panel" id=level_setting><h1 style=margin-bottom:10px>Restart</h1><div><button class=top-btn id=btn_restart_attack>Restart Attack</button> <button class=top-btn id=btn_continue>Continue</button> <button class=top-btn id=btn_restart_defence1>Restart Defence</button></div></div><div class="trans displaynone m-panel" id=level_failed><h1 style=margin-bottom:10px>What a Pity</h1><div><button class=top-btn id=btn_restart_whole_level>Restart Whole Level</button> <button class=top-btn id=btn_restart_defence2>Restart Defence</button></div></div><div class="trans displaynone m-panel" id=game_cover><h1 style=margin-bottom:0>TATD</h1><h3 style=margin:0>Tower Attack and Tower Defence</h3><p style=margin:5px;margin-top:0;font-size:12px>以彼之道，还施彼身   <br>                                       ---- 慕容复<ul><li>Click warriors in left panel to summon them.<li class=chinese>点击左边面板里的士兵来召唤他们。<li>Warriors you summon will attack you at last.<li class=chinese>你召唤出的士兵终将攻击你。</ul><div><button class=top-btn id=btn_start_game>Start</button></div></div><div class="trans displaynone m-panel" id=game_tip0 style=width:450px><h1 style=margin-bottom:10px>Tip</h1><p style=margin:5px;margin-top:0;font-size:12px;line-height:18px>现在流的泪,都是当初召唤小兵时脑子进的水。   <br>                                       ---- 作者<ul style=text-align:left><li>It's your turn, now.<li class=chinese>现在，轮到你了。<li>Warriors you summoned will attack you.<li class=chinese>你召唤出的士兵现在会攻击你。<li>The cost of a tower increases with the count of towers with the same kind.<li class=chinese>同一种塔的消耗随数量增加。<li>Before defence start, you can remove a tower by right click.<li class=chinese>防守开始前，你可以右键删除塔。<li>I guess you know what you should do now.<li class=chinese>你知道你现在该做什么了吧？</ul><div><button class=top-btn id=btn_tip0_continue>Continue</button></div></div><div class="trans displaynone m-panel" id=new_panel><h1 style=margin-bottom:0>New Warrior</h1><div id=panel></div><div><button class=top-btn id=btn_new_start>Start</button></div></div><div class="trans displaynone m-panel" id=game_over><h1>Congratulations!</h1><p>The game is over !</p><br></div>