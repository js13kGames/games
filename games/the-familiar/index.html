<!doctype html><meta name=viewport content="width=device-width"><title>The Familiar - js13kGames 2025</title><style>body,html{height:100%;margin:0;display:flex;align-items:center;justify-content:center;background:#9df6b9;--col-1-:#88bfff;font-family:'Jazz LET, fantasy'}.body canvas{width:100%;max-width:600px;position:relative}.layout .body{position:relative;width:100%}.menuDialog{width:100%!important;max-width:600px;max-width:600px;text-align:center;position:absolute;top:0;left:0;z-index:99;background:#97dfff85;padding:20px}.menuDialog table,.menuDialog td{width:100%}.menuDialog button{width:100%;background:linear-gradient(#ffbebe,#7bf9b2);border:none;font-weight:700;font-size:24pt;margin:0 0 5px 0}*{box-sizing:border-box;border-collapse:collapse;user-select:none}</style><body><script>let k=32,da=10;var q={Fb:[{g:[0,0,140,0,0,0,140,0,0,255,158,158,158,0,0,0,0,51,2,1,2,58,239,0,32,88,1,157,2],p:[1,1,1,1],c:[{n:[161,,,,,,,,,,,,,,,,163,,,,,,,,159],f:[]}]},{g:[0,91,128,0,0,95,128,12,0,0,12,0,72,0,0,0,0,0,0,0,2,255,0,0,32,83,3,130,4],p:[1,1,2,1],c:[{n:[144,,151,,149,,147,,146,,147,,146,,144,,144,,151,,149,,147,,146,,147,,146,,144],f:[]},{n:[156,,163,,161,,159,,158,,159,,158,,156,,156,,163,,161,,159,,158,,159,,158,,168],f:[]}]},{g:[0,16,133,0,0,28,126,12,0,0,2,0,60,0,0,0,0,0,0,0,2,91,0,0,32,47,3,157,2],p:[1,2,1,2],c:[{n:[144,,151,,149,,147,,146,,147,,146,,144,,144,,151,,149,,147,,146,,147,,146,,144],f:[]},{n:[168,,175,,173,,171,,170,,171,,170,,168,,168,,175,,173,,171,,170,,171,,170,,168],f:[]}]},{g:[0,255,116,79,0,255,116,0,83,0,4,6,69,52,0,0,0,0,0,0,2,14,0,0,32,0,0,0,0],p:[1,1,1,1],c:[{n:[144,,151,,149,,147,,146,,147,,146,,144,,144,,151,,149,,147,,146,,147,,146,,144,,,159,,,,159,,,,159,,,,,,,,,,,,159,,159],f:[]}]}],mb:8269,lb:32,rb:3,xb:4},ea=[{g:"mmmmmm",r:"m",l:!0,j:100,o:0},{g:"mmmmm",r:"m",l:!0,j:40,o:0},{g:"mmmm",r:"m",l:!0,j:15,o:0},{g:"mmm",r:"m",l:!0,j:5,o:0},{g:"mm",r:"m",l:!0,j:3,o:0},{g:"ff",r:"m",l:!1,j:0,o:0},{g:"ww",r:"m",l:!1,j:0,o:0},{g:"ee",r:"m",l:!1,j:0,o:0},{g:"ii",r:"m",l:!1,j:0,o:0},{g:"zz",r:"m",l:!1,j:0,o:0},{g:"ll",r:"m",l:!1,j:0,o:0},{g:"dd",r:"m",l:!1,j:0,o:0},{g:"mf",r:"f",l:!0,j:3,o:0},{g:"mw",r:"w",l:!0,j:3,o:0},{g:"me",r:"e",l:!0,j:3,o:0},{g:"mi",r:"i",l:!0,j:3,o:0},{g:"mz",r:"z",l:!0,j:3,o:0},{g:"ml",r:"l",l:!0,j:3,o:0},{g:"md",r:"d",l:!0,j:3,o:0},{g:"mff",r:"f",l:!0,j:7,o:0},{g:"mww",r:"w",l:!0,j:7,o:0},{g:"mee",r:"e",l:!0,j:7,o:0},{g:"mii",r:"i",l:!0,j:7,o:0},{g:"mzz",r:"z",l:!0,j:7,o:0},{g:"mll",r:"l",l:!0,j:7,o:0},{g:"mdd",r:"ld",l:!0,j:7,o:0},{g:"mfff",r:"f",l:!0,j:15,o:0},{g:"mwww",r:"w",l:!0,j:15,o:0},{g:"meee",r:"e",l:!0,j:15,o:0},{g:"miii",r:"i",l:!0,j:15,o:0},{g:"mzzz",r:"z",l:!0,j:15,o:0},{g:"mlll",r:"l",l:!0,j:15,o:0},{g:"mddd",r:"d",l:!0,j:15,o:0},{g:"mfi",r:"f",l:!0,j:8,o:0},{g:"mfe",r:"f",l:!0,j:8,o:0},{g:"mwi",r:"w",l:!0,j:8,o:0},{g:"mwe",r:"w",l:!0,j:8,o:0}];function fa(t,a,i){const e=[];for(let s=0;70>s;s++){const n=2*Math.PI*s/70;e.push({x:t+i*Math.cos(n),y:a+i*Math.sin(n)})}return e}class r{constructor(t,a,i,e,s,n){this.x=t,this.y=a,this.w=i,this.i=e,this.v=s,this.onclick=n}P(t){var a=t.x;return t=t.y,a>=this.x&&a<=this.x+this.w&&t>=this.y&&t<=this.y+this.i&&(this.onclick&&this.onclick(this),!0)}L(t){t.drawImage(this.v,this.x,this.y,this.w,this.i)}update(){}}function ha(t,a){let i=t[0],e=a[i[0]][i[1]];for(const s of t){const[t,n]=s;a[t][n]<e&&(i=s,e=a[t][n])}return i}function ia(t,a){const i=[a];for(;t.hasOwnProperty(`${a[0]}-${a[1]}`);)a=t[`${a[0]}-${a[1]}`],i.unshift(a);return i}function ja(t,a,i){const e=[];return 0<a&&e.push([a-1,i]),a<t.rows-1&&e.push([a+1,i]),0<i&&e.push([a,i-1]),i<t.cols-1&&e.push([a,i+1]),e}function ka(t,a,i,e,s){a=Math.floor(a),i=Math.floor(i),e=Math.floor(e),s=Math.floor(s);const n=[],h=new Set,r={},o=Array(t.rows).fill(null).map(()=>Array(t.cols).fill(1/0));o[a][i]=0;const l=Array(t.rows).fill(null).map(()=>Array(t.cols).fill(1/0));for(l[a][i]=Math.abs(a-e)+Math.abs(i-s),n.push([a,i]);0<n.length;){a=ha(n,l);const[c,f]=a;if(c===e&&f===s)return ia(r,a);n.splice(n.indexOf(a),1),h.add(`${c}-${f}`),i=ja(t,c,f);for(const u of i){const[d,m]=u;h.has(`${d}-${m}`)||t.wb[d][m]||(i=o[c][f]+1)<o[d][m]&&(r[`${d}-${m}`]=a,o[d][m]=i,l[d][m]=i+(Math.abs(d-e)+Math.abs(m-s)),n.includes(u)||n.push(u))}}return null}class la{constructor(t){this.wb=t,this.rows=t.length,this.cols=t[0].length}}class ma{constructor(t,a){this.F=t,this.Xa=w(a,t=>""==t?null:t),this.Ja=[{c:"#847e87",G:0,J:"",m:void 0}]}}class na{constructor(t,a){this.F=t,this.U=[x("🌀",2*k,1.3),x("🌀",2*k,1),x("🌀",2*k,1.1),x("🌀",2*k,1.2)],this.animate={framerate:10,frame:0,index:0},t=(a.g+a.eb)/2,this.level=8>t?1:16>t?2:24>t?3:32>t?4:40>t?5:48>t?6:56>t?7:64>t?8:9+Math.round(Math.random()),this.v=this.U[0],this.s=new A({x:a.g*k+this.v.w/2,y:a.eb*k+this.v.i/2})}update(){this.animate.frame++,this.animate.frame>this.animate.framerate&&(this.v=this.U[this.animate.index],this.animate.frame=0,this.animate.index=this.animate.index>=this.U.length-1?0:this.animate.index+1)}L(t){t.drawImage(this.v,this.s.x-this.v.w/2,this.s.y-this.v.i/2),t.fillStyle="blue",t.fillRect(this.s.x,this.s.y,2,2)}P(t){E(this.s,t)<2*k&&(console.log("click near me",this),oa(this.F,this))}}function pa(t,a){var i=qa(64*k,64*k,k*k),e={};t.Ja.map(t=>e[t.c]=t.m),t=w(a,t=>""==t?null:t);var s=(a=G(64*k,64*k)).h;s.drawImage(i,0,0);for(let a=0;64>a;a++)for(let n=0;64>n;n++)null!=(i=e[t[n][a]])&&s.drawImage(i,a*k,n*k);return a}class za extends ma{constructor(t){super(t,t.Fa.ib),this.ch=this.F.C.i;var a=Aa(k,k),i=Ba(k,k),e=Ca(k,k),s=x("🌳",k,1.3),n=x("🏡",2*k,1.3),h=x("🏠",2*k,1.3),r=x("⛪",3*k,1.3),o=x("🏫",3*k,1.3),l=x("⛺",3*k,1.3);x("🌀",2*k,1.3);var c=Da(k);for(this.hb=[],this.Ja=[{c:"#99e550",G:0,J:"",m:void 0},{c:"#639bff",G:1,J:"",m:e},{c:"#6abe30",G:1,J:"",m:s},{c:"#76428a",G:1,J:"house1",m:n},{c:"#d77bba",G:1,J:"house2",m:h},{c:"#d9a066",G:0,J:"",m:a},{c:"#767676",G:1,J:"",m:c},{c:"#8f974a",G:1,J:"church",m:r},{c:"#fbf236",G:1,J:"townhall",m:o},{c:"#663931",G:0,J:"",m:i},{c:"#524b24",G:1,J:"tent",m:l},{c:"#222034",G:1,J:"portal",m:void 0}],a=0;64>a;a++)for(i=0;64>i;i++)"#222034"==this.Xa[i][a]&&this.hb.push({g:a,eb:i});for(var f in this.map=pa(this,t.Fa.ib),t=this.Xa,a={},i=this.Ja)a[i[f].c]=i[f].G;for(f=[],i=0;i<t.length;i++)for(f[i]=[],e=0;e<t[i].length;e++)s=a[t[e][i]],f[i][e]=null!=s&&0==s?0:1;this.kb=f,this.Bb=new la(this.kb)}}function Ea(t){var a=[];for(let i=2;5>=i;i++)a.push(t.U[i]);return a}class Fa{constructor(t){this.U=Ga(t.Fa)}}function Ha(t){t.oa=q,t.Na=q.rb,t.Aa=0,t.na=q.mb*q.lb*(t.Na+1)*2,t.W=new Int32Array(t.na)}function Ia(t,a,i){Ha(t);var e=()=>{var s,n,h,r,o,l,c=new Int32Array(t.na);const f=t.oa.Fb[t.Aa],u=t.oa.mb,d=t.oa.lb;let m=0,g=0;var v=!1;const w=[];for(h=0;h<=t.Na;++h){var b=f.p[h];for(r=0;r<d;++r){(l=b?f.c[b-1].f[r]:0)&&(f.g[l-1]=f.c[b-1].f[r+d]||0,17>l&&(w.length=0));const a=t.Oa[f.g[16]],i=f.g[17]/512,e=2**(f.g[18]-9)/u,x=f.g[19],I=f.g[20],k=135.82764118168*f.g[21]/44100,M=1-f.g[22]/255,A=1e-5*f.g[23],L=f.g[24]/32,S=f.g[25]/512,E=6.283184*2**(f.g[26]-9)/u,G=f.g[27]/255,j=f.g[28]*u&-2;for(l=(h*d+r)*u,o=0;4>o;++o)if(n=b?f.c[b-1].n[r+o*d]:0){if(!w[n]){var p=s=n,y=t.Oa[f.g[0]];const a=f.g[1],i=f.g[3]/32,e=t.Oa[f.g[4]],h=f.g[5],r=f.g[8]/32,o=f.g[9],l=f.g[10]*f.g[10]*4,c=f.g[11]*f.g[11]*4,d=f.g[12]*f.g[12]*4,m=1/d,g=-f.g[13]/16;let v=f.g[14];const b=u*2**(2-f.g[15]),x=new Int32Array(l+c+d);let I=0,k=0,M=0,A=0;for(let t=0,s=0;t<l+c+d;t++,s++){0<=s&&(v=v>>8|(255&v)<<4,s-=b,M=.003959503758*2**((p+(15&v)+f.g[2]-128-128)/12),A=.003959503758*2**((p+(15&v)+f.g[6]-128-128)/12)*(1+8e-4*f.g[7]));let n=1;t<l?n=t/l:t>=l+c&&(n=(t-l-c)*m,n=(1-n)*3**(g*n)),I+=M*n**i;let u=y(I)*a;k+=A*n**r,u+=e(k)*h,o&&(u+=(2*Math.random()-1)*o),x[t]=80*u*n|0}w[s]=x}for(p=w[n],n=0,s=2*l;n<p.length;n++,s+=2)c[s]+=p[n]}for(n=0;n<u;n++)(s=c[o=2*(l+n)])||v?(v=k,x&&(v*=a(e*o)*i+.5),m+=(v=1.5*Math.sin(v))*g,g+=v*(s=M*(s-g)-m),s=3==I?g:1==I?s:m,A&&(s=1>(s*=A)?-1<s?t.jb(.25*s):-1:1,s/=A),v=1e-5<(s*=L)*s,y=s*(1-(p=Math.sin(E*o)*S+.5)),s*=p):y=0,o>=j&&(y+=c[o-j+1]*G,s+=c[o-j]*G),c[o]=0|y,c[o+1]=0|s,t.W[o]+=0|y,t.W[o+1]+=0|s}}if(t.Aa++,1==t.Aa/t.oa.xb){for(h=a.createBuffer(2,t.na/2,44100),r=0;2>r;r++)for(b=h.getChannelData(r),c=r;c<t.na;c+=2)b[c>>1]=t.W[c]/65536;return i(h)}requestAnimationFrame(e)};requestAnimationFrame(e)}class Ja{constructor(){this.Oa=[this.jb,this.zb,this.yb,this.Ab],this.oa=null,this.na=this.Aa=this.Na=0,this.W=null}jb(t){return Math.sin(6.283184*t)}yb(t){return t%1*2-1}zb(t){return.5>t%1?1:-1}Ab(t){return 2>(t=t%1*4)?t-1:3-t}getData(t,a){const i=2*Math.floor(44100*t),e=Array(a);for(let s=0;s<2*a;s+=1){const a=i+s;e[s]=0<t&&a<this.W.length?this.W[a]/32768:0}return e}}function Ka(t){const a=t.R.sampleRate;t=t.R.createBuffer(1,.3*a,a).getChannelData(0);for(var i=0;i<t.length;i++)t[i]=2*(Math.random()-.5);i=.29-.1;for(let e=0;e<t.length;e++){let s=e/a;.01>s?t[e]*=s/.01:.11>s?t[e]*=1-(s-.01)/.1*.8:s>.3-i&&(t[e]*=(.3-s)/i)}for(i=0;i<t.length;i++)t[i]*=Math.sin(i/a*Math.PI*2*(440+100*Math.random()))}function La(t){const a=t.R.sampleRate;t=t.R.createBuffer(1,.5*a,a).getChannelData(0);for(var i=0;i<t.length;i++)t[i]=2*Math.random()-1;for(i=0;i<t.length;i++){let e=i/a;.05>e?t[i]*=e/.05:.25>e?t[i]*=1-(e-.05)/.2:.25<e&&(t[i]*=(.5-e)/.25)}}function Ma(t){t.O&&(t.O.stop(),t.O=null),t.Va&&(t.O=t.R.createBufferSource(),t.O.buffer=t.Va,t.O.connect(t.R.destination),t.O.loop=!0,t.O.start(0,t.Qa),t.startTime=t.R.currentTime-t.Qa)}function Na(t){t.O&&(t.Qa=t.R.currentTime-t.startTime,t.O.stop(),t.O=null)}class Oa{constructor(){this.R=new(window.AudioContext||window.webkitAudioContext),new(window.AudioContext||window.webkitAudioContext),Ka(this),La(this);var t=new Ja;this.startTime=this.Qa=0,Ia(t,this.R,t=>{this.Va=t,Ma(this)})}}function w(t,a){for(var i=t.getContext("2d").getImageData(0,0,t.width,t.height).data,e=[],s=0;s<i.length;s+=4){var n=e,h=n.push,r=i[s],o=i[s+1],l=i[s+2];r=0==r+o+l+i[s+3]?null:0==r+o+l||255<r||255<o||255<l?"#000000":"#"+((r<<16)+(o<<8)+l).toString(16).padStart(6,"0"),h.call(n,r)}for(i=[],s=0;s<t.height;s++)i[s]=[];for(n=s=0,h=0;h<e.length;h++)s>=t.width&&(n++,s=0),i[n][s]=e[h],a&&(i[n][s]=a(i[n][s])),s++;return i}function I(t){var a=G(t.width,t.height);return a.h.drawImage(t,0,0),a}function x(t,a,i=1.3,e="#000",s="sans-serif"){let n=G(a,a);var h=n.h;return h.font=`${a/i}px ${s}`,h.textAlign="center",h.textBaseline="middle",h.fillStyle=e,h.fillText(t,a/2,1.1*a/2),n}function G(t=0,a=0){let i=document.createElement("canvas");return i.width=t,i.height=a,i.w=t,i.i=a,i.h=i.getContext("2d"),i.s={x:t/2,y:a/2},i.clear=()=>{i.h.clearRect(0,0,t,a)},i.fill=e=>{i.h.fillStyle=e,i.h.fillRect(0,0,t,a)},i.Hb=e=>{e=i.h.createPattern(e,"repeat"),i.h.fillStyle=e,i.h.fillRect(0,0,t,a)},i}function Pa(t){for(var a="",i=0;i<t;i++){a+="<tr>";for(var e=0;1>e;e++)a+="<td></td>";a+="</tr>"}(t=document.createElement("table")).innerHTML=a,a=[],i=t.querySelectorAll("tr");for(let t=0;t<i.length;t++)(e=i[t].querySelectorAll("td")).forEach(t=>t.aa=a=>t.innerHTML=a),a[t]=[...e];return t.ia=a,t}function Qa(t,a,i){var e=G(a,t),s=e.h,n=Ra(12.5*t/100,null,i);return s.fillStyle=i,s.drawImage(n,0,0),s.drawImage(n,t-n.width,0),s.drawImage(n,t-n.width,a-n.height),s.drawImage(n,0,a-n.height),s.fillRect(n.width/2,1,t-n.width,a-2),s.fillRect(1,n.width/2,t-2,a-n.width),e}function Ra(t,a=null,i=null,e=1){var s=G(2*t+2,2*t+2),n=s.h;return n.save(),n.lineWidth=e,n.beginPath(),n.arc(s.width/2,s.height/2,t,0,2*Math.PI,!1),null!=a&&(n.strokeStyle=a,n.stroke()),null!=i&&(n.fillStyle=i,n.fill()),n.restore(),s}function J(t,a,i,e=.8,s="sans-serif"){let n=G(a*(t=t.toUpperCase()).length,a);for(let r=0;r<t.length;r++){var h=x(t[r],a,e,i,s);n.h.drawImage(h,r*a,0)}return n}function K(t,a){a=J(t,16,a,1,"cursive"),t=J(t,16,"#fff",1,"cursive");var i=G(a.w+4,a.w+4);return i.h.drawImage(t,1,1),i.h.drawImage(a,0,0),i}function L(t,a,i="source-atop"){if(!t||!a)return t;let e=G(t.width,t.height),s=e.h;for(s.drawImage(t,0,0),s.globalCompositeOperation=i,i=0;i<t.width/a.width;i++)for(let e=0;e<t.height/a.height;e++)s.drawImage(a,i*a.width,e*a.height);return e}function Sa(t){let a=G(t.width,t.height),i=a.h;return i.save(),i.scale(1,-1),i.drawImage(t,0,0,t.width,-1*t.height),i.restore(),a}function O(t){var a=document.createElement("div");return a.innerHTML=t,a.firstChild}function Ta(t=8,a=8){var i=G(t,a),e=i.h;e.fillStyle="#000",e.fillRect(0,0,i.width,i.height),e.fillStyle="#fff";for(let i=0;i<a;i++)for(let a=0;a<t;a++).001>Math.random()&&e.fillRect(a,i,1,1);return i}function Ua(t){var a="sh1.gif?"+Math.random(),i=new Image;i.src=a,i.addEventListener("load",()=>{t(i)})}function Va(t,a=1){let i=t.length,e=Math.max(...t.map(t=>t.length));var s=G(e*a,i*a),n=s.h;for(let s=0;s<i;s++)for(let i=0;i<e;i++){var h=t[s][i];h&&""!=h&&(n.fillStyle=h,n.fillRect(i*a,s*a,a,a))}return s}function Wa(t){return Va(t=w(t=I(t),t=>t),2)}function P(t,a,i,e,s){let n=G(e,s);return n.h.drawImage(t,a,i,e,s,0,0,e,s),n}function Xa(t){var a=G(t.w,t.i);return a.fill("#fff"),a=L(t,a,"source-atop"),(t=G(t.w+2,t.i+2)).h.drawImage(a,0,0,t.w,t.i),t}function Ya(t){var a=k;return parseInt(t/a)*a+a/2}function Za(t,a,i,e){(t=G(t,a)).h.fillStyle=e,t.h.fillRect(i.w/2,i.i/2,t.w-i.w,t.i-i.i),e=G(t.w,i.i),a=G(i.w,t.i);for(var s=0;s<t.w-i.w;)e.h.drawImage(i,s,0),s+=i.w/2;for(s=0;s<t.i-i.i;)a.h.drawImage(i,0,s),s+=i.i/2;return t.h.drawImage(e,0,-2),t.h.drawImage(e,0,t.i-e.i+2),t.h.drawImage(a,-1,0),t.h.drawImage(a,t.w-a.w+1,0),t}function Q(t,a,i){var e=a.getBoundingClientRect();i(new A({x:a.width/e.width*(t.clientX-e.left)+window.scrollX,y:a.height/e.height*(t.clientY-e.top)+window.scrollY}))}function $a(t){return Va(t=w(t),2)}function S(t=1,a=0){return a+(t-a)*Math.random()}function U(t=1,a=0){return 0|S(t,a)}function Aa(t=64,a=64){const i=G(t,a),e=i.h;e.fillStyle="#a67c52",e.fillRect(0,0,t,a);for(let i=0;i<t+a;i++){const i=U(0,t),s=U(0,a),n=U(2,5);e.globalAlpha=S(.15,.35),e.fillStyle=.5<S()?"#c2b280":"#7c5c36",e.beginPath(),e.arc(i,s,n,0,2*Math.PI),e.fill()}return e.globalAlpha=1,i}function Ba(t=64,a=64){const i=G(t,a),e=i.h;e.fillStyle="#b0a99f",e.fillRect(0,0,t,a);const s=t/4;a/=4;for(let i=0;4>i;i++)for(let n=0;4>n;n++){let h=n*s+(1==i%2?s/2:0);if(h+s>t)continue;let r=i*a;e.fillStyle=.5<S()?"#d6d2c4":"#a59e91",e.fillRect(h,r,s-2,a-2),e.strokeStyle="#8d867a",e.lineWidth=1,e.strokeRect(h,r,s-2,a-2)}return e.globalAlpha=1,i}function Ca(t=64,a=64){const i=G(t,a),e=i.h;e.fillStyle="#639bff",e.fillRect(0,0,t,a);for(let i=0;i<t+a;i++){const i=U(0,t),s=U(0,a),n=U(2,6);e.globalAlpha=S(.15,.35),e.fillStyle="#a3d8ff",e.beginPath(),e.arc(i,s,n,0,2*Math.PI),e.fill()}return e.globalAlpha=1,i}function Da(t=64){const a=document.createElement("canvas");a.width=a.height=t;const i=a.getContext("2d");i.fillStyle="#e6d3b3",i.fillRect(0,0,t,t);const e=["#d1bfa3","#c2ad8f","#b8a07d","#e0ceb0"],s=t/4*.9,n=t/3*.7;for(let a=0;3>a;a++)for(let h=0;4>h;h++){let r=h*t/4+a%2*t/8,o=a*t/3;i.beginPath(),i.ellipse(r+s/2,o+n/2,s/2,n/2,0,0,2*Math.PI),i.fillStyle=e[Math.floor(Math.random()*e.length)],i.shadowColor="#bba98a",i.shadowBlur=4,i.fill(),i.shadowBlur=0}return i.globalAlpha=.08,i.fillStyle="#fff",i.beginPath(),i.arc(.7*t,.3*t,.25*t,0,2*Math.PI),i.fill(),i.globalAlpha=1,a}function qa(t=64,a=64,i=8){var e=[x("🌹",12,1.3),x("🌷",12,1.3),x("🌻",12,1.3),x("🌼",12,1.3),x("🌱",12,1.3)];const s=G(t,a);var n=s.h,h=rb(t,a);for(n.fillStyle="#4caf50",n.drawImage(h,0,0),h=0;h<i;h++)n.drawImage(e[U(0,e.length)],U(0,t-12),U(0,a-12));return s}function rb(t=64,a=64){const i=G(t,a),e=i.h;e.fillStyle="#4caf50",e.fillRect(0,0,t,a);for(let i=0;i<t+a;i++){const i=U(0,t),s=U(0,a),n=U(2,5);e.globalAlpha=S(.18,.38),e.fillStyle=.5<S()?"#81c784":"#388e3c",e.beginPath(),e.arc(i,s,n,0,2*Math.PI),e.fill()}return e.globalAlpha=1,i}function Ga(t){function a(t){return P(e,t[0],t[1],t[2],t[3])}function i(t,a,i,d,m){var g=I(e);return g.h.drawImage(r,s.Ma[0],s.Ma[1]+(t?-2:0)),g.h.drawImage(o,s.Ra[0],s.Ra[1]+(a?-2:0)),i?g.h.drawImage(h,s.sa[0],s.sa[1]+4):g.h.drawImage(n,s.sa[0],s.sa[1]),d?g.h.drawImage(c,s.ma[0],s.ma[1]-4):g.h.drawImage(l,s.ma[0],s.ma[1]),m?g.h.drawImage(u,s.qa[0],s.qa[1]-4):g.h.drawImage(f,s.qa[0],s.qa[1]),g}var e=I(t.Wa);t=[];var s={sa:[27,20,4,6],Ma:[7,29,8,3],Ra:[17,29,8,3],ma:[5,15,5,7],qa:[22,15,5,7]},n=a(s.sa),h=Sa(n),r=a(s.Ma),o=a(s.Ra),l=a(s.ma),c=Sa(l),f=a(s.qa),u=Sa(f);for(var d in s){var m=s[d];e.h.clearRect(m[0],m[1],m[2],m[3])}d=[{ca:0,ea:0,fa:0,ba:0,da:0},{ca:0,ea:0,fa:0,ba:0,da:0},{ca:1,ea:0,fa:0,ba:0,da:1},{ca:1,ea:0,fa:1,ba:0,da:0},{ca:0,ea:1,fa:0,ba:1,da:0},{ca:0,ea:1,fa:1,ba:0,da:0}];for(let a in d)m=i((m=d[a]).ca,m.ea,m.fa,m.ba,m.da),t.push(m);return t}class sb{constructor(t){t=Va(t=w(t=I(t),t=>""==t||"#fff"==t||"#ffffff"==t?null:t),1),this.Wa=P(t,0,0,32,32),P(t,32,0,32,32),this.ib=P(t,0,32,64,64),P(t,0,80,16,16)}}function E(t,a){let i;return i=0+Math.pow(t.x-a.x,2),i+=Math.pow(t.y-a.y,2),Math.sqrt(i)}function tb(t,a,i=1){var e=t.y==a.y?0:t.y<a.y?i:-i;t.x+=t.x==a.x?0:t.x<a.x?i:-i,t.y+=e}class A{constructor(t){this.x=t.x,this.y=t.y}}function ub(t){t.layout=O("<div class='layout'></div>"),t.vb=O("<div class='header'></div>"),t.body=O("<div class='body'></div>"),t.ub=O("<div class='footer'></div>"),t.layout.appendChild(t.vb),t.layout.appendChild(t.body),t.layout.appendChild(t.ub),document.body.innerHTML="",document.body.appendChild(t.layout)}class vb{constructor(){this.wa={Ca:!1,Jb:!1,controls:!1},ub(this);var t=O("<div>Loading....</div>");this.body.append(t),this.Gb=window.innerHeight/window.innerWidth,1<this.Gb&&(k=32),da=Math.floor(window.innerWidth/k)-1,this.cb=document.createElement("div"),document.body.innerHTML=""}}class wb{constructor(t){this.F=t,this.level=0,this.speed=2,this.visibility=4*k,t=this.la=new Fa(t),this.Ia=[t.U[0],t.U[1]],this.ta=Ea(this.la),this.animation={framerate:8,frame:0,Ga:0,Sa:this.Ia},this.s=new A({x:3*k-k/2,y:5*k-k/2}),this.Ea=new A(this.s),this.v=this.Ia[0],this.Ba=!1,this.destination=new A(this.s),this.Pa=[]}update(){if(this.animation.Sa=this.Ba?this.ta:this.Ia,this.animation.frame++,this.animation.frame>=this.animation.framerate&&(this.animation.Ga>=this.animation.Sa.length&&(this.animation.Ga=0),this.v=this.animation.Sa[this.animation.Ga],this.animation.Ga++,this.animation.frame=0),E(this.destination,this.s)>=this.speed?tb(this.s,this.destination,this.speed):(this.s=new A(this.destination),this.Ba=!1),0==E(this.destination,this.s)&&0<this.Pa.length){var t=this.Pa.shift();this.destination=new A(t),this.Ba=!0}}L(t){t.drawImage(this.v,this.s.x-this.v.w/2,this.s.y-this.v.i/2)}P(t){if(!(t.y<k)){var a,i=Math.floor(Ya(Math.max(0,this.s.x-this.F.C.w/2)+t.x)/k);if(t=Math.floor(Ya(Math.max(0,this.s.y-this.F.C.i/2)+t.y)/k),a=0==this.Ba){try{var e=1==this.F.ya.kb[i][t]}catch(t){e=!0}a=!e}if(a){if(e=[],1<(i=ka(this.F.ya.Bb,Math.floor(this.s.x/k),Math.floor(this.s.y/k),i,t)).length)for(a=1;a<i.length;a++)t=i[a],e.push(new A({x:t[0]*k+k/2,y:t[1]*k+k/2}));this.Pa=e}}}}function xb(t){var a=t.B.pop();a=JSON.stringify(a),t.xa.delete(a)}function yb(t){if(0<t.B.length)return t.B[t.B.length-1]}function zb(t){if(1<t.B.length)return t.B[t.B.length-2]}function Ab(t){return 0==(t=t.B.map(t=>t.Z)).length?" ":t.join("")}class Bb{constructor(){this.xa=new Set,this.B=[]}length(){return this.B.length}add(t){const a=JSON.stringify(t);return!this.xa.has(a)&&(this.xa.add(a),this.B.push(t),!0)}has(t){return this.xa.has(JSON.stringify(t))}getAll(){return[...this.B]}}class V{constructor(t){var a=G(t.w,t.i),i=a.h;a.fill(t.color);var e=J(t.name,14,"#000",1.1);i.drawImage(t.v,a.w/2-t.v.w/2,a.i/2-t.v.i/2),i.drawImage(e,a.w/2-e.w/2,4),i.fillStyle=.4<t.V/t.La?"green":"red",i.fillRect(k/5,e.i+4,t.V/t.La*(a.w-k/10),4),this.x=t.x,this.y=t.y,this.ra=G(t.w+4,t.i+4),this.ra.fill(t.ra),this.canvas=a}L(t){t.drawImage(this.ra,this.x-2,this.y-2),t.drawImage(this.canvas,this.x,this.y)}}function Cb(t){var a=G(t.w,t.i),i=qa(t.w,t.i,t.w);return a.h.drawImage(i,0,0),i=x("🌳",t.w/2,1.2),a.h.drawImage(i,-i.w/2,0),a.h.drawImage(i,t.w-i.w/2,0),(t=G(a.width,a.height)).h.globalAlpha=.5,t.h.drawImage(a,0,0),t.h.globalAlpha=1,t}function W(t,a,i){return a=x(a,t.T,1.3),L(i?t.Db:t.Eb,a)}function Db(t,a,i,e,s,n,h=!0){if(null==a.flat().find(t=>s(t)))return a;for(let t=0;t<e;t++){const e=[];for(var r=0;r<i;r++)s(a[r][t])||e.push(a[r][t]);if(h)for(r=0;r<i;r++)a[r][t]=r>=i-e.length?e[r-(i-e.length)]:n(r,t);else for(r=0;r<i;r++)a[r][t]=r<e.length?e[r]:n(r,t)}return Db(t,a,i,e,s,n,h)}function Eb(t,a,i){var e=t.$[U(0,t.$.length)];return{s:new A({x:t.x+a*t.A+t.A/2,y:t.y+i*t.A+t.A/2}),Z:e.K,v:e.m}}function Fb(t,a){for(let i in a)for(let e in a[i])a[i][e].s=new A({x:t.x+e*t.A+t.A/2,y:t.y+i*t.A+t.A/2}),a[i][e].r=i,a[i][e].c=e}function Gb(t){t.D=new Bb;var a=[];for(let e=0;e<t.rows;e++){a[e]=[];for(let s=0;s<t.cols;s++){var i=t.$[U(0,t.$.length)];a[e][s]={r:e,c:s,s:new A({x:t.x+s*t.A+t.A/2,y:t.y+e*t.A+t.A/2}),Z:i.K,v:i.m}}}t.grid=a}function Hb(t){var a=Ab(t.D),i=t.T,e=t.T;if(" "==a)return h;var s={};t.$.forEach(t=>s[t.K]=t.m);var n=ea.find(t=>t.g==a);if(n){var h=G(a.length*i+2*i,e);h.fill("green"),e=0;for(let t=0;t<a.length;t++){var r=a[t];s[r]&&h.h.drawImage(s[r],e,0),e+=i}n.j?(h.h.drawImage(t.Ua,e,0),e+=i,t=L(t.tb,s[n.r],"source-atop"),h.h.drawImage(t,e,0)):(h.h.drawImage(t.Ua,e,0),e+=i,h.h.drawImage(s[n.r],e,0)),e+=i}else for((h=G(a.length*i,e)).fill("red"),e=0,t=0;t<a.length;t++)r=a[t],s[r]&&h.h.drawImage(s[r],e,0),e+=i;return h}class Ib{constructor(t,a=()=>{}){t.body.innerHTML="",this.F=t,this.C=t.C,this.w=this.C.w,this.i=this.C.i,I(t.canvas),this.ka=null,this.pb=Cb(this),this.sb=a,this.A=1.85*k,this.T=.82*this.A,this.canvas=G(this.w,this.i),t.body.append(this.canvas),this.za=!1,this.D=new Bb,this.Db=Qa(this.T,this.T,"#fff"),this.Eb=Qa(this.T,this.T,"#8c8c8c"),this.Ka=x("⚔",3*k,1.3,"#fff"),this.Ua=x("➡",this.T,1.3,"#fff"),this.tb=x("💥",this.T,1.3,"#fff"),this.S=[new r(0,0,1.5*k,1.5*k,x("🚪",1.5*k,1.4),()=>{a(this)})],this.Da={name:"player",V:90,La:100,v:Wa(t.Fa.Wa),x:3*k,y:this.canvas.i/5,w:3*k,i:3.5*k,color:"gold",ra:"#fff"},this.pa={name:"target",V:33,La:100,v:x("🧟",64,1.3),x:this.canvas.w-3*k-3*k,y:this.canvas.i/5,w:3*k,i:3.5*k,color:"gold",ra:"#fff"},this.Ya=[new V(this.Da),new V(this.pa)],this.$=[{K:"m",e:"🔮",m:W(this,"🔮",!1),Y:W(this,"🔮",!0),c:"#f00"},{K:"f",e:"🔥",m:W(this,"🔥",!1),Y:W(this,"🔥",!0),c:"#f00"},{K:"w",e:"💧",m:W(this,"💧",!1),Y:W(this,"💧",!0),c:"#00f"},{K:"e",e:"🌱",m:W(this,"🌱",!1),Y:W(this,"🌱",!0),c:"#0a0"},{K:"i",e:"🌪️",m:W(this,"🌪️",!1),Y:W(this,"🌪️",!0),c:"#aaa"},{K:"z",e:"⚡",m:W(this,"⚡",!1),Y:W(this,"⚡",!0),c:"#ff0"},{K:"l",e:"☀️",m:W(this,"☀️",!1),Y:W(this,"☀️",!0),c:"#ffb"},{K:"d",e:"🌑",m:W(this,"🌑",!1),Y:W(this,"🌑",!0),c:"#555"}],this.x=0,this.y=this.canvas.i/2,this.rows=Math.floor(this.canvas.i/this.A/2),this.cols=Math.floor(this.canvas.w/this.A),this.M=null,this.canvas.addEventListener("mousedown",t=>e(t)),this.canvas.addEventListener("mouseup",t=>i(t)),this.canvas.addEventListener("mousemove",t=>s(t)),this.canvas.addEventListener("touchstart",t=>e(t)),this.canvas.addEventListener("touchend",t=>i(t)),this.canvas.addEventListener("touchmove",t=>s(t));var i=t=>{if(this.M=null,0<this.D.B.length){var a=Ab(this.D),i=ea.find(t=>t.g==a);if(i){if(i.l)this.D.B.forEach(t=>{this.grid[t.r][t.c].Z=0}),this.grid=Db(this,this.grid,this.rows,this.cols,t=>0==t.Z,(t,a)=>Eb(this,t,a)),Fb(this,this.grid),this.pa.V-=i.j;else{var e=yb(this.D);this.D.B.forEach(t=>{this.grid[t.r][t.c].Z=0}),e.Z=i.r,e.v=this.$.find(t=>t.K==i.r).m,this.grid=Db(this,this.grid,this.rows,this.cols,t=>0==t.Z,(t,a)=>Eb(this,t,a)),Fb(this,this.grid),this.Da.V-=5}this.Ya=[new V(this.Da),new V(this.pa)]}}this.za=!1,this.D=new Bb,Q(t.touches?t.touches[0]:t,this.canvas,t=>{this.S.forEach(a=>{a.P&&a.P(t)})})},e=()=>{this.za=!0},s=t=>{Q(t.touches?t.touches[0]:t,this.canvas,t=>{var a=new A(t);if(null!=(t=this.grid.flat().find(t=>E(a,t.s)<this.A/2))){var i=t.s;if(this.za){var e=yb(this.D),s=zb(this.D);null==e||null==e?this.D.add(t):null!=s&&E(i,s.s)<this.A/2?xb(this.D):E(i,e.s)<1.5*this.A&&this.D.add(t)}}})};Gb(this),this.update(0)}update(){if(0>=this.pa.V)this.sb(this);else{var t=this.canvas.h;this.canvas.fill("#000"),t.drawImage(this.pb,0,0),t.fillStyle="#fff",t.drawImage(this.Ka,this.canvas.w/2-this.Ka.w/2,this.canvas.i/5-this.Ka.i);var a=this.D.getAll();if(1<a.length){var i=Hb(this);for(t.drawImage(i,this.x+this.w/2-i.w/2,this.y-this.A),t.strokeStyle="#fff",t.lineWidth=this.A/6,t.beginPath(),t.moveTo(a[0].s.x,a[0].s.y),i=1;i<a.length;i++)t.lineTo(a[i].s.x,a[i].s.y);t.stroke()}for(a=0;a<this.rows;a++)for(i=0;i<this.cols;i++){var e=this.grid[a][i],s=!1;0!=a%2&&0!=i%2||0==a%2&&0==i%2||(s=!0);var n=this.$.find(t=>t.K==e.Z);n&&(s=s?n.Y:n.m,t.drawImage(s,e.s.x-s.w/2,e.s.y-s.i/2))}this.Ya.forEach(a=>a.L(t)),this.S.forEach(t=>t.L(this.canvas.h)),requestAnimationFrame(t=>this.update(t))}}}class Jb{constructor(t,a){this.F=t,this.ka=a,t.body.innerHTML="dungeon scene under construction, visit pdemia.com/bcg for updates ^_^ ....",(a=O("<button>back</button>")).onclick=()=>{t.body.innerHTML="",t.body.append(t.canvas),t.I=!1,t.u.remove(),t.update(t.time)},t.body.append(a)}update(){}}class Kb{constructor(t){this.F=t,t.body.innerHTML="",t.body.append(t.canvas),t.I=!1,t.u.remove(),I(t.canvas),this.canvas=I(t.canvas);var a=this.canvas.w,i=this.canvas.i;t.body.innerHTML="",t.body.append(this.canvas);var e=this.canvas.h;this.S=[];var s=J("▩",16,"#c3c139",1.3);i=Za(a,i/2,s,"#e7e570"),e.drawImage(i,0,0),i=Za(64,64,s,"#c3c139");var n=x("🧙",64,1.3);for(var h in e.drawImage(i,a-i.w-16,16),e.drawImage(n,a-i.w-16,16),i=[K("Hello? .....","#7a7818"),K("Portals appear, monsters...","#7a7818"),K("your master is lost in one of them","#7a7818"),K("your mission ... rescue master","#7a7818"),K("Game is under construction","#00f"),K("JS13k competition 2025","#00f")],a=k,i)e.drawImage(i[h],k,a),a+=k;(s=Za((h=K("OK","#7a7818")).w+k,h.i+k,s,"#e7e570")).h.drawImage(h,k/2,k/2),this.S.push(new r(1.5*k,a,s.w,s.i,s,()=>{t.body.innerHTML="",t.body.append(t.canvas),t.I=!1,t.u.remove(),t.update(t.time)})),this.S.forEach(t=>{t.L(e)}),this.canvas.addEventListener("mousedown",t=>l(t)),this.canvas.addEventListener("mouseup",t=>o(t)),this.canvas.addEventListener("mousemove",t=>c(t)),this.canvas.addEventListener("touchstart",t=>l(t)),this.canvas.addEventListener("touchend",t=>o(t)),this.canvas.addEventListener("touchmove",t=>c(t));var o=t=>{Q(t.touches?t.touches[0]:t,this.canvas,t=>{this.S.forEach(a=>{a.P&&a.P(t)})})},l=()=>{this.za=!0},c=t=>{Q(t.touches?t.touches[0]:t,this.canvas,()=>{})}}}function oa(t,a){null!=t.u&&t.u.remove(),t.u=Object.assign(document.createElement("div"),{className:"menuDialog"}),(a=O(`<div><h3>Portal Level ${a.level}<h3></div>`)).style.height=t.canvas.height/2+"px",t.u.append(a),(a=Pa(2)).ia[0][0].innerHTML="<button >Enter</button>",a.ia[0][0].onclick=()=>{t.u.remove(),t.I=!0,new Jb(t,t.ka)},a.ia[1][0].innerHTML="<button >Leave</button>",a.ia[1][0].onclick=()=>{t.u.remove()},t.u.append(a),t.body.append(t.u)}function Lb(t){t.ja=!0,t.I=!0,ub(t),t.canvas=G(t.C.w,t.C.i),t.canvas.fill("#000"),Mb(t,t.canvas),t.body.append(t.canvas),X(t)}function Mb(t,a){var i=new Nb(t);i.L(a),requestAnimationFrame(function t(e){i.update(e),i.L(a),requestAnimationFrame(t)})}function X(t){t.I=!0,null!=t.u&&t.u.remove(),t.u=Object.assign(document.createElement("div"),{className:"menuDialog"});var a=[];t.ja?(a.push({aa:"<button >New Game</button>",f:"newgame"}),a.push({aa:"<button >Practice Combat</button>",f:"paracticecombat"})):a.push({aa:"<button >Resume</button>",f:"resume"}),a.push({aa:"<button> About </button>",f:"about"},{aa:`<button >Music ${t.wa.Ca?"ON":"OFF"}</button>`,f:"music"}),t.ja||a.push({aa:"<button >Quit</button>",f:"quit"});var i=Pa(a.length);for(let s in a){var e=O(a[s].aa);i.ia[s][0].append(e),i.ia[s][0].onclick=()=>{Ob(t,a[s].f)}}t.u.append(i),t.body.append(t.u)}function Ob(t,a){"newgame"==a?(t.I=!1,t.ja=!1,Pb(t)):"resume"==a?(t.I=!1,t.u.remove(),t.update(t.time)):"music"==a?(t.Ha||(t.Ha=new Oa),t.wa.Ca?Na(t.Ha):Ma(t.Ha),t.wa.Ca=!t.wa.Ca,t.u.remove(),X(t)):"quit"==a?(document.webkitIsFullScreen&&document.exitFullscreen(),t.I=!0,t.ja=!0,t.u.remove(),Lb(t)):"about"==a?(null!=t.u&&t.u.remove(),t.u=Object.assign(document.createElement("div"),{className:"menuDialog"}),t.u.style.width=da*k+"px",(a=O("<button>Back</button>")).onclick=()=>{t.I=!1,t.u.remove(),X(t)},t.u.innerHTML+='\n                <div class="helpDiv" color=\'#fff\'>\n                    <h1>GAME STILL UNDER CONSTRUCTION</h1>\n                    <h3>entry in js13k games 2025</h3>\n                    <h3>visit <a href="https://pdemia.com/bcg">pdemia.com/bcg<a> for updates</h3>\n                    <h3>last update 12/9/2025 </h3>\n                    <p>mohammad0jawad@gmail.com</p>\n                </div>\n            ',t.u.querySelector(".helpDiv").style["overflow-y"]="auto",t.u.append(a),t.body.append(t.u)):"paracticecombat"==a&&(t.I=!0,t.u.remove(),new Ib(t,()=>{console.log("combat training over"),t.I=!0,t.ja=!0,t.u.remove(),Lb(t)}))}function Pb(t){ub(t),t.body.innerHTML="",t.ya=new za(t),t.Cb=t.ya.hb.map(a=>new na(t,a)),t.canvas=G(t.C.w,t.C.i),t.body.innerHTML="",t.body.appendChild(t.canvas),t.body.appendChild(t.cb),t.ka=new wb(t),t.S=[new r(0,0,1.5*k,1.5*k,x("📋",1.5*k,1.4),()=>{X(t)})],t.B=[t.ka,...t.Cb],t.body.innerHTML="",t.body.appendChild(t.canvas),t.body.appendChild(t.cb),t.update(0),new Kb(t),t.M=null,t.canvas.addEventListener("mousedown",t=>a(t)),t.canvas.addEventListener("mouseup",()=>{t.M=null}),t.canvas.addEventListener("mousemove",t=>i(t)),t.canvas.addEventListener("touchstart",t=>a(t)),t.canvas.addEventListener("touchend",()=>{t.M=null}),t.canvas.addEventListener("touchmove",t=>i(t));var a=a=>{Q(a.touches?a.touches[0]:a,t.canvas,a=>{t.M={x:a.x,y:a.y}})},i=a=>{t.M&&Q(a.touches?a.touches[0]:a,t.canvas,a=>{t.M={x:a.x,y:a.y}})}}class Qb extends vb{constructor(){super(),this.C={w:600,i:600},Ua(t=>{this.Fa=new sb(t),this.B=[],Lb(this)})}update(t){if(1!=this.I){if(1==this.ja)return this.Ib();this.B.forEach(a=>a.update(t));var a=I(this.ya.map),i=a.h;this.B.sort((t,a)=>{let i,e;return t.Ea?null==(i=t.Ea)?void 0:i.y:1/0-a.Ea?null==(e=a.Ea)?void 0:e.y:1/0}),this.B.forEach(t=>t.L(i)),a=P(a,Math.max(0,this.ka.s.x-this.C.w/2),Math.max(0,this.ka.s.y-this.C.i/2),this.C.w,this.C.i),this.canvas.fill("#88bfff"),this.canvas.h.drawImage(a,0,0),this.canvas.h.fillRect,this.S.forEach(t=>t.L(this.canvas.h)),this.M&&(this.B.forEach(t=>{t.P&&t.P(this.M)}),this.S.forEach(t=>{t.P&&t.P(this.M)}),this.M=null),this.time=t,requestAnimationFrame(t=>this.update(t))}}}function Rb(t){var a="THE FAMILIAR".split(""),i=G(64*a.length,k+4),e=0;for(let t in a){var s=J(a[t],k,"#fff",1.1,"cursive"),n=J(a[t],k,"#b90000",1.1,"cursive");i.h.drawImage(s,e+1,1),i.h.drawImage(n,e,0),e+=k}t.H={v:i,fb:128,gb:t.Ta,ha:0}}class Nb{constructor(t){this.F=t,this.la=new Fa(t),this.bb=J("BY MHMDJAWADZD",16,"#fff",1.5,"cursive"),this.Za=this.la.U[0],this.$a=Xa(this.Za),this.$a.h.drawImage(this.Za,1,1),this.canvas=G(t.C.w,t.C.i),$a(this.$a),this.ta=Ea(this.la),this.ab=this.ta.map(t=>Xa(t)),this.ab.forEach((t,a)=>t.h.drawImage(this.ta[a],1,1)),this.qb=this.ab.map(t=>$a(t)),this.nb=Ta(3*this.canvas.w,this.canvas.i),this.X=5,this.elements=[{m:x("🔥",32,1.3),c:"#ee4000c7",g:0,t:this.X},{m:x("💧",32,1.3),c:"#00c7eec7",g:10,t:this.X},{m:x("🌱",32,1.3),c:"#805a05c7",g:20,t:this.X},{m:x("🌪️",32,1.3),c:"#cdcf84c7",g:30,t:this.X},{m:x("⚡",32,1.3),c:"#f9ff30c7",g:40,t:this.X},{m:x("☀️",32,1.3),c:"#f8ff00c7",g:50,t:this.X},{m:x("🌑",32,1.3),c:"#a83bf3c7",g:60,t:this.X}],this.ga=Ra(4*k,"#fff",null,3),Ra(k/9,"#00f","#00f",3),t=this.canvas.i-this.ga.i/2-k;var a={x:this.canvas.w/2,y:t,r:this.ga.w/2};this.va=fa(a.x,a.y,a.r),this.ua=a,this.Ta=t-this.ga.i/2-k,this.N={ob:this.qb,current:0,frames:0,framerate:16,fb:64,gb:this.Ta},Rb(this)}L(t){t.h.drawImage(this.canvas,0,0)}update(){this.canvas.h.drawImage(this.nb,0,0,U(0,this.nb.w-this.canvas.w),this.canvas.i,0,0,this.canvas.w,this.canvas.i),this.canvas.h.drawImage(this.ga,this.ua.x-this.ga.w/2,this.ua.y-this.ga.i/2),this.canvas.h.drawImage(this.N.ob[this.N.current],this.ua.x-32,this.ua.y-32),this.N.frames++,this.N.frames>this.N.framerate&&(this.N.frames=0,this.N.current++,this.N.current>=this.N.ob.length&&(this.N.current=0)),this.canvas.h.drawImage(this.H.v,0,0,this.H.ha,this.H.v.i,this.H.fb,this.H.gb,this.H.ha,this.H.v.i),this.H.ha+=4,this.H.ha>this.H.v.w&&(this.H.ha=0),this.elements.forEach(t=>{var a=this.va[t.g%this.va.length];this.canvas.h.drawImage(t.m,a.x-t.m.w/2,a.y-t.m.i/2);var i=this.elements.filter(a=>a!=t)[U(this.elements.length-1)];i=this.va[i.g%this.va.length],this.canvas.h.save(),this.canvas.h.strokeStyle=t.c,this.canvas.h.lineWidth=2,this.canvas.h.beginPath(),this.canvas.h.moveTo(a.x,a.y),this.canvas.h.lineTo(i.x,i.y),this.canvas.h.stroke(),this.canvas.h.restore(),t.t--,0>=t.t&&(t.t=this.X,t.g++)}),this.canvas.h.drawImage(this.bb,0,this.canvas.i-this.bb.i)}}document.addEventListener("DOMContentLoaded",function(){window.F=new Qb},!1)</script>