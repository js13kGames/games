<!doctype html><title>Orbizoid - js13kGames 2012</title><style>*{font-family:"Trebuchet MS";color:#fc0}body{background-color:#000}.h{margin-left:10px;display:none}.s{font-size:12px;left:100px;border-right:2px solid #fc0}.c{font-size:24px}#m{position:absolute;top:75px;left:0}.i{font-size:24px;width:170px;line-height:40px;padding-bottom:5px;border:2px solid #fc0;border-radius:15px;text-align:center;background-color:rgba(255,220,0,.05);position:absolute;top:220px;transition-duration:.25s;-webkit-transition-duration:.25s}.i:hover{box-shadow:0 0 15px #fc0;background-color:rgba(255,220,0,.25);cursor:pointer}.t{font-size:100px;margin-left:280px}.st{font-size:32px;margin-left:424px;margin-top:-29px}#E{left:283px}#H{left:461px}.Cn{position:absolute;width:920px;top:0;line-height:600px;font-size:350px;text-align:center;transition-duration:.5s;-webkit-transition-duration:.5s;opacity:0;display:none}.in{display:block;opacity:1;font-size:250px}.ot{opacity:0;font-size:50px}#G{position:absolute;left:288px;top:340px;font-size:74px;font-weight:100;display:none}#S{position:absolute;top:72px;font-size:32px}#S a{font-size:18px;margin-left:14px}.mb{border:1px solid #fc0;position:absolute;left:0;top:-75px;width:920px;height:600px}#T{position:relative;width:920px;margin-left:auto;margin-right:auto}#C{position:absolute;top:0;left:0}#U{margin:0;position:absolute;top:0;left:0}</style><div id=T><canvas id=C></canvas><canvas id=U class=h></canvas><div id=m><div class=mb></div><div class=t>orbizoid</div><div class=st>catch the stars</div><div id=E class=i>easy</div><div id=H class=i>hard</div><div id=G>game over<div id=S>score: <span id=scoreValue>2345678</span> <a id=W target=_blank>Tweet score</a></div></div></div><div id=cd><div id=#3 class=Cn>3</div><div id=#2 class=Cn>2</div><div id=#1 class=Cn>1</div></div></div><script>function t(){this.setSettingsString=function(e){e=e.split(","),this.waveType=parseInt(e[0])||0,this.attackTime=parseFloat(e[1])||0,this.sustainTime=parseFloat(e[2])||0,this.sustainPunch=parseFloat(e[3])||0,this.decayTime=parseFloat(e[4])||0,this.startFrequency=parseFloat(e[5])||0,this.minFrequency=parseFloat(e[6])||0,this.slide=parseFloat(e[7])||0,this.deltaSlide=parseFloat(e[8])||0,this.vibratoDepth=parseFloat(e[9])||0,this.vibratoSpeed=parseFloat(e[10])||0,this.changeAmount=parseFloat(e[11])||0,this.changeSpeed=parseFloat(e[12])||0,this.squareDuty=parseFloat(e[13])||0,this.dutySweep=parseFloat(e[14])||0,this.repeatSpeed=parseFloat(e[15])||0,this.phaserOffset=parseFloat(e[16])||0,this.phaserSweep=parseFloat(e[17])||0,this.lpFilterCutoff=parseFloat(e[18])||0,this.lpFilterCutoffSweep=parseFloat(e[19])||0,this.lpFilterResonance=parseFloat(e[20])||0,this.hpFilterCutoff=parseFloat(e[21])||0,this.hpFilterCutoffSweep=parseFloat(e[22])||0,this.masterVolume=parseFloat(e[23])||0}}function o(){var l,z,h,c,d,p,f,i,u,m,_,G,B,Y,y,g,w,P,S,H,J,K,x,Q,E,Z,$,b,v,ee,F,T,L,k,te,C,U,D,j,R,ae,O,q,ie,N,oe,ne,I,re,A,X,M,W,V;this._params=new t,this._envelopeFullLength,this.reset=function(e){var t=this._params;if(w=100/(t.startFrequency*t.startFrequency+.001),S=100/(t.minFrequency*t.minFrequency+.001),H=1-t.slide*t.slide*t.slide*.01,J=-t.deltaSlide*t.deltaSlide*t.deltaSlide*1e-6,0==t.waveType&&(v=.5-.5*t.squareDuty,ee=5e-5*-t.dutySweep),Z=0<t.changeAmount?1-t.changeAmount*t.changeAmount*.9:1+t.changeAmount*t.changeAmount*10,$=0,b=1==t.changeSpeed?0:(1-t.changeSpeed)*(1-t.changeSpeed)*2e4+32,e){t.paramsDirty=!1,z=t.masterVolume*t.masterVolume,h=t.waveType,t.sustainTime<.01&&(t.sustainTime=.01),(e=t.attackTime+t.sustainTime+t.decayTime)<.18&&(t.attackTime*=e=.18/e,t.sustainTime*=e,t.decayTime*=e),Y=t.sustainPunch,y=0,K=t.minFrequency,j=1!=t.lpFilterCutoff||0!=t.hpFilterCutoff,O=R=0,q=t.lpFilterCutoff*t.lpFilterCutoff*t.lpFilterCutoff*.1,ie=1+1e-4*t.lpFilterCutoffSweep,N=1-(.8<(N=5/(1+t.lpFilterResonance*t.lpFilterResonance*20)*(.01+q))?.8:N),oe=1!=t.lpFilterCutoff,ne=0,I=t.hpFilterCutoff*t.hpFilterCutoff*.1,re=1+3e-4*t.hpFilterCutoffSweep,x=0,Q=t.vibratoSpeed*t.vibratoSpeed*.01,E=.5*t.vibratoDepth,p=d=c=0,u=t.sustainTime*t.sustainTime*1e5,m=t.decayTime*t.decayTime*1e5+10,f=i=t.attackTime*t.attackTime*1e5,this._envelopeFullLength=i+u+m,_=1/i,G=1/u,B=1/m,L=0!=t.phaserOffset||0!=t.phaserSweep,k=t.phaserOffset*t.phaserOffset*1020,t.phaserOffset<0&&(k=-k),te=t.phaserSweep*t.phaserSweep*t.phaserSweep*.2,U=0,D=D||new Array(1024),A=A||new Array(32);for(var a=0;a<1024;a++)D[a]=0;for(a=0;a<32;a++)A[a]=2*Math.random()-1;T=(F=0)==t.repeatSpeed?0:parseInt((1-t.repeatSpeed)*(1-t.repeatSpeed)*2e4)+32}},this.synthWave=function(e,t,a,i,o){i=i||44100,l=!1;for(var n=V=W=0;n<t;n++){if(l)return n;if(0!=T&&++F>=T&&(F=0,this.reset(!1)),0!=b&&++$>=b&&(b=0,w*=Z),(w*=H+=J)>S&&(w=S,0<K)&&(l=!0),P=w,0<E&&(x+=Q,P=w*(1+Math.sin(x)*E)),(P=parseInt(P))<8&&(P=8),0==h&&((v+=ee)<0?v=0:.5<v&&(v=.5)),++p>f)switch(p=0,++d){case 1:f=u;break;case 2:f=m}switch(d){case 0:c=p*_;break;case 1:c=1+2*(1-p*G)*Y;break;case 2:c=1-p*B;break;case 3:l=!(c=0)}L&&(k+=te,(C=parseInt(k))<0?C=-C:1023<C&&(C=1023)),j&&0!=re&&((I*=re)<1e-5?I=1e-5:.1<I&&(I=.1));for(var r=X=0;r<8;r++){if(++y>=P&&(y-=P,3==h))for(var s=0;s<32;s++)A[s]=2*Math.random()-1;switch(h){case 0:M=y/P<v?.5:-.5;break;case 1:M=1-y/P*2;break;case 2:M=(M=(g=.5<(g=y/P)?6.28318531*(g-1):6.28318531*g)<0?1.27323954*g+.405284735*g*g:1.27323954*g-.405284735*g*g)<0?.225*(M*-M-M)+M:.225*(M*M-M)+M;break;case 3:M=A[Math.abs(parseInt(32*y/parseInt(P)))]}j&&(ae=R,(q*=ie)<0?q=0:.1<q&&(q=.1),O=oe?(O+(M-R)*q)*N:(R=M,0),ne+=(R+=O)-ae,M=ne*=1-I),L&&(D[1023&U]=M,M+=D[U-C+1024&1023],U=U+1&1023),X+=M}1<(X=z*c*X*.125)?X=1:X<-1&&(X=-1),V+=X,W++,44100!=i&&2!=W||(V/=W,W=0,e[n]=parseInt(32e3*V),V=0)}return t}}function m(e){return document.getElementById(e)}o.prototype.getWave=function(e){var t=new Uint8Array([82,73,70,70,0,0,0,0,87,65,86,69,102,109,116,32,16,0,0,0,1,0,1,0,68,172,0,0,136,88,1,0,2,0,16,0,100,97,116,97,0,0,0,0]),a=(this._params.setSettingsString(e),this.reset(!0),this._envelopeFullLength=parseInt(this._envelopeFullLength),e=new Uint16Array(this._envelopeFullLength),this.synthWave(e,this._envelopeFullLength,!1)),i=2*a,o=((o=new Uint32Array(t.buffer))[1]=36+i,o[10]=i,new Blob([t.buffer,e.subarray(0,a-1).buffer],{type:"audio/wav"}));return(window.URL||window.webkitURL).createObjectURL(o)},window.SfxrSynth=o;var g,w,P,S,E=600,b=920,v=460,F=300,n=m("T"),T=(m("level"),m("C")),L=m("U"),k=T.cloneNode(0),C=T.getContext("2d"),U=L.getContext("2d"),D=k.getContext("2d"),R=64,l=[],h=[],O=Math.PI,Y=(navigator.platform.indexOf("iPad"),0<=navigator.userAgent.indexOf("Firefox")),H="createTouch"in document,N=Math.random,I=Math.cos,A=Math.sin,c=document.createElement("canvas"),f=c.getContext("2d");for(menuStyle=m("m").style,T.width=L.width=k.width=b,T.height=L.height=k.height=E,s=0;s<18;s++)l.push(A(O/9*s)),h.push(I(O/9*s));function X(){p=[{SC:100,D:!1,e:.5,w:15,o:1.4*O,d:100,s:0,x:T.width/2,y:T.height/2,c:0,rx:0,ry:0},{SC:200,D:!1,e:.4,w:10,o:O,d:70,s:.05,x:T.width/2,y:T.height/2,c:56,rx:0,ry:0},{SC:300,D:!1,e:.3,w:7,o:O/2,d:80,s:.075,x:T.width/2,y:T.height/2,c:118,rx:0,ry:0},{SC:400,D:!1,e:.2,w:10,o:O/3,d:40,s:.1,x:T.width/2,y:T.height/2,c:240,rx:0,ry:0},{SC:500,D:!1,e:.05,w:5,o:1.5*O,d:150,s:.2,x:T.width/2,y:T.height/2,c:290,rx:0,ry:0}];for(var e=0;p[e];e++)p[e].canvas=M(p[e],p[e].c);return p}function u(){for((g={P:{lv:3,LV:P=1,SC:0,hs:0|localStorage.getItem("hiscore"+w),pg:0,D:!1,x:T.width/2,y:T.height/2,w:25,doubleScore:0,c:"rgba(220,220,220,1)",c2:"rgba(220,220,220,.8)",powerupDuration:0,N:{sps:25,speedDecay:.2,w:25}},L:X(),E:[],F:{st:[{x:0,y:0,z:0,s:1}]},St:{np:1,orbit:2==w,numEnemy:2==w?7:5},EX:[],levels:[{m:10,s:2},{m:20,s:4},{m:30,s:5},{m:40,s:7},{m:80,s:10}],O:[],bonusChange:[],U:[]}).P.canvas=M(g.P,g.P.c),i=0;i<150;i++)g.F.st.push({x:N()*b*10-5*b,y:N()*E*10-5*E,z:100*N()});for(i=0;i<g.St.numEnemy;i++)V();var t=document.createElement("canvas"),a=t.getContext("2d"),o=(t.width=t.height=128,a.createRadialGradient(80,80,20,80,80,32));for(o.addColorStop(0,"rgba(255,220,0,.3)"),o.addColorStop(1,"rgba(255,220,0,0)"),a.fillStyle=o,a.fillRect(0,0,128,128),a.strokeStyle="rgba(255,220,0,.2)",a.fillStyle="rgba(255,220,0,.25)",a.arc(80,80,20,0,2*O),a.fill(),a.stroke(),(o=document.createElement("img")).src=t.toDataURL("image/png"),a.fillStyle="#FC0",a.font="bold 25px Trebuchet MS",a.fillText("2X",R,88),(n=document.createElement("img")).src=t.toDataURL("image/png"),g.O.push({r:0,x:250,y:250,c:n,p:10,duration:300,bs:0,start:function(){g.P.doubleScore=1},done:function(){g.P.doubleScore=0}}),t.width=t.width,a.drawImage(o,0,0),a.fillStyle="#FC0",a.font="bold 25px Trebuchet MS",a.fillText("-1",66,88),(n=document.createElement("img")).src=t.toDataURL("image/png"),g.O.push({r:0,x:350,y:250,c:n,p:3,duration:0,bs:0,start:function(){for(1<g.P.LV&&(g.P.LV--,g.St.np--),g.P.pg=0,P=1,e=0;g.E[e];e++)g.E[e].t>g.P.LV-1&&(g.E[e].D=1)},done:function(){}}),t.width=t.width,a.drawImage(o,0,0),a.fillStyle="#FC0",a.font="bold 25px Trebuchet MS",a.fillText("1k",66,88),(n=document.createElement("img")).src=t.toDataURL("image/png"),g.O.push({r:0,x:450,y:250,c:n,p:25,duration:0,bs:0,start:function(){g.P.SC+=1e3,P=1},done:function(){}}),t.width=t.width,a.drawImage(o,0,0),a.fillStyle="#FC0",a.font="bold 20px Trebuchet MS",a.fillText("1up",62,86),(n=document.createElement("img")).src=t.toDataURL("image/png"),g.O.push({r:0,x:550,y:250,c:n,p:2,duration:0,bs:0,start:function(){g.P.lv++,P=1},done:function(){}}),t.width=t.width,a.drawImage(o,0,0),a.beginPath(),a.strokeStyle="#FC0",d=2*O/8,a.lineWidth=3,i=0;i<8;i++)a.moveTo(R+4*A(d*i)+16,R+4*I(d*i)+16),a.lineTo(R+16*A(d*i)+16,R+16*I(d*i)+16);a.stroke();var n=document.createElement("img");n.src=t.toDataURL("image/png"),g.O.push({r:0,x:650,y:250,c:n,p:7,duration:0,bs:0,start:function(){for(G(fx[0]),i=0;g.E[i];i++)g.E[i].D=1},done:function(){}}),c.width=c.height=6,f.strokeStyle="rgba(255,220,0,.2)",f.moveTo(0,6),f.lineTo(6,0),f.stroke(),(pi=document.createElement("img")).src=c.toDataURL("image/png")}function M(e){var t=document.createElement("canvas"),a=t.getContext("2d"),i=(t.width=128,t.height=128,C.createRadialGradient(R,R,e.w,R,R,e.w+15));return e.c2?(i.addColorStop(0,"rgba(220,220,220,.3)"),i.addColorStop(1,"rgba(220,220,220,0)")):(i.addColorStop(0,"hsla("+e.c+",85%,75%,.3)"),i.addColorStop(1,"hsla("+e.c+",85%,75%,0)")),a.fillStyle=i,a.fillRect(R-e.w-15,R-e.w-15,R+e.w+15,R+e.w+15),a.beginPath(),e.c2?(a.fillStyle=e.c2,a.strokeStyle=e.c):(a.strokeStyle="hsla("+e.c+",50%, 50%,.9)",a.lineWidth=2,a.fillStyle="hsla("+e.c+",85%,75%,.6)"),a.arc(R,R,e.w,0,2*O,!1),a.fill(),a.stroke(),(i=document.createElement("img")).src=t.toDataURL("image/png"),i}function W(e,t,a,i){return Math.abs(Math.sqrt((a-e)*(a-e)+(i-t)*(i-t)))}function V(){var e=N()*b,t=N()*E,e=g.E.push({x:e<v?e-v:e+v,y:t<F?t-F:t+F,o:0,s:3*N()+1,t:N()*g.St.np|0})-1;g.E[e].d=Math.atan2(g.E[e].x-v,g.E[e].y-F),g.E[e].canvas=function(e){var t=document.createElement("canvas"),a=(t.width=128,t.height=128,t.getContext("2d")),i=O/5,o=C.createRadialGradient(R,R,12,R,R,33);for(o.addColorStop(0,"hsla("+e+",85%,75%,.2)"),o.addColorStop(1,"hsla("+e+",85%,75%,0)"),a.fillStyle=o,a.fillRect(31,31,97,97),a.beginPath(),a.strokeStyle="hsla("+e+",50%, 50%,.9)",a.fillStyle="hsla("+e+",85%,75%,.6)",p=0;p<10;p++)a.lineTo(A(p*i)*(p%2*12+6)+R,I(p*i)*(p%2*12+6)+R);return a.closePath(),a.fill(),a.stroke(),(o=document.createElement("img")).src=t.toDataURL("image/png"),o}(g.L[g.E[e].t].c)}m("E").onclick=function(){menuStyle.display="none",L.style.display="block",w=1,u(),_()},m("H").onclick=function(){menuStyle.display="none",L.style.display="block",w=2,u(),_()},L.style.cursor="none",H&&n.addEventListener("touchmove",function(e){g.P.D||(g.P.x=e.touches[0].pageX-n.offsetLeft,g.P.y=e.touches[0].pageY-n.offsetTop),e.preventDefault()},!1),L.onmousemove=function(e){g.P.D||(g.P.x=e.clientX-n.offsetLeft,g.P.y=e.clientY-n.offsetTop)},window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,16.666666666666668)};var z=!1;function _(){m("cd").style.display="block",m("#3").className+=" in",G(fx[2]),setTimeout(function(){m("#3").className+=" ot",m("#2").className+=" in",G(fx[2]),setTimeout(function(){m("#2").className+=" ot",m("#1").className+=" in",G(fx[2]),setTimeout(function(){m("#1").className+=" ot",setTimeout(function(){m("cd").style.display="none",m("#1").className=m("#2").className=m("#3").className="Cn",z=!0},500)},1e3)},1e3)},1e3)}var J=window.URL||window.webkitURL,K=new o;function G(e){if(Y)try{var t=K.getWave(e),a=new Audio;a.src=t,a.play(),a.addEventListener("ended",function(){J.revokeObjectURL(t)},!1)}catch(e){}}fx=["3,,0.1094,0.6292,0.3374,0.1949,,0.0785,,,,,,,,,,,1,,,,,0.5","1,,0.0202,,0.4455,0.4339,,0.2229,,,,,,,,0.5824,,,1,,,,,0.5","0,,0.1879,,0.0199,0.6026,0.0378,0.0361,-0.0057,,0.0417,0.0015,,0.1483,-0.0062,0.0134,,-0.0019,1,0.0293,0.0298,0.0375,-0.0627,0.5","0,,0.28,,,0.6026,0.0378,0.0361,-0.0057,,0.0417,0.0015,,0.1483,-0.0062,0.0134,,-0.0019,1,0.0293,0.0298,0.0375,-0.0627,0.5","3,,0.3382,0.3014,0.72,0.23,,-0.2046,,,,,0.15,,0.1,,-0.02,-0.7,1,0.04,,,0.06,0.5"];var B=new Date;u(),function e(){requestAnimFrame(e);for(var t=new Date,i=0;i<150;i++)g.F.st[i].z=g.F.st[i].z-.5,g.F.st[i].z<1&&(g.F.st[i].z=100),g.F.st[i].x2=.5+(g.F.st[i].x-v)/(2*g.F.st[i].z)+v|0,g.F.st[i].y2=.5+(g.F.st[i].y-F)/(2*g.F.st[i].z)+F|0,g.F.st[i].s=20/g.F.st[i].z;if(z){for(len=g.L.length,i=0;i<len;i++)g.P.D?g.L[i].D=1:(g.St.orbit&&(g.L[i].o+=g.L[i].s),g.L[i].o>2*O&&(g.L[i].o=0),g.L[i].x=g.L[i].x-(g.L[i].x-g.P.x)*g.L[i].e,g.L[i].y=g.L[i].y-(g.L[i].y-g.P.y)*g.L[i].e,g.L[i].rx=.5+g.L[i].x+A(g.L[i].o)*g.L[i].d|0,g.L[i].ry=.5+g.L[i].y+I(g.L[i].o)*g.L[i].d|0);for(len=g.E.length,i=0;i<len;i++)if(g.P.D)g.E[i].D=1;else{var o,n=Math.atan2(g.E[i].x-g.P.x,g.E[i].y-g.P.y);for(len2=g.E.length,j=0;j<len2;j++)if(i!=j&&W(g.E[i].x,g.E[i].y,g.E[j].x,g.E[j].y)<50){o=-Math.atan2(g.E[i].x-g.E[j].x,g.E[i].y-g.E[j].y);break}if(g.E[i].d-(n=o?(n+o)/2:n)>O&&(n<0?n+=2*O:n-=2*O),g.E[i].d=g.E[i].d-.1*(g.E[i].d-n),g.E[i].x+=-A(g.E[i].d)*g.E[i].s,g.E[i].y+=-I(g.E[i].d)*g.E[i].s,!g.E[i].D){for(j=0;j<g.St.np;j++)if(g.E[i].t==j&&W(g.E[i].x,g.E[i].y,g.L[j].rx,g.L[j].ry)<20+g.L[j].w){g.E[i].D=1,G(fx[0]);var s=N()+250*N();for(B=0,lenq=g.O.length,q=0;q<lenq;q++)if(s<(B+=g.O[q].p)){g.U.push({bs:0,taken:0,x:g.E[i].x,y:g.E[i].y,t:q,r:0,l:180,D:0});break}g.P.pg++,g.P.SC+=g.L[j].SC,1==g.P.doubleScore&&(g.P.SC+=g.L[j].SC),g.P.SC>g.P.hs&&(g.P.hs=g.P.SC),P=1}g.P.pg==g.levels[g.P.LV-1].m&&g.P.LV<5&&(g.St.np++,g.P.LV++,g.P.pg=0,P=1),W(g.E[i].x,g.E[i].y,g.P.x,g.P.y)<40&&(G(fx[4]),g.P.D=1,g.U=[],g.P.lv--,localStorage.setItem("hiscore"+w,g.P.hs),g.P.N.w=g.P.w,g.P.N.sps=25,g.P.pg=0,P=1)}}for(i=g.EX.length-1;0<=i;i--)--g.EX[i].o,0==g.EX[i].o&&(g.EX.splice(i,1),g.P.D||V());if(g.P.D&&(g.P.N.w+=g.P.N.sps,g.P.N.sps-=g.P.N.speedDecay,g.P.N.sps<=0))if(g.P.N={sps:25,speedDecay:.2,w:25},z=!1,g.P.D=0,g.P.pg=0,g.P.powerupDuration=0,P=1,0<g.P.lv){for(g.E=[],g.L=X(),i=0;i<g.St.numEnemy;i++)V();_()}else m("G").style.display="block",m("scoreValue").innerHTML=g.P.SC,m("W").href="https://twitter.com/intent/tweet?text=I%20just%20scored%20"+g.P.SC+"%20points%20on%20%23orbizoid.%20A%20game%20in%20the%20%23js13kgames%20contest%20by%20%40sorskoot.%20Play%20it%20at%20http://js13kgames.com/entries/",menuStyle.display="block",L.style.display="none";for(i=0;g.U[i];i++)g.U[i].r+=.1,g.U[i].r>2*O&&(g.U[i].r=0),0==g.U[i].taken&&g.U[i].l--,g.U[i].l<=0&&(g.U[i].D=1);for(i=g.U.length-1;0<=i;i--)g.U[i].D&&g.U.splice(i,1);for(i=g.U.length-1;0<=i;i--)g.U[i].taken?0<g.U[i].bs?g.U[i].bs--:(g.O[g.U[i].t].done(),g.U.splice(i,1),P=1):W(g.P.x,g.P.y,g.U[i].x+16,g.U[i].y+16)<40&&(G(fx[1]),g.O[g.U[i].t].start(),g.U[i].taken=1,g.U[i].x=-100,g.U[i].y=-100,0<g.O[g.U[i].t].duration)&&(g.U[i].bs=g.O[g.U[i].t].duration);for(i=g.E.length-1;0<=i;i--)g.E[i].D&&(d=g.EX.push(g.E[i]),g.EX[d-1].o=10,g.E.splice(i,1));for(i=g.L.length-1;0<=i;i--)g.L[i].D&&(d=g.EX.push({x:g.L[i].rx,y:g.L[i].ry,t:g.L[i].c/72}),g.EX[d-1].o=10,g.L.splice(i,1))}for(var l=new Date;25<1e3/(l-B);)l=new Date;if(P){S=S||U.createPattern(pi,"repeat"),L.width=L.width,U.strokeStyle="rgba(255,220,0,.5)",U.beginPath(),U.lineWidth=1;for(var h=O/g.levels[g.P.LV-1].m,c=0;c<2*g.levels[g.P.LV-1].m;c+=2)U.moveTo(60+50*A(h*c),60+50*I(h*c)),U.lineTo(60+50*A(h*c),60+50*I(h*c)),U.lineTo(60+50*A(h*(c+1)),60+50*I(h*(c+1))),U.lineTo(60+30*A(h*(c+1)),60+30*I(h*(c+1))),U.lineTo(60+30*A(h*c),60+30*I(h*c)),U.closePath();for(U.stroke(),U.strokeStyle="#FC0",U.fillStyle=S,U.shadowOffsetX=0,U.shadowOffsetY=0,U.shadowBlur=3,U.shadowColor="rgba(255,220,0,.5)",U.lineWidth=2,U.beginPath(),U.moveTo(0,120),U.lineTo(100,120),U.lineTo(150,34),U.lineTo(b,34),U.lineTo(b,0),U.lineTo(0,0),U.closePath(),U.fill(),U.stroke(),U.beginPath(),U.moveTo(0,590),U.lineTo(800,590),U.lineTo(820,575),U.lineTo(b,575),U.lineTo(b,600),U.lineTo(0,600),U.closePath(),U.fill(),U.stroke(),U.moveTo(0,120),U.lineTo(0,590),U.moveTo(b,34),U.lineTo(b,590),U.stroke(),U.fillStyle="rgba(255,220,0,1)",U.font="normal 40px Trebuchet MS",U.fillText(g.P.LV,50,75),U.font="normal 24px Trebuchet MS",U.fillText("lives |"+g.P.lv,150,24),U.fillText("score |"+g.P.SC,390,24),U.fillText("hi-score |"+g.P.hs,720,24),U.fillStyle="rgba(255,220,0,.61)",U.fillText("orbizoid",820,595),U.beginPath(),U.lineWidth=2,c=0;c<2*g.P.pg;c+=2)U.moveTo(60+50*A(h*c),60+50*I(h*c)),U.lineTo(60+50*A(h*c),60+50*I(h*c)),U.lineTo(60+50*A(h*(c+1)),60+50*I(h*(c+1))),U.lineTo(60+30*A(h*(c+1)),60+30*I(h*(c+1))),U.lineTo(60+30*A(h*c),60+30*I(h*c)),U.closePath();U.fill(),U.stroke(),P=0}for(B=t,k.width=k.width,D.fillStyle="rgba(155,155,255,.5)",p=0;p<150;p++)D.beginPath(),D.arc(g.F.st[p].x2,g.F.st[p].y2,g.F.st[p].s,0,2*O),D.fill();if(z){for(D.globalCompositeOperation="lighter",g.P.D?(t=1-g.P.N.w/350,D.beginPath(),D.lineWidth=40,D.strokeStyle="hsla(212, 100%, 72%,"+.25*t+")",D.arc(g.P.x,g.P.y,g.P.N.w,0,2*O),D.stroke(),D.beginPath(),D.lineWidth=15,D.strokeStyle="hsla(212, 100%, 72%,"+.5*t+")",D.arc(g.P.x,g.P.y,g.P.N.w,0,2*O),D.stroke(),D.lineWidth=5,D.strokeStyle="hsla(212, 100%, 72%,"+.75*t+")",D.arc(g.P.x,g.P.y,g.P.N.w,0,2*O),D.stroke(),D.lineWidth=1,D.strokeStyle="hsla(212, 100%, 72%,"+t+")",D.arc(g.P.x,g.P.y,g.P.N.w,0,2*O),D.stroke(),D.strokeStyle="hsla(212, 100%, 72%,"+t+")",D.moveTo(0,g.P.y),D.lineTo(b,g.P.y),D.moveTo(g.P.x,0),D.lineTo(g.P.x,E),D.stroke()):D.drawImage(g.P.canvas,g.P.x-R,g.P.y-R),len=g.U.length,j=0;j<len;j++)if(!g.U[j].taken){D.drawImage(g.O[g.U[j].t].c,g.U[j].x-R,g.U[j].y-R),D.beginPath(),D.lineWidth=3,r=I(g.U[j].r)/8+.32*O,D.strokeStyle="rgba(255,220,0,.5)";for(var p=0;p<2*O;p+=.1)x=g.U[j].x+16-8*A(p)*A(r*O)+48*I(p)*I(r*O),y=g.U[j].y+16+48*I(p)*A(r*O)+8*A(p)*I(r*O),0==p?D.moveTo(x,y):D.lineTo(x,y);D.closePath(),D.stroke()}for(len=g.L.length,p=0;p<g.P.LV&&p<len;p++)D.drawImage(g.L[p].canvas,g.L[p].rx-R,g.L[p].ry-R);for(len=g.E.length,p=0;p<len;p++)g.E[p].D||D.drawImage(g.E[p].canvas,g.E[p].x-R,g.E[p].y-R);for(len=g.EX.length,p=0;p<len;p++){var f=10-g.EX[p].o,u=g.EX[p].o;for(a=3;1<=a;a--){for(D.beginPath(),D.strokeStyle="hsla("+72*g.EX[p].t+",50%, 50%,"+u/10/a+")",D.lineWidth=8*(a-1)+1,j=0;j<18;j++)D.moveTo(A(O/9*j)*(3+f)*25+g.EX[p].x,I(O/9*j)*(3+f)*25+g.EX[p].y),D.lineTo(A(O/9*j)*f*25+g.EX[p].x,I(O/9*j)*f*25+g.EX[p].y);D.stroke()}}}T.width=T.width,C.drawImage(k,0,0)}()</script>