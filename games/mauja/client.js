function Lake(){this.scale=app.size.x/1964,this.position=new Vector(0,550),this.speed=.04}function MountainBack(){this.sc=app.size.x/1964,this.sh=120}function MountainFront(){this.scale=app.size.x/1860,this.position=new Vector(0,370),this.speed=.04}function MountainMid(){this.scale=app.size.x/1599,this.position=new Vector(0,270),this.speed=.005}function Sun(){this.position=new Vector,this.angle=Math.PI,this.speed=.001,this.day=!0,this.part=Math.cos(this.angle)}function Ball(){this.isReadyToStart=!0,this.isDead=!1,this.r=10,this.mass=.2,this.speedLimit=10+.2*(this.r-10),this.insideSnow=5,this.last=1,this.onGround=!1,this.position=new Vector(200,400),this.velocity=new Vector(0,0),this.acceleration=new Vector,this.shadowAngle=0,this.angle=0,this.aVelocity=0,this.aAcceleration=0,this.startTime=(new Date).getTime(),this.deadTime=0}function Decoration(){this.list=[]}function House(t){this.position=t,this.back=!1}function Tree(t){this.position=t,this.back=Math.random()<.5}function Gravity(){this.gravity=new Vector(0,.8)}function Glade(t){var l=[1400,2e3],i=parseInt(50+100*Math.random()),e=l[0]+Math.floor(Math.random()*(l[1]-l[0]));this.from=t.to.get(),this.to=new Vector(this.from.x+e,this.from.y+i),this.c1=this.from.get().add(this.from.get().sub(t.c2).normalize().mult(.45*e)),this.c2=this.to.get().sub(new Vector(e/2,0)),this.bound(),this.addDecoration()}function Hill(t){var l=[1500,3e3],i=parseInt(300+500*Math.random()),e=l[0]+Math.floor(Math.random()*(l[1]-l[0]));this.from=t.to.get(),this.to=new Vector(this.from.x+e,this.from.y+i),this.c1=this.from.get().add(this.from.get().sub(t.c2).normalize().mult(.45*e)),this.c2=this.to.get().sub(new Vector(e*(.3+.2*Math.random()),0)),this.bound(),this.addDecoration()}function Hills(){this.momentAmount=6,this.toEnd=3e3,this.list=[],this.points=[],this.start={to:new Vector(-500,200),c2:new Vector(-400,200)},this.color="#E8EFEE"}function StartHill(){this.from=new Vector(-300,200),this.to=new Vector(2e3,700),this.c1=new Vector(1e3,200),this.c2=new Vector(1e3,700),this.bound(),this.addDecoration()}function Bear(t){this.position=new Vector(app.hills.points[t].position.x,app.hills.points[t].position.y),this.r=30,this.halfWidth=52,this.angle=app.hills.points[t].normal.angle()+Math.PI/2}function Fox(t,l){this.position=new Vector(app.hills.points[t].position.x,app.hills.points[t].position.y),this.r=30,this.halfWidth=56,this.shiftY=l||0,this.angle=app.hills.points[t].normal.angle()+Math.PI/2}function Girl(t){this.position=new Vector(app.hills.points[t].position.x,app.hills.points[t].position.y),this.r=30,this.halfWidth=25}function Objects(){this.list=[]}function Rock(t){this.position=new Vector(app.hills.points[t].position.x,app.hills.points[t].position.y),this.r=50,this.halfWidth=62,this.angle=app.hills.points[t].normal.angle()+Math.PI/2}function Particle(t,l,i,e,s,o){this.isActive=!0,this.mass=t,this.r=l,this.position=i.get(),this.velocity=e.get(),this.acceleration=new Vector,this.startTime=(new Date).getTime(),this.lifeTime=s,this.color=o}function Particles(){this.list=[]}function Camera(){this.shift=new Vector(.12*app.size.x,app.size.y/ratio*.5),this.position=new Vector,this.outPosition=new Vector,this.velocity=new Vector,this.acceleration=new Vector}function Scene(){this.camera=new Camera,this.mb=new MountainBack,this.mm=new MountainMid,this.mf=new MountainFront,this.lake=new Lake,this.sun=new Sun}function Trampoline(t,l){this.HEIGHT=45,this.WIDTH=90,this.position=t.get(),this.normal=app.hills.points[l].normal.get(),this.angle=this.normal.angle()+Math.PI/2,this.points=[],this.bound(),app.particles.addDrop(this.position.get().add(new Vector(this.WIDTH/2,-this.HEIGHT/2)),100,20)}function Trampolines(){this.list=[]}function distance(t,l){return t.from.get().mult(Math.pow(1-l,3)).add(t.c1.get().mult(3*l*Math.pow(1-l,2))).add(t.c2.get().mult(3*Math.pow(l,2)*(1-l))).add(t.to.get().mult(Math.pow(l,3)))}function Vector(t,l){this.x=t||0,this.y=l||0}!function(t){function l(){app.canvas=t.getElementById("app"),window.ctx=app.canvas.getContext("2d"),window.l=ctx.lineTo.bind(ctx),window.m=ctx.moveTo.bind(ctx),window.bp=ctx.beginPath.bind(ctx),window.cp=ctx.closePath.bind(ctx),window.res={x:1280,y:800},app.size={x:window.innerWidth,y:window.innerHeight},window.ratio=app.size.x/res.x,app.canvas.width=app.size.x,app.canvas.height=app.size.y,app.gravity=(new Gravity).gravity,app.scene=new Scene,app.trampolines=new Trampolines,app.objects=new Objects,app.hills=new Hills,app.ball=new Ball,app.particles=new Particles,app.decoration=new Decoration,app.hills.generate(),e(),t.addEventListener("mousedown",function(t){app.ball.isDead?i():app.ball.isReadyToStart?app.ball.activate():app.trampolines.add(t.screenX/ratio)}),t.addEventListener("touchstart",function(t){t.preventDefault(),app.ball.isDead?i():app.ball.isReadyToStart?app.ball.activate():app.trampolines.add(t.touches[0].screenX/ratio)})}function i(){app.scene.camera.reset(),app.ball.reset(),app.hills.reset(),app.trampolines.reset(),app.objects.reset(),app.particles.reset(),app.decoration.reset(),app.hills.generate()}function e(){s(),o(),requestAnimationFrame(e)}function s(){window.night=!app.scene.sun.day&&Math.abs(app.scene.sun.part)>=.8?(1-Math.abs(app.scene.sun.part))/.2:app.scene.sun.day?0:1,window.sunset=Math.abs(app.scene.sun.part)>.8?(Math.abs(app.scene.sun.part)-.8)/.2:0,app.scene.next()}function o(){app.scene.render()}function c(){app.size.x=window.innerWidth,app.size.y=window.innerHeight,app.canvas.width=app.size.x,app.canvas.height=app.size.y}window.app={nColor:"rgb(21, 30, 30)"},window.onload=l,window.onresize=c}(document),Lake.prototype={next:function(){this.scale=app.size.x/1964,this.position.sub(new Vector(this.speed*app.ball.velocity.x,0)),this.position.x<=-app.size.x&&(this.position.x=0)},r:function(){var t;for(t=0;t<2;t++)ctx.save(),ctx.translate(this.position.x+t*app.size.x,this.position.y),ctx.scale(this.scale,this.scale),ctx.miterLimit=4,ctx.fillStyle="#B2CED6",bp(),m(0,0),l(211,0),l(127.5,26),l(1286.518,26),l(1185,0),l(1964,0),l(1964,792),l(0,793),l(0,0),cp(),ctx.fill(),ctx.restore()}},MountainBack.prototype={next:function(){this.sc=app.size.x/1964},r:function(){ctx.save(),ctx.translate(0,this.sh),ctx.scale(this.sc,this.sc),ctx.strokeStyle="rgba(0,0,0,0)",ctx.miterLimit=4,ctx.fillStyle="#BED8D8",bp(),m(535,183),l(530,162),l(522,189),l(518,175),l(511,200),l(503,205),l(466,180),l(411,219),l(406,202),l(399,227),l(353,259),l(330,244),l(319,206),l(312,232),l(287,215),l(278,182),l(271,201),l(263,172),l(257,195),l(212,165),l(176,191),l(73,122),l(0,174),l(0,1285),l(1964,1284),l(1964,157),l(1922,186),l(1915,158),l(1903,199),l(1900,201),l(1894,174),l(1882,214),l(1874,219),l(1847,201),l(1837,166),l(1829,189),l(1777,154),l(1729,188),l(1721,158),l(1713,180),l(1711,179),l(1703,148),l(1695,169),l(1644,134),l(1586,175),l(1581,158),l(1575,176),l(1567,154),l(1556,193),l(1548,163),l(1535,206),l(1527,174),l(1520,201),l(1510,195),l(1503,166),l(1496,185),l(1466,165),l(1411,204),l(1403,174),l(1389,219),l(1355,243),l(1246,134),l(1208,173),l(1182,147),l(1182,147),l(1160,80),l(1151,108),l(1135,55),l(1124,89),l(1111,74),l(1110,74),l(1108,72),l(1104,73),l(1102,71),l(1105,69),l(1105,67),l(1102,67),l(1101,65),l(1101,65),l(1102,62),l(1100,60),l(1097,60),l(1092,57),l(1092,48),l(1088,50),l(1088,47),l(1083,47),l(1083,45),l(1081,45),l(1078,45),l(1068,52),l(1067,52),l(1060,52),l(1060,54),l(1058,57),l(1056,57),l(1056,50),l(1049,52),l(1046,57),l(1044,58),l(1044,68),l(1040,71),l(1040,71),l(1038,69),l(1034,72),l(1035,57),l(1042,55),l(1042,45),l(1050,42),l(1040,38),l(1008,0),l(1001,0),l(970,38),l(958,43),l(972,48),l(972,52),l(976,58),l(972,63),l(972,76),l(972,78),l(972,84),l(965,93),l(963,106),l(962,109),l(961,111),l(950,80),l(939,124),l(934,138),l(888,184),l(821,117),l(759,179),l(748,149),l(733,205),l(705,233),l(684,218),l(675,186),l(667,206),l(658,172),l(651,196),l(582,150),l(535,183),cp(),m(535,183),m(546,175),l(546,175),l(546,175),l(546,175),cp(),m(1033,43),l(1040,45),l(1040,49),l(1033,47),l(1033,43),cp(),m(1019,37),l(1020,42),l(1016,40),l(1016,36),l(1019,37),cp(),m(991,33),l(999,30),l(999,36),l(991,38),l(991,33),cp(),m(988,35),l(990,34),l(990,38),l(988,40),l(988,35),cp(),m(984,37),l(987,35),l(987,40),l(984,41),l(984,37),cp(),m(984,43),l(986,42),l(986,46),l(984,48),l(984,43),cp(),m(979,39),l(982,38),l(982,43),l(979,43),l(979,39),cp(),m(976,49),l(973,51),l(973,47);l(977,46),l(976,49),cp(),m(978,44),l(975,45),l(975,41),l(978,40),l(978,44),cp(),m(983,48),l(979,49),l(979,45),l(983,44),l(983,48),cp(),m(990,79),l(984,81),l(984,71),l(990,69),l(990,79),cp(),m(988,46),l(988,42),l(992,41),l(992,44),l(988,46),cp(),m(993,44),l(993,40),l(1001,37),l(1001,42),l(993,44),cp(),m(1002,30),l(1010,34),l(1010,39),l(1002,36),l(1002,30),cp(),m(1003,40),l(1002,37),l(1010,40),l(1010,44),l(1003,40),cp(),m(1014,36),l(1015,40),l(1012,39),l(1011,34),l(1014,36),cp(),m(1018,47),l(1015,45),l(1012,44),l(1012,40),l(1018,43),l(1018,47),cp(),m(1020,47),l(1020,43),l(1023,45),l(1023,48),l(1020,47),cp(),m(1022,42),l(1021,38),l(1024,39),l(1024,43),l(1022,42),cp(),m(1029,50),l(1026,49),l(1025,45),l(1029,47),l(1029,50),l(1029,50),cp(),m(1026,44),l(1026,39),l(1028,41),l(1029,45),l(1026,44),cp(),m(1029,41),l(1032,42),l(1032,46),l(1029,45),l(1029,41),cp(),m(1033,52),l(1033,51),l(1030,50),l(1030,47),l(1032,48),l(1033,52),l(1033,52),cp(),m(1033,48),l(1040,51),l(1040,54),l(1033,52),l(1033,48),cp(),ctx.fill(),ctx.stroke(),ctx.restore()}},MountainFront.prototype={next:function(){this.scale=app.size.x/1860,this.position.sub(new Vector(this.speed*app.ball.velocity.x,0)),this.position.x<=-app.size.x&&(this.position.x=0)},r:function(){var t;for(t=0;t<2;t++)ctx.save(),ctx.translate(this.position.x+t*app.size.x,this.position.y),ctx.scale(this.scale,this.scale),ctx.strokeStyle="rgba(0,0,0,0)",ctx.miterLimit=4,ctx.fillStyle="#A6C0CC",ctx.beginPath(),m(1668,0),l(1523,83),l(1443,42),l(1270,145),l(1230,122),l(1231,122),l(1231,89),l(1256,89),l(1200,55),l(1159,80),l(1049,16),l(857,130),l(661,15),l(441,147),l(233,25),l(156,72),l(127,53),l(112,62),l(112,58),l(114,58),l(114,56),l(108,56),l(110,45),l(106,36),l(107,43),l(105,50),l(107,56),l(102,56),l(102,58),l(103,58),l(103,67),l(83,80),l(93,80),l(93,109),l(45,137),l(0,113),l(0,1050),l(1860,1049),l(1860,111),l(1668,0),cp(),m(1209,101),l(1197,101),l(1197,92),l(1209,92),l(1209,101),cp(),ctx.fill(),ctx.stroke(),ctx.restore()}},MountainMid.prototype={next:function(){this.scale=app.size.x/1599,this.position.sub(new Vector(this.speed*app.ball.velocity.x,0)),this.position.x<=-app.size.x&&(this.position.x=0)},r:function(){var t;for(t=0;t<2;t++)ctx.save(),ctx.translate(this.position.x+t*app.size.x,this.position.y),ctx.scale(this.scale,this.scale),ctx.strokeStyle="rgba(0,0,0,0)",ctx.miterLimit=4,ctx.fillStyle="#B2CED6",bp(),m(1561,86),l(1550,54),l(1543,75),l(1533,69),l(1532,69),l(1525,38),l(1518,61),l(1449,22),l(1391,57),l(1381,29),l(1370,70),l(1343,87),l(1285,55),l(1222,94),l(1210,63),l(1204,88),l(1197,69),l(1184,117),l(1178,121),l(1168,94),l(1158,133),l(1147,140),l(1116,123),l(1103,79),l(1092,109),l(1019,68),l(978,93),l(969,69),l(961,104),l(947,112),l(896,83),l(879,25),l(867,59),l(854,10),l(843,53),l(750,0),l(657,57),l(646,25),l(634,72),l(625,77),l(613,43),l(600,93),l(580,105),l(570,76),l(561,104),l(547,95),l(534,48),l(522,82),l(419,23),l(365,56),l(355,26),l(344,69),l(318,85),l(304,48),l(289,103),l(274,112),l(227,86),l(181,114),l(81,58),l(34,87),l(22,53),l(9,102),l(0,108),l(0,1193),l(1599,1193),l(1599,108),l(1561,86),cp(),m(1203,79),ctx.fill(),ctx.stroke(),ctx.restore()}},Sun.prototype={next:function(){this.angle+=this.speed,this.angle>2*Math.PI&&(this.angle-=2*Math.PI),this.part=Math.cos(this.angle),this.day=this.angle>=Math.PI&&this.angle<=2*Math.PI,this.position.apply(new Vector(app.size.x/2+.8*app.size.x/2*Math.cos(this.angle),300+250*Math.sin(this.angle))),this.moonPosition=new Vector(app.size.x/2+.8*app.size.x/2*Math.cos(this.angle+Math.PI),300+250*Math.sin(this.angle+Math.PI))},render:function(){ctx.save(),ctx.translate(this.position.x,this.position.y),ctx.scale(ratio,ratio),ctx.fillStyle="rgb(253, 214, 49)",ctx.arc(0,0,30,0,2*Math.PI),ctx.fill(),ctx.restore(),ctx.save(),ctx.translate(this.moonPosition.x,this.moonPosition.y),ctx.scale(ratio,ratio),ctx.miterLimit=4,ctx.fillStyle="#FCFC65",bp(),m(68,55),ctx.bezierCurveTo(45,58,25,42,23,19),ctx.bezierCurveTo(22,12,23,6,26,0),ctx.bezierCurveTo(9,5,-1,22,0,41),ctx.bezierCurveTo(2,62,22,78,43,76),ctx.bezierCurveTo(57,74,68,66,74,54),ctx.bezierCurveTo(72,55,70,55,68,55),cp(),ctx.fill(),ctx.restore()}},Ball.prototype={reset:function(){this.r=10,this.mass=.2,this.speedLimit=10+.2*(this.r-10),this.last=1,this.onGround=!1,this.isDead=!1,this.isReadyToStart=!0,this.position=new Vector(200,400),this.velocity=new Vector(0,0)},activate:function(){this.position=new Vector(230,210),this.velocity=new Vector(8,-8),this.isReadyToStart=!1},deactivate:function(){},next:function(){var t;this.isDead||this.isReadyToStart||(this.speedLimit=10+.2*(this.r-10),t=this.calculateFriction(),this.acceleration.add(t),this.acceleration.add(app.gravity.get().mult(this.mass)),this.velocity.add(this.acceleration),this.itemCollision(),this.collision(),this.onGround?this.aAcceleration=this.velocity.mag()/(2*this.r*Math.PI)*(2*Math.PI):this.aAcceleration=this.aAcceleration<=0?0:this.aAcceleration-.001,this.aVelocity=this.aAcceleration,this.angle+=this.aVelocity,this.velocity.mag()>this.speedLimit&&this.velocity.div(this.velocity.mag()).mult(this.speedLimit),this.position.add(this.velocity),this.acceleration.mult(0),app.particles.addForce(this.position,this.r,this.velocity.mag()),this.r=this.r>=70?70:this.r+.01,this.mass=.2+this.r/700,this.shadowAngle=app.scene.sun.position.get().sub(this.position.get().add(app.scene.camera.outPosition)).angle()+1)},calculateFriction:function(){return this.velocity.get().normalize().mult(-.015)},checkTrampoline:function(){var t=!1;return app.trampolines.list.forEach(function(l){l.points[0].position.x<=this.position.x&&l.points[1].position.x>=this.position.x&&(t=l)}.bind(this)),t},itemCollision:function(){app.objects.list.forEach(function(t){t.position.distance(this.position)<=t.r+this.r&&(this.isDead=!0,this.deadTime=(new Date).getTime(),app.particles.addRockCollision(this.position,this.r,100),this.velocity.apply(new Vector),this.deactivate())}.bind(this))},collision:function(){for(var t,l,i,e,s,o,c=!1,n=this.last,p=app.hills.points,a=this.checkTrampoline();!c;)this.position.x<p[n-1].position.x&&!a?(this.last--,n=this.last):this.position.x>p[n-1].position.x&&this.position.x<=p[n].position.x||a?(c=!0,this.last=n,a?(l=a.points[0].position.get(),i=a.points[1].position.get()):(l=(new Vector).apply(p[n-1].position),i=(new Vector).apply(p[n].position)),(l.y-this.position.y<=this.r+3||i.y-this.position.y<=this.r+3)&&(e=new Vector((l.x+i.x)/2,(l.y+i.y)/2),o=Math.abs((i.y-l.y)*this.position.x-(i.x-l.x)*this.position.y+i.x*l.y-i.y*l.x)/Math.sqrt(Math.pow(i.x-l.x,2)+Math.pow(i.y-l.y,2)),this.onGround=o<=this.r,o<=this.r-this.insideSnow&&(t=i.normal(e),t.angle(this.velocity.get().normalize())>Math.abs(Math.PI/2)&&(s=this.velocity.get().sub(t.get().mult(1.3*this.velocity.get().dot(t))),this.velocity.y>9&&app.particles.addDrop(this.position.get().add(new Vector(0,this.r)),this.r,30),a?this.velocity.apply(i.get().sub(l).normalize().mult(1.01*app.ball.velocity.mag())):this.velocity.apply(s))))):n++},render:function(){this.isDead||this.isReadyToStart||(ctx.save(),ctx.translate(this.position.x,this.position.y),ctx.rotate(this.shadowAngle),ctx.scale(this.r/58,this.r/58),ctx.miterLimit=4,ctx.fillStyle="#E8EFEE",bp(),ctx.arc(0,0,58,0,2*Math.PI),cp(),ctx.fill(),ctx.fillStyle="#9BC3C9",bp(),m(16.111-59,18.398-59),l(-43.124,18.651-59),ctx.bezierCurveTo(-43.048,-40.43,-42.966,-40.506,16.111-59,-40.587),l(16.111-59,18.398-59),cp(),ctx.fill(),bp(),m(-49.657,-31.98),ctx.bezierCurveTo(-55.569,-22.805,-59,47.12-59,-59,58.846-59),ctx.bezierCurveTo(-59,32.339,-32.659,58.679,58.833-59,58.679),ctx.bezierCurveTo(16.842,58.679,32.157,51.452,101.898-59,98.912-59),l(54.666-59,105.346-59),l(-19,95.346-59),l(-45,79.16-59),l(-50.667,43.346-59),l(-42.89,-40.587),ctx.bezierCurveTo(-42.967,-40.506,-43.048,-40.431,-43.125,18.651-59),l(-43.311,-40.149),ctx.bezierCurveTo(-44.808,-38.535,-46.219,-36.839,11.471-59,-35.064),ctx.bezierCurveTo(-48.269,-34.06,-48.979,-33.032,-49.657,-31.98),cp(),ctx.fill(),ctx.restore(),ctx.save(),ctx.translate(this.position.x,this.position.y),ctx.scale(this.r/58,this.r/58),ctx.rotate(this.angle),ctx.miterLimit=4,ctx.fillStyle="#9BC3C9",bp(),m(58.235,65.775-59),l(103.88-59,23.735),l(32.64,48.831),l(32.64,107.895-59),ctx.bezierCurveTo(40.64,102.353-59,106.936-59,35.598,111.716-59,84.938-59),ctx.bezierCurveTo(55.78,78.743-59,57.465,72.269-59,58.235,65.775-59),cp(),ctx.fill(),bp(),m(69.169-59,87.373-59),l(52.163-59,91.204-59),l(40.121-59,29.512),l(-40.542,73.97-59),l(-45.326,-21.884),l(11.639-59,80.245-59),l(-29.666,86.144-59),l(52.894-59,95.853-59),l(69.169-59,87.373-59),cp(),ctx.fill(),bp(),m(94.784-59,-21.6),l(63.655-59,13.898-59),l(-22.597,8.258-59),l(56.326-59,-53.822),l(11.878,-49.421),l(22.893,-34.579),l(94.784-59,-21.6),cp(),ctx.fill(),bp(),m(-9.125,102.751-59),l(77.383-59,95.85-59),l(-9.863,109.323-59),l(-27.361,38.732),l(-9.125,102.751-59),cp(),ctx.fill(),ctx.restore(),ctx.save(),ctx.globalAlpha=night,ctx.translate(this.position.x,this.position.y),ctx.scale(this.r/58,this.r/58),ctx.fillStyle="rgb(21, 30, 30)",bp(),ctx.arc(0,0,59,0,2*Math.PI),cp(),ctx.fill(),ctx.restore())}},Decoration.prototype={reset:function(){this.list.length=0},add:function(t,l,i){l?this.list.push(new House(t.add(new Vector(0,i||100+100*Math.random())))):this.list.push(new Tree(t.add(new Vector(0,i||300*Math.random()-150))))},addObj:function(t){this.list.push(t)},next:function(){var t=[];this.list.forEach(function(l){l.position.x+app.scene.camera.outPosition.x<-300&&t.push(l)}.bind(this)),t.forEach(function(t){var l=this.list.indexOf(t);-1!==l&&this.list.splice(l,1)}.bind(this))},render:function(t){this.list.forEach(function(l){t&&l.back?l.render():t||l.back||l.render()})}},House.prototype={render:function(){var t;for(t=0;t<2;t++)ctx.save(),ctx.globalAlpha=t?night:1,ctx.translate(this.position.x,this.position.y),ctx.miterLimit=4,ctx.fillStyle=t?"#202B2C":"#7C3232",bp(),m(0,76),l(0,99),l(28,103),l(52,104),l(73,121),l(105,125),l(115,134),l(151,124),l(185,124),l(206,121),l(220,125),l(244,120),l(256,121),l(256,81),l(127,81),l(67,0),l(0,76),cp(),ctx.fill(),ctx.fillStyle=t?"rgb(59, 74, 80)":"#D5E2DF",bp(),m(196,0),l(255,81),l(127,81),l(67,0),l(196,0),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#7C3232",bp(),m(185,52),l(171,37),l(165,38),l(165,19),l(185,19),l(185,52),cp(),ctx.fill(),ctx.fillStyle=t?"#FCFC65":"#D5E2DF",bp(),m(59,74),l(45,74),l(45,89),l(59,91),l(59,74),cp(),ctx.fill(),ctx.fillStyle=t?"#FCFC65":"#D5E2DF",bp(),m(63,75),l(63,92),l(78,95),l(78,75),l(63,75),cp(),ctx.fill(),ctx.restore()}},Tree.prototype={render:function(){var t;for(t=0;t<2;t++)ctx.save(),ctx.globalAlpha=t?night:1,ctx.translate(this.position.x,this.position.y),ctx.miterLimit=4,ctx.fillStyle=t?"#202B2C":"#4F443B",bp(),m(40.5,142.429),l(52.5,142.429),ctx.quadraticCurveTo(52.5,142.429,52.5,142.429),l(52.5,163.429),ctx.quadraticCurveTo(52.5,163.429,52.5,163.429),l(40.5,163.429),ctx.quadraticCurveTo(40.5,163.429,40.5,163.429),l(40.5,142.429),ctx.quadraticCurveTo(40.5,142.429,40.5,142.429),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#528279",bp(),m(46.5,0),l(67.25,41.429),l(56.25,37.929),l(76.5,82.679),l(64.75,80.929),l(94,154.429),l(46.5,146.501),l(0,154.429),l(26.857,81.201),l(15.527,84.033),l(34.97,38.607),l(24.759,42.41),l(46.5,0),cp(),ctx.fill(),ctx.restore()}},Gravity.prototype={update:function(){}},Glade.prototype={addDecoration:function(){var t=20,l=Math.random()<.3,i=0;for(l&&(i=1+parseInt(20*Math.random()),app.decoration.add(app.hills.points[app.hills.points.length-i].position.get(),!0));t>0;)Math.random()<.3&&app.decoration.add(app.hills.points[app.hills.points.length-t].position.get()),t--,i===t&&(t=i-5)},bound:function(){var t,l,i=app.hills.points;for(t=1;t<=20;t++)l={},l.position=distance(this,.05*t),l.normal=l.position.normal(i[i.length-1].position),i.push(l)},render:function(){ctx.save(),bp(),m(this.from.x-1,this.from.y),ctx.bezierCurveTo(this.c1.x,this.c1.y,this.c2.x,this.c2.y,this.to.x,this.to.y),l(this.to.x,this.to.y+2e3),l(this.from.x-1,this.from.y+2e3),l(this.from.x-1,this.from.y),ctx.fillStyle="#E8EFEE",ctx.fill(),ctx.restore()},renderNight:function(){ctx.save(),ctx.globalAlpha=night,bp(),m(this.from.x-1,this.from.y),ctx.bezierCurveTo(this.c1.x,this.c1.y,this.c2.x,this.c2.y,this.to.x,this.to.y),l(this.to.x,this.to.y+2e3),l(this.from.x-1,this.from.y+2e3),l(this.from.x-1,this.from.y),ctx.fillStyle="rgb(21, 30, 30)",ctx.fill(),ctx.restore()}},Hill.prototype={addDecoration:function(){var t=20,l=Math.random()<.3,i=0;for(l&&(i=1+parseInt(20*Math.random()),app.decoration.add(app.hills.points[app.hills.points.length-i].position.get(),!0));t>1;)Math.random()<.2&&app.decoration.add(app.hills.points[app.hills.points.length-t].position.get()),t--,i===t&&(t=i-5)},bound:function(){var t,l,i=app.hills.points;for(t=1;t<=20;t++)l={},l.position=distance(this,.05*t),l.normal=l.position.normal(i[i.length-1].position),i.push(l)},render:function(){ctx.save(),bp(),m(this.from.x-1,this.from.y),ctx.bezierCurveTo(this.c1.x,this.c1.y,this.c2.x,this.c2.y,this.to.x,this.to.y),l(this.to.x,this.to.y+2e3),l(this.from.x-1,this.from.y+2e3),l(this.from.x-1,this.from.y),ctx.fillStyle="#E8EFEE",ctx.fill(),ctx.restore()},renderNight:function(){ctx.save(),ctx.globalAlpha=night,bp(),m(this.from.x-1,this.from.y),ctx.bezierCurveTo(this.c1.x,this.c1.y,this.c2.x,this.c2.y,this.to.x,this.to.y),l(this.to.x,this.to.y+2e3),l(this.from.x-1,this.from.y+2e3),l(this.from.x-1,this.from.y),ctx.fillStyle="rgb(21, 30, 30)",ctx.fill(),ctx.restore()}},Hills.prototype={reset:function(){this.list.length=0,this.points.length=0},next:function(){this.list[this.list.length-1].to.x-this.toEnd<app.ball.position.x&&this.add(),this.color=app.scene.sun.day?"#E8EFEE":"rgb(21, 30, 30)"},add:function(){!(this.list[this.list.length-1]instanceof Glade)&&Math.random()<.4?this.list.push(new Glade(this.list[this.list.length-1])):this.list.push(new Hill(this.list[this.list.length-1])),Math.random()<=.8&&app.objects.add(this.points.length-parseInt(20*Math.random())-1)},generate:function(){var t;for(this.list.push(new StartHill),this.list.push(new Hill(this.list[this.list.length-1])),t=0;t<this.momentAmount-2;t++)this.add()},render:function(){var t;for(ctx.save(),t=this.list.length-this.momentAmount;t<this.list.length;t++)this.list[t].render();for(t=this.list.length-this.momentAmount;t<this.list.length;t++)this.list[t].renderNight();ctx.restore()}},StartHill.prototype={addDecoration:function(){app.decoration.add(app.hills.points[3].position.get(),!0,130),app.decoration.add(app.hills.points[6].position.get(),!0,100),app.decoration.add(app.hills.points[4].position.get(),!0,180),app.decoration.add(app.hills.points[9].position.get(),!0,180),app.decoration.add(app.hills.points[1].position.get(),!1,100,!1),app.decoration.add(app.hills.points[2].position.get(),!1,200,!1),app.decoration.add(app.hills.points[3].position.get(),!1,250,!1),app.decoration.addObj(new Girl(3)),app.decoration.addObj(new Girl(5)),app.decoration.addObj(new Fox(4,350)),app.decoration.addObj(new Fox(5,390)),app.decoration.addObj(new Fox(3,370))},bound:function(){var t,l,i=app.hills.points;for(i.push({position:this.from.get(),normal:new Vector}),t=1;t<=20;t++)l={},l.position=distance(this,.05*t),l.normal=l.position.normal(i[i.length-1].position),i.push(l)},render:function(){ctx.save(),bp(),m(this.from.x-1,this.from.y),ctx.bezierCurveTo(this.c1.x,this.c1.y,this.c2.x,this.c2.y,this.to.x,this.to.y),l(this.to.x,this.to.y+2e3),l(this.from.x-1,this.from.y+2e3),l(this.from.x-1,this.from.y),ctx.fillStyle="#E8EFEE",ctx.fill(),ctx.restore()},renderNight:function(){ctx.save(),ctx.globalAlpha=night,bp(),m(this.from.x-1,this.from.y),ctx.bezierCurveTo(this.c1.x,this.c1.y,this.c2.x,this.c2.y,this.to.x,this.to.y),l(this.to.x,this.to.y+2e3),l(this.from.x-1,this.from.y+2e3),l(this.from.x-1,this.from.y),ctx.fillStyle="rgb(21, 30, 30)",ctx.fill(),ctx.restore()}},Bear.prototype={render:function(){var t;for(t=0;t<2;t++){ctx.save(),ctx.globalAlpha=t?night:1,ctx.translate(this.position.x,this.position.y),ctx.rotate(this.angle),ctx.miterLimit=4,ctx.fillStyle=t?"#202B2C":"#7E5A49",bp(),m(-39,-15),l(-20,-26),l(-16,13),l(-22,27),l(-29,27),l(-39,-15),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#9F785A",bp(),m(10,-23),l(-20,-26),l(-17,4),l(7,9),l(10,-23),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#5B4737",bp(),m(-16,14),l(-17,4),l(7,9),l(-16,14),cp(),ctx.fill(),bp(),m(-39,-14),l(-43,-8),l(-33,11),l(-39,-14),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#9F785A",bp(),m(-46,1),l(-47,-1),l(-43,-8),l(-39,-1),l(-46,1),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#45322C",bp(),m(-33,11),l(-39,-1),l(-46,1),l(-52,20),l(-48,28),l(-33,11),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#7F5945",bp(),m(-38,28),l(-42,21),l(-48,28),l(-38,28),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#A57F64",bp(),m(-14,27),l(-20,22),l(-22,27),l(-14,27),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#C2A187",bp(),m(15,-18),l(10,-23),l(7,9),l(15,-18),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#9F785A",bp(),m(18,-27),l(15,-18),l(10,-23),l(18,-27),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#594537",bp(),m(27,-23),l(15,-18),l(18,-27),l(27,-23),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#815B4A",bp(),m(27,7),l(27,-23),l(15,-18),l(7,9),l(31,25),l(35,15),l(27,7),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#5B4737",bp(),m(5,14),l(7,9),l(17,16),l(15,27),l(9,27),l(5,14),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#815B4A",bp(),m(21,27),l(16,23),l(15,27),l(21,27),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#A47C59",bp(),m(38,26),l(35,15),l(31,25),l(38,26),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#C2A187",bp(),m(30,28),l(31,25),l(38,26),l(30,28),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#9F785B",bp(),m(43,-17),l(35,2),l(27,3),l(27,-23),l(43,-17),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#594537",bp(),m(40,-10),l(46,-12),l(43,-8),l(40,-10),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#815B4A",bp(),m(46,-15),l(46,-12),l(40,-10),l(41,-13),l(46,-15),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#A27F64",bp(),m(43,-17),l(44,-15),l(41,-13),l(43,-17),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#A27F64",bp(),m(49,-6),l(46,-12),l(43,-8),l(40,-10),l(41,-13),l(35,2),l(49,-6),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#815B4A",bp(),m(43,5),l(47,-2),l(46,-4),l(35,2),l(43,5),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#594537",bp(),m(49,-6);l(47,-2),l(46,-4),l(49,-6),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#C2A187",bp(),m(52,2),l(49,-4),l(44,2),l(52,2),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#9F785B",bp(),m(44,3),l(47,5),l(51,3),l(50,2),l(44,2),l(44,3),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#594537",bp(),m(52,2),l(51,3),l(50,2),l(52,2),cp(),ctx.fill(),ctx.restore()}}},Fox.prototype={render:function(){var t;for(t=0;t<2;t++){ctx.save(),ctx.globalAlpha=t?night:1,ctx.translate(this.position.x,this.position.y+this.shiftY),ctx.rotate(this.angle),ctx.miterLimit=4,ctx.fillStyle=t?"#202B2C":"#C2C2C2",bp(),m(-56,-6),l(-34,-7),l(-44,-3),l(-56,-6),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#E3E3E3",bp(),m(-33,8),l(-34,-7),l(-44,-3),l(-33,8),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#E3642A",bp(),m(-32,-10),l(-56,-6),l(-34,-7),l(-32,-10),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#E77B3B",bp(),m(-36,-13),l(-32,-10),l(-42,-9),l(-36,-13),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#E3642A",bp(),m(-46,-16),l(-42,-9),l(-36,-13),l(-40,-16),l(-46,-16),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#CE4121",bp(),m(-48,-19),l(-46,-16),l(-40,-16),l(-48,-19),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#E65827",bp(),m(-56,-6),l(-51,-10),l(-46,-13),l(-42,-9),l(-56,-6),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#CE4121",bp(),m(-45,-14),l(-46,-13),l(-51,-10),l(-46,-16),l(-45,-14),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#CE4121",bp(),m(-42,-9),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#D24C23",bp(),m(-42,-9),l(-46,-13),l(-45,-14),l(-42,-9),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#E77B3B",bp(),m(-13,-10),l(-34,-7),l(-32,-10),l(-13,-10),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#E3642A",bp(),m(-33,8),l(-13,-10),l(-34,-7),l(-33,8),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#E65827",bp(),m(-3,0),l(-13,-10),l(-33,8),l(-3,0),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#E77B3B",bp(),m(10,-15),l(-3,0),l(-13,-10),l(10,-15),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#E65827",bp(),m(7,3),l(10,-15),l(-3,0),l(7,3),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#E3642A",bp(),m(18,0),l(10,-15),l(7,3),l(9,4),l(18,0),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#D54022",bp(),m(-43,14),l(-3,0),l(-33,8),l(-43,14),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#A03017",bp(),m(-40,15),l(-43,14),l(-22,7),l(-40,15),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#210D08",bp(),m(-48,20),l(-43,14),l(-40,15),l(-48,20),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#A03017",bp(),m(-13,15),l(-14,4),l(-22,7),l(-13,15),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#210D08",bp(),m(-15,21),l(-13,15),l(-17,11),l(-15,21),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#D54022",bp(),m(-3,0),l(3,12),l(7,3),l(-3,0),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#A03017",bp(),m(5,16),l(7,3),l(3,12),l(5,16),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#210D08",bp(),m(-2,21),l(5,16),l(3,12),l(-2,21),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#D54022",bp(),m(24,10);l(18,0),l(9,4),l(24,10),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#A03017",bp(),m(27,7),l(24,10),l(18,0),l(27,7),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#210D08",bp(),m(27,20),l(27,7),l(24,10),l(27,20),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#E77B3B",bp(),m(26,-15),l(10,-15),l(28,-2),l(26,-15),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#E3642A",bp(),m(46,-8),l(28,-2),l(26,-15),l(46,-8),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#D54022",bp(),m(46,0),l(46,-8),l(28,-2),l(46,0),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#A03017",bp(),m(55,-9),l(46,-8),l(46,0),l(55,-9),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#D54022",bp(),m(52,-18),l(55,-9),l(46,-8),l(52,-18),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#E3642A",bp(),m(38,-23),l(46,-8),l(52,-18),l(38,-23),cp(),ctx.fill(),ctx.restore()}}},Girl.prototype={render:function(){var t;for(t=0;t<2;t++){ctx.save(),ctx.globalAlpha=t?night:1,ctx.translate(this.position.x,this.position.y-50),ctx.miterLimit=4,ctx.fillStyle=t?"#202B2C":"#877755",bp(),m(37,61),l(29,65),l(18,64),l(20,63),l(10,60),l(11,59),l(8,57),l(9,60),l(14,64),l(18,66),l(25,66),l(31,66),l(34,64),l(38,63),l(42,59),l(43,56),l(38,62),l(37,61),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#B5A585",bp(),m(24,0),l(1,13),l(2,40),l(12,45),l(8,52),l(15,56),l(22,58),l(28,58),l(34,56),l(41,52),l(37,45),l(48,38),l(47,12),l(24,0),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#FAFAE5",bp(),m(46,38),l(46,28),l(42,19),l(47,25),l(46,13),l(29,8),l(35,6),l(35,6),l(24,2),l(12,13),l(11,7),l(11,7),l(3,15),l(7,30),l(2,26),l(2,26),l(4,39),l(10,42),l(21,45),l(21,45),l(12,45),l(23,50),l(23,51),l(22,54),l(23,54),l(22,58),l(22,58),l(15,56),l(8,52),l(8,53),l(7,54),l(6,54),l(6,56),l(8,57),l(11,59),l(10,60),l(20,63),l(18,64),l(29,65),l(37,61),l(38,62),l(43,56),l(44,55),l(43,53),l(42,54),l(40,53),l(41,52),l(40,52),l(34,56),l(28,58),l(27,56),l(28,55),l(27,52),l(27,50),l(34,45),l(34,45),l(39,39),l(37,45),l(46,38),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#EFCCA1",bp(),m(26,40),l(38,32),l(37,26),l(37,25),l(25,26),l(25,19),l(24,26),l(13,25),l(13,32),l(15,34),l(26,40),cp(),ctx.fill(),bp(),m(22,28),l(17,30),l(22,30),l(22,28),cp(),ctx.fill(),bp(),m(28,28),l(28,30),l(34,30),l(28,28),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#877755",bp(),m(12,45),l(8,43),l(5,45),l(10,48),l(12,45),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#FAFAE5",bp(),m(8,52),l(10,48),l(5,45),l(4,44),l(1,46),l(2,47),l(2,47),l(8,52),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#A44B36",bp(),
m(2,47),l(0,51),l(0,54),l(1,54),l(3,54),l(6,53),l(6,54),l(6,54),l(7,54),l(8,53),l(8,52),l(8,52),l(2,47),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#877755",bp(),m(39,49),l(44,46),l(41,43),l(37,45),l(39,49),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#FAFAE5",bp(),m(41,52),l(46,48),l(44,46),l(39,49),l(41,52),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#A44B36",bp(),m(46,48),l(40,52),l(40,53),l(42,54),l(43,53),l(44,55);l(45,55),l(47,56),l(48,55),l(48,52),l(46,48),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#6D3C26",bp(),m(14,64),l(14,67),l(16,69),l(22,69),l(25,66),l(18,66),l(14,64),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#6D3C26",bp(),m(29,69),l(32,69),l(36,68),l(36,66),l(34,64),l(31,66),l(25,66),l(29,69),cp(),ctx.fill(),bp(),m(35,22),l(32,18),l(27,16),l(22,16),l(16,19),l(13,24),l(13,24),l(9,37),l(16,39),l(13,25),l(17,25),l(24,26),l(25,19),l(25,26),l(37,25),l(35,22),cp(),ctx.fill(),bp(),m(41,37),l(37,25),l(34,41),l(41,37),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#DB907F",bp(),m(29,33),l(32,35),l(33,32),l(29,33),cp(),ctx.fill(),ctx.fillStyle=t?"#202B2C":"#DB907F",bp(),m(17,31),l(18,35),l(21,33),l(17,31),cp(),ctx.fill(),ctx.restore()}}},Objects.prototype={reset:function(){this.list.length=0},add:function(t){var l=Math.random();l<.25?this.list.push(new Rock(t)):l<.5?this.list.push(new Fox(t)):l<.75?this.list.push(new Bear(t)):this.list.push(new Girl(t))},next:function(){},render:function(){this.list.forEach(function(t){t.render()})}},Rock.prototype={render:function(){var t;for(t=0;t<2;t++)ctx.save(),ctx.globalAlpha=t?night:1,ctx.translate(this.position.x,this.position.y),ctx.rotate(this.angle),ctx.miterLimit=4,ctx.fillStyle=t?"rgb(21, 30, 30)":"#37243F",bp(),m(-62,37),l(-58,10),l(-40,-14),l(-29,-32),l(-1,-34),l(-41,0),l(-29,-4),l(-28,15),l(-10,-4),l(-17,15),l(10,-1),l(-5,27),l(-5,42),l(-17,45),l(-31,42),l(-45,44),l(-62,37),cp(),ctx.fill(),ctx.fillStyle=t?"rgb(21, 30, 30)":"#706671",bp(),m(36,-23),l(-1,-34),l(-41,0),l(36,-23),cp(),ctx.fill(),ctx.fillStyle=t?"rgb(21, 30, 30)":"#5E5160",bp(),m(37,3),l(36,-23),l(2,-13),l(37,3),cp(),ctx.fill(),ctx.fillStyle=t?"rgb(21, 30, 30)":"#807880",bp(),m(62,16),l(37,3),l(2,-13),l(10,-1),l(41,15),l(62,16),cp(),ctx.fill(),ctx.fillStyle=t?"rgb(21, 30, 30)":"#8D888B",bp(),m(41,-39),l(36,-23),l(37,3),l(62,16),l(41,-39),cp(),ctx.fill(),ctx.fillStyle=t?"rgb(21, 30, 30)":"#80777F",bp(),m(-1,-34),l(41,-39),l(36,-23),l(-1,-34),cp(),ctx.fill(),ctx.fillStyle=t?"rgb(21, 30, 30)":"#403148",bp(),m(2,-13),l(-10,-4),l(-17,15),l(10,-1),l(2,-13),cp(),ctx.fill(),ctx.fillStyle=t?"rgb(21, 30, 30)":"#5A4C5C",bp(),m(-28,15),l(-29,-4),l(2,-13),l(-10,-4),l(-12,1),l(-28,15),cp(),ctx.fill(),ctx.fillStyle=t?"rgb(21, 30, 30)":"#6A5E6C",bp(),m(56,44),l(62,16),l(41,15),l(40,38),l(56,44),cp(),ctx.fill(),ctx.fillStyle=t?"rgb(21, 30, 30)":"#37243F",bp(),m(10,-1),l(14,41),l(31,35),l(40,38),l(41,15),l(10,-1),cp(),ctx.fill(),ctx.fillStyle=t?"rgb(21, 30, 30)":"#5B4C60",bp(),m(-5,42),l(14,41),l(10,-1),l(-5,42),cp(),ctx.fill(),ctx.fillStyle=t?"rgb(21, 30, 30)":"#403148",bp(),m(10,-1),l(-5,27),l(-5,42),l(10,-1),cp(),ctx.fill(),ctx.fillStyle=t?"rgb(21, 30, 30)":"#DCEAE7",bp(),m(2,-13),l(-4,-11),l(-10,-4),l(0,-9),l(5,-8),l(10,-1),l(8,-8),l(36,3),l(26,-2),l(20,-6),l(13,-8),l(10,-10),l(7,-12),l(2,-13),cp(),ctx.fill(),ctx.fillStyle=t?"rgb(21, 30, 30)":"#DCEAE7",bp(),m(49,-33),l(44,-39),l(38,-44),l(25,-45),l(16,-46),l(6,-43),l(-2,-41),l(-9,-41),l(-14,-39),l(-21,-38),l(-28,-33),l(-31,-31),l(-34,-28),l(-35,-23),l(-30,-28),l(-35,-16),l(-23,-29),l(-13,-31),l(-27,-12),l(-1,-34),l(-2,-34),l(-1,-34),l(16,-29),l(14,-33),l(25,-37),l(25,-37),l(25,-37),l(30,-36),l(34,-33),l(36,-23),l(37,3),l(38,-2),l(38,-5),l(41,-19),l(42,-23),l(42,-27),l(44,-26),l(44,-30),l(51,-12),l(51,-18),l(49,-33),cp(),ctx.fill(),ctx.fillStyle=t?"rgb(21, 30, 30)":"#DCEAE7",bp(),m(62,16),l(55,11),l(50,8),l(47,5),l(43,4),l(37,3),l(62,16),cp(),ctx.fill(),ctx.restore()}},Particle.prototype={check:function(){(new Date).getTime()-this.startTime>=this.lifeTime&&(this.isActive=!1)},calculateFriction:function(){return this.velocity.get().normalize().mult(.001)},next:function(){this.acceleration.add(this.calculateFriction()),this.acceleration.add(app.gravity.get().mult(this.mass)),this.velocity.add(this.acceleration),this.position.add(this.velocity),this.acceleration.mult(0),this.check(),this.color="rgb("+this.getColor(232,21)+","+this.getColor(239,30)+","+this.getColor(238,30)+")"},getColor:function(t,l){return Math.round(t+(l-t)*night)},render:function(){var t=1-((new Date).getTime()-this.startTime)/this.lifeTime;ctx.save(),ctx.globalAlpha=t>=0?t:0,bp(),ctx.rect(this.position.x-this.r/2,this.position.y-this.r/2,this.r,this.r),ctx.fillStyle=this.color,ctx.fill(),cp(),ctx.restore()}},Particles.prototype={reset:function(){this.list.length=0},addForce:function(t,l,i){var e,s,o;for(e=0;e<i;e++)s=l*Math.random(),o=2*Math.PI*Math.random(),this.list.push(new Particle(.1+.05*Math.random(),3+parseInt(l/2*Math.random()),new Vector(t.x-l/2+s*Math.sin(o),t.y+s*Math.cos(o)),new Vector,300,"#E8EFEE"))},addRockCollision:function(t,l,i){var e,s,o;for(e=0;e<i;e++)s=l*Math.random(),o=2*Math.PI*Math.random(),this.list.push(new Particle(.1+.05*Math.random(),3+parseInt(l/2*Math.random()),new Vector(t.x+s*Math.sin(o),t.y+s*Math.cos(o)),new Vector(s*Math.sin(o),s*Math.cos(o)).normalize().mult(5*Math.random()),1e3+1e3*Math.random(),"#E8EFEE"))},addDrop:function(t,l,i){var e,s,o;for(e=0;e<i;e++)s=l*Math.random(),o=2*Math.PI*Math.random(),this.list.push(new Particle(.1+.05*Math.random(),3+parseInt(l/2*Math.random()),t,new Vector(s*Math.sin(o),s*Math.cos(o)).normalize().mult(5*Math.random()),500+500*Math.random(),"#E8EFEE"))},next:function(){var t=[];this.list.forEach(function(l){l.next(),l.isActive||t.push(l)}.bind(this)),t.forEach(function(t){var l=this.list.indexOf(t);-1!==l&&this.list.splice(l,1)}.bind(this))},render:function(){this.list.forEach(function(t){t.isActive&&t.render()})}},Camera.prototype={reset:function(){this.shift=new Vector(.12*app.size.x,app.size.y/ratio*.5),this.position=new Vector,this.outPosition=new Vector,this.velocity=new Vector,this.acceleration=new Vector},next:function(t){this.shift=new Vector(.12*app.size.x,app.size.y/ratio*.5);var l=t.position.get().sub(this.position);this.acceleration.apply(l).mult(.1),this.velocity.add(this.acceleration),this.position.apply(this.velocity),this.outPosition.apply(new Vector(-this.position.x+this.shift.x,-this.position.y+this.shift.y))}},Scene.prototype={next:function(){this.mb.next(),this.mm.next(),this.mf.next(),this.lake.next(),this.sun.next(),app.hills.next(),app.ball.next(),app.objects.next(),app.trampolines.next(),app.particles.next(),app.decoration.next(),this.camera.next(app.ball)},render:function(){var t=ctx.createLinearGradient(0,0,0,app.size.y);t.addColorStop(0,"#B9DCEC"),t.addColorStop(.5,"#E4EBD8"),ctx.fillStyle=t,ctx.fillRect(0,0,app.size.x,app.size.y),this.sun.render(),this.mb.r(),this.mm.r(),this.mf.r(),this.lake.r(),ctx.save(),ctx.globalAlpha=.6*night,ctx.fillStyle="rgb(21, 30, 30)",ctx.fillRect(0,0,app.size.x,app.size.y),ctx.restore(),ctx.save(),ctx.scale(ratio,ratio),ctx.translate(this.camera.outPosition.x,this.camera.outPosition.y),app.decoration.render(!0),app.hills.render(),app.objects.render(),app.ball.render(),app.trampolines.render(),app.particles.render(),app.decoration.render(!1),ctx.save();var l=app.size.x/ratio*.1;ctx.translate(app.size.x/ratio-app.size.x/ratio*.07,200),ctx.font=l+"px Courier New",ctx.textAlign="right",ctx.fillStyle="white",ctx.fillText("MAUJA",0,0),ctx.font=.26*l+"px Courier New",ctx.textAlign="right",ctx.fillStyle="white",ctx.fillText("lost snowball story",0,42),ctx.font=.26*l+"px Courier New",ctx.textAlign="right",ctx.fillStyle="white",ctx.fillText("Click to start",0,150),ctx.restore(),ctx.restore(),ctx.save(),ctx.globalAlpha=.2*sunset,ctx.fillStyle="rgb(253, 111, 34)",ctx.fillRect(0,0,app.size.x,app.size.y),ctx.restore(),app.ball.isDead&&(ctx.save(),l=.1*app.size.x,ctx.translate(app.size.x-.07*app.size.x,70),ctx.font=.26*l+"px Courier New",ctx.textAlign="right",ctx.fillStyle="white",ctx.fillText("Your score is: "+app.ball.last+"m",0,0),ctx.font=.26*l+"px Courier New",ctx.textAlign="right",ctx.fillStyle="white",ctx.fillText("Click to start again",0,60),ctx.restore()),app.ball.isDead||app.ball.isReadyToStart||(ctx.font="24px Courier New",ctx.textAlign="left",ctx.fillStyle="white",ctx.fillText("Score: "+app.ball.last+"m",10,30),ctx.restore())}},Trampoline.prototype={deactivate:function(){app.particles.addDrop(this.position.get().add(new Vector(this.WIDTH/2,-this.HEIGHT/2)),100,20)},bound:function(){var t,l;this.points.push({position:this.position.get(),normal:this.normal.get()}),l=new Vector(this.position.x+this.WIDTH*Math.cos(this.angle),this.position.y+this.HEIGHT*Math.sin(this.angle)),t=l.normal(this.position),l.add(t.get().mult(this.HEIGHT)),this.points.push({position:l.get(),normal:l.normal(this.position)})},render:function(){var t;for(t=0;t<2;t++){ctx.save(),ctx.globalAlpha=t?night:1,ctx.translate(this.position.x,this.position.y),ctx.rotate(this.angle),ctx.miterLimit=4,ctx.fillStyle=t?app.nColor:"#72514E",bp(),m(26,-4),l(45,7),l(45,10),l(26,-2),l(26,-4),cp(),ctx.fill(),ctx.fillStyle=t?app.nColor:"#72514E",bp(),m(54,-13),l(54,-8),l(71,8),l(71,3),l(54,-13),cp(),ctx.fill(),ctx.fillStyle=t?app.nColor:"#684745",bp(),m(72,-23),l(54,4),l(54,9),l(72,-17),l(72,-23),cp(),ctx.fill(),ctx.fillStyle=t?app.nColor:"#684745",bp(),m(44,-9),l(26,6),l(26,8),l(44,-5),l(44,-9),cp(),ctx.fill(),ctx.fillStyle=t?app.nColor:"#684745",bp(),m(84,8),l(26,10),l(26,4),l(86,2),l(85,4),ctx.fill(),ctx.fillStyle=t?app.nColor:"#72514E",bp(),m(71,10),l(71,-29),l(82,-34),l(82,10),l(78,12),l(71,10),cp(),ctx.fill(),ctx.fillStyle=t?app.nColor:"#72514E",bp(),m(43,-11),l(54,-17),l(54,11),l(51,11),l(49,13),l(43,12),l(43,11),l(43,-11),cp(),ctx.fill(),ctx.fillStyle=t?app.nColor:"#72514E",bp(),m(15,7),l(26,0),l(26,11),l(24,12),l(20,11),l(15,11),l(15,7),cp(),ctx.fill(),ctx.fillStyle=t?app.nColor:"#684745",bp(),m(26,0),l(15,11),l(15,7),l(26,0),cp(),ctx.fill(),ctx.fillStyle=t?app.nColor:"#72514E",bp(),m(85,4),l(26,10),l(84,8),l(85,4),cp(),ctx.fill(),ctx.fillStyle=t?app.nColor:"#684745",bp(),m(71,-28),l(76,-31),l(82,-35),l(71,10),ctx.fill(),ctx.fillStyle=t?app.nColor:"#684B4A",bp(),m(2,6),l(5,13),l(86,-37),l(86,-44),l(2,6),cp(),ctx.fill(),ctx.fillStyle=t?app.nColor:"#684745",bp(),m(43,12),l(54,-17),l(43,-11),l(43,12),cp(),ctx.fill(),ctx.fillStyle=t?app.nColor:"#DCEAE7",bp(),m(0,14),l(1,3),l(8,-5),l(19,-11),l(29,-14),l(40,-23),l(44,-23),l(65,-37),l(71,-38),l(77,-44),l(82,-45),l(86,-45),l(87,-44),l(88,-38),l(81,-42),l(75,-37),l(68,-33),l(63,-30),l(58,-26),l(50,-23),l(42,-16),l(38,-13),l(32,-12),l(27,-9),l(23,-7),l(20,-5),l(15,-1),l(9,3),l(4,10),l(0,14),cp(),ctx.fill(),ctx.fillStyle=t?app.nColor:"#A6D1D5",bp(),m(81,-42),l(77,-40),l(73,-36),l(68,-35),l(59,-28),l(50,-24),l(44,-21),l(42,-19),l(39,-18),l(30,-13),l(22,-7),l(15,-4),l(9,-1),l(3,6),l(0,14),l(5,13),l(9,3),l(14,3),l(18,-2),l(19,1),l(20,-3),l(24,-6),l(26,-7),l(31,-5),l(32,-11),l(34,-11),l(41,-12),l(45,-17),l(49,-21),l(56,-24),l(62,-25),l(66,-31),l(67,-31),l(72,-33),l(73,-32),l(77,-38),l(81,-39),l(84,-38),l(85,-30),l(87,-38),l(89,-38),l(86,-41);l(84,-42),l(81,-42),cp(),ctx.fill(),ctx.restore()}}},Trampolines.prototype={reset:function(){this.list.length=0},add:function(t){var l,i,e,s,o,c=t-app.scene.camera.outPosition.x;this.list.length&&(this.list[0].deactivate(),this.list.length=0),l=this.searchIndex(c),s=app.hills.points[l].position,o=app.hills.points[l+1].position,e=new Vector(c,s.y+(c-s.x)/(o.x-s.x)*(o.y-s.y)),i=this.check(e),i&&(c=i-90,l=this.searchIndex(c),s=app.hills.points[l].position,o=app.hills.points[l+1].position,e=new Vector(c,s.y+(c-s.x)/(o.x-s.x)*(o.y-s.y))),this.list.push(new Trampoline(e,l))},check:function(t){var l=!1,i=0;return app.objects.list.forEach(function(e){e.position.distance(t)<e.r+90&&(l=!0,i=e.position.x-e.halfWidth)}),l&&i},searchIndex:function(t){for(var l=!1,i=app.ball.last;!l;)t<=app.hills.points[i].position.x?(l=!0,i--):i++;return i},next:function(){},render:function(){this.list.forEach(function(t){t.render()})}},Vector.prototype={add:function(t){return this.x+=t.x,this.y+=t.y,this},angle:function(t){return void 0===t?Math.atan2(this.y,this.x):Math.atan2(t.y,t.x)-Math.atan2(this.y,this.x)},apply:function(t){return this.x=t.x,this.y=t.y,this},distance:function(t){return Math.hypot(this.x-t.x,this.y-t.y)},div:function(t){return this.x/=t,this.y/=t,this},dot:function(t){return this.mag()*t.mag()*Math.cos(this.angle(t))},get:function(){return new Vector(this.x,this.y)},mag:function(){return Math.hypot(this.x,this.y)},mult:function(t){return this.x*=t,this.y*=t,this},normalize:function(){var t=this.mag();return t>0&&this.div(t),this},perpendicular:function(){var t=this.x;return this.x=this.y,this.y=-t,this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},sub:function(t){return this.x-=t.x,this.y-=t.y,this},normal:function(t){return new Vector(this.x-t.x,this.y-t.y).perpendicular().normalize()}};