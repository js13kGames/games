<!doctype html><meta content="width=device-width" name=viewport><title>Game</title><style>body{text-align:center}canvas{border:1px solid #000}</style><canvas></canvas><script>!function(){"use strict";function e(e){return Math.floor(e)}function n(e){return Math.random(e)}function t(e,n,t,f,r){h.fillStyle=r,h.fillRect(e,n,t,f)}function f(e,n,t,f,r){h.fillStyle=r,h.font=f+"px serif",h.fillText(t,e,n)}function r(e){return!(!I[e]&&I[e-2]===g-1||!I[e-2]&&I[e]===g-1||I[e]===I[e-2])}function o(){for(var f,o,u,i=-1;++i<S;){for(u=2*i+1;I[u]=e(n()*g),!r(u););C===re?(f=u*T,o=I[u]*x):(f=I[u]*T,o=u*x),t(f,o,T,x,w)}}function u(){U=!1,$=!0,v(),function(){var n=e(p/4),r=e(b/2),o=e(10*p/100);B>F&&(F=B),t(0,0,p,b,q),f(n,r,"You lose",o,A),f(n,r+2*o,"↵  -  to CONTINUE",e(o/2),A),addEventListener("keyup",i,!1)}()}function i(e){13===e.keyCode&&(e.preventDefault(),removeEventListener("keyup",i,!1),$?c():y(1))}function c(){var n=e(p/4),r=e(b/8),o=e(10*p/100),u=o;$=!1,r+=u,t(0,0,p,b,q),f(n+e(n/2),r,ce,o,A),r+=o/=2,[["↑","move UP"],["↓","move DOWN"],["←","move RIGHT"],["→","move LEFT"],["↵","to PLAY"]].forEach((function(e){f(n,r+=u,e[0]+"  -  "+e[1],o,A)})),f(n,r+=u+o,"Score: "+B+" - Best: "+F,o,A),addEventListener("keyup",i,!1)}function a(e,n){t(e+G,n+H,W-2*G,j-2*H,z)}function s(f){var r,o,i,c,s=f%2?ue:ie,v=2*f;C===re?(r=v*W,o=e(n()*g)*j):(r=e(n()*g)*W,o=v*j),J[v]={offsetX:r,offsetY:o},a(r,o),K.push(setInterval((function(){U&&(i=r,c=o,C===re?s===ie?o+j<L?o+=j:(o-=j,s=ue):o?o-=j:(o+=j,s=ie):s===ie?r+W<E?r+=W:(r-=W,s=ue):r?r-=W:(r+=W,s=ie),J[v].offsetX=r,J[v].offsetY=o,d(v)?u():(t(i,c,W,j,w),a(r,o)))}),Q))}function v(){for(var e=K.length;e--;)clearInterval(K.pop())}function l(){t(V+Z,_+ee,T-2*Z,x-2*ee,ne)}function d(e){if(te===e&&J[e])return C===re?J[e].offsetY===_:J[e].offsetX===V}function k(t){var f=2*t+1,r=e(p/f),o=e(b/f);E=r*f,L=o*f,g=f,C=e(2*n())?re:oe,S=t,I=[],B=t-1,P=o,X=e((O=r)/5),M=e(P/5),C===re?(N=E-r,D=e(n()*f)*P):(N=e(n()*f)*O,D=L-o),V=0,_=0,x=o,Z=e((T=r)/10),ee=e(x/10),te=0,fe=!1,J=[],j=o,G=e((W=r)/10),H=e(j/10),(Q=1e3-50*t)<100&&(Q=100)}function y(e){v(),t(0,0,p,b,m),k(e),function(){var e=0,n=0,f=E,r=L,o=-1;if(C===re)for(f/=g;++o<g;)t(e,n,f,r,o%2?Y:w),e+=f;else for(r/=g;++o<g;)t(e,n,f,r,o%2?Y:w),n+=r}(),o(),t(N+X,D+M,O-2*X,P-2*M,R),l(),function(){for(var e=0;++e<S;)s(e)}(),U=!0}var h,p,b,m,E,L,C,g,Y,w,I,S,T,x,N,X,D,M,O,P,R,U,$,q,A,B,F,G,H,W,j,z,J,K,Q,V,Z,_,ee,ne,te,fe,re="v",oe="h",ue="b",ie="f",ce="Lost";(function(){var e=document.querySelector("canvas");p=500,b=500,m="#fff",Y="blue",w="yellow",U=!1,$=!1,F=0,B=0,R="green",q="#000",A="#fff",ne="red",z="orange",K=[],e.width=p,e.height=b,h=e.getContext("2d")})(),function(){var e,n;addEventListener("keyup",(function(f){U&&/^3[789]$|^40$/.test(f.keyCode)&&(fe=te%2,e=V,n=_,(C===re?function(e){switch(e){case 37:if(fe||_===I[te-1]*x)return V-=T,te-=1,!0;break;case 38:if(!fe&&_)return _-=x,!0;break;case 39:if(fe||_===I[te+1]*x)return V+=T,te+=1,!0;break;case 40:if(!fe&&_+x<L)return _+=x,!0}return!1}(f.keyCode):function(e){switch(e){case 37:if(!fe&&V)return V-=T,!0;break;case 38:if(fe||V===I[te-1]*T)return _-=x,te-=1,!0;break;case 39:if(!fe&&V+T<E)return V+=T,!0;break;case 40:if(fe||V===I[te+1]*T)return _+=x,te+=1,!0}return!1}(f.keyCode))&&(d(te)?u():(t(e,n,T,x,w),l(),V===N&&_===D&&y(++S))))}),!1)}(),c()}()</script>