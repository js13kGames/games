<!doctype html><title>ðŸŒ¾ Flour Oh! Flour</title><meta name=viewport content="width=device-width"><canvas style="position:fixed;top:0;left:0;width:100%;height:100%;touch-action:none;background-image:radial-gradient(rgb(251 251 251),#fffdeb 60%)"></canvas><div id=splash style="position:fixed;top:0;left:0;width:100%;height:100%;backdrop-filter:blur(5px);transition:opacity .2s ease;font-family:Helvetica,Arial,sans-serif;padding:40px;color:#333;background-color:#fffef333"><h1>Flour<br>Oh!<br>Flour</h1><span>ðŸŒ¾ðŸŒ¾ðŸŒ¾</span><h4>Reap wheat<br>Gather flour<br>Enjoy the farm life</h4></div><script>let t=document.querySelector("canvas");t.width=window.innerWidth*window.devicePixelRatio,t.height=window.innerHeight*window.devicePixelRatio,t.style.opacity="0.6";let e={antialias:!0,depth:!0},r=t.getContext("webgl2",e)||t.getContext("webgl",e);var a,n="undefined"!=typeof Float32Array?Float32Array:Array;function o(){var t=new n(16);return n!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function i(t,e,r){var a=e[0],n=e[1],o=e[2],i=e[3],l=e[4],h=e[5],s=e[6],c=e[7],f=e[8],u=e[9],M=e[10],d=e[11],p=e[12],m=e[13],g=e[14];e=e[15];var v=r[0],A=r[1],w=r[2],y=r[3];return t[0]=v*a+A*l+w*f+y*p,t[1]=v*n+A*h+w*u+y*m,t[2]=v*o+A*s+w*M+y*g,t[3]=v*i+A*c+w*d+y*e,t[4]=(v=r[4])*a+(A=r[5])*l+(w=r[6])*f+(y=r[7])*p,t[5]=v*n+A*h+w*u+y*m,t[6]=v*o+A*s+w*M+y*g,t[7]=v*i+A*c+w*d+y*e,t[8]=(v=r[8])*a+(A=r[9])*l+(w=r[10])*f+(y=r[11])*p,t[9]=v*n+A*h+w*u+y*m,t[10]=v*o+A*s+w*M+y*g,t[11]=v*i+A*c+w*d+y*e,t[12]=(v=r[12])*a+(A=r[13])*l+(w=r[14])*f+(y=r[15])*p,t[13]=v*n+A*h+w*u+y*m,t[14]=v*o+A*s+w*M+y*g,t[15]=v*i+A*c+w*d+y*e,t}function l(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function h(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function s(t){return Math.hypot(t[0],t[1],t[2])}function c(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function f(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function u(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function d(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function M(t,e,r,a){return t[0]=e[0]+r[0]*a,t[1]=e[1]+r[1]*a,t[2]=e[2]+r[2]*a,t}function m(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1],e[2]-t[2])}function g(t,e){var r=e[0]-t[0],a=e[1]-t[1];return r*r+a*a+(t=e[2]-t[2])*t}function p(t,e){var r=e[0],a=e[1],n=e[2];return 0<(r=r*r+a*a+n*n)&&(r=1/Math.sqrt(r)),t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function v(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function A(t,e,r){var a=e[0],n=e[1],o=r[0],i=r[1];return t[0]=n*(r=r[2])-(e=e[2])*i,t[1]=e*o-a*r,t[2]=a*i-n*o,t}function w(t,e,r,a){var n=e[0],o=e[1];return e=e[2],t[0]=n+a*(r[0]-n),t[1]=o+a*(r[1]-o),t[2]=e+a*(r[2]-e),t}function y(t,e,r){var a=e[0],n=e[1],o=r[3]*a+r[7]*n+r[11]*(e=e[2])+r[15];return t[0]=(r[0]*a+r[4]*n+r[8]*e+r[12])/(o=o||1),t[1]=(r[1]*a+r[5]*n+r[9]*e+r[13])/o,t[2]=(r[2]*a+r[6]*n+r[10]*e+r[14])/o,t}function F(t,e,r){var a=e[0],n=e[1];return t[0]=a*r[0]+n*r[3]+(e=e[2])*r[6],t[1]=a*r[1]+n*r[4]+e*r[7],t[2]=a*r[2]+n*r[5]+e*r[8],t}function b(t,e,r,a){var n=[],o=[];return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],o[0]=n[0]*Math.cos(a)-n[1]*Math.sin(a),o[1]=n[0]*Math.sin(a)+n[1]*Math.cos(a),o[2]=n[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function x(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1])}function R(t,e){var r=e[0]-t[0];return r*r+(t=e[1]-t[1])*t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)}),a=new n(3),n!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),(()=>{var t=new n(2);n!=Float32Array&&(t[0]=0,t[1]=0)})();let E=(t,e,r)=>(1-t)*e+t*r,B=[0,0,0],D=[0,1,0],_=[0,-1,0],T=[0,0,1],L=[1,0,0],Y=[],S=[],U=[],I=[],C=[],q=new Float32Array(16);var P=1/Math.tan(.5236);q[0]=P/(window.innerWidth/window.innerHeight),q[1]=0,q[2]=0,q[3]=0,q[4]=0,q[5]=P,q[6]=0,q[7]=0,q[8]=0,q[9]=0,q[11]=-1,q[12]=0,q[13]=0,q[15]=0,q[10]=1/-19.995*20.005,q[14]=-.010002500625156289;let H=1.2,k=1,z=5,X=[0,0,0],N=[0,0,1],W=new Float32Array(16),O=new Float32Array(16),G=new Float32Array(9),V=()=>{var t=.8+.09*z,e=Math.sin(H)*t;N[0]=e*Math.sin(k),N[1]=Math.cos(H)*t,N[2]=e*Math.cos(k),t=N[0],e=N[1];var r=N[2],a=D[0],n=D[1],o=D[2],l=X[0],h=X[1],s=X[2];if(1e-6>Math.abs(t-l)&&1e-6>Math.abs(e-h)&&1e-6>Math.abs(r-s))W[0]=1,W[1]=0,W[2]=0,W[3]=0,W[4]=0,W[5]=1,W[6]=0,W[7]=0,W[8]=0,W[9]=0,W[10]=1,W[11]=0,W[12]=0,W[13]=0,W[14]=0;else{l=t-l,h=e-h;var c=r-s,f=1/Math.hypot(l,h,c);s=n*(c*=f)-o*(h*=f),o=o*(l*=f)-a*c,a=a*h-n*l,(f=Math.hypot(s,o,a))?(s*=f=1/f,o*=f,a*=f):a=o=s=0,n=h*a-c*o;var u=c*s-l*a,M=l*o-h*s;(f=Math.hypot(n,u,M))?(n*=f=1/f,u*=f,M*=f):M=u=n=0,W[0]=s,W[1]=n,W[2]=l,W[3]=0,W[4]=o,W[5]=u,W[6]=h,W[7]=0,W[8]=a,W[9]=M,W[10]=c,W[11]=0,W[12]=-(s*t+o*e+a*r),W[13]=-(n*t+u*e+M*r),W[14]=-(l*t+h*e+c*r)}W[15]=1,i(O,q,W),G[0]=W[0],G[1]=W[1],G[2]=W[2],G[3]=W[4],G[4]=W[5],G[5]=W[6],G[6]=W[8],G[7]=W[9],G[8]=W[10],(M=(t=G[0])*(a=(o=G[8])*(h=G[4])-(s=G[5])*(f=G[7]))+(e=G[1])*(n=-o*(l=G[3])+s*(c=G[6]))+(r=G[2])*(u=f*l-h*c))&&(G[0]=a*(M=1/M),G[1]=(-o*e+r*f)*M,G[2]=(s*e-r*h)*M,G[3]=n*M,G[4]=(o*t-r*c)*M,G[5]=(-s*t+r*l)*M,G[6]=u*M,G[7]=(-f*t+e*c)*M,G[8]=(h*t-e*l)*M)};V();let K=0,j=null,J=null,Q=null,Z=([{pageX:t,pageY:e}])=>{null!==J&&(k-=(t-J)/window.innerHeight*3,H-=(e-Q)/window.innerHeight*3,H=Math.min(Math.max(H,.62832),1.382304),J=t,Q=e,V())},$=t=>{if(null!==j){const[{pageX:e,pageY:r},{pageX:a,pageY:n}]=t;z=Math.min(Math.max(K/Math.sqrt((e-a)**2+(r-n)**2)*j,0),10),V()}},tt=t=>{1===t.length?(j=null,(([{pageX:t,pageY:e}])=>{J=t,Q=e})(t)):1<t.length&&(J=null,(([{pageX:t,pageY:e},{pageX:r,pageY:a}])=>{K=z,j=Math.sqrt((t-r)**2+(e-a)**2)})(t))};t.addEventListener("wheel",(t=>{z=Math.min(Math.max(z+(0>t.deltaY?-1:1),0),10),V()}),{passive:!0});let et=t=>6*t*t*t*t*t-15*t*t*t*t+10*t*t*t,rt=(t,e,r)=>{const a=Math.ceil(e/r)+1,n=Array.from({length:(Math.ceil(t/r)+1)*a}).map((()=>{const t=6.2832*Math.random();return{x:Math.cos(t),y:Math.sin(t)}}));return(t,e)=>{const o=t/r,i=e/r,l=Math.floor(o),h=Math.floor(i);t=o-l,e=i-h;const s=[{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}].map((t=>{const e=n[(l+t.x)*a+(h+t.y)];return e.x*(l+t.x-o)+e.y*(h+t.y-i)}));return E(et(e),E(et(t),s[0],s[1]),E(et(t),s[2],s[3]))}},at=(t,e,r)=>{{var a=(t[0]+e[0])/2;const n=(t[1]+e[1])/2,o=-(t[1]-e[1]);e=t[0]-e[0];const i=(t[0]+r[0])/2,l=(t[1]+r[1])/2,h=-(t[1]-r[1]);r=t[0]-r[0],a=1e-6>Math.abs(o*r-e*h)?null:[a+o*(r=1e-6>Math.abs(h)?(i-a)/o:1e-6>Math.abs(r)?(l-n)/e:((a-i)/h-(n-l)/r)/(e/r-o/h)),n+e*r]}return a?{center:a,radiusSquared:R(a,t)}:null},nt=t=>{const e=t.length;var r=(t=>{const e=Math.max(0,...t.map((t=>t[0])))+1,r=Math.max(0,...t.map((t=>t[1])))+1,a=Math.min(0,...t.map((t=>t[0])))-1;return[[a,t=Math.min(0,...t.map((t=>t[1])))-1],[a,r+(r-t)],[e+(e-a),t]]})(t);t.push(...r);const a=[{indexes:[e+2,e+1,e+0],circle:at(r[0],r[1],r[2])}];for(let n=e;n--;){const e=[];for(r=a.length;r--;){const{circle:{center:o,radiusSquared:i},indexes:[l,h,s]}=a[r];R(o,t[n])<i&&(a.splice(r,1),e.push([l,h],[l,s],[h,s]))}e.forEach((([r,o])=>{1===e.filter((([t,e])=>r===t&&o===e)).length&&a.push({indexes:[r,o,n],circle:at(t[r],t[o],t[n])})}))}return t.splice(e,3),a.filter((({indexes:t})=>!t.some((t=>t>=e))))},ot=0,it=[],lt=[],ht=[],st=[],ct=[240/255,120/255,0],ft=[.12,.72,.18],ut=[130/255,134/255,38/255],dt=[.98,.98,.3],Mt=[212/255,198/255,181/255],mt=[157/255,116/255,.2],gt=[132/255,82/255,25/255],pt=(t,e,r,a,n)=>{const o=r[0]-e[0],i=r[1]-e[1];e=r[2]-e[2],r=n[0]-a[0];const l=n[1]-a[1];return t[0]=i*(a=n[2]-a[2])-e*l,t[1]=e*r-o*a,t[2]=o*l-i*r,t},vt=(t,e,r)=>{let a=0;for(let l=0;l<t.length;l++){var n=t[l],o=t[(l+1)%t.length],i=o[0]-n[0];const h=o[1]-n[1];o=o[2]-n[2];const s=r[0]-n[0],c=r[1]-n[1];if(i=e[0]*(h*(n=r[2]-n[2])-o*c)+e[1]*(o*s-i*n)+e[2]*(i*c-h*s),1e-6<Math.abs(i)){if(0>a*i)return!1;a=0<i?1:-1}}return!0},At=t=>{var e=0;for(let i=0;i<t.length-1;i++){{var r=t[0],a=t[i],n=t[i+1],o=a[0]-r[0];const e=a[1]-r[1];a=a[2]-r[2];const l=n[0]-r[0],h=n[1]-r[1];r=n[2]-r[2],o=Math.hypot(e*r-a*h,a*l-o*r,o*h-e*l)/2}e+=o}return e},wt=(t,e)=>{t[0]=0,t[1]=0,t[2]=0;for(let r=e.length;r--;)M(t,t,e[r],1/e.length);return t},yt=t=>{const e=wt([],t);let r=0;for(let a=t.length;a--;)r=Math.max(r,g(t[a],e));return Math.sqrt(r)},Ft=new Float32Array(252e3),bt=new Float32Array(252e3),xt=new Float32Array(252e3),Rt=0,Et=(t,e,r)=>{for(let a=1;a<t.length-1;a++){Ft[9*Rt]=t[0][0],Ft[9*Rt+1]=t[0][1],Ft[9*Rt+2]=t[0][2],Ft[9*Rt+3]=t[a+0][0],Ft[9*Rt+4]=t[a+0][1],Ft[9*Rt+5]=t[a+0][2],Ft[9*Rt+6]=t[a+1][0],Ft[9*Rt+7]=t[a+1][1],Ft[9*Rt+8]=t[a+1][2];for(let t=9;t--;)bt[9*Rt+t]=r[t%3],xt[9*Rt+t]=e[t%3];Rt++}},Bt=[],Dt=(t,e)=>{pt(Bt,t[0],t[1],t[0],t[2]),p(Bt,Bt),Et(t,e,Bt)},_t=[[.3,1.1],[.2,.05],[1.12,.6],[1.3,1.25]],Tt=(t,e,r)=>{A(Y,e,T),p(Y,Y);var a=r/100,n=(1-2*Math.abs(Math.max(0,(a-(1-.07))/.07)-.5))**2;r=w(S,ut,dt,a);const o=.009*a*1.5,i=9e-4*a,l=.009*a*.3+.00198*n;a=[d([],Y,-i),d([],Y,i)].map((e=>(F(e,e,G),f(e,e,t),e[1]-=.04*o,e))),d(n=[],e,o+6*l/2),f(n,n,t),a.push(n),Et(a,r,T);for(let n=6;n--;){const i=n>>1,h=n%2?1:-1;a=_t.map((([r,a])=>(F(r=[(a+.05*(1.1-n/6))*h*l,(r-.5)*l,0],r,G),f(r,r,t),M(r,r,e,o+(i+.1*h)*l),r))),1===h&&a.reverse(),Et(a,r,T)}},Lt=new Float32Array(252e3),Yt=new Float32Array(252e3),St=new Float32Array(252e3),Ut=0,It=(t,e,r)=>{for(let a=1;a<t.length-1;a++){Lt[9*Ut]=t[0][0],Lt[9*Ut+1]=t[0][1],Lt[9*Ut+2]=t[0][2],Lt[9*Ut+3]=t[a+0][0],Lt[9*Ut+4]=t[a+0][1],Lt[9*Ut+5]=t[a+0][2],Lt[9*Ut+6]=t[a+1][0],Lt[9*Ut+7]=t[a+1][1],Lt[9*Ut+8]=t[a+1][2];for(let t=9;t--;)Yt[9*Ut+t]=r[t%3],St[9*Ut+t]=e[t%3];Ut++}},Ct=[],qt=(t,e)=>{pt(Ct,t[0],t[1],t[0],t[2]),p(Ct,Ct),It(t,e,Ct)},Pt=[],Ht=[],kt=[],zt=[],Xt=[],Nt=[],Wt=[],Ot=[],Gt=[],Vt=(t,e,r,a)=>{var n=O[0],o=O[1],i=O[2],l=O[3],h=O[4],s=O[5],c=O[6],f=O[7],M=O[8],d=O[9],m=O[10],g=O[11],v=O[12],A=O[13],w=O[14],R=O[15],F=n*s-o*h,x=n*c-i*h,b=n*f-l*h,B=o*c-i*s,E=o*f-l*s,T=i*f-l*c,G=M*A-d*v,Y=M*w-m*v,S=M*R-g*v,W=d*w-m*A,U=d*R-g*A,C=m*R-g*w,D=F*C-x*U+b*W+B*S-E*Y+T*G;return D&&(Pt[0]=(s*C-c*U+f*W)*(D=1/D),Pt[1]=(i*U-o*C-l*W)*D,Pt[2]=(A*T-w*E+R*B)*D,Pt[3]=(m*E-d*T-g*B)*D,Pt[4]=(c*S-h*C-f*Y)*D,Pt[5]=(n*C-i*S+l*Y)*D,Pt[6]=(w*b-v*T-R*x)*D,Pt[7]=(M*T-m*b+g*x)*D,Pt[8]=(h*U-s*S+f*G)*D,Pt[9]=(o*S-n*U-l*G)*D,Pt[10]=(v*E-A*b+R*F)*D,Pt[11]=(d*b-M*E-g*F)*D,Pt[12]=(s*Y-h*W-c*G)*D,Pt[13]=(n*W-o*Y+i*G)*D,Pt[14]=(A*x-v*B-w*F)*D,Pt[15]=(M*B-d*x+m*F)*D),y(Gt,[t,e,.5],Pt),u(Gt,Gt,N),p(Gt,Gt),Jt(N,Gt,r,a)},Kt=[],jt=[],Jt=(t,e,r,a)=>{let n=1/0,o=[0,0,0],i=-1;for(let h=0;h<9*a;h+=9){Ht[0]=r[h+0+0],Ht[1]=r[h+0+1],Ht[2]=r[h+0+2],kt[0]=r[h+3+0],kt[1]=r[h+3+1],kt[2]=r[h+3+2],zt[0]=r[h+6+0],zt[1]=r[h+6+1],zt[2]=r[h+6+2],u(Nt,kt,Ht),u(Wt,zt,kt),u(Ot,Ht,zt),A(Xt,Nt,Wt),p(Xt,Xt);var l=v(Xt,e);if(1e-6<Math.abs(l)&&(u(Kt,Ht,t),(l=v(Xt,Kt)/l)<n)){jt[0]=t[0]+l*e[0],jt[1]=t[1]+l*e[1],jt[2]=t[2]+l*e[2];const r=0<v(Xt,A(Kt,Nt,u(Kt,Ht,jt))),a=0<v(Xt,A(Kt,Wt,u(Kt,kt,jt))),s=0<v(Xt,A(Kt,Ot,u(Kt,zt,jt)));r===a&&r===s&&(n=l,o[0]=jt[0],o[1]=jt[1],o[2]=jt[2],i=h/9)}}if(0<=i)return{p:o,t:n,i:i}},Qt=null,Zt=-9999,$t=([{pageX:t,pageY:e}])=>{(t=Vt(t/window.innerWidth*2-1,-(e/window.innerHeight*2-1),Lt,He))&&(Qt=t.p,Zt=ot)},te=[],ee=[0,0,0],re=0,ae=0,ne=0,oe=(t,e)=>{var r=1.3*ot+.18*Math.sin(2.7*ot+e[0]**2)+.3*Math.sin(1.7*ot+2*e[2])+.2*Math.sin(782*e[2]+2132*e[0]);const a=(4+1*Math.sin(2*ot+1*e[0])+2*Math.sin(3.8*ot+2*e[2]))/7;return t[0]=Math.cos(r)*a,t[1]=2,t[2]=Math.sin(r)*a,p(t,t),re!==ot&&(r=0,ht.length&&.15>ot-ht[ht.length-1].date?(r=3.6,c(ee,ht[ht.length-1].p)):Qt&&.15>ot-Zt&&(r=1,c(ee,Qt)),ae+=(160*(r-ne)-12*ae)*(ot-re),ne+=ae*(ot-re),re=ot),1e-6<Math.abs(ne)&&(u(te,e,ee),r=s(te),M(t,t,te,ne/(1e-4+r*Math.max(r+.003*Math.sin(783*e[2]+132*e[0]+ot),.001))*.016),p(t,t)),t},ie=[],le=[[-.2,.45,0],[-.2,-.45,0],[.4,0,0]],he=(t,e)=>{const r=wt([],t),a=yt(t),n=[],o=[],i=[];u(o,t[1],t[0]),u(n,t[2],t[0]),A(i,o,n),p(i,i),A(n,i,o),p(n,n),A(o,n,i);const l=[],h=1+.026*Math.ceil(a/.026),m=1+.026*Math.ceil(a/.026);for(let e=-h;e<=h;e+=.026)for(let a=-m;a<=m;a+=.026)c(S,r),M(S,S,n,e+.0078*(Math.random()-.5)),M(S,S,o,a+.0078*(Math.random()-.5)),vt(t,i,S)&&l.push(S.slice());const g=st[e];return()=>{for(var h of l)Tt(h,oe(U,h),st[e].growth);if("grown"===g.type)if(0<g.tic){h=Math.min(Math.max(g.tic/11,0),1),c(Y,r),M(Y,Y,i,5e-4);for(var m=t.length;m--;){var v=t[(m+1)%t.length];c(S,t[m]),c(U,v),M(S,S,i,5e-4),M(U,U,i,5e-4),u(I,Y,S),u(C,Y,U),d(I,I,h),d(C,C,h),f(I,I,S),f(C,C,U),Et([S,U,C,I],ct,i)}}else if(0==(0|1754*ot+e)%15){for(h=[999999,999999,999999];!vt(t,i,h);)c(h,r),M(h,h,n,2*(Math.random()-.5)*a),M(h,h,o,2*(Math.random()-.5)*a);m=.048*(1+2*Math.random()),M(v=c([],h),v,D,m);var A=3*Math.random();ie.push({positionA:h,positionB:v,angleA:A,angleB:A+.2*(Math.random()-.5),sizeA:.0096,sizeB:.0024,startDate:ot,duration:15*m,color:ct})}if("growing"===g.type)for(h=80*(.27-(ot-g.growingSinceDate)),m=0;m<h;m++){v=[9999,9999,9999];for(var w=A=0;.03>A*A+w*w||!vt(t,i,v);)A=2*(Math.random()-.5),w=2*(Math.random()-.5),c(v,r),M(v,v,n,a*A),M(v,v,o,a*w);u(Y,v,r),A=s(Y),M(Y,Y,i,Math.max(.01*a,(a-A)*(.7+Math.random()+.7))),p(Y,Y),A=.2*(1+5*Math.random())*.2,M(w=c([],v),w,Y,A);const e=3*Math.random();ie.push({positionA:v,positionB:w,angleA:e,angleB:e+.9*(Math.random()-.5),sizeA:.2*.07,sizeB:.2*.1+.002*(Math.random()+2),startDate:ot,duration:.45*A,color:.7<Math.random()?dt.map((t=>Math.min(Math.max(t+.37*(Math.random()-.5),0),1))):ct})}for(const t of ht)if(t.i===e)for(h=0;h<12*(.12-(ot-t.date));h++)m=c([],t.p),c(Y,B),v=6.2832*Math.random(),M(Y,Y,n,Math.sin(v)),M(Y,Y,o,Math.cos(v)),M(m,m,Y,.072*Math.random()),v=.06*(1+.8*Math.random()),M(Y,Y,i,Math.random()+.1),p(Y,Y),M(A=c([],m),A,Y,v),w=3*Math.random(),ie.push({positionA:m,positionB:A,angleA:w,angleB:w+.9*(Math.random()-.5),sizeA:.0126,sizeB:.018+.0018*(Math.random()+2),startDate:ot,duration:2*v,color:.7<Math.random()?dt.map((t=>Math.min(Math.max(t+.37*(Math.random()-.5),0),1))):ct})}},se=t=>{const e=[0,2.16,-1.17];for(let e=0;5>e;e++){var r=6.2832*e/5,a=6.2832*(e+1)/5;const n=Math.sin(r),o=Math.sin(a);r=Math.cos(r),a=Math.cos(a);for(const e of[[[1.25*n,.6,1.25*r],[1.25*o,.6,1.25*a],[1*o,2.4,1*a],[1*n,2.4,1*r]],[[.95*n,0,.95*r],[.95*o,0,.95*a],[.5*o,.66,.5*a],[.5*n,.66,.5*r]],[[.95*o,0,.95*a],[.95*n,0,.95*r],[.95*n,-1.85,.95*r],[.95*o,-1.85,.95*a]],[[1.32*n,2.4,1.32*r],[1.32*o,2.4,1.32*a],[0,3.08,0]],[[0,.24,0],[1.25*o,.6,1.25*a],[1.25*n,.6,1.25*r]],[[0,2.4,0],[1.32*o,2.4,1.32*a],[1.32*n,2.4,1.32*r]]])qt(e.map((e=>y([],e,t))),gt);let i=a-r,l=o-n;const h=Math.sqrt(l*l+i*i);i/=h,l/=h;for(const e of[[[1.305*n+.18*l,.6,1.305*r+.18*i],[1.055*n+.18*l,2.4,1.055*r+.18*i],[1.055*n,2.4,1.055*r],[1.305*n,.6,1.305*r]],[[1.055*o-.18*l,2.4,1.055*a-.18*i],[1.305*o-.18*l,.6,1.305*a-.18*i],[1.305*o,.6,1.305*a],[1.055*o,2.4,1.055*a]],[[1.305*o-.18*l,.6,1.305*a-.18*i],[1.055*o-.18*l,2.4,1.055*a-.18*i],[1*o-.18*l,2.4,1*a-.18*i],[1.25*o-.18*l,.6,1.25*a-.18*i]],[[1.055*n+.18*l,2.4,1.055*r+.18*i],[1.305*n+.18*l,.6,1.305*r+.18*i],[1.25*n+.18*l,.6,1.25*r+.18*i],[1*n+.18*l,2.4,1*r+.18*i]],[[1.055*n+.18*l,2.4,1.055*r+.18*i],[1.305*n+.18*l,.6,1.305*r+.18*i],[1.25*n+.18*l,.6,1.25*r+.18*i],[1*n+.18*l,2.4,1*r+.18*i]],[[0,2.455+.68,0],[.396/.68*n,2.455+.68-.3,.396/.68*r],[.396/.68*o,2.455+.68-.3,.396/.68*a]],[[.396/.68*o,3.08-.3+.055,.396/.68*a],[.396/.68*n,3.08-.3+.055,.396/.68*r],[.396/.68*n,3.08-.3,.396/.68*r],[.396/.68*o,3.08-.3,.396/.68*a]]])qt(e.map((e=>y([],e,t))),mt)}return()=>{for(let r=4;r--;)for(const a of[[[.04-.1,.1,.035],[.14,.1,.035],[.44,2,.035],[.04-.4,2,.035]],[[.44,2,-.035],[.14,.1,-.035],[.04-.1,.1,-.035],[.04-.4,2,-.035]],[[.44,2,-.035],[.44,2,.035],[.14,.1,.035],[.14,.1,-.035]],[[.04-.4,2,.035],[.04-.4,2,-.035],[.04-.1,.1,-.035],[.04-.1,.1,.035]],[[.04-.4,2,.035],[.44,2,.035],[.44,2,-.035],[.04-.4,2,-.035]],[[.14,.1,-.035],[.14,.1,.035],[.04-.1,.1,.035],[.04-.1,.1,-.035]]])Dt(a.map((a=>{const n=[];f(a,a,e);var o=[],i=[];return o[0]=a[0]-e[0],o[1]=a[1]-e[1],o[2]=a[2]-e[2],i[0]=o[2]*Math.sin(-.16)+o[0]*Math.cos(-.16),i[1]=o[1],i[2]=o[2]*Math.cos(-.16)-o[0]*Math.sin(-.16),a[0]=i[0]+e[0],a[1]=i[1]+e[1],a[2]=i[2]+e[2],b(a,a,e,9+3.1416*r/2+1.25664*ot),y(n,a,t),n})),Mt)}},ce=[D,L,T],fe=[{faces:[[[0,0,0],[.15,0,0],[.15,1,0],[0,1,0]],[[.85,0,0],[1,0,0],[1,1,0],[.85,1,0]],[[.15,0,0],[.85,0,0],[.85,.15,0],[.15,.15,0]],[[.85,1,0],[.15,1,0],[.15,.85,0],[.85,.85,0]]],color:mt},{faces:[[[.04,.04,.04],[.96,.04,.04],[.96,.96,.04],[.04,.96,.04]]],color:gt},{faces:[Array.from({length:3}).map(((t,e,r)=>[.17*Math.sin(412+-e/r.length*6.2832)+.5,.17*Math.cos(412+-e/r.length*6.2832)+.5,.035]))],color:dt}],ue=(t,e)=>{for(let r=6;r--;){const a=ce[(r+0)%3],n=ce[(r+1)%3],o=ce[(r+2)%3],i=3<=r?1:-1;for(const{faces:r,color:l}of fe)for(const h of r){const r=h.map((([e,r,l])=>{const h=[0,0,0];return M(h,h,o,.016*(e-.5)),M(h,h,a,.016*(r-.5)),M(h,h,n,.016*(l-.5)*i),y(h,h,t),h}));-1===i&&r.reverse(),e(r,l)}}},de=rt(1,1,.35),Me=Array.from({length:6},(()=>[.46*Math.random()+.27,.46*Math.random()+.27,.1*(1+Math.random())])),me=(t,e)=>.5<Me.reduce(((r,[a,n,o])=>(a-=t,n-=e,r+Math.exp((a*a+n*n)/(o*o)*-.5))),0)+1.7*de(t,e)*(.4+.6*(.5-Math.sqrt((t-.5)**2+(e-.5)**2))),ge=[];for(;60>ge.length;){let t=Math.random(),e=Math.random(),r=[t,e];me(t,e)&&ge.every((t=>5e-4<R(r,t)))&&ge.push(r)}let pe=wt([],ge),ve=(t,e)=>{var r=[];r[0]=t,r[1]=e,r[0]-=pe[0],r[1]-=pe[1];var a=r[0],n=r[1];for(0<(a=a*a+n*n)&&(a=1/Math.sqrt(a)),r[0]*=a,r[1]*=a,a=1/0,n=26;n--;){var o=1e-6+.15*Math.random();const n=o*(Math.random()-.5)*.7,i=t+o*r[0]+n*r[1],l=e+o*r[1]-n*r[0];(o=o*o+n*n)<a&&!(0<=i&&1>i&&0<=l&&1>l&&me(i,l))&&(a=o)}return Math.min(1,Math.sqrt(a)/.15)},Ae=rt(3,3,.14),we=rt(3,3,.32),ye=rt(3,3,.73),Fe=(t,e)=>{let r;return r=.5*Ae(t+1.2,e+1.16)-.3,r+=.6*we(t+1.7,e+1.6),r+=.8*ye(t+1.57,e+1.2),.3*(.7*(t=ve(t,e))+r*t)},be=(t=>{const e=nt(t),r=[];for(t=t.length;t--;){const o=[];for(var a=e.length;a--;a)e[a].indexes.includes(t)&&o.push(a);if(0===o.length)break;var n=o.shift();let i,l;a=[n];for(let r=3;r--;)e[n].indexes[r]===t&&(i=e[n].indexes[(r+1)%3],l=e[n].indexes[(r+2)%3]);for(;-1!==(n=o.findIndex((t=>e[t].indexes.includes(i))));){n=o.splice(n,1)[0],a.push(n);for(const r of e[n].indexes)if(r!==i&&r!==t){i=r;break}if(l===i){r.push(a);break}}}return{faces:r,vertices:e.map((({circle:t})=>t.center))}})(ge),xe=be.vertices.map((([t,e])=>[t,e,0<=t&&1>t&&0<=e&&1>e?Fe(t,e):0])),Re=[],Ee=[];for(;be.faces.length&&8>Ee.length;){let[t]=be.faces.splice(Math.floor(Math.random()*be.faces.length),1),e=t.map((t=>xe[t]));if(e.some((t=>{var e=t[0],r=t[1];return!(0<=e&&1>e&&0<=r&&1>r)||.14>ve(t[0],t[1])})))continue;if(e.some(((t,e,r)=>.005>x(r[e],r[(e+1)%r.length]))))continue;let r=3.1416*yt(e)**2,a=At(e);if(.006>a||.3>a/r)continue;let n=t.filter((t=>Re[t]));if(2<n.length)continue;for(;3>n.length;){let e=0,r=0;for(let a of t)if(!n.includes(a)){let t=n.reduce(((t,e)=>t+m(xe[a],xe[e])),0);t>e&&(r=a,e=t)}n.push(r)}let o=A([],u(S,xe[n[1]],xe[n[0]]),u(U,xe[n[1]],xe[n[2]]));p(o,o);let i=[];for(let e=0;e<t.length;e++){let r=v(o,u(S,xe[t[e]],xe[n[0]]))/v(o,T);i[e]=r}if(!i.some((t=>.05<Math.abs(t)))){for(let e=0;e<t.length;e++)M(xe[t[e]],xe[t[e]],T,-i[e]),Re[t[e]]=!0;Ee.push(e)}}let Be=Ee.flat(1).filter(((t,e,r)=>e===r.indexOf(t)));Be.push(...Ee.map((t=>wt([],t))));let De=Ee.map((t=>((t,e)=>{const r=wt([],t);return t.map((t=>{const e=s(t=u([],t,r));return d(t,t,(e+.04)/e),f(t,t,r)}))})(t).map((t=>[t[0],t[1],0])))),_e=0;for(;100>_e&&800>Be.length;){let t=Math.random(),e=Math.random(),r=[t,e];me(t,e)&&!De.some((r=>vt(r,T,[t,e,0])))&&Be.every((t=>5e-5<R(r,t)))?(_e=0,r.push(Fe(t,e)),Be.push(r)):_e++}Be.slice();let Te=nt(Be).map((({indexes:t})=>t)),Le=[];for(let t of Ee)for(let e=t.length;e--;){let r=t[e],a=t[(e+1)%t.length];Le.some((([t,e])=>t===r&&e===a||e===r&&t===a))||Le.push([r,a])}for(let t=3;t--;)t:for(let t=Te.length;t--;)for(let e=3;e--;){let r=Te[t][e],a=Te[t][(e+1)%3],n=Be[r],o=Be[a];for(let[e,i]of Le){var Ye;e:{let t,r;const a=e[0],l=e[1],h=n[0],s=n[1],c=i[0]-e[0],f=i[1]-e[1],u=o[0]-n[0],M=o[1]-n[1];if(1e-6>Math.abs(c*M-f*u)){Ye=null;break e}if(r=1e-6>Math.abs(u)?(h-a)/c:1e-6>Math.abs(M)?(s-l)/f:((a-h)/u-(l-s)/M)/(f/M-c/u),0>r||1<r){Ye=null;break e}const d=a+r*c,p=l+r*f;t=1e-6<Math.abs(u)?(d-h)/u:(p-s)/M,Ye=0>t||1<t?null:[d,p,r,t]}let l=Ye;if(l&&1e-6<l[2]&&1e-6<1-l[2]&&1e-6<l[3]&&1e-6<1-l[3]){let n=w([],e,i,l[2]),o=Be.length;Be.push(n);for(let e=Te.length;e--;)if(Te[e].includes(r)&&Te[e].includes(a)){let[n]=Te.splice(e,1);e!==t&&(t=Math.max(0,t-1));let i=0;for(let t of n)t!==r&&t!==a&&(i=t);Te.push([r,i,o],[a,i,o])}continue t}}}for(let t=Te.length;t--;){let e=wt([],Te[t].map((t=>Be[t])));Ee.some((t=>vt(t,T,[e[0],e[1],0])))&&Te.splice(t,1)}for(let t=Te.length;t--;){let e=wt(S,Te[t].map((t=>Be[t])));me(e[0],e[1])||Te.splice(t,1)}for(let t=Te.length;t--;)for(let e=3;e--;){let r=Te[t][e],a=Te[t][(e+1)%3],n=0;for(let t=Te.length;t--;)for(let e=3;e--;){let o=Te[t][e],i=Te[t][(e+1)%3];(r===o&&a===i||r===i&&a===o)&&n++}if(1===n){let t=Be.length;Be.push(...[Be[r],Be[a]].map((t=>{let e=[t[0]-pe[0],t[1]-pe[1],0];return p(e,e),e[2]=-5,p(e,e),d(e,e,.1),f(e,e,t),e})).reverse()),Te.push([r,a,t],[r,t+1,t])}}let Se=[],Ue=[],Ie=o();i(Ie,Ie,h([],[2,-1,2])),i(Ie,Ie,l([],[-pe[0],0,-pe[1]]));var Ce=[],qe=Math.sin(1.5708),Pe=Math.cos(1.5708);Ce[0]=1,Ce[1]=0,Ce[2]=0,Ce[3]=0,Ce[4]=0,Ce[5]=Pe,Ce[6]=qe,Ce[7]=0,Ce[8]=0,Ce[9]=-qe,Ce[10]=Pe,Ce[11]=0,Ce[12]=0,Ce[13]=0,Ce[14]=0,Ce[15]=1,i(Ie,Ie,Ce);for(let t of Ee){let e=t.map((t=>y([],t,Ie))),r=pt([],e[1],e[0],e[2],e[0]);0>r[1]&&(e.reverse(),d(r,r,-1)),p(r,r);let a=Ut;It(e,ut,r);let n=st.length;st.push({growth:0===n?90:50*Math.random(),area:At(e),type:"growing"}),Ue.push(he(e,n));for(let t=a;t<Ut;t++)Se[t]=n}for(let t of Te){let e=t.map((t=>y([],Be[t],Ie))),r=pt([],e[1],e[0],e[2],e[0]);0>r[1]&&(e.reverse(),d(r,r,-1)),p(r,r),It(e,ft,r)}let He=Ut,ke=.6*Math.random()+.2,ze=.6*Math.random()+.2,Xe=[],Ne=.1;for(;.4>Ne&&100>Xe.length;){let t=Math.random(),e=Math.random(),r=[t,e,0];if(Ne*=1.02,Math.hypot(ke-t,ze-e)<Ne&&me(t,e)&&.14<ve(t,e)&&!De.some((r=>vt(r,T,[t,e,0])))&&Xe.every((t=>.012<x(r,t)))){let a=Fe(t,e),n=0;for(let r=5;r--;)n=Math.max(n,Fe(t+.009*Math.sin(r/5*6.2832),e+.009*Math.cos(r/5*6.2832))-a);Xe.push(r.slice()),r[0]=2*(r[0]-pe[0]),r[2]=2*(r[1]-pe[1]),r[1]=a+n;let s=o();i(s,s,l([],r)),i(s,s,h([],[.018,.018,.018]));var We=s,Oe=s,Ge=[],Ve=6.2832*Math.random(),Ke=Math.sin(Ve),je=Math.cos(Ve);Ge[0]=je,Ge[1]=0,Ge[2]=-Ke,Ge[3]=0,Ge[4]=0,Ge[5]=1,Ge[6]=0,Ge[7]=0,Ge[8]=Ke,Ge[9]=0,Ge[10]=je,Ge[11]=0,Ge[12]=0,Ge[13]=0,Ge[14]=0,Ge[15]=1,i(We,Oe,Ge),Ue.push(se(s)),_e=0}}let Je=1e-5,Qe=1e-5;for(;!me(Je,Qe)||.14>ve(Je,Qe)||Ee.some((t=>vt(t,T,[Je,Qe,0])));)Je=.6*Math.random()+.2,Qe=.6*Math.random()+.2;let Ze=()=>{var t=.02;for(let e=150;e--;){const e=Je+2*(Math.random()-.5)*t,r=Qe+2*(Math.random()-.5)*t,a=[e,r,0];if(0<=e&&1>e&&0<=r&&1>r&&Math.hypot(Je-e,Qe-r)<t&&me(e,r)&&.14<ve(e,r)&&!Ee.some((t=>vt(t,T,[e,r,0])))&&Xe.every((t=>.001<x(a,t))))return a[0]=2*(a[0]-pe[0]),a[2]=2*(a[1]-pe[1]),a[1]=5,t=Jt(a,_,Lt,He),a[1]=t.p[1],a;t+=.012}return[0,-10,0]},$e=[],tr=[],er=[];Ue.push((()=>{for(;void 0!==it[$e.length];){var t=wt([],Ee[it[$e.length]]);y(t,t,Ie),t[1]+=.016;var e=Ze();e[1]+=.008;for(let t of $e).00512>x(e,t)&&(c(e,t),e[1]+=.01648);let r=[(t[0]+e[0])/2,1.2,(t[2]+e[2])/2];$e.push(e),tr.push({a:t,b:e,c:r,angle:6.2832*Math.random(),date0:ot,duration:.4*(m(t,r)+m(r,e))})}for(t=tr.length;t--;){let{a:r,b:a,c:n,date0:o,duration:i}=tr[t];e=Math.min((ot-o)/i,1),l(er,[r[0]*(1-e)*(1-e)+n[0]*(1-e)*e+a[0]*e*e,r[1]*(1-e)*(1-e)+n[1]*(1-e)*e+a[1]*e*e,r[2]*(1-e)*(1-e)+n[2]*(1-e)*e+a[2]*e*e]),1===e?(tr.splice(t,1),ue(er,qt)):ue(er,Dt)}}));let rr,ar=([{pageX:t,pageY:e}])=>{(t=Vt(t/window.innerWidth*2-1,-(e/window.innerHeight*2-1),Lt,He))&&void 0!==Se[t.i]&&lt.push({type:"work-cell",cellIndex:Se[t.i],touchPosition:t.p})},nr=0;t.addEventListener("mousedown",(t=>{t=[t],nr=Date.now(),rr=t,tt(t)})),t.addEventListener("mousemove",(t=>{$(t=[t]),Z(t),$t(t)})),t.addEventListener("mouseup",(()=>{J=j=null,tt([]),Date.now()<nr+300&&ar(rr)})),t.addEventListener("touchstart",(t=>{t=Array.from(t.touches),nr=Date.now(),rr=t,tt(t)}),{passive:!0}),t.addEventListener("touchmove",(t=>{t=Array.from(t.touches),$(t),Z(t),$t(t)}),{passive:!0}),t.addEventListener("touchend",(t=>{t=Array.from(t.touches),J=j=null,tt(t),Date.now()<nr+300&&ar(rr)}),{passive:!0});let or=[0,-10,0],ir=(t,e,r)=>(r=t.createShader(r),t.shaderSource(r,e),t.compileShader(r),r),lr=(t,e,r)=>(e=t.getAttribLocation(e,r),t.enableVertexAttribArray(e),e);var hr;{const t=ir(r,"attribute vec3 a;attribute vec3 b;attribute vec3 c;uniform mat4 d;varying lowp vec3 f;varying lowp vec3 g;void main(void){gl_Position=d*vec4(a,1.);g=b;f=c;}",r.VERTEX_SHADER),e=ir(r,"precision highp float;varying lowp vec3 f;varying lowp vec3 g;uniform float e;void main(void){vec3 A=vec3(1.,0.8,1.);normalize(A);float B=dot(g,A);float C=e*2.*1.;vec3 D=vec3(sin(C),1.5,cos(C));normalize(D);float E=dot(g,D);gl_FragColor=vec4(f,1.);gl_FragColor.rgb*=0.6+clamp(B,-0.47,10.)*0.45;}",r.FRAGMENT_SHADER),a=r.createProgram();r.attachShader(a,t),r.attachShader(a,e),r.linkProgram(a),hr=a}let sr=lr(r,hr,"c"),cr=lr(r,hr,"b"),fr=lr(r,hr,"a");var ur,dr;ur=r.getUniformLocation(hr,"e"),dr=r.getUniformLocation(hr,"d");let Mr=Date.now(),mr=r.createBuffer(),gr=new Uint16Array(1e5).map(((t,e)=>e));r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,mr),r.bufferData(r.ELEMENT_ARRAY_BUFFER,gr,r.STATIC_DRAW);let pr=t=>{const e=r.createBuffer(),a=r.createBuffer(),n=r.createBuffer();let o=0;return{updateGeometry:(i,l,h,s)=>{r.bindBuffer(r.ARRAY_BUFFER,n),r.bufferData(r.ARRAY_BUFFER,i,t),r.bindBuffer(r.ARRAY_BUFFER,e),r.bufferData(r.ARRAY_BUFFER,l,t),r.bindBuffer(r.ARRAY_BUFFER,a),r.bufferData(r.ARRAY_BUFFER,h,t),o=s},draw:()=>{r.useProgram(hr),r.uniformMatrix4fv(dr,!1,O),r.uniform1f(ur,(Date.now()-Mr)/1e3),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,mr),r.bindBuffer(r.ARRAY_BUFFER,n),r.vertexAttribPointer(sr,3,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,a),r.vertexAttribPointer(cr,3,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,e),r.vertexAttribPointer(fr,3,r.FLOAT,!1,0,0),r.drawElements(r.TRIANGLES,o,r.UNSIGNED_SHORT,0)}}},vr=pr(r.STATIC_DRAW),Ar=pr(r.DYNAMIC_DRAW),wr=0;r.clearColor(0,0,0,0),r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight),r.enable(r.CULL_FACE),r.cullFace(r.BACK),r.enable(r.DEPTH_TEST),r.depthFunc(r.LESS);let yr=()=>{Rt=0;for(let r=ie.length;r--;){const{startDate:a,color:n,duration:o,angleA:i,angleB:l,positionA:h,positionB:s,sizeA:u,sizeB:M}=ie[r];var t=(ot-a)/o;if(!(1<t)){var e=1-(1-t)**2;w(Y,h,s,e),t=(1-e)*u+e*M,e=(1-e)*i+e*l;for(let r=0;3>r;r++)c(S,le[r]),b(S,S,B,e),F(S,S,G),d(S,S,t),f(S,S,Y),Ft[9*Rt+3*r]=S[0],Ft[9*Rt+3*r+1]=S[1],Ft[9*Rt+3*r+2]=S[2],xt[9*Rt+3*r]=n[0],xt[9*Rt+3*r+1]=n[1],xt[9*Rt+3*r+2]=n[2],bt[9*Rt+3*r]=0,bt[9*Rt+3*r+1]=0,bt[9*Rt+3*r+2]=1;Rt++}}for(const t of Ue)t();(()=>{const t=[D,L,T];for(let e=3;e--;){const r=t[(e+0)%3],a=t[(e+1)%3],n=t[(e+2)%3],o=[[-1,1],[-1,-1],[1,-1],[1,1]];for(const t of[1,-1]){const e=o.map((([e,o])=>{const i=or.slice();return M(i,i,n,.01*t),M(i,i,r,.01*e),M(i,i,a,.01*o),i}));1===t&&e.reverse(),Dt(e,n)}}})(),Ar.updateGeometry(xt,Ft,bt,3*Rt),wr<Ut&&(vr.updateGeometry(St,Lt,Yt,3*Ut),wr=Ut),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),vr.draw(),Ar.draw()};yr();let Fr=()=>{yr();{const t=1/60;for(ot+=t;lt.length;){const t=lt.shift();if("work-cell"===t.type){const e=st[t.cellIndex];if("grown"===e.type)e.ticTarget++,e.ticImmunityDate=ot,ht.push({p:t.touchPosition,i:t.cellIndex,date:ot}),11<=e.ticTarget&&(e.growth=0,e.type="growing",e.growingSinceDate=ot,it.push(t.cellIndex))}}for(const e of st)switch(e.type){case"growing":e.growth+=15*t,100<=e.growth&&(e.growth=100,e.type="grown",e.grownSinceDate=ot,e.tic=0,e.ticTarget=0,e.ticVelocity=0);break;case"grown":ot>e.ticImmunityDate+.45&&e.ticTarget&&(e.ticTarget=Math.max(0,e.ticTarget-Math.min(14,.1+22*e.ticTarget)*t)),e.ticVelocity+=(120*(e.ticTarget-e.tic)-6*e.ticVelocity)*t,e.tic+=e.ticVelocity*t}for(;ht[0]&&ht[0].date+500<ot;)ht.shift()}requestAnimationFrame(Fr)},br=document.getElementById("splash"),xr=()=>{br.removeEventListener("click",xr),br.style.opacity="0",setTimeout((()=>br.parentElement.removeChild(br)),200),Fr()};br.addEventListener("click",xr)</script>