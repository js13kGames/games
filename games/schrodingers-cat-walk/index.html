<!doctype html><meta name=viewport content="width=device-width"><title>Schrödinger’s Catwalk - js13kGames 2025</title><style>:root{--bg:#0c0b10;--ink:#f7f7fa;--accent:#ffd54a;--bad:#ff4a68;--good:#54e0a8;--muted:#9aa1ab;--luckyA:#9be7d5;--luckyB:#1ea07f;--unluckyA:#3a235a;--unluckyB:#1a112e;--divider:#ffffff;--shadow:0 14px 28px rgba(0,0,0,.25),0 10px 10px rgba(0,0,0,.22)}*{box-sizing:border-box}body,html{height:100%}body{margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,sans-serif}.wrap{max-width:1080px;margin:0 auto;padding:16px}header{display:flex;align-items:center;justify-content:space-between;margin:8px 0 12px 0}.brand{display:flex;gap:12px;align-items:center}.logo{width:40px;height:40px;border-radius:12px;background:linear-gradient(135deg,var(--luckyA),var(--luckyB));position:relative;box-shadow:var(--shadow)}.logo:after{content:"";position:absolute;right:-4px;top:-4px;width:20px;height:20px;border-radius:6px;background:linear-gradient(135deg,var(--unluckyA),var(--unluckyB));border:2px solid #111}h1{font-size:20px;letter-spacing:.5px;margin:0}.controls{display:flex;gap:8px;align-items:center}.btn{background:#151423;border:1px solid #2a2740;color:var(--ink);padding:8px 12px;border-radius:12px;font-weight:800;cursor:pointer;box-shadow:var(--shadow);transition:transform .08s ease}.btn:hover{transform:translateY(-1px)}.btn--accent{background:var(--accent);color:#111;border-color:#ffd54a}.gameShell{position:relative;border-radius:16px;overflow:hidden;border:2px solid #2a2740;box-shadow:var(--shadow);background:#0f0e18}canvas{display:block;width:100%;height:auto;background:linear-gradient(90deg,var(--luckyA),var(--luckyB) 49.8%,var(--divider) 49.8%,var(--divider) 50.2%,var(--unluckyA) 50.2%,var(--unluckyB));image-rendering:pixelated}.hud{position:absolute;inset:0;pointer-events:none}.hudRow{position:absolute;left:16px;right:16px;top:12px;display:flex;justify-content:space-between;align-items:center;gap:8px}.pill{pointer-events:auto;background:#151423;border:1px solid #2a2740;padding:8px 10px;border-radius:999px;display:flex;align-items:center;gap:10px;font-weight:800}.pill.good{border-color:#206b55;color:var(--good)}.pill.bad{border-color:#5e1930;color:var(--bad)}.toast{position:absolute;left:50%;top:64px;transform:translateX(-50%);background:#111028;border:1px solid #2a2740;border-radius:12px;padding:10px 14px;font-weight:800;opacity:0;transition:opacity .25s ease,transform .25s ease}.toast.show{opacity:1;transform:translate(-50%,0)}.modal{position:fixed;inset:0;background:rgba(7,6,14,.65);display:none;align-items:center;justify-content:center;padding:16px}.modal.open{display:flex}.card{background:#0f0f1b;border:1px solid #2a2740;border-radius:16px;max-width:780px;width:100%;box-shadow:var(--shadow)}.card header{padding:14px 16px;border-bottom:1px solid #2a2740}.card .content{padding:16px;display:grid;gap:12px}.row{display:flex;gap:12px;align-items:center}label{opacity:.8}input[type=range]{width:160px}.glitch{position:absolute;inset:0;pointer-events:none;mix-blend-mode:screen;opacity:0;transition:opacity .25s ease}.glitch.show{opacity:.9}.meta{position:absolute;right:12px;bottom:12px;opacity:.6;font-size:12px}.badge{background:#1a8a66;color:#031a14;border-radius:999px;padding:4px 8px;font-weight:800}.game-over{position:absolute;inset:0;background:rgba(7,6,14,.85);display:none;flex-direction:column;align-items:center;justify-content:center;gap:16px;z-index:100}.game-over.show{display:flex}.game-over h2{font-size:48px;margin:0;color:var(--bad)}.game-over .score{font-size:32px;margin:0}.game-over .message{font-size:20px;margin:0;text-align:center;max-width:80%}.game-over .high-score{font-size:18px;color:var(--accent);margin:0}@media (prefers-reduced-motion:reduce){.btn{transition:none}.toast{transition:none}}</style><div class=wrap><header><div class=brand><div class=logo aria-hidden=true></div><h1>Schrödinger’s Catwalk</h1></div><div class=controls><button class="btn btn--accent" id=playBtn aria-label="Play or Pause">Play</button> <button class=btn id=photoBtn aria-label="Photo Mode (toggle UI)">Photo</button> <button class=btn id=settingsBtn aria-label="Open Settings">Settings</button></div></header><div class=gameShell role=application aria-label="Game canvas: two realities side-by-side. Use arrows/WASD to move and Space to jump."><canvas id=game width=1200 height=600></canvas><div class=hud id=hud><div class=hudRow><div class=pill id=scorePill>Score <span id=score>0</span></div><div class="pill good" id=healthPill>Health <span id=health>100</span></div><div class=pill id=seedPill>Seed <span id=seedOut>—</span></div></div><div class=toast id=toast>IS THE CAT ALIVE?</div><canvas class=glitch id=glitch width=1200 height=600 aria-hidden=true></canvas><div class=meta><span class=badge id=modeBadge>NORMAL</span></div></div><div class=game-over id=gameOver><h2>GAME OVER</h2><div class=score>Score: <span id=finalScore>0</span></div><div class=high-score>High Score: <span id=highScore>0</span></div><div class=message id=gameOverMessage>The cat is neither alive nor dead... just disappointed.</div><button class="btn btn--accent" id=restartBtn>Play Again</button></div></div><div class=modal id=settingsModal aria-hidden=true aria-label=Settings><div class=card><header><strong>Settings</strong></header><div class=content><div class=row><label>Difficulty</label> <select id=diff><option value=0>Gentle<option value=1 selected=selected>Normal<option value=2>Spicy<option value=3>Quantum Chaos</select></div><div class=row><label>Motion</label> <select id=motion><option value=1>Full<option value=0>Reduce</select></div><div class=row><label>Key: Jump</label> <select id=keyJump><option>Space<option>KeyW<option>ArrowUp</select></div><div class=row><label>Key: Left/Right</label> <select id=keyLeft><option>ArrowLeft<option>KeyA</select> <select id=keyRight><option>ArrowRight<option>KeyD</select></div><div class=row><button class="btn btn--accent" id=saveSettings>Save</button> <button class=btn id=closeSettings>Close</button></div></div></div></div></div><audio id=jumpSound src=data: preload=auto></audio><audio id=hurtSound src=data: preload=auto></audio><audio id=deathSound src=data: preload=auto></audio><audio id=collectSound src=data: preload=auto></audio><audio id=meowSound src=data: preload=auto></audio><script>const t=t=>document.querySelector(t),e=(t,e,i)=>Math.max(e,Math.min(i,t)),i=(t,e,i)=>t+(e-t)*i,l=2*Math.PI,s={jump:t("#jumpSound"),hurt:t("#hurtSound"),death:t("#deathSound"),collect:t("#collectSound"),meow:t("#meowSound")};function o(t,e=1){if(m.muted)return;const i=s[t].cloneNode();i.volume=e,i.play().catch(t=>console.log("Audio play failed:",t))}["jumpSound","hurtSound","deathSound","collectSound","meowSound"].forEach(t=>{const e=document.getElementById(t);e.volume=.5,e.load()});const n={get(t,e){try{const i=localStorage.getItem(t);return i?JSON.parse(i):e}catch{return e}},set(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch{}}},h=document.getElementById("game"),a=h.getContext("2d"),c=document.getElementById("glitch").getContext("2d"),r=h.width,f=h.height,d=r/2,m={running:!1,time:0,dt:0,acc:0,fixed:1/60,speed:260,gravity:2200,health:100,score:0,seed:Math.floor(Date.now()/864e5),rng:null,diff:1,motion:1,muted:!1,observer:!1,distance:0,multiplier:1,combo:0,comboTime:0};function u(){const t=m.diff;m.speed=[220,260,300,340][t],m.gravity=[2e3,2200,2350,2600][t]}const y={left:!1,right:!1,jump:!1,jumpBuffered:!1,any:!1};let g=n.get("keys",{jump:"Space",left:"ArrowLeft",right:"ArrowRight"});function b(t,e){const i=t.code;i===g.left&&(y.left=e),i===g.right&&(y.right=e),i===g.jump&&(y.jump=e,e&&(y.jumpBuffered=!0)),y.any=e||y.left||y.right||y.jump,e||"KeyP"!==i||D()}window.addEventListener("keydown",t=>b(t,!0)),window.addEventListener("keyup",t=>b(t,!1)),h.addEventListener("touchstart",t=>{t.changedTouches[0].clientX-h.getBoundingClientRect().left<d*h.clientWidth/r?y.left=!0:y.right=!0,y.jumpBuffered=!0,y.jump=!0,t.preventDefault()},{passive:!1}),h.addEventListener("touchend",()=>{y.left=y.right=y.jump=!1});class p{constructor(t,e,i,l,s){this.x=t,this.y=e,this.w=i,this.h=l,this.t=s}}function w(t,e){return t.x<e.x+e.w&&t.x+t.w>e.x&&t.y<e.y+e.h&&t.y+t.h>e.y}function v(t,e,i,s,o=!1){switch(s){case"spike":t.fillStyle=o?"#c43b5a":"#ff758d",t.beginPath();for(let l=0;l<3;l++)t.moveTo(e+8*l,i+22),t.lineTo(e+4+8*l,i),t.lineTo(e+8+8*l,i+22);t.fill();break;case"ghost":t.fillStyle=o?"#7d5bbe":"#9d7bde",t.beginPath(),t.arc(e+11,i+11,10,0,l),t.fill(),t.fillStyle="#000",t.beginPath(),t.arc(e+7,i+8,2,0,l),t.arc(e+15,i+8,2,0,l),t.fill();break;case"laser":t.fillStyle=o?"#ff3355":"#ff5577",t.fillRect(e,i,22,4),t.fillStyle="#333",t.fillRect(e,i+4,22,8)}}function S(t,e,i,s,o=!1){switch(s){case"fish":t.fillStyle=o?"#b2b8c6":"#ffffff",t.fillRect(e,i,16,10),t.fillStyle="#2b2e3a",t.fillRect(e+2,i+4,2,2),t.fillRect(e+12,i+2,4,6);break;case"star":t.fillStyle=o?"#ffcc44":"#ffdd66",t.beginPath();for(let s=0;s<5;s++)t.lineTo(e+8+8*Math.cos(l*s/5-l/4),i+8+8*Math.sin(l*s/5-l/4)),t.lineTo(e+8+4*Math.cos(l*s/5-l/4+l/10),i+8+4*Math.sin(l*s/5-l/4+l/10));t.closePath(),t.fill();break;case"clock":t.fillStyle=o?"#44ccff":"#66ddff",t.beginPath(),t.arc(e+8,i+8,8,0,l),t.fill(),t.fillStyle="#000",t.fillRect(e+7,i+4,2,5),t.fillRect(e+7,i+7,5,2)}}function x(t,e,i,l,s=!1){switch(l){case"human":t.fillStyle=s?"#f08c3c":"#ffb36b",t.fillRect(e,i,22,28),t.fillStyle="#2b2e3a",t.fillRect(e+4,i-8,14,12);break;case"scientist":t.fillStyle=s?"#3c8cf0":"#5cadff",t.fillRect(e,i,22,28),t.fillStyle="#fff",t.fillRect(e+5,i+10,12,18),t.fillStyle="#2b2e3a",t.fillRect(e+4,i-6,14,8);break;case"dog":t.fillStyle=s?"#8c5c2c":"#ac7c4c",t.fillRect(e+5,i+15,12,13),t.fillRect(e+2,i+5,18,10),t.fillRect(e,i,6,6),t.fillRect(e+16,i,6,6),t.fillRect(e+15,i+25,8,4)}}const k=document.getElementById("score"),T=document.getElementById("health"),M=document.getElementById("toast"),R=document.getElementById("seedOut"),B=document.getElementById("glitch"),P=document.getElementById("hud"),E=document.getElementById("gameOver"),L=document.getElementById("finalScore"),A=document.getElementById("highScore"),C=document.getElementById("gameOverMessage"),I=["The cat is neither alive nor dead... just disappointed.","Schrödinger would be confused by your performance.","Maybe quantum mechanics isn't your strong suit.","The cat has used up its 9 lives... and then some.","Reality has collapsed. And not in a good way.","You've observed the worst possible outcome.","The cat has decided to find a new owner.","Quantum superposition has never been so disappointing.","Even in a parallel universe, you failed.","The cat has filed a formal complaint."];function j(t){m.score+=t,k.textContent=m.score,m.multiplier>1?k.style.color="#ffdd00":k.style.color=""}function F(i){m.health=e(m.health+i,0,120),T.textContent=m.health,m.health<30?T.style.color="#ff4a68":m.health<70?T.style.color="#ffd54a":T.style.color="#54e0a8",m.health<=0&&function(){m.running=!1,o("death",.8);const e=n.get("highScore",0);m.score>e&&(n.set("highScore",m.score),q(`New High Score: ${m.score}!`,!1)),L.textContent=m.score,A.textContent=Math.max(m.score,e);const i=I[Math.floor(Math.random()*I.length)];C.textContent=i,E.classList.add("show"),t("#playBtn").textContent="Play Again",O.qFlicker=.6,m.health=100}()}function q(t,e){M.textContent=t,M.classList.add("show"),e?(M.style.borderColor="#5e1930",M.style.color="#ff4a68"):(M.style.borderColor="#206b55",M.style.color="#54e0a8"),clearTimeout(M._t),M._t=setTimeout(()=>M.classList.remove("show"),1200)}const O=new class{constructor(){this.x=200,this.y=f-160,this.w=46,this.h=34,this.vx=0,this.vy=0,this.grounded=!1,this.coyote=0,this.buffer=0,this.facing=1,this.anim=0,this.qFlicker=0,this.tailAngle=0,this.bodyBob=0,this.blinkTimer=0,this.blinkInterval=3+4*Math.random(),this.meowTimer=0,this.meowInterval=5+10*Math.random()}step(t){const l=(y.right?180:0)-(y.left?120:0);this.vx=i(this.vx,l,.2),this.x+=this.vx*t,this.vy+=m.gravity*t,this.y+=this.vy*t,this.x=e(this.x,60,d-60),this.grounded?this.coyote=.1:this.coyote=Math.max(0,this.coyote-t),this.buffer>0&&(this.buffer=Math.max(0,this.buffer-t)),y.jumpBuffered&&(this.buffer=.12,y.jumpBuffered=!1),!y.jump&&this.vy<-220&&(this.vy=-220),this.anim+=10*t,this.qFlicker=Math.max(0,this.qFlicker-t),this.tailAngle=.3*Math.sin(.5*this.anim),Math.abs(this.vx)>10?this.bodyBob=3*Math.sin(.8*this.anim):this.bodyBob=i(this.bodyBob,0,.1),this.blinkTimer+=t,this.blinkTimer>this.blinkInterval&&(this.blinkTimer=0,this.blinkInterval=3+4*Math.random()),this.meowTimer+=t,this.meowTimer>this.meowInterval&&this.grounded&&m.running&&(this.meowTimer=0,this.meowInterval=5+10*Math.random(),o("meow",.3)),this.y>f+100&&F(-100)}tryJump(){const t=m.rng()<.08+.02*m.diff;(this.grounded||this.coyote>0||function(t){return t.x<=60||t.x>=d-60}(this))&&this.buffer>0&&(this.buffer=0,this.grounded=!1,t?(q("Button says JUMP, does FALL.",!0),this.vy=900,o("hurt",.7)):(this.vy=-720,this.bodyBob=-6,o("jump",.5)))}draw(t,e){const i=0===e?this.x:d+(d-this.x-this.w),s=this.y+this.bodyBob,o=this.blinkTimer>2.8&&this.blinkTimer<3.2;t.fillStyle=0===e?"#8c7853":"#5a4a32",t.beginPath(),t.ellipse(i+this.w/2,s+this.h/2+2,this.w/2,this.h/2,0,0,l),t.fill(),t.strokeStyle=0===e?"#a6906b":"#6a5a42",t.lineWidth=1;for(let e=0;e<8;e++){const e=Math.random()*l,o=5+5*Math.random(),n=i+this.w/2+Math.cos(e)*(this.w/2-2),h=s+this.h/2+Math.sin(e)*(this.h/2-2),a=n+Math.cos(e)*o,c=h+Math.sin(e)*o;t.beginPath(),t.moveTo(n,h),t.lineTo(a,c),t.stroke()}t.fillStyle=0===e?"#6a5a42":"#4a3a22",t.beginPath(),t.moveTo(i+10,s+5),t.lineTo(i+5,s-5),t.lineTo(i+15,s+2),t.fill(),t.beginPath(),t.moveTo(i+this.w-10,s+5),t.lineTo(i+this.w-5,s-5),t.lineTo(i+this.w-15,s+2),t.fill(),t.fillStyle=0===e?"#d4a5a5":"#b48585",t.beginPath(),t.moveTo(i+10,s+3),t.lineTo(i+7,s-2),t.lineTo(i+13,s+1),t.fill(),t.beginPath(),t.moveTo(i+this.w-10,s+3),t.lineTo(i+this.w-7,s-2),t.lineTo(i+this.w-13,s+1),t.fill(),t.strokeStyle=0===e?"#6a5a42":"#4a3a22",t.lineWidth=4,t.beginPath(),t.moveTo(i+this.w-5,s+this.h-5);const n=i+this.w+15+8*Math.sin(this.tailAngle),h=s+this.h-15+5*Math.cos(this.tailAngle);t.quadraticCurveTo(i+this.w+5,s+this.h-10,n,h),t.stroke(),t.fillStyle=0===e?"#ffd54a":"#ffaa33",o?(t.fillStyle="#1a112e",t.fillRect(i+11,s+11,8,2),t.fillRect(i+this.w-19,s+11,8,2)):(t.beginPath(),t.ellipse(i+15,s+12,4,6,0,0,l),t.fill(),t.beginPath(),t.ellipse(i+this.w-15,s+12,4,6,0,0,l),t.fill(),t.fillStyle="#1a112e",t.beginPath(),t.ellipse(i+15+1.5*this.facing,s+12,2,2,0,0,l),t.fill(),t.beginPath(),t.ellipse(i+this.w-15+1.5*this.facing,s+12,2,2,0,0,l),t.fill(),t.fillStyle="#fff",t.beginPath(),t.ellipse(i+14+1.5*this.facing,s+11,1,1,0,0,l),t.fill(),t.beginPath(),t.ellipse(i+this.w-16+1.5*this.facing,s+11,1,1,0,0,l),t.fill()),t.fillStyle=0===e?"#ff758d":"#e6647c",t.beginPath(),t.ellipse(i+this.w/2,s+18,3,2,0,0,l),t.fill(),t.strokeStyle=0===e?"#ff758d":"#e6647c",t.lineWidth=1,t.beginPath(),t.moveTo(i+this.w/2,s+20),t.lineTo(i+this.w/2,s+22),t.stroke(),t.strokeStyle=0===e?"#f7f7fa":"#d7d7da",t.lineWidth=1,t.beginPath();for(let e=0;e<3;e++)t.moveTo(i+5,s+18+3*e),t.lineTo(i-5,s+16+3*e),t.moveTo(i+this.w-5,s+18+3*e),t.lineTo(i+this.w+5,s+16+3*e);t.stroke(),this.qFlicker>0&&(t.strokeStyle=m.time%.1<.05?"#ff4a68":"#54e0a8",t.lineWidth=2,t.beginPath(),t.ellipse(i+this.w/2,s+this.h/2,this.w/2+2,this.h/2+2,0,0,l),t.stroke())}},z=new class{constructor(){this.segs=[],this.haz=[],this.pick=[],this.npc=[],this.scroll=0,this.pool=[],this.biome=0,this.biomeTimer=0}reset(){this.segs.length=this.haz.length=this.pick.length=this.npc.length=0,this.scroll=0,this.biome=0,this.biomeTimer=0}spawnChunk(){const t=m.rng,l=i(.62*f,.82*f,t()),s=3+Math.floor(3*t());let o=r+40,n="plat";1===this.biome&&(n="cloud"),2===this.biome&&(n="tech");for(let i=0;i<s;i++){const s=120+160*t(),h=80+140*t()-10*m.diff,a=e(l+22*Math.sin(.5*m.time+i)+40*(t()-.5),.45*f,.86*f);if(this.segs.push(new p(o,a,s,18,n)),t()<.55){const e=t()<.7?"fish":t()<.85?"star":"clock";this.pick.push(new p(o+20+t()*(s-40),a-24,16,16,e))}if(t()<.38+.06*m.diff){const e=t()<.7?"spike":t()<.85?"ghost":"laser";this.haz.push(new p(o+20+t()*(s-60),a-14,22,22,e))}if(t()<.18){const e=t()<.7?"human":t()<.85?"scientist":"dog";this.npc.push(new p(o+.5*s,a-28,22,32,e))}o+=s+h}}step(t){const e=m.speed*t;if(this.scroll+=e,m.distance+=e,this.y>f+100)return void F(-100);const i=[this.segs,this.haz,this.pick,this.npc];for(const t of i)for(const i of t)i.x-=e;for(const t of i)for(;t.length&&t[0].x+t[0].w<-40;)t.shift();this.segs.length<6&&this.spawnChunk(),this.biomeTimer+=t,this.biomeTimer>20&&(this.biomeTimer=0,this.biome=(this.biome+1)%3),m.comboTime>0&&(m.comboTime-=t,m.comboTime<=0&&(m.combo=0,m.multiplier=1,q("Combo lost!",!0)))}collideCat(t){t.grounded=!1;for(const e of this.segs){const i=t.x+.5*t.w,l=t.y+t.h;i>e.x&&i<e.x+e.w&&l>e.y&&l<e.y+30&&t.vy>=0&&(t.y=e.y-t.h,t.vy=0,t.grounded=!0,m.rng()<.08+.02*m.diff&&"cloud"!==e.t&&(t.qFlicker=.25))}for(let e=0;e<this.pick.length;e++){const i=this.pick[e];if(w(t,i)){let t=0,l=0,s="";switch(i.t){case"fish":m.rng()<.82?(l=8,t=20,s="Fishbone +20",o("collect",.5)):(l=-12,s="Rotten fish! -12",o("hurt",.4));break;case"star":t=50,m.combo++,m.comboTime=5,m.multiplier=Math.min(5,1+.2*m.combo),s=`Star! x${m.multiplier.toFixed(1)}`,o("collect",.6);break;case"clock":m.comboTime+=5,s="Time extended!",o("collect",.4)}if(t>0){const e=Math.floor(t*m.multiplier);j(e),q(`${s} ${e}`,!1)}0!==l&&F(l),this.pick.splice(e,1),e--}}for(let e=0;e<this.haz.length;e++){const i=this.haz[e];w(t,i)&&(F(-20-6*m.diff),t.vy=-420,t.grounded=!1,q("spike"===i.t?"Spike!":"ghost"===i.t?"Ghost!":"Laser!",!0),o("hurt",.8),this.haz.splice(e,1),e--)}for(const e of this.npc)Math.abs(t.x+.5*t.w-(e.x+.5*e.w))<28&&Math.abs(t.y-e.y)<30&&(m.rng()<.5?(F(6),j(10),q("human"===e.t?"Pet +6":"scientist"===e.t?"Experiment +6":"Dog +6",!1),o("collect",.3)):(F(-10),t.vx-=160,q("human"===e.t?"Chased -10":"scientist"===e.t?"Shocked -10":"Bitten -10",!0),o("hurt",.6)))}draw(t){for(const e of this.segs)if("plat"===e.t?t.fillStyle="#1bdaac":"cloud"===e.t?t.fillStyle="#f0f0ff":t.fillStyle="#6b5b95",t.fillRect(e.x,e.y,e.w,e.h),"plat"===e.t)t.fillStyle="#0fa385",t.fillRect(e.x,e.y,e.w,4);else if("cloud"===e.t){t.fillStyle="#d0d0ff";for(let i=0;i<e.w;i+=15)t.beginPath(),t.arc(e.x+i,e.y,6,0,l),t.fill()}else{t.fillStyle="#524a6b";for(let i=0;i<e.w;i+=12)t.fillRect(e.x+i,e.y,4,4)}for(const e of this.segs){const i=d+(d-(e.x+e.w));if("plat"===e.t?t.fillStyle="#4a2c7e":"cloud"===e.t?t.fillStyle="#a0a0c0":t.fillStyle="#3a2c55",t.fillRect(i,e.y,e.w,e.h),"plat"===e.t)t.fillStyle="#3a1c6e",t.fillRect(i,e.y,e.w,4);else if("cloud"===e.t){t.fillStyle="#8080a0";for(let s=0;s<e.w;s+=15)t.beginPath(),t.arc(i+s,e.y,6,0,l),t.fill()}else{t.fillStyle="#2a1c45";for(let l=0;l<e.w;l+=12)t.fillRect(i+l,e.y,4,4)}}for(const e of this.haz)v(t,e.x,e.y,e.t),v(t,d+(d-(e.x+e.w)),e.y,e.t,!0);for(const e of this.pick)S(t,e.x,e.y,e.t),S(t,d+(d-(e.x+e.w)),e.y,e.t,!0);for(const e of this.npc)x(t,e.x,e.y,e.t),x(t,d+(d-(e.x+e.w)),e.y,e.t,!0)}};function $(t){m.seed=t??m.seed,m.rng=function(t){let e=t>>>0;return()=>{e+=1831565813;let t=Math.imul(e^e>>>15,1|e);return t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296}}(m.seed),m.score=0,m.health=100,m.time=.1,m.distance=0,m.multiplier=1,m.combo=0,m.comboTime=0,z.reset(),O.x=50,O.y=f-500,O.vx=0,O.vy=0,O.grounded=!1,O.qFlicker=0,R.textContent=m.seed;for(let t=0;t<3;t++)z.spawnChunk();k.style.color="",T.style.color="#54e0a8",E.classList.remove("show")}function J(t){m.time+=t,z.step(t),O.step(t),O.tryJump(),z.collideCat(O),m.running&&j(Math.floor(m.speed*t*.1)),m.rng()<.004+.002*m.diff&&function(){const t=B,e=c;e.clearRect(0,0,r,f);for(let t=0;t<f;t+=8){const i=.12*Math.random();e.fillStyle=`rgba(255,255,255,${i})`,e.fillRect(0,t,r,4)}t.classList.add("show"),setTimeout(()=>t.classList.remove("show"),250)}(),m.rng()<.003&&function(){const t=m.score+250+Math.floor(250*m.rng());k.textContent=t+" ?",setTimeout(()=>k.textContent=m.score,2e3)}(),m.rng()<.002&&m.observer&&q(`Odds: lie ${8+2*m.diff}%`,!1),m.time%5<t&&m.health>0&&m.health<100&&F(.5),m.time%20<t&&(m.speed+=8+2*m.diff)}let N=0;function W(t){if(!m.running)return N=t,requestAnimationFrame(W);const e=(t-N)/1e3;for(N=t,m.acc+=e,m.acc=Math.min(m.acc,.25);m.acc>=m.fixed;)J(m.fixed),m.acc-=m.fixed;!function(t,e,i){t.clearRect(0,0,e,i)}(a,r,f),z.draw(a),O.draw(a,0),O.draw(a,1),m.comboTime>0&&(a.fillStyle="#ffdd00",a.font="16px system-ui",a.textAlign="center",a.fillText(`COMBO x${m.multiplier.toFixed(1)}`,d,40)),requestAnimationFrame(W)}function D(){m.running=!m.running,t("#playBtn").textContent=m.running?"Pause":"Play",m.running&&(q("Run!",!1),m.health<=0&&$())}const K=t("#settingsModal");function U(){K.classList.remove("open"),K.setAttribute("aria-hidden","true")}t("#settingsBtn").addEventListener("click",function(){K.classList.add("open"),K.setAttribute("aria-hidden","false")}),t("#closeSettings").addEventListener("click",U),t("#saveSettings").addEventListener("click",()=>{m.diff=+t("#diff").value,m.motion=+t("#motion").value,g={jump:t("#keyJump").value,left:t("#keyLeft").value,right:t("#keyRight").value},n.set("keys",g),n.set("settings",{diff:m.diff,motion:m.motion}),u(),q("Settings saved",!1),U()}),t("#photoBtn").addEventListener("click",()=>{P.style.display="none"===P.style.display?"block":"none"}),t("#playBtn").addEventListener("click",()=>D()),t("#restartBtn").addEventListener("click",()=>{$(),T.style.color="#54e0a8",D()}),function(){const e=n.get("settings");e&&(m.diff=e.diff,m.motion=e.motion,t("#diff").value=m.diff,t("#motion").value=m.motion),u(),$(m.seed),requestAnimationFrame(W)}();const _=["ArrowUp","ArrowUp","ArrowDown","ArrowDown","ArrowLeft","ArrowRight","ArrowLeft","ArrowRight","KeyB","KeyA"],G=[];window.addEventListener("keydown",e=>{G.push(e.code),G.length>_.length&&G.shift(),_.every((t,e)=>G[e]===t)&&(m.observer=!m.observer,t("#modeBadge").textContent=m.observer?"OBSERVER":"NORMAL",q(m.observer?"Observer Mode":"Normal Mode",!1))})</script>