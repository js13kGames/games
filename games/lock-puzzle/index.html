<!doctype html><title>Lock Puzzle - js13kGames 2012</title><style>body{background:#000;color:#ff0}#gameboard{width:100%}#game{margin-right:auto;margin-left:auto;width:300px;text-align:center}h1{font-family:Verdana,Tahoma,Sans-Serif;font-size:14pt;font-weight:700;text-align:center}.rotate90{background-color:#ff0;transition:all .25s ease-in-out;transform:rotate(90deg)}.rotate0{background-color:#ff0;transition:all .25s ease-in-out;transform:rotate(0)}td{height:75px;width:75px;background:#000}.lock{width:75px;height:20px;text-align:center;cursor:pointer}</style><div id=gameboard><div id=game><h1>Unlock the puzzle!<br>(Get them all vertical)</h1><table border=2><tr><td><div id=cell_1_1 class=lock row=1 col=1></div><td><div id=cell_1_2 class=lock row=1 col=2></div><td><div id=cell_1_3 class=lock row=1 col=3></div><td><div id=cell_1_4 class=lock row=1 col=4></div><tr><td><div id=cell_2_1 class=lock row=2 col=1></div><td><div id=cell_2_2 class=lock row=2 col=2></div><td><div id=cell_2_3 class=lock row=2 col=3></div><td><div id=cell_2_4 class=lock row=2 col=4></div><tr><td><div id=cell_3_1 class=lock row=3 col=1></div><td><div id=cell_3_2 class=lock row=3 col=2></div><td><div id=cell_3_3 class=lock row=3 col=3></div><td><div id=cell_3_4 class=lock row=3 col=4></div><tr><td><div id=cell_4_1 class=lock row=4 col=1></div><td><div id=cell_4_2 class=lock row=4 col=2></div><td><div id=cell_4_3 class=lock row=4 col=3></div><td><div id=cell_4_4 class=lock row=4 col=4></div></table><button id=shuffle>Shuffle</button></div></div><script>!function(o){String.prototype.trim===o&&(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),Array.prototype.reduce===o&&(Array.prototype.reduce=function(t){if(null==this)throw new TypeError;var e,n=Object(this),i=n.length>>>0,r=0;if("function"!=typeof t)throw new TypeError;if(0==i&&1==arguments.length)throw new TypeError;if(2<=arguments.length)e=arguments[1];else for(;;){if(r in n){e=n[r++];break}if(++r>=i)throw new TypeError}for(;r<i;)r in n&&(e=t.call(o,e,n[r],r,n)),r++;return e})}();var Zepto=function(){function r(t){return"[object Function]"==A.call(t)}function i(t){return t instanceof Object}function o(t){var e,n;if("[object Object]"!==A.call(t))return!1;if(!(n=r(t.constructor)&&t.constructor.prototype)||!hasOwnProperty.call(n,"isPrototypeOf"))return!1;for(e in t);return e===h||hasOwnProperty.call(t,e)}function a(t){return t instanceof Array}function s(t){return"number"==typeof t.length}function c(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function n(t){return t in e?e[t]:e[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function u(t,e){return"number"!=typeof e||T[c(t)]?e:e+"px"}function l(t,e){return e===h?d(t):d(t).filter(e)}function f(t,e,n,i){return r(e)?e.call(t,n,i):e}var h,p,d,m,g,v,y=[],w=y.slice,b=window.document,x={},e={},E=b.defaultView.getComputedStyle,T={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},j=/^\s*<(\w+|!)[^>]*>/,k=[1,3,8,9,11],t=b.createElement("table"),C=b.createElement("tr"),S={tr:b.createElement("tbody"),tbody:t,thead:t,tfoot:t,td:C,th:C,"*":b.createElement("div")},$=/complete|loaded|interactive/,N=/^\.([\w-]+)$/,O=/^#([\w-]+)$/,P=/^[\w-]+$/,A={}.toString,M={},Z=b.createElement("div");return M.matches=function(t,e){var n,i;return!(!t||1!==t.nodeType)&&((n=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector)?n.call(t,e):((i=!(n=t.parentNode))&&(n=Z).appendChild(t),n=~M.qsa(n,e).indexOf(t),i&&Z.removeChild(t),n))},g=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},v=function(n){return n.filter(function(t,e){return n.indexOf(t)==e})},M.fragment=function(t,e){e===h&&(e=j.test(t)&&RegExp.$1);var n=S[e=e in S?e:"*"];return n.innerHTML=""+t,d.each(w.call(n.childNodes),function(){n.removeChild(this)})},M.Z=function(t,e){return(t=t||[]).__proto__=arguments.callee.prototype,t.selector=e||"",t},M.isZ=function(t){return t instanceof M.Z},M.init=function(t,e){if(!t)return M.Z();if(r(t))return d(b).ready(t);if(M.isZ(t))return t;var n;if(a(t))n=t.filter(function(t){return t!==h&&null!==t});else if(o(t))n=[d.extend({},t)],t=null;else if(0<=k.indexOf(t.nodeType)||t===window)n=[t],t=null;else if(j.test(t))n=M.fragment(t.trim(),RegExp.$1),t=null;else{if(e!==h)return d(e).find(t);n=M.qsa(b,t)}return M.Z(n,t)},(d=function(t,e){return M.init(t,e)}).extend=function(e){return w.call(arguments,1).forEach(function(t){for(p in t)t[p]!==h&&(e[p]=t[p])}),e},M.qsa=function(t,e){var n;return t===b&&O.test(e)?(n=t.getElementById(RegExp.$1))?[n]:y:1!==t.nodeType&&9!==t.nodeType?y:w.call(N.test(e)?t.getElementsByClassName(RegExp.$1):P.test(e)?t.getElementsByTagName(e):t.querySelectorAll(e))},d.isFunction=r,d.isObject=i,d.isArray=a,d.isPlainObject=o,d.inArray=function(t,e,n){return y.indexOf.call(e,t,n)},d.trim=function(t){return t.trim()},d.uuid=0,d.map=function(t,e){var n,i,r,o,a=[];if(s(t))for(i=0;i<t.length;i++)null!=(n=e(t[i],i))&&a.push(n);else for(r in t)null!=(n=e(t[r],r))&&a.push(n);return 0<(o=a).length?[].concat.apply([],o):o},d.each=function(t,e){var n,i;if(s(t)){for(n=0;n<t.length;n++)if(!1===e.call(t[n],n,t[n]))return t}else for(i in t)if(!1===e.call(t[i],i,t[i]))return t;return t},d.fn={forEach:y.forEach,reduce:y.reduce,push:y.push,indexOf:y.indexOf,concat:y.concat,map:function(n){return d.map(this,function(t,e){return n.call(t,e,t)})},slice:function(){return d(w.apply(this,arguments))},ready:function(t){return $.test(b.readyState)?t(d):b.addEventListener("DOMContentLoaded",function(){t(d)},!1),this},get:function(t){return t===h?w.call(this):this[t]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(n){return this.forEach(function(t,e){n.call(t,e,t)}),this},filter:function(e){return d([].filter.call(this,function(t){return M.matches(t,e)}))},add:function(t,e){return d(v(this.concat(d(t,e))))},is:function(t){return 0<this.length&&M.matches(this[0],t)},not:function(e){var n,i=[];return r(e)&&e.call!==h?this.each(function(t){e.call(this,t)||i.push(this)}):(n="string"==typeof e?this.filter(e):s(e)&&r(e.item)?w.call(e):d(e),this.forEach(function(t){n.indexOf(t)<0&&i.push(t)})),d(i)},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!i(t)?t:d(t)},last:function(){var t=this[this.length-1];return t&&!i(t)?t:d(t)},find:function(t){var e=1==this.length?M.qsa(this[0],t):this.map(function(){return M.qsa(this,t)});return d(e)},closest:function(t,e){for(var n=this[0];n&&!M.matches(n,t);)n=n!==e&&n!==b&&n.parentNode;return d(n)},parents:function(t){for(var e=[],n=this;0<n.length;)n=d.map(n,function(t){if((t=t.parentNode)&&t!==b&&e.indexOf(t)<0)return e.push(t),t});return l(e,t)},parent:function(t){return l(v(this.pluck("parentNode")),t)},children:function(t){return l(this.map(function(){return w.call(this.children)}),t)},siblings:function(t){return l(this.map(function(t,e){return w.call(e.parentNode.children).filter(function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return this.map(function(){return this[t]})},show:function(){return this.each(function(){var t,e,n;"none"==this.style.display&&(this.style.display=null),"none"==E(this,"").getPropertyValue("display")&&(this.style.display=(t=this.nodeName,x[t]||(e=b.createElement(t),b.body.appendChild(e),n=E(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),x[t]="none"==n?"block":n),x[t]))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){return this.each(function(){d(this).wrapAll(d(t)[0].cloneNode(!1))})},wrapAll:function(t){return this[0]&&(d(this[0]).before(t=d(t)),t.append(this)),this},unwrap:function(){return this.parent().each(function(){d(this).replaceWith(d(this).children())}),this},clone:function(){return d(this.map(function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(t){return(t===h?"none"==this.css("display"):t)?this.show():this.hide()},prev:function(){return d(this.pluck("previousElementSibling"))},next:function(){return d(this.pluck("nextElementSibling"))},html:function(n){return n===h?0<this.length?this[0].innerHTML:null:this.each(function(t){var e=this.innerHTML;d(this).empty().append(f(this,n,t,e))})},text:function(t){return t===h?0<this.length?this[0].textContent:null:this.each(function(){this.textContent=t})},attr:function(e,n){var t;return"string"==typeof e&&n===h?0==this.length||1!==this[0].nodeType?h:"value"==e&&"INPUT"==this[0].nodeName?this.val():!(t=this[0].getAttribute(e))&&e in this[0]?this[0][e]:t:this.each(function(t){if(1===this.nodeType)if(i(e))for(p in e)this.setAttribute(p,e[p]);else this.setAttribute(e,f(this,n,t,this.getAttribute(e)))})},removeAttr:function(t){return this.each(function(){1===this.nodeType&&this.removeAttribute(t)})},prop:function(e,n){return n===h?this[0]?this[0][e]:h:this.each(function(t){this[e]=f(this,n,t,this[e])})},data:function(t,e){return null!==(t=this.attr("data-"+c(t),e))?t:h},val:function(e){return e===h?0<this.length?this[0].value:h:this.each(function(t){this.value=f(this,e,t,this.value)})},offset:function(){var t;return 0==this.length?null:{left:(t=this[0].getBoundingClientRect()).left+window.pageXOffset,top:t.top+window.pageYOffset,width:t.width,height:t.height}},css:function(t,e){if(e===h&&"string"==typeof t)return 0==this.length?h:this[0].style[g(t)]||E(this[0],"").getPropertyValue(t);var n="";for(p in t)"string"==typeof t[p]&&""==t[p]?this.each(function(){this.style.removeProperty(c(p))}):n+=c(p)+":"+u(p,t[p])+";";return"string"==typeof t&&(""==e?this.each(function(){this.style.removeProperty(c(t))}):n=c(t)+":"+u(t,e)),this.each(function(){this.style.cssText+=";"+n})},index:function(t){return t?this.indexOf(d(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return!(this.length<1)&&n(t).test(this[0].className)},addClass:function(n){return this.each(function(t){m=[];var e=this.className;f(this,n,t,e).split(/\s+/g).forEach(function(t){d(this).hasClass(t)||m.push(t)},this),m.length&&(this.className+=(e?" ":"")+m.join(" "))})},removeClass:function(e){return this.each(function(t){if(e===h)return this.className="";m=this.className,f(this,e,t,m).split(/\s+/g).forEach(function(t){m=m.replace(n(t)," ")}),this.className=m.trim()})},toggleClass:function(e,n){return this.each(function(t){t=f(this,e,t,this.className),(n===h?!d(this).hasClass(t):n)?d(this).addClass(t):d(this).removeClass(t)})}},["width","height"].forEach(function(i){d.fn[i]=function(n){var t=i.replace(/./,function(t){return t[0].toUpperCase()});return n===h?this[0]==window?window["inner"+t]:this[0]==b?b.documentElement["offset"+t]:(t=this.offset())&&t[i]:this.each(function(t){var e=d(this);e.css(i,f(this,n,t,e[i]()))})}}),["after","prepend","before","append"].forEach(function(e,u){d.fn[e]=function(){var o,a,s,c=d.map(arguments,function(t){return i(t)?t:M.fragment(t)});return c.length<1?this:(o=this.length,a=1<o,s=u<2,this.each(function(t,e){for(var n,i=0;i<c.length;i++){var r=c[s?c.length-i-1:i];(function t(e,n){for(var i in n(e),e.childNodes)t(e.childNodes[i],n)})(r,function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||window.eval.call(window,t.innerHTML)}),a&&t<o-1&&(r=r.cloneNode(!0)),n=void 0,(n=u%2?e:e.parentNode)?n.insertBefore(r,u?1==u?n.firstChild:2==u?e:null:e.nextSibling):d(r).remove()}}))},d.fn[u%2?e+"To":"insert"+(u?"Before":"After")]=function(t){return d(t)[e](this),this}}),M.Z.prototype=d.fn,M.camelize=g,M.uniq=v,d.zepto=M,d}();function toggle(t){t.hasClass("rotate90")?(t.removeClass("rotate90"),t.addClass("rotate0")):(t.removeClass("rotate0"),t.addClass("rotate90"))}function checkIfWon(){0==$(".rotate0").length&&($(".lock").css({"background-color":"#0f0"}),window.confirm("You did it!"),shuffle())}function shuffle(){$(".lock").css({"background-color":"#ff0"}),$(".lock").removeClass("rotate90"),$(".lock").removeClass("rotate0"),$(".lock").addClass("rotate0");for(var t,e,n,i=0;i++<6;)t=random(1,4),e=random(1,4),n=$("#cell_"+t+"_"+e),$('.lock[row="'+t+'"]').each(function(){toggle($(this))}),$('.lock[col="'+e+'"]').each(function(){toggle($(this))}),toggle(n)}function random(t,e){return Math.min(e,Math.floor(Math.random()*(e-t+1))+t)}window.Zepto=Zepto,"$"in window||(window.$=Zepto),function(l){function f(t){return t._zid||(t._zid=e++)}function a(t,e,n,i){var r,o;return(e=h(e)).ns&&(o=e.ns,r=new RegExp("(?:^| )"+o.replace(" "," .* ?")+"(?: |$)")),(d[f(t)]||[]).filter(function(t){return t&&(!e.e||t.e==e.e)&&(!e.ns||r.test(t.ns))&&(!n||f(t.fn)===f(n))&&(!i||t.sel==i)})}function h(t){return{e:(t=(""+t).split("."))[0],ns:t.slice(1).sort().join(" ")}}function p(t,e,n){l.isObject(t)?l.each(t,n):t.split(/\s/).forEach(function(t){n(t,e)})}function s(o,t,e,a,s,c){c=!!c;var n=f(o),u=d[n]||(d[n]=[]);p(t,e,function(t,e){function n(t){var e=r.apply(o,[t].concat(t.data));return!1===e&&t.preventDefault(),e}var i=s&&s(e,t),r=i||e,t=l.extend(h(t),{fn:e,proxy:n,sel:a,del:i,i:u.length});u.push(t),o.addEventListener(t.e,n,c)})}function r(n,t,e,i){var r=f(n);p(t||"",e,function(t,e){a(n,t,e,i).forEach(function(t){delete d[r][t.i],n.removeEventListener(t.e,t.proxy,!1)})})}function c(n){var i=l.extend({originalEvent:n},n);return l.each(t,function(t,e){i[t]=function(){return this[e]=o,n[t].apply(n,arguments)},i[e]=u}),i}function o(){return!0}function u(){return!1}l.zepto.qsa;var d={},e=1,m={},t=(m.click=m.mousedown=m.mouseup=m.mousemove="MouseEvents",l.event={add:s,remove:r},l.proxy=function(t,e){var n;if(l.isFunction(t))return(n=function(){return t.apply(e,arguments)})._zid=f(t),n;if("string"==typeof e)return l.proxy(t[e],t);throw new TypeError("expected function")},l.fn.bind=function(t,e){return this.each(function(){s(this,t,e)})},l.fn.unbind=function(t,e){return this.each(function(){r(this,t,e)})},l.fn.one=function(e,n){return this.each(function(t,i){s(this,e,n,null,function(e,n){return function(){var t=e.apply(i,arguments);return r(i,n,e),t}})})},{preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"});l.fn.delegate=function(o,e,n){var i=!1;return"blur"!=e&&"focus"!=e||(l.iswebkit?e="blur"==e?"focusout":"focus"==e?"focusin":e:i=!0),this.each(function(t,r){s(r,e,n,o,function(i){return function(t){var e,n=l(t.target).closest(o,r).get(0);if(n)return e=l.extend(c(t),{currentTarget:n,liveFired:r}),i.apply(n,[e].concat([].slice.call(arguments,1)))}},i)})},l.fn.undelegate=function(t,e,n){return this.each(function(){r(this,e,n,t)})},l.fn.live=function(t,e){return l(document.body).delegate(this.selector,t,e),this},l.fn.die=function(t,e){return l(document.body).undelegate(this.selector,t,e),this},l.fn.on=function(t,e,n){return null==e||l.isFunction(e)?this.bind(t,e):this.delegate(e,t,n)},l.fn.off=function(t,e,n){return null==e||l.isFunction(e)?this.unbind(t,e):this.undelegate(e,t,n)},l.fn.trigger=function(t,e){return"defaultPrevented"in(n=t="string"==typeof t?l.Event(t):t)||(n.defaultPrevented=!1,i=n.preventDefault,n.preventDefault=function(){this.defaultPrevented=!0,i.call(this)}),t.data=e,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(t)});var n,i},l.fn.triggerHandler=function(n,i){var r,o;return this.each(function(t,e){(r=c("string"==typeof n?l.Event(n):n)).data=i,r.target=e,l.each(a(e,n.type||n),function(t,e){if(o=e.proxy(r),r.isImmediatePropagationStopped())return!1})}),o},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout change select keydown keypress keyup error".split(" ").forEach(function(e){l.fn[e]=function(t){return this.bind(e,t)}}),["focus","blur"].forEach(function(e){l.fn[e]=function(t){if(t)this.bind(e,t);else if(this.length)try{this.get(0)[e]()}catch(t){}return this}}),l.Event=function(t,e){var n=document.createEvent(m[t]||"Events"),i=!0;if(e)for(var r in e)"bubbles"==r?i=!!e[r]:n[r]=e[r];return n.initEvent(t,i,!0,null,null,null,null,null,null,null,null,null,null,null,null),n}}(Zepto),function(t){function e(t){var e=this.os={},n=this.browser={},i=t.match(/WebKit\/([\d.]+)/),r=t.match(/(Android)\s+([\d.]+)/),o=t.match(/(iPad).*OS\s([\d_]+)/),a=!o&&t.match(/(iPhone\sOS)\s([\d_]+)/),s=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),c=s&&t.match(/TouchPad/),u=t.match(/Kindle\/([\d.]+)/),l=t.match(/Silk\/([\d._]+)/),f=t.match(/(BlackBerry).*Version\/([\d.]+)/);(n.webkit=!!i)&&(n.version=i[1]),r&&(e.android=!0,e.version=r[2]),a&&(e.ios=e.iphone=!0,e.version=a[2].replace(/_/g,".")),o&&(e.ios=e.ipad=!0,e.version=o[2].replace(/_/g,".")),s&&(e.webos=!0,e.version=s[2]),c&&(e.touchpad=!0),f&&(e.blackberry=!0,e.version=f[2]),u&&(e.kindle=!0,e.version=u[1]),l&&(n.silk=!0,n.version=l[1]),!l&&e.android&&t.match(/Kindle Fire/)&&(n.silk=!0)}e.call(t,navigator.userAgent),t.__detect=e}(Zepto),function(l,f){function n(t){return t.toLowerCase()}function t(t){return i?i+t:n(t)}var i,h="",r=window.document.createElement("div"),p=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,d={};l.each({Webkit:"webkit",Moz:"",O:"o",ms:"MS"},function(t,e){if(r.style[t+"TransitionProperty"]!==f)return h="-"+n(t)+"-",i=e,!1}),d[h+"transition-property"]=d[h+"transition-duration"]=d[h+"transition-timing-function"]=d[h+"animation-name"]=d[h+"animation-duration"]="",l.fx={off:i===f&&r.style.transitionProperty===f,cssPrefix:h,transitionEnd:t("TransitionEnd"),animationEnd:t("AnimationEnd")},l.fn.animate=function(t,e,n,i){return l.isObject(e)&&(n=e.easing,i=e.complete,e=e.duration),e&&(e/=1e3),this.anim(t,e,n,i)},l.fn.anim=function(t,e,n,i){var r,o,a,s={},c=this,u=l.fx.transitionEnd;if(e===f&&(e=.4),l.fx.off&&(e=0),"string"==typeof t)s[h+"animation-name"]=t,s[h+"animation-duration"]=e+"s",u=l.fx.animationEnd;else{for(o in t)p.test(o)?(r=r||[],r.push(o+"("+t[o]+")")):s[o]=t[o];r&&(s[h+"transform"]=r.join(" ")),l.fx.off||"object"!=typeof t||(s[h+"transition-property"]=Object.keys(t).join(", "),s[h+"transition-duration"]=e+"s",s[h+"transition-timing-function"]=n||"linear")}return a=function(t){if(void 0!==t){if(t.target!==t.currentTarget)return;l(t.target).unbind(u,arguments.callee)}l(this).css(d),i&&i.call(this)},0<e&&this.bind(u,a),setTimeout(function(){c.css(s),e<=0&&setTimeout(function(){c.each(function(){a.call(this)})},0)},0),this},r=null}(Zepto),function(c){function u(t,e,n,i){if(t.global)return t=e||v,e=i,i=c.Event(n),c(t).trigger(i,e),!i.defaultPrevented}function l(t,e,n){var i=n.context,r="success";n.success.call(i,t,r,e),u(n,i,"ajaxSuccess",[e,n,t]),a(r,e,n)}function f(t,e,n,i){var r=i.context;i.error.call(r,n,e,t),u(i,r,"ajaxError",[n,i,t]),a(e,n,i)}function a(t,e,n){var i=n.context;n.complete.call(i,e,t),u(n,i,"ajaxComplete",[e,n]),(t=n).global&&!--c.active&&u(t,null,"ajaxStop")}function h(){}function p(t,e){return(t+"&"+e).replace(/[&?]{1,2}/,"?")}function d(t){s(t.data)&&(t.data=c.param(t.data)),!t.data||t.type&&"GET"!=t.type.toUpperCase()||(t.url=p(t.url,t.data))}var m,g,t=0,s=c.isObject,v=window.document,o=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,y=/^(?:text|application)\/javascript/i,w=/^(?:text|application)\/xml/i,b="application/json",x="text/html",E=/^\s*$/,i=(c.active=0,c.ajaxJSONP=function(e){var n,i="jsonp"+ ++t,r=v.createElement("script"),o={abort:function(){c(r).remove(),i in window&&(window[i]=h),a("abort",o,e)}};return e.error&&(r.onerror=function(){o.abort(),e.error()}),window[i]=function(t){clearTimeout(n),c(r).remove(),delete window[i],l(t,o,e)},d(e),r.src=e.url.replace(/=\?/,"="+i),c("head").append(r),0<e.timeout&&(n=setTimeout(function(){o.abort(),a("timeout",o,e)},e.timeout)),o},c.ajaxSettings={type:"GET",beforeSend:h,success:h,error:h,complete:h,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:b,xml:"application/xml, text/xml",html:x,text:"text/plain"},crossDomain:!1,timeout:0},c.ajax=function(t){var i=c.extend({},t||{});for(m in c.ajaxSettings)void 0===i[m]&&(i[m]=c.ajaxSettings[m]);(t=i).global&&0==c.active++&&u(t,null,"ajaxStart"),i.crossDomain||(i.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(i.url)&&RegExp.$2!=window.location.host);var r=i.dataType,t=/=\?/.test(i.url);if("jsonp"==r||t)return t||(i.url=p(i.url,"callback=?")),c.ajaxJSONP(i);i.url||(i.url=window.location.toString()),d(i);var o,e,t=i.accepts[r],n={},a=/^([\w-]+:)\/\//.test(i.url)?RegExp.$1:window.location.protocol,s=c.ajaxSettings.xhr(),t=(i.crossDomain||(n["X-Requested-With"]="XMLHttpRequest"),t&&(-1<(n.Accept=t).indexOf(",")&&(t=t.split(",",2)[0]),s.overrideMimeType)&&s.overrideMimeType(t),(i.contentType||i.data&&"GET"!=i.type.toUpperCase())&&(n["Content-Type"]=i.contentType||"application/x-www-form-urlencoded"),i.headers=c.extend(n,i.headers||{}),s.onreadystatechange=function(){if(4==s.readyState){clearTimeout(o);var t,e=!1;if(200<=s.status&&s.status<300||304==s.status||0==s.status&&"file:"==a){r=r||(n=s.getResponseHeader("content-type"))&&(n==x?"html":n==b?"json":y.test(n)?"script":w.test(n)&&"xml")||"text",t=s.responseText;try{"script"==r?(0,eval)(t):"xml"==r?t=s.responseXML:"json"==r&&(t=E.test(t)?null:JSON.parse(t))}catch(t){e=t}e?f(e,"parsererror",s,i):l(t,s,i)}else f(null,"error",s,i)}var n},!("async"in i)||i.async);for(g in s.open(i.type,i.url,t),i.headers)s.setRequestHeader(g,i.headers[g]);return!1===(e=(t=i).context,!1!==t.beforeSend.call(e,n=s,t)&&!1!==u(t,e,"ajaxBeforeSend",[n,t])&&void u(t,e,"ajaxSend",[n,t]))?(s.abort(),!1):(0<i.timeout&&(o=setTimeout(function(){s.onreadystatechange=h,s.abort(),f(null,"timeout",s,i)},i.timeout)),s.send(i.data||null),s)},c.get=function(t,e){return c.ajax({url:t,success:e})},c.post=function(t,e,n,i){return c.isFunction(e)&&(i=i||n,n=e,e=null),c.ajax({type:"POST",url:t,data:e,success:n,dataType:i})},c.getJSON=function(t,e){return c.ajax({url:t,success:e,dataType:"json"})},c.fn.load=function(t,e){var n,i,r;return this.length&&(i=this,1<(r=t.split(/\s/)).length&&(t=r[0],n=r[1]),c.get(t,function(t){i.html(n?c(v.createElement("div")).html(t.replace(o,"")).find(n).html():t),e&&e.call(i)})),this},encodeURIComponent);c.param=function(t,e){var n=[];return n.add=function(t,e){this.push(i(t)+"="+i(e))},function n(i,t,r,o){var a=c.isArray(t);c.each(t,function(t,e){o&&(t=r?o:o+"["+(a?"":t)+"]"),!o&&a?i.add(e.name,e.value):(r?c.isArray(e):s(e))?n(i,e,r,t):i.add(t,e)})}(n,t,e),n.join("&").replace("%20","+")}}(Zepto),function(i){i.fn.serializeArray=function(){var e,n=[];return i(Array.prototype.slice.call(this.get(0).elements)).each(function(){var t=(e=i(this)).attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=t&&"reset"!=t&&"button"!=t&&("radio"!=t&&"checkbox"!=t||this.checked)&&n.push({name:e.attr("name"),value:e.val()})}),n},i.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},i.fn.submit=function(t){return t?this.bind("submit",t):this.length&&(t=i.Event("submit"),this.eq(0).trigger(t),t.defaultPrevented||this.get(0).submit()),this}}(Zepto),function(r){function o(){c=null,u.last&&(u.el.trigger("longTap"),u={})}function a(){c&&clearTimeout(c),c=null}var s,c,u={};r(document).ready(function(){var n,i;r(document.body).bind("touchstart",function(t){var e;n=Date.now(),i=n-(u.last||n),u.el=r("tagName"in(e=t.touches[0].target)?e:e.parentNode),s&&clearTimeout(s),u.x1=t.touches[0].pageX,u.y1=t.touches[0].pageY,0<i&&i<=250&&(u.isDoubleTap=!0),u.last=n,c=setTimeout(o,750)}).bind("touchmove",function(t){a(),u.x2=t.touches[0].pageX,u.y2=t.touches[0].pageY}).bind("touchend",function(t){var e,n,i,r;a(),u.isDoubleTap?(u.el.trigger("doubleTap"),u={}):u.x2&&30<Math.abs(u.x1-u.x2)||u.y2&&30<Math.abs(u.y1-u.y2)?(u.el.trigger("swipe")&&u.el.trigger("swipe"+(e=u.x1,n=u.x2,i=u.y1,r=u.y2,Math.abs(e-n)>=Math.abs(i-r)?0<e-n?"Left":"Right":0<i-r?"Up":"Down")),u={}):"last"in u&&(u.el.trigger("tap"),s=setTimeout(function(){s=null,u.el.trigger("singleTap"),u={}},250))}).bind("touchcancel",function(){s&&clearTimeout(s),c&&clearTimeout(c),c=s=null,u={}})}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(e){r.fn[e]=function(t){return this.bind(e,t)}})}(Zepto),$(".lock").addClass("rotate0"),$("#shuffle").click(function(){shuffle()}),$(".lock").click(function(){var t=$(this).attr("row"),e=$(this).attr("col");$('.lock[row="'+t+'"]').each(function(){toggle($(this))}),$('.lock[col="'+e+'"]').each(function(){toggle($(this))}),toggle($(this)),checkIfWon()}),shuffle()</script>