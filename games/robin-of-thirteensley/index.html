<title>Robin of Thirteensley - js13kGames 2023</title><style>*{padding:0;margin:0}body{background:#000}canvas{display:block;width:90vw;height:90vh;max-width:159vh;max-height:62vw;margin:0 auto;image-rendering:pixelated;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}</style><canvas id=c></canvas><script>let g=Math.round,x=Math.floor,M=Math.ceil,U=Math.pow,s=Math.abs,I=Math.min,G=Math.max,p=Math.sin,N=Math.cos,e=Math.random,k=Math.PI,m=(A,B)=>A.charCodeAt(B),d=0,L=0;function J(A){return A[x(e()*A.length)]}function W(A){return g(A[0]+(A[1]-A[0])*e())}function b(A,B){return A+(B-A)*e()}function l(B,t){for(let A=0;A<B;++A)t(A)}function X(t,A,n){for(let B=0;B<A;++B)for(let A=0;A<t;++A)n(A,B)}function h(A,B){return!(!A||!B||s(B.x-A.x)>A.w+B.w||B.y-A.y>A.A||A.y-B.y>B.A)}function q(A,B,t){return{x:A.x+A.B*(B+(t=(t-B)/2)),y:A.y,w:s(t),A:A.A}}function z(A,B){return 0<=A.indexOf(B)}function _(A){F.globalAlpha=A}function Z(A,B){(B||F).fillStyle=A}function j(A,B,t){F.drawImage(A,B,t)}let $=A=>A.getContext("2d"),T=()=>{},AA=(new window.AudioContext,new AudioContext),BA=[82,110,147,196,247,330,1e3];async function tA(){await AA.audioWorklet.addModule('data:text/javascript,class r extends AudioWorkletProcessor{constructor(r){super(),this.o=r.processorOptions.t.map((r=>{let s=0|44e3/r,e={i:new Float32Array(s),h:0,u:0,l:r,v:s,M:0};return e.i.fill(0),e})),this.port.onmessage=r=>{let[s,e]=r.data;s.map(((r,s)=>{if(+r===r){let t=this.o[s],a=0|44e3/(t.l*Math.pow(1.059,r));t.h=0,t.u=a,t.M=0;let o=t.i;o.map(((r,s)=>{o[s]=(e||1)*(2*Math.random()-1)}))}}))}}process(r,s,e){return s[0].map((r=>{r.map(((s,e)=>{r[e]=0,this.o.map((s=>{let t=s.i[s.h];s.h=++s.h%s.v,t=(t+s.i[s.h])/2*.997,s.u=++s.u%s.v,s.i[s.u]=t,s.M++,r[e]+=t*Math.min(1,s.M/500)}))}))})),!0}}registerProcessor("G",r)');var A=new AudioWorkletNode(AA,"G",{processorOptions:{t:BA}});return A.connect(AA.destination),A}let E=[];function nA(){E=[]}function eA(A,B,t){E.push([lA+1,A,B,t])}let EA=[],QA=((async()=>{EA[0]=await tA(),EA[1]=await tA()})(),[3,2,0,0,0,3]),oA=[1,3,3,2,1,1],gA=[,1,3,3,2,1],wA=[1,3,3,1,1,1],rA=[0,2,0,0,0,0],DA=[0,0,2,2,1,0],V=QA;function iA(A,B){var t=[];return t[B]=A[B],t}function CA(t,A){let n=[];return A.map((A,B)=>A?n[B]=t[B]:0),n}function aA(A,B,t=.5){B=J(B),eA(A,iA(V,B),t)}function RA(A,B=.5){let t=J([[0,4],[1,3],[2,4]]),n=[];t.map(A=>n[A]=V[A]),eA(A,n,B)}function uA(A,B,t,n){E.push([lA+t,1,B,n,A])}let t=0;function FA(A,B){l(B,()=>{uA(A,iA(A,0),t,.2),t+=7,uA(A,CA(A,[,,1]),t,.2),t++,uA(A,CA(A,[,,,1,1,1]),t,.2),t+=8,uA(A,iA(A,1),t,.2),t+=7,uA(A,CA(A,[,,1]),t,.2),t++,uA(A,CA(A,[,,,1,1,1]),t,.2),t+=8})}let Q,lA=0,cA=0;function fA(A,B){return A=new OffscreenCanvas(A,B),(B=$(A)).imageSmoothingEnabled=!1,{o:A,g:Q=B}}function MA(A,B,t,n){Q.beginPath(),Z(XA[A],Q),Q.arc(B,t,n,0,6.3),Q.fill()}function IA(A,B,t,n,e){Z(XA[A],Q),Q.fillRect(B,t,n,e)}let xA=["PRESS SPACE TO START","PRESS <> TO MOVE","PRESS ^ TO JUMP","EXIT AT THE GATE","APPROACH TO ENGAGE","PRESS SPACE TO LUNGE","WHEN ATTACKED, PRESS ^ TO PARRY","PRESS # TO FEINT, ENEMY MIGHT FLINCH","PRESS ^ IN AIR TO JUMP ONCE AGAIN"],UA=[],sA=[],dA=-1;function O(A){sA[A]=!0,dA===A&&i1()}function hA(A){c1()&&A.map(A=>{-1!==dA||sA[A]||(R(`|${xA[A]}|2`),dA=A)})}let TA=[0,0],P=[0,0],VA=[0,0];function OA(){F.resetTransform()}function PA(A,B){OA(),F.translate(-VA[0],80-VA[1]),F.translate(g(A),g(-B))}function HA(A,B){OA(),F.translate(g(-VA[0]*A),g(80-VA[1]*B))}function SA(){F.scale(-1,1)}function yA(A){return atob(A).split("").map(A=>m(A,0))}function A(A){let D=yA(A),i=[],C=0;for(;C<D.length;){var a=D[C++],R=D[C++],u=D[C++],F=D[C++],a={x:a,y:R,C:D[C++],i:[]};i.push(a);let n=D[C++],A=U(2,n),e=[],E=(1===n?e=[bA[D[0]],bA[D[C++]]]:l(A,A=>e[A]=bA[D[C++]]),(1<<n)-1),{o:B,g:t}=fA(u,F),Q={o:B},o=(a.i.push(Q),M(u*F/8*n)),g=t.getImageData(0,0,u,F),w=g.data,r=0;l(o,A=>{let t=D[C++];l(8/n,A=>{var B=e[A=t>>A*n&E];w[r]=B[0],w[r+1]=B[1],w[r+2]=B[2],w[r+3]=A?255:0,r+=4})}),t.putImageData(g,0,0)}return{D:i}}function YA(A,B){A.D.map(A=>{var g=B;A.i.map(A=>{let B=A.o,t=$(B),[n,e]=[B.width,B.height],E=t.getImageData(0,0,n,e),Q=E.data,o=bA[g];X(n,e,(A,B)=>{Q[3+(B=4*(B*n+A))]&&(Q[B]=o[0],Q[1+B]=o[1],Q[2+B]=o[2],Q[3+B]=255)}),t.putImageData(E,0,0)})})}function vA(A,B){return{l:A,u:B,F:W(A),M:100*e()}}function KA(A,B){let t=A.D[B.F]?.C;B.M+=100*d,B.M>=t&&(B.M-=t,z([4,2,5],B.u)?B.F--:B.F++,B.F>B.l[1]&&(B.I?.(),[()=>{B.F=B.l[1],B.M=t},()=>{B.F=B.l[0]},T,()=>{B.F=B.l[1]-1,B.u=4},T,T][B.u]()),B.F<B.l[0])&&[T,T,()=>B.F=B.l[1],T,()=>{B.F=B.l[0]+1,B.u=3},()=>{B.F=B.l[0]}][B.u]()}function GA(A,B,t,n){let e=A.D[B];e.i.map(A=>{j(A.o,g(e.x+t),g(e.y+n))})}function H(A,B,t){A.l=B,(A.F<A.l[0]||A.F>A.l[1])&&(A.F=B[0]),A.u=t}function S(A,B,t){A.l=B,A.F=B[0],A.u=t,A.M=0}function y(A){var B=A.U.D[A.R.F].C;return A.R.F>=A.R.l[1]&&A.R.M>=B}function pA(A,B){return A.F-A.l[0]===B}let Y,NA,kA,o=[];function mA(t,A){let n={V:t,P:A,H:[]};return X(t,A,(A,B)=>{n.H[B*t+A]={index:-1,T:0}}),Y=n}function LA(A,B,t,n){(B=Y.H[B*Y.V+A]).index=W(t),B.T=n}function w(A,B,t,n,e){let E=B;for(;E<t;++E){var Q=Y.H[A*Y.V+E];Q.index=W(n),Q.T=e}}function r(Q,o,g,w,A,r=2){{let A=Q,B=g-1,t=w,n=r,e=o,E=o+(B<=0?Y.P-1:B);for(;e<=E;++e){var D=Y.H[e*Y.V+A];D.index=W(t),D.T=n}}LA(Q,o+g-1,A,r)}function JA(t){if(!Y)return 0;var n=x(t[0]/8);if(!(n<0||n>=Y.V)){let A=x(t[1]/8),B=Y.H[A*Y.V+n];if(!B||!z([2],B.T))for(;0<=A;--A)if((B=Y.H[A*Y.V+n])&&z([1,2],B.T)){var e=8*A+8;if(e<t[1]+.05)return e}}return-100}function WA(A,B,t){HA(kA[0],kA[1]),j((A=NA.D[A]).i[0].o,8*B+A.x,-8*t+A.y-8)}let bA=[],XA=[];{let B=yA("IRgbcmdrR0FrbIxQ49JF+KRet0hGTigumkB+qspT+fXvmZ7XkWxSIzkq3b6L");l(B.length/3,A=>{A=B.slice(3*A,3*A+3),bA.push(A),XA.push(`rgb(${A.join(",")})`)})}let qA="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",zA=[0,4],_A=[5,8],ZA=[9,10],jA=[11,12],$A=[13,15],A0=[16,18],B0=[19,20],t0=[21,21],n0=[22,25],e0=[26,27],E0=[28,29],Q0=A(qA),o0="AAABBgoBBS8AAAQDCgEFqgUAAAYGCgEFDMO0HgMAAAUFCgEG6n9HAAAABQUKAQeqRkUAAAAEBgoBBVKltQAAAgIKAQUGAAADBgoBBVQiAgAAAwYKAQURqQAAAAQGCgEF////AAIDAwoBBboAAAQCAgoBBQYAAwMBCgEFBwAFAQEKAQUBAAADBgoBBaSUAAAAAwYKAQVqWwEAAAMGCgEFk6QDAAADBgoBBaOTAwAAAwYKAQWjyAEAAAMGCgEFrUkCAAADBgoBBc/IAQAAAwYKAQXOWgEAAAMGCgEFJ0kCAAADBgoBBapaAQAAAwYKAQWqyQEAAQEECgEFCQABAQUKAQUZAAAFBgoBBUT8LwgAAQMDCgEFxwEAAAUGCgEFBP2PCAAAAwYKAQUvBQEAAAQGCgEFn93xAAAEBgoBBZf5mQAABAYKAQWXefkAAAQGCgEFHhHhAAAEBgoBBZeZeQAABAYKAQUfF/EAAAQGCgEFHxcRAAAEBgoBBR6deQAABAYKAQWZn5kAAAMGCgEFl6QDAAADBgoBBSbZAwAABAYKAQWZNZUAAAQGCgEFERHxAAAFBgoBBXHXWisAAAUGCgEFcdaaIwAABQYKAQUuxhgdAAAEBgoBBZd5EQAABQYKAQUuxpgsAAAEBgoBBZd5mQAABAYKAQUeYfgAAAUGCgEFnxBCCAAABAYKAQWZmWkAAAUGCgEFMSpFCAAABQYKAQUxxlodAAAFBgoBBVERoiIAAAUGCgEFMUZHCAAABAYKAQXPJPMAAAMGCgEFT5IDAAADBgoBBYlEAgAAAwYKAQUnyQMAAAYGCgEFjNcyDAM=",D=(A(o0),{O:[0,2],S:[3,3],Y:[4,4],h:[5,5],K:[6,7],G:[8,8],p:[9,9],k:[10,10],N:[11,12],v:[12,12]}),g0=A("AAAICAoBCf/M//+dDQQEAAAIBwoBCf9s///95iYAAAgICgEJ/7T/7/l5ODACAAQIAAEM73///gAACAgAAQ7//3z/P348PAACCAYKAQ0gtf////8AAAgHCgEBPH7w7l8/fgAACAgKAQF27w9g/v//fgAACAgKAQE4fH7+/fvnXgAGCAIKAQFm9wAACAgKAQEpOekpLykpKQAACAgKAQFA4EBETkTk/wAACAgKAQ3//////////w=="),w0=[0,2],r0=[3,3],D0=[4,8],i0=A("CggKERkBBThQwQcXOEAIIW58TAADBCCAAAQYQAAJBw0SGQEF4AAqwAe4AA6AIDjDH0cACAADIAAEAAEwAASAABAACwgOERkBBeAAVAAVwAcwAUwADtzn+AcQAAwAAUAACAADgAAgAAkFDhRkAQUAB6ACqAA+gAvgA3AA4PcPfgAEgAEgAAQAAUAAIAAYAAgAAggICREPAQXgQMOHDHkyO3hAwEBGBAggYIAAAQcODQsPAQUAyDd9w0r4sTJCRnAQAANAAAgGEhAHDwEFDgC/gdVCn0QZNhkEDgQEERMIDwEFDgCoAEAFAD4YkQGJr4w4RhggAgISFgcPAQUOAMAHAPABAnwAARViwEeQ6SyEAQ=="),C0=(A("CQgNEAoBCOABQiATkkStlKlKVamVulKXabUuyck8woffCQkODwoBCEAA6ABBICcIEmVFnQr9WnW1rtlr8mQewge/AQ=="),{L:[0,2]}),a0=A("DRAGCAoBBIwUtmkoMQ4QBAgKAQTW/b9rDxACCAoBBP//"),R0=A("AAAWGQoBBADgAIA/APgegJ8H4MEBEGAAdAuAkQBgAAEYwAD2N4D9D8DDA/B/APgPcP4b4jxZMEAIEAgg+CEAAAAAAAB3dQDVFTBXBQAAFhkKAQQA4ACAPwD4HoCfB+DBARBgAHQLgJEAYAABGMAA9jeADQ/AwwPweQD4D3D+G+I8WTBACBAIIPghAAAAAAAAd3UA1RUwVwUBAhMXCgEEwAYAXwAMBDBAgLgDICBASAEBCChAQAAChBEgjIADDv77+OEvL56QYwAIAEAAAADA1RWkYiB3BQECExcKAQTABgBfAAwEMECAuAMgIEBIAQEIKEBAAALEESCAgAMO/vv44S8vnpBjAAgAQAAAAMDVFaRiIHcFAQAUGQoBBIA/AP4P8P8BBxAwPwD4FxgA4gRoJ7N+I+o3gG4DaCSAxsJoSECDDRJYv8EMGr6/8wd+//8HAAB8d0V1cVQVAgEAFBkKAQSAPwD+D/D/AQcQMD8A+BcYAOIEaCezfiPqN4BuA2gkgMbCaEhMgw0SWKHB7Bu+v/MHfv//BwAAfHdFdXFUFQI="),u0="DQcJEQoBCT74sMCDBwYefrZp4sODAwUJEmMADQYJEgoBCTz8sMCDBwYMPPxs08SHBwcKEiXEAA0GCRIKAQk++LDAgwcGHn62aeLDAwMHChIkxgANBQkTCgEJAnjwYYEHDww8/GzTxIcHBg4UJEiMAQgHEREOAQl8APABYAGABwAPAAwgPCB8IPQgxiaAMYAEABEAIgCEAAgBGAYACQcREQ4BCQQA8ADgA8ACAA8AHiAYIHwg9CDGJoAxgAQAEQAhAEIAhAAMAwAKBxERDgEJeAD4AWABgAcADwAMIDwgfCD0IMYmgDGABIAIABEAIQBCAIYBAAoHERESAQkEAPAA4APAAgAPAB4gGCB8IPQgxiaAMQADwAeABAAEAAgAMAAACQYREhIBCXgA+AFgAYAHAA8ADCA8IHwg9CDGJoAxAA8AHgAUABgACAAIADAAAAgHEhESAQn4AMAHAAsAeADgAQADCB4QfiDnQQCbAIwBMABAAQAJAEMAAgEYDAACBxERGQEJgA+ADwAaAB4AOADgAOADYAewB9AP8P/x/9D/3wAI/BcAIMDAAAQHDhEyAQnAA/gBNIAH4AEwAD5AFogDYUAwCAwCTzAUAyFAGDAFBA4UKAEJgABAABCAC3AFdIGGBCGBifDBPwAPgAHAADAAFAAJMAQCgcECBhESEgEJABAAIACAAA4BLwJ0BDAQQCAAIwA//B8APADwAMACAAmAIYBAAAMDCAUQExIBCQCAAIAAQMBB8ENgQcAjgCOAEfAPzAPDA4ABgAOABUAEMAIIAhgGCAULEx4BCQIgAA/8wAJ84AVGfNR33mIQAyhAAiIQgRCGAQkIFhAUAQkQAAB4AAA+AIAFAMADAPAAAAwA4H8A5vF/eAAADADABwAIAQAiAEAIABgGAAgHEBEPAQkCADwAfAAsAHgAeAAwAPwA+gB5ATECOQxIMEjAiACIAIwBBwUREw8BCQAQAGAAwBGAwwOPDx4LPjz8eHxh/OJ/5f9KRlUMajxQRIAIASACYAwABgQOFCgBCQAgAAgAAoB8ID6IBcFD8AgYAT/gA8TAMAAeQAQQAYQAIsAYCgcQERQBCR8APgAWADwAHAAYBjwB/gA+AF4AHAAkwEQwSAyIAIQAhgEJChIOMgEJ+AHAAgA/AHgB4AkAIwBeAPwA8AHADwA/AEwAMwF07Q8HFBUEGQEJAOADwPs8//+49g8=",F0=[0,3],l0=[4,6],c0=[7,9],f0=[10,11],M0=[12,14],I0=[15,15],x0=[16,17],U0=[18,19],s0=[20,22],d0=A(u0),h0=[0,1],T0=[2,3],V0=[4,5],O0=A("BQ0VCwoBCAAEAYAxwNeF/f/BPz/4VyX/quS/f/z3g2sGoIgABQwVDAoBCAAEAYAxANAF+P6BPz/+VyX/quS/f/z3g/8GsNkAIQoABQwVDBQBCAAEAYAxANAF+P6xPz/4VyX/quS/f/z3g/8GsFkAEgoABQ0VCxQBCAAEAYAxwNeF/P7hPz/4VyX/quS/f/z3g40CkEAABQUUExQBCAAgAAACACAAAAAAIAAAAAAEAcAYAPwBwD/wo4K/qv+ryn9//P/DfwH8FcBGACQEAAULFA0UAQgABAHAGAD8AcA/8OOTv6r+q8p/f/z/w38B/BXARgAkBAA="),P0=[0,2],H0=A("CBcQAQoBDv//CBAQCAoBDhAQODi4OJAQUBR8fHg4//8IChAOCgEOEBA4OFRUEBAQERERERGSEJISlJKUVFhUWDn//w=="),S0=[0,4],y0=A("DRIIBgoBBgQEDJ7//w0QCAgKAQYIDAwMiMIe/w4QBwgKAQYEBgYKEhgeDRAICAoBBhAwoAAEDBx/DRAHCAoBBigAgEBw+P4="),Y0=A(o0);function v0(t,n,e,E=!1){let Q=t;return l(e.length,A=>{var B;32===(A=m(e,A))?Q+=4:10===A?(Q=t,n+=8):(B=(A=Y0.D[A-33]).i[0].o,E||j(B,Q,n+A.y),Q+=B.width+1)}),Q-t}function K0(){NA=g0;let t=fA(60,80);IA(13,23,0,14,40),IA(0,24,0,7,40),l(10,A=>{var B=1.173*A,t=30+17*p(B);MA(13,t,B=45+14*N(B),16-A),MA(0,t-J([1,2]),2+B,14-A)}),l(20,A=>{A=x(30*A+b(-7,8));var B=x(b(2,12));o.push({$:t,_:[.4,1],x:A,y:B})});var A=mA(80,4);w(0,0,80,D.v,0),w(1,0,80,D.v,0),w(2,0,80,D.v,0),w(3,0,80,D.h,0),o.push({AA:A,_:[.5,.9],x:0,y:-2})}function G0(A,B){var n;r(A,B,5,D.K,D.G,0),w(B,A+1,A+4,D.p,0),r(A+4,B,5,D.K,D.G,0),z0(n=8*(A+2)+3,8,12,64,E1,[0,0],A=>{A.tA=!1},{0(A){A.BA=!1},4(A){b0(n,8),O(3);{var t=QA;let B=lA;l(6,A=>{E.push([B,1,iA(t,5-A),1]),B+=4}),l(6,A=>{E.push([B,1,iA(t,A),1]),B+=2})}}},{0(A){$0>=A1&&C(A,2)},2(A){var B=(B=(B=+A.nA/1.2)<0?0:1<B?1:B)*B*(3-2*B);A.x=n+2*e()-1,A.y=8-28*B,1<=B&&(A.x=n,C(A,3))},1(A){A.x=n,A.nA<.5&&(A.x=n+2*e()-1),2<A.nA&&C(A,0)},4(A){1<A.nA&&s1()}},{0(A){Z0(0)&&C(A,1)},3(A){Z0(0)&&C(A,4)}})}let p0={87:38,65:37,83:40,68:39},N0=[],v=[],k0=(window.addEventListener("keydown",A=>{AA.resume(),A=A.keyCode,N0[A]||(N0[A]=!0,v[A]=!0,N0[A=p0[A]]=!0,v[A]=!0)}),window.addEventListener("keyup",A=>{A=A.keyCode,N0[A]=!1,N0[A=p0[A]]=!1}),A(qA)),i=(YA(k0,6),{eA:!1,U:Q0,R:vA(_A,1),x:10,y:8,B:1,w:2,A:12,dx:0,dy:0,nA:0,EA:0,QA:0,oA:1,wA:{x:0,y:0,w:26,A:12},focus:0,gA:4,CA:1,rA:0,iA:0,DA:0,lA:!1,cA:0,uA:0,fA:!1,FA:[],MA:3}),m0=!0,L0=0,J0=null,W0=[0,0];function b0(A,B){11!==i.oA&&(J0=11,W0=[A,B])}function X0(A){i.FA.push(A)}function q0(A,B){i.eA=!0,i.dx=0,i.dy=0,i.oA=0,J0=1,L0=[A,B]}let K=[];function z0(A,B,t,n,e,E,Q,o,g,w){return C(e={U:e,R:vA(E,1),x:A,y:B,w:t,A:n,aA:o,IA:g,sA:w,nA:0,UA:0,oA:0,BA:!0,tA:!0,B:1,MA:2,eA:!0,dx:0},0),K.push(e),Q(e),e}function n(A,B){let t=A[B.oA];t&&t(B),(t=A[100])&&t(B)}let _0=0,Z0=A=>A===_0;function C(A,B){A.oA=B,A.nA=0,n(A.aA,A)}function j0(A,B,t){A.UA>B&&(A.UA=0,t())}let $0=0,A1=0;function a(A,n,B=!0,t=()=>{}){return A1++,z0(A,n,3,8,a0,C0.L,A=>{A.eA=B,A.tA=!1},{0(A){A.BA=!1,A.nA=5*e(),A.R.u=3},2(A){$0++,A.R.F=0,aA(1,[4,5],1),H(A.R,C0.L,0),C(A,3),t()}},{0(A){A.y=n+3*s(p(A.nA*k*3))},1(A){var B=A.nA,t=20-17*B;A.x+=d*A.dx,A.y=n+s(p(B*k*3))*t,1<=B&&C(A,0)},3(B){B.y=n+35*U(B.nA,.5),.5<B.nA&&(K=K.filter(A=>A!=B))}},{0(A){C(A,2)},1(A){1<A.nA&&C(A,2)}})}function B1(A,B,t){A.eA=!0,A.x=B,A.y=t,A.dx=B>i.x?30:-30,C(A,1)}function t1(A){A.B=i.x>A.x?1:-1}function n1(A,B){let t=a(A,B,!1);z0(A,B,4,16,i0,w0,A=>{A.RA=!0},{0(A){H(A.R,w0,3),A.R.u=3,A.BA=!0},1(A){},2(A){eA(1,V=gA,1),A.BA=!1,A.tA=!1,A.RA=!1}},{0(A){t1(A)},1(A){y(A)&&C(A,0)},2(A){A.nA}},{0(A){Z0(1)&&(--A.MA,0===A.MA?(S(A.R,D0,0),C(A,2),B1(t,A.x,A.y)):(S(A.R,r0,0),C(A,1)))},1:0,2:0})}a0.D.map(A=>{A.i.map(A=>{let B=A.o,t=$(B),[e,E]=[B.width,B.height],n=t.getImageData(0,0,e,E),Q=n.data,o=bA[10],g=(A,B)=>4*(B*e+A);X(e,E,(B,t)=>{let n=0;for(let A=B-1;0<=A;--A)if(Q[g(A,t)+3]){n+=1;break}for(let A=B+1;A<e;++A)if(Q[g(A,t)+3]){n+=1;break}for(let A=t-1;0<=A;--A)if(Q[g(B,A)+3]){n+=1;break}for(let A=t+1;A<E;++A)if(Q[g(B,A)+3]){n+=1;break}var A=g(B,t);4!=n||Q[A+3]||(Q[A]=o[0],Q[A+1]=o[1],Q[A+2]=o[2],Q[A+3]=255)}),t.putImageData(n,0,0)})});let B=D.k[0],e1=D.N[0],E1={D:[((n,e)=>{let A=new OffscreenCanvas(24,32),E=$(A),Q=0;return X(3,4,(A,B)=>{var t=n.D[e[Q++]];E.drawImage(t.i[0].o,8*A+t.x,8*B+t.y)}),{x:5,y:-8,C:100,i:[{o:A}]}})(g0,[e1,e1,e1,B,B,B,B,B,B,B,B,B])]},Q1=A(u0);function o1(A,B){g1(A,B).U=Q1}function g1(A,B){let t=a(A,B,!1),n={VA:!1,PA:!1};return z0(A,B,6,10,d0,F0,A=>{A.MA=5,A.RA=!0},{0(A){n.VA=!1,n.PA=!0},1(A){H(A.R,l0,3),n.VA||(A.UA=2),n.VA=!0,n.PA=!0},2(A){H(A.R,c0,1)},4(A){A.dx=50*-A.B,S(A.R,M0,0),A.MA--,A.MA<=0&&(eA(1,V=gA,1),B1(t,A.x,A.y),C(A,8)),n.PA=!1},5(A){S(A.R,I0,0)},6(A){A.dx=50*A.B,S(A.R,x0,0)},3(A){S(A.R,f0,0)},7(A){S(A.R,U0,0),n.PA=!1},8(A){S(A.R,s0,0),A.tA=!1,A.BA=!1,A.RA=!1},9(A){S(A.R,c0,2),A.dx=-100*A.B,--A.UA}},{0(A){t1(A),A.detect=q(A,0,40)},1(A){var B;A.BA=!0,B=A,((B=s(i.x-B.x))<20||30<B)&&C(A,2),j0(A,3,()=>C(A,5))},2(A){var B,t;t1(B=A),((t=s(i.x-B.x))<21?(B.x-=20*B.B*d,B.R.u=2):29<t&&(B.x+=20*B.B*d,B.R.u=1))||C(A,1),j0(A,3,()=>C(A,5))},4(A){A.BA=!1,A.x+=A.dx*d,A.dx-=A.dx*(1-U(.01,d)),y(A)&&C(A,1)},5(A){y(A)&&C(A,6)},6(A){A.x+=A.dx*d,A.dx-=A.dx*(1-U(.01,d)),A.attack=q(A,0,12),y(A)&&(A.UA=0,C(A,1))},3(A){A.BA=!1,y(A)&&(A.UA=0,C(A,1))},7(A){y(A)&&C(A,1),j0(A,3,()=>C(A,5))},9(A){A.x+=A.dx*d,A.dx-=A.dx*(1-U(.001,d)),A.dx<5&&C(A,1)}},{100(A){Z0(1)&&n.PA&&(z([3,4],A.oA)||!(.2<e())&&sA[6]?C(A,4):(i.fA=!0,C(A,7))),Z0(4)&&C(A,3),Z0(5)&&z([1,2],A.oA)&&(e()<.4?C(A,9):e()<.8?C(A,3):C(A,6))},0(A){Z0(2)&&C(A,1)}})}function w1(A,B,t){z0(A,B,8,11,O0,T0,A=>{A.B=t,A.BA=!0,A.tA=!0},{0(A){S(A.R,T0,1)},1(A){S(A.R,V0,1)},2(A){S(A.R,h0,1)}},{0(A){A.detect=q(A,-24,40)},1(A){3<A.nA&&C(A,2)},2(A){A.attack=q(A,0,12),JA([A.x+50*A.B*d,10])===A.y&&(A.x+=50*A.B*d),3<A.nA&&C(A,0)}},{0(A){C(A,1),t1(A)}})}function r1(A,B,t){z0(A,B,8,12,H0,P0,A=>{A.BA=!1,A.tA=!1,A.nA=t%3},{0(A){H(A.R,P0,5)},1(A){H(A.R,P0,0)}},{0(A){A.BA=!1,3<A.nA&&C(A,1)},1(A){A.BA=!0,3<A.nA&&C(A,0)}},{})}function D1(A,B){z0(A,B,4,8,y0,S0,A=>{A.BA=!0,A.tA=!1,A.R.M=5*e()},{},{},{})}function R(A){A=A.split("\n").map(A=>({HA:+(A=A.split("|"))[0],TA:A[1],OA:+A[2]||0})),C1={lines:A},a1=-1,l1()}function i1(){C1=0,dA=-1}YA(Q1,8);let C1=0,a1=0,R1=0,u1=2,F1=!1,l1=()=>{a1++,R1=0,u1=2,F1=!1};function c1(){return 0===C1||a1>=C1.lines.length}let u=0,f1=0,M1=!1,I1=-1,x1={};function U1(A){I1=A,A=V1[A],K=[],A1=0,$0=0,Y=void 0,o=[],i1(),UA=sA.slice(0),nA(),i.eA=!1,u=0,f1=0,T1=A,M1=!1,x1={},V=QA,A.SA(A)}function s1(){M1=!0}function d1(){sA=UA.slice(0),U1(I1)}function h1(){nA(),t=0,l(10,()=>{FA(QA,2),FA(DA,2),FA(oA,2),FA(wA,2)})}let T1,V1=[{SA(A){x1.loading=!1},xA(){let A="INSERT CARTRIDGE\nPRESS SPACE";x1.loading&&(A+="\nLOADING",l(7*u,()=>A+="."),3<u)&&s1(),v0(3,3,A+=.1<u%.25?"*":""),v[32]&&!x1.loading&&(x1.loading=!0,u=0)},YA:1,title:!0},{SA(A){q0(0,0),h1()},xA(){3<u&&hA([0]),v0(3,3,"ROBIN\nOF\nTHIRTEENSLEY"),v[32]&&(O(0),s1())},YA:3,title:!0},{SA(){q0(0,0),h1(),b0(0,0),R("|TO BE CONTINUETH!\n|THANK THEE FOR PLAYING THIS DEMO!\n|LOOK FOR THE FULL ADVENTURE AT GREAT STORES LIKE BYTE SHOP, IN THE FALL OF '83|2")},xA(){(30<u||v[32])&&(i1(),s1())},YA:1,title:!0},{SA(){{K0();var n=mA(100,20);o.push({AA:n,_:[1,1],x:0,y:0});let B=26,t=1,A=()=>8*B+4;w(0,0,24,D.O,1),r(7,1,5,D.S,D.Y),B=10,q0(A(),24),B+=6,a(A(),8),B+=6,l(4,A=>{w(t,B,B+3,D.O,1),a(8*(B+1)+4,8*(t+1),!0,()=>O(2)),B+=5,t+=2}),t=1,w(0,B,B+24,D.O,1),G0(B+=12,t),a(400,8)}R("1|HAH, YOU THINK YOU CAN JOIN OUR BAND?!\n1|PROVE IT. COLLECT ALL THE COIN")},xA(){hA([1,2]),$0>=A1&&hA([3])},hA(){R("1|A MONKEY COULD HAVE DONE THAT...")},YA:4},{SA(){{K0();var t=mA(100,20);o.push({AA:t,_:[1,1],x:0,y:0});let A=26,B=()=>8*A+4;w(0,0,48,D.O,1),A=3,q0(B(),24),G0(A+=6,1),A+=12,n1(B(),8),A+=6,n1(B(),8),A+=6,n1(B(),8)}R("1|OK, COINS DON'T JUST GROW ON TREES\n1|SKEWER THESE TRAINING DUMMIES")},xA(){hA([4,5])},hA(){R("1|WELL MAYBE YOU'RE NOT HOPELESS...")},YA:5},{SA(){{K0();var t=mA(100,20);o.push({AA:t,_:[1,1],x:0,y:0});let A=3,B=()=>8*A+4;w(0,A,48,D.O,1),A+=3,q0(B(),24),G0(A+=6,1),A+=12,g1(B(),8)}R("1|LET'S TRY A REAL FIGHT\n1|WILL, GET OVER HERE!")},xA(){hA([6,7])},hA(){R("1|THAT WAS PRETTY...\n2|JOHN, JOHN!\n2|THERE'S A CARRIAGE COMING!\n1|HO BOY! EVERYONE TO THE AMBUSH\n1|YOU TOO, ROBIN")},YA:6},{SA(){{K0();var e=mA(128,30);o.push({AA:e,_:[1,1],x:0,y:0});let B=3,t=1,n=()=>8*B+4,A=B;B+=3,q0(n(),24),LA(B+=6,1,D.Y,1),a(n(),8*t+8),r(B+=4,1,2,D.S,D.Y),a(n(),8*t+16),r(B+=4,1,4,D.S,D.Y),a(n(),8*t+32),B+=4,w(t=6,B,B+4,D.O,1),B+=10,w(t,B,B+4,D.O,1),B+=2,a(n(),8*t+8),w(0,A,B-2,D.O,1),A=B+6,w(6,B+=8,B+5,D.O,1),B+=2,a(n(),8*t+8),w(6,B+=8,B+5,D.O,1),B+=2,a(n(),8*t+8),r(B+=2,t+1,t+10,D.S,D.Y),B-=13,t=1,w1(n(),8*t,1),B+=12,w1(n(),8*t,-1),w(0,A,B+=10,D.O,1),A=B+=4,B+=5,r1(n()+5,8*t,0),B+=5,l(7,A=>{r1(n()+5,8*t,2.9-.15*A),B+=2}),r(B+=4,t,t+8,D.S,D.Y),w(5,B-=8,B+4,D.O,1),w(6,B-=8,B+4,D.O,1),w(10,B-=8,B+4,D.O,1),B+=4,w(t=15,B,B+4,D.O,1),B+=2,a(n(),8*t+8),w(15,B+=5,B+4,D.O,1),B+=2,a(n(),8*t+8),w(15,B+=5,B+4,D.O,1),B+=2,a(n(),8*t+8),G0(B=B+6+5,1),w(0,A,B+=10,D.O,1)}R("1|MAKE YOUR WAY CAREFULLY\n1|STAY AWAY FROM THE WILDLIFE\n1|OH, AND THE TRAPS. WE HAVE BOOBY TRAPS")},xA(){hA([8])},hA(){R("1|EVERYONE HERE? SHHH THEY'RE COMING")},YA:7},{SA(){{K0();var e=mA(128,30);o.push({AA:e,_:[1,1],x:0,y:0});let A=3,B=1,t=()=>8*A+4,n=A;r(A,1,4,D.S,D.Y),A+=20,q0(t(),24),A-=8,o1(t(),8*B),A+=16,o1(t(),8*B),r(A+=12,1,4,D.S,D.Y),e=A+=5,l(10,()=>{D1(t(),8*B),A++}),r(A,1,10,D.S,D.Y),a(t(),88),A++,l(11,()=>{D1(t(),8*B),A++}),A=e+2,w(B=5,A,A+4,D.O,1),A+=13,w(B,A,A+4,D.O,1),A+=20,B=1,o1(t(),8*B),G0(A+=12,1),w(0,n,A+=8,D.O,1)}R("1|IT'S A REVERSE AMBUSH!\n1|ROBIN TAKE CARE OF THE SHERRIF'S MEN!")},xA(){},hA(){R("3|HELP HELP!\n2|IS THAT... THE MAID MARION?\n1|ROBIN, STOP THAT CARRIAGE!")},YA:2}],O1=(U1(0),document.getElementById("c")),F=(O1.width=128,O1.height=80,$(O1)),P1=(F.imageSmoothingEnabled=!1,0),H1=T;O1.style.display="none";var c=document.createElement("canvas");document.body.appendChild(c),c.width=1024,c.height=640;let f=c.getContext("webgl2");var c=[-1,-1,-1,1,1,-1,1,1],S1=f.createBuffer(),y1=(f.bindBuffer(f.ARRAY_BUFFER,S1),f.bufferData(f.ARRAY_BUFFER,new Float32Array(c),f.STATIC_DRAW),c=f.createShader(f.VERTEX_SHADER),f.shaderSource(c,"\nattribute vec2 c;\nvarying vec2 u;\nvoid main(void) {\nu=c*0.5+0.5;\nu.y=1.0-u.y;\ngl_Position=vec4(c,0.5,1.0);\n}"),f.compileShader(c),f.createShader(f.FRAGMENT_SHADER)),Y1=(f.shaderSource(y1,"\nprecision highp float;\nvarying vec2 u;\nuniform sampler2D t;\nvoid main(void) {\nvec2 a=u;\na.x+=sin(u.x*6.28)*0.01;\na.y+=sin(u.y*6.28)*0.01;\nvec4 c=texture2D(t,a);\nc.r=texture2D(t,a+vec2(0.004,0.0)).r;\nc.b=texture2D(t,a-vec2(0.004,0.0)).b;\nvec2 d=abs(2.0*u-1.0);\nfloat v=1.0-pow(d.x,20.0)-pow(d.y,20.0);\nfloat l=1.0-pow(d.x,4.0)-pow(d.y,4.0);\nc*=(0.5+0.6*l)*step(0.0,v)*(0.8+0.3*abs(sin(a.y*3.14*80.0)));\nc.a = 0.8;\ngl_FragColor=c;\n}"),f.compileShader(y1),f.createProgram());f.attachShader(Y1,c),f.attachShader(Y1,y1),f.linkProgram(Y1),f.useProgram(Y1),f.bindBuffer(f.ARRAY_BUFFER,S1),f.vertexAttribPointer(0,2,f.FLOAT,!1,0,0),f.enableVertexAttribArray(0),c=f.createTexture(),f.bindTexture(f.TEXTURE_2D,c),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),function A(B){OA(),Z("#21181b"),F.fillRect(0,0,128,80);let t=I(100,B-P1);0===P1&&(t=0),P1=B,d=t/1e3,L+=d,function(n){if(!n.eA)return;let A,B,t,e,E=500*d,Q=G(JA([n.x-2,n.y]),JA([n.x+2,n.y])),o=()=>!!(v[38]&&n.EA<2)&&(n.EA||(n.CA=n.oA),n.y+=.1,n.dy=150,n.EA++,1<n.EA&&O(8),n.gA=4,!0),g=A=>N0[37]?(n.dx-=E*A,!0):!!N0[39]&&(n.dx+=E*A,!0),w=()=>(n.y>Q||0!=n.dy)&&(n.dy-=500*d,n.y+=n.dy*d,n.dy<0&&l(n.gA),!0),r=()=>n.y<=Q&&n.dy<=0&&(n.y=Q,n.dy=0,n.QA=Q,n.EA=0,10!==n.CA&&RA(0),!0),D=()=>{let B=!1;return K.forEach(A=>{A.RA&&A.eA&&h(A,n.wA)&&(B=!0)}),B},i=()=>{D()&&(n.lA||(V=rA),n.lA=!0,l(8),n.wA.w=52)},C=()=>{D()||(n.lA&&(V=QA),n.lA=!1,l(9),n.wA.w=26)},a=()=>!!v[32]&&l(7)||!!v[40]&&l(12)||!!v[38]&&l(13),R=()=>{0<n.FA.length&&(--n.MA,n.MA<=0)&&d1(),n.FA.map(A=>{l(10),n.dx=n.x<A.x?-150:150,n.dy=100})},u=()=>{var A=n.focus;0!==A&&(n.B=n.x<A.x?1:-1)},F=s(n.dx*d),l=A=>{if(n.oA!==A)return n.U=Q0,n.oA=A,n.nA=0,[T,()=>{H(n.R,_A,1),.2<F&&l(2),i()},()=>{H(n.R,zA,1)},()=>{aA(0,[0,1]),S(n.R,ZA,1)},()=>{H(n.R,jA,1)},()=>{n.fA=!1,H(n.R,$A,1)},()=>{H(n.R,A0,1)},()=>{n.fA=!1,n.dx=n.B*(L-n.cA<2?250:175),S(n.R,B0,0)},()=>{S(n.R,t0,0)},()=>{S(n.R,t0,0)},()=>{n.CA=10,eA(0,V=wA,1),n.gA=10,H(n.R,jA,1)},()=>{H(n.R,n0,1)},()=>{n.dx=75*n.B,S(n.R,e0,0)},()=>{n.dx=-10*n.B,S(n.R,E0,0)}][A](),!0},c=(m0&&(l(5),m0=!1),L0&&(l(1),n.x=L0[0],n.y=L0[1],n.dx=0,n.dy=0,n.QA=JA([n.x,n.y]),n.MA=3,A=n.x,B=n.y,P[0]=TA[0]=A,P[1]=TA[1]=B,L0=0),9999999),f=0,M=(K.forEach(A=>{var B,t;A.RA&&A.eA&&(B=s(A.x-n.x),t=s(A.y-n.y),B<c)&&t<16&&(c=B,f=A)}),n.focus=f,n.nA+=d,null!==J0&&(l(J0),J0=null),n.R.I=()=>{},()=>{aA(0,[3,4])}),I=!0;n.rA=0,n.iA=0,n.DA=0,[T,()=>{g(1)&&l(2),o()&&l(3),i(),R(),w()},()=>{n.R.I=M,.25<n.nA&&O(1),g(1),F<.1&&l(1),o()&&l(3),i(),R(),w()},()=>{g(.75),w(),o()},()=>{w(),r()?l(1):o()&&l(3)},()=>{O(4),I=!1,u(),g(.5)&&l(6),a(),C(),R(),w()},()=>{n.R.I=M,I=!1,u(),g(.5),F<.1&&l(5),a(),C(),R(),w()},()=>{I=!1,R(),pA(n.R,0)&&(n.rA={x:n.x+8*n.B,y:n.y,w:9,A:12}),y(n)&&l(5),n.fA&&(l(10),n.dx=50*-n.B,n.dy=50)},()=>{I=!1,y(n)&&l(5)},()=>{I=!1,y(n)&&l(1)},()=>{n.fA||(n.U=0<p(70*n.nA)?k0:Q0),I=!1,w(),r()&&l(1)},()=>{n.dx=0,n.dy=0;var A=1-U(.01,d);n.x+=(W0[0]-n.x)*A,n.y+=(W0[1]-n.y)*A},()=>{I=!1,R(),y(n)&&l(5),n.DA=q(n,0,20)},()=>{I=!1,pA(n.R,0)&&(n.iA={x:n.x+5*n.B,y:n.y,w:6,A:12}),y(n)&&l(5),a()}][n.oA](),n.FA=[],n.dx*=U(.01,d),n.x=function(A,B,t,n){if(!Y)return A;let e=A+n,E=A+n+(n<0?-t:t),Q=x((A-=.001*n)/8),o=x(E/8);if(Q!==o){var g=x(B/8);if(!(g<0))if(Q>o)for(;Q!==o;){if(--Q<0)return t;if(2===Y.H[g*Y.V+Q].T)return 8*Q+8+t}else for(;Q!==o;){if(++Q>=Y.V)return 8*Y.V-t;if(2===Y.H[g*Y.V+Q].T)return 8*Q-t}}return e}(n.x,n.y,n.w,n.dx*d),I&&(n.B=0<=n.dx?1:-1),n.y<=-99&&d1(),K.forEach(A=>{A.eA&&h(n,A)&&(A.BA?X0(A):A.tA&&(n.x=A.x-(n.w+A.w)*n.B))}),n.wA.x=n.x,n.wA.y=n.y,KA(n.U,n.R),t=n.x+n.dx/4,e=n.QA+(n.y-n.QA)/4+10,TA[0]=t,TA[1]=e}(i);{let B=!1;K.forEach(A=>{A.eA&&i.eA&&(A.detect=void 0,A.attack=void 0,A.nA+=d,A.UA+=d,n(A.IA,A),h(i.rA,A)&&(_0=1,n(A.sA,A),B=!0),h(i,A)&&(_0=0,n(A.sA,A)),h(A.detect,i)&&(_0=2,n(A.sA,A)),h(A.attack,i)&&(_0=3,n(A.sA,A),X0(A)),h(A.attack,i.iA)&&(_0=4,n(A.sA,A),O(6),i.cA=L,i.dx=60),h(A,i.DA)&&(_0=5,n(A.sA,A),O(7),i.uA=L),KA(A.U,A.R))}),B&&(RA(1,1),O(5),i.fA||(i.dx*=.5))}if(P[0]+=(TA[0]-P[0])*(1-U(.001,d)),P[1]+=(TA[1]-P[1])*(1-U(.01,d)),VA[0]=g(P[0])-64,VA[1]=40-g(P[1]),o.forEach(n=>{kA=n._;let e=n.AA;e&&X(e.V,e.P,(A,B)=>{var t=e.H[B*e.V+A];t&&0<=t.index&&WA(t.index,n.x+A,n.y+B)});var A,B=n.$;B&&(HA(kA[0],kA[1]),F.scale(1,-1),j(B.o,n.x,n.y)),(B=n.KA)&&(B.M+=100*d,(A=NA.D[B.F].C)<B.M&&(B.M-=A,B.F++,B.F>B.l[1])&&(B.F=B.l[0]),WA(B.F,n.x,n.y))}),K.forEach(A=>{A.eA&&(PA(A.x,A.y),A.B<0&&SA(),GA(A.U,A.R.F,-16,-24))}),(B=i).eA&&(PA(B.x,B.y),B.B<0&&SA(),GA(B.U,B.R.F,-16,-24)),F.resetTransform(),(()=>{if(0===C1)return!1;var A=C1.lines[a1];if(!A)return!1;if(R1+=d,F1&&(u1-=d),1===A.OA&&v[90])return l1();if(0===A.OA&&u1<0)return l1();let B=22,n=3,t=(0<A.HA&&(F.resetTransform(),Z(XA[0]),_(.5),F.fillRect(0,52,22,28),_(1),GA(R0,2*(A.HA-1)+(F1?0:g(8*R1)%2),1,53),B=20,n=22),A.TA.split(" ")),e="",E=[];for(;t.length;)e.length+t[0].length>B&&(E.push(e),e=""),e+=" "+t.shift();E.push(e);let Q=80-8*E.length-1,o=20*R1;return E.map(A=>{var B=I(o,A.length),t=(_(.5),F.fillRect(n,Q-1,100,8),_(1),v0(0,0,A=A.substring(0,B),!0));v0(n+x((124-n-t)/2),Q,A),o-=B,Q+=8}),F1=0<o,!0})()||A1&&(GA(a0,0,86,55),v0(107,72,$0+"/"+A1)),!T1.title){let B="";l(3,A=>B+=A<i.MA?"$":"%"),v0(56,4,B)}u+=d,T1.xA?.(T1),M1?(x1.hA||(T1.hA?.(),x1.hA=!0),c1()&&(f1-=3*d)<0&&(f1=0,U1(T1.YA))):f1=I(f1+d,1),f1<1&&(Z(XA[0]),_(1-f1),F.fillRect(0,0,128,80),_(1)),v=[],H1(),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,O1),f.drawArrays(f.TRIANGLE_STRIP,0,4),(cA-=d)<0&&(cA+=.05,lA++,E=E.filter(A=>A[0]>lA||(EA[A[1]].port.postMessage([A[2],I(.1,.1*A[3])]),A[4]&&(V=A[4]),!1))),requestAnimationFrame(A)}(0)</script>