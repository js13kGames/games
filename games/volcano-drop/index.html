<!doctype html><title>Volcano Drop</title><style>body{background-color:#000;color:#fff}canvas,div{display:block;position:relative;margin-left:auto;margin-right:auto;max-width:100%;width:1024px}canvas{aspect-ratio:4/3}div{margin-top:5px}</style><canvas width=1024 height=768></canvas><div><label><input type=checkbox id=music checked> Music</label><div><script>const aa=[204,204,204,0,8,145,255,118,8,119,43,21,7,7,7,211,157,118,96,0,156,4,4,4,119,119,119,204,23,0,73,40,23,255,255,255],ba={v:[-0,-7.59,0,-0,-6.9,-.69,-0,-6.21,0,-0,-6.9,.69,-3.8,-6.57,0,-3.45,-5.98,-.69,-3.11,-5.38,0,-3.45,-5.98,.69,-6.57,-3.79,0,-5.98,-3.45,-.69,-5.38,-3.1,0,-5.98,-3.45,.69,-7.59,-0,0,-6.9,-0,-.69,-6.21,-0,0,-6.9,0,.69,-6.57,3.79,-0,-5.98,3.45,-.69,-5.38,3.1,-0,-5.98,3.45,.69,-3.8,6.57,-0,-3.45,5.98,-.69,-3.11,5.38,-0,-3.45,5.98,.69,-0,7.59,-0,-0,6.9,-.69,-0,6.21,-0,-0,6.9,.69,3.79,6.57,-0,3.45,5.98,-.69,3.1,5.38,-0,3.45,5.98,.69,6.57,3.79,-0,5.98,3.45,-.69,5.38,3.1,-0,5.98,3.45,.69,7.59,-0,0,6.9,-0,-.69,6.21,-0,0,6.9,-0,.69,6.57,-3.8,0,5.98,-3.45,-.69,5.38,-3.11,0,5.98,-3.45,.69,3.79,-6.57,0,3.45,-5.98,-.69,3.11,-5.38,0,3.45,-5.98,.69],C:[4,1,0,1,6,2,6,3,2,3,4,0,8,5,4,5,10,6,10,7,6,7,8,4,8,13,9,13,10,9,14,11,10,11,12,8,12,17,13,17,14,13,18,15,14,19,12,15,16,21,17,17,22,18,22,19,18,23,16,19,24,21,20,25,22,21,22,27,23,23,24,20,28,25,24,25,30,26,30,27,26,27,28,24,32,29,28,29,34,30,34,31,30,31,32,28,36,33,32,37,34,33,34,39,35,35,36,32,40,37,36,37,42,38,42,39,38,43,36,39,40,45,41,41,46,42,46,43,42,47,40,43,44,1,45,1,46,45,46,3,47,3,44,47,4,5,1,1,5,6,6,7,3,3,7,4,8,9,5,5,9,10,10,11,7,7,11,8,8,12,13,13,14,10,14,15,11,11,15,12,12,16,17,17,18,14,18,19,15,19,16,12,16,20,21,17,21,22,22,23,19,23,20,16,24,25,21,25,26,22,22,26,27,23,27,24,28,29,25,25,29,30,30,31,27,27,31,28,32,33,29,29,33,34,34,35,31,31,35,32,36,37,33,37,38,34,34,38,39,35,39,36,40,41,37,37,41,42,42,43,39,43,40,36,40,44,45,41,45,46,46,47,43,47,44,40,44,0,1,1,2,46,46,2,3,3,0,44],F:[1,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0]},ca={v:[.48,-1.59,-.18,.48,-1.59,.18,-.48,-1.59,-.09,-.48,-1.59,.18,.58,1.74,-.21,.58,1.74,.21,-.58,1.74,-.21,-.58,1.74,.21,-0,-1.59,-.17,-0,-1.59,.26,0,1.74,-.31,0,1.74,.31,-.32,2.42,.15,-.32,2.42,-.15,0,2.42,-.27,0,2.42,.27,.32,2.42,.15,.32,2.42,-.15,0,2.96,-.14,-1.14,-3.02,.21,-0,-3.25,.21,1.14,-3.02,.21,2.5,-.45,.08,2.41,1.22,.16,.5,-.7,.08,.5,1.42,.08,4.39,.27,.08,4.4,1.48,.08,5.67,1.79,.08,4.23,-.57,.14,.97,-1.4,-.01,1.51,1.02,.28,1.75,-.74,.08,2,-1.22,.18,5.14,.59,-.13,-.58,.34,-.45,-.58,-.48,.21,.58,.34,-.45,.58,-.48,.21,-0,-.48,.31,0,.34,-.54,3.41,1.35,.08,3.34,-.3,.08,3,-.67,-.07,-2.41,-.45,.08,-2.33,1.22,.11,-.45,-.7,.08,-.41,1.42,.08,-4.3,.27,.08,-4.31,1.39,.01,-5.58,1.7,.08,-4.4,-.57,.23,-1.12,-1.4,.16,-1.43,1.25,.23,-1.66,-.74,.08,-1.81,-1.22,-.03,-5.25,.59,-.04,-3.32,1.35,.08,-3.25,-.3,.08,-2.74,-.67,.13],C:[2,20,19,35,7,6,4,16,5,38,0,37,10,37,40,39,1,38,3,39,36,35,10,40,11,12,7,3,2,19,12,15,18,13,12,18,10,13,14,10,17,4,11,16,15,6,12,13,0,1,21,31,24,32,16,17,18,14,13,18,17,14,18,15,16,18,41,26,27,1,20,21,3,20,9,0,20,8,27,26,28,42,22,43,32,24,30,22,32,33,22,31,32,28,26,34,35,8,2,36,11,7,39,5,11,40,0,8,5,37,4,2,36,35,26,42,29,23,42,41,46,53,54,57,48,58,49,50,48,58,59,44,54,52,46,44,55,54,44,53,45,50,56,48,48,51,58,45,58,44,2,8,20,35,36,7,4,17,16,38,1,0,10,4,37,39,9,1,3,9,39,35,6,10,11,15,12,10,6,13,10,14,17,11,5,16,6,7,12,31,25,24,41,42,26,1,9,20,3,19,20,0,21,20,22,23,31,35,40,8,36,39,11,39,38,5,40,37,0,5,38,37,2,3,36,23,22,42,46,47,53,57,49,48,44,54,53,45,57,58],F:[5,3,4,3,3,3,3,3,4,5,2,2,4,4,4,4,5,3,2,2,2,2,3,5,5,5,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,5,3,4,3,3,3,3,3,4,4,4,4,4,3,3,5,5,5,3,3,3,3,3,3,3,3,3,3,3,3]},da={v:[16.25,-3.54,-.01,-16.25,-3.54,-.01,16.25,1.67,-.3,16.25,1.67,.3,-16.25,1.67,-.3,-16.25,1.67,.3,-16.25,2.29,.14,-16.25,2.29,-.14,16.25,2.29,-.14,16.25,2.29,.14,2.24,-2.69,-3.71,2.06,-2.69,-.14,-2.13,-2.69,-3.71,-1.96,-2.69,-.14,2.24,1.36,-3.5,1.82,2.08,-.14,-2.13,1.36,-3.5,-1.71,2.08,-.14,-1.36,-2.69,-5.07,1.47,-2.69,-5.07,-1.36,2.08,-5.07,1.47,2.08,-5.07,-1.46,3.32,-1.39,-1.96,4.24,-3.34,2.06,4.24,-3.34,1.57,3.32,-1.39,1.47,4.59,-4.67,-1.36,4.59,-4.67,-1.1,6.25,-1.62,-1.48,6.36,-3.15,1.59,6.36,-3.15,1.21,6.25,-1.62,1.13,6.36,-4.19,-1.03,6.36,-4.19,-.61,-19.59,-3.36,.72,-19.59,-3.36,.72,-19.59,-2.23,-.61,-19.59,-2.23,-.41,-19.59,-3.62,.52,-19.59,-3.62,-.54,7.93,-1.67,-.56,7.93,-2.73,.67,7.93,-2.73,.65,7.93,-1.67,5.45,-19.29,-2.6,-5.45,-19.29,-2.6,5.45,-16.62,-3.14,5.45,-16.62,-2.53,-5.45,-16.62,-3.14,-5.45,-16.62,-2.53,-5.45,-16.01,-2.84,5.45,-16.01,-2.84,0,-19.29,-2.6,0,-14.08,-3.14,0,-14.08,-2.53,0,-13.47,-2.84,.01,-19.37,2.58,-.3,-16.7,2.58,.31,-16.7,2.58,.01,-16.09,2.58,.01,-19.37,-2.53,-.3,-14.17,-1.9,.31,-14.17,-1.9,.01,-13.55,-1.9,1.9,-.81,-3.73,1.39,-.44,-4.12,1.34,-1.18,-4.05,4.19,-1.41,-7.06,-1.18,-.83,-3.65,-.67,-1.2,-4.05,-.62,-.46,-3.97,-3.47,-1.41,-6.98,.06,2.97,-4.42,-.24,2.46,-4.67,.27,2.46,-4.67,.03,4.86,-7.12,4.43,-2.48,-7.68,4.59,-2.95,-6.77,3.84,-2.48,-7.68,3.68,-2.95,-6.77,4.43,-.87,-7.68,4.59,-.66,-6.77,3.84,-.87,-7.68,3.68,-.66,-6.77,-3.11,-2.48,-7.68,-2.95,-2.95,-6.77,-3.7,-2.48,-7.68,-3.87,-2.95,-6.77,-3.11,-.87,-7.68,-2.95,-.66,-6.77,-3.7,-.87,-7.68,-3.87,-.66,-6.77,.29,4.17,-7.77,.45,3.59,-6.91,-.3,4.17,-7.77,-.46,3.59,-6.91,.29,5.76,-7.57,.45,5.86,-6.64,-.3,5.76,-7.57,-.46,5.86,-6.64,2.19,-2.65,-1.47,-2,-2.65,-1.47,-1.92,.97,-1.82,2.03,.97,-1.82],C:[1,5,4,2,9,3,2,3,0,4,0,1,1,3,5,6,8,7,4,8,2,3,6,5,5,7,4,13,36,11,13,102,101,21,24,14,103,11,100,14,19,21,13,15,17,20,19,18,16,18,12,12,38,34,15,22,17,26,33,32,27,29,33,20,23,27,21,27,26,32,41,42,33,29,41,25,28,22,23,28,29,26,30,24,24,31,25,36,34,35,35,38,39,10,39,19,37,13,101,100,11,36,19,38,18,40,42,41,31,40,28,28,41,29,30,32,42,31,42,43,45,49,48,47,46,51,46,47,44,52,46,44,52,47,54,53,50,55,54,51,55,48,49,50,54,50,49,53,51,46,49,52,54,48,52,45,56,58,57,61,59,63,57,58,59,62,59,58,58,60,62,57,60,56,64,67,65,65,67,66,66,67,64,68,71,69,69,71,70,70,71,68,72,75,73,73,75,74,74,75,72,76,79,78,78,83,82,83,80,82,81,76,80,82,76,78,79,81,83,84,87,86,86,91,90,91,88,90,89,84,88,90,84,86,91,85,89,92,95,94,94,99,98,99,96,98,97,92,96,98,92,94,99,93,97,103,10,14,12,102,16,17,22,102,25,15,103,14,25,103,16,22,23,12,37,101,36,10,100,2,8,9,4,2,0,1,0,3,6,9,8,4,7,8,3,9,6,5,6,7,13,37,36,13,17,102,21,26,24,103,15,11,14,10,19,13,11,15,20,21,19,16,20,18,12,18,38,15,25,22,26,27,33,27,23,29,20,16,23,21,20,27,32,33,41,25,31,28,23,22,28,26,32,30,24,30,31,36,37,34,35,34,38,10,35,39,19,39,38,40,43,42,31,43,40,28,40,41,31,30,42,52,53,46,52,44,47,53,48,50,54,47,51,54,55,50,53,55,51,49,45,52,48,53,52,61,57,59,62,63,59,58,56,60,57,61,60,76,77,79,78,79,83,83,81,80,81,77,76,82,80,76,79,77,81,84,85,87,86,87,91,91,89,88,89,85,84,90,88,84,91,87,85,92,93,95,94,95,99,99,97,96,97,93,92,98,96,92,99,95,93,103,100,10,12,101,102,14,24,25,16,102,22,12,34,37,36,35,10],F:[6,6,6,8,8,8,8,8,6,8,7,8,7,8,8,8,8,8,7,8,8,8,8,8,8,6,6,8,6,8,8,8,8,8,8,6,6,6,8,6,8,8,8,8,6,8,8,8,8,8,6,8,8,8,8,8,6,6,8,8,8,8,8,8,8,8,8,8,8,8,8,8,6,8,8,8,8,8,6,8,8,8,8,8,6,8,8,7,7,8,8,8,8,6,8,8,8,8,8,6,8,7,8,7,8,8,8,8,8,7,8,8,8,8,8,6,6,8,6,8,8,8,8,6,6,6,6,8,6,8,8,8,8,6,8,8,8,6,6,8,8,8,8,8,6,8,8,8,8,8,6,8,8,8,8,8,6,8,8,8,8,8,8]},ea={v:[-.62,3.23,-.2,-.62,1.75,-.73,.68,3.23,-.2,.68,1.75,-.73,-.63,2.8,1.01,-.63,1.32,.48,.67,2.8,1.01,.67,1.32,.48,.98,-1.78,.5,.98,1.38,.5,-1,-1.78,.5,-1,1.38,.5,.98,-1.78,-.8,.98,1.38,-.8,-1,-1.78,-.8,-1,1.38,-.8,.43,.88,.96,.43,-1.25,.96,.61,.88,.86,.61,-1.25,.86,.61,.88,.66,.61,-1.25,.66,.43,.88,.56,.43,-1.25,.56,.26,.88,.66,.26,-1.25,.66,.26,.88,.86,.26,-1.25,.86,-.07,.83,.94,-.07,-1.29,.94,.13,.83,.92,.13,-1.29,.92,.21,.83,.74,.21,-1.29,.74,.1,.83,.58,.1,-1.29,.58,-.1,.83,.59,-.1,-1.29,.59,-.19,.83,.77,-.19,-1.29,.77,-.62,.92,.71,-.62,-1.21,.71,-.56,.92,.9,-.56,-1.21,.9,-.37,.92,.95,-.37,-1.21,.95,-.23,.92,.81,-.23,-1.21,.81,-.28,.92,.62,-.28,-1.21,.62,-.48,.92,.57,-.48,-1.21,.57,-.4,.74,1.08,-.4,-1.39,1.08,-.33,.74,1.26,-.33,-1.39,1.26,-.13,.74,1.29,-.13,-1.39,1.29,-.01,.74,1.13,-.01,-1.39,1.13,-.08,.74,.94,-.08,-1.39,.94,-.28,.74,.92,-.28,-1.39,.92,.13,.81,1.26,.13,-1.31,1.26,.33,.81,1.29,.33,-1.31,1.29,.46,.81,1.13,.46,-1.31,1.13,.39,.81,.95,.39,-1.31,.95,.19,.81,.92,.19,-1.31,.92,.06,.81,1.07,.06,-1.31,1.07,.54,-.66,1.19,.82,-.65,.52,.54,-.04,1.19,.82,-.02,.52,.24,-.65,1.41,.24,-.02,1.41,-.34,-.65,1.33,-.34,-.02,1.33,-.57,-.65,1.1,-.57,-.02,1.1,-.78,-.68,.51,-.78,-.06,.51],C:[0,3,1,0,6,2,5,0,1,1,7,5,7,4,5,2,7,3,9,10,8,11,14,10,14,13,12,12,9,8,14,8,10,11,13,15,17,18,16,19,20,18,21,22,20,23,24,22,25,23,21,25,26,24,27,16,26,18,22,26,29,30,28,31,32,30,33,34,32,35,36,34,35,33,29,37,38,36,39,28,38,36,38,30,41,42,40,43,44,42,45,46,44,47,48,46,47,45,41,49,50,48,51,40,50,42,46,50,53,54,52,55,56,54,57,58,56,59,60,58,53,61,57,61,62,60,63,52,62,58,60,62,65,66,64,67,68,66,69,70,68,71,72,70,73,71,69,73,74,72,75,64,74,72,74,66,77,78,76,78,80,76,81,82,80,83,84,82,84,87,86,0,2,3,0,4,6,5,4,0,1,3,7,7,6,4,2,6,7,9,11,10,11,15,14,14,15,13,12,13,9,14,12,8,11,9,13,17,19,18,19,21,20,21,23,22,23,25,24,21,19,25,19,17,25,17,27,25,25,27,26,27,17,16,26,16,18,18,20,22,22,24,26,29,31,30,31,33,32,33,35,34,35,37,36,33,31,29,29,39,37,37,35,29,37,39,38,39,29,28,38,28,30,30,32,34,34,36,30,41,43,42,43,45,44,45,47,46,47,49,48,45,43,41,41,51,49,49,47,41,49,51,50,51,41,40,50,40,42,42,44,46,46,48,50,53,55,54,55,57,56,57,59,58,59,61,60,57,55,53,53,63,61,61,59,57,61,63,62,63,53,52,62,52,54,54,56,62,56,58,62,65,67,66,67,69,68,69,71,70,71,73,72,69,67,65,65,75,69,75,73,69,73,75,74,75,65,64,74,64,66,66,68,70,70,72,66,77,79,78,78,81,80,81,83,82,83,85,84,84,85,87],F:[0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,10,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,10]},fa={v:[.13,-.47,-.43,.13,-.47,.43,.13,.47,-.43,.13,.47,.43,3.21,-.47,-.43,3.21,-.47,.43,3.21,.47,-.43,3.21,.47,.43,-.03,.31,-.28,-.03,-.31,-.28,-.03,-.31,.28,-.03,.31,.28],C:[2,11,3,3,6,2,7,4,6,5,0,4,6,0,2,3,5,7,10,8,9,0,10,9,3,10,1,2,9,8,2,8,11,3,7,6,7,5,4,5,1,0,6,4,0,3,1,5,10,11,8,0,1,10,3,11,10,2,0,9],F:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},ha={v:[.13,-.53,-.43,.13,-.53,.43,.13,.53,-.43,.13,.53,.43,4.16,-.53,-.43,4.16,-.53,.43,4.16,.53,-.43,4.16,.53,.43,-.03,.34,-.28,-.03,-.34,-.28,-.03,-.34,.28,-.03,.34,.28],C:[2,11,3,3,6,2,7,4,6,5,0,4,6,0,2,3,5,7,10,8,9,0,10,9,3,10,1,0,8,2,2,8,11,3,7,6,7,5,4,5,1,0,6,4,0,3,1,5,10,11,8,0,1,10,3,11,10,0,9,8],F:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},ia={v:[0,0,-2,1.45,-1.05,-.89,-.55,-1.7,-.89,-1.79,0,-.89,-.55,1.7,-.89,1.45,1.05,-.89,.55,-1.7,.89,-1.45,-1.05,.89,-1.45,1.05,.89,.55,1.7,.89,1.79,0,.89,0,0,2,-.32,-1,-1.7,.85,-.62,-1.7,.53,-1.62,-1.05,1.7,0,-1.05,.85,.62,-1.7,-1.05,0,-1.7,-1.38,-1,-1.05,-.32,1,-1.7,-1.38,1,-1.05,.53,1.62,-1.05,1.9,-.62,0,1.9,.62,0,0,-2,0,1.18,-1.62,0,-1.9,-.62,0,-1.18,-1.62,0,-1.18,1.62,0,-1.9,.62,0,1.18,1.62,0,0,2,0,1.38,-1,1.05,-.53,-1.62,1.05,-1.7,0,1.05,-.53,1.62,1.05,1.38,1,1.05,.32,-1,1.7,1.05,0,1.7,-.85,-.62,1.7,-.85,.62,1.7,.32,1,1.7],C:[0,13,12,1,13,15,0,12,17,0,17,19,0,19,16,1,15,22,2,14,24,3,18,26,4,20,28,5,21,30,1,22,25,2,24,27,3,26,29,4,28,31,5,30,23,6,32,37,7,33,39,8,34,40,9,35,41,10,36,38,38,41,11,38,36,41,36,9,41,41,40,11,41,35,40,35,8,40,40,39,11,40,34,39,34,7,39,39,37,11,39,33,37,33,6,37,37,38,11,37,32,38,32,10,38,23,36,10,23,30,36,30,9,36,31,35,9,31,28,35,28,8,35,29,34,8,29,26,34,26,7,34,27,33,7,27,24,33,24,6,33,25,32,6,25,22,32,22,10,32,30,31,9,30,21,31,21,4,31,28,29,8,28,20,29,20,3,29,26,27,7,26,18,27,18,2,27,24,25,6,24,14,25,14,1,25,22,23,10,22,15,23,15,5,23,16,21,5,16,19,21,19,4,21,19,20,4,19,17,20,17,3,20,17,18,3,17,12,18,12,2,18,15,16,5,15,13,16,13,0,16,12,14,2,12,13,14,13,1,14],F:[11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11]},ja=aa.length/3;aa.push(255,255,255);const k=Float32Array;function m(t,a,i,s,h){for(var e=0;e<h;++e)i[s+e]=t[a+e]}function p(){return Math.random()}function t(t){return(2*p()-1)*t}function na(t,a){var i=[0,0,0],s=[];let h=2*Math.PI/a;for(var e=0;e<a;++e){const a=h*e,s=t(a);i.push(s*Math.cos(a),s*Math.sin(a),0)}for(e=0;e<a;++e)s.push(0,e+1,(e+1)%a+1);return{v:i,C:s,F:Array(a).fill(ja)}}function u(t,a,i){return t<a?a:t>i?i:t}function oa(t,a,i){for(var s=0;s<t.length;++s)i[s]=t[s]+a[s]}function v(t,a,i){for(var s=0;s<t.length;++s)i[s]=t[s]-a[s]}function pa(t,a){for(var i=0;i<a.length;++i)a[i]*=t;return a}function qa(t,a,i,s){for(var h=0;h<a.length;++h)s[h]=(1-t)*a[h]+t*i[h]}function ra(t,a){var i=[];return v(t,a,i),i[2]=0,Math.sqrt(x(i,i))}function va(t,a,i){i[0]=t[1]*a[2]-t[2]*a[1],i[1]=t[2]*a[0]-t[0]*a[2],i[2]=t[0]*a[1]-t[1]*a[0]}function x(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]}function y(t){return pa(1/Math.sqrt(x(t,t)),t)}function A(t){return t.fill(0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function B(){return A(new k(16))}function C(t){return[t[3],t[7],t[11]]}function D(t,a){a[3]=t[0],a[7]=t[1],a[11]=t[2]}function H(t,a,i){const s=Math.cos(t);t=Math.sin(t),2==a?(i[0]=s,i[4]=t,i[1]=-t,i[5]=s):1==a?(i[0]=s,i[8]=t,i[2]=-t,i[10]=s):0==a&&(i[5]=s,i[9]=t,i[6]=-t,i[10]=s)}function wa(t,a,i){i.fill(0);for(let s=0;4>s;++s)for(let h=0;4>h;++h)i[s]+=t[4*s+h]*a[h]}function xa(t,a,i){for(var s=0;4>s;++s)for(var h=0;4>h;++h)for(var e=h+4*s,n=i[e]=0;4>n;++n)i[e]+=t[n+4*s]*a[h+4*n]}function ya(t,a,i){if(0!=t.length){t.sort(((t,a)=>a[3]-t[3]));var s=-1,h=null,e=new k(4);t.forEach((([t,n,r])=>{var o;if(!(o=s!=r)){t:{for(o=0;o<n.length;++o)if(.005<Math.abs(n[o]-h[o])){o=!1;break t}o=!0}o=!o}if(o){if(-1!=s&&I.fill(),s=r,h=n,m(aa,3*r,e,0,3),pa(Math.min(1,i?Math.max(.45,x(n,i)):1),e),e[3]=1,a)for(n=0;n<a.length;++n)e[n]*=a[n];I.fillStyle="rgba("+e.join(",")+")",I.beginPath()}for(I.moveTo(t[0],t[1]),n=3;n<t.length;n+=3)I.lineTo(t[n],t[n+1]);I.closePath()})),I.fill()}}const za=document.querySelector("canvas"),I=za.getContext("2d",{alpha:!1,antialias:!1});setInterval(Aa,16);const L={};window.addEventListener("keydown",(t=>L[t.keyCode]=!0)),window.addEventListener("keyup",(t=>{L[t.keyCode]=!1,81==t.keyCode&&Da()}));var Fa,Ea=B(),Ga=B();const Ha=Math.tan(.3925);Ga[0]=1/(4/3*Ha),Ga[5]=1/Ha,Ga[10]=-21/19,Ga[11]=-40/19,Ga[14]=-1,Fa=Ga;var N,O,P,Q,Ka,R,La,Ia=y([0,-.5,1]),Ja=3600,M=null;function S(t,a){this.type=t,this.transform=B(),this.ma=B(),a&&(this.position=a,D(a,this.transform)),this.s=[],this.ia=[],this.va=A(B()),this.Ca=A(B())}function Ma(){S.call(this,2,[0,0,0]),this.model=ea,this.g=0,this.pa=!1,this.o=this.oa=this.h=this.i=0,this.T=100,this.s=[{j:[0,0,0],l:1},{j:[0,2,0],l:1}],this.R=()=>{T(new Na(this,fa,[1,.6,.05],[1,.1,.2])),T(new Na(this,fa,[-1,.6,.05],[-1,.1,.2])),T(new Na(this,ha,[.5,-1.75,.05],[.25,-1,.3])),T(new Na(this,ha,[-.5,-1.75,.05],[-.25,-1,.3])),this.Da=T(new Oa(this)),M=this},this.U=0,this.m=[1,1,1],this.na=0,this.Da=null,this.ha=t=>{this.T=Math.max(this.T-t,0),this.U=1,0>=this.T&&Pa(3)},this.Ga=()=>{this.rotate=this.transform.slice();const a=A(B());H(t(.08),0,a);const i=A(B());H(t(.08),1,i),this.wa=B(),xa(a,i,this.wa)},this.Fa=()=>{const t=.15*(1-.5*this.g);this.i*=.25,this.h*=.25,this.g=L[16]?u(this.g+.02,0,1):.95*this.g,L[40]?(this.position[1]-=t,this.h=.2):L[38]&&(this.position[1]+=t,this.h=-.2),L[37]?(this.position[0]-=t,this.i=.2):L[39]&&(this.position[0]+=t,this.i=-.2),this.oa+=u(this.i-this.oa,-.02,.02),this.o+=u(this.h-this.o,-.02,.02),H(this.oa,1,this.va),H(this.o+this.g*-Math.PI/2,0,this.Ca),xa(this.va,this.Ca,this.transform)},this.ta=()=>{this.na=900},this.update=()=>{this.na=Math.max(0,this.na-1);const t=0<this.na;this.Da.model=t?ca:null,N=this.pa?u(N+.005,0,(t?.75:.5)+.25*this.g):0,O-=N,this.U=u(this.U-.05,0,1),qa(this.U,[1,1,1],[1,0,0],this.m),0!=P&&0<Q&&(0>=(Q=Math.max(Q-16,0))&&(T(new Qa(this.position,(()=>this.type=0))),Pa(3))),3==P?(this.rotate||this.Ga(),xa(this.wa,this.rotate,this.transform),this.rotate=this.transform.slice()):1!=P&&2!=P||(this.Fa(),5>=O&&(Pa(3),this.type=0)),D(this.position,this.transform)}}function Na(t,a,i,s){S.call(this,128,i),this.model=a,this.o=[i[0],i[1],i[2],1],this.h=y(s),this.i=Array(4),this.g=this.h.slice(),this.s=[{j:[1,0,0],l:.4}],this.target=t,this.ha=t=>{this.g[2]+=.5,this.target?.ha(t)},this.ta=()=>{this.target?.ta()},this.update=()=>{if(this.target){this.m=this.target.m,wa(this.target.transform,this.o,this.position),wa(this.target.transform,[this.h[0],this.h[1],this.h[2],0],this.i),oa(this.g,[0,0,.1*N*(1-this.g[2])],this.g),y(this.g);var t=this.g,a=this.i,i=this.g,s=Math.acos(u(x(t,a),-1,1)),h=Math.sin(s);for(1e-4<Math.abs(h)?(t=t.slice(),pa(Math.sin(.96*s)/h,t),a=a.slice(),pa(Math.sin(.04*s)/h,a),oa(t,a,i)):m(t,0,i,0,3),a=[(i=this.target.transform)[2],i[6],i[10]],i=this.g,A(s=this.transform),va(a,i,h=[]),y(h),va(i,h,a=[]),t=0;3>t;++t)s[4*t]=i[t],s[4*t+1]=h[t],s[4*t+2]=a[t];D(this.position,this.transform)}else this.type=0}}function Ra(a,i,s){const h=t(Math.PI);T(new Sa([a+90*Math.cos(h),i+90*Math.sin(h),s]))}function Ta(){S.call(this,8),Q=Ka?13e3:25e3,this.T=.5,this.i=this.h=0,this.U=Ja+200,this.o=800*p(),this.g=[];for(var a=0;5>a;++a)this.g.push((.05+.8*p())*Ja);this.g.sort(((t,a)=>t-a)),this.R=()=>{T(new Ua(C(V.find((t=>64==t.type)).transform)))},this.update=()=>{if(0>-250+O)this.type=0;else{var a=1-O/Ja,i=Math.sin(a*Math.PI);a=Math.sin(3*a*Math.PI),this.T=.5*(i*i+a*a),100<this.U-O&&(i=36*this.T,this.h=u(this.h+t(i),-600,600),this.i=u(this.i+t(i),-600,600),T(new Va([this.h,this.i,-250])),this.U=O),--this.o,0>=this.o&&(i=M)&&(Ra(i.position[0],i.position[1],-175),this.o=1e3+400*p()),0<(i=this.g.length)&&O- -250<this.g[i-1]&&(T(new Xa([this.h,this.i,-375])),this.g.pop())}}}function Ya(){S.call(this,8),Q=12e4,this.i=[[250,()=>R="It's time to blow up the volcano!"],[250,()=>R="The fuse is burning. Deliver the TNT before it explodes!"],[250,()=>R="Use arrow keys to move. Hold shift to dive."],[250,()=>R="Diving is faster, but limits mobility."],[300,()=>{R="Fly through rings to earn more time.",T(new Va([0,0,-250]))}],[300,()=>{T(new Va([10,0,-250]))}],[400,()=>{R=null,T(new Va([0,0,-250]))}],[450,()=>{R="Catch the bird to get a powerup!",T(new Xa([0,0,-250],!0))}],[500,()=>{R="Birds fly away from you as you approach.",T(new Xa([0,0,-250]))}],[500,()=>{R="Avoid hitting planes. They hurt :(";const t=M;Ra(t.position[0],t.position[1],-250)}],[600,()=>{R="Watch out for flares from the volcano!",T(new Ua([0,0,0])),T(new Va([-10,0,-250]))}],[600,()=>{R="Land in the volcano! You may have to leave rings behind.",T(new Va([30,50,-250]))}]],this.g=0,this.h=-1,this.update=()=>{if(--this.g,0>=this.g)if(++this.h,this.h<this.i.length){const t=this.i[this.h];this.g=t[0],t[1]?.()}else this.type=0}}function Va(t){S.call(this,4),this.ga=t=>{if(this.type=1,4.5>ra(C(t.transform),C(this.transform))){Za($a[0]),this.i*=2,this.g=100,Q+=Ka?2800:3200;var a=this.update;this.update=()=>{this.m=[0,1,0,this.g/100],a.call(this),--this.g,0>this.g&&(this.type=0)}}else this.g=10,this.update=()=>{this.m=[1,1,1,this.g/10],--this.g,0>this.g&&(this.type=0)},t.ha(15),Za($a[2]),N-=.5},this.s=[{j:[0,0,0],l:7}],this.model=ba,D(t,this.transform),this.h=0,this.i=.025,this.update=()=>{this.h+=this.i,H(this.h,2,this.transform),this.transform[11]+=N,0<this.transform[11]&&(this.type=0)}}const ab=na((()=>.5),5);function bb(t,a){S.call(this,256,t),this.s=[{j:[0,0,0],l:1}],this.model=ab,this.m=[1,.1,0,1],this.g=0,this.direction=a,this.Aa=!0,this.ga=t=>{t.ha?.(15),this.type=0,Za($a[3])},this.update=()=>{this.g+=.1,H(this.g,2,this.transform),this.transform[3]+=2*this.direction[0],this.transform[7]+=2*this.direction[1],this.transform[11]+=2*this.direction[2],0<this.transform[11]&&(this.type=0)}}function Ua(a){S.call(this,512,a),this.i=0,this.g=5,this.h=0,this.R=()=>this.target=M,this.o=()=>{if(this.target){var a=C(this.transform);a[0]+=t(6),a[1]+=t(6);var i=C(this.target.transform);i[0]+=t(8),i[1]+=t(8);var s=Array(3);v(i,a,s);var h=(Math.max(-250,a[2])-a[2])/s[2];pa(h,i=s.map((t=>t))),100<i[2]&&1600>i[2]&&(oa(a,i,h=Array(3)),T(new bb(h,y(s))))}},this.update=()=>{0<this.h&&--this.h,0<this.i&&--this.i,0<this.g&&0==this.h&&(--this.g,this.o(),0==this.g?this.i=250:this.h=24),0==this.g&&0==this.i&&(this.g=5),this.transform[11]=-O}}function Sa(a){S.call(this,1024,a),this.model=da,this.R=()=>{this.target=M,this.h=Math.atan2(this.target.transform[7]-this.transform[7],this.target.transform[3]-this.transform[3]),this.update()},this.ga=t=>{this.type=1,Za($a[4]),t.ha(Ka?75:50),N-=.5,this.g=50,this.update=()=>{--this.g,this.m=[1,1,1,this.g/50],0>this.g&&(this.type=0)}},this.s=[{j:[0,0,-3],l:3},{j:[0,5,-2],l:2.5},{j:[0,-5,-2],l:2.5},{j:[0,-14,-2],l:2.5},{j:[0,-16,-2],l:4},{j:[5.5,0,-1],l:2},{j:[9.5,0,-1],l:2},{j:[-5.5,0,-1],l:2},{j:[-9.5,0,-1],l:2}],this.speed=.3+.1*p(),this.h=t(Math.PI),this.update=()=>{H(this.h-Math.PI/2,2,this.transform),this.transform[3]+=Math.cos(this.h)*this.speed,this.transform[7]+=Math.sin(this.h)*this.speed,this.transform[11]+=N,0<this.transform[11]&&(this.type=0)}}function Oa(t){var a=[0,0,1.3];S.call(this,1,a),this.model=ca;const i=B();D(a,i),this.target=t,this.update=()=>{this.target?xa(this.target.transform,i,this.transform):this.type=0}}function Xa(t,a){S.call(this,16,t),this.R=()=>{a||(this.target=M)},this.ga=t=>{t.ha(5),t.ta?.(),Q+=Ka?7500:8e3,this.type=0,Za($a[1])},this.s=[{j:[0,1.5,0],l:1.5},{j:[0,-1.5,0],l:1.5},{j:[-2.5,-0,0],l:1.5},{j:[2.5,-0,0],l:1.5}],this.model=ca,this.h=()=>{this.i=(.5<p()?1:-1)*Math.PI/400},this.h(),this.g=2*p()*Math.PI,this.update=()=>{if(this.target){var t=[];v(C(this.target.transform),C(this.transform),t),t=Math.sqrt(x(t,t))<(Ka?43:35)?.25:.05}else t=.05;this.speed=t,.01>p()&&this.h(),this.g+=this.i,H(this.g-Math.PI/2,2,this.transform),this.transform[3]+=Math.cos(this.g)*this.speed,this.transform[7]+=Math.sin(this.g)*this.speed,this.transform[11]+=N,0<this.transform[11]&&(this.type=0)}}function cb(t){var a=.15+.1*p();S.call(this,1,t),this.model=ia,this.size=0,this.g=45,t=[[222,145,11],[245,110,0],[245,110,0],[222,62,11],[222,62,11],[255,21,13]],this.m=[...t[Math.floor(Math.random()*t.length)].map((t=>t/255)),1],this.update=()=>{this.size+=a,this.m[3]=.2+.8*u(this.g/45,0,1),A(this.transform),D(this.position,this.transform);for(var t=this.size,i=this.transform,s=0;3>s;++s)for(var h=0;3>h;++h)i[4*s+h]*=t;--this.g,0>this.g&&(this.type=0)}}function Qa(a,i,s){S.call(this,1,a),this.g=0,this.h=s||6,this.i=()=>{for(var i=0;3>i;++i){var s=Array(3).fill(0).map((()=>t(3)));oa(s,a,s),T(new cb(s))}Za($a[5],t(.75)+1)},this.update=()=>{0<this.h?(--this.g,0>=this.g&&(this.i(),--this.h,this.g=20)):(i?.(),this.type=0)}}function db(){S.call(this,32),this.model=da,this.g=0,this.R=()=>{Ia=y([.5,1,0]),this.h=T(new Ma),this.h.pa=!1,La="Volcano Drop!"};var t=0,a=0;this.update=()=>{a+=.2,t=u(t,0,1),A(this.transform),H(.003*Math.sin(a)+.03*Math.sin(a/20),0,this.transform),H(.008*Math.cos(.2*a),1,this.transform),0==t&&(this.h.transform=this.transform.slice()),D([-5.5,1.7,6.5],this.transform);var i=[];qa(t,[6.5,-34,8],[0,0,0],i);var s=[];qa(t,[0,0,1],[0,1,0],s),qa(t,[0,0,0],[0,0,-30],this.h.position);var h=Ea,e=[];v(this.h.position,i,e),y(e);var n=[];va(e,s,n),y(n),va(n,e,s=[]);for(var r=0;3>r;++r)h[r]=n[r],h[r+4]=s[r],h[r+8]=-e[r],h[r+12]=0;h[3]=-x(n,i),h[7]=-x(s,i),h[11]=x(e,i),h[15]=1,qa(t,[.5,1,0],[0,-.5,1],Ia),y(Ia),0==this.g?L[49]?(this.g=1,eb()):L[50]?(Ka=!1,this.g=2,eb()):L[51]&&(Ka=!0,this.g=2,eb()):(La=null,1<=(t+=.015)&&(A(Ea),this.type=0,this.h.pa=!0,T(new fb),Pa(this.g)))}}function gb(a,i,s,h){S.call(this,1,a);var e=i;s||(s=(a=[[143,174,112],[106,158,54],[120,210,90],[72,107,36]])[Math.floor(Math.random()*a.length)].map((t=>t/255))),this.m=[...s,1],this.model=na((()=>e=Math.max(e+t(.4*i),.5*i)),20),h||(h=5*p()+3),this.g=-h,this.model.v[2]=h,this.update=()=>{this.transform[11]=-O+this.g,this.m[3]=1-.5*u((O-500)/1300,0,1)}}function hb(t){S.call(this,64,t),this.model=na((()=>8),24),this.m=[.98,.26,.05,1],this.Aa=!0,this.s=[{j:[0,0,0],l:8}],this.ga=t=>{t.type=0,T(new Qa(C(this.transform),null,50)),Pa(4)},this.update=()=>{this.transform[11]=-O,this.m[3]=1-.5*u((O-500)/1300,0,1)}}function fb(){S.call(this,1),this.g=[8,6,5],this.R=()=>{this.target=M},this.update=()=>{this.target&&(this.transform[3]+=Math.min(0,this.target.transform[3]-(this.transform[3]-this.g[0])),this.transform[3]+=Math.max(0,this.target.transform[3]-(this.transform[3]+this.g[0])),this.transform[7]+=Math.min(0,this.target.transform[7]-(this.transform[7]-this.g[1])),this.transform[7]+=Math.max(0,this.target.transform[7]-(this.transform[7]+this.g[1])),D(C(this.transform).map((t=>-t)),Ea))}}ab.v[2]=6;const ib={4:130,64:2,16:130,256:130,1024:130};let V=[];function Da(){P=0,O=Ja,N=0,R=null,V=[],V.push(new db);const a=[t(20),t(20),0],i=6+(2*p()|0);for(var s=0;s<i;++s){const t=100+300*p(),i=2*p()*Math.PI;V.push(new gb([a[0]+Math.cos(i)*t,a[1]+Math.sin(i)*t,0],15*p()+20))}V.push(new gb(a,60,[.2,.2,.2],10)),V.push(new hb([a[0],a[1],8])),V.forEach((t=>t.R?.()))}function Pa(t){if(P!=t)switch(P=t,t){case 4:case 3:jb(8),jb(512),La=4==t?"You win!":"Game Over",R="Press (q) to return to the menu.";break;case 2:case 1:T(2==t?new Ta:new Ya)}}function Aa(){V.forEach((t=>{t.target&&0==t.target.type&&(t.target=null),t.update?.()})),M?.type||(M=null);const t=new k(4),a=new k(4);V.forEach((i=>{i.ia.length!=i.s.length&&(i.ia=i.s.map((()=>({l:0,j:Array(3)}))));for(var s=0;s<i.s.length;++s){const h=i.s[s];m(h.j,0,t,0,3),t[3]=1,wa(i.transform,t,a),m(a,0,i.ia[s].j,0,3),i.ia[s].l=h.l}}));const i=new k(3);let s=(t,a)=>{t=V[t].ia,a=V[a].ia;for(let s=0;s<t.length;s++)for(let h=0;h<a.length;h++){v(t[s].j,a[h].j,i);let e=t[s].l+a[h].l;if(x(i,i)<e*e)return!0}return!1};for(let t=0;t<V.length;t++){let a=V[t];for(let i=t+1;i<V.length;i++){let h=V[i];const e=(ib[a.type]||0)&h.type,n=(ib[h.type]||0)&a.type;(e||n)&&s(t,i)&&(e&&a.ga?.(h),n&&h.ga?.(a))}}V=V.filter((t=>t.type)),V.forEach((t=>{xa(Ea,t.transform,t.ma)})),kb()}function T(t){return V.push(t),t.R?.(),t}function jb(t){V.filter((a=>a.type==t)).forEach((t=>t.type=0))}function kb(){const t=za.width,a=za.height;I.fillStyle="#87CEEB",I.beginPath(),I.rect(0,0,t,a),I.fill();const i=V.slice();var s,h;i.sort(((t,a)=>t.ma[11]-a.ma[11])),i.forEach((i=>{if(i.model){var s=i.ma,h=i.model.v,e=i.model.C,n=i.model.F,r=Fa,o=h.length/3;const F=e.length/3;let V=new k(4),S=new k(4),j=new k(4*o);var l=B();for(xa(r,s,l),r=0;r<o;++r)V[3]=1,m(h,3*r,V,0,3),wa(l,V,S),m(S,0,j,4*r,4);o=[],l=new k(12);var f=new k(4),u=new k(3),c=new k(3),g=new k(3),p=new k(3);let C=[];for(r=0;r<F;++r){m(j,4*e[3*r],l,0,4),m(j,4*e[3*r+1],l,4,4),m(j,4*e[3*r+2],l,8,4),C.length=0;for(var d=l,M=C,b=d.length,w=0;w<b;w+=4){var I=w,T=(w+4)%b,A=d[I+2]+d[I+3];const t=d[T+2]+d[T+3];if(0<A)for(var P=0;4>P;++P)M.push(d[I+P]);if(0>A*t)for(A=-A/(t-A),P=0;4>P;++P)M.push(d[I+P]+A*(d[T+P]-d[I+P]))}if(!(3>C.length)){for(M=C,w=d=[],b=P=0;b<M.length;b+=4){for(T=M[b+3],I=0;3>I;++I)w.push(M[b+I]/T);P+=M[b+2]}M=P/(M.length/4),m(h,3*e[3*r],f,0,3),m(h,3*e[3*r+1],u,0,3),m(h,3*e[3*r+2],c,0,3),v(u,f,g),v(c,f,p),va(g,p,V),V[3]=0,wa(s,V,S),y(S),f[3]=1,wa(s,f,V),0<=x(V,S)||o.push([d,S.slice(0,3),n[r],M])}}for(s=0;s<o.length;++s)for(e=o[s][0],h=0;h<e.length;h+=3)e[h]=(.5*e[h]+.5)*t|0,e[h+1]=(.5-.5*e[h+1])*a|0;ya(o,i.m,i.Aa?null:Ia)}})),0!=P&&(s=N,h=Q,I.font="54px sans-serif",I.textAlign="right",I.fillStyle=3e3>h?0==(h/100|0)%2?"#FF0000":"#FFFF00":"#FF0000",I.fillText((""+(h/6e4|0)).padStart(2,"0")+":"+(""+(h/1e3|0)%60).padStart(2,"0"),1012,46),I.fillStyle="#FFFFFF",I.fillText((195*s).toFixed(0),980,740),I.font="16px sans-serif",I.textAlign="left",I.fillText("mph",980,740)),2!=P&&1!=P||function(t){I.fillStyle="#222222",I.strokeStyle="#222222",I.beginPath(),I.rect(24,24,270,24),I.fill(),I.stroke(),I.fillStyle="#FF0000",I.beginPath(),I.rect(24,24,t/100*270,24),I.fill()}(M?.T||0),R&&(I.fillStyle="#FF0000",I.font="36px sans-serif",I.textAlign="center",I.fillText(R,512,700)),La&&(I.fillStyle="#FFFFFF",I.font="bold 84px sans-serif",I.textAlign="center",I.fillText(La,512,112)),0==P&&La&&(I.fillStyle="#FFFFFF",I.font="34px sans-serif",I.textAlign="center",I.fillText("Press (1) for tutorial",320,580),I.fillText("Press (2) for regular",700,580),I.fillText("Press (3) for hard",512,660),I.fillStyle="#222222",I.font="16px sans-serif",I.textAlign="right",I.fillText("Created by Justin Meiners and Robert Williams for js13k 2022.",1e3,730))}function lb(t){let a={za:function(){a.Ja=0,a.P=100/(t.H*t.H+.001),a.Ba=100/(t.B*t.B+.001),a.Ka=0<t.B,a.sa=1-.01*Math.pow(t.Z,3),a.Oa=1e-6*-Math.pow(t.Y,3),a.u=.5-.5*t.V,a.Ia=5e-5*-t.W,a.Ha=0<=t.A?1-.9*Math.pow(t.A,2):1+10*Math.pow(t.A,2),a.la=Math.floor(2e4*Math.pow(1-t.G,2)+32),1===t.G&&(a.la=0)}};a.za(),a.ja=parseInt(t.fa,10),a.D=.1*Math.pow(t.L,3),a.La=1!=t.L,a.Na=1+1e-4*t.ba,a.ra=5/(1+20*Math.pow(t.ca,2))*(.01+a.D),.8<a.ra&&(a.ra=.8),a.S=.1*Math.pow(t.$,2),a.ya=1+3e-4*t.aa,a.Pa=.01*Math.pow(t.da,2),a.Ea=.5*t.ea,a.xa=[Math.floor(t.I*t.I*1e5),Math.floor(t.K*t.K*1e5),Math.floor(t.J*t.J*1e5)],a.Ma=t.X,a.ka=1020*Math.pow(t.M,2),0>t.M&&(a.ka=-a.ka),a.qa=Math.pow(t.N,2),0>t.N&&(a.qa=-a.qa),a.ua=Math.floor(2e4*Math.pow(1-t.O,2)+32),0===t.O&&(a.ua=0),a.gain=Math.exp(.25)-1;for(var i=0,s=0,h=0,e=Array(32),n=0;32>n;++n)e[n]=2*Math.random()-1;var r=0,o=0,l=0,f=0,u=0,c=Array(1024);for(n=0;1024>n;++n)c[n]=0;for(var m=[],g=0,p=0,d=0;0!=a.ua&&++a.Ja>=a.ua&&a.za(),0!=a.la&&d>=a.la&&(a.la=0,a.P*=a.Ha),a.sa+=a.Oa,a.P*=a.sa,!(a.P>a.Ba&&(a.P=a.Ba,a.Ka));++d){var M=a.P;if(0<a.Ea&&(l+=a.Pa,M=a.P*(1+Math.sin(l)*a.Ea)),8>(M=Math.floor(M))&&(M=8),a.u+=a.Ia,0>a.u&&(a.u=0),.5<a.u&&(a.u=.5),++o>a.xa[r]&&(o=0,2<++r))break;var v=o/a.xa[r];v=0===r?v:1===r?1+2*(1-v)*a.Ma:1-v,a.ka+=a.qa;var b=Math.abs(Math.floor(a.ka));1023<b&&(b=1023),0!=a.ya&&(a.S*=a.ya,1e-5>a.S&&(a.S=1e-5),.1<a.S&&(a.S=.1));for(var y=0,w=0;8>w;++w){if(n=0,++f>=M&&(f%=M,3===a.ja))for(n=0;32>n;++n)e[n]=2*Math.random()-1;if(n=f/M,0===a.ja)n=n<a.u?.5:-.5;else if(1===a.ja)n=n<a.u?2*n/a.u-1:1-2*(n-a.u)/(1-a.u);else if(2===a.ja)n=Math.sin(2*n*Math.PI);else{if(3!==a.ja)throw"ERROR: Bad wave type: "+a.ja;n=e[Math.floor(32*f/M)]}var I=i;a.D*=a.Na,0>a.D&&(a.D=0),.1<a.D&&(a.D=.1),a.La?(s+=(n-i)*a.D,s-=s*a.ra):(i=n,s=0),h+=(i+=s)-I,n=h-=h*a.S,c[1023&u]=n,n+=c[u-b+1024&1023],u=u+1&1023,y+=n*v}g+=y,1<=++p&&(p=0,y=g,g=0,y/=8,y*=a.gain,m.push(y))}return m}function Za(t,a=1){let i=new AudioContext,s=i.createGain();s.gain.setValueAtTime(a,i.currentTime),(a=i.createBufferSource()).buffer=t,a.connect(s).connect(i.destination),a.start(i.currentTime)}Da();var Y=null,mb=null,nb=null,Z=null;function ob(t){Y&&(Y.stop(0),Y=null),mb&&(clearTimeout(mb),mb=null),Z=nb=null,Z=new AudioContext,Y=new OscillatorNode(Z,{type:"sine",frequency:0}),nb=new GainNode(Z,{value:0});var a=document.getElementById("music").checked;nb.gain.setValueAtTime(a?.18:0,0);for(let[a,i]of t)Y.frequency.setValueAtTime(qb[a-6],i/1e3);a=t.reduce(((t,a)=>Math.max(t,a[1])),0)+1e3;for(let[i,s]of t)Y.frequency.setValueAtTime(qb[i],(s+a)/1e3);Y.connect(nb).connect(Z.destination),Y.start(Z.currentTime),mb=setTimeout((()=>{mb=null,ob(t)}),2*a)}const $a=[{fa:1,I:0,K:.08471101207408382,X:.3468633995198561,J:.357179930548691,H:.6811589321967947,B:0,Z:0,Y:0,ea:0,da:0,A:.41912637580473566,G:.6487335786143021,V:0,W:0,O:0,M:0,N:0,L:1,ba:0,ca:0,$:0,aa:0},{fa:1,I:0,K:.2248469135034446,X:0,J:.4958265678246262,H:.37756649565996814,B:0,Z:.14431964296874503,Y:0,ea:0,da:0,A:0,G:0,V:1,W:0,O:0,M:0,N:0,L:1,ba:0,ca:0,$:0,aa:0},{fa:3,I:0,K:.06841022161375787,X:0,J:.403,H:.3280483280173474,B:0,Z:-.5887646078252177,Y:0,ea:0,da:0,A:0,G:0,V:0,W:0,O:0,M:0,N:0,L:1,ba:0,ca:0,$:0,aa:0},{fa:3,I:0,K:.0813713430429975,X:0,J:.22567589583494954,H:.695525791616842,B:0,Z:-.46141484506510827,Y:0,ea:0,da:0,A:0,G:0,V:0,W:0,O:0,M:0,N:0,L:1,ba:0,ca:0,$:.025630963865669387,aa:0},{fa:3,I:0,K:.257837057859972,X:.47594063886278615,J:.2934573294998162,H:.23179617917817402,B:0,Z:0,Y:0,ea:0,da:0,A:0,G:0,V:0,W:0,O:.6715554672938782,M:0,N:0,L:1,ba:0,ca:0,$:0,aa:0},{fa:3,I:0,K:.35,X:.527,J:.694,H:.03498685185395313,B:0,Z:.0199162440173406,Y:0,ea:.18176693090338614,da:.4993350372296267,A:0,G:0,V:0,W:0,O:.4255423790055556,M:0,N:0,L:1,ba:0,ca:0,$:0,aa:0},{fa:1,I:0,K:.043234146187052895,X:.4932882977952163,J:.25885335733347026,H:.8997029847534574,B:0,Z:0,Y:0,ea:0,da:0,A:.43487715157261797,G:.5884500505757229,V:0,W:0,O:0,M:0,N:0,L:1,ba:0,ca:0,$:0,aa:0}].map((function(t){t=lb(t);let a=new AudioBuffer({numberOfChannels:1,length:t.length,sampleRate:44100}),i=a.getChannelData(0);for(let a=0;a<t.length;a++)i[a]=t[a];return a})),qb=[];qb[57]=440;for(let t=58;128>=t;t++)qb[t]=1.0595*qb[t-1];for(let t=56;0<=t;t--)qb[t]=qb[t+1]/1.0595;const rb=[[58,2e3],[70,2854],[68,3864],[66,4104],[65,4312],[63,4562],[66,5557],[65,5791],[63,6e3],[62,6239],[63,6901],[65,7140],[58,9104],[62,9604],[63,10244],[65,10489],[66,10708],[68,10963],[66,12083],[65,12328],[66,12552],[63,13432],[65,14072],[66,14286],[68,14505],[70,14739],[58,16104],[70,16984],[68,18057],[66,18291],[65,18505],[66,18713],[65,18927],[63,19166],[66,19880],[65,20145],[63,20343],[65,20609],[63,21343],[62,21588],[60,22265],[58,22526],[58,23864],[66,24359],[66,25375],[68,25859],[66,26078],[65,26328],[65,27260],[66,27687],[65,27916],[63,28171]];function eb(){Za($a[6]),ob(rb)}document.getElementById("music").addEventListener("change",(t=>{t.currentTarget.checked?Z&&nb.gain.setValueAtTime(.18,Z.currentTime):Z&&nb.gain.setValueAtTime(0,Z.currentTime)}))</script>