<title>Dodos — Escaping from Extinction</title><style>@keyframes dodo-head{from{right:-8px}to{right:-3px}}@-o-keyframes dodo-head{from{right:-8px}to{right:-3px}}@-moz-keyframes dodo-head{from{right:-8px}to{right:-3px}}@-webkit-keyframes dodo-head{from{right:-8px}to{right:-3px}}@keyframes waves{from{background-position:0 0}to{background-position:0 30px}}@-o-keyframes waves{from{background-position:0 0}to{background-position:0 30px}}@-moz-keyframes waves{from{background-position:0 0}to{background-position:0 30px}}@-webkit-keyframes waves{from{background-position:0 0}to{background-position:0 30px}}@keyframes exit{0%{opacity:0;transform:scale(1)}30%{opacity:1;transform:scale(.9)}100%{opacity:.5;transform:scale(0)}}@-o-keyframes exit{0%{opacity:0;-o-transform:scale(1)}30%{opacity:1;-o-transform:scale(.9)}100%{opacity:.5;-o-transform:scale(0)}}@-moz-keyframes exit{0%{opacity:0;-moz-transform:scale(1)}30%{opacity:1;-moz-transform:scale(.9)}100%{opacity:.5;-moz-transform:scale(0)}}@-webkit-keyframes exit{0%{opacity:0;-webkit-transform:scale(1)}30%{opacity:1;-webkit-transform:scale(.9)}100%{opacity:.5;-webkit-transform:scale(0)}}*{margin:0;padding:0}body{background:#000;color:#fff;font-family:Liberation Sans,Arial,sans-serif;font-size:16px;line-height:19px}.info{background:#eee;border:3px solid #fff;border-radius:10px;box-shadow:5px 5px 30px #020;color:#444;left:50%;margin-left:-200px;max-height:460px;padding:0 20px 10px 20px;position:absolute;text-align:justify;top:100px;width:400px;z-index:100}.info h1{font-size:22px;line-height:26px;margin:5px 0;text-align:center}.info p{margin:10px 0}.info ul{padding-left:20px}.info .bts{text-align:center}#intro{top:30px}#intro d{left:330px;top:285px;transform:rotate(135deg);-o-transform:rotate(135deg);-moz-transform:rotate(135deg);-webkit-transform:rotate(135deg)}#intro d span{font-size:12px;left:-45px;position:absolute;top:-30px;transform:rotate(200deg);-o-transform:rotate(200deg);-moz-transform:rotate(200deg);-webkit-transform:rotate(200deg);white-space:nowrap}button{font-size:200%;padding:0 .5em}#area{background:#090;border-radius:30px;box-shadow:inset 0 0 200px rgba(0,50,0,.8);height:500px;margin:auto;overflow:hidden;position:relative;width:800px}.scoreboard{background:rgba(0,0,0,.3);border-radius:0 0 20px 0;left:0;padding:5px 30px;position:absolute;top:0;z-index:50}d{background:#f08;background:radial-gradient(circle,#f6e 5%,#b06 90%);border:2px solid #000;border-radius:20px;box-shadow:0 0 11px rgba(0,0,0,.8);height:26px;left:0;margin:-15px 0 0 -15px;position:absolute;top:0;width:26px;z-index:20}d h{animation:dodo-head .2s linear 0s infinite alternate;-webkit-animation:dodo-head .2s linear 0s infinite alternate;background:#f08;background:radial-gradient(circle,#f6e 5%,#b06 90%);border:2px solid #000;border-radius:10px;height:16px;position:absolute;right:-6px;top:3px;width:16px;z-index:10}d:hover,d:hover h{background:radial-gradient(circle,#fe6 5%,#b60 90%);border:2px solid #700}d.sel,d.sel h{background:radial-gradient(circle,#6ef 5%,#06b 90%);border:2px solid #036}d.sel{box-shadow:0 0 30px #ff0,0 0 30px #ff0}d.drowned,d.fallen,d.saved{opacity:0;transition:3s;-o-transition:3s;-moz-transition:3s;-webkit-transition:3s}d.drowned h,d.fallen h,d.saved h{animation:dodo-head .4s linear 0s infinite alternate;-o-animation:dodo-head .4s linear 0s infinite alternate;-moz-animation:dodo-head .4s linear 0s infinite alternate;-webkit-animation:dodo-head .4s linear 0s infinite alternate}d.saved,d.saved h{background:radial-gradient(circle,#fff 5%,#888 90%)}d v{border:3px solid transparent;border-left:7px solid #f90;height:0;position:absolute;right:-10px;top:5px;width:0}d i{background:#000;border-radius:2px;height:3px;position:absolute;right:3px;top:3px;width:3px}d i:last-child{top:10px}l{background:radial-gradient(circle,#fff 33%,rgba(255,255,255,0) 100%);border-radius:100px;margin:-9px 0 0 -9px;position:absolute}water{animation:waves 3s linear 0s infinite normal;-o-animation:waves 3s linear 0s infinite normal;-moz-animation:waves 3s linear 0s infinite normal;-webkit-animation:waves 3s linear 0s infinite normal;background:#09e;background:linear-gradient(22.5deg,#09e 2%,#07d 23%,#07d 27%,#09e 48%,#09e 52%,#07d 73%,#07d 77%,#09e 97%);background-size:75px 30px;border-radius:15px;box-shadow:inset 0 0 45px rgba(150,220,255,.8),inset 0 0 50px rgba(0,200,255,.8),15px 15px 30px rgba(50,230,50,.3);position:absolute}water.noAnim{animation:none;-o-animation:none;-moz-animation:none;-webkit-animation:none}hole{background:#210;background-image:radial-gradient(ellipse,#000 20%,#420 80%);border-radius:15px;box-shadow:inset 0 0 20px #966400,inset 0 0 50px rgba(150,100,0,.9),15px 15px 30px rgba(50,230,50,.3);position:absolute}exit{position:absolute}e{animation:exit 2s ease-out 0s infinite normal;-o-animation:exit 2s ease-out 0s infinite normal;-moz-animation:exit 2s ease-out 0s infinite normal;-webkit-animation:exit 2s ease-out 0s infinite normal;background:radial-gradient(circle,rgba(50,150,0,0) 40%,#ff8 100%);border-radius:50%;height:100%;left:0;position:absolute;top:0;width:100%}e:last-child{animation:exit 2s ease-out 1s infinite normal;-o-animation:exit 2s ease-out 1s infinite normal;-moz-animation:exit 2s ease-out 1s infinite normal;-webkit-animation:exit 2s ease-out 1s infinite normal}m{height:50px;left:-99px;margin:-25px 0 0 -25px;position:absolute;transform:rotate(45deg);-o-transform:rotate(45deg);-moz-transform:rotate(45deg);-webkit-transform:rotate(45deg);width:50px;z-index:10}x{background:#d00;border-radius:10px;height:100%;left:35%;position:absolute;width:30%}x:last-child{transform:rotate(90deg);-o-transform:rotate(90deg);-moz-transform:rotate(90deg);-webkit-transform:rotate(90deg)}</style><body onload=init()><div id=area></div><script>!function(e){function t(e,t){var n=document.createElement(e);for(att in t)"parent"==att?t.parent.appendChild(n):"html"==att?n.innerHTML=t.html:n.setAttribute(att,t[att]);return n}function n(e,t,n){var o=new Date;o.setDate(o.getDate()+(n||365)),t=escape(t)+"; expires="+o.toUTCString(),document.cookie=e+"="+t}function o(e){for(var t,n=document.cookie.split(/;\s+/),o=0;t=n[o];o++)if((t=t.split("="))[0]==e)return unescape(t[1]);return!1}function a(e,n,o,a,i){var r;console.log("createThing",e,n,o,a,i),T.push(r=t(e,{style:"left:"+(n-10)+"px; top:"+(o-10)+"px;width:"+(a+20)+"px; height:"+(i+20)+"px",parent:W})),r.type=e,r.x=n,r.y=o,r.w=a,r.h=i,"exit"==e&&(r.innerHTML="<e></e><e></e>")}function i(){b&&(b.className="",b=null,k.style.left="-99px")}function r(e){F.play(),i(),e.stopPropagation(),k.style.left="-99px",b=this;for(var t,n=0;t=A[n];n++)t.className="",t.target=null;this.className="sel"}function l(e,t){return K(Y(t.x-e.x)+Y(t.y-e.y))}function c(e){e==b&&i();for(var t,n=[],o=0;t=A[o];o++)t!=e&&n.push(t);A=n,e.onclick=function(){},setTimeout((function(){e.parentNode&&e.parentNode.removeChild(e)}),3e3)}function f(){L.innerHTML="Saved: "+S+" <small>("+M+"+)</small> &nbsp; Killed: "+N+" <small>(of "+w+")</small> &nbsp; Time left: "+(C.time-O)+"sec"}function p(e){N++,c(e),0==A.length&&(clearInterval(I),m("<h1>This Dodos fail<br><big>☹</big></h1><p>You left all your dodos to the death without honor.</p>"+u(),(function(){init(!0)})))}function u(){var e=o("lastFinishedLevel");if(e){var t="Best moments:";e=parseInt(e);for(var n=0;e>=n;n++){var a=JSON.parse(o("level"+n));t+="<li>Level "+(n+1)+": Saved:"+a.saved+" Killed:"+a.killed+" Time:"+a.time+"sec</li>"}return t}return""}function y(){D>=0&&(console.log("finish level",D),n("lastFinishedLevel",D),lastRec=o("level"+D),lastRec&&(lastRec=JSON.parse(lastRec)),(!lastRec||lastRec.saved<S||lastRec.saved==S&&lastRec.time>O)&&n("level"+D,JSON.stringify({saved:S,killed:N,time:O})))}function d(e,t){t||(t=1);var n=Y(e.x)+Y(e.y);return 0==n?{x:1,y:0}:(h=K(n),{x:e.x*t/h,y:e.y*t/h})}function x(e){var t,n,o,a,i,r,s;if(function(e){for(var t,n=0;t=T[n];n++)e.x>t.x&&e.x<t.x+t.w&&e.y>t.y&&e.y<t.y+t.h&&thingAct[t.type](t,e)}(e),i=function(e){for(var t,n=0;t=A[n];n++)if(t!=e&&Y(H(e.x-t.x))+Y(H(e.y-t.y))<Y(34))return t}(e))e.inertia=t=d({x:e.x-i.x,y:e.y-i.y},2);else if(e.target)t=d({x:e.target.x-e.x,y:e.target.y-e.y},3);else{t=function(e){for(var t,n=0,o=0,a=0,i=0;t=A[i];i++)t!=e&&Y(H(e.x-t.x))+Y(H(e.y-t.y))<Y(300)&&(n++,o+=t.x,a+=t.y,t==b&&(n+=Y(w,1.5),o+=t.x*Y(w,1.5),a+=t.y*Y(w,1.5)));return 0==n?{x:W.w*B(),y:W.h*B()}:{x:o/n,y:a/n}}(e),(o=l(e,t))<150&&(n={x:W.w*B(),y:W.h*B()},o/=150,t={x:t.x*o+n.x*(1-o),y:t.y*o+n.y*(1-o)});var h=1;b&&l(e,b)>100&&(h=3),t=d({x:t.x-e.x,y:t.y-e.y},h)}e.x<20&&(t.x+=1),e.x>W.w-20&&(t.x-=1),e.y<20&&(t.y+=1),e.y>W.h-20&&(t.y-=1),e.inertia.x=t.x=(14*e.inertia.x+t.x)/15,e.inertia.y=t.y=(14*e.inertia.y+t.y)/15,e.x+=t.x,e.y+=t.y,r=d(t),s=Math.asin(r.y)*(180/Math.PI),r.x<0&&(s=180-s),e.angle=(2*e.angle+s)/3,(a=e.style).left=e.x+"px",a.top=e.y+"px",a.transform=a.OTransform=a.MozTransform=a.WebkitTransform="rotate("+e.angle+"deg)"}function m(e,n,o){o||(o="Ok!");var a=t("div",{class:"info",html:e,parent:W}),i=t("p",{class:"bts",parent:a}),r=t("button",{html:o,parent:i});r.onclick=function(){a.parentNode.removeChild(a),n()},r.focus()}function v(e,n){var o,i,l=n.conf.split("|");b=null,O=0;var h=l.shift().split(",");for(w=parseInt(h[0]),M=parseInt(h[1]),h={x:parseInt(h[2]),y:parseInt(h[3])},f(),console.log("Start:",w,h),T=[],c=0;o=l[c];c++){for(o=o.split(","),i=1;5>i;i++)o[i]=parseInt(o[i]);l[c]=o}for(c=0;o=l[c];c++)"water"==o[0]&&a.apply(this,o);for(var c=0;200>c;c++)s=10+8*Math.random(),t("l",{style:"width:"+s+"px; height:"+s+"px; opacity:"+(.1+B()/5)+";left:"+Math.round(B()*W.w)+"px; top:"+Math.round(B()*W.h)+"px;",parent:W});for(c=0;o=l[c];c++)"hole"==o[0]&&a.apply(this,o);for(c=0;o=l[c];c++)"exit"==o[0]&&(o[4]=o[3],a.apply(this,o));for(c=0;w>c;c++)setTimeout((function(){var e;A.push(e=t("d",{html:"<h><v></v><i></i><i></i></h>",style:"left:-99px",parent:W})),e.onclick=r,e.x=h.x,e.y=h.y,e.inertia={x:2,y:B()-.5},e.angle=0}),900*c);var p="";p=!e||1>e?"User Level":"Level "+e,n.name&&(p+="<br>"+n.name),m("<h1>"+p+"</h1><p>"+n.desc+"</p><p>There are "+w+" dodos and you must save at least "+M+" in "+n.time+" seconds.</p>",(function(){R=new Date,I=setInterval(g,50)}))}function g(){var e=new Date;if(e-E>100){water=document.getElementsByTagName("water");for(var t,n=0;t=water[n];n++)t.className="noAnim"}E=e,O=Math.round((e-R)/1e3),0==C.time-O&&(clearInterval(I),S>=M?(y(),m("<h1>This Dodos was Saved!<br><big>😄</big></h1><p>They are happy now in Sto'Vo'Kor.</p>"+u(),(function(){init(!0)}))):m("<h1>Time over<br><big>☹</big></h1><p>You must be faster to save this dodos.</p>"+u(),(function(){init(!0)})));var o;for(n=0;o=A[n];n++)x(o);f()}var w,b,T,I,k,N,S,M,L,C,D,R,O,A=[],B=Math.random,H=Math.abs,K=Math.sqrt,Y=function(e,t){return Math.pow(e,t||2)},F=new Audio("dodo.ogg"),U=new Audio("coin.ogg"),V=function(e){return document.getElementById(e)},W=V("area");W.w=800,W.h=500,W.onclick=function(e){b&&(F.play(),b.target={x:e.pageX-W.offsetLeft,y:e.pageY-W.offsetTop},k.style.left=b.target.x+"px",k.style.top=b.target.y+"px")},(window.onresize=function(){var e=(window.innerHeight-W.h)/2;e>0&&(W.style.top=e+"px")})(),thingAct={water:function(e,t){p(t),t.className="drowned"},hole:function(e,t){p(t),t.className="fallen"},exit:function(e,t){var n={x:e.x+e.w/2,y:e.y+e.h/2};t.target=n,l(t,n)<8&&function(e){U.play(),S++,c(e),e.className="saved",0==A.length&&(clearInterval(I),S>=M?(y(),m("<h1>This Dodos was Saved!<br><big>😄</big></h1><p>They are happy now in Sto'Vo'Kor.</p>"+u(),(function(){init(!0)}))):m("<h1>This Dodos fail<br><big>☹</big></h1><p>You left many of your dodos to the death without honor.</p>"+u(),(function(){init(!0)})))}(t)}},e.init=function(e){for(I&&clearInterval(I),N=S=0;W.firstChild;)W.removeChild(W.firstChild);if(k=t("m",{parent:W,html:"<x></x><x></x>"}),L=t("div",{class:"scoreboard",html:"Starting...",parent:W}),e)introBtOk();else{var n=V("intro");W.appendChild(n),n.style.display="block",V("introBt").focus()}},e.introBtOk=function(){var e=V("intro");e.style.display="none",document.body.appendChild(e),function(){if(document.location.search){var e=document.location.search.substr(1).split("&");D=-1,C={name:"Unnamed",desc:"",time:60,conf:""};for(var t,a=0;t=e[a];a++)"level"==(t=t.split("="))[0]&&(t[0]="conf"),C[t[0]]=unescape(t[1]);console.log("User def level:",C),v(0,C)}else{var i=o("lastFinishedLevel");i=i?parseInt(i):-1,(C=J[D=i+1])?v(D+1,C):m("<h1>Congratulations!<br>You finish the journey</h1><p>Now the dodos are free from earth's violence and they will live a peaceful existence in Sto'Vo'Kor. Your name will be remembered by this successes and some day <u>they will come back</u> to take you to their paradise.</p>",(function(){n("lastFinishedLevel",-1),init()}),"Restart the Game")}}()};var E,J=[{name:"Starting the journey",time:120,desc:"Oh! Will be so easy to come to Sto'Vo'Kor!",conf:"20,10,-50,300|water,200,-10,300,100|hole,600,350,90,90|exit,650,100,120"},{name:"Holy F*** Water",time:90,desc:"I wish I could swim in my next life.",conf:"15,7,-50,450|water,-10,-10,330,330|water,230,450,150,200|water,450,300,400,250|water,420,-10,400,150|exit,680,170,100"},{name:"Holes",desc:"Watch your step...",time:60,conf:"20,7,-50,250|hole,60,30,60,60|hole,160,-100,250,300|hole,500,170,120,120|hole,650,15,40,40|hole,720,30,50,50|hole,70,400,60,60|hole,180,350,100,300|hole,310,300,170,150|hole,350,480,200,60|hole,510,320,80,80|hole,630,370,60,60|hole,600,470,120,60|hole,750,400,150,150|exit,660,250,100"}]}(this)</script><div id=intro class=info style=display:none><h1>Dodos — Escaping from Extinction</h1><p>The earth is highly dangerous for the dodos. The only hope is to be taken by his friends to Sto'Vo'Kor, a peaceful place, full of friendly people.<p>Dodos are collectivists, they flock together, but without regard to the dangers. Take as much dodos as possible to the rescue point (the pulsing light). You can to influence their collective behavior by controlling a dodo.<p>To play: click in a dodo, it will turn blue and will attract the attention of the collective. Click on the map and it will walk toward this point. Your control over this dodo lasts until you click some other.</p><d><h><v></v><i></i><i></i></h><span>I'm a Dodo!</span></d>Attention:<ul><li>Dodos can't see others far away.<li>Don't take then to the water. Dodos can't swim.<li>Heed to the holes! Dodos can't fly.</ul><p class=bts><button id=introBt onclick=introBtOk()>Ok!</button></div>