<!doctypehtml><html><meta content="width=device-width" name=viewport><title>Open the Door - js13kGames 2025</title><style>.body{width:100vw;height:100vh;display:flex;align-items:center;justify-content:center}.can{border:1px solid #000}</style><body class=body><canvas class=can height=400px id=can width=400px></canvas><script>const catFrame00=["--@----@--","--@@--@@--","--@@@@@@--","-@@@@@@@@-","-@@@@@@@@-","--@@@@@@--","---@@@@---","--@@@@@@--","--@@@@@@--","-@@@@@@@@-","-@@@@@@@@-","@@@@@@@@@@","@@@@@@@@@@"],catFrame01=["--@----@--","--@@--@@--","--@@@@@@--","-@@@@@@@@-","-@@@@@@@@-","--@@@@@@--","-@-@@@@-@-","--@@@@@@--","--@@@@@@--","-@@@@@@@@-","-@@@@@@@@-","-@@@@@@@@-","-@@@@@@@@-","-@@@@@@@@-","-@@@@@@@@-","--@@@@@@--","--@-@@-@--","--@-@@-@--","----@@----","----@@----","----@@----"],catFrames=[catFrame00,catFrame01],can=document.getElementById("can"),ctx=can.getContext("2d"),width=400,heigth=400,fps=60,mspf=Math.floor(1e3/60),renderClear=()=>{ctx.fillStyle="white",ctx.fillRect(0,0,400,400)},renderFrame=(t,e,c,a=1)=>{const n={"@":"black","-":"white"};c.flatMap(((t,e)=>t.split("").map(((t,c)=>({color:n[t],yOff:e,xOff:c}))))).forEach((c=>{ctx.fillStyle=c.color,ctx.fillRect(t+a*c.xOff,e+a*c.yOff,a,a)}))},renderCat=()=>{ctx.fillStyle="black"},renderTitle=()=>{ctx.font="48px Roboto",ctx.textAlign="center",ctx.fillText("open the door",200,200),ctx.font="12px Roboto",ctx.fillText("<press space/>",200,250)},renderEnd=()=>{ctx.font="24px Roboto",ctx.textAlign="center",ctx.fillText("this is how my cat opens my door",200,100)};let space=!1;const spacePress=()=>space=!0,spaceRealese=()=>space=!1,controllAction=t=>e=>"Space"==e.code&&t();document.addEventListener("keydown",controllAction(spacePress)),document.addEventListener("keyup",controllAction(spaceRealese));const start=async()=>{space&&(states=onStart),ctx.fillStyle="black",renderTitle()};let fade=0;const onStart=async()=>{ctx.fillStyle=`rgb(${fade},${fade},${fade})`,renderTitle(),fade+=10,fade>=255&&(states=catFloor)},antiAlising=t=>Math.floor(t)+.5,door=()=>({x:125,y:200,h:200,w:100,render:()=>{ctx.fillStyle="black",ctx.lineWidth=1,ctx.strokeRect(antiAlising(125),antiAlising(200),100,200)}}),lock=()=>{const{x:t,w:e,h:c}=door(),a=t+e-20-5,n=c+79;return{render:()=>{ctx.fillStyle="black",ctx.fillRect(a,n,20,5)},y:n}},cat=t=>{const{x:e,y:c,frame:a}=t??{},n=a??catFrames[0],r=c??400-2*n.length,o=e??200;return{frame:n,x:o,y:r,render:()=>renderFrame(o,r,n,2),pawY:r+12}},renderAllDoor=()=>{door().render(),lock().render()};let miau=cat();const catJumping=async()=>{miau=cat({frame:catFrame01,y:miau.y-2}),miau.render(),miau.pawY<lock().y&&(states=catEnd),renderAllDoor()};let fadeEnd=255;const catEnd=async()=>{ctx.fillStyle=`rgb(${fadeEnd},${fadeEnd},${fadeEnd})`,ctx.font="24px Roboto",ctx.textAlign="center",ctx.fillText("this is how my cat opens my door",200,100),fadeEnd>0&&(fadeEnd-=10),miau.render(),renderAllDoor()},catFloor=async()=>{cat().render(),renderAllDoor(),space&&(states=catJumping)};let states=start;const loop=async()=>{ctx.fillStyle="white",ctx.fillRect(0,0,400,400),await states()},run=async()=>{const t=performance.now();await loop();const e=performance.now();var c,a;setTimeout(run,(a=100,(c=mspf-(e-t))>0?c:a))};run()</script>
