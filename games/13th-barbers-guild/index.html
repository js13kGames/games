<!doctype html><meta content="width=device-width,user-scalable=no" name=viewport><title>13th Barbers Guild</title><script type=module>var e=Object.defineProperty,t=(t,n,o)=>(((t,n,o)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o})(t,"symbol"!=typeof n?n+"":n,o),o);function n(e,t,n,o){return`<svg${void 0!==(null==o?void 0:o.id)?" id="+o.id:""} width="${t}" height="${n}" viewBox="0 0 ${(null==o?void 0:o.viewBoxWidth)??t} ${(null==o?void 0:o.viewBoxHeight)??n}" style="${(null==o?void 0:o.style)??""}">${e}</svg>`}function o(e,t,n,o,i){return`<div id="${t}" style="position: absolute; top: 0; left: 0; width: ${n}px; height: ${o}px; pointer-events: none; z-index: ${i}">${e}</div>`}function i(e,t,n,o=0,i="#fff",r=0){return`<rect width="${e}" height="${t}" style="fill:${n};" rx="${o}" stroke="${i}" stroke-width="${r}" />`}function s(e,t,n,o,i,r="#fff",s=0){return`<ellipse cx="${e}" cy="${t}" rx="${n}" ry="${o}" fill="${i}" stroke="${r}" stroke-width="${s}" />`}function r(e,t,n){return`\n    <g transform="translate(${t},${n})">${e}</g>\n  `}function a(e,t,n){return`\n    <g transform="scale(${t} ${n})">${e}</g>\n  `}function d(e){return`\n    <g style="transform: scale(-1, 1); transform-origin: center">${e}</g>;\n  `}function l(e){return`\n    <g style="transform: scale(1, -1); transform-origin: center">${e}</g>;\n  `}function c(e,t){return`\n    <g style="transform: rotate(${t}deg); transform-origin: center">${e}</g>;\n  `}function u(e,t){return`\n    <g style="transform: skewY(${t}deg)">${e}</g>;\n  `}function m(e,t){return`<g style="filter: blur(${t}px)">${e}</g>`}function p(e){return e.sort((()=>Math.random()-.5))}function h(e){const t=document.getElementById(e);if(!t)throw new Error(`Missing #${e}`);return t}function v(e){return e.map((e=>`<span style="text-decoration-line: underline; text-decoration-color: ${e.color}; text-decoration-style: wavy">${e.name}</span>`)).join(" + ")}function f(e){return e[0].toUpperCase()+e.substring(1)}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const w={welcome:"Welcome young barber-surgeon ‚öïÔ∏è! This is your chance to join the <b>13th Barber's Guild</b> and work with the best!",instructions:"‚úÖ Hit <em>SPACE</em> or click anywhere on the screen to continue.\n‚úÖ Hit <em>ESC</em> at anytime to reset.\n‚úÖ Drag potions to the cauldron when prompted.\n‚úÖ Within 120 seconds, earn a credit for each cure!",level1Callout:"You are on probation! The diseases are spreading across the kingdom!",levelNCallout:e=>`Diseases are worse than ever! Now you need to combine ${e} ingredients for a cure.`,levelParams:e=>`Do you believe you can earn 5 credits to ${1===e?"join our Barber's Guild":`advance to level ${e}`} within 120 seconds? Failure results in termination üî•!`,ingredientList:e=>`<h4>Pay Attention!</h4><p>Give potions according to the diseases:</p><p>${e}</p><p>Are you ready to start?</p>`,gameOver:"<h4>Game Over!</h4><p>You are a shame to our guild! Don't you dare come back here until you are really prepared!</p>",gameComplete:"<h4>Game Complete!</h4><p>Congratulations! Your name will be remembered 1300 years from now as the greatest barber-surgeon ever. Ben Kingsley will portray you in movies!</p>",teardownIntructions:"<p>Press <i>ESC</i> or hit <i>Reset</i> to restart.</p>",diseases:{flu:{name:"Flu",symptoms:"I'm feeling feverish and just hate this stuffy nose!",symptomsShort:"fever and runny nose"},measles:{name:"Measles",symptoms:"My body is covered in red rashes, and I'm burning up!",symptomsShort:"red rashes and fever"},plague:{name:"Plague",symptoms:"These swollen lumps are painful! My entire body aches!",symptomsShort:"swollen lumps and body pain"}},ingredients:["Frog Tongue","Salamander Tail","Cat Paw","Rat Tooth","Hellfire Herb","Badger Bone"],health:{good:["Help me doc!","What can you do for me sir?","I'm scared, help me please!"],gettingBetter:["I'm not full refresh, but I'm feeling slightly better!","I think there's been a small change for the better in how I feel.","I've noticed a slight improvement in my condition.","I'm not as bad as I was before; there's been a minor improvement.","I'm feeling a tad better, but there's still some discomfort."],bad:["I'm not feeling better! Remember:","I'm feeling worse, what did you gave me doc?"],dead:[(e,t,n)=>`You were supposed to save people! He only needed ${n} for ${t}, clear signals of ${f(e)}.`,(e,t,n)=>`How do you think you'd join the guild by killing your patients? ${f(t)}, symptoms of ${f(e)}, are supposed to be cured with ${n}.`],cured:["I'm feeling much better, doc! Thanks!","You are a lifesaver, sir, I feel renewed!","It's a miracle! I'm feeling like myself again!"]}},g={welcome:"Bem-vindo jovem barbeiro-cirurgi√£o ‚öïÔ∏è! Esta √© sua change de entrar para a <b>13¬∫ Guilda de Barbeiros</b> e trabalhar com os melhores!",instructions:"‚úÖ Pressione <em>ESPA√áO</em> ou clique em qualquer lugar da tela para continuar.\n‚úÖ Pressione <em>ESC</em> a qualquer momento para recome√ßar.\n‚úÖ Arraste po√ß√µes para o caldeir√£o quando solicitado.\n‚úÖ Dentro de 120 segundos, ganhe um cr√©dito por cada cura!",level1Callout:"Voc√™ est√° em fase de testes! As doen√ßas est√£o se espalhando pelo reino!",levelNCallout:e=>`As doen√ßas est√£o piores que nunca! Agora voc√™ precisa combinar ${e} ingredientes para uma cura.`,levelParams:e=>`Voc√™ acredita que pode obter 5 cr√©ditos para ${1===e?"entrar para a Guilda de Barbeiros":`avan√ßar para o n√≠vel ${e}`} dentro de 120 segundos? Uma falha resultar√° em sua demiss√£o üî•!`,ingredientList:e=>`<h4>Aten√ß√£o!</h4><p>Ministre as po√ß√µes de acordo com a doen√ßa:</p><p>${e}</p><p>Est√° pronto para come√ßar?</p>`,gameOver:"<h4>Tempo esgotado!</h4><p>Voc√™ √© uma vergonha para nossa guilda! N√£o ouse voltar aqui antes de estar realmente preparado!</p>",gameComplete:"<h4>Jogo conclu√≠do!</h4><p>Parab√©ns! Seu nome ser√° lembrado mesmo daqui 1300 ano como o maior barbeiro-cirurgi√£o de sempre. Ben Kingsley vai interpret√°-lo em filmes!</p>",teardownIntructions:"<p>Pressione <i>ESC</i> ou clique em <i>Reset</i> to reiniciar.</p>",diseases:{flu:{name:"Gripe",symptoms:"Estou me sentindo febril e odeio esse nariz entupido!",symptomsShort:"febre e nariz escorrendo"},measles:{name:"Sarampo",symptoms:"Meu corpo est√° repleto de manchas vermelhas e estou queimando!",symptomsShort:"manchas vermelhas e febre"},plague:{name:"Praga",symptoms:"Estas √≠nguas inchadas s√£o muito dolorosas! Meu corpo inteiro d√≥i!",symptomsShort:"√≠nguas inchadas e dor no corpo"}},ingredients:["L√≠ngua de Sapo","Rabo de Salamandra","Pata de Gato","Dente de Rato","Erva Infernal","Osso de Texugo"],health:{good:["Me ajude doutor!","O que pode fazer por mim senhor?","Estou assustado, me ajude por favor!"],gettingBetter:["N√£o estou completamente recuperado, mas estou sentindo pequena melhora!","Eu acho que houve uma pequena mudan√ßa para melhor em como me sinto","Eu notei uma pequena melhora em minha condi√ß√£o","N√£o estou t√£o mal como antes, houve pequena melhora.","Estou sem sentindo ligeiramente melhor, mas ainda com algum desconforto."],bad:["N√£o estou me sentindo melhor! Lembre-se:","Estou me sentindo pior, o que √© que me deu doutor?"],dead:[(e,t,n)=>`Voc√™ deveria salvar pessoas! Ele s√≥ precisava de ${n} para ${t}, claros sinais de ${f(e)}.`,(e,t,n)=>`Como espera se juntar √† guilda matando seus pacientes? ${f(t)}, sintomas de ${f(e)}, deveriam ser curados com ${n}.`],cured:["Me sinto muito melhor doutor! Obrigado!","Voc√™ √© um her√≥i senhor. Me sinto renovado!","√â um milagre! Me sinto eu mesmo novamente!"]}},b=new URL(document.location.href).searchParams.get("lang")??(null==navigator?void 0:navigator.language)??"en";let y;y=/^pt\b/.test(b)?g:w;class ${constructor(e,n,o){t(this,"id"),t(this,"name"),t(this,"color"),this.id="p"+e,this.name=n,this.color=o}}const E=[{type:0,...y.diseases.flu},{type:1,...y.diseases.measles},{type:2,...y.diseases.plague}];var L=(e=>(e[e.Good=0]="Good",e[e.GettingBetter=1]="GettingBetter",e[e.Bad=2]="Bad",e[e.Dead=3]="Dead",e[e.Cured=4]="Cured",e))(L||{});class C{constructor(e,n,o,i){t(this,"level"),t(this,"disease"),t(this,"ingredients"),t(this,"givenIngredients"),t(this,"attempts"),t(this,"health"),this.level=e,this.health=L.Good,this.disease=n,this.ingredients=o,this.attempts=this.ingredients.length,i&&this.attempts++,this.givenIngredients=[]}giveIngredient(e){this.givenIngredients.push(e),this.health=this.getHealth()}getHealth(){return 0===this.givenIngredients.length?L.Good:this.ingredients.every((e=>this.givenIngredients.includes(e)))?L.Cured:this.givenIngredients.every((e=>this.ingredients.includes(e)))?L.GettingBetter:this.givenIngredients.length===this.attempts?L.Dead:L.Bad}hasLeft(){return this.health===L.Cured||this.health===L.Dead}getSymptoms(){let e=this.health;if(e===L.GettingBetter||e===L.Bad){const t=this.givenIngredients.slice(-1)[0];e=this.ingredients.includes(t)?L.GettingBetter:L.Bad}return p([...k[e](this.disease,this.ingredients)]).slice(0,1)[0]}}const k={[L.Good]:e=>[`${e.symptoms} ${y.health.good[0]}`,`${e.symptoms} ${y.health.good[1]}`,`${e.symptoms} ${y.health.good[2]}`],[L.GettingBetter]:()=>y.health.gettingBetter,[L.Bad]:e=>[`${y.health.bad[0]} ${e.symptoms}`,`${y.health.bad[1]} ${e.symptoms}`],[L.Dead]:(e,t)=>[y.health.dead[0](e.name,e.symptomsShort,v(t)),y.health.dead[1](e.name,e.symptomsShort,v(t))],[L.Cured]:()=>y.health.cured};class x{constructor(e,n,o){t(this,"requiredIngredientsCount"),t(this,"diseasesIngredients"),t(this,"enableMisses"),this.requiredIngredientsCount=e,this.diseasesIngredients=n,this.enableMisses=o}getRandomPatient(){const e=p([...this.diseasesIngredients]),[t,n]=e[0];return new C(this,t,n,this.enableMisses)}}function*I(e){const t={};for(const n of function*(){let e=Number("1");for(;e<=Number("4");)yield[e,true],e++}()){const[o,i]=n,r=new B,s=E.map((n=>{let i=null;for(let s=0;s<200;s++){const s=P(o,e,(null==t?void 0:t[n.name])??[]);if(r.add(s)){i=s;break}}if(!i)throw new Error;return t[n.name]=i,[n,i]}));yield new x(o,s,i)}}class B{constructor(){t(this,"usedCombinations"),this.usedCombinations=[]}add(e){const t=e.map((({id:e})=>e)).sort().join("");return!this.usedCombinations.includes(t)&&(this.usedCombinations.push(t),!0)}}function P(e,t,n){const o=t.filter((e=>!n.includes(e)));return[...n,...p(o).slice(0,e-n.length)]}const T={bg:"rgb(36,28,28)",bg0:"rgba(36,28,28,0)",bg5:"rgba(36,28,28,0.02)",wall:"rgb(108,83,83)",brick:"rgba(0,0,0,0.1)",l:"rgba(255,0,255,1)",shelfFront:"rgb(53,39,39)",shelfSide:"rgb(39,29,29)",shelfBottom:"rgb(24,18,18)",scoreBack:"#fea",scoreFront:"#a80",coinBack:"#540",potionCap:"#520",potionCork:"#a40",black:(e=1)=>`rgba(0,0,0,${e})`,black50:"rgba(0,0,0,0.5)",black30:"rgba(0,0,0,0.3)",character:"#f4e08e",characterSick:"#93ac93",characterDead:"#9d93ac",white:(e=1)=>`rgba(255,255,255,${e})`,layers:{potion:"10",shelf:"20",score:"21",activePotion:"30",cauldronLight:"40",notification:"60",patient:"50"}},S=i(50,20,T.brick,5);function M(){return`${r(S,0,20)}${r(S,20,50)}${r(S,0,80)}`}const q=i(720,799,T.wall),D=`<polygon\n  points="0,750 0,800 50,800"\n  style="fill:${T.bg}"\n/>`,G=`<polygon\n  points="0,100 50,50 50,100 0,150"\n  style="fill:${T.bg}"\n/>`,j=`<polygon\n  points="0,50 175,0 445,0 620,50"\n  style="fill:${T.bg}"\n/>`,O=i(20,1100,T.bg),A=i(270,50,T.bg),N=i(800,2800,"url('#shadow')"),z="52",H=".2,0,0.5,1",R=[H,H].join(";"),Y=`<defs>\n      <radialGradient fr="25%" id="shadow">\n        <stop offset="0%" stop-color="rgba(0,0,0,0)" />\n        <stop offset="75%" stop-color="${T.bg}" />\n        <stop offset="100%" stop-color="${T.bg}" />\n        <animate attributeName="fx" dur="5s" values="${z}%;48%;${z}%" repeatCount="indefinite" calcMode="spline" keySplines="${R}" />\n        <animate attributeName="fy" dur="5s" values="${z}%;48%;${z}%" repeatCount="indefinite" calcMode="spline" keySplines="${R}"  />\n      </radialGradient>\n    </defs>\n    ${r(N,-40,-900)}`,F=`${r(`<polygon\n  points="0,0 100,20 100,40 0,20"\n  style="fill:${T.shelfFront}"\n/><polygon\n  points="0,0 -10,20 -10,35 0,20"\n  style="fill:${T.shelfSide}"\n/><polygon\n  points="0,20 100,40 90,45 -10,35"\n  style="fill:${T.shelfBottom}"\n/>`,10,70)}`,V=()=>new CustomEvent("reset"),W=e=>new CustomEvent("potionClick",{bubbles:!0,detail:{ingredient:e}}),U=e=>new CustomEvent("potionRelease",{bubbles:!0,detail:{ingredient:e}}),X=e=>new CustomEvent("cauldronDrop",{bubbles:!0,detail:{ingredient:e}}),K=e=>new CustomEvent("cauldronPrepared",{bubbles:!0,detail:{ingredient:e}}),_=(e,t,n=!1)=>new CustomEvent("notify",{detail:{messages:e,onDismissed:t,preventDismiss:n}}),J=()=>new CustomEvent("dismiss"),Z=e=>new CustomEvent("newLevel",{detail:{level:e}}),Q=()=>new CustomEvent("beginLevel",{bubbles:!0}),ee=()=>new CustomEvent("scoreMaxed"),te=()=>new CustomEvent("levelComplete"),ne=e=>new CustomEvent("patientCalled",{bubbles:!0,detail:{patient:e}}),oe=e=>new CustomEvent("patientDone",{bubbles:!0,detail:{patient:e}}),ie=e=>new CustomEvent("patientLeave",{bubbles:!0,detail:{patient:e}}),se=()=>new CustomEvent("gameOver",{bubbles:!0}),re=()=>new CustomEvent("gameComplete",{bubbles:!0}),ae=15;function de(e){const t=Array.from(function*(){const e=[[[115,192],[115,395]],[[320,192+ae],[320,395+ae]],[[530,192],[530,395]]];let t=0;for(const n of e){t++;for(const e of n)yield[e[0],e[1],t]}}());return e.map(((e,n)=>function(e,t,n,o){return setTimeout((()=>{!function(e){let t=!1,n=!1,o=0,i=0,r=0,s=0;const a=h(e.id);function d({clientX:r,clientY:s}){t&&(n=!0,o=r,i=s,a.dispatchEvent(W(e)),a.style.zIndex=T.layers.activePotion)}function l({clientX:e,clientY:t}){n&&(r=(e-o)/window.scale,s=(t-i)/window.scale,a.style.transform=`translate(${r}px, ${s}px)`,a.style.pointerEvents="none")}function c(){r=0,s=0,a.style.transform="",a.style.pointerEvents="",a.style.zIndex=T.layers.potion}function u(){n&&(n=!1,c(),a.dispatchEvent(U(e)))}const m=e=>{l(e.changedTouches[0])},p=()=>{t=!0},v=()=>{t=!1},f=()=>{window.removeEventListener("mousemove",l),window.removeEventListener("touchmove",m),window.removeEventListener("mouseup",u),window.removeEventListener("touchend",u),window.removeEventListener("patientCalled",p),window.removeEventListener("patientDone",v),v(),c()};a.addEventListener("mousedown",d),a.addEventListener("touchstart",(e=>{d(e.changedTouches[0])})),window.addEventListener("mousemove",l),window.addEventListener("touchmove",m),window.addEventListener("mouseup",u),window.addEventListener("touchend",u),window.addEventListener("patientCalled",p),window.addEventListener("patientDone",v),window.addEventListener("gameOver",f),window.addEventListener("reset",(()=>{window.removeEventListener("mousemove",l),window.removeEventListener("touchmove",m),window.removeEventListener("mouseup",u),window.removeEventListener("touchend",u),window.removeEventListener("patientCalled",p),window.removeEventListener("patientDone",v),window.removeEventListener("gameOver",f)}))}(e)})),[le(e.id,e.color,t,n,o),ue(e.name,t,n,o)].join("")}(e,...t[n]))).join("")}function le(e,t,o,a,d){const l=3===d?0:6;return n(r(c([r(ce(T.black50,66,66,!0),3,28),r(ce(t,66,66),l,25),r(c(i(24,30,t),-10),21+l,12),r(c(s(11.9,6,11.9,6,t),-10),20+l,6),r(c(i(14,17,T.potionCap),-10),24+l,0),r(c(s(7,3,7,3,T.potionCap),-10),26.5+l,14),r(c(s(6.5,3,6.5,3,T.potionCork,T.potionCap,1),-10),24+l,-3),r(ce(T.black30,50,50),l+8,33)].join(""),10),3,0),75,100,{id:e,style:`top: ${a}px; left: ${o}px; z-index: ${T.layers.potion}`})}function ce(e,t,o,i){let r="";return!0===i&&(r="filter:blur(4px)"),n(`\n<g transform="translate(-510 143)">\n<path d="m557-96c-4.6 4.6-26 8.1-32 5.1-5.8-3-16-23-15-29 1-6.4 17-22 23-23 6.4-1 26 9 29 15s-0.49 28-5.1 32z" fill="${e}" fill-opacity="1"/>\n</g>`,t,o,{style:`cursor: move; ${r}`,viewBoxWidth:53,viewBoxHeight:53})}function ue(e,t,n,o){let i=0,r=120;1===o?(i=12,r=110):3===o&&(i=-12,r=110);let s=n-60;return 2===o&&(s+=5),`<p style="left: ${t-20}px; top: ${s}px; width: ${r}px; transform: rotate(${i}deg)">${e}</p>`}function me(e){return setTimeout((()=>{const e=h("c");function t(t,n){const o=e.getBoundingClientRect();t>o.left&&t<o.right&&n>o.top&&n<o.bottom?e.classList.add("hover"):e.classList.remove("hover")}window.addEventListener("mousemove",(e=>{t(e.clientX,e.clientY)})),window.addEventListener("touchmove",(e=>{const n=e.changedTouches[0];t(n.clientX,n.clientY)})),window.addEventListener("touchend",(()=>{setTimeout((()=>{e.classList.remove("hover")}))})),window.addEventListener("potionClick",(t=>{pe(e,t.detail.ingredient.color)})),window.addEventListener("potionRelease",(t=>{if(e.classList.contains("hover")){const n=t.detail.ingredient.color;e.style.setProperty("--initColor",n),e.dispatchEvent(X(t.detail.ingredient))}else pe(e,"var(--initColor)")})),window.addEventListener("patientLeave",(()=>{e.style.setProperty("--initColor","var(--defaultColor)")}))})),function(e){return n(fe+we+ge,216,170,{id:"c",style:`left: 100px; top: ${e-200}px`})}(e)+function(e){return setTimeout((()=>{const e=h("ci");window.addEventListener("cauldronDrop",(t=>{const n={duration:Number("650"),easing:"ease-in-out"};e.style.setProperty("--animColor",t.detail.ingredient.color),e.animate([{top:"100%"},{top:"-100%"}],n).onfinish=()=>{e.dispatchEvent(K(t.detail.ingredient))}}))})),`<div id="ca" style="height: ${e-150}px"><div id="ci"></div></div>`}(e)}function pe(e,t){e.style.setProperty("--color",t)}const he=106,ve=83,fe=r(s(he,83,he,83,"rgba(0, 0, 0, 0.3)"),0,4),we=r(s(he,83,he,83,"#1c1f24"),4,0),ge=r(`<g class="cc">${be=s(.66*he,16.6,.66*he,22.6,"","#0f1013",5)}</g>`,40,8);var be;const ye=Number("5"),$e=400,Ee=120,Le=6,Ce=i($e,20,T.scoreBack,10),ke=r(i(0,14,T.scoreFront,7),3,3);function xe(e,t){const n=12,o=r(s(n,n,n,n,T.scoreFront),Ee+e,30+t),i=r(s(n,n,n,n,T.coinBack),Ee+e-2,30+t+2);return m(r(s(n,n,n,n,T.black(.2)),Ee+e-4,30+t+4),2)+i+o}const Ie=`<g id="sc">${r(xe(0,-6)+xe(6,3)+xe(12,-6),-19,0)}</g>`,Be=n(r(Ce+ke,Ee,30)+Ie,532,62,{id:"s"}),Pe=100;let Te=!1,Se=null;function Me(e=!1){const t="#c8ab37";return`<defs>\n<linearGradient id="tg_${e?"r":"d"}" x1="0" x2="0" y1="-20" y2="57" gradientUnits="userSpaceOnUse">\n${qe(t,e?0:1,0)}/>\n${qe(t,e?0:1,0)}>\n  <animate attributeName="offset" dur="120s" values="0;1" repeatCount="1" fill="freeze" pause />\n</stop>\n${qe(t,e?1:0,0)}>\n  <animate attributeName="offset" dur="120s" values="0;1" repeatCount="1" fill="freeze" pause />\n</stop>\n${qe(t,e?1:0,1)}/>\n</linearGradient>\n</defs>`}function qe(e,t,n){return`<stop stop-color="${e}" stop-opacity="${t}" offset="${n}"`}const De=s(35,10,35,10,"#784421"),Ge=r(s(35,10,35,10,"#28170b"),0,5)+De,je=e=>`<path d="M 0,0 C 0,-20.654185 70,-21.872077 70,0 70,22.378835 39.954921,54.914604 35,55 30.084107,55.084723 0,21.945938 0,0 Z" fill="${e}" />`,Oe=a([(Ae=T.black(.3),m(r(a(je(Ae),.9,.75),8,20)+r(l(a(je(Ae),.9,.65)),8,-20)+r(s(35,10,35,10,Ae),4,79),4)),r(a(je("#afe"),.9,.75),4,20),r(Ge,0,79),r(l(a(je("#afe"),.9,.65)),4,-18),r(a(je("url(#tg_r)"),.65,.5),12,24),r(l(a(je("url(#tg_d)"),.65,.5)),12,-20),Ge,r(c(s(7,12,7,12,T.white(.3)),-25),29,8),l(r(c(s(7,12,7,12,T.white(.3)),-25),29,0))].join(""),.8,1);var Ae;const Ne={[L.Bad]:T.characterSick,[L.Dead]:T.characterDead},ze=e=>r(i(98,98,Ne[e]??T.character,35,T.black(),2),2,2),He=r(i(94,94,T.white(.3),35),6,0),Re=s(5,5,5,5,T.black()),Ye=`<path d="m2.2 0.5c-1.9 1.8-2.6 4.9 0 8.3" fill="none" stroke="${T.black()}" stroke-width="1.5" stroke-linecap="round"/>`,Fe=e=>r(c(i(16,2,T.black()),45*e),-5*e,5),Ve=n(Fe(1)+Fe(-1),16,16),We='<path d="m0.689 6c5.73-8.6 11.6-4.98 15.3 0.0886" fill="none" stroke="#000" stroke-width="1.65"/>',Ue=m(r(i(94,94,T.black(.3),35),2,8),4),Xe=r(a('<path d="m18.1 33.6c4.48-14.8 3.53-19.5-3.5-20.7-2.17 6.77-12.5 5.61-14.3 2.88-0.076-6.38 1.08-14.9 12-15.5 3.6-0.191 7.65 1.39 9.38 5.54 7.97-0.938 8.67 20.6 1.78 27.4z" fill="#fc0" stroke="#000" stroke-linejoin="round" stroke-width=".606"/>',4,4),0,0),Ke=e=>n(Ue+r((e=>[ze(e),He,e!==L.Dead&&e!==L.Cured?r(Re,10,40)+r(Re,40,40):"",e===L.Bad?r(Ye,6,40)+d(r(Ye,52,40)):"",e===L.Dead?r(Ve,7.5,36.5)+r(Ve,37.5,36.5):"",e===L.Cured?r(We,7,40)+r(We,37,40):""].join(""))(e),6,0),106,106);function _e(e,t,o){const i=i=>n(e(i),t,o);return i.width=t,i.height=o,i}const Je=_e((e=>r(Ke(e),0,35)+r(Xe,7,0)+r(a('\n<g transform="translate(-106 -82.5)">\n<g transform="matrix(.265 0 0 .265 285 183)">\n<g fill="none" stroke="#000" stroke-width="2.3">\n<path d="m-598-318 84.7-61.1"/>\n<path d="m-598-318 48.7 47"/>\n<path d="m-623-318-52-50.2"/>\n</g>\n<path d="m-650-345c29.6 10.8 59.2 6.91 88.8 0-6.77 20.1-8.93 40.6 0 62.1-28.1-18-55.3-11-82.4-2.13l-4.98-4.87c3.05-15.7 4.92-32.3-1.43-55.1z" fill="#fff" stop-color="#000000" stroke="#000" stroke-width="3.98"/>\n<g fill="none">\n<path d="m-565-302c-29.1-7.86-55.6-7.45-79.6 0.753" stroke="#f2f2f2" stroke-width="6.1"/>\n<path d="m-565-298c-29.1-7.86-55.6-7.45-79.6 0.753" stroke="#000" stroke-width="2.3"/>\n</g>\n<g transform="rotate(180 -605 -315)" fill="none">\n<path d="m-565-302c-29.1-7.86-55.6-7.45-79.6 0.753" stroke="#f2f2f2" stroke-width="6.1"/>\n<path d="m-565-298c-29.1-7.86-55.6-7.45-79.6 0.753" stroke="#000" stroke-width="2.3"/>\n</g>\n<path d="m-650-345c29.6 10.8 59.2 6.91 88.8 0-6.77 20.1-8.93 40.6 0 62.1-28.1-18-55.3-11-82.4-2.13l-4.98-4.87c3.05-15.7 4.92-32.3-1.43-55.1z" fill="none" stop-color="#000000" stroke="#000" stroke-width="3.98"/>\n</g>\n</g>',1.9,1.9),7,80)),121,141);let Ze=a('<path d="m140 268c46.6-154 1.96-204-137-145 13.3-58.2 34.7-104 127-120 122 78.8 184 253 10.7 265z" fill="#603d33" stroke="#000" stroke-linejoin="round" stroke-width="4.74"/>',.5,.5);for(let e=0;e<4;e++)Ze=r(s(10,10,10,10,"#666"),5+10*e,45-2.5*e)+Ze;const Qe=_e((e=>r(Ke(e),0,35)+r(Ze,7,0)),132,141);let et=r(a('<path d="m43.8 67.3c12.3-40.7-6.28-53.5-43.1-38 3.5-15.4 11.1-45.6 60.4-16.6-8.9 6.5 4.9 38.5-17.2 54.6z" fill="#800" stroke="#000" stroke-linejoin="round" stroke-width="1.2"/>',2,2),8,0);for(let e=0;e<10;e++){let t=40-2*e;e>4&&(t=20+e**1.5),et=r(i(7,25,"#d45500",3),12+9*e,t)+et}const tt=_e((e=>r(Ke(e),0,35)+r(et,0,0)),132,141),nt=a('<g transform="translate(-67.7 -105)" stroke="#000">\n<path d="m105 175c9.27-30.6-6.77-42.7-13.9-40.6-7.04 1.21-6.42-0.288-11.6-1.89-6.93 0.171-6.69 11.8-11.2 12.3-1.94-25 2.17-37.4 24.9-38.8 43.9-2.33 41.3 65.4 11.8 68.9z" fill="#4d4d4d" stroke-linejoin="round" stroke-width="1.26"/>\n<path d="m90.5 107 10.9 0.0201c-9.28 9.04-11.2 22-10.5 35.3h-10.3c0.0514-13.7-2.62-28.9 9.89-35.3z" fill="#3f3f3f" stop-color="#000000" stroke-width=".973"/>\n</g>',1.9,1.9);function ot(e){setTimeout((()=>{h("pnt")})),e.innerHTML=n(Je(L.Good),Je.width,Je.height,{id:"pnt",style:"position: absolute; right: 30px; bottom: 30px"})}const it=[Qe,tt,_e((e=>r(Ke(e),0,35)+r(nt,7,0)),121,141)];function st(e,t){const n=t.getRandomPatient(),o=function(e){const t=e.shift();if(!t)throw new Error;return e.push(t),t}(it);window.addEventListener("cauldronPrepared",(function t(i){n.giveIngredient(i.detail.ingredient),rt(e,n,o),n.hasLeft()&&(window.dispatchEvent(oe(n)),setTimeout((()=>{window.removeEventListener("cauldronPrepared",t)})))})),rt(e,n,o),window.dispatchEvent(ne(n))}function rt(e,t,o){window.dispatchEvent(_([t.getSymptoms()],(()=>{t.hasLeft()&&window.dispatchEvent(ie(t))}))),e.innerHTML=n(o(t.health),o.width,o.height,{id:"pnt",style:"position: absolute; right: 30px; bottom: 30px"})}let at=!1,dt=mt;const lt=.3;let ct=null,ut=[];function mt(){ht(),vt([14,15,14,18,19,18,14,15,14,18,19,18,8,9,8,14,15,14,10,11,10,12,13,12,14,15,14,12,13,12,14,15,14,12,11,12,15,14,15,18,17,18,14,15,14,18,17,18,17,18,18,17,17,18,18,17,17,18,18],350,.2)}function pt(){ht(),vt([19,19,20,20,19,19,20,20,19,19,20,20,19,19,20,20,16,16,16,16,16,16,16,16,15,15,15,15,15,15,15,15],440,.1)}function ht(){ut.forEach((e=>{e.stop()})),ct&&clearTimeout(ct)}function vt(e,t,n){ft(e,t,n),ct=setInterval((()=>{ft(e,t,n)}),e.length*n*1e3)}function ft(e,t,n){const o=new window.AudioContext,i=o.createGain();i.connect(o.destination),i.gain.value=1,ut=e.map(((e,r)=>{const s=o.createOscillator();return s.type="sine",s.start(r*n),s.frequency.setValueAtTime(t*1.06**(13-e),n*r),i.gain.setValueAtTime(lt,r*n),i.gain.setTargetAtTime(1e-4,r*n+n-.02,.005),s.stop(r*n+n),s.connect(i),s}))}const wt=function(){const e=y.ingredients,t=["#ff6600","#ff0000","#ccff00","#d4aa00","#ff0066","#5fd38d"];return p(t),p(e),t.map(((t,n)=>new $(n,e[n],t)))}(),gt=720,bt=800;function yt(){const[e,t]=Et();window.scale=e;const i=function(e,t){const n=h("app");return n.style.setProperty("transform",`scale(${e})`),n.style.setProperty("transform-origin",t?"top":"left top"),n}(e,t);var s,l;i.innerHTML=`\n    ${function(e,t){const o=`\n    <svg width="${e}" height="${t}">\n      ${q}\n      ${D}\n      ${d(D)}\n      ${G}\n      ${d(G)}\n      ${r(O,50,100)}\n      ${d(r(O,50,100))}\n      ${r(a(G,3.5,1),495,0)}\n      ${r(d(a(G,3.5,1)),-495,0)}\n      ${r(A,225,100)}\n      ${r(O,225,100)}\n      ${r(O,475,100)}\n      ${r(j,50,750)}\n      ${r(u(M(),15),90,110)}\n      ${d(r(u(M(),15),90,110))}\n      ${r(M(),380,630)}\n      ${r(u(M(),-40),685,660)}\n      ${d(r(u(M(),-40),685,660))}\n    </svg>\n  `;return n(r(o,0,-30)+n(Y,e,t),e,t)}(gt,bt)}\n    ${me(bt)}\n    ${de(wt)}\n    ${s=gt,l=bt,n([r(F,95,200),r(F,95,400),d(r(F,95,200)),d(r(F,95,400)),u(a(r(F,185,250),1.5,1),-5),u(a(r(F,185,450),1.5,1),-5)].join(""),s,l,{style:`pointer-events: none; z-index: ${T.layers.shelf}`})}\n    ${function(){let e=0;function t(){const t=e/ye*394,n=h("s").querySelector("rect:last-child");null==n||n.setAttribute("width",`${t}`),h("sc").style.transform=`translateX(${t}px)`}function n(n){n.detail.patient.health===L.Cured&&(e++,t(),e===ye&&window.dispatchEvent(new CustomEvent("scoreMaxed")))}function o(){e===ye&&(e=0,t(),window.dispatchEvent(new CustomEvent("levelComplete")))}return window.addEventListener("patientDone",n),window.addEventListener("patientLeave",o),window.addEventListener("reset",(()=>{window.removeEventListener("patientDone",n),window.removeEventListener("patientLeave",o)})),Be}()}\n    ${setTimeout((()=>{const e=h("t"),t=e.querySelectorAll("animate");function n(){e.unpauseAnimations()}function o(){e.pauseAnimations()}function i(){t.forEach((e=>{e.beginElement()})),o()}t[0].addEventListener("endEvent",(()=>{setTimeout((()=>{Te||(Se=setTimeout((()=>{window.dispatchEvent(new CustomEvent("gameOver",{bubbles:!0}))}),Number("650"))),Te=!1}))})),t[0].addEventListener("beginEvent",(()=>{Te=!0})),window.addEventListener("patientCalled",n),window.addEventListener("newLevel",i),window.addEventListener("scoreMaxed",o),window.addEventListener("reset",(()=>{Se&&clearTimeout(Se),window.removeEventListener("patientCalled",n),window.removeEventListener("newLevel",i),window.removeEventListener("scoreMaxed",o)})),i()})),n(Me()+Me(!0)+r(Oe,0,0),74,104,{id:"t",style:"top: 10px; left: 560px"})}\n    ${function(e,t){const n=o('<div id="n"><span></span></div>',"nw",gt,bt,T.layers.notification);return setTimeout((()=>{let e,t=[],n=!0,o=!0;function i(e){const n=t.shift();if(!n&&!e)return!1;const o=h("n"),i=o.querySelector("span"),r=o.parentElement;if(!i||!r)throw new Error("Missing span");return i.innerHTML=n??"",o.style.display=n?"flex":"none",Boolean(n)}function r(r){e=r.detail.onDismissed,t=r.detail.messages,n=!1,o=!r.detail.preventDismiss,i(o)}function s(){i(o)||n||!e||(n=!0,e())}window.addEventListener("notify",r),window.addEventListener("dismiss",s),window.addEventListener("reset",(()=>{o=!0,window.removeEventListener("notify",r),window.removeEventListener("dismiss",s)}))})),n}()}\n    ${function(e,t){let n,i=!1;return setTimeout((()=>{const e=h("w");function t(t){var o;n=t.detail.level,ot(e),window.dispatchEvent(_([1===n.requiredIngredientsCount?y.level1Callout:y.levelNCallout(n.requiredIngredientsCount),y.levelParams(n.requiredIngredientsCount),y.ingredientList((o=n.diseasesIngredients,o.map((([e,t])=>`üß™ ${e.name}: ${v(t)}`)).join("\n")))],(()=>{window.dispatchEvent(new CustomEvent("beginLevel",{bubbles:!0})),st(e,n)})))}function o(){i=!0,ot(e),window.dispatchEvent(_([y.gameOver+y.teardownIntructions],void 0,!0))}function r(){i=!0,ot(e),window.dispatchEvent(_([y.gameComplete+y.teardownIntructions],void 0,!0))}function s(t){t.detail.patient.level!==n||i||st(e,t.detail.patient.level)}window.addEventListener("newLevel",t),window.addEventListener("patientLeave",s),window.addEventListener("gameOver",o),window.addEventListener("gameComplete",r),window.addEventListener("reset",(()=>{window.removeEventListener("newLevel",t),window.removeEventListener("patientLeave",s),window.removeEventListener("gameOver",o),window.removeEventListener("gameComplete",r)})),ot(e)})),o("","w",e,t,T.layers.patient)}(gt,bt)}\n  `,setTimeout($t)}function $t(){const e=I(wt);function t(){const t=e.next().value;t?dispatchEvent(Z(t)):dispatchEvent(re())}window.dispatchEvent(_([y.welcome,y.instructions],t)),window.addEventListener("levelComplete",t),function(){function e(){dt=pt,at&&(ht(),dt())}function t(){dt=mt,at&&(ht(),dt())}window.addEventListener("beginLevel",e),window.addEventListener("reset",t),window.addEventListener("gameOver",t),window.addEventListener("gameComplete",t),window.addEventListener("reset",(()=>{window.removeEventListener("reset",t),window.removeEventListener("beginLevel",e),window.removeEventListener("gameOver",t),window.removeEventListener("gameComplete",t)}))}()}function Et(){const e=window.innerWidth/gt,t=(window.innerHeight-42)/bt;return[Math.min(e,t),e>t]}!function(){const e=h("app");window.addEventListener("keyup",(e=>{"Escape"===e.key&&(window.dispatchEvent(V()),yt())," "===e.key&&window.dispatchEvent(J())})),window.addEventListener("mouseup",(()=>{window.dispatchEvent(J())})),window.addEventListener("resize",(()=>{const[t,n]=Et();window.scale=t,e.style.setProperty("transform",`scale(${t})`),e.style.setProperty("transform-origin",n?"top":"left top")}));for(const e of h("menu").querySelectorAll("button, a"))e.addEventListener("mouseup",(e=>{e.stopPropagation()}));h("reset").addEventListener("click",(e=>{e.stopPropagation(),window.dispatchEvent(V()),yt()})),h("music").addEventListener("click",(e=>{var t;e.stopPropagation(),t=e.target,ht(),at=!at,at?(dt(),t.innerHTML="Music is on"):t.innerHTML="Music is off"}))}(),yt()</script><style>#app,body,html{background:#241c1c;width:100%;height:100%;margin:0}body{overscroll-behavior:contain}#wrap{flex-direction:column;justify-content:center;align-items:center;width:100vw;height:100vh;display:flex;overflow:hidden}#c-app{width:100vw;height:calc(100vh - 42px)}#menu{background:#111;height:42px}#menu>div{margin:0 auto}#menu a,#menu button{color:#fff;text-shadow:-1px 0 #00000080,0 -1px #0000004d,0 1px #ffffff80,-1px -2px #0000004d;background:#333;border:0;height:42px;margin:0;padding:0 1rem;font-weight:700;line-height:42px;text-decoration:none;display:inline-block}#menu a:hover,#menu button:hover{text-decoration:underline}#app{width:720px;margin:0 auto;position:relative}#app>p,#app>svg{display:block;position:absolute;top:0;left:0}#app>p{text-align:center;color:#fffc;text-transform:uppercase;text-shadow:-1px 0 #00000080,0 -1px #0000004d,0 1px #ffffff80,-1px -2px #0000004d;-webkit-user-select:none;user-select:none;justify-content:center;align-items:flex-end;height:2rem;padding:.25rem;font-size:.8rem;font-weight:700;display:flex}#c{--defaultColor:#216778;--initColor:var(--defaultColor);--color:var(--initColor)}.cc ellipse{fill:var(--initColor)}#c.hover .cc ellipse{fill:var(--color)}#ca{pointer-events:none;z-index:5;width:230px;position:absolute;top:0;left:95px;overflow:hidden}#ca div{--animColor:tranparent;background:var(--animColor);opacity:.3;box-shadow:0 0 50px 15px var(--animColor);width:calc(100% - 100px);height:100%;margin:0 50px;position:absolute;top:calc(100% + 50px)}#n{color:#333;white-space:pre-line;background:#fff;justify-content:center;align-items:center;width:300px;min-height:4rem;padding:.5rem;font-size:1.1rem;line-height:1.35rem;display:flex;position:absolute;bottom:30px;right:180px}#n h4,#n p{margin:0 0 .5rem}</style><div id=wrap><div id=menu><div><button id=music type=button>Music is off</button> <button id=reset type=button>Reset game</button> <a href="?lang=en">EN</a> <a href="?lang=pt">PT</a></div></div><div id=c-app><div id=app></div></div></div>