<!doctype html><title>Diamond Run</title><style>canvas,div{margin:0;position:absolute;top:0;left:0}body{overflow-x:hidden;overflow-y:hidden;background:#000}img{display:none}div#m{position:fixed;left:30%;top:30%;width:25%;padding:3%;background:#688;color:#fff;border:4px solid #fff;border-radius:10px;z-index:1;font:3vmin cursive}</style><div><canvas id=c></canvas><canvas id=o></canvas><div id=m>.</div><img id=s src=s.png></div><script>function q(){this.la=this.qa=0,this.Ta=this.xa=this.a=!1,this.Z=this.oa=-1,this.ta=!1,u(this)}function v(a,t){var o=0,i=0;if("changedTouches"in t&&0<t.changedTouches.length&&(o=t.changedTouches[0].clientX,i=t.changedTouches[0].clientY),"clientX"in t&&"clientY"in t&&(o=t.clientX,i=t.clientY),a.a)if(a.qa=o,a.la=i,a.Ma=(a.qa-a.a.g[1])/a.a.g[0],a.Na=-(a.la-a.a.g[2])/a.a.g[0],a.oa=-1,a.Z=-1,a.xa=a.la<a.a.K[0],a.Ta=a.la<4*a.a.g[0]&&a.qa<4*a.a.g[0],a.xa)for(o=.5*a.a.f[0],i=0;8>i;++i){var e=a.qa-a.a.f[2*i+1],h=a.la-a.a.f[2*i+2];e*e+h*h<=o*o&&(a.Z=i)}else a.oa=Math.floor(a.qa/a.a.g[0]);return!0}function w(a){a.ta=!1,a.ja=-1}function x(a){var t=controls;return a.preventDefault(),y(t)}function z(a){var t=controls;return v(t,a),t.ta=!0}function y(a){return a.a&&(a.ja=Math.floor(10*a.la/(a.a.g[0]+2*a.a.g[2])-3)),a.ta=!1,!0}function A(a,t){var o=controls,i=!0;switch(window.event?window.event.keyCode:a.which){case 38:o.Qa=t;break;case 40:o.Oa=t;break;case 32:case 13:o.Pa=t;break;case 27:o.Aa=t;break;default:i=!1}return i}function u(a){a.ja=-1,a.Qa=!1,a.Oa=!1,a.Aa=!1,a.Pa=!1,a.Ma=0,a.Na=0}function B(a,t){if(this.controls=a,this.ia=new C(3,a),this.Ha={},this.b=new D(a),t.hasOwnProperty("gameProgress")){var o=this.b,i=t.Ra;o.s=i.s,o.m=i.m,o.V=o.floor=i.floor,o.C=i.C.slice(),o.D=i.D.slice(),o.I=i.I.slice(),o.ba=i.ba,o.ga=!0,o.sa=!1,o.da=!1,o.za=116==o.S[Math.floor(o.s)+Math.floor(o.m)*o.u+o.floor*o.v],E(o)}o=this.ia,i=this.b.ga?0:1,o.ka=i,o.L=Math.max(i,o.L),this.b.Ka.push(this),this.state=-1}function K(a){localStorage.setItem("GlitchData",JSON.stringify(a.Ha))}function L(){var a=game;aa(a.Ia,0<a.state),ba(a.Ia),0==a.state&&ca(a.Ia,a.ia),requestAnimationFrame((function(){L()}))}function M(a,t){if(u(a.controls),0==t){(o=a.ia).done=!1,o.L=0,u(o.controls);var o=a.ia,i=a.b.ga?0:1;o.ka=i,o.L=Math.max(i,o.L),a.b.ga||(delete a.Ha.Ra,K(a))}a.state=t}function da(){M(game,0),setInterval((function(){var a=game;if(0==a.state){var t=a.ia;if(t.L+=(t.controls.Qa&&t.L>t.ka?-1:0)+(t.controls.Oa&&t.L<t.Da-1?1:0),t.controls.ja>=t.ka&&t.controls.ja<t.Da&&(t.L=t.controls.ja),(t.controls.ja>=t.ka&&t.controls.ja<t.Da||t.controls.Pa)&&(t.done=!0),u(t.controls),a.ia.done)switch(a.ia.L){case 1:(t=a.b).s=-.9,t.m=8.5,t.V=t.floor=0,t.C=[1],t.G=[],t.N=1,t.sa=!1,t.da=!1,t.za=!1,t.aa=!1,t.ba=9e4,t.ga=!0;var o=t.pa,i=t.D,e=t.I;for(i.fill(20),h=0;h<o.Ga.length;++h)i[o.Ga[h]]=0;i=[0,2,7,2,0,15,9,1,1,8,14,1,2,2,7,3,2,6,0,2,3,11,9,3,4,1,1,4,4,7,8,5];for(var h=0;h<i.length;h+=4)e[i[h]*o.v+i[h+2]*o.u+i[h+1]]=i[h+3];E(t);case 0:M(a,2);break;case 2:N(a.b)}}if(1==a.state||2==a.state){if((t=a.b).controls.ta?t.N?(w(t.controls),5!=t.N&&6!=t.N||(t.ga=!1),t.N=0):t.na||(t.controls.xa?t.aa?t.controls.Ta?(t.aa=!1,t.Y=-1,w(t.controls)):-1<t.controls.Z&&(t.U=t.ea[t.controls.Z],t.ea[t.controls.Z]=-1,t.na=!0):t.da||(o=t.s+t.controls.Ma,e=t.m+t.controls.Na,h=0,0<=o&&0<=e&&16>o&&16>e&&(h=t.I[Math.floor(o)+Math.floor(e)*t.u+t.floor*t.v]),2048&h?(i=(1536&h)>>9,o=Math.floor(o)+[.25,.5,.75,.5][i],e=Math.floor(e)+[.5,.25,.5,.75][i],t.Y=511&h):(t.Y=-1,t.va[Math.floor(o)+Math.floor(e)*t.u+t.floor*t.v]&&(o=Math.max(o,Math.floor(o)+.4)),t.va[Math.floor(o+1)+Math.floor(e)*t.u+t.floor*t.v]&&(o=Math.min(o,Math.floor(o)+.6)),t.ua[Math.floor(o)+Math.floor(e)*t.u+t.floor*t.v]&&(e=Math.max(e,Math.floor(e)+.4)),t.ua[Math.floor(o+1)+Math.floor(e+1)*t.u+t.floor*t.v]&&(e=Math.min(e,Math.floor(e)+.6))),h=0,0<=o&&0<=e&&16>o&&16>e&&(h=t.S[Math.floor(o)+Math.floor(e)*t.u+t.floor*t.v]),(i=t.P[h])?(t.G=i.slice(),h||(o=-.9,e=8.5),t.G.push(o,e),t.La=!1):t.La=!0):t.controls.oa<t.C.length?t.aa&&t.ha[t.controls.oa]&&5>t.C[t.controls.oa]&&(t.U=t.controls.oa,t.na=!0):(t.controls.Aa=!0,w(t.controls))):t.na&&(t.na=!1,t.aa&&(-1<t.controls.Z?(-1<(o=t.ea[t.controls.Z])&&(t.ha[o]=!0),t.ea[t.controls.Z]=t.U,t.ha[t.U]=!1):t.ha[t.U]=!0,O(t)),t.U=-1),t.Ca=-1,t.controls.xa&&(o=Math.floor(t.s+t.controls.Ma),e=Math.floor(t.m+t.controls.Na),2048&(h=t.I[o+e*t.u])&&(t.Ca=511&h)),a.controls.Aa&&M(a,0),0>=(t=a.b).ba)for(t.N=5,o=1;o<t.D.length;++o)t.D[o]||t.A.push(o,1,20);if(t.N||--t.ba,0<t.G.length)if(o=t.G[0],e=t.G[1],(h=t.da?.1:.2)*h>(o-t.s)*(o-t.s)+(e-t.m)*(e-t.m)){if(t.s=o,t.m=e,t.G.splice(0,2),E(t),0==t.G.length){if(o=t.I[Math.floor(t.s)+Math.floor(t.m)*t.u+t.floor*t.v],-1<t.Y){for(t.orientation=Math.PI*((1536&o)>>9)/2,t.ha=[],e=0;e<t.C.length;++e)t.ha.push(!0);for(t.aa=!0,w(t.controls),t.Ba=[0,0,0,0,0,0,0,0],t.ea=[-1,-1,-1,-1,-1,-1,-1,-1],t.o=[0,0,0,0,0,0,0,0],t.wa=[[[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7]],[[7,0,1],[7,2,3],[0,8],[0,9],[0,10],[0,11],[0,4],[0,5],[0,6],[0,7]],[[1,1],[1,5],[0,0],[0,8],[0,2],[0,3],[0,4],[0,9],[0,6],[0,7]],[[1,1],[1,5],[50],[7,4,9],[0,0],[0,8],[0,2],[0,3],[0,10],[0,11],[0,6],[0,7]],[[1,1],[1,3],[1,5],[1,7],[50],[7,0,8],[7,4,10],[0,12],[0,13],[0,2],[0,9],[0,14],[0,15],[0,6],[0,11]],[[7,0,1],[7,2,3],[7,4,5],[7,6,7],[50],[7,9,10],[7,11,12],[7,13,14],[50],[7,8,16],[7,17,18],[7,19,20],[7,21,15],[0,22],[0,23],[0,24],[0,25],[0,26],[0,27],[0,28],[0,29]],[[7,0,1],[7,2,3],[7,4,5],[7,6,7],[50],[7,9,10],[7,11,12],[7,13,14],[50],[7,8,16],[7,17,18],[7,19,20],[7,21,15],[0,22],[0,23],[0,24],[0,25],[0,26],[0,27],[0,28],[0,29]],[[6,0,1],[6,4,5],[50],[5,2,3],[5,6,7],[50],[8,8],[8,10],[8,9],[8,11],[0,12],[0,13],[0,14],[0,15],[0,16],[0,17],[0,18],[0,19]],[[12,0],[12,2],[12,4],[12,6],[50],[10,1],[10,3],[10,5],[10,7],[50],[8,8],[8,9],[8,10],[8,11],[0,12],[0,13],[0,14],[0,15],[0,16],[0,17],[0,18],[0,19]],[[7,0,1],[7,2,3],[7,4,5],[7,6,7],[50],[7,9,10],[7,11,12],[7,13,14],[50],[7,8,16],[7,17,18],[7,19,20],[7,21,15],[0,22],[0,23],[0,24],[0,25],[0,26],[0,27],[0,28],[0,29]],[[7,0,1],[7,2,3],[7,4,5],[7,6,7],[50],[7,9,10],[7,11,12],[7,13,14],[50],[7,8,16],[7,17,18],[7,19,20],[7,21,15],[0,22],[0,23],[0,24],[0,25],[0,26],[0,27],[0,28],[0,29]],[[1,1],[1,6],[50],[5,0,8],[5,9,7],[1,3],[1,4],[50],[8,10],[1,2],[1,5],[8,11],[0,14],[0,15],[0,16],[0,12],[0,13],[0,17],[0,18],[0,19]],[[5,0,1],[5,6,7],[50],[8,8],[8,9],[50],[0,10],[0,11],[0,2],[0,3],[0,4],[0,5],[0,12],[0,13]],[[1,1],[1,3],[1,5],[1,7],[50],[7,0,8],[7,2,9],[7,4,10],[7,6,11],[50],[1,13],[1,15],[1,17],[1,19],[0,12],[0,20],[0,14],[0,21],[0,16],[0,22],[0,18],[0,23]],[[12,1],[12,6],[50],[12,0],[12,7],[50],[10,2],[11,5],[50],[8,8],[8,9],[50],[10,10],[11,13],[50],[8,14],[8,15],[0,16],[0,17],[0,11],[0,3],[0,4],[0,12],[0,18],[0,19]],[[5,0,1],[6,4,5],[50],[6,2,3],[5,6,7],[50],[8,8],[8,10],[8,9],[8,11],[0,12],[0,13],[0,14],[0,15],[0,16],[0,17],[0,18],[0,19]],[[5,0,1],[5,6,7],[50],[8,8],[8,9],[50],[0,10],[0,11],[0,2],[0,3],[0,4],[0,5],[0,12],[0,13]],[[1,1],[1,3],[1,5],[1,7],[50],[7,0,8],[7,2,9],[7,4,10],[7,6,11],[50],[1,13],[1,15],[1,17],[1,19],[0,12],[0,20],[0,14],[0,21],[0,16],[0,22],[0,18],[0,23]],[[1,1],[1,5],[50],[7,4,9],[0,0],[0,8],[0,2],[0,3],[0,10],[0,11],[0,6],[0,7]],[[7,0,1],[7,2,3],[7,4,5],[7,6,7],[50],[7,9,10],[7,11,12],[7,13,14],[50],[7,8,16],[7,17,18],[7,19,20],[7,21,15],[50],[7,23,24],[7,25,26],[7,27,28],[50],[7,22,30],[7,31,32],[7,33,34],[7,35,29],[0,36],[0,37],[0,38],[0,39],[0,40],[0,41],[0,42],[0,43]],[[1,1],[1,6],[50],[5,0,8],[5,9,7],[1,3],[1,4],[50],[8,10],[1,2],[1,5],[8,11],[0,14],[0,15],[0,16],[0,12],[0,13],[0,17],[0,18],[0,19]],[[1,1],[1,3],[1,5],[1,7],[50],[1,8],[1,9],[1,10],[1,11],[0,0],[0,12],[0,2],[0,13],[0,4],[0,14],[0,6],[0,15]],[[1,1],[1,3],[1,5],[1,7],[50],[1,8],[2,9],[1,10],[1,11],[0,0],[0,12],[0,2],[0,13],[0,4],[0,14],[0,6],[0,15]],[[7,0,1],[7,2,3],[7,4,5],[7,6,7],[50],[7,9,10],[7,11,12],[7,13,14],[50],[7,8,16],[7,17,18],[7,19,20],[7,21,15],[0,22],[0,23],[0,24],[0,25],[0,26],[0,27],[0,28],[0,29]],[[1,1],[1,6],[50],[5,0,8],[5,9,7],[2,3],[2,4],[50],[8,10],[1,2],[1,5],[8,11],[0,14],[0,15],[0,16],[0,12],[0,13],[0,17],[0,18],[0,19]],[[12,0],[12,2],[12,4],[12,6],[50],[10,1],[10,3],[10,5],[10,7],[50],[8,8],[8,9],[8,10],[8,11],[0,12],[0,13],[0,14],[0,15],[0,16],[0,17],[0,18],[0,19]],[[12,0],[12,2],[12,4],[12,6],[50],[10,1],[10,3],[10,5],[10,7],[50],[8,8],[8,9],[8,10],[8,11],[0,12],[0,13],[0,14],[0,15],[0,16],[0,17],[0,18],[0,19]],[[5,0,1],[5,6,7],[50],[8,8],[8,9],[0,10],[0,11],[0,2],[0,3],[0,4],[0,5],[0,12],[0,13]],[[6,0,1],[6,6,7],[50],[8,8],[8,9],[0,10],[0,11],[0,2],[0,3],[0,4],[0,5],[0,12],[0,13]],[[1,0],[1,1],[2,2],[2,3],[3,4],[3,5],[50],[7,8,9],[7,10,11],[7,12,13],[7,6,7],[50],[7,15,16],[7,17,18],[7,19,20],[0,14],[0,22],[0,23],[0,24],[0,25],[0,26],[0,27],[0,21]],[[12,1],[12,6],[50],[12,0],[12,7],[50],[10,2],[11,5],[50],[8,8],[8,9],[50],[10,10],[11,13],[50],[8,14],[8,15],[0,16],[0,17],[0,11],[0,3],[0,4],[0,12],[0,18],[0,19]],[[12,1],[12,6],[50],[12,0],[12,7],[50],[10,2],[11,5],[50],[8,8],[8,9],[50],[10,10],[11,13],[50],[8,14],[8,15],[0,16],[0,17],[0,11],[0,3],[0,4],[0,12],[0,18],[0,19]],[[7,0,1],[7,2,3],[7,4,5],[7,6,7],[50],[7,9,10],[7,11,12],[7,13,14],[50],[7,8,16],[7,17,18],[7,19,20],[7,21,15],[0,22],[0,23],[0,24],[0,25],[0,26],[0,27],[0,28],[0,29]],[[7,0,1],[7,2,3],[7,4,5],[7,6,7],[50],[7,9,10],[7,11,12],[7,13,14],[50],[7,8,16],[7,17,18],[7,19,20],[7,21,15],[0,22],[0,23],[0,24],[0,25],[0,26],[0,27],[0,28],[0,29]],[[2,1],[2,6],[50],[5,0,8],[5,9,7],[1,3],[1,4],[50],[8,10],[4,2],[4,5],[8,11],[0,14],[0,15],[0,16],[0,12],[0,13],[0,17],[0,18],[0,19]],[[2,1],[2,6],[50],[5,0,8],[5,9,7],[2,3],[2,4],[50],[8,10],[4,2],[4,5],[8,11],[0,14],[0,15],[0,16],[0,12],[0,13],[0,17],[0,18],[0,19]],[[6,0,1],[6,4,5],[50],[5,2,3],[6,6,7],[50],[8,8],[8,10],[8,9],[8,11],[0,12],[0,13],[0,14],[0,15],[0,16],[0,17],[0,18],[0,19]],[[6,0,1],[6,4,5],[50],[5,2,3],[5,6,7],[50],[8,8],[8,10],[8,9],[8,11],[0,12],[0,13],[0,14],[0,15],[0,16],[0,17],[0,18],[0,19]],[[13,2,3],[0,0],[0,1],[0,8],[0,9],[0,4],[0,5],[0,6],[0,7]],[[5,0,1],[13,4,5],[50],[10,8],[10,2],[50],[8,12],[0,11],[0,13],[0,14],[0,3],[0,9],[0,10],[0,6],[0,7]],[[5,0,1],[13,4,5],[50],[10,8],[10,2],[50],[8,12],[0,11],[0,13],[0,14],[0,3],[0,9],[0,10],[0,6],[0,7]],[[7,0,1],[7,2,3],[7,4,5],[7,6,7],[50],[7,9,10],[7,11,12],[7,13,14],[50],[7,8,16],[7,17,18],[7,19,20],[7,21,15],[0,22],[0,23],[0,24],[0,25],[0,26],[0,27],[0,28],[0,29]],[[7,0,1],[7,2,3],[7,4,5],[7,6,7],[50],[7,9,10],[7,11,12],[7,13,14],[50],[7,8,16],[7,17,18],[7,19,20],[7,21,15],[50],[7,23,24],[7,25,26],[7,27,28],[50],[7,22,30],[7,31,32],[7,33,34],[7,35,29],[0,36],[0,37],[0,38],[0,39],[0,40],[0,41],[0,42],[0,43]],[[6,0,1],[6,4,5],[50],[5,2,3],[5,6,7],[50],[8,8],[8,10],[8,9],[8,11],[0,12],[0,13],[0,14],[0,15],[0,16],[0,17],[0,18],[0,19]],[[12,3],[12,4],[8,2],[8,5],[50],[11,8],[11,9],[10,10],[10,11],[50],[7,13,14],[50],[5,12,16],[50],[6,17,15],[50],[8,18],[8,19],[0,0],[0,1],[0,20],[0,21],[0,22],[0,23],[0,6],[0,7]],[[7,0,1],[13,3,4],[7,6,7],[0,8],[0,9],[0,2],[0,10],[0,11],[0,5],[0,12],[0,13]],[[7,0,1],[7,2,3],[7,4,5],[7,6,7],[50],[7,9,10],[7,11,12],[7,13,14],[50],[7,8,16],[7,17,18],[7,19,20],[7,21,15],[50],[7,23,24],[7,25,26],[7,27,28],[50],[7,22,30],[7,31,32],[7,33,34],[7,35,29],[0,36],[0,37],[0,38],[0,39],[0,40],[0,41],[0,42],[0,43]],[[5,0,1],[13,4,5],[50],[10,8],[10,2],[50],[8,12],[0,11],[0,13],[0,14],[0,3],[0,9],[0,10],[0,6],[0,7]],[[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7]],[[7,0,1],[7,2,3],[7,4,5],[7,6,7],[50],[7,9,10],[7,11,12],[7,13,14],[50],[7,8,16],[7,17,18],[7,19,20],[7,21,15],[50],[7,23,24],[7,25,26],[7,27,28],[50],[7,22,30],[7,31,32],[7,33,34],[7,35,29],[0,36],[0,37],[0,38],[0,39],[0,40],[0,41],[0,42],[0,43]],[[12,3],[12,4],[8,2],[8,5],[50],[11,8],[11,9],[10,10],[10,11],[50],[7,13,14],[50],[5,12,16],[50],[6,17,15],[50],[8,18],[8,19],[0,0],[0,1],[0,20],[0,21],[0,22],[0,23],[0,6],[0,7]],[[13,3,4],[0,0],[0,1],[0,2],[0,8],[0,9],[0,5],[0,6],[0,7]],[[13,3,4],[0,0],[0,1],[0,2],[0,8],[0,9],[0,5],[0,6],[0,7]],[[13,3,4],[0,0],[0,1],[0,2],[0,8],[0,9],[0,5],[0,6],[0,7]],[[13,1,2],[13,5,6],[0,0],[0,8],[0,9],[0,3],[0,4],[0,10],[0,11],[0,7]],[[12,1],[12,6],[50],[12,0],[12,7],[50],[10,2],[11,5],[50],[8,8],[8,9],[50],[10,10],[11,13],[50],[8,14],[8,15],[0,16],[0,17],[0,11],[0,3],[0,4],[0,12],[0,18],[0,19]],[[1,1],[1,3],[1,5],[1,7],[50],[7,0,8],[7,2,9],[7,4,10],[7,6,11],[50],[2,13],[3,15],[2,17],[3,19],[0,12],[0,20],[0,14],[0,21],[0,16],[0,22],[0,18],[0,23]],[[2,0],[3,6],[50],[5,8,1],[5,9,7],[50],[10,10],[10,2],[11,5],[11,11],[50],[8,13],[8,14],[50],[4,3],[50],[4,4],[0,12],[0,16],[0,17],[0,20],[0,21],[0,18],[0,19],[0,15]],[[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7]],[[13,3,4],[0,0],[0,1],[0,2],[0,8],[0,9],[0,5],[0,6],[0,7]],[[13,1,2],[13,5,6],[0,0],[0,8],[0,9],[0,3],[0,4],[0,10],[0,11],[0,7]],[[7,0,1],[7,2,3],[7,4,5],[7,6,7],[50],[7,9,10],[7,11,12],[7,13,14],[50],[7,8,16],[7,17,18],[7,19,20],[7,21,15],[50],[7,23,24],[7,25,26],[7,27,28],[50],[7,22,30],[7,31,32],[7,33,34],[7,35,29],[0,36],[0,37],[0,38],[0,39],[0,40],[0,41],[0,42],[0,43]],[[11,1],[10,3],[11,4],[10,6],[50],[2,0],[2,7],[50],[10,8],[11,9],[10,10],[11,11],[50],[0,12],[0,14],[0,2],[0,15],[0,16],[0,5],[0,17],[0,13]],[[7,0,1],[7,2,3],[7,4,5],[7,6,7],[50],[7,9,10],[7,11,12],[7,13,14],[50],[7,8,16],[7,17,18],[7,19,20],[7,21,15],[50],[7,23,24],[7,25,26],[7,27,28],[50],[7,22,30],[7,31,32],[7,33,34],[7,35,29],[0,36],[0,37],[0,38],[0,39],[0,40],[0,41],[0,42],[0,43]],[[13,3,4],[0,0],[0,1],[0,2],[0,8],[0,9],[0,5],[0,6],[0,7]],[[12,3],[12,4],[8,2],[8,5],[50],[11,8],[11,9],[10,10],[10,11],[50],[7,13,14],[50],[5,12,16],[50],[6,17,15],[50],[8,18],[8,19],[0,0],[0,1],[0,20],[0,21],[0,22],[0,23],[0,6],[0,7]],[[5,0,1],[13,4,5],[50],[10,8],[10,2],[50],[8,12],[0,11],[0,13],[0,14],[0,3],[0,9],[0,10],[0,6],[0,7]],[[7,0,1],[7,2,3],[7,4,5],[7,6,7],[50],[7,9,10],[7,11,12],[7,13,14],[50],[7,8,16],[7,17,18],[7,19,20],[7,21,15],[50],[7,23,24],[7,25,26],[7,27,28],[50],[7,22,30],[7,31,32],[7,33,34],[7,35,29],[0,36],[0,37],[0,38],[0,39],[0,40],[0,41],[0,42],[0,43]],[[6,0,1],[6,4,5],[50],[5,2,3],[5,6,7],[50],[8,8],[8,10],[8,9],[8,11],[0,12],[0,13],[0,14],[0,15],[0,16],[0,17],[0,18],[0,19]],[[7,0,1],[7,2,3],[7,4,5],[7,6,7],[50],[7,9,10],[7,11,12],[7,13,14],[50],[7,8,16],[7,17,18],[7,19,20],[7,21,15],[0,22],[0,23],[0,24],[0,25],[0,26],[0,27],[0,28],[0,29]],[[7,0,1],[7,2,3],[7,4,5],[7,6,7],[50],[7,9,10],[7,11,12],[7,13,14],[50],[7,8,16],[7,17,18],[7,19,20],[7,21,15],[0,22],[0,23],[0,24],[0,25],[0,26],[0,27],[0,28],[0,29]],[[6,0,1],[6,4,5],[50],[5,2,3],[5,6,7],[50],[8,8],[8,10],[8,9],[8,11],[0,12],[0,13],[0,14],[0,15],[0,16],[0,17],[0,18],[0,19]],[[6,0,1],[6,4,5],[50],[5,2,3],[5,6,7],[50],[8,8],[8,10],[8,9],[8,11],[0,12],[0,13],[0,14],[0,15],[0,16],[0,17],[0,18],[0,19]],[[11,1],[10,3],[11,4],[10,6],[50],[2,0],[2,7],[50],[10,8],[11,9],[10,10],[11,11],[50],[0,12],[0,14],[0,2],[0,15],[0,16],[0,5],[0,17],[0,13]],[[1,1],[1,3],[1,5],[1,7],[50],[7,0,8],[7,2,9],[7,4,10],[7,6,11],[50],[2,13],[3,15],[2,17],[3,19],[0,12],[0,20],[0,14],[0,21],[0,16],[0,22],[0,18],[0,23]],[[5,0,1],[13,4,5],[50],[10,8],[10,2],[50],[8,12],[0,11],[0,13],[0,14],[0,3],[0,9],[0,10],[0,6],[0,7]]][t.Y],t.Ua=[[0,0,0,1,0,0,0,0],[0,0,1,0,0,0,0,0],[0,0,0,0,0,1,0,0],[0,1,0,0,1,1,0,0],[0,0,0,1,1,1,0,1],[0,0,1,0,0,0,0,0],[1,2,1,3,1,0,0,0],[4,4,2,2,1,1,3,3],[1,1,0,0,1,1,0,0],[0,1,0,0,0,1,0,0],[0,1,0,0,0,1,0,1],[1,1,1,1,1,1,1,1],[0,0,0,0,0,0,1,1],[1,0,0,1,1,1,1,1],[1,1,1,0,0,1,1,1],[0,0,1,1,1,1,0,0],[0,0,0,1,0,0,1,1],[1,1,0,1,1,0,1,1],[1,1,4,1,1,1,0,0],[1,2,4,2,1,1,0,0],[1,1,0,1,1,0,1,1],[0,1,0,1,0,1,0,1],[0,1,0,2,0,1,0,0],[0,0,2,0,1,0,1,0],[0,0,0,2,0,0,0,0],[0,0,2,2,1,1,0,0],[3,3,2,2,1,1,0,0],[2,2,0,0,0,0,1,1],[3,3,0,0,0,0,2,2],[1,0,1,3,0,0,0,3],[3,3,3,0,0,1,1,1],[4,4,4,0,0,2,2,2],[4,2,2,0,0,0,0,0],[0,2,2,0,4,0,3,3],[2,2,0,0,0,0,2,2],[2,2,4,0,0,4,2,2],[1,1,2,2,1,1,0,0],[3,3,2,2,1,1,1,1],[1,1,1,0,0,0,0,0],[1,1,1,0,1,0,0,0],[2,1,1,0,0,0,0,0],[0,1,0,1,0,2,0,1],[3,1,0,1,0,2,0,1],[3,3,1,1,0,0,0,0],[0,0,1,1,3,3,0,0],[1,0,0,2,1,0,1,0],[3,2,1,1,1,0,0,0],[2,1,1,0,2,2,0,0],[0,0,3,3,3,3,0,0],[0,0,3,2,2,3,0,0],[0,0,3,3,3,3,0,0],[0,0,0,3,3,0,0,0],[0,0,0,2,2,0,0,0],[0,1,0,2,1,0,2,0],[0,1,2,2,1,0,2,0],[3,3,3,2,3,2,2,2],[0,2,0,3,0,2,0,3],[2,3,3,4,0,2,2,3],[0,0,4,0,0,0,0,0],[0,0,0,3,2,0,0,0],[0,3,2,0,0,2,3,0],[0,4,0,2,0,2,0,0],[0,0,0,4,0,0,0,0],[0,1,2,3,4,3,2,1],[0,4,0,2,2,0,0,0],[0,0,0,0,4,4,2,2],[2,0,0,0,2,3,0,0],[2,0,4,0,2,0,0,3],[2,2,1,1,4,4,1,1],[0,0,4,0,0,4,0,0],[1,0,2,0,0,2,0,1],[2,2,4,4,1,1,2,2],[4,4,2,2,1,1,3,3],[0,2,2,4,0,0,0,2],[0,0,0,0,0,0,0,0],[3,0,0,0,3,0,0,0]][t.Y],O(t),e=0,t.l=1,t.j=[],h=0;8>h;++h)t.j.push([0,h]);for(t.H=[],h=0;h<t.wa.length;++h)switch(i=t.wa[h],i[0]){case 0:var s=i[1];t.j[s].push(999,e++);break;case 1:case 2:case 3:case 4:s=i[1];var r=t.j[s][1];t.j[s].push(t.l,r),t.j.push([t.l,r]),t.H.push([i[0],t.l,r]);break;case 5:case 6:s=i[1],r=i[2];var l=t.j[s][1],n=t.j[r][1];t.j[s].push(t.l,l),t.j[r].push(t.l,n),t.j.push([t.l,(l+n)/2]),t.H.push([i[0],t.l,l]);break;case 7:case 13:s=i[1],r=i[2],l=t.j[s][1],n=t.j[r][1],t.j[s].push(t.l,l),t.j[r].push(t.l,n),t.j.push([t.l,l]),t.j.push([t.l,n]),t.H.push([i[0],t.l,l,s,r]);break;case 8:s=i[1],r=t.j[s][1],t.j[s].push(t.l,r),t.j.push([t.l,r-.5]),t.j.push([t.l,r+.5]),t.H.push([8,t.l,r-.5,s]);break;case 9:s=i[1],r=t.j[s][1],t.j[s].push(t.l,r),t.j.push([t.l,r-1]),t.j.push([t.l,r]),t.j.push([t.l,r+1]),t.H.push([9,t.l,r-1,s]);break;case 10:s=i[1],r=t.j[s][1],t.j[s].push(t.l,r),t.j.push([t.l,r-.5]),t.H.push([10,t.l,r,s]);break;case 11:s=i[1],r=t.j[s][1],t.j[s].push(t.l,r),t.j.push([t.l,r+.5]),t.H.push([11,t.l,r,s]);break;case 12:s=i[1],r=t.j[s][1],t.j[s].push(t.l,r),t.H.push([12,t.l,r,s]);break;case 50:++t.l}for(++t.l,h=0;h<t.j.length;++h)t.j[h][2]=Math.min(t.j[h][2],t.l)}64!=o&&65!=o||0!=t.O||P(t)||(t.O=t.S[Math.floor(t.s)+Math.floor(t.m)*t.u+t.floor*t.v],t.W=t.S[Math.floor(t.s)+Math.floor(t.m)*t.u+(t.floor+(64==o?1:-1))*t.v],t.A.push(t.fa[t.O],1,20),t.A.push(t.fa[t.W],1,20)),0>t.s&&(t.N=P(t)?6:4)}116!=t.S[Math.floor(t.s)+Math.floor(t.m)*t.u+t.floor*t.v]||t.za||(t.za=!0,t.N=2)}else if(t.orientation=Math.atan2(e-t.m,o-t.s),t.s+=h*Math.cos(t.orientation),t.m+=h*Math.sin(t.orientation),0<(o=t.I[Math.floor(t.s)+Math.floor(t.m)*t.u+t.floor*t.v])&&63>o){for(e=0;e<t.C.length&&o>t.C[e];)++e;t.C.splice(e,0,o),t.I[Math.floor(t.s)+Math.floor(t.m)*t.u+t.floor*t.v]=0,5==o&&(t.N=3)}else 127<o&&192>o?(e=0<Math.sin(t.orientation)?1:-1,t.G[t.G.length-1]=0>e?Math.floor(t.m)-.5-o+128:Math.floor(t.m)+.5+132-o,t.V=t.floor-e,o=8*(o-128+t.m-Math.floor(t.m)),t.$=Math.floor(0<e?o:32-o),t.O=t.S[Math.floor(t.s)+Math.floor(t.m)*t.u+t.floor*t.v],t.W=t.S[Math.floor(t.s)+Math.floor(t.m)*t.u+(t.floor-e)*t.v],t.da=!0):t.da&&(t.floor=t.V,t.$=0,t.da=!1,t.O=t.W=0);for(t.sa&&(++t.$,32<=t.$&&(t.floor=t.V,t.$=0,t.A.push(t.fa[t.O],-1,0),t.A.push(t.fa[t.W],-1,0),t.O=t.W=0,t.sa=!1)),o=0;o<t.A.length;o+=3)t.D[t.A[o]]+=t.A[o+1],(0<t.A[o+1]&&t.D[t.A[o]]>=t.A[o+2]||0>t.A[o+1]&&t.D[t.A[o]]<=t.A[o+2])&&(t.D[t.A[o]]=t.A[o+2],t.A.splice(o,3),o-=3,t.O&&(t.$=0,t.sa=!0,t.V=t.floor+(64==t.I[Math.floor(t.s)+Math.floor(t.m)*t.u+t.floor*t.v]?1:-1)),N(t),E(t));a.b.ga||M(a,0)}}),40),requestAnimationFrame((function(){L()}))}function Q(a,t,o,i,e){this.Ya=e,this.b=e.b,this.T=a,this.w=t,this.h=a.getContext("2d"),this.c=t.getContext("2d"),this.a={g:[],K:[],ca:0,f:[]},this.Fa=i,this.Za=["RESUME","NEW GAME","SAVE GAME"],this.$a="Here we are. Main security is disabled, the doors are on local. Only four stories between you and the diamond. Remember, you only have one hour.;The diamond is here ! But you have a feeling that something isn't right .. maybe you forgot to disable some hidden sensors and all hell will break loose once you grab it.;Oops .. you half expected a wailing siren, but instead the building went dark. The elevators seem to be out as well, you will need another way down.;You escape the tower empty handed, trying to recover your breath from the stress. Looking at the building again, you swear to come back better prepared. After all, there still is some time left.;You lost count of time ... the main security system reactivates, bolting all doors shut and trapping you inside. GAME OVER.;You close the entrance door and prompty vanish into the darkness. Slowly, you start to realize that you made it, the diamond is yours. A new life begins. YOU WIN.".split(";"),this.B=document.createElement("canvas"),this.B.width=480,this.B.height=288,(a=this.B.getContext("2d")).drawImage(o,0,0),a.scale(1,-1),a.drawImage(o,48,192,192,48,240,-240,192,48),a.scale(1,-1),R(this),this.ya=this.ra=0,this.X="#414 #fea #46d #e41 #c5c #f28".split(" ")}function ca(a,t){a.c.save();var o="#fff";0==a.ra%3&&0==(1&Math.floor(a.ra/50))&&(o="#f77");var i=Math.round(50+50*Math.cos(a.ra/20));a.c.lineWidth=6,a.c.textAlign="center";for(var e=0;3>e;++e)a.c.fillStyle=t.L==e?o:e<t.ka?"#888":"#aaa",a.c.strokeStyle="hsl(0,0%,"+(t.L==e?i:e<t.ka?50:0)+"%)",S(a,a.Za[e],a.w.width/2,a.w.height*(.35+.1*e),.06*a.w.height);a.c.restore()}function T(a,t,o,i,e,h){a.c.strokeStyle="#000",a.c.lineWidth=2;for(var s=0;8>s;++s)a.c.fillStyle=a.X[t[s]],a.c.fillRect(o,i+s*h,e,h),a.c.strokeRect(o,i+s*h,e,h)}function U(a,t,o,i,e){a.c.beginPath(),a.c.moveTo(t-.5*a.a.f[0],o+i*a.a.f[0]),a.c.lineTo(t+.5*a.a.f[0],o+e*a.a.f[0]),a.c.stroke()}function V(a,t,o,i,e,h){a.c.fillStyle="#111",a.c.fillRect(t-i,o-.5*a.a.f[0],2*i,e*a.a.f[0]),(7>h||13==h)&&(a.c.drawImage(a.B,48*(5>h?0:6==h?1:5==h?2:3),240,48,48,t-i,o+(e-1)*a.a.f[0]/2-i,2*i,2*i),5>h&&(a.c.fillStyle=a.X[h],a.c.fillRect(t,o-.5*a.a.f[0]+2,i-2,3)));for(var s=0;s<e;++s)a.c.drawImage(a.B,192,240,5,16,t-i-4,o+s*a.a.f[0]-8,5,16),(5>h||6<h)&&a.c.drawImage(a.B,198,240,5,16,t+i-1,o+s*a.a.f[0]-8,5,16);5!=h&&6!=h||a.c.drawImage(a.B,198,240,5,16,t+i-1,o+a.a.f[0]/2-8,5,16)}function W(a,t){return a.M-a.a.g[0]*(t-a.b.m)}function X(a,t){return a.J-a.a.g[0]*(a.b.s-t)}function Y(a,t,o,i,e,h,s){var r=Math.max(0,Math.floor(a.b.s-a.J/a.a.g[0])),l=Math.min(16,Math.ceil(a.b.s+a.J/a.a.g[0])),n=Math.max(0,Math.floor(a.b.m-(a.a.K[0]-a.M)/a.a.g[0])),f=Math.min(16,1+Math.ceil(a.b.m+a.M/a.a.g[0])),c=0;if(!h&&!e&&0<o){r=n=16;for(var u=l=f=0;16>u;++u)for(var g=0;16>g;++g)a.b.S[g+u*a.b.u+t*a.b.v]==o&&(r=Math.min(r,g),l=Math.max(l,g+1),n=Math.min(n,u),f=Math.max(f,u+1));c=a.b.da?1:0}for(u=n;u<f;++u)for(g=r;g<l;++g){var b=a.b.S[g+u*a.b.u+t*a.b.v];if((h||e^(b==o||b==i))&&(b=a.b.I[g+u*a.b.u+t*a.b.v],a.h.drawImage(a.B,127<b&&255>b?96:64==b||65==b?48:0,s?96:0,48,48,X(a,g),W(a,u+1),a.a.g[0],a.a.g[0]),0<b))if(6>b)a.h.drawImage(a.B,48*b-48,144,48,48,X(a,g),W(a,u+1),a.a.g[0],a.a.g[0]);else if(2048<b){var d=(1536&b)>>9;if(a.h.drawImage(a.B,48*d,48,48,48,X(a,g),W(a,u+1),a.a.g[0],a.a.g[0]),a.b.Ca==(511&b)){a.h.strokeStyle="#fff";var m=X(a,g+[.55,0,0,0][d]),w=W(a,u+[1,1,1,.45][d]),M=a.a.g[0]*[.45,1,.45,1][d],v=a.a.g[0]*[1,.45,1,.45][d];a.h.strokeRect(m,w,M,v)}a.b.Y==(511&b)&&(a.h.strokeStyle="#f00",m=X(a,g+[.55,0,0,0][d]),w=W(a,u+[1,1,1,.45][d]),M=a.a.g[0]*[.45,1,.45,1][d],v=a.a.g[0]*[1,.45,1,.45][d],a.h.strokeRect(m,w,M,v))}}for(u=n+c;u<=f-c;++u)for(o=W(a,u),g=r;g<l;++g)i=X(a,g),0<(h=Z(a.b,t,g,u,!0))&&(h=a.b.D[h]),h&&(0<h?(e=Math.floor(48*h/40),h=Math.floor(a.a.g[0]*h/40),a.h.drawImage(a.B,216-e,24,e,8,i,o-4,h,8),a.h.drawImage(a.B,216,24,e,8,i+a.a.g[0]-h,o-4,h,8)):a.h.drawImage(a.B,192,0,48,8,i,o-4,a.a.g[0],8));for(u=n;u<f;++u)for(o=W(a,u),g=r;g<=l;++g)i=X(a,g),0<(n=Z(a.b,t,g,u,!1))&&(n=a.b.D[n]),n&&(0<n?(e=Math.floor(48*n/40),h=Math.floor(a.a.g[0]*n/40),a.h.drawImage(a.B,216,72-e,8,e,i-4,o-a.a.g[0],8,h),a.h.drawImage(a.B,216,72,8,e,i-4,o-h,8,h)):a.h.drawImage(a.B,192,48,8,48,i-4,o-a.a.g[0],8,a.a.g[0]))}function ba(a){a.a.ca=a.b.aa?Math.min(a.a.ca+.02,1):Math.max(a.a.ca-.02,0),a.J=2*a.a.g[0]*a.a.ca+(1-a.a.ca)*(a.T.width>>1),a.M=2*a.a.g[0]*a.a.ca+(1-a.a.ca)*(a.a.K[0]>>1);var t=P(a.b);if(a.h.clearRect(0,0,a.T.width,a.T.height),a.b.$){a.h.save();var o=a.b.floor<a.b.V?a.b.$/32:1-a.b.$/32;a.h.translate(a.J,a.M),a.h.scale(1-.8*o,1-.8*o),a.h.translate(-a.J,-a.M),Y(a,Math.min(a.b.floor,a.b.V),a.b.O,a.b.W,!0,!1,t),a.h.restore(),a.h.save(),a.h.translate(a.J,a.M),a.h.scale(7-6*o,7-6*o),a.h.translate(-a.J,-a.M),Y(a,Math.max(a.b.floor,a.b.V),a.b.O,a.b.W,!0,!1,t),a.h.restore(),Y(a,a.b.floor,a.b.O,a.b.W,!1,!1,t)}else Y(a,a.b.floor,a.b.O,a.b.W,!1,!0,t);if(a.h.save(),a.h.translate(a.J,a.M),a.h.rotate(-a.b.orientation),a.h.drawImage(a.B,48*(a.b.G.length?1+(a.ra>>1&7):0),192,48,48,-a.a.g[0]/2,-a.a.g[0]/2,a.a.g[0],a.a.g[0]),a.h.restore(),a.h.strokeStyle="#00f",a.b.La&&(a.h.fillStyle="#fff",a.h.fillRect(a.J+10,a.M-25,15,15),a.h.strokeText("?",a.J+15,a.M-14)),0<a.b.G.length&&(t=X(a,a.b.G[a.b.G.length-2]),o=W(a,a.b.G[a.b.G.length-1]),a.h.beginPath(),a.h.moveTo(t-a.a.g[0]/8,o-a.a.g[0]/8),a.h.lineTo(t+a.a.g[0]/8,o+a.a.g[0]/8),a.h.moveTo(t+a.a.g[0]/8,o-a.a.g[0]/8),a.h.lineTo(t-a.a.g[0]/8,o+a.a.g[0]/8),a.h.stroke()),0<a.a.ca){for(a.c.clearRect(0,0,a.w.width,a.w.height),a.c.save(),a.c.beginPath(),a.c.rect(0,0,a.w.width,a.a.K[0]),a.c.arc(a.J,a.M,a.J,0,2*Math.PI,!0),a.c.clip(),a.c.fillStyle="#040",a.c.fillRect(0,0,a.w.width,a.a.K[0]),a.ya=0<a.b.Y?a.b.Y:a.ya,a.c.fillStyle="#2a2",a.c.font=a.a.g[0]+"px Impact,fantasy",a.c.fillText("DOOR #"+a.b.floor+(15>a.ya?"0":"")+(1+a.ya).toString(16).toUpperCase(),a.w.width/2,3*a.a.g[0]),t=Math.floor(a.w.width-8*a.a.f[0]),o=0;8>o;++o){var i=a.a.f[2]+o*a.a.f[0];a.c.fillRect(t,i-6,a.w.width-t,12)}var e=a.a.f[3],h=Math.floor((t-e)/a.b.l);for(a.c.fillStyle="#2a2",o=0;o<a.b.j.length;++o){var s=a.b.j[o],r=s[0]?e+h*s[0]+a.a.f[0]/2:a.a.f[2*o+1];i=a.a.f[2]+s[1]*a.a.f[0];a.c.fillRect(r,i-6,h*s[2]-(r-e)-a.a.f[0]/2,12)}for(a.c.lineWidth=12,a.c.strokeStyle="#2a2",a.c.fillStyle="#2a2",a.c.lineCap="round",o=0;o<a.b.H.length;++o)s=a.b.H[o],i=a.a.f[2]+s[2]*a.a.f[0],7==s[0]&&(U(a,e+h*s[1],i,0,1),a.c.beginPath(),a.c.arc(e+h*s[1]-a.a.f[0]/2,i+a.a.f[0],a.a.f[0]/4,0,7),a.c.arc(e+h*s[1]+a.a.f[0]/2,i,a.a.f[0]/4,0,7),a.c.fill()),8==s[0]&&(U(a,e+h*s[1],i,.5,0),U(a,e+h*s[1],i,.5,1)),9==s[0]&&(U(a,e+h*s[1],i,0,-.5),U(a,e+h*s[1],i,0,.5)),10==s[0]&&U(a,e+h*s[1],i,0,-.5),11==s[0]&&U(a,e+h*s[1],i,0,.5),12==s[0]&&(a.c.beginPath(),a.c.arc(e+h*s[1]-a.a.f[0]/2,i,a.a.f[0]/4,0,7),a.c.fill());for(o=0;o<a.b.j.length;++o)a.c.fillStyle=a.X[a.b.o[o]],r=(s=a.b.j[o])[0]?e+h*s[0]+a.a.f[0]/2:a.a.f[2*o+1],i=a.a.f[2]+s[1]*a.a.f[0],a.c.fillRect(r,i-3,h*s[2]-(r-e)-a.a.f[0]/2,6);for(a.c.lineWidth=6,o=0;o<a.b.H.length;++o)s=a.b.H[o],i=a.a.f[2]+s[2]*a.a.f[0],a.c.strokeStyle=a.X[a.b.o[s[3]]],7==s[0]&&(a.c.fillStyle=a.X[a.b.o[s[4]]],U(a,e+h*s[1],i,0,1),a.c.beginPath(),a.c.arc(e+h*s[1]-a.a.f[0]/2,i+a.a.f[0],a.a.f[0]/6,0,7),a.c.arc(e+h*s[1]+a.a.f[0]/2,i,a.a.f[0]/6,0,7),a.c.fill(),a.c.strokeStyle="#ccc",a.c.lineWidth=4,U(a,e+h*s[1],i,1,0),a.c.lineWidth=6),8==s[0]&&(U(a,e+h*s[1],i,.5,0),U(a,e+h*s[1],i,.5,1)),9==s[0]&&(U(a,e+h*s[1],i,0,-.5),U(a,e+h*s[1],i,0,.5)),10==s[0]&&U(a,e+h*s[1],i,0,-.5),11==s[0]&&U(a,e+h*s[1],i,0,.5),12==s[0]&&(a.c.fillStyle=a.X[a.b.o[s[3]]],a.c.beginPath(),a.c.arc(e+h*s[1]-a.a.f[0]/2,i,a.a.f[0]/6,0,7),a.c.fill());for(o=0;o<a.b.H.length;++o)s=a.b.H[o],i=a.a.f[2]+s[2]*a.a.f[0],0<s[0]&&5>s[0]&&V(a,e+h*s[1],i,.5*a.a.f[0],1,s[0]),(5<=s[0]&&6>=s[0]||13==s[0])&&V(a,e+h*s[1],i,.5*a.a.f[0],2,s[0]);for(o=0;8>o;++o)a.c.fillStyle=-1==a.b.ea[o]?"#fff":a.X[a.b.C[a.b.ea[o]]],a.c.beginPath(),a.c.arc(a.a.f[2*o+1],a.a.f[2*o+2],a.a.f[0]/2,0,7),a.c.fill(),o==a.b.controls.Z&&(a.c.lineWidth=2,a.c.strokeStyle=-1==a.b.U?"#fff":a.X[a.b.C[a.b.U]],a.c.beginPath(),a.c.arc(a.a.f[2*o+1],a.a.f[2*o+2],a.a.f[0]/2-2,0,7),a.c.stroke());for(a.c.fillStyle=a.X[a.b.ma?1:0],o=0;8>o;++o)i=a.a.f[2]+o*a.a.f[0],a.c.fillRect(t,i-3,a.w.width-t,6);V(a,t,a.a.f[2],1.5*a.a.f[0],8,8),T(a,a.b.Ba,t-.5*a.a.f[0],a.a.f[2]+.5*a.a.f[0],a.a.f[0],.75*a.a.f[0]),a.c.fillStyle="#028",a.c.fillRect(a.w.width-4*a.a.f[0],a.a.f[2]-3*a.a.f[0],4*a.a.f[0],11*a.a.f[0]),a.c.fillStyle="#001",a.c.fillRect(a.w.width-3.8*a.a.f[0],a.a.f[2]-2*a.a.f[0],3.9*a.a.f[0],9.8*a.a.f[0]),a.c.font=(a.a.f[0]>>1)+"px cursive",a.c.textAlign="left",a.c.fillText(" GlitchMaker 3000",a.w.width-4*a.a.f[0],a.a.f[2]-2.5*a.a.f[0]),a.c.textAlign="center",a.c.fillStyle="#08f",a.c.fillText(a.b.ma?"ACCESS":"MATCH TO",a.w.width-1.5*a.a.f[0],a.a.f[2]-a.a.f[0]),a.c.fillText(a.b.ma?"GRANTED":"OPEN",a.w.width-1.5*a.a.f[0],a.a.f[2]-a.a.f[0]/2),T(a,a.b.Ua,a.w.width-2*a.a.f[0],a.a.f[2]+.5*a.a.f[0],a.a.f[0],.75*a.a.f[0]),a.c.restore()}else a.c.clearRect(0,0,a.w.width,a.w.height);for(a.h.fillStyle="#122",a.h.fillRect(0,a.a.K[0],a.T.width,a.a.g[0]),t=0;t<a.b.C.length;++t)a.b.U==t&&(a.h.strokeStyle="#fff",a.h.beginPath(),a.h.arc((t+.5)*a.a.g[0],a.a.K[0]+a.a.g[0]/2,.45*a.a.g[0],0,7),a.h.stroke()),o=a.b.C[t],a.h.strokeStyle=a.X[o],i=t*a.a.g[0],e=a.a.K[0],5>o&&(a.b.aa&&!a.b.ha[t]&&a.h.setLineDash([5]),a.h.beginPath(),a.h.arc(i+a.a.g[0]/2,e+a.a.g[0]/2,.4*a.a.g[0],0,7),a.h.stroke(),a.h.setLineDash([])),a.b.U==t&&a.b.na?(i=a.b.controls.qa-a.a.g[0]/2,e=a.b.controls.la-a.a.g[0]/2,a.c.drawImage(a.B,48*o-48,144,48,48,i,e,a.a.g[0],a.a.g[0])):a.b.aa&&!a.b.ha[t]||a.h.drawImage(a.B,48*o-48,144,48,48,i,e,a.a.g[0],a.a.g[0]);a.c.textAlign="center",a.c.fillStyle="#f00",a.c.strokeStyle="#811",t=Math.floor(a.b.ba/25%60),S(a,(10>(o=Math.floor(a.b.ba/1500))?"0":"")+o+":"+(10>t?"0":"")+t,a.w.width-2*a.a.g[0],a.a.K[0]+.65*a.a.g[0],a.a.g[0]/2),a.c.fillStyle="#ccc",a.c.strokeStyle="#766",o=(t="Ground 1st 2nd 3rd 4th Tutorial".split(" "))[a.b.floor],a.b.V!=a.b.floor&&(o+=" -> "+t[a.b.V]),S(a,o,a.T.width-5*a.a.g[0],a.a.K[0]+.4*a.a.g[0],a.a.g[0]/2),S(a,"FLOOR",a.T.width-5*a.a.g[0],a.a.K[0]+.9*a.a.g[0],a.a.g[0]/2),++a.ra}function aa(a,t){a.b.N&&t?(a.Fa.style.visibility="visible",a.Fa.firstChild.data=a.$a[a.b.N-1]):a.Fa.style.visibility="hidden"}function S(a,t,o,i,e){a.c.font=Math.ceil(e)+"px cursive",a.c.strokeText(t,o,i),a.c.fillText(t,o,i)}function R(a){a.w.width=a.T.width=window.innerWidth,a.w.height=a.T.height=window.innerHeight,a.w.style.width=a.T.style.width=window.innerWidth+"px",a.w.style.height=a.T.style.height=window.innerHeight+"px";var t=Math.min(window.innerWidth,window.innerHeight),o=Math.min(48,Math.max(24,8*Math.floor(t/100))),i=window.innerHeight-o;for(a.a.g=[o,window.innerWidth>>1,i>>1],a.a.K=[i],a.J=a.T.width>>1,a.M=a.a.K[0]>>1,t=Math.min(320>t?24:480>t?32:40,16*Math.floor(i-4*o)/144),a.a.f=[t],i=0;4>i;++i)a.a.f.push(2*o-t,4*o+(2*i+1)*t),a.a.f.push(2*o+t,4*o+(2*i+2)*t);a.Ya.controls.a=a.a}function D(a){this.controls=a,this.pa=new ea,this.U=-1,this.La=this.na=!1,this.s=1,this.m=9,this.V=this.floor=0,this.G=[],this.orientation=0,this.C=[1],this.Y=this.Ca=this.U=-1,this.aa=!1,this.N=0,this.ba=9e4,this.W=this.O=0,this.ua=[],this.va=[],this.I=[],this.D=[0],this.Wa=[],this.Sa=this.u=17,this.v=this.u*this.Sa,this.$=0,this.Ea(),this.A=[],this.ga=!1,this.Ka=[]}function N(a){for(i=0;i<a.Ka.length;++i){var t=a.Ka[i];t.Ha.Ra={s:a.s,m:a.m,floor:a.floor,C:a.C,D:a.D,I:a.I,ba:a.ba},K(t)}}function P(a){for(i=0;i<a.C.length;++i)if(5==a.C[i])return!0;return!1}function O(a){a.o=[];for(var t=0;8>t;++t){var o=a.ea[t];a.o.push(-1<o?a.C[o]:0)}o=0;for(a.ma=!0,t=0;t<a.wa.length;++t){var i=a.wa[t];switch(i[0]){case 0:a.Ba[o]=a.o[i[1]],a.ma=a.ma&&a.Ba[o]==a.Ua[o],++o;break;case 1:case 2:case 3:case 4:a.o.push(a.o[i[1]]?0:i[0]);break;case 5:a.o.push(Math.min(a.o[i[1]],a.o[i[2]]));break;case 6:a.o.push(Math.max(a.o[i[1]],a.o[i[2]]));break;case 7:a.o.push(a.o[i[2]],a.o[i[1]]);break;case 8:a.o.push(a.o[i[1]],a.o[i[1]]);break;case 9:a.o.push(a.o[i[1]],a.o[i[1]],a.o[i[1]]);break;case 10:case 11:a.o.push(a.o[i[1]]);break;case 13:a.o.push(Math.max(0,a.o[i[1]]-1),Math.max(0,a.o[i[2]]-1))}}a.ma&&(t=a.Wa[a.Y].Xa,0<a.D[t]?a.A.push(t,-1,0):a.A.push(t,1,20))}function E(a){a.P=[];for(var t=0;t<a.i;++t)a.P.push(!1);for(t=a.S[Math.floor(a.s)+Math.floor(a.m)*a.u+a.floor*a.v],a.P[t]=[],a.Ja=[t];a.Ja.length;){t=a.Ja.shift();for(var o=0;o<=a.i;++o){var i=a.R[t+o*a.i];i&&10>a.D[i[0]]&&(a.P[o]?a.P[o].length>a.P[t].length+i.length&&(a.P[o]=a.P[t].slice(),a.P[o].push(i[1],i[2],i[3],i[4])):(a.P[o]=a.P[t].slice(),a.P[o].push(i[1],i[2],i[3],i[4]),a.Ja.push(o)))}}}function Z(a,t,o,i,e){return t=o+i*a.u+t*a.v,e?a.ua[t]:a.va[t]}function C(a,t){this.controls=t,this.Da=a,this.ka=0,this.done=!1,this.L=0,u(this.controls)}function ea(){}q.prototype={},B.prototype={},Q.prototype={},D.prototype={Ea:function(){var a=6*this.v;this.I=Array(a).fill(0),this.S=Array(a).fill(0),this.ua=Array(a).fill(0),this.va=Array(a).fill(0),this.pa.Ea(6,this.u,this.Sa,this.I,this.ua,this.va,this.S,this.Wa),this.i=this.pa.i,this.fa=this.pa.fa,this.R=this.pa.R,this.D=Array(this.pa.F),this.za=this.da=this.sa=!1}},window.addEventListener("load",(function(){controls=new q,"ontouchstart"in document.documentElement?(document.ontouchstart=function(a){return z(a)},document.ab=function(a){return z(a)},document.ontouchend=function(a){return x(a)},document.bb=function(a){return x(a)},document.ontouchmove=function(a){var t=controls;return a.preventDefault(),v(t,a)}):(document.onmousedown=function(){return controls.ta=!0},document.onmouseup=function(){return y(controls)},document.onmousemove=function(a){return v(controls,a)}),document.onkeydown=function(a){return!A(a,!0)},document.onkeyup=function(a){return!A(a,!1)};var a=localStorage.getItem("GlitchData"),t={};a&&(t=JSON.parse(a)),game=new B(controls,t),renderer=new Q(document.getElementById("c"),document.getElementById("o"),document.getElementById("s"),document.getElementById("m"),game),window.addEventListener("resize",(function(){R(renderer)})),game.Ia=renderer,da()})),C.prototype={},ea.prototype={Ea:function(a,t,o,i,e,h,s,r){a=[0,0,14,4,2,0,0,12,4,2,0,0,8,2,4,0,4,12,10,4,0,2,8,6,4,0,14,10,2,4,0,8,10,6,2,0,8,8,8,2,0,0,0,4,8,0,4,5,6,3,0,10,5,3,3,0,13,5,3,3,0,4,0,12,5,1,0,0,3,3,1,3,0,3,3,1,6,0,7,3,1,13,0,3,3,1,0,3,6,2,1,6,3,7,2,1,13,3,3,2,1,0,5,10,3,1,10,5,3,3,1,13,5,3,3,1,0,8,2,8,1,2,8,7,2,1,2,10,3,5,1,5,10,2,5,1,7,10,2,3,1,7,13,2,2,1,2,15,8,1,1,9,8,1,7,1,10,9,2,4,1,12,8,2,6,1,14,10,2,4,1,10,14,6,2,2,0,0,3,3,2,3,0,4,3,2,7,0,3,3,2,10,0,3,3,2,13,0,3,3,2,0,3,3,1,2,3,3,4,2,2,7,3,3,4,2,10,3,2,4,2,12,3,2,7,2,14,3,2,7,2,0,4,1,5,2,1,4,2,5,2,3,5,4,4,2,0,9,7,1,2,0,10,3,3,2,0,13,3,3,2,3,10,4,6,2,7,7,1,9,2,8,7,2,2,2,10,9,2,4,2,8,9,2,4,2,8,13,4,1,2,8,14,4,2,2,12,10,2,4,2,14,10,2,4,2,12,14,2,2,2,14,14,2,2,2,10,7,2,2,0,14,14,2,2,1,14,8,2,2,1,10,13,2,1,1,10,8,2,1,3,0,0,2,2,3,2,0,2,2,3,0,2,2,2,3,2,2,2,2,3,0,4,2,3,3,2,4,2,3,3,4,0,3,3,3,7,0,3,3,3,0,7,3,3,3,0,10,3,3,3,0,13,3,3,3,4,3,4,2,3,4,5,2,2,3,10,0,4,2,3,14,0,2,4,3,3,7,3,6,3,6,5,2,8,3,8,3,2,5,3,10,2,3,6,3,13,2,1,6,3,3,13,7,3,3,10,14,6,2,3,10,9,2,5,3,8,9,2,4,3,8,8,4,1,3,12,8,2,2,3,12,10,2,4,3,14,4,2,4,3,14,8,2,2,3,14,10,2,4,4,0,0,4,4,4,0,4,3,3,4,0,7,3,3,4,4,0,3,3,4,4,3,3,1,4,7,0,5,4,4,12,0,4,3,4,12,3,2,5,4,14,3,2,1,4,14,4,2,4,4,12,8,4,8,4,3,13,9,3,4,0,10,3,6,4,3,4,1,3,4,4,4,8,1,4,11,5,1,3,4,4,12,3,1,4,4,5,7,7,4,3,7,1,3,4,3,10,1,3,4,11,8,1,2,4,11,10,1,2,4,7,12,3,1,4,10,12,2,1],o*=t,this.u=t,this.v=o,this.i=1;for(var l=0;l<a.length;l+=5){for(var n=0;n<a[l+4];++n){for(var f=0;f<a[l+3];++f)s[a[l]*o+(a[l+2]+n)*t+a[l+1]+f]=this.i;h[a[l]*o+(a[l+2]+n)*t+a[l+1]]=-1,h[a[l]*o+(a[l+2]+n)*t+a[l+1]+a[l+3]]=-1}for(f=0;f<a[l+3];++f)e[a[l]*o+a[l+2]*t+a[l+1]+f]=-1,e[a[l]*o+(a[l+2]+a[l+4])*t+a[l+1]+f]=-1;if(11==this.i||12==this.i||14==this.i||17==this.i||38==this.i||51==this.i||52==this.i||75==this.i||77==this.i)for(n=0;n<a[l+4];++n)for(f=0;f<a[l+3];++f)i[a[l]*o+(a[l+2]+n)*t+a[l+1]+f]=64;else if(22==this.i||23==this.i||36==this.i||40==this.i||76==this.i||78==this.i||79==this.i||101==this.i||102==this.i)for(n=0;n<a[l+4];++n)for(f=0;f<a[l+3];++f)i[a[l]*o+(a[l+2]+n)*t+a[l+1]+f]=65;else if(6==this.i||32==this.i||57==this.i||60==this.i||61==this.i||96==this.i)for(n=0;4>n;++n)for(f=0;f<a[l+3];++f)i[a[l]*o+(a[l+2]+n)*t+a[l+1]+f]=128+n;else if(34==this.i||56==this.i||92==this.i||95==this.i||98==this.i||108==this.i)for(n=a[l+4]-4;n<a[l+4];++n)for(f=0;f<a[l+3];++f)i[a[l]*o+(a[l+2]+n)*t+a[l+1]+f]=132+n-a[l+4];++this.i}for(this.R=Array(this.i*this.i).fill(!1),this.F=1,this.Va=0,a=[0,0,11,1,1,1,12,0,1,13,1,1,0,14,0,1,14,3,0,4,15,0,6,12,3,1,4,12,0,4,8,3,0,10,6,0,8,10,2,1,9,10,0,4,0,2,0,4,4,0,15,15,0,0,14,15,1,9,7,1,1,8,5,1,7,0,3,0,6,1,1,3,0,3,1,4,3,1,0,4,1,1,1,3,1,0,5,3,1,1,8,1,0,15,1,0,2,15,1,9,8,3,0,9,9,1,4,9,1,1,2,10,1,4,10,3,1,12,3,1,8,10,3,1,8,13,1,15,14,0,1,13,14,1,12,8,2,0,14,8,1,15,4,0,1,14,3,2,3,4,1,1,5,5,2,4,4,1,1,4,3,2,6,4,1,0,7,3,2,9,3,0,0,7,6,2,4,15,1,0,3,14,2,5,15,1,0,3,11,2,12,0,3,1,11,3,2,10,6,1,0,12,6,2,12,9,2,0,14,9,2,15,9,0,1,14,3,2,11,13,0,1,10,14,2,8,15,1,0,8,14,2,7,7,3,0,8,8,2,9,7,3,0,10,8,2,14,15,1,0,14,14,2,6,8,0,1,5,10,2,3,8,1,0,3,6,3,6,15,1,0,10,14,3,11,15,1,1,11,14,3,5,12,1,1,6,13,3,7,8,0,0,8,6,3,8,7,1,0,13,5,3,9,7,1,0,8,4,3,10,7,1,0,14,3,3,11,7,1,0,14,1,3,12,7,1,1,5,3,3,4,5,3,0,4,6,3,5,5,3,0,2,5,3,0,5,2,1,1,7,3,3,4,0,1,2,4,3,3,3,0,0,2,3,3,3,2,0,1,2,2,3,3,0,0,0,2,1,3,0,0,2,1,1,2,3,0,2,2,1,1,4,4,0,4,2,1,1,4,4,4,3,2,1,10,4,4,7,0,3,1,3,10,4,4,5,2,0,4,6,4,4,7,2,0,4,8,4,4,12,2,1,6,13,4,11,12,0,1,10,13,4,8,0,3,0,3,11,4,9,0,3,0,12,14,4,10,0,3,1,13,3,4,11,0,3,1,14,3,4,12,15,1,1,5,12,4,15,15,1,1,10,12,4,12,0,3,1,7,5,4,13,0,3,0,12,6,4,14,0,3,0,12,8,4,15,0,3,0,12,10,4,13,15,1,0,11,6,4,14,15,1,0,11,10,4,15,8,3,1,8,13],l=0;l<a.length;l+=7)i[a[l]*o+a[l+2]*t+a[l+1]]=2048+this.Va+512*a[l+3],r[this.Va++]={Xa:this.F},a[l+4]?(e[a[l]*o+a[l+6]*t+a[l+5]]=this.F,n=s[a[l]*o+(a[l+6]-1)*t+a[l+5]],f=s[a[l]*o+a[l+6]*t+a[l+5]],this.R[n+f*this.i]=[this.F,a[l+5]+.5,a[l+6]-.5,a[l+5]+.5,a[l+6]+.5],this.R[f+n*this.i]=[this.F,a[l+5]+.5,a[l+6]+.5,a[l+5]+.5,a[l+6]-.5]):(h[a[l]*o+a[l+6]*t+a[l+5]]=this.F,n=s[a[l]*o+a[l+6]*t+a[l+5]-1],f=s[a[l]*o+a[l+6]*t+a[l+5]],this.R[n+f*this.i]=[this.F,a[l+5]-.5,a[l+6]+.5,a[l+5]+.5,a[l+6]+.5],this.R[f+n*this.i]=[this.F,a[l+5]+.5,a[l+6]+.5,a[l+5]-.5,a[l+6]+.5]),++this.F;for(this.Ga=[],a=[1,0,12,12,1,0,13,12,1,0,6,8,1,0,7,8,1,0,14,5,0,0,0,8,1,1,9,15,0,1,10,6,0,1,5,13,0,1,5,14,0,1,7,10,0,1,7,11,1,1,10,14,1,1,11,14,1,1,14,5,1,2,0,4,1,2,0,9,1,2,1,3,0,2,3,3,0,2,10,1,1,2,8,13,1,2,9,13,1,0,14,14,1,0,15,14,1,1,14,10,1,1,15,10,1,2,10,9,1,2,11,9,1,2,12,14,1,2,13,14,1,2,14,14,1,2,15,14,1,1,10,13,1,1,11,13,0,3,3,14,0,3,3,11,1,3,8,9,1,3,9,9,0,3,12,8,1,3,12,10,1,3,13,10,1,3,14,8,1,3,15,8,1,3,14,10,1,3,15,10,0,3,10,1,0,3,10,6,1,3,5,7,1,4,1,7,0,4,7,3,1,4,14,4,1,4,15,4,0,4,4,4,1,4,5,3,0,4,3,14,1,4,13,8,1,4,3,7,1,4,11,8,1,4,11,10,0,4,7,12,0,4,10,12],l=0;l<a.length;l+=4)a[l]?(e[a[l+1]*o+a[l+3]*t+a[l+2]]=this.F,n=s[a[l+1]*o+(a[l+3]-1)*t+a[l+2]],f=s[a[l+1]*o+a[l+3]*t+a[l+2]],this.R[n+f*this.i]=[this.F,a[l+2]+.5,a[l+3]-.5,a[l+2]+.5,a[l+3]+.5],this.R[f+n*this.i]=[this.F,a[l+2]+.5,a[l+3]+.5,a[l+2]+.5,a[l+3]-.5]):(h[a[l+1]*o+a[l+3]*t+a[l+2]]=this.F,n=s[a[l+1]*o+a[l+3]*t+a[l+2]-1],f=s[a[l+1]*o+a[l+3]*t+a[l+2]],this.R[n+f*this.i]=[this.F,a[l+2]-.5,a[l+3]+.5,a[l+2]+.5,a[l+3]+.5],this.R[f+n*this.i]=[this.F,a[l+2]+.5,a[l+3]+.5,a[l+2]-.5,a[l+3]+.5]),this.Ga.push(this.F++);for(this.fa=Array(this.i).fill(0),a=[11,5,12,81,14,12,17,21,22,84,23,91,36,94,38,96,40,31,51,27,52,26,75,47,76,122,77,50,78,112,79,111,101,125,102,130],l=0;l<a.length;l+=2)this.fa[a[l]]=a[l+1]}}</script>