<meta name="monetization" content="$twitter.xrptipbot.com/remvst"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>STICK SKATER</title><style>*{margin:0;width:100%;height:100%;background:#000;position:relative}#t{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}#g{display:block}</style><div id="t"><canvas id="g"></div><script>class gi{constructor(t=0,s=0,i=0){this.F(t,s,i)}aF(){return this.gh=this.gh||l(),this.gh.F(this.x,this.y-.4*this.z)}iq(){return this.gg=this.gg||l(),this.gg.F(this.x+.2*this.z,this.y-.2*this.z)}F(t,s,i){return this.x=t,this.y=s,this.z=i,this}a_(){return l(this.x,this.y,this.z)}}function l(t,s,i){return new gi(t,s,i)}let R,G,cR,eh=window,aE=document,aY=g,C="#fff",cQ="#111";_M=(t,s,i)=>s<t?t:s>i?i:s,U=(t,s,i)=>s>=t&&s<=i,_n=(t,s)=>random()*(s-t)+t,eg=(t,s,i,h)=>sqrt((t-i)**2+(s-h)**2),_Q=(t,s)=>eg(t.x,t.y,s.x,s.y),bs=t=>i$(t,PI),bV=(t,s)=>atan2(s.y-t.y,s.x-t.x),hZ=(t,s)=>round(t/s)*s,cP=t=>t[~~(random()*t.length)],i$=(t,s)=>((t%=2*s)>s&&(t-=2*s),t<-s&&(t+=2*s),t);let x=Math;Object.getOwnPropertyNames(x).forEach((t=>eh[t]=eh[t]||x[t])),aX=2*PI;let aj=CanvasRenderingContext2D.prototype;aj.P=function(t){this.save(),t(),this.restore()},aj.fr=aj.fillRect,aj._m=function(t){this.fillStyle=t},aj.br=function(t){this.strokeStyle=t},aj.a$=function(t,s,i,h,e){this.cN(C,t,s,i,h,e)},aj.cN=function(t,s,i,h,e,a=4){this.P((()=>{this.translate(i,h),this.scale(e,e),this.font="italic 72pt Impact",this._m("#000"),this.fillText(s,0,10),this.lineWidth=a,this._m(t),this.br("#000"),this.fillText(s,0,0),this.strokeText(s,0,0)}))},onresize=()=>{let s,i,h=innerWidth,e=innerHeight,a=h/e,_=1600/aY.height,n=t.style;a<=_?(s=h,i=s/_):(i=e,s=i*_),n.width=s+"px",n.height=i+"px"},hX=t=>t,cK=t=>t*(2-t),gb=t=>sqrt(1-pow(t-1,2)),hW=t=>{let s=7.5625,i=2.75;return t<1/i?s*t*t:t<2/i?s*(t-=1.5/i)*t+.75:t<2.5/i?s*(t-=2.25/i)*t+.9375:s*(t-=2.625/i)*t+.984375},_d=(t,s,i,h,e,a,_,n)=>{let r=0,l={O:c=>{r+=c;let o=_M(0,(r-(a||0))/e,1);t[s]=(_||hX)(o)*(h-i)+i,o>=1&&(ec(eb,l),n&&n())}};l.O(0),eb.push(l)},eb=[],ec=(t,s)=>{let i=t.indexOf(s);i>=0&&t.splice(i,1)},fX=(t,s)=>{let i=performance.now(),h=()=>{let e=performance.now(),a=min((e-i)/1e3,100);i=e,t(a,~~(1/a)),s(h)};h()},fU=t=>(t<10?"0":"")+~~t,hR=t=>fU(~~(t/60))+":"+fU(~~t%60),aD=t=>(t+"").replace(/\B(?=(\d{3})+(?!\d))/g,",");class hQ{constructor({x:t,y:s,z:i,_D:h=1,I:e="#f00",ai:a=[5,5],cI:_=[1,-1],aW:n,fS:r}){this.I=e,this.ai=a,this.l=new gi,_d(this.l,"x",t[0],t[0]+t[1],h,0,n),_d(this.l,"y",s[0],s[0]+s[1],h,0,n),_d(this.l,"z",i[0],i[0]+i[1],h,0,n),_d(this,"cI",_[0],_[0]+_[1],h,0,n),_d(this,"ai",a[0],a[0]+(a[1]||0),h,0,n,r)}_s(){R.globalAlpha*=this.cI,_m(this.I),fr(this.l.aF().x-this.ai/2,this.l.aF().y-this.ai/2,this.ai,this.ai)}}let hP=(t,s,i)=>{let h=aE.createElement("canvas");return h.width=t,h.height=s,i(h.getContext("2d"),h)||h};fR=(t,s,i)=>{let h=hP(t,s,i);return h.getContext("2d").createPattern(h,"repeat")},hM=fR(150,150,(t=>{t.globalAlpha=.1,t._m(C),t.translate(-2,-2),t.fr(75,0,10,10),t.fr(75,150,10,10),t.fr(0,75,10,10),t.fr(150,75,10,10)})),hL=()=>{R.fillStyle=C,R.globalAlpha=.2,beginPath(),moveTo(0,0),lineTo(-50,-50),lineTo(-50,-25),lineTo(-100,-25),lineTo(-100,25),lineTo(-50,25),lineTo(-50,50),fill()},fQ=()=>{beginPath(),moveTo(50,0),lineTo(-50,50),lineTo(-50,-50),fill()};class fP{constructor(){this.H=0,this._l=[],this.e_=[],this.fO="#170e65",this._k=new hK}_C(t){return t instanceof bS&&(this.$=t,this._k.aV=t),t._=this,this._l.push(t),t}cH(t){ec(this._l,t)}O(t){this.H+=t,this._l.forEach((s=>s.O(t*G.e$))),this._k.O(t)}ip(t,s){t.forEach((t=>P((()=>{s(t)&&t.ah()}))))}_s(){this._l.forEach((t=>t.bo())),P((()=>{_m(this.fO),fr(0,0,1600,900),translate(-this._k.x,-this._k.y),_m(hM),fr(this._k.x,this._k.y,32e3,1800);let t=[],s=[];for(let i of this._l)for(let h of i.__)P((()=>h.bn())),h!=this.$.__[0]&&h.hI&&(h.aU(this.$)?s.push(h):t.push(h));t.forEach((t=>P((()=>t.ah())))),this.e_.forEach((t=>P((()=>t._s())))),this.$._L||P((()=>this.$.__[0].ah())),s.forEach((t=>P((()=>t.ah()))))})),(this.$.q._z||this.u.J)&&this.$.N&&P((()=>{R.lineWidth=20,translate(this.$.L.aF().x-this._k.x,this.$.L.aF().y-this._k.y),rotate(-PI/2),br(C),beginPath(),arc(0,0,200,-PI/4,PI/4),stroke(),rotate(this.$._Z*PI/4),translate(200,0),beginPath(),_m("#f00"),moveTo(0,0),lineTo(40,20),lineTo(40,-20),fill()}))}aC(t){let s;t.fS=()=>ec(this.e_,s),this.e_.push(s=new hQ(t))}_$(t){return this._C(new aB(t))}_p(t){let s=new dZ;return s.x=t.x,s.y=t.y,this._C(s)}_g(t,s){let i=new dY;return i.x=t.x,i.y=t.y,i.m=s,this._C(i)}cF(t,s,i,h,e,a=100){let _=[];for(let n=0;n<=i;n++){let r=n/i*(e-h)+h;_.push(l(t.x+cos(r)*s,t.y+sin(r)*s,a))}return this._C(new aB(_))}_Y(t){let s=new fL;return s.x=t.x,s.y=t.y,s.z=t.z,this._C(s)}_X(t,s){t.forEach((t=>{this.cH(t),this._C(t.ag(s))}))}}class hH{constructor(t){this.u=t,this.dX=0,this.fK=0,this.aA=0,this._B=[],this.fJ=-9}O(t){this.dX-=t,this.aA!=this.u._K&&(this.aA=this.u._K,_d(this,"fK",this.fK,this.aA,.5))}fI(t,s,i){if(!t||!t._j.length||i>1)return;let h=_M(0,(i-.5)/.5,1);R.globalAlpha=1-h,translate(0,50*-h),R.textBaseline="bottom",cN(s,aD(t.az)+"  x  "+t._j.length,800,700,.5),R.textBaseline="top",cN(s,t.fF,800,700,.4)}_s(){R.textAlign="center",R.textBaseline="top",P((()=>{R.globalAlpha=1-_M(0,(this.u.H-this.fJ-.5)/1,1),a$(this.dW,800,200,.5)})),this.u.af>=0&&cN(this.u.af>15?C:"#f00",hR(this.u.af),800,50,1);let{$:t}=this.u._;t&&t.q._z&&(P((()=>this.fI(t.aS._O,t.aS._O.Z?"#0f0":"#f00",(this.u._.H-t.aS.hG)/1))),P((()=>this.fI(t.aS.X,C,0)))),this.u instanceof bR&&(R.textBaseline="top",R.textAlign="left",a$("SCORE",50,50,.5),a$(aD(~~this.fK),50,100,1)),this.dX>0&&(P((()=>{R.globalAlpha=.5,_m("#000"),fr(0,900,1600,-200)})),P((()=>{_m(C),beginPath(),arc(300,550,100,0,aX),fill(),R.lineWidth=80,br(C),beginPath(),moveTo(300,550),lineTo(300,900),moveTo(300,650),lineTo(400,850),moveTo(300,650),lineTo(200,850),stroke(),R.textAlign="center",R.textBaseline="middle";let{_B:t}=this,s=800-t.length/4*50;t.forEach(((t,i)=>{a$(t,900,s,.5),s+=50}))})))}fD(t,s=2){this._B=t.splice?t:[t],this.dX=s}ay(t){this.fD(t,999)}dV(t){this.dW=t,this.fJ=this.u.H}}class bl{constructor(){this.x=this.y=this.z=this.m=this.H=0,this.W=l(),this.__=[],this.T=[]}O(t){this.H+=t,this.W.F(this.x,this.y,this.z)}bo(){}K(){let t=l();return this.T.push(t),t}dU(){this.fC(0,0,this.m),this.T.forEach((t=>{t.x+=this.x,t.y+=this.y,t.z+=this.z}))}fC(t,s,i){this.T.forEach((h=>{let e=atan2(h.y-s,h.x-t),a=sqrt(pow(h.x-t,2)+pow(h.y-s,2));h.x=t+a*cos(i+e),h.y=s+a*sin(i+e)}))}}class bS extends bl{constructor(t){super(),this._i=0,this._f=0,this._r=l(),this.q=t,this._i=0,this.cE=0,this.dT=0,this.cD=0,this.cC=0,this.L=this.K(),this.fz=this.K(),this._W=this.K(),this.cB=this.K(),this._V=this.K(),this.dS=this.K(),this.bQ=this.K(),this.ae=this.K(),this.fw=this.K(),this.fv=this.K(),this.cA=this.K(),this.cz=this.K(),this.cw=this.K(),this.cv=this.K(),this.cu=this.K(),this.fu=this.K(),this.ft=this.K(),this.fq=this.K(),this.fp=this.K(),this.aR=0,this.fo=0,this.fn=0,this.N=0,this.ax=0,this._J=0,this.dR=0,this.Z=1,this.dQ=1,this.bP=-100,this._u=0,this.bk=0,this.io=0,this.dP=0,this.fm=0,this.bO=[l(),l()],this.fl=0,this.dO=0,this._e=0,this.dN=0,this._Z=0,this.aS=new hE(this),this.__=[new dM([S(this.fz,this.L,"#fff3",2),aw(this.fu,8,C),aw(this.ft,8,C),aw(this.fq,8,C),aw(this.fp,8,C),new ct([this.cv,this.cu,this.cz,this.cw],"#ccc"),S(this.cv,this.cu,C,4),S(this.cw,this.cz,C,4),S(this.cw,this.cv,C,4),S(this.cz,this.cu,C,4),S(this._W,this.cB,C,16),S(this._V,this.dS,C,16),S(this.bQ,this.cB,C,16),S(this.bQ,this.dS,C,16),S(this.bQ,this.ae,C,16),S(this.ae,this.fw,C,16),S(this.ae,this.fv,C,16),S(this.ae,this.cA,C,16),aw(this.cA,20,C)],this.L)]}get dL(){return this.Z&&!this.N}bo(){let t=.5+.5*this.fo,s=100-60*t;this._W.F(-20,0,0),this._V.F(20,0,0),this.cB.F(-15,20*t,s),this.dS.F(15,20*t,s),this.bQ.F(0,15*-t,2*s),this.ae.F(0,10*t,this.bQ.z+150-10*t),this.fw.F(-40,10*t,this.ae.z+this.bP),this.fv.F(40,10*t,this.ae.z+this.bP),this.cA.F(0,this.ae.y+20*t,this.ae.z+20-10*t),this.T.forEach((t=>{t.y*=this.dQ,this.N&&(t.z+=_n(0,10)*this._f/600)}));let i=sin(this.dP*aX/.5);this._W.y+=30*i*this.bk,this.cB.y+=(20*i+10)*this.bk,this.fC(this._V.x,0,-PI/2*this.dQ*this.bk),this.dU(),this.L.F(this.x,this.y,this.z),this.fj(this._W),this.fj(this._V);let h=_Q(this._W,this._V),e=(this._V.z-this._W.z)/h;this.Z||this.N||(e=PI/4),this._W.z=this._W.z-sin(e)*h/2,this._V.z=this._V.z+sin(e)*h/2;let a=(.5-this._e%1)*(this._e%2>=1?-e:e);this.fh(this.cz,this.cw,this.cv,this.cu,a,50,15,0,this._e*PI),this.fh(this.fu,this.ft,this.fp,this.fq,a,30,10,-20,this._e*PI),this.L.aF(),this.fz.F(this.x,this.y,0)}fh(t,s,i,h,e,a,_,n,r){let l=this.m+r,c=l+PI/2;t.F(this.x-cos(l)*a-cos(c)*_,this.y-sin(l)*a-sin(c)*_,this.z-e*a+n),s.F(this.x-cos(l)*a+cos(c)*_,this.y-sin(l)*a+sin(c)*_,this.z-e*a+n),i.F(this.x+cos(l)*a+cos(c)*_,this.y+sin(l)*a+sin(c)*_,this.z+e*a+n),h.F(this.x+cos(l)*a-cos(c)*_,this.y+sin(l)*a-sin(c)*_,this.z+e*a+n)}fg(){if(this.Z)return;this._e%1>0&&this.dJ(),this.ax=0,this._e=0,this.Z=1,this._Z=0;let t=atan2(this._r.y,this._r.x),s=abs(bs(this.m-t));if(s>PI/2&&(this.dQ*=-1,this.m+=PI,s=abs(bs(this.m-t))),s>PI/3&&this._f>300&&this.dJ(),_d(this,"fo",1,0,.2,.2),_d(this,"fo",0,1,.2),_d(this,"bP",this.bP,-100,.2),this._i<-1)for(let t=0;t<50;t++){let t=random()*aX,s=_n(50,100);this._.aC({ai:[20,-10],I:C,_D:_n(.2,.4),x:[this.x+_n(-20,20),cos(t)*s],y:[this.y+_n(-20,20),sin(t)*s],z:[this.z,0],aW:gb})}this.q._z&&hB()}dJ(){if(this._L)return;this._L=1,this.N=0;let t=new bl;t.__=this.__.map((t=>t.a_())),t.__.forEach((t=>{t.bM(this)})),this._._C(t),this._.cH(this),setTimeout((()=>{this._.cH(t);let s=new bS(this.q);s.x=this.bO[0].x,s.y=this.bO[0].y,s.z=this.bO[0].z,this._._C(s)}),2e3),G.bL("#f00",.3),this.q._z&&hA()}O(t){if(super.O(t),this.dL){let s=this.q.aQ(),i=_M(-t*PI*1.5,bs(s-this.m),t*PI*1.5);this.m+=i,this._r.F(cos(this.m),sin(this.m))}this.x+=t*this._r.x*this._f,this.y+=t*this._r.y*this._f;let s=this._u;if(this.H>this.fm&&(this.Z&&this.q._u()?(this._u=1,this._f=min(600,this._f+300),this.fm=this.H+.5,this.dP=0,s||_d(this,"bk",this.bk,1,.2)):(this._u=0,s&&_d(this,"bk",this.bk,0,.2))),this.q._u()||(this.dN=1),this.dP+=t,this.N||this._u||!this.Z||(this._f-=sign(this._f)*t*(this._f>0?20:600)),this.N){this.hx+=t;let s=random()*aX,i=_n(10,20);this._.aC({ai:[10,-10],I:"#ff0",_D:_n(.4,.8),x:[this.x+_n(-10,10),cos(s)*i],y:[this.y+_n(-10,10),sin(s)*i],z:[this.z,_n(-20,20)]});let h=this.q._c();this._Z+=this._Z*t+h*t,this._Z=_M(-1,this._Z,1),this._f=max(100,this._f)}this.Z&&(this.hx=0),this.dO=!this.Z&&this.q.at()&&!this.N&&this.dN;let i=min(ceil(this._e)-this._e,t/.3);if(this.dO&&(i=t/.4),this._e+=i,this.Z&&this.z>0&&(this.co(this)||this.fd()),this.q.aP()&&(this.cC=this.H,this._i=min(this._i,0)),this.H<this.cC){let s=this.cC-this.cD,i=cK(_M(0,(this.H-this.cD)/s,1)),h=cK(_M(0,(this.H-t-this.cD)/s,1));this.cE,this.dT,this.cE;this._i=(i-h)*(this.dT-this.cE)}else{let s=20*(this.q.aP()?3:1);this._i=min(0,this._i-t*s)}if(this.z=max(0,this.z+this._i),0===this.z&&this.fg(),(this.Z||this.N)&&(this._i=0),!this.Z&&!this.N){let s=this.q._c();this.m+=s*PI*4*t,aO+=_M(4*-t,-aO,4*t)}let h=this.N;if(this.hu(),this.N&&(this.m=this._J+this.dR,this._r.F(cos(this._J),sin(this._J))),this.Z||this.N||h){let t=this.q.ad();this.aR&&!t?this.ht():t&&!this.aR&&(_d(this,"fo",0,1,.2),this.fn=this.H),this.aR=t}if(this.hs()&&this.dJ(),(this.fl-=t)<=0&&0===this.z){this.fl=1;let t=this.bO.shift();t.F(this.x,this.y,this.z),this.bO.push(t)}this.aS.O(t)}co(t){return this._._l.filter((s=>s instanceof dY&&s._N(t)))[0]}fj(t){let s=this.co(t);if(s){let i=s._T(t),h=1-(s.D-i.x)/s.cl;t.z=max(t.z,h*s.ck)}}fd(){this.Z=0,_d(this,"bP",this.bP,40,.2),this.fo=0}hq(){this.N=1,this._e=0,this._Z=this._Z||_n(-.1,.1),_d(this,"fo",0,1,.2),_d(this,"bP",this.bP,-100,.2)}ht(){this.fd(),this.dN=0;let t=min(1,this.H-this.fn);this.co(this)&&(t+=this._f/600),this._i=1,this.N=0,this._u=0,this.cD=this.H,this.cC=this.H+.2+.3*t,this.cE=this.z,this.dT=this.z+150+200*t,_d(this,"bk",this.bk,0,.2),this.q._z&&hp()}hu(){if(!this.q.aP()||this._e%1>0)return void(this.N=0);let t=this.N,s=atan2(this._r.y,this._r.x),i=0;for(let h of this._._l){if(!(h instanceof aB))continue;let e=this._i<0||this.N?h.as(this,80):0;if(h.il=!!e,e){if(!t&&sign(e.bh.z-this.z)==sign(e.bh.z-this.W.z))continue;if(this.ax=h,i=1,t||this.hq(),this.N&&!t){let t=round((this.m-e._J)/(PI/2));this.dR=t*PI/2}this.N&&(this._J=e._J,this._r.x=cos(e._J),this._r.y=sin(e._J),abs(bs(e._J-s))>PI/2&&(this._r.x*=-1,this._r.y*=-1,this._J+=PI),this.q._z&&(_a.x=400*cos(this._J),_a.y=400*sin(this._J)),this.x=e.bh.x,this.y=e.bh.y,this.z=e.bh.z)}}!i&&t&&(this.N=0)}hs(){if(this.N)return abs(this._Z)>=1;let t=_Q(this._W,this._V),s=(this._V.z-this._W.z)/t;if(abs(s)>2)return 1;atan2(this._r.y,this._r.x);for(let t of this._._l){if(t instanceof aB){let s=t.as(this,10);if(s&&U(this.z+10,s.bh.z,this.cA.z))return void(this._f=-300)}if(t instanceof dZ&&t.as(this))return void(this._f=-300)}}}class dY extends bl{constructor(){super(),this.cl=200,this.ck=200,this.D=this.cl/2,this.aN=this.K(),this.aM=this.K(),this.bg=this.K(),this.bf=this.K(),this.bK=this.K(),this.bJ=this.K(),this.__=[S(this.aN,this.aM,C,8),S(this.bg,this.bf,C,8),S(this.bK,this.bJ,C,8),S(this.aN,this.bK,C,8),S(this.aM,this.bJ,C,8),S(this.bK,this.bg,C,8),S(this.bJ,this.bf,C,8),new ct([this.aN,this.bK,this.bJ,this.aM],"#ccc")]}ag(t){let s=t(l(this.x,this.y)),i=t(l(this.x+cos(this.m),this.y+sin(this.m))),h=new dY;return h.x=s.x,h.y=s.y,h.m=bV(s,i),h}O(t){super.O(t),this._._l.forEach((t=>{if(t instanceof bS&&this._N(t)){let s=this._T(t),i=(1-(this.D-s.x)/this.cl)*this.ck;t.z<i&&t._i<=0?(t.z=i,t._i=max(t._i,0),t.fg()):t.Z&&(t.z=i)}}))}_N(t){let s=this._T(t);return U(-this.D,s.x,this.D)&&U(-this.D,s.y,this.D)}get ik(){return this.y-this.D}f$(t){bV(this.dE,t);let s=atan2(t.y-this.dE().y,t.x-this.dE().x)-this.m;return 9999*cos(s)}_T(t){let s=t.x-this.x,i=t.y-this.y;t.z,this.z;return l(s*cos(this.m)+i*sin(this.m),-s*sin(this.m)+i*cos(this.m))}dE(){return l(this.x+25*cos(this.m),this.y+25*sin(this.m))}bo(){let t=this.cl/2;this.aN.F(-t,-t,0),this.aM.F(-t,t,0),this.bg.F(t,-t,0),this.bf.F(t,t,0),this.bK.F(t,-t,this.ck),this.bJ.F(t,t,this.ck),this.dU()}}class aB extends bl{constructor(t){super(),this.T=t,t.forEach(((s,i)=>{let h=t[i+1];h&&this.__.push(S(s,h,C,8)),this.__.push(S(s,l(s.x,s.y,0),C,8))}))}ag(t){return new aB(this.T.map(t))}bo(){let t=this._.$,s=0;if(t&&t.q._z&&!t.N){let i=this.as(t,80);s=i&&i.bh.z<=t.z}this.__.forEach((t=>{t.I=s?"#0f0":C}))}as(t,s){let i=0;for(let h=0;h<this.T.length-1;h++){let e=this.T[h],a=this.T[h+1],_=_Q(e,a),n=(_Q(e,t),this._T(e,a,t)),r=n.x/_;if(U(-s,n.x,_+s)&&U(-s,n.y,s)&&(i={bh:l().F(r*(a.x-e.x)+e.x,r*(a.y-e.y)+e.y,r*(a.z-e.z)+e.z),_J:bV(e,a)},U(0,n.x,_)))break}return i}_T(t,s,i){let h=bV(t,s),e=i.x-t.x,a=i.y-t.y;i.z,t.z;return l(e*cos(h)+a*sin(h),-e*sin(h)+a*cos(h))}}class dZ extends bl{constructor(){super(),this.az=this.K(),this.bI=this.K(),this.__=[new dM([S(this.az,this.bI,"#eee",40),new dC(this.bI,150,PI,0,C),aw(this.bI,100,"#ccc"),new dC(this.bI,150,0,PI,C)],this.az)]}ag(t){let s=t(l(this.x,this.y)),i=new dZ;return i.x=s.x,i.y=s.y,i}bo(){this.az.F(this.x,this.y,0),this.bI.F(this.x,this.y,800)}as(t){return eg(t.x,t.y,this.x,this.y)<50}}class fL extends bl{constructor(){super(),this.D=this.length/2,this.aN=this.K(),this.aM=this.K(),this.bg=this.K(),this.bf=this.K(),this.eX=this.K(),this.eW=this.K(),this.bottom=this.K(),this.eV=this.K(),this.__=[S(this.bottom,this.eV,"#fff3",2),new ct([this.aN,this.aM,this.bf,this.bg],"#000"),aw(this.eX,12,C),aw(this.eW,12,C)]}O(t){if(super.O(t),_Q(this,this._.$)<100&&abs(this.z-(this._.$.z+100))<150){this._.cH(this),this._.$.aS.eU(),hm();for(let t=0;t<50;t++){let t=random()*aX,s=_n(50,100);this._.aC({ai:[20,-10],I:C,_D:_n(.4,.8),x:[this.x+_n(-20,20),cos(t)*s],y:[this.y+_n(-20,20),sin(t)*s],z:[this.z,0],aW:gb})}}}bo(){Date.now(),this.length;this.aM.F(-50,0,70),this.aN.F(-50,0,-70),this.bf.F(50,0,70),this.bg.F(50,0,-70),this.eX.F(-25,0,0),this.eW.F(25,0,0),this.dU(),this.T.forEach((t=>t.z+=50*sin(G.eS*PI))),this.eV.F(this.x,this.y,this.z),this.bottom.F(this.x,this.y,0)}}eR=t=>abs(round(t/PI)),hl=([t,s,i,h])=>{let e=["DOUBLE ","TRIPLE ","QUADRUPLE "][floor(i-.1)-1]||"";return(180*eR(h)||"")+" "+e+t},dA=([t,s,i,h])=>i*~~s*(1+eR(h));class eQ{constructor(){this._j=[]}get fF(){return this._j.slice(-5).map(hl).join("  +  ")}get hj(){return this.fF+" "+this.dz+" x"+this._j.length}bd(t,s=0){this._j.push([t,s,1,0])}hh(t){this._j.length&&(this._j[this._j.length-1][1]+=t)}hg(t){this._j.length&&(this._j[this._j.length-1][2]=t)}he(t){this._j.length&&(this._j[this._j.length-1][3]=t)}get dz(){return this.az*this._j.length}get az(){return this._j.reduce(((t,s)=>t+dA(s)),0)}}class hE{constructor(t){this.$=t,this.W={},this.eP(),this.aL=0,this.X=new eQ,this._O=0,this.eO=0}eP(){let{$:t}=this;this.W.x=t.x,this.W.y=t.y,this.W.m=t.m,this.W._i=t._i,this.W.Z=t.Z,this.W._L=t._L,this.W._e=t._e,this.W.N=t.N,this.W.ax=t.ax,this.W.aL=this.aL}O(t){let{X:s,$:i,W:h}=this,{u:e}=i._;if(i.q._z){if(i._i>0&&(h.Z||h.N)&&(this.$.co(this.$)&&s.bd("OFF THE KICKER",100),s.bd("OLLIE",100)),i.ax&&h.ax&&i.ax!=h.ax&&s.bd("RAIL TO RAIL",400),i.N){if(!h.N){let t=round(i.dR/(PI/2))%2;s.bd(t?"SLIDE":"GRIND",500)}s.hh(.5*_Q(i,h))}if(i.Z||i.N?this.aL=0:(this.aL+=h.m-i.m,s.he(this.aL)),i._e>0&&(0==h._e&&s.bd("FLIPPITY",500),ceil(h._e)<ceil(i._e)&&i.q._z&&hc(),s.hg(ceil(i._e))),(i.Z||i._L)&&s._j.length){if(!i._L){if(!this.eO){let t=e instanceof dw?e._K:0;e._K=t+s.dz}if(abs(h.aL)>PI/2){let t,i=abs(bs(h.aL)/PI);i>.5&&(i=1-i),i<.1?(t="PERFECT LANDING! +2000",s.bd(t,2e3)):i>.2&&(t="SKETCHY LANDING!"),t&&G.u._o.dV(t)}e instanceof bR&&this.eU()}s._L=i._L,s.Z=!i._L,this._O=s,this.hG=i._.H,e instanceof bR&&(eN(1,e._K),eN(2,s.dz)),this.X=new eQ}this.eP()}}eU(){let t=du.filter((t=>t.hb(this.$,this.X))).map((t=>t._y)).join(", ");t&&G.u._o.fD("Challenge completed: "+t,4)}}class bE{constructor(t){this._y=t}hb(t,s){if(!this.eM()&&this.bD(t,s))return localStorage[this._y]=1,1}eM(){return!!localStorage[this._y]}}class bc extends bE{bD(t,s){return s.hj.indexOf(this._y)>=0}}class dt extends bE{constructor(t){super(aD(t)+"PT COMBO"),this.cg=t}bD(t,s){return s.dz>=this.cg}}class ds extends bE{constructor(t){super(t+"X COMBO"),this.cf=t}bD(t,s){return s._j.length>=this.cf}}class dr extends bE{constructor(t){super(aD(t)+"PT SCORE"),this.aA=t}bD(t){return t._.u._K>=this.aA}}class ha extends bE{constructor(){super(),this._y="ALL 5 TAPES"}bD(t){for(let s of t._._l)if(s instanceof fL)return;return 1}}du=[new dr(1e5),new dr(5e5),new dr(1e6),new dt(5e4),new dt(25e4),new dt(5e4),new ds(10),new ds(20),new ds(30),new bc("RAIL TO RAIL"),new bc("540"),new bc("DOUBLE FLIPPITY"),new bc("360 TRIPLE FLIPPITY"),new bc("QUADRUPLE FLIPPITY"),new bc("720 DOUBLE FLIPPITY"),new ha];class bC{constructor(){this.hI=1}dq(t,s){let i=_n(-1,1)*PI/32+atan2(t[0].y-s.y,t[0].x-s.x),h=100+100*random();t.forEach((t=>{_d(t,"x",t.x,t.x+cos(i)*h,.5,0,cK),_d(t,"y",t.y,t.y+sin(i)*h,.5,0,cK),_d(t,"z",t.z,0,.5,0,hW)}))}aU(t){}}class ct extends bC{constructor(t,s="#00f"){super(),this.T=t,this.I=s,this.h_=this.T.map(((s,i)=>S(s,t[(i+1)%t.length])))}eL(t,s){_m(t),beginPath(),this.T.forEach((t=>lineTo(t[s]().x,t[s]().y))),fill()}ah(){this.eL(this.I,"aF")}bn(){this.eL(cQ,"iq")}a_(){return new ct(this.T.map((t=>t.a_())),this.I)}bM(t){this.dq(this.T,t)}aU(t){for(let s of this.h_)if(!s.aU(t))return 0;return 1}}class h$ extends bC{constructor(t,s,i="#f00",h=2){super(),this.p1=t,this.p2=s,this.I=i,this.bB=h}eK(t,s){let i=this.p1[s](),h=this.p2[s](),{_k:e}=G.u._,a=_Q(this.p1,this.p2)+this.bB;(e._N(i,a)||e._N(h,a))&&(R.lineWidth=this.bB,br(t),beginPath(),moveTo(i.x,i.y),lineTo(h.x,h.y),stroke())}ah(){this.eK(this.I,"aF")}bn(){this.eK(cQ,"iq")}a_(){return S(this.p1.a_(),this.p2.a_(),this.I,this.bB)}bM(t){this.dq([this.p1,this.p2],t)}aU(t){if(this.p1.x==this.p2.x)return t.y<min(this.p1.y,this.p2.y);let s=l(),i=(t.x-this.p1.x)/(this.p2.x-this.p1.x);return s.x=t.x,s.y=this.p1.y+i*(this.p2.y-this.p1.y),s.y>t.y?1:void 0}}S=(...t)=>new h$(...t);class eJ extends bC{constructor(t,s,i="#f00"){super(),this.L=t,this.D=s,this.I=i}eI(t,s){let i=this.L[s](),{_k:h}=G.u._;h._N(i,this.D)&&(_m(t),beginPath(),arc(i.x,i.y,this.D,0,aX),fill())}ah(){this.eI(this.I,"aF")}bn(){this.eI(cQ,"iq")}a_(){return new eJ(this.L,this.D,this.I)}bM(t){this.dq([this.L],t)}aU(t){return this.L.y>t.y}}aw=(...t)=>new eJ(...t);class dM extends bC{constructor(t,s){super(),this.__=t,this.ce=s}ah(){this.__.forEach((t=>P((()=>t.ah()))))}bn(){this.__.forEach((t=>P((()=>t.bn()))))}a_(){return new dM(this.__.map((t=>t.a_())),this.ce)}bM(t){this.__.forEach((s=>s.bM(t)))}aU(t){return this.ce.y>t.y}}class dC extends bC{constructor(t,s,i,h,e="#f00"){super(),this.L=t,this.D=s,this.aT=i,this.bm=h,this.I=e}eH(t,s){let i=this.L[s](),{_k:h}=G.u._;h._N(i,this.D+80)&&(br(t),R.lineWidth=80,translate(i.x,i.y),rotate(PI/10),scale(1,.3),beginPath(),arc(0,0,150,this.aT,this.bm),stroke())}ah(){this.eH(this.I,"aF")}bn(){this.eH(cQ,"iq")}a_(){return new dC(this.L,this.D,this.aT,this.bm,this.I)}aU(t){return this.L.y>t.y}}class _S{constructor(){this._o=new hH(this),this._K=-9e10,this.af=-1,this.cc=-1,this.cb=0,this.ar=1,this.dm=0,this.aK=5}aq(t){return 0}eG(){this.aJ&&G.ap(this.aJ)}gZ(){this.H=0,this.ao(),this._h()}_F(t){t.u=this}ao(){this._=new fP,this._._C(new bS(new gY)),this._F(this._)}_h(){this.J=new fP,this.J.u=this,this.J.fO="#000",this.J._C(new bS(new bA)),this._F(this.J)}ca(){return cP(["Nice!","Perfect!","Sick!"])}dl(){return 2}O(t){this.H+=t,this._.O(t),this.J&&(this.J.O(t),this.J.H>this.aK&&this._h()),this._o.O(t);let{$:s}=this._;if(!s)return;s&&s.q._z&&(_x.x=800,_x.y=450),gX(s&&s.q._z&&s.N),!s||s._L?this.bz=0:(this.bz=this.bz||this.aq(s),this.cc<0&&s.Z&&this.bz&&!this.dv&&(this.cb++,this.bz=0,this.ar>1&&this._o.dV(this.cb+"/"+this.ar),this.cb>=this.ar&&(this.cc=this.H+this.dl(),this._o.ay(this.ca())))),this.cc>0&&this.H>this.cc&&this.eG();let i=floor(this.af);U(0,this.af,15)&&i!=this.dm&&(this.dm=i,gW()),this.dm=i}_s(){this._._s(),P((()=>{this.J&&(translate(1070,50),_m(C),fr(-2,-2,484,274),scale(.3,.3),beginPath(),rect(0,0,1600,900),clip(),this.J._s(),this.H%1>.5&&(R.textAlign="center",R.textBaseline="middle",a$("DEMO",800,80,1)))}));let{$:t}=this._;t&&!G._w&&P((()=>{t.Z&&t.q._z&&(translate(800+_a.x,450+_a.y),rotate(atan2(_a.y,_a.x)),hL())})),G._w||this._o._s()}}class gV extends _S{constructor(){super(),this._o.ay(["Welcome to STICK SKATER!"]),this.aJ=new gU}ao(){super.ao(),this._.$.q=new bA}ca(){return"Let's go through the basics"}dl(){return 4}_h(){this.J=0}aq(t){return t.H>3}}class gU extends _S{constructor(){super(),this._o.ay(["Let's start by gaining some speed.","Hold SPACE to push."]),this.aK=4,this.aJ=new gT}_h(){super._h(),this.J.$.q._u=()=>this.J.H>1&&this.J.H<3}aq(t){return t._f>300}}class gT extends _S{constructor(){super(),this._o.ay(["Once you've gained some speed,","move around using your mouse."])}_h(){super._h(),this.J.$.q._u=()=>this.J.H>1&&this.J.H<2,this.J.$.q.aQ=()=>U(3,this.J.H,4)?PI/4:U(5,this.J.H,6)?-PI/4:0,this.aK=8,this.aJ=new gS}aq(t){return t._f>200&&abs(t.m)>PI/2}}class gS extends _S{constructor(){super(),this._o.ay(["Click and release to jump"]),this.ar=3}ca(){return"Nice! Hold your click to jump higher."}dl(){return 6}_h(){super._h();let{$:t}=this.J;t.q._u=()=>U(.5,this.J.H,2),t.q.ad=()=>U(3,this.J.H,4),this.aK=6,this.aJ=new gR}aq(t){return t.z>0}}class gR extends _S{constructor(){super(),this.aK=6,this._o.ay(["While jumping, press SPACE to perform a trick"]),this.aJ=new gQ,this.ar=3}_h(){super._h();let{$:t}=this.J;t.q._u=()=>U(.5,this.J.H,2),t.q.ad=()=>U(3,this.J.H,4),t.q.at=()=>!t._e}aq(t){return t.dO}}class gQ extends _S{constructor(){super(),this._o.ay(["Once in the air, move the mouse","left and right for rotation."]),this.aJ=new gP,this.aK=6,this.ar=3}_h(){super._h();let{$:t}=this.J;t.q._u=()=>U(.5,this.J.H,2),t.q.ad=()=>U(3,this.J.H,4),t.q._c=()=>sign(PI-t.m)/2}aq(t){let s=atan2(t._r.y,t._r.x);return abs(bs(s-t.m))>PI/2}}bx=1500,eF=2500;class gP extends _S{constructor(){super(),this._o.ay(["While jumping, HOLD CLICK to grind,","then move your mouse for balance."]),this.ar=3}ca(){return"Nice! You are ready to use the skatepark!"}_F(t){super._F(t);for(let s=0;s<=6e3;s+=2e3)t._C(new aB([l(bx+s,0,100),l(eF+s,0,100)]))}eG(){localStorage.tut=1,G.dj()}_h(){super._h();let{$:t}=this.J;t.q._u=()=>t.x<bx-600,t.q.ad=()=>U(bx-500,t.x,bx-300),t.q.aP=()=>U(bx,t.x,eF),this.aK=6}O(t){let s=this._._l.find((t=>t instanceof aB));!this.bz&&this.cb<this.ar&&s.__[0].I!=C&&!this._.$.q.aP()?this._o.dV("HOLD CLICK TO GRIND"):(super.O(t),this.J.$._Z=.5*sin(this.H*PI))}aq(t){return t.N}}class bR extends _S{constructor(){super(),this._K=0}_F(t){super._F(t);let s=1e3,i=3e3,h=(t,s=0,i=0)=>h=>l(h.x+t,h.y+s,h.z+i),e=(t,s=1,i=1)=>h=>l(h.x*t,h.y*s,h.z*i),a=t=>s=>{let i=_Q(s,l()),h=atan2(s.y,s.x);return l(cos(h+t)*i,sin(h+t)*i,s.z)},_=(...t)=>s=>{let i=s;return t.forEach((t=>i=t(i))),i};[t=>t,t=>l(t.y,t.x,t.z)].forEach((h=>{let e=t._p(l(-i,-i)),a=[e,t.cF(e,450,15,0,3*-PI/2)];for(let h=-2e3;h<=2e3;h+=s){let s=t._p(l(h,-i)),e=t.cF(s,450,10,0,-PI);a.push(s),a.push(e)}t._X(a,h),t._p(l(e.x,-e.y)),t.cF(l(e.x,-e.y),450,15,0,3*PI/2)})),[h(800,-100)].forEach((s=>{t._X([t._g(l(-300,0),0),t._g(l(300,0),PI)],s)})),[h(1800,-2e3)].forEach((s=>{t._X([t._g(l(-600,0),0),t._g(l(600,0),PI),t._$([l(-400,0,500),l(400,0,500)])],s)})),[h(1500,-2450),_(e(-1,1,1),h(2e3,-2450))].forEach((s=>{t._X([t._$([l(-200,0,400),l(200,0,400)]),t._$([l(-800,0,200),l(-400,0,200)])],s)})),[h(300,1050),_(e(1,-1,1),h(100,-2400)),_(h(-1400,-300),e(1,1,4)),_(h(-2200,-1500))].forEach((s=>{t._X([t._$([l(-400,-50,100),l(-100,-50,100),l(100,50,100),l(400,50,100)])],s)})),t._g(l(-700,-250),PI),[_(a(PI),h(-1e3,-800)),_(h(-1600,-800))].forEach((s=>{t._X([t._$([l(-400,0,100),l(-100,0,100),l(100,0,300)])],s)})),t._g(l(-200,-800),0),[h(-400,-1800),h(-1200,-1600),h(400,-2e3)].forEach((s=>{t._X([t._$([l(-300,50,100),l(-100,-50,100),l(100,50,100),l(300,-50,100)])],s)})),[_(a(-PI/4),h(-2200,-300))].forEach((s=>{t._X([t._$([l(-400,-50,100),l(-100,-50,100),l(100,50,100)])],s)})),[h(-1500,-2400)].forEach((s=>{t._X([t._$([l(-200,50,200),l(200,50,200)]),t._$([l(-500,50,200),l(-900,50,200)]),t._$([l(500,50,200),l(900,50,200)])],s)})),t._X([t.cF(l(),400,10,PI/2,3*PI/2,400),t._g(l(300,400),PI),t._g(l(300,-400),PI)],h(800,-800)),t._l.forEach((s=>{s.ag&&t._C(s.ag((t=>l(-t.x,-t.y,t.z))))})),t._Y(l(-1300,-800,600)),t._Y(l(1800,-2e3,700)),t._Y(l(1750,-2450,700)),t._Y(l(1400,300,600)),t._Y(l(400,-800,600))}_h(){this.J=0}}class dw extends bR{_F(t){super._F(t),this.af=120,this.dh=0}O(t){super.O(t),this.af=max(0,this.af-t),this.af<=0&&this._.$.Z&&!this.dh&&(this.dh=1,this._.$._f=0,this._.$.aS.eO=1,this._.$.q=new bA,G.bL(C,1),setTimeout((()=>G.an(new gN(this._K))),2e3))}}class eD extends _S{_F(t){super._F(t),this._$=new aB([l(-200,-80,200),l(200,80,200)]),t._C(this._$),t._k.aV=0,t._k.L.y=-100}ao(){super.ao();let{$:t}=this._;t.q=new bA,t.x=-1e3,t.y=-400;let s=bV(t,this._$.T[0]);t.m=s,t._f=500,t.__=[t.__[0]],t.q.aQ=()=>s,t.q.ad=()=>U(-600,t.x,-350)||t.N,t.q.aP=()=>U(-200,t.x,100),t.q.at=()=>U(-350,t.x,-300),t.q._c=()=>t.x>100&&t.m<s+PI?.5:0}_h(){this.J=0}O(t){super.O(t),(this._.$._L||this._.$.x>1200)&&G.dj()}}class gM extends _S{_F(t){super._F(t),t._k.aV=0}ao(){super.ao();let{$:t}=this._;t.q=new bA,t.x=-900*cP([-1,1]),t.y=450*_n(-.8,.8)*cP([-1,1]);let s=800*_n(-.3,.3);t.m=atan2(-t.y,-t.x),t._f=500,t.q.aQ=()=>t.m,t.q.ad=()=>U(s,t.x,s+200),random()<.5&&(t.q.at=()=>t._i>0);let i=t.m+cP([0,-1,1,2,-2])*PI;t.q._c=()=>sign(i-t.m)}_h(){this.J=0}O(t){(this._.$._L||abs(this._.$.x)>900)&&this.ao(),super.O(t)}}class _E{constructor(t,s){this.x=400,this.y=0,this._y=t.call?t:()=>t,this.dg=s,this.c_=1}_s(){translate(this.x+400,this.y+40),this._N(_x)&&scale(1.1,1.1),translate(-400,-40),this.c_||(R.globalAlpha*=.5),P((()=>{R.globalAlpha*=this._N(_x)?1:.5,_m("#000"),fr(0,0,800,80)})),R.textAlign="center",R.textBaseline="middle",a$(this._y(),400,40,.5)}_N(t){return this.c_&&U(this.x,t.x,this.x+800)&&U(this.y,t.y,this.y+80)}}df=()=>new _E("MAIN MENU",(()=>G.dj())),eB=()=>new _E((()=>"GAME SPEED: "+round(100*G.e$)+"%"),(()=>G.e$=hZ(.6+(G.e$-.6+.9)%.5,.1))),de=()=>new _E((()=>"CHALLENGES"),(()=>G.gK()));class bw{constructor(t,s){this.H=0,this.dd=t,this.am=s,this.am.forEach(((t,s)=>{t.y=400+90*s}))}O(t){this.H+=t}get eT(){return _M(0,this.H/.3,1)}_s(){R.globalAlpha=this.eT,R.textAlign="center",R.textBaseline="middle",a$(this.dd,800,225,2),this.am.forEach((t=>P((()=>t._s()))))}}class gJ extends bw{constructor(){super(aE.title,[new _E("TUTORIAL",(()=>G.ap(new gV))),new _E("NEW SESSION",(()=>G.an(new gI))),de(640),eB(760)]),this.am[1].c_=localStorage.tut}}class gH extends bw{constructor(t){let s=G._w;super("CHALLENGES: "+du.filter((t=>t.eM())).length+"/"+du.length,[new _E("BACK",(()=>{G.bL(),G.an(s)}))]),this.am[0].y=700}_s(){super._s(),du.forEach(((t,s)=>{let i=s%4,h=floor(s/4);P((()=>{translate(1600*(h+1)/5-150,60*i+400),R.globalAlpha*=t.eM()?1:.5,_m("#000"),fr(0,0,300,50),R.textAlign="center",R.textBaseline="middle",a$(t._y,150,25,.25)}))}))}}class gN extends bw{constructor(t){super("SCORE: "+aD(t),[new _E("TRY AGAIN",(()=>G.ap(new dw))),new _E("SHARE",(()=>gD(["I scored ",aD(t),"pts on STICK SKATER by @remvst"].join("")))),de(),df()])}}class gC extends bw{constructor(){super("GAME PAUSED",[new _E("RESUME",(()=>G.an(0))),new _E("RESTART",(()=>G.ap(new G.u.__proto__.constructor))),de(520),eB(640),df(760)])}}class gI extends bw{constructor(){super("SELECT MODE",[new _E("SINGLE SESSION",(()=>G.ap(new dw))),new _E("FREE SKATE (COIL ONLY)",(()=>G.ap(new bR))),df(640)]),this.am[1].c_="started"==(aE.monetization||{}).state}}let bv=(...t)=>gB(gA(...t)),gz=.3,_v=44100,dc=new(window.AudioContext||webkitAudioContext),gB=(...t)=>{let s=dc.createBuffer(t.length,t[0].length,_v),i=dc.createBufferSource();return t.map(((t,i)=>s.getChannelData(i).set(t))),i.buffer=s,i.connect(dc.destination),i},gA=(t=1,s=.05,i=220,h=0,e=0,a=.1,_=0,n=1,r=0,l=0,c=0,o=0,u=0,f=0,b=0,d=0,x=0,g=1,y=0,p=0)=>{let m,w,P=2*PI,I=r*=500*P/_v/_v,E=i*=(1+2*s*random()-s)*P/_v,z=[],C=0,S=0,L=0,R=1,O=0,T=0,F=0;for(l*=500*P/_v**3,b*=P/_v,c*=P/_v,o*=_v,u=u*_v|0,w=(h=h*_v+9)+(y*=_v)+(e*=_v)+(a*=_v)+(x*=_v)|0;L<w;z[L++]=F)++T%(100*d|0)||(F=_?_>1?_>2?_>3?sin((C%P)**3):max(min(tan(C),1),-1):1-(2*C/P%2+2)%2:1-4*abs(round(C/P)-C/P):sin(C),F=(u?1-p+p*sin(P*L/u):1)*(F>0?1:-1)*abs(F)**n*t*gz*(L<h?L/h:L<h+y?1-(L-h)/y*(1-g):L<h+y+e?g:L<w-x?(w-L-x)/a*g:0),F=x?F/2+(x>L?0:(L<w-x?1:(w-L)/x)*z[L-x|0]/2):F),m=(i+=r+=l)*cos(b*S++),C+=m-m*f*(1-1e9*(sin(L)+1)%2),R&&++R>o&&(i+=c,E+=c,R=0),!u||++O%u||(i=E,r=I,R=R||1);return z};class ak{constructor(t,s){this.bv=bv(...t),this.bv.loop=s,this.bv.start()}gr(){this.bv.stop()}}hp=()=>new ak([1.01,,254,.03,.07,.13,1,1.89,-6.1,-3.6,,,,.2,,,,.53,.03]),hA=()=>new ak([1.58,,303,,.01,.24,,.63,,1.1,,,,.1,15,.1,.02,.75,.01,.09]),gW=()=>new ak([1.13,,259,,.06,.21,2,1.68,,,,,,.4,,,,.67,.01]),hB=()=>new ak([.3,,373,,,.2,4,2.56,,,,,,.9,,.3,,.83]),gq=()=>new ak([1.82,,252,,,.12,3,2.15,,,,,,.3,206,.3,.03,.96,.01]),hc=()=>new ak([,,800,.01,.01,.08,1,.68,7.2,.1,,.01,,,,,,.97,.01]),hm=()=>new ak([,,892,,.02,.24,,.34,,,,,,,,,,.71,.06,.19]),bt=0,gX=t=>{t?bt||(bt=new ak([.1,.25,295,,3,0,4,2.5,.1,.1,200,.01,,.4,-5,.2,,1.2,,.02],1)):bt&&(bt.gr(),bt=0)},gp=t=>{if(!t||!speechSynthesis)return;let s=speechSynthesis.getVoices(),i=s.filter((t=>"en-US"==t.lang)).concat(s.filter((t=>t.lang.indexOf(!1))))[0],h=new SpeechSynthesisUtterance(t);h.rate=1.1,h.pitch=1.3,i&&(h.voice=i),speechSynthesis.cancel(),speechSynthesis.speak(h)},ba={},onkeydown=t=>{ba[t.keyCode]=1},onkeyup=t=>{ba[t.keyCode]=0},onblur=oncontextmenu=()=>ba={},bY=[],aG=[],ontouchstart=ontouchmove=ontouchend=ontouchcancel=t=>{t.preventDefault(),bY=Array.from(t.touches),aG=bY.map((t=>er(t,{}))),bY.length&&(_x.x=aG[0].x,_x.y=aG[0].y)},ontouchend=t=>{t.preventDefault(),bY.length&&onclick(),ontouchmove(t)},b_=()=>{let t=gn(0);return abs(t)>0?t:aG.filter((t=>U(0,t.x,400))).length?-1:aG.filter((t=>U(400,t.x,800))).length?1:0},ep=()=>aG.filter((t=>U(800,t.x,1200))).length,eo=()=>aG.filter((t=>U(1200,t.x,1600))).length,en=()=>(navigator.getGamepads?Array.from(navigator.getGamepads()):[]).filter((t=>!!t)),cW=t=>{let s=en();for(let i=0;i<s.length;i++)try{if(s[i].buttons[t].pressed)return 1}catch(t){}},gn=t=>{let s=en();for(let i=0;i<s.length;i++)try{let h=s[i].axes[t];return abs(h)<.1?0:s[i].axes[t]}catch(t){}return 0},_x=l(),bX=l(),cV=0,_a=l(),aO=0,er=(t,s)=>{let i=aY.getBoundingClientRect(),h=900+200*cR;return aE.pointerLockElement?(s.x+=1600*t.movementX/i.width,s.y+=h*t.movementY/i.height):(s.x=1600*(t.pageX-i.left)/i.width,s.y=h*(t.pageY-i.top)/i.height),s.x=_M(0,s.x,1600),s.y=_M(0,s.y,900),s},onmousemove=t=>{if(cR)return;bX.x=_x.x,bX.y=_x.y,er(t,_x);let s=_x.x-bX.x,i=_x.y-bX.y,h=G&&G.u._.$;if(h&&h.dL){_a.x+=s,_a.y+=i;let t=atan2(_a.y,_a.x),h=min(400,eg(0,0,_a.x,_a.y));_a.x=cos(t)*h,_a.y=sin(t)*h,aO=0}else aO=_M(-1,aO+s/200,1)},onmousedown=()=>{cV=1,aE.body.requestPointerLock()},onmouseup=()=>cV=0,onclick=()=>{G._w&&G._w.am.forEach((t=>{t._N(_x)&&(gq(),t.dg())}))};class gY{get _z(){return 1}ad(){return cV||eo()||cW(0)}aP(){return this.ad()}at(){return cW(1)||cW(2)?1:ba[32]||ep()}_u(){return this.at()}aQ(){return atan2(_a.y,_a.x)}_c(){return b_()&&(aO=.5*b_()),aO}}class bA{ad(){return 0}aP(){return 0}at(){return 0}_u(){return 0}aQ(){return 0}_c(){return 0}}class hK{constructor(){this.aV=0,this.L=l()}get x(){return~~this.L.aF().x-800}get y(){return~~this.L.aF().y-450}O(t){this.aV&&this.L.F(this.aV.x,this.aV.y,this.aV.z)}_N(t,s){if(G.u.J)return 1;let i=this.L.aF();return abs(i.x-t.x)<800+s&&abs(i.y-t.y)<450+s}}class gl{constructor(){G=this,G.eS=0,G.e$=1,this.ek=0,this.ap(new eD),this.bL("#000",1),aE.onpointerlockchange=()=>{aE.pointerLockElement||G._w||G.u.dh||G.an(new gC)}}an(t){G._w=t,G.bL()}dj(){G.ap(new gM),G.an(new gJ)}gK(){G.an(new gH)}ap(t){this.an(0),this.u=t,t.gZ()}O(t){if(b_()&&this.u._.$.dL){let s=atan2(_a.y,_a.x);s+=t*b_()*PI,_a.x=400*cos(s),_a.y=400*sin(s)}G.eS+=t,G._w&&G._w.O(t),G._w&&G.u._.$.q._z||G.u.O(t),eb.forEach((s=>s.O(t))),G.u._o._B!=this.ek&&gp(G.u._o._B.join(" ")),this.ek=G.u._o._B}_s(){P((()=>this.u._s())),this._w&&P((()=>this._w._s())),P((()=>{!aE.pointerLockElement||this.u._.$&&this.u._.$.q._z&&!G._w||(_m(C),br("#000"),R.lineWidth=2,translate(_x.x,_x.y),rotate(PI/3),beginPath(),moveTo(0,0),lineTo(40,15),lineTo(30,0),lineTo(40,-15),closePath(),fill(),stroke())})),this.gk<1&&P((()=>{R.globalAlpha=1-this.gk,_m(this.gj),fr(0,0,1600,900)})),_m("#000"),fr(0,900,1600,200),_m(C),P((()=>{R.globalAlpha=.5+.5*(b_()<0),translate(200,1e3),scale(-1,1),fQ()})),P((()=>{R.globalAlpha=.5+.5*(b_()>0),translate(600,1e3),fQ()})),P((()=>{R.globalAlpha=.5+.5*ep(),fr(950,950,100,100)})),P((()=>{R.globalAlpha=.5+.5*eo(),beginPath(),arc(1400,1e3,50,0,aX),fill()})),G.u.J||G.u instanceof eD||(R.textBaseline="top",R.textAlign="right",a$("HIGHSCORE: "+aD(cT(1)),1580,20,.3,6),a$("BEST COMBO: "+aD(cT(2)),1580,50,.3,6))}bL(t,s=.3){this.gj=t||fR(1600,900,(t=>{t.drawImage(aY,0,0)})),_d(this,"gk",0,1,s)}}cT=t=>parseInt(localStorage[t])||0,eN=(t,s)=>{cT(t)<s&&(localStorage[t]=s)},gD=t=>{open("//twitter.com/intent/tweet?hashtags=js13k&url="+location+"&text="+encodeURIComponent(t))},onload=()=>{aY.width=1600,aY.height=900,cR=!!navigator.userAgent.match(/andro|ipho|ipa|ipo/i),cR&&(aY.height+=200),onresize(),R=aY.getContext("2d"),R.lineCap=R.lineJoin="round",Object.getOwnPropertyNames(aj).forEach((t=>{R[t].call&&(eh[t]=aj[t].bind(R))})),new gl;let t=0;fX(((s,i)=>{G.O(s),t=1}),(t=>setTimeout(t,5))),fX(((s,i)=>{t&&P((()=>G._s()))}),(t=>requestAnimationFrame(t)))};</script>