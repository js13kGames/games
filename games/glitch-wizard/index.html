<!doctype html><meta name=viewport content="width=device-width"><title></title><style>article,aside,canvas,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;font:inherit;vertical-align:baseline}.stage,canvas{margin:0 auto;width:800px}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:'';content:none}table{border-collapse:collapse;border-spacing:0}*{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.stage{position:relative}canvas{border:1px solid #000;position:absolute}.bg{width:800px;height:600px;background-color:#7cc9ef}img{display:none}</style><div class=stage><canvas class=bg width=800 height=800></canvas><canvas class=camera width=800 height=600></canvas><canvas class=hud width=800 height=600></canvas></div><img class=heart src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAApElEQVQ4T6WTMQ6AIBAElxfZ6l9s7H2OvRY8htbO32AOuciROzDRhsTbHRZWHX4+7qcfNSAWwE+zUhQVN8/TLGT69KxpJgT04tw2DOv6KgCU4BoiAMkcAoL3GBuXcwBYcgqZYJ67ZvKZAIrX2plD2Qk+dEqbXMoRyCpa0Fi1uWyB9SZEM2sANYlltgAC0jK3AAmy54Nx59q99H4m/ghNXQ/QLfYGZT84EUBGgjoAAAAASUVORK5CYII=" alt=""> <img class=bomb src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAnElEQVQ4T62T7w0AEQzFmcYAEuNYwDwWIDGMxACmcSFXcf5cXZzPfb++6islh4/u6JVSSWs9rUUBb+Lc/BWAiTFA6sb7NEIRc84LI4QArAEyoyYQMsaqiRgjgB6aJaAVSymJMYY454axe8DQXQhRXVhrBxcoIKszxHtPZmNsAcDCDiDX/vOJs4jf60S3UFyc5KBtDmlcRh49JuxaL7LdRxFETUynAAAAAElFTkSuQmCC alt=""> <img class=arrow src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVMaXEAAAApFQBaLQCQAAAzMzM2BATMzMxS+hqqAAAAAXRSTlMAQObYZgAAAD1JREFUeAFjGJ6AEQhQBAThAoIQBS4hYSICYH65EgiouaS6JoJlyo3hwJABWYUrRAXCjJSwkBABDFuGFQAABVEKy99jA94AAAAASUVORK5CYII=" alt=""> <img class=wizard1 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAsCAMAAAAzZkq9AAAATlBMVEUAAAAAAAA8ZBwcPRdHZo9pkSsQODh4YR/M6/8sWGzDnzjUjFKCrdQ4Nibrs4U4i5d1Pi3rzzgfMGn/2a1kt7//6IVrFxfT09NSLiGUlJSLNx2kAAAAAXRSTlMAQObYZgAAAZNJREFUeAGVkoWC3UAMAyvbyxs+/P8frZzDQK+tHr+ZJSW//ivxK3cYsZCUMk2l8Nsd91CZHqYylYsBx5MPj+XBP+N1gokhozGVG8G3QLQznwdHniqpb2GeW2v+dhKGVKsbcxvHjRlrOi9BhVmYx8fHpabhJHD2YUifGWZchT1cwtMuwhsusQHwPeCu6LmVuL0CPgOuTVLYYtuen57uhX0DPwqIPofnugcPdmE8CadFwCL/xAdvB/CrwB3c8er1qmLPMNzwZamDqWrSBLsKqXICdBOtWq1fhOgBtHcrxTIuN/x+uypUteecRc8COZ+qwiQkEZw5MalKCFJRQzgLXJ9Q8C4sC04czl0QqQsA8qsgQRUpAWb9KOw8eUWVlKfopjhNoArvkhbT7XiKtx0qeJF8I0E0SzgK8AIoNA0ezXx9GV4xuSgA2QXpdicwTr3onoN8FwD94mY9HwVErKofgvHT+ffrCaxuON8j1iUfqqJh64chYrkf+a6YraswZtmbxFFgOIn1nj2GK2YAvHiAK/9SrvQ3uTYW9yTfemcAAAAASUVORK5CYII=" alt=""> <img class=wizard2 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAsCAMAAAAzZkq9AAAATlBMVEUAAAAAAAAcPRd4YR8QODgsWGw8ZBxHZo/UjFI4NiaCrdTDnzg4i5dpkSvM6/91Pi3rzzj/2a3rs4Vkt7//6IUfMGlrFxdSLiHT09OUlJQ4EZXSAAAAAXRSTlMAQObYZgAAAZJJREFUeF6VkYlu20AQQ8OZvXX5Str+/4+WhJBGq1UKhAZsAe95Lr39KOErVxghksQ4zzHy6YorVObnHOc4GBCe9fcQn/oNY4GZeQqxwIWwj0BOpjrouU+kGmHbSin6OgnVp0nGVh6PO/OY/NyCCnNjXq/XbfJ6Eli9Vv+XumEQ9rCFUgZhxzEUAJoBV4feSgz3P4AqYLikhHso998fH9dCYMp/BQTVUMYZFEDC41uhMgE85Ddcd/QK6C1ogjpwnpiGGRRUr0MBChXZzM1h2XuD41X3CmvZJn4yasWRx8AAZjRizLkBOBUIMRpMxrquLVHtCiiBNC1LcnhaEnpBOCVyChOmRYJ1I4Aw4VNIiYIfBHEiOMntBufG5hs6nhYzgNdw5AzASzkKbmY+gQox92h6Oi4JHVIWe2jTlIg7AXxDohoz0VguhLILMvK6GPol1POT65b52IPMmKSIa8zGHodA/FPI9Nqae+H9q4CS8iC8U6Gz45Tz2igcAiq7I9qa+CmQkwlJicVHQ8Ev5oRH8e0H+QtwPRcHaY+McQAAAABJRU5ErkJggg==" alt=""> <img class=floor-right src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAALVBMVEUAAABpjCeHqD6mxFolKxo6VA8cEwuhgmwXFxeHaFLK5n44JxlSOim6m4ZrUDz82OfoAAAAAXRSTlMAQObYZgAAAYFJREFUeNqNkVGO5CAMRGNsgwlJ7n/cfYagzUjzMaXuhlQ9KkZ9/FXy+x7ZMkQ+q/wAvJQiv2hz7lImkj9lSlWntQhxQTPHP3VpdnIAIFcBd18n5VN4nnSUciIl3fUoU/YcO45tKNhO0ZnnxGwB50rPrzRrnQZB8yYi+qrw4SsAeU1xRDoxc3Ois4C4igHM6xgNYV7MJJGFWfEEzDGDisALE1dneIMw1gRCxHimwTSCtwA7YKj6/i8cQiKsJB00ADlwLEATEE4XlSgepoKZxNsgZ9IWoaRFAth5P+SR4jCm45sqEH4OxSjhC4hIoGSzsM+BGVLxSVEkgBtGybrSnGmELaBytFQbYzztfkJh1Wq96gbYP2Z11Kvd7amMwRMatoExrn5hkLcLsOL0zv7aDaO3PgBa6/0C6P2+gdvYQG/33ZMjz2Wm0McGWjpJZH3bMfnSeL1OzKBLdGW2X/F64817bo8PcL3u8w7aK/oCo79KFm46/4FexyYuCCYdF7d6dv4PoaMQqz/NQQ4AAAAASUVORK5CYII=" alt=""> <img class=floor-left src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAALVBMVEUAAACHqD4cEwtpjCeHaFI4JxkXFxemxFqhgmwlKxo6VA9SOim6m4bK5n5rUDxNmlg3AAAAAXRSTlMAQObYZgAAAXFJREFUeNqVkdu2wyAIRI8ioGjy/5/bmaJJX8+sZSXM5pL071+Sn7jk9T6WXyHh7i/k/noC7YBH6CMi4fKovMoGfl3sAiuoB4ND4DTGQZR+uTwH0Wc+y+kkF5HPHCHCGSzwzTKkzggbEe65yYWTIrSBESPM+IvJJtewKL4HSgIhJCy8mIUMG+IyhpQQdCBhJQzW5QNXGTjuqCgy9scMD5S5FINIsU8MhL6BKOIlBr0hCchAY4vzbxTuGV8AJ4KbsEA2UEYavNTYphjj8XSwG2lmqtriiIKYidOht9Zn1Xar9rU6kFpZYenLvFvTOVtvqq2Dxl1nraoJWJ3I3HMBqI1Ctxud6gYq2dnhw9nSxU71AeAzM1URp+C/AHdjhYLFLtgDBIG3Q98+0msB7mQfgLrpo4zutzunHeBI+7EJY6UDkAY/YW5b8zU0AVr3VD1+pei/AA2t+yOyYQLzAJqA7nJ+r+8KZwcOZ1KpOtfKl5hT6wfRaRFa7I2naQAAAABJRU5ErkJggg==" alt=""> <img class=floor-middle src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAKlBMVEUAAACHqD5pjCc6VA+mxFolKxrK5n44JxkcEwtSOilrUDyhgmyHaFK6m4YULsMOAAAAAXRSTlMAQObYZgAAAYpJREFUeNqdkOuy4CAIg721oOL7v+5+UXvOzuy/zbQKJATa9L/IfyflXy5nrnPXUnJruT7PU2uplZNSqa0oeGpq5SAj23jfl4ab4tAapKIr28FJqo70kkpw0AjV++uaqCK9+LE5FaicXpAvzgJaoRw3UhwYxovN7x7q0iyQOJ8HmiM/teyv5cnoC3dJrLcFvI2yYoiyixIm/RDaeBEQQlYyrHTnlqiaubl7bpWzw7pRErqzw+PD3eZ0f83GCKukvcMiOgIMxlrd324RQXd0A/uQAN7Wmms0Grv4tTSCLOZIDZ+5wAzoLVDCCJQEKT5+ju49UCgNTQmKM2kbAtCdDoiYuN17RjJmBcGQkAoEgEdAGYEUwzBydcD4AUIZJYe/P2Zc3gTXQrQl79Y3vabTcj8PewldAtNoeLqdHlkvKigECRYIZ7FhQsAKgZP5TKx2FC5Dm9CXN9OdVKJ4px9S238JS4oHql02jtkVoPhMfdPDhU+dGB4/gr55De+cqiEIt/jmsrcx/FsykP8BWekaDRWalM4AAAAASUVORK5CYII=" alt=""> <img class=spikes src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAALBAMAAADsP5IyAAAAG1BMVEUAAAAzMzOcnJx4eHi9vb1XV1ccEwtSOilrUDzwI7XUAAAAAXRSTlMAQObYZgAAAHZJREFUeAEVyEVhxAAQBdA3sxEQMLAkIAKWQUulVFjvVVAICci93D8fBwCnhAQACv/mZIn7wqmQfHNaWvrEtwTdbBmd6FLSnJhREj8SIfw/f0op+dKXbdcrqyj3kotSBMv8GRrJ82yL7Dh8y0dVeqVst4rp6eEXa3MbsFJisC8AAAAASUVORK5CYII=" alt=""> <img class=glitch1 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAsCAMAAAAzZkq9AAAAJ1BMVEUAAAB4Uj1FKyuheFQpHxQAAAB1Pi3/2a3UjFLrs4WjMzPT09OUlJQ407pZAAAAAXRSTlMAQObYZgAAARhJREFUeNqF04uOgzAMRNH11EmB3f//3rUdGJc4qFaFqt6jhFd/Pgfn8Ie5yitGVob1wTAnMbPqzEFmIHKtP1gCFRt2rieTyJ4gBQKwx5f2CZRdxjU0oEXKFUaPsdjYeRLsAHrv7Qaah6u31m2iJ4CXcfg7jiWI7ov/HsdmswSqvW8G9n0nSAHAwLa/Y/YC8A3EZRLUzifZt62cgYOY8y7aoPbxjuSzugNlGESwAiTxqfdJbdJN4GwCGOUplD0cOPXjBM4F4mCEPQHA91YBPIFXABGgdL0DXYB88csCBQhKJ4guWgH0O0AAiIPSuYc8AO5x/XfuQAhkHCbQQsQeiCwEKSQEJIadoDkR1bGKNgOVeHPFXEnMlP8B7V8JQlGdMqIAAAAASUVORK5CYII=" alt=""> <img class=glitch2 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAsCAMAAAAzZkq9AAAAJ1BMVEUAAABFKyt4Uj2heFQpHxQAAAB1Pi3/2a3UjFLrs4WjMzPT09OUlJRqiCNcAAAAAXRSTlMAQObYZgAAARtJREFUeNqV04tuhDAMRNHONEmB9v+/txMbyyUGoVor9nGPLEDsx78G5zxWftrwziDqg/F8ITI3PbORFZCx31mCRk12xp5FZE+QAgLRA/a/oEW3dxId6JZyg3cbxR49TyK6MsYY/QL6DNF7HxrrCTCLH36O4w54n8u/j2PT3ILWxtgE9n0XWAUAgW3/stkLwBuw6wxQezwxwNi2PINyFVJ2GzvKAl/BcxNX0EALQXRcACkRZCLc3OmmAR0VAFgjIJs9RTsfGcw987AA/SggMV8i0RPAgLpmfqkdeSH6hDfwuCHuQ+0CeAEIoN5uQf430EoPQAeLUHFhAARYAGOFLSDRy9MQAtSgXYEJmvAPXb0IJ1D1XIhGKWqdh/YL5hUJG0GN9wUAAAAASUVORK5CYII=" alt=""><script>!function(){"use strict";function t(){Object.defineProperty(this,"_emitterId",{value:++A}),I[this._emitterId]={}}function e(t){return Array.prototype.slice.call(document.querySelectorAll(t))}function i(t){var e,i=[];for(e=1;e<arguments.length;e++)i[e-1]=arguments[e];return function t(e,i){var r,s;return 0===e.length?i:1===e.length?(n(e[0],(function(t,e){i[e]=t})),e.pop(),i):(s=e[e.length-1],r=e[e.length-2],n(s,(function(t,e){r[e]=t})),e.pop(),t(e,i))}(i,t)}function n(t,e,i){Array.isArray(t)?t.forEach(e.bind(i||t)):Object.keys(t||{}).forEach((function(n){e.call(i||t,t[n],n,t)}))}function r(t,e){return Math.floor(Math.random()*(e-t+1))+t}function s(t,e,i){var n=null;return function(){var r,s=[],h=arguments.length;for(n&&window.clearTimeout(n),r=0;r<h;r++)s[r]=arguments[r];n=setTimeout((function(){t.apply(i,s)}),e||0)}}function h(t,e,i){var n={};return i="function"==typeof e?i:e,function(r){return e&&(r=e.apply(null,arguments)),n[r]||(n[r]=t.apply(i,arguments))}}function o(t,e,i){var n=t-e;return n>i?e+i:n<-i?e-i:t}function a(t,e){return window.addEventListener(t,e)}function c(t,e,i){t.imageSmoothingEnabled=!1,t.mozImageSmoothingEnabled=!1,t.drawImage(i,e.x,e.y,e.w,e.h)}function u(){var t,e;B&&(e=Date.now()-M,t=Math.max(e/D,1).toFixed(2),j.emit("update",t,e),j.emit("render",e),M=Date.now(),P(u))}function f(){L.drawImage(W.main.el,G.x,G.y,U,q,0,0,U,q)}function l(t,e,i){return t+e+i}function d(t,e){var i=0;return function(t,e,i){var r;return Array.isArray(t)?r=t.map(e.bind(i||t)):(r=[],n(t,(function(n,s){r.push(e.call(i||t,n,s,t))}))),r}(t,(function(t,n,r){var s=r[n-1];return i+=(s?s.width:0)*e+(0!==n?e:0)}),0)}function m(t,e,i){var r,s,h,o,a,c;return t=t.toUpperCase(),h=(r=Z(t))[0].map.length*e,s=l(t,e,i),o=(a=d(r,e))[a.length-1]+Y(t[t.length-1])*e,tt[s]=c=function(t,e,i){var n={canvas:document.createElement("canvas")};return n.ctx=n.canvas.getContext("2d"),n.canvas.width=t,n.canvas.height=e,n.ctx.fillStyle=i,n}(o,h,i),n(r,(function(t,i,n){$(c.ctx,t.map,a[i],0,e)})),c}function w(){return vt.filter(v)}function p(t){return t.w+y()}function g(t,e,i){return new st({size:t,x:e,y:i})}function y(){return r(128,220)}function v(t){return!0===t.isOnscreen()}function x(t){return!0===t.isOffscreen()}function b(){return wt.filter(v)}function k(){return yt.filter(v)}function E(){this.setSettings=function(t){for(var e=0;e<24;e++)this[String.fromCharCode(97+e)]=t[e]||0;this.c<.01&&(this.c=.01);var i=this.b+this.c+this.e;if(i<.18){var n=.18/i;this.b*=n,this.c*=n,this.e*=n}}}function O(t){var e=function(t,e){var i,n;return bt._params.setSettings(t),n=new Float32Array(bt.totalReset()),bt.synthWave(n,n.length),(i=e.createBuffer(1,n.length,44100)).getChannelData(0).set(n),i}(t,Ot);return{play:function(){if(!Et)return!1;var t=Ot.createBufferSource();t.buffer=e,t.connect(Ot.destination),t.start(0)}}}function C(){var t;t=window.innerWidth/window.innerHeight<=1?window.innerWidth/Gt.width:window.innerHeight/Gt.height;var e=Gt.height*t-25,i=Gt.width*t-25;Gt.style.height=e+"px",Jt.style.height=e+"px",Kt.style.height=e+"px",Nt.style.height=e+"px",Gt.style.width=i+"px",Jt.style.width=i+"px",Kt.style.width=i+"px",Nt.style.width=i+"px"}var A=0,I={},S=[];t.prototype.on=function(t,e){var i=I[this._emitterId];return(i[t]||(i[t]=[])).push(e),this},t.prototype.off=function(t,e){var i,n;return 0===arguments.length?(I[this._emitterId]={},this):1===arguments.length?(I[this._emitterId][t]=[],this):"function"==typeof e?(n=(i=I[this._emitterId][t]).indexOf(e),i.splice(n,1),this):void 0},t.prototype.emit=function(t){var e,i=[],n=I[this._emitterId],r=arguments.length;if(r>1)for(e=1;e<r;e++)i.push(arguments[e]);return(n[t]||S).forEach((function(t){t.apply(null,i)})),this},t.prototype.once=function(t,e){var i=this,n=function(){e.apply(null,arguments),i.off(t,n)};return this.on(t,n)};var z=window.Emitter=t,T=function t(e){function n(){z.call(this),"function"==typeof this.init&&this.init.apply(this,arguments)}var r=this.prototype||{},s=Object.create(r);return i(s,e),n.extend=t,n.prototype=s,n.prototype.constructor=n,n}.call((function(){}),z.prototype),F={37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",32:"SPACE",80:"P",82:"R"},R={LEFT:!1,UP:!1,RIGHT:!1,DOWN:!1,SPACE:!1,P:!1,R:!1};a("keydown",(function(t){var e=t.keyCode;R[F[e]]=!0})),a("keyup",(function(t){var e=t.keyCode;R[F[e]]=!1}));var j=new z,P=window.requestAnimationFrame,M=null,B=!1,D=1/60*1e3;j.start=function(){B||(M=Date.now(),B=!0,P(u),j.emit("start"))},j.stop=function(){B&&(B=!1,j.emit("stop"))},a("blur",s(j.stop,250)),a("focus",s(j.start,250)),window.loop=j;var H=T.extend({init:function(t){this.cfg=t=i({},t),t.selector?(this.el=e(t.selector)[0],this.w=this.el.width,this.h=this.el.height):(this.el=document.createElement("canvas"),this.w=this.el.width=t.w,this.h=this.el.height=t.h),this.ctx=this.el.getContext("2d"),this.w=this.el.width,this.h=this.el.height,this.entities=[],this.player=null,this.bindEvents()},bindEvents:function(){j.on("update",this.onUpdate.bind(this)),j.on("render",this.onRender.bind(this))},onUpdate:function(t){this.emit("before-update",t),n(this.world.bombs,(function(e){e.update.call(e,t)})),n(this.entities,(function(e){e.update.call(e,t)})),this.emit("update",t)},onRender:function(t){var e=this;e.emit("before-render"),e.ctx.clearRect(0,0,e.w,e.h),n(this.world.floors,(function(t){t.render.call(t,e.ctx)})),n(this.world.spikes,(function(t){t.render.call(t,e.ctx)})),n(this.world.bombs,(function(t){t.render.call(t,e.ctx)})),n(this.entities,(function(t){t.render.call(t,e.ctx)})),e.emit("render")},addEntity:function(t){this.entities.push(t)}}),W={main:new H({w:3200,h:600})},_=e(".camera")[0],L=_.getContext("2d"),U=_.width,q=_.height,G={w:U,h:q,x:0,y:0,velocity:0,get offset(){return G.w/4},shake:function(){G.shakeEffect=!0,G.effectCount=30},render:function(){L.clearRect(0,0,U,q),G.shakeEffect&&G.effectCount--?(L.save(),L.translate(r(1,5),r(1,5)),f(),L.restore()):(G.effectCount<=0&&G.shakeEffect&&(G.shakeEffect=!1,G.effectCount=0),f())}};j.on("render",G.render.bind(G));var J,K,N=T.extend({init:function(t){this.cfg=i({x:0,y:0},t),this.w=this.cfg.w,this.h=this.cfg.h,this.x=this.cfg.x,this.y=this.cfg.y,this.offscreen=document.createElement("canvas"),this.offscreen.width=this.w,this.offscreen.height=this.h,this.offscreenCtx=this.offscreen.getContext("2d"),function(t){return"function"==typeof t}(this.buildSprite)&&(this.sprite=this.buildSprite())},collidesWith:function(t){var e=this.hitbox?this.hitbox:this,i=t.hitbox?t.hitbox:t;return e.x<i.x+i.w&&i.x<e.x+e.w&&e.y<i.y+i.h&&i.y<e.y+e.h},isOffscreen:function(){var t=this,e=G;return!(t.x<e.x+e.w&&e.x<t.x+t.w)},isOnscreen:function(){return!this.isOffscreen()},isBehind:function(){var t=G;return this.x<t.x},update:function(){},render:function(){}}),Q={1:[[,,1,,0],[,1,1,,0],[,,1,,0],[,,1,,0],[1,1,1,1,1]],2:[[1,1,1,1,0],[,,,,1],[,1,1,1,0],[1,,,,0],[1,1,1,1,1]],3:[[1,1,1,1,0],[,,,,1],[,1,1,1,1],[,,,,1],[1,1,1,1,0]],4:[[1,,,1,0],[1,,,1,0],[1,1,1,1,1],[,,,1,0],[,,,1,0]],5:[[1,1,1,1,1],[1,,,,0],[1,1,1,1,0],[,,,,1],[1,1,1,1,0]],6:[[,1,1,1,0],[1,,,,0],[1,1,1,1,0],[1,,,,1],[,1,1,1,0]],7:[[1,1,1,1,1],[,,,,1],[,,,1,0],[,,1,,0],[,,1,,0]],8:[[,1,1,1,0],[1,,,,1],[,1,1,1,0],[1,,,,1],[,1,1,1,0]],9:[[,1,1,1,0],[1,,,,1],[,1,1,1,1],[,,,,1],[,1,1,1,0]],0:[[,1,1,1,0],[1,,,,1],[1,,,,1],[1,,,,1],[,1,1,1,0]],A:[[1,1,1,1,1],[1,,,,1],[1,1,1,1,1],[1,,,,1],[1,,,,1]],B:[[1,1,1,1,0],[1,,,1,0],[1,1,1,1,1],[1,,,,1],[1,1,1,1,1]],C:[[1,1,1,1,1],[1,,,,0],[1,,,,0],[1,,,,0],[1,1,1,1,1]],D:[[1,1,1,,0],[1,,,1,0],[1,,,,1],[1,,,,1],[1,1,1,1,1]],E:[[1,1,1,1,1],[1,,,,0],[1,1,1,,0],[1,,,,0],[1,1,1,1,1]],F:[[1,1,1,1,1],[1,,,,0],[1,1,1,,0],[1,,,,0],[1,,,,0]],G:[[1,1,1,1,1],[1,,,,0],[1,,1,1,1],[1,,,,1],[1,1,1,1,1]],H:[[1,,,,1],[1,,,,1],[1,1,1,1,1],[1,,,,1],[1,,,,1]],I:[[1,1,1,1,1],[,,1,,0],[,,1,,0],[,,1,,0],[1,1,1,1,1]],J:[[,,,,1],[,,,,1],[,,,,1],[1,,,,1],[1,1,1,1,1]],K:[[1,,,1,0],[1,,1,,0],[1,1,1,,0],[1,,,1,0],[1,,,,1]],L:[[1,,,,0],[1,,,,0],[1,,,,0],[1,,,,0],[1,1,1,1,1]],M:[[1,,,,1],[1,1,,1,1],[1,,1,,1],[1,,,,1],[1,,,,1]],N:[[1,,,,1],[1,1,,,1],[1,,1,,1],[1,,,1,1],[1,,,,1]],O:[[1,1,1,1,1],[1,,,,1],[1,,,,1],[1,,,,1],[1,1,1,1,1]],P:[[1,1,1,1,1],[1,,,,1],[1,1,1,1,1],[1,,,,0],[1,,,,0]],Q:[[1,1,1,1,0],[1,,,1,0],[1,,,1,0],[1,,,1,0],[1,1,1,1,1]],R:[[1,1,1,1,1],[1,,,,1],[1,1,1,1,1],[1,,,1,0],[1,,,,1]],S:[[1,1,1,1,1],[1,,,,0],[1,1,1,1,1],[,,,,1],[1,1,1,1,1]],T:[[1,1,1,1,1],[,,1,,0],[,,1,,0],[,,1,,0],[,,1,,0]],U:[[1,,,,1],[1,,,,1],[1,,,,1],[1,,,,1],[1,1,1,1,1]],V:[[1,,,,1],[1,,,,1],[1,,,,1],[,1,,1,0],[,,1,,0]],W:[[1,,,,1],[1,,,,1],[1,,1,,1],[1,1,,1,1],[1,,,,1]],X:[[1,,,,1],[,1,,1,0],[,,1,,0],[,1,,1,0],[1,,,,1]],Y:[[1,,,,1],[1,,,,1],[1,1,1,1,1],[,,1,,0],[,,1,,0]],Z:[[1,1,1,1,1],[,,,1,0],[,,1,,0],[,1,,,0],[1,1,1,1,1]]," ":[[,,,,0],[,,,,0],[,,,,0],[,,,,0],[,,,,0]],",":[[,,,,0],[,,,,0],[,,,,0],[,,1,,0],[,,1,,0]],"+":[[,,,,0],[,,1,,0],[,1,1,1,0],[,,1,,0],[,,,,0]],"/":[[,,,,1],[,,,1,0],[,,1,,0],[,1,,,0],[1,,,,0]],":":[[,,,,0],[,,1,,0],[,,,,0],[,,1,,0],[,,,,0]],"@":[[1,1,1,1,1],[,,,,1],[1,1,1,,1],[1,,1,,1],[1,1,1,1,1]],".":[[,,,,],[,,,,],[,,,,],[,,,,],[1,,,,]],"=":[[,,,,],[1,1,1,1,1],[,,,,],[1,1,1,1,1],[,,,,]]},V=h((function(t){return Array.prototype.slice.call(t).map((function(t){return t.toUpperCase()}))})),X=h((function(t){return{map:Q[t],width:Y(t),char:t}})),Y=h((function(t){return Q[t].reduce((function(t,e){return t<e.length?e.length:t}),0)})),Z=h((function(t){return V(t).map(X)})),$=h((function(t,e,i,r,s){n(e,(function(e,h){var o=r+h*s;n(e,(function(e,n){var r;0!==e&&(r=i+n*s,t.fillRect(r,o,s,s))}))}))}),(function(t,e){return e.char})),tt={},et={draw:function(t,e,i,r,s,h,o){var a,c=l(e,s,h);(a=tt[c])||(a=m(e,s,h)),t.imageSmoothingEnabled=!1,t.mozImageSmoothingEnabled=!1,n(o,(function(e,i){t[i]=e})),t.drawImage(a.canvas,i,r),t.shadowBlur=0},prime:function(t,e,i){m.apply(null,arguments)}},it=h((function(t){var i=t.w||(t.w=32),n=t.h||(t.h=32),r=e("img."+t.name)[0],s=document.createElement("canvas"),h=s.getContext("2d");return s.width=i,s.height=n,h.imageSmoothingEnabled=!1,h.mozImageSmoothingEnabled=!1,h.drawImage(r,0,0,i,n),s}),(function(t){return t.name})),nt={glitch1:it({name:"glitch1",w:32,h:44}),glitch2:it({name:"glitch2",w:32,h:44}),wizard1:it({name:"wizard1",w:32,h:44}),wizard2:it({name:"wizard2",w:32,h:44})},rt={left:it({name:"floor-left"}),middle:it({name:"floor-middle"}),right:it({name:"floor-right"})},st=N.extend({init:function(t){var e=this;0===t.size?(this.small=!0,this.size=0):this.size=t.size||3,N.prototype.init.apply(this,arguments),this.setDimensions(),Object.defineProperties(this.hitbox={},{x:{get:function(){return e.x+35}},w:{get:function(){return e.w-55}},y:{get:function(){return e.y+20}},h:{value:1}})},setDimensions:function(){this.w=128*(this.size+2),this.h=128},hasSpikes:function(){return!!this.spikes},buildSprite:function(){var t,e,i=1,n=this.size,r=32;for(t=(e=document.createElement("canvas")).getContext("2d"),e.width=(this.size+2)*r,e.height=32,c(t,{x:0,y:0,w:r,h:32},rt.left);i<=n;i++)this.small||c(t,{x:r*i,y:0,w:r,h:32},rt.middle);return c(t,{x:r*i,y:0,w:r,h:32},rt.right),e},render:function(t){this.isOffscreen()||c(t,this,this.sprite)}}),ht=it({name:"spikes",w:32,h:11}),ot=N.extend({init:function(t){var e=this;t.w=128,t.h=55,N.prototype.init.apply(this,arguments),Object.defineProperties(this.hitbox={},{x:{get:function(){return e.x+25}},w:{get:function(){return e.w-35}},y:{get:function(){return e.y+20}},h:{value:1}})},render:function(t){this.isOffscreen()||c(t,this,ht)}}),at=it({name:"bomb",w:16,h:16}),ct=N.extend({init:function(t){var e=this;t.w=48,t.h=48,N.prototype.init.apply(this,arguments),this.direction={x:0},this.speed=5,this.velocity={x:0,y:0},this.gravity=17,this.flung=!1,this.timer=null,this.flingInterval=500,Object.defineProperties(this.hitbox={},{x:{get:function(){return e.x+10}},w:{value:e.w-10},y:{get:function(){return e.y+10}},h:{value:e.h-10}})},checkBounds:function(){this.y>600&&(this.y=600,this.emit("landed"))},fling:function(){this.velocity.y=r(-15,-20),this.flung=!0},startFlingTimer:function(){var t=this;this.timer=window.setTimeout((function(){t.fling(),t.once("landed",(function(){t.startFlingTimer()}))}),this.flingInterval)},checkPlayer:function(){!this.timer&&zt.x>=this.x-r(350,500)&&this.startFlingTimer()},resetTimer:function(){window.clearTimeout(this.timer),this.timer=null,this.flung=!1},checkTimer:function(){this.timer&&this.isOffscreen()&&this.resetTimer()},update:function(t){this.checkTimer(),this.isOffscreen()||(this.checkPlayer(),this.velocity.y=o(this.gravity,this.velocity.y,.4),this.y+=this.velocity.y*t,this.checkBounds())},render:function(t){this.isOffscreen()||c(t,this,at)}}),ut=it({name:"arrow",w:32,h:32}),ft=N.extend({init:function(t){var e=this;t.w=64,t.h=64,N.prototype.init.apply(this,arguments),Object.defineProperties(this.hitbox={},{x:{get:function(){return e.x+20}},w:{get:function(){return e.w-35}},y:{get:function(){return e.y+25}},h:{value:15}}),this.speed=r(13,15),this.velocity={x:0}},throwAt:function(t){this.x=G.x+G.w+100,this.y=t.y+t.h/2-this.h/2,this.thrown=!0},update:function(t){return this.isOffscreen()&&this.isBehind()?void(this.thrown=!1):(this.velocity.x=o(this.speed,this.velocity.x,.1),void(this.x-=this.velocity.x*t))},render:function(t){this.isOffscreen()||c(t,this,ut)}}),lt=W.main,dt=W.main.w,mt=W.main.h,wt=[],pt=0;for(J=0;J<30;J++)K=r(0,3),wt.push(g(K,pt,mt-128)),pt+=p(wt[J]);var gt=[];wt.forEach((function(t,e){var i;e>0&&r(1,100)>=50&&(i=function(t,e){return new ot({x:t,y:e})}(),i.x=t.x+t.w/2-i.w/2,i.y=t.y-i.h/2,gt.push(i),t.spikes=i)}));var yt=[];wt.forEach((function(t,e,i){var n,s;e<i.length-1&&r(1,100)<=50&&(s=t.x+t.w+y()/2,n=new ct({x:s,y:mt}),yt.push(n),t.bomb=n)}));var vt=[],xt={floors:wt,spikes:gt,bombs:yt,getOnscreenFloors:b,getOnscreenSpikes:function(){return gt.filter(v)},getOnscreenBombs:k,getOnscreenArrows:w,start:function(){var t=0,e=r(1,12);j.on("update",(function(i,n){(t+=n)>=1e3*e&&(t=0,e=r(1,12),function(){var t=vt.filter((function(t){return t.isOffscreen()})).pop();return t||(t=new ft({x:-100,y:-100}),vt.push(t),lt.addEntity(t)),t}().throwAt(zt))}))}};lt.on("before-update",(function(){lt.w-G.x<=1200&&function(){var t=b(),e=wt.filter(x),i=(k(),w());t.forEach((function(t,e){var i,n,r,s;r=t.x-G.x,t.bomb&&(s=(n=t.bomb).x-t.x,n.x=r+s),pt=t.x=r,t.spikes&&((i=t.spikes).x=t.x+t.w/2-i.w/2),pt+=p(t)})),i.forEach((function(t,e){t.x-=G.x})),function(t){for(var e,i,n=t.length;n;)e=Math.floor(Math.random()*n--),i=t[n],t[n]=t[e],t[e]=i;return t}(e).forEach((function(t){var e;t.x=pt,t.spikes&&((e=t.spikes).x=t.x+t.w/2-e.w/2),t.bomb&&(t.bomb.x=t.x+t.w+y()/2),pt+=p(t)})),zt.x=zt.x-G.x,G.x=0,wt=t.concat(e)}()})),lt.on("before-update",(function(){wt.filter((function(t){return t.isBehind()&&t.isOffscreen()})).forEach((function(t){t.x=pt,pt+=dt+y()}))})),lt.world=xt;var bt=new function(){var t,e,i,n,r,s,h,o,a,c,u,f;this._params=new E,this.reset=function(){var t=this._params;n=100/(t.f*t.f+.001),r=100/(t.g*t.g+.001),s=1-t.h*t.h*t.h*.01,h=-t.i*t.i*t.i*1e-6,t.a||(u=.5-t.n/2,f=5e-5*-t.o),o=1+t.l*t.l*(t.l>0?-.9:10),a=0,c=1==t.m?0:(1-t.m)*(1-t.m)*2e4+32},this.totalReset=function(){this.reset();var n=this._params;return t=n.b*n.b*1e5,e=n.c*n.c*1e5,i=n.e*n.e*1e5+12,3*((t+e+i)/3|0)},this.synthWave=function(l,d){var m=this._params,w=1!=m.s||m.v,p=m.v*m.v*.1,g=1+3e-4*m.w,y=m.s*m.s*m.s*.1,v=1+1e-4*m.t,x=1!=m.s,b=m.x*m.x,k=m.g,E=m.q||m.r,O=m.r*m.r*m.r*.2,C=m.q*m.q*(m.q<0?-1020:1020),A=m.p?32+((1-m.p)*(1-m.p)*2e4|0):0,I=m.d,S=m.j/2,z=m.k*m.k*.01,T=m.a,F=t,R=1/t,j=1/e,P=1/i,M=5/(1+m.u*m.u*20)*(.01+y);M>.8&&(M=.8),M=1-M;for(var B,D,H,W,_,L,U=!1,q=0,G=0,J=0,K=0,N=0,Q=0,V=0,X=0,Y=0,Z=0,$=new Array(1024),tt=new Array(32),et=$.length;et--;)$[et]=0;for(et=tt.length;et--;)tt[et]=2*Math.random()-1;for(et=0;et<d;et++){if(U)return et;if(A&&++Y>=A&&(Y=0,this.reset()),c&&++a>=c&&(c=0,n*=o),(n*=s+=h)>r&&(n=r,k>0&&(U=!0)),D=n,S>0&&(Z+=z,D*=1+Math.sin(Z)*S),(D|=0)<8&&(D=8),T||((u+=f)<0?u=0:u>.5&&(u=.5)),++G>F)switch(G=0,++q){case 1:F=e;break;case 2:F=i}switch(q){case 0:J=G*R;break;case 1:J=1+2*(1-G*j)*I;break;case 2:J=1-G*P;break;case 3:J=0,U=!0}E&&((H=0|(C+=O))<0?H=-H:H>1023&&(H=1023)),w&&g&&((p*=g)<1e-5?p=1e-5:p>.1&&(p=.1)),L=0;for(var it=8;it--;){if(++V>=D&&(V%=D,3==T))for(var nt=tt.length;nt--;)tt[nt]=2*Math.random()-1;switch(T){case 0:_=V/D<u?.5:-.5;break;case 1:_=1-V/D*2;break;case 2:_=.225*(((_=1.27323954*(W=6.28318531*((W=V/D)>.5?W-1:W))+.405284735*W*W*(W<0?1:-1))<0?-1:1)*_*_-_)+_;break;case 3:_=tt[Math.abs(32*V/D|0)]}w&&(B=Q,(y*=v)<0?y=0:y>.1&&(y=.1),x?(N+=(_-Q)*y,N*=M):(Q=_,N=0),K+=(Q+=N)-B,_=K*=1-p),E&&($[X%1024]=_,_+=$[(X-H+1024)%1024],X++),L+=_}L*=.125*J*b,l[et]=Math.max(-1,Math.min(1,L))||0}return d}},kt=window.AudioContext||window.webkitAudioContext,Et=!0,Ot=new kt,Ct={jump:O([0,,.2964,,.18,.3314,,.1583,,,,,.09,.1348,-.6,,,,1,-.16,.12,.27,-.16,.35]),hurt:O([3,,.0322,,.48,.7076,,-.3268,,,,,,,,,,,1,,,,,.35]),wizard:O([0,,.2557,,.59,.3608,,.2042,,,,,,.2346,,.4444,,,1,,,,,.35])},At={glitch:[nt.glitch1,nt.glitch2],wizard:[nt.wizard1,nt.wizard2]},It=function(){var t,e=arguments.length,i=[],n=0;for(t=0;t<e;t++)i[t]=arguments[t];return function(){return n=n>=e?0:n,i[n++]}}(1,.8,.5,.3,0,.3,.5,.8,1),St=N.extend({init:function(){N.prototype.init.apply(this,arguments),this.direction={x:0},Object.defineProperty(this,"speed",{get:function(){return this.mode?6:5}}),this.velocity={x:0,y:0},this.gravity=12,this.x=10,this.y=400,this.vulnerable=!1,this.hurt=!1,this.health=4,this.dead=!1,this.lastAnim=Date.now(),this.currentFrame=0,this.mode=0,this.distance=0,Object.defineProperty(this,"frames",{get:function(){return At[0===this.mode?"glitch":"wizard"]}}),W.main.addEntity(this),this.bindEvents()},bindEvents:function(){this.on("ouch",this.checkMode.bind(this)),this.once("move",function(){this.vulnerable=!0,xt.start()}.bind(this))},checkMode:function(){0===this.mode?(this.mode=r(0,2),this.mode):this.mode=0,(this.mode?Ct.wizard:Ct.hurt).play()},checkKeys:function(){this.dead||this.falling&&0===this.mode||(this.right=R.RIGHT,this.left=R.LEFT,(R.RIGHT||R.LEFT)&&this.emit("move"),R.SPACE&&this.startJump())},checkBounds:function(){this.x-G.x<=0&&(this.x=G.x),!this.dead&&this.y>=G.y+G.w&&(Ct.hurt.play(),this.die())},startJump:function(){this.jumping||this.falling||(this.velocity.y=this.mode?-11:-10,this.gravity=this.mode?4:8,this.currentFrame=1,this.emit("jump"),Ct.jump.play())},ouch:function(){this.setHurt(!0),this.health--,this.velocity.y=-6,this.direction.x=-1,this.velocity.x=3,G.shake(),this.emit("ouch"),0===this.health&&this.die()},setHurt:function(t){this.lastHurt=t?Date.now():this.lastHurt,this.hurt=t,this.vulnerable=!t},checkHurt:function(){this.hurt&&Date.now()-this.lastHurt>2e3&&this.setHurt(!1)},checkRestart:function(){this.dead&&R.R&&(window.location.href=window.location.href)},die:function(){this.dead=!0,this.vulnerable=!1,this.deathEffect=!0},setDirection:function(){this.right?this.direction.x=1:this.left&&(this.direction.x=-1)},update:function(t){this.checkKeys(),this.setDirection(),this.checkHurt(),this.checkRestart(),this.velocity.y=o(this.gravity,this.velocity.y,.4),this.y+=this.velocity.y*t,this.velocity.x=o(this.right||this.left?this.speed:0,this.velocity.x,.5),this.x+=this.velocity.x*t*this.direction.x,this.adjustCamera(t),this.checkCollisions(),this.checkBounds(),this.moving=this.velocity.x>0,this.falling=this.velocity.y>0,this.jumping=this.velocity.y<0,this.emit("update",this.velocity.x*t*this.direction.x)},render:function(t){var e=Date.now(),i=this.currentFrame;this.hurt&&(t.globalAlpha=It()),c(t,this,this.frames[i]),t.globalAlpha=1,this.setFrame(e,i)},setFrame:function(t,e){this.moving&&t-this.lastAnim>=300&&(this.lastAnim=t,this.currentFrame=1===e?0:1),this.moving||this.jumping||(this.currentFrame=0)},adjustCamera:function(t){this.x>G.x+G.offset&&1===this.direction.x&&(G.x+=.1*(this.x-G.x-G.offset)*t),(this.jumping||this.falling)&&this.y<350?G.y+=.1*(this.y-G.y-350)*t:G.y=o(0,G.y,5)},checkCollisions:function(){var t=this;t.dead||(n(xt.getOnscreenFloors(),(function(e){e.collidesWith(t)&&(t.velocity.y=0,t.y=e.hitbox.y-t.h,t.distance++)})),n(xt.getOnscreenSpikes(),(function(e){t.vulnerable&&e.collidesWith(t)&&t.ouch()})),n(xt.getOnscreenBombs(),(function(e){t.vulnerable&&e.collidesWith(t)&&t.ouch()})),n(xt.getOnscreenArrows(),(function(e){t.vulnerable&&e.collidesWith(t)&&t.ouch()})))}}),zt=window.p=new St({w:64,h:92}),Tt=e("canvas.bg")[0].getContext("2d");Tt.globalAlpha=.055,Tt.translate(0,-120),Tt.drawImage(rt.middle,0,0,32,32,0,0,800,1200),Tt.drawImage(rt.middle,0,0,32,32,800,0,800,1200);var Ft=0,Rt=0;j.on("render",(function(){Tt.clearRect(0,0,800,1200),Tt.save(),Tt.translate(Ft-=3,0),Tt.drawImage(rt.middle,0,0,32,32,0,0,800,1200),Tt.drawImage(rt.middle,0,0,32,32,800,0,800,1200),Tt.restore(),Tt.save(),Tt.globalAlpha=.055,Tt.translate(Rt-=10,80),Tt.drawImage(rt.middle,0,0,32,32,0,0,800,1200),Tt.drawImage(rt.middle,0,0,32,32,800,0,800,1200),Tt.restore(),Ft=Ft<=-800?0:Ft,Rt=Rt<=-800?0:Rt}));var jt=it({name:"heart",w:16,h:16}),Pt=e(".hud")[0],Mt=Pt.getContext("2d"),Bt=Pt.width,Dt=Pt.height,Ht=[],Wt=0,_t=!0,Lt={shadowColor:"#000",shadowBlur:15},Ut={shadowColor:"#000",shadowBlur:1};zt.on("update",(function(t){var e=Math.max(t,0);Wt+=.01*e})),zt.once("move",(function(){setTimeout((function(){_t=!1}),3e3)})),Mt.imageSmoothingEnabled=!1,Mt.mozImageSmoothingEnabled=!1;var qt=h((function(t){return t<=0?Ht:[jt].concat(qt(--t))}));j.on("render",(function(){Mt.clearRect(0,0,Bt,Dt),_t&&!zt.dead&&(et.draw(Mt,"glitch",220,100,10,"#fff",Lt),et.draw(Mt,"wizard",220,200,10,"#fff",Lt),et.draw(Mt,"travel as far as you can, fam",135,300,3,"#fff",Lt)),qt(zt.health).reduce((function(t,e){return Mt.drawImage(e,t,4,32,32),t-40}),Bt-38),function(){var t=Math.floor(Wt);et.draw(Mt,"distance: ",4,10,3,"rgb( 255, 255, 255 )",Ut),Array.prototype.slice.call(t.toString()).forEach((function(t,e){et.draw(Mt,t,175+20*e,10,3,"rgb( 255, 255, 255 )",Ut)}))}(),zt.dead&&(et.draw(Mt,"game",275,100,10,"#fff",Lt),et.draw(Mt,"over",275,200,10,"#fff",Lt),et.draw(Mt,"press R to try again",210,300,3,"#fff",Lt))}));var Gt=e("canvas.camera")[0],Jt=e("canvas.bg")[0],Kt=e("canvas.hud")[0],Nt=e(".stage")[0];C(),window.addEventListener("resize",s(C,300)),window.addEventListener("orientationchange",s(C,300)),j.start()}()</script>