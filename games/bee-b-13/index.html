<!doctype html><title>Bee - js13kGames 2024</title><meta content="width=device-width,maximum-scale=1,viewport-fit=cover" name=viewport><meta content=#000 name=theme-color><link href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='48' height='48' viewBox='0 0 16 16'><text x='0' y='14'>üêù</text></svg>" rel=icon><link href="data:application/manifest+json,%7B%22name%22%3A%22Bee%20%2F%20B%20%2F%2013%20a%20js13k%20unfinished%20game%20by%20%40scmx%22%2C%22short_name%22%3A%22Bee%22%2C%22start_url%22%3A%22%2F%22%2C%22background_color%22%3A%22yellow%22%2C%22theme_color%22%3A%22green%22%2C%22display%22%3A%22fullscreen%22%2C%22icons%22%3A%5B%7B%22src%22%3A%22data%3Aimage%2Fsvg%2Bxml%2C%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20width%3D'48'%20height%3D'48'%20viewBox%3D'0%200%2016%2016'%3E%3Ctext%20x%3D'0'%20y%3D'14'%3E%F0%9F%90%9D%3C%2Ftext%3E%3C%2Fsvg%3E%22%2C%22type%22%3A%22image%2Fpng%22%2C%22sizes%22%3A%2248x48%22%7D%5D%7D" rel=manifest><title></title><main id=main><canvas id=canvas></canvas><dialog id=how_to_play><h1>Bee - A js13k Game</h1><a href=https://github.com/scmx/js13k target=_blank>View Source and Play latest version</a><p>Guide your bee back to the hive in this minimalist game! Tap and hold above the bee to fly higher, but watch out‚Äîgravity and tiredness will pull you down. Collect nectar to stay in the air, but avoid flowers with 13 petals‚Äîthey‚Äôre empty or poisonous! If you run out of nectar, rest on the ground to recharge, but be mindful of lost time. Can you make it back to the beehive safely?<p><div class=actions><button onclick=how_to_play.close() type=submit>PLAY</button></div></dialog><button onclick=how_to_play.showModal() type=button aria-label=Info class=info>‚ìò</button></main><style>html{height:100%;background:#333;user-select:none}body{height:100%;margin:0;display:flex;flex-direction:column;justify-content:center;align-items:center}main{position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center}canvas{display:block;max-width:1200px}button.info{position:absolute;top:1rem;left:1rem;display:block;width:2rem;height:2rem;line-height:0;margin:0;padding:0;vertical-align:middle;text-align:center;font-size:2rem;border:1px solid #fff;box-sizing:content-box;border-radius:100%;background:#fff}dialog{background:rgba(255,255,255,.3);max-width:60%;font-family:sans-serif;border-radius:20px;text-align:center}dialog button{margin:1rem;padding:0 2rem;font-size:2rem;font-weight:700;background:#ff0;color:#000;border:2px solid #000;border-radius:10px}h1{text-align:center;margin:0}.actions{display:flex;justify-content:center}</style><script type=module>const g=9.81;class Bee{#t=1;radius=5;constructor({game:t,pos:e,dir:s}){this.game=t,this.pos={x:e.x,y:e.y},this.dir={x:s.x,y:s.y},this.poison=0}draw(t,e){t.beginPath(),t.moveTo(this.pos.x-25,this.pos.y),t.bezierCurveTo(this.pos.x+25,this.pos.y-50,this.pos.x+25,this.pos.y+50,this.pos.x-25,this.pos.y),t.moveTo(this.pos.x,this.pos.y-15),t.lineTo(this.pos.x,this.pos.y+15),t.moveTo(this.pos.x-10,this.pos.y-11),t.lineTo(this.pos.x-10,this.pos.y+11),t.moveTo(this.pos.x+7,this.pos.y-10),t.lineTo(this.pos.x+7,this.pos.y+10),t.moveTo(this.pos.x+9,this.pos.y-9),t.lineTo(this.pos.x+9,this.pos.y+9),t.closePath(),t.lineWidth=3,t.strokeStyle="black",t.fillStyle=`hsl(60, 100%, ${50*this.nectar}%)`,t.fill(),t.stroke(),t.beginPath(),t.arc(this.pos.x+8,this.pos.y+3,4,0,2*Math.PI),t.closePath(),t.fillStyle="white",t.fill(),t.strokeStyle="black",t.stroke(),t.beginPath(),this.game.distance%1>.5?(t.moveTo(this.pos.x-5,this.pos.y-11),t.bezierCurveTo(this.pos.x-25,this.pos.y-10,this.pos.x-35,this.pos.y-10,this.pos.x-35,this.pos.y),t.moveTo(this.pos.x,this.pos.y-8),t.bezierCurveTo(this.pos.x-20,this.pos.y+13,this.pos.x-30,this.pos.y+13,this.pos.x-30,this.pos.y+3)):(t.moveTo(this.pos.x-5,this.pos.y-11),t.bezierCurveTo(this.pos.x-25,this.pos.y+10,this.pos.x-35,this.pos.y-10,this.pos.x-35,this.pos.y),t.moveTo(this.pos.x,this.pos.y-8),t.bezierCurveTo(this.pos.x-20,this.pos.y+33,this.pos.x-30,this.pos.y+13,this.pos.x-30,this.pos.y+3)),t.closePath(),t.fillStyle="white",t.fill()}update(t){if(this.dir.y=0,t.pointers.size&&this.nectar>.001){const e=[...t.pointers.values()].sort(((t,e)=>e.isPrimary-t.isPrimary))?.[0];if(!e)throw new Error("No pointer");e.y>this.pos.y?this.dir.y=10:e.y<this.pos.y?this.dir.y=-30:this.dir.y=0}this.nectar-=1e-4*t.time*(this.game.difficulty-.5)+.01*this.poison,this.poison=Math.max(0,this.poison-this.poison/2-.01),this.dir.y+=g*this.game.difficulty,this.pos.y+=t.applySpeed(this.dir.y)}get nectar(){return this.#t}set nectar(t){this.#t=Math.max(0,Math.min(1,t))}}class Flower{constructor(t){this.game=t}free=!0;start({pos:t,dir:e}){return this.free=!1,this.pos={x:t.x,y:t.y},this.dir={x:e.x,y:e.y},this.petals=11+Math.floor(5*Math.random()),this.budRadius=40,this.nectar=1,this.poisonous=!1,this}draw(t,e){this.free||(this.drawLeaves(t,e),this.drawStem(t,e),this.drawPetals(t,e),this.drawBud(t,e))}drawStem(t,e){t.beginPath(),t.moveTo(this.pos.x-10,this.pos.y),t.lineTo(this.pos.x-10,canvas.height),t.lineTo(this.pos.x+10,canvas.height),t.lineTo(this.pos.x+10,this.pos.y),t.closePath(),t.strokeStyle="black",t.lineWidth=4,t.fillStyle="green",t.fill(),t.stroke()}drawPetals(t,e){const s=[],i=[];for(let t=0;t<this.petals;t++){const e=2*Math.PI*t/this.petals,a=this.pos.x+25*Math.cos(e),o=this.pos.y+25*Math.sin(e);s[t]={x:a,y:o};const h=this.pos.x+150*Math.cos(e),n=this.pos.y+150*Math.sin(e);i[t]={x:h,y:n}}for(let e=0;e<this.petals;e++)t.beginPath(),t.moveTo(s[e].x,s[e].y),t.bezierCurveTo(i[(e-1+this.petals)%this.petals].x,i[(e-1+this.petals)%this.petals].y,i[(e+1+this.petals)%this.petals].x,i[(e+1+this.petals)%this.petals].y,s[(e+this.petals)%this.petals].x,s[(e+this.petals)%this.petals].y),t.closePath(),t.strokeStyle="black",t.stroke(),this.poisonous?t.fillStyle="red":t.fillStyle=e%2?"white":"#eef",t.fill()}drawBud(t,e){t.beginPath(),t.arc(this.pos.x,this.pos.y,this.budRadius,0,2*Math.PI),t.closePath(),t.strokeStyle="black",t.lineWidth=4,t.fillStyle=`hsl(60, 100%, ${50*this.nectar}%)`,t.fill(),t.stroke(),this.pos.x>.5*canvas.width||(t.font="24px serif",t.fillStyle="black",t.textAlign="center",t.textBaseline="middle",t.fillText(this.petals,this.pos.x,this.pos.y))}drawLeaves(t,e){const s=this.pos.x,i=.5*canvas.height+.6*this.pos.y;t.beginPath(),t.moveTo(s,i),t.moveTo(s-50,i-50),t.lineTo(s,i+50),t.lineTo(s,i),t.closePath(),t.strokeStyle="black",t.lineWidth=4,t.stroke(),t.fillStyle="green",t.fill(),t.beginPath(),t.moveTo(s+50,i-50),t.bezierCurveTo(s+50,i-50,s+50,i+25,s,i+10),t.moveTo(s+50,i-50),t.bezierCurveTo(s+50,i+50,s+50,i+25,s,i+10),t.closePath(),t.strokeStyle="black",t.lineWidth=4,t.stroke(),t.fillStyle="green",t.fill()}update(t){this.free||(this.pos.x+=t.applySpeed(this.dir.x),this.pos.x<-100&&(this.free=!0))}}class Background{draw(t,e){t.fillStyle="#db0",t.fillRect(0,0,canvas.width,canvas.height),t.fillRect(50,50,100,100),t.fillStyle="#db0",t.fillRect(0,0,canvas.width,canvas.height),t.fillRect(50,50,100,100)}}class Ground{constructor(t){this.game=t}draw(){ctx.lineWidth=8,ctx.strokeStyle="black",ctx.stroke(this.path),ctx.fillStyle="green",ctx.fill(this.path)}update(t){this.path=new Path2D,this.path.moveTo(0,canvas.height),this.path.lineTo(0,.95*canvas.height),this.path.lineTo(canvas.width/2,.9*canvas.height),this.path.lineTo(canvas.width,.95*canvas.height),this.path.lineTo(canvas.width,canvas.height),this.path.lineTo(0,canvas.height),this.path.closePath()}}class Pool{constructor({size:t,items:e}){this.size=t,this.items=e}getFree(){for(const t of this.items)if(t.free)return t.free=!1,t;return this.items.length,this.size,null}}class Game{difficulty=0;distance=0;flowerTimer=0;flowerInterval=1e3;constructor(){this.bee=new Bee({game:this,pos:{x:.1*canvas.width,y:.5*canvas.height},dir:{x:0,y:0}}),this.flowers=new Pool({items:[new Flower({game:this}).start({pos:{x:.95*canvas.width,y:.5*canvas.height},dir:{x:-20,y:0}})]})}drawFlowers(t,e){this.flowers.items.forEach((s=>s.draw(t,e)))}drawBee(t,e){this.bee.draw(t,e)}drawHud(t,e){t.font=.03*canvas.width+"px serif",t.fillStyle="black",t.textAlign="center",t.textBaseline="middle",t.fillText(`Nectar: ${(100*this.bee.nectar).toFixed(0)}%`,.14*canvas.width,44),t.fillText(`Distance: ${this.distance.toFixed(2)} m`,.9*canvas.width-50,44),t.font=`bold ${.04*canvas.width}px times new roman`,t.fillText("1",.5*canvas.width-30,50),t.fillText("3",.5*canvas.width-15,55),t.font=`bold ${.04*canvas.width}px sans-serif`,t.fillText("ee",.5*canvas.width+21,50)}update(t){if(this.bee.update(t),this.flowers.items.forEach((e=>e.update(t))),this.flowerTimer>this.flowerInterval){const t=this.flowers.getFree();t?.start({pos:{x:1.1*canvas.width,y:.5*canvas.height},dir:{x:-20,y:0}}),this.flowerTimer=0,this.flowerTimer=0}else this.flowerTimer+=t.time;this.bee.pos.y>.95*canvas.height&&(this.bee.pos.y=.95*canvas.height,this.difficulty=0,this.gameOver=!0),t.pointers.size&&this.gameOver&&(this.gameOver=!1,this.distance=0);for(const t of this.flowers.items){if(t.free)continue;const e=t.pos.x-this.bee.pos.x,s=t.pos.y-this.bee.pos.y;Math.hypot(s,e)>t.budRadius+this.bee.radius||(13===t.petals?(t.poisonous=!0,this.bee.poison+=.5):this.bee.nectar+=.05*t.nectar)}this.difficulty&&(this.distance+=.001*t.time)}}let landscape=!0;const ratio=2556/1179;function resize(){const t=innerWidth,e=innerHeight,s=t/e;landscape=s>1,canvas.width=s>ratio?e*ratio:t,canvas.height=s>ratio?e:t/ratio,main.width=canvas.width,main.height=canvas.height}resize(),addEventListener("resize",resize),addEventListener("orientationchange",resize);const prevent=t=>t.preventDefault();canvas.addEventListener("touchstart",prevent,{passive:!1}),canvas.addEventListener("touchmove",prevent,{passive:!1}),canvas.addEventListener("contextmenu",prevent,{passive:!1}),canvas.addEventListener("selectstart",prevent,{passive:!1}),canvas.addEventListener("selectionchange",prevent,{passive:!1});const ctx=canvas.getContext("2d"),background=new Background,ground=new Ground,game=new Game,pointers=new Map;function discardPointer(t){pointers.delete(t.pointerId)}canvas.addEventListener("pointerdown",(t=>{game.difficulty||(game.difficulty=1);const{clientX:e,clientY:s,pressure:i,isPrimary:a}=t,o=canvas.getBoundingClientRect(),h=e-o.left,n=s-o.top;pointers.set(t.pointerId,{x:h,y:n,pressure:i,isPrimary:a})})),canvas.addEventListener("pointermove",(t=>{const{clientX:e,clientY:s,pressure:i,isPrimary:a}=t,o=canvas.getBoundingClientRect(),h=e-o.left,n=s-o.top;pointers.set(t.pointerId,{x:h,y:n,pressure:i,isPrimary:a})})),canvas.addEventListener("pointerup",discardPointer),canvas.addEventListener("pointerleave",discardPointer),canvas.addEventListener("pointercancel",discardPointer),canvas.addEventListener("pointerup",discardPointer),canvas.addEventListener("pointerout",discardPointer);let lastTime=performance.now();const speedModifier=.2,delta={time:0,pointers:pointers,speed:1,applySpeed:t=>t*delta.speed*.2*game.difficulty};function animate(t){const e=canvas.width/1200;delta.time=t-lastTime,lastTime=t,ground.update(delta),game.update(delta),background.draw(ctx,e),game.drawFlowers(ctx,e),ground.draw(ctx,e),game.drawHud(ctx,e),game.drawBee(ctx,e),requestAnimationFrame(animate)}requestAnimationFrame(animate),how_to_play.showModal()</script>