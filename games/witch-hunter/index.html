<!doctype html><script src=/2022/webxr/aframe.js></script><script src=//unpkg.com/aframe-environment-component@1.3.1/dist/aframe-environment-component.min.js></script><script src=https://unpkg.com/aframe-event-set-component@5.0.0/dist/aframe-event-set-component.min.js></script><script src=https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.0.0/dist/aframe-extras.min.js></script><script>function dcE(t){return document.createElement(t)}function sA(t,e){return e.forEach((e=>{t.setAttribute(e[0],e[1])})),t}function dgEsA(t,e,n){document.getElementById(t).setAttribute(e,n)}function dq(t){return document.querySelector(t)}</script><script>const charlesBorromeo={name:"Charles Borromeo",description:"Charles Borromeo is a Cardinal and Archbishop of Milan.",health:80,torture:20,charisma:10},heinrichKramer={name:"Heinrich Kramer",description:"Heinrich Kramer is a German churchman and writer who wrote 'Malleus Maleficarum', the first book on witchcraft.",health:80,torture:15,charisma:15},jacobSprenger={name:"Jacob Sprenger",description:"Jacob Sprenger, dominican inquisitor and theologian",health:80,torture:25,charisma:20},matthewHopkins={name:"Matthew Hopkins",description:"Matthew Hopkins is a witch hunter. ",health:80,torture:20,charisma:5},samuelParris={name:"Samuel Parris",description:"Samuel Parris is a Puritan minister in Salem, Massachusetts. ",health:80,torture:15,charisma:10};var mainCharacter,AW={name:"Agnes Waterhouse",health:100,attack:20},EP={name:"Elisabeth Plainacher",health:100,attack:50},JJ={name:"Johannes Junius",health:100,attack:10};AFRAME.registerComponent("highlight",{init:function(){var e=this.btnEls=this.el.querySelectorAll(".menu-button"),t=dq("#background");this.onClick=this.onClick.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.reset=this.reset.bind(this),t.addEventListener("click",this.reset);for(var r=0;r<e.length;++r)e[r].addEventListener("mouseenter",this.onMouseEnter),e[r].addEventListener("mouseleave",this.onMouseLeave),e[r].addEventListener("click",this.onClick)},onClick:function(e){e.target.pause(),e.target.setAttribute("material","color","#046de7"),this.el.addState("clicked"),e.target.object3D.scale.set(1.2,1.2,1.2)},onMouseEnter:function(e){var t=this.btnEls;e.target.setAttribute("material","color","#046de7");for(var r=0;r<t.length;++r)e.target!==t[r]&&t[r].setAttribute("material","color","white")},onMouseLeave:function(e){this.el.is("clicked")||e.target.setAttribute("material","color","white")},reset:function(){for(var e=this.btnEls,t=0;t<e.length;++t)this.el.removeState("clicked"),e[t].play(),e[t].emit("mouseleave")}}),AFRAME.registerComponent("info-panel",{init:function(){var e=document.querySelectorAll(".menu-button"),t=this.fadeBackgroundEl=document.querySelector("#fadeBackground");this.characterNameEl=document.querySelector("#characterName"),this.characterDescriptionEl=document.querySelector("#characterDescription"),this.characterInfo={charlesBorromeoButton:{name:charlesBorromeo.name,imgEl:document.querySelector("#charlesBorromeoCharacterImage"),description:charlesBorromeo.description,image:"cb.png"},heinrichKramerButton:{name:heinrichKramer.name,imgEl:document.querySelector("#heinrichKramerCharacterImage"),description:heinrichKramer.description,image:"hk.png"},jacobSprengerButton:{name:jacobSprenger.name,imgEl:document.querySelector("#jacobSprengerCharacterImage"),description:jacobSprenger.description,image:"js.png"},matthewHopkinsButton:{name:matthewHopkins.name,imgEl:document.querySelector("#matthewHopkinsCharacterImage"),description:matthewHopkins.description,image:"mh.png"},samuelParrisButton:{name:samuelParris.name,imgEl:document.querySelector("#samuelParrisCharacterImage"),description:samuelParris.description,image:"sp.png"}},this.onMenuButtonClick=this.onMenuButtonClick.bind(this),this.onBackgroundClick=this.onBackgroundClick.bind(this),this.backgroundEl=document.querySelector("#background");for(var r=0;r<e.length;++r)e[r].addEventListener("click",this.onMenuButtonClick);this.backgroundEl.addEventListener("click",this.onBackgroundClick),this.el.object3D.renderOrder=9999999,this.el.object3D.depthTest=!1,t.object3D.renderOrder=9,t.getObject3D("mesh").material.depthTest=!1},onMenuButtonClick:function(e){var t=e.currentTarget.id,r=this.characterInfo[t];r&&(this.backgroundEl.object3D.scale.set(1,1,1),this.el.object3D.scale.set(1,1,1),AFRAME.utils.device.isMobile()&&this.el.object3D.scale.set(1.4,1.4,1.4),this.el.object3D.visible=!0,this.fadeBackgroundEl.object3D.visible=!0,this.movieImageEl&&(this.movieImageEl.object3D.visible=!1),this.movieImageEl=r.imgEl,this.movieImageEl&&(this.movieImageEl.object3D.visible=!0),sA(this.characterNameEl,[["text","value: "+r.name]]),sA(this.characterDescriptionEl,[["text","value: "+r.description]]))},onBackgroundClick:function(e){this.backgroundEl.object3D.scale.set(.001,.001,.001),this.el.object3D.scale.set(.001,.001,.001),this.el.object3D.visible=!1,this.fadeBackgroundEl.object3D.visible=!1},chooseCharacter:function(e){const t=e.detail?e.detail.characterName:e.currentTarget.id.replace("Button","");localStorage.setItem("chosenCharacter",t),this.showCharacterInfo(t)},showCharacterInfo:function(e){this.characterInfo[e+"Button"]}}),AFRAME.registerComponent("main-character-chooser",{init:function(){this.chooseCharacter=this.chooseCharacter.bind(this),this.el.addEventListener("click",this.chooseCharacter)},chooseCharacter:function(e){const t=this.el.getAttribute("data-character");localStorage.setItem("chosenCharacter",t),mainCharacter=this.el;const r=document.querySelector("#mainCharacters");r.parentNode.removeChild(r),document.querySelector("#cat").setAttribute("visible","true"),this.showCharacterInfo(t)},showCharacterInfo:function(e){const t=document.querySelector("#infoPanel");t.setAttribute("visible","true"),t.setAttribute("scale","1 1 1"),document.querySelector("#characterName").setAttribute("text","value",e),document.querySelectorAll('[id$="CharacterImage"]').forEach((e=>e.setAttribute("visible","false")));const r=document.querySelector(`#${e.replace(" ","")}CharacterImage`);r&&r.setAttribute("visible","true")}}),window.addEventListener("load",(()=>{const e=localStorage.getItem("chosenCharacter");e&&document.querySelector("[main-character-chooser]").components["main-character-chooser"].chooseCharacter({detail:{characterName:e}})}))</script><body><a-scene background="color: #212" cursor="rayOrigin: mouse;" cursor-mobile="rayOrigin: mouse; fuse: true; fuseTimeout: 500" geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03" material="color: white; shader: flat" position="0 0 -1" raycaster="objects: .teleportation-point, .raycastable"><a-entity id=environment environment="preset: checkerboard" seed=1></a-entity><a-assets timeout=10000><a-entity id=img></a-entity><img crossorigin=anonymous id=charlesBorromeo src=cb.png> <img crossorigin=anonymous id=charlesBorromeoPoster src=cb.png> <img crossorigin=anonymous id=heinrichKramer src=hk.png> <img crossorigin=anonymous id=heinrichKramerPoster src=hk.png> <img crossorigin=anonymous id=jacobSprenger src=js.png> <img crossorigin=anonymous id=jacobSprengerPoster src=js.png> <img crossorigin=anonymous id=matthewHopkins src=mh.png> <img crossorigin=anonymous id=matthewHopkinsPoster src=mh.png> <img crossorigin=anonymous id=samuelParris src=sp.png> <img crossorigin=anonymous id=samuelParrisPoster src=sp.png> <img crossorigin=anonymous id=catPoster src=cat.png> <img crossorigin=anonymous id=agneswaterhousePoster src=aw.png> <img crossorigin=anonymous id=catherinpeytonPoster src=cp.png> <img crossorigin=anonymous id=elizabethplainacherPoster src=ep.png> <img crossorigin=anonymous id=johannesjuniusPoster src=jj.png><a-mixin material="color: white; shader: flat" geometry="primitive: plane; width: 0.5783552; height: 0.8192" id=frame animation__scale="property: scale; to: 1.2 1.2 1.2; dur: 200; startEvents: mouseenter" animation__scale_reverse="property: scale; to: 1 1 1; dur: 200; startEvents: mouseleave"></a-mixin><a-mixin material="color: white; shader: flat" material="shader: flat" geometry="primitive: plane; width: 0.544768; height: 0.786432" id=poster position="0 0 0.005"></a-mixin><a-mixin material="src: #hein; shader: flat; transparent: true" geometry="primitive: plane; width: 1.5; height: 0.81" id=CharacterImage position="0 0.495 0.002"></a-mixin></a-assets><a-entity id=background material="color: red; side: back; shader: flat" visible geometry="primitive: sphere; radius: 2.0" class=raycastable position="0 0 0" scale="0.001 0.001 0.001"></a-entity><a-entity id=rig><a-entity id=camera position="0 1.6 0" camera look-controls="pointerLockEnabled: true" magicwindowtrackingenabled=true wasd-controls=acceleration:100><a-entity material="color: white; shader: flat" geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03" position="0 0 -1" cursor="fuse: true; fuseTimeout: 500" raycaster="objects: .teleportation-point"></a-entity></a-entity></a-entity><a-entity id=teleportation-points><a-text color=white font=mozillavr position="-1.31 0.98 -10.69594" scale="1.84 1.63 0.5" text="color: #f02424" value="Click to teleport"></a-text><a-text color=white font=mozillavr position="-2.07807 0.64299 -2.35108" scale="1.84 1.63 0.5" text="color: #f02424" value="Choose your character" rotation="-45 0 0"></a-text><a-cylinder class=teleportation-point color=#39BB82 event-set__mouseenter="[object Object]" event-set__mouseleave="[object Object]" geometry="" height=0.05 material="" onclick=smoothTeleport() position="0 0.025 -10.69594" radius=0.25></a-cylinder></a-entity><a-entity camera look-controls="pointerLockEnabled: true" position="0 1.6 0"><a-entity id=fadeBackground material="color: black; side: back; shader: flat; transparent: true; opacity: 0.6" visible geometry="primitive: sphere; radius: 2.5"></a-entity></a-entity><a-entity id=leftHand laser-controls="hand: left" raycaster="objects: .raycastable"></a-entity><a-entity id=rightHand laser-controls="hand: right" raycaster="objects: .raycastable" line="color: #118A7E"></a-entity><a-entity id=ui position="0 1.6 -2.5"><a-entity id=menu highlight><a-entity id=mainCharacters></a-entity><script>function createCharacterButton(e,t,r,n){return`\n              <a-entity id="${e}Button" position="${t}" mixin="frame" class="raycastable menu-button" scale="1.5 1.5 1.5">\n                <a-entity material="src: #${r}" mixin="poster"></a-entity>\n                <a-entity\n                  class="choose-button raycastable menu-button"\n                  position="0 -0.5 0.01"\n geometry="primitive: plane; width: 0.6; height: 0.15"\n material="color: #4CAF50"\ntext="value: Choose; align: center; color: white; wrapCount: 8;"\n font="mozillavr"\n main-character-chooser\n data-character="${n}">\n                </a-entity>\n              </a-entity>\n            `}const characters=[{id:"charlesBorromeo",position:"0 0 0",posterSrc:"charlesBorromeoPoster",name:"Charles Borromeo"},{id:"heinrichKramer",position:"1.2 0 0",posterSrc:"heinrichKramerPoster",name:"Heinrich Kramer"},{id:"jacobSprenger",position:"-1.2 0 0",posterSrc:"jacobSprengerPoster",name:"Jacob Sprenger"},{id:"matthewHopkins",position:"-2.4 0 0",posterSrc:"matthewHopkinsPoster",name:"Matthew Hopkins"}];characters.forEach((e=>{document.getElementById("mainCharacters").innerHTML+=createCharacterButton(e.id,e.position,e.posterSrc,e.name)}))</script><a-entity id=npcCharacters visible><a-entity id=cat visible mixin=frame animation__scale="dur: 200; property: scale; startEvents: mouseenter; to: 1.2 1.2 1.2" animation__scale_reverse="dur: 200; property: scale; startEvents: mouseleave; to: 1 1 1" class="raycastable menu-button" geometry="width: 0.578; height: 0.819" position="0.03343 -0.31764 -5" scale=""><a-entity id=talkingCatPoster material="src: #catPoster; color: #046de7" mixin=poster geometry=""></a-entity><a-entity id=catText position="-1.06947 0.28773 1" class=sc1 font=mozillavr text="value: A hunter of witches, I presume? You smell of fire, fear, and desperation. Tell me, human... are you seeking to snuff out the flames of those who wield power beyond your understanding?; align: center; color: red; wrapCount: 20"></a-entity><a-entity id=catYesButton material="color: white" geometry="primitive: plane; width: 0.6; height: 0.15" class="raycastable menu-button choose-button" position="-1.52589 -0.58949 0.01" font=mozillavr text="value: Hunting; align: center; color: white; wrapCount: 8"></a-entity><a-entity id=catNoButton material="color: #046de7" geometry="primitive: plane; width: 0.6; height: 0.15" class="raycastable menu-button choose-button" position="-0.66136 -0.59376 0.01" font=mozillavr text="value: Help; align: center; color: white; wrapCount: 8"></a-entity></a-entity></a-entity><a-entity id=infoPanel material="color: #333333; shader: flat; transparent: false" visible geometry="primitive: plane; width: 1.5; height: 1.8" class=raycastable position="0 0 0.5" scale="0.001 0.001 0.001" info-panel><a-entity id=charlesBorromeoCharacterImage material="src: #charlesBorromeo" visible mixin=CharacterImage></a-entity><a-entity id=heinrichKramerCharacterImage material="src: #heinrichKramer" visible mixin=CharacterImage></a-entity><a-entity id=jacobSprengerCharacterImage material="src: #jacobSprenger" visible mixin=CharacterImage></a-entity><a-entity id=matthewHopkinsCharacterImage material="src: #matthewHopkins" visible mixin=CharacterImage></a-entity><a-entity id=samuelParrisCharacterImage material="src: #samuelParris" visible mixin=CharacterImage></a-entity><a-entity id=catCharacterImage material="src: #cat" visible mixin=CharacterImage></a-entity><a-entity id=characterName position="-0.68 -0.1 0" text="shader: msdf; anchor: left; width: 1.5; font: mozillavr; color: white; value: aaa"></a-entity><a-entity id=characterDescription position="-0.68 -0.2 0" text="baseline: top; shader: msdf; anchor: left; font: mozillavr; color: white; value: lll"></a-entity></a-entity></a-entity></a-scene><script>function smoothTeleport(){const e=document.querySelector("#camera"),t=e.getAttribute("position"),a={x:0,y:1.6,z:-3};let n;document.querySelector("#npcCharacters").setAttribute("visible","true"),requestAnimationFrame((function c(o){n||(n=o);const r=(o-n)/1e3;r<1?(e.setAttribute("position",{x:t.x+(a.x-t.x)*r,y:t.y+(a.y-t.y)*r,z:t.z+(a.z-t.z)*r}),requestAnimationFrame(c)):(e.setAttribute("position",a),document.querySelector("#teleportation-points").innerHTML="",startWitchHunt())}))}function startWitchHunt(){document.getElementById("environment").setAttribute("environment","preset","forest"),dgEsA("environment","seed","8"),createHub()}function createHub(){const e=dcE("a-entity");sA(e,[["id","hub"],["position","0 0 0"],["scale","10 10 10"],["color","white"]]),dq("a-scene").appendChild(e)}function gCCh(){const e=localStorage.getItem("chosenCharacter");if(!e)return null;switch(e){case"Charles Borromeo":return charlesBorromeo;case"Heinrich Kramer":return heinrichKramer;case"Jacob Sprenger":return jacobSprenger;case"Matthew Hopkins":return matthewHopkins;case"Samuel Parris":return samuelParris;default:return null}}AFRAME.registerComponent("main-character-chooser",{init:function(){this.chooseCharacter=this.chooseCharacter.bind(this),this.el.addEventListener("click",this.chooseCharacter)},chooseCharacter:function(e){const t=this.el.getAttribute("data-character");localStorage.setItem("chosenCharacter",t);const a=dq("#mainCharacters");a.parentNode.removeChild(a),dq("#cat").setAttribute("visible","true"),this.showCharacterInfo(t)},showCharacterInfo:function(e){const t=dq("#infoPanel");t.setAttribute("visible","true"),t.setAttribute("scale","1 1 1"),dq("#characterName").setAttribute("text","value",e),document.querySelectorAll('[id$="CharacterImage"]').forEach((e=>e.setAttribute("visible","false")));const a=dq(`#${e.replace(" ","")}CharacterImage`);a&&a.setAttribute("visible","true")}}),window.addEventListener("load",(()=>{const e=localStorage.getItem("chosenCharacter");if(e){const t=document.querySelectorAll("[main-character-chooser]");t.length>0&&dq("a-scene").addEventListener("loaded",(function(){const a=t[0].components["main-character-chooser"];a&&a.chooseCharacter({detail:{characterName:e}})}))}}));var p=gCCh();function died(){fF(),dgEsA("catText","text","value: Better luck next time! ; align: center; color: red; wrapCount: 20"),dgEsA("catYesButton","visible",!1),dgEsA("catNoButton","visible",!1)}function ww(){fF(),scc("Get more about witches on the GitHub page!","","","",!1,"catPoster"),dgEsA("catYesButton","visible",!1),dgEsA("catNoButton","visible",!1)}function jjd(){JJ.health<=0?scc(JJ.name+" has been defeated!","sc2","Next witch","Rest",!1,"catPoster"):abtn(),chkw()}function whpc(e){return h=e.health-p.charisma,dgEsA("catText","text",`value: You've weakened ${e.name}! Her health is now ${h}. ; align: center; color: red; wrapCount: 20`),hp(e),md(),Math.max(0,h)}function whpt(e){return h=e.health-p.torture,dgEsA("catText","text",`value: You've weakened ${e.name}! Her health is now ${h}. ; align: center; color: red; wrapCount: 20`),hp(e),md(),Math.max(0,h)}function abtn(){dgEsA("catYesButton","text","value: Blame again! ; align: center; color: white; wrapCount: 8"),dgEsA("catNoButton","text","value: Torture! ; align: center; color: white; wrapCount: 8")}function chkw(){AW.health<=0&&EP.health<=0&&JJ.health<=0&&(dgEsA("catText","class","w"),dgEsA("catText","text","value: You have defeated all the witches! You are the hunter! ; align: center; color: red; wrapCount: 20"),dgEsA("catYesButton","text","value: More witches ; align: center; color: white; wrapCount: 8"))}function md(){p.health<=0&&(fF(),dgEsA("catText","class","go"),dgEsA("catText","text","value: You died! Game over! ; align: center; color: red; wrapCount: 20"))}function awd(e){AW.health<=0?scc(AW.name+" has been defeated!",e,"Next witch","Rest",!1,"catPoster"):abtn(),chkw()}function hp(e){p.health-=e.attack,p.health=Math.max(0,p.health)}function scc(e,t,a,n,c,o){c?fO():fF(),dgEsA("catText","class",t),dgEsA("catText","text","value: "+e+" ; align: center; color: red; wrapCount: 20"),dgEsA("talkingCatPoster","material","src: #"+o+"; color: #046de7"),dgEsA("catYesButton","text","value: "+a+" ; align: center; color: white; wrapCount: 8"),dgEsA("catNoButton","text","value: "+n+" ; align: center; color: white; wrapCount: 8"),p=gCCh()}function fep(){fO(),EP.health=whpc(EP),EP.health<=0?scc(EP.name+" has been defeated!","sc1","Next witch","Rest",!1,"catPoster"):abtn(),chkw()}function fO(){const e=dq("a-scene"),t=sA(dcE("a-light"),[["type","ambient"],["color","#050d1a"],["intensity","0.3"]]);e.appendChild(t);const a=sA(dcE("a-light"),[["type","directional"],["color","#8090a6"],["intensity","0.1"],["position","-1 2 -0.5"]]);e.appendChild(a),e.setAttribute("fog",{type:"exponential",color:"#050d1a",near:1,far:30,density:.2});const n=dq("a-sky");n&&n.parentNode.removeChild(n);const c=document.createElement("a-sky");c.setAttribute("color","#050d1a"),e.appendChild(c)}function fF(){const e=dq("a-scene");e.removeAttribute("fog");const t=dq('a-light[type="ambient"]'),a=dq('a-light[type="directional"]');t&&e.removeChild(t),a&&e.removeChild(a);const n=sA(dcE("a-light"),[["type","ambient"],["color","#ffffff"],["intensity","0.8"]]);e.appendChild(n);const c=sA(dcE("a-light"),[["type","directional"],["color","#ffffff"],["intensity","0.6"],["position","1 1 1"]]);e.appendChild(c);const o=dq("a-sky");if(o)o.setAttribute("color","#87ceeb");else{const t=document.createElement("a-sky");t.setAttribute("color","#87ceeb"),e.appendChild(t)}}document.addEventListener("DOMContentLoaded",(function(){dq("#cat").addEventListener("click",(function(){})),dq("#catYesButton").addEventListener("click",(function(){const e=document.getElementById("catText").getAttribute("class");"sc1"==e?scc("Not all witches are the same!","f1",AW.name,JJ.name,!0,"catPoster"):"sch1"==e?scc("You look... troubled, hunter.","sc1","Hunt!","Get heal",!1,"catPoster"):"sc2"==e?scc("Ready to face a witch?","f2",EP.name,AW.name,!1,"catPoster"):"f2"==e?scc(EP.name+": Austrian, who bewitched children!","fep","Blame!","Torture!",!0,"elizabethplainacherPoster"):"f1"==e?scc(AW.name+": English baby killer.","faw","Blame!","Torture!",!0,"agneswaterhousePoster"):"fjj"==e?(fO(),JJ.health=whpc(JJ),jjd()):"fep"==e?fep():"faw"==e?(fO(),AW.health=whpc(AW),awd("sc1")):"w"==e?ww():"go"==e&&died()})),dq("#catNoButton").addEventListener("click",(function(){const e=document.getElementById("catText").getAttribute("class");"sc1"==e?scc("Do you need strength in battle?","sch1","sharpened edge","healing potion",!1,"catPoster"):"sch1"==e?scc("You look... troubled.","sc1","Hunt!","Get heal",!1,"catPoster"):"f1"==e?scc(JJ.name+": Burgomaster of Bamberg, accused of witchcraft.","fjj","Blame!","Torture!",!0,"johannesjuniusPoster"):"fep"==e?fep():"faw"==e?(fO(),AW.health=whpt(AW),awd("sc2")):"fjj"==e?(fO(),JJ.health=whpt(JJ),jjd()):"w"==e?ww():"go"==e&&died()}))}))</script>