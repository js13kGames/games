<!doctype html><meta content="width=device-width" name=viewport><title>Back Read</title><style>.background1{background:radial-gradient(circle,#bed678 0,#3b8d89 100%)}.background2{background:linear-gradient(-45deg,transparent 25%,hsla(0,0%,100%,.2) 0,hsla(0,0%,100%,.2) 50%,transparent 0,transparent 75%,hsla(0,0%,100%,.2) 0),linear-gradient(45deg,transparent 25%,hsla(0,0%,100%,.2) 0,hsla(0,0%,100%,.2) 50%,transparent 0,transparent 75%,hsla(0,0%,100%,.2) 0),#a6d9ee;background-size:20em 20em}.background3{background:repeating-linear-gradient(45deg,transparent 5px,rgba(10,35,45,.15) 0,rgba(10,35,45,.15) 10px,rgba(211,119,111,0) 0,rgba(211,119,111,0) 35px,rgba(111,211,151,.15) 0,rgba(168,211,111,.15) 40px,rgba(10,35,45,.15) 0,rgba(10,35,45,.15) 50px,rgba(10,35,45,0) 0,rgba(10,35,45,0) 60px,rgba(111,211,211,.15) 0,rgba(111,137,211,.15) 70px,rgba(247,242,84,.15) 0,rgba(84,247,209,.15) 80px,rgba(247,179,84,0) 0,rgba(247,179,84,0) 90px,rgba(135,111,211,.15) 0,rgba(111,165,211,.15) 110px,rgba(211,119,111,0) 0,rgba(211,119,111,0) 120px,rgba(10,45,35,.15) 0,rgba(19,10,45,.15) 140px),repeating-linear-gradient(135deg,transparent 5px,rgba(10,35,45,.15) 0,rgba(10,35,45,.15) 10px,rgba(211,119,111,0) 0,rgba(211,119,111,0) 35px,rgba(211,111,185,.15) 0,rgba(111,174,211,.15) 40px,rgba(10,22,45,.15) 0,rgba(10,18,45,.15) 50px,rgba(10,35,45,0) 0,rgba(10,35,45,0) 60px,rgba(111,160,211,.15) 0,rgba(126,111,211,.15) 70px,rgba(247,212,84,.15) 0,rgba(247,179,84,.15) 80px,rgba(247,179,84,0) 0,rgba(247,179,84,0) 90px,rgba(111,211,197,.15) 0,rgba(111,211,179,.15) 110px,rgba(211,119,111,0) 0,rgba(211,119,111,0) 140px,rgba(10,45,32,.15) 0,rgba(17,10,45,.15) 160px),#a6eed0}.background4{background:linear-gradient(45deg,rgba(0,0,0,.1) 25%,transparent 0,transparent 75%,rgba(0,0,0,.1) 0,rgba(0,0,0,.0980392) 0),linear-gradient(45deg,rgba(0,0,0,.1) 25%,transparent 0,transparent 75%,rgba(0,0,0,.1) 0,rgba(0,0,0,.1) 0),#a6e7ee;background-position:0 0,40px 40px;background-size:80px 80px}.speaker{vertical-align:middle;box-sizing:border-box;display:inline-block;background:currentColor;background-clip:content-box;width:1em;height:1em;border:.333em solid transparent;border-right-color:initial;position:relative;left:-.337em}.speaker.on:after,.speaker.on:before{content:"";background:currentColor;width:.1em;position:absolute}.speaker.on:before{height:.333em;right:-.533em}.speaker.on:after{height:.667em;right:-.733em;top:-50%}.speaker.off:after,.speaker.off:before{content:"";background:currentColor;width:.1em;position:absolute;height:1.2em;margin-top:-.333em;top:-.1em;left:.1em;transform:translateX(.333em) rotate(-45deg)}.speaker.off:before{background:#04233d;left:.2em}.css-clock{width:18px;height:18px;border-radius:50%;background-color:#fff;position:relative;display:block}.css-clock:before{height:9px;left:9px;top:3px}.css-clock:after,.css-clock:before{content:"";width:1px;background-color:#636363;display:block;position:absolute;opacity:.6}.css-clock:after{height:6px;top:7px;left:11px;transform:rotate(45deg)}*{box-sizing:border-box;-webkit-user-select:none;user-select:none}body,html{height:100%}body{margin:0;overflow:hidden;font-family:sans-serif}.button,.speaker,a,button{cursor:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAolBMVEUAAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB77zEsqgBu7RFf3QNU2QBGuwAopgAfngCH9UeF+zh/9DNs6g9k4QZf3gQ7sQCK/j6H/DxKwgAinwCV/1Z49hpQvhRp5wto5wti5QIipACK+k2R/0By8BRZ3ABRyAA/tQBDtAAbnwC9d09BAAAAFHRSTlMABTMCFn0QHgqbgGZbLiCOjHRDHCnm7AYAAACqSURBVDjL7dLJEoIwDIBhFltkdaOtUBWUHcHd938149k2d2f4r/kOmUmMB6WmbSBVVThDRXV9WqhIiv0JFUl5QAWAGBdJEeMCAIjypRVds4MuTacT47D9dh/eGsG4OEIiz0a1ACDyPuP81jIQvyDNRH6WUtZ1ynxHCWDuLjxCyCpQAt5L11tbUBhRBWBt7RJrQ+eQqVwyXRL0WFHg4+emjoM/jAnZxtQ/9AFcVA7F82ZJgQAAAABJRU5ErkJggg=="),auto}.header{overflow:hidden;background-color:rgba(0,0,0,.3);width:100%;color:#fff;padding:14px 16px;text-align:center;display:grid;grid-template-columns:auto 1fr auto}.scene{height:100%;margin:0 10px}.scene.inactive{display:none}.container{height:100%;display:grid;grid-template-rows:auto 1fr;align-items:center;cursor:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAA7VBMVEUAAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEDe9fDC4/zX8fG11+6y0e15mbXq///u//652vSu1PKrwr6etrRzj6294v7m/P3C4Pvh9/e92vfk+va30vOw1PK12O+nvr19nrikurZ4krVvj6tshqr////0///O7v/G5P/D2/7h/Py+1/zl/vvs//q+3Pqz2ffa9fba8fG01PDC1cy9z8i6zMS0yMR8n76Do7yhvLusv7qCo7l2jbSnvbJ6lrJxiK5viaoSVG2nAAAAF3RSTlMABDIHFn8QHguae2ZbNSwgnI6MdEMcCRKrcsoAAADDSURBVDjL7dLHFoJADEBRGGXA3hUEKaJURbH33tv/f46wH7L3HF+WubuE2mMcoymgwzEbB8VpeEOg0EZyDxSabDdA0W3UzEUzFJFA2JptQFzbgiBsZtFCk2tB9vIZJc4tV3VVdd2SIsSdr9c7wSi8RxYeL4qKZRj8ZHxBcQKQVuJO8X1d1yUpxRLAyxKdT77AMEyylCaB/twZJJhyBiGUzWESmAb7TAVzHFeN0QTweBeT4LFy6RR8bsyy8MPQYdS/X+gLp8ATaP9llugAAAAASUVORK5CYII="),auto}@media screen and (min-width:376px) and (min-height:700px){body{background-color:#f8f8ff}.container{width:376px;height:700px;margin:auto;position:absolute;top:0;bottom:0;left:0;right:0;border-color:#000;border-style:solid;border-width:60px 16px;border-radius:36px}.container:before{width:60px;height:5px;top:-30px;border-radius:10px}.container:after,.container:before{content:"";display:block;position:absolute;left:50%;transform:translate(-50%,-50%);background:#333}.container:after{width:35px;height:35px;bottom:-65px;border-radius:50%}}div[data-scene=About],div[data-scene=GameOver],div[data-scene=Tutorial]{display:grid;grid-template-columns:auto;align-items:center}div[data-scene=About] div.colored,div[data-scene=GameOver] div.colored,div[data-scene=Tutorial] div.colored{border-radius:.2em;border:2px solid #000;line-height:16px;color:#fff;background:rgba(33,107,175,.8);padding:10px;text-align:center}div[data-scene=About] div.colored:nth-child(2n+0),div[data-scene=GameOver] div.colored:nth-child(2n+0),div[data-scene=Tutorial] div.colored:nth-child(2n+0){background:rgba(228,152,0,.8)}div[data-scene=About] div.colored:nth-child(3n+0),div[data-scene=GameOver] div.colored:nth-child(3n+0),div[data-scene=Tutorial] div.colored:nth-child(3n+0){background:rgba(82,156,79,.8)}div[data-scene=About] a,div[data-scene=GameOver] a,div[data-scene=Tutorial] a{background-color:#f90;color:#fff;padding:2px 4px;text-decoration:none;border-radius:2px;border:1px solid #000}div[data-scene=About] a:hover,div[data-scene=GameOver] a:hover,div[data-scene=Tutorial] a:hover{background-color:#c16e00}div[data-scene=Menu]{display:grid;grid-template-columns:auto 1fr auto;align-items:center;margin:0}div[data-scene=Menu] .perspective{position:relative;width:210px;height:140px;margin:0 auto;perspective:1000px}div[data-scene=Menu] .perspective .menu-carousel{width:100%;height:100%;position:absolute;transform-style:preserve-3d;transition:transform 1s}div[data-scene=Menu] .perspective .menu-carousel .menu-option{position:absolute;width:190px;height:120px;left:10px;top:10px;border-radius:.2em;border:2px solid #000;line-height:116px;font-size:30px;font-weight:700;color:#fff;text-align:center}div[data-scene=Menu] .perspective .menu-carousel .menu-option:hover div{transform:rotateY(0)}div[data-scene=Menu] .perspective .menu-carousel .menu-option div{transform:rotateY(180deg);transition:.5s}div[data-scene=Menu] .perspective .menu-carousel .menu-option:first-child{background:rgba(82,156,79,.95);transform:rotateY(0) translateZ(60px)}div[data-scene=Menu] .perspective .menu-carousel .menu-option:nth-child(2){background:rgba(33,175,154,.95);transform:rotateY(120deg) translateZ(60px)}div[data-scene=Menu] .perspective .menu-carousel .menu-option:nth-child(3){background:rgba(228,152,0,.95);transform:rotateY(240deg) translateZ(60px)}div[data-scene=Menu] .next,div[data-scene=Menu] .previous{display:inline-block;padding:6px 17px;margin:0 10px;background-color:hsla(0,0%,100%,.36);color:#0d74b6;border-radius:50%;font-size:25px}div[data-scene=Menu] .next:hover,div[data-scene=Menu] .previous:hover{background-color:#a6d9ee}div[data-scene=GamePlay]{display:grid;grid-template-rows:repeat(6,1fr);align-items:center;text-align:center}div[data-scene=GamePlay] .sentence{font-size:30px;transform:rotateY(180deg);text-transform:uppercase;border-radius:.2em;border:2px solid #000;line-height:45px;font-weight:700;color:#fff;background:rgba(82,156,79,.9)}div[data-scene=GamePlay] .question{font-size:18px;border-radius:.2em;border:2px solid #000;line-height:38px;color:#fff;background:rgba(167,83,113,.8)}div[data-scene=GamePlay] .status{display:grid;grid-template-columns:repeat(2,1fr);align-items:center}div[data-scene=GamePlay] .status>div{padding:5px;border-radius:.2em;border:2px solid #000;color:#fff;background:rgba(113,65,173,.75);margin:0 10px}.back-to-menu,div[data-scene=GamePlay] .answer{display:inline-block;box-sizing:initial;margin:.5em;padding:0 1.5em;border:2px solid rgba(8,19,19,.8);border-radius:.2em;font:normal normal 700 1em/2em Arial,Helvetica,sans-serif;color:#fff;text-overflow:clip;white-space:nowrap;background:rgba(103,192,185,.9);box-shadow:0 0 1px 1px rgba(50,126,129,.8),0 1px 0 0 rgba(0,0,0,.3);transition:all .2s ease-in-out 10ms}.back-to-menu:hover,div[data-scene=GamePlay] .answer:hover{border:2px solid rgba(11,10,22,.9);box-shadow:inset 0 0 1px 1px rgba(10,11,14,.8),0 1px 0 0 rgba(0,0,0,.3)}.back-to-menu:active,div[data-scene=GamePlay] .answer:active{position:relative;top:1px;border:2px solid #030707;color:#e9e9e9;background:#52a19a;box-shadow:inset 0 0 1px 1px rgba(56,56,56,.8),inset 0 1px 0 0 rgba(0,0,0,.3);transition:none}.current-streak,.longest-streak{font-size:large;font-weight:700}</style><div class="background1 container"><div class=header><div class=left><i class="on speaker"></i></div><div class=center></div><div class=right><i class=css-clock></i></div></div><div class="inactive scene" data-scene=Menu><div><div class="button previous">‹</div></div><div><div class=perspective><div class=menu-carousel><div class="button menu-option" data-option=GamePlay><div>START</div></div><div class="button menu-option" data-option=Tutorial><div>TUTORIAL</div></div><div class="button menu-option" data-option=About><div>ABOUT</div></div></div></div></div><div><div class="button next">›</div></div></div><div class="inactive scene" data-scene=Tutorial><div class=colored><strong>Game Tutorial</strong></div><div class=colored><em>Back Read</em> is composed by multiple-choice questions.</div><div class=colored>Read the reverse-text on the board and answer the question.</div><div class=colored>Keep an eye on the clock, the game is over when timer reaches zero.</div><div class=colored>Answering a question correctly gives you 5 seconds more.</div><div class=colored>While answering wrongly penalizes you with 1 second less.</div><div class=colored>Pro Tip: The longer your streak, the harder the challenges get!</div><div class="button back-to-menu">‹ Back To Menu</div></div><div class="inactive scene" data-scene=About><div class=colored>Game developed for <a href=https://js13kgames.com target=_blank>Js13kGames 2019</a></div><div class=colored>Author: Felladrin · <a href=https://github.com/felladrin target=_blank>GitHub</a> · <a href=https://www.linkedin.com/in/victornogueira target=_blank>LinkedIn</a></div><div class=colored>Source code available <a href=https://github.com/felladrin/js13k-2019 target=_blank>here</a></div><div class="button back-to-menu">‹ Back To Menu</div></div><div class="inactive scene" data-scene=GamePlay><div class=sentence></div><div class=question></div><div class="button answer" data-id=0></div><div class="button answer" data-id=1></div><div class="button answer" data-id=2></div><div class="button answer" data-id=3></div><div class=status><div>Current Streak<div class=current-streak>0</div></div><div>Longest Streak<div class=longest-streak>0</div></div></div></div><div class="inactive scene" data-scene=GameOver><div class=colored><strong>Time's Over!</strong></div><div class=colored>That was great! Check the stats!</div><div class=colored>Your streak in this round: <span class=current-streak>0</span></div><div class=colored>Your longest streak: <span class=longest-streak>0</span></div><div class=colored>Challenge your family and friends to see if they can do better!</div><div class="button back-to-menu">‹ Back To Menu</div></div></div><script>!function(){var e,t,n=function(){function e(){this.slots=[],this.onces=[]}return e.prototype.add=function(e){return"function"==typeof e&&this.slots.push(e),this},e.prototype.emit=function(e){this.notify(this.slots,e),this.notify(this.onces,e),this.onces=[]},e.prototype.notify=function(e,t){for(var n=e.length;n--;){var i=e[n];i.call(i,t||null)}},e}(),i=function(){function e(){}return e.sceneDisplayed=new n,e.audioMuteChanged=new n,e.gamePlayCountDownStarted=new n,e.gamePlayCountDownUpdated=new n,e.gamePlayCountDownStopped=new n,e.gamePlayCountDownTimeOver=new n,e.answeredCorrectly=new n,e.answeredWrongly=new n,e}(),r=function(){function e(){}return e.initialize=function(){var e=this;i.answeredCorrectly.add((function(){return e.addBonusTime(5)})),i.answeredWrongly.add((function(){return e.deductTime(1)}))},e.addBonusTime=function(e){this.count+=e,i.gamePlayCountDownUpdated.emit(this.count)},e.deductTime=function(e){this.count-=e,i.gamePlayCountDownUpdated.emit(this.count),this.count<=0&&(this.stop(),i.gamePlayCountDownTimeOver.emit())},e.start=function(t){var n=this;this.count=t,this.intervalTimerId=setInterval((function(){n.handleTimeout()}),e.ONE_SECOND),i.gamePlayCountDownStarted.emit(this.count)},e.stop=function(){clearInterval(this.intervalTimerId),i.gamePlayCountDownStopped.emit(this.count)},e.handleTimeout=function(){this.count--,i.gamePlayCountDownUpdated.emit(this.count),this.count<=0&&(this.stop(),i.gamePlayCountDownTimeOver.emit())},e.count=0,e.intervalTimerId=0,e.ONE_SECOND=1e3,e}();!function(e){e.Menu="Menu",e.Tutorial="Tutorial",e.About="About",e.GamePlay="GamePlay",e.GameOver="GameOver"}(t||(e=t={},e));var o=function(){function e(){}return e.getScene=function(e){return document.querySelector('div[data-scene="'+e+'"]')},e.getAnswerButton=function(e){return document.querySelector('.answer[data-id="'+e+'"]')},e.setBackgroundId=function(e){for(var t=document.querySelector(".container").classList,n=1;n<5;n++)t.remove("background"+n);t.add("background"+e)},e.menuCarousel=document.querySelector(".menu-carousel"),e.previousButton=document.querySelector(".previous.button"),e.nextButton=document.querySelector(".next.button"),e.headerCenter=document.querySelector(".header .center"),e.headerRight=document.querySelector(".header .right"),e.speaker=document.querySelector(".speaker"),e.sentenceElement=document.querySelector(".sentence"),e.questionElement=document.querySelector(".question"),e.currentStreakElements=document.querySelectorAll(".current-streak"),e.longestStreakElements=document.querySelectorAll(".longest-streak"),e.answerButtons=document.querySelectorAll(".answer"),e.backToMenuButtons=document.querySelectorAll(".back-to-menu.button"),e.allButtons=document.querySelectorAll(".button"),e}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.start=t.start,this.end=t.end,this.decimal=t.decimal}return a(e,[{key:"getIntermediateValue",value:function(e){return this.decimal?e:Math.round(e)}},{key:"getFinalValue",value:function(){return this.end}}]),e}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var c,l,h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.duration=t.duration||1e3,this.ease=t.easing||this._defaultEase,this.tweener=t.tweener||new s(t),this.start=this.tweener.start,this.end=this.tweener.end,this.frame=null,this.next=null,this.isRunning=!1,this.events={},this.direction=this.start<this.end?"up":"down"}return u(e,[{key:"begin",value:function(){return this.isRunning||this.next===this.end||(this.frame=window.requestAnimationFrame(this._tick.bind(this))),this}},{key:"stop",value:function(){return window.cancelAnimationFrame(this.frame),this.isRunning=!1,this.frame=null,this.timeStart=null,this.next=null,this}},{key:"on",value:function(e,t){return this.events[e]=this.events[e]||[],this.events[e].push(t),this}},{key:"_emit",value:function(e,t){var n=this,i=this.events[e];i&&i.forEach((function(e){return e.call(n,t)}))}},{key:"_tick",value:function(e){this.isRunning=!0;var t=this.next||this.start;this.timeStart||(this.timeStart=e),this.timeElapsed=e-this.timeStart,this.next=this.ease(this.timeElapsed,this.start,this.end-this.start,this.duration),this._shouldTick(t)?(this._emit("tick",this.tweener.getIntermediateValue(this.next)),this.frame=window.requestAnimationFrame(this._tick.bind(this))):(this._emit("tick",this.tweener.getFinalValue()),this._emit("done",null))}},{key:"_shouldTick",value:function(e){return{up:this.next<this.end&&e<=this.next,down:this.next>this.end&&e>=this.next}[this.direction]}},{key:"_defaultEase",value:function(e,t,n,i){return(e/=i/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t}}]),e}(),d=function(){function e(){}return e.initialize=function(){e.displayScene(this.currentScene)},e.displayScene=function(e){var n=function(t){o.getScene(e).style.opacity=(t/100).toString()};new h({start:100,end:0,duration:500}).on("tick",n).on("done",(function(){for(var r in t){var a=o.getScene(t[r]);e==r?a.classList.remove("inactive"):a.classList.add("inactive")}new h({start:0,end:100,duration:500}).on("tick",n).on("done",(function(){i.sceneDisplayed.emit(e)})).begin()})).begin()},e.currentScene=t.Menu,e}(),f=function(){function e(){}return e.initialize=function(){var e=this;o.previousButton.addEventListener("click",(function(){e.selectedIndex--,e.rotate()})),o.nextButton.addEventListener("click",(function(){e.selectedIndex++,e.rotate()}));for(var t=o.menuCarousel.children,n=function(e){var n=t[e];n.addEventListener("click",(function(){d.displayScene(n.dataset.option)}))},i=0;i<t.length;i++)n(i)},e.rotate=function(){var e=this.selectedIndex/this.cellCount*-360;o.menuCarousel.style.transform="rotateY("+e+"deg)"},e.cellCount=o.menuCarousel.children.length,e.selectedIndex=0,e}(),m="Back Read",p=function(){function e(){}return e.initialize=function(){var e=this;o.speaker.addEventListener("click",(function(){return e.toggleSound()})),i.gamePlayCountDownStarted.add(this.displayCountDown),i.gamePlayCountDownUpdated.add(this.displayCountDown),i.gamePlayCountDownStopped.add(this.displayClockIcon),i.gamePlayCountDownTimeOver.add(this.displayClockIcon)},e.changeInnerHTML=function(e){return new Promise((function(t){var n=function(e){o.headerCenter.style.opacity=(e/100).toString()};new h({start:100,end:0,duration:500}).on("tick",n).on("done",(function(){o.headerCenter.innerHTML=e,new h({start:0,end:100,duration:500}).on("tick",n).on("done",t).begin()})).begin()}))},e.displayCountDown=function(e){if(o.headerRight.innerHTML=e,!(e>5)){var t=function(e){o.headerRight.style.transform="scale("+e/100+")"};new h({start:100,end:200,duration:250}).on("tick",t).on("done",(function(){new h({start:200,end:100,duration:250}).on("tick",t).begin()})).begin()}},e.displayClockIcon=function(){o.headerRight.innerHTML=e.clockIcon},e.isAudioDisabled=function(){return o.speaker.classList.contains("off")},e.toggleSound=function(){var e=o.speaker.classList;e.toggle("on"),e.toggle("off"),i.audioMuteChanged.emit(this.isAudioDisabled())},e.displayNotification=function(e){var t=this;this.changeInnerHTML("<em>"+e+"</em>").then((function(){t.changeInnerHTML(m).then()}))},e.clockIcon=o.headerRight.innerHTML,e}(),g=function(e){var t=this;this.oscSin=function(e){return Math.sin(6.283184*e)},this.oscSaw=function(e){return e%1*2-1},this.oscSquare=function(e){return e%1<.5?1:-1},this.oscTri=function(e){var t=e%1*4;return t<2?t-1:3-t},this.mOscillators=[this.oscSin,this.oscSquare,this.oscSaw,this.oscTri],this.getNoteFreq=function(e){return.003959503758*Math.pow(2,(e-128)/12)},this.createNote=function(e,n,i){var r,o,a,s,u,c,l,h=t.mOscillators[e.i[0]],d=e.i[1],f=e.i[3],m=t.mOscillators[e.i[4]],p=e.i[5],g=e.i[8],v=e.i[9],k=e.i[10]*e.i[10]*4,w=e.i[11]*e.i[11]*4,y=e.i[12]*e.i[12]*4,S=1/y,b=i*Math.pow(2,2-e.i[14]),C=e.i[13],I=new Int32Array(k+w+y),T=0,M=0;for(r=0,o=0;r<k+w+y;r++,o++)o>=0&&(C=C>>8|(255&C)<<4,o-=b,c=t.getNoteFreq(n+(15&C)+e.i[2]-128),l=t.getNoteFreq(n+(15&C)+e.i[6]-128)*(1+8e-4*e.i[7])),a=1,r<k?a=r/k:r>=k+w&&(a-=(r-k-w)*S),s=c,f&&(s*=a*a),u=h(T+=s)*d,s=l,g&&(s*=a*a),u+=m(M+=s)*p,v&&(u+=(2*Math.random()-1)*v),I[r]=80*u*a|0;return I},this.generate=function(){var e,n,i,r,o,a,s,u,c,l,h,d,f,m,p=new Int32Array(t.mNumWords),g=t.mSong.songData[t.mCurrentCol],v=t.mSong.rowLen,k=t.mSong.patternLen,w=0,y=0,S=!1,b=[];for(i=0;i<=t.mLastRow;++i)for(s=g.p[i],r=0;r<k;++r){var C=s?g.c[s-1].f[r]:0;C&&(g.i[C-1]=g.c[s-1].f[r+k]||0,C<16&&(b=[]));var I=t.mOscillators[g.i[15]],T=g.i[16]/512,M=Math.pow(2,g.i[17]-9)/v,A=g.i[18],E=g.i[19],L=43.23529*g.i[20]*3.141592/44100,x=1-g.i[21]/255,D=1e-5*g.i[22],B=g.i[23]/32,F=g.i[24]/512,W=6.283184*Math.pow(2,g.i[25]-9)/v,O=g.i[26]/255,P=g.i[27]*v&-2;for(h=(i*k+r)*v,o=0;o<4;++o)if(a=s?g.c[s-1].n[r+o*k]:0){b[a]||(b[a]=t.createNote(g,a,v));var N=b[a];for(n=0,e=2*h;n<N.length;n++,e+=2)p[e]+=N[n]}for(n=0;n<v;n++)(l=p[u=2*(h+n)])||S?(d=L,A&&(d*=I(M*u)*T+.5),y+=(d=1.5*Math.sin(d))*(f=x*(l-y)-(w+=d*y)),l=3==E?y:1==E?f:w,D&&(l=(l*=D)<1?l>-1?t.oscSin(.25*l):-1:1,l/=D),S=(l*=B)*l>1e-5,m=l*(1-(c=Math.sin(W*u)*F+.5)),l*=c):m=0,u>=P&&(m+=p[u-P+1]*O,l+=p[u-P]*O),p[u]=0|m,p[u+1]=0|l,t.mMixBuf[u]+=0|m,t.mMixBuf[u+1]+=0|l}return t.mCurrentCol++,t.mCurrentCol/t.mSong.numChannels},this.createWave=function(){var e=44+2*t.mNumWords-8,n=e-36,i=new Uint8Array(44+2*t.mNumWords);i.set([82,73,70,70,255&e,e>>8&255,e>>16&255,e>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,255&n,n>>8&255,n>>16&255,n>>24&255]);for(var r=0,o=44;r<t.mNumWords;++r){var a=t.mMixBuf[r];a=a<-32767?-32767:a>32767?32767:a,i[o++]=255&a,i[o++]=a>>8&255}return i},this.mSong=e,this.mLastRow=e.endPattern,this.mCurrentCol=0,this.mNumWords=e.rowLen*e.patternLen*(this.mLastRow+1)*2,this.mMixBuf=new Int32Array(this.mNumWords)},v=function(){function e(){}return e.create=function(e,t,n,r){void 0===t&&(t=1),void 0===n&&(n=!1),void 0===r&&(r=!1);var o=document.createElement("audio");o.volume=t,o.autoplay=n,o.loop=r;var a=new g(e),s=setInterval((function(){if(a.generate()>=1){clearInterval(s);var e=a.createWave();o.src=URL.createObjectURL(new Blob([e],{type:"audio/wav"}))}}),300);return i.audioMuteChanged.add((function(e){o.muted=e})),o},e}(),k={songData:[{i:[1,163,128,0,3,119,116,0,0,0,0,57,25,0,0,0,195,6,0,1,20,138,1,51,171,6,79,6],p:[,,1,1,1,1,1,1,1,2],c:[{n:[143,,155,148,155,150,143,,155,150,155,150,146,145,141,,143,,155,148,155,150,143,,155,143,155,150,146,,148,150],f:[2,12,,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,48,35,,25]},{n:[143,,155,148,155,150,143,,155,150,155,150,146,145,141,,143,,155,148,155,150,143,,155],f:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,188]}]},{i:[2,232,128,0,3,255,128,0,0,0,0,36,0,0,0,0,195,6,1,2,135,0,24,73,81,6,43,6],p:[1,1,1,1,1,1,1,1],c:[{n:[143,143,131,,,,,,,,,,,,,,,,,,,,,,,,,,,,141,138,138,138,126,,,,,,,,,,,,,,,,,,,,,,,,,,,,136,133],f:[12,,12,,,,,,,,,,,,,,,,,,,,,,,,,,,,12,,28,,36,,,,,,,,,,,,,,,,,,,,,,,,,,,,28]}]},{i:[0,0,128,0,0,0,128,0,0,125,0,1,17,0,0,0,0,0,0,1,229,171,0,68,39,3,0,3],p:[1,1,1,1,2,2,2,2,,,2,2,2,2,2],c:[{n:[,,,,135,,,,,,,,135,,,,,,,,135,,,,,,,,135],f:[24,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,24,32,,,,67,,,,,,,,67,,,,,,,,72,,,,,,,,67,,,68]},{n:[135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135],f:[13,,13,13,,,13,13,,,13,13,,,13,13,,,13,13,,,13,13,,,13,13,,,13,13,17,,32,17,,,32,17,,,32,17,,,32,17,,,32,17,,,32,17,,,32,17,,,32,17]}]},{i:[1,255,128,0,1,154,116,9,0,0,0,36,0,0,0,0,0,0,0,2,164,0,4,15,47,3,63,3],p:[,,,,1,2,1,2,1,4,3,3,3,3,2,4],c:[{n:[119,,131,,131,,131,119,,131,,119,131,,131,131,119,,131,,131,,131,119,,131,,119,131,,131,131],f:[]},{n:[115,,127,,127,,127,115,,127,,115,127,,127,127,112,,124,,124,,124,112,,124,,112,122,,122,122],f:[]},{n:[119,,131,,132,,132,131,,119,131,,132,,132,129,119,,131,,132,,132,131,,119,131,119,132,,132,129],f:[]},{n:[119,,131,,131,,131,119,,131,,119,131,,131,131,119,,131,,131,,131,119,,,,,,,,129],f:[]}]},{i:[3,59,128,1,3,100,128,0,1,131,0,4,40,0,0,1,0,4,1,2,55,115,124,121,67,6,39,1],p:[,,,10,1,1,1,1,,,,10,1,1,1,10],c:[{n:[,,,,147,,,147,,147,,,147,,,,,,,,147,,,147,,147,,,147,,,,,,,,147,,,147,,147,,,147,,,,,,,,147,,,147,,147,,,147],f:[]},{n:[],f:[]},{n:[],f:[]},{n:[],f:[]},{n:[],f:[]},{n:[],f:[]},{n:[],f:[]},{n:[],f:[]},{n:[],f:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,147,147,147,147,147,147,147,147,,,,,,,,,,,,,,,,,,,,,,,,,147,147,147,147,147,147,147,147],f:[,,,,,,,,,,,,,,,,,,,,,,,,24,,,,24,,,,,,,,,,,,,,,,,,,,,,,,,,,,121,,,,255]}]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,0,101,0,3,0,127,0,1,255,72,3,72,0,0,0,0,6,1,2,29,0,0,156,147,3,8,6],p:[,1,,,,,,,,1,,,,,,1],c:[{n:[,,,,,,,,,,,,,,,,,,,,,,,135],f:[]}]}],rowLen:5050,patternLen:32,endPattern:15,numChannels:8},w={};!function(e){e[e.WhatIsTheWord=0]="WhatIsTheWord",e[e.WhatIsTheResult=1]="WhatIsTheResult",e[e.FindTheMissingLetter=2]="FindTheMissingLetter"}(l||(c=l={},c));var y,S,b=[["seal","meal","deal","teal"],["make","fake","take","wake","cake","bake","rake"],["fun","sun","run","bun"],["par","car","far","bar"],["their","there","share","where"],["wear","tear","fear","near","dear","rear","pear"],["chair","stair","fair","hair"],["bay","day","pay","fay","may"],["stay","play","slay","tray"],["date","late","gate","rate","hate","mate"],["rare","dare","fare","care"],["viable","table","cable","fable"],["tone","phone","hone","cone","none","done"],["snow","show","crow","brow","know"],["slow","glow","flow","blow"],["toe","woe","foe","doe"],["now","how","wow","low","vow"],["tall","call","ball","fall"],["might","sight","night","right","tight"],["kite","rite","site","bite"],["rice","nice","dice","vice","mice"],["sense","tense","dense","fence"],["fell","well","tell","bell","hell","sell","yell"],["weigh","sleigh","eight","weight"],["day","hay","may","pay"],["page","wage","rage","cage"],["bee","see","sea","tea"],["beach","teach","reach","peach","leach"],["sane","lane","cane","pane"],["look","cook","book","took"],["tiny","silly","very","lazy"],["week","geek","reek","meet","meat"],["spout","trout","shout","trout","about"],["like","bike","pike","dike"],["free","three","agree","tree"],["could","would","mould","should"],["grain","chain","brain","drain","plain","train"],["gain","pain","rain","main"],["creep","sheep","sweep","sleep","steep","cheep"],["keep","peep","weep","jeep","beep"]],C=function(){function e(){}return e.pickIndexFromLength=function(e){return Math.floor(Math.random()*e)},e.pickIntInclusive=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},e.pickElementFromArray=function(e){return e[this.pickIndexFromLength(e.length)]},e.pickElementFromEnum=function(e){var t=Object.keys(e).map((function(e){return Number.parseInt(e)})).filter((function(e){return!Number.isNaN(e)}));return t[Math.floor(Math.random()*t.length)]},e.shuffle=function(e){for(var t,n=e.length-1;n>0;n--){var i=Math.floor(Math.random()*(n+1));t=[e[i],e[n]],e[n]=t[0],e[i]=t[1]}return e},e}();!function(e){e[e.Addition=0]="Addition",e[e.Subtraction=1]="Subtraction",e[e.Multiplication=2]="Multiplication",e[e.Division=3]="Division"}(S||(y=S={},y));var I=function(){function e(){}return e.save=function(e){var t=JSON.stringify(e),n=this.getCipher(m)(t);localStorage.setItem(m,n)},e.load=function(){var e=localStorage.getItem(m);if(!e)return null;var t=this.getDecipher(m)(e);return JSON.parse(t)},e.getCipher=function(e){var t=function(e){return e.split("").map((function(e){return e.charCodeAt(0)}))},n=function(e){return("0"+Number(e).toString(16)).substr(-2)},i=function(n){return t(e).reduce((function(e,t){return e^t}),n)};return function(e){return e.split("").map(t).map(i).map(n).join("")}},e.getDecipher=function(e){var t=function(t){return(n=e,n.split("").map((function(e){return e.charCodeAt(0)}))).reduce((function(e,t){return e^t}),t);var n};return function(e){return e.match(/.{1,2}/g).map((function(e){return parseInt(e,16)})).map(t).map((function(e){return String.fromCharCode(e)})).join("")}},e}(),T=function(){function e(){}return Object.defineProperty(e,"currentStreak",{get:function(){return this._currentStreak},set:function(e){var t=this;this._currentStreak=e,Array.from(o.currentStreakElements).forEach((function(e){e.innerText=t._currentStreak.toString()})),this.longestStreak=Math.max(this.currentStreak,this.longestStreak)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"longestStreak",{get:function(){return this._longestStreak},set:function(e){var t=this;e!=this._longestStreak&&(this._longestStreak=e,Array.from(o.longestStreakElements).forEach((function(e){e.innerText=t._longestStreak.toString()})),I.save({longestStreak:this._longestStreak}))},enumerable:!0,configurable:!0}),e.initialize=function(){var e=this,t=I.load();t&&(this.longestStreak=t.longestStreak),i.answeredCorrectly.add((function(){return e.currentStreak++}))},e._currentStreak=0,e._longestStreak=0,e}(),M=w&&w.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},A=function(){function e(){}return e.initialize=function(){this.listenToAnswersSelected()},e.listenToAnswersSelected=function(){var e=this;Array.from(o.answerButtons).forEach((function(t){t.addEventListener("click",(function(){e.buttonsBlocked||e.processAnswer(t.innerText)}))}))},e.processAnswer=function(e){var n=this;e==this.expectedAnswer?i.answeredCorrectly.emit():i.answeredWrongly.emit();var r=function(e){o.getScene(t.GamePlay).style.opacity=(e/100).toString()};this.buttonsBlocked=!0,new h({start:100,end:0,duration:500}).on("tick",r).on("done",(function(){n.preparePhase(),new h({start:0,end:100,duration:500}).on("tick",r).on("done",(function(){n.buttonsBlocked=!1})).begin()})).begin()},e.setSentence=function(e){o.sentenceElement.innerText=e},e.setQuestion=function(e){o.questionElement.innerText=e},e.setAnswers=function(e){C.shuffle(e);for(var t=0;t<4;t++)o.getAnswerButton(t).innerText=e[t].toString()},e.preparePhase=function(){if(T.currentStreak<10)this.prepareWhatIsTheWord();else if(T.currentStreak<20)C.pickIntInclusive(0,1)?this.prepareWhatIsTheWord():this.prepareFindTheMissingLetter();else switch(C.pickElementFromEnum(l)){case l.WhatIsTheWord:this.prepareWhatIsTheWord();break;case l.FindTheMissingLetter:this.prepareFindTheMissingLetter();break;case l.WhatIsTheResult:this.prepareWhatIsTheResult()}},e.prepareWhatIsTheWord=function(){for(var e=M(C.pickElementFromArray(b)),t=[],n=0;n<4;n++){var i=C.pickIndexFromLength(e.length);t.push(e.splice(i,1))}this.expectedAnswer=C.pickElementFromArray(t),this.setSentence(this.expectedAnswer),this.setQuestion("Which word is that?"),this.setAnswers(t)},e.prepareFindTheMissingLetter=function(){var e=C.pickElementFromArray(b),t=C.pickElementFromArray(e),n=C.pickIndexFromLength(t.length),i=t[n],r=["A","E","I","O","U"],o=["B","C","D","F","G","H","J","K","L","M","N","P","Q","R","S","T","V","W","X","Y","Z"],a=[];if(r.indexOf(i.toUpperCase())>=0)for(var s=0;s<4;s++){var u=C.pickIndexFromLength(r.length),c=r.splice(u,1)[0],l=t.substr(0,n)+c+t.substr(n+1);this.wordExists(l)?s--:a.push(c)}else for(s=0;s<4;s++){var h=C.pickIndexFromLength(o.length),d=o.splice(h,1)[0];l=t.substr(0,n)+d+t.substr(n+1),this.wordExists(l)?s--:a.push(d)}-1==a.indexOf(i.toUpperCase())&&(a[C.pickIndexFromLength(a.length)]=i.toUpperCase());var f=t.substr(0,n)+"_"+t.substr(n+1);this.expectedAnswer=i.toUpperCase(),this.setSentence(f),this.setQuestion("Which letter is missing?"),this.setAnswers(a)},e.prepareWhatIsTheResult=function(){var e=0,t=0,n=0,i="";switch(C.pickElementFromEnum(S)){case S.Addition:i="+",e=(t=C.pickIntInclusive(1,50))+(n=C.pickIntInclusive(1,50));break;case S.Multiplication:i="×",e=(t=C.pickIntInclusive(1,9))*(n=C.pickIntInclusive(1,9));break;case S.Subtraction:i="-",e=(t=C.pickIntInclusive(50,99))-(n=C.pickIntInclusive(1,49));break;case S.Division:i="÷",n=C.pickIntInclusive(1,9),e=(t=C.pickIntInclusive(1,9)*n)/n}for(var r=[],o=0;o<4;o++)r.push(C.pickIntInclusive(e-20,e+20));-1==r.indexOf(e)&&(r[C.pickIndexFromLength(r.length)]=e),this.expectedAnswer=e.toString(),this.setSentence(t+" "+i+" "+n),this.setQuestion("What is the result?"),this.setAnswers(r)},e.wordExists=function(e){for(var t=0;t<b.length;t++)for(var n=b[t],i=0;i<n.length;i++){var r=n[i];if(e.toLowerCase()==r.toLowerCase())return!0}return!1},e.buttonsBlocked=!1,e}();w.GamePlayScene=A;var E=function(){function e(){}return e.initialize=function(){p.initialize(),T.initialize(),f.initialize(),d.initialize(),A.initialize(),r.initialize(),this.listenToCountDownTimerOver(),this.startBackgroundMusicOnFirstInteraction(),this.listenToSceneChanges(),this.listenToBackToMenuClicks(),this.listenToButtonsHoversAndClicks(),this.listenToCorrectlyAnsweredQuestions(),this.setRandomBackground()},e.listenToBackToMenuClicks=function(){Array.from(o.backToMenuButtons).forEach((function(e){e.addEventListener("click",(function(){d.displayScene(t.Menu)}))}))},e.listenToButtonsHoversAndClicks=function(){var e=new AudioContext,t=e.createBuffer(1,96e3,48e3),n=t.getChannelData(0),i=function(e,t){return(t-e)/t},r=e.createGain();r.gain.value=.1,r.connect(e.destination);var a=function(e){return e>4e4?null:Math.sin(e/8e3-Math.sin(e/60)*Math.sin(e/61))*i(e,4e4)},s=function(e){return e>4e4?null:Math.sin(e/6e3-Math.sin(e/90)*Math.sin(e/91))*i(e,4e4)};Array.from(o.allButtons).forEach((function(i){i.addEventListener("click",(function(){if(!p.isAudioDisabled()){for(var i=96e3;i--;)n[i]=a(i);var o=e.createBufferSource();o.buffer=t,o.connect(r),o.start()}})),i.addEventListener("mouseenter",(function(){if(!p.isAudioDisabled()){for(var i=96e3;i--;)n[i]=s(i);var o=e.createBufferSource();o.buffer=t,o.connect(r),o.start()}}))}))},e.listenToSceneChanges=function(){i.sceneDisplayed.add((function(e){switch(e){case t.Menu:p.displayNotification("Welcome! Ready to start?");break;case t.Tutorial:p.displayNotification("Ah, finally someone here!");break;case t.About:p.displayNotification("Curious, huh!?");break;case t.GamePlay:p.displayNotification("Good Luck!"),T.currentStreak=0,A.preparePhase(),r.start(10);break;case t.GameOver:p.displayNotification("Oh no! Time's over!")}}))},e.listenToCountDownTimerOver=function(){i.gamePlayCountDownTimeOver.add((function(){d.displayScene(t.GameOver)}))},e.startBackgroundMusicOnFirstInteraction=function(){var e=function(){v.create(k,.2,!0,!0),document.removeEventListener("mousemove",e),document.removeEventListener("touchstart",e)};document.addEventListener("mousemove",e),document.addEventListener("touchstart",e)},e.setRandomBackground=function(){o.setBackgroundId(C.pickIntInclusive(1,4))},e.listenToCorrectlyAnsweredQuestions=function(){i.answeredCorrectly.add((function(){p.displayNotification(C.pickElementFromArray(["Awesome!","Perfect!","Amazing!","Outstanding!","Splendid!","Marvelous!","Superb!","Fabulous!","Fantastic!","Phenomenal!","Wonderful!"]))}))},e}();E.initialize()}()</script>