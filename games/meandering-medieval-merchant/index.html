<!doctype html><meta content="width=device-width,user-scalable=0,user-scalable=no,minimum-scale=1,maximum-scale=1" name=viewport><style>#c,body,html{margin:0;padding:0;border:0;position:absolute}body,html{width:100%;height:100%}@media (min-aspect-ratio:16/9){#c{max-height:100%}}@media (max-aspect-ratio:16/9){#c{max-width:100%}}</style><title>13th Century</title><canvas height=1080 id=c width=1920></canvas><script>"use strict";let zzfx,zzfxV,zzfxX;zzfxV=.3,zzfx=(e=1,t=.05,z=220,n=0,f=0,a=.1,r=0,x=1,i=0,o=0,s=0,u=0,c=0,d=0,X=0,b=0,w=0,l=1,m=0,C=0)=>{let V,h,A=Math,B=44100,g=2*A.PI,k=i*=500*g/B/B,D=z*=(1-t+2*t*A.random(t=[]))*g/B,I=0,M=0,P=0,S=1,j=0,p=0,q=0;for(o*=500*g/B**3,X*=g/B,s*=g/B,u*=B,c=B*c|0,h=(n=B*n+9)+(m*=B)+(f*=B)+(a*=B)+(w*=B)|0;P<h;t[P++]=q)++p%(100*b|0)||(q=r?1<r?2<r?3<r?A.sin((I%g)**3):A.max(A.min(A.tan(I),1),-1):1-(2*I/g%2+2)%2:1-4*A.abs(A.round(I/g)-I/g):A.sin(I),q=(c?1-C+C*A.sin(g*P/c):1)*(0<q?1:-1)*A.abs(q)**x*e*zzfxV*(P<n?P/n:P<n+m?1-(P-n)/m*(1-l):P<n+m+f?l:P<h-w?(h-P-w)/a*l:0),q=w?q/2+(w>P?0:(P<h-w?1:(h-P)/w)*t[P-w|0]/2):q),V=(z+=i+=o)*A.cos(X*M++),I+=V-V*d*(1-1e9*(A.sin(P)+1)%2),S&&++S>u&&(z+=s,D+=s,S=0),!c||++j%c||(z=D,i=k,S=S||1);return(e=zzfxX.createBuffer(1,h,B)).getChannelData(0).set(t),(z=zzfxX.createBufferSource()).buffer=e,z.connect(zzfxX.destination),z.start(),z},zzfxX=new(window.AudioContext||webkitAudioContext)</script><script>!function(t){"use strict";function i(t,i){var e,s=Object.create(t);for(e in i)s[e]=i[e];return i.toString!==Object.prototype.toString&&(s.toString=i.toString),s}function e(){}function s(){}function h(){}function n(){this.bg="#000"}function a(){}function r(){}function o(t,i,e){this.moving=!1,this.walkCycle=0,this.sprite=null,this.name="",this.guardTurn=-1,this.team=t,this.weapon=i,this.guard=e.guard,this.health=e.health,this.speed=e.speed,this.attack=e.attack,this.maxGuard=this.guard,this.lastGuard=this.guard}function l(t,i,e){this.endTurn=-1,this.moveToY=-1,this.moveToX=-1,this.tgt=null,o.call(this,t,i,e)}function c(t,i){l.call(this,1,i,t),this.sprite=L.n[Math.floor(Math.random()*L.n.length)]}function u(t){this.endTimer=0,this.endType=0,this.idx=0,this.turn=0,this.characters=[],n.call(this),Y.f(),this.bg="#7C4F30",this.mapState=t,(l=new w).x=.25*h.w,l.y=.25*h.h,this.characters.push(l),null!=e.g&&((t=new _(e.g)).x=.25*h.w,t.y=.75*h.h,this.characters.push(t));for(var i=this.cer(e.p+e.v()),a=1/(i[1]+1),r=0,o=i[1];r<o;){var l,u=r++;(l=new c(s.makeStats(i[2]),s.randomWeapon())).name="Bandit "+(1+u),l.x=.75*h.w,l.y=h.h*(a*(1+u)),this.characters.push(l)}this.characters.sort((function(t,i){return Math.round(i.speed-t.speed)})),this.drawCharacters=this.characters.slice()}function f(t,i,e){this.spr=t,this.ox=i,this.oy=e}function p(t,i,e){this.width=5,f.call(this,t,i,e)}e.__name__=!0,e.t=function(){e.p=24;for(var t=[],i=0,s=P.e.length;i<s;)i++,t.push(0);e.s=t},e.v=function(){for(var t=0,i=0,s=e.s.length;i<s;){var h=i++;t+=Math.floor(.8*P.b[h]*e.s[h])}return t},s.__name__=!0,s.findNearestPointOnLine=function(t,i,e,s,h,n){return n-=s,{x:e+(h-=e)*(i=Math.min(1,Math.max(0,((t-e)*h+(i-s)*n)/(h*h+n*n)))),y:s+n*i}},s.makeStats=function(t){for(var i={guard:1,speed:1,health:1,attack:1},e=0,s=t;e<s;)switch(e++,Math.round(3*Math.random())){case 0:i.guard++;break;case 1:i.speed++;break;case 2:i.health++;break;case 3:i.attack++}return i},s.randomWeapon=function(){switch(Math.floor(6*Math.random())){case 0:case 1:case 2:return new y;case 3:case 4:return new g;default:return new d}},h.__name__=!0,h.main=function(){h.e=window.document.getElementById("c"),h.c=h.e.getContext("2d",null),window.document.body.onresize=h.r,h.r(),P.load(),L.l((function(){h.s(new C)})),W.i(),e.t(),h.w=h.e.width,h.h=h.e.height,window.requestAnimationFrame(h.u)},h.r=function(){var t=Math.floor((window.document.body.clientWidth-h.e.clientWidth)/2),i=Math.floor((window.document.body.clientHeight-h.e.clientHeight)/2);h.e.style.left=t+"px",h.e.style.top=i+"px"},h.u=function(t){null!=h.t&&h.t.u((t-h.l)/1e3),h.l=t,W.u(),window.requestAnimationFrame(h.u)},h.s=function(t){h.t=t},h.fot=function(t,i,e){h.c.strokeText(t,i,e),h.c.fillText(t,i,e)},Math.__name__=!0,n.__name__=!0,n.prototype={u:function(t){h.c.fillStyle=this.bg,h.c.fillRect(0,0,h.w,h.h)},tc:function(t,i){var e=h.c.measureText(t).width;h.c.fillText(t,h.w/2-e/2,i)}},a.__name__=!0,a.string=function(t){return v.__string_rec(t,"")},a.parseInt=function(t){return t=parseInt(t),isNaN(t)?null:t},a.parseFloat=function(t){return parseFloat(t)},r.__name__=!0,r.replace=function(t,i,e){return t.split(i).join(e)},o.__name__=!0,o.prototype={u:function(t){var i=this.lastGuard-this.guard,e=(0<i?-.5:.5)*t;this.lastGuard=Math.abs(i)<Math.abs(e)?this.guard:this.lastGuard+e,h.c.fillStyle="#000",h.c.globalAlpha=.5,h.c.beginPath(),h.c.ellipse(this.x,this.y,15,10.5,0,0,2*Math.PI),h.c.fill(),h.c.globalAlpha=1,this.moving?(this.walkCycle+=10*t,this.walkCycle>Math.PI&&(this.walkCycle=0,Y.s())):this.walkCycle=0,t=5*-Math.sin(this.walkCycle),h.c.drawImage(this.sprite,this.x+-12,this.y+-72+t),this.weapon.dr(this.x,this.y+t)},ut:function(t,i,e){return-1<this.guardTurn&&i>this.guardTurn&&(this.guard=Math.min(this.maxGuard,this.guard+this.maxGuard/4),this.guardTurn=-1),!0},hit:function(t){0<this.guard?this.guard=Math.max(0,this.guard-t):this.health--,this.health<=0&&Y.d()},da:function(t,i){for(var e=!1,s=0;s<i.length;){var h=i[s];++s,h.health<=0||h.team==this.team||this.weapon.wh(this.x,this.y,t,h)&&(h.hit(this.attack),e=!0)}return e&&Y.h(),e}},l.__name__=!0,l.__super__=o,l.prototype=i(o.prototype,{ut:function(t,i,e){var s,n;return o.prototype.ut.call(this,t,i,e),null==this.tgt&&(this.tgt=this.cht(e),n=Math.atan2(this.tgt.y-this.y,this.tgt.x-this.x),s=Math.sqrt(Math.pow(this.tgt.x-this.x,2)+Math.pow(this.tgt.y-this.y,2)),s=Math.min(200+100*this.speed,s-.9*this.weapon.range),this.moveToX=Math.min(Math.max(this.x+Math.cos(n)*s,75),h.w-15-60),this.moveToY=Math.min(Math.max(this.y+Math.sin(n)*s,135),h.h-15-60)),0<this.moveToX?Math.sqrt(Math.pow(this.moveToX-this.x,2)+Math.pow(this.moveToY-this.y,2))<300*t?(this.x=this.moveToX,this.y=this.moveToY,this.moveToX=-1,this.moving=!1):(n=Math.atan2(this.moveToY-this.y,this.moveToX-this.x),this.x+=Math.cos(n)*(300*t),this.y+=Math.sin(n)*(300*t),this.moving=!0):(Math.sqrt(Math.pow(this.tgt.x-this.x,2)+Math.pow(this.tgt.y-this.y,2))>this.weapon.range?this.guardTurn=i:this.da(Math.atan2(this.tgt.y-this.y,this.tgt.x-this.x),e),this.endTurn=i,this.tgt=null),i==this.endTurn},fcl:function(t,i){for(var e=null,s=0,h=0;h<i.length;){var n,a=i[h];++h,a.health<=0||a.team==this.team||(n=Math.sqrt(Math.pow(a.x-t.x,2)+Math.pow(a.y-t.y,2)),(null==e||n<s)&&(e=a,s=n))}return e}}),c.__name__=!0,c.__super__=l,c.prototype=i(l.prototype,{cht:function(t){return this.fcl(this,t)}}),u.__name__=!0,u.__super__=n,u.prototype=i(n.prototype,{cer:function(t){for(var i=0,e=u.enemyRanges;i<e.length;){var s=e[i];if(++i,t<s[0])return s}return u.enemyRanges[u.enemyRanges.length-1]},u:function(t){n.prototype.u.call(this,t),h.c.drawImage(L.r,0,0),this.drawCharacters.sort((function(t,i){return Math.round(t.y-i.y)}));for(var i=0,e=this.drawCharacters;i<e.length;){var s=e[i];++i,0<s.health&&s.u(t)}if(0==this.endType){if(this.characters[this.idx].ut(t,this.turn,this.characters)){for(this.turn++,this.idx++,this.idx>=this.characters.length&&(this.idx=0);this.characters[this.idx].health<=0;)this.idx++,this.idx>=this.characters.length&&(this.idx=0);this.endType=this.isOver(),0!=this.endType&&(this.endTimer=1)}}else this.endTimer-=t,this.endTimer<0&&h.s(1==this.endType?this.mapState:new S);for(i=0,e=this.characters.length;i<e;){var a=i++,r=10+260*a;s=this.characters[a];h.c.lineWidth=5,h.c.fillStyle="#fff",h.c.strokeStyle=a==this.idx?"#f00":"#000",h.c.beginPath(),h.c.rect(r,10,250,100),h.c.fill(),h.c.stroke(),h.c.font="30px serif",h.c.fillStyle="#000",h.c.fillText(s.name,10+r,40,230);for(var o=[],l=0,c=s.health;l<c;)l++,o.push("â¤");var u=o.join("");h.c.fillText(u,10+r,70,230),a=s.guard/s.maxGuard*230,u=s.lastGuard/s.maxGuard*230,h.c.fillStyle="#F00",h.c.fillRect(10+r,80,u,20),h.c.fillStyle="#0F0",h.c.fillRect(10+r,80,a,20),s.health<=0&&(h.c.strokeStyle="#f00",h.c.moveTo(r,10),h.c.lineTo(250+r,110),h.c.stroke())}},isOver:function(){for(var t=0,i=0,e=0,s=this.characters;e<s.length;){var h=s[e];++e,0<h.health&&(0==h.team?++t:++i)}return 0==t?2:0==i?1:0}}),f.__name__=!0,f.prototype={dr:function(t,i){h.c.drawImage(this.spr,t+this.ox,i+this.oy)}},p.__name__=!0,p.__super__=f,p.prototype=i(f.prototype,{wh:function(t,i,e,h){var n=t+Math.cos(e)*this.range;e=i+Math.sin(e)*this.range,e=s.findNearestPointOnLine(h.x,h.y,t,i,n,e);return Math.sqrt(Math.pow(e.x-h.x,2)+Math.pow(e.y-h.y,2))<this.width},ra:function(t,i,e){var s=t+Math.cos(e)*this.range;e=i+Math.sin(e)*this.range;h.c.strokeStyle="#000",h.c.lineWidth=2*this.width,h.c.beginPath(),h.c.moveTo(t,i),h.c.lineTo(s,e),h.c.stroke()}});var d=function(){p.call(this,L.bw,4,-50),this.range=600};function m(t,i,e){this.angle=Math.PI/180*30,f.call(this,t,i,e)}d.__name__=!0,d.__super__=p,d.prototype=i(p.prototype,{}),m.__name__=!0,m.__super__=f,m.prototype=i(f.prototype,{wh:function(t,i,e,s){if(Math.sqrt(Math.pow(s.x-t,2)+Math.pow(s.y-i,2))>this.range)return!1;var h;i=(h=Math.atan2(s.y-i,s.x-t))<0?h+2*Math.PI:h>2*Math.PI?h-2*Math.PI:h,s=e-this.angle/2,t=e+this.angle/2;return!((h=(h=i+(e=s<0?Math.abs(s):Math.min(0,2*Math.PI-t)))<0?h+2*Math.PI:h>2*Math.PI?h-2*Math.PI:h)<s+e||t+e<h)},ra:function(t,i,e){h.c.strokeStyle="#000",h.c.lineWidth=2,h.c.beginPath(),h.c.moveTo(t,i),h.c.lineTo(t+Math.cos(e-this.angle/2)*this.range,i+Math.sin(e-this.angle/2)*this.range),h.c.lineTo(t+Math.cos(e+this.angle/2)*this.range,i+Math.sin(e+this.angle/2)*this.range),h.c.lineTo(t,i),h.c.stroke()}});var _=function(t){l.call(this,0,t.weapon,t.stats),this.name=t.name,this.sprite=t.sprite};_.__name__=!0,_.__super__=l,_.prototype=i(l.prototype,{cht:function(t){return this.fcl(this,t)},hit:function(t){l.prototype.hit.call(this,t),this.health<=0&&(e.g=null)}});var g=function(){p.call(this,L.pw,-20,-50),this.range=150};g.__name__=!0,g.__super__=p,g.prototype=i(p.prototype,{});var w=function(){this.aimDir=0,this.moveTurn=-1,this.aiming=!1,o.call(this,0,new y,e.ps),this.name="You",this.sprite=L.n[0]};w.__name__=!0,w.__super__=o,w.prototype=i(o.prototype,{ut:function(t,i,e){if(o.prototype.ut.call(this,t,i,e),this.moving=!1,this.moveTurn==i){if(Math.sqrt(Math.pow(this.mx-this.x,2)+Math.pow(this.my-this.y,2))<300*t)return this.x=this.mx,this.y=this.my,this.da(this.aimDir,e)||(this.guardTurn=i),!0;var s=Math.atan2(this.my-this.y,this.mx-this.x);return this.x+=Math.cos(s)*(300*t),this.y+=Math.sin(s)*(300*t),!(this.moving=!0)}this.aiming||(this.mx=W.X,this.my=W.Y);for(var n=!0,a=0;a<e.length;){var r=e[a];if(++a,!(r==this||r.health<=0)&&Math.sqrt(Math.pow(r.x-this.mx,2)+Math.pow(r.y-this.my,2))<30){n=!1;break}}if(t=200+100*this.speed,Math.sqrt(Math.pow(this.mx-this.x,2)+Math.pow(this.my-this.y,2))>t&&(n=!1),h.c.strokeStyle="#00f",h.c.lineWidth=4,h.c.setLineDash([5]),h.c.beginPath(),h.c.moveTo(this.x,this.y),h.c.lineTo(this.mx,this.my),h.c.stroke(),h.c.lineWidth=2,h.c.beginPath(),h.c.ellipse(this.x,this.y,t,t,0,0,2*Math.PI),h.c.stroke(),h.c.strokeStyle="#ff0",h.c.beginPath(),h.c.ellipse(this.mx,this.my,this.weapon.range,this.weapon.range,0,0,2*Math.PI),h.c.stroke(),h.c.setLineDash([]),h.c.strokeStyle=n?"#ff0":"#f00",h.c.beginPath(),h.c.ellipse(this.mx,this.my,15,15,0,0,2*Math.PI),h.c.stroke(),this.aiming)for(this.aimDir=Math.atan2(W.Y-this.my,W.X-this.mx),this.weapon.ra(this.mx,this.my,this.aimDir),a=0;a<e.length;){var l=e[a];++a,0<l.health&&l.team!=this.team&&this.weapon.wh(this.mx,this.my,this.aimDir,l)&&(h.c.strokeStyle="#ff0",h.c.lineWidth=4,h.c.beginPath(),h.c.ellipse(l.x,l.y,18,18,0,0,2*Math.PI),h.c.stroke())}return W.D&&n?this.aiming=!0:this.aiming&&(this.moveTurn=i,this.aiming=!1),!1}});var y=function(){m.call(this,L.sw,-5,-50),this.range=100};y.__name__=!0,y.__super__=m,y.prototype=i(m.prototype,{});var v=function(){};function x(t){this.opt=[],this.back=new R("Back",60),n.call(this),this.l=t,this.back.o=function(){h.s(new k(t))},this.back.x=h.w-this.back.w-40,this.back.y=h.h-this.back.h-40;var i,a,r,o=0,l=t.name,c=x.cache.get(l);null==c&&(c=[],i=s.makeStats(2),a=L.n[Math.floor(Math.random()*L.n.length)],r=["Willelmus","Ricardus","Iohannes","Robertus","Hugo","Rogerus","Walterus","Thomas","Radulfus","Galfridus","Henricus","Adam","Petrus","Symon","Nicholaus","Alanus","Stephanus"][Math.floor(17*Math.random())],c.push({sprite:a,weapon:s.randomWeapon(),stats:i,name:r,cost:1e3}),i=s.makeStats(4),a=L.n[Math.floor(Math.random()*L.n.length)],r=["Willelmus","Ricardus","Iohannes","Robertus","Hugo","Rogerus","Walterus","Thomas","Radulfus","Galfridus","Henricus","Adam","Petrus","Symon","Nicholaus","Alanus","Stephanus"][Math.floor(17*Math.random())],c.push({sprite:a,weapon:s.randomWeapon(),stats:i,name:r,cost:3e3}),i=s.makeStats(6),a=L.n[Math.floor(Math.random()*L.n.length)],r=["Willelmus","Ricardus","Iohannes","Robertus","Hugo","Rogerus","Walterus","Thomas","Radulfus","Galfridus","Henricus","Adam","Petrus","Symon","Nicholaus","Alanus","Stephanus"][Math.floor(17*Math.random())],c.push({sprite:a,weapon:s.randomWeapon(),stats:i,name:r,cost:5e3}),x.cache.set(l,c));for(var u=c;o<u.length;){var f,p=[u[o]];++o,e.g!=p[0]&&((f=new R("Hire (-"+p[0].cost+")",80)).e(p[0].cost<=e.p),f.o=function(i){return function(){e.g=i[0],e.p-=i[0].cost,h.s(new k(t))}}(p),this.opt.push({guard:p[0],hire:f}))}null!=e.g&&this.opt.push({guard:e.g,hire:null})}function M(t){var i;this.options=[],n.call(this),this.l=t,(r=new R("Market",80)).o=function(){h.s(new b(t))},i=r.w,this.options.push(r),(r=new R("Public House",80)).o=function(){h.s(new k(t))},i+=r.w,this.options.push(r),(r=new R("Leave",80)).o=function(){h.s(new C)},i+=r.w,this.options.push(r);for(var e=h.w/2-(i+42*(this.options.length-1))/2,s=0,a=this.options;s<a.length;){var r=a[s];++s,r.y=h.h-r.h-42,r.x=e,e+=r.w+42}}v.__name__=!0,v.__string_rec=function(t,i){if(null==t)return"null";if(5<=i.length)return"<...>";var e=typeof t;switch(e="function"==e&&(t.__name__||t.__ename__)?"object":e){case"function":return"<function>";case"object":if(t instanceof Array){var s="[";i+="\t";for(var h=0,n=t.length;h<n;){var a=h++;s+=(0<a?",":"")+v.__string_rec(t[a],i)}return s+"]"}try{r=t.toString}catch(h){return"???"}if(null!=r&&r!=Object.toString&&"function"==typeof r){var r=t.toString();if("[object Object]"!=r)return r}s="{\n",i+="\t";var o=null!=t.hasOwnProperty,l=null;for(l in t)o&&!t.hasOwnProperty(l)||"prototype"!=l&&"__class__"!=l&&"__super__"!=l&&"__interfaces__"!=l&&"__properties__"!=l&&(2!=s.length&&(s+=", \n"),s+=i+l+" : "+v.__string_rec(t[l],i));return s+"\n"+(i=i.substring(1))+"}";case"string":return t;default:return String(t)}},x.__name__=!0,x.__super__=n,x.prototype=i(n.prototype,{u:function(t){n.prototype.u.call(this,t),this.back.u(t),h.c.fillText("Purse: "+e.p,40,h.h-70),h.c.font="80px serif",this.tc("Hire Guard",80),null!=e.g&&(h.c.font="40px serif",this.tc("You can have only one guard at a time. Hiring another will replace your existing guard.",130));for(var i=200,s=0,a=this.opt;s<a.length;){var r=a[s];++s,h.c.drawImage(r.guard.sprite,180,i),r.guard.weapon.dr(192,i- -72),h.c.font="60px serif",h.c.fillText(r.guard.name,130,i+100),h.c.fillText("Health: "+r.guard.stats.health,.3*h.w,i+40),h.c.fillText("Guard: "+r.guard.stats.guard,.3*h.w,i+100),h.c.fillText("Speed: "+r.guard.stats.speed,.5*h.w,i+40),h.c.fillText("Attack: "+r.guard.stats.attack,.5*h.w,i+100),null==r.hire?h.c.fillText("Current Guard",.7*h.w,i+50):(r.hire.x=.7*h.w,r.hire.y=i+50-r.hire.h/2,r.hire.u(t)),i+=180}}}),M.__name__=!0,M.__super__=n,M.prototype=i(n.prototype,{u:function(t){n.prototype.u.call(this,t),h.c.font="120px serif",h.c.fillStyle="#fff",this.tc(this.l.name,150);for(var i=0,e=this.options;i<e.length;){var s=e[i];++i,s.u(t)}}});var b=function(t){this.back=new R("Back",60),this.reset=new R("Reset",60),this.confirm=new R("Confirm",60),this.lines=[],this.xPos=[],n.call(this),this.l=t,this.xPos.push(0*h.w),this.xPos.push(.1*h.w),this.xPos.push(.22*h.w),this.xPos.push(.42*h.w),this.xPos.push(.6*h.w),this.xPos.push(.73*h.w),this.xPos.push(.9*h.w);for(var i=0,s=P.e.length;i<s;){var a=i++,r=Math.ceil(P.b[a]*t.demand[a]),o=0!=(o=Math.round(100*(t.demand[a]-1)))?"("+(0<o?"â–²":"â–¼")+o+"%)":"";this.lines.push({product:P.e[a],inventory:e.s[a],sell:new X(0,0,e.s[a]),price:r,priceStr:r+o,market:t.qty[a],buy:new X(0,0,t.qty[a]),total:0})}this.confirm.o=A(this,this.onConfirm),this.reset.o=function(){h.s(new b(t))},this.back.o=function(){h.s(new M(t))}};b.__name__=!0,b.__super__=n,b.prototype=i(n.prototype,{u:function(t){n.prototype.u.call(this,t),h.c.font="80px serif",h.c.fillStyle="#fff",this.tc(this.l.name+" Market",80);var i=160;h.c.font="60px serif";for(var s=["Item","Have","Sell","Price","Market","Buy","Total"],a=0,r=s.length;a<r;){var o=a++;h.c.fillText(s[o],this.xPos[o],i)}i+=40,h.c.strokeStyle="#fff",h.c.beginPath(),h.c.moveTo(0,i),h.c.lineTo(h.w,i),h.c.stroke(),i+=50;var l=0;for(a=0,r=this.lines;a<r.length;){var c=r[a];++a,h.c.fillText(c.product,this.xPos[0],i+54),h.c.fillText(null==c.inventory?"null":""+c.inventory,this.xPos[1],i+54),c.sell.x=this.xPos[2],c.sell.y=i,c.sell.update(t),h.c.fillText(c.priceStr,this.xPos[3],i+54),h.c.fillText(null==c.market?"null":""+c.market,this.xPos[4],i+54),c.buy.x=this.xPos[5],c.buy.y=i,c.buy.update(t),c.total=c.price*c.sell.val-c.price*c.buy.val,l+=c.total,h.c.fillText(null==c.total?"null":""+c.total,this.xPos[6],i+54),i+=100}h.c.fillText("Purse: "+e.p,40,i+54);var u="Grand Total: "+l,f=h.c.measureText(u).width;h.c.fillText(u,h.w-f,i+54),i+=100,this.back.x=40,this.back.y=i,this.back.u(t),this.confirm.y=i,this.confirm.x=h.w-this.confirm.w-40,this.confirm.e(0<=e.p+l),this.confirm.u(t),this.reset.y=i,this.reset.x=this.confirm.x-this.reset.w-40,this.reset.u(t)},onConfirm:function(){for(var t=0,i=0,s=this.lines.length;i<s;){var n=i++,a=this.lines[n];t+=a.total,this.l.qty[n]=a.market-a.buy.val+a.sell.val,e.s[n]=a.inventory-a.sell.val+a.buy.val}e.p+=Math.round(t),h.s(new b(this.l))}});var k=function(t){this.info=[],this.options=[];var i=this;n.call(this),this.l=t;var s,a=new R("Information (-5)",80);a.o=function(){i.info=P.rn(),0==i.info.length&&i.info.push("Learnt nothing new"),e.p-=5,a.e(!1),t.info=!0},a.e(!t.info&&5<=e.p),s=a.w,this.options.push(a);var r=new R("Hire Guard",80);r.o=function(){h.s(new x(t))},s+=r.w,this.options.push(r),(u=new R("Leave",80)).o=function(){h.s(new M(t))},s+=u.w,this.options.push(u);for(var o=h.w/2-(s+42*(this.options.length-1))/2,l=0,c=this.options;l<c.length;){var u=c[l];++l,u.y=h.h-u.h-42,u.x=o,o+=u.w+42}};function T(){this.ranks=[{w:0,r:"F"},{w:1e4,r:"E"},{w:2e4,r:"D"},{w:3e4,r:"C"},{w:5e4,r:"B"},{w:7e4,r:"A"},{w:9e4,r:"S"}],n.call(this),this.store=e.v();for(var t=e.p+this.store,i=0,s=this.ranks;i<s.length;){var h=s[i];if(++i,h.w>t)break;this.rank=h.r}}k.__name__=!0,k.__super__=n,k.prototype=i(n.prototype,{u:function(t){n.prototype.u.call(this,t),h.c.font="120px serif",h.c.fillStyle="#fff",this.tc(this.l.name+" Public House",150),h.c.font="40px serif";for(var i=250,s=0,a=this.info;s<a.length;){var r=a[s];++s,this.tc(r,i),i+=50}for(h.c.fillText("Purse: "+e.p,20,40),s=0,a=this.options;s<a.length;){var o=a[s];++s,o.u(t)}}}),T.__name__=!0,T.__super__=n,T.prototype=i(n.prototype,{u:function(t){n.prototype.u.call(this,t),h.c.fillStyle="#fff",h.c.font="80px serif",this.tc("Earnings Report",.2*h.h),h.c.font="50px serif",this.tc("Purse: "+e.p,.4*h.h),this.tc("Unsold Goods: "+this.store,.4*h.h+60),this.tc("Total: "+(e.p+this.store),.4*h.h+120),this.tc("Rank: "+this.rank,.4*h.h+240)}});var S=function(){this.retry=new R("Retry",60),n.call(this),this.retry.o=function(){h.s(new C)},this.retry.x=h.w/2-this.retry.w/2,this.retry.y=.75*h.h};S.__name__=!0,S.__super__=n,S.prototype=i(n.prototype,{u:function(t){n.prototype.u.call(this,t),this.retry.u(t),this.tc("Game Over",h.h/2)}});var P=function(){};P.__name__=!0,P.load=function(){if(!(0<P.l.length)){for(var t="Plymouth,1,36.4,279.4,1.6,0.3,0.6,1.2,0.4,1.6|Exeter,1,48.6,268.9,0.7,0.7,0.7,1.5,1.6,1.5|Barnstaple,1,37.2,255.8,1.3,0.2,1.6,0.7,1.3,0.6|Taunton,1,57.5,255.3,0.9,1.3,0.9,0.8,0.9,0.9|Berkeley,1,68.6,239.7,1.4,0.7,0.3,1.4,0.2,0.7|Bath,1,68.1,249.7,1,1.4,0.8,0.7,0.7,0.6|Deal,1,142.5,251.9,1,0.7,0.9,0.5,1.2,0.5|Chichester,1,101.4,264.2,1.4,0.4,1,1.3,0.8,0.1|Southampton,1,81.9,263.9,1,0.7,1.4,0.8,0.8,0.4|Winchester,1,83.6,254.7,0.5,1.6,1.2,0.2,0.6,0.2|Mere,1,70.6,258.1,0.2,1.7,0.7,1.2,0.4,0.8|Canterbury,1,133.1,251.9,1.2,0.5,0.5,1.2,0.5,1.6|Tunbridge,1,119.7,253.1,1.3,0.5,0.3,1.5,0.2,0.6|London,1,110.3,245.6,1.7,1.7,1.7,1.5,1.6,1.9|Launceston,0,33.1,267.2,0.4,0.7,1.4,0.8,1.4,1.6|Honiton,0,57.5,263.3,0.6,1.4,0.6,0.6,0.7,0.7|Yarmouth,1,148.9,211.1,0.6,0.8,0.5,0.3,0.5,0.2|Lynn,1,123.1,204.4,1.5,0.5,1.4,1.2,0.4,0.2|Colchester,1,131.9,227.8,1.2,0.8,0.4,1,0.6,0.3|Cardiff,1,58.1,241.1,1.6,1.1,1.4,0.4,0.6,1.3|Worchester,1,74.2,228.3,0.7,1.2,0.6,0.4,0.6,0.2|Kingston-upon-Hull,1,101.7,173.1,0.4,1.2,1.5,0.6,1.2,0.6|Oxford,1,90.8,236.1,1.3,0.8,1.3,0.7,1.2,1.4|Cambridge,1,120.8,215,0.4,0.8,1.3,0.3,0.6,1.2|Doncaster,1,84.4,178.3,0.5,1.7,1.3,0.5,0.8,0.5|Scarborough,1,106.7,152.5,0.4,0.7,0.4,1.3,1.7,0.4|York,1,85.3,163.9,1.2,1.9,1.1,0.8,0.8,1.2|Newcastle,1,80.8,131.9,1.3,1.5,0.6,0.7,0.6,0.6|Penrith,1,60.6,141.4,0.7,1.5,0.6,0.9,0.6,0.4|Chester,1,59.7,189.2,0.7,1.6,1.3,0.7,0.4,0.6|Boston,1,115.6,197.8,1.2,0.2,0.8,1,0.3,0.4|Lincoln,1,98.9,190.3,0.7,1.1,1.2,1,0.4,0.6|Lichfield,1,63.3,212.8,0.6,0.4,0.5,1.5,0.8,0.1|Stamford,1,105,206.7,0.4,1.2,0.5,0.9,0.2,0.7|Leicester,1,86.7,206.1,1.1,1.9,0.7,0.5,0.7,0.4|Northampton,1,96.9,219.4,0.7,1.4,0.9,1.6,0.6,0.3|Truro,0,15.8,283.1,1.4,0.5,1.6,1.4,1.5,1.5|Lydd,0,134.2,260.3,0.3,0.6,0.4,1.4,0.7,1|Seaford,0,116.7,265,1,0.3,1.4,0.6,0.6,0.7|Blakeney,0,135,198.6,0.7,1.2,0.6,0.4,0.5,0.6|Norwich,0,138.3,210.6,0.7,0.6,1.3,0.6,0.7,0.6|Ashingdon,0,127.2,242.2,1,0.4,1.1,0.6,0.5,0.8|Dorchester,0,70.3,269.7,0.3,0.6,1.4,1,1.4,0.7|Hertford,0,120.6,227.2,0.6,1.2,0.3,1.2,0.7,0.7|Clifford,0,54.4,223.3,0.3,0.7,0.4,1,0.6,1.6|Swansea,0,38.1,239.4,1.2,0.6,0.6,1.2,0.7,0.5|Pembroke,0,20.8,236.7,1,0.8,0.4,0.3,0.2,0.1|Cardigan,0,28.9,223.9,1.2,0.8,0.7,0.2,0.5,0.2|Reading,0,95.6,244.4,0.7,1.7,1.5,1.1,0.7,0.4|Marlborough,0,79.2,243.3,1.2,0.8,0.3,1,0.5,0.6|Preston,0,60.6,170.8,1.5,0.8,0.5,1.4,0.7,0.3|Lancaster,0,61.7,155.8,1.2,0.8,1.1,0.6,0.8,0.4|Billingham,0,92.2,142.5,1.3,0.8,0.7,0.6,0.6,0.4|Carlisle,0,52.8,131.7,1.6,1.2,0.9,1.5,0.5,0.8|Baborough,0,80.6,108.9,0.9,0.2,0.8,0.3,0.8,0.2|Nottingham,0,87.2,195.3,0.8,1.6,1.1,0.5,0.3,0.2|Stafford,0,70.6,197.5,1.1,1.7,1.2,1,0.6,0.4|St.Albans,0,109.2,228.3,0.7,1.2,1.4,0.7,0.6,0.2|Bangor,0,35.8,189.4,0.2,0.8,0.2,0.2,0.3,0.2|Louth,0,114.7,183.1,1.4,0.7,1.2,0.5,0.8,0.5+0,1,0|2,1,0|14,0,0|14,2,0|1,3,0.5|3,15,0.1|3,5,0.1|3,10,0.1|5,4,0.3|5,9,0.2|10,9,0.1|8,9,0.3|9,13,0.1|7,13,0.2|12,13,0.5|12,11,0.4|11,6,0.6|13,18,0.4|22,13,0.5|16,18,0.7|23,18,0.3|17,23,0.1|30,17,0.4|22,35,0.2|22,20,0.1|4,20,0.3|19,20,0.2|20,32,0.1|35,33,0.3|34,35,0.2|32,34,0.4|32,29,0.3|33,31,0.1|33,30,0.1|30,31,0.1|31,21,0.3|31,24,0.1|29,24,0.3|21,26,0.1|24,26,0.1|26,25,0.3|26,28,0.6|28,27,0.2|27,26,0.1|25,25,0|36,14,0.3|8,42,0.3|38,12,0.7|37,11,0.6|13,41,0.7|23,43,0.1|16,40,0.2|40,39,0.7|17,39,0.7|32,44,0.2|19,44,0.1|45,44,0.6|45,47,0.7|47,46,1|22,48,0.2|4,49,0.4|49,48,0.3|29,50,0.2|28,51,0.1|51,50,0.8|28,53,0.7|27,54,0.7|27,52,0.4|43,57,0.3|57,13,0.4|35,57,0.1|13,48,0.2|29,56,0.1|31,55,0.1|55,56,0.6|55,34,0|58,29,0.6|58,44,1|21,59,0.3|30,59,0.3|47,44,1".split("+"),i=t[0].split("|"),e=0;e<i.length;){var s=i[e];++e;for(var h=(w=s.split(",")).slice(4),n=a.parseFloat,r=new Array(h.length),o=0,l=h.length;o<l;){var c=o++;r[c]=n(h[c])}for(var u=r,f=new Array(u.length),p=0,d=u.length;p<d;){var m=p++;f[m]=Math.round((49*-u[m]+99)*(1==a.parseInt(w[1])?1:.5))}var _=f;s=a.parseInt(w[1]);P.l.push({name:w[0],type:s,x:parseFloat(w[2]),y:parseFloat(w[3]),known:1==s,demand:u,qty:_,high:-1,low:-1,info:!1})}for(i=t[1].split("|"),e=0;e<i.length;){var g=i[e];++e;var w=g.split(",");P.r.push({a:P.l[a.parseInt(w[0])],b:P.l[a.parseInt(w[1])],danger:parseFloat(w[2])})}P.c=P.l[14],P.re(P.c,[])}},P.grt=function(t){for(var i=0,e=P.r;i<e.length;){var s=e[i];if(++i,s.a==P.c&&s.b==t||s.a==t&&s.b==P.c)return s}return null},P.rn=function(){for(var t=[],i=0,e=P.r;i<e.length;){var s=e[i];++i,s.a!=P.c&&s.b!=P.c||(P.re(s.a,t),P.re(s.b,t))}return t},P.re=function(t,i){if(t.known||i.push("Learnt about the neighbouring village of "+t.name),t.known=!0,-1==t.high){for(var e=-10,s=10,h=0,n=t.demand.length;h<n;){var a=h++,r=t.demand[a];e<r&&(e=r,t.high=a),r<s&&(s=r,t.low=a)}i.push("Learnt about the market demand in "+t.name)}};var C=function(){this.fullscreenButton=new R("â‡±",160),this.travelAttack=0,this.ti=0,this.ts=0,this.tp=0,this.tt=null,this.menu=null,this.locY=0,this.locX=0,this.viewY=0,this.viewX=0,n.call(this),this.bg="#00F",this.locX=P.c.x,this.locY=P.c.y,this.rb=new R("Report Earnings",80),this.rb.x=h.w/2-this.rb.w/2,this.rb.y=.8*h.h-this.rb.h/2,this.rb.o=function(){h.s(new T)},this.fullscreenButton.o=function(){window.document.body.requestFullscreen()},this.fullscreenButton.x=20,this.fullscreenButton.y=h.h-this.fullscreenButton.h-20};C.__name__=!0,C.__super__=n,C.prototype=i(n.prototype,{u:function(t){n.prototype.u.call(this,t),this.viewX=h.w/2-25*this.locX,this.viewY=h.h/2-25*this.locY,h.c.save(),h.c.translate(this.viewX,this.viewY),h.c.scale(25,25),h.c.drawImage(L.m,0,0),h.c.font="1px serif",h.c.lineWidth=1;for(var i=0,e=P.r;i<e.length;){var s=e[i];++i,s.a.known&&s.b.known&&(h.c.strokeStyle=s.a.type+s.b.type<2?"#c73":"#730",h.c.beginPath(),h.c.moveTo(s.a.x,s.a.y),h.c.lineTo(s.b.x,s.b.y),h.c.stroke())}h.c.strokeStyle="#f00",h.c.lineWidth=.2,h.c.beginPath(),h.c.ellipse(this.locX,this.locY,1.2,1.2,0,0,2*Math.PI),h.c.stroke();var a=(W.X-this.viewX)/25,r=(W.Y-this.viewY)/25,o=null;for(i=0,e=P.l;i<e.length;){var l,c=e[i];++i,c.known&&(h.c.fillStyle=1==c.type?"#F00":"#F0F",h.c.beginPath(),h.c.ellipse(c.x,c.y,1,1,0,0,2*Math.PI),h.c.fill(),h.c.fillStyle="#fff",h.c.strokeStyle="#000",l=h.c.measureText(c.name).width,h.fot(c.name,c.x-l/2,c.y-2),-1<c.high&&h.c.fillText("ðŸ“ˆ "+P.e[c.high],c.x+2,c.y-.5),-1<c.low&&h.c.fillText("ðŸ“‰ "+P.e[c.low],c.x+2,c.y+1),null==this.menu&&null==this.tt&&Math.sqrt(Math.pow(c.x-a,2)+Math.pow(c.y-r,2))<2&&(h.c.strokeStyle="#fff",h.c.lineWidth=.2,h.c.beginPath(),h.c.ellipse(c.x,c.y,1.2,1.2,0,0,2*Math.PI),h.c.stroke(),W.C&&(o=c,Y.e())))}h.c.restore(),null!=this.tt&&(this.tp+=this.ts*t,this.locX=P.c.x+(this.tt.x-P.c.x)*this.tp,this.locY=P.c.y+(this.tt.y-P.c.y)*this.tp,1<=this.tp&&(P.c=this.tt,P.re(P.c,[]),this.locX=this.tt.x,this.locY=this.tt.y,o=this.tt,this.tt=null,P.day+=this.ti,this.ti=0),0<this.travelAttack&&this.tp>this.travelAttack&&(h.s(new u(this)),this.travelAttack=0));var f=30-(P.day+Math.floor(this.ti*this.tp));h.c.font="40px serif",h.c.fillStyle="#fff",h.c.strokeStyle="#000",h.c.lineWidth=8,h.fot("Days Remaining: "+f,30,60),f<1&&(h.c.fillStyle="#000a",h.c.fillRect(this.rb.x-20,this.rb.y-20,this.rb.w+40,this.rb.h+40),this.rb.u(t)),null!=this.menu&&this.menu.u(t),null!=o&&(this.menu=new I(o,A(this,this.onLocationMenuChoice))),this.fullscreenButton.u(t)},onLocationMenuChoice:function(t){var i;this.menu=null,1==t.option?h.s(new M(t.location)):0==t.option&&(i=P.grt(t.location),this.tt=t.location,this.tp=0,this.ts=15/Math.sqrt(Math.pow(i.b.x-i.a.x,2)+Math.pow(i.b.y-i.a.y,2)),this.ti=t.time,this.travelAttack=Math.random()<i.danger?.25+.5*Math.random():0)}});var I=function(t,i){this.t=0,this.d=0;var e=this;n.call(this),this.bg="#0008",this.l=t;var s=P.grt(t);null!=s&&(this.d=Math.ceil(2.5*Math.sqrt(Math.pow(s.b.x-s.a.x,2)+Math.pow(s.b.y-s.a.y,2))),this.t=Math.ceil(this.d/5/10));var a=new R("Travel",80);a.e(t!=P.c&&null!=s&&P.day<30),a.o=function(){i({location:t,option:0,time:e.t,distance:e.d})};var r=new R("Enter",80);r.e(t==P.c),r.o=function(){i({location:t,option:1,time:e.t,distance:e.d})},(s=new R("Return",80)).o=function(){i({location:t,option:2,time:e.t,distance:e.d})},this.options=[a,r,s];for(var o=h.h/2-150,l=0,c=this.options;l<c.length;){var u=c[l];++l,u.x=h.w/2-u.w/2,u.y=o,o+=1.5*u.h}};I.__name__=!0,I.__super__=n,I.prototype=i(n.prototype,{u:function(t){n.prototype.u.call(this,t),h.c.font="120px serif",h.c.fillStyle="#fff",this.tc(this.l.name,150),0<this.d&&(h.c.font="50px serif",this.tc("Distance: "+this.d+" miles",250),this.tc("Travel Time: "+this.t+" days",300));for(var i=0,e=this.options;i<e.length;){var s=e[i];++i,s.u(t)}}});var L=function(){};L.__name__=!0,L.l=function(t){L.c=t,L.m=L.i('<svg width="150" height="300" xmlns="http://www.w3.org/2000/svg"><path d="M68.7 235.5c-3.3 3.8-4.3 8.4-11 11.1l-.5 5.9c-5.2 2.8-13.3-1-20.9 0l-3.4 6.3c-1.2.4-1.7 1.4-4.7-.3l-1.2 7.2C17.2 276.6 9 285 4.8 286.5c.2 2.5 1.5 2.6 4-.3 4.7 1.2 4.7 3.2 5.4 5 .9-1.3 4.2 0 2-4.7 4.5-2.7 8.5-5.6 14.3-7.7a48.4 48.4 0 0114.5 4.8c1.7-2.7 3.4-5.4 3.5-12 3.6-1.5 7.1-3 11.7-4.1 4.4 3 9.6 5.3 17 4.7 4-5.1 10.8-7.6 22.9-5.2 9.9-3.8 15.7-2.3 20.6.6 4.3-2.2 7.2-5.6 14.3-5.3.7-2.6.7-5.2 7.3-6.8.6-2.2 1.3-3 1.9-8.2-6.4.3-12.8.8-20.2-2.4 11-3.5 13.6-6.7 7-8.2 7-2.9 15-5.1 6-7 13.8 1.2 13.2-19.5 12.6-21.3-1.7-6.6-5.8-12.2-23.3-11.8l-3 6.5c-2.4-1.5-4.6-3.1-6-5.3l5.4-5c-1.3-9-6-18.4-20.2-19.6 4 0 5.6-2 16.1 2.5-2.5-4.8-6-9.5-7-14.7l2.2-1.5-5.6-5.7c-.4-7.2-7.5-9.4-14.6-11.6-9.8-15.3-5.2-30.5-13.7-35.2-5-11.8-9-7-17.4-16.1-2.2 10-10.5 5.3-17.4 3.8l10.4-4 10-5c-2-1.8-5-3.2-4.3-5.9l-8 2.3c6.5-4 15.6-4 15.3-13.2 6-5.6 7-12.5 7.7-19.5 14.3-9.7-1.3-27.1-42.4-7.2-2.3-18.7 26.1-31 23-42C42.6 2.4 27.6 6 18.9.4-.4 36.1-2.4 62.5 2.3 76.1c5 4.1 7.4-2.6 10.6-5.6-8.8 19.2-7.2 32.7-10 48.6 4.8 4 7.5-6.7 10-19 4.3.8 7.6-1.2 10.7-3.6-6.5 5.9-1.9 11.1 2.6 16.3-15.7 24.5.7 20.5 3.8 28.4l.9-7.5c7.2 8.3 13.4-.2 20-2.6l-5.4 15.2c2.5 5.4 5 10.1 7.6 9.2-1 2.5-.3 4.3.1 6.1 2-2.7 4.4-4.8 7.1-5.6 1.6 3.6-1.6 9-4.3 14.1l2.4 2.2L55 178l1.6 3.5L54 183c-3 3-11.8 3.5-18.2 5-1.2-1.9-2.4-3.6-3.8-6.3l-5.6 1c1.4 8.6 3.8 8.5 6.2 7.3-2 6-6 8.8-9.8 12 3.9 2 7.6-.9 11.2-3.5 9.4 20-5.7 26.4-21.7 32.4l.4 1.3 3.2.6.5 2.2-2.8 1.1 1.4 1.5 4.5-.3-3 1.2 3 2c3.5-2.2 7.1-4.3 11.7-6-1 3.7 2.4 3.5 4.5 4.5-1.6.2-3.2.3-3.7 1.4.2.8.8 1.6 2.2 2.3L41 240c8.8 13.2 17.7 3 27.7-4.5z" fill="#519900" stroke="#000" stroke-width=".3"/></svg>'),L.r=L.i('<svg width="1920" height="1080" xmlns="http://www.w3.org/2000/svg"><path fill="#6f5734" fill-rule="evenodd" d="M0 0h1920v1080H0z"/><path d="M0 378c136 27.9 322.3-15.8 477-44.5 116.8-21.7 298 15 444.2 32.8 160 19.6 312.3-4.4 459.6-25 197.2-27.8 386-31.4 539.2 13.4v423c-70.4-33.9-143-63.7-278.4-40.6-114.4 19.5-266.2 73-403.7 42.5-121.4-27-487.3-33.1-602.5-9.7-157.3 32-416.7 60-529.2 46.4C79.6 813.1 0 810.5 0 810.5z" fill="#7f6f4d"/><path d="M0 0h1920v251c-186.9 40.7-285.4-13.2-431-23.1-164.6-11.2-337.5 12.2-535 42.5-196.3 30-394.2-.4-592.9-17.4-141.7-12.1-244.5 7-361.1 50.2zM1920 1080H0V860c186.9-40.6 290.8 13.3 436.4 23.2C601 894.4 774 871 971.4 840.7c196.3-30 394.2.4 592.9 17.4 141.7 12.1 239.1-7 355.7-50.2z" fill="#3d5c36"/></svg>'),L.sw=L.i('<svg width="34.6" height="23.2" viewBox="0 0 9.1 6.1" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.4L8 0l1.2.1-.2 1-6.3 3.5z" fill="#a2a2a2"/><path d="M3.3 5.7l-.8.4L1.9 5l-1.4.7L0 4.6l1.3-.7-.7-1.4 1-.5z" fill="#4b3515"/></svg>'),L.pw=L.i('<svg width="65.1" height="30.8" xmlns="http://www.w3.org/2000/svg"><path d="M50.7 4.3L58 .7l7.2-.7-5.9 4-6.8 3.5z" fill="#a2a2a2"/><path d="M53 7.3L1.6 30.8 0 27.2 51 3.6z" fill="#4b3515"/></svg>'),L.bw=L.i('<svg width="32.5" height="33.2" xmlns="http://www.w3.org/2000/svg"><defs><marker id="a" refX="0" refY="0" orient="auto-start-reverse" markerWidth=".5" markerHeight=".5" viewBox="0 0 1 1" preserveAspectRatio="xMidYMid" overflow="visible"><path d="M0 0l5-5-17.5 5L5 5z" transform="scale(-.5)" fill="context-stroke" fill-rule="evenodd"/></marker></defs><g fill="none"><path d="M73.8 145.9l22.5-3.7" stroke="#6f430c" stroke-width="2" marker-end="url(#a)" transform="translate(-69.8 -130.2)"/><path d="M2.6 2.2l3.1 28" stroke="#000"/><path d="M.7 1.3C12.6 7.2 14 22.8 4.3 32.1" stroke="#54351b" stroke-width="3"/></g></svg>');for(var i=0,e=L.hc;i<e.length;){var s=e[i];++i;for(var h=0,n=L.tc;h<n.length;){var a=n[h];++h;for(var o=0,l=L.lc;o<l.length;){var c=l[o];++o;for(var u=0,f=L.ha;u<f.length;){var p=f[u];++u;var d=r.replace('<svg width="25" height="75" xmlns="http://www.w3.org/2000/svg"><path d="M11.8 7.2L6 8.8l-3.6 6.9 1 12.2 17.1.1 2-13.8-4.5-6.1z" fill="#6e5631"/><path d="M19.8 74.1c.1-.5-5.4-.5-5.4-.5l-2-23-1.3 22.8-6.6.1.4-24.7 14.5.4z" fill="#aea585"/><path d="M14.8 24.1l5.8 5.2.3 23.2-17.6.1.2-22.7 7.2-5.6z" fill="#9d835a"/><circle cx="12.3" cy="17.1" r="7.6" fill="#d6c4a3" fill-rule="evenodd"/><path d="M4.5 13.9l8-1.6 6.8 1.3 1.6 3.7-5.2 5.9-5.7.2-6-5 .7 4L7 24.6l5.2 1 6-1.6 2.2-2.7 1.3-5-3.5-5.6-5.4-2-7.9 3.1z" fill="#6e5631"/><path d="M23.7 11.7c-3.5-.1-22.9.4-22.9.4l5.6-6.7L7.7 1h10.9l.8 4z" fill="#55422a"/></svg>',L.hc[0],s);d=r.replace(d,L.tc[0],a);d=r.replace(d,L.lc[0],c),d=r.replace(d,L.ha[0],p),L.n.push(L.i(d))}}}}},L.i=function(i){L.q++;var e="data:image/svg+xml;base64,"+window.btoa(i);return(i=window.document.createElement("img")).onload=L.ol,i.onerror=function(i){t.console.error(i)},i.setAttribute("src",e),i},L.ol=function(){L.q--,0==L.q&&L.c()};var Y=function(){};function z(){this.holdTimer=.5,this.ct=0,this.o=null,this.st=1,this.h=0,this.w=0,this.y=0,this.x=0}Y.__name__=!0,Y.b=function(){zzfx(1,0,653,.01,.01,.01,0,2,0,0,98,.1,0,0,0,0,0,1,0,0)},Y.e=function(){zzfx(1,0,495,0,.1,.1,1,1.5,0,0,150,.06,0,0,0,0,0,.5,0,.1)},Y.h=function(){zzfx(.8,.4,344,0,.1,.1,2,2,-9,2,0,0,0,0,0,.3,0,.8,0,.3)},Y.d=function(){zzfx(.8,.05,449,0,.1,.2,0,2.7,0,-7.3,0,0,0,1.6,0,.1,0,.6,0,0)},Y.s=function(){zzfx(1,.05,304,.01,0,0,0,1.14,0,.5,-137,.01,0,0,0,0,.03,.2,.01,.1)},Y.f=function(){zzfx(.5,0,220,.1,.3,.24,0,.6,0,3,-8,0,.2,0,0,0,0,.7,.2,0)},z.__name__=!0,z.prototype={u:function(t){0!=this.st&&(W.X<this.x||W.Y<this.y||W.X>this.x+this.w||W.Y>this.y+this.h?this.st=1:(0==this.ct?W.C&&null!=this.o&&(this.o(),Y.b()):(3!=this.st&&W.D&&(this.o(),Y.b()),3==this.st?(this.holdTimer-=t,this.holdTimer<0&&(this.o(),Y.b(),this.holdTimer=.05)):this.holdTimer=.5),this.st=W.D?3:2))},e:function(t){(t&&0==this.st||!t&&0!=this.st)&&(this.st=t?1:0)}};var R=function(t,i){null==i&&(i=30),this.tw=0,z.call(this),this.t=t,this.textSize=i,h.c.font=i+"px serif",this.h=20+i,this.tw=h.c.measureText(t).width,this.w=Math.max(this.h,20+this.tw)};R.__name__=!0,R.__super__=z,R.prototype=i(z.prototype,{u:function(t){z.prototype.u.call(this,t),h.c.globalAlpha=2==this.st?1:.5,h.c.strokeStyle="#fff",h.c.lineWidth=5,h.c.beginPath(),h.c.rect(this.x,this.y,this.w,this.h),h.c.stroke(),0==this.st?(h.c.beginPath(),h.c.moveTo(this.x,this.y),h.c.lineTo(this.x+this.w,this.y+this.h),h.c.stroke()):h.c.globalAlpha=1,h.c.font=this.textSize+"px serif",h.c.fillStyle="#fff",h.c.fillText(this.t,this.x+(this.w/2-this.tw/2),this.y+10+.75*this.textSize),h.c.globalAlpha=1}});var W=function(){};W.__name__=!0,W.i=function(){h.e.onmousemove=W.m,window.onmousedown=W.o,window.onmouseup=W.p,window.ontouchstart=W.ots,window.ontouchmove=W.otm,window.ontouchend=W.ote,window.ontouchcancel=W.ote},W.m=function(t){W.X=t.offsetX/h.e.clientWidth*h.w,W.Y=t.offsetY/h.e.clientHeight*h.h},W.o=function(t){W.D=!0},W.p=function(t){W.D=!1,W.C=!0},W.ots=function(t){t.preventDefault();for(var i=0,e=t.changedTouches;i<e.length;){var s=e[i];++i;var h=W.tpx(s),n=W.tpy(s);W.mTouch<0&&(W.mTouch=s.identifier,W.X=h,W.Y=n,W.D=!0)}},W.otm=function(t){t.preventDefault();for(var i=0,e=t.changedTouches;i<e.length;){var s=e[i];++i;var h=W.tpx(s),n=W.tpy(s);W.mTouch==s.identifier&&(W.X=h,W.Y=n)}},W.tpx=function(t){return(t.clientX-h.e.offsetLeft)/h.e.clientWidth*h.w},W.tpy=function(t){return(t.clientY-h.e.offsetTop)/h.e.clientHeight*h.h},W.ote=function(t){t.preventDefault();for(var i=0,e=t.changedTouches;i<e.length;){var s=e[i];++i,s.identifier==W.mTouch&&(W.C=!0,W.mTouch=-1,W.D=!1)}},W.u=function(){W.C=!1};var X=function(t,i,e){null==e&&(e=999),null==i&&(i=0),null==t&&(t=0),this.y=0,this.x=0,this.pad=0,this.ts=60;var s=this;this.val=t,this.min=i,this.max=e,this.sb=new R("-",this.ts),this.sb.o=function(){--s.val},this.sb.ct=1,this.ab=new R("+",this.ts),this.ab.o=function(){s.val+=1},this.ab.ct=1,this.pad=.3*this.ts};function A(i,e){return null==e?null:(null==e.__id__&&(e.__id__=t.$haxeUID++),null==i.hx__closures__?i.hx__closures__={}:s=i.hx__closures__[e.__id__],null==s&&(s=e.bind(i),i.hx__closures__[e.__id__]=s),s);var s}X.__name__=!0,X.prototype={update:function(t){var i=this.x;this.sb.x=i,this.sb.y=this.y,this.sb.e(this.val>this.min),this.sb.u(t),i+=this.sb.w+this.pad;var e=Math.max(h.c.measureText(a.string(this.min)).width,h.c.measureText(a.string(this.max)).width);h.c.fillText(a.string(this.val),i,this.y+.9*this.ts),i+=e+this.pad,this.ab.x=i,this.ab.y=this.y,this.ab.e(this.val<this.max),this.ab.u(t)}},t.$haxeUID|=0,String.__name__=!0,Array.__name__=!0,v.__toStr={}.toString,e.ps={guard:2,speed:2,health:2,attack:2},u.enemyRanges=[[1e4,1,h.l=0],[2e4,1,1],[3e4,2,0],[4e4,2,1],[5e4,1,3],[6e4,2,2],[7e4,3,2]],x.cache=new Map,P.l=[],P.r=[],P.e=["ðŸŒ¾","ðŸŸ","ðŸ§€","ðŸ§‚","ðŸ§¶","ðŸ§±"],P.b=[10,15,20,15,20,25],P.day=0,L.n=[],L.q=0,L.hc=["6e5631","85773b","91916f","a08330"],L.tc=["9d835a","9e533e","629d5a","5a7b9d"],L.lc=["aea585","55974b","4a3f28","d6c4a3"],L.ha=["55422a","afafaf",'000" fill-opacity="0'],W.X=0,W.Y=0,W.C=!1,W.D=!1,W.mTouch=-1,h.main()}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this)</script>