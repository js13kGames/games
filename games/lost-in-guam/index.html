<!doctype html><title>Lost In Guam</title><script src=/2017/webxr/aframe.js></script><body><a-scene><a-sky color=#000000></a-sky><a-entity id=camera><a-camera position="0 1.6 30" wasd-controls-enabled=false look-controls><a-entity id=textBox text="value:You Are Lost In Guam's Woods\n Avoid the trees and get to the exit\nCollect 5 Power Coins To Powerup The Portal\nLook Left To Go Left\nLook Right To Go Right; width:6; align:center" position="0 1.5 -3"></a-entity><a-entity id=coinTextBox text="value:Coins: 0; width:6; align:center" position="0 0.5 -3"></a-entity><a-entity id=timerTextBox text="value:Seconds Left: 10; width:6; align:center" position="0 0.2 -3"></a-entity></a-camera></a-entity><a-plane color=red width=1600 position="-70 0 0" height=20 rotation="0 -90 0" side=double opacity=0.5></a-plane><a-plane color=red width=1600 position="70 0 0" height=20 rotation="0 -90 0" side=double opacity=0.5></a-plane><a-plane id=goal color=#00b8cc visible=false rotation="0 0 -90" width=500 height=5 position="0 0 -730" opacity=0.5></a-plane><a-light id=ambientLight type=ambient color=#000000></a-light><a-light type=point intensity=0.5 position="10 100 -100"></a-light></a-scene><script>var obstacles=[],collisionOffset=1,moveLeft=!1,moveRight=!1,moveUp=!1,rotationOffset=70,canMove=!1,coins=[],waitingTime=15,escaped=!1,numCoins=0,clouds=[];window.onload=function(){for(var t=document.querySelector("a-scene"),e=document.querySelector("a-camera"),o=document.querySelector("#textBox"),i=document.querySelector("#goal"),n=document.querySelector("#coinTextBox"),r=document.querySelector("#timerTextBox"),a=document.querySelector("a-sky"),s=document.querySelector("#ambientLight"),u=(document.querySelector("#floor"),["#5a8213","#6e9a32","#6d4630","#d3ecaa","#516935","#382819","#467653"]),c=-10;10>c;c++)for(var l=0;40>l;l++){var d=document.createElement("a-plane");d.setAttribute("geometry",{height:20,width:20}),d.setAttribute("color",u[Math.floor(Math.random()*u.length)]),d.setAttribute("position",20*c+" 0 "+(20*l*-1+0)),d.setAttribute("rotation","-90 0 0"),t.appendChild(d)}for(c=0;70>c;c++){var b=document.createElement("a-entity"),h=document.createElement("a-cone"),m=document.createElement("a-cylinder");h.setAttribute("height",2),h.setAttribute("radius-bottom",1),h.setAttribute("radius-top",0),h.setAttribute("color","lime"),h.setAttribute("position","0 1 0"),m.setAttribute("color","crimson"),m.setAttribute("height",1),m.setAttribute("radius",.1),m.setAttribute("position","0 -0.5 0"),b.appendChild(h),b.appendChild(m),b.setAttribute("position",(Math.random()<=.5?-1:1)*Math.floor(72*Math.random())+" 1 "+-10*c),obstacles.push(b),t.appendChild(b)}for(c=0;70>c;c++){var f=document.createElement("a-ring");f.setAttribute("radius-inner","0.5"),f.setAttribute("radius-outer","0.8"),f.setAttribute("position",{x:(Math.random()<=.5?-1:1)*Math.floor(72*Math.random()),y:1,z:-10*c}),f.setAttribute("color","yellow"),f.setAttribute("opacity",.5),coins.push(f),t.appendChild(f)}cloudColors=["#748b90","#a29cb3","#00b8cc","#b8e2ee","#506d6f"];for(c=0;70>c;c++){var p=document.createElement("a-box");p.setAttribute("width",Math.floor(6*Math.random())+2),p.setAttribute("height",Math.floor(8*Math.random())+6),p.setAttribute("rotation","-90 0 -90"),p.setAttribute("depth",Math.floor(4*Math.random())+2),p.setAttribute("color",cloudColors[Math.floor(Math.random()*cloudColors.length)]),p.setAttribute("position",{x:(Math.random()<=.5?-1:1)*Math.floor(72*Math.random()),y:Math.floor(70*Math.random())+50,z:-10*c}),clouds.push(p),t.appendChild(p)}var A=setInterval((function(){w(e),canMove&&C(),(v().x<=-70||v().x>=70)&&x({x:0,y:v().y,z:v().z}),v().z<=-753.531339461689&&(canMove=!1,o.setAttribute("text",{value:"You Missed The Portal\nYou Are Lost Forever :(",width:6,align:"center"}),setTimeout((function(){clearInterval(A),location.reload()}),2e3)),M(e,obstacles),g(i),z(coins),E()}),60),v=function(){return e.getAttribute("position")},x=function(t){e.setAttribute("position",{x:t.x,y:t.y,z:t.z})},y=function(t,e){return t.getAttribute(e)},M=function(t,e){e.forEach((function(t){var e=Math.abs(y(t,"position").x-v().x),i=Math.abs(y(t,"position").z-v().z);collisionOffset>=e&&collisionOffset>=i&&(console.log("hit a tree"),canMove=!1,o.setAttribute("text",{value:"Oh No! You Hit A tree\nGAME OVER",width:6,align:"center"}),setTimeout((function(){clearInterval(A),location.reload()}),2e3))}))},g=function(t){var e=Math.abs(v().x-y(t,"position").x),i=Math.abs(v().z-y(t,"position").z);collisionOffset+5>=e&&collisionOffset>=i&&1==t.getAttribute("visible")&&(o.setAttribute("text",{value:"Awesome!\n You Found Your Way Out!\nNow You Can Go Get Some Chicken Kelaguen :)",width:6,align:"center"}),canMove=!1,escaped=!0)},z=function(t){t.forEach((function(t){var e=Math.abs(v().x-y(t,"position").x),o=Math.abs(v().z-y(t,"position").z);collisionOffset+5>=e&&collisionOffset>=o&&(console.log("Hit coin"),t.getAttribute("visible")&&(t.setAttribute("visible",!1),numCoins++),n.setAttribute("text",{value:"Coins: "+numCoins,width:6,align:"center"}),numCoins>=5&&i.setAttribute("visible",!0))}))},w=function(t){var e=t.getAttribute("rotation"),o=parseInt(e.y%=360);e.y<0&&(e.y+=360,o=parseInt(e.y%=360)),moveLeft=o>=30&&30+rotationOffset>=o,moveRight=340>=o&&o>=340-rotationOffset},C=function(){pos=v(),moveLeft&&x({x:pos.x-=.6,y:pos.y,z:pos.z}),moveRight&&x({x:pos.x+=.6,y:pos.y,z:pos.z}),x({x:pos.x,y:pos.y,z:pos.z-=1.5})},O=setInterval((function(){waitingTime--,r.setAttribute("text",{value:"Go Time: "+waitingTime}),0==waitingTime&&(clearInterval(O),r.setAttribute("visible",!1),canMove=!0,o.setAttribute("text",{value:""}))}),1e3),E=function(){clouds.forEach((function(t){pos=t.getAttribute("position"),t.setAttribute("position",{x:pos.x+=.3,y:pos.y,z:pos.z}),pos.x>=120&&t.setAttribute("position",{x:-120,y:pos.y,z:pos.z})}))};setInterval((function(){random=Math.random(),random<=.2&&(a.setAttribute("color","white"),s.setAttribute("color","white")),setTimeout((function(){a.setAttribute("color","#000000"),s.setAttribute("color","#000000")}),300)}),1e3)}</script>