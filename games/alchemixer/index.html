<!-- Game by @MaximeEuziere -->
<!-- Music by @SoundsLikeJord -->
<style>
*{margin:0;padding:0;border:0;box-sizing:border-box;outline:0}
body{background:radial-gradient(#def 50%, #abc) fixed;text-align:center;font-family:Arial;height:100%}
#elements{padding:20px 0 0 180px}
#elements a, #tube a{position:relative;transition:all .75s;top:0;-moz-user-select:none;user-select:none;color:#222;text-decoration:none;cursor:move;width:100px;height:100px;padding:10px 5px 0;margin:5px;border-radius:50%;background:#fff;border:3px solid #d00;display:inline-block;vertical-align:top;box-shadow:5px 5px 5px #555}
#tube a{top:-100px}
h1{font-size:30px;margin:15px 0;line-height:10px;letter-spacing:-5px;text-indent:-5px}
h2{font-size:40px;font-family:Trebuchet MS;margin:10px 0}
h3{font-size:14px;margin:10px 0}
p{font-size:14px;line-height:16px}
#tube{overflow:visible;box-shadow:5px 5px 5px #888;position:fixed;top:50%;display:block;float:left;margin:-150px 0 0 20px;width:150px;height:300px;background:none repeat-y right bottom #eef;border:5px solid #456;border-top:5px solid #456;background-image:linear-gradient(-20deg, transparent 5%, #456 5%, #456 25%, transparent 25%);background-size:10px 20px;border-radius:50% / 10px 10px 20px 20px}
#tube:before{z-index:2;content:"";width:150px;height:100px;display:block;border:5px solid transparent;border-bottom:5px solid #456;border-radius:0 0 50% 50% / 0 0 15px 15px;position:fixed;left:15px;top:50%;margin-top:-240px}
#tube.x1{padding-top:150px;transition:all .5s}
#tube.x1 a, #tube.x2 a:last-child{top:0}
#tube.mixed{padding-top:150px}
#tube.x2{padding-top:40px}
#tube.x2.mix a:first-child, #tube.x2.nomix a:first-child{position:relative;top:110px}
#tube.x2.mix a, #elements a.mix{background:#fff;color:#fff;border-color:#fff;box-shadow:0px 0px 20px #fff}
#tube.x2.nomix a{background:#000;color:#000;border-color:#000;box-shadow:0px 0px 20px #000}
#tube.x2.poof a{opacity:0}
#elements a.combined{position:fixed;top:50%;left:40px}
#buttons{padding:20px;background:rgba(0,0,0,0.8);position:fixed;bottom:0;width:100%}
button{cursor:pointer;border:3px solid #48c;background:#ddd;font-size:16px;line-height:16px;padding:5px 10px;border-radius:5px}
input{border:3px solid #48c;background:#ddd;font-size:16px;line-height:16px;padding:5px 10px;border-radius:5px}
#elements a.end{transition:none}
aside{position:fixed;top:-100px;left:50%;opacity:0;margin-left:-175px;z-index:99;margin-top:-100px;transform:scale(.1);transition:all .5s;background:#def;border:3px solid #48c;border-radius:20px;width:400px;padding:20px}
aside.visible{top:50%;opacity:1;transform:scale(1.5);box-shadow:0 0 0 9999px rgba(0,0,0,0.3)}
.hidden{display:none!important;opacity:0;transform:scale(2)}
</style>
<aside id=dialog_browser><b>Welcome to AlcheMixer!</b><br>Sorry, you must use Firefox or IE to play this game in good conditions!<br><br><button onclick=dialog_browser.className=''>OK!</button></aside>
<aside id=dialog_start><b>Welcome to AlcheMixer!</b><br>Drag & drop two elements in the test tube to create a new one!<br><button onclick=dialog_start.className=''>OK!</button></aside>
<aside id=dialog_save><b>You found a new element!</b><br>The first of a long list.<br>To help you in your quest, you'll find a search engine and a save / load button on the bottom.<br><button onclick="dialog_save.className=''; buttons.className = ''; search.className = ''; ">OK!</button></aside>
<aside id=dialog_hint><b>Congrats! You found 10 elements!</b><br>You now have access to a "Hint" button!<br><br><button onclick=dialog_hint.className='';hint.style.display="">OK!</button></aside>
<aside id=dialog_human><b>Whoa! You found 30 elements!</b><br>Let's add the fifth element: the Human!<br><br><button onclick=dialog_human.className='';Human.className=''>OK!</button></aside>
<aside id=dialog_end><b>Impressive! You found 150 elements!</b><br>I didn't have the time to put more in the game for JS13Kgames 2014, but you can continue the mix on <a href=" http://xem/github.io/alchemixer">http://xem/github.io/alchemixer</a>! Thanks for playing!<br><br><button onclick=dialog_end.className=''>OK!</button></aside>
<div id=tube></div>
<div id=elements><h2>AlcheMixer</h2><h3><span id=score>0</span> / 150 elements found</h3><a ondragstart="event.dataTransfer.effectAllowed='copy';event.dataTransfer.setData('Text',this.id)" href="javascript:;" draggable="true" class=hidden id="Human"><h1>üë´</h1><p>Human</p></a><a id=Earth draggable=true href=javascript:; ondragstart="event.dataTransfer.effectAllowed='copy';event.dataTransfer.setData('Text',this.id)"><h1>‚ôÅ</h1><p>Earth</p></a><a id=Water draggable=true href=javascript:; ondragstart="event.dataTransfer.effectAllowed='copy';event.dataTransfer.setData('Text',this.id)"><h1>üí¶</h1><p>Water</p></a><a id=Air draggable=true href=javascript:; ondragstart="event.dataTransfer.effectAllowed='copy';event.dataTransfer.setData('Text',this.id)"><h1>‚âà</h1><p>Air</p></a><a id=Fire draggable=true href=javascript:; ondragstart="event.dataTransfer.effectAllowed='copy';event.dataTransfer.setData('Text',this.id)"><h1>üî•</h1><p>Fire</p></a></div>
<br><br><br>
<div id=buttons class=hidden> <input id=search placeholder=search class=hidden> <button id=hint class=hidden onclick="this.innerHTML = show_hint()">Hint!</button> <button id=save class=hidden onclick="localStorage['alchemixer'] = elements.innerHTML; className = 'hidden'">Save</button> <button id=load class=hidden onclick="elements.innerHTML = localStorage['alchemixer']; className = 'hidden'; search.className = ''; if(+score.innerHTML >= 10) hint.className = ''; if(+score.innerHTML >= 30) Human.className = 'visible'; search.focus();">Load</button> <button onclick="window.open('http://twitter.com/home?status=' + encodeURIComponent('I found ' + score.innerHTML + ' elements in #AlcheMixer!\nGive it a try on js13kgames.com.\n#js13k .@MaximeEuziere\n' + window.location))">üê§</button></div>
<br><br><br>
<script>
onload=function(){-1<navigator.userAgent.indexOf("Chrome")||-1<navigator.userAgent.indexOf("Opera")||-1<navigator.userAgent.indexOf("Chrome")?setTimeout("dialog_browser.className = 'visible'",1E3):localStorage.alchemixer_start||(setTimeout("dialog_start.className = 'visible'",1E3),localStorage.alchemixer_start=1);localStorage.alchemixer&&(buttons.className="",load.className="");search.focus()};search.value=""; search.onkeyup=function(d){els=document.querySelectorAll("#elements a");if(search.value)for(i=0;i<els.length;i++)-1==els[i].id.toLowerCase().indexOf(search.value.toLowerCase().replace(/ /g,""))?els[i].style.display="none":els[i].style.display="inline-block";else for(i=0;i<els.length;i++)els[i].style.display="inline-block"};tube.ondragover=function(d){d.preventDefault();d.dataTransfer.dropEffect="copy";return!1}; tube.ondrop=function(d){d.stopPropagation();tube.innerHTML=top[d.dataTransfer.getData("Text")].outerHTML+tube.innerHTML;search.value="";search.onkeyup();1==tube.children.length&&setTimeout('tube.className = "x1"',10);if(2==tube.children.length){tube.className="x2";for(i=ok=0;i<mix.length;i+=4)if((mix[i+1]==tube.children[0].id&&mix[i+2]==tube.children[1].id||mix[i+1]==tube.children[1].id&&mix[i+2]==tube.children[0].id)&&void 0===top[mix[i]]){setTimeout('tube.className += " mix"');setTimeout(function(){tube.className= "mixed";tube.innerHTML="";elements.innerHTML+="<a class='combined mix' id="+mix[i]+" draggable=true href=javascript:; ondragstart=\"event.dataTransfer.effectAllowed='copy';event.dataTransfer.setData('Text',this.id)\" title='"+mix[i+1]+" + "+mix[i+2]+"'><h1>"+mix[i+3]+"</h1><p>"+mix[i].replace(/([a-z])([A-Z])/g,"$1 $2")+"</p></a>";setTimeout('top[mix[i]].className="combined";',200);setTimeout('top[mix[i]].className="end";',800)},500);ok=1;save.className="";load.className="hidden";score.innerHTML=+score.innerHTML+ 1;1==+score.innerHTML&&setTimeout("dialog_save.className = 'visible';",2E3);10==+score.innerHTML&&setTimeout("dialog_hint.className = 'visible'",2E3);150==+score.innerHTML&&setTimeout("dialog_human.className = 'visible'",2E3);30==+score.innerHTML&&setTimeout("dialog_end.className = 'visible'",2E3);document.body.scrollTop=1E7;break}ok||(setTimeout('tube.className += " nomix";',200),setTimeout('tube.className += " poof";',800),setTimeout('tube.className = ""; tube.innerHTML = "";',1300))}search.focus()};show_hint=function(){for(;;)if(rand=4*Math.ceil(Math.random()*mix.length),top[mix[rand+1]]&&top[mix[rand+2]]&&!top[mix[rand]])return"Try to make "+mix[rand].replace(/([a-z])([A-Z])/g,"$1 $2")+"... New hint?"};
mix="Dust{Earth{Air{\u22ef{Lava{Fire{Earth{~\ud83d\udd25~{Mud{Water{Earth{~\ud83d\udc37~{Pressure{Earth{Earth{--| |--{Sea{Water{Water{\ua540{Rain{Water{Air{\u2614{Steam{Water{Fire{\u2601{Energy{Air{Fire{\u0489{Gunpowder{Fire{Dust{\u22ef\ud83d\udd2b{Stone{Water{Lava{\u274d{Stone{Sea{Lava{\u274d{Stone{Ocean{Lava{\u274d{Volcano{Earth{Lava{\ud83c\udf0b{Brick{Fire{Mud{\u25ad{Brick{Air{Mud{\u25ad{Wind{Air{Pressure{\ud83c\udf43{Ocean{Sea{Sea{\ua540\ua540<br>\ua540{Flood{Rain{Rain{~\u2614~{Cloud{Air{Steam{\u2601\u2601\u2601{Earthquake{Energy{Earth{(( \ud83d\ude28 )){Alcohol{Water{Energy{\ud83c\udf7a{Plant{Rain{Earth{\ud83c\udf31{Storm{Energy{Cloud{\u2601\u2601\u2601<br>\u26a1{Explosion{Fire{Gunpowder{\ud83d\udca5{Eruption{Energy{Volcano{\u2601\ud83c\udf0b\u2601{Eruption{Lava{Volcano{\u2601\ud83c\udf0b\u2601{Eruption{Fire{Volcano{\u2601\ud83c\udf0b\u2601{Isle{Volcano{Ocean{\ud83c\udf34{Wall{Brick{Brick{\u25ad\u25ad\u25ad<br><br>\u25ad\u25ad{Hurricane{Energy{Wind{\ud83c\udf00{Hurricane{Wind{Wind{\ud83c\udf00{Wave{Wind{Sea{\ud83c\udf0a{Wave{Wind{Water{\ud83c\udf0a{Wave{Wind{Ocean{\ud83c\udf0a{Tsunami{Earthquake{Ocean{\ud83c\udf0a\ud83d\ude13\ud83c\udf0a{Sky{Cloud{Air{\u2600\u2601{Sky{Cloud{Sun{\u2600\u2601{Fog{Cloud{Earth{\u07c9\u2601 &nbsp;\ud800\udf12{Mountain{Earthquake{Earth{\u25ed\u25ed{Metal{Fire{Stone{\u2693{Sand{Air{Stone{\u22ef\u25b3\u22ef{Sand{Sea{Stone{\u22ef\u25b3\u22ef{Sand{Ocean{Stone{\u22ef\u25b3\u22ef{Sand{Water{Stone{\u22ef\u25b3\u22ef{Swamp{Mud{Plant{\u02c7 &nbsp; \u02c7<br>\ua540\ua540\ua540{Algae{Water{Plant{\ua540\ud83c\udf3f\ua540{Algae{Sea{Plant{\ua540\ud83c\udf3f\ua540{Algae{Ocean{Plant{\ua540\ud83c\udf3f\ua540{Coal{Plant{Pressure{\u26ab{Cotton{Cloud{Plant{\u2698{Moss{Plant{Stone{\u0df4{Horizon{Sky{Ocean{\u2600<br><br>\ua540\ua540\ua540{AtomicBomb{Energy{Explosion{\ud83d\udca3{Fireworks{Sky{Explosion{\ud83c\udf86{Archipelago{Isle{Isle{\ud83c\udf34\ud83c\udf34\ud83c\udf34{Sound{Wave{Air{\u266b{Sun{Fire{Sky{\u2600{River{Water{Mountain{\u25ed\ud83c\udf0a\u25ed{Blade{Stone{Metal{\u2694{Sandstone{Sand{Stone{\u22ef\u274d\u22ef{Boiler{Metal{Steam{\u235e{Bullet{Gunpowder{Metal{\u2261 \u2ad0{Electricity{Energy{Metal{\u2301\ud83d\udd0c{Quicksilver{Water{Metal{\u263f{Beach{Water{Sand{\ud83c\udf0a\ud83c\udf34{Desert{Sand{Sand{\u22ef\u1431\u1431\u22ef{Cactus{Plant{Sand{\ud83c\udf35{Clay{Sand{Swamp{\ud83c\udf6f{Clay{Mud{Sand{\ud83c\udf6f{Life{Energy{Swamp{\u2665{Diamond{Coal{Pressure{\u25c7{Grass{Earth{Moss{\u0df4{Grass{Earth{Plant{\u0df4\u0df4{Fern{Moss{Swamp{\ud83c\udf3f{Oxygen{Sun{Plant{\u269b{Salt{Sun{Ocean{\u03f4{Salt{Sun{Sea{\u03f4{Gun{Metal{Bullet{<div style='text-align:left;margin:-20px 0 0 20px'>,____,<br><br><br>//'<br>~</div>{Sword{Metal{Blade{\u2694{Pottery{Fire{Clay{\ud83c\udf6f{Oasis{Water{Desert{\u22ef\ud83c\udf34\u22ef{Pyramid{Desert{Stone{\u22ef\u25ee\u22ef{Flower{Sun{Grass{\u2740{Flower{Plant{Garden{\u2740{Scythe{Blade{Grass{\u30ec{Dew{Grass{Fog{\u0488{Ring{Diamond{Metal{\u25ce{Tobacco{Fire{Plant{\ud83d\udeac{RadioWave{Electricity{Air{(( \ud83d\udcfb )){Glass{Electricity{Sand{\ud83c\udf77{Glass{Fire{Sand{\ud83c\udf77{Lightsaber{Energy{Sword{<span style=font-size:17px>\u2563========={Lightsaber{Light{Sword{<span style=font-size:17px>\u2563========={Hay{Scythe{Grass{\u274d &nbsp; \ud83d\udc11{Garden{Flower{Flower{\ud83c\udf3b \ud83d\udcae<br><br>\ud83c\udf3a{Garden{Flower{Grass{\ud83c\udf3b \ud83d\udcae<br><br>\ud83c\udf3a{Garden{Plant{Grass{\ud83c\udf3b \ud83d\udcae<br><br>\ud83c\udf3a{Sunflower{Sun{Flower{\ud83c\udf3b{Scissors{Blade{Blade{\u2702{LightBulb{Electricity{Glass{\ud83d\udca1{MagnifyingGlass{Metal{Glass{\ud83d\udd0d{Time{Sand{Glass{\u2d35{Eyeglasses{Glass{Glass{\ud83d\udc53{Aquarium{Water{Glass{( &nbsp; \ud83d\udc1f &nbsp; )<br>___{Ice{Glass{Water{\u2752<br><br>\u2752\u2752{Ice{Water{Cold{\u2752<br><br>\u2752\u2752{Needle{Hay{Metal{~ &nbsp; &nbsp; &nbsp; &nbsp; <br>\u257f{Oil{Sunflower{Pressure{\u0b83{Oil{Coal{Water{\u0b83{Napalm{Fire{Oil{\u2601\ud83d\udca5\u2601{Light{Electricity{LightBulb{\u2aab\ud83d\udca1\u2aaa{Sunglasses{Sun{Glass{\ud83d\ude0e{Sunglasses{Sun{Eyeglasses{\ud83d\ude0e{Lamp{LightBulb{Metal{<div style=margin-top:-35px>__<br><br><br>/___\\<br><br><br>(_){Hail{Cloud{Ice{<div style=margin-top:-10px>| |<br><br><br>\u07cb{Iceberg{Sea{Ice{~\u29cd~{Iceberg{Ocean{Ice{~\u29cd~{Clock{Electricity{Time{\u23f0{TV{LightBulb{RadioWave{\ud83d\udcfa{Blood{Human{Blade{\ud83d\udca7 &nbsp; \ud83d\udca7{CarbonDioxide{Human{Air{C O \u00b2{Cold{Rain{Human{\u2307\u2307&nbsp; \ud83d\ude13 &nbsp; \u2307\u2307{Corpse{Fire{Human{\u2620{Corpse{Human{Gun{\u2620{Drunk{Human{Alcohol{\ud83d\ude35{Electrician{Electricity{Human{\ud83d\ude01\ud83d\udd0c{Tools{Metal{Human{\u2692{Fireman{Fire{Human{\ud83d\udd25\ud83d\ude37\ud83d\udd25{House{Brick{Human{\ud83c\udfe0{Idea{LightBulb{Human{\ud83d\ude24\ud83d\udca1{Love{Human{Human{\u2764{Music{Sound{Human{\u266c \u266a{Surfer{Wave{Human{\ud83c\udf0a<u>\ud83c\udfc3</u>{Watch{Human{Clock{\u231a{Death{Human{Life{\u271d{Engineer{Human{Tools{\ud83d\ude32 \u2692{Fridge{Metal{Cold{\ud800\udf07{Snow{Rain{Cold{\u2744{Grave{Earth{Corpse{\u2020<br>\u0df4{Bone{Time{Corpse{\ud83c\udf56{Umbrella{Rain{Tools{\u2602{Field{Earth{Tools{\u0df4\u0df4<br><br>\u0df4\u0df4{Pitchfork{Tools{Hay{&nbsp; |<br>\u22d4{Statue{Stone{Tools{\ud83d\uddfd{Family{Human{House{\ud83c\udfe0\ud83d\udc6b{Village{House{House{\ud83c\udfe0 \ud83c\udfe0<br><br>\ud83c\udfe0 \ud83c\udfe0 \ud83c\udfe0{Ash{Fire{House{\u25b2{Ash{Fire{Human{\u25b2{Ash{Fire{Wood{\u25b2{Rose{Love{Plant{\ud83c\udf39{Snowman{Snow{Human{\u2603{Gravestone{Stone{Grave{\u271d{Graveyard{Grave{Grave{\u271d \u271d \u271d{Farmer{Human{Field{\ud83d\ude0b\ud83d\udc2e{Fountain{Statue{Water{\u26f2{Farm{Farmer{House{\u0df4\ud83c\udfe0\u0df4{Livestock{Life{Farmer{\ud83d\udc14 \ud83d\udc37{Wire{Electricity{Metal{\u0c8a{Dynamite{Wire{Gunpowder{<div style=margin-top:-30px>&nbsp;\u02cc<br><br><br>\u2337{Horse{Hay{Livestock{\ud83d\udc0e{Pig{Mud{Livestock{\ud83d\udc37{Sheep{Cloud{Livestock{\ud83d\udc11{Cow{Livestock{Grass{\ud83d\udc2e{Bacon{Fire{Pig{\u2668{Meat{Tools{Cow{\ud83c\udf56{Milk{Farmer{Cow{\ud83c\udf75{Sweater{Sheep{Tools{\ud83d\udc55{Butter{Milk{Pressure{\ufb26{Cheese{Time{Milk{\ud83c\udf60{IceCream{Cold{Milk{\ud83c\udf66{IceCream{Ice{Milk{\ud83c\udf66{Moon{Sky{Cheese{\u263e{MilkShake{Milk{IceCream{\ud83c\udf7a{Night{Time{Moon{\u263e \u2606{Eclipse{Sun{Moon{\ud83c\udf14{Star{Night{Sky{\u2606{Ghost{Graveyard{Night{\ud83d\udc7b{Constellation{Star{Star{<div style=margin-top:-10px>\u2606<br><br>\u2606 &nbsp; \u2606{Shuriken{Star{Blade{\u2727{Space{Star{Sky{&nbsp;{Ninja{Human{Shuriken{\ud83d\ude45{Void{Space{Space{&nbsp;&nbsp;{Meteoroid{Stone{Space{\ud83c\udf20{Alien{Life{Void{\ud83d\udc7d{Alien{Space{Life{\ud83d\udc7d{LightBulb{Void{Glass{\ud83d\udca1{RadioWave{Void{Electricity{(( \ud83d\udcfb ))".split("{");
jsonSong={songLen:123,songData:[{osc1_oct:9,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:161,osc1_waveform:0,osc2_oct:9,osc2_det:0,osc2_detune:4,osc2_xenv:0,osc2_vol:182,osc2_waveform:0,noise_fader:0,env_attack:100,env_sustain:1818,env_release:18181,env_master:192,fx_filter:0,fx_freq:0,fx_resonance:254,fx_delay_time:6,fx_delay_amt:108,fx_pan_freq:3,fx_pan_amt:61,lfo_osc1_freq:0,lfo_fx_freq:0,lfo_freq:3,lfo_amt:94,lfo_waveform:2,p:[1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,0,2,3,4,1,2,3,4,5,6,7,8,5],c:[{n:[142, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,140,0,0,0,0,0,0,0,138,0,0,0,0,0,0,0]},{n:[135,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,135,0,0,0,138,0,0,0]},{n:[140,0,138,0,135,0,0,0,0,0,0,0,0,0,130,0,142,0,140,0,135,0,0,0,0,0,0,0,138,0,0,0]},{n:[135,0,0,0,0,0,0,0,0,0,0,0,0,0,130,0,142,0,0,0,0,0,0,0,135,0,0,0,138,0,0,0]},{n:[123,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[130,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0]},{n:[119,131,0,0,0,0,0,0,0,0,0,0,0,0,0,0,126,114,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]},{osc1_oct:8,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:0,osc1_waveform:0,osc2_oct:8,osc2_det:0,osc2_detune:0,osc2_xenv:0,osc2_vol:0,osc2_waveform:0,noise_fader:19,env_attack:100,env_sustain:0,env_release:3636,env_master:192,fx_filter:1,fx_freq:8100,fx_resonance:156,fx_delay_time:2,fx_delay_amt:22,fx_pan_freq:3,fx_pan_amt:43,lfo_osc1_freq:0,lfo_fx_freq:0,lfo_freq:0,lfo_amt:0,lfo_waveform:0,p:[0, 0,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2],c:[{n:[135,0,135,0,0,135,0,135,135,0,135,0,0,135,0,135,135,0,135,0,0,135,0,135,135,0,135,0,0,135,0,135]},{n:[135,0,135,0,0,135,0,135,135,0,135,0,0,135,0,135,135,0,135,0,0,135,0,135,135,0,135,0,135,0,135,135]}]},{osc1_oct:6,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:192,osc1_waveform:1,osc2_oct:8,osc2_det:0,osc2_detune:8,osc2_xenv:0,osc2_vol:82,osc2_waveform:2,noise_fader:0,env_attack:100,env_sustain:4545,env_release:2727,env_master:192,fx_filter:3, fx_freq:2700,fx_resonance:85,fx_delay_time:6,fx_delay_amt:60,fx_pan_freq:6,fx_pan_amt:86,lfo_osc1_freq:0,lfo_fx_freq:1,lfo_freq:7,lfo_amt:106,lfo_waveform:0,p:[0,0,0,0,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3,1,1,2,3],c:[{n:[135,135,147,135,0,135,147,135,135,135,147,135,0,135,147,135,135,135,147,135,0,135,147,135,135,135,147,135,0,135,147,135]},{n:[140,140,152,140,0,140,152,140,140,140,152,140,0,140,152,140,140,140,152,140,0,140,152,140,140,140,152,140,0,140,152,142]},{n:[131,131,143,131,0,131,143,131,131, 131,143,131,0,131,143,131,138,138,150,138,0,138,150,138,138,138,150,138,0,138,150,137]}]},{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:187,osc1_waveform:2,osc2_oct:5,osc2_det:0,osc2_detune:2,osc2_xenv:1,osc2_vol:161,osc2_waveform:2,noise_fader:0,env_attack:100,env_sustain:1818,env_release:2727,env_master:123,fx_filter:1,fx_freq:1900,fx_resonance:162,fx_delay_time:2,fx_delay_amt:153,fx_pan_freq:6,fx_pan_amt:61,lfo_osc1_freq:0,lfo_fx_freq:1,lfo_freq:2,lfo_amt:196,lfo_waveform:3,p:[0,0, 0,0,0,0,0,0,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,3],c:[{n:[135,135,138,135,142,135,140,138,135,135,138,135,142,135,140,138,135,135,138,135,142,135,140,138,135,135,138,135,142,135,140,138]},{n:[143,143,155,143,0,143,155,143,143,143,150,143,147,143,140,143,138,138,143,138,143,140,138,140,138,138,143,138,142,140,138,140]},{n:[135,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]},{osc1_oct:8,osc1_det:0,osc1_detune:0,osc1_xenv:1,osc1_vol:192,osc1_waveform:0,osc2_oct:7,osc2_det:0,osc2_detune:0, osc2_xenv:1,osc2_vol:70,osc2_waveform:2,noise_fader:8,env_attack:100,env_sustain:0,env_release:9090,env_master:164,fx_filter:2,fx_freq:5500,fx_resonance:240,fx_delay_time:6,fx_delay_amt:51,fx_pan_freq:3,fx_pan_amt:66,lfo_osc1_freq:0,lfo_fx_freq:0,lfo_freq:0,lfo_amt:0,lfo_waveform:0,p:[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1],c:[{n:[135,0,0,0,0,0,135,0,0,0,135,0,0,0,0,0,135,0,0,0,0,0,135,0,0,0,135,0,0,0,0,0]}]},{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:192,osc1_waveform:2,osc2_oct:8, osc2_det:0,osc2_detune:6,osc2_xenv:0,osc2_vol:184,osc2_waveform:2,noise_fader:21,env_attack:4E4,env_sustain:25454,env_release:90909,env_master:77,fx_filter:2,fx_freq:7100,fx_resonance:188,fx_delay_time:8,fx_delay_amt:147,fx_pan_freq:4,fx_pan_amt:69,lfo_osc1_freq:0,lfo_fx_freq:1,lfo_freq:7,lfo_amt:176,lfo_waveform:1,p:[0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4,5],c:[{n:[135,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[142,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0]},{n:[128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[143,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[135,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]},{osc1_oct:8,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:0,osc1_waveform:0,osc2_oct:8,osc2_det:0,osc2_detune:0,osc2_xenv:0,osc2_vol:0,osc2_waveform:0,noise_fader:148,env_attack:3636,env_sustain:4545,env_release:39090,env_master:136,fx_filter:2,fx_freq:3100, fx_resonance:122,fx_delay_time:5,fx_delay_amt:132,fx_pan_freq:0,fx_pan_amt:0,lfo_osc1_freq:0,lfo_fx_freq:1,lfo_freq:5,lfo_amt:147,lfo_waveform:0,p:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,1,3,1,2,1,3,4],c:[{n:[0,0,0,0,0,0,135,0,0,0,0,0,0,0,0,0,0,0,135,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,135,0,0,0,0,0,0,0,162,0,135,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,135,0,0,0,0,0,0,0,0,0,0,0,151,0,0,0,0,0,135,0,135,0,0,0,0,0]},{n:[135,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]}], rowLen:5606,endPattern:30};
var sonantx;(function(){function s(a){return Math.sin(6.283184*a)}function u(a,b){setTimeout(function(){var e=new Uint8Array(4*a),c=e.length-2,g=function(){for(var a=new Date,h=0;0<=c;)if(e[c]=0,e[c+1]=128,c-=2,h+=1,0===h%1E3&&33<new Date-a){setTimeout(g,0);return}setTimeout(function(){b(e)},0)};setTimeout(g,0)},0)}function x(a,b,e,c,g){var p=e.fx_delay_time*c>>1,h=e.fx_delay_amt/255,l=0,r=function(){for(var c=new Date,d=0;l<b-p;){var e=4*l,k=4*(l+p),f=a[k]+(a[k+1]<<8)+(a[e+2]+(a[e+3]<<8)-32768)*h;a[k]=f&255; a[k+1]=f>>8&255;f=a[k+2]+(a[k+3]<<8)+(a[e]+(a[e+1]<<8)-32768)*h;a[k+2]=f&255;a[k+3]=f>>8&255;++l;d+=1;if(0===d%1E3&&33<new Date-c){setTimeout(r,0);return}}setTimeout(g,0)};setTimeout(r,0)}sonantx={};var v=null,w=[s,function(a){return 0>s(a)?-1:1},function(a){return a%1-.5},function(a){a=a%1*4;return 2>a?a-1:3-a}];sonantx.AudioGenerator=function(a){this.mixBuf=a;this.waveSize=a.length/2/2};sonantx.AudioGenerator.prototype.getWave=function(){var a=this.mixBuf,b,e,c,g,p,h=4*this.waveSize;b=h-8;e=b-36; g=String.fromCharCode(82,73,70,70,b&255,b>>8&255,b>>16&255,b>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,e&255,e>>8&255,e>>16&255,e>>24&255);for(b=0;b<h;){c="";for(e=0;256>e&&b<h;++e,b+=2)p=4*(a[b]+(a[b+1]<<8)-32768),p=-32768>p?-32768:32767<p?32767:p,c+=String.fromCharCode(p&255,p>>8&255);g+=c}return g};sonantx.AudioGenerator.prototype.getAudio=function(){var a=this.getWave(),a=new Audio("data:audio/wav;base64,"+btoa(a));a.preload="none";a.load(); return a};sonantx.AudioGenerator.prototype.getAudioBuffer=function(a){null===v&&(v=new AudioContext);var b=this.mixBuf,e=4*this.waveSize,c=v.createBuffer(2,this.waveSize,44100),g=c.getChannelData(0),p=c.getChannelData(1),h=0,l=function(){for(var r=new Date,q=0;h<e/2;){var d=4*(b[4*h]+(b[4*h+1]<<8)-32768),d=-32768>d?-32768:32767<d?32767:d;g[h]=d/32768;d=4*(b[4*h+2]+(b[4*h+3]<<8)-32768);d=-32768>d?-32768:32767<d?32767:d;p[h]=d/32768;h+=1;q+=1;if(0===q%1E3&&33<new Date-r){setTimeout(l,0);return}}setTimeout(function(){a(c)}, 0)};setTimeout(l,0)};sonantx.SoundGenerator=function(a,b){this.instr=a;this.rowLen=b||5605;this.osc_lfo=w[a.lfo_waveform];this.osc1=w[a.osc1_waveform];this.osc2=w[a.osc2_waveform];this.attack=a.env_attack;this.sustain=a.env_sustain;this.release=a.env_release;this.panFreq=Math.pow(2,a.fx_pan_freq-8)/this.rowLen;this.lfoFreq=Math.pow(2,a.lfo_freq-8)/this.rowLen};sonantx.SoundGenerator.prototype.genSound=function(a,b,e){var c=0,g=0,p=.00390625*Math.pow(1.059463094,a+12*(this.instr.osc1_oct-8)+this.instr.osc1_det- 128)*(1+8E-4*this.instr.osc1_detune);a=.00390625*Math.pow(1.059463094,a+12*(this.instr.osc2_oct-8)+this.instr.osc2_det-128)*(1+8E-4*this.instr.osc2_detune);for(var h=this.instr.fx_resonance/255,l=0,r=0,q=this.attack+this.sustain+this.release-1;0<=q;--q){var d=q+e,m=this.osc_lfo(d*this.lfoFreq)*this.instr.lfo_amt/512+.5,k=1;q<this.attack?k=q/this.attack:q>=this.attack+this.sustain&&(k-=(q-this.attack-this.sustain)/this.release);var f=p;this.instr.lfo_osc1_freq&&(f+=m);this.instr.osc1_xenv&&(f=f*k* k);var c=c+f,n=this.osc1(c)*this.instr.osc1_vol,f=a;this.instr.osc2_xenv&&(f=f*k*k);g+=f;n+=this.osc2(g)*this.instr.osc2_vol;this.instr.noise_fader&&(n+=(2*Math.random()-1)*this.instr.noise_fader*k);n*=k/255;f=this.instr.fx_freq;this.instr.lfo_fx_freq&&(f*=m);f=1.5*Math.sin(3.141592*f/44100);l+=f*r;m=h*(n-r)-l;r+=f*m;switch(this.instr.fx_filter){case 1:n=m;break;case 2:n=l;break;case 3:n=r;break;case 4:n=l+m}f=s(d*this.panFreq)*this.instr.fx_pan_amt/512+.5;n=39*n*this.instr.env_master;d*=4;d+3<b.length&& (m=b[d]+(b[d+1]<<8)+n*(1-f),b[d]=m&255,b[d+1]=m>>8&255,m=b[d+2]+(b[d+3]<<8)+n*f,b[d+2]=m&255,b[d+3]=m>>8&255)}};sonantx.SoundGenerator.prototype.getAudioGenerator=function(a,b){var e=this.attack+this.sustain+this.release-1+32*this.rowLen,c=this;u(e,function(g){c.genSound(a,g,0);x(g,e,c.instr,c.rowLen,function(){b(new sonantx.AudioGenerator(g))})})};sonantx.SoundGenerator.prototype.createAudio=function(a,b){this.getAudioGenerator(a,function(a){b(a.getAudio())})};sonantx.SoundGenerator.prototype.createAudioBuffer= function(a,b){this.getAudioGenerator(a,function(a){a.getAudioBuffer(b)})};sonantx.MusicGenerator=function(a){this.song=a;this.waveSize=44100*a.songLen};sonantx.MusicGenerator.prototype.generateTrack=function(a,b,e){var c=this;u(this.waveSize,function(g){var p=c.waveSize,h=4*c.waveSize,l=c.song.rowLen,r=c.song.endPattern,q=new sonantx.SoundGenerator(a,l),d=0,m=0,k=0,f=function(){for(var b=new Date;;)if(32===k)k=0,m+=1;else{if(m===r-1){setTimeout(n,0);break}var c=a.p[m];c&&(c=a.c[c-1].n[k])&&q.genSound(c, g,d);d+=l;k+=1;if(33<new Date-b){setTimeout(f,0);break}}},n=function(){x(g,p,a,l,s)},t=0,s=function(){for(var a=new Date,c=0;t<h;){var d=b[t]+(b[t+1]<<8)+g[t]+(g[t+1]<<8)-32768;b[t]=d&255;b[t+1]=d>>8&255;t+=2;c+=1;if(0===c%1E3&&33<new Date-a){setTimeout(s,0);return}}setTimeout(e,0)};setTimeout(f,0)})};sonantx.MusicGenerator.prototype.getAudioGenerator=function(a){var b=this;u(this.waveSize,function(e){var c=0,g=function(){c<b.song.songData.length?(c+=1,b.generateTrack(b.song.songData[c-1],e,g)):a(new sonantx.AudioGenerator(e))}; g()})};sonantx.MusicGenerator.prototype.createAudio=function(a){this.getAudioGenerator(function(b){a(b.getAudio())})};sonantx.MusicGenerator.prototype.createAudioBuffer=function(a){this.getAudioGenerator(function(b){b.getAudioBuffer(a)})}})();var songGen=new sonantx.MusicGenerator(jsonSong);songGen.createAudio(function(s){s.play();setInterval(function(){songGen.createAudio(function(s){s.play()})},115E3)})
</script>