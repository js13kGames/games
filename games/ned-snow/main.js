!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=3)}([function(t,e){AFRAME.registerComponent("position-marker",{init:function(){this.hide(),setTimeout(()=>{this.show()},2e3)},hide:function(){this.el.setAttribute("visible","false")},show:function(){this.el.setAttribute("visible","true")}})},function(t,e){AFRAME.registerComponent("player",{dependencies:["collision-box"],init:function(){this.initialPosition=this.el.object3D.position.clone()},updateInitialPosition:function(){this.initialPosition.copy(this.el.object3D.position)},reset:function(){this.el.components["collision-box"].x=this.initialPosition.x,this.el.components["collision-box"].y=this.initialPosition.z}})},function(t,e){const i=0,s=1;AFRAME.registerComponent("camera-blink",{dependencies:["animation"],init:function(){this.dur=100,this.time=0,this.animating=!1,this.state=s},animate:function(t=30){this.dur=t,this.el.visible=!0,this.time=0,this.state=s,this.el.setAttribute("animation","property: components.material.material.opacity; to: 1; dur: 100"),this.animating=!0},tick:function(t,e){this.animating&&(this.time+=e,this.time>50&&this.time<100&&this.state==s?(this.state=i,this.el.emit("playerBlind")):this.time>=100&&this.state==i?(this.state=s,this.el.setAttribute("animation","property: components.material.material.opacity; to: 0; dur: "+this.dur)):this.time>100+this.dur&&(this.el.emit("playerReady"),this.animating=!1,this.time=0,this.el.visible=!1))}})},function(t,e,i){"use strict";i.r(e);var s=class{constructor(){let t=document.createElement("canvas");t.width=512,t.height=512,this.ctx=t.getContext("2d"),this.canvas=t}getTexture(){let t=this.texture;return t||(t=new THREE.CanvasTexture(this.ctx.canvas),t.wrapS=THREE.RepeatWrapping,t.wrapT=THREE.RepeatWrapping,this.texture=t),t}};var n=class extends s{constructor(){super(),this.draw(this.ctx)}draw(t){const e=.5*this.canvas.width,i=.5*this.canvas.height;t.fillStyle="#444444",t.fillRect(0,0,e,i),t.fillRect(e,i,e,i),t.fillStyle="#aaaaaa",t.fillRect(0,i,e,i),t.fillRect(e,0,e,i)}};var o=class extends s{constructor(){super(),this.draw(this.ctx)}draw(t){const e=.5*t.canvas.width,i=.5*t.canvas.height,s=t.createRadialGradient(e,i,0,e,i,e);s.addColorStop(0,"rgba(108, 209, 107, 1)"),s.addColorStop(1,"rgba(196, 188, 26, 0)"),s.addColorStop(1,"transparent"),t.fillStyle=s,t.fillRect(0,0,t.canvas.width,t.canvas.height),t.strokeStyle="rgba(196, 188, 26, 0.8)",t.lineWidth=5,t.beginPath(),t.arc(e,i,e-30,0,2*Math.PI),t.stroke()}};var a=class extends s{constructor(){super(),this.canvas.width=1024,this.textColor="black",this.bgColor="#E68C1C",this.fullText="Test\n    This is a new line",this.drawnText="",this.textLines=[],this.font_size=50,this.margin=20,this.text_margin=20,this.text_lineheight=this.font_size+10,this.count=0,this.cursorBlinkFrames=24,this.draw(this.ctx)}draw(t){t.fillStyle=this.bgColor,t.fillRect(0,0,this.canvas.width,this.canvas.height),t.fillStyle=this.textColor,t.font=this.font_size+"px monospace";let e=this.margin+this.text_margin,i=this.margin+this.text_margin;for(let i=0;i<this.textLines.length;i++)t.fillText(this.textLines[i],this.margin+this.text_margin,this.text_margin+this.text_lineheight*(i+1)),e=(this.textLines[i].length-1)*this.font_size*.65+this.text_margin+this.margin;i=(this.textLines.length-1)*this.text_lineheight+this.text_margin+this.margin,i=Math.max(i,this.margin+this.text_margin),this.count<=this.cursorBlinkFrames?(this.count++,t.fillRect(e,i,.6*this.font_size,this.font_size)):this.count>=2*this.cursorBlinkFrames?this.count=0:this.count++}};var r=class extends s{constructor(){super(),this.draw(this.ctx)}draw(t){let e=t.canvas.width,i=t.canvas.height;var s=t.createLinearGradient(0,0,0,i);s.addColorStop(0,"#aaaaaa"),s.addColorStop(1,"#555"),t.fillStyle=s,t.fillRect(0,0,e,i),t.fillStyle="#444444",t.fillRect(0,0,10,i),t.fillRect(e-10,0,e,i),t.fillRect(0,0,e,10),t.fillRect(0,i-10,e,i)}};var l=class extends s{constructor(){super(),this.draw(this.ctx)}draw(t){let e=t.canvas.width,i=t.canvas.height;var s=t.createLinearGradient(0,0,0,i);s.addColorStop(0,"#444"),s.addColorStop(1,"#222"),t.fillStyle=s,t.fillRect(0,0,e,i),(s=t.createLinearGradient(0,0,100,200)).addColorStop(0,"#bbb"),s.addColorStop(1,"#888"),t.fillStyle=s,t.fillRect(100,100,300,200)}};var h=class extends s{constructor(){super(),this.draw(this.ctx)}draw(t){let e=t.canvas.width,i=t.canvas.height;var s=t.createLinearGradient(0,0,0,i);s.addColorStop(0,"orange"),s.addColorStop(1,"red"),t.fillStyle="black",t.fillRect(0,0,e,i),t.strokeStyle=s,t.lineWidth=6,t.beginPath(),t.moveTo(250,250),t.lineTo(245,420),t.lineTo(200,420),t.lineTo(200,150),t.lineTo(190,280),t.lineTo(160,280),t.lineTo(170,110),t.lineTo(200,90),t.lineTo(250,90),t.stroke(),t.moveTo(250,250),t.lineTo(255,420),t.lineTo(300,420),t.lineTo(300,150),t.lineTo(310,280),t.lineTo(340,280),t.lineTo(330,110),t.lineTo(300,90),t.lineTo(250,90),t.stroke(),t.moveTo(0,0),t.strokeRect(225,20,50,50)}};AFRAME.registerComponent("texture-material",{dependencies:["geometry"],schema:{texture:{type:"string",default:"floor"},repeat:{type:"vec2",default:{x:1,y:1}},metalness:{type:"number",default:.1},roughness:{type:"number",default:.8},transparent:{type:"boolean",default:!1}},init:function(){this.canvasEl=null;let t=this.data,e=t.texture.toLowerCase(),i={metalness:t.metalness,roughness:t.roughness,transparent:t.transparent};switch(e){case"floor":i.map=(new n).getTexture(),this.material=this.el.getOrCreateObject3D("mesh").material=new THREE.MeshStandardMaterial(i);break;case"wall":i.map=(new r).getTexture(),this.material=this.el.getOrCreateObject3D("mesh").material=new THREE.MeshStandardMaterial(i);break;case"door":i.map=(new l).getTexture(),this.material=this.el.getOrCreateObject3D("mesh").material=new THREE.MeshStandardMaterial(i);break;case"position-marker":i.map=(new o).getTexture(),this.material=this.el.getOrCreateObject3D("mesh").material=new THREE.MeshBasicMaterial(i);break;case"capsule":i.map=(new h).getTexture();const t=new THREE.MeshStandardMaterial({color:"gray",map:(new r).getTexture()});let e=[t,t,new THREE.MeshBasicMaterial(i),t,t,t];this.material=this.el.getOrCreateObject3D("mesh").material=e;break;case"terminal":this.canvasEl=new a,i.map=this.canvasEl.getTexture(),i.map.needsUpdate=!0,this.material=this.el.getOrCreateObject3D("mesh").material=new THREE.MeshBasicMaterial(i),this.material.needsUpdate=!0}i.map.repeat.set(t.repeat.x,t.repeat.y)}});i(0);AFRAME.registerComponent("movement-control",{dependencies:["raycaster"],init:function(){this.player=document.getElementById("player"),this.camera=document.getElementById("camera"),this.v=new THREE.Vector3,this.floor=document.querySelector(".floor"),this.positionMarker=document.getElementById("position-marker"),this.el.addEventListener("raycaster-intersection",t=>{this.raycaster=t.srcElement,this.target=t.detail.els[0],this.target.classList.contains("floor")?this.positionMarker.components["position-marker"].show():this.positionMarker.components["position-marker"].hide()}),this.el.addEventListener("mousedown",t=>{t.detail.intersectedEl.classList.contains("floor")&&this.movePlayer(t.detail.intersection.point)}),this.el.addEventListener("triggerdown",t=>{t.detail.intersectedEl.classList.contains("floor")&&this.movePlayer(t.detail.intersection.point)}),document.getElementById("crouchButton").addEventListener("click",this.toggleCrouch.bind(this))},toggleCrouch:function(){this.crouchedDown?(this.camera.object3D.position.y=1.6,this.crouchedDown=!1):(this.camera.object3D.position.y=.8,this.crouchedDown=!0)},tick:function(){if(this.raycaster){let t=this.raycaster.components.raycaster.getIntersection(this.floor);t&&(this.positionMarker.components["position-marker"].show(),this.updateMarker(t.point))}},updateMarker(t){this.positionMarker.object3D.position.set(t.x,t.y+.1,t.z)},setBoxPosition(t){this.collisionBox=this.player.components["collision-box"],this.collisionBox.x=t.x,this.collisionBox.y=t.z},movePlayer(t){document.getElementById("camera-blink").components["camera-blink"].animate(),this.setBoxPosition(t),setTimeout(()=>{let t=this.player.object3D.position;t.set(this.collisionBox.x,t.y,this.collisionBox.y)},100)}});AFRAME.registerComponent("keyboard-controls",{dependencies:["collision-box"],init:function(){this.dirVector=new THREE.Vector3,this._x=new THREE.Vector3,this._z=new THREE.Vector3,this.euler=new THREE.Euler(0,Math.PI/2,0,"XYZ"),this.camera=document.getElementById("camera"),this.speed=1.5,this.crouchedDown=!1,this.keys=[],this.keyDownHandler=this.onKeyDown.bind(this),this.keyUpHandler=this.onKeyUp.bind(this),this.collisionBox=this.el.components["collision-box"],this.collisionBoxPos=new THREE.Vector3(this.el.object3D.position.x,0,this.el.object3D.position.z),this.v=new THREE.Vector3,this.createEvents()},toggleCrouch:function(){this.crouchedDown?(this.camera.object3D.position.y=1.6,this.crouchedDown=!1):(this.camera.object3D.position.y=.8,this.crouchedDown=!0)},onKeyDown:function(t){let e=t.key.toLowerCase();if(!t.repeat)switch(e){case" ":this.toggleCrouch();break;default:["w","s","d","a"].includes(e)&&-1==this.keys.indexOf(e)&&this.keys.push(e)}},onKeyUp:function(t){let e=t.key.toLowerCase();["w","s","d","a"].includes(e)&&-1!==this.keys.indexOf(e)&&this.keys.splice(this.keys.indexOf(e),1)},createEvents:function(){document.addEventListener("keydown",this.keyDownHandler),document.addEventListener("keyup",this.keyUpHandler)},move:function(t){this.dirVector.set(0,0,0),this.keys.forEach(t=>{switch(t){case"w":this.dirVector.z+=-1;break;case"s":this.dirVector.z+=1;break;case"a":this.dirVector.x+=-1;break;case"d":this.dirVector.x+=1}}),this.camera.object3D.getWorldDirection(this._z),this._z.y=0,this._x.copy(this._z).applyEuler(this.euler),this._z.multiplyScalar(this.dirVector.z),this._x.multiplyScalar(this.dirVector.x),this._z.normalize(),this._x.normalize(),this.collisionBoxPos.set(this.collisionBox.x,0,this.collisionBox.y),this.collisionBoxPos.add(this._z.multiplyScalar(this.speed*t*.001)),this.collisionBoxPos.add(this._x.multiplyScalar(this.speed*t*.001)),this.collisionBox.x=this.collisionBoxPos.x,this.collisionBox.y=this.collisionBoxPos.z,this.v.set(this.collisionBox.x+this.collisionBox.w/2,this.collisionBoxPos.y,this.collisionBox.y+this.collisionBox.h/2),this.el.object3D.position.lerp(this.v,.4)},tick:function(t,e){this.move(e)},remove:function(){document.removeEventListener("keydown",this.keyDownHandler),document.removeEventListener("keyup",this.keyUpHandler)}});const c=new THREE.Vector3,x=new THREE.Vector3(0,0,-1);let d=!1;AFRAME.registerComponent("player-detection",{dependencies:["gameaudio","raycaster"],init:function(){this.instersectionHead=this.instersectionLevel=0,this.playerDetected=!1,this.playerHead=document.getElementById("player-head"),this.level=document.getElementById("level"),this.player=document.getElementById("player").object3D,this.lightSource=this.el.querySelector(".light").object3D,this.robotEye=this.el.querySelector(".eye"),this.lightSourceParams=this.el.querySelector(".light").object3DMap.light,this.raycastWrapper=this.el.querySelector(".raycast").object3D,this.raycaster=this.el.querySelector(".raycast").components.raycaster,this.currentAngle=0,this.detectionAngle=this.lightSourceParams.angle,this.diff=new THREE.Vector3,this.lightDir=new THREE.Vector3,this.playerPos=new THREE.Vector3,this.PlayerSpotted=!1,this.reactionTime=0},detectIfIntruderVisible:function(){let t=this.raycaster.getIntersection(this.playerHead);if(t){this.instersectionHead=t.distance;let e=document.querySelectorAll(".obstacles"),i=[];for(let s=0;s<e.length;s++)t=this.raycaster.getIntersection(e.item(s)),t&&i.push(t.distance);let s=i.some(t=>t<this.instersectionHead);0==i.length?this.playerDetected=!0:this.playerDetected=!s}else this.playerDetected=!1},detectIfIntruderInRange:function(t){return this.playerPos.copy(t.getWorldPosition(c)),this.diff.copy(this.lightSource.getWorldPosition(c)),this.diff.sub(t.getWorldPosition(c)),this.lightDir.copy(x),this.lightDir.applyQuaternion(this.lightSource.quaternion),this.lightSource.getWorldDirection(this.lightDir),this.currentAngle=this.lightDir.angleTo(this.diff),this.currentAngle<this.detectionAngle},tick:function(t,e){let i=this.detectIfIntruderInRange(this.player);i|=this.detectIfIntruderInRange(this.playerHead.object3D),this.intruderInRange=i,i?(this.raycastWrapper.lookAt(this.playerHead.object3D.getWorldPosition(c)),this.detectIfIntruderVisible(),this.playerDetected?(this.lightSourceParams.color={r:1,g:0,b:0},this.robotEye.setAttribute("material","emissive: red"),this.reactionTime+=e,this.reactionTime>3*e&&!this.playerSpotted&&(this.playerSpotted=!0,this.el.components.gameaudio.playSound(),document.querySelector("a-scene").systems["game-manager"].onPlayerSpotted())):(this.playerSpotted=!1,this.robotEye.setAttribute("material","emissive: white"),this.lightSourceParams.color={r:1,g:1,b:1})):(d=!1,this.robotEye.setAttribute("material","emissive: white"),this.lightSourceParams.color={r:1,g:1,b:1})}}),AFRAME.registerComponent("player-head",{init:function(){this.cameraPos=document.getElementById("camera").object3D.position},tick:function(){this.el.object3D.position.copy(this.cameraPos)}}),i(1);const u=0,m=1,p=(new THREE.Vector3(5,0,0),Math.PI,Math.PI,0),y=1,g=2;AFRAME.registerComponent("translation-behaviour",{schema:{default:{target:new THREE.Vector3(5,0,0),await:3e3,delay:0,speed:3}},init:function(){this.state=p,this.previousState=p,this.speed=this.data.speed?this.data.speed:3,this.initialPosition=this.el.object3D.position.clone(),this.finalPosition=this.el.object3D.position.clone().add(this.data.target),this.temp=new THREE.Vector3,this.elapsedTime=this.data.await-this.data.delay},tick:function(t,e){switch(this.state){case p:this.elapsedTime+=e,this.elapsedTime>this.data.await&&(this.previousState==y?this.state=g:this.state=y,this.elapsedTime=0);break;case y:this.move(this.finalPosition,e);break;case g:this.move(this.initialPosition,e)}},move:function(t,e){this.temp.copy(t).sub(this.el.object3D.position).normalize(),this.el.object3D.position.add(this.temp.multiplyScalar(this.speed*e*.001)),this.el.object3D.position.distanceToSquared(t)<.001&&(this.previousState=this.state,this.state=p)}}),AFRAME.registerComponent("trigger",{dependencies:["material"],init:function(){this.system.registerMe(this.el),this.el.components.geometry.geometry.computeBoundingBox()},triggerAction:function(){this.active||(this.active=!0,this.el.emit("trigger-activated"))},resetTrigger:function(){this.active&&(this.active=!1)}}),AFRAME.registerComponent("goal",{init:function(){this.el.addEventListener("trigger-activated",()=>{document.querySelector("a-scene").systems["game-manager"].onGoalReached()})}});const b="\nxxxxxxxxxxxxx\nx-----------x\nx-----------x\nx-|-|-|-|-|-x\nx-----------x\ndp---------tx\nx-----------x\nx-|-|-|-|---x\nx----------gd\nx-----------x\nxxxxxxxxxxxxx\n\n",v="Searching for Ned Snow\n...\n404 Person not found\n",f=["FACILITY 502\n\nYou are on the facility 502.\nThis instalation is reserved for\nindividuals who violated Law 409.\n",'LAW 409\nAny individual who opposes power\ninstitutions by "making a stand",\n"speak up", or any other form of\nmanifestation will be put on \ninduced coma for an undefined\nperiod.\n',"NED SNOW PROFILE\n\nActivist. Ned Snow used to advocate\nfor privacy and opposed to mass\nsurveillance.\n\nHe fought fiercely agains law 409.\n","\n\n"],E=["Notes from the diary of subject 406. 1/3\nTRANSITION TO TECHNOCRACY.\nAfter it was evident that humans were unrealible\nwhen holding power we tried to move slowly towards\na technocracy.\n\nIt seemed like a good idea, an unbiased AI\naiding the government to take decisions.\nBut machines suffered from the same sins \nof their creators. Soon we had a tech-tyranny.\n","Notes from the diary of subject 406. 2/3\nINTERFACING OUR BRAINS WITH MACHINES\nIt was like a miracle. We were able to cure alzhaimer\nand other brain problems.\nWe should have stopped there. But we opened our minds\nAnd when law 409 went to action, even our thoughts\nmade us criminals.\n",'Notes from the diary of subject 406. 3/3\n"If you want a picture of the future, imagine \na boot stamping on a human face, forever.\nThe moral to be drawn from this dangerous nightmare\nsituation is a simple one: \nDon\'t let it happen. It depends on you."\n\n-George Orwell about his book 1984.\n',"\nAccess to facility 502 granted.\n.........................\n.........................\nLiberating all prisioners\n.........................\n.........................\n.........................\nAll prisioners are free now.\n"],w=0,A=1,T=[{level:"\n    xxxxxxx\n    x-----x\n    dp---Tx\n    x-----x\n    x------x\n    x-----gd\n    x------x\n    xxxxxxxx\n    \n    ",terminals:[{tutorial:!0}]},{level:"\n    xxxxxxxxxxxxxxxxxxxx\n    x----x-------------x\n    dp--Tx------------tx\n    x----x--xx--xxx----xxxx\n    x---------------------x\n    x--------------------gd\n    xxxxx---xxx--xxxxxxxxxx\n    ---x----------x\n    ---x----------x\n    ---x-0--------x\n    ---xxxxxxxxxxxx\n    ",terminals:[{text:"\nFind Ned Snow!\nSearch for more terminals\nBut don't let them see you!\n"},{text:f[0]}],robots:[{behaviour:w,target:new THREE.Vector3(7,0,0),await:5e3,rotationY:Math.PI,delay:6e3}]},{level:"\n    xxxxx\n    x---x\n    dp-Tx\n    x---xxxxxxxxxxx\n    x-------------x\n    x------------gd\n    x--xoooooooxxxx\n    x--x----------x\n    x--x----------x\n    x--x---0------x\n    xxxxxxxxxxxxxxx\n    ",terminals:[{text:"Crouch"}],robots:[{rotationY:Math.PI},{rotationY:Math.PI}]},{level:b,terminals:[{text:v}]},{level:"\n     xxxxxxxxxxxxxxxxxxx\n     dp--x-------------x\n     x---x-------------x\n     x---xxxx----------x\n     x-----------------x\n     x--------x--x-----x\n     x------o------x---x\n     x------o---x------x\n     x-----------------x\n     x-----o---0--x---gd\n     x-----o------x----x\n     x-----------------x\n     x---x----ooo------x\n     x---x-------------x\n     x---x-------------x\n     x-$-x-------------x\n     xxxxxxxxxxxxxxxxxxx\n\n     ",terminals:[{text:E[0],rotation:Math.PI}],robots:[{behaviour:A,targets:[Math.PI],await:2e3,delay:2e3,rotationY:-Math.PI/2}]},{level:"\n    xxxxxxxxxxxxxxxxxxx\n    x---o--o----------x\n    dp--o--o----------x\n    x---oooo--oooo----x\n    x------------o----x\n    x------------o--o-x\n    xxxxooooooo--o----x\n    x---o--o--o--o-o--x\n    x---oooo--oooo----x\n    x-----------------x\n    x-----------------x\n    x---ooo---oooooooxx\n    x---o-------------x\n    x---o-------------x\n    x---o---0---------x\n    x---o-------------x\n    x-g-o-------------x\n    xxdxxxxxxxxxxxxxxxx\n    ",robots:[{behaviour:w,target:new THREE.Vector3(7,0,0),await:5e3,rotationY:Math.PI,delay:4e3}]},{level:"\n      ------xxxxxxxxxxxxxx\n      ------x------x--t--x\n      ------x------x-----x\n      xxxxxxx------x-----x\n      x------------------x\n      x$-----------------x\n      x-----x------x-----x\n      x-----x------x-----x\n      xxxxxxxxx--xxxxxxxx\n      x-----------------x\n      x----------------gd\n      x----------------x\n      x---xx-W------xxxx\n      x---o----------x\n      x---o----------x\n      dp--o----------x\n      x---o----0-----x\n      xxxxxxxxxxxxxxxx\n      ",terminals:[{text:f[1],rotation:2*Math.PI},{text:E[1],rotation:Math.PI/2}],movingWalls:[{target:new THREE.Vector3(5,0,0),await:5e3,delay:3e3,speed:1}],robots:[{rotationY:Math.PI}]},{level:b,terminals:[{text:v}]},{level:"\n    -------------------xxdxx\n    xxxxxxxxxxxxxxxxxxxx-g-x\n    x------------------x---x\n    x------------------x---x\n    x----x----o--------x---x\n    x----o---------o-------x\n    x----o---------o---x---x\n    dp--------0--------x---x\n    x----------------------x\n    x----o---------o-------x\n    x------------------x---x\n    xx--xxx-xx-xx-xxxxxxxxxx\n    x-------------------x\n    x------------------tx\n    x-------------------x\n    xxxxxxxxxxxxxxxxxxxxx\n    ",terminals:[{text:f[2]}],robots:[{behaviour:A,targets:[0],speed:-Math.PI/4,delay:0,await:0,rotationY:Math.PI}]},{level:"\n    xxxxxxxxxxxxxxxxxxxxxxxxxxxx\n    x--------------------------x\n    dp------------------------$x\n    xooooooo---xx--------------x\n    x------o--------xxxoo---xxxx\n    x------o--------o---o---x\n    x------oo-------o---o---x\n    xxxxx-W-----------------x\n    ----x-------------W-----x\n    ----x-------------------x\n    ----x-------------------x\n    ----dg------------------x\n    ----x------ooooooxxxxxxxx\n    ----x------o---x\n    ----x------o-0-x\n    ----x------o---x\n    ----xxxxxxxxxxxx\n    ",terminals:[{text:E[2]}],movingWalls:[{target:new THREE.Vector3(10,0,0),await:0,delay:0,speed:2.5},{target:new THREE.Vector3(-10,0,0),await:0,delay:0,speed:2.5},{target:new THREE.Vector3(8,0,0),await:0,delay:0,speed:3}],robots:[{rotationY:Math.PI}]},{level:"\n    xxxxxxxxxxxxx\n    x-----------x\n    x-----------x\n    x-|-|-|-|--tx\n    x-----------x\n    dp----------x\n    x-----------x\n    x-|-|-|-|--$x\n    x-----------x\n    x---------g-x\n    xxxxxxxxxxdxx\n\n    ",terminals:[{text:"\nSearching for Ned Snow\n200 found Ned Snow.\nInitiating extraction...\nExtraction successful\nNed Snow has been liberated.\n"},{text:E[3]}]},{level:"\n    xxxxxx\n    x----x\n    dp--Tx\n    x----x\n    xxxxxx\n    ",terminals:[{text:"\nCongratulations!\n\nYou made it to the end.\n\nThanks for playing.\n"}]}],C=0,D=1;AFRAME.registerComponent("rotation-behaviour",{schema:{default:{behaviour:A,targets:[Math.PI],await:5e3,delay:0,speed:Math.PI}},init:function(){this.state=C,this.previousState=C,this.initialRotation=this.el.object3D.rotation.y,this.currentTarget=this.data.targets[0],this.elapsedTime=this.data.await-this.data.delay,this.targetRot=this.initialRotation+this.currentTarget,this.targetRot=this.clamp(this.targetRot),this.speed=this.data.speed?this.data.speed:Math.PI},rotate:function(){},clamp:t=>t>2*Math.PI?t-2*Math.PI:t<0?t+2*Math.PI:t,tick:function(t,e){switch(this.state){case C:this.elapsedTime+=e,this.elapsedTime>this.data.await&&(this.state=D,this.elapsedTime=0,this.targetRot+=this.currentTarget,this.targetRot=this.clamp(this.targetRot));break;case D:this.el.object3D.rotation.y+=this.speed*e*.001,this.el.object3D.rotation.y=this.clamp(this.el.object3D.rotation.y),Math.abs(this.el.object3D.rotation.y-this.targetRot)<this.speed*e*.001&&(this.state=C,this.previousState=D)}}});var R=function(){return new Promise((t,e)=>{document.monetization?document.monetization&&"started"===document.monetization.state?t():document.monetization.addEventListener("monetizationstart",()=>{t()}):e("404 web monetization not found")})};AFRAME.registerComponent("terminal",{dependencies:["texture-material"],schema:{text:{default:"404 text not found"},tutorial:{default:!1},startAutomatically:{default:!1},monetization:{default:!1},extraInformation:{default:!1}},init:function(){if(this.count=0,this.frames=0,this.fullText=this.data.text,this.drawnText="",this.framesBetweenCharacters=1,this.framesBetweenLines=5,this.started=!1,this.canvasEl=this.el.components["texture-material"].canvasEl,this.data.tutorial&&(this.loadDeviceInstructions(),document.querySelector("a-scene").systems["device-setup"].el.addEventListener("device-info-updated",this.loadDeviceInstructions.bind(this))),this.data.monetization){let t=this.fullText;this.canvasEl.bgColor="cyan",this.canvasEl.font_size=30,this.canvasEl.text_lineheight=40,this.framesBetweenLines=1,this.fullText="Can't decrypt data.\nError 404\nKey W3B M0N3T1Z4T10N not found",this.canvasEl.draw(this.canvasEl.ctx),R().then(()=>{this.fullText="Decrypting data with key W3B M0N3T1Z4T10N.......\n",this.fullText+=t})}this.data.extraInformation&&(this.canvasEl.font_size=40,this.canvasEl.text_lineheight=50,this.framesBetweenLines=1,this.canvasEl.draw(this.canvasEl.ctx)),this.data.startAutomatically&&(this.el.querySelector(".trigger").object3D.visible=!1,this.started=!0)},loadDeviceInstructions:function(){const t=document.querySelector("a-scene").systems["device-setup"];t.isMobile()||t.is3DOFheadset()?this.fullText="Instructions:\nStand in front of a terminal\nto interact with it.\nTurn in real life.\nPoint at the floor and tap\nto move. Use the button \nto crouch/stand.\nCan you reach the door? ->":t.isHeadset()?this.fullText="Instructions:\nStand in front of a terminal\nto interact with it.\nPoint at the floor with\nyour controller and press\nthe trigger to move. Can\nyou reach the door? ->":this.fullText="Instructions:\nStand in front of a terminal\nto interact with it.\nUse you mouse to turn,\nMove with the keys W A S D,\nSPACE to crouch/stand.\nCan you reach the door? ->"},processText:function(){this.count>this.fullText.length||this.frames++>this.framesBetweenCharacters&&(this.drawnText+=this.fullText.charAt(this.count),this.canvasEl.textLines=this.drawnText.split("\n"),this.count++,this.frames=0)},start:function(){this.started||(this.started=!0)},tick:function(){this.canvasEl.getTexture().needsUpdate=!0,this.started&&this.processText(),this.canvasEl.draw(this.canvasEl.ctx)}}),AFRAME.registerComponent("collision-box",{schema:{multipleBoxes:{type:"boolean",default:!1},blueprintId:{default:0},x:{default:1},y:{default:1},w:{default:1},h:{default:1}},init:function(){this.data.multipleBoxes?(this.boxes=[],this.createBoxes(T[this.data.blueprintId].level),this.system.registerEntity(this.el),document.querySelector("a-scene").addEventListener("level-updated",this.updateLevel.bind(this))):(this.x=this.data.x,this.y=this.data.y,this.w=this.data.w,this.h=this.data.h,this.c=new THREE.Vector2(this.x+.5*this.w,this.y+.5*this.h),"player"==this.el.id?this.system.registerPlayer(this.el):this.system.registerEntity(this.el),document.querySelector("a-scene").addEventListener("level-updated",this.update.bind(this)))},update:function(){this.data.multipleBoxes?(this.boxes=[],this.createBoxes(T[this.data.blueprintId].level)):(this.x=this.data.x,this.y=this.data.y,this.w=this.data.w,this.h=this.data.h,this.c=new THREE.Vector2(this.x+.5*this.w,this.y+.5*this.h))},updateLevel(t){this.boxes=[],this.createBoxes(T[t.detail].level)},createBoxes(t){let e=0,i=0;for(let s=0;s<t.length-1;s++){switch(t[s]){case"x":case"o":this.boxes.push({x:e-.5,y:i-.5,w:1,h:1,c:new THREE.Vector2(e+.5,i+.5)});break;case"\n":i++,e=0}e++}},pause:function(){this.system.unregisterEntity(this.el)},tick:function(){this.data.multipleBoxes||this.c.set(this.x+.5*this.w,this.y+.5*this.h)}}),i(2);var S=class{constructor(t,e=1){this.context=t,this.numberOfOscillators=e}createOscillators(){let t=[],e=[];for(let i=0;i<this.numberOfOscillators;i++){let i=this.context.createOscillator(),s=this.context.createGain();i.connect(s),s.connect(this.context.destination),t.push(i),e.push(s)}return[t,e]}setFrequencies(t,e){e.forEach((e,i)=>{t[i].frequency.value=e})}setGains(t,e){e.forEach((e,i)=>{t[i].gain.value=e})}setExponentialRampToValueAtTime(t,e){t.forEach(t=>{t.gain.exponentialRampToValueAtTime(.5*t.gain.value,e),t.gain.setTargetAtTime(.001,e,.001)})}start(t,e){t.forEach(t=>{t.start(e)})}stop(t,e){t.forEach(t=>{let i=t.frequency.value*e;i=Math.ceil(i),t.stop(i/t.frequency.value)})}playNote(t,e){}};var P=class extends S{constructor(t){super(t,5)}playNote(t,e,i,s){let[n,o]=this.createOscillators();this.setFrequencies(n,[t,t+10*Math.random()-5,t+15*Math.random()-5,t/2,t/4]),this.setGains(o,[.2*s,.15*s,.12*s,.1*s,.05*s]),this.start(n,this.context.currentTime+e);let a=1*i;this.setExponentialRampToValueAtTime(o,this.context.currentTime+e+a);let r=1.5*i;this.stop(n,this.context.currentTime+e+r)}};var k={playerDetected:["C#1,D#1,A1 w s"],vertigo:["G3 h","A#3 h","D3 h","G3 h","A#3 h","C#3 h","F#3 h","A#3 h","D3 h","G3 h","A#3 h","C#3 h","D1 h","G1 h","A#2 h","D2 h","C#3 h"],silence:["E1,A#2,F2 h s","E3 h","F3 h","D3 h","F3 h","E3 h","F3 h","D3 h","G2 q","A2 q","A#2 q","G2 q","C#3 h"],proof:["D3 h","G3 h","D3 h","F#3 h","D2 h","D#2 h","C#2 h","D2 h","A1 h","A#1 h","G1 w"]};AFRAME.registerComponent("gameaudio",{schema:{sequence:{default:"s4"},tempo:{default:30},autoplay:{default:!1},volume:{default:.2},loop:{default:!1}},init:function(){this.instrument=new P(this.system.audioContext),this.playedFirstTime=!1,this.data.autoplay&&window.addEventListener("click",()=>{this.playedFirstTime||(this.playSound(),this.playedFirstTime=!0)})},playSound:function(){let t=k[this.data.sequence],e=this.system.playSequence(t,this.data.tempo,this.instrument,this.data.volume);this.data.loop&&setTimeout(this.playSound.bind(this),1e3*e)}}),AFRAME.registerGeometry("robot",{schema:{},init:function(t){const e=[new THREE.Vector2(0,1),new THREE.Vector2(.8,1),new THREE.Vector2(1.4,2.8)];this.geometry=new THREE.LatheGeometry(e,4)}});AFRAME.registerGeometry("level",{schema:{blueprintId:{default:1}},init:function(t){let e=this.generateLevel(T[t.blueprintId].level);this.geometry=this.mergeGeometry(e)},mergeGeometry:function(t){let e=new THREE.Geometry;return t.forEach(t=>{let i=new THREE.Mesh(t);i.updateMatrix(),e.merge(i.geometry,i.matrix)}),e},generateLevel:function(t){let e=0,i=0,s=[];for(let n=0;n<t.length-1;n++){switch(t[n]){case"x":s.push(this.newColumn(e,i,3));break;case"o":s.push(this.newColumn(e,i,1.4));break;case"\n":i++,e=0}e++}return s},newColumn:function(t,e,i){let s=new THREE.BoxGeometry(1,i,1);return s.translate(t,.5*i,e),s}});class M{constructor(){this.availableEls=[],this.usedEls=[]}createEntity(){}requestEntity(){let t;return t=this.availableEls.length>0?this.availableEls.pop():this.createEntity(),this.usedEls.push(t),t.object3D.visible=!0,t}retrieveEntity(t){var e=this.usedEls.indexOf(t);-1!==e?(this.usedEls.splice(e,1),t.object3D.position.y=1e3,t.object3D.visible=!1,t.pause(),this.availableEls.push(t)):warn("The returned entity was not previously pooled from "+this.attrName)}retrieveAllEntities(){for(;this.usedEls.length>0;)this.retrieveEntity(this.usedEls[0])}}var I=class extends M{createEntity(){const t=document.createElement("a-box");return t.classList.add("obstacles"),t.setAttribute("texture-material","texture: door"),t.setAttribute("height",3),t.setAttribute("shadow","receive: true; cast: false;"),document.querySelector("a-scene").appendChild(t),t}};var B=class extends M{createEntity(){const t=new THREE.Vector3(0,2,1.4),e=document.createElement("a-entity");e.setAttribute("gameaudio","sequence: playerDetected"),e.classList.add("robot"),e.setAttribute("player-detection","");const i=document.createElement("a-entity");i.setAttribute("geometry","primitive: robot"),i.setAttribute("material","color: gray"),i.object3D.rotation.y=Math.PI/4,e.setAttribute("body","");const s=document.createElement("a-box");s.setAttribute("width",1.4),s.setAttribute("height",.6),s.setAttribute("depth",1.4),s.setAttribute("material","color: gray"),s.object3D.position.set(0,3.6,0),s.object3D.rotation.x=THREE.Math.degToRad(10);const n=document.createElement("a-entity");n.classList.add("eye"),n.setAttribute("geometry","primitive: cylinder; radius: 0.2; height: 0.1;"),n.setAttribute("material","emissive: white"),n.object3D.rotation.x=Math.PI/2,n.object3D.position.set(0,0,.7);const o=document.createElement("a-entity");o.classList.add("light"),o.setAttribute("light","type: spot; angle: 35; color: fff; castShadow: true; distance: 15"),o.setAttribute("rotation","-30 180 0"),o.object3D.position.set(t.x,t.y,t.z);const a=document.createElement("a-entity");return a.classList.add("raycast"),a.object3D.position.set(t.x,t.y,t.z),a.setAttribute("raycaster","far: 15;\n     direction: 0, 0, 1;\n     objects: #player-head, .obstacles;"),s.appendChild(n),e.appendChild(s),e.appendChild(i),e.appendChild(o),e.appendChild(a),e.attachBehaviour=this.attachBehaviour,document.querySelector("a-scene").appendChild(e),e}attachBehaviour(t){switch(t.behaviour){case u:this.setAttribute("translation-behaviour",t);break;case m:this.setAttribute("rotation-behaviour",t)}}};var H=class extends M{createEntity(t){const e=document.createElement("a-entity");e.setAttribute("geometry","primitive: plane; width: 2; height: 1"),e.setAttribute("texture-material","texture: terminal;"),e.setAttribute("terminal",""),e.object3D.rotation.set(0,-Math.PI/2,0),document.querySelector("a-scene").appendChild(e);const i=document.createElement("a-entity");i.setAttribute("material","color: gray"),i.setAttribute("geometry","primitive: box; width: 2; height: 1; depth: 0.5;"),i.object3D.position.z=-.26;const s=document.createElement("a-entity");return s.classList.add("trigger"),s.setAttribute("material","shader: flat; color: white; transparent: true; opacity: 0"),s.setAttribute("geometry","primitive: box; width: 3; height: 0.1; depth: 4;"),s.setAttribute("trigger",""),s.object3D.position.set(0,-1.6,2),s.addEventListener("trigger-activated",e.components.terminal.start.bind(e.components.terminal)),e.appendChild(s),e.appendChild(i),e}};var j=class extends M{createEntity(){const t=document.createElement("a-box");return t.classList.add("obstacles"),t.setAttribute("texture-material","texture: wall"),t.setAttribute("height",3),t.setAttribute("width",3),t.setAttribute("shadow","cast: true;"),document.querySelector("#level").appendChild(t),t}};var L=class extends M{createEntity(){const t=document.createElement("a-box");return t.setAttribute("texture-material","texture: capsule"),t.setAttribute("depth",2),t.setAttribute("height",.5),document.querySelector("a-scene").appendChild(t),t}};AFRAME.registerSystem("level-generator",{generate:function(t){this.levelEntities=[],this.doorsPool=new I,this.robotsPool=new B,this.movingWallPool=new j,this.terminalsPool=new H,this.capsulesPool=new L,this.generateLevel(t),this.placeElements(T[t]),this.el.emit("level-updated",t)},restartLevel(){this.restart=!0},clearCurrentLevel:function(){this.doorsPool.retrieveAllEntities(),this.movingWallPool.retrieveAllEntities(),this.robotsPool.retrieveAllEntities(),this.terminalsPool.retrieveAllEntities(),this.capsulesPool.retrieveAllEntities(),this.level&&(level.components["collision-box"].boxes=[])},generateLevel:function(t){let e=document.getElementById("level");e||(e=document.createElement("a-entity"),e.id="level",e.classList.add("obstacles"),e.setAttribute("texture-material","texture: wall"),e.setAttribute("shadow","cast: true; receive: true;"),this.el.appendChild(e)),e.setAttribute("collision-box","multipleBoxes: true, blueprintId: "+t),e.setAttribute("geometry","primitive: level; blueprintId: "+t),this.level=e},placeElements:function(t){let e=0,i=0;var s=0,n=0;for(let o=0;o<t.level.length-1;o++){let a=t.level[o];switch(a){case"d":const o=this.doorsPool.requestEntity();o.object3D.position.set(e,1.5,i),o.setAttribute("collision-box",`x: ${e-.5}; y: ${i-.5};`);break;case"|":this.capsulesPool.requestEntity().object3D.position.set(e,.25,i);break;case"W":const r=this.movingWallPool.requestEntity(),l=t.movingWalls[n];r.object3D.position.set(e,1.5,i),r.setAttribute("translation-behaviour",l),n++;break;case"p":const h=document.getElementById("player");h.object3D.position.set(e,h.object3D.position.y,i),h.components.player.updateInitialPosition(),h.setAttribute("collision-box",`x: ${e}; y: ${i}; w: 0.95; h:0.95`);break;case"T":case"t":case"$":const c=this.terminalsPool.requestEntity();"$"==a?c.setAttribute("terminal",`text: ${t.terminals[s].text}; monetization: true`):"t"==a?c.setAttribute("terminal",`text: ${t.terminals[s].text}; extraInformation: true`):c.setAttribute("terminal",`text: ${t.terminals[s].text}; startAutomatically: true`),c.object3D.position.set(e,1.6,i),t.terminals[s].tutorial&&c.setAttribute("terminal","tutorial: true"),t.terminals[s].rotation&&(c.object3D.rotation.y=t.terminals[s].rotation),s++;break;case"g":let x=document.getElementById("goal");x||(x=document.createElement("a-entity"),x.id="goal",x.setAttribute("geometry","width: 0.9; height: 0.1; depth: 0.9"),x.setAttribute("material","color: orange"),x.setAttribute("trigger",""),x.setAttribute("goal",""),x.setAttribute("shadow","receive: true; cast: false;"),this.el.appendChild(x)),x.object3D.position.set(e,0,i);break;case"0":case"1":case"2":let d=parseInt(a);const u=this.robotsPool.requestEntity(),m=t.robots[d];u.id="robot"+d,u.object3D.position.set(e,0,i),m.rotationY&&(u.object3D.rotation.y=m.rotationY),u.attachBehaviour(m);break;case"\n":i++,e=0}e++}}});const F=0,q=1,V=2,O=3;AFRAME.registerSystem("device-setup",{init:function(){this.previousDevice=null,this.device=F,this.player=document.getElementById("player"),this.camera=document.getElementById("camera"),this.detectDevice(),this.el.addEventListener("enter-vr",()=>{this.detectDevice()})},isMobile:function(){return this.device==F},isDesktop:function(){return this.device==q},is3DOFheadset:function(){return this.device==V},isHeadset:function(){return this.device==O},addHand:function(t){let e=document.createElement("a-entity");e.setAttribute("laser-controls","hand: "+t),e.id=t+"-hand","right"==t&&e.setAttribute("mixin","movement-control"),this.player.appendChild(e)},addCursor:function(){const t=document.createElement("a-entity");t.setAttribute("mixin","cursor-config movement-control"),this.camera.appendChild(t)},addCrouchButton(){document.querySelector(".ui").style.display="inline-block"},addKeyboardControl:function(){this.player.setAttribute("keyboard-controls","")},removeCursor:function(){document.getElementById("cursor").remove()},removeCrouchButton(){document.querySelector(".ui").style.display="none"},removeHand:function(t){document.getElementById(t+"-hand").remove()},removeKeyboardControl:function(){this.player.removeAttribute("keyboard-controls")},clearPreviousConfiguration:function(){this.previousDevice&&(this.previousDevice==V?this.removeHand("right"):this.previousDevice==O?(this.removeHand("right"),this.removeHand("left")):this.previousDevice==F?(this.removeCursor(),this.removeCrouchButton(),this.el.setAttribute("vr-mode-ui","enabled: true")):this.removeKeyboardControl())},setupDevice:function(){this.is3DOFheadset()?this.addHand("right"):this.isHeadset()?(this.addHand("right"),this.addHand("left")):this.isMobile()?(this.addCursor(),this.addCrouchButton(),this.el.setAttribute("vr-mode-ui","enabled: false")):this.addKeyboardControl()},detectDevice:function(){AFRAME.utils.device.checkHeadsetConnected()?AFRAME.utils.device.isGearVR()||AFRAME.utils.device.isOculusGo()?this.device=V:AFRAME.utils.device.isMobile()?this.device=F:this.device=O:this.device=q,this.previousDevice!=this.device&&(this.clearPreviousConfiguration(),this.setupDevice(),this.previousDevice=this.device,this.el.emit("device-info-updated"))}});const z=["vertigo","silence","proof"];AFRAME.registerSystem("game-manager",{init:function(){window.onload=function(){this.level=0,this.el.systems["level-generator"].generate(this.level)}.bind(this)},onGoalReached:function(){this.level++,this.blinkAndLoadLevel();let t=z[Math.floor(3*Math.random())];document.querySelector("#bg-music").setAttribute("gameaudio",`sequence: ${t}; volume: 0.1; autoplay: true; tempo: 40; loop: true;`)},onPlayerSpotted:function(){this.blinkAndLoadLevel()},blinkAndLoadLevel:function(){document.getElementById("player");document.getElementById("camera-blink").components["camera-blink"].animate(500),setTimeout(()=>{this.el.systems["level-generator"].clearCurrentLevel(),this.el.systems["level-generator"].generate(this.level)},300)}}),AFRAME.registerSystem("trigger",{init:function(){this.temp=new THREE.Vector3,this.entities=[]},evaluateCollisions:function(){this.entities.forEach(t=>{let e=t.object3D.worldToLocal(this.temp.copy(this.playerPosition));t.components.geometry.geometry.boundingBox.containsPoint(e)?t.components.trigger.triggerAction():t.components.trigger.resetTrigger()})},tick:function(){if(!this.playerPosition){let t=document.getElementById("player");if(!t)return;this.playerPosition=t.object3D.position}this.evaluateCollisions()},registerMe:function(t){this.entities.push(t)}}),AFRAME.registerSystem("collision-box",{init:function(){this.entities=[],this.boxesThatCollidedWithPlayer=[],this.v1=new THREE.Vector2,this.v2=new THREE.Vector2,this.v3=new THREE.Vector2,this.v4=new THREE.Vector2},detectCollision(){this.boxesThatCollidedWithPlayer=[],this.entities.forEach(t=>{let e=t.components["collision-box"];e.data.multipleBoxes?e.boxes.forEach(t=>{this.boxesCollide(t,this.playerBox)&&this.boxesThatCollidedWithPlayer.push(t)}):this.boxesCollide(e,this.playerBox)&&this.boxesThatCollidedWithPlayer.push(e)})},boxesCollide:function(t,e){return t.x<e.x+e.w&&t.x+t.w>e.x&&t.y<e.y+e.h&&t.y+t.h>e.y},solveCollision(t){this.boxesThatCollidedWithPlayer.length<=0||(this.v1.x=this.v1.y=0,this.v2.x=this.v2.y=0,this.v3.x=this.v3.y=0,this.v4.x=this.v4.y=0,this.boxesThatCollidedWithPlayer.forEach(e=>{this.v1.x+=this.playerBox.c.x-e.c.x,this.v1.y+=this.playerBox.c.y-e.c.y,this.v1.normalize(),this.playerBox.x+=1.5*this.v1.x*t*.001,this.playerBox.y+=1.5*this.v1.y*t*.001}))},registerEntity:function(t){this.entities.push(t)},registerPlayer:function(t){this.player=t,this.playerBox=t.components["collision-box"]},unregisterEntity:function(t){var e=this.entities.indexOf(t);this.entities.splice(e,1)},tick:function(t,e){this.detectCollision(),this.solveCollision(e)}});const _={h:.3,s:.5},W={w:1,h:.5,q:.25,e:.125,s:.0625,es:.03125,dbl:.01563},G={C1:261.63,"C#1":277.18,D1:293.66,"D#1":311.13,E1:329.63,F1:349.23,"F#1":369.99,G1:391.99,"G#1":415.3,A1:440,"A#1":466.16,B1:493.88,C2:523.25,"C#2":554.36,D2:587.33,"D#2":622.25,E2:659.25,F2:698.45,"F#2":739.99,G2:783.99,"G#2":839.61,A2:880,"A#2":932.33,B2:987.76,B2:987.76,C3:1046.5,"C#3":1108.73,D3:1174.66,"D#3":1244.51,E3:1318.51,F3:1396.91,"F#3":1479.97,G3:1567.98,"G#3":1661.22,A3:1760,"A#3":1864.65,B3:1975.53};AFRAME.registerSystem("gameaudio",{init:function(){let t=window.AudioContext||window.webkitAudioContext;this.audioContext=new t},playSequence:function(t,e,i,s){let n=0;return t.forEach(t=>{let[o,a,r="s"]=t.split(" ");o.split(",").forEach(t=>{if("-"!==o){let o=120*_[r]/e;i.playNote(G[t],n,o,s)}});n+=60/e*W[a]}),n}})}]);