<!doctype html><title>An Offline Life</title><meta name=viewport content="width=device-width"><style>body{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;width:100vw;margin:0;background-color:#eee}#game{background-color:#eee;cursor:pointer}p{margin:0 2%}#on{display:none}#on.back{display:block}#on.back+.off{display:none}</style><div><canvas id=game height=288 width=288></canvas></div><p id=on>You are online!<p class=off>You are offline! Find the combo to get online!</p><script>kontra={init(t){var e=this.canvas=document.getElementById(t)||t||document.querySelector("canvas");this.context=e.getContext("2d")},_noop:new Function,_tick:new Function},kontra.gameLoop=function(t){let e,i,n,a,r=(t=t||{}).fps||60,o=0,s=1e3/r,h=1/r,c=!1===t.clearCanvas?kontra._noop:function(){kontra.context.clearRect(0,0,kontra.canvas.width,kontra.canvas.height)};function d(){if(i=requestAnimationFrame(d),n=performance.now(),a=n-e,e=n,!(a>1e3)){for(kontra._tick(),o+=a;o>=s;)l.update(h),o-=s;c(),l.render()}}let l={update:t.update,render:t.render,isStopped:!0,start(){e=performance.now(),this.isStopped=!1,requestAnimationFrame(d)},stop(){this.isStopped=!0,cancelAnimationFrame(i)}};return l},function(){class t{constructor(t,e){this._x=t||0,this._y=e||0}add(t,e){this.x+=(t.x||0)*(e||1),this.y+=(t.y||0)*(e||1)}clamp(t,e,i,n){this._c=!0,this._a=t,this._b=e,this._d=i,this._e=n}get x(){return this._x}get y(){return this._y}set x(t){this._x=this._c?Math.min(Math.max(this._a,t),this._d):t}set y(t){this._y=this._c?Math.min(Math.max(this._b,t),this._e):t}}kontra.vector=(e,i)=>new t(e,i),kontra.vector.prototype=t.prototype;class e{init(t,e,i,n){for(e in t=t||{},this.position=kontra.vector(t.x,t.y),this.velocity=kontra.vector(t.dx,t.dy),this.acceleration=kontra.vector(t.ddx,t.ddy),this.width=this.height=0,this.context=kontra.context,t)this[e]=t[e];if(i=t.image)this.image=i,this.width=i.width,this.height=i.height;else if(i=t.animations){for(e in i)this.animations[e]=i[e].clone(),n=n||i[e];this._ca=n,this.width=n.width,this.height=n.height}return this}get x(){return this.position.x}get y(){return this.position.y}get dx(){return this.velocity.x}get dy(){return this.velocity.y}get ddx(){return this.acceleration.x}get ddy(){return this.acceleration.y}set x(t){this.position.x=t}set y(t){this.position.y=t}set dx(t){this.velocity.x=t}set dy(t){this.velocity.y=t}set ddx(t){this.acceleration.x=t}set ddy(t){this.acceleration.y=t}isAlive(){return this.ttl>0}collidesWith(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}update(t){this.advance(t)}render(){this.draw()}playAnimation(t){this._ca=this.animations[t],this._ca.loop||this._ca.reset()}advance(t){this.velocity.add(this.acceleration,t),this.position.add(this.velocity,t),this.ttl--,this._ca&&this._ca.update(t)}draw(){this.image?this.context.drawImage(this.image,this.x,this.y):this._ca?this._ca.render(this):(this.context.fillStyle=this.color,this.context.fillRect(this.x,this.y,this.width,this.height))}}kontra.sprite=t=>(new e).init(t),kontra.sprite.prototype=e.prototype}(),function(){let t,e=/(jpeg|jpg|gif|png)$/,i=/(wav|mp3|ogg|aac)$/,n=/^no$/,a=/^\//,r=/\/$/,o=new Audio,s={wav:"",mp3:o.canPlayType("audio/mpeg;").replace(n,""),ogg:o.canPlayType('audio/ogg; codecs="vorbis"').replace(n,""),aac:o.canPlayType("audio/aac;").replace(n,"")};function h(t,e){return[t.replace(r,""),t?e.replace(a,""):e].filter((t=>t)).join("/")}function c(t){return t.split(".").pop()}function d(t){let e=t.replace("."+c(t),"");return 2==e.split("/").length?e.replace(a,""):e}function l(e,i){return new Promise((function(n,a){let r=new Image;i=h(t.imagePath,e),r.onload=function(){t.images[d(e)]=t.images[i]=this,n(this)},r.onerror=function(){a(i)},r.src=i}))}function u(e,i,n){return new Promise((function(a,r){if(e=[].concat(e).reduce((function(t,e){return s[c(e)]?e:t}),n)){let n=new Audio;i=h(t.audioPath,e),n.addEventListener("canplay",(function(){t.audio[d(e)]=t.audio[i]=this,a(this)})),n.onerror=function(){r(i)},n.src=i,n.load()}else r(e)}))}function f(e,i){return i=h(t.dataPath,e),fetch(i).then((function(t){if(!t.ok)throw t;return t.clone().json().catch((function(){return t.text()}))})).then((function(n){return t.data[d(e)]=t.data[i]=n,n}))}t=kontra.assets={images:{},audio:{},data:{},imagePath:"",audioPath:"",dataPath:"",load(){let t,n,a,r,o,s=[];for(r=0;a=arguments[r];r++)o=(n=c(t=[].concat(a)[0])).match(e)?l(a):n.match(i)?u(a):f(a),s.push(o);return Promise.all(s)}}}(),function(){let t,e=[],i=[],n={},a=[],r={},o={0:"left",1:"middle",2:"right"};function s(e){let i=t.x-Math.max(e.x,Math.min(t.x,e.x+e.width)),n=t.y-Math.max(e.y,Math.min(t.y,e.y+e.height));return i*i+n*n<t.radius*t.radius}function h(){let n,a,r=i.length?i:e;for(let e=r.length-1;e>=0;e--)if(a=(n=r[e]).collidesWithPointer?n.collidesWithPointer(t):s(n))return n}function c(t){r[o[t.button]]=!0,l(t,"onDown")}function d(t){r[o[t.button]]=!1,l(t,"onUp")}function l(e,i){if(!kontra.canvas)return;let a,r,o;-1!==e.type.indexOf("mouse")?(a=e.clientX,r=e.clientY):(a=(e.touches[0]||e.changedTouches[0]).clientX,r=(e.touches[0]||e.changedTouches[0]).clientY),t.x=a-kontra.canvas.offsetLeft,t.y=r-kontra.canvas.offsetTop,e.target===kontra.canvas&&(o=h())&&o[i]&&o[i](),n[i]&&n[i](e,o)}addEventListener("mousedown",c),addEventListener("touchstart",c),addEventListener("mouseup",d),addEventListener("touchend",d),addEventListener("blur",(function(t){r={}})),addEventListener("mousemove",(function(t){l(t,"onOver")})),t=kontra.pointer={x:0,y:0,radius:5,track(t){[].concat(t).map((function(t){t._r||(t._r=t.render,t.render=function(){e.push(this),this._r()},a.push(t))}))},untrack(t,e){[].concat(t).map((function(t){t.render=t._r,t._r=e;let i=a.indexOf(t);-1!==i&&a.splice(i,1)}))},over:t=>-1!==a.indexOf(t)&&h()===t,onDown(t){n.onDown=t},onUp(t){n.onUp=t},pressed:t=>!!r[t]},kontra._tick=function(){i.length=0,e.map((function(t){i.push(t)})),e.length=0}}(),kontra.tileEngine=function(t){function e(t){let e,i;return void 0!==t.x&&void 0!==t.y?(e=w.getRow(t.y),i=w.getCol(t.x)):(e=t.row,i=t.col),e<0||i<0||e>=o||i>=r?-1:i+e*r}function i(t){let e,i,n=0,a=w.tilesets.length-1;for(;n<=a;){if(e=(n+a)/2|0,t>=(i=w.tilesets[e]).firstGrid&&t<=i.lastGrid)return i;i.lastGrid<t?n=e+1:a=e-1}}let n,a,r=(t=t||{}).width,o=t.height,s=t.tileWidth||t.tilewidth||32,h=t.tileHeight||t.tileheight||32,c=r*s,d=o*h,l=t.context||kontra.context,u=l.canvas.width,f=l.canvas.height,g=document.createElement("canvas"),y=g.getContext("2d"),p=Math.max(0,c-u),m=Math.max(0,d-f),x=[],w={width:r,height:o,tileWidth:s,tileHeight:h,mapWidth:c,mapHeight:d,context:l,x:t.x||0,y:t.y||0,tilesets:[],layers:{},addTilesets:function(t){[].concat(t).map((function(t){let e,i,n,a,r,o=t.image;if(""+o===o){let t=1/0;for(;t>=0;){let i=(t=o.lastIndexOf("/",t))<0?o:o.substr(t);if(kontra.assets.images[i]){e=kontra.assets.images[i];break}t--}}else e=o;i=t.firstGrid,n=(e.width/s|0||1)*(e.height/h|0||1),i||(w.tilesets.length>0?(r=((a=w.tilesets[w.tilesets.length-1]).image.width/s|0)*(a.image.height/h|0),i=a.firstGrid+r):i=1),w.tilesets.push({firstGrid:i,lastGrid:i+n-1,image:e}),w.tilesets.sort((function(t,e){return t.firstGrid-e.firstGrid}))}))},addLayers:function(t){[].concat(t).map((function(t){let e,i,n,a,o,s;if(t.render=void 0===t.render||t.render,Array.isArray(t.data[0]))for(e=[],i=0;n=t.data[i];i++)for(a=0;a<r;a++)e.push(n[a]||0);else e=t.data;for(o in w.layers[t.name]={data:e,zIndex:t.zIndex||0,render:t.render},t.properties){s=t.properties[o];try{s=JSON.parse(s)}catch(t){}w.layers[t.name][o]=s}w.layers[t.name].render&&(x.push(t.name),x.sort((function(t,e){return w.layers[t].zIndex-w.layers[e].zIndex})))})),function(){let t,e,n,a,o,c,d,l,u;for(let f,g=0;f=w.layers[x[g]];g++)for(let g=0,p=f.data.length;g<p;g++)(t=f.data[g])&&(n=(e=i(t)).image,a=g%r*s,o=(g/r|0)*h,c=(l=t-e.firstGrid)%(u=n.width/s)*s,d=(l/u|0)*h,y.drawImage(n,c,d,s,h,a,o,s,h))}()},layerCollidesWith:function(t,i){let n,a=w.getRow(i.y),r=w.getCol(i.x),o=w.getRow(i.y+i.height),s=w.getCol(i.x+i.width);for(let i=a;i<=o;i++)for(let a=r;a<=s;a++)if(n=e({row:i,col:a}),w.layers[t].data[n])return!0;return!1},tileAtLayer:function(t,i){let n=e(i);if(n>=0)return w.layers[t].data[n]},render:function(){w.context.drawImage(g,w.sx,w.sy,u,f,w.x,w.y,u,f)},renderLayer:function(t){let n,a,c,d,l,g,y,p,m,x=w.layers[t],v=w.getRow(),_=w.getCol(),k=e({row:v,col:_}),M=_*s-w.sx,P=v*h-w.sy,L=Math.min(Math.ceil(u/s)+1,r),G=L*Math.min(Math.ceil(f/h)+1,o),I=0;for(;I<G;)(c=x.data[k])&&(l=(d=i(c)).image,n=M+I%L*s,a=P+(I/L|0)*h,p=(g=c-d.firstGrid)%(y=l.width/s)*s,m=(g/y|0)*h,w.context.drawImage(l,p,m,s,h,n,a,s,h)),++I%L==0?k=_+ ++v*r:k++},getRow:function(t){return t=t||0,(w.sy+t)/h|0},getCol:function(t){return t=t||0,(w.sx+t)/s|0},get sx(){return n},get sy(){return a},set sx(t){n=Math.min(Math.max(0,t),p)},set sy(t){a=Math.min(Math.max(0,t),m)}};w.sx=t.sx||0,w.sy=t.sy||0,g.width=c,g.height=d;for(let e in t.properties){let i=t.properties[e];try{i=JSON.parse(i)}catch(t){}w[e]=w[e]||i}return t.tilesets&&w.addTilesets(t.tilesets),t.layers&&w.addLayers(t.layers),w}</script><script>window.k=window.kontra</script><script>!function(){"use strict";const t={a:"d",ae:"d.mp3",g:"g",t:"t",te:"t.png",h:32,w:32,r:9,c:9,u:0,m:16,p:12,b1:13,b2:14,b3:15,s1:9,s2:10,s3:11},e=function(e){const{h:n,w:r}=t,o={...e,color:"#0000",height:n,width:r},s=k.sprite(o);return k.pointer.track(s),s};function n(t,e){return t(e={exports:{}},e.exports),e.exports}var r=n((function(t){t.exports=(...t)=>{const e={};for(let n=0;n<t.length;n++)for(let r in t[n])t[n].hasOwnProperty(r)&&(e[r]=t[n][r]);return e}})),o=Object.freeze({default:r,__moduleExports:r}),s=o&&r||o,i=n((function(t){t.exports=t=>{let e="function"==typeof(t=t||{}).initial?t.initial():{},n={},r={};const o=[()=>{for(let t in r){const n={};n[t]=r[t](),e=s(e,n)}}],i=t=>{o.slice().map((e=>{e(t)}))};return{setState:t=>{e=s(e,t),i(e);for(let e of Object.values(t))"function"==typeof e.onChange&&e.onChange((t=>{i(t)}))},action:t=>{n=s(n,t((()=>new Proxy(e,{set:(t,e,n)=>{t[e]=n,i(t)}}))))},computed:t=>{r=s(r,t((()=>Object.freeze(e)))),i(e)},actions:()=>n,state:()=>Object.freeze(e),onChange:t=>{o.push(t)}}}}));class c{static get NUM_CHOICES(){return 6}static get SECRET_LENGTH(){return 4}static get NUM_GUESSES(){return 12}get numChoices(){return this._opts.numChoices}get secretLength(){return this._opts.secretLength}get numGuesses(){return this._opts.numGuesses}constructor(t){t=t||{},this._opts={},this._opts.numChoices=t.numChoices||c.NUM_CHOICES,this._opts.secretLength=t.secretLength||c.SECRET_LENGTH,this._opts.numGuesses=t.numGuesses||c.NUM_GUESSES,this.secret=t.secret||this.makeSecret(this._opts.numChoices,this._opts.secretLength)}makeSecret(t,e){for(var n=[],r=0;r<e;r++)n.push(Math.floor(Math.random()*t)+1);return n}evaluateGuess(t){var e=this.secret.slice(),n={correctPosition:0,correctNumber:0};return t.filter((function(t,r){return e[r]!==t||(n.correctPosition++,e[r]=0,!1)})).forEach((function(t){var r=e.indexOf(t);r>-1&&(n.correctNumber++,e[r]=0)})),n}isGuessCorrect(t){return this.secret.reduce((function(e,n,r){return e&&t[r]===n}),!0)}play(){throw new Error("Not implemented.")}}var u=c;const l=function(t){const{gm:e,mm:n}=t,{l:r}=e,o=new u({numChoices:n.numChoices,secretLength:r});return{...t,mm:{...n,secretLength:r,secret:o.secret}}};let a={gm:{l:1,m:[],w:!1},mm:{numChoices:2}};var f=a=l(a);const m=function(e,n,r){const{s1:o,s2:s,s3:i}=t;return{x:1,y:1+n,value:void 0===r?i:!0===r?o:s}},h=function(t){return"s"+(1+t)},d=function(e){const n=e.gm,{m:r,l:o}=n;(function(e){const{s1:n,s2:r,s3:o}=t,s=[n,r,o];return e.map(((t,e)=>({id:t,index:e}))).filter((t=>s.includes(t.id))).map((t=>t.index))})(r).forEach(((t,e)=>{const o=h(e),s=n[o],i=m(0,e,s);r[t]=i.value}))},g=function(e){const{b1:n,b2:r,b3:o}=t,s=[n,r,o],i=e.map(((t,e)=>({id:t,index:e}))).filter((t=>s.includes(t.id))).map((t=>t.index));return i.reverse(),i},p=function(e,n,r){const{r:o,c:s,b1:i,b2:c,b3:u}=t;return{x:s-(1+n),y:o,value:void 0===r?c:!0===r?i:u}},b=function(t){return"b"+(1+t)},x=window.localStorage,y=(JSON.parse(x.getItem("aol")),i({initial:()=>f}));y.onChange((t=>{(function(t){!function(t){const e=t.gm,{m:n,l:r}=e;g(n).forEach(((t,r)=>{const o=b(r),s=e[o],i=p(0,r,s);n[t]=i.value}))}(t),d(t)})(t),x.setItem("aol",JSON.stringify(t))}));const w=[{id:1,t:!1,r:!1,b:!0,l:!0},{id:2,t:!0,r:!0,b:!1,l:!1},{id:3,t:!0,r:!1,b:!1,l:!0},{id:4,t:!1,r:!0,b:!0,l:!1},{id:5,t:!1,r:!0,b:!1,l:!0},{id:6,t:!0,r:!1,b:!0,l:!1},{id:7,t:!1,r:!1,b:!1,l:!1},{id:8,t:!0,r:!1,b:!0,l:!0},{id:9,t:!1,r:!0,b:!1,l:!1},{id:10,t:!1,r:!0,b:!1,l:!1},{id:11,t:!1,r:!0,b:!1,l:!1},{id:12,t:!0,r:!1,b:!1,l:!1},{id:13,t:!1,r:!1,b:!1,l:!1},{id:14,t:!1,r:!1,b:!1,l:!1},{id:15,t:!1,r:!1,b:!1,l:!1},{id:16,t:!1,r:!1,b:!0,l:!0}],v=function(e){const{c:n}=t,r=1+e%n;return{x:r,y:1+(e-(r-1))/n}},S=function(e,n){const{r:r,c:o,u:s,s1:i,s2:c,s3:u}=t,l=r*o,a=[s,i,c,u],f=e[n],m=n>=0&&n<l,h=a.includes(f);return m&&h},E=function(e,n){const{c:r}=t;return e-1+(n-1)*r},C=function(t,e){const n=function(t,e){const n=e.index,r=e.id,{x:o,y:s}=v(n),i=w.find((t=>t.id===r)),{t:c,r:u,b:l,l:a}=i,f=[];return c&&f.push(E(o,s-1)),u&&f.push(E(o+1,s)),l&&f.push(E(o,s+1)),a&&f.push(E(o-1,s)),function(t,e){t.length;const n=e||{};let r;return{index:r=t[0],...n}}(f.filter((e=>S(t,e))),{t:!(!c||!l)||!c,r:!(!a||!u)||!u,b:!(!c||!l)||!l,l:!(!a||!u)||!a})}(t,e);return function(t,e,n){const r=e.index,o=(e.id,v(r)),s=n.index,i=v(s),c=i.y-o.y,u=i.x-o.x,l=1===u,a=1===c,f=-1===u;let m="";-1===c&&n.b&&(m="b"),l&&n.l&&(m="l"),a&&n.t&&(m="t"),f&&n.r&&(m="r");const h=["t","r","b","l"].filter((t=>t!==m));return function(t,e,n){let r;return t.length,r=function(t){return t.id}(t[0]),e[n]=r,{index:n,id:r}}(w.filter((t=>t[m])).filter((t=>h.filter((e=>t[e])).length>0)).filter((e=>h.filter((t=>e[t])).map((t=>function(t,e){let n;return"t"===e?n=E(t.x,t.y-1):"r"===e?n=E(t.x+1,t.y):"b"===e?n=E(t.x,t.y+1):"l"===e&&(n=E(t.x-1,t.y)),n}(i,t))).filter((e=>S(t,e))).length>0)),t,s)}(t,e,n)},_=function(){const{r:e,c:n,u:r}=t,o=new Array(e*n).fill(r);[...function(){const{r:e,c:n,m:r}=t;return[{x:n,y:e-1,value:r}]}(),...function(){const{r:e,c:n,p:r}=t;return[{x:e,y:n,value:r}]}(),...function(){const t=y.state().gm,{l:e}=t;return new Array(e).fill("").map(((e,n)=>{const r=b(n),o=t[r];return p(0,n,o)}))}(),...function(){const t=y.state().gm,{l:e}=t;return new Array(e).fill("").map(((e,n)=>{const r=b(n),o=t[r];return m(0,n,o)}))}()].forEach((t=>{const{x:e,y:n,value:r}=t,s=E(e,n);o[s]=r})),function(e){const{m:n}=t;let r={index:e.findIndex((t=>t===n)),id:n};for(;1!=r.index;)r=C(e,r)}(o),function(t){t.forEach(((e,n)=>{if(0===e){const e=function(t){return t[Math.floor(Math.random()*t.length)]}([1,2,3,4,5,6,7,8]);t[n]=e}}))}(o);const s=y.state();return y.setState({...s,gm:{...s.gm,m:o}}),o},N=function(){const e=y.state(),{a:n}=t,{gm:r,mm:o}=e,{l:s}=r,i=new u(o),c=function(e){const{m:n,l:r}=e,{b1:o,b3:s}=t,i=g(n).map((t=>n[t])).map((t=>t===o?2:t===s?1:""));return i.reverse(),i}(r),a=i.evaluateGuess(c);!function(t,e){const{m:n,l:r}=t.gm,{correctPosition:o,correctNumber:s}=e,i=[];for(let t=0;t<o;t++)i.push(!0);for(let t=0;t<s;t++)i.push(!1);let c=i.length;for(let t=c;t<r;t++)i.push(void 0);i.sort(),i.reverse(),c=i.length;for(let e=0;e<c;e++){const n=i.pop(),r=h(e);t.gm[r]=n}y.setState(t)}(e,a),function(t){const{correctPosition:e,correctNumber:n}=t;return e>0||n>0}(a)&&k.assets.audio[n].play();const{correctPosition:f}=a;f===s&&(7===s?(y.setState({...e,gm:{...r,m:r.m.map((()=>0))}}),window.on.className="back"):function(t,e){const n={...t,gm:{...e,l:e.l+1,m:[]}},r=l(n);y.setState(r)}(e,r))},G={render:function(){const{gm:n}=y.state();if(function(){const{h:e,w:n,r:r,c:o}=t,s=k.tileEngine({tileHeight:e,tileWidth:n,height:r,width:o});return function(e){const{g:n,t:r}=t;y.state().gm.l,e.addTilesets({image:r}),e.addLayers({name:n,data:function(){const t=y.state().gm.m;return t.length>0?t:_()}()})}(s),s}().render(),n.w)return;const{h:r,w:o}=t;let s;e({x:8*r,y:8*o,type:"p"}).render();for(let t=0;t<n.l;t++)(s=e({x:(7-t)*r,y:8*o,i:t})).render()},update:function(){k.pointer.onDown(((t,e)=>{if("mousedown"===t.type&&e){const{type:t}=e;"p"===t?N():function(t){const e=y.state(),n=b(t.i),r=e.gm[n];y.setState({...e,gm:{...e.gm,[n]:!r}})}(e)}}))}};(function(){const{ae:e,te:n}=t;return k.assets.imagePath="./",k.assets.audioPath="./",k.assets.load(e,n)})().then((()=>{k.init(),k.gameLoop(G).start()})).catch((()=>{}))}()</script>