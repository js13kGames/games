<!doctype html><title>Totally Usual Offline Dino Runner - js13kGames 2018</title><style>canvas{display:block;margin:0 auto}</style><body><script>var GA=GA||{};GA.VERSION="0.0.1",GA.plugins=void 0,GA.custom=void 0,GA.create=function(e,t,n,a,r){function i(){if(requestAnimationFrame(i,g.canvas),void 0===g._fps)s(),g.render(g.canvas,0);else{var e=Date.now(),t=e-g._startTime;for(1e3<t&&(t=g._frameDuration),g._startTime=e,g._lag+=t;g._lag>=g._frameDuration;)o(),s(),g._lag-=g._frameDuration;g.render(g.canvas,g._lag/g._frameDuration)}}function o(){function e(t){t._previousX=t.x,t._previousY=t.y,t.children&&0<t.children.length&&t.children.forEach((function(t){e(t)}))}g.stage.children.forEach((function(t){e(t)}))}function s(){if(0<g.buttons.length){g.canvas.style.cursor="auto";for(var e=g.buttons.length-1;0<=e;e--){var t=g.buttons[e];t.update(g.pointer,g.canvas),"over"!==t.state&&"down"!==t.state||t.stage||(g.canvas.style.cursor="pointer")}}if(g.dragAndDrop&&g.pointer.updateDragAndDrop(),g.state&&!g.paused&&g.state(),0!==g.updateFunctions.length)for(e=0;e<g.updateFunctions.length;e++)(0,g.updateFunctions[e])()}function l(e){e.x=0,e.y=0,e.vx=0,e.vy=0,e.width=0,e.height=0,e.scaleX=1,e.scaleY=1,e.pivotX=.5,e.pivotY=.5,e.rotation=0,e.visible=!0,e.parent=void 0,e.stage=!1,e.shadow=!1,e.shadowColor="rgba(100, 100, 100, 0.5)",e.shadowOffsetX=3,e.shadowOffsetY=3,e.shadowBlur=3,e.blendMode=void 0,e._alpha=1,e._draggable=void 0,e._layer=0,e._circular=!1,e._interactive=!1,e._previousX=void 0,e._previousY=void 0,e.children=[],e.addChild=function(t){t.parent&&t.parent.removeChild(t),t.parent=e,e.children.push(t)},e.removeChild=function(t){if(t.parent!==e)throw Error(t+"is not a child of "+e);e.children.splice(e.children.indexOf(t),1)},e.swapChildren=function(t,n){var a=e.children.indexOf(t),r=e.children.indexOf(n);if(-1===a||-1===r)throw Error(child+" Both objects must be a child of the caller "+e);t.childIndex=r,n.childIndex=a,e.children[a]=n,e.children[r]=t},e.add=function(t){var n=Array.prototype.slice.call(arguments);1<n.length?n.forEach((function(t){e.addChild(t)})):e.addChild(n[0])},e.remove=function(t){var n=Array.prototype.slice.call(arguments);1<n.length?n.forEach((function(t){e.removeChild(t)})):e.removeChild(n[0])},e.setPosition=function(t,n){e.x=t,e.y=n},e.putCenter=function(t,n,a){t.x=e.x+e.halfWidth-t.halfWidth+(n||0),t.y=e.y+e.halfHeight-t.halfHeight+(a||0),e.compensateForParentPosition(e,t)},e.putTop=function(t,n,a){t.x=e.x+e.halfWidth-t.halfWidth+(n||0),t.y=e.y-t.height+(a||0),e.compensateForParentPosition(e,t)},e.putRight=function(t,n,a){t.x=e.x+e.width+(n||0),t.y=e.y+e.halfHeight-t.halfHeight+(a||0),e.compensateForParentPosition(e,t)},e.putBottom=function(t,n,a){t.x=e.x+e.halfWidth-t.halfWidth+(n||0),t.y=e.y+e.height+(a||0),e.compensateForParentPosition(e,t)},e.putLeft=function(t,n,a){t.x=e.x-t.width+(n||0),t.y=e.y+e.halfHeight-t.halfHeight+(a||0),e.compensateForParentPosition(e,t)},e.compensateForParentPosition=function(e,t){0===t.parent.gx&&0===t.parent.gy||(t.x-=e.gx,t.y-=e.gy)},Object.defineProperties(e,{gx:{get:function(){return this.parent?this.x+this.parent.gx:this.x},enumerable:!0,configurable:!0},gy:{get:function(){return this.parent?this.y+this.parent.gy:this.y},enumerable:!0,configurable:!0},position:{get:function(){return{x:e.x,y:e.y}},enumerable:!0,configurable:!0},alpha:{get:function(){return e.parent._alpha*e._alpha},set:function(t){e._alpha=t},enumerable:!0,configurable:!0},halfWidth:{get:function(){return e.width/2},enumerable:!0,configurable:!0},halfHeight:{get:function(){return e.height/2},enumerable:!0,configurable:!0},centerX:{get:function(){return e.x+e.halfWidth},enumerable:!0,configurable:!0},centerY:{get:function(){return e.y+e.halfHeight},enumerable:!0,configurable:!0},layer:{get:function(){return e._layer},set:function(t){e._layer=t,e.parent.children.sort(h)},enumerable:!0,configurable:!0},circular:{get:function(){return e._circular},set:function(t){!0===t&&!1===e._circular&&(d(e),e._circular=!0),!1===t&&!0===e._circular&&(delete e.diameter,delete e.radius,e._circular=!1)},enumerable:!0,configurable:!0},draggable:{get:function(){return e._draggable},set:function(t){!0===t&&(g.draggableSprites.push(e),e._draggable=!0,!1===g.dragAndDrop&&(g.dragAndDrop=!0)),!1===t&&g.draggableSprites.splice(g.draggableSprites.indexOf(e),1)},enumerable:!0,configurable:!0},interactive:{get:function(){return e._interactive},set:function(t){!0===t&&(c(e),e._interactive=!0),!1===t&&(g.buttons.splice(g.buttons.indexOf(e),1),e._interactive=!1)},enumerable:!0,configurable:!0},localBounds:{get:function(){return{x:0,y:0,width:e.width,height:e.height}},enumerable:!0,configurable:!0},globalBounds:{get:function(){return rectangle={x:e.gx,y:e.gy,width:e.gx+e.width,height:e.gy+e.height}},enumerable:!0,configurable:!0},empty:{get:function(){return 0===e.children.length},enumerable:!0,configurable:!0}})}function d(e){Object.defineProperties(e,{diameter:{get:function(){return e.width},set:function(t){e.width=t,e.height=t},enumerable:!0,configurable:!0},radius:{get:function(){return e.width/2},set:function(t){e.width=2*t,e.height=2*t},enumerable:!0,configurable:!0}})}function c(e){e.press=e.press||void 0,e.release=e.release||void 0,e.over=e.over||void 0,e.out=e.out||void 0,e.tap=e.tap||void 0,e.state="up",e.action="",e.pressed=!1,e.enabled=!0,e.hoverOver=!1,g.buttons.push(e),e.update=function(t,n){e.enabled&&(n=g.pointer.hitTestSprite(e),t.isUp&&(e.state="up","button"===e.subtype&&e.show(0)),n&&(e.state="over",e.frames&&3===e.frames.length&&"button"===e.subtype&&e.show(1),t.isDown&&(e.state="down","button"===e.subtype&&(3===e.frames.length?e.show(2):e.show(1)))),"down"!==e.state||e.pressed||(e.press&&e.press(),e.pressed=!0,e.action="pressed"),"over"===e.state&&(e.pressed&&(e.release&&e.release(),e.pressed=!1,e.action="released",g.pointer.tapped&&e.tap&&e.tap()),e.hoverOver||(e.over&&e.over(),e.hoverOver=!0)),"up"===e.state&&(e.pressed&&(e.release&&e.release(),e.pressed=!1,e.action="released"),e.hoverOver&&(e.out&&e.out(),e.hoverOver=!1)))}}function u(e){var t={};return t.code=e,t.isDown=!1,t.isUp=!0,t.press=void 0,t.release=void 0,t.downHandler=function(e){e.keyCode===t.code&&(t.isUp&&t.press&&t.press(),t.isDown=!0,t.isUp=!1),e.preventDefault()},t.upHandler=function(e){e.keyCode===t.code&&(t.isDown&&t.release&&t.release(),t.isDown=!1,t.isUp=!0),e.preventDefault()},window.addEventListener("keydown",t.downHandler.bind(t),!1),window.addEventListener("keyup",t.upHandler.bind(t),!1),t}function h(e,t){return e.layer<t.layer?-1:1}var f,g={};if(g.canvas=document.createElement("canvas"),g.canvas.setAttribute("width",1*e),g.canvas.setAttribute("height",1*t),g.canvas.style.backgroundColor="black",document.body.appendChild(g.canvas),g.canvas.ctx=g.canvas.getContext("2d"),g.stage=(l(f={}),f.stage=!0,f.width=g.canvas.width,f.height=g.canvas.height,f.x=0,f.y=0,f.parent=void 0,f),g.pointer=function(){var e={_x:0,_y:0};return Object.defineProperties(e,{x:{get:function(){return e._x/g.scale},enumerable:!0,configurable:!0},y:{get:function(){return e._y/g.scale},enumerable:!0,configurable:!0},centerX:{get:function(){return e.x},enumerable:!0,configurable:!0},centerY:{get:function(){return e.y},enumerable:!0,configurable:!0},position:{get:function(){return{x:e.x,y:e.y}},enumerable:!0,configurable:!0}}),e.isDown=!1,e.isUp=!0,e.tapped=!1,e.downTime=0,e.elapsedTime=0,e.press=void 0,e.release=void 0,e.tap=void 0,e.dragSprite=null,e.dragOffsetX=0,e.dragOffsetY=0,e.moveHandler=function(t){e._x=t.pageX-t.target.offsetLeft,e._y=t.pageY-t.target.offsetTop,t.preventDefault()},e.touchmoveHandler=function(t){e._x=t.targetTouches[0].pageX-g.canvas.offsetLeft,e._y=t.targetTouches[0].pageY-g.canvas.offsetTop,t.preventDefault()},e.downHandler=function(t){e._x=t.pageX-t.target.offsetLeft,e._y=t.pageY-t.target.offsetTop,e.isDown=!0,e.isUp=!1,e.tapped=!1,e.downTime=Date.now(),e.press&&e.press(),t.preventDefault()},e.touchstartHandler=function(t){e._x=t.targetTouches[0].pageX-g.canvas.offsetLeft,e._y=t.targetTouches[0].pageY-g.canvas.offsetTop,e.isDown=!0,e.isUp=!1,e.tapped=!1,e.downTime=Date.now(),e.press&&e.press(),t.preventDefault()},e.upHandler=function(t){e.elapsedTime=Math.abs(e.downTime-Date.now()),200>=e.elapsedTime&&(e.tapped=!0,e.tap&&e.tap()),e.isUp=!0,e.isDown=!1,e.release&&e.release(),t.preventDefault()},g.canvas.addEventListener("mousemove",e.moveHandler.bind(e),!1),g.canvas.addEventListener("mousedown",e.downHandler.bind(e),!1),window.addEventListener("mouseup",e.upHandler.bind(e),!1),g.canvas.addEventListener("touchmove",e.touchmoveHandler.bind(e),!1),g.canvas.addEventListener("touchstart",e.touchstartHandler.bind(e),!1),window.addEventListener("touchend",e.upHandler.bind(e),!1),g.canvas.style.touchAction="none",e.hitTestSprite=function(t){if(t.circular){var n=e.x-(t.gx+t.halfWidth),a=e.y-(t.gy+t.halfHeight);t=Math.sqrt(n*n+a*a)<t.radius}else{n=t.gx+t.width,a=t.gy;var r=t.gy+t.height;t=e.x>t.gx&&e.x<n&&e.y>a&&e.y<r}return t},e.updateDragAndDrop=function(){if(e.isDown)if(null===e.dragSprite)for(var t=g.draggableSprites.length-1;-1<t;t--){var n=g.draggableSprites[t];if(n.draggable&&e.hitTestSprite(n)){e.dragOffsetX=e.x-n.gx,e.dragOffsetY=e.y-n.gy,e.dragSprite=n,(t=n.parent.children).splice(t.indexOf(n),1),t.push(n),g.draggableSprites.splice(g.draggableSprites.indexOf(n),1),g.draggableSprites.push(n);break}}else e.dragSprite.x=e.x-e.dragOffsetX,e.dragSprite.y=e.y-e.dragOffsetY;e.isUp&&(e.dragSprite=null),g.draggableSprites.some((function(t){return t.draggable&&e.hitTestSprite(t)?(g.canvas.style.cursor="pointer",!0):(g.canvas.style.cursor="auto",!1)}))},e}(),g.key=function(){var e={};return e.leftArrow=u(37),e.upArrow=u(38),e.rightArrow=u(39),e.downArrow=u(40),e.space=u(32),e}(),g.buttons=[],g.dragAndDrop=!1,g.draggableSprites=[],g.tweens=[],g.state=void 0,g.load=r||void 0,g.setup=n||void 0,void 0===g.setup)throw Error("Please supply the setup function in the constructor");return g.assetFilePaths=a||void 0,g.paused=!1,g._fps=60,g._startTime=Date.now(),g._frameDuration=1e3/g._fps,g._lag=0,g.interpolate=!0,g.updateFunctions=[],g.scale=1,g.start=function(){g.assetFilePaths?(g.assets.whenLoaded=function(){g.state=void 0,g.setup()},g.assets.load(g.assetFilePaths),g.load&&(g.state=g.load)):g.setup(),i()},g.pause=function(){g.paused=!0},g.resume=function(){g.paused=!1},g.hidePointer=function(){g.canvas.style.cursor="none"},g.showPointer=function(){g.canvas.style.cursor="auto"},Object.defineProperties(g,{fps:{get:function(){return g._fps},set:function(e){g._fps=e,g._startTime=Date.now(),g._frameDuration=1e3/g._fps},enumerable:!0,configurable:!0},backgroundColor:{set:function(e){g.canvas.style.backgroundColor=e},enumerable:!0,configurable:!0}}),g.remove=function(e){var t=Array.prototype.slice.call(arguments);if(t[0]instanceof Array){if(0<(t=t[0]).length)for(var n=t.length-1;0<=n;n--){var a=t[n];a.parent.removeChild(a),t.splice(t.indexOf(a),1)}}else 1<t.length?t.forEach((function(e){e.parent.removeChild(e)})):t[0].parent.removeChild(t[0])},g.group=function(e){var t={};return l(t),t.addChild=function(e){e.parent&&e.parent.removeChild(e),e.parent=t,t.children.push(e),t.calculateSize()},t.removeChild=function(e){if(e.parent!==t)throw Error(e+"is not a child of "+t);t.children.splice(t.children.indexOf(e),1),t.calculateSize()},t.calculateSize=function(){0<t.children.length&&(t._newWidth=0,t._newHeight=0,t.children.forEach((function(e){e.x+e.width>t._newWidth&&(t._newWidth=e.x+e.width),e.y+e.height>t._newHeight&&(t._newHeight=e.y+e.height)})),t.width=t._newWidth,t.height=t._newHeight)},g.stage.addChild(t),e&&Array.prototype.slice.call(arguments).forEach((function(e){t.addChild(e)})),t},g.rectangle=function(e,t,n,a,r,i,o){var s={};return l(s),s.mask=!1,s.width=e||32,s.height=t||32,s.fillStyle=n||"red",s.strokeStyle=a||"none",s.lineWidth=r||0,s.x=i||0,s.y=o||0,g.stage.addChild(s),s.render=function(e){e.strokeStyle=s.strokeStyle,e.lineWidth=s.lineWidth,e.fillStyle=s.fillStyle,e.beginPath(),e.rect(-s.width*s.pivotX,-s.height*s.pivotY,s.width,s.height),!0===s.mask?e.clip():("none"!==s.strokeStyle&&e.stroke(),"none"!==s.fillStyle&&e.fill())},s},g.circle=function(e,t,n,a,r,i){var o={};return l(o),o.mask=!1,o.width=e||32,o.height=e||32,o.fillStyle=t||"red",o.strokeStyle=n||"none",o.lineWidth=a||"none",o.x=r||0,o.y=i||0,g.stage.addChild(o),d(o),o.render=function(e){e.strokeStyle=o.strokeStyle,e.lineWidth=o.lineWidth,e.fillStyle=o.fillStyle,e.beginPath(),e.arc(o.radius+-o.diameter*o.pivotX,o.radius+-o.diameter*o.pivotY,o.radius,0,2*Math.PI,!1),!0===o.mask?e.clip():("none"!==o.strokeStyle&&e.stroke(),"none"!==o.fillStyle&&e.fill())},o},g.line=function(e,t,n,a,r,i){var o={};return l(o),n||0===n||(n=0),a||0===a||(a=0),r||0===r||(r=32),i||0===i||(i=32),o.ax=n,o.ay=a,o.bx=r,o.by=i,o.strokeStyle=e||"red",o.lineWidth=t||1,o.lineJoin="round",g.stage.addChild(o),o.render=function(e){e.strokeStyle=o.strokeStyle,e.lineWidth=o.lineWidth,e.lineJoin=o.lineJoin,e.beginPath(),e.moveTo(o.ax,o.ay),e.lineTo(o.bx,o.by),"none"!==o.strokeStyle&&e.stroke(),"none"!==o.fillStyle&&e.fill()},o},g.text=function(e,t,n,a,r){var i={};return l(i),i.content=e||"Hello!",i.font=t||"12px sans-serif",i.fillStyle=n||"red",i.textBaseline="top",Object.defineProperties(i,{width:{get:function(){return g.canvas.ctx.measureText(i.content).width},enumerable:!0,configurable:!0},height:{get:function(){return g.canvas.ctx.measureText("M").width},enumerable:!0,configurable:!0}}),g.stage.addChild(i),i.x=a||0,i.y=r||0,i.render=function(e){e.strokeStyle=i.strokeStyle,e.lineWidth=i.lineWidth,e.fillStyle=i.fillStyle,0===i.width&&(i.width=e.measureText(i.content).width),0===i.height&&(i.height=e.measureText("M").width),e.translate(-i.width*i.pivotX,-i.height*i.pivotY),e.font=i.font,e.textBaseline=i.textBaseline,e.fillText(i.content,0,0)},i},g.frame=function(e,t,n,a,r){var i={};return i.image=e,i.x=t,i.y=n,i.width=a,i.height=r,i},g.frames=function(e,t,n,a){var r={};return r.image=e,r.data=t,r.width=n,r.height=a,r},g.filmstrip=function(e,t,n,a){var r=g.assets[e].source,i=[],o=r.width/t;r=r.height/n*o;for(var s=0;s<r;s++){var l=s%o*t,d=Math.floor(s/o)*n;a&&0<a&&(l+=a+a*s%o,d+=a+a*Math.floor(s/o)),i.push([l,d])}return g.frames(e,i,t,n)},g.sprite=function(e){var t={};if(void 0===e)throw Error("Sprites require a source");return l(t),t.frames=[],t.loop=!0,t._currentFrame=0,t.setTexture=function(e){if(e.image)if(e.image&&!e.data){if(!(g.assets[e.image].source instanceof Image))throw Error(e.image+" is not an image file");t.source=g.assets[e.image].source,t.sourceX=e.x,t.sourceY=e.y,t.width=e.width,t.height=e.height,t.sourceWidth=e.width,t.sourceHeight=e.height}else e.image&&e.data&&(t.source=g.assets[e.image].source,t.frames=e.data,t.sourceX=t.frames[0][0],t.sourceY=t.frames[0][1],t.width=e.width,t.height=e.height,t.sourceWidth=e.width,t.sourceHeight=e.height);else e instanceof Array?(t.frames=e,t.source=g.assets[e[0]].source,t.sourceX=g.assets[e[0]].frame.x,t.sourceY=g.assets[e[0]].frame.y,t.width=g.assets[e[0]].frame.w,t.height=g.assets[e[0]].frame.h,t.sourceWidth=g.assets[e[0]].frame.w,t.sourceHeight=g.assets[e[0]].frame.h):(t.tilesetFrame=g.assets[e],t.source=t.tilesetFrame.source,t.sourceX=t.tilesetFrame.frame.x,t.sourceY=t.tilesetFrame.frame.y,t.width=t.tilesetFrame.frame.w,t.height=t.tilesetFrame.frame.h,t.sourceWidth=t.tilesetFrame.frame.w,t.sourceHeight=t.tilesetFrame.frame.h)},t.setTexture(e),t.gotoAndStop=function(e){if(!(0<t.frames.length))throw Error("Frame number "+e+"doesn't exist");t.frames[0]instanceof Array?(t.sourceX=t.frames[e][0],t.sourceY=t.frames[e][1]):g.assets[t.frames[e]].frame&&(t.source=g.assets[t.frames[e]].source,t.sourceX=g.assets[t.frames[e]].frame.x,t.sourceY=g.assets[t.frames[e]].frame.y,t.sourceWidth=g.assets[t.frames[e]].frame.w,t.sourceHeight=g.assets[t.frames[e]].frame.h,t.width=g.assets[t.frames[e]].frame.w,t.height=g.assets[t.frames[e]].frame.h),t._currentFrame=e},t.x=0,t.y=0,0<t.frames.length&&(g.addStatePlayer(t),Object.defineProperty(t,"currentFrame",{get:function(){return t._currentFrame},enumerable:!1,configurable:!1})),g.stage.addChild(t),t.render=function(e){e.drawImage(t.source,t.sourceX,t.sourceY,t.sourceWidth,t.sourceHeight,-t.width*t.pivotX,-t.height*t.pivotY,t.width,t.height)},t},g.button=function(e){return(e=g.sprite(e)).subtype="button",c(e),e},g.image=function(e){return g.assets[e]},g.json=function(e){return g.assets[e]},g.addStatePlayer=function(e){function t(t){a(),o=t[0],s=t[1],i=s-o,0===o&&(i+=1,r+=1),1===i&&(i=2,r+=1),e.fps||(e.fps=12),t=1e3/e.fps,e.gotoAndStop(o),d||(l=setInterval(n.bind(this),t),d=!0)}function n(){r<i?(e.gotoAndStop(e.currentFrame+1),r+=1):e.loop&&(e.gotoAndStop(o),r=1)}function a(){void 0!==l&&!0===d&&(d=!1,i=s=o=r=0,clearInterval(l))}var r=0,i=0,o=0,s=0,l=void 0,d=!1;e.show=function(t){a(),"string"!=typeof t?e.gotoAndStop(t):e.gotoAndStop(e.frames.indexOf(t))},e.play=function(){t([0,e.frames.length-1])},e.stop=function(){a(),e.gotoAndStop(e.currentFrame)},e.playing=d,e.playSequence=t},g.render=function(e,t){function n(r){if(r.visible&&r.gx<e.width+r.width&&r.gx+r.width>=-r.width&&r.gy<e.height+r.height&&r.gy+r.height>=-r.height){if(a.save(),g.interpolate?(r.renderX=void 0!==r._previousX?(r.x-r._previousX)*t+r._previousX:r.x,r.renderY=void 0!==r._previousY?(r.y-r._previousY)*t+r._previousY:r.y):(r.renderX=r.x,r.renderY=r.y),a.translate(r.renderX+r.width*r.pivotX,r.renderY+r.height*r.pivotY),a.globalAlpha=r.alpha,a.rotate(r.rotation),a.scale(r.scaleX,r.scaleY),r.shadow&&(a.shadowColor=r.shadowColor,a.shadowOffsetX=r.shadowOffsetX,a.shadowOffsetY=r.shadowOffsetY,a.shadowBlur=r.shadowBlur),r.blendMode&&(a.globalCompositeOperation=r.blendMode),r.render&&r.render(a),r.children&&0<r.children.length){a.translate(-r.width*r.pivotX,-r.height*r.pivotY);for(var i=0;i<r.children.length;i++)n(r.children[i])}a.restore()}}var a=e.ctx;a.clearRect(0,0,e.width,e.height);for(var r=0;r<g.stage.children.length;r++)n(g.stage.children[r])},g.assets={toLoad:0,loaded:0,imageExtensions:["bmp","png","jpg","gif","webp"],fontExtensions:["ttf","otf","ttc","woff"],audioExtensions:["mp3","ogg","wav","webm"],jsonExtensions:["json"],whenLoaded:void 0,load:function(e){console.log("Loading assets...");var t=this;t.toLoad=e.length,e.forEach((function(e){var n=e.split(".").pop();if(-1!==t.imageExtensions.indexOf(n)){var a=new Image;a.addEventListener("load",(function(){a.name=e,t[a.name]={source:a,frame:{x:0,y:0,w:a.width,h:a.height}},t.loadHandler()}),!1),a.src=e}else if(-1!==t.fontExtensions.indexOf(n)){n=e.split("/").pop().split(".")[0];var r=document.createElement("style");r.appendChild(document.createTextNode("@font-face {font-family: '"+n+"'; src: url('"+e+"');}")),document.head.appendChild(r),t.loadHandler()}else if(-1!==t.audioExtensions.indexOf(n))(n=g.makeSound(e,t.loadHandler.bind(t))).name=e,t[n.name]=n;else if(-1!==t.jsonExtensions.indexOf(n)){var i=new XMLHttpRequest,o={};i.open("GET",e,!0),i.addEventListener("readystatechange",(function(){200===i.status&&4===i.readyState&&((o=JSON.parse(i.responseText)).name=e,t[o.name]=o,o.frames?t.createTilesetFrames(o,e):t.loadHandler())})),i.send()}else console.log("File type not recognized: "+e)}))},createTilesetFrames:function(e,t){var n=this,a=t.replace(/[^\/]*$/,""),r=new Image;r.addEventListener("load",(function(){n[a+e.meta.image]={source:r,frame:{x:0,y:0,w:r.width,h:r.height}},Object.keys(e.frames).forEach((function(t){n[t]=e.frames[t],n[t].source=r})),n.loadHandler()}),!1),r.src=a+e.meta.image},loadHandler:function(){this.loaded+=1,console.log(this.loaded),this.toLoad===this.loaded&&(this.loaded=this.toLoad=0,this.whenLoaded())}},g.keyboard=u,g.makeDisplayObject=l,void 0!==GA.plugins&&GA.plugins(g),void 0!==GA.custom&&GA.custom(g),g},window.ga=GA.create,(GA=GA||{}).plugins=function(e){e.move=function(e){if(0==e instanceof Array)e.x+=0|e.vx,e.y+=0|e.vy;else for(var t=0;t<e.length;t++){var n=e[t];n.x+=0|n.vx,n.y+=0|n.vy}},e.distance=function(e,t){var n=t.centerX-e.centerX;return e=t.centerY-e.centerY,Math.sqrt(n*n+e*e)},e.randomInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},e.scaleToWindow=function(t){var n=Math.min(window.innerWidth/e.canvas.width,window.innerHeight/e.canvas.height);e.canvas.style.transformOrigin="0 0",e.canvas.style.transform="scale("+n+")";var a=e.canvas.width>e.canvas.height?e.canvas.width*n<window.innerWidth?"horizontally":"vertically":e.canvas.height*n<window.innerHeight?"vertically":"horizontally";if("horizontally"===a){var r=(window.innerWidth-e.canvas.width*n)/2;e.canvas.style.marginLeft=r+"px",e.canvas.style.marginRight=r+"px"}"vertically"===a&&(r=(window.innerHeight-e.canvas.height*n)/2,e.canvas.style.marginTop=r+"px",e.canvas.style.marginBottom=r+"px"),e.canvas.style.paddingLeft=0,e.canvas.style.paddingRight=0,e.canvas.style.paddingTop=0,e.canvas.style.paddingBottom=0,e.canvas.style.display="block",document.body.style.backgroundColor=t||"#2C3539",e.pointer.scale=n,e.scale=n,e.canvas.scaled=!0,-1==(t=navigator.userAgent.toLowerCase()).indexOf("safari")||-1<t.indexOf("chrome")||(e.canvas.style.maxHeight="100%",e.canvas.style.minHeight="100%")},e.particles=[],e.particleEffect=function(t,n,a,r,i,o,s,l,d,c,u,h,f,g,p,v,m,y){function w(r){var o=a();0<o.frames.length&&o.gotoAndStop(Math.floor(Math.random()*(o.frames.length-1+1))+0),o.x=t-o.halfWidth,o.y=n-o.halfHeight;var s=Math.floor(Math.random()*(c-d+1))+d;o.width=s,o.height=s,o.scaleSpeed=f+Math.random()*(g-f),o.alphaSpeed=p+Math.random()*(v-p),o.rotationSpeed=m+Math.random()*(y-m),s=u+Math.random()*(h-u),o.vx=s*Math.cos(r),o.vy=s*Math.sin(r),o.updateParticle=function(){o.vy+=i,o.x+=o.vx,o.y+=o.vy,0<o.scaleX-o.scaleSpeed&&(o.scaleX-=o.scaleSpeed),0<o.scaleY-o.scaleSpeed&&(o.scaleY-=o.scaleSpeed),o.rotation+=o.rotationSpeed,o.alpha-=o.alphaSpeed,0>=o.alpha&&(e.remove(o),e.particles.splice(e.particles.indexOf(o),1))},e.particles.push(o)}void 0===t&&(t=0),void 0===n&&(n=0),void 0===a&&(a=function(){return e.circle(10,"red")}),void 0===r&&(r=10),void 0===i&&(i=0),void 0===o&&(o=!0),void 0===s&&(s=0),void 0===l&&(l=6.28),void 0===d&&(d=4),void 0===c&&(c=16),void 0===u&&(u=.1),void 0===h&&(h=1),void 0===f&&(f=.01),void 0===g&&(g=.05),void 0===p&&(p=.02),void 0===v&&(v=.02),void 0===m&&(m=.01),void 0===y&&(y=.03);for(var x,b=[],S=(l-s)/(r-1),_=0;_<r;_++)o?(x=s+Math.random()*(l-s),b.push(x)):(void 0===x&&(x=s),b.push(x),x+=S);b.forEach((function(e){w(e)}))},e.updateParticles=function(){if(0<e.particles.length)for(var t=e.particles.length-1;0<=t;t--)e.particles[t].updateParticle()},e.updateFunctions.push(e.updateParticles),e.emitter=function(e,t){function n(){t()}var a={},r=void 0;return a.playing=!1,a.play=function(){a.playing||(t(),r=setInterval(n.bind(this),e),a.playing=!0)},a.stop=function(){a.playing&&(clearInterval(r),a.playing=!1)},a},e.hitTestPoint=function(e,t){var n=t.radius?"circle":"rectangle";if("rectangle"===n){var a=t.x,r=t.x+t.width,i=t.y,o=t.y+t.height;a=e.x>a&&e.x<r&&e.y>i&&e.y<o}return"circle"===n&&(n=e.x-t.centerX,e=e.y-t.centerY,a=(e=Math.sqrt(n*n+e*e))<t.radius),a},e.hitTestRectangle=function(e,t,n){if(void 0===n&&(n=!1),n)var a=e.gx+e.halfWidth-(t.gx+t.halfWidth),r=e.gy+e.halfHeight-(t.gy+t.halfHeight);else a=e.centerX-t.centerX,r=e.centerY-t.centerY;return n=e.halfWidth+t.halfWidth,e=e.halfHeight+t.halfHeight,Math.abs(a)<n&&Math.abs(r)<e}};var dino,cactus,glitch,ground,pointsLabel,endLabel,ga=ga(320,240,load,["dinozarek.png","kaktus.png","piasek.png"]),glitchColors="red crimson lime yellow gold darkviolet brown grey".split(" "),endMessages=";Eating your cookies;Looking at your bookmarks;Spying your browser history;Trying to crack your account password;installing rootkit;Wiping out your hard drive;Data saved. Have a nice day.;Data saved. Have a nice day.;It is now safe to to turn off your computer.".split(";"),time=0,points=0,jumpSteps=0,floorY=144,scrollSpeed=150;function load(){ga.backgroundColor="lightblue",ground=createGround(),dino=ga.sprite("dinozarek.png"),cactus=ga.sprite("kaktus.png"),glitch=ga.rectangle(64,64,"red","",0,360,floorY-32),pointsLabel=ga.text("0","16px serif","black",250,20),dino.x=8,dino.y=floorY,genCactus(),setupPlayerControls(),ga.state=game}function createGround(e,t){for(e=ga.group(),t=0;10>t;t++)for(var n=0;3>n;n++){var a=ga.sprite("piasek.png");a.x=32*t,a.y=floorY+32*(n+1),e.addChild(a)}return e}function genCactus(){cactus.x=ga.randomInt(320,350),cactus.y=floorY}function jump(){dino.y==floorY&&(jumpSteps=24)}function reset(){dino.x=8,dino.y=floorY,genCactus(),points=0,scrollSpeed=150,pointsLabel.content="0"}function centeredLabel(e,t,n,a){return e=ga.text(e,t,n,1,a),ga.canvas.ctx.font=t,e.x=.5*(ga.stage.width-e.width),e}function end(){time=0,ga.state=endGame,ga.remove(dino),ga.remove(cactus),ga.remove(glitch),ga.remove(ground),ga.remove(pointsLabel),ga.text(":(","64px sans-serif","white",32,32),ga.text("Your dino run into a glitch","14px sans-serif","white",96,32),ga.text("and needs to restart","14px sans-serif","white",96,54),ga.text("We're just collecting some","14px sans-serif","white",96,76),ga.text("offline data and then we'll","14px sans-serif","white",96,98),ga.text("restart for you","14px sans-serif","white",96,120),endLabel=centeredLabel("","14px sans-serif","white",160),centeredLabel("To know more search online","14px sans-serif","white",190),centeredLabel("for code 0FF11N3","14px sans-serif","white",212)}function score(){points++,pointsLabel.content=points,dino.x+=12,scrollSpeed+=8}function setupPlayerControls(){ga.key.upArrow.press=function(){jump()},ga.key.space.press=function(){jump()}}function game(){0<jumpSteps?(jumpSteps--,dino.y-=4):dino.y=Math.min(floorY,dino.y+4),13>=points?(cactus.x-=scrollSpeed/ga.fps,-30>cactus.x&&(score(),genCactus()),ga.hitTestRectangle(dino,cactus,!1)&&reset()):(glitch.x-=50/ga.fps,glitch.fillStyle=glitchColors[ga.randomInt(0,glitchColors.length-1)],ga.hitTestRectangle(dino,glitch,!1)&&end())}function endGame(){time+=1/ga.fps,endLabel.content=endMessages[Math.min(endMessages.length-1,Math.floor(time/3.5))],ga.canvas.ctx.font=endLabel.font,endLabel.x=.5*(ga.stage.width-endLabel.width)}ga.start(),ga.fps=60</script>