<!DOCTYPE html><html><head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"> <title>Darkened Path</title> <style>body{color: #fff; overflow: hidden; background-color: #000; margin: 0; font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;}.unselectable{-webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;}#title{position: absolute; left: 0; top: 0; width: 100%; text-align: center; height: 35px; font-size: 25px; padding-top: 3px; color: #ffa726;}#gstat{position: absolute; left: 0; top: 35px; width: 100%; text-align: center; height: 60px; font-size: 18px; padding-top: 5px; visibility: hidden;}#gst{margin: auto;}#gst td{padding-left: 10px; padding-right: 10px; border: 1px solid #ffa726;}#end{visibility: hidden; position: absolute; top: 35px; left: 0; width: 100%; overflow: auto; bottom: 0; background: rgba(0, 0, 0, 0.7); z-index: 9; font-size: 20px; text-align: center;}#start{position: absolute; top: 35px; left: 0; overflow: auto; width: 100%; bottom: 0; background: rgba(0, 0, 0, 0.7); z-index: 9; font-size: 20px; text-align: center;}#start div{max-width: 80%; margin: auto;}#cnvc{position: absolute; top:115px; left: 0; width: 100%; bottom: 150px; z-index: 1; text-align: center; margin: auto;}.btn{padding: 5px; background: #ffa726; color: black; font-size: 23px;}#tctrl{margin: auto; width: 100px;}td{padding: 2px;}td.clickable:active{background: rgba(255, 152, 0, 0.5);}#ctrl{position: absolute; bottom: 0px; left: 0; width: 100%; height: 105px; z-index: 1; text-align: center; visibility: hidden;}#sctrl{position: absolute; top: 5%; left: 5%; width: 40px; font-size:25px; line-height: 40px; height: 40px; z-index: 3; text-align: center; font-weight: bold; border: 2px solid #ff9800; color: #ff9800; border-radius: 20px;}#fctrl{position: absolute; top: 5%; right: 5%; width: 40px; font-size: 25px; line-height: 40px; height: 40px; z-index: 3; font-weight: bold; text-align: center; border: 2px solid #ff9800; color: #ff9800; border-radius: 20px;}.chevron::before{margin: 5px; border-style: solid; border-color: #ff9800; border-width: 0.25em 0.25em 0 0; content: ''; display: inline-block; height:15px; left: 0.15em; position: relative; top: 0.15em; transform: rotate(-45deg); vertical-align: top; width: 15px;}.chevron.right:before{left: 0; transform: rotate(45deg);}.chevron.bottom:before{top: 0; transform: rotate(135deg);}.chevron.left:before{left: 0.25em; transform: rotate(-135deg);}#stones{color: #f44336;}#flare{color: #ffeb3b;}</style></head><body> <div id="con"> <div id="title">Darkened Path</div><div id="gstat"> <table id="gst"> <tr><td> <span class="unselectable">(S)tones: </span><span id="stones" class="unselectable"></span></td><td> <span>Time:</span><span id="time"> 00:00</span></td></tr><tr><td> <span class="unselectable">(F)lares: </span><span id="flare" class="unselectable"></span></td><td> <span>Best:</span><span id="time_best"> -</span> <br></td></tr></table> </div><div id="cnvc"> <canvas id="cnv"> </canvas> </div><div id="start"> <div> <br><br>Your mission is to find exit on other side of the dark maze as quickly as posible. To help you find the exit you can use stones, which you can pick up and put down by pressing "S" on keyboard or clicking button if you are on mobile. You can also use flares( "F" on keyboard or button) which will illuminate maze, you can find flares in maze(yelow dots in a maze). Finish game by steping on green dot on maze exit<br><br><br><span onclick="startGame()" class="btn">Start</span> </div></div><div id="end"><br><br><br><br>Congratulations !!!<br>You found the exit in:<br><span id="finishtime"></span><br><span id="finishrecord">New record!!!</span> <br><br><span onclick="startGame()" class="btn">Restart</span> </div><div id="ctrl"> <table id="tctrl"> <tr> <td></td><td class="clickable" onclick="moveUp()"> <div class="chevron"></div></td><td></td></tr><tr> <td class="clickable" onclick="moveLeft()"> <div class="chevron left"></div></td><td></td><td class="clickable" onclick="moveRight()"> <div class="chevron right"> </div></td></tr><tr> <td></td><td class="clickable" onclick="moveDown()"> <div class="chevron bottom"></div></td><td></td></tr></table> <span id="sctrl" onclick="setStone()">S</span> <span id="fctrl" onclick="setFlare()">F</span> </div></div><script >function build_field(){for(var i=0;i<sizex;i++){tiles[i]=[];for(var e=0;e<sizey;e++)tiles[i][e]={},tiles[i][e].maze_done=!1}for(var r=0;r<sizex+5;r++){matrix[r]=[];for(var t=0;t<sizey+5;t++)matrix[r][t]=[0,0,0,0,0,0,0]}}function build_maze(i,e,r,t){if(i==finish.x&&e==finish.y)return"1";if(i==start.x&&e==start.y)return"1";if(i<0||i>=sizex||e<0||e>=sizey)return"2";if(tiles[i][e].maze_done)return"2";tiles[i][e].maze_done=!0;var s=[];for(i-1==r&&e==t||s.push({x:i-1,y:e,bp:0}),i+1==r&&e==t||s.push({x:i+1,y:e,bp:2}),i==r&&e-1==t||s.push({x:i,y:e-1,bp:1}),i==r&&e+1==t||s.push({x:i,y:e+1,bp:3});s.length>0;){var a=0;s.length>1&&(a=Math.floor(Math.random()*s.length)),"2"==build_maze(s[a].x,s[a].y,i,e)&&(matrix[i+1][e+1][s[a].bp]=1),s.splice(a,1)}return"1"}var sizex=26,sizey=26,start={x:7,y:sizey},finish={x:5,y:-1},tiles=[];function draw(){ctx.clearRect(0,0,c.width,c.height),ctx.beginPath(),ctx.globalCompositeOperation="source-over",ctx.globalAlpha=1;for(var e=0;e<sizex+4;e++)for(var i=0;i<sizey+4;i++)1==matrix[e][i][1]&&(ctx.beginPath(),ctx.strokeStyle=grd,ctx.moveTo(e*dim,i*dim),ctx.lineTo(e*dim+dim,i*dim),ctx.stroke()),1==matrix[e][i][2]&&(ctx.beginPath(),ctx.strokeStyle=grd,ctx.moveTo(e*dim+dim,i*dim),ctx.lineTo(e*dim+dim,i*dim+dim),ctx.stroke()),1==matrix[e][i][3]&&(ctx.beginPath(),ctx.strokeStyle=grd,ctx.moveTo(e*dim,i*dim+dim),ctx.lineTo(e*dim+dim,i*dim+dim),ctx.stroke()),1==matrix[e][i][0]&&(ctx.beginPath(),ctx.strokeStyle=grd,ctx.moveTo(e*dim,i*dim),ctx.lineTo(e*dim,i*dim+dim),ctx.stroke()),1==matrix[e][i][4]&&ctx.drawImage(img,e*dim,i*dim,dim,dim),1==matrix[e][i][5]&&(ctx.fillStyle="#ff0000",ctx.beginPath(),ctx.arc(e*dim+dim/2,i*dim+dim/2,2,0,2*Math.PI,!0),ctx.fill()),1==matrix[e][i][6]&&(ctx.fillStyle="#fff000",ctx.beginPath(),ctx.arc(e*dim+dim/2,i*dim+dim/2,2,0,2*Math.PI,!0),ctx.fill());ctx.fillStyle="#4caf50",ctx.beginPath(),ctx.arc((finish.x+1)*dim+dim/2,(finish.y+1)*dim+dim/2,4,0,2*Math.PI,!0),ctx.fill(),ctx.fillStyle="#fff",flareTime==flareTimeCONST&&clipArc(ctx,user.x*dim,user.y*dim,visibility_radius,10)}function startGame(){build_field(),build_maze(7,11,7,12),matrix[start.x+1][start.y][4]=1,matrix[Math.round(Math.random()*(sizex/2-2)+2)][Math.round(Math.random()*(sizey/2-2)+2)][6]=1,matrix[Math.round(Math.random()*(sizex/2-2)+sizex/2)][Math.round(Math.random()*(sizey/2-2)+sizey/2)][6]=1,matrix[Math.round(Math.random()*(sizex/2-2)+2)][Math.round(Math.random()*(sizey/2-2)+sizey/2)][6]=1,user={x:start.x+1,y:start.y,s:5,f:1},setUserStonesFlares(),draw(),document.getElementById("start").style.visibility="hidden",document.getElementById("end").style.visibility="hidden",document.getElementById("finishrecord").style.visibility="hidden",document.getElementById("gstat").style.visibility="visible",timeVar=0;var e=document.getElementById("time");timeInt=setInterval(function(){++timeVar,e.innerHTML=" "+pad(parseInt(timeVar/60))+":"+pad(timeVar%60)},1e3)}function setUserStonesFlares(){document.getElementById("stones").innerHTML=user.s,document.getElementById("flare").innerHTML=user.f}function pad(e){var i=e+"";return i.length<2?"0"+i:i}function zx(e){var i=e.which||e.keyCode;if(37==i&&(1!=matrix[user.x][user.y][0]&&user.x>0&&(matrix[user.x][user.y][4]=0,user.x=user.x-1,matrix[user.x][user.y][4]=1),e.preventDefault()),38==i&&(1!=matrix[user.x][user.y][1]&&user.y>0&&(matrix[user.x][user.y][4]=0,user.y=user.y-1,matrix[user.x][user.y][4]=1),e.preventDefault()),39==i&&(1!=matrix[user.x][user.y][2]&&user.x<sizex&&(matrix[user.x][user.y][4]=0,user.x=user.x+1,matrix[user.x][user.y][4]=1),e.preventDefault()),40==i&&(1!=matrix[user.x][user.y][3]&&user.y<sizey&&(matrix[user.x][user.y][4]=0,user.y=user.y+1,matrix[user.x][user.y][4]=1),e.preventDefault()),83==i&&(0==matrix[user.x][user.y][5]&&user.s>0?(matrix[user.x][user.y][5]=1,user.s--):1==matrix[user.x][user.y][5]&&(matrix[user.x][user.y][5]=0,user.s++),setUserStonesFlares(),e.preventDefault()),70==i&&(user.f>0&&flareTime==flareTimeCONST&&(user.f--,fx=user.x,fy=user.y,fmx=0,fmy=0,visibility_radius=visibility_radiusCONST,flareTime=flareTimeCONST,flareShot()),setUserStonesFlares(),e.preventDefault()),1==matrix[user.x][user.y][6]&&(user.f++,matrix[user.x][user.y][6]=0,setUserStonesFlares()),user.x-1==finish.x&&user.y-1==finish.y){if(document.getElementById("finishrecord").style.visibility="hidden","undefined"!=typeof Storage){var t=localStorage.getItem("dp_bt");clearInterval(timeInt),(null===t||void 0===t||timeVar<t)&&(localStorage.setItem("dp_bt",timeVar),document.getElementById("time_best").innerHTML=" "+pad(parseInt(timeVar/60))+":"+pad(timeVar%60),document.getElementById("finishrecord").style.visibility="visible")}document.getElementById("end").style.visibility="visible",document.getElementById("gstat").style.visibility="hidden",document.getElementById("finishtime").innerHTML=" "+pad(parseInt(timeVar/60))+":"+pad(timeVar%60)}draw()}function moveUp(){zx({keyCode:38,preventDefault:function(){}})}function moveDown(){zx({keyCode:40,preventDefault:function(){}})}function moveLeft(){zx({keyCode:37,preventDefault:function(){}})}function moveRight(){zx({keyCode:39,preventDefault:function(){}})}function setStone(){zx({keyCode:83,preventDefault:function(){}})}function setFlare(){zx({keyCode:70,preventDefault:function(){}})}function flareShot(){--flareTime>0?(drawFlare(),requestAnimFrame(flareShot)):(visibility_radius=visibility_radiusCONST,flareTime=flareTimeCONST,flareradius=sizex*dim,draw())}function drawFlare(){draw(),flareTime%10==0&&(fx<sizex/2&&fy<sizey/2&&(fmx++,fmy++),fx>sizex/2&&fy<sizey/2&&(fmx--,fmy++),fx<sizex/2&&fy>sizey/2&&(fmx++,fmy--),fx>sizex/2&&fy>sizey/2&&(fmx--,fmy--)),ctx.drawImage(imgFlare,fx*dim+fmx,fy*dim+fmy,20,20),clipArc(ctx,fx*dim+fmx,fy*dim+fmy,visibility_radius,10),flareTime%10==0&&(Math.random(),flareradius-=4*Math.random()+1,visibility_radius=flareradius)}function clipArc(e,i,t,r,a){e.globalCompositeOperation="destination-in",e.filter="blur(10px)",e.beginPath(),e.arc(i,t,r,0,2*Math.PI),e.fill(),e.globalCompositeOperation="destination-out",e.filter="none"}var disp,dim=15,matrix=[],user={},c,ctx,img=new Image,imgFlare=new Image,visibility_radiusCONST=40,visibility_radius=visibility_radiusCONST,flareradius=sizex*dim,flareTimeCONST=600,flareTime=flareTimeCONST,fx,fy,fmx=0,fmy=0,timeInt,timeVar,grd,requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()}};window.onload=function(e){img.src=" data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABl0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC4xNzNun2MAAASWSURBVGhD1ZptiBVlFMdnbXOxFzHMVDAz2Zm1ElmhApFSCTYEI1ihD1EUFCRItIVBfamFKOmFKDFYqEAqCirK+iAYQVBLfQgMenWjAsmKInqhzFrdM/3OzGmu985zX2Zn56Uf/Hl2z/N/zjmz986dZ+auVyiDMoCWeKvlPG+dnGnR/wvhPC+QrZ4v+70g/I2fZ5Dw+59o0vPDm6MDrDUXh8to+i0OIOwoX6a8IbnUVtWMoXAVDR5xNu6SvkJDssVW1wR9qwTykbPhTvLlF9ausCw1IJAxZ6M9SV6xLBWzKeynmaPuJnuQL9Pe6nClZasQPxx2NphFQ7LDslXIoFzvbC6LfNlr2SpkkL+mq7ks8uU5y1YhgVznbC6LfHnCslWILxc5m8siX26ybFUS9tHIF84Ge5L8xXiuJauYQG5MN9irZMKy1IHwNBrqvsdKiS3NBeEiS1IT1shi3mIfuht2yJfvWLPWVteMFbIgeqsEctLZfCI5WK89Vhvmrw3X3L9H3j44GYatGt0p281WLWEY9qGVInItuhvtQa+id9AhNIW+Qb/jS0H8ANqFrkSLLW150MMZFL4LHUYzcVv5IM8JyzeBthMq9sSnyDr0eVy+OKgxjd7gx82oz8rPDSRejn6KKpUE9YThZXSOtZEfck5E2SuA2h+j/OcRuU4nUddXA89x9DP6Fn2NPkPf23QuyPM6Q763GQkWRdla0IYZxhlHGJcxDjD2o3m2VNeOoxR4t6Ab0JPofXTcppwwr2y0tLODBAstXyv7zNIW1j5k3oSoJZELzRLB7wvQ1UzvY3QeFPEXzD47SDCAUtcDYlMMHV9uPLtjdwNiehKvMksKpi9Df8fuBsSOMuR7e5HkvThdA2J/MHTceuN5NHY3IKbXn44PGvDox6+LfJ9gJLhHs1DgB/Q8GkULbboteB7XdadC7CTquMdi/gGzN0H8ErPMDhKcjzaQq99CPcGavXELDYjplXy5WZwwf4fZW9lslnKhoaesgQQ7kKVmccL8DrM3QXzELOVC4aethwRi0wzdzq3aHciz1kMCsX9Qxys187ol2oRGTNeYlpilHOi3j6JL0Ztx+w2I6cn+GNpg9vpBn8M0+Aj6ShuOW3fDvPIiqs+3WDSjW/wD1mMmWKdblLMtVXXQxBg6YX3NCtbvZ5jbe48s0MCdcSv5II9yi6UtFwqvR7leiVMh148MZ1n68qCo3r05oakZ9AHajXS7vhEFSD9Wt6LUplAhfp+lLwdq6kOIY3H5BsSUl9CgWZ0wP2ZLmiB+hCG5nykcCq6PS6fQV6nrSYtnPjm+jFa0QPwKsxUPxfQmKAXx28zSFbw7bVkTxB80S/F0OJCevwfErrfHepPVBKFJsxQPxS63uq2Mm6UnyPOprUsg9isq5987KKSfPq6/Zqbvy/E/Y0sTLG/bW+E5hULOR0TEDjP0fIXGf3u8shnio2YpHoq9a3UTiOkWvest8H/gvcqWNkH8XrMUD8VST0gU4tvM0hXs+kRfH+p9gl5DD6NbUWCW4qHYtrj1qHm9kuujTb21HTZLV/Dq1xOZngO0x/P+Bbs8TUFJ4vShAAAAAElFTkSuQmCC",imgFlare.src=" data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAMAAAAM7l6QAAAABGdBTUEAALGPC/xhBQAAAwBQTFRFAAAAv39GvoBGv4FHv4VOwYVMwYVOw4ZNw4hPwYlTwYpXxIhQxYtWx4xTx4xUw45bypNdyZNe2ZtexpNiypZmzJZky5psyZtvzZpqzZprzJtsyp1zzp5wzp5zzJ9015xj1pxk0Z1r2Jxj2J9n3KBh2aBo3KRs0KF10qN20aN30aN40aN506Z61ad71Kl+3ahy26l52al63a173Kx85qFb5qRf6KVe5aVl5aZl6Klo6atq5atw77Jw6LN97LJ57LZ+7bd/87R3/L1x/L5x+rt9/cJu+8d2/MNz/MRx/Mdy/MZz+sF/+8Z+/MJ6/MJ//Ml0+sh8/cl4zaeC0aqF1amA1auE1q6H1a+J1K+L3a6B1rGO17KP27CC37GE37SE2LCO3rOK3rWP17KQ2bSS27WU2beX3LiU3bmX2riY2ruf3Lyd276k47SG4LSI4rWJ47aL4LWN4biN6LWB67eD7bmH77yG67mJ7byI4LmT4rqR57yS4buY5L+c67+R9LmG+b+A38Ch58Gb8sCK/ceA+8eI+8iC+86E+s6G/ciH+8qI+8yP/cmJ/MiK9MWS9Mub98yd+MiU+86d+tKH+9GK+9CM+tKP/NGJ/dWP+tSU/NCX+9Wc/NWc5MWl4MWr5sqt6Mal78mj6cmq6Mqr68yt68yv78yo5cqx5c22686y6M+159G76NC57tW88Mul8s2l/teg/Nej/NSn/Nas/Net+9qg/Nii/Nik/dym+9qq/duu/N+p/d6s/N6v9NO39Na99Ni99tq/+96z/N2z++Wv/Oau/O6y/O24/vyv/Pa2/PO6/v2y/fy0/fy3/Pu4/Py6/v278dnA/OLH/ObA/OzB/erS/fPO/PjB/PvF/fzB/fvK/PvL/v3M/fzP/fTS/f3T/f3X/f3h/v3u/P33AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAqpJHAAAAQB0Uk5T////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AFP3ByUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTczbp9jAAAB2UlEQVQ4T2WNh1+OURiGi4iy98omJCs7e0VWJEplRvYe2XuHrKysjEqoFKKSPUIkKVv9I5f3PN/5+r73c/9+7/3cz3295xwn7LRMT5tMuCtc01HLhKGtnlY5YPCJ00H0H15SRweRCc8QjxdnljITbk9KKvRQ8aoUVpycZFj3HWTFPoPZm1daWtvpTbCiNTzlwS7ZN4jbXf5E2Xk4Cfcf0lI609vbvsg48/kctJBojx8PPQZf3xlpj/FdgitxVhwKOVtHwJv3f/8Uk5Gpuo1LbafdYXDMAb79LuPHh5eFAbuNLjHkosZTW8GAsfcoyaf049sX2ePvQhujt+AGjWDnsElG+v46L/8VE9ILuNUuTONp82Ht0XETT5w6Dj9/PT+bRni3KEUUblJdJTgEY6CoaN/wNEIslZyuxUAGwer+7GXU6UcjYd1yFpdjpS3Kjvj5Rx8cvZ9+18FNFU5Eegd5RcDNjlPgsKqiWd/HGJUnK5wwZ3qg84KZc5tWrZJs7Hd69YY1ENSprvpVLl+oDJcuDGEVn2739QWPmtKVvy3qKX4ZPCtJcsC50Hm7Ch4NZXfAdHBt7l6b+q7BerfHjaHCPLjQrGI93ZiwZ40bMheJi0yXV9PTJoe3zYJ/omf853W0/SAAAAAASUVORK5CYII=";var i=document.getElementById("cnvc");if(c=document.getElementById("cnv"),i.clientHeight>400&&i.clientWidth>400)c.style.width="400px",c.style.height="400px";else{var t=Math.min(i.clientHeight,i.clientWidth);c.style.width=t-20+"px",c.style.height=t-20+"px"}if(dim=Math.floor(c.clientWidth/sizex)-.5,c.width=c.clientWidth,c.height=c.clientHeight,ctx=c.getContext("2d"),visibility_radiusCONST=c.width/10,visibility_radius=visibility_radiusCONST,flareradius=sizex*dim,(grd=ctx.createLinearGradient(150,0,150,300)).addColorStop(0,"rgba(135, 135, 135, 1.000)"),grd.addColorStop(.193,"rgba(196, 196, 196, 1.000)"),grd.addColorStop(.678,"rgba(153, 153, 153, 1.000)"),grd.addColorStop(1,"rgba(206, 206, 206, 1.000)"),isMobile.any()&&(document.getElementById("ctrl").style.visibility="visible"),"undefined"!=typeof Storage){var r=localStorage.getItem("dp_bt");null!=r&&void 0!=r&&(document.getElementById("time_best").innerHTML=" "+pad(parseInt(r/60))+":"+pad(r%60))}},window.onload(),document.onkeydown=zx;</script></body></html>