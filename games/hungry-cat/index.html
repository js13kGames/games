<!doctype html><meta name=viewport content="width=device-width"><title>Hungry Cat - js13kGames 2025</title><style>body{margin:0;overflow:hidden}.vignetted{box-shadow:inset 0 0 50px 5px #323232;width:100%;height:100%;background-color:transparent;position:absolute}</style><div class=vignetted></div><canvas id=canvas></canvas><script>zzfx=(...t)=>zzfxP(zzfxG(...t)),zzfxP=(...t)=>{let e=zzfxX.createBufferSource(),s=zzfxX.createBuffer(t.length,t[0].length,zzfxR);return t.map((t,e)=>s.getChannelData(e).set(t)),e.buffer=s,e.connect(zzfxX.destination),e.start(),e},zzfxG=(t=1,e=.05,s=220,i=0,o=0,r=.1,n=0,a=1,h=0,l=0,c=0,d=0,p=0,f=0,u=0,y=0,x=0,g=1,m=0,w=0)=>{let z,M,v=2*Math.PI,b=h*=500*v/zzfxR**2,S=(0<u?1:-1)*v/4,R=s*=(1+2*e*Math.random()-e)*v/zzfxR,I=[],C=0,T=0,E=0,A=1,P=0,O=0,N=0;for(i=99+zzfxR*i,m*=zzfxR,o*=zzfxR,r*=zzfxR,x*=zzfxR,l*=500*v/zzfxR**3,u*=v/zzfxR,c*=v/zzfxR,d*=zzfxR,p=zzfxR*p|0,M=i+m+o+r+x|0;E<M;I[E++]=N)++O%(100*y|0)||(N=n?1<n?2<n?3<n?Math.sin((C%v)**3):Math.max(Math.min(Math.tan(C),1),-1):1-(2*C/v%2+2)%2:1-4*Math.abs(Math.round(C/v)-C/v):Math.sin(C),N=(p?1-w+w*Math.sin(2*Math.PI*E/p):1)*(0<N?1:-1)*Math.abs(N)**a*t*zzfxV*(E<i?E/i:E<i+m?1-(E-i)/m*(1-g):E<i+m+o?g:E<M-x?(M-E-x)/r*g:0),N=x?N/2+(x>E?0:(E<M-x?1:(M-E)/x)*I[E-x|0]/2):N),z=(s+=h+=l)*Math.sin(T*u-S),C+=z-z*f*(1-1e9*(Math.sin(E)+1)%2),T+=z-z*f*(1-1e9*(Math.sin(E)**2+1)%2),A&&++A>d&&(s+=c,R+=c,A=0),!p||++P%p||(s=R,h=b,A=A||1);return I},zzfxV=.3,zzfxR=44100,zzfxX=new(window.AudioContext||webkitAudioContext),zzfxM=(t,e,s,i=125)=>{let o,r,n,a,h,l,c,d,p,f,u,y,x,g,m,w=0,z=[],M=[],v=[],b=0,S=0,R=1,I={},C=zzfxR/i*60>>2;for(;R;b++)z=[R=d=u=x=0],s.map((i,u)=>{for(c=e[i][b]||[0,0,0],R|=!!e[i][b],m=x+(e[i][0].length-2-!d)*C,g=u==s.length-1,r=2,a=x;r<c.length+g;d=++r){for(h=c[r],p=r==c.length+g-1&&g||f!=(c[0]||0)|h|0,n=0;n<C&&d;n++>C-99&&p?y+=(y<1)/99:0)l=(1-y)*z[w++]/2||0,M[a]=(M[a]||0)-l*S+l,v[a]=(v[a++]||0)+l*S+l;h&&(y=h%1,S=c[1]||0,(h|=0)&&(z=I[[f=c[w=0]||0,h]]=I[[f,h]]||(o=[...t[f]],o[2]*=2**((h-12)/12),h>0?zzfxG(...o):[])))}x=m});return[M,v]},function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)}).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();class R{stateMachine;children=[];constructor(t){this.stateMachine=t}}const u=window.innerWidth,p=window.innerHeight,r={x:Math.floor(u/2),y:Math.floor(p/2)},V="#333333",d={START_MENU:"START_MENU",WORLD:"WORLD",LOADING:"LOADING",END_SCREEN:"END_SCREEN"},b=32,G=Math.floor(25.6),S=40;class K extends R{update(){}render(t){t.fillStyle="white",t.fillRect(r.x-100,r.y-100,200,200)}cleanup(){}}const z=new Set,E=new Set,h={SPACE:"Space",W:"KeyW",A:"KeyA",S:"KeyS",D:"KeyD",LEFT:"ArrowLeft",RIGHT:"ArrowRight",DOWN:"ArrowDown",UP:"ArrowUp"},l=t=>z.has(t),q=t=>!!E.has(t)&&(E.delete(t),!0);document.addEventListener("keydown",t=>{z.has(t.code)||E.add(t.code),z.add(t.code)}),document.addEventListener("keyup",t=>{z.delete(t.code),E.delete(t.code)});class f{static instance;assets=new Map;constructor(){}static getInstance(){return f.instance||(f.instance=new f),f.instance}loadImage(t,e){return new Promise((s,i)=>{const o=new Image;o.src=e,o.onload=()=>{this.assets.set(t,o),s(o)},o.onerror=()=>i(`Error loading image: ${e}`)})}async loadAll(t){const e=[];for(const[s,i]of Object.entries(t))e.push(this.loadImage(s,i));await Promise.all(e)}get(t){const e=this.assets.get(t);if(!e)throw new Error(`Resource '${t}' has not been found.`);return e}}class H{position={x:0,y:0};velocity={x:1,y:1};rotation=0;angularVelocity=.5;sprite;size=128;isOld=!1;timerId;constructor(t,e){this.sprite=f.getInstance().get("asteroid"),this.position=t,this.velocity=e,this.timerId=setTimeout(()=>{this.isOld=!1,clearTimeout(this.timerId)},1e4)}update(t){this.rotation+=this.angularVelocity*t,this.position.x+=this.velocity.x*t,this.position.y+=this.velocity.y*t,this.velocity.x,this.velocity.y}render(t){const e=this.size/2;t.save(),t.translate(Math.floor(this.position.x+e),Math.floor(this.position.y+e)),t.rotate(this.rotation),t.drawImage(this.sprite,0,0,32,32,Math.floor(-e),Math.floor(-e),this.size,this.size),t.restore()}}const Z=t=>{t.fillStyle=V,t.fillRect(0,0,u,p)},Q=t=>t.length*G,O=(t,e,s)=>t+(e-t)*s,B=(t,e)=>Math.floor(Math.random()*(e-t+1))+t,X=t=>"left"===t?{x:-S,y:r.y}:"right"===t?{x:u+S,y:r.y}:"bottom"===t?{x:r.x,y:p+S}:{x:r.x,y:-S},P=(t,e=1)=>{const s=()=>10*(Math.random()-.5),i={x:1,y:1};"left"===t?i.y=s():"right"===t?(i.x=-1,i.y=s()):"bottom"===t?(i.x=s(),i.y=-1):(i.x=s(),i.y=1);const o=Math.sqrt(i.x**2+i.y**2);return i.x=i.x/o*e,i.y=i.y/o*e,i},j=(t,e)=>{const s=t.size/4,i=e instanceof H?e.size/4:e.size/2;return!(t.position.x+s<e.position.x-i||t.position.x-s>e.position.x+i||t.position.y+s<e.position.y-i||t.position.y-s>e.position.y+i)},tt=t=>t.position.x+t.size<0||t.position.x>u||t.position.y+t.size<0||t.position.y>p,et=t=>{switch(t){case"fish":return 2;case"cheese":return 3;case"donut":return 4;case"susha":return 5;case"coffee":return 6;case"watermelon":return 7}};class N{stars=[];numStars=300;constructor(){this.generate()}generate(){this.stars=[];for(let t=0;t<this.numStars;t++)this.stars.push({x:Math.floor(Math.random()*u),y:Math.floor(Math.random()*p),brightness:.3*Math.random()+.2,size:[4,8,12][B(0,2)],pulse:.3*(Math.random()-.5)})}update(t){for(const e of this.stars)e.brightness+=e.pulse*t,e.brightness>1?(e.brightness=1,e.pulse*=-1):e.brightness<.2&&(e.brightness=.2,e.pulse*=-1)}render(t){t.fillStyle=V;for(const e of this.stars){const s=Math.floor(255*e.brightness);t.fillStyle=`rgb(${s}, ${s}, ${s})`,t.fillRect(e.x,e.y,e.size,e.size)}}cleanup(){}}const I={},g=8,D="abcdefghijklm",st="nopqrstuvwxyz",it="1234567890-+!";for(let t=0;t<13;t++)I[D[t]]={x:8*t,y:0},I[st[t]]={x:8*t,y:8},I[it[t]]={x:8*t,y:16};const ot=(t,e,s,i,o=b)=>{for(let r=0;r<e.length;r++){const n=e[r],a=I[n];a&&t.drawImage(f.getInstance().get("alfabet"),a.x,a.y,8,8,s+r*G,i,o,o)}};class c{width;size;text;position;constructor(t="",e={x:0,y:0},s=b){this.text=t,this.size=s,this.width=t.length*G,this.position={x:e.x-this.width/2,y:e.y-16}}update(){}render(t){ot(t,this.text,this.position.x,this.position.y,this.size)}cleanup(){}}const nt=[[[.4,0,400,,,,,,.5,.1,10,.03,,.2,-.1,,,,,.01]],[[[,,5,5,6,6,,,,,5,5,6,6,,,,,5,5,6,6,,,,,5,5,6,6,,,,,5,5,6,6,,,,,5,5,6,6,,,,,5,5,6,6,,,,,5,5,6,6,,,,,],[,,,,,,,,,,,,,,,,,,26,25,,,26,25,,,26,25,,,26,25,,,26,25,,,26,25,,,26,25,,,26,25,,,26,25,,,26,25,,,,,,,,,,,],[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,17,17,17,,18,18,20,21,,,19,18,17,,,17,17,17,,18,18,20,21,,,19,18,17,,,,,,,,,],[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,2,3,1,,,,,,,1,2,3,1,,,,,,,1,2,3,1,,,,,,,,,,,]]],[0],100];class a{static effects={power:[2.3,,455,.02,.02,,1,3.9,-18,-33,,,,.4,,.3,.18,.69,.09],food:[.9,,220,.01,.08,.06,1,.3,-.9,.02,40,,,,,.06,.6,8,,],death:[.95,,180,.01,.28,.12,1,.18,-.7,.12,60,,,,,.08,.8,6,,],start:[2,,43,.15,.03,.05,1,2,5,,,,,.7,,,.14,.76,.04,.44],bounce:[,,667,,.1,.08,,1.7,,-3,,,,,,,,.87,.04]};static node;static play(t){window.zzfx(...a.effects[t])}static music(){const t=window.zzfxM(...nt);a.node=window.zzfxP(...t),a.node.loop=!0}static stopMusic(){a.node?.stop(),a.node?.disconnect()}}class rt extends R{constructor(t){super(t);const e=new N,s=new c("hungry cat",{...r,y:r.y-300},40),i=new c("space is stuffed with snacks",{...r,y:r.y-200},24),o=new c("you have been chosen as most hungry cat to help",{...r,y:r.y-150},24),n=new c("if you do not make it back we will eat in your honor",{...r,y:r.y-100},24),a=new c("!press space to start!",{...r,y:r.y+100},32),h=new c("wasd to control",{...r,y:r.y+200},24);this.children.push(e,s,i,o,n,a,h)}cleanup(){}update(){q(h.SPACE)&&(this.stateMachine.changeState(d.WORLD),a.play("start"))}render(t){for(let e of this.children)e.render(t)}}let y=[];const at=()=>{y=y.filter(t=>!(t.isOld&&tt(t)))};let v=0;const ht=t=>v+=t,ct=()=>{v=0,y=[]},lt=t=>{y=y.filter(e=>e!==t)};class ft{pool;head=0;opts;emitAccumulator=0;anchorPos={x:0,y:0};anchorRot=0;activeRate=0;constructor(t={}){this.opts={max:t.max??200,rate:t.rate??120,baseSpeed:t.baseSpeed??160,speedJitter:t.speedJitter??60,spread:t.spread??Math.PI/10,size:t.size??3,life:t.life??.35,drag:t.drag??.92,trickleRate:t.trickleRate??15,startColor:t.startColor??[0,0,0],endColor:t.endColor??[255,255,255]},this.pool=new Array(this.opts.max).fill(0).map(()=>({p:{x:0,y:0},v:{x:0,y:0},life:0,max:0,size:this.opts.size,r:this.opts.startColor[0],g:this.opts.startColor[1],b:this.opts.startColor[2],a:0,sr:this.opts.startColor[0],sg:this.opts.startColor[1],sb:this.opts.startColor[2],er:this.opts.endColor[0],eg:this.opts.endColor[1],eb:this.opts.endColor[2],alive:!1}))}anchorTo(t,e,s){this.anchorRot=e,this.anchorPos.x=t.x-Math.cos(e)*s,this.anchorPos.y=t.y-Math.sin(e)*s}setThrottle(t){this.activeRate=t>0?this.opts.rate*t:this.opts.trickleRate}spawnOne(){const t=this.pool[this.head++];this.head%=this.pool.length;const e=this.anchorRot+Math.PI+(Math.random()-.5)*this.opts.spread,s=this.opts.baseSpeed+(2*Math.random()-1)*this.opts.speedJitter;t.p.x=this.anchorPos.x,t.p.y=this.anchorPos.y,t.v.x=Math.cos(e)*s,t.v.y=Math.sin(e)*s,t.max=this.opts.life*(.85+.3*Math.random()),t.life=t.max,t.size=Math.max(1,this.opts.size+(2*Math.random()-1|0)),t.sr=this.opts.startColor[0],t.sg=this.opts.startColor[1],t.sb=this.opts.startColor[2],t.er=this.opts.endColor[0],t.eg=this.opts.endColor[1],t.eb=this.opts.endColor[2],t.r=t.sr,t.g=t.sg,t.b=t.sb,t.a=1,t.alive=!0}update(t){for(this.emitAccumulator+=this.activeRate*t;this.emitAccumulator>=1;)this.spawnOne(),this.emitAccumulator-=1;for(let e=0;e<this.pool.length;e++){const s=this.pool[e];if(!s.alive)continue;if(s.p.x+=s.v.x*t,s.p.y+=s.v.y*t,s.life-=t,s.life<=0){s.alive=!1;continue}const i=1-s.life/s.max;s.r=O(s.sr,s.er,i),s.g=O(s.sg,s.eg,i),s.b=O(s.sb,s.eb,i),s.a=1-i}}render(t){for(let e=0;e<this.pool.length;e++){const s=this.pool[e];if(!s.alive)continue;const i=0|s.p.x,o=0|s.p.y;t.globalAlpha=s.a,t.fillStyle=`rgb(${0|s.r},${0|s.g},${0|s.b})`,t.fillRect(i,o,s.size,s.size)}t.globalAlpha=1}cleanup(){}}const L=.999;class J{position={x:0,y:0};velocity={x:1,y:1};rotation=0;angularVelocity=.5;sprite;size=128;score=0;isOld=!1;timerId;isOver=!1;constructor(t,e,s){this.sprite=f.getInstance().get(t),this.position=e,this.velocity=s,this.score=et(t),this.timerId=setTimeout(()=>{this.isOld=!0,clearTimeout(this.timerId)},1e4)}free(){this.score=0,this.isOver=!0}update(t){var e;this.rotation+=this.angularVelocity*t,this.position.x+=this.velocity.x*t,this.position.y+=this.velocity.y*t,this.velocity.x*=L,this.velocity.y*=L,this.isOver&&(this.size-=1,this.size<=0&&(e=this,y=y.filter(t=>t!==e)))}render(t){const e=this.size/2;t.save(),t.translate(Math.floor(this.position.x+e),Math.floor(this.position.y+e)),t.rotate(this.rotation),t.drawImage(this.sprite,0,0,32,32,Math.floor(-e),Math.floor(-e),this.size,this.size),t.restore()}}const W=.99999999,F=2,dt=.997;class ut{position={x:u/2-64,y:p/2-64};velocity={x:1,y:1};thrust=180;sprite=f.getInstance().get("cat");rotation=0;size=128;angularVelocity=.5;children=[];stateMachine;timerCollision;timerLife;life=25;lifeText;constructor(t){this.stateMachine=t;const e=new ft({endColor:[255,0,68],startColor:[254,231,97],life:.35,size:16,spread:Math.PI/3,baseSpeed:220,speedJitter:180,rate:160,trickleRate:0});this.lifeText=new c(this.life.toString(),{...r,y:80}),this.children.push(e,this.lifeText),this.timerCollision=setInterval(()=>{this.handleCollisions()},50),this.timerLife=setInterval(()=>{this.life-=1,this.life<=0&&this.stateMachine.changeState(d.END_SCREEN)},1e3)}updateMovement(t){(l(h.A)||l(h.LEFT))&&(this.angularVelocity-=2*t),(l(h.D)||l(h.RIGHT))&&(this.angularVelocity+=2*t),this.rotation+=this.angularVelocity*t,this.angularVelocity*=dt,(l(h.W)||l(h.UP))&&(this.velocity.x+=Math.cos(this.rotation)*this.thrust*t,this.velocity.y+=Math.sin(this.rotation)*this.thrust*t,a.play("power")),(l(h.S)||l(h.DOWN))&&(this.velocity.x-=Math.cos(this.rotation)*this.thrust*t,this.velocity.y-=Math.sin(this.rotation)*this.thrust*t),this.position.x+=this.velocity.x*t,this.position.y+=this.velocity.y*t,this.velocity.x*=W,this.velocity.y*=W}handleBounce(){this.position.x<0&&(this.position.x=0,this.velocity.x*=-.7,a.play("bounce")),this.position.x+this.size>u&&(this.position.x=u-this.size,this.velocity.x*=-.7,a.play("bounce")),this.position.y<0&&(this.position.y=0,this.velocity.y*=-.7,a.play("bounce")),this.position.y+this.size>p&&(this.position.y=p-this.size,this.velocity.y*=-.7,a.play("bounce"))}handleParticles(){const t=this.size/2,e=Math.floor(this.position.x+t),s=Math.floor(this.position.y+t),i=this.children[0];i.anchorTo({x:e,y:s},this.rotation,8),i.setThrottle(l(h.W)||l(h.UP)?1:0)}handleCollisions(){for(let e of y)j(this,e)&&(e instanceof J?(t=e.score,v+=t,this.life+=e.score,e.score&&a.play("food"),e.free()):(this.stateMachine.changeState(d.END_SCREEN),a.play("death")));var t}update(t){this.updateMovement(t),this.handleBounce(),this.handleParticles(),this.lifeText.text=this.life.toString();for(let e of this.children)e.update(t)}render(t){for(let e of this.children)e.render(t);const e=this.size/2;t.save(),t.translate(Math.floor(this.position.x+e),Math.floor(this.position.y+e)),t.rotate(this.rotation),t.drawImage(this.sprite,0,0,32,32,Math.floor(-e),Math.floor(-e),this.size,this.size),t.restore()}cleanup(){clearInterval(this.timerCollision),clearInterval(this.timerLife)}}class pt{timerId=null;waitTime;callback;running=!1;constructor(t,e){this.waitTime=t,this.callback=e}getDelay(){return"number"==typeof this.waitTime?this.waitTime:B(this.waitTime[0],this.waitTime[1])}tick=()=>{this.callback(),this.running&&(this.timerId=setTimeout(this.tick,this.getDelay()))};start(){this.running||(this.running=!0,this.timerId=setTimeout(this.tick,this.getDelay()))}stop(){null!==this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.running=!1}}class T{position;direction;timer;constructor(t){var e;this.position="left"===(e=t)?{x:-S,y:r.y}:"right"===e?{x:u+S,y:r.y}:"bottom"===e?{x:r.x,y:p+S}:{x:r.x,y:-S},this.direction=t,this.timer=new pt([1e3,7e3],this.spawn.bind(this)),this.timer.start()}getRandomFood(){const t=[{name:"fish",weight:6},{name:"cheese",weight:5},{name:"watermelon",weight:1},{name:"coffee",weight:2},{name:"donut",weight:3},{name:"susha",weight:4}],e=t.reduce((t,e)=>t+e.weight,0);let s=Math.random()*e;for(const e of t){if(s<e.weight)return e.name;s-=e.weight}return"watermelon"}spawn(){let t;t=Math.random()>.75?new H({...this.position},P(this.direction,150)):new J(this.getRandomFood(),{...this.position},P(this.direction,100)),y.push(t)}cleanup(){this.timer.stop()}}class yt extends R{spawns=[];scoreText;constructor(t){super(t),v=0,y=[],this.spawns.push(new T("top"),new T("bottom"),new T("left"),new T("right")),this.scoreText=new c(`score-${v.toString()}`,{...r,y:36}),this.children.push(new N,new ut(t),this.scoreText),a.music(),setInterval(()=>{y=y.filter(t=>!(t.isOld&&tt(t)))},1e4)}update(t){for(let e of this.children)e.update(t);for(let e of y)e.update(t);this.scoreText.text=`score-${v.toString()}`}render(t){for(let e of this.children)e.render(t);for(let e of y)e.render(t)}cleanup(){for(let t of this.children)t.cleanup();this.spawns.forEach(t=>t.cleanup())}}class mt extends R{starField;constructor(t){super(t),this.starField=new N;const e=new c(`score ${v}`,{x:r.x,y:r.y-200}),s=new c("the cat is gone but the menu lives on",{x:r.x,y:r.y-100}),i=new c("press space to restart",{x:r.x,y:r.y+200});this.children.push(this.starField,s,e,i)}update(){q(h.SPACE)&&(this.stateMachine.changeState(d.WORLD),a.play("start")),this.starField.generate()}render(t){for(let e of this.children)e.render(t)}cleanup(){a.stopMusic()}}const $={[d.START_MENU]:rt,[d.WORLD]:yt,[d.LOADING]:K,[d.END_SCREEN]:mt};class w{static instance=null;states;currentState;constructor(t){this.states=t,this.currentState=new K(this)}static getInstance(){if(!w.instance){if(!$)throw new Error("StateMachine requires states for the first initialization.");w.instance=new w($)}return w.instance}changeState(t){const e=this.states[t];if(!e)throw new Error(`State "${t}" does not exist`);this.currentState.cleanup(),this.currentState=new e(this)}update(t){this.currentState.update(t)}render(t){this.currentState.render(t)}}const gt=document.getElementById("canvas"),x=gt.getContext("2d",{alpha:!1}),C=window.devicePixelRatio;x.scale(C,C),x.canvas.width=u*C,x.canvas.height=p*C,x.imageSmoothingEnabled=!1;const A=w.getInstance(),wt=f.getInstance();let k=0,U=performance.now();const _=t=>{k=(t-U)/1e3,Z(x),A.update(k),A.render(x),U=t,requestAnimationFrame(_)};wt.loadAll({alfabet:"alefbet.png",cat:"cat.png",cheese:"cheese.png",donut:"donut.png",fish:"fish.png",susha:"susha.png",asteroid:"asteroid.png",coffee:"coffee.png",watermelon:"watermelon.png"}).then(()=>{A.changeState(d.START_MENU),requestAnimationFrame(_)})</script>