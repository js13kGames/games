<!doctype html><meta name=monetization content=$coil.xrptipbot.com/FpG5bRAeSVuJbdCJddtAgw><meta name=viewport content="width=device-width,maximum-scale=1,user-scalable=0"><link rel=manifest href=pwa.webmanifest><title>FyraNollFyra</title><style>body,html{width:100%;height:100%;min-height:fill-available;margin:0;padding:0;background-color:#89d69e;display:flex}body{height:100vh;max-height:100vh;overflow:hidden!important}canvas{width:100%;margin:auto}.pointer{cursor:pointer}.grab{cursor:grab}.grabbing{cursor:grabbing}</style><script src=gsw.js></script></html><script>!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recalcConstants=t.paletteFontColor=t.palette=t.gridCount=t.fieldSettings=void 0;var i=n(5);t.fieldSettings={dirty:!0},t.gridCount={x:15,y:8},t.palette=["#f57c1f","#fecd04","#dd1a22","#b61c7e","#4b2f93","#006cb7","#009247","#6a2e14","#00bed4","#678297"],t.paletteFontColor=[0,0,0,1,1,1,0,1,0,1,0],t.recalcConstants=function(){var e=window.innerWidth<window.innerHeight?[window.innerHeight,window.innerWidth]:[window.innerWidth,window.innerHeight],n=e[0],r=e[1],a=r/9.7,o=17*a>n?n/17:a;t.fieldSettings.canvasWidth=n,t.fieldSettings.canvasHeight=r,t.fieldSettings.gridSize=o,t.fieldSettings.containerSpacing=o/5,t.fieldSettings.playFieldMargin={x:o/10,y:(r-9.5*o)/2},t.fieldSettings.dirty=!0,lvlCanvas.width=bgCanvas.width=canvas.width=t.fieldSettings.canvasWidth,lvlCanvas.height=bgCanvas.height=canvas.height=t.fieldSettings.canvasHeight,i.createPatternCanvas()}},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.addInteractable=t.resetInteractables=t.UImoved=t.currentInteractable=void 0,t.UImoved=function(e,n){i&&(t.currentInteractable=i.find(function(t){return t.x<=e&&t.y<=n&&t.x+t.w>=e&&t.y+t.h>=n&&(0===dialogText.length||buttons.some(function(e){return t.value==e.value}))}))},t.resetInteractables=function(){i=[],t.currentInteractable=null},t.addInteractable=function(e,t,n,r,a){(i=i.filter(function(t){return t.value!==e})).push({value:e,x:t,y:n,w:r,h:a})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GameStates=void 0,function(e){e[e.title=0]="title",e[e.menu=1]="menu",e[e.game=2]="game"}(t.GameStates||(t.GameStates={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.startLevel=t.initLevelSelect=t.levelSelectUpdate=t.LevelBoxHeight=t.LevelBoxWidth=void 0;var i=n(5),r=n(4),a=n(2),o=n(13),l=n(14),s=n(6),d=n(7),c=n(1),g=n(0),u=new Image;u.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGMAAAAOAQMAAAABnzBSAAAABlBMVEUAAAAAAAClZ7nPAAAAAXRSTlMAQObYZgAAAHRJREFUCNdj+N/AwMDGxpD7nwEIwDz2NhjvAAOE1wDhGdyefyzNJrchcbt9A8Mfg/v3Qbwfifv3g3h3HMzkDgN5OxoSgCpvsH8D8hoSN/A/gPDY4Dz+GxJmIJ78BoMEdB4DSCXQBkagSjQegz0DBNQBMSoPAMhXQXeCqYkPAAAAAElFTkSuQmCC",t.LevelBoxWidth=250;var f=t.LevelBoxWidth/15;t.LevelBoxHeight=8*f;var v=0;t.levelSelectUpdate=function(){g.fieldSettings.dirty&&t.initLevelSelect(),ctx.drawImage(lvlCanvas,0,0),ctx.strokeStyle="#FEF267",ctx.globalAlpha=Math.round(++v/9)%2?1:.5,ctx.lineWidth=g.fieldSettings.gridSize/30,c.currentInteractable&&c.currentInteractable.value.unlocked?(o.setCursor("pointer"),ctx.strokeRect(c.currentInteractable.x,c.currentInteractable.y,c.currentInteractable.w,c.currentInteractable.h)):o.setCursor(),ctx.globalAlpha=1},t.initLevelSelect=function(){lvlCanvas.width=g.fieldSettings.canvasWidth,lvlCtx.globalAlpha=.5,i.jitterBox(lvlCtx,g.fieldSettings.canvasWidth,g.fieldSettings.canvasHeight),lvlCtx.globalAlpha=1,window.state=a.GameStates.menu,c.resetInteractables(),h()};var x=0,S=function(e){x+=e,lvlCtx.translate(0,e)},h=function(){lvlCtx.save();var e=.9*g.fieldSettings.canvasHeight,t=.1*e,n=.05*e,i=(e-(t+4*n))/7*((15*g.fieldSettings.gridSize+2*g.fieldSettings.containerSpacing)/(8*g.fieldSettings.gridSize)),a=8*i>window.innerWidth?window.innerWidth/8:i;lvlCtx.strokeStyle="#000",lvlCtx.globalAlpha=1,lvlCtx.textBaseline="top";var o=(window.innerWidth-8*a)/2;lvlCtx.translate(o,0),S(t/3);var d=3.5*a;lvlCtx.imageSmoothingEnabled=!1,lvlCtx.globalAlpha=.7,lvlCtx.drawImage(u,0,0,99,14,4.45*a,.3*a,d,.14*d),lvlCtx.imageSmoothingEnabled=!0,lvlCtx.globalAlpha=1;for(var f=-1,v=0;v<4;v++){var h=0==v?4:16,b=h/(0==v?1:2),m=a/10,y=m/5;lvlCtx.font=n/2+"px a",lvlCtx.textAlign="left",lvlCtx.fillText(["I'm new. Yes! A tutorial.","I'm a kid. Hey! This isn't Fortnite! 😠","I like fun and feeling good about myself.","Fun is OK, but I prefer to be frustrated and angry."][v],0,n/2),lvlCtx.textAlign="center",lvlCtx.textBaseline="middle",S(n);for(var p=i/(15.5*m+y+3),$=Math.round((15*m+y+3)*p),w=Math.round(8*m*p+y),C=Math.round(.5*m*p),M=0,z=0;z<h;z++){f++,M=Math.floor(z/b),8===z&&S(w+C);var A=(z-M*b)*($+C);if(f>=levels.length)lvlCtx.fillRect(A,0,$,w);else{var T=levels[f],k=s.getRegions(T);l.scrambleNumbers(T,f>3),r.drawBackground(T,k,f>3),r.drawNumbers(T.bricks),lvlCtx.drawImage(bgCanvas,0,0,15*g.fieldSettings.gridSize+3*g.fieldSettings.containerSpacing,8*g.fieldSettings.gridSize+g.fieldSettings.containerSpacing,A,0,$,w),T.unlocked||(lvlCtx.globalAlpha=.8,lvlCtx.fillRect(A,0,$,w),lvlCtx.globalAlpha=1),c.addInteractable(T,o+A,x,$,w),lvlCtx.font=n+"px a",T.unlocked&&(lvlCtx.fillStyle="#CEC",lvlCtx.strokeStyle="#000",lvlCtx.lineWidth=n/9,lvlCtx.strokeText(z+1,A+$/2,w/2)),lvlCtx.fillText(z+1,A+$/2,w/2),lvlCtx.fillStyle="#000"}}S(w)}x=0,lvlCtx.restore()};t.startLevel=function(){return c.currentInteractable&&c.currentInteractable.value.unlocked?d.reset(c.currentInteractable.value):0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showText=t.setFontSize=t.drawCurrentResult=t.drawBackground=t.getButtonBounds=t.drawNumbers=void 0;var i=n(2),r=n(1),a=n(9),o=n(5),l=n(0),s=function(e,t){e.translate(t*(l.gridCount.x/3*l.fieldSettings.gridSize+l.fieldSettings.containerSpacing),0)},d=function(){bgCtx.globalAlpha=.5,bgCtx.strokeStyle="#000",bgCtx.lineWidth=l.fieldSettings.gridSize/20;for(var e=0;e<l.gridCount.y+1;e++)bgCtx.beginPath(),bgCtx.moveTo(0,e*l.fieldSettings.gridSize),bgCtx.lineTo(l.gridCount.x/3*l.fieldSettings.gridSize,e*l.fieldSettings.gridSize),bgCtx.stroke();for(var t=0;t<l.gridCount.x/3+1;t++)bgCtx.beginPath(),bgCtx.moveTo(t*l.fieldSettings.gridSize,0),bgCtx.lineTo(t*l.fieldSettings.gridSize,l.gridCount.y*l.fieldSettings.gridSize),bgCtx.stroke()};t.drawNumbers=function(e){var t=state===i.GameStates.game?ctx:bgCtx;t.textAlign="center",t.textBaseline="middle",[!1,!0].forEach(function(n){e.forEach(function(e){if(n==e.x>-1){var i=e.x>-1?e.x:e.gx*l.fieldSettings.gridSize,r=e.y>-1?e.y:e.gy*l.fieldSettings.gridSize,a=Math.floor(i/(5*l.fieldSettings.gridSize)),o=.1*l.fieldSettings.gridSize;t.save(),s(t,a),t.translate(i-5*a*l.fieldSettings.gridSize,r),t.font=.8*l.fieldSettings.gridSize+"px Arial",n&&(t.globalAlpha=.4,t.fillRect(o,o,l.fieldSettings.gridSize,l.fieldSettings.gridSize),t.globalAlpha=1);var d=isNaN(parseInt(e.content,10)),c=e.dragabble?d?"#dd1a22":l.palette[e.content]:"#aaa";if(g({gx:n?0:.1,gy:n?0:.1,gw:1-(n?0:.2),gh:1-(n?0:.2),color:c,shadow:n?.5:0,c:t}),t.fillStyle=d?"#000":["#000","#FFF"][l.paletteFontColor[e.content]],!e.dragabble)for(var u=0;u<2;u++)for(var f=0;f<2;f++)t.fillRect(o+u*(l.fieldSettings.gridSize-2*o-11)+4,o+f*(l.fieldSettings.gridSize-2*o-11)+4,3,3);t.fillText(e.content,l.fieldSettings.gridSize/2,l.fieldSettings.gridSize/2+o/2),t.restore()}})})},t.getButtonBounds=function(e){var t=15*l.fieldSettings.gridSize+3*l.fieldSettings.containerSpacing;return[t,e*(4*l.fieldSettings.gridSize+l.fieldSettings.containerSpacing/2),l.fieldSettings.canvasWidth-t-3*l.fieldSettings.playFieldMargin.x,4*l.fieldSettings.gridSize-l.fieldSettings.containerSpacing/2]},t.drawBackground=function(e,n,c){bgCanvas.width=bgCanvas.width,function(e){for(var t=0;t<3;t++)bgCtx.save(),s(bgCtx,t),g({gx:0,gy:0,gw:5,gh:8,c:bgCtx,color:e.color}),g({gx:0,gy:8.2,gw:5,gh:1.2,c:bgCtx}),o.jitterBox(bgCtx,5*l.fieldSettings.gridSize,8*l.fieldSettings.gridSize),d(),bgCtx.restore()}(e),function(e,t){var n=document.createElement("canvas");n.width=15*l.fieldSettings.gridSize+2*l.fieldSettings.containerSpacing,n.height=8*l.fieldSettings.gridSize;var i=n.getContext("2d");i.fillStyle=i.strokeStyle=o.getYellowBlackStripesPattern(),i.lineWidth=l.fieldSettings.gridSize/9,e.walls.forEach(function(n,r){var o=a.gridCoords2CanvasOffset(n.x,n.y),s=a.gridCoords2CanvasOffset(n.x+n.w,n.y+n.h);i.strokeRect(o.x,o.y,s.x-o.x,s.y-o.y);for(var d=e.bricks.map(function(e){return e.region}),c=0;c<15;c++)for(var g=0;g<15;g++)if(d.indexOf(t[c][g])<0){var u=a.gridCoords2CanvasOffset(c,g);i.fillRect(u.x,u.y,l.fieldSettings.gridSize,l.fieldSettings.gridSize)}}),bgCtx.drawImage(n,0,0)}(e,n),state===i.GameStates.game&&function(e){["Home","Hint"].forEach(function(n,i){if(!e||1!=i){var a=t.getButtonBounds(i),o=a[0],s=a[1],d=a[2],c=a[3];g({gx:o/l.fieldSettings.gridSize,gy:s/l.fieldSettings.gridSize,gh:c/l.fieldSettings.gridSize,gw:d/l.fieldSettings.gridSize,c:bgCtx,color:["#E06951","#B6E066"][i]}),bgCtx.save(),bgCtx.fillStyle="#DDD",bgCtx.textAlign="center",bgCtx.strokeStyle="#000",d<2*l.fieldSettings.gridSize?(bgCtx.translate(o+d/1.2,s+c/2),bgCtx.rotate(-90*Math.PI/180)):bgCtx.translate(o+d/2,s+c/2),bgCtx.font=l.fieldSettings.gridSize+"px Arial",bgCtx.fillText(n,0,0),bgCtx.strokeText(n,0,0),bgCtx.restore(),r.addInteractable(i,o+l.fieldSettings.playFieldMargin.x,s+l.fieldSettings.playFieldMargin.y,d,c)}})}(c)},t.drawCurrentResult=function(e){e.forEach(function(e,n){ctx.save(),ctx.font=l.fieldSettings.canvasWidth/2.5+"px Arial",ctx.textAlign="center",ctx.textBaseline="middle",1==n&&0!==e.number||1!==n&&4!==e.number?(ctx.fillStyle="#AAA",ctx.globalAlpha=.6):ctx.fillStyle=o.getGoldPattern(),s(ctx,n),ctx.fillText([4,0,4][n].toString(),2.5*l.fieldSettings.gridSize,4*l.fieldSettings.gridSize),ctx.globalAlpha=1,ctx.fillStyle="#000";var i=e.sequence+"="+(Math.abs(e.number)>1e4?"🤯":e.number);t.setFontSize(i,5*l.fieldSettings.gridSize),ctx.fillText(i,2.5*l.fieldSettings.gridSize,8.5*l.fieldSettings.gridSize+2*l.fieldSettings.containerSpacing),ctx.restore()}),ctx.stroke()},t.setFontSize=function(e,t,n){void 0===n&&(n=ctx);var i=l.fieldSettings.gridSize;for(ctx.font=i+"px bold Courier";n.measureText(e).width>t;)ctx.font=i--+"px bold Courier";return i},t.showText=function(e,n){void 0===n&&(n=[]);var i=c({h:l.fieldSettings.gridSize*(n.length>0?3:2)}),a=i.y,o=i.w,s=i.h;ctx.fillStyle="#000";var d=l.fieldSettings.canvasWidth/2+l.fieldSettings.playFieldMargin.x,g=t.setFontSize(e,o-l.fieldSettings.gridSize);n.forEach(function(e,t){var i=ctx.measureText(n.join("")).width,o=d+(2===n.length?(2*t-1)*l.fieldSettings.gridSize*2:0);c({x:o-i/2,y:a+.65*s,w:i,h:2*g,color:["#5e5","#555"][t]}),ctx.fillText(e.text,o,a+.65*s+g),r.addInteractable(e.value,l.fieldSettings.playFieldMargin.x+o-i/2,a+.65*s,i,2*g)}),ctx.fillText(e,d,a+s/2)};var c=function(e){var t=e.x,n=e.y,i=void 0===n?2*l.fieldSettings.gridSize:n,r=e.w,a=void 0===r?10*l.fieldSettings.gridSize:r,o=e.h,s=e.color,d=void 0===s?"#DDD":s,c=e.shadow,g=void 0===c?.5*l.fieldSettings.containerSpacing:c,u=e.c,f=void 0===u?ctx:u,v=ctx.fillStyle;return t=t||0===t?t:l.fieldSettings.canvasWidth/2-a/2+l.fieldSettings.playFieldMargin.x,f.shadowOffsetX=f.shadowOffsetY=g,f.shadowColor=f.strokeStyle="rgba(0,0,0,0.5)",f.fillStyle=d,f.fillRect(t,i,a,o),f.shadowOffsetX=f.shadowOffsetY=0,f.lineWidth=l.fieldSettings.gridSize/30,f.strokeRect(t,i,a,o),f.fillStyle=v,{x:t,y:i,w:a,h:o}},g=function(e){var t=e.gx,n=e.gy,i=e.gw,r=e.gh,a=e.color,o=e.shadow,s=e.c;return c({x:t*l.fieldSettings.gridSize,y:n*l.fieldSettings.gridSize,w:i*l.fieldSettings.gridSize,h:r*l.fieldSettings.gridSize,color:a,shadow:o,c:s})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jitterBox=t.createPatternCanvas=t.getYellowBlackStripesPattern=t.getGoldPattern=void 0;var i=n(0),r=document.createElement("canvas"),a=r.getContext("2d");t.getGoldPattern=function(){var e=o(128,128,"gold"),n=e[0],i=e[1];return t.jitterBox(i,128,128),ctx.createPattern(n,"repeat")},t.getYellowBlackStripesPattern=function(){var e=o(32,32,"gold"),t=e[0],n=e[1];n.fillStyle="#000";for(var i=-32;i<32;i++)for(var r=-32;r<32;r++)Math.floor((r-i)/4)%4==0&&n.fillRect(i,r,2,2);return ctx.createPattern(t,"repeat")};var o=function(e,t,n){var i=document.createElement("canvas");i.width=e,i.height=t;var r=i.getContext("2d");return r.fillStyle=n,r.fillRect(0,0,e,t),[i,r]};t.createPatternCanvas=function(){r.width=i.fieldSettings.canvasWidth+i.fieldSettings.gridSize,r.height=i.fieldSettings.canvasHeight+i.fieldSettings.gridSize;var e=i.fieldSettings.gridSize/15;a.fillStyle="#000";for(var t=0;t<r.width/e;t++)for(var n=0;n<r.height/e;n++)a.globalAlpha=.2*Math.random(),a.fillRect(t*e,n*e,e,e)},t.jitterBox=function(e,t,n){e.drawImage(r,i.fieldSettings.gridSize*(blink?Math.random():1),i.fieldSettings.gridSize*(blink?Math.random():1),t,n,0,0,t,n)}},function(e,t,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.getRegions=void 0;var r=n(0);t.getRegions=function(e){void 0===e&&(e=level);for(var t=1,n=[],a=0,o=0;o<r.gridCount.x;o++){n.push([]);for(var l=0;l<r.gridCount.y;l++)n[o].push(0)}var s=[],d=[];e.walls.forEach(function(e){var t={x:e.x,y1:e.y,y2:e.y+e.h};s.push(t,i(i({},t),{x:e.x+e.w}));var n={y:e.y,x1:e.x,x2:e.x+e.w};d.push(n,i(i({},n),{y:e.y+e.h}))});for(var c=0,g=!1;a++<1e3&&c<120;){g||n.forEach(function(e){e.forEach(function(n,i){if(!g&&0==n)return e[i]=t++,c++,void(g=!0)})}),g=!1;var u=function(e){for(var t=function(t){var i=n[e][t];if(0===i)return"continue";var a=[t>0,e<r.gridCount.x-1,t<r.gridCount.y-1,e>0];s.forEach(function(n){n.y1<=t&&n.y2>t&&(a[1]=a[1]&&(e>=n.x||n.x-e>1),a[3]=a[3]&&(e<n.x||n.x-e<=-1))}),d.forEach(function(n){n.x1<=e&&n.x2>e&&(a[2]=a[2]&&(t>=n.y||n.y-t>1),a[0]=a[0]&&(t<n.y||n.y-t<=-1))}),a[0]&&0==n[e][t-1]&&(n[e][t-1]=i,c++,g=!0),a[1]&&0==n[e+1][t]&&(n[e+1][t]=i,g=!0,c++),a[2]&&0==n[e][t+1]&&(n[e][t+1]=i,g=!0,c++),a[3]&&0==n[e-1][t]&&(n[e-1][t]=i,c++,g=!0)},i=0;i<r.gridCount.y;i++)t(i)};for(o=0;o<r.gridCount.x;o++)u(o)}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hint=t.reset=t.gameUpdate=void 0;var i=n(0),r=n(3),a=n(13),o=n(11),l=n(2),s=n(15),d=n(4),c=n(6),g=n(14),u=n(1);window.won=!1,window.showLevelText=!0;var f,v,x=0,S=["Tutorial complete! All other sections are unlocked.","Section complete. You're a bright kid!","Finished normal. Dare more?","You're a champion!"];t.gameUpdate=function(){ctx.translate(i.fieldSettings.playFieldMargin.x,i.fieldSettings.playFieldMargin.y),numberToMove?a.setCursor(mouseIsDown?"grabbing":"grab"):u.currentInteractable?a.setCursor("pointer"):a.setCursor(),(won||i.fieldSettings.dirty)&&d.drawBackground(level,regions,v),ctx.drawImage(bgCanvas,0,0),d.drawCurrentResult(currentResult),d.drawNumbers(level.bricks);var e=d.getButtonBounds(1);if(hasHint||(ctx.globalAlpha=.7,ctx.fillRect(e[0],e[1],e[2],e[3]),ctx.globalAlpha=1),!won&&4===currentResult[0].number&&0===currentResult[1].number&&4===currentResult[2].number){won=!0;var n=o.wonLevel(level);n&&n.section===level.section?setTimeout(function(){return t.reset(n)},2e3):(dialogText=S[level.section],setTimeout(function(){return r.initLevelSelect()},5e3))}},t.reset=function(e){u.resetInteractables(),f=[],buttons=[],window.level=e,window.state=l.GameStates.game,x=levels.indexOf(e),v=x<4,won=!1,dialogText=e.text.length>1?e.text:"",e.section,regions=c.getRegions(e),g.scrambleNumbers(e,!v&&!window.editor),d.drawBackground(e,regions,v),s.getSequence()},t.hint=function(){var e=document.monetization&&"started"===document.monetization.state;if(hasHint){hasHint=!1,setTimeout(function(){return hasHint=!0},e?3e3:3e4);for(var t,n=0,i=0,r=!1;!r&&i++<99;){do{t=Math.round(2*Math.random())}while(f[t]&&n++<99);f[t]=!0,level.bricks.forEach(function(e){if(e.ox>=5*t&&e.ox<5*(t+1)){var n=level.bricks.find(function(t){return t.gx===e.ox&&t.gy===e.oy});n&&(n.gx=e.gx,n.gy=e.gy),e.gx=e.ox,e.gy=e.oy,e.dragabble=!1,r=!0}})}s.getSequence()}else dialogText=e?"Your Coil subscription will recharge a hint within 3 seconds.":"Hints recharges every 30 seconds. Subscribe to Coil to reduce to 3."}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setScale=t.isPortrait=void 0;var i=n(4),r=n(16),a=n(3),o=n(17),l=n(0),s=n(7),d=n(2),c=n(12),g=window;g.numbers=[],g.level=null,g.regions=null,g.state=d.GameStates.title,g.canvas=document.createElement("canvas"),g.ctx=canvas.getContext("2d"),g.bgCanvas=document.createElement("canvas"),g.bgCtx=bgCanvas.getContext("2d"),g.currentResult=[{number:4,sequence:""},{number:4,sequence:""},{number:4,sequence:""}],g.lvlCanvas=document.createElement("canvas"),g.lvlCtx=g.lvlCanvas.getContext("2d"),document.body.appendChild(canvas),window.blink=!0,window.editor=!!document.location.href.split("?")[2],window.hasHint=!0,window.dialogText="Photogenic seizure warning! Enable flashing effects (recommended for most)?",window.buttons=[],window.buttons=[{text:"Yes",value:"y"},{text:"No",value:"n"}],t.isPortrait=function(){return window.innerHeight>window.innerWidth},setTimeout(function(){c.addTrophy("🕓","Time well spent","Five great minutes of your life went into this game",!0)},3e5),document.addEventListener("DOMContentLoaded",function(){window.coil=document.monetization&&"started"===document.monetization.state,l.recalcConstants(),g.levels=r.levelDecoder(),o.startListenders(),document.location.href.indexOf("?")>-1?s.reset(levels[parseInt(document.location.href.split("?")[1],10)]):a.initLevelSelect(),u()},!1);var u=function(){window.innerWidth+window.innerHeight!==l.fieldSettings.canvasWidth+l.fieldSettings.canvasHeight&&l.recalcConstants(),canvas.width=l.fieldSettings.canvasWidth,ctx.textAlign="center",ctx.textBaseline="middle",t.isPortrait()?(ctx.font=l.fieldSettings.canvasWidth/9+"px a",ctx.fillText("Rotate device",l.fieldSettings.canvasWidth/2,l.fieldSettings.canvasWidth/9)):(state===d.GameStates.game?s.gameUpdate():a.levelSelectUpdate(),dialogText.length>0&&i.showText(dialogText,buttons)),l.fieldSettings.dirty=!1,window.requestAnimationFrame(u)};t.setScale=function(){g.ctx.scale(2,2),g.bgCtx.scale(2,2)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gridCoords2CanvasOffset=t.canvasOffset2BoardGridCoords=t.getTotalContainerSpacing=t.getContainerIndex=t.canvasOffsetPixel2BoardPixels=void 0;var i=n(0);t.canvasOffsetPixel2BoardPixels=function(e,t){return{x:e-=i.fieldSettings.playFieldMargin.x,y:t-=i.fieldSettings.playFieldMargin.y}},t.getContainerIndex=function(e){return Math.floor(e/i.fieldSettings.gridSize/5)},t.getTotalContainerSpacing=function(e){return i.fieldSettings.containerSpacing*t.getContainerIndex(e)},t.canvasOffset2BoardGridCoords=function(e,n){var r=t.canvasOffsetPixel2BoardPixels(e,n),a=r.x,o=r.y,l=Math.floor(a/i.fieldSettings.gridSize/5),s=i.fieldSettings.containerSpacing*l,d=Math.floor((a-s)/i.fieldSettings.gridSize),c=Math.floor(o/i.fieldSettings.gridSize);return{x:a,y:o,gx:Math.min(Math.max(d,0),14),gy:Math.min(Math.max(c,0),7)}},t.gridCoords2CanvasOffset=function(e,t){return{x:e*i.fieldSettings.gridSize+Math.floor(e/5)*i.fieldSettings.containerSpacing,y:t*i.fieldSettings.gridSize}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.seededRandom=t.makeRandom=void 0,t.makeRandom=function(e){return void 0===e&&(e=1),e*=99,function(t,n){void 0===n&&(n=0);var i=9999*Math.sin(e++);return Math.round(n+(i-Math.floor(i))*(t-n))}},t.seededRandom=function(e,t){e*=99;var n=1e4*Math.sin(e++);return(n-Math.floor(n))*t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wonLevel=t.getProgress=void 0;var i=n(12);t.getProgress=function(e){var t=localStorage.getItem("FyraNollFyra")||localStorage.getItem("get404");return t?JSON.parse(t)[e]:0==e},t.wonLevel=function(e){var t=levels[levels.length-1]===e?null:levels[levels.indexOf(e)+1],n=t?t.section:4;if(e.section<n)switch(e.section){case 0:i.addTrophy("🏫","Out of school","You finished the tutorial!",!0);break;case 1:i.addTrophy("👶","No kidding","All kids levels done!",!0);break;case 2:i.addTrophy("⭐","16 levels of joy","All medium hard levels done",!0);break;case 3:i.addTrophy("💪","16 levels of pain","All hard levels done",!0)}if(t){t.section>0&&(levels[20].unlocked=!0,levels[36].unlocked=!0),t.unlocked=!0;var r=levels.map(function(e){return e.unlocked});return r.some(function(e){return!e})||i.addTrophy("🌟","Completionist","You've beaten all levels",!0),localStorage.setItem("FyraNollFyra",JSON.stringify(r)),t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTrophy=void 0,t.addTrophy=function(e,n,i,r){void 0===r&&(r=!1);var a="OS13kTrophy,"+e+",FyraNollFyra,"+n;localStorage[a]||(dialogText.length>0||r?setTimeout(function(){return t.addTrophy(e,n,i)},1e3):(localStorage[a]=i,dialogText=e+" New trophy! "+n+": "+i))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setCursor=void 0,t.setCursor=function(e){void 0===e&&(e=""),canvas.className=e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scrambleNumbers=void 0;var i=n(6),r=n(10);t.scrambleNumbers=function(e,t){void 0===t&&(t=!0);var n=r.makeRandom(e.seed),a=i.getRegions(e);return e.bricks.forEach(function(i){if(i.gx=i.ox,i.gy=i.oy,i.dragabble=i.odragabble,i.region=a[i.gx][i.gy],t&&i.odragabble)for(var r=!1,o=0,l=function(){var t=Math.round(n(14)),o=Math.round(n(7));e.bricks.some(function(e){return e!==i&&e.gx==t&&e.gy==o})||a[t][o]!==i.region||(r=!0,i.gx=t,i.gy=o)};!r&&o++<1e3;)l()}),e.bricks[0],e.bricks}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSequence=void 0,t.getSequence=function(){var e=[[],[],[]];level.bricks.forEach(function(t){var n=Math.floor(t.gx/5);e[n].push(t)}),e.forEach(function(e,t){var n=e.sort(function(e,t){return e.gy==t.gy?e.gx-t.gx:e.gy-t.gy});currentResult[t]=i(n)})};var i=function(e){for(var t=e.map(function(e){return e.content}).join(""),n=!0;n;)n=t!==(t=(t=(t=(t=t.replace(/\-\-/g,"+")).replace(/\+\-/g,"-")).replace(/\-\+/g,"-")).replace(/\+\+/g,"+"));var i=(t=""===(t=t.replace(/^\+/,"").replace(/[\+\-]$/,""))?"0":t).replace(/([^0-9])/g,"!$1!").split("!").map(function(e){return e.replace(/^0(.)/,"$1")}),r=0,a="+";return i.forEach(function(e){if(""!==e)if(isNaN(e))a=e;else if("-"===a)r-=parseInt(e,10);else r+=parseInt(e,10)}),{number:r,sequence:i.join("")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.levelDecoder=void 0;var i=n(10),r=n(11),a=i.makeRandom(),o="\" 2(%.)%2*% Move the numbers to make the boxes say 4, 0 and 4.  \" 2#%.$%.%%.(%2)%.*% 400 is big. 004 is perfect. Rearrange to reach 4 0 4.  \"'!'5 0\"%0#%8$%#(%\")%4*%-(&&)&-('8,%%-%/.% Use plus and minus to reach 4,0,4. The walls block numbers!  #'!'5 $\"%-#%-$%$%%9(%0)%0*%9,%0-%0.%9/% Double negative is positive (--4 equals 4).  % 2%%.)%2.% Make it to 4 0 4  \" 1\"#8$#/&#0-%8.%0/% Try + to add numbers  %$!#,%!$, 1$\"8$#/$$0-%8.%0/% x  %%!+, 1$\"8$#/&$0-%8.%0/% x  &'!', /\"\"8#\"/$\"8%\"/&\"8\"#/##0-%8.%0/%8-&..& x  %%#+( %#%,$%/%%1-%,.%#/% x  %!&2( %$$,$%/$&/.%,.&%.' x  &!&2( $$$,$%0$&$)$-)%0)&0.%,.&$.' x  & 0$$,$%0$&5)$-)%5)&0.$,.%0.& x  %%#+( 1#%8$%/%%1-%8.%//% x  ''!1, 2\"%8#%/$%9\"&/#&0-%8.%0/%8-&..& x  ) 0#%,$%0%%/(%-)%/*%#-%\".%-/%4.& x  ''!', ##%\"$%\"%%-#&7$&(%&7)$9)%7)&0-%8.%1/%9-&/.& x  %!&,(+!,, 1$%8$&/$'4)%9)&4)'/.%,.&%.' x  %%!+, 4$\"9$#0&$1(%9)%1*%7-%9.%3/% x  &\"%)&\"\"&#\")'# +&\"9#&\"%)3&)/'\"9(\"/)\"#-%4.%-.&*/&-.'&/' x  %%!+, 1$\"8$#/&$.#\"0-%8.%0/%9.' x  %\"!%'$!%')!,, .$\".$#/$$8$'1$(.)%0-%8.%0/% x  %%#+( 3#%,$%1%%-#&2#'1-%,.%//% x  ''!), /#%.$%.%%9#&7$&4%&7)$9)%7)&0-%8.%1/%9-&/.& x  $!&2()!#, 0$$8$%0$&*)$-)%4*&-*'0*(0.%,.&$.' x  %%!+, 5#$1$$9\"%4#%7$%/)%.*%9(&/)'.*'0/%.0%9/&..'//'40' x  &!&2( 0$$9$%9$&0$'0)$9)%0)&9)'0.%9-&9.&0.' x  % &%%\")%/-%&.%9-&/.&./& x  %!&,(+!,, 5$$8$%/$'9$(2$)4)%9)&1)'9)(1))/.$-.%-.&1.' x  *\"%)&\"\"%#\")'# +%\"+&\"9#&6$&6%&9&&5%)\"$)/'\"9(\"/)&/,&.-&-.&4/& x  &*%*&,)*# +&\"9#&3%)/'\"9(\"/)\"/-$4.$-.&*/&-.'&/' x  %!$2& 3##9#%/#)1(#4*#9)%1)&4))1/\"8/#1/%9/&0/( x  %)!,, .$\".$#/$$8$'1$(.)%2-%0.%9,&2-&1.&8,'3.' x  % /%%9%&9%'1%(/)%9)&/)(/,\"1-\"9.\"/,#1-#9.#9/#/0#9,$9-$1.$ x  \"'!'5 5$\"&$#9$$4$%7$&9$'/$(/(%\")%9*%4(&9('2)'8))..\"7,%#-%9.%6/%50% x  %'!', &$%/(\".)\"8(#0)#8*#1+#8($2)$9(%3)%9(&4)&9('5)'8((6)(9()7))&.% Final level. Lets do all numbers  \"%!+0 &$%8%%7&%9%&6&&9%'/&'\")%/'&0(&1)&-''2('3)'4*','(1((1)(1*(&.% Prepare for a challenge!  %%#+( 6\"%1#%9$%5%%7&%/,%4-%9.%//%00% x  %!$2& 3##9#%/#)1(#4*#9)%1)&4))1/\"8/#1/%9/&0/( x  %'!1, 3\"%9#%1$%8#&5\"'9#'3$'/(\".)\"8(#0)#8*#1+#8($2)$9(%3)%9(&4)&9('5)'8((6)(9()7))2.% x  ' /#%.$%.%%9#&7$&4%&7)$9)%7)&0-%8.%1/%9-&/.& x  %%#+( 7%\"7&\"9#&6$&6%&9&&5%).$)/'\"9(\"/)&/,&.-&9.&4/& x  &!&2( 0#$0$%0%%9$&0#'/$'6%'0)#0)$9)%0)&0)'9)(1.%9-&9.&/.' x  \"$!-5(!%5 5\"\"2$#9$$4$%7$&9$'/$(/(%\")%9*%4'&9('2+'8))..\"7,%/-%9.%6.&5/& x  %)!,, .$\"1$#/$$8$'1$(9#)1$).%)0(%3)%2*%9)&0('3)'.*'9))2*)1-%0.%9,&1-&1.&8,'3.' x  %%!+, 5#$0$$9\"%4#%7$%8\"&/#&1)%0*%9(&1)'0*'//%50%9/&..'//'10' x  & 7$$0%$9$%6$&6%&0)$9)%0)&7-%7.%7/%9.&7-'7.'6/'8.(1/( x  %!$2& 3##3$#5%#9#%9$%/#&/$&9#'3#(4$(2%(0(#4*#9)%0)&4))1/\"8/#1/%9/&0/( x  %%!+, 1$\"8$#/&$.#\"5,%5-%8.%0/%9.'5.(3/( x  %%!+, 5$\"8$#/%#9%%2&%.\"\"0,%9-%9.%0/%9,&5-&8.&1/&8,'2-' x  %%#+( 1#%7$%/%%9$&1#'6$'5%'3,%1-%5.%0/%90%3,&1-&4.&6/& x  &!&2( 0$$9$%9$&0$'0)$9)%0)&9)'0*'0+'8'(0')0()0.%9-&9.&0.' x".split("  "),l=[4,16,16,16],s=["3EE","090","F58FD5","9A54DE","525","a70"],d=function(e,t){return e.charCodeAt(t)-34},c=-1,g=0,u=-1;t.levelDecoder=function(){return o.map(function(e,t){var n=d(e,0),i=e.substring(1).split(" "),o=i[0],f=i[1],v=i.slice(2),x=[];if(""!=o)for(var S=0;S<o.length;S+=4)x.push({x:d(o,S),y:d(o,S+1),w:d(o,S+2),h:d(o,S+3)});var h=[];for(S=0;S<f.length;S+=3){var b=d(f,S),m=b>11,y=b-12*m;h.push({odragabble:m,content:11==y?"-":10==y?"+":""+y,ox:d(f,S+1),oy:d(f,S+2)})}for(var p=c;p===c;)c=Math.floor(a(s.length-1));return t>l[g]+u&&(u+=l[g++]),{seed:n,color:"#"+s[c],walls:x,bricks:h,section:g,unlocked:r.getProgress(t),text:v.join(" ")}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.startListenders=void 0;var i=n(18),r=n(8),a=n(3),o=n(2),l=n(19),s=n(1),d=!1,c=function(e){var t=e.target,n=e.targetTouches,i=t.getBoundingClientRect();return{x:n[0].pageX-i.left,y:n[0].pageY-i.top}};t.startListenders=function(){var e={x:0,y:0},t=function(t){var n=t.x,s=t.y;e={x:n,y:s},r.isPortrait()||(buttons.length>0?i.dialogClick():(dialogText="",buttons=[],state==o.GameStates.game?l.startInteraction(n,s):a.startLevel()))};canvas.onmousedown=function(e){return t({x:e.offsetX,y:e.offsetY})},canvas.ontouchstart=function(e){return t(c(e))};var n=function(t){var n=t.x,i=t.y;e={x:n,y:i},r.isPortrait()||(window.mousePosition={x:n,y:i},s.UImoved(n,i),state==o.GameStates.game&&l.moved(n,i))};canvas.onmousemove=function(e){e.preventDefault,n({x:e.offsetX,y:e.offsetY})},canvas.addEventListener("touchmove",function(e){return n(c(e))},{passive:!1});var g=function(){return r.isPortrait()?null:l.executeMove(e.x,e.y)};canvas.onmouseup=function(e){return g()},canvas.ontouchend=function(e){return void(d||(d=!0,confirm("Switch to fullscreen for a better touch experience?")&&(document.body.requestFullscreen(),canvas.requestFullscreen?canvas.requestFullscreen():canvas.mozRequestFullScreen?canvas.mozRequestFullScreen():canvas.webkitRequestFullscreen?canvas.webkitRequestFullscreen():canvas.msRequestFullscreen&&canvas.msRequestFullscreen())))+g()},canvas.onmouseout=function(){return l.cancelMove()},canvas.ontouchcancel=function(){return l.cancelMove()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dialogClick=void 0;var i=n(1);t.dialogClick=function(){if(i.currentInteractable){switch(i.currentInteractable.value){case"y":blink=!0;break;case"n":blink=!1;break;default:return}buttons=[],dialogText=""}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cancelMove=t.executeMove=t.moved=t.startInteraction=void 0;var i=n(7),r=n(3),a=n(9),o=n(0),l=n(15),s=n(1);window.mouseIsDown=!1,window.numberToMove=null;var d={x:0,y:0},c=0,g=null;t.startInteraction=function(e,t){if(!won){s.currentInteractable&&(0===s.currentInteractable.value?r.initLevelSelect():i.hint());var n=a.canvasOffset2BoardGridCoords(e,t),o=n.x,l=n.y,g=n.gx,u=n.gy;if(f(),numberToMove=level.bricks.find(function(e){return e.gx==g&&e.gy==u&&e.dragabble}),numberToMove){c=regions[numberToMove.gx][numberToMove.gy];var v=a.gridCoords2CanvasOffset(numberToMove.gx,numberToMove.gy);d={x:v.x-o,y:v.y-l},mouseIsDown=!0}else numberToMove=null}};var u=function(e,t){for(var n={c:99},i=0;i<15;i++)for(var r=0;r<8;r++)if(regions[i][r]===c){var a=Math.sqrt(Math.pow(i-e,2)+Math.pow(r-t,2));a<n.c&&(n={c:a,x:i,y:r})}return n};t.moved=function(e,t){if(mouseIsDown){clearTimeout(g);var n=a.canvasOffset2BoardGridCoords(e,t),i=n.x,r=n.y,l=n.gx,s=n.gy;if(regions[l][s]!=c){var f=u(l,s);return numberToMove.x=f.x*o.fieldSettings.gridSize,void(numberToMove.y=f.y*o.fieldSettings.gridSize)}numberToMove.x=Math.min(Math.max(i+d.x-a.getTotalContainerSpacing(i),0),14*o.fieldSettings.gridSize),numberToMove.y=Math.min(Math.max(r+d.y,0),7*o.fieldSettings.gridSize)}},t.executeMove=function(e,t){if(mouseIsDown=!1,numberToMove&&!won){var n=a.canvasOffset2BoardGridCoords(e+d.x+o.fieldSettings.gridSize/2,t+d.y+o.fieldSettings.gridSize/2),i=n.gx,r=n.gy;if(regions[i][r]!=c){var s=u(i,r);i=s.x,r=s.y}level.bricks.findIndex(function(e){return e.gx==i&&e.gy==r})>-1||regions[i][r]!=c||(numberToMove.gx=i,numberToMove.gy=r,l.getSequence()),f()}},t.cancelMove=function(){clearTimeout(g),g=setTimeout(function(){mouseIsDown=!1,f()},1e3)};var f=function(){null!=numberToMove&&(numberToMove.x=-1,numberToMove.y=-1)}}]);</script>