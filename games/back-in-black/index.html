<html style=background:#000><meta content="initial-scale=1,user-scalable=no" name=viewport><script>var u,M,t,l,o,v,a,c,n,z=[588,420,'path fill="#0d6867" d="M0 0h588v420H0z"/><path fill="#1c8f11" d="M147 105h294v210H147z"/><text style="line-height:1.25" x="204.099" y="181.526" font-family="sans-serif" font-size="40" font-weight="400" letter-spacing="0" word-spacing="0"><tspan x="204.099" y="181.526" font-size="14.667">title screen placeholder</tspan><tspan x="204.099" y="231.526" font-size="14.667">(just click)</tspan></text'],r=[15,23,'path fill="#000b2b" d="M1 0L0 1v21l1 1h13l1-1V1l-1-1zm4 3h1v3zm4 0h1L9 6zM3 7l1 3H3zm9 0v3h-1zm-9 6h1l-1 3zm8 0h1v3zm-5 4v3H5zm3 0l1 3H9z"/><path d="M2 1l1 1h9l1-1zM1 2l1 1v8H1zM7 3h1v7H7zM3 11h4v1H3zM9 10l2-7h1l-2 7zM2 12v8l-1 1v-9zM2 22l1-1h9l1 1zM13 20l1 1v-9h-1zM13 11V3l1-1v9zM8 11h4v1H8zM7 13h1v7H7zM6 10L4 3H3l2 7zM9 13l2 7h1l-2-7zM6 13l-2 7H3l2-7z"/'],i="back-in-black",d=[60,36,'path fill="#6d3b3b" d="M45 6h12v24H45z"/><path fill="#40477e" stroke="#000" d="M44 26h14V10H44z"/><path fill="#a31d1d" d="M52 18l4 4v-8zM50 18l-4-4v8z"/><path fill="#857d6c" stroke="#000" d="M49 10h4v8h-4zM49 18h4v8h-4z"/'],p=[60,36,'path fill="#6d3b3b" d="M45 6h12v24H45z"/><path fill="#40477e" stroke="#000" d="M44 26h14V10H44z"/><path fill="#857d6c" stroke="#000" d="M49 10h4v2h-4zM49 24h4v2h-4z"/><path fill="#a39d1d" d="M52 18l4 4v-8zM50 18l-4-4v8z"/'],g=[60,36,'path fill="#6d3b3b" d="M45 6h12v24H45z"/><path fill="#40477e" stroke="#000" d="M44 26h14V10H44z"/><path fill="#a39d1d" d="M52 18l4 4v-8zM50 18l-4-4v8z"/'],m=[60,36,'path fill="#6d3b3b" d="M45 6h7l4-1s4-1 4 3v19c0 5-4 4-4 4l-4-1h-7z"/><path fill="#40477e" stroke="#000" d="M44 26h8V10h-8z"/><path fill="#a31d1d" d="M50 18l-4-4v8z"/><path fill="#857d6c" stroke="#000" d="M52 10l4-1v18l-4-1zM52 18h4"/'],y=[96,36,'path d="M74 9l8-2h14v22H82l-8-2z"/'],s=[96,36,'path fill="#6d3b3b" d="M74 9h4v18h-4z"/><path fill="#fff" stroke="#000" d="M74 9v18"/><path d="M78 9h18v18H78z"/'],k=[96,36,'path fill="#6d3b3b" d="M63 10s0-4 7-4l4-1s4-1 4 3v19c0 5-4 4-4 4l-4-1c-7 0-7-4-7-4z"/><path fill="#40477e" d="M62 26h8V10h-8z"/><path fill="#a39d1d" d="M68 18l-4-4v8z"/><path fill="#fff" stroke="#000" d="M70 10l4-1v18l-4-1z"/><path fill="#949ac8" d="M70 10l-4 1v14l4 1z"/><path fill="#d9d22c" d="M66 16l2 2-2 2z"/><path fill="none" stroke="#000" d="M62 26h8V10h-8z"/'],f=[96,36,'path fill="#6d3b3b" d="M63 10s0-4 7-4l4-1s4-1 4 3v19c0 5-4 4-4 4l-4-1c-7 0-7-4-7-4z"/><path fill="#40477e" d="M62 26h8V10h-8z"/><path fill="#a39d1d" d="M68 18l-4-4v8z"/><path fill="#fff" stroke="#000" d="M70 10l4-1v18l-4-1z"/><path fill="none" stroke="#000" d="M62 26h8V10h-8z"/'],b=[60,36,'path fill="#6d3b3b" d="M45 4h12v28H45z"/><path fill="#40477e" d="M58 25h-5v3h-9V8h9v3h5z"/><path fill="#a39d1d" d="M51 18l-5 5V13z"/><path fill="#16192f" d="M58 25h-5V11h5s-3-1-3 7 3 7 3 7z"/><path fill="#a39d1d" d="M52 12h1v12h-1z"/><path fill="none" stroke="#000" d="M58 25h-5v3h-9V8h9v3h5z"/'],H=[60,36,'path fill="#6d3b3b" d="M52 4h5v28h-5v-1h-4v-1h-3V6h3V5h4z"/><path fill="#40477e" d="M44 26h5v1h4v1h5V8h-5v1h-4v1h-5z"/><path fill="#16192f" d="M49 10v16h-4s3 0 3-8-3-8-3-8zM49 9h4v18h-4s3 0 3-9-3-9-3-9z"/><path fill="none" stroke="#000" d="M44 26h5v1h4v1h5V8h-5v1h-4v1h-5z"/><path fill="#a39d1d" d="M54 18l3 3v-6zM47 18l-2-2v4z"/'],h=[30,31,'path fill="#000b2b" d="M15 1l1-1h13l1 1-2 2h-9l-1 1v23l1 1h9l2 2-1 1H16l-1-1z"/><path fill="#fff" d="M17 1l1 1h4V1zM16 2l1 1v10h-1zM17 18v10l-1 1V18zM17 30l1-1h4v1z"/><path d="M23 1v1h4l1-1zM23 29h4l1 1h-5zM16 14h1v3h-1z"/'],w=[13,12,'g transform="translate(0 -24)"><ellipse cx="-6.704" cy="29.958" fill-opacity=".502" rx="5.827" ry="5.784" transform="scale(-1 1)"/><ellipse cx="6.897" cy="29.948" fill="#313131" stroke="#000" rx="2.098" ry="5.116"/><circle cx="-6.894" cy="29.84" r="2.775" fill="#bca325" stroke="#000" transform="scale(-1 1)"/></g'],V=[13,12,'g stroke="#232a8d" transform="translate(0 -24)"><ellipse cx="6.897" cy="29.948" rx="2.098" ry="5.116"/><circle cx="-6.894" cy="29.84" r="2.775" transform="scale(-1 1)"/></g'],x=[13,12,'g transform="translate(0 -24)"><ellipse cx="-6.704" cy="29.958" fill-opacity=".502" rx="5.827" ry="5.784" transform="scale(-1 1)"/><ellipse cx="7.018" cy="29.963" fill="#313131" stroke="#000" rx="2.219" ry="4.86"/><circle cx="-7.135" cy="29.448" r="2.775" fill="#bca325" stroke="#000" transform="scale(-1 1)"/></g'],T=[13,12,'g stroke="#232a8d" transform="translate(0 -24)"><ellipse cx="7.018" cy="29.963" rx="2.219" ry="4.86"/><circle cx="-7.135" cy="29.448" r="2.775" transform="scale(-1 1)"/></g'],A=[13,12,'g transform="translate(0 -24)"><ellipse cx="-6.704" cy="29.958" fill-opacity=".502" rx="5.827" ry="5.784" transform="scale(-1 1)"/><path fill="#304b66" stroke="#000" d="M6 29l-5 2v2l5-1c2-1 0-3 0-3z"/><path fill="#313131" stroke="#000" d="M12 31l-4 1c0-2 2-4 1-6-2-2-5-1-5-1v1l1 1v4s0 3 3 3l4-1z"/><circle cx="-8.614" cy="29.478" r="2.775" fill="#bca325" stroke="#000" transform="scale(-1 1)"/></g'],q=[13,12,'g fill="#060604" stroke="#232a8d" transform="translate(0 -24)"><path d="M6 29l-5 2v2l5-1c2-1 0-3 0-3z"/><path d="M12 31l-4 1c0-2 2-4 1-6-2-2-5-1-5-1v1l1 1v4s0 3 3 3l4-1z"/><circle cx="-8.614" cy="29.478" r="2.775" transform="scale(-1 1)"/></g'],S=[36,36,'rect width="36" height="36" fill="#6d3b3b" rx="8" ry="8"/><rect width="28" height="28" x="4" y="4" fill="#40477e" stroke="#000" rx="4" ry="4"/'],D=[36,36,'rect width="36" height="36" fill="#6d3b3b" rx="8" ry="8"/><rect width="28" height="28" x="4" y="4" fill="#40477e" stroke="#000" rx="4" ry="4"/><path fill="#16192f" d="M10 9s2 3 8 3 8-3 8-3v18s-2-3-8-3-8 3-8 3v-9-9z"/><rect width="6" height="6" x="15" y="15" fill="#fff" stroke="#000" rx="4.5" ry="4"/><path fill="#595959" stroke="#000" d="M12 16h12l4-4V7h-5v2h3v3l-2 2H12l-2-2V9h3V7H8v5zM12 20h12l4 4v5h-5v-2h3v-3l-2-2H12l-2 2v3h3v2H8v-5z"/><path fill="#f6f6f6" d="M18 13l2-6v4l1-2v3l5-6-1 5h2l-4 3s0-2-5-1zM23 20l3 7-3-4v3l-2-3-1 2-2-2-1 3v-3s5 0 6-3zM13 20H8l4-2-6-2 7-1-3-3 5 2s-3 2-2 6z"/'],C=[36,36,'rect width="36" height="36" fill="#6d3b3b" rx="8" ry="8"/><rect width="28" height="28" x="4" y="4" fill="#40477e" stroke="#000" rx="4" ry="4"/><path fill="#16192f" d="M10 9s2 3 8 3 8-3 8-3v18s-2-3-8-3-8 3-8 3v-9-9z"/><rect width="6" height="6" x="15" y="15" fill="#fcf5d0" stroke="#000" rx="4.5" ry="4"/><path fill="#595959" stroke="#000" d="M12 16h12l4-4V7h-5v2h3v3l-2 2H12l-2-2V9h3V7H8v5zM12 20h12l4 4v5h-5v-2h3v-3l-2-2H12l-2 2v3h3v2H8v-5z"/><path fill="#fcf5d0" d="M20 13l7-4-3 3h2l-2 3h4l-3 1 4 1h-4s-1-5-5-4zM23 22l1 5-2-4v2l-1-1-1 2-1-2-1 5-1-5-1 2v-3s4 1 7-1zM13 18H9l4-1h-2 2l-3-2h3l-2-2 3 1s-2 3-1 4z"/'],L=[36,36,'rect width="36" height="36" fill="#6d3b3b" rx="8" ry="8"/><rect width="28" height="28" x="4" y="4" fill="#40477e" stroke="#000" rx="4" ry="4"/><path fill="#16192f" d="M10 9s2 3 8 3 8-3 8-3v18s-2-3-8-3-8 3-8 3v-9-9z"/><rect width="6" height="6" x="15" y="15" fill="#f5f4dc" stroke="#000" rx="4.5" ry="4"/><path fill="#595959" stroke="#000" d="M12 16h12l4-4V7h-5v2h3v3l-2 2H12l-2-2V9h3V7H8v5zM12 20h12l4 4v5h-5v-2h3v-3l-2-2H12l-2 2v3h3v2H8v-5z"/><path fill="#f5f4dc" d="M14 15l-2-3 2 1-1-5 2 4v-2l1 1v-1l2 2 2-4-1 5s-3-2-5 2zM23 18l6 1h-4l3 3-4-1 4 5-5-4 1 3-3-3s5-1 2-4zM13 20l-2 2 2-1-4 4 5-3-1 3 3-2v1l1-1s-2 1-4-3z"/'],R=[36,36,'rect width="36" height="36" fill="#6d3b3b" rx="8" ry="8"/><rect width="28" height="28" x="4" y="4" fill="#40477e" stroke="#000" rx="4" ry="4"/><rect width="20" height="20" x="8" y="8" fill="#857d6c" stroke="#000" rx="2" ry="2"/><circle cx="18" cy="18" r="8" fill="#fffc18" stroke="#000"/'],O=[36,36,'rect width="36" height="36" fill="#6d3b3b" rx="8" ry="8"/><rect width="28" height="28" x="4" y="4" fill="#40477e" stroke="#000" rx="4" ry="4"/><rect width="20" height="20" x="8" y="8" fill="#857d6c" stroke="#000" rx="2" ry="2"/><circle cx="18" cy="18" r="8" fill="#185dff" stroke="#000"/'],B=[588,420,'path fill="#150035" d="M115 213l-7 89 59 49 104-53-12-95-92-18z"/><path fill="#004286" d="M204 395l-5-59 7-63 6 66zM401 163l-4-60 7-63 5 67zM258 129l-5-60 7-63 6 67zM357 419l-4-60 7-62 5 66zM204 222l-5-60 7-63 6 67zM295 299l-4-59 7-63 5 66zM105 122l-4-59 7-63 5 66zM462 396l-4-59 7-63 5 66zM482 187l-4-59 7-63 5 66zM105 320l-4-59 7-63 5 67z"/><path fill="#150035" d="M323 62l-55 96 124 56 76-101-25-71z"/><path fill="#004286" d="M373 154l-4-59 7-63 5 66z"/'],G=[588,420,'path fill-opacity=".682" d="M0 0v420h588V0H0zm288 89l97 40 79-22-46 72 57 31-33 35 13 38-75-3 26 44-83-37-60 52-58-77-78 20 40-76-56-35 23-55 70 52 84-79z"/><path d="M0 0v420h588V0H0zm106 15l94 122 64-86 112 41 60-28 97 34-68 55 107 36-100 68 77 46-108 5 36 82-153-60-26 79-90-44-12-64-108 85 10-51-79-9 91-109-81-8 69-69-52-26 60-99z"/'],E=[],F=[];function I(e,t){t.style.position="absolute",t.style.transform="none",t.style.opacity=u?"0":"1",e[0].appendChild(t);var l=[t,u?[{offset:u,easing:"step-end",transform:"none",opacity:"1"}]:[]];return F.push(l),l}function j(e){return u?Q(e):e[0].style}function K(e){var t=function(e){var t=e[1];return t.length?t[t.length-1]:e[0].style}(e),l=e[1],a={offset:u,easing:"step-end",transform:t.transform,opacity:t.opacity};return l.push(a),a}function Q(e){var t=e[1];if(t.length){var l=t[t.length-1];if(l.offset==u)return l}return K(e)}function e(){try{c=new AudioContext}catch(e){try{c=new webkitAudioContext}catch(e){return}}(function(){for(var e=c.sampleRate,t=c.createBuffer(1,e,e),l=t.getChannelData(0),a=0;a<e;a++)l[a]=2*Math.random()-1;(Ie=c.createBufferSource()).buffer=t,Ie.loop=!0,Ie.start()})(),xe=c.createOscillator(),(Te=c.createGain()).gain.value=0,xe.connect(Te),Te.connect(c.destination),xe.start(0),(Be=c.createGain()).gain.value=0,(Ge=c.createBiquadFilter()).type="bandpass",Ge.frequency.value=1800,Ge.Q.value=.9,Ie.connect(Be),Be.connect(Ge),Ge.connect(c.destination),(Ee=c.createOscillator()).type="triangle",(Fe=c.createGain()).gain.value=0,Ee.connect(Fe),Fe.connect(c.destination),Ee.start(0),function(){(Ve=c.createGain()).gain.value=0;var e=c.createBiquadFilter();e.type="bandpass",e.frequency.value=1e4,e.Q.value=.5;var t=c.createBiquadFilter();t.type="highpass",t.frequency.value=7e3,Ie.connect(Ve),Ve.connect(e),e.connect(t),t.connect(c.destination)}(),function(){(ke=c.createOscillator()).type="sawtooth",ke.detune.value=-6,(be=c.createOscillator()).detune.value=6,be.type="sawtooth";var e=c.createChannelMerger(2);(He=c.createBiquadFilter()).type="lowpass",He.Q.value=8,(we=c.createGain()).gain.value=0,ke.connect(e,void 0,0),be.connect(e,void 0,1),e.connect(He),He.connect(we),we.connect(c.destination),ke.start(0),be.start(0)}(),function(){var e=c.createChannelMerger();e.connect(c.destination);for(var t=0;t<2;t++){var l=c.createOscillator();l.type="square",l.detune.value=-6;var a=c.createOscillator();a.type="square",a.detune.value=6;var n=c.createGain();n.gain.value=0,l.connect(n),a.connect(n),n.connect(e,void 0,t),l.start(),a.start(),je.push([l,a,n])}}(),function(){(Re=c.createOscillator()).type="sawtooth",(Oe=c.createGain()).gain.value=0;var e=c.createBiquadFilter();e.type="bandpass",e.frequency.value=600,e.Q.value=1.2;for(var t=c.sampleRate,l=c.createBuffer(2,t,t),a=0;a<2;a++)for(var n=l.getChannelData(a),r=0;r<t;r++)n[r]=(2*Math.random()-1)*(Math.pow(1-r/t,8192)+1);var i=c.createConvolver();i.buffer=l,Re.connect(Oe),Oe.connect(e),e.connect(i),i.connect(c.destination),Re.start()}(),W()}function J(e){return e/vt*60}function N(){var e=c.currentTime;P(.5)<e&&(l=Math.max(P(1),e),wt(),n++),t=setTimeout(N,1e3*(P(.6)-e))}function W(){c&&"suspended"==c.state&&c.resume().then((function(){l=c.currentTime,wt(),t=setTimeout(N,1e3*J(.6))}))}function X(){c&&c.suspend().then((function(){clearTimeout(t),t=void 0}))}function Y(e){W();var t=o[e.code];t&&(t(),U(),e.preventDefault())}function U(){o={},F.length=0,u=0,function(){for(var e=0,t=Ae;e<t.length;e++){var l=t[e];document.body.removeChild(l[1])}Ae.length=0,ye=function(){var e=function(e,t,l,a,n,r){var c=document.createElement("div");c.style.position="fixed",c.style.overflow="hidden",c.style.transformOrigin="0 0",c.style.userSelect="none",c.style.touchAction="manipulation";var i=document.createElement("div");i.style.position="absolute",c.appendChild(i);var s=[i,c,e,t,l-(l-e)*(.5*Math.abs(0)),a-(a-t)*(.5*Math.abs(0)),.5,.5];return Ae.push(s),s}(Mt,zt,gt,mt),t=v.from||v.to,l=function(e,t){switch(t.type){case"title":return te(e,z),function(){};case"levelSelect":return function(e){var t=te(e,B),l=te(e,B);return se(l,-mt),ae(t),ae(l),te(e,G),$e(e,Vt(),!1),function(){_(3e3),se(t,mt),se(l,mt)}}(e);case"game":return function(e,t){var l=et[t.level];switch(t.state){case"entering":case"finding":rt(e,t,l,(function(){}));var a=ee(e);lt(l.mcguffin,a);var n=te(a,D);if(it(e,t,l,(function(){})),t.walking)return ct(e,t,l,A);var r=ee(e);at(t,r);var c=te(r,w);return ht(e,t),function(){_(333),re(n);var e=te(a,C);_(167),re(c),te(r,x),_(167),re(e),te(a,L),_(333)};case"taking":var i=[];rt(e,t,l,(function(e,t){return i.push({sprite:t,distance:$(e[0],e[1],l.mcguffin[0],l.mcguffin[1])})})),it(e,t,l,(function(e,t){return i.push({sprite:t,distance:Math.min($(e[0],e[1],l.mcguffin[0],l.mcguffin[1]),$(e[0]+Pe[e[2]],e[1]+Ze[e[2]],l.mcguffin[0],l.mcguffin[1]))})}));var s=te(e,V);return at(t,s),function(){for(;i.length;){for(var e=1/0,l=0,a=i;l<a.length;l++)(r=a[l]).distance<e&&(e=r.distance);for(var n=0;n<i.length;){var r;(r=i[n]).distance==e?(re(r.sprite),i.splice(n,1)):n++}_(300)}return function(){return t.state="taken"}};case"taken":if(t.walking)return ct(e,t,l,q);var f=te(e,k);at(l.goal,f);var h=te(e,y);at(l.goal,h);var o=ee(e);at(t,o);var v=te(o,V);return ht(e,t),function(){_(500),re(v),te(o,T),_(500)};case"won":return"opening"==t.menuState?function(){return $e(e,nt(t),!0),function(){return t.menuState="open"}}:($e(e,nt(t),!1),function(){});default:return function(){}}}(e,t);case"credits":return function(e){var t=te(e,B),l=te(e,B);se(l,-mt),ae(t),ae(l),te(e,G);var a=ee(e);se(a,-20),Xe(a,"thanks for playing");var n=ee(e);return se(n,20),Xe(n,"2019 jameswilddev"),function(){_(3e3),se(t,mt),se(l,mt)}}(e)}}(e,t);if(v.transitioning){if(le(e,-Mt,-zt,gt,mt,(function(){return v.transitioning=!1})),v.from){for(var a=0,n=yt;a<n.length;a++){var r=n[a];te(e,r),_(kt)}return function(){return v.from=null}}for(var c=[],i=0,s=yt;i<s.length;i++)r=s[i],c.push(te(e,r));for(var f=0,h=c;f<h.length;f++)r=h[f],_(kt),re(r);return function(){return v.transitioning=!1}}return function(e,t){switch(t.type){case"title":te(e,z),le(e,-Mt,-zt,gt,mt,(function(){return bt({type:"levelSelect"})}));break;case"levelSelect":!function(e){_e(e,Vt())}(e);break;case"game":!function(e,t){if(ft(t)){function l(l){function a(){var e=et[t.level];t[2]=l.facing,t.walking=!1;for(var a,n,r=0,c=e.corridors.concat(e.stairs).concat("a"==t.switch?e.openDoors:e.closedDoors).concat("taken"==t.state?[e.goal]:[]);r<c.length;r++){var i=c[r];!st(t,i)&&(n=i,(a=t)[0]!=n[0]+Pe[n[2]]||a[1]!=n[1]+Ze[n[2]]||a[2]!=Ue[n[2]])||(t.walking=!0)}for(var s=0,f=e.ledges;s<f.length;s++){var h=f[s];st(t,h)&&(t.walking=!0)}}!function(e,t){o[e]=t}(l.keycode,a),le(e,dt+32*l.x,pt+32*l.y,32,32,a)}for(var a=0,n=tt;a<n.length;a++){l(n[a])}}"won"==t.state&&_e(e,nt(t))}(e,t);break;case"credits":!function(e){le(e,-Mt,-zt,gt,mt,(function(){return bt({type:"title"})}))}(e)}}(e,t),l()}(),qe();for(var a=0,n=Ae;a<n.length;a++){var r=n[a];document.body.appendChild(r[1])}}(),function(){for(var e=0,t=E;e<t.length;e++)t[e].cancel();E.length=0,clearTimeout(M),M=void 0;for(var l=0,a=F;l<a.length;l++){var n=a[l],r=n[0],c=n[1];if(u&&c.length){for(var i=c[0],s=c[c.length-1],f=0,h=c;f<h.length;f++)h[f].offset/=u;0<i.offset&&c.unshift({offset:0,easing:"step-end",transform:r.style.transform,opacity:r.style.opacity}),s.offset<1&&c.push({offset:1,easing:"step-end",transform:s.transform,opacity:s.opacity}),E.push(r.animate(c,{duration:u,iterations:ye?1:1/0,fill:"forwards"}))}}if(ye){var o=ye;function v(){o(),U()}E.length?E[0].onfinish=v:M=setTimeout(v,u)}}()}function P(e){return function(e){return l+J(e)}(e)}function Z(e,t){return function(e,t,l,a){return e*l+t*a}(e,t,e,t)}function $(e,t,l,a){return Z(l-e,a-t)}function _(e){!function(e){u+=e}(e)}function ee(e){return function(e){return I(e,document.createElement("div"))}(e)}function te(e,t){return function(e,t){var l=document.createElement("img");return l.src="data:image/svg+xml,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="'+t[0]+'" height="'+t[1]+'"><'+t[2]+"></svg>"),l.style.marginLeft=""+t[0]/-2,l.style.marginTop=""+t[1]/-2,I(e,l)}(e,t)}function le(e,t,l,a,n,r){!function(e,t,l,a,n,r){var c=document.createElement("div");function i(e){e.preventDefault(),W(),r(),U()}c.style.position="absolute",c.style.left=""+t,c.style.top=""+l,c.style.width=""+a,c.style.height=""+n,c.onmousedown=i,c.ontouchstart=i,e[0].appendChild(c)}(e,t,l,a,n,r)}function ae(e){pe(e,"linear")}function ne(e){pe(e,"ease-out")}function re(e){ge(e,0)}function ie(e){ge(e,1)}function ce(e,t){me(e,"translateX("+t+"px)")}function se(e,t){me(e,"translateY("+t+"px)")}function fe(e,t,l){me(e,"translate("+t+"px,"+l+"px)")}function he(e,t){me(e,"scaleX("+t+")")}function oe(e,t){me(e,"scaleY("+t+")")}onload=function(){!function(){try{localStorage.setItem(i+"-check","check"),a=1}catch(e){}}(),function(){var e=ze("state");n=null===e||e.engineVersion!==ve||e.gameVersion!==ot?(v={unlockedLevels:1,from:null,to:{type:"title"},transitioning:!0},0):(v=e.state,e.beat),de("state")}(),e(),U(),onunload=ue,onkeydown=Y,onblur=X,onresize=qe};var ve=4;function ue(){Me("state",{engineVersion:ve,gameVersion:ot,state:v,beat:n})}function Me(e,t){if(a)try{return localStorage.setItem(i+"-"+e,JSON.stringify(t)),1}catch(e){}}function ze(e){if(a)try{var t=localStorage.getItem(i+"-"+e);if(null!==t)return JSON.parse(t)}catch(e){}return null}function de(e){if(a)try{return localStorage.removeItem(i+"-"+e),1}catch(e){}}function pe(e,t){Q(e).easing=t}function ge(e,t){j(e).opacity=""+t}function me(e,t){var l=j(e);"none"==l.transform?l.transform=t:l.transform+=" "+t}var ye,ke,be,He,we,Ve,xe,Te,Ae=[];function qe(){for(var e=innerWidth,t=innerHeight,l=0,a=Ae;l<a.length;l++){var n=a[l],r=e/n[2],c=t/n[3],i=Math.min(r,c),s=e/i,f=t/i;n[1].style.transform="scale("+i+")";var h=Math.min(s,n[4]);n[1].style.left=""+(s-h)*n[6]*i,n[1].style.width=""+h,n[0].style.left=""+(n[2]/2+(h-n[2])*n[6]);var o=Math.min(f,n[5]);n[1].style.top=""+(f-o)*n[7]*i,n[1].style.height=""+o,n[0].style.top=""+(n[3]/2+(o-n[3])*n[7])}}function Se(e,t){var l=P(e);t+=3;var a=55*Math.pow(2,t/12);ke.frequency.setValueAtTime(a,l),be.frequency.setValueAtTime(a,l),He.frequency.setValueAtTime(2e3,l),He.frequency.linearRampToValueAtTime(500,l+.1),we.gain.setValueAtTime(1,l),we.gain.linearRampToValueAtTime(.5,l+.15)}function De(e){var t=P(e);we.gain.setValueAtTime(0,t)}function Ce(e,t){var l=P(e);Ve.gain.setValueAtTime(.4,l),Ve.gain.linearRampToValueAtTime(0,l+t)}function Le(e){var t=P(e);xe.frequency.setValueAtTime(200,t),Te.gain.setValueAtTime(1,t);var l=t+.1;xe.frequency.linearRampToValueAtTime(0,l),Te.gain.linearRampToValueAtTime(0,l)}var Re,Oe,Be,Ge,Ee,Fe,Ie,je=[];function Ke(e,t,l){var a=P(e);l+=3;var n=220*Math.pow(2,l/12);je[t][0].frequency.setValueAtTime(n,a),je[t][1].frequency.setValueAtTime(n,a),je[t][2].gain.setValueAtTime(.1,a)}function Qe(e,t){var l=P(e);je[t][2].gain.setValueAtTime(0,l)}function Je(e,t){var l=P(e),a=440*Math.pow(2,t/12);Re.frequency.setValueAtTime(a,l),Oe.gain.setValueAtTime(2.4,l)}function Ne(e){var t=P(e);Be.gain.setValueAtTime(1,t),Ge.frequency.setValueAtTime(2e3,t),Fe.gain.setValueAtTime(1,t),Ee.frequency.setValueAtTime(100,t),Be.gain.linearRampToValueAtTime(.4,t+.1),Be.gain.linearRampToValueAtTime(0,t+.2),Ge.frequency.linearRampToValueAtTime(1e3,t+.15),Fe.gain.linearRampToValueAtTime(0,t+.08),Ee.frequency.linearRampToValueAtTime(0,t+.08)}var We={a:[15,23,'path fill="#fff" d="M2 1l1 1h9l1-1zM1 2l1 1v8H1zM3 11h4v1H3zM2 12v8l-1 1v-9zM13 20l1 1v-9h-1zM13 11V3l1-1v9zM8 11h4v1H8z"/'],b:[15,23,'path fill="#fff" d="M2 1l1 1h9l1-1zM7 3h1v7H7zM2 22l1-1h9l1 1zM13 20l1 1v-9h-1zM13 11V3l1-1v9zM8 11h4v1H8zM7 13h1v7H7z"/'],c:[15,23,'path fill="#fff" d="M2 1l1 1h9l1-1zM1 2l1 1v8H1zM2 12v8l-1 1v-9zM2 22l1-1h9l1 1z"/'],d:[15,23,'path fill="#fff" d="M2 1l1 1h9l1-1zM7 3h1v7H7zM2 22l1-1h9l1 1zM13 20l1 1v-9h-1zM13 11V3l1-1v9zM7 13h1v7H7z"/'],e:[15,23,'path fill="#fff" d="M2 1l1 1h9l1-1zM1 2l1 1v8H1zM3 11h4v1H3zM2 12v8l-1 1v-9zM2 22l1-1h9l1 1z"/'],f:[15,23,'path fill="#fff" d="M2 1l1 1h9l1-1zM1 2l1 1v8H1zM3 11h4v1H3zM2 12v8l-1 1v-9zM8 11h4v1H8z"/'],g:[15,23,'path fill="#fff" d="M2 1l1 1h9l1-1zM1 2l1 1v8H1zM2 12v8l-1 1v-9zM2 22l1-1h9l1 1zM13 20l1 1v-9h-1zM8 11h4v1H8z"/'],h:[15,23,'path fill="#fff" d="M1 2l1 1v8H1zM3 11h4v1H3zM2 12v8l-1 1v-9zM13 20l1 1v-9h-1zM13 11V3l1-1v9zM8 11h4v1H8z"/'],i:[15,23,'path fill="#fff" d="M2 1l1 1h9l1-1zM7 3h1v7H7zM2 22l1-1h9l1 1zM7 13h1v7H7z"/'],j:[15,23,'path fill="#fff" d="M2 22l1-1h9l1 1zM13 20l1 1v-9h-1zM13 11V3l1-1v9z"/'],k:[15,23,'path fill="#fff" d="M1 2l1 1v8H1zM3 11h4v1H3zM9 10l2-7h1l-2 7zM2 12v8l-1 1v-9zM9 13l2 7h1l-2-7z"/'],l:[15,23,'path fill="#fff" d="M1 2l1 1v8H1zM2 12v8l-1 1v-9zM2 22l1-1h9l1 1z"/'],m:[15,23,'path fill="#fff" d="M1 2l1 1v8H1zM9 10l2-7h1l-2 7zM2 12v8l-1 1v-9zM13 20l1 1v-9h-1zM13 11V3l1-1v9zM6 10L4 3H3l2 7z"/'],n:[15,23,'path fill="#fff" d="M1 2l1 1v8H1zM2 12v8l-1 1v-9zM13 20l1 1v-9h-1zM13 11V3l1-1v9zM6 10L4 3H3l2 7zM9 13l2 7h1l-2-7z"/'],o:[15,23,'path fill="#fff" d="M2 1l1 1h9l1-1zM1 2l1 1v8H1zM2 12v8l-1 1v-9zM2 22l1-1h9l1 1zM13 20l1 1v-9h-1zM13 11V3l1-1v9z"/'],p:[15,23,'path fill="#fff" d="M2 1l1 1h9l1-1zM1 2l1 1v8H1zM3 11h4v1H3zM2 12v8l-1 1v-9zM13 11V3l1-1v9zM8 11h4v1H8z"/'],q:[15,23,'path fill="#fff" d="M2 1l1 1h9l1-1zM1 2l1 1v8H1zM2 12v8l-1 1v-9zM2 22l1-1h9l1 1zM13 20l1 1v-9h-1zM13 11V3l1-1v9zM9 13l2 7h1l-2-7z"/'],r:[15,23,'path fill="#fff" d="M2 1l1 1h9l1-1zM1 2l1 1v8H1zM3 11h4v1H3zM2 12v8l-1 1v-9zM13 11V3l1-1v9zM8 11h4v1H8zM9 13l2 7h1l-2-7z"/'],s:[15,23,'path fill="#fff" d="M2 1l1 1h9l1-1zM1 2l1 1v8H1zM3 11h4v1H3zM2 22l1-1h9l1 1zM13 20l1 1v-9h-1zM8 11h4v1H8z"/'],t:[15,23,'path fill="#fff" d="M2 1l1 1h9l1-1zM7 3h1v7H7zM7 13h1v7H7z"/'],u:[15,23,'path fill="#fff" d="M1 2l1 1v8H1zM2 12v8l-1 1v-9zM2 22l1-1h9l1 1zM13 20l1 1v-9h-1zM13 11V3l1-1v9z"/'],v:[15,23,'path fill="#fff" d="M1 2l1 1v8H1zM9 10l2-7h1l-2 7zM2 12v8l-1 1v-9zM6 13l-2 7H3l2-7z"/'],w:[15,23,'path fill="#fff" d="M1 2l1 1v8H1zM2 12v8l-1 1v-9zM13 20l1 1v-9h-1zM13 11V3l1-1v9zM9 13l2 7h1l-2-7zM6 13l-2 7H3l2-7z"/'],x:[15,23,'path fill="#fff" d="M9 10l2-7h1l-2 7zM6 10L4 3H3l2 7zM9 13l2 7h1l-2-7zM6 13l-2 7H3l2-7z"/'],y:[15,23,'path fill="#fff" d="M9 10l2-7h1l-2 7zM7 13h1v7H7zM6 10L4 3H3l2 7z"/'],z:[15,23,'path fill="#fff" d="M2 1l1 1h9l1-1zM9 10l2-7h1l-2 7zM2 22l1-1h9l1 1zM6 13l-2 7H3l2-7z"/'],0:[15,23,'path fill="#fff" d="M2 1l1 1h9l1-1zM1 2l1 1v8H1zM9 10l2-7h1l-2 7zM2 12v8l-1 1v-9zM2 22l1-1h9l1 1zM13 20l1 1v-9h-1zM13 11V3l1-1v9zM6 13l-2 7H3l2-7z"/'],1:[15,23,'path fill="#fff" d="M9 10l2-7h1l-2 7zM13 20l1 1v-9h-1zM13 11V3l1-1v9z"/'],2:[15,23,'path fill="#fff" d="M2 1l1 1h9l1-1zM3 11h4v1H3zM2 12v8l-1 1v-9zM2 22l1-1h9l1 1zM13 11V3l1-1v9zM8 11h4v1H8z"/'],3:[15,23,'path fill="#fff" d="M2 1l1 1h9l1-1zM2 22l1-1h9l1 1zM13 20l1 1v-9h-1zM13 11V3l1-1v9zM8 11h4v1H8z"/'],4:[15,23,'path fill="#fff" d="M1 2l1 1v8H1zM3 11h4v1H3zM13 20l1 1v-9h-1zM13 11V3l1-1v9zM8 11h4v1H8z"/'],5:[15,23,'path fill="#fff" d="M2 1l1 1h9l1-1zM1 2l1 1v8H1zM3 11h4v1H3zM2 22l1-1h9l1 1zM13 20l1 1v-9h-1zM8 11h4v1H8z"/'],6:[15,23,'path fill="#fff" d="M2 1l1 1h9l1-1zM1 2l1 1v8H1zM3 11h4v1H3zM2 12v8l-1 1v-9zM2 22l1-1h9l1 1zM13 20l1 1v-9h-1zM8 11h4v1H8z"/'],7:[15,23,'path fill="#fff" d="M2 1l1 1h9l1-1zM13 20l1 1v-9h-1zM13 11V3l1-1v9z"/'],8:[15,23,'path fill="#fff" d="M2 1l1 1h9l1-1zM1 2l1 1v8H1zM3 11h4v1H3zM2 12v8l-1 1v-9zM2 22l1-1h9l1 1zM13 20l1 1v-9h-1zM13 11V3l1-1v9zM8 11h4v1H8z"/'],9:[15,23,'path fill="#fff" d="M2 1l1 1h9l1-1zM1 2l1 1v8H1zM3 11h4v1H3zM2 22l1-1h9l1 1zM13 20l1 1v-9h-1zM13 11V3l1-1v9zM8 11h4v1H8z"/'],",":[15,23,'path fill="#fff" d="M6 13l-2 7H3l2-7z"/']};function Xe(e,t){for(var l=-7.5*(t.length-1),a=0;a<t.length;a++){ce(te(e,r),l);var n=t.charAt(a);" "!=n&&ce(te(e,We[n]),l),l+=15}}var Ye={north:270,east:0,south:90,west:180},Ue={north:"south",east:"west",south:"north",west:"east"},Pe={north:0,east:1,south:0,west:-1},Ze={north:-1,east:0,south:1,west:0};function $e(e,t,l){var a=-16*t.options.length,n=ee(e);Xe(n,t.title),se(n,a),l&&(re(n),he(n,.1),ne(n),_(120),ie(n),he(n,10)),a+=32;for(var r=0,c=t.options;r<c.length;r++){var i=c[r],s=ee(e);se(s,a),ce(te(s,h),-109);var f=te(s,h);ce(f,109),he(f,-1),Xe(s,i.label),l&&(re(s),he(s,.1),ne(s),_(120),ie(s),he(s,10)),a+=32}}function _e(e,t){for(var l=-16*(t.options.length-1),a=0,n=t.options;a<n.length;a++)le(e,-109,l,218,32,n[a].callback),l+=32}var et=[{name:"get in,get it,get out",mcguffin:[-1,-1],switches:[],rooms:[[0,-1],[0,0],[0,1],[1,1]],goal:[1,1,"east"],ledges:[],stairs:[],openDoors:[],closedDoors:[],corridors:[[-1,-1,"east"],[0,-1,"south"],[0,0,"south"],[0,1,"east"]]},{name:"ledgendary",mcguffin:[-1,0],switches:[],rooms:[[0,0],[0,-1],[1,-1],[0,1],[1,1],[1,0]],goal:[1,0,"east"],ledges:[[1,-1,"west"],[0,1,"east"]],stairs:[],openDoors:[],closedDoors:[],corridors:[[-1,0,"east"],[0,0,"north"],[1,0,"north"],[0,0,"south"],[1,0,"south"]]},{name:"adoorable",mcguffin:[-1,0],switches:[[1,-1]],rooms:[[1,0],[0,0]],goal:[1,0,"east"],ledges:[],stairs:[],openDoors:[],closedDoors:[[1,0,"west"]],corridors:[[1,0,"north"],[0,0,"west"]]}],tt=[{facing:"north",keycode:"KeyW",text:"w",x:-2,y:-2},{facing:"east",keycode:"KeyD",text:"d",x:-1,y:-1},{facing:"south",keycode:"KeyS",text:"s",x:-2,y:-1},{facing:"west",keycode:"KeyA",text:"a",x:-3,y:-1}];function lt(e,t){fe(t,e[0]*ut,e[1]*ut)}function at(e,t){lt(e,t),function(e,t){me(e,"rotate("+t+"deg)")}(t,Ye[e[2]])}function nt(e){return{title:"nice job",options:[{label:"next",callback:function(){e.level==et.length-1?bt({type:"credits"}):Ht(e.level+1)}},{label:"retry",callback:function(){Ht(e.level)}},{label:"level select",callback:function(){bt({type:"levelSelect"})}}]}}function rt(e,t,l,a){!function(e,t,l){for(var a=0,n=t.rooms;a<n.length;a++)l(n[a],S);for(var r=0,c=t.switches;r<c.length;r++)l(c[r],"a"==e.switch?R:O)}(t,l,(function(t,l){var n=te(e,l);lt(t,n),a(t,n)}))}function it(e,t,l,a){!function(e,t,l){l(t.goal,m);for(var a=0,n=t.ledges;a<n.length;a++)l(n[a],b);for(var r=0,c=t.stairs;r<c.length;r++)l(c[r],H);for(var i=0,s=t.openDoors;i<s.length;i++)l(s[i],"a"==e.switch?p:d);for(var f=0,h=t.closedDoors;f<h.length;f++)l(h[f],"a"==e.switch?d:p);for(var o=0,v=t.corridors;o<v.length;o++)l(v[o],g)}(t,l,(function(t,l){var n=te(e,l);at(t,n),a(t,n)}))}function ct(e,t,l,a){if("entering"==t.state){var n=te(e,f);at(l.goal,n)}"taken"==t.state&&(n=te(e,k),at(l.goal,n));var r=ee(e);at(t,r),"entering"==t.state&&(n=te(e,s),at(l.goal,n)),"taken"==t.state&&(n=te(e,y),at(l.goal,n));var c=te(r,a);return function(){ae(r);for(var e=0;e<2;e++)_(100),oe(c,-1),_(100),oe(c,-1);return ce(r,ut),function(){if(t[0]+=Pe[t[2]],t[1]+=Ze[t[2]],t.walking=!1,"entering"==t.state&&(t.state="finding"),t[0]!=l.mcguffin[0]||t[1]!=l.mcguffin[1]){for(var e=0,a=l.switches;e<a.length;e++){var n=a[e];if(t[0]==n[0]&&t[1]==n[1])return void(t.switch="a"==t.switch?"b":"a")}for(var r=0,c=l.rooms;r<c.length;r++)if(n=c[r],t[0]==n[0]&&t[1]==n[1])return;t.state="won",t.menuState="opening",v.unlockedLevels=Math.min(et.length,Math.max(v.unlockedLevels,t.level+2))}else"finding"==t.state&&(t.state="taking")}}}function st(e,t){return e[0]==t[0]&&e[1]==t[1]&&e[2]==t[2]}function ft(e){if(("finding"==e.state||"taken"==e.state)&&!e.walking)return 1}function ht(e,t){if(ft(t))for(var l=0,a=tt;l<a.length;l++){var n=a[l],r=ee(e);fe(r,dt+32*n.x+16,pt+32*n.y+16),ce(te(r,h),-15);var c=te(r,h);ce(c,15),he(c,-1),Xe(r,n.text)}}var ot=13,vt=140,ut=42,Mt=7*ut,zt=5*ut,dt=Mt/2,pt=zt/2,gt=2*Mt,mt=2*zt,yt=[[672,504,'path d="M-3-3L98-5 75 508l-78-2z"/'],[672,504,'path d="M95-4h89l-35 512-78-1z"/'],[672,504,'path d="M181-2l81-1-41 510h-74z"/'],[672,504,'path d="M260-3h81l-52 509h-72z"/'],[672,504,'path d="M339-2l76-1-52 510h-77z"/'],[672,504,'path d="M412-2l76 1-51 509-77-1z"/'],[672,504,'path d="M485-3h76l-48 510-79 1z"/'],[672,504,'path d="M559-3h72l-37 511-85-1z"/'],[672,504,'path d="M591 507l84 1 2-511h-51z"/']],kt=30;function bt(e){v.from=v.to,v.to=e,v.transitioning=!0}function Ht(e){var t=et[e];bt({type:"game",level:e,switch:"a",0:t.goal[0]+Pe[t.goal[2]],1:t.goal[1]+Ze[t.goal[2]],2:Ue[t.goal[2]],walking:!0,state:"entering",menuState:"closed"})}function wt(){var e=n%80,t=(e-e%4)/4;switch(e){case 16:case 20:case 24:case 32:case 36:case 40:case 48:case 64:Se(0,2);break;case 17:case 21:case 25:case 33:case 37:case 41:case 49:case 65:De(0),Se(.5,2);break;case 18:case 22:case 26:case 34:case 38:case 42:case 50:case 66:De(0),Se(.25,2),De(.75);break;case 19:case 23:case 27:case 35:case 39:case 43:case 51:case 67:Se(0,2),Se(.25,2),De(.5);break;case 28:case 44:case 52:case 60:case 68:case 76:Se(0,3);break;case 29:case 45:case 53:case 61:case 69:case 77:De(0),Se(.5,3);break;case 30:case 46:case 54:case 70:De(0),Se(.25,3),De(.75);break;case 31:case 47:case 55:case 71:Se(0,3),Se(.25,3),De(.5);break;case 56:case 72:Se(0,7);break;case 57:case 73:De(0),Se(.5,7);break;case 58:case 74:De(0),Se(.25,7),De(.75);break;case 59:case 75:Se(0,7),Se(.25,7),De(.5);break;case 62:case 78:De(0),Se(.25,10),De(.75);break;case 63:case 79:Se(0,10),Se(.25,10),De(.5)}switch(e){case 0:Se(0,2),Le(0);break;case 4:case 12:Se(0,3),Le(0);break;case 8:Se(0,7),Le(0);break;case 14:Se(0,10),Ce(0,.1);break;case 15:Ce(0,.05),Ce(.5,.05),Ce(.75,.05);break;case 17:case 21:case 25:case 29:case 33:case 41:case 45:case 49:case 57:case 65:case 73:case 77:Ne(0),Ce(.5,.1);break;case 18:case 22:case 26:case 30:case 34:case 42:case 50:case 58:case 66:case 74:Ce(0,.05),Ce(.25,.05),Le(.5);break;case 19:case 23:case 27:case 31:case 35:case 43:case 51:case 59:case 67:case 75:Ne(0),Le(.25),Ce(0,.1),Ce(.5,.05),Ce(.75,.05);break;case 37:case 53:case 61:case 65:case 69:Ne(0),Ce(0,.1),Ce(.5,.05),Ce(.75,.05);break;case 38:case 54:case 70:Le(.5),Ce(0,.1),Ce(.5,.05),Ce(.75,.05);break;case 39:case 55:case 71:Ne(0),Le(.25),Le(.5),Le(.75),Ce(0,.1),Ce(.25,.05),Ce(.5,.05),Ce(.75,.05);break;case 46:case 78:Ce(0,.05),Ce(.25,.05),Le(.5),Ce(.5,.1);break;case 47:case 79:Le(.25),Ce(.25,.1);break;case 62:Le(.5),Ne(.75),Ce(0,.1),Ce(.5,.05),Ce(.75,.05);break;case 63:Le(0),Le(.25),Le(.5),Ne(.75),Ce(0,.05),Ce(.25,.05),Ce(.5,.1)}16<=e&&!(e%4)&&(Le(0),Ce(0,.1),Ce(.5,.05),Ce(.75,.05));var l=0;switch(t){case 1:case 5:case 7:case 9:case 11:case 13:case 17:l=1;break;case 6:case 10:l=2;break;case 3:case 15:case 19:l=4;break;case 2:case 14:case 18:l=5}switch(e%4){case 0:case 3:Je(0,l+5),Je(.25,l+8),Je(.5,l+13),Je(.75,l+17);break;case 1:Je(0,l+20),Je(.25,l+25),Je(.5,l+5),Je(.75,l+8);break;case 2:Je(0,l+13),Je(.25,l+17),Je(.5,l+20),Je(.75,l+25)}if(e<16||48<=e)switch(e%8){case 0:Ke(0,0,9),Ke(.5,0,19),Ke(0,1,5),Ke(.5,1,14);break;case 1:Ke(0,0,14),Ke(.5,0,10),Ke(0,1,9),Ke(.5,1,5);break;case 2:Ke(0,0,7),Qe(.5,0),Ke(0,1,2),Ke(.5,1,-2);break;case 3:Ke(0,0,10),Ke(.5,0,14),Ke(0,1,5),Ke(.5,1,7);break;case 4:Ke(0,0,10),Ke(.5,0,19),Ke(0,1,3),Ke(.5,1,15);break;case 5:Qe(0,0),Ke(.5,0,15),Ke(0,1,10),Ke(.5,1,5);break;case 6:Qe(0,0),Ke(.5,0,10),Ke(0,1,-2),Ke(.5,1,2);break;case 7:Qe(0,0),Ke(.5,0,14),Ke(0,1,7),Ke(.5,1,10)}else Qe(0,0),Qe(0,1)}function Vt(){function e(e){t.push({label:et[e].name,callback:function(){Ht(e)}})}for(var t=[],l=0;l<v.unlockedLevels;l++)e(l);return{title:"level select",options:t}}</script>