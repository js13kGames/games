<!doctype html><link rel=icon href=data:,><meta name=viewport content="width=device-width"><script src=/2025/webxr/aframe.js></script><title>Catway XR - js13kGames 2025</title><script type=module>(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();function c(t,e,s){const n=typeof t=="string"?document.createElement(t):t;for(const[i,o]of Object.entries(e||{}))n.setAttribute(i,o);for(const[i,o]of Object.entries({}))n.style.setProperty(i,""+o);return n}function l(t,e,s){const n=t.el.sceneEl.components.appstate;if(typeof e=="object"){t.el.sceneEl.setAttribute("appstate",e);return}const i=e?n.data[e]:n;return s&&(t.el.sceneEl.addEventListener("catway:"+e,o=>{s(o.detail)}),s(i)),i}function v(t="0 0 0",e="enter"){return{["animation__"+e]:{property:"scale",from:t,to:"1 1 1",easing:"easeInCubic",dur:800}}}function q(t=1,e="enter"){return{["animation__"+e]:{property:"material.opacity",from:0,to:t,easing:"easeInCubic",dur:800}}}class x{p;d;constructor(e){this.p=e.p,this.d=e.d}equals(e){return this.p==e.p&&this.d==e.d}}const U=0,H=1,N=2,Y=3,B=4,G=5,S=[U,H,N,Y,B,G],O="p",X="x",y="-",F={[O]:"#6a0",[X]:"#60a"};function k(t){const e=[[1,0,0],[0,1,0],[0,0,1],[-1,0,0],[0,-1,0],[0,0,-1]];return new THREE.Vector3(...e[t])}function g(t){return(t+3)%6}function j(t,e){return e==t||e==g(t)}function D(t){return new THREE.Vector3(...t.split(" ").map(Number))}function _(t,e){return new x({p:t,d:e})}class W{cat;pillow;size;cubes;constructor(e){this.cat=new x(e.cat),this.pillow=new x(e.pillow),this.cubes=e.cubes,this.size=Object.keys(e.cubes||{}).reduce((s,n)=>{const i=n.split(" ").map(Number);return[Math.max(s[0],i[0]),Math.max(s[1],i[1]),Math.max(s[2],i[2])]},[0,0,0])}vec3_inworld(e){const s=this.size;return e.x>=0&&e.y>=0&&e.z>=0&&e.x<=s[0]&&e.y<=s[1]&&e.z<=s[2]}next(e,s,n=1){const i=D(e),o=k(s).multiplyScalar(n);if(i.add(o),this.vec3_inworld(i))return`${i.x} ${i.y} ${i.z}`}face(e){return this.cubes[e.p][e.d]}isValidFace(e,s=!1){const n=this;return!(!(e.p in n.cubes)||n.next(e.p,e.d)in n.cubes||n.face(e)==y||s&&n.face(e)!=O)}die(e){return!this.isValidFace(e,!0)}forEachFace(e,s,n=!1){for(const i of S){const o=k(i),a=this.face(new x({p:e,d:i}));if(!(!n&&a==y)&&s(a,i,o))return}}forEachPositions(e,s,n){const i=D(e),o=k(s);for(i.add(o);this.vec3_inworld(i);){const a=`${i.x} ${i.y} ${i.z}`;if(n(a))return a;i.add(o)}}forEachMove(e,s){const n=this,i=[n.move_orbit,n.move_walk,n.move_jump,n.move_sidejump];for(const o of S)for(const a in i){const r=i[a].bind(n)(e,o);r&&s(r,a)}}move_orbit(e,s){const n=this;if(!n.isValidFace(e,!0)||j(e.d,s))return;const i=_(e.p,s);if(n.isValidFace(i))return i}move_walk(e,s){const n=this;if(!n.isValidFace(e,!0))return;const i=n.next(e.p,s);if(!i)return;const o=_(i,e.d);if(n.isValidFace(o))return o}move_jump(e,s){const n=this;if(!n.isValidFace(e,!0)||s!=e.d)return;let i;return n.forEachPositions(e.p,s,o=>{if(o in n.cubes){if(n.cubes[o][g(s)]!=y)return i=_(o,g(s)),!0;if(n.cubes[o][s]!=y)return!0}}),i}move_sidejump(e,s){const n=this;if(!n.isValidFace(e,!0)||j(e.d,s))return;const i=n.next(e.p,e.d);let o;return i&&n.forEachPositions(i,s,a=>{if(a in n.cubes){if(n.cubes[a][g(s)]!=y)return o=_(a,g(s)),!0;if(n.cubes[a][s]!=y)return!0}}),o}}AFRAME.registerComponent("appstate",{sceneOnly:!0,schema:{page:{default:"hello"},cat:{default:""},music_on:{default:!0},sfx_on:{default:!0},stereofx:{default:"0"},level:{default:1},maxlvl:{default:0}},init:function(){this.leveldata=null;const t=localStorage.getItem("js13k_catway");t&&c(this.el,{appstate:t})},update(t){for(const[e,s]of Object.entries(this.data))t[e]!=this.data[e]&&this.el.emit("catway:"+e,s);localStorage.setItem("js13k_catway",AFRAME.utils.styleParser.stringify(this.data))},setLevel:function(t){this.leveldata=new W(t),this.el.emit("catway:leveldata",this.leveldata)}});function $(t){let e=0;return[...t].map(s=>{if(s==" ")return e+=1,null;const n=s.charCodeAt(0),i=n>90?1:2,o=i<2?n-97+45:n-65+45;return e+=i,{f:440*Math.pow(2,(o-69)/12),d:i,td:e-i}}).filter(s=>s!==null)}class Q{ctx;loops_id;loops_en;constructor(){this.ctx=new(window.AudioContext||window.webkitAudioContext),this.loops_id={},this.loops_en={}}playTone(e){const{frequency:s=440,duration:n=.1,type:i="triangle",volume:o=.5,startTime:a=this.ctx.currentTime,attack:r=.01,release:p=.05,lowpass:d}=e,h=this.ctx.createOscillator(),f=this.ctx.createGain(),m=this.ctx.createBiquadFilter();h.type=i,h.frequency.setValueAtTime(s,a),f.gain.setValueAtTime(1e-4,a),f.gain.exponentialRampToValueAtTime(o,a+r),f.gain.setValueAtTime(o,a+n-p),f.gain.exponentialRampToValueAtTime(1e-4,a+n),m.type="lowpass",m.frequency.value=d||100,m.Q.value=1,h.connect(f),d?(f.connect(m),m.connect(this.ctx.destination)):f.connect(this.ctx.destination),h.start(a),h.stop(a+n)}playSeq(e){const s=this.ctx.currentTime;for(const n of e)this.playTone({...n,startTime:s+(n.startTime||0)})}play(e){const s=Array.isArray(e.opts)?e.opts:[e.opts],n=e.seq[Math.floor(Math.random()*e.seq.length)],i=s.reduce((a,r)=>Math.max(a,r.duration||.1),0);let o=0;for(const a of s)this.playSeq($(n).map(r=>{const p=(a.startTime||0)+r.td*i,d=i*r.d;return o=Math.max(o,p+d),{...a,frequency:r.f,duration:d,startTime:p}}));return e.loop&&this.loops_en[e.loop]&&(this.loops_id[e.loop]=setTimeout(()=>this.play(e),1e3*o)),o}playLoop(e,s){this.loops_en[e]=!0,this.play({...s,loop:e})}stopLoop(e){this.loops_en[e]=!1,clearTimeout(this.loops_id[e])}DIE={seq:["PhfdA"],opts:{startTime:.15,volume:.4}};WIN={seq:["PprtY"],opts:{startTime:.15,volume:.4}};MOVE={seq:["M"],opts:{duration:.15,type:"sine",attack:.05,release:.08}};CANT_MOVE={seq:["fF"],opts:{volume:.4}};MUSIC1={seq:"adhm".split(""),opts:[{duration:3,attack:.1,release:2.8,volume:.1,lowpass:300},{duration:2.5,attack:.1,release:2.4,volume:.1,lowpass:300,type:"sine"}]};MUSIC2={seq:this.MUSIC1.seq,opts:[{duration:2.5,attack:.1,release:2.4,volume:.1,lowpass:300,startTime:.5},{duration:3,attack:.1,release:2.4,volume:.1,lowpass:300,startTime:.5,type:"sine"}]}}const L=[{cat:{p:"0 0 0",d:2},pillow:{p:"2 0 0",d:2},cubes:{"0 0 0":"--p---","1 0 0":"--p---","2 0 0":"--p---"}},{cat:{p:"0 0 0",d:2},pillow:{p:"2 0 0",d:1},cubes:{"0 0 0":"--p---","1 0 0":"-pp---","2 0 0":"-p----"}},{cat:{p:"0 1 1",d:2},pillow:{p:"0 1 1",d:5},cubes:{"0 1 1":"--p--p","1 1 1":"-pp---","2 1 1":"-p---p","2 0 1":"-----p","0 0 1":"-----p","1 1 0":"-----x","1 0 1":"x--x-p"}},{cat:{p:"0 0 0",d:2},pillow:{p:"3 3 1",d:1},cubes:{"0 0 0":"--p---","1 0 0":"-pp---","1 3 0":"--p-p-","3 3 1":"-p-p--"}},{cat:{p:"0 0 0",d:2},pillow:{p:"3 0 0",d:2},cubes:{"0 0 0":"p-p---","2 0 0":"-pp-pp","3 0 0":"-pp-pp","6 0 0":"---p--","5 2 0":"---pp-","1 2 0":"p-----"}},{cat:{p:"0 1 0",d:2},pillow:{p:"2 1 0",d:2},cubes:{"0 0 0":"--p-p-","1 0 0":"--x-p-","2 0 0":"--p-p-","0 1 0":"--pp-p","1 1 0":"-xx--x","2 1 0":"p-p--p"}},{cat:{p:"0 1 0",d:2},pillow:{p:"0 5 0",d:3},cubes:{"0 1 0":"pxpppp","0 5 0":"xppppp","0 0 4":"p-pp-p","4 1 0":"ppppxp","4 5 0":"pppppp","4 0 4":"pppppp","0 4 4":"pppppp","4 4 4":"pp-pp-"}},{cat:{p:"1 1 0",d:2},pillow:{p:"4 6 1",d:4},cubes:{"1 1 0":"--p---","6 1 1":"---p--","5 4 1":"p---p-","5 3 5":"-----p","0 3 4":"p-----","1 0 4":"-p----","2 2 1":"--p---","7 2 2":"---p--","6 5 2":"----p-","6 4 6":"-----p","1 4 5":"p---p-","2 1 5":"pp-x--","3 1 1":"-pp-pp","4 1 1":"-p----","1 0 5":"-p----","4 6 1":"----p-"}},{cat:{p:"2 2 5",d:2},pillow:{p:"2 2 3",d:1},cubes:{"2 2 3":"pp-xp-","0 3 3":"ppppxp","4 2 3":"pppxpp","4 2 6":"-----p","5 2 6":"-----p","4 3 1":"---pp-","5 2 0":"---p--","5 2 1":"---p--","2 2 5":"pppppp","2 3 1":"pppppp","0 3 0":"xppppp","1 0 3":"xpxppp","3 0 3":"pxpppp","1 0 1":"pxpppp","0 1 0":"-pp---","0 0 2":"-p----","0 0 4":"-p----","5 1 1":"---p--","5 1 2":"-p-p--","5 0 1":"---p--","5 0 3":"---p--","5 0 4":"---p--","5 1 4":"---p--","1 2 2":"--p---"}},{cat:{p:"1 3 2",d:0},pillow:{p:"0 0 0",d:1},cubes:{"4 2 3":"-px--p","0 3 3":"p-----","0 4 3":"p-----","4 3 1":"--p-x-","4 2 0":"--p---","6 3 2":"---px-","1 3 2":"pxxxpx","1 1 3":"-p----","1 2 0":"--p---","6 2 1":"--xp--","5 2 5":"-----p","5 3 4":"-----p","4 2 5":"-----p","4 5 4":"----p-","4 4 2":"--p---","1 3 5":"-----p","3 2 3":"---p-x","4 0 1":"pppxpp","0 0 0":"ppxppx","2 0 3":"-p----","2 0 2":"pp-p--","0 1 5":"-----p","0 0 5":"-----p","4 3 4":"x-xx-x","2 3 1":"----p-","2 0 0":"-pp---","3 0 4":"---p--","3 1 4":"---x--","3 2 4":"x--x--","2 1 4":"-----p","0 0 2":"pp----"}},{cat:{p:"1 0 3",d:1},pillow:{p:"5 0 3",d:1},cubes:{"1 0 3":"-p----","5 0 3":"-p----","1 0 5":"p----p","1 1 5":"-----p","1 0 1":"-pp---","3 0 2":"-p-p--","4 0 2":"pp----","4 0 1":"-p----","3 4 2":"--p-p-","3 5 2":"p-----","2 0 4":"-p----","2 0 3":"-p----","3 0 3":"-p----","2 0 7":"p----p","2 5 3":"--p-p-","2 6 6":"----p-","2 3 3":"-pp-xp","5 2 4":"-pp--x","5 3 3":"--p---","5 0 7":"---p-x","5 1 7":"-----p","5 2 7":"-----x","5 3 7":"-----p","5 4 7":"-----p","5 1 1":"-pp---","5 4 2":"-xp--p","5 3 2":"--x-xp","7 3 3":"p-pp-p","6 3 7":"-----p","7 3 7":"xxxxxx","8 3 7":"-----p","9 3 7":"-----p","0 1 3":"p-x---","8 0 5":"xpxpx-","8 0 4":"xp-px-","8 0 3":"xp-px-","8 0 2":"xp-pxx","8 0 1":"---p--","8 1 1":"---p--","8 2 1":"---p--","5 3 0":"--pp--","0 3 4":"p----p","0 4 4":"x-----","0 4 3":"p---x-","0 3 0":"pxp---","2 0 0":"--p---","3 0 0":"x-p---","9 5 4":"--xp--","9 4 4":"--x---","9 3 4":"--xp--","3 5 7":"----p-","2 4 7":"p-----","9 3 2":"---p--","9 4 2":"---p--","9 5 2":"---p--","9 4 7":"---p-p","8 4 1":"--p---","3 2 1":"p-----"}},{cat:{p:"0 0 0",d:2},pillow:{p:"3 0 1",d:3},cubes:{"0 0 0":"--p---","3 0 1":"---p--"}}],J={1:[`This box gives some tips!

Click on it to display the next message
or make it disappear.`,`The cat wants to sleep on its pillow.
Help it to find its cozy place.`,`The cat moves one square at a time.

Click on a legal destination to make it move.

Or hit C with a directional arrow
pressed on keyboard.

Or hit button A with a direction
set by joystick on gamepad.`],2:[`The world is in 3D, and the cat can
also walk on the sides.`,"Move around to see from other angles."],4:[`Of course the cat knows how to jump.
It can jump in any direction.`,`Click on a legal destination to make it jump.

Or hit X with a directional arrow
optionally pressed on keyboard.

Or hit button B with a direction
optionally set by joystick on gamepad.`],5:[`Some cubes are hollow, and the cat
can jump through them ;-)`],6:["Beware, those purple tiles are poisonous!"],7:[`Now you know everything about this universe.

Go explore it!`],12:[`It's the end of this mini game for js13k jam.

The 13k limit is almost reached,
with 1 byte left.

If you liked it, you are invited to visit the repo
on github, and submit new levels ;-)`]};AFRAME.registerSystem("a_switcher",{init:function(){this.added=[],this.sfx=!1,this.inner=c("a-entity",{id:"worldgrab"}),this.el.append(this.inner),this.el.addEventListener("loaded",this.on_loaded.bind(this)),this.el.addEventListener("catway:action:jump",this.on_jump.bind(this))},on_jump:function(){const t=l(this,"page");t=="hello"&&l(this,{page:"levels"}),t=="3dmode"&&l(this,{stereofx:0,page:"hello"}),t=="levels"&&l(this,{level:Math.min(l(this,"maxlvl")+1,L.length),page:"play"}),t=="play"&&this.el.querySelector("[g_tips]").emit("click")},on_loaded:function(){this.el.camera.focus=2,l(this,"stereofx",e=>c(this.el,{stereofx:e})),l(this,"page",this.on_page.bind(this)),l(this,"level",e=>{l(this).setLevel(L[e-1])});const t=e=>{this.sfx||(this.sfx=new Q,l(this,"music_on",s=>{s?(this.sfx.playLoop("1",this.sfx.MUSIC1),this.sfx.playLoop("2",this.sfx.MUSIC2)):(this.sfx.stopLoop("1"),this.sfx.stopLoop("2"))}))};this.el.addEventListener("pointerdown",t,{once:!0}),this.el.addEventListener("keydown",t,{once:!0})},on_page:function(t){for(const s of this.added)this.inner.removeChild(s);this.added=[];const e=c("a-entity",{["page_"+t]:"",position:"0 1 -0.6"});if(this.added.push(e),this.inner.append(e),t=="3dmode"&&(e.addEventListener("catway:page:next",s=>l(this,{page:"hello"})),e.addEventListener("catway:page:back",s=>l(this,{page:"hello"}))),t=="hello"&&(e.addEventListener("catway:page:next",s=>l(this,{page:"levels"})),e.addEventListener("catway:page:3D",s=>l(this,{page:"3dmode"}))),t=="levels"&&(c(e,{page_levels:Math.min(l(this,"maxlvl")+1,L.length)}),e.addEventListener("catway:page:next",s=>{l(this,{level:s.detail,page:"play"})}),e.addEventListener("catway:page:back",s=>l(this,{page:"hello"}))),t=="play"){const s=c("a-entity",{g_tips:"",position:"0 1 -0.29"});this.added.push(s),this.inner.append(s),setTimeout(i=>s.emit("tips",J[l(this,"level")]||[]),1e3);const n=i=>l(this,"sfx_on")&&this.sfx&&this.sfx.play(i);e.addEventListener("catway:page:back",i=>l(this,{page:"levels"})),e.addEventListener("catway:play:move",i=>n(this.sfx.MOVE)),e.addEventListener("catway:play:cantmove",i=>n(this.sfx.CANT_MOVE)),e.addEventListener("catway:play:win",i=>{e.querySelector(".cat a-plane").emit("spin"),n(this.sfx.WIN),l(this,{maxlvl:Math.max(l(this,"maxlvl"),l(this,"level"))}),setTimeout(o=>l(this,{page:l(this,"level")==L.length?"hello":"levels"}),500)}),e.addEventListener("catway:play:die",i=>{e.querySelector(".cat a-plane").emit("spin"),n(this.sfx.DIE),setTimeout(o=>e.emit("resetLevel"),500)})}}});AFRAME.registerComponent("cursor3d",{dependencies:["cursor"],init:function(){this.cursor=this.el.components.cursor;const t=this.cursor.onMouseMove,e=this.transform.bind(this);this.cursor.onMouseMove=function(s){const n={...s,type:s.type};if(n.type==="touchmove"||n.type==="touchstart"){const i=s.touches.item(0);n.touches={item:function(){const[o,a]=e(i.clientX,i.clientY);return{clientX:o,clientY:a}}}}else if(s.type=="mousemove"){const[i,o]=e(s.clientX,s.clientY);n.clientX=i,n.clientY=o}t.call(this.cursor,n)}},transform:function(t,e){const s=this.cursor.canvasBounds;let n=(t-s.left)/s.width,i=(e-s.top)/s.height;const o=this.el.sceneEl.systems.stereofx.data;if(!(o<2)){if(o<4)n=.25+n%.5;else if(o<6)n=n%.5*2;else if(o<8)n=n*2-.5,i=i%.5*2;else if(o<10)i=i%.5*2;else if(!(o<16)){if(o<19){const a=n;n=.25+n%.5,a<.5&&(o-15&1)==1&&(n=1-n),a>.5&&(o-15&2)==2&&(n=1-n)}}}return[n*s.width+s.left,i*s.height+s.top]}});AFRAME.registerComponent("fov-controls",{schema:{min:{default:10},max:{default:120}},init:function(){const t=this.el.getObject3D("camera"),e=i=>{t.fov=THREE.MathUtils.clamp(i,this.data.min,this.data.max),t.updateProjectionMatrix()};this.el.sceneEl.addEventListener("wheel",i=>e(t.fov+i.deltaY/20));let s;const n=i=>Math.hypot(i[0].clientX-i[1].clientX,i[0].clientY-i[1].clientY)/15;this.el.sceneEl.addEventListener("touchstart",i=>i.touches.length==2&&(s=t.fov+n(i.touches))),this.el.sceneEl.addEventListener("touchmove",i=>i.touches.length==2&&s&&e(s-n(i.touches))),this.el.sceneEl.addEventListener("touchend",i=>s=0)}});AFRAME.registerComponent("grabworld",{init:function(){this.grabbed=null},events:{gripdown:function(){this.grabbed=this.el.sceneEl.querySelector("#worldgrab"),this.grabbed&&this.el.object3D.attach(this.grabbed.object3D)},gripup:function(){this.grabbed&&(this.el.sceneEl.object3D.attach(this.grabbed.object3D),this.grabbed=null)}}});AFRAME.registerComponent("orbit-controls",{schema:{anchor:{type:"vec3"},distance:{default:2}},init:function(){this.rig=this.el.object3D,this.anchor=new THREE.Vector3().copy(this.data.anchor),this.isLeftDragging=!1,this.isRightDragging=!1,this.angles=new THREE.Vector2;const t=this.el.sceneEl.canvas;t.addEventListener("pointerdown",e=>{e.button===0&&(this.isLeftDragging=!0),e.button===2&&(this.isRightDragging=!0)}),t.addEventListener("pointerup",e=>{e.button===0&&(this.isLeftDragging=!1),e.button===2&&(this.isRightDragging=!1)}),t.addEventListener("pointermove",this.onMouseMove.bind(this)),t.addEventListener("dblclick",e=>{this.anchor=new THREE.Vector3().copy(this.data.anchor),this.angles.set(0,0),this.camupdate()}),t.addEventListener("contextmenu",e=>e.preventDefault()),this.camupdate()},onMouseMove:function(t){if(this.isLeftDragging&&(this.angles.add(new THREE.Vector2(.005*-t.movementY,.005*-t.movementX)),this.angles.x=THREE.MathUtils.clamp(this.angles.x,-Math.PI/2+.1,Math.PI/2-.1),this.camupdate()),this.isRightDragging){const e=this.rig.quaternion;this.anchor.addScaledVector(new THREE.Vector3(1,0,0).applyQuaternion(e),.005*-t.movementX),this.anchor.addScaledVector(new THREE.Vector3(0,1,0).applyQuaternion(e),.005*t.movementY)}this.camupdate()},camupdate:function(){const t=new THREE.Vector3(0,0,this.data.distance),e=new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(0,1,0),this.angles.y),s=new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(1,0,0),this.angles.x);t.applyQuaternion(e.multiply(s)),this.rig.position.copy(t).add(this.anchor),this.rig.lookAt(new THREE.Vector3().copy(this.rig.position).add(t))}});AFRAME.registerSystem("g_sky",{init:function(){this.sky=null;const t=this.el.sceneEl,e=c("canvas",{id:"tex_s",width:"512",height:"512"});t.querySelector("a-assets").append(e);const s=e.getContext("2d");if(s){s.fillStyle="black",s.fillRect(0,0,e.width,e.height);for(let i=0;i<150;i++){const o=Math.random()*e.width,a=Math.random()*e.height,r=Math.random()*1.5+.5;s.beginPath(),s.arc(o,a,r,0,Math.PI*2),s.fillStyle="#333",s.fill()}}const n=i=>{this.sky?.parentNode?.removeChild(this.sky),this.sky=c("a-sky",{src:"#tex_s",repeat:"20 15",geometry:"segmentsHeight: 4; segmentsWidth: 4"}),t.is("ar-mode")||(t.is("vr-mode")?t.append(this.sky):t.querySelector("[camera]").append(this.sky))};t.addEventListener("enter-vr",n),t.addEventListener("exit-vr",n),n()}});var A,V;function K(){return V||(V=1,A=THREE),A}var u=K();const C=function(t,e){const s=new u.Scene;s.add(new u.Mesh(new u.PlaneGeometry(2,2),new u.ShaderMaterial({uniforms:{tl:{value:t.bufferL.texture},tr:{value:t.bufferR.texture}},vertexShader:`varying vec2 vUv;void main(){vUv=vec2(uv.x,uv.y);gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.0);}`,fragmentShader:`uniform sampler2D tl;uniform sampler2D tr;varying vec2 vUv;vec4 c(sampler2D t,vec2 uv){return sRGBTransferOETF(texture2D(t,uv));}vec4 c(sampler2D t){return c(t,vUv);}void main(){${e}}`}))),this.render=function(n){const i=t.r,o=i.getRenderTarget();i.setRenderTarget(t.bufferL),i.clear(),t.render(n,t.stereoCamera.cameraL),i.setRenderTarget(t.bufferR),i.clear(),t.render(n,t.stereoCamera.cameraR),i.setRenderTarget(null),t.render(s,t.orthoCamera),i.setRenderTarget(o)},this.dispose=function(){s.children.forEach(n=>{n.geometry.dispose(),n.material.dispose()})}},z=function(t,e,s,n){const i=new u.Vector2;t.stereoCamera.aspect=s?1:n?2:.5,this.render=function(o){t.r.getSize(i);let a=i.width,r=i.height;n?r/=2:a/=2;const p=t.stereoCamera.cameraL,d=t.stereoCamera.cameraR,h=t.r,f=e^n,m=n?0:a,T=n?r:0;h.setScissorTest(!0),h.setScissor(0,0,a,r),h.setViewport(0,0,a,r),t.render(o,f?d:p),h.setScissor(m,T,a,r),h.setViewport(m,T,a,r),t.render(o,f?p:d),h.setScissorTest(!1)},this.dispose=function(){const o=t.r;o.getSize(i),o.setScissor(0,0,i.width,i.height),o.setViewport(0,0,i.width,i.height),t.stereoCamera.aspect=1}},Z=function(t){const e=!!((t&1)==1^(t&2)==0),s=(t&2)==2,n=t>=4;return`vec2 uv=vUv;float coord=gl_FragCoord.y;if(${s})coord=gl_FragCoord.x;if(${n})coord=mod(gl_FragCoord.x,2.0)+mod(gl_FragCoord.y,2.0);if(${e})coord+=1.0;if((mod(coord,2.0))>=1.0){gl_FragColor=c(tr);}else{gl_FragColor=c(tl);}`},ee=function(t){const e=(t&1)==1,s=(t&2)==2;return`vec2 uv=vec2(vUv.x,vUv.y);if(uv.x<=0.5){uv.x=uv.x+0.25;if(${e})uv.x=1.0-uv.x;gl_FragColor=c(tl,uv);}else{uv.x=uv.x-0.25;if(${s})uv.x=1.0-uv.x;gl_FragColor=c(tr,uv);}`},te=function(t){const e=i=>{const o=function(a){return"mat3("+new u.Matrix3().fromArray(a).transpose().elements.join(",")+")"};switch(i){case 0:return[o([.299,.587,.114,0,0,0,0,0,0]),o([0,0,0,.299,.587,.114,.299,.587,.114])];case 1:return[o([.299,.587,.114,0,0,0,0,0,0]),o([0,0,0,0,1,0,0,0,1])];case 2:return[o([1,0,0,0,0,0,0,0,0]),o([0,0,0,0,1,0,0,0,1])];case 3:return[o([.456,.5,.176,-.04,-.038,-.016,-.015,-.021,-.005]),o([-.043,-.088,-.002,.378,.734,-.018,-.072,-.113,1.226])];case 4:return[o([.299,.587,.114,.299,.587,.114,0,0,0]),o([0,0,0,0,0,0,.299,.587,.114])];case 5:return[o([1,0,0,0,1,0,0,0,0]),o([0,0,0,0,0,0,.299,.587,.114])];case 6:return[o([1,0,0,0,1,0,0,0,0]),o([0,0,0,0,0,0,0,0,1])];case 7:return[o([1.062,-.205,.299,-.026,.908,.068,-.038,-.173,.022]),o([-.016,-.123,-.017,.006,.062,-.017,.094,.185,.911])];case 8:return[o([0,0,0,.299,.587,.114,0,0,0]),o([.299,.587,.114,0,0,0,.299,.587,.114])];case 9:return[o([0,0,0,.299,.587,.114,0,0,0]),o([1,0,0,0,0,0,0,0,1])];case 10:return[o([0,0,0,0,1,0,0,0,0]),o([1,0,0,0,0,0,0,0,1])];case 11:return[o([-.062,-.158,-.039,.284,.668,.143,-.015,-.027,.021]),o([.529,.705,.024,-.016,-.015,-.065,.009,.075,.937])]}};t=Number(t),(t<0||t>=12||isNaN(t))&&(t=1);const[s,n]=e(t);return`vec4 cl=c(tl);vec4 cr=c(tr);mat3 ml=${s};mat3 mr=${n};vec3 c=ml*cl.rgb+mr*cr.rgb;gl_FragColor=vec4(c.r,c.g,c.b,max(cl.a, cr.a));`},ie=function(t,e){this.render=function(s){t.render(s,e?t.stereoCamera.cameraR:t.stereoCamera.cameraL)}},ne=function(t){this.r=t,this.render=this.r.render.bind(this.r),this.stereoCamera=new u.StereoCamera,this.orthoCamera=new u.OrthographicCamera(-1,1,1,-1,0,1),this.bufferL=new u.WebGLRenderTarget(this.r.width,this.r.height,{minFilter:u.LinearFilter,magFilter:u.NearestFilter,format:u.RGBAFormat}),this.bufferR=this.bufferL.clone()},E=function(t){const{renderer:e,defaultEffect:s,inject:n}=t,i=new ne(e);let o=null;this.setEyeSeparation=function(r){i.stereoCamera.eyeSep=r};const a=i.r.setSize.bind(i.r);this.setSize=function(r,p){a(r,p);const d=i.r.getPixelRatio();i.bufferL.setSize(r*d,p*d),i.bufferR.setSize(r*d,p*d)},this.render=function(r,p){"xr"in i.r&&i.r.xr.isPresenting?i.render(r,p):(r.updateMatrixWorld(),p.parent===null&&p.updateMatrixWorld(),i.stereoCamera.update(p),i.r.autoClear&&i.r.clear(),o.render(r))},this.dispose=function(){o.dispose?.()},this.setEffect=function(r){if(r=Number(r),(r<0||isNaN(r))&&(r=0),o?.dispose?.(),r<2){o=new ie(i,r);return}if(r-=2,r<8){o=new z(i,!!(r&1),!!(r&2),!!(r&4));return}if(r-=8,r<6){o=new C(i,Z(r));return}if(r-=6,r<3){o=new C(i,ee(r+1));return}if(r-=3,r<12){o=new C(i,te(r));return}r-=12,o=new z(i)},this.setEffect(s),n&&(i.r.setSize=this.setSize,i.r.render=this.render)};E.effectsList=function(){const t=[];let e=[],s=-1;function n(o){e=new Array,t.push({category:o,elements:e})}function i(o){s+=1,e.push({name:o,value:s})}return n("Single view"),i("Single view left"),i("Single view right"),n("Side-by-Side"),i("Parallel view"),i("Cross view"),i("Parallel anamorphic view"),i("Cross anamorphic view"),n("Top-and-Bottom"),i("Top-Bottom view"),i("Bottom-top view"),i("Top-Bottom anamorphic view"),i("Bottom-top anamorphic view"),n("Interleaved"),i("Interleaved lines 1"),i("Interleaved lines 2"),i("Interleaved columns 1"),i("Interleaved columns 2"),i("Checkerboard 1"),i("Checkerboard 2"),n("Mirrored"),i("Mirrored left"),i("Mirrored right"),i("Mirrored both"),n("Anaglyph"),i("Anaglyph Red/Cyan Gray"),i("Anaglyph Red/Cyan Half Colors"),i("Anaglyph Red/Cyan Full Colors"),i("Anaglyph Red/Cyan Dubois"),i("Anaglyph Yellow/Blue Gray"),i("Anaglyph Yellow/Blue Half Colors"),i("Anaglyph Yellow/Blue Full Colors"),i("Anaglyph Yellow/Blue Dubois"),i("Anaglyph Green/Magenta Gray"),i("Anaglyph Green/Magenta Half Colors"),i("Anaglyph Green/Magenta Full Colors"),i("Anaglyph Green/Magenta Dubois"),t};E.effectsListSelect=function(t){const e=document.createElement("select");return e.name=t||"mode",E.effectsList().forEach(s=>{const n=document.createElement("optgroup");n.label=s.category,e.appendChild(n),s.elements.forEach(i=>{const o=document.createElement("option");o.text=i.name,o.value=i.value,n.appendChild(o)})}),e};AFRAME.registerSystem("stereofx",{schema:{default:0},init:function(){this.sfx=new E({renderer:this.el.renderer,defaultEffect:this.data,inject:!0})},update:function(){this.sfx.setEffect(this.data)}});AFRAME.registerComponent("g_button",{schema:{fontsize:{default:1},value:{default:""},width:{default:1},height:{default:.2},circle:{defualt:!1}},events:{mouseenter:function(){c(this.el,{material:{color:"#eee"}})},mouseleave:function(){c(this.el,{material:{color:"#ccc"}})}},init:function(){c(this.el,{text:{align:"center",color:"#666",height:.001},material:{color:"#ccc",side:"double"},class:"i"}),this.back=c("a-text",{align:"center",color:"#777",height:.001,rotation:"0 180 0",position:"0 0 -0.001"}),this.el.append(this.back)},update:function(){c(this.el,{text:{value:this.data.value,width:this.data.fontsize},geometry:this.data.circle?{primitive:"circle",radius:this.data.width}:{primitive:"plane",width:this.data.width,height:this.data.height}}),c(this.back,{value:this.data.value,width:this.data.fontsize})}});AFRAME.registerComponent("g_cube",{schema:{default:"0 0 0"},multiple:!0,init:function(){const t=this.data.split(" ").map(Number),e=new THREE.Vector3(0,0,1);l(this).leveldata.forEachFace(this.data,(s,n,i)=>{const o=i.toArray().map((p,d)=>p/2+t[d]).join(" "),a=c("a-plane",{position:o,class:"i",material:{color:F[s],src:"#tex_f",side:"double",opacity:.8},animation:{property:"material.opacity",dir:"alternate",loop:!0,dur:2200,easing:"easeInOutQuad",from:.8,to:.2,startEvents:"animationcomplete__enter"},...q(.8)});this.el.append(a),a.addEventListener("mouseenter",()=>{c(a,{color:"#ccc"})}),a.addEventListener("mouseleave",()=>{c(a,{color:F[s]})}),a.addEventListener("click",()=>{this.el.emit("catway:action:face",new x({p:this.data,d:n}))});const r=new THREE.Quaternion().setFromUnitVectors(e,i);a.object3D.quaternion.copy(r)})}});AFRAME.registerComponent("g_tips",{events:{tips:function(t){this.tips=t.detail.toReversed(),this.m=this.tips.length-1,this.el.emit("show")},show:function(){if(this.m<0)c(this.el,{visible:!1,text:{value:"",width:0}});else{const t={text:{value:``+this.tips[this.m]+``,width:.6}};c(this.el,{visible:!0,...t}),c(this.back,t)}},click:function(){this.m-=1,this.el.emit("show")}},init:function(){c(this.el,{text:{align:"center",color:"#666",width:"1"},geometry:{primitive:"plane",height:0,width:0},material:{color:"#ccc",side:"double"},class:"i"}),this.back=c("a-text",{align:"center",color:"#777",width:"1",rotation:"0 180 0",position:"0 0 -0.001"}),this.el.append(this.back)}});AFRAME.registerComponent("g_walker",{schema:{p:{type:"vec3"},d:{default:0},h:{default:.55},src:{default:""},osc:{default:10}},init:function(){this.inner=c("a-plane",{material:"side: double; transparent: true; alphaTest: 0.5; src: "+this.data.src,animation__osc:{property:"rotation",from:"0 0 "+this.data.osc,to:"0 0 "+-this.data.osc,dir:"alternate",loop:!0,dur:1e3,easing:"easeInOutQuad",startEvents:"loaded,animationcomplete__spin"},animation__spin:{property:"rotation",from:"0 0 0",to:"0 0 -360",dur:500,easing:"easeInQuad",startEvents:"spin"},...v()}),this.el.append(this.inner)},update:function(t){if(this.data.h!=t.h&&c(this.inner,{position:{z:this.data.h}}),this.data.p!=t.p&&c(this.el,{position:this.data.p}),this.data.d!=t.d){const e=new THREE.Vector3(0,0,1),s=k(this.data.d),n=new THREE.Quaternion().setFromUnitVectors(e,s);this.el.object3D.quaternion.copy(n)}}});AFRAME.registerSystem("g_gamepad",{init:function(){this.pressed={}},map:{L:t=>t.axes[0]<-.7,U:t=>t.axes[1]<-.7,R:t=>t.axes[0]>.7,D:t=>t.axes[1]>.7,J:t=>t.buttons[0].pressed,W:t=>t.buttons[1].pressed},tick:function(){Array.from(navigator.getGamepads()).forEach(t=>{t&&Object.keys(this.map).forEach(e=>{const s=this.map[e](t);this.pressed[e]!=s&&this.el.emit("catway:input:"+e,s),this.pressed[e]=s})})}});AFRAME.registerSystem("g_keyboard",{init:function(){const t=this.el.canvas;c(t,{tabindex:1}),t.addEventListener("keydown",e=>{const s=this.map[e.key.toLowerCase()];s&&!e.repeat&&this.el.emit("catway:input:"+s,!0)}),t.addEventListener("keyup",e=>{const s=this.map[e.key.toLowerCase()];s&&this.el.emit("catway:input:"+s,!1)})},map:{arrowleft:"L",arrowup:"U",arrowright:"R",arrowdown:"D",c:"W",x:"J"}});AFRAME.registerSystem("i_process",{init:function(){const t={};"WJLURD".split("").forEach(e=>{t[e]=!1,this.el.addEventListener("catway:input:"+e,s=>{if(!e[e]&&s.detail){t[e]=s.detail;const n="LURD".split("").map(i=>t[i]?i:"").join("");t.W&&!t.J&&n.length==1?this.el.emit("catway:action:walk",n):t.J&&!t.W&&n.length<2&&this.el.emit("catway:action:jump",n)}t[e]=s.detail})})}});AFRAME.registerComponent("i_vrcontroller",{init:function(){const t={};for(const e of Object.keys(this.btnmap))this.el.addEventListener(e,s=>{const n=this.btnmap[e],i=s.detail.pressed;i!=t[n]&&this.el.sceneEl.emit("catway:input:"+n,i),t[n]=i});this.el.addEventListener("thumbstickmoved",e=>{Object.keys(this.stickmap).forEach(s=>{const n=this.stickmap[s](e.detail.x,e.detail.y);t[s]!=n&&this.el.emit("catway:input:"+s,n),t[s]=n})})},btnmap:{abuttonchanged:"W",bbuttonchanged:"J",xbuttonchanged:"W",ybuttonchanged:"J"},stickmap:{L:(t,e)=>t<-.7,U:(t,e)=>e<-.7,R:(t,e)=>t>.7,D:(t,e)=>e>.7}});AFRAME.registerComponent("page_3dmode",{init:async function(){const t=this.el.sceneEl;(t.is("ar-mode")||t.is("vr-mode"))&&t.exitVR();const e=(r,p,d)=>{const h=c("a-entity",{g_button:{value:r,width:.4,height:.035,fontsize:.5},position:p});return this.el.append(h),h.addEventListener("click",d),h},s=r=>{r=="vr"?this.el.sceneEl.enterVR():r=="ar"?this.el.sceneEl.enterAR():l(this,{stereofx:r}),this.el.emit("catway:page:next")},n=E.effectsList();[n[3],n[4]]=[n[4],n[3]];const i=[];navigator.xr&&(await navigator.xr.isSessionSupported("immersive-vr")&&i.push({name:"Virtual reality",value:"vr"}),await navigator.xr.isSessionSupported("immersive-ar")&&i.push({name:"Augmented reality",value:"ar"})),i.length&&n.unshift({category:"WebXR",elements:i});let o=.35,a=-1;this.el.append(c("a-text",{value:"Choose how to display 3D",align:"center",position:[0,o+.08,.1].join(" "),width:1})),this.el.append(c("a-text",{value:'Depending on your device. If unsure, "Single view left" is a fallback working on all screens.',"wrap-count":110,align:"center",position:[0,o+.035,.1].join(" "),width:1})),n.forEach(r=>{if(r.category[0]=="I"){const p=c("a-entity",{g_button:{value:"<",width:.04,circle:!0},position:[-.22,o-.05,.1].join(" "),...v()});p.addEventListener("click",d=>this.el.emit("catway:page:back")),this.el.append(p),a+=2,o=.35}o-=.01,this.el.append(c("a-text",{value:r.category,position:[a*.22-.19,o,.1].join(" "),width:.5})),o-=.035,r.elements.forEach(p=>{e(p.name,[a*.22,o,.1].join(" "),d=>{s(p.value)}),o-=.04})})}});AFRAME.registerComponent("page_hello",{init:function(){this.el.append(c("a-plane",{width:"0.4",height:"0.4",position:"0 0.25 0.1",material:"side: double; transparent: true; alphaTest: 0.5; src: #tex_c",animation:"property: rotation; to: 0 360 0; loop: true; dur: 3000; easing: linear"}));const t=(n,i,o)=>{const a=c("a-entity",{g_button:{value:n,height:.08,width:.3},position:i});return this.el.append(a),a.addEventListener("click",o),a};c(t("Start","0 -0.03 0.1",n=>this.el.emit("catway:page:next")),{g_button:{circle:!0,width:.08},...v()}),t("3D mode","0 -0.2 0.1",n=>this.el.emit("catway:page:3D"));const e=t("","0 -0.29 0.1",n=>{l(this,{music_on:!l(this,"music_on")})});l(this,"music_on",n=>{c(e,{g_button:{value:"Music is O"+(n?"N":"FF")}})});const s=t("","0 -0.38 0.1",n=>{l(this,{sfx_on:!l(this,"sfx_on")})});l(this,"sfx_on",n=>{c(s,{g_button:{value:"SFX are O"+(n?"N":"FF")}})})}});AFRAME.registerComponent("page_levels",{schema:{default:1},init:function(){const t=Math.ceil(Math.sqrt(this.data+1)),e=(t-1)/2*.12,s=c("a-entity",{g_button:{value:"<",width:.05,circle:!0},position:{x:-e,y:e,z:.1},...v()});s.addEventListener("click",n=>this.el.emit("catway:page:back")),this.el.append(s);for(let n=1;n<=this.data;n++){const i=-e+n%t*.12,o=e-Math.floor(n/t)*.12,a=c("a-entity",{g_button:{value:n,width:.05,circle:!0},position:{x:i,y:o,z:.1},...v()});this.el.append(a),a.addEventListener("click",r=>this.el.emit("catway:page:next",n))}setTimeout(n=>{this.el.append(c("a-text",{value:"Levels",align:"center",position:[0,e+.1,.1].join(" "),width:1}))},800)}});function w(t){if(t.p)return t.p+" "+t.d;{const e=t.split(" ").map(Number);return new x({p:e.slice(0,3).join(" "),d:e[3]})}}const I=(t,e)=>{const s=[1,5,1,1,2,1],n=[2,3,3,5,3,0];if(e=="")return t;if(e=="L")return n[t];if(e=="U")return s[t];if(e=="R")return g(n[t]);if(e=="D")return g(s[t])};AFRAME.registerComponent("page_play",{init:function(){this.el.sceneEl.addEventListener("catway:leveldata",this.reloadLevel.bind(this)),this.el.addEventListener("resetLevel",t=>this.resetLevel()),this.reloadLevel(),["face","walk","jump"].forEach(t=>{this["on_"+t]=this["on_"+t].bind(this),this.el.sceneEl.addEventListener("catway:action:"+t,this["on_"+t])})},remove:function(){this.el.sceneEl.removeEventListener("catway:action:face",this.on_face),this.el.sceneEl.removeEventListener("catway:action:walk",this.on_walk),this.el.sceneEl.removeEventListener("catway:action:jump",this.on_jump)},reloadLevel:function(){this.level=l(this).leveldata;for(const n of this.el.children)this.el.removeChild(n);if(!this.level)return;const t=c("a-entity");this.el.append(t);for(const n of Object.keys(this.level.cubes))c(t,{["g_cube__"+n.replaceAll(" ","_")]:n});this.cat=c("a-entity",{class:"cat",g_walker:{...this.level.cat,src:"#tex_c",h:.56}}),t.append(this.cat),t.append(c("a-entity",{g_walker:{...this.level.pillow,src:"#tex_p",osc:-10}})),l(this,"cat",n=>c(this.cat,{g_walker:w(n)}));const e=.6/(Math.max(...this.level.size)+1);c(t,{scale:[e,e,e].join(" "),position:this.level.size.map(n=>-n*e/2).join(" ")});const s=c("a-entity",{g_button:{value:"<",fontsize:4,width:.25,circle:!0},position:"-1 -1 -1",...v()});t.append(s),s.addEventListener("click",n=>this.el.emit("catway:page:back")),s.append(c("a-text",{value:l(this,"level"),align:"center",position:"0 0.4 0",color:"#666",...v()})),this.resetLevel()},resetLevel:function(){l(this,{cat:w(this.level.cat)})},on_face:function(t){this.on_move(t.detail)},on_walk:function(t){const e=w(l(this,"cat")),s=I(e.d,t.detail),n=this.level.move_walk(e,s);this.on_move(n||this.level.move_orbit(e,s))},on_jump:function(t){const e=w(l(this,"cat")),s=I(e.d,t.detail),n=this.level.move_jump(e,s);this.on_move(n||this.level.move_sidejump(e,s))},on_move:function(t){const e=w(l(this,"cat")),s=i=>this.el.emit("catway:play:"+i);let n=!1;return this.level.forEachMove(e,i=>t&&i.equals(t)&&(n=!0)),n?(l(this,{cat:w(t)}),this.level.die(t)?s("die"):t.equals(this.level.pillow)?s("win"):s("move")):s("cantmove")}});const se=`<svg width="512" height="512" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="a" x1="0" x2="1" y1="0" y2="1"><stop stop-color="#b3b3b3" offset="0"/><stop stop-color="#f2f2f2" offset="1"/></linearGradient></defs><rect width="512" height="512" fill="#fff"/><rect x="3" y="3" width="506" height="506" fill="url(#a)"/></svg>`,P=`<svg width="512" height="512" xmlns="http://www.w3.org/2000/svg"><path d="m506 506c-245-131-254-131-499 0 131-245 131-254 0-499 245 130 254 130 499 0-130 245-130 254 0 499z" fill="#823894" stroke="#ecbd04" stroke-linejoin="round" stroke-width="10"/><path d="m400 256c0 37-14 71-37 96-26 29-64 47-106 47-79 0-143-64-143-143s64-143 143-143 143 64 143 143z" fill="#d7eef4" stroke="#fbcd18" stroke-width="17"/><path d="m200 206c-13 15-46 49-64 31v27c18 9.4 32 5 63-36z" fill="#782121"/><path d="m200 206c-38-39-67 33-88-5l-9.7 24c38 40 46-35 97 9z" fill="#a02c2c"/><path d="m351 129c-53 95-110 57-146 3-2.9 1.2-5.8 2.6-8.7 4.1-2.7 61-0.19 123 0.3 184 0.075 9.3-7.3 15-17 15-16 1.2-26 5.3-30-43-1.4-16-17-24-19 9.7 9.9 27 27 49 50 65l161-5.2c7.8-6.1 11-9.9 15-14l0.47-215c8e-3 -3.8-0.17-12-6-3.3z"/><path d="m194 202c55 8.2 111 8.7 165-4.7l1 64c-55 9.3-111 10-169 3.5z" fill="#c83737"/><path d="m277 239c-0.23-16-8.7-38-34-37-25 0.93-32 22-31 38 1.2 16 14 35 35 33 22-2.1 30-18 30-34z" fill="#f9f9f9"/><path d="m277 242c-0.074-23 8.5-42 30-42 22-0.081 37 29 35 46-1.8 17-19 29-34 27-15-1.7-31-8-31-31z" fill="#f9f9f9"/><path d="m257 238c0 3.7-2.1 6.3-6.3 6.3-3.8 0-6.8-2.5-6.8-6.7 0-4.5 3-6.7 6.8-6.7s6.3 3.4 6.3 7.1z"/><path d="m309 235c1.5-3.4 4.5-4.9 8.4-3.1 3.4 1.5 5.2 5 3.4 8.9-1.9 4.1-5.5 4.9-9 3.3-3.4-1.5-4.4-5.7-2.8-9.1z"/></svg>`,oe=`<svg width="512" height="512" xmlns="http://www.w3.org/2000/svg"><path d="m8.9 75 54 326 441-20c-3.3-14-12-26-20-38-8-12-15-25-13-41 4-19 8.3-38 7.5-58 0.96-46-3.3-95 16-139 6.6-26-23-38-48-34-42 13-84 22-127 31-64 13-132 14-193-12-37-14-78-32-117-16z" fill="#f2f2f2"/><path d="m4.5 82c36 111 20 156 20 231 2.1 42 16 46-3.2 65-33 32 38 54 83 57 128 14 261 13 385-27 41-37-28-111-58-50-71 35-153 26-229 31-55-3.9-156 14-147-71-7.2-62 20-125 0.23-186-8.8-24-30-38-51-51z" fill="#e6e6e6"/><path d="m26 189c2.1 60-18 121 2.4 179-31 24-21 52 19 60 116 23 235 23 351 5.9 36-5.8 78-4.8 104-30 33-32-44-62-27-107 9.3-42 3.4-84 5.9-126-0.67-34 40-110-15-103-102 14-204 61-306 32-47-13-94-41-141-32-47 9 11 80 6.3 121zm264-53c23 3.5 88 4.8 32-2-20-3.7-77-9.4-72-16 77-2.7 152-33 229-42 21 7.6 2.8 84-7.5 72-6.5-19-19-44-8.2-7.5 21 71 14 150-13 218 2.6 14 25-54 25-13 0.19 22 56 43-4.6 63-121 39-248 30-373 20-39-2.9-114-14-57-62 13-15 27-58 3.5-20-25 18-17-63-15-88 4.6-44 19-86 30-128-11 18-29 84-28 28-0.85-24-50-88 13-84 64 3.9 159 55 247 62z"/></svg>`,b=c("a-scene",{"xr-mode-ui":"enabled: false",appstate:""});(document.querySelector("#scene")||document.body).appendChild(b);b.append(c("a-entity",{camera:"fov: 30",position:"0 1 1","fov-controls":"","orbit-controls":"anchor: 0 1 -0.6"}));b.append(c("a-entity",{cursor:"rayOrigin:mouse",cursor3d:"",raycaster:"objects: .i"}));b.append(c("a-entity",{"laser-controls":"hand: left",raycaster:"objects: .i",grabworld:"",i_vrcontroller:""}));b.append(c("a-entity",{"laser-controls":"hand: right",raycaster:"objects: .i",grabworld:"",i_vrcontroller:""}));const M=c("a-assets");b.appendChild(M);const R=t=>"data:image/svg+xml,"+encodeURIComponent(t);document.querySelector("link").href=R(P);M.append(c("img",{id:"tex_c",src:R(P)}));M.append(c("img",{id:"tex_p",src:R(oe)}));M.append(c("img",{id:"tex_f",src:R(se)}));</script>