<!doctype html><meta name=viewport content="width=device-width"><title>Snowball - js13kGames 2025</title><style>:root{--white:#e0e0e0;--black:#121212;--bg-color:var(--white);--text-color:var(--black)}@media (prefers-color-scheme:dark){:root{--bg-color:var(--black);--text-color:var(--white)}}body{background-color:var(--bg-color);color:var(--text-color);margin:0;padding:0;display:flex;justify-content:center}#gameCanvas{height:1024px;width:512px;max-height:99svh;max-width:99svw;border:2px solid #333;display:block;color:var(--text-color);user-select:none;-webkit-user-drag:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;outline:0}</style><canvas id=gameCanvas></canvas><script>!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&n(e)}).observe(document,{childList:!0,subtree:!0})}function n(e){if(e.ep)return;e.ep=!0;const n=function(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?n.credentials="include":"anonymous"===e.crossOrigin?n.credentials="omit":n.credentials="same-origin",n}(e);fetch(e.href,n)}}();const e=window.devicePixelRatio||1,n=document.getElementById("gameCanvas"),t=n.getContext("2d"),i=t=>t/512*n.width/e,l="#",o=" ",r="O",s="S",a="H",h="E",c="X",d="L",f={[l]:"#888",[o]:"#444",[r]:"#FFEA00",[a]:"#00F",[h]:"#F00",[c]:"#0F0",[d]:"#0000FF",[s]:"#F00"},p=e=>e.split("\n").slice(1,-1).map(e=>e.split("")),y=[{name:"Level 1: easy peasy",map:p("\n###########\n#         #\n#         #\n#         #\n#  H O    #\n#         #\n#         #\n#         #\n#         #\n#         #\n#         #\n#         #\n#    O    #\n#         #\n#         #\n#         #\n#         #\n#         #\n#         #\n#         #\n#    O    #\n#         #\n#         #\n#         #\n#        X#\n###########\n")},{name:"Level 2: a-maze-ing",map:p("\n###########\n#         #\n#         #\n#         #\n#  H O    #\n#         #\n#         #\n#         #\n########  #\n#         #\n#         #\n#         #\n#    O    #\n#         #\n#         #\n#         #\n#  ########\n#         #\n#         #\n#         #\n#    O    #\n#         #\n#         #\n#         #\n#        X#\n###########\n")},{name:"Level 3: hello darkness",map:p("\n###########\n#         #\n#         #\n#    H    #\n#         #\n#######   #\n#         #\n#         #\n#   #######\n#         #\n#         #\n#         #\n#    O    #\n#         #\n#         #\n#         #\n####   ####\n#         #\n#         #\n#######   #\n#         #\n#         #\n#   #######\n#         #\n#        X#\n###########\n")},{name:"Level 4: don't get wet now",map:p("\n###########\n#         #\n# H       #\n#         #\n#         #\n#    O    #\n# LL      #\n#LLLLLL   #\n#         #\n#         #\n#         #\n#         #\n#    O    #\n#         #\n#         #\n#         #\n#  ########\n#         #\n#         #\n#         #\n#         #\n#         #\n#         #\n#         #\n#        X#\n###########\n")},{name:"Level 5: you can run and you can hide",map:p("\n###########\n#         #\n#    H    #\n#         #\n#         #\n#         #\n#         #\n#         #\n#         #\n#         #\n#         #\n#         #\n#    O    #\n#         #\n#    E    #\n#         #\n#         #\n#         #\n#         #\n#         #\n#         #\n#         #\n#         #\n#         #\n#        X#\n###########\n")},{name:"Level 6: slow and steady",map:p("\n###########\n#         #\n# H       #\n#         #\n#         #\n#######   #\n#         #\n#         #\n# O       #\n#         #\n#   E     #\n#         #\n#         #\n#    ######\n#         #\n#    E    #\n#         #\n#    O    #\n#         #\n#         #\n#         #\n#       # #\n#       # #\n#   ##### #\n#   #X    #\n###########\n")},{name:"Level 7: when the lights go out",map:p("\n###########\n#         #\n# H       #\n#         #\n#         #\n#######   #\n#     #   #\n#     #   #\n#     #   #\n#     #   #\n#     #  S#\n#     #   #\n#     #   #\n#     #   #\n#     #   #\n#       E #\n#         #\n#      O  #\n#         #\n#         #\n#         #\n#         #\n#         #\n#         #\n#   X     #\n###########\n")},{name:"Level 8: choose wisely",map:p("\n###########\n#         #\n# H       #\n#         #\n#    S    #\n#         #\n#  #  LLLL#\n#  #  L X #\n#  #  L   #\n# O#  L O #\n#  #  L   #\n# E#  L E #\n#  #  L   #\n#  #  L   #\n#  #  L   #\n#  #  L   #\n#     L   #\n#  LLLL   #\n#         #\n#         #\n#         #\n#         #\n#         #\n#       S #\n#         #\n###########\n")}],w=(e,n,t,i,o,r)=>{switch(n){case l:e.fillStyle=f[l],e.fillRect(t,i,o,r);break;case" ":case"O":case"H":case"E":break;case"X":m(e,t,i,o,r);break;case"L":g(e,t,i,o,r);break;default:const s=f[n]||"magenta";e.fillStyle=s,e.fillRect(t,i,o,r)}},m=(e,n,t,i,l)=>{e.fillStyle="brown",e.fillRect(n+.2*i,t-.2*l,.6*i,l),e.strokeStyle="white",e.lineWidth=2,e.strokeRect(n+.2*i,t-.2*l,.6*i,l),e.fillStyle="gold",e.beginPath(),e.arc(n+.7*i,t+l/3,.05*i,0,2*Math.PI),e.fill()},g=(e,n,t,i,l)=>{e.fillStyle="blue",e.fillRect(n,t,i,l)},v={pointer:{x:0,y:0,isDown:!1},keysPressed:{ArrowUp:!1,ArrowDown:!1,ArrowLeft:!1,ArrowRight:!1}};let L=!1;const u={hero:{x:100,y:100,size:30,speed:2.5,lives:9},streetlamps:[],ennemies:[],level:y[0]},P=()=>{u.level=y[0],u.hero.speed=i(2.5),window.addEventListener("pointerdown",e=>{e.preventDefault(),v.pointer={x:e.clientX,y:e.clientY,isDown:!0}},{passive:!1}),window.addEventListener("pointerup",e=>{e.preventDefault(),v.pointer.isDown=!1}),window.addEventListener("pointermove",e=>{e.preventDefault(),v.pointer.isDown&&(v.pointer={x:e.clientX,y:e.clientY,isDown:!0})},{passive:!1}),window.addEventListener("touchstart",e=>{e.preventDefault(),v.pointer={x:e.touches[0].clientX,y:e.touches[0].clientY,isDown:!0}},{passive:!1}),window.addEventListener("touchmove",e=>{e.preventDefault(),v.pointer.isDown&&(v.pointer={x:e.touches[0].clientX,y:e.touches[0].clientY,isDown:!0})},{passive:!1}),window.addEventListener("touchend",e=>{e.preventDefault(),v.pointer.isDown=!1},{passive:!1}),window.addEventListener("keydown",e=>{e.key in v.keysPressed&&(v.keysPressed[e.key]=!0)}),window.addEventListener("keyup",e=>{e.key in v.keysPressed&&(v.keysPressed[e.key]=!1)}),x(),window.requestAnimationFrame(T)},x=()=>{u.ennemies=[],u.streetlamps=[];const e=n.clientWidth/u.level.map[0].length,t=n.clientHeight/u.level.map.length;for(let n=0;n<u.level.map.length;n++)for(let l=0;l<u.level.map[n].length;l++)switch(u.level.map[n][l]){case"H":u.hero.x=l*e+e/2,u.hero.y=n*t+t/2;break;case"O":u.streetlamps.push({x:l*e+e/2,y:n*t+t/2,size:50,isOn:!0});break;case"E":u.ennemies.push({x:l*e+e/2,y:n*t+t/2,size:30,speed:i(3),direction:2*Math.random()*Math.PI,isChasing:!1})}},k=()=>{u.hero.lives-=1,u.hero.lives<=0&&(u.hero.lives=9,u.level=y[0]),x()},b=e=>{const i=(e=>{const n=y.indexOf(e)+1;return y[n]})(u.level);if(i)u.level=i,x();else{console.log("won"),L=!0,t.fillStyle="yellow",t.font="34px Arial",x(),t.fillText(`You won! Time: ${Math.floor(e/1e3)} s`,50,n.clientHeight/2),t.fillText("click to restart",50,n.clientHeight/2+34);const i=()=>{window.removeEventListener("pointerdown",i),L=!1,P()};window.addEventListener("pointerdown",i)}},T=e=>{(()=>{const{x:e,y:t}=((e,t)=>{let i=e.x,l=e.y;if(v.keysPressed.ArrowUp&&(l-=t),v.keysPressed.ArrowDown&&(l+=t),v.keysPressed.ArrowLeft&&(i-=t),v.keysPressed.ArrowRight&&(i+=t),v.pointer.isDown){const e=n.getBoundingClientRect(),t=(v.pointer.x-e.left)*(n.clientWidth/e.width),o=(v.pointer.y-e.top)*(n.clientHeight/e.height),r=Math.atan2(o-u.hero.y,t-u.hero.x);i+=Math.cos(r)*u.hero.speed,l+=Math.sin(r)*u.hero.speed}return{x:i,y:l}})({x:u.hero.x,y:u.hero.y},u.hero.speed),i=u.level.map,o=n.clientWidth/i[0].length,r=n.clientHeight/i.length,s=Math.floor(e/o),a=Math.floor(t/r);a>=0&&a<i.length&&s>=0&&s<i[0].length&&i[a][s]!==l&&(u.hero.x=e,u.hero.y=t)})(),u.ennemies.filter(e=>e.isChasing).forEach(e=>{const n=Math.atan2(u.hero.y-e.y,u.hero.x-e.x);e.direction=n,e.x+=Math.cos(e.direction)*e.speed,e.y+=Math.sin(e.direction)*e.speed}),(e=>{const t=u.level.map,l=n.clientWidth/t[0].length,o=n.clientHeight/t.length,r=Math.floor(u.hero.x/l),s=Math.floor(u.hero.y/o);if(s>=0&&s<t.length&&r>=0&&r<t[0].length)switch(t[s][r]){case"L":k();break;case"X":b(e);break;case"S":u.streetlamps.filter(e=>e.isOn).forEach(e=>{e.isOn=!1,setTimeout(()=>e.isOn=!0,5e3)})}u.ennemies.forEach(e=>{u.streetlamps.filter(e=>e.isOn).forEach(n=>{const t=e.x-n.x,l=e.y-n.y;if(Math.sqrt(t*t+l*l)<i(120)){const t=u.hero.x-n.x,l=u.hero.y-n.y;Math.sqrt(t*t+l*l)<i(120)&&(e.isChasing=!0)}});const n=e.x-u.hero.x,t=e.y-u.hero.y;Math.sqrt(n*n+t*t)<(u.hero.size+e.size)/2&&k()})})(e),!L&&(t.clearRect(0,0,n.width,n.height),(e=>{const i=n.clientWidth/e[0].length,l=n.clientHeight/e.length;t.fillStyle="black",t.fillRect(0,0,n.clientWidth,n.clientHeight);for(let n=0;n<e.length;n++)for(let o=0;o<e[n].length;o++){const r=e[n][o];w(t,r,o*i,n*l,i,l)}})(u.level.map),u.streetlamps.forEach(e=>((e,n,l)=>{const o=i(60),r=i(13),s=i(130),a="#000";if(t.fillStyle="#FFEA00",t.beginPath(),t.moveTo(e-r,n),t.lineTo(e+r,n),t.lineTo(e+1.5*r,n-.6*o),t.lineTo(e-1.5*r,n-.6*o),t.closePath(),t.fill(),l){const i=t.createRadialGradient(e,n-o/2,.5*r,e,n,s);i.addColorStop(0,"rgba(255, 234, 0, 0.6)"),i.addColorStop(1,"rgba(255, 234, 0, 0)"),t.fillStyle=i,t.beginPath(),t.arc(e,n,s,0,2*Math.PI),t.fill()}t.fillStyle=a,t.fillRect(e-r/2,n,r,o/2),t.strokeStyle="#000",t.lineWidth=2,t.beginPath(),t.moveTo(e-r,n),t.lineTo(e+r,n),t.lineTo(e+1.5*r,n-.6*o),t.lineTo(e-1.5*r,n-.6*o),t.closePath(),t.stroke(),t.fillStyle="#000",t.beginPath(),t.moveTo(e-1.5*r,n-.6*o),t.lineTo(e+1.5*r,n-.6*o),t.lineTo(e+1.2*r,n-.8*o),t.lineTo(e-1.2*r,n-.8*o),t.closePath(),t.fill(),t.beginPath(),t.moveTo(e-r/2,n),t.lineTo(e-r/2,n-.6*o),t.moveTo(e+r/2,n),t.lineTo(e+r/2,n-.6*o),t.stroke(),t.fillStyle=a,t.fillRect(e-r,n+o/2,2*r,r)})(e.x,e.y,e.isOn)),((e,n,t)=>{e.fillStyle="black";const l=i(70);e.beginPath(),e.arc(n,t,.3*l,0,2*Math.PI),e.fill(),e.beginPath(),e.moveTo(n-.3*l,t-.1*l),e.lineTo(n-.3*l,t-.4*l),e.lineTo(n-.1*l,t-.3*l),e.closePath(),e.fill(),e.beginPath(),e.moveTo(n+.3*l,t-.1*l),e.lineTo(n+.3*l,t-.4*l),e.lineTo(n+.1*l,t-.3*l),e.closePath(),e.fill(),e.fillStyle="white",e.beginPath(),e.arc(n-.1*l,t-.05*l,.05*l,0,2*Math.PI),e.arc(n+.1*l,t-.05*l,.05*l,0,2*Math.PI),e.fill(),e.fillStyle="black",e.beginPath(),e.arc(n-.1*l,t-.05*l,.02*l,0,2*Math.PI),e.arc(n+.1*l,t-.05*l,.02*l,0,2*Math.PI),e.fill(),e.fillStyle="pink",e.beginPath(),e.moveTo(n,t),e.lineTo(n-.03*l,t+.05*l),e.lineTo(n+.03*l,t+.05*l),e.closePath(),e.fill()})(t,u.hero.x,u.hero.y),u.ennemies.forEach(e=>{((e,n,t)=>{e.fillStyle="white";const l=i(60);e.beginPath(),e.arc(n,t-.1*l,.25*l,Math.PI,0);const o=Math.floor(Date.now()/500)%2==1;e.lineTo(n+.25*l,t+.25*l);const r=.5*l/9;for(let i=0;i<9;i++){const s=n+.25*l-i*r,a=t+.25*l+(i%2==0===o?.05*l:.05*-l);e.lineTo(s,a)}e.lineTo(n-.25*l,t+.25*l),e.closePath(),e.fill(),e.fillStyle="black",e.beginPath(),e.arc(n-.07*l,t-.05*l,.05*l,0,2*Math.PI),e.arc(n+.07*l,t-.05*l,.05*l,0,2*Math.PI),e.fill()})(t,e.x,e.y)}),t.fillStyle="white",t.font=`${i(20)}px Arial`,t.fillText(u.level.name,i(10),i(25)),t.fillText(`Lives: ${u.hero.lives}`,n.clientWidth-i(100),i(25)),window.requestAnimationFrame(T))};window.addEventListener("load",()=>{(()=>{if(!n)throw new Error("Canvas element not found");if(!t)throw new Error("2D context not available");n.width=n.clientWidth*e,n.height=n.clientHeight*e,t.setTransform(e,0,0,e,0,0),n.setAttribute("tabindex","0"),n.focus()})(),P()})</script>