<meta name=viewport content="width=device-width"><meta name=theme-color content=#000807><title>Orbiter - js13kGames 2021</title><noscript></noscript><style>body{margin:0}sbd{background:#ccaaff11;width:100%;top:0;position:absolute;display:block;text-Align:center;color:#fff;font-family:courier}b{color:red}</style><canvas id=canvas></canvas><sbd></sbd><script>class C{static randOpt(t,a){return arguments[Math.floor(Math.random()*arguments.length)]}static resultantOf(t,a){return Math.sqrt(Math.pow(t,2)+Math.pow(a,2))}}let S={arc:function(t,a,e,s,r,i){this.x=t,this.y=a,this.radius=e,this.startAngle=s,this.endAngle=r,this.styling=i,this.type="arc",this.center={},this.rotation={rad:0,about:this.center},this.alpha=1,this.GCParams={shadow:[0,0,"transparent",0]},this.indexInScene=null,this.updateProps=t=>{this.center.x=this.x,this.center.y=this.y};let h=new S.autoStyle(this.styling,this);this.draw=t=>{t.beginPath(),t.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle),h.call(t),t.closePath(),this.updateProps(t)}},rect:function(t,a,e,s,r){this.x=t,this.lengthX=a,this.y=e,this.breadthY=s,this.styling=r,this.center={},this.rotation={rad:0,about:this.center},this.alpha=1,this.GCParams={shadow:[0,0,"transparent",0]},this.updateProps=t=>{this.center.x=this.x+this.lengthX/2,this.center.y=this.y+this.breadthY/2};let i=new S.autoStyle(this.styling,this);this.draw=t=>{t.beginPath(),i.call(t,()=>{t.strokeRect(this.x,this.y,this.lengthX,this.breadthY)},()=>{t.fillRect(this.x,this.y,this.lengthX,this.breadthY)}),t.closePath(),this.updateProps(t)}},autoStyle:function(t,a){t="string"==typeof t?t.split("_"):t,this.object=a,this.color=a.color=t[1],this.strokeWidth=a.strokeWidth=Number(t[0]),this.styleType="FILL",""==t[0]&&(this.styleType="FILL"),""!=t[0]&&(this.styleType="STROKE"),this.call=(t,a=function(){t.stroke()},e=function(){t.fill()})=>{this.color=this.object.color,this.strokeWidth=this.object.strokeWidth,"FILL"==this.styleType&&(t.fillStyle=this.color,e()),"STROKE"==this.styleType&&(t.lineWidth=this.strokeWidth,t.strokeStyle=this.color,a())}},rotate:function(t,a){0!=t.rotation.rad&&null!=t.center&&(a.translate(t.rotation.about.x,t.rotation.about.y),a.rotate(t.rotation.rad),a.translate(-t.rotation.about.x,-t.rotation.about.y))},shadow:function(t,a){[t.shadowColor,t.shadowOffsetX,t.shadowOffsetY,t.shadowBlur]=[a[2],a[0],a[1],a[3]]},stylesAndComposites:{draw:function(t,a){a.globalAlpha=t.alpha,S.shadow(a,t.GCParams.shadow),a.globalCompositeOperation=null!=t.GCParams.op?t.GCParams.op:"source-over"},restore:function(t){t.globalAlpha=1,S.shadow(t,[0,0,"transparent",0]),t.globalCompositeOperation="source-over"}},useScene:function(t){["rect","arc"].map(t=>{S[t].prototype.shapeName=t}),this.B=t,this.allChildren=[];let a=()=>{S.clearCanvas(this.B),this.allChildren.map((t,a)=>{t.indexInScene=a,this.B.save(),S.stylesAndComposites.draw(t,this.B),S.rotate(t,this.B),t.draw(this.B),S.stylesAndComposites.restore(this.B),this.B.restore()}),requestAnimationFrame(a)};a(),this.add=t=>{t.indexInScene=this.allChildren.length,this.allChildren.push(t)},this.remove=t=>{t.indexInScene&&this.allChildren.splice(t.indexInScene,1)}},clearCanvas:function(t){t.clearRect(0,0,t.canvas.width,t.canvas.height)}};try{let i={paused:!1,over:!1,score:0,scores:[0]},h=class{static TAGN(t,a){if("number"==typeof a)return document.getElementsByTagName(t)[a]}}.TAGN("sbd",0),o=0;var A={active:!1},a=document.getElementById("canvas"),P=a.getContext("2d"),T=a.width=screen.width,O=a.height=window.innerHeight,X=(a.style.marginTop=0,a.style.marginLeft=0,T),k=O;C.resultantOf(X,k);let t,n,e,l,d,c,p,u=new S.useScene(P),s=P.createLinearGradient(0,0,0,k);s.addColorStop(1,"#000012"),s.addColorStop(0,"black");let y,m,b,x,w,M,r,g,f,v=function(t,a,e,s){let r=new S.arc(t,a,e,0,6.28,"_"+s),i=(u.add(r),p.y=k/2-3*e,.04*Math.random()-.02),h=[];for(let t=0;t<20;t++){var o=new S.arc(0,0,Math.random()*r.radius/6,0,6.3,"_black");o.x=o.rx=r.x-r.radius+Math.random()*r.radius*2,o.y=o.ry=r.y-r.radius+Math.random()*r.radius*2,Math.sqrt(Math.pow(o.x-r.x,2)+Math.pow(o.y-r.y,2))>r.radius?t--:(u.add(o),h.push(o))}let n=()=>{h.map(t=>{t.rotation.about=r.center,t.rotation.rad+=i})};return{arc:r,spots:h,remove:()=>{u.remove(r)},rotate:n,rot:i,use:()=>{n()}}};function B(){var t=(t=X/15)+(X/6-t)*y/13;m.remove(),m=new v(X/2,k/2,t,["#322323","#233223","#232332","#232323","#321212","#123212","#121232","#121212","#431212","#124312","#121243","#434343","#324312"][y]),b=m.arc,y++}function G(t,a,e,s=!0){return s?a-e<t&&t<a+e:a<t&&t<e}function Y(){u.allChildren.map(t=>{u.remove(t)}),i.over=!1,i.score=0,t=new S.rect(0,X,0,k,["",s]),u.add(t),n=[];for(let t=0;t<60;t++){var a=C.randOpt("white","crimson","goldenrod");(a=new S.arc(X/2,k/2,X/5,0,6.3,"_"+a)).x=Math.random()*X*2,a.y=Math.random()*k,a.radius=.05+.2*Math.random(),a.GCParams.shadow=[.1,.1,"transparent",0],a.alpha=1,a.rotationSpeed=5e-4*Math.random()*C.randOpt(1,-1),a.speedX=(.1+.1*Math.random())*C.randOpt(-1,1),n.push(a),u.add(a)}e="#bb112b",l=new S.rect(0,20,0,20,"_"+e),d=new S.rect(0,20,0,20,"_"+e),c=new S.rect(0,20,0,20,"_"+e),p=new S.arc(X/2,k/3,X/40,0,6.28,"_"+e),y=0,m=new v(X/2,k/2,X/15,"#232332"),b=m.arc,B(),x=.01,w=b.center,M=0,r={},p.xx=p.x,p.yy=p.y,u.add(c),u.add(l),u.add(d),u.add(p),p.crash=!1,g=[],f=[];for(let t=0;t<130;t++)f.push(314*t+314*Math.random());o=0,p.rotation.rad=0}Y(),function t(){o++,i.score=Math.floor(50*y+5*g.length),p.crash&&!i.over&&(i.over=!0,i.scores.push(i.score));let e=Math.floor(p.rotation.rad/6.28);n.map(t=>{t.x-=t.speedX,(t.x<0||X<t.x)&&(t.speedX*=-1,t.y=Math.random()*k,t.radius=.2+.9*Math.random(),t.color=C.randOpt("white","crimson","goldenrod"))}),m.use(),g.map(t=>{t.trail()}),f.map((t,a)=>{var r,i;o!=Math.floor(t)||p.crash||(r=p,i=6-5*(y+e/14)/14,t={rad:p.rotation.rad+100*x,tx:X/2,ty:k/2,trMin:0,trMax:0,ltime:0,trails:[],hit:!1,active:!0,trail:function(){this.ltime++;var t=this.trails.length,a=this.rad%6.28,e=b.radius/10*(t/13),s=p.rotation.rad%6.28;this.hit=this.hit||G(a,s,.1)&&G(r.hyp,this.trMin,this.trMax,!1),this.hit&&(r.crash=!0),t<14&&this.ltime>i&&!this.hit&&this.active?(this.ltime=0,this.trMax=Math.sqrt(Math.pow(b.x-this.tx,2)+Math.pow(b.y-this.ty,2)),this.trails.push(new S.arc(this.tx,this.ty,e,0,6.25,"_white")),(s=this.trails[t]).alpha=.45,u.add(s),this.tx+=6*e*Math.cos(a-1.57),this.ty+=6*e*Math.sin(a-1.57)):0<t&&this.ltime>i&&(this.active=!1,this.ltime=0,this.trMin=Math.sqrt(Math.pow(b.x-this.trails[0].x,2)+Math.pow(b.y-this.trails[0].y,2)),s=this.trails[0],u.remove(s),this.trails.shift())}},g.push(t))}),c.lengthX=5*p.radius,c.x=p.x-c.lengthX/2,c.y=p.y-c.breadthY/2,c.breadthY=p.radius/3,l.lengthX=l.breadthY=d.lengthX=d.breadthY=2*p.radius,l.x=c.x-l.lengthX/2,d.x=c.x+ +c.lengthX-d.lengthX/2,l.y=d.y=p.y-l.breadthY/2;var a=p,s=a.rotation.about.x,r=a.rotation.about.y;a.hyp=Math.sqrt(Math.pow(s-a.xx,2)+Math.pow(r-a.yy,2)),a.xxx=s+a.hyp*Math.cos(M),a.yyy=r+a.hyp*Math.sin(M),s=[c,p,l,d],!A.active&&.01<x&&(x-=.001),A.active&&x<.05&&(x+=.001),p.crash&&(x/=10),M+=x,12<Math.floor(p.rotation.rad/6.28)&&(B(),M=0),s.map(t=>{t.rotation.rad=M,t.rotation.about=w,p.crash&&(t.alpha=.5)}),r=i.score>=Math.max(...i.scores),h.innerHTML="Satellite Completed: <b>"+e+"/13 orbits</b>&nbsp;|&nbsp;About:  <b>"+y+"/13 Planets</b><br>Survived <b>"+g.length+"/"+f.length+" shots </b><br>"+(r?"***High":"")+"Score: <b>"+i.score+"</b> Rank: <b>"+y+"P"+g.length+"S</b><br>"+(p.crash?"<b>GAMEOVER</b><br>":"")+"TAP TO RESTART",i.paused||requestAnimationFrame(t)}(),h.onclick=function(){Y()},a.ontouchstart=function(t){A={active:!0}},a.ontouchend=function(t){A.active=!1},document.onkeypress=t=>{A={active:!0}},document.onkeyup=t=>{A.active=!1}}catch(A){}</script>