<!doctype html><title>At Sea - js13kGames 2012</title><style>body,html{margin:0;width:100%;font-family:Arial,sans-serif}#f,#m{position:absolute;width:500px;left:50%;border-radius:8px;background:radial-gradient(ellipse,#fff 43%,#e5e5e5 100%);box-shadow:3px 3px 5px 0 rgba(5,5,5,.4);padding:20px;margin:15px 0 0 -300px}#m span{float:right}#list li:hover{background:radial-gradient(ellipse,#efefef 43%,#fff 100%);cursor:hand;cursor:pointer}#c{position:absolute;top:0;left:0}li,ul{list-style-type:none;padding:0;margin:0}#b,#s{column-count:2;column-gap:20px;margin:0 20px;padding:0}button{position:absolute;right:0}#w{position:absolute;top:30px;right:10px}#cancel,#ok,#x,.ok{text-align:center;background:linear-gradient(top,#ffb76b 0,#ffa73d 50%,#ff7c00 51%,#ff7f04 100%);color:#fff;margin:5px auto;width:200px;padding:5px;text-shadow:#000 0 0 3px;border-radius:3px;display:block;cursor:hand;cursor:pointer}#ok{background:linear-gradient(top,#bfd255 0,#8eb92a 50%,#72aa00 51%,#9ecb2d 100%)}#h{position:absolute;border:1px solid #000;top:40px;right:50px;width:75px;height:300px}#i{background:radial-gradient(ellipse,#ffb76b 43%,#ff7c00 100%);position:absolute;bottom:0;left:0;width:100%}#l{position:absolute;top:0;left:30px}#t{background:radial-gradient(ellipse,#ccc 43%,#aaa 100%);margin-bottom:10px;padding:5px}#tt{background:#fff;position:absolute;border-radius:8px;background:radial-gradient(ellipse,#fff 43%,#e5e5e5 100%);box-shadow:3px 3px 5px 0 rgba(5,5,5,.4);padding:20px}#tt a{color:#bfd255}#kB,#kF,#kL,#kR{border:1px solid #000;position:absolute;display:inline-block;width:30px;height:22px;text-align:center;vertical-align:middle;padding:4px 0 0 0;top:170px;left:140px;background:radial-gradient(ellipse,#fafafa 43%,#ddd 100%)}#kL{top:90px;left:160px}#kR{top:90px;left:195px}#kB{top:130px;left:250px}</style><canvas id=c></canvas><div id=w></div><div id=m style=display:none><div id=o><div id=t></div><div><strong>Buy</strong></div><ul id=b></ul><div><strong>Sell</strong></div><ul id=s></ul></div><div id=d></div><a id=x>Close</a><a id=ok></a><a id=cancel>Cancel</a></div><canvas id=z width=200 height=87></canvas><div id=f style=display:none><canvas id=g></canvas><div id=h><div id=i><img id=l src=f1.png></div></div></div><div id=tt></div><script>window.tt=function(t,e){var n,i,o=t.getElementById("tt"),a=e.e("tooltip"),r=!1,s=['<div>Welcome to <em>At Sea</em>! You are a fisherman at sea trying to get the catch of your life. This is a game created for the <a href="http://js13kgames.com" target="_blank">js13kgames competition</a> by <a href="http://scottheckel.com">Scott Heckel</a>.<br><br>Move your ship with<br><br>Buy and sell items at islands with<br><br>Start fishing with<br><br></div><div id="kL">&#9668;</div><div id="kR">&#9658;</div><div id="kF">F</div><div id="kB">B</div>','<div style="text-align:center">To the left is a fuel gauge. Don\'t run out of gas.</div>','<div style="text-align:center">At the top is the map. As you discover islands they will appear here. You can also purchase a map at an island to reveal the entire world.</div>',"Congratulations on purchasing the sensor!  The sensor is on the right of your fuel gauge.  Watch it's level to tell if this area contains a high concentratoin of fish.","You will need to be patient reeling in your catch.<br><br>Fill up the catch bar on the right by hitting the <strong>'SPACEBAR'</strong> when your pointer is over a fishes 'sweet' spot on the circle.","The fish got away!","You have discovered your first island.  Use the <strong>'B'</strong> key to buy and sell items on the island.","You went a little too far away from home and ran out of gas.  Coincidentally, your radio is also broken, so you will remain forever lost at sea."];function l(){r=!1,o.style.display="none",n&&n()}o.onclick=function(){l()},a.on("keydown",(function(t,e){!r||13!=e&&27!=e&&32!=e||e==i||l()})).on("keyup",(function(t,e){r&&i&&i==e&&(i=null)})).on("mousedown",(function(){r&&l()})).on("tooltip",(function(t,a,l,c,h,u,d){n=h,i=d;var f=e.f("camera")[0];c||(c=c||f.w),a||(a=f.w/2-c/2),l||(l=Math.max(f.h/2-150,20)),o.innerHTML=(u||s[t])+'<p class="ok">Ok</p>',o.style.top=l+"px",o.style.left=a+"px",o.style.width=c+"px",r=!0,o.style.display=""}))},window.f=function(t,e,n){var i,o,a,r,s=t.getElementById("f"),l=(t.getElementById("h"),t.getElementById("i")),c=t.getElementById("g"),h=c.getContext("2d"),u=e.e("fishing"),d=!1,f=[],y=0,g=0,p=2*Math.PI,w="#000",x=0,m=!0;function v(t,e){return e.s<=t&&e.s+e.l>=t||e.s<=t+p&&e.s+e.l>=t+p}function k(){x=0,s.style.display="none"}c.height=c.width=350,u.on("update",(function(t){if(1==x){if(a=i=0,d)if(v(y,f[0])||v(y,f[1])){if(g+=2*t,!o){var e=c.height/2;(o=h.createRadialGradient(e,e,10,e,e,e)).addColorStop(.6,"#0F0"),o.addColorStop(1,"#00C100")}i=a=o}else g-=t,i="#C00";y=(y+=.05)>=p?y-p:y,g>=3e3&&(x=3,u.t("tooltip",-1,0,0,300,(function(){k(),u.t("catch",r)}),"Congratulations! You just caught a <strong>"+r.n+"</strong>.",d?32:null)),g<=0&&(x=2,u.t("tooltip",5,0,0,300,(function(){k(),u.t("start")}),0,d?32:null)),g-=t/10,n.r(1e3)>990&&(f[0].d=-f[0].d),n.r(1e3)>990&&(f[1].d=-f[1].d),f[0].s=s(f[0].s,f[0].d),f[0].e=s(f[0].e,f[0].d),f[1].s=s(f[1].s,f[1].d),f[1].e=s(f[1].e,f[1].d)}function s(t,e){return(t+=e)<0&&(t+=p),t>=p&&(t-=p),t}})).on("draw",(function(){if(x){var t=c.height/2;h.clearRect(0,0,c.width,c.height),h.beginPath(),h.lineWidth=1,h.strokeStyle=w,h.arc(t,t,t-30,0,p,!1),h.stroke(),f.forEach((function(e){h.beginPath(),h.lineWidth=30,h.strokeStyle=a||w,h.arc(t,t,t-h.lineWidth,e.s,e.e,!1),h.stroke()})),h.fillStyle=i||w,h.beginPath(),h.arc(t,t,t,y-.05,y+.05,!1),h.lineTo(t,t),h.fill(),l.style.height=g/3e3*300+"px"}})).on("keydown",(function(t,e){1==x&&(d=32==e)})).on("keyup",(function(t,e){1==x&&((d&=32!=e)||(a=0),27==e&&(x=2,u.t("tooltip",5,0,0,300,(function(){k(),u.t("start")}))))})).on("fish",(function(t,e,i,o){if(!x){e.c;var a=n.u(e.tc),l=0,c=0;for(var h in e.c)if((c+=e.c[h])>=a){l=h;break}o=(r=t[l]).d+i,(f=[])[0]={s:n.u(p,0)},f[0].e=f[0].s+o,f[0].d=n.u(.07,.01)-.035,f[1]={s:n.u(f[0].s+p-o,f[0].e)},f[1].s=f[1].s>p?f[1].s-p:f[1].s,f[1].e=f[1].s+o,f[1].d=n.u(.07,.01)-.035,f[0].l=f[1].l=o,x=1,d=y=0,g=1e3,s.style.display="",m&&(x=4,m=!1,u.t("tooltip",4,20,0,300,(function(){x=1})))}}))},window.m=function(t,e,n){var i=t.getElementById("m"),o=t.getElementById("o"),a=t.getElementById("d"),r=t.getElementById("b"),s=t.getElementById("s"),l=t.getElementById("ok"),c=t.getElementById("cancel"),h=t.getElementById("x"),u=e.e("menu"),d=!0,f=["Ten units of gas to help you travel the seas.","One hundred units of gas to help you travel the seas.","","Put a little extra oomph in your engine.  A little too fast for your Grandma's driving tastes.","This engine is not quite as fast as a jet, but it is fast enough for your needs.","","Help catch fish a little better.","If you can't catch the fish with this then you will never be able to catch it.","Helps you discover when lots of fish are hiding.","Find out where all the islands are in the world.","","Get a little bit further before you have to fill up the tank.","You will (maybe) be able to travel the seven seas and back before you have to fill up again."];function y(t){o.style.display=h.style.display=t?"none":"",a.style.display=l.style.display=c.style.display=t?"":"none"}function g(){d=!0,i.style.display="none",u.t("start")}function p(t,e,n,i,o){var c="",h=0;for(var d in n){var g=n[d].n,w=t.i.f[g];w&&(c+='<li data-f="'+g+'" data-p="'+n[d].p+'" data-q="'+w+'"><span>'+n[d].p*w+"</span>"+w+"x "+g+"</li>",h++)}for(var x in h||(c+="<li>Nothing to Sell.</li>"),s.innerHTML=c,c="",i)e.i.i[x]&&!t.i.i[x]&&(c+='<li data-i="'+x+'" data-p="'+o[x]+'"><span>'+o[x]+"</span>"+i[x]+"</li>");function m(r){var s=this.getAttribute("data-f"),c=this.getAttribute("data-p"),h=this.getAttribute("data-q");y(!0),a.innerHTML="Would you like to sell <strong>"+h+" "+s+"</strong> for <strong>$"+c*h+"</strong>?",l.innerHTML="Sell",l.onclick=function(){u.t("sell",s,c),p(t,e,n,i,o),y(!1)}}function v(r){var s=this.getAttribute("data-i"),c=this.getAttribute("data-p");y(!0),t.u>=c?4==s&&!t.i.i[3]||7==s&&!t.i.i[6]||12==s&&!t.i.i[11]?(r="You do not have the prior requirement for this item.",l.style.display="none"):(r="<div>Would you like to purchase a <strong>",r+=s>0?i[s]:t.deltaF+" units of gas",r+="</strong> for <strong>"+c+"</strong>.</div><div><br><strong>Description:</strong> "+f[s]+"</div>",l.innerHTML="Buy"):(r="You have insufficient funds to purchase "+i[s]+".",l.style.display="none"),a.innerHTML=r,l.onclick=function(){u.t("buy",s,c),p(t,e,n,i,o),y(!1)}}if(r.innerHTML=c,h>0)for(var k=0;k<s.children.length;k++)s.children[k].onclick=m;for(var b=0;b<r.children.length;b++)r.children[b].onclick=v}c.onclick=function(){y(!1)},h.onclick=g,u.on("menu",(function(e,n,o,a,r){d=!1,t.getElementById("t").innerHTML="Welcome to "+n.n,p(e,n,o,a,r),y(!1),i.style.display=""})).on("keydown",(function(t,e){d||27!=e&&13!=e||g()}))},window.u={u:function(t,e){return e=e||0,Math.random()*(t-e)+e},r:function(t,e){return e=e||0,Math.floor(Math.random()*(t-e)+e)}},window.g=function(t){var e=[],n={},i=1,o={},a=!1;function r(t){var n=[];for(var i in e)for(var o in e[i].co)e[i].co[o]==t&&n.push(e[i]);return n}function s(t,e){return o[t]||(o[t]=[]),o[t].push({context:this,callback:e}),this}function l(t){if(!o[t])return this;for(var e=Array.prototype.slice.call(arguments,1),n=0,i=o[t].length;n<i;n++){var a=o[t][n];if(a.context)a.callback.apply(a.context,e);else{var s=r(a.component);for(var l in s)a.callback.apply(s[l],e)}}return this}function c(t){a&&(l("update",t),l("draw"),l("postdraw"),setTimeout((function(){c(t)}),t))}return t.onmousedown=function(t){t.isRightClick=t.which?3==t.which:!!t.button&&2==t.button,l("mousedown",t)},t.onmouseup=function(t){l("mouseup",t)},t.onmousemove=function(t){l("mousemove",t)},onkeydown=function(t){return l("keydown",t,t.keyCode),!1},onkeyup=function(t){return l("keyup",t,t.keyCode),!1},{e:function(t){var o={co:t?t.split(","):[],id:i++,on:s,t:l};for(var a in e.push(o),o.co){var r=o.co[a];n[r]&&n[r](o)}return o},c:function(t,e){n[t]=e;var i=r(t);for(var o in i)e(i[o])},cs:function(t,e,n){return o[t]||(o[t]=[]),o[t].push({component:e,callback:n}),this},f:r,r:function(t){a=!0,c(t=t||1e3/60)},s:function(){a=!1},KEYS:{LEFT:37,UP:38,RIGHT:39,DOWN:40}}},function(t,e,n){var i,o,a=t.getElementById("c"),r=a.getContext("2d"),s=t.getElementById("z"),l=s.getContext("2d"),c=new e(a),h=c.e("world"),u=c.e("player,move1d,inventory"),d=c.e("camera"),y=c.e("c"),g=c.e("c"),p=c.e("c"),w=c.e("c"),x=(c.e("c"),!0),v=[{n:"Rockfish",z:[],p:50,d:2},{n:"Grouper",z:[],p:100,d:1.8},{n:"Snapper",z:[],p:100,d:1.5},{n:"Tuna",z:[],p:500,d:1.1},{n:"Marlin",z:[],p:1e3,d:1},{n:"Sailfish",z:[],p:1e3,d:.9},{n:"Salmon",z:[],p:200,d:1.1},{n:"Ahab",z:[],p:1e6,d:.5}],k=["Gas x10","Gas x100","Small Engine","Large Engine","Super Engine","Small Rod","Large Rod","Magic Rod","Sensor","Map","Small Fuel Tank","Large Fuel Tank","X-Large Fuel Tank"],b=[100,1e3,-1,5e3,15e3,-1,1e4,3e4,1e3,5e3,-1,1e4,2e4],B=["York","Hampshire","Carolina","Dakota","Jersey","Falls","Edwards","Green","Franklin","Athens","Oak","Bern","Berlin","London","Shanghai","Paris","Rio","Seattle","Tokyo","Madison"],E=["North","South","East","West","Isle of","Grand","New","Saint","Fort","Bowling"];function S(t,e){for(var n in e=c.f("zone"))if(e[n].x<=t&&e[n].x+e[n].w>=t)return e[n];return null}function F(t,e,n,i,o){var a=t<n?t:n,s=e<i?e:i;r.fillStyle=o,r.fillRect(a,s,Math.abs(n-t),Math.abs(i-e))}f(t,c,n),m(t,c,n),tt(t,c),c.c("camera",(function(t){t.y=t.x=0})),c.c("c",(function(t){t.x=t.y=t.h=t.w=0,t.m=new Image,t.m.src="cloud.png",t.m.onload=function(){t.j=1}})),c.cs("draw","c",(function(){this.j&&r.drawImage(this.m,this.x,this.y,this.w,this.h)})),c.cs("update","c",(function(t,e){var i=n.r(500,0);(this.x+this.w<d.x-500||this.x>d.x+d.w+500)&&(u.a>0&&(this.x=d.x+d.w+i),u.a<0&&(this.x=d.x-this.w-i),this.y=n.r(280-this.h,0))})),c.c("move1d",(function(t){t.v=0,t.a=0})),c.cs("update","move1d",(function(t){this.v=this.v*this.d+this.a*this.s*.4,this.x+=this.v*(t/1e3),this.x<-d.w&&(this.x=h.length+d.w+u.w-100),this.x>h.length+d.w+u.w&&(this.x=100-d.w)})),c.c("city",(function(t,e,i,o){function a(t){return t.n==o}t.d=!1,t.t=n.r(10),i="#B28B54",t.t>1&&(e="#00C800"),t.t||(e="#FCE18B",i="#DDCFA1"),1==t.t&&(e="#fff"),t.style=e,t.style2=i,i=c.f("city");do{e=n.r(E.length+5),o=e<E.length?E[e]+" ":"",o+=B[n.r(B.length)]}while(i.some(a));t.n=o,t.b=[]})),c.cs("draw","city",(function(){var t,e;if(t=this.x,e=this.w,!(t+e<d.x||t>d.x+d.w))for(var n in F(this.x,265,this.x+this.w,280,this.style),F(this.x,280,this.x+this.w,innerHeight,this.style2),this.b){var i,o=this.b[n];F(o.x,265-o.h,o.x+51,265,o.c);for(var a=6;a<o.h-10;a+=12.5)i=Math.floor(265-a-4),F(o.x+3,i,o.x+5,i-6,"#000"),F(o.x+13,i,o.x+15,i-6,"#000"),F(o.x+23,i,o.x+25,i-6,"#000"),F(o.x+33,i,o.x+35,i-6,"#000"),F(o.x+43,i,o.x+45,i-6,"#000")}})),c.cs("update","city",(function(){if(this.d|=u.x>=this.x&&u.x<=this.x+this.w||u.x+u.w>=this.x&&u.x+u.w<=this.x+this.w,x&&this.d&&!u.paused&&(x=!1,u.paused=!0,u.t("tooltip",6,0,0,400,(function(){u.paused=!1}))),!this.b.length)for(var t=n.r(this.w/50,1),e=this.x+(this.w-50*t)/2,i=["#C0C0C0","#999999","#ABABAB","#888888","#DADADA","#362E68","#201B3D","#45305D","#515151","#514B2B","#A5852B","#705A1E","#7E7E7E","#3a3a3a","#EFEFEF"],o=0;o<t;o++)this.b.push({x:e+50*o,h:25*n.r(7,0),c:i[n.r(i.length)]})})),c.c("inventory",(function(t){for(var e in t.i={f:{},i:t===u?[0,0,1,0,0,1,0,0,0,0,1,0,0]:[1,1,0,1,1,0,1,1,1,1,0,1,1]},v)t.i.f[v[e].n]=0})),c.c("zone",(function(t,e){for(var i in t.c=[],t.mc=t.tc=0,v)e=(e=Math.random()*(v[i].d-.47))>1?1:e,t.c.push(e),t.tc+=e,t.mc=e>t.mc?e:t.mc;t.w=n.r(1500,200)})),c.cs("draw","zone",(function(){this.mc})),function(t,e,i,o){e.c=[],e.length=n.r(5e4,1e4);for(var a=0;a<e.length;)(o=t.e("zone")).x=a,a=o.x+o.w;var r=S(n.r(e.length)),s=(r.tc,r.c[r.length-1]);r.mc=r.c[r.length-1]=1,r.tc-=s+1;var l=n.r(e.length/800,1);for(o=0;o<l;o++){var c=t.e("city,inventory");c.x=n.r(e.length,0),c.w=n.r(700,200),e.c.push(c)}}(c,h),h.at=function(t){for(var e in h.c){var n=h.c[e];if(n.x<=t&&n.x+n.w>=t)return n}return null},u.on("draw",(function(){t.getElementById("w").innerHTML="$"+u.u,u.j&&r.drawImage(u.dir>0?u.n:u.m,u.x,u.y)})).on("update",(function(t){if(u.paused)u.a=0;else{if(u.i.i[8]&&(u.z&&u.z.x<=u.x+u.w/2&&u.z.x+u.z.w>=u.x+u.w/2||(u.z=S(u.x+u.w/2))),u.a=0,u.key){if(37==u.key&&(u.a=-1,u.dir=-1),39==u.key&&(u.a=1,u.dir=1),u.f||(u.a=0,u.t("tooltip",7,0,0,400)),u.a&&(u.f-=.25),66==u.key){var e=h.at(u.x+u.w/2);e&&(u.paused=!0,u.t("menu",u,e,v,k,b))}70==u.key&&(u.paused=!0,u.t("fish",v,S(u.x+u.w/2),u.r)),192==u.key&&(u.u+=1e4)}u.key=0}})).on("keydown",(function(t,e){u.key=e})).on("catch",(function(t){u.i.f[t.n]++,u.paused=!1})).on("start",(function(){u.paused=!1})).on("buy",(function(t,e){switch(u.i.i[t]++,u.u-=e,t){case"0":case"1":u.f+=t?1e3:u.deltaF,u.f=u.f>u.maxF?u.maxF:u.f,u.i.i[t]=0;break;case"4":u.speed+=75;break;case"3":u.speed+=50;break;case"7":u.r+=.25;break;case"6":u.r+=.15;break;case"8":u.paused=!0,u.z=S(u.x+u.w/2),u.t("tooltip",3,80,40,400,(function(){u.paused=!1}));break;case"11":case"12":u.maxF+=50}})).on("sell",(function(t,e,n){u.u+=e*u.i.f[t],u.i.f[t]=0})),u.x=Math.floor(h.length/2),u.y=220,u.d=.98,u.dir=1,u.w=200,u.h=87,u.s=40,u.u=0,u.maxF=u.f=100,u.deltaF=10,u.paused=!1,u.r=0,u.m=new Image,u.n=new Image,u.m.src="boat.png",u.j=0,u.m.onload=function(){l.save(),l.scale(-1,1),l.drawImage(u.m,-u.w,0,u.w,u.h),u.n.src=s.toDataURL("image/png"),u.n.onload=function(){u.j=1},l.restore()},d.on("postdraw",(function(){r.restore(),i||((i=r.createLinearGradient(0,300,0,500)).addColorStop(0,"rgba(20,20,200,0.5)"),i.addColorStop(.3,"rgba(10,10,150,0.7)"),i.addColorStop(1,"rgba(10,10,150,0.95)")),F(0,300,d.w,d.h,i),function(t,e,n,i){for(var o in F((i=5)/2,10+i/2-2*i,d.w-i/2,10+i/2+2*i,"rgba(0,0,0,0.5)"),t)(u.i.i[9]||t[o].d)&&(n=Math.floor((t[o].x+t[o].w/2)*d.w/h.length),r.fillStyle=t[o].style,r.fillRect(n-i/2,10,i,i));n=Math.floor((u.x+u.w/2)*d.w/h.length),r.fillStyle="#FF0",r.fillRect(n-i/2,10,i,i)}(h.c,h.length),function(t){t=u.f/u.maxF,F(10,30,35,130,"rgba(0,0,0,0.5)"),F(10,130-100*t,35,130,t<.3?"#C10000":"#00C100")}(),u.i.i[8]&&u.z&&(temp1=u.z.tc/v.length,F(40,30,65,130,"rgba(0,0,0,0.5)"),F(40,130-100*temp1,65,130,"#aaa"))})).on("update",(function(){d.x=u.x-d.w/2+u.w/2,r.save(),r.translate(-d.x,0),r.clearRect(d.x,0,d.w,d.h),o||((o=r.createLinearGradient(0,0,0,300)).addColorStop(0,"#A3A4FF"),o.addColorStop(.9,"#C8C8FF")),F(d.x,0,d.x+d.w,300,o)})),d.w=a.width=innerWidth,d.h=a.height=innerHeight,y.h=20,y.w=30,y.x=n.r(u.x+d.w,u.x-d.w),y.y=n.r(200),g.h=30,g.w=40,g.x=n.r(u.x+d.w,u.x-d.w),g.y=n.r(200),p.h=40,p.w=80,p.x=n.r(u.x+d.w,u.x-d.w),p.y=n.r(200),w.h=50,w.w=65,w.x=n.r(u.x+d.w,u.x-d.w),w.y=n.r(200),w.h=54,w.w=90,w.x=n.r(u.x+d.w,u.x-d.w),w.y=n.r(200),c.r(),u.t("tooltip",0,0,0,400,(function(){u.t("tooltip",1,45,40,400,(function(){u.t("tooltip",2,0,40,400,(function(){u.t("start")}))}))})),u.paused=!0}(document,g,u)</script>