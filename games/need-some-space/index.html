<!doctype html><meta name=viewport content="width=device-width,user-scalable=no"><body><script>!function(){"use strict";const t=()=>performance.now(),e=(e,n)=>{let r=t();const i=n?t=>setTimeout(t,n):requestAnimationFrame,o=()=>{const n=t();e((n-r)/1e3),i(o),r=n};o()},n=function t(e,n){if(!(this instanceof t))return new t(e,n);switch(typeof e){case Array.isArray(e)&&"object":case e instanceof NodeList&&"object":return this.push(...e);case"object":return this.push(e);case"string":return this.find(e,n)}};n.prototype={push:function(...t){return[].push.apply(this,t),this},find:function(t,e){return e=e||this[0]||document||documentElement,this.push(...e.querySelectorAll(t))},each:function(t){return[].forEach.call(this,t),this},on:function(t,e){return this.each((n=>n.addEventListener(t,e.bind(n))))},attr:function(...t){const[e,n]=t;return this.length>0&&1===t.length?this[0][e]:(2===t.length&&this.each((t=>t[e]=n)),this)},html:function(...t){return this.attr("innerHTML",...t)},css:function(t,e){return"object"==typeof t?(Object.keys(t).forEach((e=>this.css(e,t[e]))),this):this.each((n=>n.style[t]=e))},appendTo:function(t){return this.each((e=>t.appendChild(e)))}};class r{constructor(t=0,e=0){this.set(t,e)}set(t,e){return this.x=i(t),this.y=i(e),this}min(t){return this.length(Math.max(t,this.length()))}max(t){return this.length(Math.min(t,this.length()))}add(t){return this.set(this.x+t.x,this.y+t.y)}subtract(t){return this.set(this.x-t.x,this.y-t.y)}multiply(t){return this.set(this.x*t,this.y*t)}divide(t){return this.set(this.x/t,this.y/t)}angle(t){if(null!=t){const e=this.length();return this.set(Math.sin(t),Math.cos(t)).multiply(e)}return Math.atan2(this.x,this.y)}length(t){if(null!=t){const e=this.angle();return this.set(Math.sin(e),Math.cos(e)).multiply(t)}return Math.sqrt(this.x**2+this.y**2)}normalize(){const t=this.length();return t?this.divide(t):this}rotate(){return this.set(-this.y,this.x)}dot(t){return t=t||this,this.x*t.x+this.y*t.y}clone(){return new r(this.x,this.y)}}function i(t){if(!0===isNaN(t))throw new Error("NaN in Vect");if(!1===isFinite(t))throw new Error("Infinity in Vect");return Math.round(1e6*t)/1e6}const o=/\s*([MLHVCSQTAEZ][\s,-\d\.]*)/gi,s=/[A-Z]/,a=/(-?\d+(\.\d+(e-?\d)?)?)/g,c=/,/g,l=(t,e)=>{let n=0,r=0,i={x:n,y:r},h={x:n,y:r};if(Array.isArray(e))return l(t,e.join());"string"==typeof e&&(t.beginPath(),e.replace(c," ").split(o).forEach((e=>{const[o,c,l,u,d,y,p,g]=(t=>(t.match(a)||[]).map(parseFloat))(e||""),f=s.test(e);switch((e[0]||"").toUpperCase()){case"M":n=f?o:n+o,r=f?c:r+c,t.moveTo(n,r);break;case"L":n=f?o:n+o,r=f?c:r+c,t.lineTo(n,r);break;case"H":n=f?o:n+o,t.lineTo(n,r);break;case"V":r=f?o:r+o,t.lineTo(n,r);break;case"C":i.type="C",i.x=f?o:n+o,i.y=f?c:r+c,h.type="C",h.x=f?l:n+l,h.y=f?u:r+u,n=f?d:n+d,r=f?y:r+y,t.bezierCurveTo(i.x,i.y,h.x,h.y,n,r);break;case"S":i.type="C",i.x="C"===h.type?h.x:n,i.y="C"===h.type?h.y:r,h.type="C",h.x=f?o:n+o,h.y=f?c:r+c,n=f?l:n+l,r=f?u:r+u,t.bezierCurveTo(i.x,i.y,h.x,h.y,n,r);break;case"Q":i.type="Q",i.x=f?o:n+o,i.y=f?c:r+c,n=f?l:n+l,r=f?u:r+u,t.quadraticCurveTo(i.x,i.y,n,r);break;case"T":i.type="Q",i.x="Q"===i.type?i.x:n,i.y="Q"===i.type?i.y:r,n=f?o:n+o,r=f?c:r+c,t.quadraticCurveTo(i.x,i.y,n,r);break;case"A":break;case"E":n=f?o:n+o,r=f?c:r+c,t.ellipse(n,r,l,u,d,y,p,g);break;case"Z":t.closePath()}})))},h=t=>{const e=window.innerWidth,n=window.innerHeight,i=new r(0,0),o=new r,s=new r,a=new r,c=new r(-e/2,-n/2);return t.attr={width:e,height:n,position:i,velocity:o,friction:s,acceleration:a,direction:-Math.PI/2,thrust:0,hitpoints:5,viewport:c,destroyed:!0},t.on("collision",(e=>{t.attr.hitpoints-=1,t.attr.hitpoints<=0&&t.emit("destroyed")})),t.on("destroyed",(e=>{t.attr.destroyed=!0,t.attr.thrust=0})),t.on("reset",(()=>{t.attr.destroyed=!1,t.attr.thrust=0,t.attr.hitpoints=5,t.attr.direction=-Math.PI/2,t.attr.position.set(0,0),t.attr.viewport.set(-e/2,-n/2)})),{engine:t=>{const e=t.timing.engine,n=t.attr.mouse.clone().subtract(i).add(c);t.attr.direction=n.angle(),t.attr.destroyed?a.set(0,0):a.length(t.attr.thrust).angle(t.attr.direction).multiply(-1),t.attr.thrust?o.add(a.clone().multiply(e)).max(1e3):(s.set(-o.x,-o.y).divide(100),o.add(s));const r=o.clone().multiply(e);i.add(r),c.add(r)},render:t=>{if(!t.debug)return;const e=t.stage.ctx;t.attr.direction;const n=t.attr.position.clone().subtract(t.attr.viewport),r=t.attr.velocity,i=t.attr.acceleration;e.save(),e.lineWidth=8,e.lineCap="round",l(e,["M",n.x,n.y,"l",r.x,r.y,"Z"]),e.strokeStyle="rgba(0,255,0,.5)",e.stroke(),l(e,["M",n.x,n.y,"l",i.x,i.y,"Z"]),e.strokeStyle="rgba(255,0,0,.5)",e.stroke(),e.restore()}}},u=(t,e,n)=>{const r=document.createElement("canvas"),i=r.getContext("2d");return r.width=t,r.height=e,n&&n.appendChild(r),{canvas:r,ctx:i}},d=t=>{n("body").css({background:"#0a0b3d",margin:0,padding:0});const e=window.innerWidth,r=window.innerHeight,{canvas:i,ctx:o}=u(e,r,document.body);return n(i).css("cursor","crosshair"),t.stage={canvas:i,ctx:o,width:e,height:r},{engine:()=>{},render:()=>{o.clearRect(0,0,e,r)}}},y=t=>{t.attr.thrust=0,t.attr.mouse=new r;const e=e=>{t.attr.mouse.set(e.pageX,e.pageY)};return n(t.stage.canvas).on("mousedown",(n=>{e(n),t.attr.destroyed||(t.attr.thrust=500)})).on("mousemove",e).on("mouseup",(n=>{e(n),t.attr.thrust=0})),{}},p=t=>{const e=new Map;return t.on=(n,r)=>(e.has(n)||e.set(n,[]),e.get(n).push(r),()=>t.off(n,r)),t.off=(t,n)=>{if(!e.has(t))return;const r=e.get(t).filter((t=>t!==n));e.set(t,r)},t.emit=(t,n)=>{e.has(t)&&e.get(t).forEach((t=>t&&t(n)))},{}},g=t=>{const{width:e,height:n}=t.attr,{canvas:r,ctx:i}=u(e,n),o=e/2,s=n/2,a="Need some space.";i.font="48px monospace",i.textAlign="center",i.textBaseline="middle",i.lineWidth=2,i.strokeStyle="#000000",i.strokeText(a,o,s),i.fillStyle="#bbb5f1",i.fillText(a,o,s);let c=null,l=null;const h=()=>{c=null,t.emit("reset")};return{engine:t=>{t.timing.engine;const e=t.timing.clock;c?(l=(e-c)/3,l>=1&&h()):t.attr.destroyed&&!c&&(c=e,l=0)},render:t=>{const i=t.stage.ctx;t.attr.destroyed&&(i.save(),i.rect(0,0,e,n),i.fillStyle=`rgba(10,11,61,${l})`,i.fill(),i.globalAlpha=l,i.drawImage(r,0,0,e,n),i.restore())}}};const f=new(function(){function t(e){this._value=NaN,this._seed="string"==typeof e?this.hashCode(e):"number"==typeof e?this.getSafeSeed(e):this.getSafeSeed(t.MIN+Math.floor((t.MAX-t.MIN)*Math.random())),this.reset()}return t.prototype.next=function(e,n){return void 0===e&&(e=0),void 0===n&&(n=1),this.recalculate(),this.map(this._value,t.MIN,t.MAX,e,n)},t.prototype.nextInt=function(e,n){return void 0===e&&(e=10),void 0===n&&(n=100),this.recalculate(),Math.floor(this.map(this._value,t.MIN,t.MAX,e,n+1))},t.prototype.nextString=function(t,e){void 0===t&&(t=16),void 0===e&&(e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789");for(var n="";n.length<t;)n+=this.nextChar(e);return n},t.prototype.nextChar=function(t){return void 0===t&&(t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"),t.substr(this.nextInt(0,t.length-1),1)},t.prototype.nextArrayItem=function(t){return t[this.nextInt(0,t.length-1)]},t.prototype.nextBoolean=function(){return this.recalculate(),this._value>.5},t.prototype.skip=function(t){for(void 0===t&&(t=1);t-- >0;)this.recalculate()},t.prototype.reset=function(){this._value=this._seed},t.prototype.recalculate=function(){this._value=this.xorshift(this._value)},t.prototype.xorshift=function(t){return t^=t<<13,t^=t>>17,t^=t<<5},t.prototype.map=function(t,e,n,r,i){return(t-e)/(n-e)*(i-r)+r},t.prototype.hashCode=function(t){var e=0;if(t)for(var n=t.length,r=0;r<n;r++)e=(e<<5)-e+t.charCodeAt(r),e|=0,e=this.xorshift(e);return this.getSafeSeed(e)},t.prototype.getSafeSeed=function(t){return 0===t?1:t},t.MIN=-2147483648,t.MAX=2147483647,t}())("4TNwT:kzWc76yLgW"),x=(t=100,e=0)=>{const n=Math.min(t,e),r=Math.max(t,e);return Math.round(f.next()*(r-n))+n},m=(t,e,n=0)=>{const r=Math.sqrt(t*e)/4;let i=0,o=0;const{canvas:s,ctx:a}=u(t,e);for(let n=0;n<r;n++){a.beginPath();const r=1.2*Math.random();a.arc(x(t),x(e),r,0,2*Math.PI,!1),a.fillStyle=`hsl(${[0,60,240][n%3]},${x(50,100)}%,85%)`,a.fill()}return{engine:r=>{const s=r.attr.position.clone().multiply(n);i=s.x%t,o=s.y%e},render:n=>{const r=n.stage.ctx;[-i,(i<0?-t:+t)-i].forEach((n=>{[-o,(o<0?-e:+e)-o].forEach((i=>{r.drawImage(s,n,i,t,e)}))}))}}},M=()=>{const t=30,e=40,{canvas:n,ctx:r}=u(t,e);return l(r,["M",t/2,0,"L",t,e,"L",t/2,3*e/4,"L",0,e,"L",t/2,0,"Z","M",t/2,e/2-4].join()),r.fillStyle="rgba(255,255,255,.85)",r.fill("evenodd"),r.strokeStyle="#FFF",r.stroke(),{engine:t=>{},render:r=>{if(r.attr.destroyed)return;const i=r.stage.ctx,o=r.attr.position.clone().subtract(r.attr.viewport);i.save(),i.translate(o.x,o.y),i.rotate(-r.attr.direction),i.drawImage(n,-t/2,-e/2,t,e),i.restore()}}},v=()=>{const{canvas:t,ctx:e}=u(12,24);l(e,["M",3,0,"L",0,16,"L",3,8,"L",6,24,"L",9,8,"L",12,16,"L",9,0,"Z"].join()),e.fillStyle="rgba(255,127,127,1)",e.fill();let n=Math.PI;return{engine:t=>{n=t.attr.direction},render:e=>{if(e.attr.thrust&&!e.attr.destroyed){const r=e.stage.ctx,i=e.attr.position.clone().subtract(e.attr.viewport);r.save(),r.translate(i.x,i.y),r.rotate(-n),r.drawImage(t,-6,24,12,24),r.restore()}}}},b=[[5,5],[0,9],[0,8],[1,9],[0,7],[1,8],[2,9],[3,9],[2,8],[1,7],[0,6],[0,5],[1,6],[2,7],[3,8],[4,9],[5,9],[4,8],[3,7],[2,6],[1,5],[0,4],[0,3],[1,4],[2,5],[3,6],[4,7],[5,8],[6,9]],w="rgba(100,100,132,.95)",k="rgba(100,100,132,.5)",S="rgba(255,255,127,.5)",E="rgba(255,127,127,.75)",C=(t,e)=>{const n=250,r=-t/2,i=-e/2,o=[0,1,2,3,4,5];let s=0;for(let t=0;t<=500;t++)s=x(b.length),s=Math.max(s,1),s=Math.min(s,b.length-1),o.push(s);const a=[],c=[];o.forEach(((t,e)=>{const[o,s]=b[t];a.push({x:e*n+r,y:100*o+i}),c.push({x:e*n+r,y:100*s+i})}));const h={},u={};return{engine:t=>{const e=t.attr.position,i=Math.floor((e.x-r)/n),o=Math.ceil((e.x-r)/n),s=a[i]||{},l=a[o]||{},d=c[i]||{},y=c[o]||{};let p=(l.y-s.y)/(l.x-s.x),g=l.y-p*l.x;h.x=e.x,h.y=p*e.x+g,h.collision=e.y-16<h.y;let f=(y.y-d.y)/(y.x-d.x),x=y.y-f*y.x;u.x=e.x,u.y=f*e.x+x,u.collision=e.y+16>u.y,t.attr.hitpoints>0&&(h.collision||u.collision)&&t.emit("collision",e.clone())},render:t=>{const n=t.stage.ctx;n.save();const r=t.attr.viewport;n.translate(-r.x,-r.y),n.lineWidth=24,n.lineJoin="round",n.lineCap="round",l(n,["M",a[0].x,-e,...a.map((t=>["L",t.x,t.y])),"L",a[a.length-1].x,-e,"Z"]),n.strokeStyle=k,n.stroke(),n.fillStyle=w,n.fill(),l(n,["M",c[0].x,+e,...c.map((t=>["L",t.x,t.y])),"L",c[c.length-1].x,+e,"Z"]),n.strokeStyle=k,n.stroke(),n.fillStyle=w,n.fill(),t.debug&&(n.lineWidth=8,t.attr.position,l(n,["M",h.x,h.y,"E",h.x,h.y,10,10,0,0,2*Math.PI,!1]),n.fillStyle=h.collision?E:S,n.fill(),l(n,["M",u.x,u.y,"E",u.x,u.y,10,10,0,0,2*Math.PI,!1]),n.fillStyle=u.collision?E:S,n.fill()),n.restore()}}},I=()=>{const t=["#A10100","#DA1F05","#F33C04","#FE650D","#FFC11F","#FFF75D"];let e=[],n=null;return{engine:r=>{const i=r.timing.engine,o=r.timing.clock;if(n){const t=(o-n)/3;e.forEach((e=>{e.pos.add(e.vel.clone().multiply(i)),e.r=2*(1-t)})),t>=1&&(e=[],n=null)}else r.attr.destroyed&&!n&&((r,i)=>{n=r;for(let n=0;n<48;n++){let n=i.clone().clone();n.length(x(50,100)),n.angle(2*Math.random()*Math.PI),e.push({pos:i.clone(),vel:i.clone().length(x(200,400)).angle(2*Math.random()*Math.PI),clr:t[x(t.length-1)],r:2}),e.push({pos:i.clone(),vel:i.clone().length(x(800,1600)).angle(2*Math.random()*Math.PI),clr:"#FFFFFF",r:2})}})(r.timing.clock,r.attr.position)},render:t=>{const r=t.stage.ctx;n&&e.forEach((({pos:e,r:n,clr:i})=>{r.beginPath();const{x:o,y:s}=e.clone().subtract(t.attr.viewport);r.arc(o,s,n,0,2*Math.PI,!1),r.fillStyle=i,r.fill()}))}}},F=()=>{const t={clock:0,engine:0,render:0};let e=!1;const n=t=>t?.engine&&t?.engine(i),r=t=>t?.render&&t?.render(i),i={timing:t,pause:t=>null==t?e:e=!!t,doGameEngine:n,engine:r=>{e||(t.clock+=r,t.engine=r,o.forEach(n),n(i.scene),s.forEach(n))},doGameRender:r,render:n=>{e||(t.render=n,o.forEach(r),r(i.scene),s.forEach(r))}},o=[p(i),d(i),h(i),y(i)],s=[g(i)];return i.scene=(t=>{const e=t.stage.width,n=t.stage.height,r=[m(e,n,.25),m(e,n,.375),m(e,n,.5),C(e,n),M(),v(),I()];return{engine:({doGameEngine:t})=>{r.forEach(t)},render:({doGameRender:t})=>{r.forEach(t)}}})(i),i};!function(){const t=F();e(t.engine,5),e(t.render)}()}()</script>