<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Keep online</title>
    <style type="text/css">
    .canvas {width: 400px;height: 600px;background: #000;}
    .container {width: 400px;height:600px;position: relative;margin: 0 auto;}
    .states {position: absolute;left: 10px;top: 10px;color: #fff;}
    .panel {width: 100%;height: 100%;background: rgba(181, 173, 255, 0.7);position: absolute;left: 0;top: 0;text-align: center;display: none;}
    .title {margin-top: 100px; font-size:26px; font-weight:900; margin-bottom:50px; color:#fff;}
    button {background:#c4cbd0;padding:0;border:none; border:1px solid #fff; padding:8px 13px; color:#fff;}
    </style>
</head>
<body>
    <div class="container">
        <canvas id="canvas" class="canvas"></canvas>
        <div class="states" id="states">
            <div class="score">level: <span id="level">1</span></div>
            <div class="score">score: <span id="score">0</span></div>
            <div class="score">life: <span id="life">100</span></div>
            <div class="score">lose: <span id="lose">0</span></div>
        </div>
        <div class="panel" id="p-over">
            <div class="title">You are offline</div>
            <div class="buttons">
                <button id="restart">Restart</button>
            </div>
        </div>
        <div class="panel" id="p-start" style="display:block">
            <div class="title">Welcome to the battlefield</div>
            <div class="buttons">
                <button id="start">Start Game</button>
            </div>
        </div>
    </div>
    <script>!function(e){var t={};function n(i){if(t[i])return t[i].exports;var f=t[i]={i:i,l:!1,exports:{}};return e[i].call(f.exports,f,f.exports,n),f.l=!0,f.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var f in e)n.d(i,f,function(t){return e[t]}.bind(null,f));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";var i=o(n(2)),f=o(n(3));function o(e){return e&&e.__esModule?e:{default:e}}var r={enemyGap:0,mute:!1,score:0,level:1,lose:0},s=document.body.querySelector("#canvas");s.width=400,s.height=600,i.default.init();var h=[],a=[],c=0,u=i.default.sprite({x:0,y:i.default.canvas.height-100,color:"#7070c5",width:40,height:40,speed:5,life:100,update:function(e){(c+=e)>.2&&(u.shoot(),c=0),i.default.keys.pressed("left")&&u.x>this.speed-u.width&&(u.x-=this.speed),i.default.keys.pressed("right")&&u.x<i.default.canvas.width-this.speed&&(u.x+=this.speed),i.default.keys.pressed("up")&&u.y>this.speed&&(u.y-=this.speed),i.default.keys.pressed("down")&&u.y<i.default.canvas.height&&(u.y+=this.speed)},render:function(){this.context.fillStyle=this.color,this.context.beginPath(),this.context.lineTo(this.x,this.y+this.height),this.context.lineTo(this.x+this.width/2,this.y+this.height-20),this.context.lineTo(this.x+this.width,this.y+this.height),this.context.lineTo(this.x+this.width/2,this.y),this.context.fill()},shoot:function(){var e=i.default.sprite({x:this.x+this.width/2-2.5,y:this.y,color:"#fff",width:5,height:5,free:!1,speed:7,update:function(){this.y-=this.speed,this.y<0&&(this.free=!0)}});r.mute,h.push(e)}});function d(){var e=i.default.sprite({x:Math.random()*i.default.canvas.width,y:0,color:"rgb("+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+",1)",width:40,height:20,speed:4*Math.random()*(1+(r.level-1)/10),update:function(){this.y+=this.speed,this.y>i.default.canvas.height&&(this.free=!0,r.lose++,x.renderLose())},render:function(){this.context.fillStyle=this.color,this.context.beginPath(),this.context.lineTo(this.x,this.y),this.context.lineTo(this.x+this.width/2,this.y+10),this.context.lineTo(this.x+this.width,this.y),this.context.lineTo(this.x+this.width/2,this.y+this.height),this.context.fill()},life:10*Math.random()});a.push(e)}function l(e,t){return Math.max(e.x,t.x)<=Math.min(e.x+e.width,t.x+t.width)&&Math.max(e.y,t.y)<=Math.min(e.y+e.height,t.y+t.height)}function p(e){return document.getElementById(e)}var x={$score:p("score"),$restart:p("restart"),$mute:p("mute"),$life:p("life"),$level:p("level"),$start:p("start"),$pOver:p("p-over"),$pStart:p("p-start"),$lose:p("lose"),renderScore:function(){x.$score.innerHTML=r.score},renderLife:function(){x.$life.innerHTML=u.life},renderLevel:function(){x.$level.innerHTML=r.level},renderLose:function(){x.$lose.innerHTML=r.lose},init:function(){function e(){a=[],h=[],u.x=0,u.y=i.default.canvas.height-100,u.life=100,r={enemyGap:0,mute:!1,score:0,level:1,lose:0},m.start(),x.$pOver.style.display="none",x.renderScore(),x.renderLevel(),x.renderLife(),x.renderLose()}x.$restart.addEventListener("click",function(){e()}),x.$start.addEventListener("click",function(){e(),x.$pStart.style.display="none"}),x.renderScore(),x.renderLevel(),x.renderLife(),x.renderLose()},over:function(){m.stop(),x.$pOver.style.display="block"}},y=i.default.sprite({render:function(){this.context.strokeStyle="rgba(255,255,255,.1)";for(var e=0,t=u.life/10;e<t;e++)this.context.lineWidth=30,this.context.beginPath(),this.context.arc(i.default.canvas.width/2,i.default.canvas.height,60*e,Math.PI,2*Math.PI),this.context.stroke()}}),m=i.default.gameLoop({fps:60,update:function(e){r.enemyGap+=e,u.update(e),h.forEach(function(e){a.forEach(function(t){l(e,t)&&(t.life-=5,t.life<=0&&(t.free=!0,r.score+=10,r.level=Math.floor(r.score/150)+1,x.renderLevel(),x.renderScore()),e.free=!0,!r.mute&&f.default.hit.play())})}),h.forEach(function(e,t){e.update(),e.free&&h.splice(t,1)}),a.forEach(function(e,t){e.update(),e.free&&a.splice(t,1)}),r.enemyGap>.6&&(r.enemyGap=0,d()),a.forEach(function(e){l(u,e)&&(!r.mute&&f.default.hit.play(),e.free=!0,u.life-=30,x.renderLife(),u.life<=0&&x.over())})},render:function(){y.render(),u.render(),h.forEach(function(e){e.render()}),a.forEach(function(e){e.render()})}});x.init()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o={init:function(e){var t=this.canvas=document.getElementById(e)||e||document.querySelector("canvas");if(!t)throw Error("You must provide a canvas element for the game");this.context=t.getContext("2d")},_noop:new Function,_tick:new Function,gameLoop:function(e){if(!(e=e||{}).update||!e.render)throw Error("You must provide update() and render() functions");var t=e.fps||60,n=0,i=1e3/t,f=1/t,r=!1===e.clearCanvas?o._noop:function(){o.context.clearRect(0,0,o.canvas.width,o.canvas.height)},s=void 0,h=void 0,a=void 0,c=void 0;function u(){if(h=requestAnimationFrame(u),a=performance.now(),c=a-s,s=a,!(c>1e3)){for(o._tick(),n+=c;n>=i;)d.update(f),n-=i;r(),d.render()}}var d={update:e.update,render:e.render,isStopped:!0,start:function(){s=performance.now(),this.isStopped=!1,requestAnimationFrame(u)},stop:function(){this.isStopped=!0,cancelAnimationFrame(h)},_frame:u,set _last(e){s=e}};return d}};(function(){for(var e={},t={},n={13:"enter",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down"},i=0;i<26;i++)n[65+i]=(10+i).toString(36);for(var f=0;f<10;f++)n[48+f]=""+f;document.body.addEventListener("keydown",function(i){var f=n[i.which];t[f]=!0,e[f]&&e[f](i)}),document.body.addEventListener("keyup",function(e){t[n[e.which]]=!1}),document.body.addEventListener("blur",function(e){t={}}),o.keys={bind:function(t,n){[].concat(t).map(function(t){e[t]=n})},unbind:function(t,n){[].concat(t).map(function(t){e[t]=n})},pressed:function(e){return!!t[e]}}})(),function(){var e=function(){function e(t,n){f(this,e),this._x=t||0,this._y=n||0}return i(e,[{key:"add",value:function(e,t){this.x+=(e.x||0)*(t||1),this.y+=(e.y||0)*(t||1)}},{key:"clamp",value:function(e,t,n,i){this._c=!0,this._a=e,this._b=t,this._d=n,this._e=i}},{key:"x",get:function(){return this._x},set:function(e){this._x=this._c?Math.min(Math.max(this._a,e),this._d):e}},{key:"y",get:function(){return this._y},set:function(e){this._y=this._c?Math.min(Math.max(this._b,e),this._e):e}}]),e}();o.vector=function(t,n){return new e(t,n)},o.vector.prototype=e.prototype;var t=function(){function e(){f(this,e)}return i(e,[{key:"init",value:function(e,t,n,i){for(t in e=e||{},this.position=o.vector(e.x,e.y),this.velocity=o.vector(e.dx,e.dy),this.acceleration=o.vector(e.ddx,e.ddy),this.width=this.height=0,this.context=o.context,e)this[t]=e[t];if(n=e.image)this.image=n,this.width=n.width,this.height=n.height;else if(n=e.animations){for(t in n)this.animations[t]=n[t].clone(),i=i||n[t];this._ca=i,this.width=i.width,this.height=i.height}return this}},{key:"isAlive",value:function(){return this.ttl>0}},{key:"collidesWith",value:function(e){return this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y+e.height&&this.y+this.height>e.y}},{key:"update",value:function(e){this.advance(e)}},{key:"render",value:function(){this.draw()}},{key:"playAnimation",value:function(e){this._ca=this.animations[e],this._ca.loop||this._ca.reset()}},{key:"advance",value:function(e){this.velocity.add(this.acceleration,e),this.position.add(this.velocity,e),this.ttl--,this._ca&&this._ca.update(e)}},{key:"draw",value:function(){this.image?this.context.drawImage(this.image,this.x,this.y):this._ca?this._ca.render(this):(this.context.fillStyle=this.color,this.context.fillRect(this.x,this.y,this.width,this.height))}},{key:"x",get:function(){return this.position.x},set:function(e){this.position.x=e}},{key:"y",get:function(){return this.position.y},set:function(e){this.position.y=e}},{key:"dx",get:function(){return this.velocity.x},set:function(e){this.velocity.x=e}},{key:"dy",get:function(){return this.velocity.y},set:function(e){this.velocity.y=e}},{key:"ddx",get:function(){return this.acceleration.x},set:function(e){this.acceleration.x=e}},{key:"ddy",get:function(){return this.acceleration.y},set:function(e){this.acceleration.y=e}}]),e}();o.sprite=function(e){return(new t).init(e)},o.sprite.prototype=t.prototype}(),t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=new Audio("data:audio/ogg;base64,UklGRowSAABXQVZFZm10IBAAAAABAAEAIlYAACJWAAABAAgAZGF0YWgSAACPc3BwcHBwcXFxj3txcXFxcnJycoSIcnJycnNzc3NzjYNzc3N0dHR0dHSMiHR0dHR1dXV1dX+VeXV1dXV1dnZ2doaUdnZ2dnZ2dnZ3d3+Wfnd3d3d3d3d3d3eJl3d3d3d3eHh4eHh4hJiAeHh4eHh4eHh4eXmOmHh4eHh5eXl5eXl5eYeZhXl5eXl5eXl5eXl5eYuZg3l5eXl5eXp6enp6enqamXl5enp6enp6enp6enp6kJqGenp6enp6enp6enp6enuOmox6enp6enp6enp7e3t7e3uPmpB6enp6enp7e3t7e3t7e3t7j5qWenp6e3t7e3t7e3t7e3t7e3uLm5p+e3t7e3t7e3t7e3t7e3t7e3t/m5uQe3t7e3t7e3t7e3t7e3t7e3t7e4Wbm5J7e3t7e3t7e3t7e3t7e3t7e3t8fHyXm5uHe3t7e3t7e3t7e3t7e3t7e3t8fHx8fI6bm5t7e3t7e3t7e3t7e3t7e3t7e3x8fHx8fHx8m5ubmXt7e3t7e3t7e3t7e3t7e3t7e3x8fHx8fHx8fJabm5uKe3t7e3t7e3t7e3t7e3t7e3t7fHx8fHx8fHx8fHyIm5ubm4h7e3t7e3t7e3t7e3t7e3t7e3t7fHx8fHx8fHx8fHx8fH6cm5ubmoZ6e3t7e3t7e3t7e3t7e3t7e3t7e3t8fHx8fHx8fHx8fHx8fHx8kpybm5uajHp6enp7e3t7e3t7e3t7e3t7e3t7e3t7e3x8fHx8fHx8fHx8fHx8fHx8fHyUnJubm5qajnp6enp6enp6e3t7e3t7e3t7e3t7e3t7e3t7e3t8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fJKcm5ubm5qamoB6enp6enp6enp6enp7e3t7e3t7e3t7e3t7e3t7e3t7e3x8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fX19fYGcnJybm5uampqZmX15eXl6enp6enp6enp6enp6enp6e3t7e3t7e3t7e3t7e3t7e3t7e3t8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fH19fX19fX19fX19fX19fX19gZ2cnJybm5uampqamZmZmH55eXl5eXl5eXl5eXl5eXp6enp6enp6enp6enp6enp7e3t7e3t7e3t7e3t7e3t7e3t7e3x8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fn5+fn5+fn5+fn5+foCdnZ2cnJybm5uampqamZmZmJiYmJeXl5eFd3d3d3d3d3d3eHh4eHh4eHh4eHh4eXl5eXl5eXl5eXl5eXl6enp6enp6enp6enp6enp6e3t7e3t7e3t7e3t7e3t7e3t7e3t8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fH19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/fw==");t.default={hit:i}}]);</script>
</body>

</html>