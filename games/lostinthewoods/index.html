<!doctype html><html><meta content="width=device-width" name=viewport><link href=img/favicon.ico rel=icon type=image/x-icon><title>Lost in the Woods</title><style media=screen>body,canvas,html{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}body{background-color:#000}#litw{display:block;background-color:grey;margin:auto;border:1px solid #444}</style><canvas id=litw></canvas><script>function $(e){return document.getElementById(e)}function cloneReverseArray(e,t){cloneArray(e,t);for(var i=0;i<t.length;i++)t[i].reverse()}function cloneArray(e,t){for(var i=0;i<e.length;i++)t[i]=e[i].slice()}function Character(){this.tileFrom=[2,2],this.tileTo=[2,2],this.timeMoved=0,this.dimensions=[tileW,tileH],this.position=[2*tileW,2*tileH],this.delayMove=400,this.moving=!1,this.direction="U",this.name="ROBERT"}function startMenu(){ctx.fillStyle="#000",ctx.fillRect(0,0,dimension,dimension),window.requestAnimationFrame(DrawNotebook),window.addEventListener("keydown",(function(e){32!=e.keyCode||started||(started=!0,window.requestAnimationFrame(drawGame),window.addEventListener("keydown",(function(e){var t=e.keyCode;if(t>=37&&t<=40){for(var i in keysDown)keysDown[i]=!1;keysDown[t]=!0}})),window.addEventListener("keyup",(function(e){var t=e.keyCode;t>=37&&t<=40&&(keysDown[t]=!1)})),viewport.screen=[$("litw").width,$("litw").height])}))}function DrawNotebook(){ctx.drawImage(notebook,0,0,dimension,dimension),ctx.fillStyle="#000",ctx.font="bold "+dimension/70+"pt Arial";for(var e=0;e<story.beginning.length;e++){var t=story.beginning[e][0].toUpperCase();ctx.fillText(t,dimension/3.25,dimension/4.6+e*(dimension/12))}if(story.start)ctx.fillStyle="#FFF",ctx.font="bold "+dimension/40+"pt Arial",ctx.fillText("SPACE TO START",dimension/2.7,dimension/1.1);else{if(survived){t=story.ending.good[0].toUpperCase();ctx.fillText(t,dimension/3.25,dimension/4.6+dimension/12*5)}else{t=story.ending.bad[0].toUpperCase();ctx.fillText(t,dimension/3.25,dimension/4.6+dimension/12*5),ctx.drawImage(bloodsplat,0,0,cH,cH)}ctx.fillText(player.name,dimension/3.25,dimension/4.6+dimension/12*6)}window.requestAnimationFrame(DrawNotebook)}function toIndex(e,t){return t*mapW+e}function generatePlayer(e){var t=[],i=[],o=[],r=[],a=[],l=[0,0];cloneArray(bootpantsPartL,o),cloneArray(bootpantsPartR,r),"L"==e&&(cloneArray(facePartL,t),cloneArray(hairPartR,i)),"U"==e&&(cloneArray(hairPartL,t),cloneArray(hairPartR,i)),"R"==e&&(cloneArray(hairPartL,t),cloneArray(facePartR,i)),"D"==e&&(cloneArray(facePartL,t),cloneArray(facePartR,i));for(var n=1;n<=4;n++){switch(n){case 1:cloneArray(t,a),l=[0,0];break;case 2:cloneArray(i,a),l=[1,0];break;case 3:cloneArray(o,a),l=[0,1];break;case 4:cloneArray(r,a),l=[1,1]}for(var s=0;s<a.length;s++)for(var c=0;c<a[s].length;c++)0!=a[s][c]&&(ctx.fillStyle=colorCode[a[s][c]],ctx.fillRect(l[0]*tileW/2+Math.floor(viewport.offset[0]+player.position[0]+c*(tileW/16)),Math.floor(l[1]*tileH/2+viewport.offset[1]+player.position[1]+s*(tileH/16)-tileH/4),Math.ceil(tileH/16),Math.ceil(tileW/16)))}}function drawGame(){if(ctx.font="bold 10pt Arial",null!=ctx){var e=Date.now(),t=Math.floor(Date.now()/1e3);t!=currentSecond?(timer--,currentSecond=t,frameLastSecond=frameCount,frameCount=1):frameCount++,player.processMovement(e)||(keysDown[37]&&player.tileFrom[0]>0&&1==gameMap[toIndex(player.tileFrom[0]-1,player.tileFrom[1])]||5==gameMap[toIndex(player.tileFrom[0]-1,player.tileFrom[1])]?(player.direction="L",player.tileTo[0]-=1):keysDown[38]&&player.tileFrom[1]>0&&1==gameMap[toIndex(player.tileFrom[0],player.tileFrom[1]-1)]||5==gameMap[toIndex(player.tileFrom[0],player.tileFrom[1]-1)]?(player.direction="U",player.tileTo[1]-=1):keysDown[39]&&player.tileFrom[0]<mapW-1&&1==gameMap[toIndex(player.tileFrom[0]+1,player.tileFrom[1])]||5==gameMap[toIndex(player.tileFrom[0]+1,player.tileFrom[1])]?(player.direction="R",player.tileTo[0]+=1):(keysDown[40]&&player.tileFrom[1]<mapH-1&&1==gameMap[toIndex(player.tileFrom[0],player.tileFrom[1]+1)]||5==gameMap[toIndex(player.tileFrom[0],player.tileFrom[1]+1)])&&(player.direction="D",player.tileTo[1]+=1),player.tileFrom[0]==player.tileTo[0]&&player.tileFrom[1]==player.tileTo[1]||(player.timeMoved=e)),viewport.update(player.position[0]+player.dimensions[0]/2,player.position[1]+player.dimensions[1]/2),ctx.fillStyle="#000",ctx.fillRect(0,0,viewport.screen[0],viewport.screen[1]);for(var i=viewport.startTile[1];i<=viewport.endTile[1];i++)for(var o=viewport.startTile[0];o<=viewport.endTile[0];o++){if(0===gameMap[i*mapW+o])ctx.fillStyle="#060";else ctx.fillStyle="#650";ctx.fillRect(Math.floor(viewport.offset[0]+o*tileW),Math.floor(viewport.offset[1]+i*tileH),tileW,tileH)}for(i=viewport.startTile[1];i<=viewport.endTile[1];i++)for(o=viewport.startTile[0];o<=viewport.endTile[0];o++)2==gameMap[i*mapW+o]&&ctx.drawImage(cabin,Math.floor(viewport.offset[0]+o*tileW),Math.floor(viewport.offset[1]+i*tileH),2*tileW,tileH/16*30);generatePlayer(player.direction);for(i=viewport.startTile[1];i<=viewport.endTile[1];i++)for(o=viewport.startTile[0];o<=viewport.endTile[0];o++)if(0===gameMap[i*mapW+o])ctx.drawImage(tree,Math.floor(viewport.offset[0]+o*tileW)+tileW/16,Math.floor(viewport.offset[1]+i*tileH)-tileH/1.5,tileW/16*14,tileH/16*22);5==gameMap[toIndex(player.tileFrom[0],player.tileFrom[1])]&&(survived=!0),ctx.drawImage(darkness,0,0,dimension,dimension),ctx.fillStyle="#fff",ctx.fillRect(40,50,dimension-80,5),ctx.fillRect(dimension/15+(dimension-160)/120*(120-1*timer),dimension/40,tileW/3,tileH/3),ctx.fillRect(dimension-80,dimension/40,tileW/3,tileH/3),ctx.fillStyle="#000",ctx.font="bold "+dimension/21+"pt Arial",ctx.fillText("Z",dimension/13+(dimension-160)/120*(120-1*timer),dimension/13),ctx.fillText("W",dimension-78,dimension/13),0==timer||survived?(story.start=0,DrawNotebook()):(lastFrameTime=e)&&window.requestAnimationFrame(drawGame)}}$("litw").style.backgroundColor="black";var dimension,cW=document.documentElement.clientWidth-2,cH=document.documentElement.clientHeight-2,ctx=null,tileW=cH/10,tileH=cH/10,mapW=22,mapH=23,off=5,lastSecond=0,currentSecond=0,frameCount=0,frameLastSecond=0,lastFrameTime=0,survived=!1,started=!1,darkness=new Image(100,100),notebook=new Image(100,100),bloodsplat=new Image(100,100),tree=new Image(14,22),cabin=new Image(32,30);bloodsplat.src="img/bloodsplat.svg",notebook.src="img/notebook.svg",cabin.src="img/cabin.svg",tree.src="img/tree.svg",darkness.src="img/darkness.svg";var timer=120;cW>cH?($("litw").setAttribute("width",cH),$("litw").setAttribute("height",cH),tileW=Math.floor(cH/off),tileH=Math.floor(cH/off),dimension=cH):($("litw").setAttribute("width",cW),$("litw").setAttribute("height",cW),tileW=Math.floor(cW/off),tileH=Math.floor(cW/off),dimension=cW);var keysDown={37:!1,38:!1,39:!1,40:!1},story={start:1,beginning:[["day 55 after the apoc"],["rumors about zombies approaching"],["had to search for food"],["now it's night"],["gotta find my way to my cabin"]],ending:{good:["made it."],bad:["zombies... fuck..."]}},colorCode=["#000","#431","#49B","#000","#E96","#129","#a22"],hairPartL=[[0,0,0,0,0,1,1,1],[0,0,0,0,1,1,1,1],[0,0,0,1,1,1,1,1],[0,0,0,1,1,1,1,1],[0,0,0,1,1,1,1,1],[0,0,0,1,1,1,1,1],[0,0,0,0,1,1,1,1],[0,0,0,2,2,1,1,1]],hairPartR=[],facePartL=[[0,0,0,0,0,1,1,1],[0,0,0,0,1,1,1,1],[0,0,0,0,1,1,1,1],[0,0,0,0,4,4,4,4],[0,0,0,4,4,3,4,4],[0,0,0,4,4,3,4,4],[0,0,0,0,4,4,4,4],[0,0,0,2,2,4,4,4]],facePartR=[],bootpantsPartL=[[0,0,2,2,2,2,2,2],[0,0,4,4,2,2,2,2],[0,0,4,4,2,2,2,2],[0,0,0,0,2,2,2,2],[0,0,0,0,5,5,5,5],[0,0,0,0,5,5,5,5],[0,0,0,6,6,6,6,6],[0,0,0,0,6,6,6,0]],bootpantsPartR=[],bootPartL=[[0,0,2,2,2,2,2,2],[0,0,4,4,2,2,2,2],[0,0,4,4,2,2,2,2],[0,0,0,0,2,2,2,2],[0,0,0,0,6,6,6,5],[0,0,0,6,6,6,6,6],[0,0,0,6,6,6,6,6],[0,0,0,0,6,6,6,0]],bootPartR=[],pantsPartL=[[0,0,2,2,2,2,2,2],[0,0,4,4,2,2,2,2],[0,0,4,4,2,2,2,2],[0,0,0,0,2,2,2,2],[0,0,0,0,5,5,5,5],[0,0,0,0,0,5,5,5],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],pantsPartR=[];cloneReverseArray(hairPartL,hairPartR),cloneReverseArray(facePartL,facePartR),cloneReverseArray(bootpantsPartL,bootpantsPartR),cloneReverseArray(bootPartL,bootPartR),cloneReverseArray(pantsPartL,pantsPartR);var player=new Character,gameMap=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,1,1,1,1,1,1,1,0,1,0,1,1,1,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,1,1,0,0,0,1,0,0,0,0,1,0,1,1,1,0,0,1,0,1,0,1,0,1,1,1,1,1,0,0,0,0,1,0,1,0,1,1,1,1,1,1,1,1,0,1,0,0,0,1,0,0,0,0,1,1,1,0,1,0,0,0,0,1,0,0,0,1,0,0,1,1,0,0,0,0,1,0,1,0,1,1,0,1,1,1,1,1,1,1,1,0,1,0,0,0,0,0,1,0,1,0,0,1,1,1,0,1,0,0,0,0,1,1,1,0,0,0,0,0,1,0,1,1,0,0,0,0,1,1,0,0,1,1,1,0,1,1,0,0,0,0,1,0,0,1,1,1,1,0,1,0,1,0,0,0,0,1,0,1,0,0,0,0,0,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,0,0,1,0,0,1,0,0,0,0,1,0,1,0,1,1,1,0,1,0,0,1,1,1,1,0,1,1,0,0,0,0,1,0,1,0,0,0,0,0,1,1,1,1,0,0,1,1,1,0,0,0,0,0,1,0,1,1,1,1,0,0,1,0,1,0,0,1,1,0,1,0,0,0,0,0,1,0,0,1,0,1,0,0,1,0,1,0,0,0,0,0,1,1,0,0,0,0,1,0,1,0,0,1,1,1,1,0,1,1,1,0,0,1,1,0,0,0,0,0,1,1,1,1,1,1,0,0,1,2,3,1,1,1,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,4,5,0,1,0,1,1,0,0,0,0,0,0,1,1,1,1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],viewport={screen:[0,0],startTile:[0,0],endTile:[0,0],offset:[0,0],update:function(e,t){this.offset[0]=Math.floor(this.screen[0]/2-e),this.offset[1]=Math.floor(this.screen[1]/2-t);var i=[Math.floor(e/tileW),Math.floor(t/tileH)];this.startTile[0]=i[0]-1-Math.ceil(this.screen[0]/2/tileW),this.startTile[1]=i[1]-1-Math.ceil(this.screen[1]/2/tileH),this.startTile[0]<0&&(this.startTile[0]=0),this.startTile[1]<0&&(this.startTile[1]=0),this.endTile[0]=i[0]+1+Math.ceil(this.screen[0]/2/tileW),this.endTile[1]=i[1]+1+Math.ceil(this.screen[1]/2/tileH),this.endTile[0]>=mapW&&(this.endTile[0]=mapW-1),this.endTile[1]>=mapH&&(this.endTile[1]=mapH-1)}};Character.prototype.placeAt=function(e,t){this.tileFrom=[e,t],this.tileTo=[e,t],this.position=[tileW*e+(tileW-this.dimensions[0])/2,tileW*t+(tileW-this.dimensions[1])/2]},Character.prototype.processMovement=function(e){if(this.tileFrom[0]==this.tileTo[0]&&this.tileFrom[1]==this.tileTo[1])return!1;if(e-this.timeMoved>=this.delayMove)player.moving=!1,this.placeAt(this.tileTo[0],this.tileTo[1]);else{if(player.moving=!0,this.position[0]=this.tileFrom[0]*tileW+(tileW-this.dimensions[0])/2,this.position[1]=this.tileFrom[1]*tileH+(tileW-this.dimensions[1])/2,this.tileTo[0]!=this.tileFrom[0]){var t=tileW/this.delayMove*(e-this.timeMoved);this.position[0]+=this.tileTo[0]<this.tileFrom[0]?0-t:t}if(this.tileTo[1]!=this.tileFrom[1]){t=tileH/this.delayMove*(e-this.timeMoved);this.position[1]+=this.tileTo[1]<this.tileFrom[1]?0-t:t}this.position[0]=Math.round(this.position[0]),this.position[1]=Math.round(this.position[1])}return!0},window.onload=function(){ctx=$("litw").getContext("2d"),startMenu()}</script>