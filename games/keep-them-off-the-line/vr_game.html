<title>Keep them off the Line</title><script src=/2018/webxr/aframe.js></script><meta content="width=device-width" name=viewport><link href=back.png rel=icon type=image/png><body><a-scene fog="type: linear; color: #272828; far: 30; near: 0" light="defaultLightsEnabled: false"><a-assets><img id=grass src=back.png> <img id=bole src=bole.png> <img id=greenery src=greenery.png> <img id=zombie1 src=zombie1.png></a-assets><a-plane color=green height=1000 position="0 -8 -4" rotation="-90 0 180" src=#grass width=1000></a-plane><a-entity id=three1 position="0 0 1"><a-sphere color=green position="0 1.25 -5" radius=1.25 src=#greenery></a-sphere><a-cylinder height=5 position="0 0 -5" radius=0.2 src=#bole></a-cylinder></a-entity><a-entity id=three2 position="5 0 16"><a-sphere color=green position="0 1.25 -5" radius=1.25 src=#greenery></a-sphere><a-cylinder height=5 position="0 0 -5" radius=0.2 src=#bole></a-cylinder></a-entity><a-entity id=three3 position="5 0 -16"><a-sphere color=green position="0 1.25 -5" radius=1.25 src=#greenery></a-sphere><a-cylinder height=5 position="0 0 -5" radius=0.2 src=#bole></a-cylinder></a-entity><a-entity id=three4 position="-20 0 0"><a-sphere color=green position="0 1.25 -5" radius=1.25 src=#greenery></a-sphere><a-cylinder height=5 position="0 0 -5" radius=0.2 src=#bole></a-cylinder></a-entity><a-entity id=three5 position="-12 0 1"><a-sphere color=green position="0 1.25 -5" radius=1.25 src=#greenery></a-sphere><a-cylinder height=5 position="0 0 -5" radius=0.2 src=#bole></a-cylinder></a-entity><a-entity id=three6 position="-8 0 -10"><a-sphere color=green position="0 1.25 -5" radius=1.25 src=#greenery></a-sphere><a-cylinder height=5 position="0 0 -5" radius=0.2 src=#bole></a-cylinder></a-entity><a-entity id=three7 position="8 0 10"><a-sphere color=green position="0 1.25 -5" radius=1.25 src=#greenery></a-sphere><a-cylinder height=5 position="0 0 -5" radius=0.2 src=#bole></a-cylinder></a-entity><a-entity id=three8 position="12 0 1"><a-sphere color=green position="0 1.25 -5" radius=1.25 src=#greenery></a-sphere><a-cylinder height=5 position="0 0 -5" radius=0.2 src=#bole></a-cylinder></a-entity><a-entity id=three9 position="14 0 3"><a-sphere color=green position="0 1.25 -5" radius=1.25 src=#greenery></a-sphere><a-cylinder height=5 position="0 0 -5" radius=0.2 src=#bole></a-cylinder></a-entity><a-entity id=three10 position="-10 0 3"><a-sphere color=green position="0 1.25 -5" radius=1.25 src=#greenery></a-sphere><a-cylinder height=5 position="0 0 -5" radius=0.2 src=#bole></a-cylinder></a-entity><a-entity id=three11 position="-10 0 9"><a-sphere color=green position="0 1.25 -5" radius=1.25 src=#greenery></a-sphere><a-cylinder height=5 position="0 0 -5" radius=0.2 src=#bole></a-cylinder></a-entity><a-entity id=three12 position="-10 0 13"><a-sphere color=green position="0 1.25 -5" radius=1.25 src=#greenery></a-sphere><a-cylinder height=5 position="0 0 -5" radius=0.2 src=#bole></a-cylinder></a-entity><a-entity id=three13 position="10 0 9"><a-sphere color=green position="0 1.25 -5" radius=1.25 src=#greenery></a-sphere><a-cylinder height=5 position="0 0 -5" radius=0.2 src=#bole></a-cylinder></a-entity><a-entity id=three14 position="10 0 15"><a-sphere color=green position="0 1.25 -5" radius=1.25 src=#greenery></a-sphere><a-cylinder height=5 position="0 0 -5" radius=0.2 src=#bole></a-cylinder></a-entity><a-entity id=fire light="type: ambient; color: #BBB"></a-entity><a-sky color=#3a4d6d></a-sky><a-entity position="-4 -1 -1.6" light="color: #AFA; intensity: 1.5" rotation="-30 90 0"></a-entity><a-circle color=red position="0 -4 5" radius=5 rotation="-90 0 0"></a-circle><a-circle color=green position="0 -3.9 5" radius=4.5 rotation="-90 0 0"></a-circle><a-text id=life position="-5 -3.8 5" rotation="-90 0 0" scale="2 0.5 3" value=ALIVE width=40></a-text><a-entity id=zombies><a-box position="-5 -1.3 -15" rotation="0 0 0" depth=0.4 height=4 width=0 id=zombie material="src: #zombie1" opacity=0.75 scale="2 0.5 3" transparent=true><a-animation attribute=position dur=5000 fill=forwards to="0 0 5"></a-animation></a-box></a-entity><a-entity id=gun_on_camera position="0 0 5" camera="active: true" data-aframe-default-camera look-controls><a-box position="0 -1.5 -3" rotation="0 0 0" color=grey></a-box><a-box position="0 -1.5 -2.5" rotation="0 0 0" color=grey depth=-0.5 height=0.2 width=0.3></a-box><a-box position="-0.32 -0.75 -2.15" rotation="0 0 0" color=grey depth=0.1 height=0.2 width=0.2></a-box><a-box position="0.32 -0.75 -2.15" rotation="0 0 0" color=grey depth=0.1 height=0.2 width=0.2></a-box><a-box position="0 -0.75 -3" rotation="0 0 0" color=grey depth=0.1 height=0.2 width=0.2></a-box><a-entity position="0 -0.5 -2.1" cursor="fuse: true; fuseTimeout: 500" geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03" material="color: black; shader: flat"></a-entity></a-entity></a-scene><script>"use strict"

var NR_OF_LIFE = 3;
var alive = true;
var tmp = "";

var zozo = '-5 -1.3 -15';

document.getElementById("zombie").addEventListener("click", function(){
  console.info("FIRE");
  tmp = document.getElementById("zombies").innerHTML;
  document.getElementById("zombies").innerHTML = "";
  newzombie();
});

document.getElementById("zombie").addEventListener('componentchanged', function(){
  if((document.getElementById("zombie").getAttribute('position').x >-1) && (document.getElementById("zombie").getAttribute('position').y >-1) && (document.getElementById("zombie").getAttribute('position').z >4.8)){
    document.getElementById("zombies").innerHTML = "";
    decLife();
    newzombie();
  }
});


function decLife() {
  --NR_OF_LIFE;
  if(NR_OF_LIFE == 0){
    document.getElementById('life').setAttribute('value', 'OVER');
    var newPosition = new THREE.Vector3( -4.8, -3.8, 5);
    document.getElementById('life').setAttribute('position', newPosition);
    NR_OF_LIFE = 0;
  }
  console.info("NR_OF_LIFE: " + NR_OF_LIFE);
}

function newzombie() {
  if(NR_OF_LIFE != 0){
    console.info("new zozo");
    var X = 0;
    var Z = 0;

    var val = Math.floor((Math.random() * 50) + 20);
    var plusOrMinus = Math.random() < 0.5 ? -1 : 1;
    X = val * plusOrMinus;
    val = Math.floor((Math.random() * 50) + 20);
    plusOrMinus = Math.random() < 0.5 ? -1 : 1;
    Z = val * plusOrMinus;
    console.log("X: " + X + " Z: " + Z);
    document.getElementById("zombies").innerHTML = '<a-box id="zombie" material="src: #zombie1" width="0" height="4" depth="0.4" transparent="true" opacity="0.75" position="' + X + ' -1.3 ' + Z + '" rotation="0 0 0" scale="2 0.5 3"> <a-animation attribute="position" to="0 0 5" fill="forwards" dur="5000"></a-animation></a-box>';
    rebindZozo();
  }
}

function rebindZozo() {
  document.getElementById("zombie").addEventListener('componentchanged', function(){
    if((document.getElementById("zombie").getAttribute('position').x >-1) &&
      (document.getElementById("zombie").getAttribute('position').y >-1) &&
      (document.getElementById("zombie").getAttribute('position').z >4.8)) {
      document.getElementById("zombies").innerHTML = "";
      newzombie();
      decLife();
    }
  });
}</script>