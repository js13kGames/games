<!doctype html><html><head><meta name=viewport content="viewport-fit=cover,width=device-width,minimum-scale=1,maximum-scale=3,user-scalable=yes"><title>The Society of Multiphobics - js13kGames 2024</title><style>body,html{height:100%;margin:0;padding:0;width:100%}@media (prefers-reduced-motion:reduce){*,:after,:before{animation:none!important;transition:none!important}}.score{font-family:monospace}@media (max-width:640px){.score{font-size:.8rem}}html{font-size:16px}@media (min-width:600px){html{font-size:24px}}*,:after,:before{box-sizing:border-box}body{background:var(--bg,#09162a);color:var(--txt,#f0f0f0);font-family:sans-serif;user-select:none;-webkit-tap-highlight-color:transparent;display:grid;grid-template-rows:min-content 1fr;hyphens:auto;overflow:hidden}@media (prefers-color-scheme:light){body{--txt:#1a1a1a;--txt-2:#555;--txt-3:#888;--dlg-bg:hsla(0,0%,100%,.95);--olay-bg:hsla(0,0%,100%,.3);--bg-05:rgba(9,22,42,.05);--bg-10:rgba(9,22,42,.1);--bg:#f0f4f8;--bg-2:#dce5ee;--tile-1:#e2e8f0;--tile-2:#ccd6e5;--tile-alpha:rgba(226,232,240,.75);--table-bg:#a5644c;--table-border:#d8a28a;--d-clr:#97012c}}main{display:grid;gap:1rem;grid-template-columns:minmax(min-content,1fr) minmax(min-content,600px);overflow:auto;padding:1rem}@media (orientation:portrait){main{grid-template-columns:1fr;grid-template-rows:min-content auto auto}}header{align-items:center;display:flex;gap:1rem;justify-content:space-between;padding:.5rem 1rem}header .h-btns{display:flex;gap:.5rem}button{background-color:var(--bg-2,#234);border:1px solid var(--bg-10,hsla(0,0%,100%,.1));border-radius:.4rem;color:var(--txt,#f0f0f0);cursor:pointer;font-family:sans-serif;font-size:1em;padding:1rem 1.5rem}@media (hover:hover) and (pointer:fine){button:hover{background-color:var(--bg-10,hsla(0,0%,100%,.1))}}button.touching{background-color:var(--bg-10,hsla(0,0%,100%,.1))}button.prm{background-color:#39f;border-color:#39f}@media (hover:hover) and (pointer:fine){button.prm:hover{background-color:rgba(51,153,255,.7)}}button.prm.touching{background-color:rgba(51,153,255,.7)}button[disabled]{opacity:.3;pointer-events:none}button.icon-btn{border:none;border-radius:50%;color:var(--txt-2,#ccc);display:grid;font-size:.9em;height:2rem;line-height:1;padding:.5rem;place-items:center;transform:scale(1);transition:transform .3s;width:2rem}@media (hover:hover) and (pointer:fine){button.icon-btn:hover{transform:scale(1.2)}}button.icon-btn.touching{transform:scale(1.2)}h3{margin:0}p{margin:0 0 .5rem}.hidden{display:none!important}ul{margin:.25rem 0;padding-inline-start:1rem}.F{--t:var(--tile-1,#152134);border:calc(var(--s-size)/4) solid var(--tile-alpha,rgba(21,33,52,.75));display:grid;font-size:calc(var(--s-size)*.6);grid-template-columns:repeat(var(--s-cnt,11),var(--s-size));grid-template-rows:repeat(var(--s-cnt,11),var(--s-size));height:fit-content;justify-content:center;line-height:1;margin:0 auto;position:relative;--s-size:calc((min(100vw - min(20rem, 33vw) - 3rem, 100vh - 3rem) - 2rem)/(var(--s-cnt, 11) + 0.5))}@media (orientation:portrait){.F{--s-size:calc((min(100vw, 100vh - 3rem) - 2rem)/(var(--s-cnt, 11) + 0.5))}}.F .row{display:contents}.F .row:nth-child(2n) .k:nth-child(odd),.F .row:nth-child(odd) .k:not(:nth-child(odd)){--t:var(--tile-2,#1b273a)}.F .H{left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);z-index:6}.F.l .k{cursor:grabbing!important}.F.l .k:not(.h):not(.z):hover:after{background:rgba(68,170,119,.1);content:"";height:100%;position:absolute;width:100%}.k{background-color:var(--t);place-items:center}.k,.k .D{display:grid;position:relative}.k .D{border:.125rem dotted transparent;height:100%;place-items:center;width:100%}.k.C:before,.k>.D{grid-area:1/1}.k.C:before{background:var(--table-bg,#563232);border:.125rem outset var(--table-border,#905d5d);border-left-width:.35rem;border-radius:50% 15% 15% 50%;content:"";height:85%;width:85%}.k.C.q:before{transform:rotate(180deg)}.k.h{touch-action:none}.k.h:before{opacity:.3}.k.z{border:none}.k.z.A{z-index:2}.k.z.A:after{background:var(--table-bg,#563232);border:.125rem outset var(--table-border,#905d5d);border-radius:.33rem;content:"";height:calc(var(--table-height, 8)*100%);pointer-events:none;position:absolute;top:var(--table-top,auto);width:100%}.k.z .B{display:none;font-size:.6em;left:1px;position:absolute;transform:rotate(90deg);z-index:4}.k.z .B+.B{left:auto;right:1px;transform:rotate(-90deg)}.k.z.i .B:first-of-type,.k.z.j .B+.B{display:block}.k .b{z-index:4}.k .b:after{animation:scale-pulse 1.5s infinite;border:.125rem dashed #39f;bottom:-.375rem;content:"";left:-.375rem;pointer-events:none;position:absolute;right:-.375rem;top:-.375rem}.k .b+.r{display:none}.k .m{opacity:.5}.k.h{cursor:grab}.k.h .E{z-index:1}.k:not(.C) .c{border-color:#fa0}.k .c{border-color:#dd3666}.k .c.g{border-color:#f17c29}.k .c .E{animation:tremble .15s 10}.k .e .E{animation:scary-pulse 2s ease-out infinite}.k .d:not(.e) .E{animation:tremble .15s infinite;scale:1.2}.k.f{z-index:2}.k.f.z.A{animation:scary-pulse-table 2s ease-out infinite;z-index:5}.k.f.z.A:after{color:var(--d-clr,#c67);content:"13";display:grid;font-family:Brush Script MT,cursive;place-items:center}.k.f.z.A .B{display:none}.k .D,.k span{pointer-events:none}.fear{background:var(--olay-bg,rgba(0,0,0,.3));bottom:0;display:grid;font-size:.5em;height:45%;left:0;line-height:1;place-items:center;position:absolute;width:45%;z-index:2}.fear.small{font-size:.4em;height:35%;left:auto;right:0;width:35%}.fear:before{background:#dd3666;content:"";height:100%;position:absolute;transform:rotate(45deg);width:.0625rem}body.a .k.C:not(.h){cursor:pointer}body.a .k.C:not(.h):after{animation:opacityBlink 1s infinite;background:rgba(68,170,119,.3);bottom:0;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.drag-overlay{opacity:.8;transform:scale(1.5)}@media (max-width:600px){.drag-overlay{transform:scale(3)}}.G .k{pointer-events:none}.G .H{font-size:.8rem}@keyframes scary-pulse{0%{transform:scale(1)}30%{transform:scale(1.5)}to{transform:scale(1)}}@keyframes scary-pulse-table{0%{transform:scale(1)}30%{transform:scale(1.1,1.025)}to{transform:scale(1)}}@keyframes tremble{0%{transform:translate(.5px,.5px) rotate(0deg)}20%{transform:translate(-.5px,1px) rotate(-.5deg)}40%{transform:translate(1px,-.5px) rotate(.5deg)}60%{transform:translate(-1px) rotate(0deg)}80%{transform:translate(.5px,-1px) rotate(-.5deg)}to{transform:translate(.5px,.5px) rotate(0deg)}}@keyframes scale-pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}to{transform:scale(1)}}.s{align-items:center;background:var(--bg-05,hsla(0,0%,100%,.05));border-radius:.4rem;color:var(--txt-3,#9ab);display:flex;flex-direction:column;font-size:.9rem;gap:1rem;margin:0;padding:1rem;text-align:left}.s h3.t{color:var(--txt,#f0f0f0);font-family:Brush Script MT,cursive;font-size:1.6em}.s .k{background:var(--bg-05,hsla(0,0%,100%,.05));border-radius:.4rem;font-size:calc(var(--c-size, 7rem)*.6);height:var(--c-size,7rem);pointer-events:none;width:var(--c-size,7rem)}.s .k.h{border:.125rem solid var(--bg-10,hsla(0,0%,100%,.1))}.s .k.h:before{display:none}.s .k.h .fear:after{bottom:0;content:"A ―";font-size:1.2rem;left:.25rem;padding:.5rem 0;position:absolute;transform:translateX(-100%);white-space:nowrap}.s .k.h .fear.small:after{content:"― B";right:.25rem;transform:translateX(100%)}.s .k.z{--table-height:1;--table-top:auto}.s .k.z,.s .k.z span{animation:none!important}.s .k .C:before{transform:rotate(90deg)}.s .k:after{content:none}@media (max-height:800px){.s{font-size:.8rem;gap:.75rem;padding:.75rem}.s .k{--c-size:5.5rem}}.s li{font-size:.9em;font-style:italic}@media (max-height:600px){.s{font-size:.7rem}.s .k{--c-size:4.5rem}}.u{background:var(--bg-05,hsla(0,0%,100%,.05));border-radius:.4rem;padding:.5rem .75rem;width:fit-content}.v{align-items:center;display:grid;gap:.5rem;grid-template-columns:repeat(2,auto);line-height:1}.w{display:contents}.w>:first-child{font-family:monospace;font-size:1.4em;font-weight:700}.w.x{color:#274}.w.y{color:var(--d-clr,#c67)}.r{display:grid;height:100%;place-items:center;position:absolute;width:100%;z-index:50}.r.p{transform:translate(100%) rotate(180deg)}.r.n{transform:translateY(100%) rotate(270deg)}svg{animation:point 1.2s infinite;color:#39f;height:75%;width:75%}@keyframes point{0%{transform:translateX(0)}50%{transform:translateX(10%)}to{transform:translateX(0)}}.menu{display:grid;font-size:2rem;gap:1.5rem;grid-template-rows:auto 1fr;padding:1rem;place-items:center}.d8y{display:grid;font-size:.75em;gap:.5rem;grid-template-columns:repeat(2,min-content);grid-template-rows:repeat(2,min-content);white-space:nowrap}@media (orientation:portrait){.d8y{grid-template-columns:repeat(1,min-content);grid-template-rows:repeat(4,min-content)}}.d8y>div{display:grid;gap:.25rem}.d8y .high{font-size:.66em;font-style:italic;opacity:.7}@keyframes opacityBlink{0%{opacity:.5}50%{opacity:1}to{opacity:.5}}.dialog{background:var(--dlg-bg,rgba(0,0,0,.9));bottom:0;color:var(--txt,#f0f0f0);display:grid;grid-template-rows:1fr min-content;height:100%;left:0;opacity:1;position:absolute;text-align:center;transform:translateY(0);transition:transform .5s,opacity .5s;width:100%}.dialog:not(.open){opacity:0;pointer-events:none;transform:translateY(100%)}.dialog .content{display:grid;overflow-x:hidden;overflow-y:auto}.dialog .content.ovrflw{align-content:start}.dialog .icon-btn{position:absolute;right:1rem;top:1rem}.btns{display:grid;gap:1rem;grid-template-columns:repeat(2,minmax(auto,1fr));padding:1rem}.btns>*{white-space:nowrap}</style></head><body><script>async function n(n){return t=n,await new Promise(n=>setTimeout(n,t)),new Promise(n=>requestAnimationFrame(()=>n()));var t}function t({tag:n,t,text:e,o}={}){var a=document.createElement(n||"div");if(t&&a.classList.add(...t.split(" ").filter(Boolean)),e){const n=document.createTextNode(e);a.appendChild(n)}return o&&a.addEventListener("click",o),a}function e({text:n,o:e,i:o,u:a}){return o=t({tag:"button",t:o?"icon-btn":"",o:e}),n&&(a?o.appendChild(t({tag:"span",text:n,t:"rbc"})):o.innerHTML=n),o}const o=new class{constructor(){this.l={}}subscribe(n,t){this.l[n]||(this.l[n]=[]),this.l[n].push(t)}unsubscribe(n,t){this.l[n]&&0<=(t=this.l[n].indexOf(t))&&this.l[n].splice(t,1)}h(n,t){this.l[n]&&this.l[n].forEach(n=>n(t))}};function a(){o.h(0)}const r=n=>"string"==typeof n?n:n.type,i=n=>"🟫"===r(n),s=n=>"🪑"===r(n),c=n=>""===r(n);function l(n){return void 0!==n.m}function u(n,t){return n.some(n=>p(n,t))}function d(n,t){return n.find(n=>p(n,t))}function p(n,t){return n.v===t.v&&n.p===t.p}function f(t,n){n.find(n=>p(n,t))||n.push(t)}function h(n){return n[Math.floor(Math.random()*n.length)]}const v={0:"never exactly 13 at a table",1:"Triskaidekaphobia",2:"Welcome to the Society of Multiphobics",3:"🏁 Seat all emojis at the tables without triggering any phobias.",4:"🏁 What a mess! Re-sort the emojis at the tables until all phobias are resolved.",5:"Start game",6:"New game",7:"You win 🎉",8:"Continue",9:"Back",10:"Big {0}",11:"Small {0}",12:"no {0} at the same table (A)",13:"no {0} next to or opposite (B)",14:"assigned to a seat at a table 🍽️",21:"Phobias: {0}",15:"Select an emoji to learn more about it.",16:"A chair. Someone can sit here.",17:"Table {0}",18:"Occupancy: {0}/{1} 🪑",19:"Decoration",20:"Empty field. Someone can wait here.",22:"Difficulty",23:"Easy",24:"Medium",25:"Hard",26:"Extreme",27:"Moves",28:"Top:",29:"Avg:"};function m(n,...t){document.documentElement.setAttribute("lang","en");let e=v[n];for(let n=0;n<t.length;n++){var o=t[n],a=new RegExp(`\\{${n}\\}`,"g");e=e.replace(a,o)}return e}let g=50;const b=["🦆","👴","🐙","🐸","🐶","🐦","💃","🦋","🐴","🦐","🐔"],L=[...b,"🔢","💰","🎈","🍌","☀️","📰","🥇","📚"],y={"🦆":"Anatidaephobia","👴":"Peladphobia","🐙":"Chapodiphobia","🐸":"Ranidaphobia","🐶":"Cynophobia","🐦":"Ornithophobia","💃":"Chorophobia","🦋":"Lepidopterophobia","🐴":"Equinophobia","🦐":"Ostraconophobia","🐔":"Alektorophobia","🔢":"Arithmophobia","💰":"Plutophobia","🎈":"Globophobia","🍌":"Bananaphobia","☀️":"Heliophobia","📰":"Chloephobia","🥇":"Aurophobia","📚":"Bibliophobia"};function x(n){return n?y[n]:""}function M(t,n=[...L]){return h(n.filter(n=>!t.includes(n)))}const w="mxlle13";function E(n,t){0!=t?localStorage.setItem(w+"."+n,t):(t=n,localStorage.removeItem(w+"."+t))}function $(n){return localStorage.getItem(w+"."+n)}function j(n){D.C=P[n],E("d8y",(D.M=n).toString())}const C=[0,1,2,3],P={0:{A:18,k:20,F:.3,T:.7,S:3},1:{A:21,k:24,F:.4,T:.6,S:4},2:{A:25,k:28,F:.6,T:.7,S:5},3:{A:32,k:32,F:.7,T:1,S:6}},T={0:"💚",1:"🟡",2:"🟥",3:"💀"};function A(n){switch(n){case 0:return m(23);case 1:return m(24);case 2:return m(25);case 3:return m(26)}}function H(n){var t,e;return(n=$(S(n)))?([n,t,e]=n.split(",").map(Number),{B:n,I:t,count:e}):{B:0,I:0,count:0}}function S(n){switch(n){case 0:return"d8y0";case 1:return"d8y1";case 2:return"d8y2";case 3:return"d8y3"}}const V=$("oSt"),O=$("d8y"),k=O?Number(O):0,U=P[k],B={O:void 0,j:V?Number(V):0,P:[],$:[],language:"en",M:k,C:U,D:0},D=Object.assign({},B),I=(()=>{var{H:n,_:t,c:e}={H:"",_:"🟫",c:"🪑"};return[[e,t,e,n,n,e,t,e],[e,t,e,n,n,e,t,e],[e,t,e,n,n,e,t,e],[e,t,e,n,n,e,t,e],[e,t,e,n,n,e,t,e],[e,t,e,n,n,e,t,e],[e,t,e,n,n,e,t,e],[e,t,e,n,n,e,t,e]]})();function q(n,t){return Math.floor(Math.random()*(t-n+1)+n)}function F(){return-1!==D.j}const N=(()=>{var{H:n,_:t,c:e}={H:"",_:"🟫",c:"🪑"};return[[n,e,t,e],[n,n,n,n],[n,n,n,n],[n,e,t,e]]})(),R=(()=>{var{H:n,_:t,c:e}={H:"",_:"🟫",c:"🪑"};return[[n,n,n,n,n,n,n],[n,n,n,n,n,n,n],[e,t,e,n,e,t,e],[e,t,e,n,e,t,e],[e,t,e,n,e,t,e],[n,n,n,n,n,n,n],[n,n,n,n,n,n,n]]})();function G(){switch(D.j){case 0:return{G:N,W:K([[0,1,-1,1,0],[1,-1,-1,0,3],[2,-1,-1,3,3]]),L:1,N:n=>0===n||3===n,R:(n,t)=>n<2?0:1,q:{v:1,p:0,direction:"n"}};case 1:return{G:R,W:K([[0,1,2,0,3],[1,-1,-1,2,0],[2,1,-1,2,4],[3,-1,-1,4,6],[4,-1,-1,3,2]]),L:3,N:n=>3===n,R:(n,t)=>t<3?0:1,q:{v:0,p:3,direction:"p"}};case 2:return{G:I,W:K([[0,1,4,0,3],[1,-1,-1,1,0],[1,-1,-1,2,0],[2,-1,-1,3,0],[2,-1,-1,4,0],[3,-1,-1,5,0],[3,-1,-1,6,0],[1,-1,-1,1,2],[1,-1,-1,2,2],[2,-1,-1,3,2],[2,-1,-1,4,2],[3,-1,-1,5,2],[3,-1,-1,6,2],[4,-1,-1,1,5],[4,-1,-1,2,5],[5,-1,-1,3,5],[5,-1,-1,4,5],[6,-1,-1,5,5],[6,-1,-1,6,5],[4,-1,-1,1,7],[4,-1,-1,2,7],[5,-1,-1,3,7],[5,-1,-1,4,7],[6,-1,-1,5,7],[6,-1,-1,6,7]]),L:8,N:n=>n===Math.ceil(I.length/2)-1,R:(n,t)=>3<t?1:0,q:{v:0,p:3,direction:"p"}};default:return}}function J(){if(F()){D.O=D.j;let n=D.j+1;2<n&&(n=-1),E("oSt",(D.j=n).toString())}else D.O=void 0}function K(n){const t=q(0,b.length-1),r=n=>(n=(n=t+n)%b.length,b[n]);return n.map(([n,t,e,o,a])=>({name:r(n),V:-1!==t?r(t):void 0,U:-1!==e?r(e):void 0,v:o,p:a}))}let W,X;function _(n,r){if(W)W.X(Z(n,r)),Y(r);else{const a=Z(n,r);W=function(n,a){const r=t({t:"dialog",o:n=>n.stopPropagation()}),i=t({t:"content"});function s(n){g--,r.classList.remove("open"),o.h(5,n)}let c,l,u;return i.appendChild(n),r.appendChild(i),void 0!==a&&(c=t({t:"btns"}),l=e({text:m(9),o:()=>s(0)}),c.appendChild(l),(u=e({text:a,o:()=>s(1)})).classList.add("prm"),c.appendChild(u),r.appendChild(c)),n=e({text:"X",o:()=>s(0),i:1}),r.appendChild(n),document.body.appendChild(r),{open:n=>(g++,r.style.zIndex=g.toString(),n?r.classList.add("open"):setTimeout(()=>r.classList.add("open"),0),i.classList.toggle("ovrflw",i.scrollHeight>i.clientHeight),i.scrollTop=0,new Promise((n,t)=>{o.subscribe(5,n)})),close:n=>{s(n)},Y:n=>{u&&(u.disabled=n)},X:n=>{i.innerHTML="",i.appendChild(n)},Z:n=>{u&&(u.innerText=n)}}}(a,z(r))}null!=X&&X.classList.toggle("hidden",F()),W.open().then(n=>{n&&((r||D.D)&&J(),a())})}function Y(n){null!=W&&W.Z(z(n))}function z(n){return G()?n||D.D?m(8):m(6):m(6)+" "+T[D.M]}function Z(n,o){o&&!F()&&(a=n,i=(r=H(c=D.M)).count+1,s=Math.round((r.I*r.count+a)/i),E(S(c),[Math.max(r.B,a),s,i].join(",")));var a,r,i,s,c=t({t:"menu"});if(o||D.D){const t=F()?"":"<br/>"+n+"⭐️";c.innerHTML=m(7)+t}else c.innerHTML=m(6);X=t({t:"d8y"}),c.append(X);for(let n of C){const a=t({}),r=e({text:T[n]+" "+A(n),o:()=>{j(n),Y(o),null!=W&&W.close(1)}}),i=H(n),s=t({t:"high",text:`${m(28)} ${i.B}⭐ – ${m(29)} ${i.I}⭐️`});a.append(r,s),X.append(a)}return c}function Q(t,o){var e=[];for(let n=0;n<2;n++){const a=an(o,n),r=13===a.length;r&&e.push(...on(t,n)),a.forEach(t=>{var n=a.filter(n=>n.name===t.V),e=nn(o,t);n.push(...e),t.J=0<n.length,t.K=r,t.nn=n})}o.filter(n=>void 0===n.m).forEach(n=>{var t=nn(o,n);n.J=0<t.length,n.K=0,n.nn=t});const n=o.filter(n=>n.J);return o.forEach(t=>{t.tn=n.filter(n=>n.nn.find(n=>p(n,t)))}),e}function nn(n,t){return tn(n,t).filter(n=>n.name===t.U)}function tn(n,o){let{v:a,p:r}=o;return n.filter(n=>{var t=n.v===a&&n.p===r,e=n.v===a&&n.p!==r&&n.m===o.m;return!t&&Math.abs(n.v-a)<=1&&Math.abs(n.p-r)<=1||e})}function en(n){return l(n)&&!n.J&&!n.K}function on(n,t){return n.flat().filter(n=>i(n)&&n.m===t)}function an(n,t){return n.filter(n=>n.m===t)}function rn(n,e=0,o=0){var a=t({t:"k"});if(i(n)){a.classList.add("z"),e&&a.classList.add("A");const n=t({t:"B",text:"🍽️"}),o=t({t:"B",text:"🍽️"});a.append(n),a.append(o)}return s(n)&&(a.classList.add("C"),o)&&a.classList.add("q"),a}function sn(n,t,e=0){var o,a=d(D.$,n);if(a&&u(D.$,n)){const n=a.sn;t.append(n),e||cn(a,n)}if(t.classList.toggle("h",!!a),(e=on(D.P,(o=n).m).find(n=>n.v===o.v))&&l(n)){const t=e.p<n.p?"j":"i";e&&kn(e).classList.toggle(t,!!a)}}function cn(n,t=n.sn){var e=!en(n);t.classList.toggle("c",e),t.classList.toggle("g",n.K&&!n.J)}function ln(n){const e=t({t:"D"}),o=t({tag:"span",t:"E",text:n.name});if(e.append(o),n.V){const o=t({t:"fear",text:n.V});e.append(o)}if(n.U){const o=t({t:"fear small",text:n.U});e.append(o)}return e}function un(n,t,e){return n[0].filter(n=>n.m!==t).length+n[1].filter(n=>n.m!==e).length}function dn(n,t){return n.every(n=>n.name!==t.V&&n.V!==t.name)}function pn(n){let t,e=G();if(e)t=function(e){let{R:o,W:n}=e;return n.map(n=>{var t=e.G[n.v][n.p];return Object.assign(Object.assign({},n),{K:0,J:0,nn:[],tn:[],m:s(t)?o(n.v,n.p):void 0,sn:ln(n)})})}(e);else{const e=vn(n);n=function(n){const t=function(n){const e=n.filter(n=>void 0!==n.V),o=n.filter(t=>e.some(n=>n.V===t.name));let t=e.filter(t=>o.some(n=>n.name===t.V)).concat(o);const a=[];for(;0<t.length;){const n=[[],[]],e=[t.pop()];for(;0<e.length;){const o=e.pop(),a=dn(n[0],o)?n[0]:n[1];f(o,a),e.push(...t.filter(n=>n.name===o.V||n.V===o.name)),t=t.filter(t=>!e.some(n=>p(n,t)))}a.push(n)}return a}(n);let e=0;var o,a,r=32===n.length?3:0;for(a of(n=(o=n).filter(t=>!t.U||t.V?0:tn(o,t).some(n=>n.name===t.U)).length,t)){const n=un(a,0,1),t=un(a,1,0);e+=Math.min(n,t)}return e+n+r}(t=Ln(n,e,D.C.S)),D.an={un:n,ln:e.length}}return t}function fn(){let n=I,e=G(),t=8;if(e&&(n=e.G,t=e.L),document.body.style.setProperty("--s-cnt",n.length.toString()),document.body.style.setProperty("--table-height",t.toString()),t%2==0){const n=-100*(t/2-1);document.body.style.setProperty("--table-top",n.toString()+"%")}const o=[];for(let t=0;t<n.length;t++){var a=n[t],r=[];for(let n=0;n<a.length;n++){const o=a[n];r.push(hn(o,t,n,e))}o.push(r)}return o}function hn(n,t,e,o){var a={type:n,v:t,p:e};return(s(n)||i(n))&&(a.m=3<e?1:0,o)&&(a.m=o.R(t,e)),a}function vn(n,t=0){let e=[],{A:o,k:a,F:r,T:i}=D.C,s=q(o,a),c=[];for(;c.length<s;){const t=bn(r,i),o=mn(n,e,t);var l,u,d;o&&(c.push(t),{v:l,p:u,m:d}=o,e.push(Object.assign(Object.assign({},t),{v:l,p:u,m:d})))}var p=an(e,0),f=an(e,1);return(13===p.length||13===f.length)&&t<10?vn(n,t+1):c}function mn(n,t,e){var o,a=t;for(o of n.flat().filter(n=>{return t=a,s(n)&&!u(t,n);var t}))if(!gn(t,o,e))return o}function gn(n,t,e){var o,a;for(o of an(n,t.m)){const n=e.V&&o.name===e.V,t=o.V&&o.V===e.name;if(n||t)return 1}for(a of tn(n,t)){const n=e.U&&a.name===e.U,t=a.U&&a.U===e.name;if(n||t)return 1}return 0}function bn(n,t){let e,o,a=h([...L]),r=Math.random();return 1-n<r&&(e=M([a])),r<t&&(o=M([a,e])),n={name:a,V:e,U:o},Object.assign(Object.assign({},n),{J:0,K:0,nn:[],tn:[],sn:ln(n)})}function Ln(n,t,e,o=0){const a=[],r=[...t];(function(n){let t,e,o;for(o=n.length-1;0<o;o--)t=Math.floor(Math.random()*(o+1)),e=n[o],n[o]=n[t],n[t]=e;return n})(n.flat().filter(s)).slice(0,r.length).forEach(n=>{var t,e,o=r.pop();o&&({v:n,p:t,m:e}=n,a.push(Object.assign(Object.assign({},o),{v:n,p:t,m:e})))}),Q(n,a);var i=a.filter(n=>n.J).length;return i<e&&o<10||0===i&&o<50?Ln(n,t,e,o+1):a}function yn(n){return(n=t({t:"r "+n})).append((new DOMParser).parseFromString('<?xml version="1.0" encoding="utf-8"?>\n<svg fill="currentColor" width="800px" height="800px" viewBox="0 0 256 256" id="Flat" xmlns="http://www.w3.org/2000/svg">\n  <path d="M132.93848,231.39062A8,8,0,0,1,128,224V184H48a16.01833,16.01833,0,0,1-16-16V88A16.01833,16.01833,0,0,1,48,72h80V32a8.00065,8.00065,0,0,1,13.65723-5.65723l96,96a8.003,8.003,0,0,1,0,11.31446l-96,96A8.002,8.002,0,0,1,132.93848,231.39062Z"/>\n</svg>\n',"image/svg+xml").firstChild),n}const xn=(n,t)=>{let e=n.touches,o=(e=null!=e&&e.length?e:n.changedTouches)?document.elementFromPoint(e[0].pageX,e[0].pageY):n.target;for(;o!==document;){if(null===o)return;if(o.classList.contains(t))return o;o=o.parentNode}},Mn=(n,t)=>{n=null!=(e=null==(e=n.touches)?void 0:e[0])?e:n;var e=null!=t?t:n.target;return{left:n.pageX-e.offsetWidth/4+"px",top:n.pageY-e.offsetHeight/4+"px"}};let wn,En,$n,jn,Cn,Pn,Tn,An=0;const Hn=[];function Sn(n){($n=e({text:m(n),o:n=>{F()&&J(),a(),null!=(n=n.target)&&n.remove()}})).classList.add("H","prm"),En.append($n)}async function Vn(){document.body.classList.remove("a","G"),D.D=0,null!=$n&&$n.remove(),Pn=void 0,Tn=void 0,An=0,Bn(),D.P.length&&En&&(o.h(2,{mn:0,vn:0,bn:0}),await async function(){var e=D.P.flat();for(let t=0;t<e.length;t++){var o=e[t],a=kn(o);if(i(o))a.classList.remove("f","i","j");else{const e=a.classList.contains("h");a.innerHTML="",a.classList.remove("h"),e&&await n(20)}}}(),await n(300),F()||void 0!==D.O)&&(En.remove(),En=void 0,D.P=[]),D.P.length||(D.P=fn()),D.$=pn(D.P),En||(En=In(D.P),On(),await n(300));var t,e=D.$;for(let t=0;t<e.length;t++){var a=e[t],r=kn(a);r.innerHTML="",sn(a,r,1),await n(20)}await 0,null!=(t=G())&&t.q&&(Cn=yn(t.q.direction),kn(D.P[t.q.v][t.q.p]).append(Cn)),Dn(D.P,D.$)}function On(){En&&(wn||(wn=t({tag:"main"}),document.body.append(wn)),wn.append(En),Bn())}function kn(n){var t;return null==(t=Hn[n.v])?void 0:t[n.p]}function Un(n,t=0){Pn=Pn&&void 0;var e=d(D.$,n);e&&e.sn.classList.remove("b"),document.body.classList.remove("a"),Bn(t?n:void 0)}function Bn(n){jn&&(jn.remove(),jn=void 0),jn=function(o){var a,r;const n=!o,l=o?d(D.$,o):void 0,u=t({t:"s"}),p=t({});if(n){const o=t({tag:"h3",text:m(2),t:"t"}),a=[G()?m(3):m(4),m(15)],r=(p.innerHTML=a.map(n=>`<p>${n}</p>`).join(""),u.append(o,p),t({t:"k",text:"?"}));u.append(r)}else{let n,e;if(l){e=function(e){const n=e.K,o=void 0!==e.m,a=o?0===e.nn.filter(n=>e.V===n.name).length:void 0,r=o?0===e.nn.filter(n=>e.U===n.name).length:void 0,i=t({t:"u"}),s=t({t:"v"});return[{fn:n?"😱":void 0,dn:!n,hn:m(0)},{fn:e.V,dn:a,hn:m(12,e.V)},{fn:e.U,dn:r,hn:m(13,e.U)},{fn:"🪑",dn:o,hn:m(14)}].filter(({fn:n})=>!!n).forEach(({dn:n,hn:e})=>{var o=t({t:"w "+(void 0!==n?n?"x":"y":"")});o.innerHTML=(n=[void 0!==n?n?"✔":"X":"?",e]).map(n=>`<span>${n}</span>`).join(""),s.append(o)}),i.append(s),i}(l),n=rn(o);const a=ln(l);n.append(a),n.classList.toggle("h",1);var{V:f,U:h}=l,v=x(f),g=x(h);0!==(v=[D.P.length===I.length?m(1)+" [13]":"",f?m(10,v+" "+f):"",h?m(11,g+" "+h):""].filter(Boolean)).length&&(p.innerHTML=m(21,"<ul>"+v.map(n=>`<li>${n}</li>`).join("")+"</ul>"))}else if(n=rn(o,1),i(o)){const t=null!=(a=o.m)?a:0,l=(a=D.P,r=t,a.flat().filter(n=>n.m===r&&s(n)).length),i=an(D.$,t).length,c=[m(17,t+1),m(18,i,l)];13===i&&(c.push("😱😱😱"),n.classList.add("f")),p.innerHTML=c.map(n=>`<p>${n}</p>`).join("")}else p.innerHTML=m(s(o.type)?16:c(o)?20:19);n&&u.append(n),e&&u.append(e),u.append(p)}return u}(n),null!=wn&&wn.append(jn)}function Dn(t,e,a=0){!async function(t,e,o){e.forEach(n=>{n.sn.classList.remove("c","g","e","d")}),t.flat().filter(i).forEach(n=>{kn(n).classList.remove("f")}),await n(50),e.forEach(n=>{cn(n)}),o.forEach(n=>{kn(n).classList.add("f")})}(t,e,Q(t,e));var r,s=An,c=(t=(t=e).length&&D.an?({un:t,ln:r}=D.an,c=Math.max(r-t,1),t=Math.max(0,s-t),s=Math.max(0,s-r),r=1-.8*Math.min(1,t/c)-.2*Math.min(1,s/(3*c)),r=Math.min(r,1),r=Math.max(r,0),Math.round(9999*r)):0,o.h(2,{mn:t,vn:An,bn:null==(s=D.an)?void 0:s.un}),(s=(r=e).filter(en).length)===(r=r.length));return c&&!a&&(D.D=1,document.body.classList.add("G"),_(t,1),setTimeout(()=>{Sn(F()?8:6)},300)),c}function In(h){const m=t({t:"F"}),n=(Hn.length=0,G()),r=n?n.N:n=>n===Math.ceil(h.length/2)-1;h.forEach((n,c)=>{const o=[],a=t({t:"row"});m.append(a),n.forEach((n,s)=>{var t=r(c),e=0<s?h[c][s-1]:void 0;(n=rn(n,t,e?i(e):0)).addEventListener("click",()=>{var n=c,t=s,e=D.P[n][t];if(Tn=!u(D.$,e)&&Tn&&p(e,Tn)?void Bn():(Bn(e),e),u(D.$,e)||Pn&&!i(e)){var o,a,r=d(D.$,e);if(Pn){const n=kn(Pn);if(p(Pn,e))return Un(e),void Nn(D.$,Pn);if(r)return Pn.sn.classList.remove("b"),Pn=r,void Nn(D.$,Pn);const t={v:Pn.v,p:Pn.p,m:Pn.m};(o=Pn).p=(a=e).p,o.v=a.v,o.m=a.m,sn(t,n),sn(e,kn(e)),!Cn||null!=(o=G())&&o.q&&u(D.$,o.q)||(Cn.remove(),Cn=void 0),An++,Un(e,!Dn(D.P,D.$))}else Pn=r,Nn(D.$,Pn);document.body.classList.toggle("a",!!Pn)}}),a.append(n),o.push(n)}),Hn.push(o)});{let r,s,c,l,f;const v=m,e=document.body,p=a=>{r=setTimeout(()=>{var n,t,e,o;r=void 0,n=a,!s&&(l&&(l.remove(),l=void 0),s=1,c=xn(n,"h"),l=c&&(e=Fn(h,t=c),o=d(D.$,e),Nn(D.$,o),Bn(e),document.body.classList.toggle("a",1),Pn=void 0,m.classList.add("l"),(o=qn(t)).classList.add("m"),o.cloneNode(1)))&&(n.preventDefault(),v.appendChild(l),l.classList.add("drag-overlay"),Object.assign(l.style,Object.assign({position:"fixed",pointerEvents:"none",zIndex:"9999"},Mn(n))))},200)},o=n=>{var t,e,o,a;r&&(clearTimeout(r),r=void 0),s=0,l&&(n.preventDefault(),l.remove(),l=void 0,(f=xn(n,"k"))?(n="touchend"===n.type,t=c,e=f,m.classList.remove("l"),o=Fn(h,e),a=Fn(h,t),qn(t).classList.remove("m"),i(o)||u(D.$,o)?n&&o===a&&t.click():(t.click(),e.click())):(n=c,m.classList.remove("l"),qn(n).classList.remove("m"),n.click()))},a=n=>{s&&l&&(n.preventDefault(),Object.assign(l.style,Mn(n,c)))};v.addEventListener("mousedown",p),v.addEventListener("touchstart",p),e.addEventListener("mousemove",a),e.addEventListener("touchmove",a,{passive:0}),e.addEventListener("mouseup",o),e.addEventListener("touchend",o)}return m}function qn(n){return[...n.children].find(n=>n.classList.contains("D"))}function Fn(n,t){for(const o in Hn){var e=Hn[o].indexOf(t);if(-1!==e)return n[o][e]}}function Nn(n,t){n.forEach(n=>{n.sn.classList.remove("e","d","b")}),t&&(t.sn.classList.add("b"),t.nn.forEach(n=>{n.sn.classList.add("e")}),t.tn.forEach(n=>{n.sn.classList.add("d")}))}var Rn=function(){function V(n){return Math.sin(6.283184*n)}function O(n){return.003959503758*2**((n-128)/12)}var F,J,B,W,U,I=[V,function(n){return n%1<.5?1:-1},function(n){return n%1*2-1},function(n){return(n=n%1*4)<2?n-1:3-n}];this.init=function(n){J=(F=n).gn,B=0,W=n.xn*n.wn*(J+1)*2,U=new Int32Array(W)},this.Cn=function(){for(var n,t,e,o,a,r,i,s=new Int32Array(W),c=F.Mn[B],P=F.xn,l=F.wn,u=0,d=0,p=0,f=[],h=0;h<=J;++h)for(e=c.yn[h],n=0;n<l;++n){for(var m=e?c.c[e-1].f[n]:0,v=(m&&(c.pn[m-1]=c.c[e-1].f[n+l]||0,m<17)&&(f=[]),I[c.pn[16]]),g=c.pn[17]/512,b=2**(c.pn[18]-9)/P,L=c.pn[19],D=c.pn[20],y=43.23529*c.pn[21]*3.141592/44100,x=1-c.pn[22]/255,w=1e-5*c.pn[23],M=c.pn[24]/32,E=c.pn[25]/512,$=6.283184*2**(c.pn[26]-9)/P,j=c.pn[27]/255,C=c.pn[28]*P&-2,T=(h*l+n)*P,k=0;k<4;++k)if(t=e?c.c[e-1].n[n+k*l]:0){f[t]||(f[t]=function(n,t){for(var e,o,a,r,i=I[n.pn[0]],s=n.pn[1],c=n.pn[3]/32,l=I[n.pn[4]],u=n.pn[5],d=n.pn[8]/32,p=n.pn[9],f=n.pn[10]*n.pn[10]*4,h=n.pn[11]*n.pn[11]*4,m=n.pn[12]*n.pn[12]*4,v=1/m,g=-n.pn[13]/16,b=n.pn[14],L=P*2**(2-n.pn[15]),D=new Int32Array(f+h+m),y=0,x=0,w=0,M=0;w<f+h+m;w++,M++)0<=M&&(M-=L,a=O(t+(15&(b=b>>8|(255&b)<<4))+n.pn[2]-128),r=O(t+(15&b)+n.pn[6]-128)*(1+8e-4*n.pn[7])),e=1,w<f?e=w/f:f+h<=w&&(e=(1-(e=(w-f-h)*v))*3**(g*e)),o=i(y+=a*e**c)*s,o+=l(x+=r*e**d)*u,p&&(o+=(2*Math.random()-1)*p),D[w]=80*o*e|0;return D}(c,t));for(var H=f[t],A=0,S=2*T;A<H.length;A++,S+=2)s[S]+=H[A]}for(A=0;A<P;A++)(a=s[o=2*(T+A)])||p?(r=y,L&&(r*=v(b*o)*g+.5),d+=(r=1.5*Math.sin(r))*(r=x*(a-d)-(u+=r*d)),a=3==D?d:1==D?r:u,w&&(a=(a*=w)<1?-1<a?V(.25*a):-1:1,a/=w),p=1e-5<(a*=M)*a,i=a*(1-(r=Math.sin($*o)*E+.5)),a*=r):i=0,C<=o&&(i+=s[o-C+1]*j,a+=s[o-C]*j),s[o]=0|i,s[1+o]=0|a,U[o]+=0|i,U[1+o]+=0|a}return++B/F.An},this.kn=function(n){for(var t=n.createBuffer(2,W/2,44100),e=0;e<2;e++)for(var o=t.getChannelData(e),a=e;a<W;a+=2)o[a>>1]=U[a]/65536;return t},this.Fn=function(){var n=44+2*W-8,t=n-36,e=new Uint8Array(44+2*W);e.set([82,73,70,70,255&n,n>>8&255,n>>16&255,n>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,255&t,t>>8&255,t>>16&255,t>>24&255]);for(var o=0,a=44;o<W;++o){var r=U[o];e[a++]=255&(r=r<-32767?-32767:32767<r?32767:r),e[a++]=r>>8&255}return e},this.getData=function(n,t){for(var e=2*Math.floor(44100*n),o=new Array(t),a=0;a<2*t;a+=1){var r=e+a;o[a]=0<n&&r<U.length?U[r]/32768:0}return o}},Gn={Mn:[{pn:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],yn:[1,1,2,2,2,2,2,2,2],c:[{n:[123,,,,,,,,120,,,,,,,,116,,,,,,,,118],f:[]},{n:[123,,,,,,123,,120,,,,,,120,,116,,,,,,116,,118,,,,,,118],f:[]}]},{pn:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],yn:[,,,1,2,3,2,1],c:[{n:[,,135,139,142,,,,,,132,135,139,,,,,,128,132,135,,,,,,130,134,137],f:[]},{n:[,,135,135,135,,,,,,132,132,132,,,,,,128,128,128,,,,,,130,130,130,,,,,,139,139,139,,,,,,135,135,135,,,,,,132,132,132,,,,,,134,134,134,,,,,,142,142,142,,,,,,139,139,139,,,,,,135,135,135,,,,,,137,137,137],f:[]},{n:[,,,,135,,,,,,,,132,,,,,,,,128,,,,,,,,130,,,,,,,139,,,,,,,,135,,,,,,,,132,,,,,,,,134,,,,,,,142,,,,,,,,139,,,,,,,,135,,,,,,,,137],f:[]}]},{pn:[0,0,140,0,0,0,140,0,0,81,4,10,47,55,0,0,0,187,5,0,1,239,135,0,32,108,5,16,4],yn:[,,1,1,1,2,2,1],c:[{n:[,,,,,,99,,,,,,,,99,,,,,,,,99,,,,,,,,99],f:[]},{n:[,,99,,,,99,,,,99,,,,99,,,,99,,,,99,,,,99,,,,99],f:[]}]},{pn:[0,255,116,79,0,255,116,0,83,0,4,6,69,52,0,0,0,0,0,0,2,14,0,0,32,0,0,0,0],yn:[1,2,3,2,2,3,2],c:[{n:[111,,,,,,,,111,,,,,,,,111,,,,,,,,111],f:[]},{n:[111,,,,111,,,,111,,,,111,,,,111,,,,111,,,,111,,,,111],f:[]},{n:[111,,111,,111,,111,,111,,111,,111,,111,,111,,111,,111,,111,,111,,111,,111,,111],f:[]}]}],xn:11025,wn:32,gn:8,An:4};let Jn,Kn,Wn=0,Xn=0,_n=0;const Yn="true"===$("muted");(async()=>{var a,n,r,i=t({tag:"header"});Kn=t({t:"score"}),i.append(Kn),n=t({t:"h-btns"}),r=e({text:Yn?"🔇":"🔊",o:n=>{Wn=!Wn,t=!Jn.paused&&!Jn.ended,Wn&&!t?Jn.play():!Wn&&t&&Jn.pause(),E("muted",Wn?"false":"true");var t=Wn;n.target.textContent=t?"🔊":"🔇"},i:1}),n.append(r),i.append(n),n.append(e({text:"⚙️",o:()=>_(_n,0),i:1})),document.body.append(i),(F()?Vn:async function(){document.body.classList.remove("a");var n=fn();En||(En=In(n),Sn(5),On())})(),o.subscribe(0,()=>{Vn()}),o.subscribe(2,({mn:n,vn:t,bn:e})=>{F()||!D.an?Kn.textContent="":(_n=n,e=`${m(27)}: ${t} | Par: ${e} | ${t=n,(""+(1e4+t)).substring(1)}⭐️`,Kn.textContent=e)}),Wn=!(r=Yn),(Jn=document.createElement("audio")).loop=1,Jn.volume=.5,Jn.playbackRate=1,(r=new Rn).init(Gn),a=r,await new Promise(n=>{const t=setInterval(()=>{1<=a.Cn()&&(clearInterval(t),n())},0)}),r=r.Fn(),Jn.src=URL.createObjectURL(new Blob([r],{type:"audio/wav"})),document.addEventListener("visibilitychange",()=>{Jn.muted=document.hidden}),o.subscribe(3,()=>{Jn.muted=1}),o.subscribe(4,()=>{Jn.muted=0}),document.addEventListener("click",()=>{var n;Xn||(Xn=1,n=!Jn.paused&&!Jn.ended,Wn&&!n&&Jn.play())})})()</script></body></html>