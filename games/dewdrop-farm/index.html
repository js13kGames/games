<!doctype html><html class=magic id=season><title>Dewdrop Farm</title><meta content="width=device-width" name=viewport><meta content=$ilp.uphold.com/22KpwEYMYi3U name=monetization><style>*{cursor:default;margin:0;padding:0;box-sizing:border-box;image-rendering:optimizeSpeed;image-rendering:-moz-crisp-edges;image-rendering:-webkit-optimize-contrast;image-rendering:optimize-contrast;image-rendering:pixelated}html{font-weight:400;font-size:62.5%;font-family:Georgia,Times,"Times New Roman",serif;background:#14a02e;color:#141013}a{color:#143464}a:visited{color:#73172d}.magic{transition:background 22.5s linear}.spring{background:#92dcba}.summer{background:#9cdb43}.fall{background:#e9b5a3}.winter{background:#b9bffb}.world{width:32rem;min-height:44.4rem}.row{display:flex;flex-direction:row}.col{display:flex;flex-direction:column}.center{display:flex;justify-content:center;align-items:center}.buffer{min-height:28.8rem;flex-grow:1;margin:0 .8rem}.tile{display:inline-flex;width:4.8rem;height:4.8rem;background-size:4.8rem 345.6rem;background-image:url(data:image/png;base64,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);background-position:0 0;background-repeat:no-repeat}.farm{display:grid;grid-template:repeat(6,4.8rem)/repeat(6,4.8rem);width:fit-content;align-self:center;user-select:none;touch-action:manipulation}.plot{display:grid}.plot>.animal,.plot>.crop,.plot>.fertilizer,.plot>.ground,.plot>.water{grid-area:1/1/-1/-1}.plot>.animal,.plot>.crop,.plot>.water{z-index:1}.tile.ground{background-position:0 -81.6rem}.till.stage0000{background-position:0 -4.8rem}.till.stage0001{background-position:0 -19.2rem}.till.stage0010{background-position:0 -24rem}.till.stage0011{background-position:0 -52.8rem}.till.stage0100{background-position:0 -9.6rem}.till.stage0101{background-position:0 -14.4rem}.till.stage0110{background-position:0 -38.4rem}.till.stage0111{background-position:0 -67.2rem}.till.stage1000{background-position:0 -33.6rem}.till.stage1001{background-position:0 -62.4rem}.till.stage1010{background-position:0 -28.8rem}.till.stage1011{background-position:0 -57.6rem}.till.stage1100{background-position:0 -48rem}.till.stage1101{background-position:0 -76.8rem}.till.stage1110{background-position:0 -43.2rem}.till.stage1111{background-position:0 -72rem}.tile.water{background-position:0 -86.4rem}.rose.stage1,.sunflower.stage1,.tulip.stage1{background-position:0 -264rem}.rose.stage2,.sunflower.stage2,.tulip.stage2{background-position:0 -268.8rem}.rose.stage3,.sunflower.stage3,.tulip.stage3{background-position:0 -273.6rem}.rose.stage4,.sunflower.stage4,.tulip.stage4{background-position:0 -278.4rem}.sunflower.stage5,.sunflower.stage6{background-position:0 -283.2rem}.tulip.stage5,.tulip.stage6{background-position:0 -288rem}.rose.stage5,.rose.stage6{background-position:0 -292.8rem}.wildflower.stage6{background-position:0 -297.6rem}.tile.fertilizer{background-position:0 -302.4rem}.tile.crop.stage-1{background-position:0 -307.2rem}.tile.coins{transform:scale(.75);background-position:0 -312rem}.tile.hoe{background-position:0 -316.8rem}.tile.can{background-position:0 -321.6rem}.tile.sprinkler{background-position:0 -326.4rem}.tile.seeds{background-position:0 -331.2rem}.tile.bunny{background-position:0 -336rem}.tile.cow{background-position:0 -340.8rem}.turnip.stage1{background-position:0 -91.2rem}.turnip.stage2{background-position:0 -120rem}.turnip.stage3{background-position:0 -148.8rem}.turnip.stage4{background-position:0 -177.6rem}.turnip.stage5{background-position:0 -206.4rem}.turnip.stage6{background-position:0 -235.2rem}.tomato.stage1{background-position:0 -96rem}.tomato.stage2{background-position:0 -124.8rem}.tomato.stage3{background-position:0 -153.6rem}.tomato.stage4{background-position:0 -182.4rem}.tomato.stage5{background-position:0 -211.2rem}.tomato.stage6{background-position:0 -240rem}.eggplant.stage1{background-position:0 -100.8rem}.eggplant.stage2{background-position:0 -129.6rem}.eggplant.stage3{background-position:0 -158.4rem}.eggplant.stage4{background-position:0 -187.2rem}.eggplant.stage5{background-position:0 -216rem}.eggplant.stage6{background-position:0 -244.8rem}.strawberry.stage1{background-position:0 -105.6rem}.strawberry.stage2{background-position:0 -134.4rem}.strawberry.stage3{background-position:0 -163.2rem}.strawberry.stage4{background-position:0 -192rem}.strawberry.stage5{background-position:0 -220.8rem}.strawberry.stage6{background-position:0 -249.6rem}.potato.stage1{background-position:0 -110.4rem}.potato.stage2{background-position:0 -139.2rem}.potato.stage3{background-position:0 -168rem}.potato.stage4{background-position:0 -196.8rem}.potato.stage5{background-position:0 -225.6rem}.potato.stage6{background-position:0 -254.4rem}.avocado.stage1{background-position:0 -115.2rem}.avocado.stage2{background-position:0 -144rem}.avocado.stage3{background-position:0 -172.8rem}.avocado.stage4{background-position:0 -201.6rem}.avocado.stage5{background-position:0 -230.4rem}.avocado.stage6{background-position:0 -259.2rem}.stats{justify-content:space-between;align-items:center;margin:0 .8rem;font-size:1.6rem}.cash{display:flex;flex-direction:row;align-items:center;justify-content:flex-end}.time>sup{font-size:.9888751545rem}.info,.market,.store{background:#e4d2aa;border:.1rem solid #71413b;font-size:1.6rem;touch-action:manipulation}.info>.slot,.market>.slot,.store>.slot{margin:.1rem}.info>.item,.market>.item,.store>.item{justify-content:space-between}.info>.item>.crop,.market>.item>.crop,.store>.item>.crop{align-items:center;position:relative;padding:.2rem 0 .2rem .4rem}.info>.item>.crop>.col,.market>.item>.crop>.col,.store>.item>.crop>.col{margin-left:.4rem}.info>.item>.crop .unlock,.market>.item>.crop .unlock,.store>.item>.crop .unlock{font-size:1.2rem}.info .title,.market .title,.store .title{font-size:2.4rem}.info .subtitle,.market .subtitle,.store .subtitle{font-size:1.2rem}.info .subtitle>sup,.market .subtitle>sup,.store .subtitle>sup{font-size:.7416563659rem}.info .message,.market .message,.store .message{font-size:1.6rem;padding:.8rem}.slot{background-color:#f4d29c;border:.1rem solid #71413b;position:relative}.slot>:first-child:after,.slot>:first-child:before,.slot>:last-child:after,.slot>:last-child:before{content:"";display:inline-block;position:absolute;width:.4rem;height:.4rem;margin:.1rem;background:#dba463;border:.1rem solid #bb7547}.slot>:first-child:before{top:0;left:0;border-bottom-right-radius:.4rem}.slot>:first-child:after{bottom:0;left:0;border-top-right-radius:.4rem}.slot>:last-child:before{top:0;right:0;border-bottom-left-radius:.4rem}.slot>:last-child:after{bottom:0;right:0;border-top-left-radius:.4rem}.sticker{justify-content:center;align-items:center;width:2.4rem;height:2.4rem;background:#122020;border-radius:50%;font-size:1.6rem}.sticker>.inner{display:flex;justify-content:center;align-items:center;width:2rem;height:2rem;background:#fef3c0;border-radius:50%}.picture{display:grid;grid-template:50% 50%/50% 50%}.picture>.crop,.picture>.seeds,.picture>.tool{grid-area:1/1/-1/-1}.picture>.sticker{grid-area:2/1/2/1;z-index:1}.picture>.key{grid-area:1/2/1/2;margin-left:1.2rem;margin-top:.1rem}.key{display:grid;place-items:center;width:1.2rem;height:1.2rem;font-family:"Lucida Grande",Lucida,Arial,sans-serif;cursor:default}.inventory{background:#e4d2aa;border:.1rem solid #71413b;padding:.1rem;user-select:none;width:fit-content;align-self:center}.inventory>.row{background-color:#f4d29c;border:.1rem solid #71413b}.inventory>.row .item{margin:.1rem;background:#e4d2aa;border-top:.2rem solid #a08662;border-right:.2rem solid #fef3c0;border-bottom:.2rem solid #fef3c0;border-left:.2rem solid #a08662;border-radius:.4rem}.inventory>.row .item.active{border-top:.2rem solid #b4202a;border-right:.2rem solid #73172d;border-bottom:.2rem solid #73172d;border-left:.2rem solid #b4202a}.controls{margin:.4rem 0;justify-content:space-around;align-items:center}.button{position:relative;display:grid;place-items:center;font-variant:small-caps;font-size:1.6rem;min-width:4.8rem;height:2.9666254635rem;margin:.4rem .6rem .6rem .4rem;padding:0 .8rem;background:#ffd541;border-radius:.4rem;border-top:.1rem solid #f9a31b;border-right:.1rem solid #fa6a0a;border-bottom:.1rem solid #fa6a0a;border-left:.1rem solid #f9a31b;box-shadow:.2rem .2rem rgba(20,16,19,.5),.4rem .4rem rgba(74,84,98,.5);transition:.1s;user-select:none}.button:before{content:"";position:absolute;top:-.15rem;right:-.15rem;bottom:-.15rem;left:-.15rem;border:.1rem solid #73172d;border-radius:.4rem}.button.active,.button:active{transform:translate(.1rem,.1rem);box-shadow:0 0 rgba(20,16,19,.5),0 0 rgba(74,84,98,.5)}.register{position:relative;margin:0 1rem .2rem 0;min-width:8.8rem;background:#20d6c7;border-top:.1rem solid #249fde;border-right:.1rem solid #285cc4;border-bottom:.1rem solid #285cc4;border-left:.1rem solid #249fde;border-radius:.4rem;box-shadow:.2rem .2rem rgba(20,16,19,.5),.4rem .4rem rgba(74,84,98,.5);transition:.1s;user-select:none}.register>.cash{margin:-.6rem -.6rem -.6rem .6rem}.register:before{content:"";position:absolute;top:-.15rem;right:-.15rem;bottom:-.15rem;left:-.15rem;border:.1rem solid #73172d;border-radius:.4rem}.register:active{transform:translate(.1rem,.1rem);box-shadow:0 0 rgba(20,16,19,.5),0 0 rgba(74,84,98,.5)}.register.disabled{background-color:#b3b9d1}.colophon{font-size:1rem;text-align:right}abbr[title=and]{font-family:Baskerville,Constantia,Georgia,Times,"Times New Roman",serif;font-style:italic;text-decoration:none;font-size:110%;cursor:help;line-height:0;position:relative;vertical-align:baseline}.hidden{display:none!important}.capitalize{text-transform:capitalize}.small{transform:scale(.75)}.rotate90{transform:rotate(90deg)}.rotate180{transform:rotate(180deg)}.rotate270{transform:rotate(270deg)}.rotateX{transform:scaleX(-1)}@media screen and (min-width:40em){html{font-size:120%}}</style><body class=center><div class="col world"><div class="row stats"><div id=cash></div><div class=time id=time></div></div><div class="col buffer"><div class="col farm" id=farm></div><div class="col store" id=store></div><div class="col market" id=market></div><div class="col info" id=info><div class=slot><div class="center title">Dewdrop Farm</div><div class=message id=information></div><div class="row controls"><div class=button id=reset data-crop=reset>New Game</div><div class="col colophon"><div>Design <abbr title=and>&</abbr> dev by <a href=https://www.frankmitchell.org/ title="Frank by name and nature.">Frank Mitchell</a></div><div>for <a href=//js13kgames.com/2020/ title="Andrzej Mazur (js13kGames): HTML5 and JavaScript Game Development Competition in just 13 kB">js13kGames 2020</a></div><div><a href=https://creativecommons.org/licenses/by/4.0 title="Creative Commons Attribution 4.0 International">CC BY 4.0</a></div></div></div></div></div></div><div class=inventory><div class=row><div class="center item tile" id=hoe><span class=picture><span class="tile tool hoe"></span> <kbd class=key>1</kbd></span></div><div class="center item tile" id=water><span class=picture><span class="tile tool can"></span> <kbd class=key>2</kbd></span></div><div class="center item tile" id=slot0></div><div class="center item tile" id=slot1></div><div class="center item tile" id=slot2></div><div class="center item tile" id=slot3></div></div></div><div class="row controls"><div class=button id=tend>Farm</div><div class=button id=buy>Buy</div><div class=button id=sell>Sell</div><div class=button id=geek>Info</div></div></div><script>!function(){"use strict";function e(t){return t instanceof e?t:(this.element=t,"string"==typeof t&&0===t.indexOf("#")&&(this.element=document.getElementById(t.slice(1))),this)}e.prototype.addClass=function(e){return this.element&&this.element.classList&&e&&this.element.classList.add(e),this},e.prototype.removeClass=function(e){return this.element&&this.element.classList&&this.element.classList.remove(e),this},e.prototype.html=function(e){if(this.element){if(void 0===e)return this.element.innerHTML;this.element.innerHTML=e}return this},e.prototype.click=function(e,t,s){const o=this;if(this.element){const r="ontouchstart"in document.documentElement==0,n=r?"mousedown":"touchstart",a=r?"mousemove":"touchmove",l=r?"mouseup":"touchend",i="contextmenu",c=e=>{o.active&&(e.preventDefault(),t&&t(o,e))},d=e=>{o.active&&(s&&s(o,e),delete o.active)},p=e=>{o.active&&(e.preventDefault(),s&&s(o,e),delete o.active)},u=t=>{o.active=!0,t.preventDefault(),e&&e(o,t)};this.element.addEventListener(n,u),this.element.addEventListener(a,c),document.addEventListener(l,p),document.addEventListener(i,d)}return this};var t=function(t){return new e(t)};const s={clone:e=>void 0!==e?JSON.parse(JSON.stringify(e)):void 0,timestamp:()=>window.performance&&window.performance.now?window.performance.now():(new Date).getTime()};var o=s;const r={},n={turnip:{seed:"bulb",seasons:["spring","fall"],prices:{crop:35,seed:20},stages:[0,1,1,1,0,1],regrow:0,xp:8,level:0},tomato:{seed:"seed",seasons:["summer"],prices:{crop:70,seed:50},stages:[0,2,2,2,2,3],regrow:4,xp:12,level:0},eggplant:{seed:"seed",seasons:["fall"],prices:{crop:90,seed:20},stages:[0,1,1,1,1,1],regrow:5,xp:12,level:0},strawberry:{seed:"seed",seasons:["spring"],prices:{crop:120,seed:100},stages:[0,1,1,2,2,2],regrow:4,xp:18,level:0},potato:{seed:"",seasons:["summer","fall"],prices:{crop:60,seed:50},stages:[0,1,1,1,2,1],regrow:0,xp:14,level:0},avocado:{seed:"pit",seasons:["spring","summer"],prices:{crop:75,seed:40},stages:[0,2,2,3,2,1],regrow:0,xp:15,level:0},wildflower:{seed:"seed",seasons:["spring","summer","fall"],prices:{crop:1,seed:0},stages:[],regrow:0,xp:0,level:99},rose:{seed:"seed",seasons:["spring","summer","fall"],prices:{crop:90,seed:50},stages:[0,1,1,4,4,3],regrow:0,xp:10,level:99},tulip:{seed:"bulb",seasons:["spring","summer","fall"],prices:{crop:35,seed:10},stages:[0,1,1,1,2,2],regrow:0,xp:13,level:99},sunflower:{seed:"seed",seasons:["spring","summer","fall"],prices:{crop:65,seed:30},stages:[0,1,1,2,3,2],regrow:0,xp:11,level:99},sprinkler:{seed:"",seasons:["summer"],prices:{crop:450,seed:1350},stages:[],regrow:0,xp:0,level:4},fertilizer:{seed:"",seasons:["spring"],prices:{crop:20,seed:50},stages:[],regrow:0,xp:0,level:2},cow:{seed:"",seasons:["fall"],prices:{crop:1500,seed:15e4},stages:[],regrow:0,xp:0,level:6}};r.seasonal=e=>Object.keys(n).filter((t=>(n[t].seasons||[]).includes(e))),r.info=e=>{const t=o.clone(n[e]);return t&&(t.type=e),t},r.days=({crop:e,stage:t,regrow:s},o=(e=>e))=>{const n=r.info(e);s&&(n.stages=[s]);let a=0;if(n){let e=t%n.stages.length;for(;e>=0;){const t=n.stages[e],s=Math.ceil(o(t));a+=s>0?s:t,e-=1}}return a};var a=r;const l={};l.random=Math.random,l.shuffle=e=>{const t=e.slice();let s,o,r=t.length;for(;r>0;)o=Math.floor(l.random()*r),r-=1,s=t[r],t[r]=t[o],t[o]=s;return t},l.between=(e,t)=>l.random()*(t-e)+e,l.pick=e=>e?e[Math.floor(l.random()*e.length)]:void 0;var i=l;const c=[100,380,770,1300,2150,3300,4800,6900,1e4,15e3],d=["spring","summer","fall","winter"],p=28*d.length,u=2520/d.length/28,m=c[c.length-1],f={SECONDS_PER_DAY:u},v=(e,{row:t,col:s})=>e&&t>=0&&t<e.rows&&s>=0&&s<e.cols,h=(e,t)=>{const s=t.col-e.col,o=t.row-e.row;return Math.abs(s)+Math.abs(o)},w=(e,t=[90,180,270,360])=>e&&e.rotate?e.rotate:i.pick(t),g=e=>({row:t,col:s})=>t<=0||t>=e.rows-1||s<=0||s>=e.cols-1,y=e=>{const t=[];for(let s=0;s<e.rows;s+=1)for(let o=0;o<e.cols;o+=1)t.push({row:s,col:o});return t},k=(e,{row:t,col:s},o)=>{if(v(e,{row:t,col:s})&&e.land[t][s][o])return{...e.land[t][s][o],type:o,row:t,col:s}},b=(e,{row:t,col:s,crop:o,stage:r,time:n,regrow:a,rotate:l},i)=>{const c={time:n||e.time};l&&(c.rotate=l),o&&(c.crop=o,c.stage=r||1,c.regrow=a),e.land[t][s][i]=c},C=(e,{row:t,col:s},o)=>delete e.land[t][s][o],E=e=>{const t=y(e).find((t=>!!f.bunny(e,t)));return t?f.bunny(e,t):void 0},x=()=>1*i.between(1*u,2*u),$=(e,t)=>e||t?e.col<t.col?"X":0:i.pick(["X",0]),M=(e,t)=>{e&&t&&(e.xp=Math.max(0,Math.min(e.xp+t,m)))},S=e=>{for(let t=0;t<e.inventory.length;t+=1)e.inventory[t]&&!e.inventory[t].amount&&(e.inventory[t]=void 0)},D=(e,t)=>{let s=!1;S(e);let o=e.inventory.findIndex((e=>e&&!!e.seed==!!t.seed&&e.type===t.type&&e.amount+t.amount<=16));return o<0&&(o=e.inventory.findIndex((e=>!e))),o>=0&&o<4&&(e.inventory[o]||(e.inventory[o]={...t,amount:0}),e.inventory[o].amount+t.amount<=16&&(e.inventory[o].amount+=t.amount,s=!0)),S(e),s},z=(e,t)=>{let s=!1;S(e);let o=e.inventory.findIndex(((e,s)=>e&&!!e.seed==!!t.seed&&e.type===t.type&&(void 0===t.index||s===t.index)));return o>=0&&o<4&&(e.inventory[o].amount-=t.amount,e.inventory[o].amount=Math.max(0,e.inventory[o].amount),s=!0),S(e),s},_=(e,t)=>{const s=f.day(e),o=f.season(e),r=a.info(t.type);let n=0;if(r){if(t.seed){const t=f.luck(e,.15,.04);n=Math.ceil(r.prices.seed*t)}else if(n=r.prices.crop,!r.seasons.includes(o)&&s>1){const t=f.luck(e,.4,.04);n=Math.ceil(r.prices.crop*t)}"sprinkler"!==t.type&&"fertilizer"!==t.type||(n=r.prices.crop)}return n},N=(e,t)=>{const s=a.info(t.type);let o=0;return s&&(o=t.seed?s.prices.seed:s.prices.crop),o},O=(e,t)=>(e.actions.push(t),e),A=e=>{const t=e.actions.slice().filter((({tool:e})=>"update"!==e));return e.actions=[],t.forEach((t=>{e=f.dispatch(e,t)})),e};f.create=(e={})=>{const t={actions:[],time:0,rows:6,cols:6,land:[],market:{},inventory:[],cash:500,bunny:x(),version:3,monetization:!1,xp:0,cow:!1,food:0,...e};for(;t.inventory.length<4;)t.inventory.push(void 0);for(let e=0;e<t.rows;e+=1){t.land[e]=[];for(let s=0;s<t.cols;s+=1)t.land[e][s]={grass:{time:t.time,rotate:w()}}}return t},f.dispatch=(e,t)=>{const s=o.clone(t),r=o.clone(e);if(!v(r,s))return r;switch(s.tool){case"update":return((e,t)=>((e=A(e)).time+=t.dt,e.bunny-=t.dt,e=O(e,{tool:"bunny",row:0,col:0}),O(e,{tool:"hop",row:0,col:0})))(r,s);case"harvest":return((e,t)=>{const s=f.planted(e,t);if(!s||"sprinkler"===s.crop||s.stage<5)return e;const o={type:s.crop,amount:1,seed:!1};if(!D(e,o))return e;C(e,t,"plant");const r=a.info(s.crop);if(M(e,r.xp),r.regrow){const o={type:"plant",row:t.row,col:t.col,crop:s.crop,regrow:r.regrow,stage:4};b(e,o,"plant")}return e})(r,s);case"hoe":return((e,t)=>{const s=f.planted(e,t);if(s)if(C(e,t,"plant"),s.stage>=5){const t={type:s.crop,amount:1,seed:!1};D(e,t)}else if(1===s.stage){const t={type:s.crop,amount:1,seed:!0};D(e,t)}else if(s.stage>1&&f.skilled(e,.3,.01)){const t={type:s.crop,amount:1,seed:!0};D(e,t)}C(e,t,"fertilizer"),b(e,t,"till");const o={tool:"poke",row:t.row,col:t.col,with:"hoe"};return O(e,o)})(r,s);case"grass":return((e,t)=>{if(!f.planted(e,t)){C(e,t,"till"),C(e,t,"grass"),C(e,t,"water"),C(e,t,"fertilizer");const s={row:t.row,col:t.col,rotate:w()};b(e,s,"grass")}return e})(r,s);case"water":return((e,t)=>{if(f.tilled(e,t)){const s=f.watered(e,t);t.rotate=w(s),b(e,t,"water")}const s={tool:"poke",row:t.row,col:t.col,with:"water"};return O(e,s)})(r,s);case"sprinkler":return((e,t)=>{const s=f.planted(e,t);return s&&"sprinkler"===s.crop&&[t].concat(f.orthogonal(e,t)).concat(f.diagonal(e,t)).forEach((({row:t,col:s})=>{e=O(e,{tool:"water",row:t,col:s})})),e})(r,s);case"drain":return((e,t)=>(C(e,t,"water"),e))(r,s);case"slot0":case"slot1":case"slot2":case"slot3":return((e,t)=>{const s=e.inventory[t.slot],o=f.planted(e,t);if(((e,t)=>{const s=e.inventory[t.slot],o=!!f.planted(e,t),r=!!f.tilled(e,t),n=!!f.fertilized(e,t);return!!s&&("fertilizer"===s.type?r&&!n:"cow"===s.type||r&&!o)})(e,t)){const r={type:s.type,amount:1,seed:!0,index:t.slot};if(z(e,r)){if(t.type="plant",t.crop=r.type,"wildflower"===t.crop){const s=["rose","tulip","sunflower"];if(t.crop=i.pick(s),t.rotate=i.pick(["X",0]),f.skilled(e,.02,.04)){const o=f.season(e),r=a.seasonal(o).filter((e=>a.info(e).stages.length&&!s.includes(e)));r.length&&(t.crop=i.pick(r),t.rotate=0)}}"fertilizer"===t.crop&&(t.type="fertilizer",t.crop=void 0,t.rotate=w(o)),"cow"===t.crop&&(t.type=void 0,e.cow=!0),t.type&&b(e,t,t.type)}}const r={...t,tool:"poke",with:s?s.type:"hand",crop:s&&s.type&&!s.seed};e=O(e,r);const n={...t,tool:"harvest"};return O(e,n)})(r,s);case"grow":return((e,t)=>{const s=f.planted(e,t);if(!s||s.stage<1||s.stage>=5)return e;const o=a.info(s.crop),r=f.season(e);return o.stages.length<1||(o.seasons.includes(r)?s.stage+=1:(s.stage=-1,s.rotate=w(s,["X",0]),C(e,s,"fertilizer")),b(e,s,"plant")),e})(r,s);case"buy":return((e,t)=>{const s=f.level(e),o=a.info(t.crop);if(s<o.level&&"wildflower"!==o.type)return e;if(e.cash<o.prices.seed)return e;const r={type:o.type,amount:1,seed:!0};return D(e,r)&&(e.cash-=o.prices.seed),e})(r,s);case"sell":return((e,t)=>{const s={type:t.crop,amount:1,seed:t.seed};return z(e,s)&&(e.cash+=_(e,s)),e})(r,s);case"move":return((e,t)=>{const s=E(e),o=f.planted(e,t),r=f.fertilized(e,t);return s&&(C(e,s,"bunny"),t.rotate=$(s,t),b(e,t,"bunny"),e.cow?(o&&"sprinkler"!==o.crop&&C(e,t,"plant"),b(e,t,"till"),f.skilled(e,.01,.02)&&(t.rotate=w(r),b(e,t,"fertilizer"))):o&&"sprinkler"!==o.crop&&o.stage>1&&o.stage<5&&C(e,t,"plant")),e})(r,s);case"bunny":return(e=>{if(!E(e)&&e.bunny<=0){const t={...i.pick(y(e).filter((e=>({row:t,col:s})=>t>0&&t<e.rows-1&&s>0&&s<e.rows-1)(e))),rotate:$()};b(e,t,"bunny")}return e})(r);case"hop":return(e=>{const t=E(e);if(t){const s=Math.ceil(e.time/u),o=s-Math.ceil(t.time/u);if(s-(Math.ceil(e.food/u)||0)>1&&o>0){const s={tool:"move",...i.pick(f.orthogonal(e,t))};e=O(e,s)}}return e})(r);case"poke":return((e,t)=>{if(!f.bunny(e,t))return e;if(e.cow&&t.crop){if(Math.ceil(e.time/u)-(Math.ceil(e.food/u)||0)>0){const s={type:t.with,amount:1,seed:!1};z(e,s)&&(e.food=e.time)}return e}if(g(e)(t))return C(e,t,"bunny"),e.bunny=x(),e;if("hoe"===t.with&&(M(e,-20),f.skilled(e,.01,.02)))return C(e,t,"bunny"),e.bunny=x(),e.cow=!1,D(e,{type:"fertilizer",amount:1,seed:!0}),e;"hand"===t.with&&M(e,15);const s=i.shuffle((e=>y(e).filter(g(e)))(e));s.sort(((e,s)=>h(e,t)-h(s,t)));const o=s[0];let{row:r,col:n}=t;return o.row<r?r-=1:o.row>r&&(r+=1),o.col<n?n-=1:o.col>n&&(n+=1),O(e,{tool:"move",row:r,col:n})})(r,s);default:return r}},f.save=(e,t)=>{try{let s=o.clone(e);s=A(s);const r=JSON.stringify(s);return t.setItem("dewdropfarm",r),[s,!0]}catch{return[e,!1]}},f.load=(e,t)=>{try{const s=t.getItem("dewdropfarm"),o=JSON.parse(s);return o.version===e.version?o:e}catch{return e}},f.plots=e=>y(e),f.diagonal=(e,t,s=!0)=>{let o=[];if(v(e,t)){const{row:e,col:s}=t;o=[{row:e+1,col:s+1},{row:e+1,col:s-1},{row:e-1,col:s+1},{row:e-1,col:s-1}]}return s?o.filter((t=>v(e,t))):o},f.orthogonal=(e,t,s=!0)=>{let o=[];if(v(e,t)){const{row:e,col:s}=t;o=[{row:e+1,col:s},{row:e-1,col:s},{row:e,col:s+1},{row:e,col:s-1}]}return s?o.filter((t=>v(e,t))):o},f.planted=(e,t)=>k(e,t,"plant"),f.watered=(e,t)=>k(e,t,"water"),f.tilled=(e,t)=>k(e,t,"till"),f.fertilized=(e,t)=>k(e,t,"fertilizer"),f.bunny=(e,t)=>k(e,t,"bunny"),f.grass=(e,t)=>k(e,t,"grass"),f.season=e=>{const t=Math.floor(e.time/u/28)%d.length;return d[t]},f.day=e=>Math.ceil(e.time/u%28),f.year=e=>Math.ceil(e.time/u/p),f.market=e=>{const t=[];return e.inventory.filter((e=>e)).forEach((s=>{t.findIndex((({type:e,seed:t})=>e===s.type&&!!t==!!s.seed))<0&&t.push({...s,amount:0,cash:_(e,s)})})),t},f.store=e=>{const t=f.level(e),s=f.season(e),o=a.seasonal(s).filter((e=>a.info(e).level<=c.length));return"winter"===s&&o.push("wildflower"),o.map((e=>{const s=a.info(e),o=s.level<=t||"wildflower"===e?0:s.level,r={type:e,amount:0,seed:!0};return{...r,cash:N(0,r),disabled:o}}))},f.level=e=>{const t=e&&e.xp?e.xp:0,s=c.findIndex((e=>t<e));return~s?s:c.length},f.xp=e=>{const t=e&&e.xp?e.xp:0,s=c.findIndex((e=>t<e)),o=~s?c[s]:m;return[Math.min(t,m),o]},f.luck=(e,t=.01,s=.02,o=!1)=>{const r=f.level(e);return t+s*((o?c.length-r:r)+(e.monetization?3:0))},f.skilled=(e,t,s,o=!1)=>i.random()<f.luck(e,t,s,o);var Y=f;const I={},L=e=>e.filter((e=>e)).join(" ").trim(),P=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},R=e=>(new Intl.NumberFormat).format(e),F=e=>{let t="";return t+='<div class="cash">',t+=`<span class="value">${R(e)}</span>`,t+='<span class="tile coins"></span>',t+="</div>",t},J=e=>{let t="";return+e>0&&(t+=`<span class="tile amount sticker"><span class="inner">${e}</span></span>`),t},X=e=>{let t="";return void 0!==e&&(t+=`<kbd class="key">${e}</kbd>`),t},q=e=>{let t="";return t+='<div class="row slot item">',t+=(e=>{const t=a.info(e.type),s=e.seed?`${t.type} ${t.seed}`:t.type;let o="";return o+='<div class="row crop">',o+='<div class="picture">',e.seed?(o+='<span class="tile seeds"></span>',o+=`<span class="tile ${e.type} stage6 crop small"></span>`,o+=J(e.amount)):(o+=`<span class="tile ${e.type} stage6 crop"></span>`,o+=J(e.amount)),o+="</div>",o+='<div class="col">',e.disabled?(o+='<span class="capitalize name">404 Not Found</span>',o+=`<span class="unlock"><span class="capitalize">${s}</span> available at Level&nbsp;${e.disabled}</span>`):o+=`<span class="capitalize name">${s}</span>`,o+="</div>",o+="</div>",o})(e),t+=(({type:e,seed:t,cash:s,disabled:o})=>{let r="";return r+='<span class="col center">',r+=`<span class="${L(["register",o?"disabled":""])}" data-crop="${e}" data-seed="${t}">`,r+=F(s),r+="</span>",r+="</span>",r})(e),t+="</div>",t},T=(e,t,s)=>{let o="";return o+=`<div class="tile plot" data-crop="${t}${s}">`,o+=((e,t,s)=>{const o=["tile","ground"],r=Y.tilled(e,{row:t,col:s})?"till":"";if(r){const n=Y.tilled(e,{row:t-1,col:s})?1:0,a=Y.tilled(e,{row:t+1,col:s})?1:0,l=Y.tilled(e,{row:t,col:s-1})?1:0,i=`stage${n}${Y.tilled(e,{row:t,col:s+1})?1:0}${a}${l}`;o.push(r),o.push(i)}else{const r=Y.grass(e,{row:t,col:s}),n=r&&r.rotate?"rotate"+r.rotate:"";o.push(n)}return`<div class="${L(o)}"></div>`})(e,t,s),o+=((e,t,s)=>{const o=Y.fertilized(e,{row:t,col:s});if(o){const e=o.rotate?"rotate"+o.rotate:"";return`<div class="${L(["tile","fertilizer",e])}"></div>`}return""})(e,t,s),o+=((e,t,s)=>{let o="";const r=Y.planted(e,{row:t,col:s});if(r){const e=r.stage?"stage"+r.stage:"",t=r.rotate?"rotate"+r.rotate:"";o+=`<div class="${L(["tile","crop",r.crop,e,t])}"></div>`}return o})(e,t,s),o+=((e,t,s)=>{let o="";const r=Y.watered(e,{row:t,col:s});if(r){const e=r.rotate?"rotate"+r.rotate:"";o+=`<div class="${L(["tile","water",e])}"></div>`}return o})(e,t,s),o+=((e,t,s)=>{let o="";const r=Y.bunny(e,{row:t,col:s});if(r){const t=r.rotate?"rotate"+r.rotate:"",s=e.cow?"cow":"bunny";o+=`<div class="${L(["tile",s,"animal",t])}"></div>`}return o})(e,t,s),o+="</div>",o},j=e=>{let t="",s="";return"market"===e&&(s="It looks like you don't have any crops to sell. You can use seeds to grow crops."),t+='<div class="slot">',t+='<div class="center title">404 Not Found</div>',t+=`<div class="message">${s}</div>`,t+="</div>",t},H=(e,s)=>{const o=t(e);s!==o.html()&&o.html(s)};I.clear=()=>{t("#hoe").removeClass("active"),t("#water").removeClass("active"),t("#slot0").removeClass("active"),t("#slot1").removeClass("active"),t("#slot2").removeClass("active"),t("#slot3").removeClass("active"),t("#tend").removeClass("active"),t("#buy").removeClass("active"),t("#sell").removeClass("active"),t("#geek").removeClass("active"),t("#season").removeClass("spring").removeClass("summer").removeClass("fall").removeClass("winter")},I.render=(e,s,o)=>{I.clear(),((e,s)=>{t("#"+e).addClass("active"),t("#"+s).addClass("active"),"tend"===s?(t("#farm").removeClass("hidden"),t("#store").addClass("hidden"),t("#market").addClass("hidden"),t("#info").addClass("hidden")):"buy"===s?(t("#farm").addClass("hidden"),t("#store").removeClass("hidden"),t("#market").addClass("hidden"),t("#info").addClass("hidden")):"sell"===s?(t("#farm").addClass("hidden"),t("#store").addClass("hidden"),t("#market").removeClass("hidden"),t("#info").addClass("hidden")):"geek"===s&&(t("#farm").addClass("hidden"),t("#store").addClass("hidden"),t("#market").addClass("hidden"),t("#info").removeClass("hidden"))})(s,o),(e=>{e.inventory.forEach(((e,t)=>{const s=(e=>{let t='<span class="picture">';return e&&(e.seed?(t+='<span class="tile seeds"></span>',t+=`<span class="tile ${e.type} stage6 crop small"></span>`,t+=J(e.amount),t+=X(e.key)):(t+=`<span class="tile ${e.type} stage6 crop"></span>`,t+=J(e.amount),t+=X(e.key))),t+="</span>",t})({...e,key:t+3});H("#slot"+t,s)}))})(e),H("#time",(e=>{const t=Y.day(e);return`<span class="capitalize">${Y.season(e)}</span> ${t}<sup>${P(t)}</sup>`})(e)),H("#cash",F(e.cash)),H("#farm",(e=>{let t="";for(let s=0;s<e.rows;s+=1)for(let o=0;o<e.cols;o+=1)t+=T(e,s,o);return t})(e)),H("#store",(e=>{let t="";return Y.store(e).forEach((e=>{t+=q(e)})),t||(t=j("store")),t})(e)),H("#market",(e=>{let t="";return Y.market(e).forEach((e=>{t+=q(e)})),t||(t=j("market")),t})(e)),H("#information",(e=>{let t="";const s=Y.year(e),o=Y.level(e),[r,n]=Y.xp(e).map(R),a=Math.ceil(100*Y.luck(e));return t+=`<div class="center subtitle">${s}<sup>${P(s)}</sup>&nbsp;Year</div>`,t+=`<div>Level: ${o}</div>`,t+=`<div>Experience: ${r} / ${n}</div>`,t+=`<div>Luck: ${a}%</div>`,t})(e)),t("#season").addClass(Y.season(e))},I.invalidate=(e,t,s)=>{requestAnimationFrame((()=>I.render(e,t,s)))};var B=I;const G={},K={},Q=(e,t,s)=>{K[t]||(K[t]={});const o=Math.floor(e.time/Y.SECONDS_PER_DAY);if(K[t].day!==o){let s=i.shuffle(Y.plots(e));const r=Y.SECONDS_PER_DAY/s.length;s=s.map(((e,t)=>{const s=r*(t+0),o=r*(t+1);return{...e,time:i.between(s,o),id:t}})),K[t].day=o,K[t].plots=s}const r=e.time-o*Y.SECONDS_PER_DAY,n=[],a=[];return K[t].plots.forEach((e=>{e.time<=r?s(e)&&n.push(e):a.push(e)})),K[t].plots=a,n};G.dispatch=(e,t)=>{const s=o.clone(t);s.row=parseInt(s.row,10),s.col=parseInt(s.col,10),t.time||(t.time=e.time);const r=Y.dispatch(e,s);return"update"===s.tool?(e=>(((e,t)=>Q(e,"grassable",t))(e,(e=>t=>{const s=Math.ceil(e.time/Y.SECONDS_PER_DAY),o=Y.tilled(e,t);if(o){const t=s-Math.ceil(o.time/Y.SECONDS_PER_DAY),r=Y.skilled(e,.02,.04,!0);return t>1&&r}return!1})(e)).forEach((({row:t,col:s})=>{const o={tool:"grass",row:t,col:s};e=G.dispatch(e,o)})),((e,t)=>Q(e,"sprinklerable",t))(e,(e=>t=>{const s=Math.ceil(e.time/Y.SECONDS_PER_DAY),o=Y.planted(e,t);if(o&&"sprinkler"===o.crop){const o=Y.watered(e,t);return s-(o?Math.ceil(o.time/Y.SECONDS_PER_DAY):0)>0}return!1})(e)).forEach((({row:t,col:s})=>{const o={tool:"sprinkler",row:t,col:s};e=G.dispatch(e,o)})),((e,t)=>Q(e,"drainable",t))(e,(e=>t=>{const s=Math.ceil(e.time/Y.SECONDS_PER_DAY),o=Y.watered(e,t);return!!o&&s-Math.ceil(o.time/Y.SECONDS_PER_DAY)>0})(e)).forEach((({row:t,col:s})=>{const o={tool:"drain",row:t,col:s};e=G.dispatch(e,o)})),((e,t)=>Q(e,"growable",t))(e,(e=>t=>{const s=Math.ceil(e.time/Y.SECONDS_PER_DAY),o=Y.planted(e,t),r=Y.watered(e,t);let n=r&&Math.ceil(r.time/Y.SECONDS_PER_DAY)>=s?-1:0;if(o){const r=Y.diagonal(e,t).map((t=>Y.planted(e,t))).filter((e=>e)).map((({crop:e})=>e)).find((e=>o.crop===e)),l=Y.orthogonal(e,t).map((t=>Y.planted(e,t))).filter((e=>e)).map((({crop:e})=>e)).filter((e=>o.crop===e)),i=4===l.length;return r||i?n+=1:l.length&&(n-=1),s-Math.ceil(o.time/Y.SECONDS_PER_DAY)>=a.days(o,(e=>e-n))}return!1})(e)).forEach((({row:t,col:s})=>{const o={tool:"grow",row:t,col:s};e=G.dispatch(e,o),Y.fertilized(e,o)&&Y.skilled(e,.04,.01)&&(e=G.dispatch(e,o))})),e))(r):r};var U=G;let V=o.timestamp(),W=0,Z=o.timestamp(),ee=.05;const te={run:e=>{requestAnimationFrame((e=>{const t=()=>{for(V=o.timestamp(),W+=Math.min(1,(V-Z)/1e3);W>ee;)W-=ee,e&&e(ee);Z=V,requestAnimationFrame(t)};return t})(e))}};var se=te;const oe={};let re,ne,ae,le,ie;const ce=(e,t)=>{let s=t.target;for(;s&&!s.dataset.crop;)s=s.parentElement;if(s&&s.dataset.crop){const[e,t]=s.dataset.crop.split(""),o={tool:ne,row:e,col:t,slot:ae};re=U.dispatch(re,o),B.invalidate(re,ne,le)}},de=(e,t)=>{let s=t.target;for(;s&&!s.dataset.crop;)s=s.parentElement;if(s&&s.dataset.crop){const e={tool:"buy",row:0,col:0,crop:s.dataset.crop,seed:"true"===s.dataset.seed};re=U.dispatch(re,e),B.invalidate(re,ne,le)}},pe=(e,t)=>{let s=t.target;for(;s&&!s.dataset.crop;)s=s.parentElement;if(s&&s.dataset.crop){const e={tool:"sell",row:0,col:0,crop:s.dataset.crop,seed:"true"===s.dataset.seed};re=U.dispatch(re,e),B.invalidate(re,ne,le)}},ue=e=>()=>{ne=e,ae=["slot0","slot1","slot2","slot3"].findIndex((e=>e===ne)),ae<0&&(ae=void 0),B.invalidate(re,ne,le)},me=e=>()=>{le=e,B.invalidate(re,ne,le)},fe=e=>{const t={tool:"update",row:0,col:0,dt:e};re=U.dispatch(re,t),oe.save(),B.invalidate(re,ne,le)},ve=({isComposing:e,keyCode:t})=>{if(!e&&229!==t){const e={49:"hoe",50:"water",51:"slot0",52:"slot1",53:"slot2",54:"slot3"},s={70:"tend",66:"buy",83:"sell",73:"geek"};e[t]&&ue(e[t])(),s[t]&&me(s[t])()}};oe.reset=()=>{re=Y.create(),ne="hoe",ae=void 0,le="tend",ie=0},oe.save=()=>{const e=Y.day(re);if(ie!==e){re.monetization||(re.monetization=document.monetization&&"started"===document.monetization.state);let t=!1;[re,t]=Y.save(re,window.localStorage),t&&(ie=e)}},oe.load=()=>{re=Y.load(re,window.localStorage)},oe.play=()=>{document.addEventListener("keydown",ve),t("#hoe").click(ue("hoe")),t("#water").click(ue("water")),t("#slot0").click(ue("slot0")),t("#slot1").click(ue("slot1")),t("#slot2").click(ue("slot2")),t("#slot3").click(ue("slot3")),t("#tend").click(me("tend")),t("#buy").click(me("buy")),t("#sell").click(me("sell")),t("#geek").click(me("geek")),t("#store").click(void 0,void 0,de),t("#market").click(void 0,void 0,pe),t("#reset").click(void 0,void 0,oe.reset),t("#farm").click(ce,ce),oe.reset(),oe.load(),se.run(fe),B.invalidate(re,ne,le)},oe.play()}()</script>