var M,E,$,e,d,n,r,J,R=["000","b80","eb0","000","224","1fd","aad","922","e25","f89","b24","bcd","eff","8ab","234","0d6","fff","085","096","abe","734","eee","ffc","60f","e79","02d","88d","67b","39b","46c","54c","53b","54c","306","none","ccf","99d","1fd","1be","3bd","57e","adf","860","750","fc3","78c","449","feb","ffd","846","d78","a68","fff","db2","fe7","fc2","a81","9dc","fed","eba","cb9","885","a96","220","457","235","345","344","8ae","bdf"],V=[[26,27],[28,29],[31,32],[35,36],[38,39],[40,3],[30,3],[45,3],[46,3],[47,48],[50,51],[53,63],[64,3],[65,3],[3,66],[67,3],[68,3],[69,3]],m={bridge:[["l2"],["m"],["b3d",0,0],["l1"],["wiu",0,0],["wid",0,0],["w"],["hj"],["ar"]],courtyard:[["g2"],["pl"],["g1"],["wiu",0,0],["wid",0,0]],cellar:[["ce1"],["ce2"],["wlk3d",0,0],["wid",0,0],["wiu",0,0]],hall:[["roo"],["hpl"],["roc"],["wiu",0,0],["wid",0,0]],garrison:[["gg"],["gboard"],["wiu",0,0],["wid",0,0]],throne:[["trbg"],["trpl2"],["trfl2"],["trpl1"],["trf1"],["wiu",0,0],["wid",0,0]],chapel:[["cabg"],["cs1"],["wiu",0,0],["wid",0,0]]},O={b3d:[{s:0,f:1,d:[[0,0,0],[3,0,0],[3,0,4],[0,0,4]]},{s:0,f:1,d:[[0,-.13,0],[3,-.13,0],[3,-.13,4],[0,-.13,4]]},{s:0,f:2,d:[[3,-.13,0],[3,-.13,4],[3,0,4],[3,0,0]]},{s:0,f:2,d:[[3,0,4],[3,-.13,4],[0,-.13,4],[0,0,4]]}],wlk3d:[{s:0,f:2,d:[[.5,3.5,2],[.5,1.5,2],[-1.5,1.5,2],[-1.5,.5,2],[-3.5,.5,2],[-3.5,1.5,2],[-2.5,1.5,2],[-2.5,2.5,2],[-.5,2.5,2],[-.5,3.5,2]]},{s:0,f:2,d:[[-3.5,-.5,2],[-3.5,-1.5,2],[-.5,-1.5,2],[-.5,-.5,2],[1.5,-.5,2],[1.5,-3.5,2],[2.5,-3.5,2],[2.5,.5,2],[-1.5,.5,2],[-1.5,-.5,2],[-3.5,-.5,2]]}],ch13d:[],ch23d:[],b:[{d:[[0,.5],[0,0],[.5,.5],[.5,1]]}],bc:[{d:[[.5,0],[-.5,1],[.5,2],[1.5,1]],f:4}],bu:[{d:[[-1,.2],[-1.3,0,-1.1,-1.1,-.7,-1],[-.8,-1.2,-.5,-1.5,-.5,-1.2],[-.5,-2.4,.2,-2.5,.3,-2],[.7,-2.4,1,-1.8,1,-1.2],[1.1,-2.1,1.6,-1.4,1.4,-.5],[1.6,-.8,1.8,-.3,1.6,0],[1.9,.1,1.7,.8,1.4,.7],[1.8,1.5,1.1,2.1,.8,1.7],[.6,2.3,0,2.4,-.3,1.8],[-.4,2,-1.1,2,-1,1.2],[-1.3,1.1,-1.4,.6,-1,.2]],f:5}],c1:[{d:[[0,0],[0,.3]],z:0}],c2:[{d:[[0,0],[0,.6]],z:0},{d:[[0,.8],[0,.9]],z:0}],c3:[{d:[[0,0],[0,1]],f:6,z:0},{d:[[0,1.2],[0,1.4]],f:6,z:0}],elp:[{d:[[.77,1.76],[1,1.4],[1,.86,1.06,.1,.6,0],[.2,0,.25,.5,.2,1]],f:7},{d:[[.2,.5],[.1,1],[.1,1.4,.5,1.7,.76,1.6],[.7,1],[.47,1,.26,1,.2,.5]],f:8},{d:[[.34,.3],[0,.64],[.4,.54]],f:7,z:0},{d:[[.2,.53],[.2,.85,.4,1,.7,1],[.7,.8,.65,.5,.55,.3],[.4,0,.25,.14,.2,.53]],f:9},{d:[[.1,1],[0,1.2,.23,1.7,.77,1.76],[.8,1.7,.77,1.6,.73,1.6],[.54,1.6,.2,1.5,.1,1]],f:10},{d:[[.7,.7],[.36,1],[.7,.9]],f:7,z:0}],en:[{d:[[3.55,5.6],[4.55,4.6],[5.55,5.6],[4.55,6.6]],f:15},{d:[[3.83,5.6],[4.55,4.86],[5.27,5.6],[4.55,6.3]],f:16},{d:[[4.13,5.6],[4.55,5.16],[5,5.6],[4.55,6]],f:15},{d:[[3.55,5.8],[4.55,6.8],[4.55,6.6],[3.55,5.6]],f:17},{d:[[5.55,5.8],[4.55,6.8],[4.55,6.6],[5.55,5.6]],f:18}],rk:[{d:[[1.1,.36],[.85,.06],[.7,-.06,.56,.16,.5,.53],[.77,.85],[.85,.47,1,.3,1.1,.36]],f:9},{d:[[.4,2.35],[.16,2],[.2,1.17],[1,.7]],f:7},{d:[[1,1],[1,.65,1.1,.57,1.2,.5],[1.1,.2,.84,.3,.8,.85],[1,1.1,.56,1.45,.74,.9],[.7,.47,.4,.86,.3,1.4],[.4,1.2,.5,1.1,.53,1.5],[.6,1.6,1,1.47,1,1]],f:8},{d:[[1,1.1],[1.1,1.6],[1.1,2,.7,2.3,.44,2.2],[.5,1.6],[.74,1.6,.94,1.53,1,1.1]],f:8},{d:[[.7,.73],[.4,.4],[.2,.4,.1,.77,0,1.1],[.3,1.4],[.4,1,.5,.7,.7,.73]],f:9},{d:[[1,1],[1,1,1,1.1,1,1.1],[1,1.45,.75,1.6,.5,1.6],[.5,1.64,.5,1.5,.5,1.5],[.74,1.5,1,1.4,1,1]],f:10},{d:[[1.1,1.56],[1.1,1.56,1.1,1.6,1.1,1.67],[1.1,2,.8,2.3,.44,2.35],[.4,2.35,.4,2.24,.44,2.2],[.73,2.17,1,2.05,1.1,1.56]],f:10}],ro:[{d:[[.24,.2],[.16,.2,.1,.24,0,.16],[0,.16,.05,0,.13,0],[.2,0,.24,.2,.24,.2]],f:19}],rwi:[{d:[[4.5,7.5],[4.4,7.4],[4.9,.3],[4.9,.3,5.4,-.5,5.5,.5],[5.5,6.5]],f:20},{d:[[4.4,7.4],[4.4,1.4],[4.4,.4,5.4,-.6,5.4,.4],[5.4,6.4]],f:21},{d:[[4.9,.2],[4.9,6.9]],f:22,z:0},{d:[[4.4,3.4],[5.4,2.4]],f:22,z:0},{d:[[4.4,1.4],[4.9,.9],[5.4,.4]],f:22,z:0},{d:[[4.4,5.4],[5.4,4.4]],f:22,z:0}],pw:[{d:[[0,1.36],[0,1.3,0,1.2,0,1.2],[0,1.2,.44,1.24,.57,1.25],[.6,1.3,.6,1.34,.57,1.4],[.4,1.6,.14,1.6,0,1.36]],f:10},{d:[[0,1.2],[.2,.8,.2,.6,.3,.2],[.44,.8,.5,1,.57,1.26],[.4,1.5,.13,1.5,0,1.2]],f:8},{d:[[.3,.6],[.1,.56,.1,.05,.3,0],[.5,0,.5,.6,.3,.6]],f:9}],tu:[{d:[[0,.34],[0,.34,0,.3,0,.25],[.05,.2,.1,.3,.1,.3],[.1,.3,.06,0,.16,0],[.2,0,.2,.25,.2,.25],[.2,.25,.2,.13,.25,.14],[.3,.14,.3,.3,.3,.3],[.3,.3,.3,.2,.34,.24],[.36,.3,.36,.3,.36,.3]],z:0}],wiu:[{d:[[1.3,1.8],[1.3,1.8,1.6,2.1,1.65,2.76],[1.66,2.9,1.6,2.9,1.6,3],[1.7,3.1,1.7,3.46,1.6,3.56],[1.2,4.1,.66,3.9,.5,3.54],[.4,3.4,.4,3,.5,2.9],[.4,2.8,.5,2.7,.5,2.5],[.75,1.5,1.3,1.8,1.3,1.8]],f:23},{d:[[1.6,3],[1.36,3.3,.8,3.5,.5,2.9]],z:0},{d:[[.6,3.06],[.55,3.3,.6,3.3,.65,3.24],[.6,3.34,.7,3.4,.74,3.26],[.75,3.4,.86,3.3,.8,3.1]],f:24},{d:[[.7,2.6],[.6,2.76,.6,2.9,.6,3.06],[.65,3.1,.74,3.2,.8,3.1],[.86,3,.9,2.8,.9,2.7]],f:23,z:0},{d:[[.8,1.2],[1.1,1.7],[.8,1.74]],f:24},{d:[[1,1.6],[.9,1.7,.9,1.7,.8,1.6],[.7,1.7,.7,1.94,.7,2],[1.2,1.7,.9,2.6,1.2,2.45],[1.2,2.6,1.3,2.7,1.35,2.6],[1.34,2.8,1.5,2.8,1.5,2.6],[1.6,2.7,1.7,2.5,1.6,2.44],[1.6,2.44,1.75,2.4,1.6,2.1],[1.45,1.9,1.46,1.6,1.46,1.6]],f:16},{d:[[1.3,.8],[1.7,1.2,1.8,2,1.5,2],[1.15,2,.86,1.4,.6,1.35],[.35,1.3,.85,.3,1.3,.8]],f:23},{d:[[1.2,1.24],[1.2,1.26,1.4,1.3,1.4,1.2],[1.4,1.2,1.3,.74,1.46,.3],[1.5,.26,1.6,.44,1.6,.4],[1.7,.3,1.5,.06,1.4,0],[1.3,0,1.24,.3,1,.44],[1,.5,.9,1,.9,1],[.9,1,.9,1,.9,1.05]],f:23,z:0},{d:[[1.1,1.16],[1.1,1.16,1.1,1.2,1.1,1.2]],f:25,z:0},{d:[[.2,2.9],[.6,3.2]],z:0}],wid:[{d:[[1.3,1.65],[1.3,1.65,.65,2.2,.5,2.7],[.4,2.8,.4,3,.5,3],[.4,3.1,.4,3.46,.5,3.6],[.86,4.1,1.4,3.9,1.6,3.54],[1.7,3.4,1.7,3,1.6,2.9],[1.64,2.7,1.6,2.6,1.5,2.3],[1.4,2.06,1.3,1.65,1.3,1.65]],f:23},{d:[[.5,3],[.7,3.3,1.26,3.5,1.6,2.9]],z:0},{d:[[1.4,3],[1.54,3.2,1.46,3.3,1.4,3.2],[1.5,3.35,1.4,3.4,1.35,3.3],[1.35,3.4,1.24,3.4,1.3,3.2]],f:24},{d:[[1.4,2.6],[1.45,2.8,1.5,2.94,1.5,3.06],[1.4,3.1,1.3,3.2,1.25,3.1],[1.2,3,1.2,2.8,1.2,2.7]],f:23,z:0},{d:[[.64,1.45],[.7,2.1],[1.1,1.9],[1.26,1.4]],f:24},{d:[[.8,1.7],[.76,1.8]],f:16,z:0},{d:[[1,1.44],[1.3,1.4],[1.4,1.6,1.5,1.8,1.4,2],[1.4,2,1.4,2,1.3,2],[1,1.9,1.2,2.4,.9,2.45],[.65,2.5,.76,3,.76,3],[.76,3,.3,2.65,.56,2.2],[.6,2.05,.5,2,.65,1.8],[.7,2,.75,1.9,.75,1.9],[.75,1.9,1,2.15,1,1.44]],f:16},{d:[[1,.8],[.7,.64,.2,1.4,.4,1.7],[.6,2.05,.8,1.6,1.3,1.76],[1.54,1.85,1.7,1.9,1.6,1.55],[1.5,1,1.34,.9,1,.8]],f:23},{d:[[1.2,1.25],[1.2,1.3,1.2,1.25,1.24,1.2],[1.24,1.2,1.16,.74,1.3,.3],[1.35,.26,1.45,.44,1.5,.4],[1.5,.3,1.35,.06,1.3,0],[1.2,0,1.1,.3,.9,.44],[.8,.5,.75,1,.75,1]],f:23,z:0},{d:[[1.26,3.3],[.9,3.6]],z:0}],l2:[{d:[[7,12],[10,9],[10,3],[7,0]],g:[0,8,6,10,6]},{d:[[-1,6],[-1,2],[8,11],[10,9],[10,3],[11,4],[11,14],[18,21],[14,21]],g:[1,9,14,11,10]},{d:[[13,18],[16,21],[14,21],[-1,6],[-1,4],[4,9]],f:30,z:0},{d:[[-4,-1],[7,10],[8,-1]],g:[2,4,1,6,9]},{d:[[8,11],[7.8,11.3],[7.8,-4.8],[8,-5],[8,3]],f:26,z:0},{d:[[6.8,10.3],[6.8,-5.8],[7.8,-4.8],[7.8,11.3]],f:30},["b",-3,-3.5],["b",-3.25,-3.25],{d:[[4.5,9.5],[12.8,17.8]],z:0},["c2",-13,-18],["c1",-2.5,-7.5],["c1",-11.8,-16.8],["en",-5.45,-6.17]],m:[{d:[[-1,5],[15,21],[6,21],[-1,14]],f:33}],l1:[{d:[[-1,10],[-1,21],[10,21]],g:[1,4,17,0,20]},["tu",-1,-18],["tu",-1.4,-14.16],["tu",-12.87,-16.66]],w:[{d:[[21,10],[10,-1],[21,-1]],g:[1,19,0,17,6],s:34},{d:[[13,2],[14,1],[20,7],[20,9]],g:[3,16,3,15,5]},{d:[[8,3],[11,6],[11,14],[21,24],[21,10],[19,8],[19,7],[18,6],[18,7],[17,6],[17,5],[16,4],[16,5],[15,4],[15,3],[14,2],[14,3],[13,2],[13,1],[8,-5]],g:[2,19,6,13,16]},{d:[[20,6],[20,7],[19,8],[19,7]],f:26},{d:[[18,6],[19,5],[20,6],[19,7]],f:35},{d:[[18,4],[18,5],[17,6],[17,5]],f:26},{d:[[16,4],[17,3],[18,4],[17,5]],f:35},{d:[[16,2],[16,3],[15,4],[15,3]],f:26},{d:[[14,2],[15,1],[16,2],[15,3]],f:35},{d:[[14,0],[14,1],[13,2],[13,1]],f:26},{d:[[12,0],[13,-1],[14,0],[13,1]],f:35},["b",-13.5,-10],["b",-18,-16.5],["b",-19,-10],["b",-14,-14.5],["b",-14.25,-14.25]],hj:[{d:[[11.7,15.3],[11.7,-.7],[12,-1],[12,15]],f:26},{d:[[10.7,14.3],[10.7,-1.8],[11.7,-.7],[11.7,15.3]],f:30}],ar:[{d:[[7.4,3.9],[7.4,3.9,7.1,3.9,6.6,4.5],[6,5.2,6,6.1,6,6.1],[5.8,5.5]],s:37,w:"10",z:0},{d:[[6,6.1],[6.5,5.7]],s:37,w:"10",z:0}],g2:[{d:[[-1,-2],[-1,18],[19,-2]],g:[4,17,2,0,19]},["bu",-3.3,-10.6],{d:[[12,7],[12,22],[10,22],[10,9]],g:[5,10,9,13,18]},{d:[[8,7],[8,21],[10,21],[10,9]],g:[6,10,9,6,19]},{d:[[21,4],[21,22],[15,22],[15,10]],g:[5,17,8,20,17]},{d:[[12,7],[12,22],[15,22],[15,10]],g:[6,15,10,12,19]},{d:[[9,10],[9,22],[7,22],[7,12]],g:[5,17,8,20,17]},{d:[[8,7],[10,9],[12,7],[15,10],[21,4],[21,-2],[17,-2]],f:41}],pl:[{d:[[15,10],[15,16],[12,19],[12,13]],f:42},{d:[[9,10],[9,16],[12,19],[12,13]],f:43},{d:[[12,13],[9,10],[12,7],[15,10]],f:44},{d:[[9.7,10.1],[9.6,10.1],[12,7.7],[14.4,10.1],[14.3,10.1]],f:42},{d:[[12,12.5],[9.7,10.1],[12,7.8],[14.3,10.1]],f:44}],g1:[{d:[[-1,16],[-1,22],[3,22],[10,15],[7,12],[9,10],[7,8]],f:41},["tu",-8.84,-1.76],["tu",-3,-1.8],["tu",-.8,-5.66],{d:[[10,15],[10,22],[3,22]],g:[5,9,16,11,26]},["bu",-6,-2.5],["c1",-8,-17],["c1",-18,-7],["c2",-17,-8],["c3",-17,-12],["c3",-9,-16],["en",-10.45,.8]],ce1:[{d:[[-1,-2],[-1,22],[21,22],[21,-2]],f:3},{d:[[12,9],[12,5],[13,6],[13,10]],g:[7,13,6,12,9]},{d:[[15,8],[15,4],[13,6],[13,10]],g:[8,14,5,15,8]},{d:[[12,5],[14,3],[15,4],[13,6]],f:19},{d:[[14,7],[15,6],[18,9],[17,10]],f:19},{d:[[5,8],[5,4],[6,5],[6,9]],g:[7,6,5,5,8]},{d:[[6,7],[5,6],[6,5],[5,4],[6,3],[8,5]],f:19},{d:[[5,10],[5,6],[6,7],[6,11]],g:[7,6,7,5,10]},{d:[[8,9],[8,5],[6,7],[6,11]],g:[8,6,7,7,10]},{d:[[14,11],[14,7],[17,10],[17,14]],g:[7,16,9,15,12]},["c2",-16,-9],["c1",-5.8,-6.8],["c1",-14.3,-4.7]],ce2:[{d:[[15,14],[12,17],[11,16],[14,13]],f:19},{d:[[11,20],[11,16],[12,17],[12,21]],g:[7,14,7,13,10]},{d:[[15,18],[15,14],[12,17],[12,21]],g:[8,16,13,17,16]},{d:[[11,20],[11,16],[12,17],[12,21]],g:[7,12,17,11,20]},{d:[[18,13],[18,9],[17,10],[17,14]],g:[8,17,10,18,13]},{d:[[6,17],[6,13],[5,14],[5,18]],g:[8,7,16,8,19]},{d:[[2,17],[2,13],[3,14],[3,18]],g:[7,6,17,5,20]},{d:[[5,20],[5,16],[6,17],[6,21]],g:[7,6,17,5,20]},{d:[[4,17],[4,13],[5,14],[5,18]],g:[7,5,14,4,17]},{d:[[8,19],[8,15],[6,17],[6,21]],g:[8,7,16,8,19]},{d:[[4,17],[4,13],[3,14],[3,18]],g:[8,3,14,4,17]},{d:[[6,17],[5,16],[7,14],[8,15]],f:19},{d:[[3,14],[2,13],[4,11],[6,13],[5,14],[4,13]],f:19},["c2",-14.6,-14.4],["c3",-7,-16],["c3",-5.2,-6.2],["c1",-6.7,-16.3],["ro",-5.3,-3.95],["ro",-2.43,-12.7],["ro",-13.9,-13.4],["en",-9.45,1.8]],roo:[{d:[[-1,-2],[-1,22],[21,22],[21,-2]],g:[9,11,22,2,-5]},{d:[[4,11],[4,15],[5,16],[5,12]],f:49},{d:[[14,7],[14,25],[17,22],[17,4]],g:[10,15,6,17,13]},{d:[[4,11],[5,12],[12,5],[11,4]],f:52},{d:[[5,12],[5,24],[12,17],[12,5]],g:[10,10,10,12,18]},["bc",-5.5,-9],["bc",-7.5,-7],["bc",-9.5,-5],["rk",-6.35,-7.1],["rk",-9.4,-4.14]],hpl:[{d:[[7,9.7],[7,17.7],[8,18.7],[8,10.7]],f:53},{d:[[7,9.7],[8,10.7],[15,3.7],[14,2.7]],f:54},{d:[[9,7.7],[8,8.7],[9,9.7],[10,8.7]],f:55},{d:[[11,5.7],[10,6.7],[11,7.7],[12,6.7]],f:55},{d:[[13,3.7],[12,4.7],[13,5.7],[14,4.7]],f:55},{d:[[15,3.7],[15,4],[8,11],[8,10.7]],f:56},["pw",-8.74,-7.4],["pw",-12.7,-3.44]],roc:[{d:[[16,9],[9,16],[7,14],[4,17],[3,16],[16,3],[17,4],[14,7]],f:52},{d:[[9,16],[9,28],[16,21],[16,9]],g:[10,12,13,14,20]},{d:[[7,14],[7,26],[9,28],[9,16]],f:49},["rwi",-5.6,-15.6],["rwi",-7.6,-13.6],["rwi",-9.6,-11.6],["bc",-3.5,-15],["bc",-5.5,-13],["bc",-7.5,-13],["bc",-9.5,-13],["bc",-9.5,-11],["bc",-7.5,-11],["bc",-9.5,-9],["bc",-11.5,-9],["bc",-11.5,-11],["bc",-11.5,-7],["bc",-13.5,-7],["bc",-13.5,-9],["bc",-13.5,-5],["en",-11.45,1.8],{d:[[7,24],[7,14],[4,17],[3,20]],g:[10,5,16,7,23]},{d:[[4,17],[4,21],[3,20],[3,16]],f:49}],gg:[{d:[[-1,-2],[-1,22],[21,22],[21,-2]],f:57},{d:[[-1,12],[13,-2],[-1,-2]],f:58},{d:[[-1,12],[-.5,12.5],[-.5,-1.5],[-1,-2]],f:59},{d:[[.5,11.5],[-.5,12.5],[-.5,-1.5],[.5,-2.5]],f:58},{d:[[2,9],[2.5,9.5],[2.5,-4.5],[2,-5]],f:59},{d:[[3.5,8.5],[2.5,9.5],[2.5,-4.5],[3.5,-5.5]],f:58},{d:[[5,6],[5.5,6.5],[5.5,-7.5],[5,-8]],f:59},{d:[[6.5,5.5],[5.5,6.5],[5.5,-7.5],[6.5,-8.5]],f:58},{d:[[8,3],[8.5,3.5],[8.5,-10.5],[8,-11]],f:59},{d:[[9.5,2.5],[8.5,3.5],[8.5,-10.5],[9.5,-11.5]],f:58},["tu",-13,-2.66],["tu",-3.66,-12.9],["tu",-17.8,-17.66],["bu",-17.3,-11.8],["bu",-14.2,-18.6]],gboard:[{d:[[14,7],[14,7.5],[17,4.5],[17,4]],f:60},{d:[[6,17],[6,17.5],[11,12.5],[11,12]],f:60},{d:[[12,11],[12,11.5],[17,6.5],[17,6]],f:60},{d:[[5,12],[5,12.5],[6,13.5],[6,13]],f:61},{d:[[5,16],[5,16.5],[6,17.5],[6,17]],f:61},{d:[[11,6],[11,6.5],[12,7.5],[12,7]],f:61},{d:[[3,16],[3,16.5],[4,17.5],[4,17]],f:62},{d:[[4,17.5],[5,16.5],[5,16],[4,17]],f:60},{d:[[11,10],[11,10.5],[12,11.5],[12,11]],f:62},{d:[[10,11.5],[11,10.5],[11,10],[10,11]],f:60},{d:[[12,5],[11,6],[12,7],[7,12],[6,11],[5,12],[6,13],[3,16],[4,17],[5,16],[6,17],[11,12],[10,11],[11,10],[12,11],[17,6],[16,5],[17,4],[16,3],[13,6]],f:52},["bc",-3.5,-15],["bc",-5.5,-13],["bc",-11.5,-5],["bc",-15.5,-5],["bc",-11.5,-7],["bc",-11.5,-9],["bc",-5.5,-11],["bc",-9.5,-9],["bc",-9.5,-11],["bc",-5.5,-15],["bc",-7.5,-11],["bc",-7.5,-13],["bc",-13.5,-5],["bc",-13.5,-7],["en",-11.45,1.8],["pw",-11.7,-4.64],["pw",-5.67,-10.64]],trbg:[{d:[[-1,0],[-1,22],[21,22],[21,0]],f:3}],trpl2:[{d:[[5,9.8],[5,13.8],[6,14.8],[6,10.8]],g:[11,6,11,5,14]},{d:[[13,1.8],[5,9.8],[6,10.8],[14,2.8]],f:54},{d:[[7,7.8],[6,8.8],[7,9.8],[8,8.8]],f:55},{d:[[9,5.8],[8,6.8],[9,7.8],[10,6.8]],f:55},{d:[[11,3.8],[10,4.8],[11,5.8],[12,4.8]],f:55},{d:[[13,1.8],[12,2.8],[13,3.8],[14,2.8]],f:55},{d:[[6,10.8],[6,14.8],[14,6.8],[14,2.8]],f:53},["rk",-11.4,-1.94],["rk",-8.4,-4.94],["rk",-6.4,-7]],trfl2:[{d:[[4,13],[5,14],[13,6],[12,5]],f:16},{d:[[4,13],[5,14],[5,18],[4,17]],g:[12,3,12,2,15]},["bc",-5.5,-11],["bc",-7.5,-9],["bc",-9.5,-7],["bc",-11.5,-5],{d:[[5,14],[5,18],[13,10],[13,6]],g:[13,10,17,11,20]}],trpl1:[{d:[[8,12.8],[16,4.8],[15,3.8],[7,11.8]],f:54},{d:[[7,11.8],[7,15.8],[8,16.8],[8,12.8]],g:[11,10,10,9,13]},{d:[[15,3.8],[14,4.8],[15,5.8],[16,4.8]],f:55},{d:[[13,5.8],[12,6.8],[13,7.8],[14,6.8]],f:55},{d:[[11,7.8],[10,8.8],[11,9.8],[12,8.8]],f:55},{d:[[9,9.8],[8,10.8],[9,11.8],[10,10.8]],f:55},{d:[[8,12.8],[8,16.8],[16,8.8],[16,4.8]],f:53},["pw",-10.7,-7.44]],trf1:[{d:[[9,18],[9,22],[17,14],[17,10]],g:[13,10,17,11,20]},{d:[[7,16],[9,18],[9,22],[7,20]],g:[12,7,16,6,19]},{d:[[4,17],[4,21],[5,22],[5,18]],g:[12,3,16,2,19]},{d:[[5,22],[7,20],[7,16],[5,18]],g:[13,6,17,7,20]},{d:[[15,12],[17,10],[17,6],[15,8]],g:[13,16,7,17,10]},{d:[[6,15],[4,17],[5,18],[7,16],[9,18],[17,10],[15,8],[17,6],[16,5]],f:16},{d:[[13,14],[13,18],[14,19],[14,15]],g:[12,14,15,13,18]},{d:[[14,19],[15,18],[15,14],[14,15]],g:[13,14,15,15,18]},["bc",-7.5,-15],["bc",-5.5,-15],["bc",-13.5,-7],["bc",-7.5,-13],["bc",-9.5,-15],["bc",-9.5,-13],["bc",-9.5,-11],["bc",-11.5,-13],["bc",-11.5,-9],["bc",-13.5,-11],["bc",-13.5,-13],{d:[[15,12],[15,16],[16,17],[16,13]],g:[12,16,13,15,16]},{d:[[16,17],[17,16],[17,12],[16,13]],g:[13,14,15,15,18]},["bc",-15.5,-11],["bc",-11.5,-11],["bc",-13.5,-9],["bc",-15.5,-9],["en",-11.45,-.17],["elp",-15.4,-10.74],["pw",-13.7,-12.77]],cwi:[{d:[[3,9.9],[3,5.6],[3.5,3.9],[4.1,4.5],[4.1,8.8]],f:11},{d:[[3,9.6],[3,5.6],[3.5,4.1],[4,4.6],[4,8.6]],f:12},{d:[[3,9.6],[3.1,9.8],[4.1,8.8],[4,8.6]],f:13},{d:[[3.1,9.8],[3,9.9],[3,9.6]],f:14},{d:[[3.5,4.1],[3.5,9.1]],f:14,z:0},{d:[[3,5.6],[4,4.6]],f:14,z:0},{d:[[3,7.6],[4,6.6]],f:14,z:0},{d:[[3,8.6],[4,7.6]],f:14,z:0},{d:[[3,6.6],[4,5.6]],f:14,z:0}],cabg:[{d:[[-1,0],[-1,22],[21,22],[21,8],[21,0]],g:[14,5,12,1,0]},{d:[[3.5,4],[8,9],[8,15],[3,10],[3,6]],g:[15,3,6,7,10],w:"0"},{d:[[6.5,1],[11,6],[11,12],[6,7],[6,3]],g:[15,6,3,10,7],w:"0"},{d:[[9.5,-2],[14,3],[14,9],[9,4],[9,0]],g:[15,9,0,13,4],w:"0"},["cwi"],["cwi",-3,3],["cwi",-6,6]],cs1:[{d:[[19,4],[19,10],[18,11],[18,5]],g:[16,18,5,19,10]},{d:[[9,10],[9,16],[10,17],[10,11]],g:[17,5,20,4,25]},{d:[[11,6],[11,12],[12,13],[12,7]],g:[17,12,7,11,12]},{d:[[19,6],[19,12],[6,25],[6,19]],g:[16,6,19,8,24]},{d:[[18,11],[18,17],[17,18],[17,12]],g:[16,17,12,18,17]},{d:[[17,12],[16,11],[17,10],[18,11]],f:12},{d:[[16,11],[16,17],[17,18],[17,12]],g:[17,17,12,16,17]},{d:[[14,13],[14,19],[13,20],[13,14]],g:[16,13,14,14,19]},{d:[[5,12],[5,18],[6,19],[6,13]],g:[17,6,13,5,18]},{d:[[3,16],[3,22],[6,25],[6,19]],g:[17,6,19,5,24]},{d:[[3,18],[3,24],[4,25],[4,19]],g:[17,4,19,3,24]},{d:[[5,18],[5,24],[4,25],[4,19]],g:[16,4,19,5,24]},{d:[[4,19],[3,18],[4,17],[3,16],[6,13],[5,12],[6,11],[8,13],[10,11],[9,10],[12,7],[11,6],[12,5],[13,6],[16,3],[19,6],[13,12],[14,13],[13,14],[12,13],[6,19],[5,18]],f:12},["bc",-10.5,-12],["bc",-12.5,-12],["bc",-10.5,-10],["bc",-6.5,-14],["bc",-6.5,-12],["bc",-8.5,-14],["bc",-8.5,-12],["bc",-14.5,-8],["bc",-12.5,-10],["bc",-12.5,-8],["bc",-10.5,-8],["bc",-12.5,-6],["bc",-16.5,-10],["bc",-14.5,-6],["bc",-4.5,-14],["bc",-6.5,-16],["bc",-16.5,-6],["bc",-14.5,-4],{d:[[12,13],[12,19],[13,20],[13,14]],g:[17,13,14,11,19]},["en",-13.45,1.8],["elp",-16.43,-9.74],["elp",-11.4,-4.74],["elp",-12.4,-11.74],["elp",-5.4,-10.74]]},P=Math,b=P.sin,a=P.cos,q=t=>JSON.parse(JSON.stringify(t)),t=t=>document.querySelector(t),I=t("body"),W=(t(".container"),t(".level")),K=t(".tiles"),k=t(".c"),g=t(".m"),h=g.parentNode,v=t(".h button"),Z=k.getContext("2d"),A=1920,F=1108,T=P.sqrt(3)/3,S=96,C=S*T,U=P.PI,B=P.sqrt(2),Q=(t,e,d)=>`<svg ${d?'style="transform: scaleX(-1);"':""} width="${A}" height="${F}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${A} ${F}"><defs>${t}</defs>${e}</svg>`,_=(t,e,d,n,i,r,f)=>`<path style="${t?"fill:"+t:""};stroke:${e||"#000"};stroke-width:${d||"3"};stroke-linecap:round;stroke-linejoin:round;" d="M ${n} ${r?"Z":""}" data-index="${i}" ${f?'class="is-tile"':""} />`,f={p:"Peons can capture 1 square diagonally.<br><pre>X X<br/> P <br>X X</pre>",r:"Roques capture vertically and horizontally, but can be blocked.<br/><pre>  X  <br>  X  <br>XXRXX<br>  X  <br>  X  </pre>",b:"Alfils capture by jumping 2 squares diagonally only.<br/><pre>X   X<br>     <br>  A  <br>     <br>X   X</pre>"},t=(t,e,d,n)=>{var r=[];for(i=t;i<=d;i++)for(j=e;j<=n;j++)r.push(i),r.push(j);return r},c=t=>[].concat.apply([],t),X={bridge:{wiu:{cx:0,cy:0,tx:3,ty:10,canFlip:!0},wid:{cx:0,cy:0,tx:3,ty:10,canFlip:!0},tm:[{s:c([t(3,6,3,12),2,7,1,8,2,8,0,9,1,9,2,9,1,10,2,10,2,11]),i:[],d:[]},{s:[],i:[]},{s:c([t(4,9,8,11)]),i:["e",8,10],d:[]}],b3d:{x:8,y:11,i:"b3d",r:["x",[0,U/2],90],s:[0,89],stm:[1,2]},tx:"Move golden objects by dragging them."},courtyard:{wiu:{cx:0,cy:0,tx:2,ty:9,canFlip:!0},wid:{cx:0,cy:0,tx:2,ty:9,canFlip:!0},tm:[{s:c([t(2,7,6,11),t(12,7,16,11),7,7,8,7,10,7,11,7,1,8,7,8,8,8,10,8,11,8,0,9,1,9,1,10]),i:["e",14,9],d:[]},{s:c([t(9,9,11,11)]),i:[],d:[]},{s:c([t(8,9,10,11)]),i:[],d:[]},{s:c([t(7,9,9,11)]),i:[],d:[]}],pl:{i:"pl",m:["y",[0,2],20],s:[0,9,19],stm:[1,2,3]},tx:"You cannot move objects while on them."},cellar:{wiu:{cx:0,cy:0,tx:4,ty:10,canFlip:!0},wid:{cx:0,cy:0,tx:4,ty:10,canFlip:!0},tm:[{s:[10,4,9,5,10,5,4,7,5,7,5,8,13,8,14,8,4,10,5,10,13,10,13,11,13,12,7,13,8,13,9,13],i:["e",14,8]},{s:c([8,6,10,6,7,7,8,7,10,7,7,8,9,8,10,8,6,9,7,9,9,9,9,10,t(9,11,12,11)]),i:[]},{s:[9,6,9,7,10,7,11,7,11,8,12,8,7,9,8,9,9,9,10,9,7,10,10,10,11,10,12,10,7,11,7,12],i:[]},{s:[6,7,7,7,8,7,9,7,9,8,9,9,11,9,12,9,8,10,9,10,11,10,8,11,10,11,11,11,8,12,10,12],i:[]},{s:[11,6,11,7,6,8,7,8,8,8,11,8,8,9,9,9,10,9,11,9,6,10,7,10,7,11,8,11,9,11,9,12],i:[]}],wlk3d:{x:10,y:14,i:"wlk3d",r:["z",[0,2*U],360],s:[0,89,179,269,359],stm:[1,2,3,4,1],ds:!0}},garrison:{wiu:{cx:0,cy:0,tx:3,ty:9,canFlip:!0},wid:{cx:0,cy:0,tx:3,ty:9,canFlip:!0},tm:[{s:c([t(3,9,15,9),t(4,10,8,10),t(10,10,14,10)]),i:["e",15,9,"p",6,8,"p",12,8]}],tx:f.p},hall:{wiu:{cx:0,cy:0,tx:3,ty:9,canFlip:!0},wid:{cx:0,cy:0,tx:3,ty:9,canFlip:!0},tm:[{s:c([t(3,9,15,9),t(6,10,12,11)]),i:["e",15,9,"r",8,7,"r",11,7]},{s:[],i:["p",9,8,"p",13,8,"x",15,8]},{s:[],i:["p",8,8,"p",12,8,"x",14,8]},{s:[],i:["p",7,8,"p",11,8,"x",13,8]},{s:[],i:["p",6,8,"p",10,8,"x",12,8]},{s:[],i:["p",5,8,"p",9,8,"x",11,8]}],hpl:{i:"hpl",m:["y",[0,4],40],s:[0,10,20,30,39],stm:[1,2,3,4,5],defaultF:20},tx:f.r},chapel:{wiu:{cx:0,cy:0,tx:3,ty:10,canFlip:!0},wid:{cx:0,cy:0,tx:3,ty:10,canFlip:!0},tm:[{s:c([3,9,4,9,5,9,6,9,t(9,9,15,9),t(2,10,16,10),t(3,11,15,11)]),i:["e",16,10,"b",6,8,"b",9,12,"b",12,8,"b",12,13]}],tx:f.b},throne:{wiu:{cx:0,cy:0,tx:3,ty:10,canFlip:!0},wid:{cx:0,cy:0,tx:3,ty:10,canFlip:!0},tm:[{s:c([t(5,10,12,12),3,10,4,10,13,10,14,10]),i:["e",14,10,"b",11,13,"p",9,13,"x",4,8,"x",13,8]},{s:[],i:["r",8,7,"r",10,7,"r",13,7]},{s:[],i:["r",7,7,"r",9,7,"r",12,7]},{s:[],i:["r",6,7,"r",8,7,"r",11,7]},{s:[],i:["r",5,7,"r",7,7,"r",10,7]},{s:[],i:["r",4,7,"r",6,7,"r",9,7]},{s:[],i:["p",10,9,"x",15,9,"x",16,9]},{s:[],i:["p",9,9,"x",14,9,"x",15,9]},{s:[],i:["p",8,9,"x",13,9,"x",14,9]},{s:[],i:["p",7,9,"x",12,9,"x",13,9]},{s:[],i:["p",6,9,"x",11,9,"x",12,9]}],trpl1:{i:"trpl1",m:["y",[0,4],40],s:[0,10,20,30,39],stm:[6,7,8,9,10],defaultF:20},trpl2:{i:"trpl2",m:["y",[0,4],40],s:[0,10,20,30,39],stm:[1,2,3,4,5],defaultF:20}}};function o(t){return 18*t[0]+t[1]}function w(t,d){var n,e,i=[t],r=[],f=[],a=[];for(f[o(t)]=0,a[o(t)]=z(t,d);0!==i.length;){if((n=i.sort((t,e)=>a[o(t)]-a[o(e)])[0])[0]===d[0]&&n[1]===d[1]){for(e=[n];void 0!==r[o(n)];)n=r[o(n)],e.unshift(n);return e}i.splice(i.indexOf(n),1),!function(t){var e=[];M[t[0]-1]&&1===M[t[0]-1][t[1]]&&e.push([t[0]-1,t[1]]);M[t[0]+1]&&1===M[t[0]+1][t[1]]&&e.push([t[0]+1,t[1]]);1===M[t[0]][t[1]-1]&&e.push([t[0],t[1]-1]);1===M[t[0]][t[1]+1]&&e.push([t[0],t[1]+1]);return e}(n).forEach(t=>{var e=(void 0===f[o(n)]?1e5:f[o(n)])+1;e<(void 0===f[o(t)]?1e5:f[o(t)])&&(r[o(t)]=n,f[o(t)]=e,a[o(t)]=e+z(t,d),-1===i.indexOf(t))&&i.push(t)})}return[]}function G(t,i,r,f){return t.map(t=>{var e=t[1]*a(i)+t[2]*b(i),d=t[2]*a(i)-t[1]*b(i),n=t[0]*a(r)+d*b(r);return[n*a(f)-e*b(f),n*b(f)+e*a(f),-t[0]*b(r)+d*a(r)]})}function H(t){return(t%=2*U)<0?t+2*U:t}function N(t,e){t=(t=H(t))-(e=H(e));return U<t?t-=2*U:t<-U&&(t+=2*U),t}function Y(t,e,d){return P.max(d,P.min(e,t))}function z(t,e){return P.sqrt(P.pow(t[0]-e[0],2)+P.pow(t[1]-e[1],2))}var y,L=!1;function D(t,e){g.innerHTML=t,h.classList.remove("h"),y=e,L||(L=!0,v.addEventListener("click",()=>{h.classList.add("h"),y()}))}function s(){var t=k.getBoundingClientRect();e=t.left,d=t.top,n=t.width,r=t.height,document.documentElement.style.setProperty("--vh",.01*window.innerHeight+"px")}function t1(t){return[(t[0]-e)/n*1920,(t[1]-d)/r*1108]}function e1(t){J=t.timeStamp,s();var d,n=!1;d1(t,(t,e)=>{"path"!==t.tagName||n||t.classList.contains("is-tile")||(d=new CustomEvent("md",{detail:{el:t,pageX:e[0],pageY:e[1]}}),n=!0,window.dispatchEvent(d))})}function d1(t,e){for(var d=n1(t),n=document.elementsFromPoint(d[0],d[1]),i=0;i<n.length;i++)e(n[i],d)}function n1(t){var e=t.changedTouches;return e&&e[0]?[e[0].pageX,e[0].pageY]:[t.pageX,t.pageY]}window.addEventListener("resize",s),window.addEventListener("mousedown",e1),window.addEventListener("touchstart",e1);var i1=!1;function r1(t,c,i){var r,f,a=null,o=null,s=t.entityMeta;function l(t,e,d,n,i){var r,f=t*(1-i)+d*i,a=e*(1-i)+n*i;s.cx=(f+a+1)*S-A/2-4,s.cy=(a-f)*C+F/2-190-3*b(i*P.PI*2),c&&((r=c.entityMeta).cx=(f+a+1)*S-A/2-4,r.cy=(a-f)*C+F/2-190-3*b(i*P.PI*2),s.h=!0,r.h=!0,s.f=!1,r.f=!1,0<t-d?(r.h=!1,r.f=!1):0<e-n?(s.h=!1,s.f=!1):e-n<0?(r.h=!1,r.f=!0):(s.h=!1,s.f=!0))}function u(t){return 1===M[t[0]][t[1]]}function g(){$[s.tx]&&$[s.tx][s.ty]&&$[s.tx][s.ty].length&&p.endLevel([s.tx,s.ty,$[s.tx][s.ty]])}return l(s.tx,s.ty,s.tx,s.ty,1),{walkPath:function(t,e){1<(t=w([s.tx,s.ty],[t,e])).length&&(o=t)},tick:function(t){var e,d,n;null!==a&&f&&(e=P.min((t-f)/300,1),d=a[r],n=a[r+1],l(d[0],d[1],n[0],n[1],e),1<=e)&&(f=t,E[s.tx]&&E[s.tx][s.ty]&&"e"===E[s.tx][s.ty].i&&p.endLevel(),g(),null===o&&void 0!==a[r+2]&&u(a[r+2])?(r++,s.tx=a[r+1][0],s.ty=a[r+1][1],i([s.tx,s.ty])):a=null),null===a&&null!==o&&(f=t,a=o,o=null,void(r=0)!==a[r+1])&&u(a[r+1])&&(s.tx=a[r+1][0],s.ty=a[r+1][1],i([s.tx,s.ty]))},checkLose:g}}var p,f1=0;function a1(t,d,n,i,r,b,c){var f,o,a,s,l,u,g,p,e,h,v,m,x=y(t),w=[],z={f:b.defaultF||0,rf:b.defaultF||0};if(d)return x;if(b.i&&(f=y(O[b.i]),o=document.createElement("div"),W.append(o),window.addEventListener("md",L),window.addEventListener("touchmove",M,{passive:!1}),window.addEventListener("mousemove",M),window.addEventListener("mouseup",E),window.addEventListener("touchend",E)),b.r&&r)for(b.r,e=0;e<b.r[2];e++)h=(b.r[1][1]-b.r[1][0])/(b.r[2]-1)*e,$(["x"===b.r[0]?h:0,"y"===b.r[0]?h:0,"z"===b.r[0]?h:0]);else if(b.m)for(b.m,v=0;v<b.m[2];v++)m=(b.m[1][1]-b.m[1][0])/(b.m[2]-1)*v,$(null,["x"===b.m[0]?m:0,"y"===b.m[0]?m:0,"z"===b.m[0]?m:0]);else $();function y(t){var e=[];return q(t).forEach(t=>{Array.isArray(t)?a1(O[t[0]],!0,t[1],t[2],!1,{}).forEach(t=>e.push(t)):(d&&(t.d=t.d.map(t=>t.map((t,e)=>e%2==0?t-(n||0):t-(i||0)))),e.push(t))}),e}function L(t){var e,d,n;"path"===t.detail.el.tagName&&o.contains(t.detail.el)&&!b.pr&&(s=t1([t.detail.pageX,t.detail.pageY]),g=z.f,I.classList.add("dragging"),r)&&(t=w[z.f].iPaths[t.detail.el.getAttribute("data-index")],e=s,t=t.dt,d=function(t,e,d){return e=[e[0]-t[0],e[1]-t[1],e[2]-t[2]],d=[d[0]-t[0],d[1]-t[1],d[2]-t[2]],[e[1]*d[2]-e[2]*d[1],e[2]*d[0]-e[0]*d[2],e[0]*d[1]-e[1]*d[0]]}(t[0],t[1],t[2]),n=(e[0]-(b.x||0)*S)/(B*S),e=(e[1]-(b.y||0)*C)/(B*S),t=(d[0]*t[0][0]+d[1]*t[0][1]+d[2]*t[0][2]-d[1]*e-d[0]*n)/d[2],a=G([[n,e,t]],P.acos(T),0,0),a=G(a,0,0,-U/4)[0])}function M(t){var e;t.preventDefault(),s&&(t=t1(n1(t)),z.f=r?function(t){var e,d,n,t=[t[0]-s[0],t[1]-s[1]],i=b.r[1][0],r=b.r[1][1];"x"===b.r[0]?(e=[a[0],a[1]-t[0]/S,a[2]-t[1]/C/2-t[0]/S/2],n=H(P.atan2(a[1],a[2])),d=H(P.atan2(e[1],e[2]))):"y"===b.r[0]?(e=[a[0]+t[0]/S,a[1],a[2]-t[1]/C/2+t[0]/S/2],n=H(P.atan2(a[0],a[2])),d=H(P.atan2(e[0],e[2]))):"z"===b.r[0]&&(e=[a[0]+t[0]/S/2+t[1]/C/2,a[1]-t[0]/S/2+t[1]/C/2,a[2]],n=H(P.atan2(a[1],a[0])),d=H(P.atan2(e[1],e[0])));((t=H(N(d,n)+g*(U/180)))>r||t<i)&&(t=P.abs(N(t,r))<P.abs(N(t,i))?r:i);return Y(P.floor(t*(180/U)),b.r[2]-1,0)}(t):(t=t,e=P.floor((s[0]-t[0])/10),t=P.floor((s[1]-t[1])/10),"x"===b.m[0]?Y(g-P.round(e/2+t/2),b.m[2]-1,0):"y"===b.m[0]?Y(g-P.round(-e/2+t/2),b.m[2]-1,0):"z"===b.m[0]?Y(g-t,b.m[2]-1,0):void 0))}function E(t){s=a=null,I.classList.remove("dragging")}function $(t,e){var d=k(t,e);b.i&&(d.iPaths=F(f,t,e),d.iSvg=X(d.iPaths)),b.canFlip&&(d.ff=k(t,e,!0)),w.push(d)}function k(t,e,d){var n={img:new Image,paths:F(x,t,e)};return n.svg=X(n.paths,d),n.pr=new Promise(t=>n.img.onload=t),n.img.src=URL.createObjectURL(new Blob([n.svg],{type:"image/svg+xml;charset=utf-8"})),n}function F(t,e,d){t=q(t);return t.forEach(t=>{t.df=t.d.map(t=>t.map((t,e)=>(d&&(e%2==0&&(t=(t+=d[0])-d[1]),e%2==1)&&(t=(t=(t+=d[0])+d[1])+2*d[2]),e%2==0?t*S:t*C))),r&&(e&&(t.d=G(t.d,e[0],e[1],e[2])),t.dt=G(t.d,0,0,U/4),t.dt=G(t.dt,-P.acos(T),0,0),t.z=t.dt.reduce((t,e)=>t+e[2],0)/t.dt.length,t.df=t.dt.map(t=>t.map(t=>t*B*S).filter((t,e)=>e%3!=2)))}),r&&!b.ds&&t.sort((t,e)=>t.z-e.z),t}function X(t,e){var u="",g="";return t.forEach((t,e)=>{var d,n,i,r,f,a,c,o=void 0===t.f?"none":"#"+R[t.f],s=void 0===t.s||"none"===R[t.s]?void 0:"#"+R[t.s],l=t.df.map((t,e)=>(6===t.length?"C ":0!==e?"L ":"")+t.map((t,e)=>e%2==0?t+(b.x||0)*S+",":t+(b.y||0)*C+" ").join("")).join(" ");t.g&&(d=`g-${t.g[0]}-`+f1++,u+=(n=t.g[1]*S,i=t.g[2]*C,r=R[V[t.g[0]][0]],f=t.g[3]*S,a=t.g[4]*C,c=R[V[t.g[0]][1]],`<linearGradient gradientUnits="userSpaceOnUse" id="${d}" x1="${n}" y1="${i}" x2="${f}" y2="${a}"><stop offset="0" stop-color="#${r}" /><stop offset="1" stop-color="#${c}" /></linearGradient>`),o=`url('#${d}')`),g+=_(o,s,t.w,l,e,0!==t.z)}),Q(u,g,e)}return{fs:w,entityMeta:b,state:z,render:function(t){var n,e,i,r,f,d,a=p?t-p:0;b.h||(b.f?Z.drawImage(w[z.f].ff.img,(b.cx||0)-A+200,b.cy||0):Z.drawImage(w[z.f].img,b.cx||0,b.cy||0),b.i&&(null===s&&b.s&&(n=z.f,a=a,i=1e5,r=(e=b).s[0],f=(e.m||e.r)[2]-1,d=0,e.s.forEach(t=>{var e=t-n,d=t-(n+f);P.abs(d)<P.abs(e)&&(e=d),P.abs(e)<P.abs(i)&&(i=e,r=t)}),0<i?(d=P.round(P.ceil(i*a/100)),i<d&&(d=i)):(d=P.round(P.floor(i*a/100)))<i&&(d=i),e={upd:Y(P.round(n+d),f,0),val:r},-1===b.s.indexOf(z.f)?z.f=e.upd:z.rf=e.val),u!==z.rf&&b.s&&-1!==b.s.indexOf(z.rf)&&(u=z.rf,c)&&c(),l!==z.f)&&(l=z.f,o.innerHTML=w[z.f].iSvg)),p=t},removeInteractivity:function(){window.removeEventListener("md",L),window.removeEventListener("mousemove",M),window.removeEventListener("touchmove",M),window.removeEventListener("mouseup",E),window.removeEventListener("touchend",E)}}}function c1(s,g){W.innerHTML="";var b,p,t=m[s],h=X[s],v={},z=!1,n=!1,e=[];function y(t,e){if(z&&p.tick(t),z||e)for(const d in v)Object.hasOwn(v,d)&&(v[d].render(t),n)&&(v[d]=null)}function d(){b.initMap(),p.checkLose()}function L(d){for(const e in v){var t,n;Object.hasOwn(v,e)&&(t=v[e]).entityMeta&&t.entityMeta.i&&t.entityMeta.stm&&(n=!1,t.entityMeta.stm.forEach(t=>{var e=X[s].tm[t];for(i=0;i<e.s.length;i+=2)d[0]===e.s[i]&&d[1]===e.s[i+1]&&(n=!0)}),t.entityMeta.pr=!!n)}}return q(t).forEach(t=>{v[t[0]]=a1(O[t[0]],!1,t[1],t[2],-1!==t[0].indexOf("3d"),h[t[0]]?q(h[t[0]]):{},d),e=e.concat(v[t[0]].fs.map(t=>t.pr))}),Promise.all(e).then(()=>{var m,e,n,d,t=0;function i(){var s;M=u(),E=u(),$=u(!0),r(),r(!0),s="",M.forEach((t,o)=>{M[o].forEach((t,e)=>{var d,n,i,r,f,a,c;1===t&&(r=e-(t=o),f=e-(d=o+1),a=e+1-(n=o+1),c=e+1-(i=o),s+=_("#000","none",0,(t+=e+1)*S-A/2+`,${r*C+F/2} L ${(d+=e+1)*S-A/2},${f*C+F/2} ${(n+=e+1+1)*S-A/2},${a*C+F/2} ${(i+=e+1+1)*S-A/2},${c*C+F/2} `,18*o+e,1,!0))})}),K.innerHTML=Q("",s),l(),I.addEventListener("click",c)}function r(t){(t?a:f)(0);for(const d in n){var e;Object.hasOwn(n,d)&&(e=n[d]).entityMeta&&e.entityMeta.s&&e.entityMeta.stm&&e.state&&void 0!==e.state.rf&&(t?a:f)(e.entityMeta.stm[e.entityMeta.s.indexOf(e.state.rf)])}}function f(t){for(var e=m[t],d=0;d<e.s.length;d+=2)M[e.s[d]][e.s[d+1]]=1;for(d=0;d<e.i.length;d+=3){var n=e.i[d+1],i=e.i[d+2];E[n][i]={i:e.i[d]};for(var r=-1;r<=1;r+=2)for(var f,a=-1;a<=1;a+=2)"p"===e.i[d]&&void 0!==(f=w(n+r,i+a,$))&&void 0!==f.push&&f.push(e.i[d]),"b"===e.i[d]&&void 0!==(f=w(n+2*r,i+2*a,$))&&void 0!==f.push&&f.push(e.i[d])}}function a(t){for(var e=m[t],d=0;d<e.i.length;d+=3){var n=e.i[d+1],i=e.i[d+2];if("r"===e.i[d])for(var r=!1,f=!1,a=!1,c=!1,o=1;o<=20;o+=1){var s=w(n-o,i,$),l=w(n+o,i,$),u=w(n,i-o,$),g=w(n,i+o,$),b=w(n-o,i,E),p=w(n+o,i,E),h=w(n,i-o,E),v=w(n,i+o,E);void 0!==l&&0!==p&&(f=!0),void 0!==u&&0!==h&&(a=!0),void 0!==g&&0!==v&&(c=!0),(r=void 0!==s&&0!==b?!0:r)||void 0===s||s.push(e.i[d]),f||void 0===l||l.push(e.i[d]),a||void 0===u||u.push(e.i[d]),c||void 0===g||g.push(e.i[d])}}}function w(t,e,d){return void 0!==d[t]&&void 0!==d[t][e]?d[t][e]:void 0}function c(t){d&&(t.timeStamp||0)-(J||0)<200&&d1(t,t=>{t=o(t);t&&e(t[0],t[1])})}function o(t){var t=t.getAttribute("data-index");if(null!==t)return t=parseInt(t),[x=P.floor(t/18),t%18]}function l(){I.removeEventListener("click",c)}function u(t){for(var e=[],d=0;d<19;d++){e[d]=[];for(var n=0;n<19;n++)e[d][n]=t?[]:0}return e}k.classList.remove("i"),p=r1(v.wiu,v.wid,L),m=X[s].tm,e=p.walkPath,n=v,d=!1,i(),b={initMap:i,ri:l,hl:function(){for(var t=K.querySelectorAll("path"),e=0;e<t.length;e++){var d=o(t[e]);$[d[0]][d[1]].length&&t[e].classList.add("l")}},st:()=>d=!0},h.tx&&!g?(t=1500,y(0,!0),D(h.tx,()=>{z=!0,setTimeout(b.st,600)})):(z=!0,setTimeout(b.st,600)),setTimeout(()=>k.classList.remove("h"),t)}),{tick:y,endLevel:function(t){n=!(z=!1);for(const e in v)Object.hasOwn(v,e)&&v[e].removeInteractivity();b.ri(),t?(k.classList.add("i"),b.hl(),setTimeout(()=>{k.classList.add("h"),setTimeout(()=>D(f[t[2][0]],()=>s1(l[u-1],t)),1e3)},1e3)):(k.classList.add("h"),setTimeout(o1,1e3))},levelIsRunning:()=>z}}var l=["bridge","courtyard","cellar","garrison","hall","chapel","throne"],u=0;function o1(){u<l.length?s1(l[u++]):D("Well played, Wise One.",()=>window.location.reload())}function s1(t,e){p=c1(t,e)}s(),requestAnimationFrame(function t(e){p&&p.tick(e);requestAnimationFrame(t)}),D('Merlin, your legend has reached Castile. Let us play: "Ajedrez".<br/><br/>King Alfonso X',()=>{var t=1500;I.requestFullscreen?I.requestFullscreen({navigationUI:"hide"}):I.mozRequestFullScreen?I.mozRequestFullScreen({navigationUI:"hide"}):I.webkitRequestFullscreen&&I.webkitRequestFullscreen({navigationUI:"hide"}),i1||(setTimeout(()=>{i1=!0;try{zzfxV=.3,zzfxR=44100,zzfx=(...t)=>zzfxP(zzfxG(...t)),zzfxP=(...t)=>{let e=zzfxX.createBufferSource(),d=zzfxX.createBuffer(t.length,t[0].length,zzfxR);return t.map((t,e)=>d.getChannelData(e).set(t)),e.buffer=d,e.connect(zzfxX.destination),e.start(),e},zzfxG=(t=1,e=.05,d=220,n=0,i=0,r=.1,f=0,a=1,c=0,o=0,s=0,l=0,u=0,g=0,b=0,p=0,h=0,v=1,m=0,x=0)=>{let w=2*Math.PI,z=c*=500*w/zzfxR**2,y=(0<b?1:-1)*w/4,L=d*=(1+2*e*Math.random()-e)*w/zzfxR,M=[],E=0,$=0,k=0,F=1,X=0,R=0,O=0,P,j;for(n=99+zzfxR*n,m*=zzfxR,i*=zzfxR,r*=zzfxR,h*=zzfxR,o*=500*w/zzfxR**3,b*=w/zzfxR,s*=w/zzfxR,l*=zzfxR,u=zzfxR*u|0,j=n+m+i+r+h|0;k<j;M[k++]=O)++R%(100*p|0)||(O=f?1<f?2<f?3<f?Math.sin((E%w)**3):Math.max(Math.min(Math.tan(E),1),-1):1-(2*E/w%2+2)%2:1-4*Math.abs(Math.round(E/w)-E/w):Math.sin(E),O=(u?1-x+x*Math.sin(2*Math.PI*k/u):1)*(0<O?1:-1)*Math.abs(O)**a*t*zzfxV*(k<n?k/n:k<n+m?1-(k-n)/m*(1-v):k<n+m+i?v:k<j-h?(j-k-h)/r*v:0),O=h?O/2+(h>k?0:(k<j-h?1:(j-k)/h)*M[k-h|0]/2):O),P=(d+=c+=o)*Math.sin($*b-y),E+=P-P*g*(1-1e9*(Math.sin(k)+1)%2),$+=P-P*g*(1-1e9*(Math.sin(k)**2+1)%2),F&&++F>l&&(d+=s,L+=s,F=0),!u||++X%u||(d=L,c=z,F=F||1);return M},zzfxX=new(window.AudioContext||webkitAudioContext);var t=(
//! ZzFXM (v2.0.3) | (C) Keith Clark | MIT | https://github.com/keithclark/ZzFXM
zzfxM=(d,n,i,t=125)=>{let r,f,a,c,o,s,l,u,g,b,p,h,v,m,x=0,w=[],z=[],y=[],L=0,M=0,E=1,$={},k=zzfxR/t*60>>2;for(;E;L++)w=[E=u=h=0],i.map((t,e)=>{for(l=n[t][L]||[0,0,0],E|=!!n[t][L],m=h+(n[t][0].length-2-!u)*k,v=e==i.length-1,f=2,c=h;f<l.length+v;u=++f){for(o=l[f],g=f==l.length+v-1&&v||b!=(l[0]||0)|o|0,a=0;a<k&&u;a++>k-99&&g&&(p+=(p<1)/99))s=(1-p)*w[x++]/2||0,z[c]=(z[c]||0)-s*M+s,y[c]=(y[c++]||0)+s*M+s;o&&(p=o%1,M=l[1]||0,o|=0)&&(w=$[[b=l[x=0]||0,o]]=$[[b,o]]||((r=[...d[b]])[2]*=2**((o-12)/12),0<o?zzfxG(...r):[]))}h=m});return[z,y]})([[.7,0,49,,.07,.07,2,0,,,.5,.01],[.5,0,196,,.08,.5,3],[,0,84,,,,,.7,,,,.5,,6.7,1,.05],[,0,655,,,.09,3,1.65,,,,,.02,3.8,-.1,,.2],[2,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5],[,0,196,,,.48,2,,,,,,,,,.02,.01]],[[[,,15,,,15,15,,13,,15,,,,13,10,,6,6,,,6,6,,10,,8,,,,8,6,8,,],[1,,10,,,,,,,,13,,,,13,,10,,,,,,8,,10,,13,,,,15,,,,],[2,,15,,,,,,15,,15,,,,,,,,15,,,,,,15,,15,,,,,,15,,],[3,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,],[4,,,,,,,,,,,,15,,,,,,,,,,,,,,,,15,,,,,,]],[[,,15,,,15,15,,13,,15,,,,13,10,,6,6,,,6,6,,10,,8,,,,8,6,8,,],[1,,10,,,,,,,,13,,,,15,,,,8,,,,,,,,8,,,,,,,,],[2,,15,,,,,,15,,15,,,,,,,,15,,,,,,15,,15,,,,,,15,,],[3,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,],[4,,,,,,,,,,,,15,,,,,,,,,,,,,,,,15,,,,,,]],[[,,15,,,,15,,13,,15,,8,,13,10,3,,6,,,,6,,10,,8,,,,8,6,8,,],[2,,15,,,,,,15,,15,,,,,,,,15,,,,,,,,15,,,,,,15,,],[3,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,],[4,,,,,,,,,,,,15,,,,,,,,,,,,,,,,15,,,,,,],[5,,10,15,18,15,10,15,18,15,13,17,20,17,13,17,20,17,8,12,15,12,8,12,15,12,13,17,20,17,13,17,20,17]],[[,,15,,,,15,,13,,15,,8,,13,10,3,,20,,,,18,,,,15,,,,13,,,,],[2,,15,,,,,,15,,15,,,,,,15,,15,,,,,,,,15,,,,15,,,,],[3,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,15,,15,,15],[4,,,,,,,,,,,,15,,,,,,,,,,,,,,,,15,,,,15,,],[5,,10,15,18,15,10,15,18,15,13,17,20,17,13,17,20,17,20,,,,18,,,,15,,,,13,,,,],[1,,,,,,,,,,,,,,,,,,20,,,,18,,,,15,,,,13,,,,],[5,,,,,,,,,,,,,,,,,,8,,,,10,,,,6,,,,6,,,,]],[[,,15,,,,15,,,,13,,,,10,,6,,13,,,,13,,13,,,,15,,15,,,,20,,,,20,,,,18,,,,13,,15,,15,,,,,,,,15,,,,15,,,,],[1,,15,,,,,,,,13,,,,,,,,13,,,,18,,17,,,,15,,13,,8,12,20,,,,20,,,,18,,17,,,,15,,,,,,,,,,,,,,,,,,],[5,,3,6,10,13,3,6,10,13,3,6,10,13,3,6,10,13,3,6,10,13,15,13,10,6,3,6,10,13,15,13,10,6,8,12,15,18,8,12,15,18,8,12,15,18,8,12,15,18,8,12,15,18,15,12,8,6,8,12,15,18,15,12,8,6],[2,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,],[3,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,],[4,,,,,,,,,,,,15,,,,,,,,,,,,,,,,15,,,,,,,,,,,,,,,,15,,,,,,,,,,,,,,,,15,,,,,,]],[[,,15,,,,15,,,,13,,,,10,,6,,13,,,,13,,13,,,,15,,15,,13,18,20,,,,20,,,,18,,17,,,,15,,,,,,13,,15,,,,,,,,,,],[1,,15,,,,,,,,13,,,,,,,,8,,,,,,,,13,,,,,,,,8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[5,,3,6,10,13,3,6,10,13,3,6,10,13,3,6,10,13,3,6,10,13,15,13,10,6,3,6,10,13,15,13,10,6,8,12,15,18,8,12,15,18,8,12,15,18,8,12,15,18,8,12,15,18,15,12,8,6,8,12,15,18,15,12,8,6],[2,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,],[3,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,],[4,,,,,,,,,,,,15,,,,,,,,,,,,,,,,15,,,,,,,,,,,,,,,,15,,,,,,,,,,,,,,,,15,,,,,,],[1,,,,,,,,,,,,,,,,,,3,,,,,,,,10,,,,,,,,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,]],[[5,,10,13,17,22,17,13,10,8,10,13,17,22,17,13,10,8,6,10,13,17,13,10,6,5,6,10,13,17,13,10,6,5,8,12,15,17,15,12,8,6,8,12,15,18,15,12,8,6,8,12,15,18,20,24,27,30,32,30,27,24,20,12,8,6],[,,22,,,,22,25,,,22,,18,,22,,20,24,18,,18,,18,,,,18,,17,,18,,17,,20,,18,,20,,,,20,,20,,18,,20,,20,,20,,20,,32,,20,,32,,20,,32,,],[2,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,],[3,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,,,,,15,,,,],[4,,,,,,,,,,,,15,,,,,,,,,,,,,,,,15,,,,,,,,,,,,,,,,15,,,,,,,,,,,,,,,,15,,,,,,]]],[0,1,2,2,0,1,2,3,4,5,6,6],120);(node=zzfxP(...t)).loop=!0}catch(t){}},1500),t=3e3),setTimeout(()=>o1(),t)});