var _=window,raf=function(){return _.requestAnimationFrame||_.webkitRequestAnimationFrame||_.mozRequestAnimationFrame||function(c){to(c,1e3/60)}}(),M=Math,abs=M.abs,min=M.min,max=M.max,to=setTimeout;function rd(a,b){if(!b){b=a;a=0}return M.random()*(b-a)+a}function rp(a){return a[~~rd(a.length)]}function xt(o,x){var r={};for(var i in o){r[i]=o[i]}for(var i in x){r[i]=x[i]}return r}var p=CanvasRenderingContext2D.prototype;p.fr=p.fillRect;p.sv=p.save;p.rs=p.restore;p.tr=p.translate;p.lt=p.lineTo;p.mt=p.moveTo;p.sc=p.scale;p.bp=p.beginPath;p.clg=p.createLinearGradient;p.rt=p.rotate;p.ft=p.fillText;p.$i=function(x){this.globalAlpha=x};p.fs=function(p){this.fillStyle=P.$h?$aP(p):p};p.di=function(i,x,y){if(P.$h)arguments[0]=$aP(arguments[0]);this.drawImage.apply(this,arguments)};for(var i in p){_[i]=function(f){return function(){c[f].apply(c,arguments)}}(i)}var $aM={};function $aP(c){if(c.$h){return c.$h}if(c.length){if(!$aM[c]){if(c.charAt(0)==="#"){var v=c.substring(1);if(v.length==3)v=v.charAt(0)+"0"+v.charAt(1)+"0"+v.charAt(2)+"0";v=parseInt(v,16);$aM[c]="#"+("000000"+(v^16777215).toString(16)).slice(-6)}}return $aM[c]||c}return c}function $n(w,h,rr,t,i){var c=document.createElement("canvas"),r=c.getContext("2d");c.width=c.w=w;c.height=c.h=h;rr(c,r,w,h);if(i){P.$h=1;c.$h=$n(w,h,rr,0,0);P.$h=0}if(t==="$4"){var p=r.createPattern(c,"repeat");p.width=w;p.height=h;if(i){p.$h=r.createPattern(c.$h,"repeat");p.$h.width=w;p.$h.height=h}return p}return c}function $0(){}function $5(x,a,b){return max(a,min(b,x))}function $a4(o){for(var j,x,i=o.length;i;j=~~(rd(1)*i),x=o[--i],o[i]=o[j],o[j]=x);return o}navigator.vibrate=function(){return navigator.vibrate||navigator.mozVibrate||navigator.webkitVibrate||$0}();var P={w:640,h:920,g:800,$aj:100};function $bc(){G=this;G.$y=parseInt(localStorage["hs"])||0;G.$ag=1;G.$O=[];G.can=document.querySelector("canvas");with(G.can){width=P.w;height=P.h}G.ctx=window.c=G.can.getContext("2d");G.$as();G.$a_();$_.$3=new $a6;G.resize();onresize=G.resize;with(document.body){ontouchstart=G.$8.bind(G);ontouchmove=G.$6.bind(G);ontouchend=G.$ae.bind(G);onmo$ciown=G.$bX.bind(G);onmousemove=G.$bZ.bind(G);onmouseup=G.$c_.bind(G)}onkeydown=G.$aO.bind(G);onkeyup=G.$aA.bind(G);G.$aL=0;G.$bf=G.$bO=Date.now();raf(function(){G.$c();raf(arguments.callee)});var $bv=_.innerWidth*_.innerHeight*_.devicePixelRatio,$bx=P.w*P.h,$a0=$bv/$bx;if($a0<.5){G.$aX($a0*2)}$N("die",[[3,,.0246,,.2645,.29,,-.568,,,,,,,,,,,1,,,.0072,,.5]]);$N("$K",[[0,,.1336,,.1006,.3814,,.2867,,,,,,.1429,,,,,.7082,,,,,.5]]);$N("box$a1",[[3,,.0635,.13,.22,.14,.05,,.02,,,,,,,.28,,.04,.49,.04,,,,.25],[3,,.1733,.96,.06,.2304,,-.3608,,,,,,,,,,,1,,,,,.25],[3,,.09,.7003,.23,.0844,,.227,,,,,,,,.7108,,,1,,,,,.25]]);$N("$a$a1",[[3,,.0118,.03,.1681,.565,,-.2343,,,,.26,.6855,,,,,,1,,,,,.2]]);$N("$M",[[0,.1696,.5004,.2598,.3914,.7047,,.0141,-5e-4,,,.6608,-.8497,-.1484,-.0163,.5521,.2529,-.5832,.6323,-.595,.9155,.2821,-.0615,.26]]);$N("test",[[,.5,,.2098,,.1569,.3,.3677,,.2937,,,,,,,,,,,.2912,,,,,.4261,,,.1431,,,,1]]);$N("$ac",[[2,.18,.24,,.54,.34,,,,1,.31,,,,.8522,,,,.23,,,,,.49]])}$bc.prototype={$a_:function(){G.$p=new $bm},$aq:function(){G.$p=new $br(G)},$ay:function(){if(G.$q.$a.$V){G.$as()}},play:function(t){G.$p=null;if(G.$q.$a.$V){G.$as()}G.$q.$3=new $a3},$bT:function(){var s=G.$q.score;G.$y=M.max(s,G.$y);localStorage["hs"]=G.$y;G.lastScore=s;to(function(){$_.$3=null;G.$p=new $bl(s)},1500)},$c:function(){sv();sc(G.$ag,G.$ag);var n=Date.now(),e=(n-G.$bf)/1e3;e=M.min(e,1/30);G.$bf=n;G.$aL++;if(G.$aL===100){var $bF=Date.now()-G.$bO,fps=G.$aL/($bF/1e3);if(fps<30&&!navigator.userAgent.match(/Android/i)){G.$aX(G.$ag*.6)}}G.$q.$c(e);if(G.$p){G.$p.$c(e)}$d.$c(e);rs()},$as:function(){G.$q=new $bg},resize:function(){to(function(){var $bd=innerWidth,$bn=innerHeight,$be=$bd/$bn,$ab=P.w/P.h,$cf=abs($be-$ab),width,height,s=document.getElementById("canvascontainer").style;if($be<=$ab){width=$bd;height=width/$ab}else{height=$bn;width=height*$ab}s.width=width+"px";s.height=height+"px"},100)},pos:function(e){var $aa=G.can.getBoundingClientRect(),pos=[];e=e.touches||[e];for(var i=0;i<e.length;i++){pos.push({x:(e[i].clientX-$aa.left)/($aa.width/P.w),y:(e[i].clientY-$aa.top)/($aa.height/P.h)})}return pos},$8:function(e,m){e.preventDefault();G.touch=G.touch||!m;var p=G.pos(e);G.$O=p;scrollTo(0,1);if(G.$p)return;G.$q.$8()},$6:function(e){e.preventDefault();if(G.$O){G.$O=G.pos(e);if(G.$p)return;G.$q.$6()}},$ae:function(e){e.preventDefault();var p=G.$O[0];G.$O=G.pos(e);if(G.$p){G.$p.$aI(p.x,p.y)}else{G.$q.$ae()}},$aO:function(e){if(e.keyCode==32||e.keyCode==40||e.keyCode==38)e.preventDefault();if(G.$p)return;G.$q.$aO(e.keyCode)},$aA:function(e){if(G.$p)return;G.$q.$aA(e.keyCode)},$bX:function(e){if(!G.touch){G.$8(e,1)}},$bZ:function(e){if(!G.touch){G.$6(e)}},$c_:function(e){if(!G.touch){G.$ae(e)}},$aX:function(r){G.can.width=P.w*r;G.can.height=P.h*r;G.$ag=r}};function $bg(){$_=this;this.score=0;this.$t=P.h-P.$aj;this.$ah=0;this.$U=0;this.$u=-400;this.$aE=0;this.$b=[];this.$cYs=[];this.down={};this.$Q=0;this.$aH=0;with(this.pf=this.$bi(new $T(this,P.w-200,200))){x=P.w/2;y=P.h-this.pf.h/2;$ai=0;$X=0}with(this.$a=this.$bi(new $aK(this))){x=P.w/2;y=100;$a1(this.pf)}this.$I=[];for(var i=0;i<10;i++){this.$I.push({x:rd(P.w),y:rd(P.h)})}this.t=0}$bg.prototype={$a5:function(divs){var $k=[],me=this;for(var i=0;i<divs;i++){$k.push(null)}this.$b.forEach(function(b){var ind,$s,$a9,$E,$a7;if(b!==me.$a){$a9=~~(b.$s()*$k.length/P.w);$a7=~~(b.$E()*$k.length/P.w);for(ind=$a9;ind<=$a7;ind++){$k[ind]=min($k[ind]||me.pf.$f(),b.$f())}}});return $k},$b3:function(x,y){var r=null;this.$b.forEach(function(b){if(b!==$_.$a&&b.$f()>y&&(!r||b.$f()<r.$f())){if(abs(x-b.x)<b.w/2){r=b}}});return r},$b6:function(w){var divs=~~(P.w/w),$k=this.$a5(divs),ind=0;for(var i=1;i<divs;i++){if($k[i]!==null&&$k[i]>$k[ind]){ind=i}}var $b5=$k[ind],$B,inds=[];for(var i=0;i<divs;i++){$B=abs($k[i]-$b5);if($B<150){inds.push(i)}}ind=rp(inds);return $5(ind*P.w/divs+w/2,this.pf.x-this.pf.w/2,this.pf.x+this.pf.w/2)+rd(-P.w/divs,P.w/divs)/2},$cd:function(d){d.y=rd(-400,-100)},$Z:function(x,y,d){d=d||rp([{w:60,h:60},{w:90,h:60},{w:90,h:90},{w:40,h:90}]);var b=new $T(this,d.w,d.h);b.x=x||this.$b6(d.w);b.y=y||this.$u-100;this.$b.push(b);return b},$bi:function(b){this.$b.push(b);return b},$bq:function(b){var i=this.$b.indexOf(b);if(i>=0)this.$b.splice(i,1);b.$bk=0},$cc:function(){var l=0,r=0;this.$b.forEach(function(b){if(b!==$_.$a&&b!==$_.pf&&b.$l){if(b.x<P.w/2)l++;else r++}});return r-l},$c:function(e){this.t+=e;if(!this.$a.$V)this.$t-=e*this.$ah*(this.$U?5:1);if((this.$aH-=e)<=0){this.$bP();this.$aH=2}if((this.$aE-=e)<=0){this.thunder();this.$aE=15}if(this.$Q!==0){this.$b.forEach(function(b){if(b!==$_.$a&&b!==$_.pf){b.$9($_.$Q/(Math.PI/32)*20)}})}if(this.$3){this.$3.$c(e)}var $bs=this.$a.y-P.h*.6;var $B=$bs-this.$u;if(!this.$a.$V&&!G.$p){var s=$B>0?100:50;var s=max(10,abs($B)*.5);$B=$5($B,-s*e,s*e);this.$u+=$B;this.$u=min(this.$u,this.$t+P.$aj-P.h)}fs("#000");fr(0,0,P.w,P.h);if(!P.$h)di($ca,0,0);if(!G.$p&&this.score>0){var s=this.score.toString();var w=$P(s);$i(.2);$z(c,s,P.$h?"black":"white",(P.w-w)/2,300);$i(1)}sv();tr(0,-~~this.$u);if(this.$S){tr(~~rd(-8,8),~~rd(-8,8))}sv();tr(0,~~max(this.$t+P.$aj,this.$u+P.h)-$az.height);fs($az);fr(0,0,P.w,$az.height);rs();this.$H(this.t*50,this.$t-20);sv();tr(P.w/2,P.h/2);rt(this.$Q);tr(-P.w/2,-P.h/2);var bs=this.$b.slice(0);for(var i in bs){bs[i].$c(e)}for(var i in this.$cYs){this.$cYs[i].$R()}rs();this.$H(-this.t*50,this.$t);this.$H(this.t*50,this.$t+20);rs();sv();tr(P.w/2,P.h/2);rt(-M.PI/64);tr(-P.w/2,-P.h/2);fs("#fff");$i(this.$U?1:.5);for(var i=0;i<this.$I.length;i++){this.$I[i].y+=e*(this.$U?2e3:1e3);if(this.$I[i].y>P.h){this.$I[i].x=rd(P.w);this.$I[i].y=rd(-600,-100)}fr(this.$I[i].x,this.$I[i].y,2,40)}rs();if(G.touch&&!G.$p&&!this.$a.$V&&this.$a.$x){$i(this.$a.$D==-1?1:.5);di($b7,60,P.h-100);$i(this.$a.$D==1?1:.5);di($aD,P.w-60-$aD.width,P.h-100);$i(this.$a.vY<0?1:.5);di($K,(P.w-$K.width)/2,P.h-100);$i(1)}},$H:function(x,y){y=~~y;sv();tr(x,y);$i(.5);fs($H);fr(-x,0,P.w,$H.height);var sy=~~($H.height+y-this.$u);fs("#d5d5d5");fr(-x,$H.height,P.w,P.h-sy);rs()},$8:function(x,y){$_.$bp()},$6:$0,$ae:function(){$_.$bp()},$aA:function(k){$_.down[k]=0;$_.$aY()},$aO:function(k){$_.down[k]=1;if(k==38||k==87){$_.$a.$K()}$_.$aY()},$aY:function(){var wd=0;if($_.down[37]||$_.down[65]){wd=-1}if($_.down[39]||$_.down[68]){wd=1}$_.$a.$aS(wd)},$bp:function(x){if(!G.touch)return;var wd=0;G.$O.forEach(function(t){if(t.x<P.w/3){wd=-1}else if(t.x>P.w*2/3){wd=1}else{$_.$a.$K()}});$_.$a.$aS(wd)},$cb:function(){var $S=function(){$_.$b.forEach(function(b){if(b!==$_.pf&&b!==$_.$a){b.vX=rd(-100,100)}})};$_.$a.$g("EARTHQUAKE!!!");to(function(){$_.$S=1},2e3);for(var t=2;t<5;t+=.2){to($S,t*1e3)}to(function(){$_.$S=0;$_.$a.$g("Phewww")},t*1e3)},$b9:function(){$_.$a.$g("FLOOD!!!");to(function(){$_.$U=1},2e3);to(function(){$_.$U=0;$_.$a.$g("Flood's over")},8e3)},$bK:function(){$_.$a.$g("BOX STOOORM!!!");var xs=[];for(var i=0;i<1;i++){for(var x=0;x<P.w;x+=rd(100,200)){xs.push(x)}}$a4(xs);for(var i=0,t=3;i<xs.length;i++,t+=1.2){to(function(x){return function(){$_.$Z(x)}}(xs[i]),t*1e3)}to(function(){$_.$a.$g("Storm is over")},t*1e3+1e3)},add$1:function(p){$_.$cYs.push(p)},$bV:function(p){var ind=$_.$cYs.indexOf(p);if(ind>=0)$_.$cYs.splice(ind,1)},$bP:function(){$_.$bQ();$_.$b.sort(function(a,b){var da=abs(a.x-P.w/2),db=abs(b.x-P.w/2);if(a===$_.$a)return 1;if(b===$_.$a)return-1;return db-da})},$bQ:function(){var $bC=max($_.$u+P.h,$_.$t+P.$aj),i=$_.$b.length;while($_.$b[--i]){if($_.$b[i].$f()>=$bC){$_.$b[i].over.forEach(function(b){if(b!==$_.$a){b.$l=null;b.$ai=0}});$_.$b.splice(i,1)}}},thunder:function(){var i=P.$h,s=200,$by=function(){P.$h=!i},$bz=function(){P.$h=i};for(var t=0;t<400;t+=s){to($by,t);to($bz,t+s/2)}},tilt:function(){$_.$a.$g("THE PLATFORM IS TILTING!!!");var b=$_.$cc(),a=M.PI/64;if(b<0)a*=-1;$d.$e($_,"$Q",0,a,1,1,$G,function(){$d.$e($_,"$Q",$_.$Q,0,1,2)})}};function $C(){this.$Ms=[];this.$i=0;$d.$e(this,"$i",0,1,.5)}$C.prototype={$c:function(e){$i(this.$i);fs("rgba(0,0,0,.7)");fr(0,0,P.w,P.h);for(var i in this.$Ms){this.$Ms[i].$R()}$i(1)},$aI:function(x,y){for(var i in this.$Ms){if(this.$Ms[i].$bI(x,y)){this.$Ms[i].$aI();return}}},out:function(f){$d.$e(this,"$i",this.$i,0,.5,0,$G,f)}};function $br(g){$C.call(this);var h=this,lb;this.$Ms.push(lb=new $F($7,(P.w-$7.width)/2,0,function(){G.$ay();h.out(G.play.bind(G))}));if(localStorage.getItem("tut")==1){this.$Ms.push(lb=new $F($a8,(P.w-$a8.width)/2,0,function(){localStorage["tut"]=null;G.$ay();h.out(G.play.bind(G))}))}this.$Ms.push(new $F($aps$F,(P.w-$aps$F.width)/2,0,function(){P.$h=!P.$h;localStorage["c"]=P.$h?"1":"0"}));this.$a2Y=200;$d.$e(this,"$a2Y",-100,this.$a2Y,.5,0,$J);var d=.5,y=this.$Ms.length==3?400:500;this.$Ms.forEach(function(b){b.y=y;$d.$e(b,"y",b.y+600,b.y,1,d,$J);d+=.5;y+=150});$d.$e(this,"$bw",P.h,860,1,d,$J)}$br.prototype=xt($C.prototype,{$c:function(e){$C.prototype.$c.call(this,e);$i(this.$i);di($a2,(P.w-$a2.width)/2,this.$a2Y);var hsString=G.$y?"high"+"score: "+G.$y:"";$z(c,hsString,"white",(P.w-$P(hsString,.5))/2,this.$bw,.5,1);$i(1)}});function $bl(s){$C.call(this);this.score=s;var h=this;this.$Ms.push(new $F($bS,(P.w-$7.width)/2,500,function(){G.$ay();h.out(G.play.bind(G))}));this.$Ms.push(new $F($bR,(P.w-$7.width)/2,660,function(){G.$aq()}));$d.$e(this.$Ms[0],"y",this.$Ms[0].y+500,this.$Ms[0].y,1,1,$J);$d.$e(this.$Ms[1],"y",this.$Ms[1].y+500,this.$Ms[1].y,1,1.5,$J);play("$ac")}$bl.prototype=xt($C.prototype,{$c:function(e){$C.prototype.$c.call(this,e);$i(this.$i);di($ac,(P.w-$ac.width)/2,200);var s=this.score+"";$z(c,s,"white",(P.w-$P(s))/2,300,1,1);s="best: "+G.$y;$z(c,s,"white",(P.w-$P(s,.5))/2,400,.5,1);$i(1)}});function $T($q,w,h){this.w=w;this.h=h;this.x=this.y=0;this.vX=this.vY=0;this.$ai=1;this.$aR=1;this.$X=1;this.over=[];this.$bk=1;this.$ak=0;this.$Y=0;this.sx=this.sy=1;this.$aQ=0;$d.$e(this,"$aQ",0,1,.3,0,$J)}$T.prototype={$f:function(){return this.y-this.h/2},$o:function(){return this.y+this.h/2},$s:function(){return this.x-this.w/2},$E:function(){return this.x+this.w/2},$c:function(e){var prevY=this.$o(),b,me=this;if(this.$ai){if(!this.$l){this.y+=e*this.vY;this.vY+=e*P.g;if(this.vY>0&&!this.deco$a0n){if(this.y>P.h){$_.$bq(this)}var below=this.$bU(prevY);if(below&&this.$aF(below)&&this.$aZ(below)){this.$a1(below)}}}else{b=this.$l;if(abs(b.x-this.x)>(this.w+b.w)/2||abs(b.y-this.y)>(this.h+b.h)/2+2||!b.$bk){this.$aG()}}}if(this.vX!=0){var x=this.x;this.x+=this.vX*e;if(this.vX>0){this.vX=max(0,this.vX-e*300)}else if(this.vX<0){this.vX=min(0,this.vX+e*300)}$_.$b.forEach(function(b){if(b!==me&&b.$aF(me)){b.$9(me.vX*.6);me.x=x;me.vX=0}})}var l=$5(this.vY/1e3,0,1)*$bj.height,$B=l-this.$Y;this.$Y+=$5($B,-500*e,500*e);if(prevY<$_.$t&&this.$o()>$_.$t&&!this.$l){for(var i=0;i<20;i++){var p=new $1(rd(10,20),"#ddd");p.x=rd(this.$s(),this.$E());p.y=this.$o()+50;$_.add$1(p);var $ce=p.x-this.x;var dx=(p.x-this.x)*2;$d.$e(p,"x",p.x,p.x+dx,.3);$d.$e(p,"y",p.y,p.y-rd(100,200),.3);$d.$e(p,"s",p.s,0,.3,0,$G,p.$al.bind(p))}}this.$R()},$aZ:function(b){return 1},$R:function(){sv();$i(this.deco$a0n?.5:1);tr(this.x,this.y);sc(this.sx,this.sy);tr(-this.x,-this.y);var $bD=(P.w/2-this.$s())/(P.w/2),$bu=(P.w/2-this.$E())/(P.w/2),$at=min(0,$bD)*20,$bh=max(0,$bu)*20;if(this.$ai&&this.$Y>20){sv();tr(this.$s(),this.y-this.$Y);fs($bj);fr($at,0,this.w-$at+$bh,abs(this.$Y));rs()}fs("#ffffff");fr(this.x-this.w/2,this.y-this.h/2+this.$ak,this.w,this.h);if(this.y<$_.$u-this.h/2&&!this.deco$a0n){sv();tr(this.x,$_.$u+100);sc(this.$aQ,this.$aQ);di($aB,-$aB.width/2,-$aB.height);rs()}fs("#c0c0c0");fr(this.$s(),this.$f()+this.$ak,$at,this.h);fr(this.$E(),this.$f()+this.$ak,$bh,this.h);rs()},$bJ:function(b){var ind=this.over.indexOf(b);if(ind===-1)this.over.push(b)},$bY:function(b){var ind=this.over.indexOf(b);if(ind>=0)this.over.splice(ind,1)},$aG:function(){if(this.$l){this.$l.$bY(this);this.$l=null;this.vY=0}},$a1:function(b){var v=this.vY,f=function(t,b,c,d){var prct=t/d;var f=1-M.pow(abs(prct*2-1),3);return f*c+b};this.y=b.$f()-this.h/2;if(this.vY>100&&this.$aR){$d.$e(this,"$ak",0,-this.vY/45,.4,0,f)}this.vY=0;this.$aG();this.$l=b;b.$bJ(this);b.$aU(this,v);for(var x=this.$s()+rd(5,15);x<this.$E();x+=rd(10,25)){var p=new $1(rd(10,20),"gray");p.x=x;p.y=this.$o();$_.add$1(p);$d.$e(p,"y",p.y,p.y-rd(30,80),.3,0,$G,p.$al.bind(p));$d.$e(p,"s",p.s,0,.3)}play(this===$_.$a?"$a$a1":"box$a1");$d.$e(this,"sx",1,1.1,.2,0,f);$d.$e(this,"sy",1,.9,.2,0,f)},$aU:$0,$b0:function(b){return this.$o()>b.$o()&&abs(b.x-this.x)<(this.w+b.w)/2},$bL:function(b,p){var x=this.x,vX;if(b.x>this.x){b.x=this.$E()+b.w/2;if(p&&this.$X)vX=-150}else{b.x=this.$s()-b.w/2;if(p&&this.$X)vX=150}vX&&this.$9(vX)},$9:function(vX){this.vX=vX;for(var i in this.over){this.over[i].$9(vX*.7)}},$bU:function($oBefore){var r,me=this,by=this.$o();$_.$b.forEach(function(h){if(h.$b0(me)&&(!r||h.$f()<r.$f())){r=h}});return r},$aF:function(b){return abs(b.x-this.x)<(this.w+b.w)/2&&abs(b.y-this.y)<(this.h+b.h)/2}};function $aK($q){$T.call(this,$q,40,80);this.$2=this.wd=1;this.$D=this.$aw=this.vXFactor=this.$ax=0;this.$aT=this.$aR=0;this.$x=1}$aK.prototype=xt($T.prototype,{$c:function(e){this.$b4=this.$o();this.$bE=this.$f();$T.prototype.$c.call(this,e);if(!this.$x){this.$D=0}if(this.$D){if(this.$D!==this.$2){this.vXFactor=0}else{this.vXFactor=min(this.vXFactor+e*4,1)}}else{this.vXFactor=max(0,this.vXFactor-e*4)}this.$2=this.$D||this.$2;this.x+=this.$2*300*this.vXFactor*e;this.$aw+=abs(this.vXFactor)*e;if(!this.$l)this.$aw+=e;this.$aT=this.$D!==0;this.$ax-=e;this.$w-=e;var me=this;$_.$b.forEach(function(b){if(me!==b&&me.$aF(b)&&!b.deco$a0n){if(me.$bE>b.$o()){me.vY=0;me.y=b.$o()+me.h/2}else{b.$bL(me,me.$l);if(me.$l)me.$ax=.3}}});if(this.y>$_.$t){this.$g("Cold cold cooooold!!!");if(this.y>$_.$t+50){this.die()}}},$aZ:function(b){return b.$f()>=this.$b4&&b.$f()<=this.$o()},$R:function(){var h=$bW;di(h,this.x-h.width/2,this.y-h.height/2);sv();tr(this.$s(),this.$f());if(this.$w>0){fs("#fff");fr(this.w/2,-10,4,this.$gY+30);c.textAlign="center";c.textBaseline="middle";c.font="16pt Arial";fs("#000");ft(this.$aN,this.w/2+1,this.$gY+1);fs("#fff");ft(this.$aN,this.w/2,this.$gY)}tr(this.w/2,0);sc(this.wd*this.sx,1);tr(-this.w/2,0);fs("#fff");fr(0,0,this.w,60);var la=5,lp=.5,sl=M.sin(this.$aw*M.PI*2/lp)*la+la,lll=20,rll=20;if(this.$aT||!this.$l){lll=20-sl;rll=20-la*2+sl}fr(5,60,5,lll);fr(30,60,5,rll);fs("#000");var p=4,bt=.3,mt=$_.t%p,mi=p-bt/2,s=min(1,max(-mt+mi,mt-mi)/(bt/2)),h=s*5;fr(20,15,5,5*s);fr(31,15,5,5*s);fs("#ccc");if(!this.$l){fr(3,-5,5,30);fr(17,-5,5,5)}else if(this.$ax<=0){fr(3,25,5,23)}else{fr(16,33,34,5);fr(40,25,15,5)}rs()},$K:function(){if(this.$l&&this.$x){this.$aG();this.$l=0;this.vY=-400;play("$K")}},$aU:function(){this.die()},die:function(){$_.$bq(this);this.$V=1;play("die");G.$bT();for(var i=0;i<20;i++){var p=new $1(rd(2,8),"red");p.x=rd(this.$s()-10,this.$E()+10);p.y=rd(this.$f(),this.$o());$_.add$1(p);var b=$_.$b3(p.x,p.y),y=b?b.$f():P.h+200;$d.$e(p,"y",p.y,y,rd(.9,1.2),0,easeOutBounce);$d.$e(p,"s",p.s,0,1,3,$G,p.$al.bind(p))}for(var i=0;i<20;i++){var p=new $1(rd(10,20),"red");p.x=rd(this.$s()-10,this.$E()+10);p.y=rd(this.$f(),this.$o());$_.add$1(p);$d.$e(p,"y",p.y,p.y-rd(30,80),.3,0,$G,p.$al.bind(p));$d.$e(p,"s",p.s,0,.3)}$_.$S=1;to(function(){$_.$S=0},500);navigator.vibrate(500)},$g:function(s,d){if(s!=this.$aN)$d.$e(this,"$gY",0,-80,.5,0,$J);this.$aN=s;this.$w=d||3},$aS:function(d){if(d!==this.$D&&d){$d.$e(this,"wd",this.wd,d,.1)}this.$D=d}});var $bb={a:[[1,1,1],[1,,1],[1,1,1],[1,,1],[1,,1]],b:[[1,1,1],[1,,1],[1,1],[1,,1],[1,1,1]],c:[[1,1,1],[1,,],[1,,],[1,,],[1,1,1]],e:[[1,1,1],[1,,],[1,1],[1,,],[1,1,1]],g:[[1,1,1],[1,,],[1,,],[1,,1],[1,1,1]],h:[[1,,1],[1,,1],[1,1,1],[1,,1],[1,,1]],i:[[1,1,1],[,1],[,1],[,1],[1,1,1]],k:[[1,,1],[1,,1],[1,1],[1,,1],[1,,1]],l:[[1,,0],[1,,],[1,,],[1,,],[1,1,1]],m:[[1,,1],[1,1,1],[1,,1],[1,,1],[1,,1]],n:[[1,1,1],[1,,1],[1,,1],[1,,1],[1,,1]],o:[[1,1,1],[1,,1],[1,,1],[1,,1],[1,1,1]],p:[[1,1,1],[1,,1],[1,1,1],[1,,],[1,,]],r:[[1,1,1],[1,,1],[1,1],[1,,1],[1,,1]],s:[[1,1,1],[1,,],[1,1,1],[,,1],[1,1,1]],t:[[1,1,1],[,1],[,1],[,1],[,1]],u:[[1,,1],[1,,1],[1,,1],[1,,1],[1,1,1]],v:[[1,,1],[1,,1],[1,,1],[1,,1],[,1]],w:[[1,,1,,1],[1,,1,,1],[1,,1,,1],[1,,1,,1],[,1,,1]],x:[[1,,1],[1,,1],[,1],[1,,1],[1,,1]],y:[[1,,1],[1,,1],[1,1,1],[,1],[,1]],"'":[[1]],".":[[0],[0],[0],[0],[1]]," ":[[,0],[,],[,],[,],[,]],":":[[0],[1],[],[1],[]],"?":[[1,1,1],[,,1],[,1,1],[,,],[,1]],"!":[[,1],[,1],[,1],[,,],[,1]],1:[[1,1,0],[,1],[,1],[,1],[1,1,1]],2:[[1,1,1],[,,1],[1,1,1],[1,,],[1,1,1]],3:[[1,1,1],[,,1],[,1,1],[,,1],[1,1,1]],4:[[1,,0],[1,,],[1,,1],[1,1,1],[,,1]],5:[[1,1,1],[1,,],[1,1],[,,1],[1,1]],6:[[1,1,1],[1,,],[1,1,1],[1,,1],[1,1,1]],7:[[1,1,1],[,,1],[,1],[,1],[,1]],8:[[1,1,1],[1,,1],[1,1,1],[1,,1],[1,1,1]],9:[[1,1,1],[1,,1],[1,1,1],[,,1],[1,1,1]],0:[[1,1,1],[1,,1],[1,,1],[1,,1],[1,1,1]]};var $am={};var $b_=function($ap){$am[$ap]={};for(var i in $bb){var d=$bb[i];$am[$ap][i]=$n(d[0].length*10+10,d.length*10,function(c,r){r.fs($ap);for(var i in d){for(var j in d[i]){if(d[i][j]){r.fr(j*10,i*10,10,10)}}}})}};$b_("white");$b_("black");var $z=function(r,t,c,x,y,s,b){s=s||1;if(b)$z(r,t,"black",x+5,y+5,s,0);r.sv();r.tr(x,y);r.sc(s,s);x=0;for(var i=0;i<t.length;i++){var ch=t.charAt(i),$r=$am[c][ch];if($r){r.di($r,x,0);x+=$r.width}}r.rs()};var $P=function(t,s){var w=0,i=t.length;while(i--){var $r=$am["white"][t.charAt(i)];w+=$r?$r.width:0}return w*(s||1)};var $ca=$n(P.w,P.h,function(c,r){r.fs("#000");r.fr(0,0,c.w,c.h);r.fs("white");for(var i=0;i<300;i++){r.globalAlpha=rd(.5,1);r.fr(rd(P.w),rd(P.h),2,2)}var g=r.clg(0,P.h-300,0,P.h-800);g.addColorStop(0,"rgba(0, 0, 0, 1)");g.addColorStop(1,"rgba(0, 0, 0, 0)");r.fs(g);r.fr(0,0,P.w,P.h)}),$H=$n(100,20,function(c,r){var s=100,ss=c.w/s,a=c.h/2,p=c.w;r.fs("#d5d5d5");r.beginPath();r.mt(0,a);for(var i=0,x=0;i<=s;i++,x+=ss){r.lt(x,M.sin(x*M.PI*2/p)*a+a)}r.lt(x,c.h);r.lt(0,c.h);r.fill()},"$4",1),$az=$n(100,400,function(c,r){var g=r.clg(0,0,0,c.h),v=!P.$h?"255,255,255":"0,0,0";g.addColorStop(0,"rgba("+v+", 0)");g.addColorStop(1,"rgba("+v+", 1)");r.globalAlpha=.3;r.fs(g);r.fr(0,0,c.w,c.h)},"$4",1),$a2=$n(475,115,function(c,r){$z(r,"it's raining","white",0,0,1,1);$z(r,"...b"+"oxes?!","white",0,60,1,1)}),$M=function(t,st){return $n(400,120,function(c,r){r.fs("#fff");r.fr(0,0,400,100);r.fs("#757575");r.fr(0,100,c.w,20);$z(r,t,"black",(c.w-$P(t))/2,25)})},$7=$M("play"),$a8=$M("tutorial"),$bS=$M("try again"),$aps$F=$M("reverse"),$bR=$M("back"),$a_=function(fg,bg,t){return $n(P.w,P.h/2,function(c,r){r.fs(bg);r.fr(0,0,c.w,c.h);$z(r,t,fg,(c.w-$P(t))/2,c.h/2-25)})},$bN=$a_("black","#fff","black on white"),$bM=$a_("white","#000","white on black"),$ac=$n(345,55,function(c,r){$z(r,"game over","white",0,0,1,1)}),$aD=$n(80,80,function(c,r){r.fs("#000");r.beginPath();r.mt(0,0);r.lt(c.w,c.h/2);r.lt(0,c.h);r.fill()},0,1),$b7=$n(80,80,function(c,r){r.tr(c.w,0);r.sc(-1,1);r.di($aD,0,0)},0,1),$K=$n(80,80,function(c,r){r.fs("#000");r.bp();r.arc(c.w/2,c.h/2,c.w/2,0,M.PI*2,1);r.fill()},0,1),$aB=$n(80,80,function(c,r){with(r){tr(0,c.h);sc(2,-2);fs("#fff");bp();mt(20,40);lt(40,20);lt(30,20);lt(30,0);lt(10,0);lt(10,20);lt(0,20);fill()}},0,1),$bW=$n(150,150,function(c,r){var g=r.createRadialGradient(c.w/2,c.h/2,1,c.w/2,c.h/2,c.h/2),v=!P.$h?"255,255,255":"0,0,0";g.addColorStop(0,"rgba("+v+",1)");g.addColorStop(1,"rgba("+v+",0)");r.globalAlpha=.3;r.fs(g);r.fr(0,0,c.w,c.h)},0,1),$bj=$n(20,200,function(c,r){var g=r.clg(0,0,0,c.h),v=!P.$h?"255,255,255":"0,0,0";g.addColorStop(0,"rgba("+v+", 0)");g.addColorStop(1,"rgba("+v+", 1)");r.globalAlpha=.5;r.fs(g);r.fr(0,0,c.w,c.h)},"$4",1);addEventListener("load",function(){new $bc});var $es=[];function $G(t,b,c,d){return t/d*c+b}function $J(t,b,c,d,s){if(s==undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b}function easeOutBounce(t,b,c,d){if((t/=d)<1/2.75){return c*(7.5625*t*t)+b}else if(t<2/2.75){return c*(7.5625*(t-=1.5/2.75)*t+.75)+b}else if(t<2.5/2.75){return c*(7.5625*(t-=2.25/2.75)*t+.9375)+b}else{return c*(7.5625*(t-=2.625/2.75)*t+.984375)+b}}var $d={$e:function(o,p,a,b,d,l,f,e){$es.push({o:o,p:p,a:a,b:b,d:d,l:l||0,f:f||$G,e:e||$0,t:0})},$c:function(e){var tw;for(var i=$es.length-1;i>=0;i--){tw=$es[i];if(tw.l>0){tw.l-=e;tw.o[tw.p]=tw.a}else{tw.t=min(tw.d,tw.t+e);tw.o[tw.p]=tw.f(tw.t,tw.a,tw.b-tw.a,tw.d);if(tw.t==tw.d){tw.e();$es.splice(i,1)}}}}};function $F($r,x,y,f){this.$r=$r;this.x=x;this.y=y;this.$aIf=f;this.$bt=1}$F.prototype={$R:function(){di(this.$r,this.x,this.y)},$bI:function(x,y){return this.$bt&&x>this.x&&y>this.y&&x<this.x+this.$r.width&&y<this.y+this.$r.height},$aI:function(){this.$aIf();play("$M")}};function $bo($aV){this.$W=6;this.$ar=this.$an=10;this.$aJ=40;this.$U=0;this.$av=40;$_.$a.$x=1;this.$af=[["I should have brought my swimsuit","Or my umbrella"],["How do I shoot?"],["It's raining men!","Alleluia it's raining men!"],["What does the b"+"ox s"+"ay?"],["Did the weather man predict this?"],["Follow me @remvst"],["This does not feel like Tetris at all"],["I'm siiinging in the raiiin"],["I should have taken swimming lessons"],["I have no mouth :( "],["Dem graphics"],["I need a helmet","Safety first"],["Did you notice I blink?"],["Like the game?","Tweet about it!"]];$a4(this.$af);this.$m={};var t=0;if(!$aV){this.$m[0]="Hello"+(G.lastScore!==undefined?" again":"")+"!";if(G.$y>0&&G.lastScore===undefined){this.$m[0]="Hey, you came back!"}t+=3}var s=0;if(!$aV){if("lastScore"in G&&G.$y<40){this.$m[3]="I see you didn't do too well last time";this.$m[6]="Here is my advice";this.$m[9]="Try to avoid fal"+"ling b"+"oxes";this.$m[12]="Then, build a wall with the b"+"oxes";this.$m[15]="And climb it to avoid the w"+"ater";this.$m[18]="Let's try it!";this.$m[21]="It's raining b"+"oxes!!!";s=30;this.$W=24}else{this.$m[t]="It's raining b"+"oxes today!";this.$m[t+7]="Water is rising!";this.$W=6;s=15}}this.$ar=this.$an=this.$W+7;for(var i=0;i<this.$af[i];i++,s+=15){for(var j=0;j<this.$af[i][j];j++,s+=3){this.$m[s]=this.$af[i][j]}}this.$m[s+10]="You're getting good at this!";this.$m[s+13]="Like... really good!";this.t=0}$bo.prototype={$c:function(e){if(!$_.$a.$V&&!G.$p){this.t+=e;var rt=~~this.t;if(this.$m[rt]){$_.$a.$g(this.$m[rt]);this.$m[rt]=null}if((this.$W-=e)<=0){var b=$_.$Z();this.$W=3;if(abs(b.x-$_.$a.x)<($_.$a.w+b.w)/2){$_.$a.$g("WATCH OUT!",2)}}if((this.$av-=e)<=0&&$_.$a.$l){var $aW,b;for(var i=0;i<$_.$b.length;i++){b=$_.$b[i];if(b!=$_.$a&&b.$f()<$_.$a.$o()&&b.$l){$aW=1;break}}if(!$aW){$_.$a.$g("I'm on top of the wooooooorld!");this.$av=20}}if((this.$ar-=e)<=0){$_.score+=1;this.$ar=1;if($_.score===G.$y+1&&G.$y){$_.$a.$g("New record!")}}if(this.$an>0){this.$an-=e;if(this.$an<=0){$_.$a.$g("Water is rising!")}$_.$ah=0}else{$_.$ah=2.5;if(this.t>60){$_.$ah=3.5}}this.$aJ-=e;if(this.$aJ<=0){var t=rp(["$cb","$b9","$bK","tilt"]);$_[t].call($_);this.$aJ=40}}}};function $a3(){var s=this,$aC={w:60,h:60};this.$aus={hello:{$v:function(){$_.$a.$g("Hello!");$_.$a.$x=0},$c:function(){if($_.$a.$w<0){s.$A("name")}}},name:{$v:function(){$_.$a.$g("My name is Didi")},$c:function(){if($_.$a.$w<0){s.$A("$bH")}}},$bH:{$v:function(){$_.$a.$g("It's raining b"+"oxes today!");s.bx=$_.$Z($_.pf.x-$_.pf.w/2+$aC.w/2,-100,$aC)},$c:function(){if(s.bx.$l){s.$A("push")}}},push:{$v:function(){$_.$a.$g("Try to push this one away!");$_.$a.$x=1},$c:function(){if($_.$b.length===2){s.$A("pushed")}else if($_.$a.$w<0){$_.$a.$g("Use the arrow "+(G.touch?"b"+"uttons":"keys")+" to move")}}},pushed:{$v:function(){$_.$a.$g("Nice!");$_.$a.$x=0},$c:function(){if($_.$a.$w<0){s.$A("$b2")}}},$b2:{$v:function(){$_.$a.$g("B"+"oxes can s"+"tack up");var b=$_.pf.x+$_.pf.w/2-70;if($_.$a.x>P.w/2){b=P.w-b}s.$b=[];var xs=[b,b-70,b+70,b-35,b+35,b];xs.forEach(function(x,i){to(function(){s.$b.push($_.$Z(x,i*-100-100,$aC))},i*400)});to(function(){s.$A("$bG")},xs.length*200+2e3)},$c:$0},$bG:{$v:function(){$_.$a.$g("Try to j"+"ump on them");$_.$a.$x=1;for(var i=0;i<s.$b.length;i++){s.$b[i].$X=0}},$c:function(){if($_.$a.$l===s.$b[s.$b.length-1]){s.$A("$b1")}else if($_.$a.$w<0){$_.$a.$g(G.touch?"Use the round b"+"utton to j"+"ump":"Use the up arrow to j"+"ump")}}},$b1:{$v:function(){$_.$a.$g("Nice!");$_.$a.$x=0},$c:function(){if($_.$a.$w<0){s.$A("$b8")}}},$b8:{$v:function(){$_.$a.$g("Try not to f"+"all in the w"+"ater!");for(var i=0;i<s.$b.length;i++){s.$b[i].$X=1}},$c:function(){if($_.$a.$w<0){s.$A("start")}}},start:{$v:function(){$_.$a.$g("Let's play now!");$_.$a.$x=1},$c:function(){if($_.$a.$w<0){s.end(1)}}}};if(localStorage["tut"]==1){to(this.end,1)}else{this.$A("hello")}}$a3.prototype={$c:function(e){if(this.$au){this.$au.$c(e)}$_.$a.x=$5($_.$a.x,$_.pf.x-$_.pf.w/2,$_.pf.x+$_.pf.w/2)},$A:function(s){(this.$au=this.$aus[s]).$v()},end:function(s){localStorage["tut"]=1;$_.$3=new $bo(s)}};function $a6(){this.nb=0}$a6.prototype={$c:function(e){this.nb-=e;if(this.nb<=0){var b=$_.$Z();b.deco$a0n=1;this.nb=.5}}};function $1(s,c){this.s=s;this.c=c}$1.prototype={$R:function(e){fs(this.c);fr(this.x-this.s/2,this.y-this.s/2,this.s,this.s)},$al:function(){$_.$bV(this)}};function $bm(){$C.call(this);var h=this;this.$Ms.push(new $F($bN,0,0,function(){P.$h=1;localStorage["c"]="1";h.out(G.$aq.bind(G))}));this.$Ms.push(new $F($bM,0,P.h/2,function(){P.$h=0;localStorage["c"]="0";h.out(G.$aq.bind(G))}));var c=localStorage["c"];if(c){P.$h=c==="1";setTimeout(function(){G.$aq()},0)}}$bm.prototype=xt($C.prototype,{out:function(f){$d.$e(this.$Ms[0],"y",0,-P.h/2,.2);$d.$e(this.$Ms[1],"y",P.h/2,P.h,.2,0,$G,f)}});function J(){this.B=function(e){for(var f=0;24>f;f++)this[String.fromCharCode(97+f)]=e[f]||0;.01>this.c&&(this.c=.01);e=this.b+this.c+this.e;.18>e&&(e=.18/e,this.b*=e,this.c*=e,this.e*=e)}}var W=new function(){this.A=new J;var e,f,d,g,l,z,K,L,M,A,m,N;this.$ba=function(){var c=this.A;g=100/(c.f*c.f+.001);l=100/(c.g*c.g+.001);z=1-.01*c.h*c.h*c.h;K=1e-6*-c.i*c.i*c.i;c.a||(m=.5-c.n/2,N=5e-5*-c.o);L=0<c.l?1-.9*c.l*c.l:1+10*c.l*c.l;M=0;A=1==c.m?0:2e4*(1-c.m)*(1-c.m)+32};this.D=function(){this.$ba();var c=this.A;e=1e5*c.b*c.b;f=1e5*c.c*c.c;d=1e5*c.e*c.e+10;return e+f+d|0};this.C=function(c,O){var a=this.A,P=1!=a.s||a.v,r=.1*a.v*a.v,Q=1+3e-4*a.w,n=.1*a.s*a.s*a.s,X=1+1e-4*a.t,Y=1!=a.s,Z=a.x*a.x,$=a.g,R=a.q||a.r,aa=.2*a.r*a.r*a.r,D=a.q*a.q*(0>a.q?-1020:1020),S=a.p?(2e4*(1-a.p)*(1-a.p)|0)+32:0,ba=a.d,T=a.j/2,ca=.01*a.k*a.k,E=a.a,F=e,da=1/e,ea=1/f,fa=1/d,a=5/(1+20*a.u*a.u)*(.01+n);.8<a&&(a=.8);for(var a=1-a,G=!1,U=0,v=0,w=0,B=0,t=0,x,u=0,h,p=0,s,H=0,b,V=0,q,I=0,C=Array(1024),y=Array(32),k=C.length;k--;)C[k]=0;for(k=y.length;k--;)y[k]=2*Math.random()-1;for(k=0;k<O;k++){if(G)return k;S&&++V>=S&&(V=0,this.$ba());A&&++M>=A&&(A=0,g*=L);z+=K;g*=z;g>l&&(g=l,0<$&&(G=!0));h=g;0<T&&(I+=ca,h*=1+Math.sin(I)*T);h|=0;8>h&&(h=8);E||(m+=N,0>m?m=0:.5<m&&(m=.5));if(++v>F)switch(v=0,++U){case 1:F=f;break;case 2:F=d}switch(U){case 0:w=v*da;break;case 1:w=1+2*(1-v*ea)*ba;break;case 2:w=1-v*fa;break;case 3:w=0,G=!0}R&&(D+=aa,s=D|0,0>s?s=-s:1023<s&&(s=1023));P&&Q&&(r*=Q,1e-5>r?r=1e-5:.1<r&&(r=.1));q=0;for(var ga=8;ga--;){p++;if(p>=h&&(p%=h,3==E))for(x=y.length;x--;)y[x]=2*Math.random()-1;switch(E){case 0:b=p/h<m?.5:-.5;break;case 1:b=1-2*(p/h);break;case 2:b=p/h;b=.5<b?6.28318531*(b-1):6.28318531*b;b=0>b?1.27323954*b+.405284735*b*b:1.27323954*b-.405284735*b*b;b=0>b?.225*(b*-b-b)+b:.225*(b*b-b)+b;break;case 3:b=y[Math.abs(32*p/h|0)]}P&&(x=u,n*=X,0>n?n=0:.1<n&&(n=.1),Y?(t+=(b-u)*n,t*=a):(u=b,t=0),u+=t,B+=u-x,b=B*=1-r);R&&(C[H%1024]=b,b+=C[(H-s+1024)%1024],H++);q+=b}q=.125*q*w*Z;c[k]=1<=q?32767:-1>=q?-32768:32767*q|0}return O}};window.$bA=function(e){W.A.B(e);var f=W.D();e=new Uint8Array(4*((f+1)/2|0)+44);var f=2*W.C(new Uint16Array(e.buffer,44),f),d=new Uint32Array(e.buffer,0,44);d[0]=1179011410;d[1]=f+36;d[2]=1163280727;d[3]=544501094;d[4]=16;d[5]=65537;d[6]=44100;d[7]=88200;d[8]=1048578;d[9]=1635017060;d[10]=f;for(var f=f+44,d=0,g="data:audio/wav;base64,";d<f;d+=3)var l=e[d]<<16|e[d+1]<<8|e[d+2],g=g+("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[l>>18]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[l>>12&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[l>>6&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[l&63]);d-=f;return g.slice(0,g.length-d)+"==".slice(0,d)};var $ao={},$N=function(sid,$bB){$ao[sid]=[];$bB.forEach(function(s){var a=new Audio;a.src=$bA(s);$ao[sid].push(a)})},play=function(sid){$ao[sid]&&rp($ao[sid]).play()};