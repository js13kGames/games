<!DOCTYPE html><html lang=en><meta charset=utf-8><title>Glitch</title><style>body,html{margin:0;padding:0;width:100%;height:100%;background-color:#000}#m{overflow:hidden;height:100%}#c{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}@media screen and (min-aspect-ratio:16/9){#c{height:100%}}@media screen and (max-aspect-ratio:16/9){#c{width:100%}}</style><div id=m><canvas id=c width=1920 height=1080></canvas></div><script>!function(t){"use strict";function h(t,h){function e(){}e.prototype=t;var i=new e;for(var s in h)i[s]=h[s];return h.toString!==Object.prototype.toString&&(i.toString=h.toString),i}function e(t,h){if(null==h)return null;null==h.__id__&&(h.__id__=H++);var e;return null==t.hx__closures__?t.hx__closures__={}:e=t.hx__closures__[h.__id__],null==e&&(e=function(){return e.method.apply(e.scope,arguments)},e.scope=t,e.method=h,t.hx__closures__[h.__id__]=e),e}function i(){this.setSettings=function(t){for(var h=0;h<24;h++)this[String.fromCharCode(97+h)]=t[h]||0;this.c<.01&&(this.c=.01);var e=this.b+this.c+this.e;if(e<.18){var i=.18/e;this.b*=i,this.c*=i,this.e*=i}}}function s(){this._params=new i;var t,h,e,s,a,r,n,l,y,o,p,w;this.reset=function(){var t=this._params;s=100/(t.f*t.f+.001),a=100/(t.g*t.g+.001),r=1-t.h*t.h*t.h*.01,n=-t.i*t.i*t.i*1e-6,t.a||(p=.5-t.n/2,w=5e-5*-t.o),l=1+t.l*t.l*(t.l>0?-.9:10),y=0,o=1==t.m?0:(1-t.m)*(1-t.m)*2e4+32},this.totalReset=function(){this.reset();var i=this._params;return t=i.b*i.b*1e5,h=i.c*i.c*1e5,e=i.e*i.e*1e5+12,3*((t+h+e)/3|0)},this.synthWave=function(i,c){var x=this._params,v=1!=x.s||x.v,f=x.v*x.v*.1,u=1+3e-4*x.w,d=x.s*x.s*x.s*.1,m=1+1e-4*x.t,g=1!=x.s,b=x.x*x.x,_=x.g,L=x.q||x.r,k=x.r*x.r*x.r*.2,R=x.q*x.q*(x.q<0?-1020:1020),M=x.p?((1-x.p)*(1-x.p)*2e4|0)+32:0,B=x.d,S=x.j/2,z=x.k*x.k*.01,C=x.a,K=t,T=1/t,D=1/h,I=1/e,O=5/(1+x.u*x.u*20)*(.01+d);O>.8&&(O=.8),O=1-O;for(var E,F,H,P,q,j,A=!1,U=0,G=0,X=0,J=0,V=0,W=0,Y=0,$=0,Z=0,N=0,Q=new Array(1024),tt=new Array(32),ht=Q.length;ht--;)Q[ht]=0;for(var ht=tt.length;ht--;)tt[ht]=2*Math.random()-1;for(var ht=0;ht<c;ht++){if(A)return ht;if(M&&++Z>=M&&(Z=0,this.reset()),o&&++y>=o&&(o=0,s*=l),r+=n,s*=r,s>a&&(s=a,_>0&&(A=!0)),F=s,S>0&&(N+=z,F*=1+Math.sin(N)*S),F|=0,F<8&&(F=8),C||(p+=w,p<0?p=0:p>.5&&(p=.5)),++G>K)switch(G=0,++U){case 1:K=h;break;case 2:K=e}switch(U){case 0:X=G*T;break;case 1:X=1+2*(1-G*D)*B;break;case 2:X=1-G*I;break;case 3:X=0,A=!0}L&&(R+=k,H=0|R,H<0?H=-H:H>1023&&(H=1023)),v&&u&&(f*=u,f<1e-5?f=1e-5:f>.1&&(f=.1)),j=0;for(var et=8;et--;){if(Y++,Y>=F&&(Y%=F,3==C))for(var it=tt.length;it--;)tt[it]=2*Math.random()-1;switch(C){case 0:q=Y/F<p?.5:-.5;break;case 1:q=1-Y/F*2;break;case 2:P=Y/F,P=6.28318531*(P>.5?P-1:P),q=1.27323954*P+.405284735*P*P*(P<0?1:-1),q=.225*((q<0?-1:1)*q*q-q)+q;break;case 3:q=tt[Math.abs(32*Y/F|0)]}v&&(E=W,d*=m,d<0?d=0:d>.1&&(d=.1),g?(V+=(q-W)*d,V*=O):(W=q,V=0),W+=V,J+=W-E,J*=1-f,q=J),L&&(Q[$%1024]=q,q+=Q[($-H+1024)%1024],$++),j+=q}j*=.125*X*b,i[ht]=j>=1?32767:j<=-1?-32768:32767*j|0}return c}}var a=function(){this.length=0};a.prototype={add:function(t){var h=[t];null==this.h?this.h=h:this.q[1]=h,this.q=h,this.length++},remove:function(t){for(var h=null,e=this.h;null!=e;){if(e[0]==t)return null==h?this.h=e[1]:h[1]=e[1],this.q==e&&(this.q=h),this.length--,!0;h=e,e=e[1]}return!1}};var r=function(){this.img=[{n:"blt",d:'<svg xmlns="http://www.w3.org/2000/svg" version="1" height="16" width="16"><path d="M0 0h10l6 5v6l-6 5H0z" style="marker:none" color="#000" overflow="visible" fill="red" fill-rule="evenodd"/></svg>'},{n:"boss",d:'<svg xmlns="http://www.w3.org/2000/svg" version="1" viewBox="0 0 60.000001 60.000001" height="60" width="60"><rect ry="12" y="992" height="60" width="60" fill="#ffa700" transform="translate(0 -992)"/></svg>'},{n:"bst",d:'<svg xmlns="http://www.w3.org/2000/svg" version="1" viewBox="0 0 89.999999 90.000001" height="90" width="90"><g transform="translate(16 -962)" fill="red"><circle cx="-1" cy="1047" r="5"/><circle cx="59" cy="1047" r="5"/><path d="M-1 964c25 20 35 20 60 0 9-7 15 7 15 15v49c0 8-7 14-15 14H-1c-8 0-15-6-15-14v-49c0-8 6-22 15-15z"/><path d="M24 979l-12-12 5-5 7 7v-7h10v7l7-7 5 5-12 12z" style="marker:none" color="#000" overflow="visible" fill-rule="evenodd"/></g></svg>'},{n:"bst_h",d:'<svg xmlns="http://www.w3.org/2000/svg" version="1" viewBox="0 0 89.999999 90.000001" height="90" width="90"><g transform="translate(16 -962)" fill="#fff"><circle cx="-1" cy="1047" r="5"/><circle cx="59" cy="1047" r="5"/><path d="M-1 964c25 20 35 20 60 0 9-7 15 7 15 15v49c0 8-7 14-15 14H-1c-8 0-15-6-15-14v-49c0-8 6-22 15-15z"/><path d="M24 979l-12-12 5-5 7 7v-7h10v7l7-7 5 5-12 12z" style="marker:none" color="#000" overflow="visible" fill-rule="evenodd"/></g></svg>'},{n:"end",d:'<svg xmlns="http://www.w3.org/2000/svg" version="1" viewBox="0 0 60.000001 60.000001" height="60" width="60"><path d="M30 59H15c3-1 6-2 13-2V31C10 28 4 13 1 1h58c-3 12-9 27-27 30v26c7 0 9 1 13 2H30" style="marker:none" color="#000" overflow="visible" fill="#ffa700" fill-rule="evenodd"/></svg>'},{n:"glitch",d:'<svg xmlns="http://www.w3.org/2000/svg" version="1" viewBox="0 0 60.000001 60.000001" height="60" width="60"><rect ry="12" y="992" height="60" width="60" fill="#ffa700" transform="translate(0 -992)"/></svg>'},{n:"gun",d:'<svg xmlns="http://www.w3.org/2000/svg" version="1" viewBox="0 0 60.000001 60.000001" height="60" width="60"><g color="#000" fill="#ffa700" fill-rule="evenodd"><path d="M34 20c-1 4 1 8 5 11-5 0-8-6-8-10" style="marker:none" overflow="visible"/><path d="M55 1h-5v1H10V1H5L4 0v2c-1 8-3 12-4 15 6 1 11 3 5 13-3 8-4 17-5 30h23c0-16 1-24 5-30 1-8 4-10 15-8h12v-1h5V2h-5z" style="marker:none" overflow="visible"/></g></svg>'},{n:"key",d:'<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 99.999997 99.999997" version="1"><g transform="translate(0 -952)" fill="#ff8000"><circle cx="80" cy="978" r="20"/><path d="M64 989l5 4-55 55-4-4z"/><path d="M0 1034l16-16 11 10-16 16z"/></g></svg>'},{n:"pla",d:'<svg xmlns="http://www.w3.org/2000/svg" version="1" viewBox="0 0 60.000001 140" height="140" width="60"><g transform="translate(0 -912)" fill="#4a0"><rect width="60" height="130" y="912" ry="12"/><circle cx="21" cy="1047" r="5"/><circle cx="41" cy="1047" r="5"/></g></svg>'},{n:"sht",d:'<svg xmlns="http://www.w3.org/2000/svg" version="1" viewBox="0 0 89.999999 60" height="60" width="90"><path d="M0 0h30l10 15h50v30H40L30 60H0z" fill="red"/></svg>'},{n:"sht_h",d:'<svg xmlns="http://www.w3.org/2000/svg" version="1" viewBox="0 0 89.999999 60" height="60" width="90"><path d="M0 0h30l10 15h50v30H40L30 60H0z" fill="#fff"/></svg>'},{n:"wlk",d:'<svg xmlns="http://www.w3.org/2000/svg" version="1" viewBox="0 0 60.000001 60.000001" height="60" width="60"><g transform="translate(0 -992)" fill="red"><rect ry="12" y="994" x="3" height="48" width="55"/><circle r="5" cy="1047" cx="21"/><path d="M30 990l-4 4h8zm-27 24l-5 5 5 4zm55 0v9l5-4z"/><circle r="5" cy="1047" cx="41"/></g></svg>'},{n:"wlkt",d:'<svg xmlns="http://www.w3.org/2000/svg" version="1" viewBox="0 0 60.000001 150" height="150" width="60"><g fill="red"><g transform="translate(0 -902)"><rect width="55" height="138" x="2" y="904" ry="12"/><circle cx="21" cy="1047" r="5"/><path d="M30 900l-4 4h8zM3 924l-5 5 5 4zm55 0v9l5-4z"/><circle cx="41" cy="1047" r="5"/></g><path d="M3 51l-5 5 5 4zm55 0v9l5-4zM2 81l-4 5 4 4zm56 0v9l4-4zM3 111l-5 5 5 4zm55 0v9l4-4z"/></g></svg>'},{n:"wlkt_h",d:'<svg xmlns="http://www.w3.org/2000/svg" version="1" viewBox="0 0 60.000001 150" height="150" width="60"><g fill="#fff"><g transform="translate(0 -902)"><rect width="55" height="138" x="2" y="904" ry="12"/><circle cx="21" cy="1047" r="5"/><path d="M30 900l-4 4h8zM3 924l-5 5 5 4zm55 0v9l5-4z"/><circle cx="41" cy="1047" r="5"/></g><path d="M3 51l-5 5 5 4zm55 0v9l5-4zM2 81l-4 5 4 4zm56 0v9l4-4zM3 111l-5 5 5 4zm55 0v9l4-4z"/></g></svg>'},{n:"wlk_h",d:'<svg xmlns="http://www.w3.org/2000/svg" version="1" viewBox="0 0 60.000001 60.000001" height="60" width="60"><g transform="translate(0 -992)" fill="#fff"><rect ry="12" y="994" x="3" height="48" width="55"/><circle r="5" cy="1047" cx="21"/><path d="M30 990l-4 4h8zm-27 24l-5 5 5 4zm55 0v9l5-4z"/><circle r="5" cy="1047" cx="41"/></g></svg>'}],this.snd=[{n:"bmp",d:[2,.104,.036,0,.296,.392,0,-.4079,-.632,0,0,-.008,0,0,0,0,-.536,-.376,.52,-.4079,0,0,.472,.36]},{n:"bst",d:[1,0,.2896,.2075,.3767,.8807,.4098,-.1853,0,0,0,0,0,.6048,-.1128,0,0,0,1,0,0,.0027,0,.5]},{n:"die",d:[3,0,.3068,.2715,.392,.6249,0,-.3091,0,0,0,0,0,0,0,.3669,0,0,1,0,0,0,0,.5]},{n:"eki",d:[3,0,.1326,.6156,.4759,.7671,0,-.3426,0,0,0,-.2286,.6202,0,0,0,.4978,-.0547,1,0,0,0,0,.5]},{n:"esh",d:[2,0,.2183,0,.1575,.6096,.0301,-.3652,0,0,0,0,0,.0903,.1744,0,0,0,1,0,0,.2302,0,.5]},{n:"fwe",d:[3,0,.3275,.7215,.3025,.1878,0,0,0,0,0,0,0,0,0,0,.1279,-.0995,1,0,0,0,0,.5]},{n:"fwl",d:[2,0,1,.16,0,.6,.104,-.2159,.024,0,0,-.024,0,.512,-.5455,0,-.008,0,1,.008,.648,.08,.664,.5]},{n:"hit",d:[3,0,.094,0,.1061,.6874,0,-.5094,0,0,0,0,0,0,0,0,0,0,1,0,0,.2674,0,.5]},{n:"jmp",d:[0,0,.1764,0,.2554,.3075,0,.2399,0,0,0,0,0,.5561,0,0,0,0,.6952,0,0,.1265,0,.5]},{n:"key",d:[0,0,.0188,.5408,.294,.643,0,0,0,0,0,.5752,.5585,0,0,0,0,0,1,0,0,0,0,.5]},{n:"lnd",d:[1,.104,.036,0,.296,.392,0,-.4079,-.632,0,0,-.008,0,0,0,0,-.536,-.376,.52,-.4079,0,0,.472,.36]},{n:"sht",d:[0,0,.1218,0,.2991,.6111,.2,-.3112,0,0,0,0,0,.3418,.0653,0,.0958,-.1927,1,0,0,0,0,.5]},{n:"wal",d:[1,0,.0228,0,.1571,.7295,0,-.5791,0,0,0,0,0,0,0,0,0,0,1,0,0,.2144,0,.5]}],this.levels=[{player:[{y:1019,x:1890},{y:479,x:30}],platformLayer:[{y:0,x:1860,w:60,t:"p",h:780},{y:1020,x:0,w:1920,t:"p",h:60},{y:0,x:0,w:1860,t:"p",h:60},{y:750,x:1020,w:420,t:"p",h:60},{y:480,x:480,w:420,t:"p",h:60},{y:480,x:0,w:180,t:"p",h:60},{y:60,x:0,w:60,t:"p",h:180},{y:540,x:0,w:60,t:"p",h:480}],portal:[{y:780,x:1950,w:60,t:"S",l:1,h:240},{y:240,x:-90,w:60,t:"L2",l:0,h:240}],enemy:[{y:750,x:1245,w:90,t:"b",r:!1,h:90},{y:480,x:495,w:90,t:"b",r:!0,h:90}],name:"L1",item:[{y:90,x:60,w:1800,v:"LB",t:"c",h:30}]},{player:[{y:479,x:1890},{y:479,x:30}],platformLayer:[{y:540,x:1860,w:60,t:"p",h:480},{y:60,x:1860,w:60,t:"p",h:180},{y:0,x:0,w:1920,t:"p",h:60},{y:1020,x:0,w:1920,t:"p",h:60},{y:540,x:0,w:60,t:"p",h:480},{y:60,x:0,w:60,t:"p",h:180},{cv:"300",y:480,x:1620,w:30,t:"s",r:!1,h:60},{y:480,x:1650,w:270,t:"p",h:60},{y:480,x:0,w:300,t:"p",h:60}],portal:[{y:240,x:-90,w:60,t:"L3",l:0,h:240},{y:240,x:1950,w:60,t:"L1",l:1,h:240}],enemy:[{y:1020,x:-840,w:1800,t:"k",r:!1,h:30}],name:"L2",item:[{y:90,x:60,w:1800,v:"LB",t:"c",h:30}]},{player:[{y:479,x:1890},{y:599,x:30}],platformLayer:[{y:0,x:0,w:1920,t:"p",h:60},{y:60,x:1860,w:60,t:"p",h:180},{y:540,x:1860,w:60,t:"p",h:480},{y:1020,x:0,w:1920,t:"p",h:60},{cv:"180",y:900,x:1830,w:30,t:"s",r:!1,h:60},{y:600,x:0,w:60,t:"p",h:420},{y:600,x:60,w:300,t:"p",h:60},{y:60,x:0,w:60,t:"p",h:300},{cv:"180",y:660,x:60,w:30,t:"s",r:!0,h:60},{y:480,x:1620,w:300,t:"p",h:60}],portal:[{y:240,x:1950,w:60,t:"L2",l:1,h:240},{y:360,x:-90,w:60,t:"L4",l:0,h:240}],enemy:[{y:1020,x:-840,w:1800,t:"k",r:!1,h:30},{y:750,x:390,w:660,t:"k",r:!1,h:30}],name:"L3",item:[{y:90,x:60,w:1800,v:"LB",t:"c",h:30}]},{player:[{y:599,x:1890},{y:599,x:30}],platformLayer:[{y:0,x:0,w:1920,t:"p",h:60},{y:1020,x:0,w:1920,t:"p",h:60},{y:60,x:1860,w:60,t:"p",h:300},{y:600,x:1860,w:60,t:"p",h:420},{y:600,x:1650,w:210,t:"p",h:60},{y:600,x:60,w:240,t:"p",h:60},{y:60,x:0,w:60,t:"p",h:300},{y:600,x:0,w:60,t:"p",h:420},{cv:"180",y:600,x:1620,w:30,t:"s",r:!1,h:60},{y:540,x:930,w:60,t:"p",h:60}],portal:[{y:360,x:-90,w:60,t:"L5",l:0,h:240},{y:360,x:1950,w:60,t:"L3",l:1,h:240}],enemy:[{y:1020,x:-840,w:1800,t:"k",r:!1,h:30},{y:270,x:15,w:90,t:"g",r:!0,h:60}],name:"L4",item:[{y:90,x:60,w:1800,v:"LB",t:"c",h:30}]},{player:[{y:599,x:1890},{y:959,x:30}],platformLayer:[{y:0,x:0,w:1920,t:"p",h:60},{y:60,x:1860,w:60,t:"p",h:300},{y:600,x:1860,w:60,t:"p",h:420},{y:1020,x:360,w:1560,t:"p",h:60},{y:60,x:0,w:60,t:"p",h:660},{cv:"180",y:660,x:1830,w:30,t:"s",r:!1,h:60},{y:600,x:1620,w:240,t:"p",h:60},{y:960,x:0,w:360,t:"p",h:120},{y:60,x:360,w:60,t:"p",h:390},{y:810,x:360,w:60,t:"p",h:210},{y:900,x:240,w:120,t:"p",h:60}],portal:[{y:360,x:1950,w:60,t:"L4",l:1,h:240},{y:720,x:-90,w:60,t:"L6",l:0,h:240}],enemy:[{y:1020,x:-300,w:1440,t:"k",r:!1,h:30},{y:660,x:1140,w:120,t:"k",r:!1,h:30},{y:660,x:690,w:120,t:"k",r:!1,h:30},{y:810,x:330,w:60,t:"k",r:!1,h:30},{y:480,x:330,w:60,t:"k",r:!1,h:30},{y:990,x:405,w:30,t:"k",r:!1,h:210},{y:480,x:405,w:30,t:"k",r:!1,h:420}],name:"L5",item:[{y:90,x:450,w:1410,v:"LB",t:"c",h:30},{y:90,x:60,w:300,v:"LB",t:"c",h:30}]},{player:[{y:959,x:1890},{y:959,x:30}],platformLayer:[{y:960,x:0,w:1920,t:"p",h:120},{y:0,x:0,w:60,t:"p",h:720},{y:0,x:60,w:1860,t:"p",h:60},{y:60,x:1860,w:60,t:"p",h:660}],portal:[{y:720,x:1950,w:60,t:"L5",l:1,h:240},{y:720,x:-90,w:60,t:"L7",l:0,h:240}],enemy:[],name:"L6",item:[{y:840,x:930,w:60,v:"glitch",t:"k",i:"glitch",h:60},{y:90,x:60,w:1800,v:"LB",t:"c",h:30}]},{player:[{y:599,x:1890},{y:599,x:30}],platformLayer:[{y:0,x:0,w:1920,t:"p",h:60},{y:1020,x:0,w:1920,t:"p",h:60},{y:60,x:1860,w:60,t:"p",h:300},{y:600,x:1860,w:60,t:"p",h:420},{y:600,x:1620,w:240,t:"p",h:60},{y:600,x:60,w:210,t:"p",h:60},{y:60,x:0,w:60,t:"p",h:300},{y:600,x:0,w:60,t:"p",h:420},{cv:"180",y:600,x:270,w:30,t:"s",r:!0,h:60}],portal:[{y:360,x:-90,w:60,t:"L8",l:0,h:240},{y:360,x:1950,w:60,t:"L6",l:1,h:240}],enemy:[{y:1020,x:-840,w:1800,t:"k",r:!1,h:30}],name:"L7",item:[{y:90,x:60,w:1800,v:"LB",t:"c",h:30}]},{player:[{y:599,x:1890},{y:1019,x:30},{y:629,x:30},{y:299,x:30}],platformLayer:[{y:60,x:1860,w:60,t:"p",h:300},{y:1020,x:0,w:1920,t:"p",h:60},{y:0,x:0,w:1920,t:"p",h:60},{y:720,x:480,w:480,t:"p",h:60},{y:600,x:1620,w:300,t:"p",h:420},{y:810,x:1410,w:210,t:"p",h:210},{y:300,x:0,w:720,t:"p",h:60},{y:630,x:0,w:480,t:"p",h:150},{cv:"L9K",y:780,x:0,w:60,t:"d",h:240}],portal:[{y:360,x:1950,w:60,t:"L7",l:1,h:240},{y:780,x:-90,w:60,t:"L9",l:0,h:240},{y:360,x:-90,w:60,t:"L9",l:2,h:270},{y:60,x:-90,w:60,t:"L9",l:3,h:240}],enemy:[{y:720,x:645,w:90,t:"b",r:!0,h:90}],name:"L8",item:[{y:90,x:0,w:1860,v:"LB",t:"c",h:30}]},{player:[{y:1019,x:1890},{y:1019,x:30},{y:629,x:1890},{y:299,x:1890}],platformLayer:[{y:1020,x:0,w:1920,t:"p",h:60},{y:720,x:60,w:1860,t:"p",h:60},{y:510,x:1410,w:60,t:"p",h:120},{y:510,x:60,w:540,t:"p",h:210},{y:60,x:0,w:60,t:"p",h:720},{y:630,x:1110,w:810,t:"p",h:90},{y:300,x:1620,w:300,t:"p",h:60},{y:0,x:0,w:1920,t:"p",h:60},{y:240,x:390,w:1290,t:"p",h:60},{y:300,x:810,w:300,t:"p",h:150},{y:630,x:600,w:180,t:"p",h:90},{cv:"120",y:630,x:780,w:30,t:"s",r:!0,h:60},{y:510,x:1290,w:120,t:"p",h:60},{y:690,x:780,w:30,t:"p",h:30},{cv:"L9K",y:780,x:1860,w:60,t:"d",h:240}],portal:[{y:780,x:-90,w:60,t:"LE",l:0,h:240},{y:780,x:1950,w:60,t:"L8",l:1,h:240},{y:60,x:1950,w:60,t:"L8",l:3,h:240},{y:360,x:1950,w:60,t:"L8",l:2,h:270}],enemy:[{y:720,x:660,w:300,t:"k",r:!1,h:30},{y:630,x:1275,w:90,t:"g",r:!1,h:60}],name:"L9",item:[{y:150,x:930,w:60,v:"L9K",t:"k",i:"key",h:60},{y:90,x:60,w:1860,v:"LB",t:"c",h:30}]},{player:[{y:1019,x:1890}],platformLayer:[{y:1020,x:60,w:1860,t:"p",h:60},{y:60,x:1860,w:60,t:"p",h:720},{y:0,x:0,w:1920,t:"p",h:60},{y:60,x:0,w:60,t:"p",h:1020}],portal:[{y:780,x:1950,w:60,t:"L9",l:1,h:240}],enemy:[],name:"LE",item:[{y:750,x:870,w:180,v:"LB",t:"k",i:"boss",h:180},{y:90,x:930,w:930,v:"LB",t:"c",h:30},{y:120,x:930,w:60,v:"LB",t:"c",h:630}]},{player:[{y:1019,x:30},{y:539,x:1890},{y:1019,x:1890}],platformLayer:[{y:1020,x:0,w:1920,t:"p",h:60},{y:0,x:0,w:1920,t:"p",h:60},{y:540,x:1860,w:60,t:"p",h:240},{y:60,x:0,w:60,t:"p",h:720},{y:540,x:1530,w:330,t:"p",h:60},{y:780,x:1110,w:240,t:"p",h:240},{y:60,x:1860,w:60,t:"p",h:240},{cv:"R2K",y:780,x:1860,w:60,t:"d",h:240}],portal:[{y:780,x:-90,w:60,t:"S",l:2,h:240},{y:300,x:1950,w:60,t:"R2",l:0,h:240},{y:780,x:1950,w:60,t:"R2",l:1,h:240}],enemy:[],name:"R1",item:[{y:90,x:60,w:1800,v:"RB",t:"c",h:30}]},{player:[{y:539,x:30},{y:1019,x:30},{y:1019,x:1890}],platformLayer:[{y:540,x:0,w:60,t:"p",h:240},{y:1020,x:0,w:1920,t:"p",h:60},{y:0,x:0,w:1920,t:"p",h:60},{y:60,x:0,w:60,t:"p",h:240},{y:60,x:1860,w:60,t:"p",h:720},{y:540,x:60,w:1560,t:"p",h:60},{cv:"R2K",y:780,x:0,w:60,t:"d",h:240},{cv:"R2K",y:780,x:1860,w:60,t:"d",h:240}],portal:[{y:300,x:-90,w:60,t:"R1",l:1,h:240},{y:780,x:-90,w:60,t:"R1",l:2,h:240},{y:780,x:1950,w:60,t:"R3",l:0,h:240}],enemy:[{y:1020,x:900,w:60,t:"w",r:!1,h:150}],name:"R2",item:[{y:930,x:240,w:60,v:"R2K",t:"k",i:"key",h:60},{y:90,x:60,w:1800,v:"RB",t:"c",h:30}]},{player:[{y:1019,x:30},{y:479,x:1890}],platformLayer:[{y:0,x:0,w:60,t:"p",h:780},{y:1020,x:0,w:1920,t:"p",h:60},{y:0,x:60,w:1860,t:"p",h:60},{y:60,x:1860,w:60,t:"p",h:180},{y:750,x:480,w:420,t:"p",h:60},{y:480,x:1020,w:420,t:"p",h:60},{y:480,x:1860,w:60,t:"p",h:540},{y:480,x:1740,w:120,t:"p",h:60}],portal:[{y:780,x:-90,w:60,t:"R2",l:2,h:240},{y:240,x:1950,w:60,t:"R4",l:0,h:240}],enemy:[{y:480,x:1290,w:60,t:"w",r:!1,h:60},{y:750,x:510,w:60,t:"w",r:!0,h:60}],name:"R3",item:[{y:90,x:60,w:1800,v:"RB",t:"c",h:30}]},{player:[{y:479,x:30},{y:959,x:1890}],platformLayer:[{y:0,x:0,w:60,t:"p",h:240},{y:480,x:0,w:60,t:"p",h:480},{y:960,x:0,w:1920,t:"p",h:120},{y:0,x:60,w:1800,t:"p",h:60},{y:0,x:1860,w:60,t:"p",h:720},{y:660,x:360,w:1500,t:"p",h:60},{y:480,x:60,w:120,t:"p",h:60},{y:480,x:1620,w:240,t:"p",h:60},{cv:"R4K",y:720,x:1860,w:60,t:"d",h:240},{y:840,x:60,w:120,t:"p",h:120}],portal:[{y:720,x:1950,w:60,t:"R5",l:0,h:240},{y:240,x:-90,w:60,t:"R3",l:1,h:240}],enemy:[{y:630,x:1725,w:90,t:"g",r:!1,h:60}],name:"R4",item:[{y:390,x:1710,w:60,v:"R4K",t:"k",i:"key",h:60},{y:90,x:60,w:1800,v:"RB",t:"c",h:30}]},{player:[{y:959,x:30},{y:959,x:1890}],platformLayer:[{y:0,x:0,w:1920,t:"p",h:60},{y:960,x:0,w:240,t:"p",h:120},{y:960,x:1680,w:240,t:"p",h:120},{y:1020,x:240,w:1440,t:"p",h:60},{y:60,x:0,w:60,t:"p",h:660},{y:60,x:1860,w:60,t:"p",h:660}],portal:[{y:720,x:1950,w:60,t:"R6",l:0,h:240},{y:720,x:-90,w:60,t:"R4",l:1,h:240}],enemy:[{y:1020,x:390,w:60,t:"w",r:!0,h:60},{y:1020,x:1410,w:60,t:"w",r:!1,h:60}],name:"R5",item:[{y:90,x:60,w:1800,v:"RB",t:"c",h:30}]},{player:[{y:959,x:30},{y:959,x:1890}],platformLayer:[{y:0,x:0,w:60,t:"p",h:720},{y:0,x:60,w:1860,t:"p",h:60},{y:60,x:1860,w:60,t:"p",h:660},{y:960,x:0,w:1920,t:"p",h:120}],portal:[{y:720,x:-90,w:60,t:"R5",l:1,h:240},{y:720,x:1950,w:60,t:"R7",l:0,h:240}],enemy:[],name:"R6",item:[{y:840,x:930,w:60,v:"gun",t:"k",i:"gun",h:60},{y:90,x:60,w:1800,v:"RB",t:"c",h:30}]},{player:[{y:959,x:30},{y:1019,x:1890}],platformLayer:[{y:960,x:0,w:810,t:"p",h:120},{y:0,x:0,w:60,t:"p",h:720},{y:0,x:60,w:1800,t:"p",h:60},{y:0,x:1860,w:60,t:"p",h:780},{y:1020,x:1110,w:810,t:"p",h:60},{y:300,x:300,w:1320,t:"p",h:60},{y:360,x:930,w:60,t:"p",h:480},{y:840,x:810,w:300,t:"p",h:240},{y:600,x:60,w:570,t:"p",h:60},{y:600,x:1290,w:570,t:"p",h:60},{y:480,x:1740,w:120,t:"p",h:120},{y:480,x:60,w:120,t:"p",h:120}],portal:[{y:780,x:1950,w:60,t:"R8",l:0,h:240},{y:720,x:-90,w:60,t:"R6",l:1,h:240}],enemy:[{y:300,x:960,w:60,t:"w",r:!0,h:150},{y:600,x:1320,w:60,t:"w",r:!0,h:150},{y:600,x:480,w:60,t:"w",r:!1,h:150},{y:300,x:840,w:60,t:"w",r:!1,h:150}],name:"R7",item:[{y:90,x:60,w:1800,v:"RB",t:"c",h:30}]},{player:[{y:1019,x:30},{y:1019,x:1890},{y:539,x:1890}],platformLayer:[{y:1020,x:0,w:1920,t:"p",h:60},{y:0,x:0,w:60,t:"p",h:780},{y:0,x:60,w:1860,t:"p",h:60},{y:540,x:990,w:930,t:"p",h:60},{y:60,x:1860,w:60,t:"p",h:240},{y:600,x:1860,w:60,t:"p",h:180},{y:720,x:390,w:300,t:"p",h:60}],portal:[{y:780,x:-90,w:60,t:"R7",l:1,h:240},{y:780,x:1950,w:60,t:"R9",l:0,h:240},{y:300,x:1950,w:60,t:"R9",l:1,h:240}],enemy:[{y:540,x:1485,w:90,t:"b",r:!1,h:90}],name:"R8",item:[{y:90,x:60,w:1800,v:"RB",t:"c",h:30}]},{player:[{y:1019,x:30},{y:539,x:30},{y:1019,x:1890}],platformLayer:[{y:0,x:0,w:1920,t:"p",h:60},{y:1020,x:0,w:1920,t:"p",h:60},{y:540,x:0,w:1860,t:"p",h:60},{y:60,x:0,w:60,t:"p",h:240},{y:600,x:0,w:60,t:"p",h:180},{y:60,x:1860,w:60,t:"p",h:720},{cv:"R9K",y:780,x:1860,w:60,t:"d",h:240},{y:960,x:690,w:540,t:"p",h:60}],portal:[{y:300,x:-90,w:60,t:"R8",l:2,h:240},{y:780,x:-90,w:60,t:"R8",l:1,h:240},{y:780,x:1950,w:60,t:"RE",l:0,h:240}],enemy:[{y:540,x:1470,w:60,t:"w",r:!1,h:60},{y:210,x:15,w:90,t:"g",r:!0,h:60},{y:720,x:15,w:90,t:"g",r:!0,h:60},{y:720,x:1725,w:90,t:"g",r:!1,h:60}],name:"R9",item:[{y:450,x:1680,w:60,v:"R9K",t:"k",i:"key",h:60},{y:90,x:60,w:1800,v:"RB",t:"c",h:30}]},{player:[{y:1019,x:30}],platformLayer:[{y:0,x:0,w:1920,t:"p",h:60},{y:60,x:1860,w:60,t:"p",h:1020},{y:1020,x:0,w:1860,t:"p",h:60},{y:60,x:0,w:60,t:"p",h:720}],portal:[{y:780,x:-90,w:60,t:"R9",l:2,h:240}],enemy:[],name:"RE",item:[{y:750,x:870,w:180,v:"RB",t:"k",i:"boss",h:180},{y:90,x:60,w:930,v:"RB",t:"c",h:30},{y:120,x:930,w:60,v:"RB",t:"c",h:630}]},{player:[{y:1019,x:960},{y:1019,x:30},{y:1019,x:1890}],platformLayer:[{y:1020,x:0,w:1920,t:"p",h:60},{y:0,x:0,w:60,t:"p",h:780},{y:0,x:1860,w:60,t:"p",h:780},{y:0,x:60,w:1800,t:"p",h:60},{y:750,x:360,w:330,t:"p",h:60},{y:750,x:1230,w:330,t:"p",h:60},{cv:"RB",y:780,x:0,w:60,t:"d",h:240},{cv:"RB",y:510,x:810,w:300,t:"d",h:30},{cv:"RB",y:270,x:1080,w:30,t:"d",h:240},{cv:"RB",y:240,x:840,w:270,t:"d",h:30},{cv:"LB",y:300,x:870,w:30,t:"d",h:150},{cv:"LB",y:450,x:870,w:150,t:"d",h:30},{cv:"LB",y:330,x:1020,w:30,t:"d",h:150},{cv:"LB",y:300,x:900,w:150,t:"d",h:30},{cv:"RB",y:240,x:810,w:30,t:"d",h:270}],portal:[{y:780,x:-90,w:60,t:"L1",l:0,h:240},{y:780,x:1950,w:60,t:"R1",l:0,h:240}],enemy:[],name:"S",item:[{y:90,x:990,w:30,v:"RB",t:"c",h:150},{y:90,x:900,w:30,v:"LB",t:"c",h:210},{y:90,x:1020,w:840,v:"RB",t:"c",h:30},{y:90,x:60,w:840,v:"LB",t:"c",h:30},{y:360,x:930,w:60,v:"SE",t:"k",i:"end",h:60}]}]},n=function(){},l=function(){this.h={}};l.__interfaces__=[n],l.prototype={set:function(t,h){null!=P[t]?this.setReserved(t,h):this.h[t]=h},get:function(t){return null!=P[t]?this.getReserved(t):this.h[t]},exists:function(t){return null!=P[t]?this.existsReserved(t):this.h.hasOwnProperty(t)},setReserved:function(t,h){null==this.rh&&(this.rh={}),this.rh["$"+t]=h},getReserved:function(t){return null==this.rh?null:this.rh["$"+t]},existsReserved:function(t){return null!=this.rh&&this.rh.hasOwnProperty("$"+t)}};var y=function(t,h,e,i){null==i&&(i=0),null==e&&(e=0),null==h&&(h=0),null==t&&(t=0),this.aabbLeft=t,this.aabbRight=h,this.aabbTop=e,this.aabbBottom=i,this.a=!0};y.moveContact=function(t,h,e,i,s){var a;return a=s>0?e-h:i-t,s>0?Math.min(Math.abs(a),Math.abs(s)):-Math.min(Math.abs(a),Math.abs(s))},y.prototype={checkOverlap:function(t,h,e){return null==e&&(e=0),null==h&&(h=0),!(!this.a||this.x+this.aabbLeft>t.x+t.aabbRight+h||this.x+this.aabbRight<t.x+t.aabbLeft+h||this.y+this.aabbTop>t.y+t.aabbBottom+e||this.y+this.aabbBottom<t.y+t.aabbTop+e)},moveContactX:function(t,h){return y.moveContact(this.x+this.aabbLeft,this.x+this.aabbRight,t.x+t.aabbLeft,t.x+t.aabbRight,h)},moveContactY:function(t,h){return y.moveContact(this.y+this.aabbTop,this.y+this.aabbBottom,t.y+t.aabbTop,t.y+t.aabbBottom,h)}};var o=function(){this.kd=[],window.addEventListener("keydown",e(this,this.onKeyDown)),window.addEventListener("keyup",e(this,this.onKeyUp))};o.prototype={onKeyDown:function(t){t.preventDefault(),this.kd[t.keyCode]=!0},onKeyUp:function(t){t.preventDefault(),this.kd[t.keyCode]=!1},isKeyDown:function(t){return!(this.kd.length<t||!this.kd[t])},getMovement:function(){var t=0;return this.isKeyDown(37)&&(t-=1),this.isKeyDown(39)&&(t+=1),t},getJump:function(){return this.isKeyDown(38)},getShoot:function(){return this.isKeyDown(90)},getGlitch:function(){return this.isKeyDown(88)}};var p=function(t){this.i=new l;for(var h=0;h<t.length;){var e=t[h];++h;var i,s=new Blob([e.d],{type:"image/svg+xml;charset=utf-8"}),a=URL.createObjectURL(s),r=window.document;i=r.createElement("img"),i.src=a,this.i.set(e.n,i)}};p.prototype={get:function(t){return this.i.get(t)}};var w=function(){};w.main=function(){w.canvas=window.document.getElementById("c"),w.c=w.canvas.getContext("2d",null),w.c.imageSmoothingEnabled=!1,w.c.font='30px "Lucida Console", Monaco, monospace',w.c.textAlign="center",w.controls=new o,w.sound=new c(w.r.snd),w.img=new p(w.r.img),w.lvlStop=1,w.fwork=new f,w.state={flags:new l,lvl:"S",spawn:0},w.resetLevel(),w.lms=window.performance.now(),window.requestAnimationFrame(w.step)},w.resetLevel=function(){w.loadLevel(w.state.lvl,w.state.spawn)},w.loadLevel=function(t,h){w.c.fillStyle="black",w.c.fillRect(0,0,w.canvas.width,w.canvas.height),w.cd=w.c.getImageData(0,0,w.canvas.width,w.canvas.height),w.state.lvl=t,w.state.spawn=h;for(var e=0,i=w.r.levels;e<i.length;){var s=i[e];if(++e,s.name==t)return void(w.lvl=new R(s,h))}w.lvl=null},w.step=function(t){var h=Math.min((t-w.lms)/1e3,.041666666666666664);w.lms=t,w.checkStateFlag("SE")&&(w.doClear=!1,w.lvlStop-=h,w.fwork.update(h)),w.doClear&&(w.isClear||(w.c.fillStyle="rgba(0,0,0,0.5)",w.c.fillRect(0,0,w.canvas.width,w.canvas.height),w.cd=w.c.getImageData(0,0,w.canvas.width,w.canvas.height)),w.c.putImageData(w.cd,0,0)),w.isClear=w.doClear,null!=w.lvl&&w.lvlStop>0&&w.lvl.update(h),window.requestAnimationFrame(w.step)},w.checkStateFlag=function(t){return!!w.state.flags.exists(t)&&w.state.flags.get(t)};var c=function(t){this.s=new l,this.v=1;for(var h=0;h<t.length;){var e=t[h];++h;var i,s=jsfxr(e.d),a=window.document;i=a.createElement("audio"),i.src=s,this.s.set(e.n,i)}};c.prototype={play:function(t){this.s.get(t).currentTime=0,this.s.get(t).volume=this.v,this.s.get(t).play()}};var x=function(){},v=function(){this.x=640+640*Math.random(),this.y=1080,this.t=1+2*Math.random();var t=500+500*Math.random(),h=t/this.t,e=3.4+2*Math.random();this.xs=Math.cos(e)*h,this.ys=Math.sin(e)*h,w.sound.play("fwl")};v.__interfaces__=[x],v.prototype={update:function(t,h){if(this.x+=this.xs*t,this.y+=this.ys*t,this.t-=t,this.t<=0){w.sound.play("fwe"),h.f.remove(this);for(var e=10+Math.floor(10*Math.random()),i=0;i<e;){var s=(i++,new u(this.x,this.y));h.f.add(s)}}w.c.beginPath(),w.c.fillStyle="white",w.c.arc(this.x,this.y,10,0,2*Math.PI),w.c.fill()}};var f=function(){this.f=new a,this.t=.3+2*Math.random()};f.prototype={update:function(t){this.t-=t,this.t<=0&&(this.t=.3+2*Math.random(),this.f.add(new v));for(var h=this.f.h,e=null;null!=h;){var i;i=function(t){var i;return e=h[0],h=h[1],i=e}(this),i.update(t,this)}}};var u=function(t,h){this.x=t,this.y=h;var e=Math.random()*(2*Math.PI),i=500+500*Math.random();this.xs=Math.cos(e)*i,this.ys=Math.sin(e)*i,this.g=400*Math.random();var s=Math.floor(7*Math.random());switch(s){case 0:this.c="red";break;case 1:this.c="green";break;case 2:this.c="blue";break;case 3:this.c="pink";break;case 4:this.c="yellow";break;case 5:this.c="purple";break;case 6:this.c="orange";break;default:this.c="white"}};u.__interfaces__=[x],u.prototype={update:function(t,h){this.ys+=this.g*t,this.x+=this.xs*t,this.y+=this.ys*t,(this.x<0||this.x>1920||this.y<0||this.y>1080)&&h.f.remove(this),w.c.beginPath(),w.c.fillStyle=this.c,w.c.arc(this.x,this.y,10,0,2*Math.PI),w.c.fill()}};var d=function(){},m=function(t,h,e,i){y.call(this,-8,8,-8,8),this.x=t,this.y=h,this.xs=e,this.ys=i};m.__interfaces__=[d],m.__super__=y,m.prototype=h(y.prototype,{update:function(t,h){if(this.x+=this.xs*h,this.y+=this.ys*h,this.x+this.aabbRight<0||this.x+this.aabbLeft>w.canvas.width)return void this.destroy(t);for(var e=t.platform.h,i=null;null!=e;){var s;if(s=function(t){var h;return i=e[0],e=e[1],h=i}(this),s.checkOverlap(this))return w.sound.play("wal"),void this.destroy(t)}w.c.save(),w.c.translate(this.x,this.y),w.c.rotate(Math.atan2(this.ys,this.xs)),w.c.drawImage(w.img.get("blt"),0,0,16,16,this.aabbLeft,this.aabbTop,this.aabbRight-this.aabbLeft,this.aabbBottom-this.aabbTop),w.c.restore()},destroy:function(t){}});var g=function(t,h,e,i,s){this.x=t,this.y=h,this.w=e,this.h=i,this.v=s};g.__interfaces__=[d],g.prototype={update:function(t,h){w.checkStateFlag(this.v)?w.c.fillStyle="grey":w.c.fillStyle="orange",w.c.fillRect(this.x,this.y,this.w,this.h)}};var b=function(t,h,e,i){this.x=t,this.y=h,this.xs=e,this.ys=i,this.w=15+30*Math.random(),this.h=15+30*Math.random(),this.t=.5+1.5*Math.random()};b.__interfaces__=[d],b.prototype={update:function(t,h){this.t-=h,this.t<0&&t.pt.remove(this),this.x+=this.xs*h,this.y+=this.ys*h,w.c.fillStyle="orange",w.c.fillRect(this.x,this.y,this.w,this.h)}};var _=function(t,h,e,i){y.call(this,0,e,0,i),this.x=t,this.y=h};_.__interfaces__=[d],_.__super__=y,_.prototype=h(y.prototype,{update:function(t,h){w.c.fillStyle="white",w.c.fillRect(this.x,this.y,this.aabbRight,this.aabbBottom)}});var L=function(t,h,e,i,s){_.call(this,t,h,e,i),this.v=s,this.a=!w.checkStateFlag(s)};L.__super__=_,L.prototype=h(_.prototype,{update:function(t,h){this.a&&(w.c.fillStyle="blue",w.c.fillRect(this.x,this.y,this.aabbRight,this.aabbBottom),this.a=!w.checkStateFlag(this.v))}});var k=function(t,h,e,i,s,a){y.call(this,0,e,0,i),this.x=t,this.y=h,this.v=s,this.i=w.img.get(a),this.a=!w.checkStateFlag(s)};k.__interfaces__=[d],k.__super__=y,k.prototype=h(y.prototype,{update:function(t,h){this.a&&(w.c.drawImage(this.i,0,0,this.i.naturalWidth,this.i.naturalHeight,this.x+this.aabbLeft,this.y+this.aabbTop,this.x+this.aabbRight-(this.x+this.aabbLeft),this.y+this.aabbBottom-(this.y+this.aabbTop)),t.player.checkOverlap(this)&&(w.state.flags.set(this.v,!0),this.a=!1,w.sound.play("key")))}});var R=function(t,h){this.player=new S(t.player[h].x,t.player[h].y),this.platform=new a;for(var e=0,i=t.platformLayer;e<i.length;){var s=i[e];++e;var r=s.t;switch(r){case"p":this.platform.add(new _(s.x,s.y,s.w,s.h));break;case"d":this.platform.add(new L(s.x,s.y,s.w,s.h,s.cv));break;case"s":this.platform.add(new B(s.x,s.y,s.w,s.h,s.r,parseFloat(s.cv)))}}this.portal=[];for(var n=0,l=t.portal;n<l.length;){var y=l[n];++n,this.portal.push(new C(y.x,y.y,y.w,y.h,y.t,y.l))}this.enemy=new a;for(var o=0,p=t.enemy;o<p.length;){var w=p[o];++o;var c=w.t;switch(c){case"w":this.enemy.add(new I(w.x,w.y,w.w,w.h,w.r));break;case"g":this.enemy.add(new E(w.x,w.y,w.w,w.h,w.r));break;case"b":this.enemy.add(new O(w.x,w.y,w.w,w.h,w.r));break;case"k":this.enemy.add(new F(w.x,w.y,w.w,w.h))}}this.item=[];for(var x=0,v=t.item;x<v.length;){var f=v[x];++x;var u=f.t;switch(u){case"k":this.item.push(new k(f.x,f.y,f.w,f.h,f.v,f.i));break;case"c":this.item.push(new g(f.x,f.y,f.w,f.h,f.v))}}this.pt=new a,this.pb=new a,this.eb=new a};R.prototype={update:function(t){for(var h=this.platform.h,e=null;null!=h;){var i;i=function(t){var i;return e=h[0],h=h[1],i=e}(this),i.update(this,t)}for(var s=this.enemy.h,a=null;null!=s;){var r;r=function(t){var h;return a=s[0],s=s[1],h=a}(this),r.update(this,t)}for(var n=0,l=this.item;n<l.length;){var y=l[n];++n,y.update(this,t)}for(var o=this.pb.h,p=null;null!=o;){var w;w=function(t){var h;return p=o[0],o=o[1],h=p}(this),w.update(this,t)}for(var c=this.eb.h,x=null;null!=c;){var v;v=function(t){var h;return x=c[0],c=c[1],h=x}(this),v.update(this,t)}this.player.update(this,t);for(var f=this.pt.h,u=null;null!=f;){var d;d=function(t){var h;return u=f[0],f=f[1],h=u}(this),d.update(this,t)}},createDeathParts:function(t,h,e){for(var i=(t.x+t.aabbRight-(t.x+t.aabbLeft))/15|0,s=(t.y+t.aabbBottom-(t.y+t.aabbTop))/15|0,a=0;a<s;)for(var r=a++,n=t.y+t.aabbTop+15*r,l=0;l<i;){var y=l++,o=t.x+t.aabbLeft+15*y;this.pt.add(new b(o,n,-15+30*Math.random(),-15+30*Math.random()))}}};var M=function(t,h,e,i,s,a){_.call(this,t,h,e,i),s?this.xs=240:this.xs=-240,this.l=a,this.g=!1};M.__super__=_,M.prototype=h(_.prototype,{update:function(t,h){this.g&&w.doClear&&this.aabbRight>this.l&&(this.xs>0&&(this.x+=this.aabbRight-this.l),this.aabbRight=this.l),this.g=!w.doClear,this.aabbRight<this.l||this.g?(this.aabbRight+=Math.abs(this.xs)*h,this.xs<0&&(this.x+=this.xs*h)):this.x+=this.xs*h,_.prototype.update.call(this,t,h),(this.x>w.canvas.width||this.x+this.aabbRight<0)&&t.platform.remove(this)}});var B=function(t,h,e,i,s,a){_.call(this,t,h,e,i),this.r=s,this.l=a,this.c=0};B.__super__=_,B.prototype=h(_.prototype,{update:function(t,h){_.prototype.update.call(this,t,h),this.c-=h,this.c<0&&(this.c=5,t.platform.add(new M(this.x,this.y,this.aabbRight,this.aabbBottom,this.r,this.l)))}});var S=function(t,h){y.call(this,-30,30,-140,0),this.x=t,this.y=h,this.ySpeed=0,this.alive=!0,this.cs=!0,this.fr=!0,this.lt=null};S.__interfaces__=[d],S.__super__=y,S.prototype=h(y.prototype,{update:function(t,h){if(!this.alive)return this.rt+=h,void(this.rt>2&&(w.doClear=!0,w.resetLevel()));this.ySpeed+=2e3*h;var e=!1,i=480*w.controls.getMovement()*h,s=this.ySpeed*h;0!=i&&(this.fr=i>0);for(var a=t.platform.h,r=null;null!=a;){var n;if(n=function(t){var h;return r=a[0],a=a[1],h=r}(this),n.checkOverlap(this,0,s)){if(this.ySpeed>0){e=!0,this.ySpeed>4e3*h&&w.sound.play("lnd");
var l;l=n instanceof M?n:null,null!=l&&(i+=l.xs*h)}this.ySpeed<0&&w.sound.play("bmp"),s=this.moveContactY(n,s),s>0?s-=.2:s+=.2,this.ySpeed=0}n.checkOverlap(this,i)&&(i=this.moveContactX(n,i),Math.abs(i)>2&&w.sound.play("bmp"),i>0?i-=.2:i+=.2)}e&&w.controls.getJump()&&(this.ySpeed=-1100,s+=this.ySpeed*h,w.sound.play("jmp")),this.x+=i,this.y+=s;for(var y=0,o=t.portal;y<o.length;){var p=o[y];++y,p.checkOverlap(this)&&w.loadLevel(p.level,p.spawn)}for(var c=t.enemy.h,x=null;null!=c;){var v;if(v=function(t){var h;return x=c[0],c=c[1],h=x}(this),v.checkOverlap(this))return void this.die(t)}for(var f=t.eb.h,u=null;null!=f;){var d;if(d=function(t){var h;return u=f[0],f=f[1],h=u}(this),d.checkOverlap(this))return void this.die(t)}w.c.drawImage(w.img.get("pla"),this.x+this.aabbLeft,this.y+this.aabbTop),w.c.fillStyle="white",this.tut("[<] Move [>]","hm",0!=i),this.tut("[/\\] Jump","hj",this.ySpeed<0),w.checkStateFlag("gun")&&(w.c.save(),w.c.scale(this.fr?.5:-.5,.5),w.c.drawImage(w.img.get("gun"),2*(this.fr?this.x:-this.x)+40,2*this.y-150),w.c.restore(),this.tut("[Z] Shoot","hs",!this.cs),w.controls.getShoot()?this.cs&&(this.cs=!1,t.pb.add(new z(this.x,this.y-70,this.fr?1e3:-1e3,0)),w.sound.play("sht")):this.cs=!0),w.checkStateFlag("glitch")&&(w.controls.getGlitch()?w.doClear=!1:w.doClear=!0,this.tut("[X] Glitch","hg",w.controls.getGlitch()))},tut:function(t,h,e){w.checkStateFlag(h)||(null!=this.lt&&this.lt!=h||(w.c.fillText(t,this.x,this.y-160),this.lt=h),e&&w.state.flags.set(h,!0))},die:function(t){this.alive=!1,this.rt=0,t.createDeathParts(this,0,0),w.sound.play("die"),w.doClear=!1}});var z=function(t,h,e,i){m.call(this,t,h,e,i)};z.__super__=m,z.prototype=h(m.prototype,{destroy:function(t){t.pb.remove(this)}});var C=function(t,h,e,i,s,a){y.call(this,0,e,0,i),this.x=t,this.y=h,this.level=s,this.spawn=a};C.__super__=y,C.prototype=h(y.prototype,{});var K=function(t,h,e,i){y.call(this,-e/2,e/2,-i,0),this.x=t+e,this.y=h,this.ht=0,this.hp=1};K.__interfaces__=[d],K.__super__=y,K.prototype=h(y.prototype,{update:function(t,h){for(var e=t.pb.h,i=null;null!=e;){var s;s=function(t){var h;return i=e[0],e=e[1],h=i}(this),s.checkOverlap(this)&&(t.pb.remove(s),this.hp--,this.ht=.2,w.sound.play("hit"))}0==this.hp&&(t.createDeathParts(this,0,0),t.enemy.remove(this),w.sound.play("eki")),this.ht>0&&(this.ht-=h),this.draw()},draw:function(){this.ht>0?w.c.fillStyle="white":w.c.fillStyle="red",w.c.fillRect(this.x+this.aabbLeft,this.y+this.aabbTop,this.x+this.aabbRight-(this.x+this.aabbLeft),this.y+this.aabbBottom-(this.y+this.aabbTop))}});var T=function(t,h,e,i){m.call(this,t,h,e,i)};T.__super__=m,T.prototype=h(m.prototype,{destroy:function(t){t.eb.remove(this)}});var D=function(t,h,e,i){T.call(this,t,h,e,i)};D.__super__=T,D.prototype=h(T.prototype,{update:function(t,h){this.ys+=700*h,T.prototype.update.call(this,t,h)}});var I=function(t,h,e,i,s){K.call(this,t,h,e,i),this.r=s,this.xs=400,this.hp=2,i>e?this.i="wlkt":this.i="wlk"};I.__super__=K,I.prototype=h(K.prototype,{update:function(t,h){K.prototype.update.call(this,t,h);var e=this.xs*h;this.r||(e=-e);for(var i=!0,s=t.platform.h,a=null;null!=s;){var r;if(r=function(t){var h;return a=s[0],s=s[1],h=a}(this),r.checkOverlap(this,e>0?e-2*this.aabbLeft:e-2*this.aabbRight,10)&&(i=!1),r.checkOverlap(this,e,-1)){this.r=e<0,e=this.moveContactX(r,e);break}}i&&(this.r=!this.r),this.x+this.aabbLeft+e<30&&(e=this.x+this.aabbLeft-30,this.r=!0),this.x+this.aabbRight+e>w.canvas.width-30&&(e=w.canvas.width-30-(this.x+this.aabbRight),this.r=!1),this.x+=e},draw:function(){w.c.drawImage(w.img.get(this.ht>0?this.i+"_h":this.i),this.x+this.aabbLeft,this.y+this.aabbTop)}});var O=function(t,h,e,i,s){I.call(this,t,h,e,i,s),this.t=3,this.hp=4};O.__super__=I,O.prototype=h(I.prototype,{update:function(t,h){if(I.prototype.update.call(this,t,h),this.t-=h,this.t<.5&&(this.xs=0),this.t<0){this.xs=400,this.t=3;for(var e=0;e<5;){var i=e++,s=Math.PI+Math.PI/4*i;t.eb.add(new D(this.x,this.y+this.aabbTop,500*Math.cos(s),500*Math.sin(s)))}w.sound.play("bst")}},draw:function(){w.c.drawImage(w.img.get(this.ht>0?"bst_h":"bst"),this.x+this.aabbLeft,this.y+this.aabbTop)}});var E=function(t,h,e,i,s){K.call(this,t,h,e,i),this.r=s,this.hp=10,this.d=.5};E.__super__=K,E.prototype=h(K.prototype,{update:function(t,h){K.prototype.update.call(this,t,h),this.d-=h,this.d<=0&&(this.d=1.5,t.eb.add(new T(this.x,this.y+this.aabbTop/2,this.r?500:-500,0)),w.sound.play("esh"))},draw:function(){w.c.save(),this.r||w.c.scale(-1,1),w.c.drawImage(w.img.get(this.ht>0?"sht_h":"sht"),(this.r?this.x:-this.x)+this.aabbLeft,this.y+this.aabbTop),w.c.restore()}});var F=function(t,h,e,i){K.call(this,t,h,e,i),this.hp=1e3};F.__super__=K,F.prototype=h(K.prototype,{});var H=0,P={},q=new s;window.jsfxr=function(t){q._params.setSettings(t);var h=q.totalReset(),e=new Uint8Array(4*((h+1)/2|0)+44),i=2*q.synthWave(new Uint16Array(e.buffer,44),h),s=new Uint32Array(e.buffer,0,44);s[0]=1179011410,s[1]=i+36,s[2]=1163280727,s[3]=544501094,s[4]=16,s[5]=65537,s[6]=44100,s[7]=88200,s[8]=1048578,s[9]=1635017060,s[10]=i,i+=44;for(var a=0,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="data:audio/wav;base64,";a<i;a+=3){var l=e[a]<<16|e[a+1]<<8|e[a+2];n+=r[l>>18]+r[l>>12&63]+r[l>>6&63]+r[63&l]}return n},w.r=new r,w.doClear=!0,w.isClear=!0,w.main()}("undefined"!=typeof console?console:{log:function(){}})</script>