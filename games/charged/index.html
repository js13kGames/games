<!doctype html><meta content="width=device-width" name=viewport><style>canvas{height:512px;image-rendering:-moz-crisp-edges;image-rendering:-webkit-crisp-edges;image-rendering:pixelated;image-rendering:crisp-edges;width:512px}</style><script>!function(t){var e={};function s(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(i,a,function(e){return t[e]}.bind(null,a));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=3)}([function(t,e){var s=0;e.int=function(t){return function(){var t=1e4*Math.sin(.8765111159592828+s++);return t-Math.floor(t)}()*(t||268435455)|0},e.range=function(t,e){return this.int(e-t)+t}},function(t,e,s){},,function(t,e,s){"use strict";s.r(e);var i=a();function a(){return window.performance&&window.performance.now?window.performance.now():Date.now()}function n(t){return window.requestAnimationFrame((function(){var e=a(),s=e-i;s>999?s=1/60:s/=1e3,i=e,t(s)}))}const h=(t,e,s)=>{const i=t.findIndex((t=>0===t.team&&t.world===e)),a=t.filter((t=>1===t.team&&t.world===e));if(i>-1&&a.length>0&&!t[i].invincible)for(let e=0;e<a.length;e++)if(a[e].name){if(a[e].name===s&&r(t[i],a[e]))return[t[i].id,a[e].id]}else if(r(t[i],a[e]))return[t[i].id,a[e].id];return!1};function r(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}var o=s(0),l=s.n(o),d={world:4,team:2,sprite:"e_t.png"},p={world:4,team:2,sprite:"e_ff.png"},c={world:4,team:2,sprite:"oo.png"},g={world:4,team:2,sprite:"b.png"},m={world:0,team:0,sprite:"h_c.png"},w={world:0,team:1,sprite:"c.png"},u={isGrounded:!0,world:1,team:0,sprite:"h.png"},f={world:1,team:1,sprite:"o_e.png"},y={world:1,team:1,sprite:"o_m.png"},v={world:1,team:1,sprite:"o_p.png"},S={world:2,team:2,order:2,sprite:"2_p.png"},b={world:2,team:2,sprite:"2_a.png"},x={world:2,team:2,order:1},I={world:2,team:2,sprite:"2_b.png"},O={world:2,team:2,sprite:"2_h.png"},R={world:2,team:2,sprite:"2_r.png"},T={world:2,team:2,sprite:"2_m.png"},j={world:2,team:1,name:"LEFT",sprite:"a.png"},E={world:2,team:1,name:"UP",sprite:"a_u.png"},P={world:2,team:1,name:"RIGHT",sprite:"a_r.png"},F={world:2,width:2,height:9,team:0},C={width:54,height:8,hit:40,team:1,world:3},W={world:3,width:64,height:3,team:0};class H{constructor(){const t=arguments[0];this.id=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(t=>(t^window.crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))),this.x=0,this.y=0,this.width=9,this.height=9,this.loaded=!1,this.destroyed=!1,this.world=t.world,this.order=0,this.show=!0,this.invincible=!1,this.invincibleTimer=3e3,this.frequency=200,this.words=[],t.hasOwnProperty("team")&&(this.team=t.team),t.hasOwnProperty("name")&&(this.name=t.name),t.hasOwnProperty("width")&&t.hasOwnProperty("width")&&(this.width=t.width,this.height=t.height),t.hasOwnProperty("order")&&(this.order=t.order),arguments[1]&&arguments[2]&&(this.x=arguments[1],this.y=arguments[2]),t.sprite&&(this.image=new Image,this.image.src=t.sprite,this.image.onload=()=>{this.loaded=!0})}getHit(){this.invincible=!0,setTimeout((()=>{this.invincible=!1}),this.invincibleTimer)}}const _=(t,e)=>{window.addEventListener("keydown",(function(s){s.keyCode===e&&t()}),!1)},U=t=>_(t,38),A=t=>_(t,40),L=t=>_(t,37),k=t=>_(t,39);var B=class{constructor(t,e){this.gameObjects=t,this.gameState=e,this.spawnRef,this.world=0,this.state=-1,this.baseSpeed=10,this.speedInterval=10,this.baseSpawn=400*this.baseSpeed,this.spawnInterval=10*this.getSpeed(),this.spawnFloor=600,this.spawnVariance=300,this.speedVariance=0,this.gameEnded=!1}destroy(t){let e=this.gameObjects.findIndex((e=>e.id===t));if(e>-1)return this.gameObjects.splice(e,1)}find(t){let e=this.gameObjects.findIndex((e=>e.id===t));return e>-1?this.gameObjects[e]:null}spawn(t,e,s){let i=new H(t,e,s);return this.gameObjects.push(i),i}setSpawnInteval(t){this.spawnRef=setInterval((()=>{t()}),this.getSpawnTime())}end(){if(this.gameEnded)return null;this.gameEnded=!0;let{spawnRef:t,gameObjects:e,world:s,state:i}=this;t&&clearInterval(t),i=-1,e=[]}destroyOutOfBound(){const{gameObjects:t,gameState:e}=this;t.forEach(((e,s)=>{(e.x<-10||e.x>138||e.y<-10||e.y>154)&&t.splice(s,1)}))}getHero(){const{gameObjects:t,world:e}=this,s=t.findIndex((t=>t.world===e&&0===t.team));return s>-1?t[s]:null}getSpawnTime(){const{baseSpawn:t,spawnInterval:e,spawnFloor:s,gameState:i,spawnVariance:a}=this;let n=t-e*i.level;return n=n<s?s:n,l.a.range(n,n+a)}getSpeed(){return this.baseSpeed+this.speedInterval*this.gameState.level}moveEnemies(t,e,s){const{gameObjects:i,world:a}=this;i.forEach((i=>{i.world===a&&1===i.team&&(i.x+=this.getSpeed()*t*e,i.y+=this.getSpeed()*t*s)}))}},G="#9e1111",X="#a8a6a6";const M=document.createElement("canvas");M.width=128,M.height=144,M.style.backgroundColor="#000",document.body.appendChild(M);const J=M.getContext("2d");let V=[new H(g,102,-1)];const Y=new class{constructor(){this.UIHeight=16,this.gameWidth=128,this.gameHeight=128,this.health=0,this.activeWorld=[-1],this.ending=0,this.gameTimer=0,this.startTimestamp,this.worldUpdateTimestamp,this.endingTimestamp,this.endingTime=2e3,this.fadeInTimestamp,this.fadeInTime=4e3,this.endingShowTimestamp,this.endingShowTime=12e3,this.ended=!1,this.level=5,this.baseLevel=5,this.changeInterval=[6e3,5e3,4e3,3e3],this.levelOrder=[[0],[1],[3],[2]],this.currOrder=0,this.advancedOrder=[[2],[1,3]],this.changeRef,this.levelRef}initialise(){this.reset(),U((()=>this.start())),A((()=>this.start())),L((()=>this.start())),k((()=>this.start()))}reset(){this.levelRef&&clearInterval(this.levelRef),this.health=3,this.activeWorld=[-1],this.ending=0,this.ended=!1,this.startTimestamp=0,this.worldUpdateTimestamp=null,this.endingTimestamp=null,this.fadeInTimestamp=null,this.endingShowTimestamp=null,this.level=this.baseLevel}start(){this.activeWorld.includes(-1)&&(this.startTimestamp=a(),this.worldUpdateTimestamp=a(),this.activeWorld=[0],this.levelRef=setInterval((()=>{this.level++}),2e4))}getLevel(){let{level:t,baseLevel:e,levelOrder:s,advancedOrder:i}=this;return 3===this.currOrder?this.currOrder=0:this.currOrder++,t-e<4?s[this.currOrder]:i[this.currOrder]}getInterval(){const{level:t,baseLevel:e,changeInterval:s}=this;return t-e>3?s[3]:t-e>-1?s[t-e]:s[0]}getProgress(){let t=(a()-this.startTimestamp)/9e4*100;return Math.round(t)}getTimeProgress(t,e){return(a()-e)/t}getEndingProgress(){return this.getTimeProgress(this.endingTime,this.endingTimestamp)}getFadeInProgress(){return this.getTimeProgress(this.fadeInTime,this.fadeInTimestamp)}getBeforeResetProgress(){return this.getTimeProgress(this.endingShowTime,this.endingShowTimestamp)}update(){this.worldUpdateTimestamp&&a()-this.worldUpdateTimestamp>this.getInterval()&&(this.worldUpdateTimestamp=a(),this.activeWorld=this.getLevel()||[l.a.range(0,4)]),this.getProgress()>100&&!this.ended&&this.end(2),this.health<0&&!this.ended&&(this.getProgress()>50?this.end(1):this.end(0))}end(t){this.levelRef&&clearInterval(this.levelRef),this.activeWorld=[-2],this.ending=t,this.ended=!0,this.endingTimestamp=a(),this.endingShowTimestamp=a()}},D=new class extends B{constructor(t,e){super(t,e),this.baseSpawn=400*this.baseSpeed,this.spawnInterval=10*this.getSpeed(),this.spawnFloor=600,this.yInterval=15,this.ySpawn=[1,2,3].map((t=>t*this.yInterval)).map((t=>t+16)),this.xSpawn=70,this.heroX=8,this.world=0}start(){const{heroX:t,ySpawn:e}=this;this.state=1,this.spawn(m,t,e[1]),this.setSpawnInteval((()=>this.spawnCar())),U((()=>this.goUp())),A((()=>this.goDown()))}update(t){const{state:e,world:s,gameObjects:i,gameState:a}=this;if(a.ended)this.end();else if(1===e&&a.activeWorld.includes(s)){null===this.spawnRef&&this.setSpawnInteval((()=>this.spawnCar())),this.moveEnemies(t,-1,0);let e=h(i,s);e&&(this.gameState.health--,this.destroy(e[1]))}else this.spawnRef&&(clearInterval(this.spawnRef),this.gameObjects.forEach(((t,e)=>{t.world===s&&1===t.team&&this.gameObjects.splice(e,1)})),this.spawnRef=null);this.destroyOutOfBound()}goUp(){const{ySpawn:t,yInterval:e,state:s,gameState:i,world:a}=this;if(1===s&&i.activeWorld.includes(a)){const s=this.getHero();s&&s.y>t[0]&&(s.y-=e)}}goDown(){const{ySpawn:t,yInterval:e,state:s,gameState:i,world:a}=this;if(1===s&&i.activeWorld.includes(a)){const s=this.getHero();s&&s.y<t[2]&&(s.y+=e)}}spawnCar(){const{ySpawn:t,xSpawn:e,gameState:s}=this,i=l.a.int(3);if(s.level-s.baseLevel>0){var a=[...t];a.splice(i,1),this.spawn(w,e,a[0]),this.spawn(w,e,a[1])}else this.spawn(w,e,t[i])}}(V,Y),N=new class extends B{constructor(t,e){super(t,e),this.world=1,this.level=5,this.xSpawn=138,this.ySpawn=61,this.heroX=72,this.isJumping=!1,this.jumpFrames=16,this.jumpFrameCount=0,this.dropFrameCount=0,this.jumpForce=120,this.gravity=50,this.isGrounded=!0,this.jumpCount=0,this.spawnFloor=700}start(){const{heroX:t,ySpawn:e}=this;this.state=1,this.spawn(u,t,e),this.setSpawnInteval((()=>this.spawnObstacles())),U((()=>this.jump()))}update(t){const{state:e,world:s,gameObjects:i,gameState:a}=this;if(a.ended)this.end();else if(1===e&&a.activeWorld.includes(s)){null===this.spawnRef&&this.setSpawnInteval((()=>this.spawnObstacles())),this.moveEnemies(t,-1,0),this.updateHero(t);let e=h(i,s);e&&(this.gameState.health--,this.destroy(e[1]))}else this.isJumping=!1,this.jumpFrameCount=0,this.dropFrameCount=0,this.jumpCount=0,this.spawnRef&&(clearInterval(this.spawnRef),this.gameObjects.forEach(((t,e)=>{t.world===s&&1===t.team&&this.gameObjects.splice(e,1)})),this.spawnRef=null);this.destroyOutOfBound()}jump(){this.jumpCount<2&&(this.isJumping=!0,this.jumpFrameCount=0,this.dropFrameCount=0,this.jumpCount++)}updateHero(t){let e=this.getHero();e&&(this.isJumping&&this.jumpFrameCount<this.jumpFrames?(e.y-=(this.jumpForce-3*this.jumpFrameCount)*t,this.jumpFrameCount++):this.heroIsGrounded()||(e.y+=(this.gravity+3*this.dropFrameCount)*t,this.dropFrameCount++),this.isJumping&&this.heroIsGrounded()&&(this.isJumping=!1,this.jumpFrameCount=0,this.dropFrameCount=0,this.jumpCount=0),this.isJumping||e.y>this.ySpawn&&(e.y=this.ySpawn))}heroIsGrounded(){let t=this.getHero();if(t)return t.y>this.ySpawn}spawnObstacles(){const{xSpawn:t,ySpawn:e}=this;let s=l.a.int(3);0===s&&this.spawn(f,t,e),1===s&&this.spawn(y,t,e),2===s&&this.spawn(v,t,e)}}(V,Y),q=new class extends B{constructor(t,e){super(t,e),this.world=3,this.level=5,this.xSpawn=70,this.ySpawn=154,this.heroX=72,this.isReady=!0,this.cooldown=300,this.lastInput,this.hitbox,this.spawnFloor=327,this.spawnVariance=450,this.speedVariance=0}start(){const{heroX:t,ySpawn:e}=this;this.state=1;let s=this.spawn(P,64,this.ySpawn-50);s.team=3,s.world=this.world,this.hitbox=this.spawn(W,64,this.ySpawn-50),this.hitbox.team=0,this.hitbox.invincible=!0,this.setSpawnInteval((()=>this.spawnTodos())),k((()=>this.input()))}update(t){const{state:e,world:s,gameObjects:i,gameState:a}=this;if(a.ended)this.end();else if(1===e&&a.activeWorld.includes(s)){null===this.spawnRef&&this.setSpawnInteval((()=>this.spawnTodos())),this.moveEnemies(t,0,-1);let e=h(i,s);if(this.destroy(),e){let t=this.find(e[1]);t&&(t.destroyed=!0)}}else this.spawnRef&&(clearInterval(this.spawnRef),this.gameObjects.forEach(((t,e)=>{t.world===s&&1===t.team&&this.gameObjects.splice(e,1)})),this.spawnRef=null);this.destroyOutOfBound()}input(){this.isReady&&(this.isReady=!1,this.hitbox.invincible=!1,setTimeout((()=>{this.isReady=!0}),this.cooldown),setTimeout((()=>{this.hitbox.invincible=!0}),200))}spawnTodos(){const{xSpawn:t,ySpawn:e}=this;let s=this.spawn(C,t,e);const i=l.a.range(3,8);for(let t=0;t<i;t++)t%2==0?s.words.push(l.a.range(1,4)):s.words.push(l.a.range(4,8))}destroyOutOfBound(){const{gameObjects:t,gameState:e,world:s}=this;t.forEach(((i,a)=>{i.world===s&&(i.x<-100||i.x>228||i.y<80||i.y>244)&&(i.destroyed||e.health--,t.splice(a,1))}))}}(V,Y),z=new class extends B{constructor(t,e){super(t,e),this.world=2,this.level=5,this.xSpawn=70,this.ySpawn=86,this.personY=115,this.personX=-1,this.state=1,this.handX=9,this.handY=128,this.handMoveTime=l.a.range(600,1500),this.handRef,this.lightRef,this.isReady=!0,this.spawnFloor=870,this.cooldown=300,this.lastInput,this.hitbox}start(){this.spawn(S,-1,this.personY),this.hitbox=this.spawn(F,10,this.ySpawn-1),this.hitbox.invincible=!0;let t=this.spawn(x,0,22),e=this.spawn(b,this.handX,this.handY);this.moveHand(e),this.changeLightIntensity(t),this.setSpawnInteval((()=>this.spawnNotes())),U((()=>this.input("UP"))),L((()=>this.input("LEFT"))),k((()=>this.input("RIGHT")))}update(t){const{state:e,world:s,gameObjects:i,lastInput:a,gameState:n}=this;if(n.ended)this.end();else if(1===e&&n.activeWorld.includes(s)){null===this.spawnRef&&this.setSpawnInteval((()=>this.spawnNotes())),this.moveEnemies(t,-1,0);let e=h(i,s,a);e&&(this.spawnEmote(a),this.destroy(e[1]))}else this.spawnRef&&(clearInterval(this.spawnRef),this.gameObjects.forEach(((t,e)=>{t.world===s&&1===t.team&&this.gameObjects.splice(e,1)})),this.spawnRef=null);this.destroyOutOfBound()}input(t){this.gameState.activeWorld.includes(this.world)&&this.isReady&&(this.lastInput=t,this.isReady=!1,this.hitbox.invincible=!1,setTimeout((()=>{this.isReady=!0,this.lastInput=null}),this.cooldown),setTimeout((()=>{this.hitbox.invincible=!0}),200))}spawnEmote(t){const e=[28,this.ySpawn+19];let s,i=this.spawn(I,e[0],e[1]);"LEFT"===t&&(s=this.spawn(R,e[0]+4,e[1]+3)),"UP"===t&&(s=this.spawn(O,e[0]+4,e[1]+3)),"RIGHT"===t&&(s=this.spawn(T,e[0]+4,e[1]+3)),setTimeout((()=>{this.destroy(i.id),this.destroy(s.id)}),500)}moveHand(t){this.handRef=setInterval((()=>{t.y=this.handY+l.a.range(-1,2)}),1e3)}spawnNotes(){const{xSpawn:t,ySpawn:e}=this;let s=l.a.int(3);0===s&&this.spawn(j,t,e),1===s&&this.spawn(E,t,e),2===s&&this.spawn(P,t,e)}changeLightIntensity(t){this.handRef=setInterval((()=>{t.y=l.a.range(22,45)}),2e3)}destroyOutOfBound(){const{gameObjects:t,gameState:e,world:s}=this;t.forEach(((i,a)=>{i.world===s&&(i.x<-10||i.x>138||i.y<-10||i.y>154)&&(e.health--,t.splice(a,1))}))}}(V,Y),K=new class{constructor(t,e,s,i){this.opening=new H(c,0,0),this.normalEnding=new H(p,0,0),this.trueEnding=new H(d,0,0),this.ctx=t,this.canvas=i,this.gameObjects=e,this.gameState=s,this.UIHeight=16,this.gameHeight=128,this.gameWidth=128,this.battery,this.showEnding=!1;const{UIHeight:a,gameHeight:n,gameWidth:h}=this;this.worldRect=[[0,a,h/2,n/2],[h/2,a,h/2,n/2],[0,a+n/2,h/2,n/2],[h/2,a+n/2,h/2,n/2]]}render(){let{gameState:t,gameObjects:e,ctx:s,canvas:i}=this;s.clearRect(0,0,i.width,i.height),t.activeWorld.includes(-1)&&!t.ended?this.renderStartScreen():t.ended?t.ended&&this.renderEnding():(s.fillStyle="#424a70",s.fillRect(0,16,i.width,i.height),this.renderWorld(e,0,t.activeWorld),this.renderWorld(e,1,t.activeWorld),this.renderWorld(e,2,t.activeWorld),this.renderWorld(e,3,t.activeWorld),this.renderUI(e))}renderUI(t){const{health:e,level:s,startTimestamp:i}=this.gameState;t.filter((t=>4===t.world)).forEach((t=>{t.loaded&&this.ctx.drawImage(t.image,t.x,t.y);for(let s=0;s<=e;s++){this.ctx.fillStyle=0===e?G:X;let i=5;0===s?this.ctx.fillRect(t.x+3,t.y+3,i-4,11):this.ctx.fillRect(t.x-1+s*i,t.y+3,i+3,11)}})),i&&(this.ctx.fillStyle=X,this.ctx.font="12px Arial",this.ctx.fillText(this.gameState.getProgress(i)+"%",1,12))}renderTodo(t){const{ctx:e}=this;e.fillStyle=X,e.fillRect(t.x,t.y,t.width,t.height),e.fillStyle=G,e.fillRect(t.x+3,t.y+2,4,4),e.fillStyle=X,e.fillRect(t.x+3+1,t.y+2+1,2,2),e.fillStyle="#6a6a6b";const s=l.a.range(4,6);if(0===t.words.length){for(let e=3;e<s+3;e++)e%2==0?t.words.push(l.a.range(5,7)):t.words.push(l.a.range(8,16));console.log(t.words)}let i=0;t.words.forEach((s=>{e.fillRect(t.x+9+i,t.y+2,1.5*s,4),i+=s+2})),t.destroyed&&(e.fillStyle=G,e.fillRect(t.x+8,t.y+3,40,2))}renderHitbox(t){const{ctx:e}=this;t.invincible&&(e.globalAlpha=.5),e.fillStyle="white",e.fillRect(t.x,t.y,t.width,t.height),e.globalAlpha=1}renderWorld(t,e,s){let{ctx:i,worldRect:a,canvas:n}=this;i.globalCompositeOperation="source-over",i.save(),i.beginPath(),i.strokeStyle="transparent",i.rect(...a[e]),i.stroke(),i.clip(),t.filter((t=>t.world===e)).forEach((t=>{3!==t.world&&2!==t.world&&t.loaded&&i.drawImage(t.image,t.x,t.y),3===t.world&&(t.loaded?i.drawImage(t.image,t.x,t.y):(1===t.team&&this.renderTodo(t),3===t.team&&this.renderHitbox(t))),2===t.world&&(2===t.order&&i.drawImage(t.image,t.x,t.y),1!==t.order||t.loaded||this.renderLight(t),0===t.order&&(t.loaded?i.drawImage(t.image,t.x,t.y):this.renderHitbox(t)))})),i.restore(),i.globalCompositeOperation="source-over",s&&(i.globalAlpha=this.gameState.activeWorld.includes(e)?0:.8),i.fillStyle="black",i.fillRect(...a[e]),i.globalAlpha=1}renderLight(t){const{ctx:e,worldRect:s}=this;e.globalAlpha=.5;let i=e.createRadialGradient(13,140,t.y/2,13,140,t.y);i.addColorStop(0,"#a7c3f2"),i.addColorStop(1,"transparent"),e.fillStyle=i,e.fillRect(...s[2]),e.globalAlpha=1}renderStartScreen(){this.opening.loaded&&this.ctx.drawImage(this.opening.image,0,0)}renderEnding(){this.ctx.fillStyle="black",this.ctx.fillRect(0,16,this.canvas.width,this.canvas.height),this.battery||(this.battery=new H(g,64,80)),this.battery.loaded&&!this.showEnding&&(this.ctx.globalAlpha=1-this.gameState.getEndingProgress(),this.ctx.drawImage(this.battery.image,50,64)),this.gameState.getEndingProgress()>1&&(this.showEnding=!0,this.ctx.globalAlpha=1,this.ctx.fillStyle="black",this.ctx.fillRect(0,0,128,144),this.ctx.globalAlpha=0,this.gameState.fadeInTimestamp||(this.gameState.fadeInTimestamp=a()),0===this.gameState.ending&&(this.gameState.getFadeInProgress()<1?this.ctx.globalAlpha=this.gameState.getFadeInProgress():this.ctx.globalAlpha=1,this.gameState.getTimeProgress(3500,this.gameState.endingShowTimestamp)>1&&this.renderStartScreen()),1===this.gameState.ending&&this.renderEnd(this.normalEnding.image),2===this.gameState.ending&&this.renderEnd(this.trueEnding.image))}renderEnd(t){this.gameState.getFadeInProgress()<1?this.ctx.globalAlpha=this.gameState.getFadeInProgress():this.ctx.globalAlpha=1,this.ctx.drawImage(t,0,0),this.gameState.getBeforeResetProgress()>1&&(this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height+16),this.renderStartScreen())}reset(){this.battery,this.showEnding=!1}}(J,V,Y,M);window.addEventListener("keydown",(function(t){K.showEnding&&(V=[new H(g,102,-1)],Y.initialise(),K.reset())}),!1),Y.initialise(),D.start(),N.start(),q.start(),z.start(),n((function t(e){(function(t){D.update(t),N.update(t),q.update(t),z.update(t),Y.update(),K.render()})(e),n(t)})),s(1)}])</script>