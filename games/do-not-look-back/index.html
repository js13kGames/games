<title>Don't Look Back - js13kGames 2019</title><meta content=$coil.xrptipbot.com/YxnhhCJsSNeshBUvGzp0Hw name=monetization><script src=/2019/webxr/aframe.js></script><script>AFRAME.registerComponent("screen-manager",{schema:{},init(){this.el.addState("title-screen"),this.titleEl=this.el.querySelector("#title"),this.startButtonEl=this.el.querySelector("#start-button"),this.endEl=this.el.querySelector("#end"),this.timerEl=this.el.querySelector("#timer"),this.shotsEl=this.el.querySelector("#shots"),this.chickenEls=Array.from(this.el.querySelectorAll(".chicken")),this.outlawEls=Array.from(this.el.querySelectorAll(".outlaw:not(.coil)")),this.onGameStart=AFRAME.utils.bind(this.onGameStart,this),this.onStateRemoved=AFRAME.utils.bind(this.onStateRemoved,this),this.onShotFired=AFRAME.utils.bind(this.onShotFired,this),this.addExtraContent=AFRAME.utils.bind(this.addExtraContent,this),this.startButtonEl.addEventListener("mouseenter",this.onGameStart),this.outlawEls.forEach((function(t){t.addEventListener("stateremoved",this.onShotFired)})),document.monetization&&("started"===document.monetization.state?this.addExtraContent():"pending"===document.monetization.state&&document.monetization.addEventListener("monetizationstart",this.addExtraContent))},onGameStart(){this.startButtonEl.removeEventListener("mouseenter",this.onGameStart),this.el.addState("game-screen"),this.el.removeState("title-screen"),this.elapsedTime=0,this.shotsFired=0,[this.titleEl,...this.chickenEls].forEach((t=>{t.setAttribute("visible",!1)})),[this.timerEl,this.shotsEl,...this.outlawEls].forEach((t=>{t.setAttribute("visible",!0)})),this.outlawEls.forEach((t=>{t.object3D.position.y+=101}))},tick(t,e){if(this.el.is("game-screen")){this.elapsedTime+=e/1e3;const t=Math.floor(this.elapsedTime/60),i=Math.floor(this.elapsedTime-t);this.timerEl.setAttribute("value",`time\n${t}:${10>i?"0":""}${i}`),this.outlawEls.find((t=>t.is("up")))||(this.el.removeState("game-screen"),this.el.addState("end-screen"),this.endEl.setAttribute("visible",!0))}},onShotFired(){this.shotsFired||(this.startButtonEl.setAttribute("visible",!1),this.startButtonEl.object3D.position.y-=100),this.shotsFired+=1,this.shotsEl.setAttribute("value",`shots\n${this.shotsFired}`)},addExtraContent(){this.outlawEls=Array.from(this.el.querySelectorAll(".outlaw")),this.startButtonEl.setAttribute("value","Oh boy, you looked back!\nNow the outlaws are after you.\nI sure hope you're a fast gun, cowboy Coil!"),this.endEl.setAttribute("value","You survived, cowboy Coil!\n\nYou really are the fastest gun\nin the whole wild West!")}}),AFRAME.registerComponent("target",{schema:{height:{type:"number"},revive:{default:"#null.null",type:"selectorAll"},texture:{type:"string"},width:{type:"number"}},init(){this.isOutlaw=this.el.getDOMAttribute("class").includes("outlaw"),this.el.addState("up"),this.targetEl=document.createElement("a-plane"),this.targetEl.setAttribute("material",{alphaTest:.5}),this.targetEl.setAttribute("src",this.data.texture),this.targetEl.setAttribute("width",this.data.width),this.targetEl.setAttribute("height",this.data.height),this.targetEl.object3D.position.set(0,this.data.height/2,0),this.el.appendChild(this.targetEl),this.onShot=AFRAME.utils.bind(this.onShot,this),this.onDeadOrAlive=AFRAME.utils.bind(this.onDeadOrAlive,this),this.onRevive=AFRAME.utils.bind(this.onRevive,this),this.el.addEventListener("mouseenter",this.onShot)},onShot(){if(this.el.is("up")){this.el.removeState("up");const t={from:0,dur:800};if(this.el.components.animation){const e=this.el.components.animation.animation;t.dur-=e.currentTime,t.from=e.animations[0].currentValue}this.el.setAttribute("animation",{...t,property:"object3D.rotation.x",to:-90,easing:"easeOutElastic",elasticity:800}),this.el.addEventListener("animationcomplete",this.onDeadOrAlive),this.data.revive.forEach((t=>{t.components.target.onRevive()})),this.isOutlaw&&this.el.sceneEl.components["screen-manager"].onShotFired()}},onDeadOrAlive(){this.el.removeAttribute("animation"),this.el.removeEventListener("animationcomplete",this.onDeadOrAlive)},onRevive(){if(!this.el.is("up")){this.el.addState("up");const t={from:-90,dur:800};if(this.el.components.animation){const e=this.el.components.animation.animation;t.dur-=e.currentTime,t.from=e.animations[0].currentValue}this.el.setAttribute("animation",{...t,property:"object3D.rotation.x",to:0,easing:"easeOutElastic",elasticity:800}),this.el.addEventListener("animationcomplete",this.onDeadOrAlive)}}})</script><body><a-scene loading-screen="dotsColor: white; backgroundColor: #663931" screen-manager><a-entity position="0 2.7 -6" id=title><a-text align=center color=black font=mozillavr position="0 0 0" value="Don't look back!" scale="3 3 1" animation="property: rotation; from: -2 -5 -1; to: 2 5 1; dur: 2000; loop: true; dir: alternate; easing: easeInOutQuad"></a-text><a-text align=center color=black font=roboto position="0 -1 0" value="a JS13KGAMES 2019 game\nby Jerome Lecomte" scale="0.75 0.75 1"></a-text></a-entity><a-text align=center color=black font=mozillavr position="0 1.5 5" value="Oh boy, you looked back!\nNow the outlaws are after you.\nI sure hope you're a fast gun, cowboy!" id=start-button visible=true geometry="primitive:plane; width: 3; height: 1" material="opacity: 0" rotation="0 180 0"></a-text><a-camera look-controls position="0 2 0"><a-text align=center color=black font=mozillavr position="0 0 -1" value="You survived, cowboy!\n\nYou really are the fastest gun\nin the whole wild West!" scale="0.25 0.25 1" id=end visible=false></a-text><a-text align=left color=black font=mozillavr position="-0.3 -0.3 -1" value=time\n0:00 scale="0.25 0.25 1" id=timer visible=false></a-text><a-text align=center color=black font=mozillavr position="0.25 -0.3 -1" value=shots\n0 scale="0.25 0.25 1" id=shots visible=false></a-text><a-ring color=black id=debug_pov position="0 0 -1" radius-inner=0.6 radius-outer=0.61 visible=false></a-ring><a-cursor></a-cursor></a-camera><a-entity position="-2 0.5 -4.5" class="chicken one" target="revive: .chicken.two; texture: #chicken_texture; width: 1.2; height: 1.2" visible=true rotation="0 35 0"></a-entity><a-entity position="0 0.5 -4.5" class="chicken two" target="texture: #chicken_texture; width: 1.2; height: 1.2" visible=true></a-entity><a-entity position="2 0.5 -4.5" class="chicken three" target="revive: .chicken.one, .chicken.two; texture: #chicken_texture; width: 1.2; height: 1.2" visible=true rotation="0 -35 0"></a-entity><a-entity position="-1.1 -100.5 -4.5" class="outlaw one" target="revive: .outlaw.two, .outlaw.three; texture: #outlaw1_texture; width: 1.2; height: 1.8" visible=false rotation="0 14 0"></a-entity><a-entity position="1.4 -100.5 -5" class="outlaw two" target="texture: #outlaw2_texture; width: 1.2; height: 1.8" visible=false rotation="0 -16 0"></a-entity><a-entity position="3.1 -100.5 -2.5" class="outlaw three" target="revive: .outlaw.two; texture: #outlaw1_texture; width: 1.2; height: 1.8" visible=false rotation="0 -52 0"></a-entity><a-entity position="8.5 -100.5 -1.5" class="outlaw four" target="revive: .outlaw.three, .outlaw.five; texture: #outlaw1_texture; width: 1.2; height: 1.8" visible=false rotation="0 -75 0"></a-entity><a-entity position="5 -100.5 1.5" class="outlaw five" target="texture: #outlaw2_texture; width: 1.2; height: 1.8" visible=false rotation="0 -105 0"></a-entity><a-entity position="9 -100.5 5.5" class="outlaw coil fourteen" target="revive: .outlaw.one, .outlaw.six; texture: #outlaw1_texture; width: 1.2; height: 1.8" visible=false rotation="0 -120 0"></a-entity><a-entity position="2.5 -100.5 3" class="outlaw six" target="revive: .outlaw.four, .outlaw.five; texture: #outlaw1_texture; width: 1.2; height: 1.8" visible=false rotation="0 -140 0"></a-entity><a-entity position="5 -100.5 10" class="outlaw seven" target="texture: #outlaw2_texture; width: 1.2; height: 1.8" visible=false rotation="0 -150 0"></a-entity><a-entity position="-3.5 -100.5 5.5" class="outlaw eight" target="revive: .outlaw.seven, .outlaw.nine; texture: #outlaw1_texture; width: 1.2; height: 1.8" visible=false rotation="0 150 0"></a-entity><a-entity position="-6.5 -100.5 4.5" class="outlaw nine" target="revive: .outlaw.seven, .outlaw.ten; texture: #outlaw2_texture; width: 1.2; height: 1.8" visible=false rotation="0 125 0"></a-entity><a-entity position="-3.5 -100.5 1" class="outlaw ten" target="texture: #outlaw2_texture; width: 1.2; height: 1.8" visible=false rotation="0 105 0"></a-entity><a-entity position="-6 -100.5 -0.5" class="outlaw eleven" target="revive: .outlaw.ten; texture: #outlaw1_texture; width: 1.2; height: 1.8" visible=false rotation="0 85 0"></a-entity><a-entity position="-8 -100.5 -3.5" class="outlaw coil thirteen" target="revive: .outlaw.six, .outlaw.twelve; texture: #outlaw1_texture; width: 1.2; height: 1.8" visible=false rotation="0 65 0"></a-entity><a-entity position="-3 -100.5 -3" class="outlaw twelve" target="revive: .outlaw.ten, .outlaw.eleven; texture: #outlaw2_texture; width: 1.2; height: 1.8" visible=false rotation="0 45 0"></a-entity><a-plane color=#DBB742 height=150 position="0 0 0" rotation="-90 0 0" width=150></a-plane><a-icosahedron color=#FF926B position="-2 0.25 -4" radius=1 rotation="0 45 0"></a-icosahedron><a-icosahedron color=#FF926B position="7.8 0.15 -1" radius=1 rotation="25 60 0"><a-icosahedron color=#FF926B position="0.5 0 0.2" radius=1 rotation="45 15 0" scale="1.7 1.2 1"></a-icosahedron></a-icosahedron><a-icosahedron color=#FF926B position="-12 0.3 6" radius=1 rotation="25 60 0"><a-icosahedron color=#FF926B position="-1.5 0 -0.2" radius=1 rotation="-45 75 0" scale="1.5 2.2 1"></a-icosahedron></a-icosahedron><a-cylinder color=#086916 height=4 position="25 2 -45" radius=0.5 rotation="0 -45 0"><a-cylinder color=#086916 height=1 position="-0.65 1 0" radius=0.25 rotation="0 0 45"><a-icosahedron color=#086916 position="0 0.5 0" radius=0.25></a-icosahedron></a-cylinder><a-cylinder color=#086916 height=2 position="0.65 0 0" radius=0.25 rotation="0 0 -45"><a-icosahedron color=#086916 position="0 1 0" radius=0.25></a-icosahedron></a-cylinder><a-icosahedron color=#086916 position="0 2 0" radius=0.5></a-icosahedron></a-cylinder><a-icosahedron color=#fda577 position="-40 0.5 -15" radius=1 rotation="-45 75 0" scale="3 3.2 1"></a-icosahedron><a-cylinder color=#086916 height=4 position="14 2 10" radius=0.5 rotation="0 75 0"><a-cylinder color=#086916 height=1 position="-0.65 1 0" radius=0.25 rotation="0 0 45"><a-icosahedron color=#086916 position="0 0.5 0" radius=0.25></a-icosahedron></a-cylinder><a-cylinder color=#086916 height=2 position="0.65 0 0" radius=0.25 rotation="0 0 -45"><a-icosahedron color=#086916 position="0 1 0" radius=0.25></a-icosahedron></a-cylinder><a-icosahedron color=#086916 position="0 2 0" radius=0.5></a-icosahedron></a-cylinder><a-icosahedron color=#fda577 position="-5 0.5 25" radius=1 rotation="-45 180 0" scale="3 3.2 1"></a-icosahedron><a-cylinder color=#086916 height=4 position="-15 2 20" radius=0.5 rotation="0 130 0" scale="0.4 0.7 1"><a-cylinder color=#086916 height=1 position="-0.65 1 0" radius=0.25 rotation="0 0 45"><a-icosahedron color=#086916 position="0 0.5 0" radius=0.25></a-icosahedron></a-cylinder><a-cylinder color=#086916 height=2 position="0.65 0 0" radius=0.25 rotation="0 0 -45"><a-icosahedron color=#086916 position="0 1 0" radius=0.25></a-icosahedron></a-cylinder><a-icosahedron color=#086916 position="0 2 0" radius=0.5></a-icosahedron></a-cylinder><a-sky color=#36C3FF></a-sky><a-assets><img id=chicken_texture src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABKUlEQVR42u3bsQ3CMBCF4UxDTzomYQCk9MxDwwBQMwsVo0BtI+XpyXdB2P9JV0Fk31ccxnamyYzlsH87OfUWAAAwGEBd0PN4Ws3bPBf59yAAADAYgCpYFVjn5f4oshUkvekCAAAAqwD153XUBat0F1ZqvGYQAAAAwJqAG2rC7vMAAABALoAbbtOKLhgAAADIbYKqwOimuTkIAAAMBqAeeF6XIl/nXZHZBSvg5g0YAAAAYLXgOtWAbhPbGugLBAAABgdwm6I6GFEFqu9HA4X/KgAAwGAA6kKEC+D+eYk+aAm/EQIAAJ0BuE0xuom5C5n0S1gAADAYgDug26SyNz03PxgBAIDOAdwNklYgt2C1SQsAAADkrgvUBKLz55enAQBgMADeHAUAgK4BPo/h5dSUJ+YHAAAAAElFTkSuQmCC> <img id=outlaw1_texture src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAACACAYAAAC7gW9qAAACEElEQVR42u3dMU4DMRCF4ZyGGtIh7gEtElJ6LkCBkCjpoeEAUHMATpGKG3AFqD2FR0/PXu/Gv6Wpspl4vsIay15lt2s8DpcXf7Xo/f3hAwAAJgOIE/z9fq1GVmB8/vh+KGJ1IAAAAIAEkBWYBQAAANAXQG1E1gZgN1IAADAZgNuIjAawGykAAADAShA/7w2QzQcAAABoC5AlVAt2AdR8aWMEAACTA6ibCXcRdBc9tcDmu0EAADhxgNZAS8fw018AAJgM4Of+rIhsgvF59/sAAADAsmeFamOiNjZZgfHz7oenAAAAgNWYqAWri+LqNz8AALBxADZDAAAAgNMouQUN3/0BAAAAXTdPaiO0ubfGAADgxAHiBD/2+yLcRTDLBwAAAIwtOEYcx5u7ImJBWbx9fhWx+t0gAABsHMBdtLKRgcSCVQAbBAAAJgPIEqgTiM9nI3ve/X37cjQAAEwGkCV4enguwl0Us6EuegAAAEDbRVAt2AVwGx+1kQIAAADqBxkRQL3ENBogPWgBAAAAqgBqwtEA8mErAAAAUAVwLy/33gxlL1AAAAAA2p0jtcDz28ci1EZF3WxlvwcAAAB4AOpZYpxQFrHgGGq+xS9XAwAAABZA6xj+4iQAAADQdMJuvsVvigIAAABFvFxfFeH+2VrMBwAAAKwLIE6wN4CbHwAAAAAAAAAAGPde4ej8AAAAQDH+ATpPk2w/B3YkAAAAAElFTkSuQmCC> <img id=outlaw2_texture src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAACACAYAAAC7gW9qAAAB+0lEQVR42u3dMU4DMRCF4ZwmdSgjbsABqKnSIi5AgZAi0aSkoOEC1JwlVY4C9U7h0ejZHu/6jzRVNo7nKyx7Pd7d7Sp/Tse7v1K0/n36BwAAJgOwHbx8PhTDS9Be//F8WMRwIAAAAEAIwEvQCwAAAKAtQHQiMhqAPJECAIDJANSJSDaAPJECAAAApAbs960BvP4AAAAAdQG8BqMJqwDR9tyJEQAATA4QXUyog6A66EUTrL4aBACAjQPUBuod6bu/AAAwGcDtZb8Ir4P2evX3AAAAQN+9wuv3qRjR6214Cdrvvf8HAAAAcic+0YSjg+Lwix8AAFg5AIshAAAAQJkoqQmlr/4AAAAACeTr57cY76/nYqz+1BgAAGwMILpZqg6CcsEDAAAAsKpDUWrRVPM7QgAAsHGA2gciooWWAAAAQF8AL2G7eKldXJ0OAgAAAIQS9m5YqAnXPrABAAAAaIPgaAlHB8HwwUkAAJgcwG5uWgBvszL7MHX4ISwAAABAEcBOjGoDqIshtZgbAAAAKDcQTbj1DRC1GBsAAADo+wyRbBAAAABAqzWODnq9N0KaF1cDAMDkAB7I4ektNdILJwEAAICqHVbb614tDgAAACzi8ni/CPVla7Y9AAAAYCwA28HWAGr7AAAAAAAAAABAu8PTrV+8vPonSQEAwFgA/+k9UvCBJKlbAAAAAElFTkSuQmCC></a-assets></a-scene>