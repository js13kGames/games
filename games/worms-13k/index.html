<title>Worms 13k - js13kGames 2025</title><meta content="width=device-width" name=viewport><style>*{margin:0;padding:0}::-webkit-scrollbar{display:none}body{background:linear-gradient(#0068e0,#00b2e0) fixed}#id0,body{width:100vw;height:100vh}#hp,#id19,#id2,#id20{position:absolute;top:0;left:0}#hp,#id1,#id11,#id14,#id22,#id23,#id24,#id25,#id26,#wind,.weapon{background:#000;border:2px solid var(--c,#fff);box-shadow:0 0 0 3px #000,inset 0 0 0 4px #000;border-radius:5px;white-space:nowrap}#id1,#id10,#id11,#id14,#wind{position:fixed;left:50vw}#id1{left:56px;bottom:26px;padding:8px 12px;width:32px;transform:translate(-50%,150px)}#id10{top:26px;transform:translate(-50%,-150px);white-space:nowrap}#id11{top:90px;height:14px;padding:8px 12px;transform:translate(-50%,-150px)}.weapon{display:inline-block;height:48px;width:48px;margin-right:12px;box-shadow:0 0 0 3px #222;background:#fff}.weapon svg{width:100%;height:100%}.weapon.active{border-color:#8ae000;background:#8ae000}.weapon.inactive{opacity:.5}#id14{bottom:68px;height:14px;padding:8px 12px;transform:translate(-50%,150px)}#wind{bottom:26px;width:398px;height:30px;background:linear-gradient(to right,red,#ff0,#0f0,#ff0,red);transform:translate(-50%,150px)}#wind *{position:absolute;top:3px;width:100px;height:24px;background:#000}#id12{left:4px}#id13{right:4px}#winddiv{top:0;width:2px;height:30px;background:#fff;left:calc(50% - 1px)}#id15{display:inline-block;width:14px;height:14px;background:url(data:image/gif;base64,R0lGODdhHwEHAIAAAAAAAP///yH5BAgKAAAALAAAAAAfAQcAAAL/BIKGG8r3IJvLTQNlxRpH31hhdlFiY3bnprZfkmiXxGXnCqJzR+mxXAv+LMEiiDR6bWAjh7D5izZzIWatklJKt8kltNrlUn22IdZJtKnVjyH6/WJPr1OWm07Nc8T7uv/41me1JmOiFYao9wRnd8bkxahz9JEDiFRI2EdzIGfkQdflKWf4twIGWahUlELY45ooohezU4bo05MWmyZl6YIF9sQ6aju3tyjqhatrSdkK2zmMOsmz44qkjIfGW0LKMsocuiwo7Asnnim6dqe5fOjkdjfbCMg3CC7fCA/8CF1Lj49p3iZ67LzxmvRM3qde69IdM8IlArdk5EwhbINxDCtVGtyCkaFBK6KxSOFqzcj36lapk6rGnHMYyGEBADs=) 0 0/auto 14px;image-rendering:pixelated;border-right:2px solid #000}.flash{filter:brightness(100)}#hp{transform:translate(var(--x),var(--y));padding:4px;text-wrap:nowrap;border:none;background:var(--c);will-change:transform}#hp #id15{mix-blend-mode:multiply}#waves{animation:.5s ease-in-out infinite alternate waves}@keyframes waves{0%{d:path("M0,0 Q40,50 80,15 Q120,50 160,0 L160,200 L0,200 Z")}to{d:path("M0,15 Q40,50 80,0 Q120,50 160,15 L160,200 L0,200 Z")}}.started :is(#id1,#id10,#id11,#id14,#wind){transform:translate(-50%);transition:transform 1s ease-out}#w8{filter:hue-rotate(220deg)}#w2{filter:saturate(0) brightness(2.5)}#hide{display:none}#menu{position:fixed;top:calc(75px + max(75px,5vh));left:50%;height:150px;transform:translate(-50%)}#id22,#id23,#id24,#id25,#id26{opacity:0;padding:8px 12px;transition:opacity .5s;margin-bottom:20px}</style><div><svg id=id2><!-- #svg --><defs><linearGradient id=f0 x1=0 x2=0 y1=0 y2=1><stop offset=0% stop-color=#401D00 /><stop offset=40% stop-color=#401D00 /><stop offset=100% stop-color=#000000 /></linearGradient><linearGradient id=f1 x1=0 x2=1 y1=0 y2=0><stop offset=0% stop-color=#00FF00 /><stop offset=50% stop-color=#FFFF00 /><stop offset=100% stop-color=#FF0000 /></linearGradient><linearGradient id=f2 x1=0 x2=0 y1=0 y2=1><stop offset=0% stop-color=#00B2E077 /><stop offset=10% stop-color=#0068E0 /><stop offset=25% stop-color=#002DC0 /><stop offset=50% stop-color=#0C0073 /><stop offset=100% stop-color=#000030 /></linearGradient><linearGradient id=f3 x1=0 x2=0 y1=0 y2=1><stop offset=0% stop-color=#622D00 /><stop offset=100% stop-color=#401D00 /></linearGradient><linearGradient id=f4 x1=0 x2=0 y1=0 y2=1><stop offset=0% stop-color=#954400 /><stop offset=75% stop-color=#612C00 /></linearGradient><pattern height=1 id=p0 width=0.016 x=0 y=0><path fill=url(#f2) id=waves /></pattern><pattern height=100 id=p1 width=100 patternUnits=userSpaceOnUse><path fill=#EE9200 d="M50 100L0 50V0l50 50 50-50h0v50l-50 50z" opacity=0.1 /><circle cx=50 cy=70 fill=#EE9200 r=13 opacity=.1 /><circle cx=100 cy=30 fill=#EE9200 r=13 opacity=.1 /><circle cx=0 cy=30 fill=#EE9200 r=13 opacity=.1 /><circle cx=50 cy=20 fill=#200D00 r=13 opacity=.1 /><circle cx=100 cy=80 fill=#200D00 r=13 opacity=.1 /><circle cx=0 cy=80 fill=#200D00 r=13 opacity=.1 /></pattern><g id=player><path fill=none stroke=#EFB393 stroke-linecap=round stroke-width=14 /><ellipse cy=21 fill=#FFF rx=5 ry=10 /><ellipse cy=22.5 fill=#2B2B2B rx=2.5 ry=4.5 /></g><g id=w0><g transform="scale(0.6) translate(-26 -16)"><path fill=#24282F d="M3 6c3-4 24-6 32-4 8 1 16 9 16 14s-9 14-16 15-29-1-32-4S0 9 3 6Z"/><path fill=#f00 d="M35 2c8 1 16 9 16 14s-9 13-16 15c-3-4-5-9-5-15s2-11 5-14Z"/><path fill=#FFC400 d="M48 9c2 2 3 5 3 7v2l-1 2-3 2c-3 0-5-3-5-6 0-4 2-7 5-7h1Z"/></g></g><g id=w1><path fill=#E6E9ED d="M27 27 59 0l2 3-32 27z"/><path fill=#CCD1D9 d="m25 34 16-14 5 5-17 14z"/><path fill=#965353 d="M41 20 54 9l5 5-13 11z"/><path fill=#7F4545 d="m44 18 3-3 4 6-3 2zM49 13l3-2 5 5-3 3z"/><path d="m28 36 5 3" stroke=#434A54 stroke-width=8 stroke-linecap=round /><path fill=#965353 d="m3 51 15-15h3l3-7 6-5 3 3-4 19-5 1-8 16-13-9a2 2 0 0 1 0-3Z"/></g><g id=w2><use href=#w7 /></g><g id=w4><g transform="scale(0.6) translate(-27 -48)" fill=none><path fill=#9C0101 d="m33 58-3-36h24l-3 36c0 2-4 4-9 4s-9-2-9-4Z"/><ellipse cy=22 fill=#F43C1E rx=12 ry=5 cx=42 /><path d="M41 20c7-12-16-1-13-16" stroke=#F0C653 stroke-width=5 stroke-linecap=round /><path fill=#9C0101 d="M3 58 0 22h24l-3 36c0 2-4 4-9 4s-9-2-9-4Z"/><ellipse cy=22 fill=#F43C1E rx=12 ry=5 cx=12 /><path d="M12 20C7 9 24 17 28 3" stroke=#F0C653 stroke-width=5 stroke-linecap=round /><path fill=#DA2200 d="m18 62-3-36h24l-3 36c0 2-4 4-9 4s-9-2-9-4Z"/><ellipse cy=26 fill=#F43C1E rx=12 ry=5 cx=27 /><path d="M27 24c4-6-5-12 1-21" stroke=#FFDB75 stroke-width=5 stroke-linecap=round /></g></g><g id=w5><g transform="scale(0.6) translate(-21 -17)"><path fill=none d="M21 2c12 0 19 6 19 19" stroke=#08846A stroke-linecap=round stroke-width=3 /><path fill=#0B9B53 d="M16 0h9v5h-9z"/><ellipse cy=18 fill=#06B559 rx=14 ry=16 cx=21 /><path fill=#0B9B53 d="M7 17c0 8 5 14 12 14 6 0 11-6 11-14S25 3 20 2h1c8 0 14 7 14 16s-6 16-14 16S7 27 7 18v-1Z"/><path fill=none d="M7 19h28" stroke=#08846A stroke-linecap=round stroke-width=4 /></g></g><g id=w6><g transform="scale(0.5) translate(-32 -35)"><path fill=#222 d="M64 40c1 10-3 18-11 23 0 0-8 6-21 6s-21-6-21-6C3 58-1 50 0 40l2-10C-2 16 1 5 4 1l4-1c3 1 3 10 13 14a40 40 0 0 1 22 0C53 10 53 1 56 0l4 1c3 4 6 15 2 29l2 10Z" fill-rule=nonzero /><path fill=#E30000 d="M55 38c0-4-1-10-3-10h-2l-13 8c-5 4 2 13 8 14 6 0 10-6 10-12Z" fill-rule=nonzero /><path fill=#222 d="M41 42a4 4 0 0 0 7 0v2a4 4 0 1 1-7-2Z"/><path fill=#E30000 d="M9 38c0-4 1-10 3-10h2l13 8c5 4-2 13-8 14-6 0-10-6-10-12Z" fill-rule=nonzero /><path fill=#222 d="M16 42a4 4 0 0 0 7 0l1 2a4 4 0 1 1-8-2Z"/><path fill=none d="M19 60c9 0 13-4 13-9 0 5 4 9 13 9" stroke=#9D9D9D stroke-linecap=round stroke-width=3 stroke-linejoin=round /><path fill=none d="M57 6c1 9-3 13-3 14 0 2 1 3 4 5M7 6c-1 9 3 13 3 14 0 2-1 3-4 5" stroke=#9D9D9D stroke-linecap=round stroke-width=2 /></g></g><g id=w7><path fill=none d="m40 41 7-8-6-5" stroke=#D00 stroke-linecap=round stroke-width=3 stroke-linejoin=round /><path fill=none d="m36 33 3 2" stroke=#60001B stroke-linecap=round stroke-width=3 /><path fill=#AC0000 d="m27 42 7-7 14 14-7 7z"/><path fill=#D00 d="M3 43 40 6l12 11-38 38z"/><path fill=#FF4D29 d="m44 9 7-7 4 5-7 7z"/><path fill=#D00 d="m47 12 7-7 1 2-7 7z"/><path fill=#8C000B d="m3 43 5-5h14l25-25 5 4-38 38z"/><path fill=#FF4D29 d="m18 33 7-7 5 5-7 7zM39 7l-3-3-3 6 2 2z"/><path fill=#60001B d="m42 55 5-5 7 6v2l-5 4h-1l-6-7ZM41 56l-4 4c-7-7-6-12-13-15l3-3 14 14Z"/></g><g id=w8><use href=#w0 /></g><g id=w9><g transform="scale(0.6) translate(-21 -17)"><path fill=#E57A06 d="M16 0h9v5h-9z"/><path fill=#FFB311 d="M21 34c14 0 14-7 14-16S35 2 21 2 7 9 7 18s0 16 14 16Z"/><path fill=#E57A06 d="M7 17c0 8 0 14 12 14 11 0 11-6 11-14S30 2 20 2h1c14 0 14 7 14 16s0 16-14 16S7 27 7 18v-1Z"/><path fill=#B33D00 d="M7 19h28" stroke=#B33D00 stroke-linecap=round stroke-width=4 /><path fill=#E57A06 d="m4 3 9 3-4 5z"/><path fill=#B33D00 d="m9 23 4 5-8 3zM32 23l-3 5 9 2zM32 8l1 5 8-3z"/><path fill=#E57A06 d="m22 7 5 2 1-9zM18 7l-4 5 5 3z"/><path fill=#B33D00 d="m21 22-1 8 5-3z"/></g></g><g id=w10><g transform="scale(0.5) translate(-32 -35)"><path fill=#9D9D9D d="M64 40c1 10-3 18-11 23 0 0-8 6-21 6s-21-6-21-6C3 58-1 50 0 40l2-10C-2 16 1 5 4 1l4-1c3 1 3 10 14 13l10-1 10 1C53 10 53 1 56 0l4 1c3 4 6 15 2 29l2 10Z" fill-rule=nonzero /><path fill=none d="M19 55c0 4 13 4 13-4 0 8 12 8 13 4" stroke=#222 stroke-linecap=round stroke-width=3 stroke-linejoin=round /><path fill=none d="M57 6c1 9-3 13-3 14 0 2 1 3 4 5M7 6c-1 9 3 13 3 14 0 2-1 3-4 5" stroke=#222 stroke-linecap=round stroke-width=2 /><circle cx=10 cy=48 fill=#E8AC99 r=6 /><circle cx=54 cy=48 fill=#E8AC99 r=6 /><circle cx=20.5 cy=33.5 fill=#FFF r=8.5 /><circle cx=43.5 cy=33.5 fill=#FFF r=8.5 /><path fill=#222 d="M19 35a4 4 0 0 0 6 0l1 2a4 4 0 1 1-7-2ZM39 35a4 4 0 0 0 6 0l1 2a4 4 0 1 1-7-2Z"/></g></g><g id=w11><path fill=#5C6670 d="M2 57c0-1.3 5.7-7 17-17l5 5C14 56.3 8.3 62 7 62c-2 0-5-3-5-5Z"/><path fill=#454F58 d="m14 45 5-5 5 5-5 5z"/><path fill=#D3A97F d="M16 36c0-4 29-33 33-33 2.7 0 5.7 1 9 3 2 3.3 3 6.3 3 9 0 4-29 33-33 33s-12-8-12-12Z"/></g><line id=id17 stroke=#fff stroke-width=2 /><!-- #tracer --><circle cx=0 cy=0 fill=#fff id=id16 /><!-- #explosion --><g id=id18><!-- #logo --><path fill=#fff d="M76 4v5l-9 50H44l-5-28-5 26-23 1L1 11V5l20-1 4 32 6-30h16l6 30 4-34 19 2Zm53 25c0 6-2 11-3 13l-9 10c-4 2-10 4-14 4l-7-1c-5-1-10-5-11-7l-4-5c-2-2-4-6-4-13s2-11 3-13 5-8 9-10c5-2 10-4 14-4l10 2a24 24 0 0 1 16 24Zm-19-2-1-3-2-2-4-1-6 3-1 2-1 4 2 6c1 1 3 3 6 3a8 8 0 0 0 7-6v-6Zm70-6-1 6a18 18 0 0 1-4 8l-5 4 9 14v5l-17 2-7-18-5 1-1 17h-17a9397 9397 0 0 0 1-56 53 53 0 0 1 17-4h6l9 1 8 4 5 7 2 9Zm-19 1v-3c-1-1-2-4-4-4l-3-1h-3l-1 16 6-1c2 0 3-2 4-3l1-4Zm93 11a183 183 0 0 1-1 23l-21 1a554 554 0 0 0 1-39l-1-2s-2-1-3 1l-2 5a51 51 0 0 0 0 6l1 4a259 259 0 0 1-2 25l-19 1a461 461 0 0 0 1-39v-2c-1-1-2-2-3 0l-2 5v7l-1 30h-21a5871 5871 0 0 1 4-55l19-1v4l5-4c2-2 4-2 5-2l7 1 4 6 5-5c3-2 6-2 7-2l7 2 5 4 3 5a44 44 0 0 1 2 14v7Zm46 6-2 10-5 7-8 4-10 1-4-1a53 53 0 0 1-10-3l-4-1 2-16 8 4 8 1c4 0 5-1 6-2v-5l-3-1a351 351 0 0 1-12-2c-2 0-3-1-5-3l-3-5-1-5a19 19 0 0 1 7-15l8-5 8-1a61 61 0 0 1 13 2l4 1-2 16a50 50 0 0 0-12-2h-5l-3 1v4l2 2a36 36 0 0 0 9 0l6 1 4 4 3 3 1 6ZM116 76l-2 58-18-1 1-39-7 5-6-11v-5l13-8zM161 114l-2 9-5 7-7 4a33 33 0 0 1-28-5l2-16a30 30 0 0 0 7 4 31 31 0 0 0 8 1h3c2 0 3-1 3-2l1-3-3-2-4-2-3 1-3-1V99h6l3-1 3-2 1-3-1-2-2-2h-2a18 18 0 0 0-15 4l-3-15 8-4a30 30 0 0 1 18-1l8 4a18 18 0 0 1 6 15v3a15 15 0 0 1-5 7l3 2 2 3 1 3v4ZM215 82v5l-18 16 17 29-20 3-12-17-1 16-17 1 1-59 20 1-2 17 12-17z" fill-rule=nonzero /></g><g id=id0 fill=#FFC300><path d="M5.5 25a8 8 0 0 1-3.2-.5c-1.7-1.1-1.7-4.8 0-5.9.4-.3 1.4-.4 3-.4 1-6.4 5.8-11 12.8-12.7a8 8 0 0 1 .6-3.2c1-1.7 4.8-1.7 5.8 0 .4.4.5 1.3.5 2.7 6.4.9 10.3 5.5 11.1 13 1.8.1 3 .3 3.4.6 1.7 1.1 1.7 4.8 0 5.9-.5.3-1.7.4-3.6.4-1.3 6-5.3 10-11 11.2 0 1.8-.2 3-.6 3.4-1 1.7-4.7 1.7-5.8 0C18 39 18 38 18 36c-6.5-1.4-11-5.2-12.5-11ZM18.4 30c.2-1.9.4-3.1.7-3.6 1.1-1.7 4.1-1.7 5.2 0 .3.4.5 1.5.6 3 2.1-.9 3.8-2.5 4.5-4.7a9.2 9.2 0 0 1-3.1-.7c-1.7-1.1-1.7-4.1 0-5.2.5-.3 1.6-.5 3.5-.6-.6-3.5-2.3-5.4-5.2-5.8-.2 2-.4 3.4-.7 4-1.1 1.6-4.1 1.6-5.2 0-.3-.5-.5-1.6-.6-3.2-3.1 1-5 2.9-5.8 5.4 2 .2 3.4.5 4 .8 1.6 1.1 1.6 4 0 5.2-.6.3-1.8.5-3.7.6.8 2.5 2.6 4 5.8 4.8Z" stroke=#000 stroke-width=2 transform="translate(-21, -21)"/></g></defs><mask id=m0 mask-type=luminance /><mask id=m1 mask-type=luminance /><mask id=m2 mask-type=luminance /><mask id=m3 mask-type=luminance /><mask id=m4 mask-type=luminance /><rect fill=url(#p0) height=200 x=0 id=o1 /><rect fill=url(#p0) height=200 x=0 id=o2 /><rect fill=url(#p0) height=200 x=0 id=o3 /><path fill=url(#f0) id=l0 mask=url(#m0) /><path fill=#4ABE00 id=l1 mask=url(#m1) /><path fill=#8AE000 id=l2 mask=url(#m2) /><path fill=url(#f3) id=l3 mask=url(#m3) /><path fill=url(#f4) id=l4 mask=url(#m4) /><path fill=url(#p1) id=l5 mask=url(#m4) /></svg><div id=id21></div><svg id=id19><g id=id3 /><g id=id4 /><g id=id5 /></svg><svg id=id20><rect fill=url(#p0) height=200 x=0 id=o4 /><rect fill=url(#p0) height=200 x=0 id=o5 /><rect fill=url(#p0) height=200 x=0 id=o6 /><g id=id6></g><g id=id7 fill=#fc4></g><g id=id8><rect fill=url(#f1) height=10 x=0 rx=2 width=80 y=-5 mask=url(#m-pb) /></g><g id=id27><!-- #arrow --><path d="M8.7 14c-3 .7-9-9.1-7.4-11.5 1.4-2 11.8-1.8 14-.4 1.5 1 .5 3.3-1.6 6.6-1.8 2.7-3.7 5-5 5.2Z" stroke=#000 stroke-width=2 /></g><g id=id28><path fill=#FFD553 d="M16 23c-2 0-4 3-5 7 0-5 0-8-2-9-1-1-5-1-9 1 4-3 6-5 6-7s-2-5-6-7c5 2 8 2 9 1 2-1 3-4 2-9 1 5 3 7 5 8 2 0 5-1 8-5-3 4-4 7-3 9s4 3 9 3c-5 0-8 1-9 3-1 3 0 5 3 9-3-3-6-5-8-4Z" transform="translate(-15 -15)"/></g><mask id=m-pb mask-type=luminance><rect fill=#fff height=10 x=0 id=id9 rx=2 width=40 y=-5 /></mask></svg></div><div id=id10></div><div id=id11></div><div id=wind><div id=id12></div><div id=id13></div><div id=winddiv></div></div><div id=id14></div><div id=menu><div id=id25></div></div><div id=menu><div id=id26></div></div><div id=menu><div id=id22></div><div id=id23></div><div id=id24></div></div><div id=id1></div><div id=hide><div id=id15></div><div id=hp></div></div><script>function t(n){requestAnimationFrame(t);const e=yt(n-Wn,0,33);Wn=n,(t=>{for(let n of ce)d(n,n.t===ie,t)})(e),(t=>{if(qt[ae][2]){const n=ce[ie];if(n){if(Qn&&_n){const e=+Oe.has("KeyS")-+Oe.has("KeyW");0!==e&&q(),n.o=yt(n.o+e*t*.001,-On,On)}const[e,o]=xt(n,0,-10,150);Nt(rn,n.x,n.y,[n.o,0,0]),u(!1,e,o),sn.style.fill=0===n.i?"#FF418B":"#00EAFF"}else y(!1)}})(e),(t=>{const n=ce[ie],e=qt[ae];let o=0;if(n){if(!n.u&&(e[2]||e[4])&&Qn&&_n){const o=Oe.has("KeyP");e[1]?o?n.l=yt(n.l+.001*t,0,1):n.l>0&&(E(),n.u=!0,n.l=0):o&&(E(),n.u=!0)}const[s,c]=xt(n,0,-10,40);o=80*n.l,Nt(rn,s,c,[1===n.dir?180*n.o/Math.PI:180-180*n.o/Math.PI,0,0])}It(an,"width",o)})(e),(t=>{for(const[n,e]of Me)e.h-=t,It(e.M,"opacity",e.h>400?"1":e.h/400),It(e.M,"r",e.r*((500-e.h)/600+1)),e.h>0||(e.M.remove(),Me.delete(n))})(e),(t=>{de>0&&(de-=t,de>0||(de=0,Nt(vn,0,0)))})(e),(t=>{for(const[n,e]of we)e.h-=t,e.M.style.opacity=""+e.h/50,e.h>0||(e.M.remove(),we.delete(n))})(e),(t=>{for(const[n,e]of me){const n=L(e);if(e.m=(e.m||0)+t,30>e.m||(e.m-=30,w(e.x,e.y,!!e.A&&(e.h||0)/10%360)),e.h=(e.h||0)+t,e.h>=500&&e.T&&e.p||(e.I&&(e.dy+=t*Hn),e.I&&(e.dx*=.998,e.dy*=.998),e.O&&(e.dx+=.015*xe)),e.h>500&&e.T&&e.p){const t=mt([e.dx,e.dy]),[n,o]=wt(pt([e.T-e.x,e.p-e.y]),1.02*t),[s,c]=pt([lt(e.dx,n,.05),lt(e.dy,o,.05)]),i=mt([s,c]);e.dx=s*i,e.dy=c*i}e.x+=e.dx*t,e.y+=e.dy*t,Qn&&Ct(6,Kt(e.x,e.y,e.dx,e.dy),e.id),Qn&&z(e.x,e.y,999)&&(Ct(7,"",e.id),N(e)),n&&Nt(n,e.x,e.y,[180*(e.A?0:Math.atan2(e.dy,e.dx))/Math.PI,0,0])}})(e),(t=>{for(const[n,e]of Te){const n=U(e);e.h-=t,n.classList.toggle("flash",2e3>e.h&&!!(~~(e.h/250)%2)),e.h>0||K(e)}})(e),(t=>{for(const[n,e]of pe){const n=Y(e);if(e.h-=t,e.dy+=t*Hn,e.x+=e.dx*t,e.y+=e.dy*t,Nt(n,e.x,e.y),n.classList.toggle("flash",2e3>e.h&&!!(~~(e.h/250)%2)),z(e.x,e.y+8)){const t=mt([e.dx,e.dy]);t>.4&&w(e.x,e.y),t>.2&&bt([3*t,...Bn]);const[n,o,s]=V(e.x,e.y+8,0,-1);n!==1/0&&n>0&&(e.y-=n);let c=[1,0];if(0===o){const t=Math.floor(e.x/10);c=Tt([10*(t+1),bn+Xn[t+1]],[10*t,bn+Xn[t]])}1===o&&(c=Et(Tt([e.x,e.y],[s.x,s.y])));const i=At(Mt([e.dx,e.dy],c));e.dx=.6*i[0],e.dy=.6*i[1]}Qn&&Ct(8,Kt(e.x,e.y,e.dx,e.dy),e.id),Qn&&0>=e.h&&(Ct(9,"",e.id),j(e))}})(e),(t=>{let n=0,e=0;Fe.N&&Qn&&_n&&(Fe.x>Zn-100?n=1:100>Fe.x&&(n=-1),Fe.y>jn-100?e=1:100>Fe.y&&(Zn/2-420>Fe.x||Fe.x>Zn/2+420)&&(e=-1));const o=n*t/2,s=e*t/2,c=Zn/2,i=Fn-c,r=jn/2,a=Rn-r;0===n&&0===e||(Ae.v||(Ae.v=!0,Ae.to={x:Ae.to.x,y:Ae.to.y}),Ae.to.x=yt(Ae.to.x+o,c,i),Ae.to.y=yt(Ae.to.y+s,r,a),Qn&&Ct(24,Kt(Ae.to.x,Ae.to.y)));const d=yt(Ae.to.x,c,i),f=yt(Ae.to.y,r,a);Ae.x=lt(Ae.x,d,.0075*t),.1>Math.abs(Ae.x-d)&&(Ae.x=d),Ae.y=lt(Ae.y,f,.0075*t),.1>Math.abs(Ae.y-f)&&(Ae.y=f),Ae.h=Math.max(Ae.h-t,0);const l=Ae.h>0?Math.sin(Ae.h/15)*(Ae.h/20):0,u=yt(Ae.x,c,i)-Zn/2+l,y=yt(Ae.y,r,a)-jn/2;document.body.scrollTo({left:~~u,top:~~y})})(e),ln.style.width=yt(200*(1+xe),0,200)+"px",un.style.width=yt(200*(1-xe),0,200)+"px",(()=>{for(const t of Ee)ge[t]?.remove();Ee=[]})(),(t=>{Ie&&1===Ie.readyState&&(Le+=t,Le>=50&&Ne.size>0&&(Le-=50,Ie.send([...Ne.values()].join("\n")),Ne.clear()))})(e),(t=>{le>0&&(le-=t),le>0||(yn.style.display="none")})(e),(async t=>{if(Vn&&(fe+=t,fe>500)){fe-=500;const t=Ae.x-Zn/2+dt(0,Zn),n=0,e=.4*Yn()-.4,o=.2,s=await $(St(),t,n,e,o,dt(60,80),150);s.I=!0,s.O=!0}})(e),(t=>{if(!he)if(zn){ue-=t/1e3;const n=(""+Math.ceil(ue)).padStart(2,"0");Qn&&0>=ue&&(x(),Rt("OOPS, YOU RAN OUT OF TIME!")),ye!==n&&(ye=n,console.log(n,ye),Ft(_t,n))}else Ft(_t,"30")})(e)}function n(){zn||((()=>{for(let t=0;8010>t;t+=10){const n=0-Math.sin(t/Fn*Math.PI),e=Math.abs(ht(t,5,$n,.4));Xn.push(Math.round(n*Cn-e*Cn/2))}})(),tt(!1),(()=>{for(let t=0;10>t;t++){const t=dt(1e3,7e3),n=st(t);z(t,n+10)&&it(t,n,dt(60,120))}})(),c(),(()=>{for(let t=0;8>t;t++){const n=i(t);ce.push(n),l(n),Ft(a(n,2),Sn[t])}})(),s(),q(),Ot(An,!1),Ot(En,!1),Ot(gn,!1),document.body.classList.add("started"),zn=!0,Qn=!0,ue=30)}function e(){n(),zn=!1,_n=!1,te=[,,,,,,,,].fill(0).map(()=>dt(0,10)),$t(te.join("")),Ot(In,!0),Ft(In,"WAITING FOR PLAYER TO JOIN: "+te.join(""))}function o(){_n=!1,ne=!0,Ft(Ln,"ENTER CODE: --------"),Ot(An,!1),Ot(En,!1),Ot(gn,!1),Ot(Ln,!0)}function s(){const t=.5>Math.random()?1:-1;xe=yt(Math.pow(Math.random(),1.8)+.1,.1,.9)*t}function c(){se[0]=[,,,2,2,,1,1,1,3,1,,],se[1]=[,,,2,2,,1,1,1,3,1,,]}function i(t){let n=-1;for(;-1===n;){const t=7500*Math.random()+250;1790>st(t)&&(n=t)}const e=st(n),o=Math.random()>.5?1:-1;return{id:St(),t:t,x:n,y:e,S:100,dx:0,dy:0,F:0,L:!1,r:0,R:0,o:0,dir:o,l:0,i:t%2,$:0}}function r(t){return vt(nn,"player",t.id)}function a(t,n){return vt(wn,"hp",t.id+n,n=>{n.style.setProperty("--c",0===t.i?"#FF418B":"#00EAFF")})}function d(t,n,e){const o=r(t),s=a(t,1),c=a(t,2);if(t.C)s.style.display="none",c.style.display="none";else{if(Qn&&_n){if(t.F=n&&0>=(t.U||0)?+Oe.has("KeyD")-+Oe.has("KeyA"):0,t.L=!(!n||!Oe.has("Space")||!t.G||(t.U||0)>0),0!==t.F&&q(),t.dx=t.dx+(t.G?.1*t.F:0),t.dy=t.dy+(t.L?-.6:0),t.G&&!t.H&&(t.dx=yt(t.dx,-.125,.125)),t.L&&(t.dx+=.2*t.dir,t.U=500),!t.L&&t.G&&(t.dx*=.5,t.K=!1),t.L&&t.G&&(bt(Pn),t.K=!0),t.dy+=.002*e,t.x+=t.dx*e,t.y+=t.dy*e,t.R=lt(t.R,0,.01),t.r+=t.R*e,t.G&&(t.r=0,t.U=(t.U||0)-e),1>t.R&&(t.R=0),t.dir=0===t.F?t.dir:t.F>0?1:-1,.01>Math.abs(t.dx)&&(t.dx=0),z(t.x,t.y)){const[n]=V(t.x,t.y,0,-1),[e]=V(t.x,t.y-20,0,1),[o]=V(t.x-5,t.y-10,1,0),[s]=V(t.x+5,t.y-10,-1,0);n!==1/0&&n>0&&t.dy>0&&(t.y-=n,t.dy=t.H?0-.5*t.dy:0,t.G=!0),e!==1/0&&e>0&&0>t.dy&&(t.y+=e,t.dy=t.H?0-.5*t.dy:0),s!==1/0&&s>0&&t.dx>0&&(t.x-=s,t.dx=t.H||!t.G?0-.5*t.dx:0),o!==1/0&&o>0&&0>t.dx&&(t.x+=o,t.dx=t.H||!t.G?0-.5*t.dx:0)}else t.G=!1;Qn&&t.y>=1810&&(p(t,!1,!0),bt(Kn))}const i=.75,r=t.dir*i;Nt(o,t.x-32*t.dir*i,t.y-60*i,[t.r,32*r,32*i],[r,i]);const a=t.K?2:t.F?1:0;t.$!==a&&(t.$=a,t.frame=0,t.k=0,f(t)),t.k=(t.k||0)+e,t.k>250&&(t.k-=250,t.frame=(t.frame||0)+1,f(t));const d=~~t.x,l=~~t.y;s.style.transform=`translate(${d-8*s.children.length-4}px, ${l-75}px)`,c.style.transform=`translate(${d-8*c.children.length-4}px, ${l-97}px)`,t.t===ie&&(Nt(Nn,t.x-7.5,t.y-120),Nn.style.fill=0===t.i?"#FF418B":"#00EAFF"),Qn&&_n&&Ct(4,Kt(t.x,t.y,t.dx,t.dy,t.o,t.dir,t.S,t.F,t.l,t.r,+(t.K||0)),t.t,!0)}}function f(t){const n=r(t),e=Xt[t.$||0];t.frame=(t.frame||0)%e.length;const o=e[t.frame],s=[...n.children];It(s[0],"d",o[0]),It(s[1],"cx",o[1]),It(s[2],"cx",o[2])}function l(t){Ft(a(t,1),""+t.S),1>t.S&&!t.B&&p(t,!0,!1)}function u(t,n,e){Nt(t?cn:sn,n,e),(t?cn:sn).style.visibility="visible"}function y(t){(t?cn:sn).style.visibility="hidden"}function h(){if(Qn)do{ie=(ie+2)%ce.length}while(ce[ie].B);q(),Ht()}function x(){if(Qn){let t=0;for(const n of ce)n.B&&!n.C&&t++;0===t&&((()=>{const t=[0,0];for(const n of ce)n.C||t[n.i]++;return t[0]||t[1]?t[0]?t[1]||(Rt("CONGRATULATIONS TEAM 1! YOU WIN!"),Vn=!0):(Rt("CONGRATULATIONS TEAM 2! YOU WIN!"),Vn=!0):(Rt("WHOA, IT'S A DRAW!"),Vn=!0),Vn})()||(ae=0,re=1-re,ue=30,he=!1,ie=2*dt(0,4)+re,h(),s(),(()=>{for(const t of ce)t.u=!1,t.H=!1})(),Ht(),Ie?(Qn=!1,Ct(3)):Rt(`TEAM ${re+1} IT'S YOUR TURN`)))}q(),A()}function M(){Qn&&(m(),oe=setTimeout(x,4e3))}function m(){oe&&clearTimeout(oe)}function p(t,n,e){Qn&&Ct(5,Kt(+n,+e),t.t);const o=e?0:2001;t.B=!0,setTimeout(()=>{if(t.C=!0,It(r(t),"opacity","0"),a(t,1).style.display="none",n){if(Rt(`GOOD BYE ${Sn[t.t]}!`),bt(kn),Qn){const n=St(),e=dt(60,70);kt(n,t.x,t.y-10,e),ct(0,t.x,t.y-10,e,1)}}else Rt(Sn[t.t]+" IS SLEEPING WITH THE FISHES!");X(t),e||M()},o)}function T(t,n,e,o=!1){const s=xn.cloneNode(!0),c=!1===o?"#fff":`hsl(${o}, 100%, 50%)`,i=!1===o?500:1e3;It(s,"cx",t),It(s,"cy",n),It(s,"r",e),It(s,"fill",c),en.append(s),Me.set(St(),{x:t,y:n,r:e,M:s,h:i})}function w(t,n,e=!1){for(let o=0;5>o;o++){const s=.4*Math.PI*o,c=5*Math.random()+5;T(t+Math.sin(s)*c,n+Math.cos(s)*c,dt(6,9),e)}}function A(){const t=se[re]?.[ae];Ft(fn,`${qt[ae][5]}${void 0===t?"":" X "+t}`);for(let t=0;qt.length>t;t++){const n=dn.children.item(t)?.classList;n?.toggle("active",t===ae),n?.toggle("inactive",0===se[re]?.[t])}}function E(){const{id:t,x:n,y:e,dir:o,o:s,l:c}=ce[ie],i=St(),r=Fe.x+Ae.x-Zn/2,a=Fe.y+Ae.y-jn/2,d=Math.random()*2**32>>>0;switch(he=!0,ae){case 0:return S(i,n,e,o,s,c);case 1:return C(i,n,e,o,s,d);case 2:return H(i,n,e,o,s,d);case 3:return R(i,n,r,a);case 4:return B(i,n,e);case 5:return D(i,n,e,o,s,c);case 6:return W(i,n,e,o,s,c);case 7:return k(i,n,e,o,s,d);case 8:return O(i,n,e,o,s,c,r,a);case 9:return Z(i,n,e,o,s,c);case 10:return b(i,r,a,d);case 11:return J(t,n,e,o,s)}}function g(){const t=se[re];void 0!==t[ae]&&(t[ae]-=1)}function I(t,n){const e=.4*Yn()+1.5;Nt(vn,t,n,[dt(0,360),0,0],[e,e]),de=150}function L(t){return t.Y?null:vt(on,t.A?"w10":t.W?"w8":"w0",t.id)}function N(t){Qn&&(kt(St(),t.x,t.y,t.l),ct(0,t.x,t.y,t.l,1.2)),bt(kn),Ee.push(t.id),me.delete(t.id),0===me.size&&(y(!0),M())}function v(t,n,e,o,s,c){Qn&&Ct(23,Kt(n,e,o,s,c),t),me.set(t,{id:t,x:n,y:e,dx:o,dy:s,l:c,O:!1,I:!0,Y:!0}),m()}function S(t,n,e,o,s,c){Qn&&Ct(11,Kt(t,n,e,o,s,c));const i=F(t,n,e,o,s,1.5*c);i.O=!0,i.I=!0,g()}function O(t,n,e,o,s,c,i,r){const a=ce[ie];if(Qn&&Ct(19,Kt(t,n,e,o,s,c,i,r)),0===c)a.T=i,a.p=r,u(!0,i,r);else if(a.T&&a.p){const i=F(t,n,e,o,s,1.5*c);i.T=a.T,i.p=a.p,i.W=!0,a.T=a.p=void 0,g()}}function F(t,n,e,o,s,c){const i=Math.cos(s)*c*2*o,r=Math.sin(s)*c*2,a=n+10*i,d=e-10+10*r,f={id:t,x:a,y:d,dx:i,dy:r,l:dt(70,80)};return me.set(t,f),X(f),bt(Gn),I(a,d),m(),f}async function R(t,n,e,o){Qn&&Ct(14,Kt(t,n,e,o)),X({x:e,y:o}),u(!0,e,o),g(),setTimeout(async()=>{for(let o=0;5>o;o++){const s=e>n?1:-1,c=.2*s,i=(50*(o-2.5)-150)*s,r=dt(55,65);(await $(t+o,e+i,-50,c,.2,r,150)).I=!0}},1e3)}async function b(t,n,e,o){Qn&&Ct(21,Kt(t,n,e,o)),X({x:n,y:e}),u(!0,n,e),g();const s=at(o);setTimeout(async()=>{for(let e=0;5>e;e++){const o=Math.PI/2+(.2*s()-.1),c=.4*Math.cos(o),i=.4*Math.sin(o),r=dt(75,90);(await $(t+e,n-100*c,-20,c,i,r,1250)).A=!0}},1e3)}async function $(t,n,e,o,s,c,i){return new Promise(r=>{setTimeout(()=>{const i={id:t,x:n,y:e,dx:o,dy:s,l:c};me.set(t,i),m(),r(i)},i)})}function C(t,n,e,o,s,c){P(t,n,e,o,s,c,1,[40,45],.05,1e3,12),g()}function H(t,n,e,o,s,c){P(t,n,e,o,s,c,8,[12,16],.1,50,13),g()}function k(t,n,e,o,s,c){P(t,n,e,o,s,c,30,[16,20],.125,40,18),g()}async function P(t,n,e,o,s,c,i,r,a,d,f){Qn&&Ct(f,Kt(t,n,e,o,s,c));const l=n,u=e-10,y=1===o?s:Math.PI-s,h=at(c);for(let n=0;i>n;n++){const e=h()*a*2-a;await G(t+n,l,u,y+e,r,d,0===n)}M()}async function G(t,n,e,o,s,c,i){return new Promise(r=>{const a=ce[ie],d=Math.cos(o),f=Math.sin(o),l=((t,n,e,o,s=-1)=>{let c=1,i=t+e,r=n+o;for(;;){if(c++,i+=e,r+=o,0>i||i>Fn||0>r||r>Rn){c=1/0;break}if(z(i,r,s))break}return c})(n,e,d,f,a.t);if(l!==1/0){const o=n+20*d,a=e+20*f,u=n+d*l,y=e+f*l;i&&X({x:u,y:y}),setTimeout(()=>{if(((t,n,e,o)=>{const s=Mn.cloneNode(!0);It(s,"x1",t),It(s,"y1",n),It(s,"x2",e),It(s,"y2",o),on.appendChild(s),we.set(St(),{M:s,h:50})})(o,a,u,y),I(o,a),bt(Un),Qn){const n=dt(s[0],s[1]);kt(t,u,y,n),ct(0,u,y,n,.25,ie)}r()},i?1e3:c)}else r()})}function U(t){return vt(on,"w4",t.id,n=>{Nt(n,t.x,t.y,[10*Math.random()-5,0,0])})}function B(t,n,e){Qn&&Ct(15,Kt(t,n,e));const o={id:t,x:n,y:e-5,D:dt(90,100),h:5e3};Te.set(t,o),m(),g()}function K(t){const n=U(t);if(Qn){const n=St();ct(0,t.x,t.y,t.D,2.4),kt(n,t.x,t.y,t.D)}bt(kn),n.remove(),Te.delete(t.id),M()}function Y(t){return vt(on,t.P?"w6":t.Z?"w9":"w5",t.id,n=>{Nt(n,t.x,t.y)})}function D(t,n,e,o,s,c,i=!1,r=!1){Qn&&Ct(i?17:r?20:16,Kt(t,n,e,o,s,c));const a={id:t,x:n,y:e-10,dx:Math.cos(s)*c*1.25*o,dy:Math.sin(s)*c*1.25,P:i,Z:r,l:dt(55,65)*(i?3:1),h:5e3};pe.set(t,a),X(a),m(),g()}function W(t,n,e,o,s,c){D(t,n,e,o,s,c,!0,!1)}function Z(t,n,e,o,s,c){D(t,n,e,o,s,c,!1,!0)}function j(t){if(Qn&&(kt(St(),t.x,t.y,t.l),ct(0,t.x,t.y,t.l,1.2)),bt(kn),Ee.push(t.id),pe.delete(t.id),Qn){const n=t.P?10:t.Z?5:0,e=t.P?dt(70,90):t.Z?dt(40,60):0;for(let o=0;n>o;o++){const n=Math.random()*Math.PI*2;v(t.id+o,t.x,t.y,.25*Math.sin(n),.25*Math.cos(n)-.5,e)}}M()}function J(t,n,e,o,s){if(Qn){Ct(22,Kt(t,n,e,o,s));let c=!1;for(let i=0;ce.length>i;i++){const r=ce[i];t===r.id||r.B||2e3>ft(n,e,r.x,r.y)&&(r.H=!0,r.dx=Math.cos(s)*o,r.dy=Math.sin(s),r.R=Math.max(20,20*r.dir),r.S-=15,l(r),X(r),M(),I(r.x,r.y-10),c=!0)}c||(he=!1)}}function X(t){Ae.v=!1,Ae.to=t}function q(){Ae.v=!1,Ae.to=ce[ie],Qn&&Ct(25)}function z(t,n,e=-1){if(e>=0)for(const o of ce)if(o.t!==e&&120>=Math.pow(t-o.x,2)+Math.pow(n-(o.y-10),2))return!0;if(n<st(t))return!1;for(const e of Jn)if(_(t,n,e.x,e.y,e.r2))return!1;return!0}function V(t,n,e,o){let s=1/0,c=-1,i=null;if(z(t,n)){const[r,a]=pt([e,o]),d={x:t,y:n,J:r,X:a};for(const t of Jn){const n=Q(d,t);s>n&&(s=n,c=1,i=t)}if(-1===o){const e=n-st(t);s>e&&(s=e,c=0)}if(1===e){let e=0,o=0,i=t-t%10,r=0;for(;Fn>i;)if(e=i,o=r,i=e+10,r=st(i),n>=o&&r>=n){const a=lt(e,i,ut(n,o,r))-t;s>a&&(s=a,c=0)}}if(-1===e){let e=0,o=0,i=t-t%10+10,r=0;for(;i>0;)if(e=i,o=r,i=e-10,r=st(i),n>=o&&r>=n){const a=t-lt(e,i,ut(n,o,r));s>a&&(s=a,c=0)}}}return[s,c,i]}function Q(t,n,e=!1){const o=t.x-n.x,s=t.y-n.y,c=-2*(o*t.J+s*t.X),i=c-Math.sqrt(c*c-4*(o*o+s*s-n.r2))*(e?-1:1);return isNaN(i)||0>i?1/0:i/2}function _(t,n,e,o,s){return ft(t,n,e,o)<s}function tt(t=!1){Jn=[],((t=!1)=>{qn=[];for(const n of[10,0,0,15,25])qn.push(et("m"+qn.length,t,n))})(t);let n=0;for(let e of[10,0,0,20,35,35])nt("l"+n++,t,e);if(t){for(let t=0;6>t;t++)ot("o"+(6-t),20*t);it(1300,1180,80),it(690,1350,80),it(1970,1480,80)}}function nt(t,n=!1,e){const o=Vt(t);o.innerHTML="";let s="M0 2000";if(n)s+="L0 1100L8000 1100";else{let t=0;for(let n of Xn)s+=`L${10*t++} ${bn+e+n}`}return s+="L8000 2000Z",gt(o,"d",s),o}function et(t,n=!1,e){const o=Vt(t),s=Lt("path");if(It(s,"d","M-10,0 L8000,0 L8000,2010 L-10,2010 Z"),It(s,"fill",n?"black":"white"),o.appendChild(s),n){const t=mn.cloneNode(!0);It(t,"transform",`translate(680, ${1180+e}) scale(4.5)`),o.appendChild(t);const n=mn.cloneNode(!0);It(n,"transform","translate(680, 1210) scale(4.5)"),o.appendChild(n)}return o}function ot(t,n){const e=Vt(t);It(e,"x",2.7*-n+dt(-40,0)),It(e,"y",1800-n),It(e,"width",1e4)}function st(t){const n=Math.floor(t/10);return lt(bn+Xn[n],bn+Xn[n+1],t/10-n)+2}function ct(t,n,e,o,s,c){if(it(n,e,o),T(n,e,.9*o),Ae.h=500,Qn){const t=Math.pow(1.5*o,2);let i=null,r=0;for(let a=0;ce.length>a;a++){const d=ce[a];if(c===a||d.B)continue;const f=ft(n,e,d.x,d.y);if(t>f){const c=(1-f/t)*o/2,u=Math.log2((1-f/t)*o)/2,y=Math.atan2(d.y-e,d.x-n),h=s*u*.2;h>r&&(r=h,i=a),d.H=!0,d.dx=h*Math.cos(y),d.dy=h*Math.sin(y)-.1,d.R=Math.max(10,10*u*d.dir),d.S=Math.max(Math.floor(d.S-c),0),l(d)}}null!==i&&X(ce[i])}}function it(t,n,e){e>50&&rt(qn[0],t,n,e-20),rt(qn[1],t,n,e),rt(qn[2],t,n,e+10),rt(qn[3],t,n,e),rt(qn[4],t,n,e+10),Jn.push({x:t,y:n,r:e,r2:e*e})}function rt(t,n,e,o){const s=Lt("circle");It(s,"cx",n),It(s,"cy",e),It(s,"r",o),It(s,"fill","black"),t.appendChild(s)}function at(t){return()=>{let n=(t=2654435769+(t|=0)|0)^t>>>16;return n=Math.imul(n,569420461),n^=n>>>15,n=Math.imul(n,1935289751),((n^=n>>>15)>>>0)/4294967296}}function dt(t,n){return Math.floor(t+Yn()*(n-t))}function ft(t,n,e,o){return(t-e)*(t-e)+(n-o)*(n-o)}function lt(t,n,e){return t*(1-e)+n*e}function ut(t,n,e){return(t-n)/(e-n)}function yt(t,n,e){return Math.min(e,Math.max(n,t))}function ht(t,n,e,o){let s=0,c=1,i=e,r=0;for(let e=0;n>e;e++)s+=Dn((t+1e3)*i,0)*c,r+=c,c*=o,i*=2;return s/r}function xt(t,n,e,o){return[t.x+n+Math.cos(t.o)*o*t.dir,t.y+e+Math.sin(t.o)*o]}function Mt(t,n){const e=pt(n);return Tt(t,wt(e,2*((o=t)[0]*(s=e)[0]+o[1]*s[1])));var o,s}function mt(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function pt(t){const n=mt(t);return 0===n?t:[t[0]/n,t[1]/n]}function Tt(t,n){return[t[0]-n[0],t[1]-n[1]]}function wt(t,n){return[t[0]*n,t[1]*n]}function At(t){return[-t[0],-t[1]]}function Et(t){return[-t[1],t[0]]}function gt(t,n,e){t.setAttribute(n,""+e)}function It(t,n,e){t?.setAttributeNS(null,n,""+e)}function Lt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Nt(t,n,e,o=[0,0,0],s=[1,1]){gt(t,"transform",`translate(${n} ${e}) rotate(${o[0]} ${o[1]} ${o[2]}) scale(${s[0]} ${s[1]})`)}function vt(t,n,e,o){let s=ge[e];return s||(s=Vt(n).cloneNode(!0),o?.(s),t.appendChild(s),ge[e]=s),s}function St(){return dt(0,999999999)}function Ot(t,n){t.style.opacity=n?"1":"0",t.style.pointerEvents=n?"auto":"none"}function Ft(t,n){t.innerHTML="";for(let e=0;n.length>e;e++){const o=hn.cloneNode();o.style.backgroundPositionX=0-14*"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 '!:-".indexOf(n[e])+"px",t.append(o)}}function Rt(t){Ft(yn,t),le=2500,yn.style.display="block"}function bt(t){((t=1,n=.05,e=220,o=0,s=0,c=.1,i=0,r=1,a=0,d=0,f=0,l=0,u=0,y=0,h=0,x=0,M=0,m=1,p=0,T=0,w=0)=>{let A=Math,E=2*A.PI,g=44100,I=a*=500*E/g/g,L=e*=(1-n+2*n*A.random(n=[]))*E/g,N=0,v=0,S=0,O=1,F=0,R=0,b=0,$=0>w?-1:1,C=E*$*w*2/g,H=A.cos(C),k=A.sin,P=k(C)/4,G=1+P,U=-2*H/G,B=(1-P)/G,K=(1+$*H)/2/G,Y=-($+H)/G,D=K,W=0,Z=0,j=0,J=0;for(d*=500*E/g**3,h*=E/g,f*=E/g,l*=g,u=g*u|0,t*=.3,$=(o=g*o+9)+(p*=g)+(s*=g)+(c*=g)+(M*=g)|0;$>S;n[S++]=b*t)++R%(100*x|0)||(b=i?i>1?i>2?i>3?k(N**3):A.max(A.min(A.tan(N),1),-1):1-(2*N/E%2+2)%2:1-4*A.abs(A.round(N/E)-N/E):k(N),b=(u?1-T+T*k(E*S/u):1)*(0>b?-1:1)*A.abs(b)**r*(o>S?S/o:o+p>S?1-(S-o)/p*(1-m):o+p+s>S?m:$-M>S?($-S-M)/c*m:0),b=M?b/2+(M>S?0:($-M>S?1:($-S)/M)*n[S-M|0]/2/t):b,w&&(b=J=D*W+Y*(W=Z)+K*(Z=b)-B*j-U*(j=J))),C=(e+=a+=d)*A.cos(h*v++),N+=C+C*y*k(S**5),O&&++O>l&&(e+=f,L+=f,O=0),!u||++F%u||(e=L,a=I,O=O||1);(t=zt.createBuffer(1,$,g)).getChannelData(0).set(n),(e=zt.createBufferSource()).buffer=t,e.connect(zt.destination),e.start()})(...t)}function $t(t){Ie=new WebSocket("wss://relay.js13kgames.com/worms-13k/"+t),Ie.onmessage=Pt}function Ct(t,n="",e=null,o=!1){const s=(10>t?"0":"")+t+(null!==e?"|"+e:""),c=s+"|"+n;ve.get(s)!==c&&Ne.set(s,c),o&&ve.set(s,c)}function Ht(){Ct(2,Kt(re,ie,ae,xe))}function kt(t,n,e,o){Ct(10,Kt(n,e,o),t)}function Pt(t){const n=t.data.split("\n");for(const t of n){const n=parseInt(t.substring(0,2)),e=t.substring(3),o=Se[n];o?.(e)}}function Gt(t){Se.push(t)}function Ut(t){return parseFloat(t)}function Bt(t){return parseInt(t,10)}function Kt(...t){return[...t].join("|")}function Yt(t){return t.split("|")}const Dt=Math.sqrt(3),Wt=.5*(Dt-1),Zt=(3-Dt)/6,jt=t=>0|Math.floor(t),Jt=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),Xt=[[["M45 19c3 27 1 40-4 40-8 0-5-11-11-11s-7 11-16 11",49,51.5]],[["M51 19c3 27 1 40-4 40-8 0-8-11-18-11S21 59 7 59",55,57.5],["M45 19c3 27 1 40-4 40-8 0-5-11-11-11s-7 11-16 11",49,51.5],["M39 19c3 27 1 40-4 40-8 0-1-11-6-11s-3 11-13 11",43,45.5],["M43 19c3 27 1 40-4 40-8 0-5-11-11-11s-7 11-16 11",47,49.5]],[["M54 18c2 27-3 45-16 56",55,57.5]]],qt=[[0,1,1,0,0,"BAZOOKA",[[24,24,-45,1.55,0]]],[1,0,1,0,0,"SHOTGUN",[[,,,.75,1]]],[2,0,1,0,0,"UZI",[[,,,.75,2]]],[3,0,0,1,0,"AIR STRIKE",[[24,28,90,.8,0],[12,20,90,.8,0],[36,20,90,.8,0]]],[4,0,0,0,1,"DYNAMITE",[[24,32,,1.1,4]]],[5,1,1,0,0,"GRENADE",[[22,24,,1.9,5]]],[6,1,1,0,0,"UNHOLY BLACK CAT",[[24,24,,1.2,6]]],[7,0,1,0,0,"MINIGUN",[[,,,.75,7]]],[8,1,1,1,0,"HOMING MISSILE",[[32,16,,.75,"id0"],[16,32,-45,,8]]],[9,1,1,0,0,"CLUSTER BOMB",[[24,24,,1.9,9]]],[10,0,0,1,0,"NYAN CATS",[[24,24,,1.2,10]]],[11,0,1,0,0,"CRICKET BAT",[[,,,.75,11]]]],zt=new AudioContext,Vt=document.getElementById.bind(document),[Qt,_t,tn,nn,en,on,sn,cn,rn,an,dn,fn,ln,un,yn,hn,xn,Mn,mn,pn,Tn,wn,An,En,gn,In,Ln,Nn,vn]=Array(29).fill(0).map((t,n)=>Vt("id"+n)),Sn="ALICE|CLIVE|BORIS|RICHARD|MIKE|SARAH|PAULINE|HENRY".split("|"),On=Math.PI/2,Fn=8e3,Rn=2e3,bn=2400,$n=75e-5,Cn=1500,Hn=.001,kn=[1.3,,50,.08,.18,.36,4,2.9,-5,,,,,1.2,20,.6,.16,.4,.12,,1689],Pn=[,,369,.02,.05,.09,1,1.5,2,157,,,,,,.1,,.72,,,926],Gn=[1.7,,185,.03,.01,.06,3,3.2,-16,-9,50,,,,,.4,.2,.67,.1,,-1376],Un=[.6,,328,.01,.01,.03,3,3.7,7,,-50,,.01,.1,7.4,,,.74,,,193],Bn=[,324,,.05,.09,1,3.1,-3,-8,,,,.8,38,.3,,.42,.09,,-2385],Kn=[5,,244,.01,.01,.01,1,.7,,,,,,,,,.07,.56,.01,.04,-978],Yn=at(Math.random()*2**32>>>0),Dn=((t=Math.random)=>{const n=(t=>{const n=new Uint8Array(512);for(let t=0;256>t;t++)n[t]=t;for(let e=0;255>e;e++){const o=e+~~(t()*(256-e)),s=n[e];n[e]=n[o],n[o]=s}for(let t=256;512>t;t++)n[t]=n[t-256];return n})(t),e=new Float64Array(n).map(t=>Jt[t%12*2]),o=new Float64Array(n).map(t=>Jt[t%12*2+1]);return(t,s)=>{let c=0,i=0,r=0;const a=(t+s)*Wt,d=jt(t+a),f=jt(s+a),l=(d+f)*Zt,u=t-(d-l),y=s-(f-l);let h,x;u>y?(h=1,x=0):(h=0,x=1);const M=u-h+Zt,m=y-x+Zt,p=u-1+2*Zt,T=y-1+2*Zt,w=255&d,A=255&f;let E=.5-u*u-y*y;if(E>=0){const t=w+n[A];E*=E,c=E*E*(e[t]*u+o[t]*y)}let g=.5-M*M-m*m;if(g>=0){const t=w+h+n[A+x];g*=g,i=g*g*(e[t]*M+o[t]*m)}let I=.5-p*p-T*T;if(I>=0){const t=w+1+n[A+1];I*=I,r=I*I*(e[t]*p+o[t]*T)}return 70*(c+i+r)}})(Yn);let Wn=0,Zn=innerWidth,jn=innerHeight,Jn=[],Xn=[],qn=[],zn=!1,Vn=!1,Qn=!1,_n=!0,te=[],ne=!1,ee=0,oe=null,se=[],ce=[],ie=0,re=0,ae=0,de=0,fe=0,le=0,ue=0,ye="",he=!1,xe=0,Me=new Map,me=new Map,pe=new Map,Te=new Map,we=new Map,Ae={x:1350,y:1400,to:{x:1350,y:1400},v:!0,h:0},Ee=[],ge=[],Ie=null,Le=0,Ne=new Map,ve=new Map,Se=[];setTimeout(()=>{gt(tn,"width",Fn),gt(tn,"height",Rn),gt(pn,"width",Fn),gt(pn,"height",Rn),gt(Tn,"width",Fn),gt(Tn,"height",Rn),document.body.style.cursor=`url('data:image/svg+xml;base64,${btoa('<svg xmlns="http://www.w3.org/2000/svg" width="27" height="36"><path fill="#FF418B" stroke="#000" stroke-width="2" d="m20 25 2 6c0 2-4 4-7 4-2 0-3-2-5-5l-5 2c-3 0-4-6-4-15C1 9 1 3 3 1c2-1 7 2 13 8 6 4 10 9 10 11s-2 4-6 5Z"/><path fill="#FF859F" d="M4 5c1-3 3-1 5 1-5-2-5 6-4 22C3 21 3 8 4 5Z"/></svg>')}') 6 5, pointer`,sn.innerHTML=Qt.innerHTML,cn.innerHTML=Qt.innerHTML,Ft(An,"START LOCAL GAME"),Ft(En,"START REMOTE GAME"),Ft(gn,"JOIN REMOTE GAME"),Ot(An,!0),Ot(En,!0),Ot(gn,!0),An.onclick=n,En.onclick=e,gn.onclick=o,requestAnimationFrame(t),tt(!0),(()=>{for(let t=0;qt.length>t;t++){const n=document.createElement("div");n.className="weapon";let e="";for(const[n,o,s,c,i]of qt[t][6])e+=`<g transform="translate(${n||0} ${o||0}) rotate(${s||0}) scale(${c||1})"><use href="#${Number.isInteger(i)?"w"+i:i}" /></g>`;n.innerHTML=`<svg>${e}</svg>`,n.addEventListener("mousedown",()=>{Qn&&_n&&0!==se[re][t]&&(ae=t,Ht(),A(),y(!1))}),dn.append(n)}A()})()});const Oe=new Set,Fe={x:Zn/2,y:jn/2,N:!1};addEventListener("mousemove",t=>{Fe.x=t.clientX,Fe.y=t.clientY}),addEventListener("mousedown",t=>{Qn&&qt[ae][3]&&t.clientY>100&&E()}),addEventListener("keydown",t=>{const n=t.keyCode;32===n&&t.preventDefault(),zn&&(Oe.add(t.code),Oe.add(t.key)),zn||!ne||48>n||n>57||(te[ee++]=n-48,Ft(Ln,"ENTER CODE: "+te.join("").padEnd(8,"-")),8===te.length&&($t(te.join("")),Ct(0))),"KeyN"===t.code&&h(),"KeyX"===t.code&&(Vn=!0)}),addEventListener("keyup",t=>{Oe.delete(t.code),Oe.delete(t.key)}),addEventListener("resize",()=>{Zn=innerWidth,jn=innerHeight}),addEventListener("wheel",t=>{t.preventDefault()},{passive:!1}),document.body.addEventListener("mouseenter",()=>{Fe.N=!0}),document.body.addEventListener("mouseleave",()=>{Fe.N=!1}),Gt(()=>{zn||(Ct(1,JSON.stringify([Xn,ce,Jn])),Ht(),Ot(In,!1),_n=!0,zn=!0)}),Gt(t=>{const n=JSON.parse(t);Xn=n[0],ce=n[1],c(),tt(!1),q(),Ot(Ln,!1),document.body.classList.add("started"),zn=!0,Qn=!1,_n=!0,ue=30;for(const t of n[2])it(t.x,t.y,t.r);for(const t of ce)l(t),Ft(a(t,2),Sn[t.t])}),Gt(t=>{const n=Yt(t);re=Bt(n[0]),ie=Bt(n[1]),ae=Bt(n[2]),xe=Ut(n[3]),q(),A()}),Gt(()=>{Qn=!0,ue=30,he=!1,Rt(`TEAM ${re+1} IT'S YOUR TURN`)}),Gt(t=>{const[n,e,o,s,c,i,r,a,d,f,u,y]=Yt(t),h=ce[Bt(n)];h&&(h.x=Ut(e),h.y=Ut(o),h.dx=Ut(s),h.dy=Ut(c),h.o=Ut(i),h.dir="1"===r?1:-1,h.F=Ut(d),h.l=Ut(f),h.r=Ut(u),h.K="1"===y,h.S!==Bt(a)&&(h.S=Bt(a),l(h)))}),Gt(t=>{const[n,e,o]=Yt(t),s=ce[Bt(n)];s&&p(s,"1"===e,"1"===o)}),Gt(t=>{const[n,e,o,s,c]=Yt(t),i=me.get(Bt(n));i&&(i.x=Ut(e),i.y=Ut(o),i.dx=Ut(s),i.dy=Ut(c))}),Gt(t=>{const[n]=Yt(t),e=me.get(Bt(n));e&&N(e)}),Gt(t=>{const[n,e,o,s,c]=Yt(t),i=pe.get(Bt(n));i&&(i.x=Ut(e),i.y=Ut(o),i.dx=Ut(s),i.dy=Ut(c))}),Gt(t=>{const[n]=Yt(t),e=pe.get(Bt(n));e&&j(e)}),Gt(t=>{const[n,e,o,s]=Yt(t);ct(Bt(n),Ut(e),Ut(o),Ut(s),1)}),Gt(t=>{const[n,e,o,s,c,i]=Yt(t);S(Bt(n),Ut(e),Ut(o),Bt(s),Ut(c),Ut(i))}),Gt(t=>{const[n,e,o,s,c,i]=Yt(t);C(Bt(n),Ut(e),Ut(o),Bt(s),Ut(c),Bt(i))}),Gt(t=>{const[n,e,o,s,c,i]=Yt(t);H(Bt(n),Ut(e),Ut(o),Bt(s),Ut(c),Bt(i))}),Gt(t=>{const[n,e,o,s]=Yt(t);R(Bt(n),Ut(e),Ut(o),Ut(s))}),Gt(t=>{const[n,e,o]=Yt(t);B(Bt(n),Ut(e),Ut(o))}),Gt(t=>{const[n,e,o,s,c,i]=Yt(t);D(Bt(n),Ut(e),Ut(o),Bt(s),Ut(c),Ut(i))}),Gt(t=>{const[n,e,o,s,c,i]=Yt(t);W(Bt(n),Ut(e),Ut(o),Bt(s),Ut(c),Ut(i))}),Gt(t=>{const[n,e,o,s,c,i]=Yt(t);k(Bt(n),Ut(e),Ut(o),Bt(s),Ut(c),Bt(i))}),Gt(t=>{const[n,e,o,s,c,i,r,a]=Yt(t);O(Bt(n),Ut(e),Ut(o),Bt(s),Ut(c),Ut(i),Ut(r),Ut(a))}),Gt(t=>{const[n,e,o,s,c,i]=Yt(t);Z(Bt(n),Ut(e),Ut(o),Bt(s),Ut(c),Ut(i))}),Gt(t=>{const[n,e,o,s]=Yt(t);b(Bt(n),Ut(e),Ut(o),Bt(s))}),Gt(t=>{const[n,e,o,s,c]=Yt(t);J(Bt(n),Ut(e),Ut(o),Bt(s),Ut(c))}),Gt(t=>{const[n,e,o,s,c,i]=Yt(t);v(Bt(n),Ut(e),Ut(o),Ut(s),Ut(c),Ut(i))}),Gt(t=>{const[n,e]=Yt(t);Ae.v=!0,Ae.to={x:Bt(n),y:Bt(e)}}),Gt(()=>{q()})</script>