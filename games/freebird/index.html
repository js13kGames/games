<!doctype html><title>Freebird - js13kGames 2012</title><meta content="width=device-width" name=viewport><style>body{margin:0;padding:0;background:#000;font:1em normal Rammetto One,Tahoma,sans-serif}canvas{display:block;margin:0 auto;background:#000}#o{display:none;position:absolute;width:20%;top:2em;left:40%;margin:2em auto;color:#f0f;text-align:center;font-size:140%}</style><link href=favicon.ico rel="shortcut icon" type=image/x-icon><canvas></canvas><div id=o>Please rotate your device</div><script>!function(){var r=!1,n=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(t){function i(){!r&&this.init&&this.init.apply(this,arguments)}var e,h=this.prototype,s=(r=!0,new this);for(e in r=!1,t)s[e]="function"==typeof t[e]&&"function"==typeof h[e]&&n.test(t[e])?function(e,s){return function(){var t=this._super,i=(this._super=h[e],s.apply(this,arguments));return this._super=t,i}}(e,t[e]):t[e];return((i.prototype=s).constructor=i).extend=arguments.callee,i}}(),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};var c={game:null,W:480,H:320,scale:1,entities:[],distance:0,score:0,hiScore:localStorage.hiScore||1024,newHiScore:!1,RATIO:null,currentWidth:null,currentHeight:null,canvas:null,ctx:null,ua:null,android:null,ios:null,lastTick:0,tick:0,time:0,fps:0,state:"intro",action:"Tap",fadeText:0,font:"Rammetto One, Verdana",gradients:{},debug:!1,pause:!1,tapped:!1,m:{x:null,y:null},offset:{top:0,left:0},preload:{img:["b.png","t.png"],loaded:0},plays:0,init:function(){var t,i;for(c.RATIO=c.W/c.H,c.currentWidth=c.W,c.currentHeight=c.H,c.canvas=document.getElementsByTagName("canvas")[0],c.canvas.width=c.W,c.canvas.height=c.H,c.ctx=c.canvas.getContext("2d"),c.ua=navigator.userAgent.toLowerCase(),c.android=-1<c.ua.indexOf("android"),c.ios=-1<c.ua.indexOf("iphone")||-1<c.ua.indexOf("ipad"),c.action=c.android||c.ios?"Tap":"Click",(t=c.ctx.createLinearGradient(0,0,0,c.H)).addColorStop(0,"#036"),t.addColorStop(.5,"#69a"),t.addColorStop(1,"yellow"),c.gradients.dawn=t,(t=c.ctx.createLinearGradient(0,0,0,c.H)).addColorStop(0,"#69a"),t.addColorStop(.5,"#9cd"),t.addColorStop(1,"#fff"),c.gradients.day=t,(t=c.ctx.createLinearGradient(0,0,0,c.H)).addColorStop(0,"#036"),t.addColorStop(.3,"#69a"),t.addColorStop(1,"pink"),c.gradients.dusk=t,(t=c.ctx.createLinearGradient(0,0,0,c.H)).addColorStop(0,"#036"),t.addColorStop(1,"black"),c.gradients.night=t,window.addEventListener("click",function(t){t.preventDefault(),c.tapped=!0,c.m.x=(t.pageX-c.offset.left)/c.scale,c.m.y=(t.pageY-c.offset.top)/c.scale},!1),window.addEventListener("touchstart",function(t){t.preventDefault(),c.tapped=!0,t=t.touches[0],c.m.x=(t.pageX-c.offset.left)/c.scale,c.m.y=(t.pageY-c.offset.top)/c.scale},!1),window.addEventListener("touchmove",function(t){t.preventDefault()},!1),window.addEventListener("touchend",function(t){t.preventDefault()},!1),window.addEventListener("keyup",function(t){return t.preventDefault(),32===t.keyCode&&(c.pause=!c.pause),!1},!1),t=0;t<c.preload.img.length;t+=1)(i=new Image).src=c.preload.img[t],i.onload=c.preload.loaded+=1;c.resize(),c.changeState(c.state),c.loop(),c.reset()},resize:function(){var t=document.getElementById("o"),i=c.canvas;c.currentHeight="Tap"===c.action?window.innerHeight:450,c.currentWidth=c.currentHeight*c.RATIO,(c.android||c.ios)&&(document.body.style.height=window.innerHeight+50+"px"),c.canvas.style.width=c.currentWidth+"px",c.canvas.style.height=c.currentHeight+"px",c.scale=c.currentWidth/c.W,c.offset.top=c.canvas.offsetTop,c.offset.left=c.canvas.offsetLeft,window.innerWidth<window.innerHeight?(i.style.display="none",t.style.display="block"):(i.style.display="block",t.style.display="none"),window.setTimeout(function(){window.scrollTo(0,1)},1)},loop:function(){requestAnimFrame(c.loop),c.game.update(),c.game.render(),c.tapped=!1,c.tick+=1,c.time=.02*(new Date).getTime(),c.fadeText=Math.sin(.2*c.time)+1,c.fps=~~(1e3/((new Date).getTime()-c.lastTick)),c.lastTick=(new Date).getTime()},changeState:function(t){c.reset(),c.game=new window["SF_"+t]({})},reset:function(){c.entities=[],c.level=0,c.pause=!1,c.tapped=!1,c._t=0}};window.addEventListener("load",c.init,!1),window.addEventListener("resize",c.resize,!1),c.Draw={clear:function(){c.ctx.clearRect(0,0,c.W,c.H)},rect:function(t,i,e,s,h){c.ctx.fillStyle=h,c.ctx.fillRect(t,i,e,s)},circle:function(t,i,e,s,h){h&&(c.ctx.strokeStyle=h,c.ctx.lineWidth=3),c.ctx.fillStyle=s,c.ctx.beginPath(),c.ctx.arc(t+5,i+5,e,0,2*Math.PI,!0),c.ctx.closePath(),h&&c.ctx.stroke(),c.ctx.fill()},star:function(t,i,e){var s,h,r=0,n=Math.PI/2*3,a=Math.PI/5;for(c.ctx.save(),c.ctx.beginPath(),c.ctx.moveTo(t,i-5),r=0;r<5;r++)s=t+5*Math.cos(n),h=i+5*Math.sin(n),c.ctx.lineTo(s,h),n+=a,s=t+8*Math.cos(n),h=i+8*Math.sin(n),c.ctx.lineTo(s,h),n+=a;c.ctx.lineTo(t,i-5),c.ctx.fillStyle=e,c.ctx.fill(),c.ctx.closePath(),c.ctx.restore()},text:function(t,i,e,s,h,r){c.ctx.font="bold "+s+"px "+c.font,i=i||c.W/2-c.ctx.measureText(t).width/2,r&&(c.ctx.fillStyle=r,c.ctx.fillText(t,i-2,e+2)),c.ctx.fillStyle=h,c.ctx.fillText(t,i,e)}},c.Game=Class.extend({init:function(){},update:function(){for(i=0;i<c.entities.length;i+=1)c.entities[i].update(),c.entities[i].checkCollision&&c.entities[i].collides(c.entities[0])&&(c.entities[i].hit(),c.entities[0].hit(c.entities[i].strength,c.entities[i].name)),c.entities[i].remove&&c.entities.splice(i,1)},render:function(){for(i=0;i<c.entities.length;i+=1)c.entities[i].render()}}),c.Anim=function(t){this.xOff=(t=t||{}).xOff||0,this.yOff=t.yOff||0,this.frames=t.frames||0,this.currentFrame=t.currentFrame||0,this.nextAnim=t.nextAnim||!1,this.frameSpeed=t.frameSpeed||3},c.Particle=function(t,i,e,s,h){this.x=t,this.y=i,this.r=e,this.col=s,this.type=h||"circle",this.name="particle",this.dir=1<2*Math.random()?1:-1,this.vx=~~(4*Math.random())*this.dir,this.vy=~~(7*Math.random()),this.remove=!1,this.update=function(){this.x+=this.vx,this.y-=this.vy,this.vx*=.99,this.vy*=.99,this.vy-=.35,this.y>c.H&&(this.remove=!0)},this.render=function(){"star"===this.type?c.Draw.star(this.x,this.y,this.col):c.Draw.circle(this.x,this.y,this.r,this.col)}},c.Sprite=Class.extend({init:function(t){this.x=t.x,this.y=t.y,this.w=t.w,this.h=t.h,this.vx=t.vx,this.vy=t.vy,this.xOff=t.xOff||0,this.yOff=t.yOff||0,this.anims=[],this.checkCollision=this.killOnRespawn=this.remove=!1,this.strength=-1,this.r=this.w/2,this.q=this.r/2},update:function(){this.x+=this.vx,this.y+=this.vy,this.vx*=.99,this.vy&&(this.vy*=.99,this.vy+=.04)},render:function(){if(this.img.src){this.animate();try{c.ctx.drawImage(this.img,this.xOff,this.yOff,this.w,this.h,~~this.x,~~this.y,this.w,this.h)}catch(t){}}else c.Draw.rect(this.x,this.y,this.w,this.h,this.col)},animate:function(){c.pause||(0==c.tick%this.anims[this.anim].frameSpeed&&(this.anims[this.anim].currentFrame+=1),this.anims[this.anim].currentFrame>this.anims[this.anim].frames&&(this.anims[this.anim].currentFrame=0,this.anims[this.anim].nextAnim)&&this.changeAnim(this.anims[this.anim].nextAnim),this.xOff=this.anims[this.anim].xOff+this.anims[this.anim].currentFrame*this.w)},changeAnim:function(t){this.anim=t,this.anims[this.anim].currentFrame=0},collides:function(t){return this.left=this.x,this.right=this.x+this.w,this.top=this.y,this.bottom=this.y+this.h,t.left=t.x,t.right=t.x+t.w,t.top=t.y,t.bottom=t.y+t.h,!(this.bottom<t.top||this.top>t.bottom||this.right<t.left||this.left>t.right)},respawn:function(){this.killOnRespawn&&(this.remove=!0)},hit:function(){}}),c.levels=[],c.levels[1]={bg:{grad:"day",type:"hills",col:"#002000"},entities:{Coin:1,Tree:2,Fly:2}},c.levels[2]={bg:{grad:"day",type:"hills",col:"#003000"},entities:{Coin:1,Tree:3,Fly:2}},c.levels[3]={bg:{grad:"day",type:"hills",col:"#004000"},entities:{Coin:1,Tree:2,Fly:2,Hornet:2,Powerup:1}},c.levels[4]={bg:{grad:"dusk",type:"hills",col:"#001000"},entities:{Coin:2,Tree:2,Hornet:2,Mozzie:1}},c.levels[5]={bg:{grad:"dusk",type:"hills",col:"#001000"},entities:{Coin:2,Hornet:2,Tree:2,Mozzie:1,Powerup:1}},c.levels[6]={bg:{grad:"night",type:"stars",col:"#fff"},entities:{Coin:2,Tree:2,Hornet:2,Snapper:2}},c.levels[7]={bg:{grad:"night",type:"stars",col:"#fff"},entities:{Coin:2,Tree:2,Mozzie:2,Vamp:1,Powerup:1}},c.levels[8]={bg:{grad:"dawn",type:"city",col:"#222"},entities:{Coin:2,Snapper:1,Vamp:1,Mozzie:1}},c.levels[9]={bg:{grad:"day",type:"city",col:"#444"},entities:{Coin:2,Tree:2,Hornet:4,Powerup:1}},c.levels[10]={bg:{grad:"day",type:"city",col:"#444"},entities:{Coin:2,Tree:1,Vamp:1,Mozzie:1,Hornet:2}},c.levels[11]={bg:{grad:"dusk",type:"city",col:"#444"},entities:{Coin:2,Hornet:4,Vamp:2}},c.levels[12]={bg:{grad:"night",type:"stars",col:"#fff"},entities:{Coin:3,Tree:4,Hornet:4,Snapper:2}},c.levels[13]={bg:{grad:"dawn",type:"rainbow",col:"#444"},entities:{Coin:3,Tree:1,Fly:1,Hornet:1,Mozzie:1,Snapper:1,Vamp:1,Powerup:1}},c.Bg={hills:function(t){c.Draw.circle(0,c.H+30,100,t),c.Draw.circle(160,c.H+30,120,t),c.Draw.circle(300,c.H+30,90,t),c.Draw.circle(420,c.H+30,140,t)},stars:function(){c.Draw.circle(100,100,1,"#fff"),c.Draw.circle(150,30,1,"#fff"),c.Draw.circle(220,60,1,"#fff"),c.Draw.circle(300,50,1,"#fff"),c.Draw.circle(430,70,30,"#fff"),c.Draw.circle(415,70,30,"#012")},city:function(t){c.Draw.rect(0,c.H-30,c.W,100,t),c.Draw.rect(30,c.H-100,30,100,t),c.Draw.rect(70,c.H-140,50,140,t),c.Draw.rect(90,c.H-50,90,140,t),c.Draw.rect(160,c.H-140,40,140,t),c.Draw.rect(160,c.H-80,100,100,t),c.Draw.rect(220,c.H-130,20,140,t),c.Draw.rect(300,c.H-170,40,140,t),c.Draw.rect(350,c.H-120,60,100,t),c.Draw.rect(410,c.H-140,40,140,t)}},SF_intro=c.Game.extend({init:function(t){this._super(t)},update:function(){},render:function(){c._t=c._t||1,c._d=c._d||-1,c._r=c._r||.01,c._t+=c._r*c._d,c._t<=.01&&(c._d*=-1,c._r=.01),c.Draw.rect(0,0,c.W,c.H,"#333"),c.Draw.text("Starfish Arcade",!1,100,34,"green"),c.Draw.text("presents...",!1,150,24,"green"),c.Draw.rect(0,0,c.W,c.H,"rgba(0,0,0,"+c._t+")"),(1<=c._t||c.tapped)&&(c.Draw.clear(),c.changeState("splash"))}}),c.intro=function(){},SF_splash=c.Game.extend({init:function(t){this._super(t),this.level=c.levels[1],this.bird=new Image,this.bird.src="b.png"},update:function(){c._t-=.02,c.tapped&&(c.changeState("tutorial"),c.tapped=!1),this._super()},render:function(){c.Draw.clear(),c.Draw.rect(0,0,c.W,c.H,c.gradients.day),c.Bg.hills("#001000"),c.Draw.text("Freebird",!1,100,44,"#fff","#000"),c.Draw.text("13k to freedom!",!1,130,20,"#fff","rgba(0,0,0,0.5)"),c.Draw.text(c.action+" to Start",!1,180,14,"rgba(255,0,255,"+c.fadeText+")");try{c.ctx.drawImage(this.bird,128,0,32,32,130,c.H-32,32,32)}catch(t){}c.Draw.text("HiScore:  "+c.hiScore,!1,30,14,"rgba(255,255,255,1)"),c.Draw.text("by @eoinmcg",390,c.H-20,10,"rgba(255,255,255,1)"),this._super()}}),SF_tutorial=c.Game.extend({init:function(t){this._super(t),this.level=c.levels[1],this.bird=new Image,this.bird.src="b.png",this.coin=new c.Coin({}),this.coin.x=200,this.coin.y=c.H-140,this.baddie=new c.Fly({}),this.baddie.x=300,this.baddie.y=c.H-140},update:function(){c._t-=.02,(c.tapped||c._t<-8||2<=c.plays)&&(c.changeState("play"),c.tapped=!1),this._super()},render:function(){c.Draw.clear(),c.Draw.rect(0,0,c.W,c.H,c.gradients.day),c.Bg.hills("#001000"),c._t<-.5?this.step_1.apply(this):c.ctx.drawImage(this.bird,128,0,32,32,130,c.H-32,32,32),c._t<-2&&this.step_2.apply(this),c._t<-4&&this.step_3.apply(this),c._t<-6&&this.step_4.apply(this),c.Draw.text("How To Play",!1,40,22,"#f0f"),c.Draw.text("SKIP >",410,c.H-20,12,"rgba(255,255,255,1)"),this._super()},step_1:function(){c.Draw.text("1. "+c.action+" screen to Fly",!1,70,18,"#000","rgba(255,255,255,0.4)");try{c.ctx.drawImage(this.bird,0,0,32,32,130,c.H-128,32,32)}catch(t){}},step_2:function(){c.Draw.text("2. Eat to keep your strength up",!1,100,18,"#000","rgba(255,255,255,0.4)"),this.coin.render()},step_3:function(){c.Draw.text("3. Avoid the baddies",!1,130,18,"#000","rgba(255,255,255,0.4)"),this.baddie.render()},step_4:function(){c.Draw.text("4. Fly 13km to freedom!",!1,160,18,"#000","rgba(255,255,255,0.4)"),this.baddie.render()}}),SF_play=c.Game.extend({init:function(t){this._super(t),c.entities=[],c.entities.push(new c.Bird({})),c.p1=c.entities[0],c.p1.health=100,c.plays+=1},update:function(){window.scrollTo(0,1);var t,i=0==c.distance%1024;if(!0!==c.pause){if(this._super(),c.distance+=2,c.p1.health-=.04,100<c.p1.health&&(c.p1.health=100),c.distance>c.hiScore&&!1===c.newHiScore){for(c.newHiScore=!0,t=0;t<30;t+=1)c.entities.push(new c.Particle(c.W/2,c.H/2-100,10,"rgba(255,0,255,1)","star"));c.entities.push(new c.Text({str:"New Hi Score",col:"#f0f",max:30,size:30,fade:.007}))}13312<c.distance&&c.changeState("victory"),i&&(c.level+=1,this.levelUp()),c.p1.dead&&c.changeState("gameOver")}},render:function(){var t=100<c.p1.health?100:c.p1.health,i=(s=c.levels[c.level]||c.levels[1]).bg.grad||"day",e=s.bg.col,s=s.bg.type;c.Draw.clear(),c.Draw.rect(0,0,c.W,c.H,c.gradients[i]),c.Bg[s](e),this._super(),c.Draw.rect(19,49,102,18,"#000"),c.Draw.rect(20,50,t,16,"#c20"),c.Draw.rect(20,58,t,8,"rgba(255,255,255,0.2)"),c.Draw.text(~~c.distance+"m",20,30,14,"#fff"),c.debug&&(c.Draw.text("FPS "+c.fps,350,15,12,"#fff"),c.Draw.text("Entities "+c.entities.length,350,30,12,"#fff")),!0===c.pause&&c.Draw.text("PAUSED",!1,130,20,"rgba(255,255,255,"+c.fadeText+")")},levelUp:function(){var t,i,e;for(void 0===(e=c.levels[c.level])&&(e=c.levData[1]),i=0;i<c.entities.length;i+=1)"function"==typeof c.entities[i].respawn&&(c.entities[i].killOnRespawn=!0);for(t in e.entities)if(e.entities.hasOwnProperty(t))for(i=0;i<e.entities[t];i+=1)c.entities.push(new c[t]({}));c.entities.push(new c.Text({x:100,str:"Level "+c.level,col:"night"===e.bg.grad?"#fff":"#000"}))}}),SF_gameOver=c.Game.extend({init:function(t){this._super(t),this.button={x:100,y:230,w:c.W-200,h:50,col:"#00aced",text:{str:"Tweet Score",x:!1,y:260,size:18,col:"#000"},pressed:function(t,i){return t>this.x&&t<this.x+this.w&&i>this.y&&i<this.y+this.h}},this.tweet=new Image,this.tweet.src="t.png"},render:function(){var t=this.button;if(c.Draw.rect(0,0,c.W,c.H,"rgba(255,0,0,0.01)"),c.Draw.rect(0,50,c.W,70,"#900"),c.Draw.text("Game Over",!1,100,44,"rgba(255,255,255,"+c.fadeText+")"),c.newHiScore&&(c.hiScore=c.distance,localStorage.hiScore=c.hiScore,c.Draw.rect(0,120,c.W,50,"#900"),c.Draw.text("New HiScore!",!1,150,20,"#fff")),c.tapped&&60<c._t){if(!0===t.pressed(c.m.x,c.m.y))return void(window.location="https://twitter.com/intent/tweet?&text=I+escaped+"+c.distance+"+m+in+in+Freebird+-+http://arcade.starfish.ie/freebird+#js13kgames");c.distance=0,c.newHiScore=!1,c.changeState("splash")}c.Draw.rect(t.x,t.y,t.w,t.h,t.col),c.Draw.text(t.text.str,!1,t.text.y,t.text.size,t.text.col),c.ctx.drawImage(this.tweet,t.x+10,t.y+8),c._t+=1}}),SF_victory=c.Game.extend({init:function(t){this._super(t),this.fireworks="tomato lightblue yellow orange lightgreen greenyellow plum white".split(" "),this.timer=0,this.setTimer(),this.bird=new Image,this.bird.src="b.png"},update:function(){c.tapped&&60<c._t&&(c.hiScore=c.distance,localStorage.hiScore=c.hiScore,c.distance=0,c.newHiScore=!1,c.changeState("splash")),--this.timer,this._super(),this.timer<=0&&this.setTimer()},render:function(){c.Draw.rect(0,0,c.W,c.H,"#333"),c.Draw.text("Victory",!1,100,44,"rgba(255,0,255,"+c.fadeText+")"),c.Draw.text("You Win!",!1,150,30,"#f0f"),this._super();try{c.ctx.drawImage(this.bird,128,0,32,32,100,c.H-32,32,32)}catch(t){}},setTimer:function(){var t=~~(Math.random()*this.fireworks.length);this.timer=5*Math.random(),c.entities.push(new c.Particle(c.W/2,-10,3,this.fireworks[t],"star"))}}),c.Text=c.Sprite.extend({init:function(t){this._super(t),this.name="text",this.max=t.max||30,this.size=t.size||5,this.col=t.col||"#000",this.speed=t.speed||.5,this.fade=t.fade||.02,this.opacity=1,this.str=t.str,this.x=-c.W,this.y=t.y||c.H/2,this.centerX=c.W/2,this.shadow=t.shadow||!1,this.collides=!1},update:function(){this.size>=this.max?(this.size=this.max,this.opacity-=this.fade,this.y-=.5):this.size+=this.speed,this.opacity<0&&(this.remove=!0),c.ctx.font="bold "+this.size+"px "+c.font,this.x=this.centerX-c.ctx.measureText(this.str).width/2},render:function(){c.ctx.globalAlpha=this.opacity,this.shadow&&c.Draw.text(this.str,this.x+2,this.y+2,this.size,this.shadow),c.Draw.text(this.str,this.x,this.y,this.size,this.col),c.ctx.globalAlpha=1}}),c.Bird=c.Sprite.extend({init:function(t){this._super(t),this.img=new Image,this.img.src="b.png",this.col=t.col||"green",this.x=150,this.y=c.H-40,this.h=this.w=32,this.vx=0,this.vy=-1,this.anims.flap=new c.Anim({xOff:0,yOff:0,frames:2,frameSpeed:3,nextAnim:"glide"}),this.anims.glide=new c.Anim({xOff:0,yOff:0,frames:0,frameSpeed:3}),this.anims.run=new c.Anim({xOff:96,yOff:0,frames:1,frameSpeed:7}),this.anims.stand=new c.Anim({xOff:128,yOff:0,frames:0}),this.anims.hurt=new c.Anim({xOff:192,yOff:0,frames:0,nextAnim:"glide"}),this.anims.dead=new c.Anim({xOff:160,yOff:0,frames:0}),this.anim="glide",this.name="bird",this.health=100,this.r=this.w/2,this.invincible=!1,this.counter=0},update:function(){c.tapped&&0<this.health&&(this.vy+=-1.7,this.changeAnim("flap")),this._super(),this.health<=0?(this.health=0,this.changeAnim("dead")):this.y>=c.H-this.h?(this.y=c.H-this.h,this.vy=0,this.changeAnim("run")):this.y<=0&&0<this.health&&(this.y=0,this.vy=this.vy/2*-1),0<this.counter&&(this.counter-=.3),this.counter<=0&&(this.invincible=!1),this.health<=0&&this.y>=c.H-this.h&&(this.dead=!0)},render:function(){var t;this._super(),this.invincible&&(t=this.counter/100,c.Draw.circle(this.x+this.r+2,this.y+this.r,this.w/2,"rgba(255,0,255,0.3)","rgba(85,0,85, "+t+")"))},hit:function(t,i){t<0?!1===this.invincible&&0<this.health&&(this.health+=t,this.changeAnim("hurt"),c.entities.push(new c.Particle(this.x,this.y,2,this.col))):this.health+=t,"powerup"===i&&(this.counter=100,this.invincible=!0)}}),c.Coin=c.Sprite.extend({init:function(t){this._super(t),this.h=this.w=16,this.name="coin",this.checkCollision=!0,this.strength=15,this.respawn(),this.sparkle=0},update:function(){this.sparkle=c.fadeText/4,this.x+=this.vx,this.x<0-this.w&&this.respawn()},render:function(){c.Draw.circle(this.x,this.y,this.w/2,"#ffd700","brown"),c.Draw.circle(this.x,this.y,this.w/2,"rgba(255,255,255,"+this.sparkle+")")},respawn:function(){this._super(),this.x=~~(Math.random()*c.W)+c.W,this.y=~~(Math.random()*(c.H-3*this.h))+this.h,this.vx=-3,this.vy=0},hit:function(){for(var t=0;t<3;t+=1)c.entities.push(new c.Particle(this.x,this.y,3,"rgba(255,215,0,"+2*Math.random()+")","star"));this.respawn()}}),c.Tree=c.Sprite.extend({init:function(t){this._super(t),this.name="tree",this.respawn(),this.checkCollision=!0},update:function(){this.x+=this.vx,this.x<0-this.w&&this.respawn()},render:function(){c.Draw.circle(this.x+this.r,this.y+this.r-10,this.r,"green","#050"),c.Draw.circle(this.x+this.r/2,this.y+this.r-10,this.r/3,"rgba(0,0,0,0.08)"),c.Draw.rect(this.x+this.r,this.y+this.r,10,this.r,"brown","#d20")},respawn:function(){this._super(),this.h=this.w=32+~~(64*Math.random()),this.r=this.w/2,this.x=~~(Math.random()*c.W)+c.W,this.y=c.H-this.h,this.vx=-3,this.vy=0}}),c.Hornet=c.Sprite.extend({init:function(t){t.w=16,t.h=12,t.vx=1,this._super(t),this.name="hornet",this.r=this.h/2,this.q=Math.ceil(this.r/2),this.checkCollision=!0,this.strength=-5,this.respawn()},update:function(){this.x+=this.vx,this.x<0-this.w&&this.respawn()},render:function(){var t=c.ctx,i=this.x+this.q,e=this.y+this.q;c.Draw.circle(i,e,this.r,"#000"),c.Draw.circle(i-5,e-2,2,"#fff"),c.Draw.circle(i+this.r,e,this.r,"#000"),c.Draw.rect(i+this.r,e-this.q+2,this.r,this.h,"yellow"),t.beginPath(),t.moveTo(i+this.w,e+this.r),t.lineTo(i+this.w,e),t.lineTo(i+this.w+this.q+this.q,e+this.r),t.fillStyle="#000",t.fill(),c.Draw.circle(i+5,e-5,this.q+2,"#69a")},respawn:function(){this._super(),this.x=~~(Math.random()*c.W)+c.W,this.y=10+~~(200*Math.random()),this.vx=-7,this.vy=0}}),c.Fly=c.Sprite.extend({init:function(t){t.w=22,t.h=22,t.vx=1,this._super(t),this.name="fly",this.r=this.h/2,this.q=Math.ceil(this.r/2),this.checkCollision=!0,this.respawn(),this.flap=0,this.strength=-2},update:function(){this.x+=this.vx,this.x<0-this.w&&this.respawn(),this.flap=c.tick%3?3:0},render:function(){var t=c.ctx;t.beginPath(),t.moveTo(this.x+this.q,this.y+this.q),t.lineTo(this.x+this.q,this.y+this.h-3),t.lineTo(this.x-this.q,this.y+this.h/2),t.fillStyle="orange",t.strokeStyle="#c02",t.stroke(),t.fill(),c.Draw.circle(this.x+16,this.y+this.flap,6,"#666"),c.Draw.circle(this.x+this.r,this.y+this.r,this.r,"#333","#111"),c.Draw.circle(this.x+18,this.y+2+this.flap,7,"#999"),c.Draw.circle(this.x,this.y+4,4,"#fff"),c.Draw.circle(this.x-1,this.y+4,1,"#600")},respawn:function(){this._super(),this.x=~~(Math.random()*c.W)+c.W,this.y=10+~~(200*Math.random()),this.vx=-4,this.vy=0}}),c.Snapper=c.Sprite.extend({init:function(t){this._super(t),this.name="snapper",this.maxH=0,this.yDir=-1,this.respawn(),this.strength=-5,this.checkCollision=!0},update:function(){this.x+=this.vx,(this.y<this.maxH||this.y>c.H)&&(this.yDir*=-1),this.x<0-this.w&&this.respawn(),this.y+=this.yDir*this.vx},render:function(){c.Draw.rect(this.x+this.r,this.y+this.r,5,c.H-this.y,"purple"),c.Draw.circle(this.x+this.r,this.y+this.r+this.q,this.r,"purple","#000"),c.Draw.circle(this.x+this.q,this.y+this.r+4,this.q/2,"#fff"),c.Draw.circle(this.x+this.q+this.r,this.y+this.r+4,this.q/2,"#fff"),c.Draw.circle(this.x+this.r,this.y+this.r+2,this.q,"purple")},respawn:function(){this._super(),this.h=this.w=32+~~(32*Math.random()),this.r=this.w/2,this.q=this.r/2,this.maxH=this.getMaxH(),this.x=~~(Math.random()*c.W)+c.W,this.y=c.H-this.h,this.vx=-3,this.vy=0},getMaxH:function(){return 50+~~(Math.random()*(c.H/2))}}),c.Mozzie=c.Sprite.extend({init:function(t){t.w=16,t.h=10,t.vx=1,this._super(t),this.name="mozzie",this.r=this.h/2,this.q=Math.ceil(this.r/2),this.checkCollision=!0,this.respawn(),this.strength=-5,this.offScreen=!0},update:function(){this.x+=this.vx,this.x>c.W+this.w&&this.respawn(),this.offScreen=this.x<0},render:function(){var t=c.ctx,i=this.x+this.q,e=this.y+this.q;this.offScreen?(c.Draw.circle(16,e,this.h,"rgba(200,0,0,"+c.fadeText+")"),c.Draw.text("!",18,e+10,14,"rgba(255, 255, 255, "+c.fadeText+")")):(c.Draw.circle(i,e,this.r,"#000"),c.Draw.circle(i+this.r,e,this.r,"#000"),c.Draw.rect(i+this.r,e-this.q+2,this.r,this.h,"black"),t.beginPath(),t.moveTo(i+this.w-3,e+this.q),t.lineTo(i+this.w,e+this.r),t.lineTo(i+this.w+this.r+this.q,e+this.r),t.fillStyle="#000",t.fill(),c.Draw.circle(i,e-5,this.q+2,"rgba(255,255,255,0.5)"),c.Draw.circle(this.x+this.w-2,this.y,2,"red"))},respawn:function(){this._super(),this.x=-1*(~~(Math.random()*c.W)+c.W),this.y=10+~~(200*Math.random()),this.vx=5,this.vy=0}}),c.Vamp=c.Sprite.extend({init:function(t){this._super(t),this.w=8,this.h=0,this.r=this.w/2,this.yDir=1,this.maxH=0,this.speed=3,this.name="vamp",this.respawn(),this.checkCollision=!0},update:function(){this.x+=this.vx,(this.h>this.maxH||this.h<0)&&(this.yDir*=-1),this.x<c.W&&(this.h+=this.yDir*this.speed),this.x<0-this.w&&this.respawn()},render:function(){c.Draw.rect(this.x,this.y,this.w,this.h,"#c20"),c.Draw.circle(this.x-1,this.h-this.r,4,"#c20"),c.Draw.circle(this.x-2,0,12,"darkgreen"),c.Draw.circle(this.x-this.w,4,4,"white"),c.Draw.circle(this.x+this.r,4,4,"white"),c.Draw.circle(this.x-2,0,6,"darkgreen")},respawn:function(){this._super(),this.x=~~(Math.random()*c.W)+c.W,this.y=0,this.r=this.w/2,this.q=this.r/2,this.maxH=this.getMaxH(),this.h=32,this.vx=-3,this.vy=0},getMaxH:function(){return 50+~~(Math.random()*(c.H/2))}})</script>