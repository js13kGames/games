<!doctype html><meta name=viewport content="width=device-width"><title>Cash Cats 13 - js13kGames 2015</title><style>*{box-sizing:border-box;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}body,html{height:100%;margin:0;font:14px system-ui;background:#0e1120;color:#e8ecff;overflow-x:hidden}#app{padding:8px}#layout{display:grid;align-items:start;gap:8px;margin:0 auto}#gameWindow{position:relative;width:780px;height:460px;border:1px solid #23264b;border-radius:12px;background:#101330;overflow:hidden}#title{position:absolute;left:50%;top:6px;transform:translateX(-50%);color:#cfe0ff;pointer-events:none;user-select:none}#base{position:absolute;left:10px;bottom:10px;width:170px;height:100px;border:1px solid #2b3569;border-radius:12px;display:flex;align-items:center;justify-content:center;background:#151a39}#baseLabel{position:absolute;left:8px;top:6px}#waterArea{position:absolute;right:6px;bottom:6px;font-size:22px}.coin{position:absolute;font-size:24px;cursor:pointer;user-select:none}.cat{position:absolute;transform:translate(-50%,-50%);display:flex;flex-direction:column;align-items:center;gap:1px;-webkit-tap-highlight-color:transparent;outline:0;touch-action:manipulation}.catSprite{font-size:30px;line-height:1;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:transparent;outline:0;cursor:pointer}.badge{position:absolute;top:-26px;right:-10px;font-size:12px;border:1px solid #384177;border-radius:10px;padding:2px 5px;background:#1a2044;color:#cfe0ff;white-space:nowrap;transform:translateY(-10px);display:none}.catName{font-size:11px;color:#cbd4ff}.bars{display:flex;gap:6px}.bar{width:46px;height:6px;background:#232845;border:1px solid #2b3569;border-radius:8px;overflow:hidden}.barFill{display:block;height:100%;width:0%;background:linear-gradient(90deg,#45d483,#39b36e)}.barLabel{font-size:11px;color:#9aa3c7;margin-top:2px;user-select:none}.heart{position:absolute;pointer-events:none;animation:heartFloat .9s ease-out forwards}@keyframes heartFloat{0%{transform:translate(-50%,-50%) translateY(0) scale(.7);opacity:0}10%{opacity:1}100%{transform:translate(-50%,-50%) translateY(-34px) scale(1.1);opacity:0}}.upgradePanel{border:1px solid #262d55;border-radius:12px;padding:8px;background:#121737;margin-bottom:8px}.upgradeButton{border:1px solid #384177;background:#1a2044;color:#cfe0ff;padding:2px 4px;border-radius:6px;cursor:pointer;font-size:9px}#stats{display:flex;gap:10px;align-items:center;color:#cfe0ff;font-weight:600}#fish{position:absolute;left:6px;bottom:6px;font-size:22px;cursor:grab;user-select:none;z-index:10;pointer-events:auto}#gold{position:absolute;top:10px;left:10px;background:rgba(26,32,68,.8);border:1px solid #2b3569;border-radius:8px;padding:4px 8px;color:#cfe0ff;font-weight:600}#upgrades{position:absolute;top:10px;right:10px;background:rgba(26,32,68,.8);border:1px solid #2b3569;border-radius:8px;padding:6px;color:#cfe0ff;font-weight:600;max-width:600px;display:grid;grid-template-columns:repeat(5,1fr);gap:8px;font-size:11px;display:none}#upgrades>div:first-child{grid-column:1;grid-row:1}#upgrades>div:nth-child(2),#upgrades>div:nth-child(3),#upgrades>div:nth-child(4){grid-column:2}#upgrades>div:nth-child(5),#upgrades>div:nth-child(6),#upgrades>div:nth-child(7){grid-column:3}#upgrades>div:nth-child(10),#upgrades>div:nth-child(8),#upgrades>div:nth-child(9){grid-column:4}#upgrades>div:nth-child(11),#upgrades>div:nth-child(12),#upgrades>div:nth-child(13){grid-column:5}#upgrades>div:nth-child(2){grid-row:1}#upgrades>div:nth-child(3){grid-row:2}#upgrades>div:nth-child(4){grid-row:3}#upgrades>div:nth-child(5){grid-row:1}#upgrades>div:nth-child(6){grid-row:2}#upgrades>div:nth-child(7){grid-row:3}#upgrades>div:nth-child(8){grid-row:1}#upgrades>div:nth-child(9){grid-row:2}#upgrades>div:nth-child(10){grid-row:3}#upgrades>div:nth-child(11){grid-row:1}#upgrades>div:nth-child(12){grid-row:2}#upgrades>div:nth-child(13){grid-row:3}#toggle{position:absolute;top:10px;right:10px;z-index:20;user-select:none}#toggle.hidden{display:none}#toggleButton{font-size:24px;cursor:pointer;transition:opacity .2s;padding:4px}#toggleButton:hover{opacity:.7}#instructions{position:absolute;bottom:10px;right:10px;font-size:10px;color:#9aa3c7;text-align:right;pointer-events:none;user-select:none}.coin{min-width:32px;min-height:32px;display:flex;align-items:center;justify-content:center;font-size:28px}.upgradeButton{min-height:32px;min-width:60px;padding:6px 8px;font-size:10px;touch-action:manipulation}#fish{min-width:40px;min-height:40px;display:flex;align-items:center;justify-content:center;font-size:28px;touch-action:manipulation}.cat{min-width:60px;min-height:60px}.catSprite{font-size:36px;min-width:40px;min-height:40px;display:flex;align-items:center;justify-content:center}.bars{gap:8px}.bar{width:52px;height:8px}.barLabel{font-size:12px;margin-top:3px}@media (max-width:1000px){#layout{grid-template-columns:1fr}#gameWindow{width:100%;max-width:780px;height:auto;min-height:360px}#instructions{font-size:9px;bottom:8px;right:8px}#upgrades{max-width:500px;font-size:10px;gap:6px;padding:4px;grid-template-columns:repeat(5,1fr)}.upgradeButton{min-height:28px;min-width:50px;padding:4px 6px;font-size:9px}}@media (max-width:600px) and (orientation:portrait){#gameWindow{height:400px;min-height:400px;margin-bottom:60px}#instructions{position:fixed;bottom:10px;left:50%;transform:translateX(-50%);text-align:center;font-size:10px;color:#9aa3c7;z-index:30;display:block;background:rgba(14,17,32,.9);padding:8px 12px;border-radius:8px;border:1px solid #2b3569}.coin{min-width:40px;min-height:40px;font-size:32px}.upgradeButton{min-height:36px;min-width:70px;padding:8px 10px;font-size:11px;margin:2px}.cat{min-width:70px;min-height:70px}.catSprite{font-size:42px;min-width:50px;min-height:50px}.bars{gap:10px}.bar{width:60px;height:10px}.barLabel{font-size:14px;margin-top:4px}#fish{min-width:50px;min-height:50px;font-size:32px}#upgrades{position:relative;top:auto;right:auto;max-width:100%;margin:10px;grid-template-columns:repeat(5,1fr);font-size:12px;gap:10px}#toggle{position:absolute;top:10px;right:10px}#toggleButton{font-size:28px}#gold{font-size:14px;padding:6px 10px}#base{width:140px;height:80px}#baseLabel{font-size:12px}#waterArea{font-size:20px}}@media (max-width:480px){#gameWindow{height:350px;min-height:350px;margin-bottom:60px}#instructions{position:fixed;bottom:10px;left:50%;transform:translateX(-50%);text-align:center;font-size:9px;color:#9aa3c7;z-index:30;display:block;background:rgba(14,17,32,.9);padding:6px 10px;border-radius:6px;border:1px solid #2b3569}.coin{min-width:36px;min-height:36px;font-size:28px}.upgradeButton{min-height:32px;min-width:60px;padding:6px 8px;font-size:10px}.cat{min-width:60px;min-height:60px}.catSprite{font-size:36px;min-width:40px;min-height:40px}.bars{gap:8px}.bar{width:52px;height:8px}.barLabel{font-size:12px;margin-top:3px}#fish{min-width:44px;min-height:44px;font-size:28px}#upgrades{font-size:11px;gap:8px;grid-template-columns:repeat(5,1fr)}#gold{font-size:13px;padding:5px 8px}#base{width:120px;height:70px}#baseLabel{font-size:11px}#waterArea{font-size:18px}#toggle{position:absolute;top:10px;right:10px}#toggleButton{font-size:24px}}@media (max-width:600px) and (orientation:landscape){#gameWindow{height:250px;min-height:250px;margin-bottom:40px}#instructions{position:fixed;bottom:5px;left:50%;transform:translateX(-50%);text-align:center;font-size:8px;color:#9aa3c7;z-index:30;display:block;background:rgba(14,17,32,.9);padding:4px 8px;border-radius:4px;border:1px solid #2b3569}.coin{min-width:32px;min-height:32px;font-size:24px}.upgradeButton{min-height:28px;min-width:50px;padding:4px 6px;font-size:9px}.cat{min-width:50px;min-height:50px}.catSprite{font-size:30px;min-width:35px;min-height:35px}.bars{gap:6px}.bar{width:45px;height:6px}.barLabel{font-size:10px;margin-top:2px}#fish{min-width:38px;min-height:38px;font-size:24px}#upgrades{position:relative;top:auto;right:auto;max-width:100%;margin:10px;grid-template-columns:repeat(5,1fr);font-size:10px;gap:6px;display:grid}#gold{font-size:12px;padding:4px 6px}#base{width:100px;height:60px}#baseLabel{font-size:10px}#waterArea{font-size:16px}#toggle{position:absolute;top:10px;right:10px}#toggleButton{font-size:20px}}@media (max-width:480px) and (orientation:landscape){#gameWindow{height:200px;min-height:200px;margin-bottom:30px}#instructions{position:fixed;bottom:3px;left:50%;transform:translateX(-50%);text-align:center;font-size:7px;color:#9aa3c7;z-index:30;display:block;background:rgba(14,17,32,.9);padding:3px 6px;border-radius:3px;border:1px solid #2b3569}.coin{min-width:28px;min-height:28px;font-size:20px}.upgradeButton{min-height:24px;min-width:40px;padding:3px 5px;font-size:8px}.cat{min-width:45px;min-height:45px}.catSprite{font-size:26px;min-width:30px;min-height:30px}.bars{gap:4px}.bar{width:40px;height:5px}.barLabel{font-size:9px;margin-top:1px}#fish{min-width:32px;min-height:32px;font-size:20px}#upgrades{position:relative;top:auto;right:auto;max-width:100%;margin:8px;grid-template-columns:repeat(5,1fr);font-size:9px;gap:4px;display:grid}#gold{font-size:11px;padding:3px 5px}#base{width:80px;height:50px}#baseLabel{font-size:9px}#waterArea{font-size:14px}#toggle{position:absolute;top:10px;right:10px}#toggleButton{font-size:18px}}</style><div id=app><div id=layout><section><div id=gameWindow><div id=title></div><div id=base><div id=baseLabel>üè¶ Base</div><div id=waterArea>üíß</div><div id=fish>üêü</div></div><div id=gameArea></div><div id=gold>üí∞ 0</div><div id=upgrades></div><div id=toggle><span id=toggleButton>‚ûï</span></div><div id=instructions>Feed the cat üêü, pet the cat üíñ, upgrade the cat ‚ûï<br>Help the cats, touch the üí∞. Kitty13k is special!</div></div></section></div></div><script>let gameGold=0,coinArray=[],catArray=[];const PADDING_WIDTH=6,MAX_COINS=13,getElementById=t=>document.getElementById(t),createElement=document.createElement.bind(document),getBoundingRect=t=>t.getBoundingClientRect(),gameWindow=getElementById("gameWindow"),gameArea=getElementById("gameArea"),baseStation=getElementById("base"),waterArea=getElementById("waterArea"),goldDisplay=getElementById("gold"),upgradesPanel=getElementById("upgrades"),fishElement=getElementById("fish"),layoutContainer=getElementById("layout"),toggleButton=getElementById("toggle"),toggleButtonElement=getElementById("toggleButton"),randomFloat=(t,e)=>Math.random()*(e-t)+t,randomInt=(t,e)=>Math.floor(randomFloat(t,e+1)),calculateDistance=(t,e,a,n)=>Math.hypot(t-a,e-n),getWindowBounds=()=>{const t=getBoundingRect(gameWindow);return{x:6,y:6,width:t.width-12,height:t.height-12}},resizeGame=()=>{const t=Math.max(420,Math.min(innerWidth,1180)-8-2);gameWindow.style.width=t+"px",layoutContainer.style.width=t+"px",gameWindow.style.height=Math.max(360,Math.min(innerHeight,720)-16-4)+"px"};window.onresize=resizeGame;const spawnCoin=()=>{if(coinArray.length>=13)return;const t=getWindowBounds(),e=createElement("div");e.className="coin",e.textContent="üí∞";const a=randomInt(t.x+20,t.width-20),n=randomInt(t.y+20,t.height-20);e.style.left=a+"px",e.style.top=n+"px",e.dataset.value=String(randomInt(1,3)),e.onclick=()=>{gameGold+=+e.dataset.value,goldDisplay.textContent="üí∞ "+gameGold,e.remove(),coinArray=coinArray.filter(t=>t.element!==e),spawnCoin()},gameArea.appendChild(e),coinArray.push({element:e,x:a,y:n})};setInterval(spawnCoin,1100);class Cat{constructor(t,e,a){this.name=t,this.x=e,this.y=a,this.baseSpeed=65,this.currentSpeed=this.baseSpeed,this.carryCapacity=6,this.currentCarry=0,this.loveLevel=1,this.thirstLevel=1,this.currentState="idle",this.targetPosition=null,this.petBoostEndTime=0,this.speedUpgradeCost=13,this.capacityUpgradeCost=13,this.buildCatElement()}buildCatElement(){const t=this.catElement=createElement("div");t.className="cat",t.style.left=this.x+"px",t.style.top=this.y+"px";const e=this.badge=createElement("div");e.className="badge",e.textContent="üí∞ x0",t.appendChild(e);const a=this.button=createElement("div");a.className="button",t.appendChild(a);const n=this.sprite=createElement("div");n.className="catSprite",n.textContent="üêà‚Äç‚¨õ",t.appendChild(n);const i=createElement("div");i.className="catName",i.textContent=this.name,t.appendChild(i);const s=createElement("div");s.className="bars";const o=t=>{const e=createElement("div"),a=createElement("div"),n=createElement("div"),i=createElement("div");return e.style.display="flex",e.style.flexDirection="column",e.style.alignItems="center",a.className="bar",n.className="barFill",a.appendChild(n),i.className="barLabel",i.textContent=t,e.appendChild(a),e.appendChild(i),{fill:n,container:e,label:i}},r=o("üíñ"),l=o("üíß");o("üêü"),s.appendChild(r.container),s.appendChild(l.container),t.appendChild(s),t.onclick=()=>this.petCat(.25),gameArea.appendChild(t),this.statusBars={love:r.fill,thirst:l.fill,loveLabel:r.label}}setState(t){this.currentState=t,this.button.style.display="hungry"===t||"thirsty"===t||"sad"===t?"block":"none",this.button.textContent="hungry"===t?"üêü":"thirsty"===t?"üíß":"sad"===t?"üíñ":""}goToPosition(t,e){this.targetPosition={x:t,y:e}}isAtTarget(t=8){return this.targetPosition&&calculateDistance(this.x,this.y,this.targetPosition.x,this.targetPosition.y)<=t}isNearBase(t=28){const e=getBoundingRect(baseStation),a=getBoundingRect(gameWindow),n=e.left-a.left+.45*e.width,i=e.top-a.top+.6*e.height;return calculateDistance(this.x,this.y,n,i)<t}findNearestCoin(){let t=null,e=1e9;for(const a of coinArray){const n=calculateDistance(this.x,this.y,a.x,a.y);n<e&&(e=n,t=a)}return t}petCat(t){this.loveLevel=Math.min(1,this.loveLevel+t),"sad"===this.currentState&&this.setState("idle"),this.petBoostEndTime=performance.now()+7e3;const e=createElement("div");e.className="heart",e.textContent="üíñ",e.style.left=this.x+"px",e.style.top=this.y-8+"px",gameArea.appendChild(e),setTimeout(()=>e.remove(),900)}moveCat(t){if(!this.targetPosition)return;const e=this.targetPosition.x-this.x,a=this.targetPosition.y-this.y,n=Math.hypot(e,a);if(n<.001)return;const i=Math.min(this.currentSpeed*t,n);this.x+=e/n*i,this.y+=a/n*i}returnToBase(){const t=getBoundingRect(baseStation),e=getBoundingRect(gameWindow),a=t.left-e.left+.45*t.width,n=t.top-e.top+.6*t.height;this.goToPosition(a,n),this.moveCat(1/60)}updateCat(t,e){if("sad"!==this.currentState&&"hungry"!==this.currentState&&(this.thirstLevel=Math.max(0,this.thirstLevel-.012*t)),this.loveLevel=Math.max(0,this.loveLevel-.012*t),this.currentSpeed=this.baseSpeed*(1+.2*this.loveLevel)*(e<this.petBoostEndTime?1.15:1),this.loveLevel<=0&&"sad"!==this.currentState&&(this.setState("sad"),this.targetPosition=null),this.thirstLevel<.22&&"hungry"!==this.currentState&&"drink"!==this.currentState&&"sad"!==this.currentState){const t=getBoundingRect(waterArea),e=getBoundingRect(gameWindow);this.setState("thirsty"),this.goToPosition(t.left-e.left+8,t.top-e.top+8)}if("sad"!==this.currentState){if("thirsty"===this.currentState||"drink"===this.currentState)this.isAtTarget()?(this.setState("drink"),this.thirstLevel=Math.min(1,this.thirstLevel+.25*t),this.thirstLevel>.95&&(this.setState("idle"),this.targetPosition=null)):this.moveCat(t);else if(this.currentCarry>=this.carryCapacity)this.returnToBase();else{const e=this.findNearestCoin();if(e)this.goToPosition(e.x,e.y),this.isAtTarget()?(this.currentCarry+=+(e.element.dataset.value||1),this.loveLevel=Math.max(0,this.loveLevel-.01),e.element.remove(),coinArray=coinArray.filter(t=>t!==e),spawnCoin()):this.moveCat(t);else{if(!this.targetPosition||this.isAtTarget(12)){const t=getWindowBounds();this.goToPosition(randomFloat(t.x+30,t.width-30),randomFloat(t.y+30,t.height-30))}this.moveCat(t)}}"drink"!==this.currentState&&this.currentCarry>0&&this.isNearBase()&&(gameGold+=this.currentCarry,this.currentCarry=0,goldDisplay.textContent="üí∞ "+gameGold),this.badge.style.display=this.currentCarry>0?"block":"none",this.badge.textContent="üí∞ x"+this.currentCarry,this.statusBars.love.style.width=(100*this.loveLevel|0)+"%",this.statusBars.thirst.style.width=(100*this.thirstLevel|0)+"%",this.catElement.style.left=this.x+"px",this.catElement.style.top=this.y+"px"}}}const buildAllCats=()=>{const t=getBoundingRect(gameWindow);catArray=[new Cat("Kitty13k",300,t.height-200),new Cat("Whiskers",150,t.height-100),new Cat("Mittens",150,t.height-150),new Cat("Paws",150,t.height-200),new Cat("Luna",150,t.height-250),new Cat("Shadow",150,t.height-300),new Cat("Bella",150,t.height-350),new Cat("Max",450,t.height-100),new Cat("Lily",450,t.height-150),new Cat("Tiger",450,t.height-200),new Cat("Milo",450,t.height-250),new Cat("Nala",450,t.height-300),new Cat("Oreo",450,t.height-350)],catArray[0].baseSpeed=180,catArray[0].carryCapacity=18,catArray[0].speedUpgradeCost=13,catArray[0].capacityUpgradeCost=13},updateUpgradesUI=()=>{upgradesPanel.innerHTML="",catArray.forEach((t,e)=>{const a=createElement("div");a.style.margin="3px 0",a.style.textAlign="center",a.innerHTML=`\n                    <b>üêà‚Äç‚¨õ ${t.name}</b><br>\n                    ‚ö°${0|t.baseSpeed}px/s üëú${t.carryCapacity}<br>\n                    <button class="upgradeButton" id="speedUpgrade${e}">‚ö°+15(${t.speedUpgradeCost}g)</button>\n                    <button class="upgradeButton" id="capacityUpgrade${e}">üëú+4(${t.capacityUpgradeCost}g)</button>\n                `;const n=a.querySelector("#speedUpgrade"+e),i=a.querySelector("#capacityUpgrade"+e);n.onclick=()=>{gameGold<t.speedUpgradeCost||(gameGold-=t.speedUpgradeCost,goldDisplay.textContent="üí∞ "+gameGold,t.baseSpeed+=15,0!==e&&(t.speedUpgradeCost+=13),updateUpgradesUI())},i.onclick=()=>{gameGold<t.capacityUpgradeCost||(gameGold-=t.capacityUpgradeCost,goldDisplay.textContent="üí∞ "+gameGold,t.carryCapacity+=4,0!==e&&(t.capacityUpgradeCost+=13),updateUpgradesUI())},upgradesPanel.appendChild(a)})},toggleUpgradesPanel=()=>{"none"===upgradesPanel.style.display?(upgradesPanel.style.display="grid",toggleButtonElement.textContent="‚ûñ"):(upgradesPanel.style.display="none",toggleButtonElement.textContent="‚ûï")};toggleButtonElement.onclick=toggleUpgradesPanel;const setupFishDrag=()=>{let t=null;const e=e=>{if(!t)return;e.preventDefault();const a=e.clientX||e.touches&&e.touches[0].clientX||0,n=e.clientY||e.touches&&e.touches[0].clientY||0;t.style.position="fixed",t.style.left=a+"px",t.style.top=n+"px",t.style.transform="translate(-50%, -50%)",t.style.pointerEvents="none",t.style.fontSize="40px",t.style.zIndex="1000",t.style.opacity="0.8"},a=()=>{if(!t)return;const n=parseFloat(t.style.left),i=parseFloat(t.style.top);for(const t of catArray){const e=getBoundingRect(t.catElement),a=e.left+e.width/2,s=e.top+e.height/2;if(calculateDistance(n,i,a,s)<60){t.loveLevel=1,t.petBoostEndTime=performance.now()+7e3,"sad"===t.currentState&&t.setState("idle"),t.statusBars.love.style.width="100%";const e=createElement("div");e.className="heart",e.textContent="üíñ",e.style.left=t.x+"px",e.style.top=t.y-8+"px",gameArea.appendChild(e),setTimeout(()=>e.remove(),900);break}}t.remove(),t=null,window.removeEventListener("pointermove",e),window.removeEventListener("pointerup",a),window.removeEventListener("touchend",a)},n=n=>{if(n.preventDefault(),t)return;const i=createElement("div");i.textContent="üêü",i.style.position="fixed",i.style.fontSize="40px",i.style.zIndex="1000",i.style.pointerEvents="none",i.style.opacity="0.8",document.body.appendChild(i),t=i,e(n),window.addEventListener("pointermove",e),window.addEventListener("pointerup",a),window.addEventListener("touchend",a)};"ontouchstart"in window?fishElement.addEventListener("touchstart",n):fishElement.addEventListener("pointerdown",n)},initializeGame=()=>{resizeGame(),buildAllCats(),updateUpgradesUI();for(let t=0;t<13;t++)spawnCoin();setupFishDrag();let t=performance.now();const e=a=>{const n=Math.min(.033,(a-t)/1e3);t=a,catArray.forEach(t=>t.updateCat(n,a)),requestAnimationFrame(e)};e(t)};initializeGame()</script>