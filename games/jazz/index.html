<title>JAZZ - js13kGames 2025</title><script>let A=(A,e)=>{let t=null,n=0,l=A=>{let e=n+2*A*4,l=Math.ceil(e/65536),i=Math.ceil(t.memory.buffer.byteLength/65536);return l>i&&t.memory.grow(l-i),[new Float32Array(t.memory.buffer,n,A),new Float32Array(t.memory.buffer,n+4*A,A)]},i=A=>{for(let e=0;e<A.length;e++)A[e]=Array.isArray(A[e])?i(A[e]):A[e]??0;return A},o=(A,e)=>{let t=A[20]*e>>1,n=A[21]/255,l=Math.ceil(Math.log(.1)/Math.log(n));return A[13]+A[14]+A[15]+l*t},g=(A,e,n,l)=>{let i=l[20]*n>>1,o=l[21]/255;o&&t.delay(A.byteOffset,e.byteOffset,A.length,i,o)},r=(e,n=147,r=5513)=>{e=i(e);let a=o(e,r),h=A.createBuffer(2,a,44100),f=h.getChannelData(0),I=h.getChannelData(1),[C,c]=l(a);return t.clear(C.byteOffset,C.length),t.clear(c.byteOffset,c.length),t.gen(C.byteOffset,c.byteOffset,0,r,n,...e),g(C,c,r,e),f.set(C),I.set(c),h},a=e=>{let n=(e=i(e))[0],r=e[1],a=0;for(let A of r){let e=A[1].length*n*32+o(A[0],n);e>a&&(a=e)}let h=A.createBuffer(2,a,44100),f=h.getChannelData(0),I=h.getChannelData(1),[C,c]=l(a);for(let A of r){let e=A[0],l=A[1],i=0,o=a;t.clear(C.byteOffset,C.length),t.clear(c.byteOffset,c.length);for(let g of l)for(let l=0;l<32;l++){let r=A[2][g-1]?.[l];r&&(o=Math.min(o,i),t.gen(C.byteOffset,c.byteOffset,i,n,r,...e)),i+=n}g(C,c,n,e);for(let A=o;A<a;A++)f[A]+=C[A],I[A]+=c[A]}return h},h=atob("AGFzbQEAAAABQQZgAX0BfWACfX0BfWAAAGAif39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/fwBgAn9/AGAFf39/f30AAhUCA2VudgNzaW4AAANlbnYDcG93AAEDBgUCAgMEBQUDAQADBiwHfwFBkIgIC38AQYAIC38AQZCIBAt/AEGACAt/AEGQiAgLfwBBAAt/AEEBCweUAQwGbWVtb3J5AgARX193YXNtX2NhbGxfY3RvcnMAAgRpbml0AAMDZ2VuAAQFY2xlYXIABQVkZWxheQAGDF9fZHNvX2hhbmRsZQMBCl9fZGF0YV9lbmQDAg1fX2dsb2JhbF9iYXNlAwMLX19oZWFwX2Jhc2UDBA1fX21lbW9yeV9iYXNlAwUMX190YWJsZV9iYXNlAwYKiwwFAgAL1AEFAX8BfAF/An0BfEEAIQBEAAAAAAAAAAAhAUGAgH8hAgNAIACyIgND2A/JOpQQgICAgAAhBCACQZCIg4AAaiADQwAAgDmUQwAAAL+SOAIAIAJBkIiBgABqIAQ4AgAgAkGQiISAAGogAUQAAAAAAABQP6IiBUQAAAAAAADwv6BEAAAAAAAACEAgBaEgAEGAEEkbtjgCACACQZCIgoAAakMAAIC/QwAAgD8gBEMAAAAAXRs4AgAgAEEBaiEAIAFEAAAAAAAA8D+gIQEgAkEEaiICDQALC68JBgF/En0CfAJ9AXwBfSOAgICAAEEgayIiJICAgIAAQwAAAEAgG0F4arIQgYCAgAAhI0MAAABAIB9BeGqyEIGAgIAAISRDfZyHPyAFQQxsIARBoH5qIhtqIAZqshCBgICAACElQ32chz8gC0EMbCAbaiAMarIQgYCAgAAhJgJAIBMgEmoiCyAUakF/akEASA0AICW7RAAAAAAAAHA/oiAHs0MXt1E6lEMAAIA/kruitiEnICa7RAAAAAAAAHA/oiANs0MXt1E6lEMAAIA/kruitiEoIByzQwAAADuUISkgILNDAAAAO5QhKkMAAIA/IBSzlSErQwAAgD8gErOVISwgEbNDAAAAMJQhLSAYs0MAAH9DlSEuICMgA7IiJZUhLyAkICWVITAgFEF/aiEMIAsgAmohHyAVs0PG+Rs7lCExIAEgFCATaiASaiACakECdEF8aiITaiEUIAAgE2ohEyAiQQxqIBZBAnRqIQAgD7MhMiAJsyEzIBezITRBACgCgIiAgAAhAkQAAAAAAAAAACE1ICFBDnQhBiAKQQ50IQUgEEEOdCEERAAAAAAAAAAAITZDAAAAACEmQwAAAAAhNwNAAkACQCAwIB8gDGqyIjiUQwAAgEWUIiOLQwAAAE9dRQ0AICOoIRsMAQtBgICAgHghGwsgBiAbQf8fcUECdHJBkIiAgABqKgIAICqUQwAAAD+SISUCQAJAIAsgDGoiGyASTw0AICwgG7KUISMMAQtDAACAPyEjIBsgC0kNAEMAAIA/IAyzICuUkyEjCwJAAkAgNSAlQwAAgD8gHRsgJ5QgIyAjlCIkQwAAgD8gCBuUu6AiNUQAAAAAAACwQKIiOZlEAAAAAAAA4EFjRQ0AIDmqIRsMAQtBgICAgHghGwsgBSAbQf8fcUECdHJBkIiAgABqKgIAIDOUQwAAAACSIToCQAJAIDYgJEMAAIA/IA4bICiUu6AiNkQAAAAAAACwQKIiOZlEAAAAAAAA4EFjRQ0AIDmqIRsMAQtBgICAgHghGwsgBCAbQf8fcUECdHJBkIiAgABqKgIAIDKUIDqSISQCQCAtQwAAAABbDQBBACACQQ10IAJzIhtBEXYgG3MiG0EFdCAbcyIbNgKAiICAACAtIAKylCAjlCAkkiEkIBshAgsgI0OBgIA7lCAklCEjAkAgFkUNAAJAAkAgJUMAAIA/IB4bIDSUQ8Y3PjeUQwAAgEWUIiSLQwAAAE9dRQ0AICSoIRsMAQtBgICAgHghGwsgIiAbQf8fcUECdEGQiICAAGoqAgBDAADAP5QiJCA3lCAmkiImOAIUICIgIzgCDCAiIC4gIyA3k5QgJpMiIzgCECAiICYgI5I4AhwgIiAkICOUIDeSIjc4AhggACoCACEjCyAxICOUISMCQAJAIC8gOJRDAACARZQiJItDAAAAT11FDQAgJKghGwwBC0GAgICAeCEbCyATICNDAACAPyAbQf8fcUECdEGQiICAAGoqAgAgKZRDAAAAP5IiJJOUIBMqAgCSOAIAIBQgIyAklCAUKgIAkjgCACAUQXxqIRQgE0F8aiETIAsgDEF/aiIMakF/Sg0ACwsgIkEgaiSAgICAAAsYAAJAIAFBAUgNACAAQQAgAUECdPwLAAsLZgEBfwJAIAIgA0wNACADQQJ0IQUgAiADayEDA0AgACAFaiICIAEqAgAgBJQgAioCAJI4AgAgASAFaiICIAAqAgAgBJQgAioCAJI4AgAgAEEEaiEAIAFBBGohASADQX9qIgMNAAsLCwsLAQBBgAgLBKVU9dgAZARuYW1lAT8HAAdqc19zaW5mAQdqc19wb3dmAhFfX3dhc21fY2FsbF9jdG9ycwMEaW5pdAQDZ2VuBQVjbGVhcgYFZGVsYXkHEgEAD19fc3RhY2tfcG9pbnRlcgkIAQAFLmRhdGEAOAlwcm9kdWNlcnMBDHByb2Nlc3NlZC1ieQEMVWJ1bnR1IGNsYW5nETE0LjAuMC0xdWJ1bnR1MS4xAB4PdGFyZ2V0X2ZlYXR1cmVzASsLYnVsay1tZW1vcnk="),f=new Uint8Array(h.length);for(let A=0;A<h.length;A++)f[A]=h.charCodeAt(A);WebAssembly.instantiate(f,{env:{pow:Math.pow,sin:Math.sin}}).then(A=>{t=A.instance.exports,t.init(),n=t.memory.buffer.byteLength,e&&e({sound:r,song:a})})};onload=()=>{document.head.appendChild(document.createElement("style")).textContent=" *{margin:0;padding:0;position:fixed;box-sizing:border-box;touch-action:none;user-select:none;} canvas{background:indigo;} body{background:black;} ",document.addEventListener("contextmenu",A=>A.preventDefault());let e=document.body.appendChild(document.createElement("canvas")),t=e.getContext("2d"),n=null,l=null,i=null,o=!1;(function(){const e=[5513,[[[7,0,0,0,192,2,7,0,0,0,192,2,0,0,0,2e4,192,0,0,0,0,121,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[[132,,,,,,,,130,,,,,,,,128,,,,,,,,127]]]]];return new Promise(t=>{let n=new AudioContext;A(n,A=>{const l=A.song(e),i=n.createBufferSource();i.buffer=l,i.loop=!0,i.connect(n.destination),t({source:i,context:n,buffer:l})})})})().then(A=>{({source:n,context:l,buffer:i}=A),n.start(),o=!0}),e.addEventListener("pointerdown",A=>{if(A.offsetY<.1*e.height)n&&(o?(r=!0,n.stop(),o=!1):(r=!1,n=l.createBufferSource(),n.buffer=i,n.loop=!0,n.connect(l.destination),n.start(),o=!0));else{l&&"suspended"===l.state&&l.resume();const t=e.getBoundingClientRect(),n=e.width/t.width,i=(A.clientX-t.left)*n,o=a[Math.min(Math.floor(i/(x/a.length)),a.length-1)];r||function(A){I(f,e=>{let t=f.createBufferSource();t.buffer=e.sound(h,A),t.connect(f.destination),t.start()})}(o),w||150!=o||(d=u,w=!0)}});let g,r=!1,a=[144,147,149,150,151,154,156],h=[7,0,0,0,192,2,7,0,0,0,192,2,0,0,0,2e4,192,0,0,0,0,121,0,0,0,0,0,0,0],f=new AudioContext,I=A,C=1e3,c=33.333333333333336,s=60/(c*c),u=-s*c,d=0,y=0,w=!1,E=performance.now(),Q=0,x=900,B=1600;e.width=x,e.height=B;let b=1,M=0,p=0,D=()=>{let A=innerWidth,t=innerHeight;A/t>9/16?(b=t/B,M=(A-x*b)/2,p=0):(b=A/x,M=0,p=(t-B*b)/2),e.style.width=x*b+"px",e.style.height=B*b+"px",e.style.left=M+"px",e.style.top=p+"px"};onresize=D,D(),g=C;let k=function(){let{sin:A,cos:e,PI:t,hypot:n,max:l,floor:i}=Math,o=.3,g={upperLength:90,lowerLength:90,upperSwing:55*t/180,lowerMin:10*t/180,lowerMax:70*t/180,lowerDelay:1,thick:14,bulge:.5},r={upperLength:60,lowerLength:60,thick:12,bulge:.5,swing:45*t/180},a={length:100,thick:18,bulge:.4},h=[];function f(A,e,t,l,i,o,g){let r=t-A,a=l-e,h=n(r,a)||1,f=-a/h,I=r/h,C=i/2*g,c=.2*h*o,s=new Path2D;return s.moveTo(A+f*C,e+I*C),s.bezierCurveTo(A+f*C+r/2+f*c,e+I*C+a/2+I*c,t+f*C-r/2+f*c,l+I*C-a/2+I*c,t+f*C,l+I*C),s.lineTo(t-f*C,l-I*C),s.bezierCurveTo(t-f*C-r/2-f*c,l-I*C-a/2-I*c,A-f*C+r/2-f*c,e-I*C+a/2-I*c,A-f*C,e-I*C),s.closePath(),s}function I(t,n,l,i){let{k:o,f:g}=function(t,n,l,i){let o=A(n)*l.upperSwing,g={x:t.x+A(o)*l.upperLength*i,y:t.y+e(o)*l.upperLength*i},r=(A(n-l.lowerDelay)+1)/2,a=r<.5?2*r*r:(4-2*r)*r-1;return{k:g,f:{x:g.x+A(o+l.lowerMin+(l.lowerMax-l.lowerMin)*a)*l.lowerLength*i,y:g.y+e(o+l.lowerMin+(l.lowerMax-l.lowerMin)*a)*l.lowerLength*i}}}(t,n,l,i),r=new Path2D;return r.addPath(f(t.x,t.y,o.x,o.y,l.thick,l.bulge,i)),r.addPath(f(o.x,o.y,g.x,g.y,l.thick,l.bulge,i)),r}function C(l,i,o,g){let{e:r,h:a}=function(l,i,o,g){let r=t/2+A(i)*o.swing,a={x:l.x+e(r)*o.upperLength*g,y:l.y+A(r)*o.upperLength*g},h=a.x-l.x,f=a.y-l.y,I=n(h,f),C=h/I;return{e:a,h:{x:a.x-f/I*o.lowerLength*g,y:a.y+C*o.lowerLength*g}}}(l,i,o,g),h=new Path2D;return h.addPath(f(l.x,l.y,r.x,r.y,o.thick,o.bulge,g)),h.addPath(f(r.x,r.y,a.x,a.y,o.thick,o.bulge,g)),h}function c(n,i,h,c){let s=6*A(2*i+t/4)*o,u={x:c[0].x,y:c[0].y+s},d={x:c[1].x,y:c[1].y+s},{path:y,chest:w}=function(A,e){let t={x:A.x,y:A.y-.3*e.length};return{path:f(A.x,A.y,t.x,t.y,e.thick,e.bulge,.3),chest:t}}(u,a),E=function(n){let l=new Path2D,i=7.5,o=n.x,g=n.y-i-1.2;l.arc(o,g,i,0,7);let r=12*.3,a=290*t/180,h=o+i*e(a),f=g+i*A(a),I=o+11.4*e(a),C=g+11.4*A(a),c=a+t/2,s=h+r/2*e(c),u=f+r/2*A(c),d=h-r/2*e(c),y=f-r/2*A(c),w=new Path2D;w.moveTo(s,u),w.lineTo(I,C),w.lineTo(d,y),w.closePath(),l.addPath(w);let E=190*t/180;return{path:l,eye:{x:o+4.5*e(E),y:g+4.5*A(E),r:1.44}}}(w);n.fillStyle="black",n.fill(y),n.fill(C(w,i,r,o)),n.fill(C(w,h,r,o)),n.fill(I(u,i,g,o)),n.fill(I(d,h,g,o)),n.fill(E.path);let Q=function(A){let e=new Path2D,t=A.x+15,n=A.y-7.5,l=A.x+18,i=A.y+10.5,o=A.x+30;return e.moveTo(A.x,A.y),e.bezierCurveTo(t,n,l,i,o,A.y),e}(u);return n.lineWidth=9*o,n.strokeStyle="black",n.lineCap="round",n.stroke(Q),n.beginPath(),n.fillStyle="yellow",n.arc(E.eye.x,E.eye.y,l(E.eye.r,.8),0,7),n.fill(),E.eye}return function(){h=[];let A=document.createElement("canvas");A.width=innerWidth,A.height=innerHeight;let e=A.getContext("2d"),n=[{x:0,y:0},{x:0,y:0}],l=(g.upperLength+g.lowerLength)*o;for(let i=0;i<30;i++){e.clearRect(0,0,A.width,A.height),e.save(),e.translate(A.width/2,A.height-l),e.scale(-1,1);let o=-t/2+i/30*t*2;c(e,o,o+t,n),e.restore();let g=new Image;g.src=A.toDataURL(),h.push(g)}}(),{draw:function(A,e,t,n,l){l=i(n)%30;let o=h[l];A.save(),A.translate(e,t),A.drawImage(o,-o.width/2,-o.height),A.restore()}}}(),m=function({GAME_W:A,GAME_H:e,minGap:t,maxGap:n,rooftopY:l}){function i(A,e){return A+Math.random()*(e-A)}let o=[];function g(A,e,t,n,l,i){A.beginPath(),A.moveTo(e+i,t),A.lineTo(e+n-i,t),A.quadraticCurveTo(e+n,t,e+n,t+i),A.lineTo(e+n,t+l),A.lineTo(e,t+l),A.lineTo(e,t+i),A.quadraticCurveTo(e,t,e+i,t),A.closePath()}return function(){o=[];let e=0;for(;e<2*A;){let A=i(250,600),g=i(t,n);o.push({x:e,width:A,y:l}),e+=A+g}}(),{rooftops:o,update:function({scrollSpeed:e,delta:g}){for(let A of o)A.x-=e*g;for(o.length&&o[0].x+o[0].width<0&&o.shift();o.length&&o[o.length-1].x<A;){let A=o[o.length-1],e=i(250,600),g=i(t,n);o.push({x:A.x+A.width+g,width:e,y:l})}},draw:function(A){for(let t of o){let n=A.createLinearGradient(0,e,0,t.y);n.addColorStop(0,"hsl(0, 0%, 30%)"),n.addColorStop(.98,"hsl(0, 0%, 10%)"),n.addColorStop(.98,"hsl(0, 0%, 70%)"),n.addColorStop(1,"hsl(0, 0%, 30%)"),A.fillStyle=n,g(A,t.x,t.y,t.width,e-t.y,5),A.fill()}}}}({GAME_W:x,GAME_H:B,minGap:100,maxGap:180,rooftopY:C}),G=function({GAME_W:A,GAME_H:e}){function t(A,e){return A+Math.random()*(e-A)}let n=[],l=e,i="black";function o(A,e,t,n,l){A.fillStyle="yellow";for(let i=10;i+100<=n-10;i+=110)for(let n=10;n+300<=l-10;n+=310)A.fillRect(e+i,t+n,100,300)}return function(){n=[];let e=0;for(;e<2*A;){let A=t(350,700),o=t(20,70),g=t(300,l);n.push({x:e,width:A,height:g,color:i}),e+=A+o}}(),{draw:function(g,{scrollSpeed:r,delta:a}){for(let A of n)A.x-=.5*r*a,g.fillStyle=A.color,g.fillRect(A.x,e-A.height,A.width,A.height),o(g,A.x,e-A.height,A.width,A.height);for(n.length&&n[0].x+n[0].width<0&&n.shift();n.length&&n[n.length-1].x<A;){let A=n[n.length-1],e=t(350,700),o=t(20,70),g=t(300,l);n.push({x:A.x+A.width+o,width:e,height:g,color:i})}}}}({GAME_W:x,GAME_H:B}),S=function({GAME_W:A,GAME_H:e}){function t(A,e){return A+Math.random()*(e-A)}let n=[];return function(){for(let l=0;l<150;l++)n.push({x:t(0,A),y:t(0,e),size:t(2,4),speed:t(.2,1)})}(),{draw:function(l,{scrollSpeed:i,delta:o}){l.fillStyle="#FFFFFF";for(let g of n)g.y+=g.speed*o,g.x-=i*o,l.beginPath(),l.arc(g.x,g.y,g.size,0,2*Math.PI),l.fill(),g.y>e?(g.y=-g.size,g.x=t(0,A)):g.x<-g.size&&(g.x=A+g.size,g.y=t(0,e))}}}({GAME_W:x,GAME_H:B});requestAnimationFrame(function A(n){let l=(n-E)/16.6667;E=n,l=Math.min(l,3),m.update({scrollSpeed:3,delta:l});let i=null;for(let A of m.rooftops)if(300>=A.x&&300<=A.x+A.width){i=A;break}y+=d*l,d+=s*l,i&&y>=0&&d>=0&&(y=0,d=0,w=!1),!i&&!w&&d>=0&&(w=!0),g=(i?i.y:C)+y,t.clearRect(0,0,e.width,e.height),G.draw(t,{scrollSpeed:3,delta:l}),m.draw(t),S.draw(t,{scrollSpeed:3,delta:l}),k.draw(t,300,g,Q,0),Q+=.3,requestAnimationFrame(A)})}</script>