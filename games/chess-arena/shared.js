"use strict";const PAWN=1,KING=2,KNIGHT=4,FIRST_MULTIPLE_MOVES_PIECE=8,ROOK=8,BISHOP=16,QUEEN=32,WHITE=64,NO_MOVE_OR_PROMOTED=128,ALL=63;let PIECES={1:8};PIECES[4]=PIECES[16]=PIECES[8]=2,PIECES[32]=PIECES[2]=1;let B,TIMES={};TIMES[1]=2,TIMES[4]=TIMES[16]=TIMES[8]=4,TIMES[32]=6;let newB=()=>{B=[,,,,,,,,,,,,,,,,,,,,,0,0,0,0,2,0,0,0,,,0,0,0,0,0,0,0,0,,,0,0,0,0,0,0,0,0,,,0,0,0,0,0,0,0,0,,,0,0,0,0,0,0,0,0,,,0,0,0,0,0,0,0,0,,,0,0,0,0,0,0,0,0,,,0,0,0,0,66,0,0,0,,,,,,,,,,,,,,,,,,,,,]};newB();let startB=[,,,,,,,,,,,,,,,,,,,,,8,4,16,32,2,16,4,8,,,1,1,1,1,1,1,1,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,65,65,65,65,65,65,65,65,,,72,68,80,96,66,80,68,72,,,,,,,,,,,,,,,,,,,,,];const M={129:[9,10,11,20],193:[-20,-11,-10,-9],1:[9,10,11],65:[-11,-10,-9],4:[-21,-19,-12,-8,8,12,19,21],8:[-10,-1,1,10],16:[-11,-9,9,11],32:[-11,-10,-9,-1,1,9,10,11]};let getM=(E,e,t,I,S,n,r)=>{if(E=parseInt(E),0===(e=B[E])||2&e)return[];for(n=[],t=M[e]||M[-129&e]||M[63&e],r=0;r<t.length;r++)for(I=E+t[r],S=B[I];(S||0===S&&(!(1&e)||![-11,-9,9,11].includes(t[r])))&&(0==S||64&S^64&e)&&(n.push(I),0==S)&&!((63&e)<8);)I+=t[r],S=B[I];return n},setM=(E,e,t,I)=>(t=B[E],I=B[e],B[e]=128&t?-129&t:t,B[E]=0,I),getFreeP=(E,e,t,I)=>{let M=Object.assign({},PIECES);for(e=0,t=B.length;e<t+W.length;e++)!(I=e<t?B[e]:W[e-t])||(64&I)!=E||!(1&I)&&128&I||M[63&I]--;return M};