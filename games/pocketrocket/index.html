<!doctype html><title>PocketRocket - js13kGames 2012</title><meta content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no" name=viewport><meta content=#000 name=theme-color><meta content="telephone=no" name=format-detection><style>a,b,body,div,h1,h2,h4,html,p,span{margin:0;padding:0;font-family:Helvetica,Arial}body,html{width:100%;height:100%;background:#000}#w{position:absolute;width:960px;height:600px}#h{position:absolute;display:none;width:784px;height:24px;padding:0 80px 0 95px;left:0;bottom:0;z-index:99;font-size:12px;font-weight:700;line-height:24px;color:#fff}#h>div{display:inline-block;padding:0 0 0 40px}#h span{display:inline-block;font-size:16px}#h span b.b{height:17px}#h b{display:inline-block;height:16px;color:#333}#h i{font-style:normal;color:#e30057}#l{position:absolute;display:none;width:100%;height:100%;left:0;top:0;z-index:999;background:#000}#l h2{position:absolute;width:100%;height:50px;top:235px;left:0;font-size:40px;line-height:40px;text-align:center;color:#fff}#l h4{position:absolute;width:100%;height:20px;top:280px;left:0;font-size:20px;line-height:20px;text-align:center;color:#e30057}#home,#restart{position:absolute;width:400px;height:16px;top:320px;left:50%;margin:0 0 0 -200px;font-size:12px;font-weight:700;line-height:16px;text-align:center;cursor:pointer;color:#fff;text-decoration:none}#home{top:360px}#l a b{height:16px;font-size:16px}#s{position:relative;width:960px;height:auto;margin:0 auto;padding:20px 0 60px 0;z-index:9999;overflow:hidden;text-align:center;color:#fff;background:#000}#s h1{font-size:60px}#s p{margin:16px 0;font-size:20px;font-weight:700;line-height:16px;color:#df5239}#s p span{color:#fff;font-weight:400}#s p.s{font-size:16px;font-weight:400;line-height:20px}#s p.h{font-size:20px;font-weight:700;line-height:40px;color:#fff;background:#df5239}#s h2{margin:20px 0;font-size:40px;line-height:40px;letter-spacing:-3px}#s h2.p{margin-top:40px}#s p a{margin:0 6px;color:#fff;cursor:pointer;text-decoration:none}@media only screen and (min-device-width :320px) and (max-device-width :480px){#w{width:480px;height:300px}#h{width:470px;height:12px;bottom:5px;padding:0 0 0 10px;font-size:10px}#h>div{padding:0 0 0 4px}#h span{display:inline-block;font-size:12px}#l{height:310px}#l h2{top:85px}#l h4{top:140px}#restart{top:195px;width:200px;margin:0 0 0 -100px}#home{top:250px}#s{width:460px;padding:0 10px 50px 10px}#s h1{font-size:48px}#s p{font-size:15px;margin:6px 0 0 0}#s p.s{font-size:15px;line-height:13px;margin:20px 0 20px 0}#s p.h{font-size:15px;line-height:24px;padding:5px}}</style><div id=w><canvas height=600 id=c width=960></canvas><div id=h><div id=hi>HI <span>[ <b>0000000<i>0</i></b> ]</span></div><div id=score>SCORE <span>[ <b>0000000<i>0</i></b> ]</span></div><div id=bomb>BOMB <span>[ <b>+++</b> ]</span></div><div id=charge>SHIELD <span>[ <b class=b>||||||||||</b> ]</span></div><div id=zone>ZONE <span>[ <b><i>001</i></b> ]</span></div></div><div id=l><h2>Do you like fireworks?</h2><h4>Well, next time try not to cross the line ;)</h4><a id=restart><b>[ </b><span>LAUNCH ANOTHER ROCKET</span><b> ]</b></a> <a id=home href=index.html><b>[ </b><span>BACK TO TITLE</span><b> ]</b></a></div></div><div id=s><p class=s><span><a href=https://twitter.com/pety7439 target=_blank>&lt;p></a></span> and <span><a href=https://twitter.com/insgraphizm target=_blank>ins</a></span> proudly presents<br>a game for the <a href=https://js13kgames.com/ target=_blank>js13kgames.com</a> game competition<h1>POCKETROCKET</h1><p class=h>On iPhone add this page to the homescreen to play in fullscreen<h2>Instructions</h2><p>You are <span>PocketRocket</span><p>Donâ€™t cross <span>your beamline (unless you have a shield)</span><p>Collect <span>all blue gems to</span> open <span>the wormhole</span><p>Pickup special gems <span>for extra score.</span><p>Deflector Shield <span>protection against beamlines (Temporary)</span><p>Beam-Bombs <span>to clear some space (3 pieces)</span><h2 class=p>Controls</h2><p>Turn clockwise / counterclockwise<p><span>PRESS left / right or TAP left / right side of the screen</span><p>Use powerup<p><span>PRESS space or TAP center of the screen</span><h2 class=p>Start Game</h2><p>Choose your rocket<p><a id=p4>[ POCKET ]</a> <a id=p1>[ TANK ]</a> <a id=p2>[ ELROY ]</a> <a id=p3>[ LIZ ]</a></div><script>function le(){this.setSettingsString=function(e){e=e.split(","),this.waveType=parseInt(e[0])||0,this.attackTime=parseFloat(e[1])||0,this.sustainTime=parseFloat(e[2])||0,this.sustainPunch=parseFloat(e[3])||0,this.decayTime=parseFloat(e[4])||0,this.startFrequency=parseFloat(e[5])||0,this.minFrequency=parseFloat(e[6])||0,this.slide=parseFloat(e[7])||0,this.deltaSlide=parseFloat(e[8])||0,this.vibratoDepth=parseFloat(e[9])||0,this.vibratoSpeed=parseFloat(e[10])||0,this.chA=parseFloat(e[11])||0,this.changeSpeed=parseFloat(e[12])||0,this.squareDuty=parseFloat(e[13])||0,this.dutySweep=parseFloat(e[14])||0,this.repeatSpeed=parseFloat(e[15])||0,this.phaserOffset=parseFloat(e[16])||0,this.phaserSweep=parseFloat(e[17])||0,this.lpFilterCutoff=parseFloat(e[18])||0,this.lpFilterCutoffSweep=parseFloat(e[19])||0,this.lpFilterResonance=parseFloat(e[20])||0,this.hpFilterCutoff=parseFloat(e[21])||0,this.hpFilterCutoffSweep=parseFloat(e[22])||0,this.masterVolume=parseFloat(e[23])||0}}function a(){var r,Y,s,n,h,c,f,a,p,d,G,U,z,H,g,u,m,v,w,Z,K,X,y,N,b,j,V,A,I,_,S,F,k,C,$,M,x,T,R,B,ee,E,P,te,D,ae,oe,O,ie,W,Q,q,L,J;this._params=new le,this.reset=function(e){var t=this._params;if(m=100/(t.startFrequency*t.startFrequency+.001),w=100/(t.minFrequency*t.minFrequency+.001),Z=1-.01*t.slide*t.slide*t.slide,K=1e-6*-t.deltaSlide*t.deltaSlide*t.deltaSlide,0==t.waveType&&(I=.5-.5*t.squareDuty,_=5e-5*-t.dutySweep),j=0<t.chA?1-.9*t.chA*t.chA:1+10*t.chA*t.chA,V=0,A=1==t.changeSpeed?0:2e4*(1-t.changeSpeed)*(1-t.changeSpeed)+32,e){for(t.paramsDirty=!1,Y=t.masterVolume*t.masterVolume,s=t.waveType,t.sustainTime<.01&&(t.sustainTime=.01),(e=t.attackTime+t.sustainTime+t.decayTime)<.18&&(t.attackTime*=e=.18/e,t.sustainTime*=e,t.decayTime*=e),H=t.sustainPunch,g=0,X=t.minFrequency,R=1!=t.lpFilterCutoff||0!=t.hpFilterCutoff,E=B=0,P=.1*t.lpFilterCutoff*t.lpFilterCutoff*t.lpFilterCutoff,te=1+1e-4*t.lpFilterCutoffSweep,D=1-(.8<(D=5/(1+20*t.lpFilterResonance*t.lpFilterResonance)*(.01+P))?.8:D),ae=1!=t.lpFilterCutoff,oe=0,O=.1*t.hpFilterCutoff*t.hpFilterCutoff,ie=1+3e-4*t.hpFilterCutoffSweep,y=0,N=.01*t.vibratoSpeed*t.vibratoSpeed,b=.5*t.vibratoDepth,c=h=n=0,p=1e5*t.sustainTime*t.sustainTime,d=1e5*t.decayTime*t.decayTime+10,f=a=1e5*t.attackTime*t.attackTime,this._envelopeFullLength=a+p+d,G=1/a,U=1/p,z=1/d,k=0!=t.phaserOffset||0!=t.phaserSweep,C=1020*t.phaserOffset*t.phaserOffset,t.phaserOffset<0&&(C=-C),$=.2*t.phaserSweep*t.phaserSweep*t.phaserSweep,x=0,T=T||Array(1024),W=W||Array(32),e=0;e<1024;e++)T[e]=0;for(e=0;e<32;e++)W[e]=2*Math.random()-1;F=(S=0)==t.repeatSpeed?0:parseInt(2e4*(1-t.repeatSpeed)*(1-t.repeatSpeed))+32}},this.synthWave=function(e,t,a,o){for(o=o||44100,r=!1,a=J=L=0;a<t;a++){if(r)return a;if(0!=F&&++S>=F&&(S=0,this.reset(!1)),0!=A&&++V>=A&&(A=0,m*=j),(m*=Z+=K)>w&&(m=w,0<X)&&(r=!0),v=m,0<b&&(y+=N,v=m*(1+Math.sin(y)*b)),(v=parseInt(v))<8&&(v=8),0==s&&((I+=_)<0?I=0:.5<I&&(I=.5)),++c>f)switch(c=0,++h){case 1:f=p;break;case 2:f=d}switch(h){case 0:n=c*G;break;case 1:n=1+2*(1-c*U)*H;break;case 2:n=1-c*z;break;case 3:r=!(n=0)}k&&(C+=$,(M=parseInt(C))<0?M=-M:1023<M&&(M=1023)),R&&0!=ie&&((O*=ie)<1e-5?O=1e-5:.1<O&&(O=.1));for(var i=Q=0;i<8;i++){if(++g>=v&&(g-=v,3==s))for(var l=0;l<32;l++)W[l]=2*Math.random()-1;switch(s){case 0:q=g/v<I?.5:-.5;break;case 1:q=1-g/v*2;break;case 2:q=(q=(u=.5<(u=g/v)?6.28318531*(u-1):6.28318531*u)<0?1.27323954*u+.405284735*u*u:1.27323954*u-.405284735*u*u)<0?.225*(q*-q-q)+q:.225*(q*q-q)+q;break;case 3:q=W[Math.abs(parseInt(32*g/parseInt(v)))]}R&&(ee=B,(P*=te)<0?P=0:.1<P&&(P=.1),E=ae?(E+(q-B)*P)*D:(B=q,0),oe+=(B+=E)-ee,q=oe*=1-O),k&&(T[1023&x]=q,q+=T[x-M+1024&1023],x=x+1&1023),Q+=q}1<(Q*=.125*Y*n)?Q=1:Q<-1&&(Q=-1),J+=Q,L++,44100!=o&&2!=L||(J/=L,L=0,e[a]=parseInt(32e3*J),J=0)}return t}}function Q(e){O=e;var t=e=void 0;for(f=g0=0==n(0,n0=1)?0:0==n(0,1)?90:0==n(0,1)?180:270,D=[n(8*B,T-8*B),n(8*B,R-8*B-v)],t=v0[O].colorPos;t<v0[O].colorPos+6;t+=2)e=_e.gg(t,2^O?31:63,1,1).data,l0.push("rgb("+e[0]+", "+e[1]+", "+e[2]+")");J(),i.addEventListener("touchmove",function(e){e.preventDefault()}),l.scrollTo(0,0),qe.style.display="none"}function q(e,t,a){I.save(),I.ta(e,t),I.rotate(90*(a||1)*Math.PI/180),I.drawImage(r,0,0,32,32,0,0,32,32),I.restore()}function L(){960<l.innerWidth&&(Me.style.left=(l.innerWidth-960)/2+"px"),600<l.innerHeight&&(Me.style.top=(l.innerHeight-600)/2+"px"),l.onresize=L}function J(){1^s&&(be=h=0,D=[n(8*B,T-8*B),n(8*B,R-8*B-v)]),h0=[],c0=ve=me=ue=u=0,f0=[],s=1,h++,w0=[],p0=[],d0=[],m0=[],W=[],2!=O&&(g=d=0,b0=-1),(c=[])[ye=0]=(u0=[])[0]=D[0],d0[0]=m0[0]=D[1],u0[1]=T-u0[0],m0[1]=n(B+64,R-64-B-v),M.width=M.width,$e.width=$e.width,e0.width=e0.width,t0.width=t0.width,Ve.width=Ve.width,S.lineJoin=F.lineJoin=k.lineJoin="round",S.lineCap=F.lineCap=k.lineCap="round",b.strokeStyle=o0,b.lineWidth=E,b.lineJoin="square",b.lineCap="square";for(var e=void 0,e=100;f0.length<h&&0<e;)Y(!0),e--;var t=e=void 0;if(3<h)for(e=10<h?3:5<h?2:1,t=0;t<e;t++)h0.push({pos:[n(8*B,T-8*B),n(8*B,R-8*B-v)],vx:n(10,15)/10*(Math.round()<.5?-1:1),vy:n(10,15)/10*(Math.round()<.5?-1:1),type:n(0,1)});pe(),y.save(),y.strokeStyle=o0,y.lineWidth=2*B,y.strokeRect(0,0,T,R-v),y.restore();var a,o,i=t=e=void 0,l=void 0,r=void 0;for(e=i0[Math.floor(n(0,i0.length-1))],w.fillStyle="#000",w.fc(0,0,T,R-v),w.ba(),t=n(75,300);t--;)w.fillStyle="rgba(255, 255, 255, "+Math.random()+")",l=n(2*B,T-2*B),r=n(2*B,R-2*B-v),w.fc(l,r,2,1);for(w.fill(),w.fillStyle=e,t=8;t--;){for(l=n(4*B,T-4*B),r=n(4*B,R-4*B-v),w.save(),i=150;i--;)w.globalAlpha=.1,a=n(-2-(o=Math.floor(i/20)),2+o)*B,o=n(-2-o,2+o)*B,w.fc(l+a,r+o,2*B,2*B);w.restore()}for(w.strokeStyle="#000",w.lineWidth=2*B,ie(!0,1,w),w.strokeStyle=e,ie(!(w.lineWidth=11),.3,w),w.strokeStyle=e,ie(!(w.lineWidth=6),.3,w),w.strokeStyle=e,ie(!(w.lineWidth=2),1,w),i=t=e=void 0,t=60;t--;)(e={x:0,y:0,a:1,c:0}).d=n(2,8),e.vx=2*n(-10,10),e.vy=2*n(-10,10),e.r=n(220,255),e.g=n(190,255),(e.b=0)==t%7&&(e.d=8,e.vx=n(-2,2),e.vy=n(-2,2),i=l0[1].substr(4).split(","),e.r=parseInt(i[0]),e.g=parseInt(i[1]),e.b=parseInt(i[2])),0==t%12&&(e.c=1,e.r=n(220,255),e.g=n(200,255),e.b=n(200,255),e.d=n(4,12),e.x+=n(-8,8),e.y+=n(-8,8)),p0.push(e);xe.style.display="none",U(),he(),S.lineWidth=E,S.strokeStyle=l0[0],P&&(F.lineWidth=E-4,F.strokeStyle=l0[1],k.lineWidth=E-8,k.strokeStyle=l0[2])}function Y(e,t,a,o,i,l,r,s){for(i=[n(64,T-64),n(64,R-64-v)],t=(o=y.gg(i[0],i[a=1],32,32).data).length;t--;)if(0!=o[t]){a=0;break}a&&(r=l=0,s=-1,4<h&&f0.length>n(0,Math.floor(h/4))&&(l=n(-10,10)/10*2,r=n(-10,10)/10*2,s=0),8<h&&f0.length>n(4,Math.floor(h/2))&&(r=0==(l=2*n(0,1)*(0==n(0,1)?1:-1))?2*(0==n(0,1)?1:-1):0,s=1),12<h&&f0.length>n(6,h/2)&&(l=n(-10,10)/10*2,r=n(-10,10)/10*2,s=3),s<0&&(l=n(-10,10)/10*2,r=n(-10,10)/10*2),f0.push({pos:i,vx:l,vy:r,movetype:s,type:e?0:Math.floor(n(1,2)),state:1}))}function G(e){if(n0&&!me&&(s||ue)){if(C.clearRect(0,0,T,R),y.clearRect(B,B,T-2*B,R-v-2*B),ye&&(be+=500+h/50*1e3,J()),g&&0^g&&0<b0&&(b0+d<Date.now()&&"charge"==y0[Ae]&&(g=0),U()),ve)Date.now()-s0<500?(C.save(),C.fillStyle="rgb("+n(0,255)+", "+n(0,255)+", "+n(0,255)+")",C.fc(0,0,T,R),C.restore()):ye=1,z(!0);else{for(s&&(D[0]+=0==f||180==f?0:90==f?p:-p,D[1]+=90==f||270==f?0:0==f?-p:p),e=void 0,e=0;e<2;e++)C.save(),C.globalAlpha=.3,C.ta(u0[e],m0[e]),(1^e||h<=c0)&&(C.globalAlpha=1,C.rotate(-5*u*Math.PI/180)),h<=c0&&(y.fillStyle="#00ff00",y.fc(u0[1]-20,m0[1]-20,40,40)),C.drawImage(A,128,0,64,64,-32,-32,64,64),C.restore();var t=e=void 0,a=void 0;if(e=0==f||180==f?D[0]:90==f?D[0]-p:D[0]+p,t=90==f||270==f?D[1]:0==f?D[1]+p:D[1]-p,a=c.length,g0!=f&&(c.push(e),d0.push(t),g0=f,a=c.length,_(),$(c[a-2],d0[a-2]),ee(c[a-1],d0[a-1]),te(),b.ba(),b.m(c[a-2],d0[a-2]),b.l(c[a-1],d0[a-1]),b.stroke(),H(!1)),_(),$(c[a-1],d0[a-1]),ee(e,t),te(),b.ba(),b.m(c[a-1],d0[a-1]),b.l(e,t),b.stroke(),P&&(S.drawImage(e0,0,0),S.drawImage(t0,0,0)),H(!0),C.drawImage($e,0,0),(1!=Ae||!g||b0<0)&&y.drawImage(Ve,0,0),e=void 0,0==u%60&&n(0,100)<35){var o=a=t=e=void 0,o=[n(64,T-64),n(64,R-64-v)],t=1;for(e=(a=y.gg(o[0],o[1],32,32).data).length;e--;)if(0!=a[e]){t=0;break}t&&W.push({type:n(0,y0.length-1),state:1,pos:o})}for(y.fillStyle="#f00",e=W.length;e--;)if(y.ba(),y.a(W[e].pos[0],W[e].pos[1],16,0,2*Math.PI),y.ca(),y.fill(),0==W[e].state){switch(Ae=t=W[e].type,b0=-(g=1),y0[t]){case"mine":d=3;break;case"charge":d=v0[O].chargeTime}fe(Se[y0[t]]),U(),W.splice(e,1)}else{switch(t=W[e].type,a=W[e].pos[0],o=W[e].pos[1],C.save(),C.ta(a,o),y0[t]){case"mine":C.drawImage(A,192,32,32,32,-16,-16,32,32);break;case"charge":C.drawImage(A,224,32,32,32,-16,-16,32,32)}C.restore()}for(o=a=t=e=void 0,0==u%80&&n(10,100)<40&&Y(),e=f0.length;e--;)t=f0[e],y.save(),y.ta(t.pos[0]-16,t.pos[1]-16),y.drawImage(A,96,32,32,32,0,0,32,32),y.restore(),0==t.state?(f0.splice(e,1),0==t.type&&c0++,be+=100*(t.type+1),U(),c0==h&&fe(Se.portalopen,500)):(0==u%2&&(3<h&&0==u%40&&0==n(0,1)&&1==t.movetype&&(t.vx=0==t.vx?2*(0==n(0,1)?1:-1):0,t.vy=0==t.vy?2*(0==n(0,1)?1:-1):0),3==t.movetype&&0==u%100&&(t.pos[0]=0==n(0,1)?R-t.pos[0]:t.pos[0],t.pos[1]=0==n(0,1)?R-t.pos[1]:t.pos[1]),t.pos[0]=.5+(t.pos[0]+t.vx*ke)|0,t.pos[1]=.5+(t.pos[1]+t.vy*ke)|0,a=t.pos[0]<B/2+16,o=t.pos[0]>T-B/2-32,(a||o)&&(t.pos[0]=a?B/2+16:T-B/2-32,t.vx*=-1),a=t.pos[1]<B+16,o=t.pos[1]>R-B-v-16,a||o)&&(t.pos[1]=a?B+16:R-B-v-16,t.vy*=-1),C.drawImage(A,32*t.type,32,32,32,t.pos[0]-16,t.pos[1]-16,32,32));for(o=a=t=e=void 0,t=h0.length;t--;)e=h0[t],y.save(),y.ta(e.pos[0]-32,e.pos[1]-32),y.drawImage(A,128+64*e.type,272,64,64,0,0,64,64),y.restore(),e.pos[0]=.5+(e.pos[0]+e.vx*ke)|0,e.pos[1]=.5+(e.pos[1]+e.vy*ke)|0,a=e.pos[0]<B/2+32,o=e.pos[0]>T-B/2-64,(a||o)&&(e.pos[0]=a?B/2+32:T-B/2-64,e.vx*=-1),a=e.pos[1]<B+32,o=e.pos[1]>R-B-v-32,(a||o)&&(e.pos[1]=a?B+32:R-B-v-32,e.vy*=-1),C.drawImage(A,64*e.type,272,64,64,e.pos[0]-32,e.pos[1]-32,64,64);if(s){z();var i=void 0,l=e=t=o=a=void 0,r=(l=o=void 0,a=0==f||180==f?D[0]-E/2:90==f?D[0]-(p-E/2):D[0]-p-(E/2-p),o=90==f||270==f?D[1]-E/2:0==f?D[1]-p-(E/2-p):D[1]-(p-E/2),l=0==f||180==f?E:p,0==f||180==f?p:E);for(t=0,i=(e=(e=y.gg(a,o,l,r)).data).length;i--;){if(K(e,i,255,255,0)){X(a,o,l,r,f0,"gemcollect");break}if(K(e,i,255,0,0)){X(a,o,l,r,W,0);break}}if(0==f)for(a=0;a<e.length;a+=4){if(K(e,a,255,255,255)){for(a=s=0;a<e.length;a+=4)255==e[a]&&255==e[a+1]&&255==e[a+2]||t++;e=Math.floor(t/E),D[1]-=e;break}if(K(e,a,0,255,0)){ce();break}}else if(90==f)for(l=0;l<p;l++){for(o=0;o<E;o++){if(K(e,a=4*(p-l)+4*o*p-4,255,255,255)){s=0;break}if(K(e,a,0,255,0)){ce();break}}if(!s){for(++l;l<p;l++)for(o=0;o<E;o++)255==e[a=4*(p-l)+4*o*p-4]&&255==e[a+1]&&255==e[a+2]||t++;e=Math.floor(t/E),D[0]+=e;break}}else if(180==f){for(a=e.length-4;a-=4;){if(K(e,a,255,255,255)){for(s=0,a=e.length;a-=4;)255==e[a]&&255==e[a+1]&&255==e[a+2]||t++;break}if(K(e,a,0,255,0)){ce();break}}e=Math.ceil(t/E),D[1]+=e}else if(270==f)for(l=0;l<p;l++){for(o=0;o<E;o++){if(K(e,a=4*l+4*o*p,255,255,255)){s=0;break}if(K(e,a,0,255,0)){ce();break}}if(!s){for(++l;l<p;l++)for(o=0;o<E;o++)255==e[a=4*l+4*o*p]&&255==e[a+1]&&255==e[a+2]||t++;e=Math.floor(t/E),D[0]-=e;break}}1^s&&(fe(Se.explosion),s0=Date.now(),ue=1,we<be)&&ge&&ge.setItem("hi",be)}else{for(o=a=t=e=void 0,e=Date.now()-s0,(t=D[0])-16<0&&(t=0),(a=D[1])-16<0&&(a=0),T-32<t-16&&(t=T-32),R-32<a-16&&(a=R-32),l=0;l<p0.length;l++)o=p0[l],C.ba(),C.fillStyle="rgba("+o.r+", "+o.g+", "+o.b+", "+o.a+")",0<o.a?o.c?(C.a(o.x+t,o.y+a,o.d,0,2*Math.PI,!0),C.f(),o.d+=.7,o.a-=.01):(C.fc(o.x+t,o.y+a,o.d,o.d),o.x+=o.vx,o.y+=o.vy,o.d-=.02,o.a-=.005):p0.splice(l,1);e/500<1&&(C.save(),C.globalAlpha=1-e/500,C.fillStyle="#fff",C.fc(0,0,T,R),C.restore()),p0.length<56&&(p0=[],e=void(ue=0),e=n(0,3),Te.innerHTML=Be[e],Re.innerHTML=Ee[e],xe.style.display="block")}}Xe.drawImage(a0,0,0),u++}else if(ke<0){for(t=e=void 0,t=0;t<960;t+=60)for(e=0;e<600;e+=60)x.ba(),x.a(t,e,10,0,2*Math.PI,!0),x.fill(),x.ca();Xe.save(),Xe.globalAlpha=0,Xe.drawImage(M,0,0),Xe.restore(),x.ce(0,0,T,R),0^(e=Date.now()<m.ellapsedTime?(m.measureCounter++,0):(m.measureScore=m.measureCounter/m.measureTime*1e3,m.etalon/m.measureScore))&&(p=1!=e?(P=1.8<(ke=2<e?2:e)?0:1,.5+3*ke|0):(ke=1,3),me=0)}null!=Ie?Ie(G):setTimeout(G,30)}function U(e,t,a){if(se(Ye,be+"","0"),se(Ze,h+"","0",3),ne(Ge),ne(ze),g){if(Ae<1){for(e="",Ge.style.visibility="visible",t=0;t<d;t++)e+="+";se(Ue,e,"+",3,1)}if(1==Ae){if(e="||||||||||",ze.style.visibility="visible",0<b0){for(e="",a=Math.ceil((b0+d-Date.now())/d*10),t=0;t<a;t++)e+="|";se(He,e,"|",10,1)}se(He,e,"|",10,1)}}}function z(e){C.save(),C.ta(D[0],D[1]),C.rotate(1==e?-15*u*Math.PI/180:f*Math.PI/180),g&&1==Ae&&0<b0?C.drawImage(A,u%18*32,64+32*O,32,32,-16,-12,32,32):C.drawImage(A,32*O,0,32,32,-16,-12,32,32),C.restore(),g&&1==Ae&&0<b0&&(C.save(),C.ta(D[0],D[1]),C.fillStyle="#fff",C.fillRect(24,-24,64,6),C.fillStyle="#4096ee",C.fillRect(25,-23,62*(b0+d-Date.now())/d,4),C.restore())}function H(e,t,a){for(a=0;a<w0.length;a++)(t=w0[a]).pathIndex<c.length&&t.active&&(b.save(),b.ba(),0==e&&t.pathIndex<c.length-2?t.time+2e3<Date.now()?Z(t,v0[O].bombRadius,a,1):S.drawImage(A,u%10*20,192+20*O,20,20,t.pos[0]-10,t.pos[1]-10,20,20):(1==e&&t.pathIndex>c.length-3||t.active)&&(t.time+2e3<Date.now()&&t.active?Z(t,v0[O].bombRadius,a):S.drawImage(A,u%10*20,192+20*O,20,20,t.pos[0]-10,t.pos[1]-10,20,20)),b.ca(),b.fill(),b.restore())}function Z(e,t,a,o,i){S.save(),P&&(F.save(),k.save()),_(),i=e.pos[0];var l=e.pos[1];S.globalCompositeOperation=F.globalCompositeOperation=k.globalCompositeOperation="destination-out",S.fillStyle=F.fillStyle=k.fillStyle="#000",S.a(i,l,t,0,2*Math.PI),P&&(F.a(i,l,t,0,2*Math.PI),k.a(i,l,t,0,2*Math.PI)),S.ca(),P&&(F.ca(),k.ca()),S.fill(),P&&(F.fill(),k.fill()),S.restore(),P&&(F.restore(),k.restore()),b.fillStyle="#000",b.a(e.pos[0],e.pos[1],t,0,2*Math.PI),e.sound&&(fe(Se.mineexplode),e.sound=0),e.time+3e3<Date.now()?o&&(e.active=0,w0.splice(a,1)):(i=Date.now()-e.time)/2500<1&&(C.save(),C.fillStyle="#fff",C.globalAlpha=1-i/2500,C.ba(),C.a(e.pos[0],e.pos[1],.5*v0[O].bombRadius*(1+i/2500),0,2*Math.PI,!0),C.ca(),C.f(),C.restore())}function K(e,t,a,o,i){return e[t]==a&&e[t+1]==o&&e[t+2]==i}function X(e,t,a,o,i,l,r){var s,n,h,c;for(r=0;r<i.length;r++)s=(n=i[r].pos[0])-16,n+=16,h=(c=i[r].pos[1])-16,c+=16,e+a<s||n<e||t+o<h||c<t||(i[r].state=0,l&&fe(Se[l]))}function N(){switch(y0[Ae]){case"mine":w0.push({pos:[D[0],D[1]],time:Date.now(),pathIndex:c.length-1,active:1,sound:1}),d--;break;case"charge":b0<0&&(b0=Date.now())}d<1&&(g=0),U()}function j(e,t){32==(t=e.keyCode)&&(e.preventDefault(),s)&&0^g&&N(),!s||ve||me||(f=37^t&&39^t?f:37==t?0==f?270:f-90:270==f?0:f+90),80==t&&(me=!me)}function V(e){e=e.changedTouches[0],s&&(e.clientX<(T/2-200)/l.devicePixelRatio?f=0==f?270:f-90:e.clientX>(T/2+200)/l.devicePixelRatio?f=270==f?0:f+90:0^g&&N())}function _(){S.ba(),P&&(F.ba(),k.ba())}function $(e,t){S.m(e,t),P&&(F.m(e,t),k.m(e,t))}function ee(e,t){S.l(e,t),P&&(F.l(e,t),k.l(e,t))}function te(){S.stroke(),P&&(F.stroke(),k.stroke())}function ae(e,t,a,o){e.ba(),e.fillStyle=o||"#e30057",e.a(t,a,16,0,2*Math.PI,!0),e.ca(),e.fill(),e.ba(),e.fillStyle="#000",e.a(t,a,13,0,2*Math.PI,!0),e.ca(),e.fill()}function o(e,t,a,o,i){e.save(),e.ta(t,a),e.drawImage.apply(e,o),e.scale(-1,i||1),e.drawImage.apply(e,o),e.restore()}function oe(e,t,a,o,i,l,r,s){e.save(),e.ta(a,o),e.scale(1,-1),e.drawImage(t,i,l,r,s,0,0,r,s),e.restore()}function ie(e,t,a,o,i,l){o=i=e?0:8.5,l=e?0:B,a.save(),a.globalAlpha=t,a.ba(),a.m(o+2*B,i),a.arcTo(o+T-l,i,o+T-l,i+2*B,2*B),a.m(T-l/2+.5,i+2*B),a.arcTo(o+T-l,i+R-l-(e?B:v),o+T-l-2*B,i+R-l-(e?B:v),2*B),a.m(T-2*B-B/2,R-l/2+.5-(e?B:v)),a.arcTo(o,i+R-l-(e?B:v),o,i+R-l-2*B,2*B),a.m(o,R-2*B-B/2-(e?B:v)),a.arcTo(o,i,o+2*B,i,2*B),a.stroke(),a.restore()}function re(e,t){x.save(),x.clearRect(0,0,T,R),1==e?(x.fillStyle=t||"#c96c3d",x.ba(),x.m(32,0),x.l(47,0),x.l(0,47),x.l(0,32),x.ca(),x.fill(),x.fillStyle=t||"#ad4635",x.ba(),x.m(46,0),x.l(56,64),x.l(39,64),x.l(0,46),x.ca(),x.fill(),x.fillStyle=t||"#572a2e",x.ba(),x.m(46,0),x.l(64,48),x.l(64,57),x.l(56,64)):(x.fillStyle=t||"#c96c3d",x.ba(),x.m(35,0),x.l(0,48),x.l(0,32),x.ca(),x.fill(),x.fillStyle=t||"#ad4635",x.ba(),x.m(35,0),x.l(64,12),x.l(0,48),x.ca(),x.fill(),x.fillStyle=t||"#572a2e",x.ba(),x.m(64,12),x.l(48,64),x.l(24,64),x.l(0,48)),x.ca(),x.fill(),x.restore()}function se(e,t,a,o,i,l,r){for(l="",r=0;r<(o||8)-t.length;r++)l+=a;e.innerHTML=i?"<i>"+t+"</i>"+l:l+"<i>"+t+"</i>"}function ne(e){e.style.visibility="hidden"}function he(){1^g&&(ne(Ge),ne(ze)),se(Ye,"0","0"),se(Ze,"1","0",3),se(Je,we+"",0,8)}function ce(){s0=Date.now(),ve=1,D[0]=u0[1],D[1]=m0[1]}function n(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function fe(e,t){if(0<Fe)try{setTimeout(function(){de.src=e,de.play()},t||0)}catch(e){}}function pe(){null==(we=ge?ge.getItem("hi"):we)&&(we=0)}function e(e){return i.getElementById(e)}var t,de,ge,ue,me,ve,we,s,h,ye,be,Ae,c,f,p,d,g,i=document,l=window,u=0,m={startTime:-1,ellapsedTime:-1,measureTime:2e3,measureCounter:0,measureScore:-1,etalon:60},v=24,Ie=l.requestAnimationFrame||l.mozRequestAnimationFrame||l.webkitRequestAnimationFrame||l.msRequestAnimationFrame,Se=[],Fe=0,ke=-1,Ce=new a,Me=e("w"),xe=e("l"),Te=xe.children[0],Re=xe.children[1],Be=["Do you like fireworks?","Ka-Boom!","Your rocket exploded.","Game Over"],Ee=["Well, next time try not to cross the line ;)","Now you've learned that glowing lines are dangerous ;)","...as it was expected ;)","Better luck next time ;)"],Pe=xe.children[2],De=e("p1"),Oe=e("p2"),We=e("p3"),Qe=e("p4"),qe=e("s"),Le=e("h"),Je=e("hi").children[0].children[0],Ye=e("score").children[0].children[0],Ge=e("bomb"),Ue=Ge.children[0].children[0],ze=e("charge"),He=ze.children[0].children[0],Ze=e("zone").children[0].children[0],Ke=Me.children[0],Xe=Ke.getContext("2d"),Ne=i.createElement("canvas"),w=Ne.getContext("2d"),je=i.createElement("canvas"),y=je.getContext("2d"),Ve=i.createElement("canvas"),b=Ve.getContext("2d"),r=i.createElement("canvas"),_e=r.getContext("2d"),A=i.createElement("canvas"),I=A.getContext("2d"),$e=i.createElement("canvas"),e0=i.createElement("canvas"),t0=i.createElement("canvas"),S=$e.getContext("2d"),F=e0.getContext("2d"),k=t0.getContext("2d"),a0=i.createElement("canvas"),C=a0.getContext("2d"),M=i.createElement("canvas"),x=M.getContext("2d"),T=a0.width=Ve.width=$e.width=e0.width=t0.width=M.width=Ne.width=je.width=A.width=Ke.width,R=a0.height=Ve.height=$e.height=e0.height=t0.height=M.height=Ne.height=je.height=A.height=Ke.height,o0="#fff",i0="#380000 #3a2000 #3a3d00 #003f1e #003142 #000447 #270049".split(" "),B=16,l0=[],E=12,r0=new Image,s0=ye=h=s=we=ve=me=ue=0,P=1,n0=be=0,h0=[],c0=Ae=0,f0=[],p0=[],d0=c=0,D=[],g0=f=0,O=(p=3,0),u0=[],m0=[],v0={0:{colorPos:42,bombRadius:64,chargeTime:3e3},1:{colorPos:58,bombRadius:32,chargeTime:8e3},2:{colorPos:58,bombRadius:32,chargeTime:5e3},3:{colorPos:74,bombRadius:32,chargeTime:5e3}},w0=[],W=[],y0=["mine","charge"],b0=g=d=0;for(t in Ke.style.width=Ne.style.width=T/l.devicePixelRatio+"px",Ke.style.height=Ne.style.height=R/l.devicePixelRatio+"px",y.lineJoin=b.lineJoin=I.lineJoin="square",y.lineCap=b.lineCap=I.lineCap="square",y.lineWidth=b.lineWidth=E,y.strokeStyle=b.strokeStyle=o0,Xe.globalCompositeOperation="copy",Ke.style.position=Ne.style.position="absolute",Ke.style.zIndex=2,Ne.style.zIndex=1,Me.insertBefore(Ne,Ke),Xe)Xe[t[0]+(t[6]||"")]=C[t[0]+(t[6]||"")]=S[t[0]+(t[6]||"")]=F[t[0]+(t[6]||"")]=k[t[0]+(t[6]||"")]=b[t[0]+(t[6]||"")]=w[t[0]+(t[6]||"")]=I[t[0]+(t[6]||"")]=_e[t[0]+(t[6]||"")]=x[t[0]+(t[6]||"")]=y[t[0]+(t[6]||"")]=Xe[t];r0.onload=function(){r.height=M.height=r0.width,r.width=M.width=r0.height,x.ta(r0.height/2,r0.width/2),x.rotate(-90*Math.PI/180),x.ta(-r0.width/2,-r0.height/2),x.drawImage(r0,0,0),_e.drawImage(M,0,0),De.touchstart=function(){Q(0)},De.onclick=function(){Q(0)},Oe.touchstart=function(){Q(1)},Oe.onclick=function(){Q(1)},We.touchstart=function(){Q(2)},We.onclick=function(){Q(2)},Qe.touchstart=function(){Q(3)},Qe.onclick=function(){Q(3)};try{de=new Audio,Se.portalopen=Ce.getWave("2,0.0526,0.7984,0.1785,0.4242,0.3319,0.0535,0.3163,-0.003,0.0116,0.0551,-0.0747,0.005,0.2972,-0.0393,0.0571,0.043,-0.0287,0.9491,-0.0473,,0.0285,0.0183,0.26"),Se.gemcollect=Ce.getWave("0,,0.0612,0.4239,0.4036,0.6456,,,,,,0.432,0.6858,,,,,,1,,,,,0.5"),Se.explosion=Ce.getWave("3,,0.1847,0.2125,0.4997,0.0971,,-0.0071,,,,,,,,,0.3468,-0.0407,1,,,,,0.5"),Se.mineexplode=Ce.getWave("3,0.0212,0.2132,0.6722,0.4957,0.0725,,0.0933,0.0402,0.0327,,-0.0365,0.0411,,-0.0548,,0.0685,-0.3272,1,0.082,0.06,,0.0186,0.5"),Se.mine=Ce.getWave("1,,0.1668,,0.4156,0.2101,,0.1847,,0.1579,0.2293,,,,,,,,1,,,,,0.5"),Se.charge=Ce.getWave("1,,0.2328,,0.4261,0.4229,,0.2849,,,,,,,,0.4062,,,1,,,,,0.5"),Fe=1}catch(e){}var e=void 0,t=void 0,a=void 0,e=[10,10,-10,-10,10,10],a=[32,32,-32,-32,32,32];for(o(I,16,16,[r,32,0].concat(t=[16,32,-16,-16,16,32])),o(I,48,16,[r,48,0].concat(t)),o(I,80,16,[r,48,32].concat(t)),o(I,112,16,[r,64,0].concat(t)),o(I,16,48,[r,0,32].concat(t),-1),o(I,48,48,[r,16,32].concat(t),-1),o(I,80,48,[r,32,32].concat(t),-1),o(I,160,32,[r,0,0].concat(a),-1),q(192,0),q(128,64,-1),ae(t=I,208,48),t.ba(),t.fillStyle="#e30057",t.a(208,48,9,0,2*Math.PI,!0),t.ca(),t.fill(),t.fillStyle="#000",t.ba(),t.a(208,48,6,0,2*Math.PI,!0),t.ca(),t.fill(),t.fillRect(205,35,6,26),t.fillRect(195,45,26,6),t.ba(),t.fillStyle="#e30057",t.a(208,48,3,0,2*Math.PI,!0),t.ca(),t.fill(),ae(t=I,240,48,"#00fbfb"),t.fillStyle="#00fbfb",t.ba(),t.moveTo(239,49),t.l(234,49),t.l(243,39),t.ca(),t.fill(),t.ba(),t.moveTo(241,47),t.l(246,47),t.l(237,57),t.ca(),t.fill(),(t=I).save(),t.fillStyle="#ffff00",t.ta(112,32),t.scale(.75,1),t.rotate(45*Math.PI/180),t.fc(0,0,23,23),t.restore(),o(I,306,10,[r,64,32].concat(e),1),o(I,286,10,[r,74,32].concat(e),1),o(I,266,10,[r,64,42].concat(e),1),o(I,326,10,[r,64,52].concat(e),1),oe(I,A,256,20,256,0,20,10),oe(I,A,276,20,276,0,20,10),oe(I,A,296,20,296,0,20,10),oe(I,A,316,20,316,0,20,10),a=t=e=void 0,M.width=M.width,a=0;a<4;a++)for(t=0;t<9;t+=.5)x.drawImage(A,32*a,0,32,32,0,0,32,32),x.save(),(e=x.createLinearGradient(0,0,0,32)).addColorStop(0,"rgba(78,169,244,.3)"),e.addColorStop(.1*t,"rgba(171,211,238,.9)"),e.addColorStop(.1*t+.01,"rgba(137,195,235,.9)"),e.addColorStop(.9,"rgba(54,168,249,.5)"),e.addColorStop(1,"rgba(54,168,249,0)"),x.globalCompositeOperation="source-atop",x.fillStyle=e,x.fillRect(0,0,32,32),x.restore(),I.drawImage(M,0,0,32,32,64*t,64+32*a,32,32),M.width=M.width;for(t=e=void 0,I.save(),I.fillStyle="#e30057",I.ta(0,192),t=0;t<4;t++)for(e=0;e<10;e++)I.drawImage(A,256+20*t,0,20,20,20*e,20*t,20,20),I.save(),I.globalAlpha=.1*e,I.ba(),I.a(20*e+10,20*t+10,3,0,2*Math.PI),I.f(),I.restore();I.restore(),re(1),I.drawImage(M,0,0,64,64,0,272,64,64),re(2),I.drawImage(M,0,0,64,64,64,272,64,64),re(1,"#fff"),I.drawImage(M,0,0,64,64,128,272,64,64),re(2,"#fff"),I.drawImage(M,0,0,64,64,192,272,64,64),t=e=void 0;try{t=new Date,(ge=l.localStorage).setItem(t,t),e=ge.getItem(t)!=t,ge.removeItem(t),e&&(ge=!1)}catch(e){}pe(),L(),Le.style.display="block",he(),me=1,m.startTime=Date.now(),m.ellapsedTime=m.startTime+m.measureTime,m.measureCounter=0,m.measureScore=-1,G(),setTimeout(function(){l.scrollTo(0,1)},1e3),i.addEventListener("keydown",j,!0),i.addEventListener("touchstart",V,!0),Pe.onclick=J},r0.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABUCAMAAAAF8MFhAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAEhQTFRFAOjXrI5grABCq3sA0poAvqd7QYwe49zIeSooRQAa31I587QACwgAcEn90MGWdQAsImExYbgL/9IA4wBXLRuE////AAAA////VEgVLAAAABh0Uk5T//////////////////////////////8AzRMu6gAABGpJREFUeNqk2Iti2yoMAFDFryTdtXF45f//9EqIlww0XUeXzU2ig4QNxoP3h+a9//ZzeP9jgx9kENs/AenoM2BsP4P02wfAWmOtHSYS/v0OsMYQIAQvlJYA0b0x2lpJyMpbAkT3RmvOwXYGscrIt4CN8TpWkQl/PY/9ElK4dnRQJ2Gtp5/hqQDRPQK6CIGI8XYkQN09xjuuoiThfedarA5BdO8CIJLwvk9kQIYzUBM+vS5EOgAZ3hFyu5yMn06mDiGEz4DxxnhBiCI+AhiPM8xgXCP8EKCRwBSMZaKqwveA19ksEKFRIdZ3cpDAeb7O8xwMooljIQUBnK8XAacsIZ1QE65qIXgBnBSvz1MSRgjeX1MA0f1La87hvAJxLH1TBNTdY7yOVWRCG90IeYEsQArXjg7qJEwt1EUEwDOQu6f1oAiBKDPDpOxzCgko4bweiCQqIAk5BfoDovs4Gesk0uS0UaiAYIAMT7O5ELoWGsB7kOGtkJeHmEIZhAh8voE/1VMZs22obb/aH0Tg7As/32AMhL/YoWxhULcPwG4H4adsw/3BPtgfxMuFzw391d8f7PtuB0IBXuHo7O0PMB6u+4MOEJlmf7BTPHAOQlBUcg3gUGYB6u4xHmIVFaEUjj8C21aAIoDoHsDRQZ2EUsq8+AwmIvyWBBDdIwBFsAwYRzHhUj7LNE3nAuruMd5xFSUJYxwDLyK2EE9TKQkguncBEEkUgAdv43gSwlsgwxmoiWcsgTqkGIrHuaVIoIJAhrfC8xkG8V0DtDJkII21mcyEI969jJXhH27dyaTUpCge2zSZ9g5dt/5sZGB4i6erwZjvnhe4dzUEep0LYOJvTFM3D/xkoTZ/BBhpibgP1S0hgSmMIRLXr2k9z/PSI+ASryKhrsCfBQn9pyEaAC9SImrB2jlVsDSFCEAFwBJRCRg/x+ClLQRo84Rp5wr4zlUEmmsELBS6zN5fCJpMUeARCDOtEvBzWGa90Jf0Ej4VBNBcCsl7fnk/CQE/d7oCrLP/RSEQEOYidk+FYzABhgV8kwBcpPSiZ7qWQwYoJICIOJN7AFaFKdDUpuGTAOXDr7gQ0PxW+DIdAJcFzCCPwRWggXAunRSn89Hlrnm7ffP0TvuTNCkTYa0gHrdbn4B0qbo88dLRvjsBrF0CKDgQjvpPR3xPACeBHoEA7bI4zvCSYvQ73uV3qIADGzKrRIBvmzoDKGAR8S5fFYGRFBuY2ggZJEFHQWmIgs0prDGD+yGJAKAgAZcBdwWO2NZbNYhReNOTNw+D430Cl/+4Pa4ZFAEoLAOO9qQBcGGrwfFflPCxHse9BqIw2OZRfBz+x5fGuNvKCYQ83P1+X6MwAKj7PRAY72jMKIMqPgswemJOF9MXAfhVBu4h/rD+SAKMn1f5COMrgBOg/b4j4FhHwIITlpLY3/QcgKHvOgMCQgb41igDNS8oEIDz7Hg8GoAzONZhBnMSfvffgeEOgMAOvwToFqBQ+DWA6/BisIZqRRi0/wUYAMYNllJQswEKAAAAAElFTkSuQmCC",a.prototype.getWave=function(e){var t=new Uint8Array([82,73,70,70,0,0,0,0,87,65,86,69,102,109,116,32,16,0,0,0,1,0,1,0,68,172,0,0,136,88,1,0,2,0,16,0,100,97,116,97,0,0,0,0]),a=(this._params.setSettingsString(e),this.reset(!0),this._envelopeFullLength=parseInt(this._envelopeFullLength),e=new Uint16Array(this._envelopeFullLength),this.synthWave(e,this._envelopeFullLength,!1)),o=2*a,i=new Uint32Array(t.buffer);return i[1]=36+o,i[10]=o,t=new Blob([t,e.subarray(0,a-1)],{type:"audio/wav"}),(window.URL||window.webkitURL).createObjectURL(t)},window.sfxrSynth=a</script>