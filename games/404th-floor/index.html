<!doctype html><title>404th floor</title><style>body,html{margin:0;font-family:Arial;font-weight:700;overflow:hidden}#c{width:100%}#a>div{position:absolute}#a{width:1008px;margin:0 auto;position:relative}#floor{top:10px;left:10px;display:none}#sc{top:10px;right:10px;display:none}#o{min-width:100px;max-width:150px;border:3px solid #000;background-color:#fffFFFEA;font-style:italic;top:20%;box-shadow:5px 5px 5px #0000003F;padding:36px 40px;margin:1em auto 80px;text-align:center;border-radius:220px/120px;display:none;transform-origin:left top}#o::after,#o::before{content:"";border:3px solid #000;background-color:#fffFFFEA;border-radius:30px;position:absolute}#o::before{bottom:-25px;left:20px;width:24px;height:24px}#o::after{bottom:-39px;left:4px;width:15px;height:15px}#ti{bottom:10px;text-align:center;width:126px;background-color:#aaa;border:2px solid #fff;display:inline-block;left:calc(50% - 64px);display:none}#f{width:100%;height:100%;background-color:#fffFFFBB;text-align:center;top:0;line-height:2em;display:none;align-items:center;justify-content:center;flex-direction:column}#h{width:100%;background-color:#fffFFF90;height:100%;align-items:center;justify-content:center;display:flex;font-size:39px;animation:b 2s ease-in-out infinite}@keyframes b{0%{transform:scale(1)}50%{transform:scale(1.2)}}</style><div id=a><div id=h>Press any key to start game</div><canvas id=c></canvas><div id=floor>FLOOR :<span id=floor2></span></div><div id=sc></div><div id=ti></div><div id=o></div><div id=f></div></div><script>function A(){this._s=function(A){for(var t=0;t<24;t++)this[String.fromCharCode(97+t)]=A[t]||0;this.c<.01&&(this.c=.01);var i=this.b+this.c+this.e;if(i<.18){var B=.18/i;this.b*=B,this.c*=B,this.e*=B}}}var t,B=new function(){var t,i,B,e,s,n,a,h,r,o,f,c;this._p=new A,this.reset=function(){var A=this._p;e=100/(A.f*A.f+.001),s=100/(A.g*A.g+.001),n=1-A.h*A.h*A.h*.01,a=-A.i*A.i*A.i*1e-6,A.a||(f=.5-A.n/2,c=5e-5*-A.o),h=1+A.l*A.l*(A.l>0?-.9:10),r=0,o=1==A.m?0:(1-A.m)*(1-A.m)*2e4+32},this.tr=function(){this.reset();var A=this._p;return t=A.b*A.b*1e5,i=A.c*A.c*1e5,B=A.e*A.e*1e5+12,3*((t+i+B)/3|0)},this._s=function(A,O){var l=this._p,M=1!=l.s||l.v,d=l.v*l.v*.1,u=1+3e-4*l.w,v=l.s*l.s*l.s*.1,L=1+1e-4*l.t,y=1!=l.s,N=l.x*l.x,x=l.g,p=l.q||l.r,m=l.r*l.r*l.r*.2,w=l.q*l.q*(l.q<0?-1020:1020),J=l.p?32+((1-l.p)*(1-l.p)*2e4|0):0,g=l.d,k=l.j/2,W=l.k*l.k*.01,X=l.a,T=t,C=1/t,b=1/i,D=1/B,U=5/(1+l.u*l.u*20)*(.01+v);U>.8&&(U=.8),U=1-U;for(var I,S,j,H,_,Y,F=!1,P=0,R=0,q=0,z=0,G=0,K=0,E=0,Q=0,V=0,Z=0,$=new Array(1024),AA=new Array(32),tA=$.length;tA--;)$[tA]=0;for(tA=AA.length;tA--;)AA[tA]=2*Math.random()-1;for(tA=0;tA<O;tA++){if(F)return tA;if(J&&++V>=J&&(V=0,this.reset()),o&&++r>=o&&(o=0,e*=h),(e*=n+=a)>s&&(e=s,x>0&&(F=!0)),S=e,k>0&&(Z+=W,S*=1+Math.sin(Z)*k),(S|=0)<8&&(S=8),X||((f+=c)<0?f=0:f>.5&&(f=.5)),++R>T)switch(R=0,++P){case 1:T=i;break;case 2:T=B}switch(P){case 0:q=R*C;break;case 1:q=1+2*(1-R*b)*g;break;case 2:q=1-R*D;break;case 3:q=0,F=!0}p&&((j=0|(w+=m))<0?j=-j:j>1023&&(j=1023)),M&&u&&((d*=u)<1e-5?d=1e-5:d>.1&&(d=.1)),Y=0;for(var iA=8;iA--;){if(++E>=S&&(E%=S,3==X))for(var BA=AA.length;BA--;)AA[BA]=2*Math.random()-1;switch(X){case 0:_=E/S<f?.5:-.5;break;case 1:_=1-E/S*2;break;case 2:_=.225*(((_=1.27323954*(H=6.28318531*((H=E/S)>.5?H-1:H))+.405284735*H*H*(H<0?1:-1))<0?-1:1)*_*_-_)+_;break;case 3:_=AA[Math.abs(32*E/S|0)]}M&&(I=K,(v*=L)<0?v=0:v>.1&&(v=.1),y?(G+=(_-K)*v,G*=U):(K=_,G=0),z+=(K+=G)-I,_=z*=1-d),p&&($[Q%1024]=_,_+=$[(Q-j+1024)%1024],Q++),Y+=_}Y*=.125*q*N,A[tA]=Y>=1?1:Y<=-1?-1:Y}return O}};sound=function(A){if(y){var i=function(A){t=t||new AudioContext,B._p._s(A);var i=B.tr(),e=t.createBuffer(1,i+1,t.sampleRate);return B._s(e.getChannelData(0),i),e}(A),e=t.createBufferSource();e.buffer=i,e.connect(t.destination),e.start(t.currentTime)}};var e,s,O=new Image;(O=document.createElement("canvas")).width=1008,O.height=480,mr=new function(A){this.s=200,this.n=function(){return this.s=16807*this.s%2147483647,(this.s-1)/2147483646}}(200),gen=function(A){for(v=480,L=[mr.n()*v|0,mr.n()*v|0];L.length<O.width;)v*=.52,L=function(A,t){for(n=[A[0]],i=1;i<A.length;i++)n.push((A[i-1]+A[i])/2+(Math.random()-.5)*t|0),n.push(A[i]);return n}(L,v);var t=(e=O.getContext("2d")).createLinearGradient(0,O.height,0,0);for(t.addColorStop(0,"#000"),t.addColorStop(.95,"rgb(200,"+255*mr.n()+",200)"),e.strokeStyle=t,i=0;i<O.width;i++)e.beginPath(),e.moveTo(i+.5,O.height-L[i]),e.lineTo(i+.5,O.height),e.stroke()},gen(),gen(),gen(),mr.n();var l,u=new Image,d=[];u.src="c.png",load=function(A){c.width=1008,c.height=480,(e=c.getContext("2d")).fillStyle="#D0F4F7",l=new P(40,200),(s=new Image).src="t.png",s.onload=function(){for(var A=0;A<10;A++)d.push({x:1224*Math.random(),y:250*Math.random(),size:.5+Math.random()/2,speed:Math.max(.25,Math.random())})},onresize(),T()};var y=0,M="                                               B B BBB B B          A A A A A A          ABA A A ABA            A A A   A     BBBC   A AAA   A TBBBAAADC   MM   I  TUAAAAAAADBBBBBBBBBBBUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC         TAAAAAAAAAADC       TUAAAAAAAAAAADC     TUAAAAAAAAAAAAADC   TUAAAAAAAAAAAAAAADB BUAAAAAAAAA                   AA                   AA         O         AA         O         AA         O         AA         O         AA                   AA         J         AA  BBBBBBBBBBBBBBBBBAA                   AA                   AA B                 AAJA                 AAAA                 AAAA                 AA               A   AA               A  XAA      WWXWW    AAAAAA      BBBBB    AAAAAA             TBAAAAAA            TUAAAAAAA           TUAAAAAAAA          TUAAAAAAAAA         TUAAAAAAAAAA        TUAAAAAAAAAAABBBBBC             AAAAAAADC            AAAAAAAADC           AAAAAAAAADC          AAAAAAAAAADC         AAAAAAAAAAADC        AAAAAAAAAAAADC       AAAAAAAAAAAAADC      AAAAAAAAAAAAAADC     AAAAAAAAAAAAAAADB    AA              A    AA BB           A    AA A B               AA A A             JJAA A A          BBBBBAA AB                AA                   AA BBB               AA A A               AA AB  A N    N      AA A A AW           BAA A A A      N   N AAA     A           XAAA BBB A N    N     AAA A A AW           AAA ABA A      N   N AAA A A A           XAAA A A A N    N      AA     AW            AA A A A      N   N  AA A A A           XAAA ABA A N    N     AAA A A AW           AAA A A A          N AAA                 XAAA                   AA      W            AA      B            AA   BBBBBBBBBBBBBBBBAA                   AA                   AAJO                 AABO                 AA O                 AA O                 AA O                 AANJ                 AANB                 AAN                  AAN                  AAN                  AAJM                 AABM                 AA M                 AA M                 AALM                 AALJ                 AALB       TB        AAL       TUAMLMOLMNLAAL      TUAAONLNMNLOAAL     TUAAALONLOLMNAAJ    TUAAAANLMOLMLOAAB   TUAAAAAJJJJJJJJAA   TUAAAAAABBBBBBBBAA  TUAAAAAAA        AA BUAAAAAAAA        AA AAAAAAAAAA        AA                   AA                   AA                LMNAAJ               OMLAABBB             BBBAAAAA             AAAAA      L      L     AA      B      B     AA                   AA                   AA         LO        AA        WLOX       AA        ALOA       AA         LO        AA         LO        AA         LO        AA         LO        AA         LO        AA         JJ        AA         BB        AA       B    B      AA                   AA                   AA   B           B   AA                   AA                   AAB                 BAA                   AA                   AA   B           B   AA                   AA                   AABBBBBBB     BBBBBBBAA                   AA                   AA      BBBBBBB      AA                   AA                   AA                   AA                   AAW                 XAABBBBBBB     BBBBBBBAA      AW   XA      AA      AW   XA      AA      AW   XA      AA      AW   XA      AA      AW   XA      AA      AW   XA      AA      AW   XA      AA  A A AW   XA      AA  A A AW   XA      AA  AA  AW   XA      AA  A A AW   XA      AA  A A AW   XA      AA      AW   XA      AA  AAA AW   XA      AA    A AW   XA      AA    A AW   XA      AA   AA AW   XA      AA    A AW   XA      AA  AAA AW   XA      AA      AW   XA      AA   A  AW   XA      AA  AA  AW   XA      AA   A  AW   XA      AA   A  AW   XA      AA  AAA AW   XA      AA      AW   XA      AA      AW   XA      AA      AW   XA      AA  AAA AW   XA      AA  A   AW   XA      AA  AAA AW   XA      AA    A AW   XA      AA  AAA AW   XA      AA      AW   XA      AA  AAA AW   XA      AA    A AW   XA      AA    A AW   XA      AA  A A AW   XA      AA   AA AW   XA      AA      AW   XA      AA      AW   XA      AA      AW   XA      AA      A     A      AA      M            AA      M  J         AA   OO AAAAAAA      AA OO  O             AAO     OO           AAO       O   OO     AAO       O     O    AAW        OO    O   AA          O    O   AA          X     O  AA          A      O AA                   AA                  XAA                   AA  N B O B L B M B  AA  N A O A L A M A  AA  N A O A L A M A  AA  N A O A L A M A  AA  N A   A   A   A  AA  J A J A J A J    AAO BBBBBBBBBBBBBBBBBAAO                  AAO                  AAO                  AA                   AAJO                 AAAN                 AA M                 AA O              L  AA N          XNN  L AA M          BBB  L AA J          AAA   LAABBB               LAAAAA               LAA  A                AA  A               JAA  ABBBBBB       O BAA                BBAAA                AAAAA            O      AA            B      AA            A      AA        O          AA        B          AA        A          AA    O              AA    B              AA    A              AA              BBBBBAAB     LLL     AAAAAAA      LLL          AA                   AABBBBBBBBBBBBBBB    AAAAAAAAAAAAAAAAA    AA             NLM   AA            O   O  AA           O       AA          O        AA      T          JBAA     TU          AAAA    TUA           AAA   TUAAW J  B    XAAA BBUAAABBBBBABBBBAAAA A  NN   NN        AA A N  N N  N       AA        N  N       AA                   AA       B    B      AAJ      A    A      AABBBBBBBA    ABB    AA                  XAA     LL     LL     AA     LL            AA            TBBBBB AA           TU      AAOBBBBBBBBBBU  OO   AAO                  AAO       OO         AAO                  AAO                  AA                   AAJ    N             AAB         O      JMAA     J           BMAA     B    J       MAA                  MAA                  MAA                   AA                  JAA                  BAA                   AALNNN     O        BAALBBB           O   AAL        J         AAL        B     J   AAL              B   AAL                  AAJMNMNMNMNMNMNMNMN  AABBBBBBBBBBBBBBBBBB AA                  OAA                  OAA                  OAA                  OAA                   AA                  JAANLMNOL          OTBAANBBBBB          BUAAAN        J         AAN        B         AAN                  AAN                  AAJ                  AABBBBB         M    AA      N       B  N AA     LB    O     B AA     L     B       AA     L        L    AA     L        B    AA     BCOOOOOOOOOOOOAA     ADBBBBBBBBBBBBAA       AAAAAAAAAAAAAAW      AAAAAAAAAAAAAA       A           AA       A           AA       A           AA       A           AA     X A           AA     AAA           AA       A           AA       A           AA       A           AAW      A OL        AA       A NM        AA       A OL        AA       A NM        AA       A OL        AA       A NM        AA     X AJOL        AA     AAAB   MMM    AA            BBB    AA                 OOAA                 BBAAW             MLM  AABBBBBC        ONO  AAAAAAADC     BBBBBBBAAAAAAAADC    AAAAAAAAAAAAAAAADC          AAAAAAAAAADC  O      AAAAAAAAAAADC  O     AAAAAAAAAAAADC       AAAAAAAAAAAAADBB     AA                   AA                   AA                   AA                  XAA                   AA              MM   AA              BBBBBAA              AAAAAAA          N        AA       JJJJ        AA       BBBB        AA     N             AA  JJJJ             AA  BBBB             AA                   AAJ L                AAB L                AA   L               AA   L               AA   L               AA     M             AA   J M             AA   B M             AA      M            AA      M            AA      M            AA        N          AA      J  N         AA      B  N         AA          N        AA          N        AA          N        AA            O      AA          J  O     AA          B  O     AA              O    AA              O    AA              O    AA                L  AA              J  L AA              B  L AA                  LAA                  LAA                  LAA                   AA                  JAA    M             BAAOOOOB          OOOAAAOOOOA         BBBBAAAOOOOAJ         AAAAAAOOOOAB       L     AA    AA        L    AAJJJJAA MNJ     L   AABBBBAABBBB      L  AAAAAAAAAAAA       L AA                   AA                  XAA            NONO   AA        MM  BBBB   AA     L  BB         AA     B             AA                   AA     LLLL          AAN   TBBBBC    NN   AAN  TUAAAADCML NN   AAN BUAAAAAADBBBBBBBBAAN AAAAAAAAAAAAAAAAAAAN                  AAN                  AA                   AAJ LLL          OOO AABBBBB   MMMM   BBBNA         BBBB      NA                   NAA                  NAA        OOOO      NAA      TBBBBBC      AA  OOOTUAAAAADC OO JAABBBBBUAAAAAAADBBBBBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";for(var L in M=M.split(""))M[L]={type:" "!=M[L]?M[L].charCodeAt(0)-64:null},2==M[L].type&&!M[L-21].type&&mr.n()>.8&&(M[L-21].type=[5,6,7,8,16,18][6*mr.n()|0]);var N={20:39,80:39,140:39,150:39,520:39,540:39,560:37,610:37,611:39,612:39,850:39,955:38,975:38,990:39},p={0:" ",80:"What's that?...",150:"Oh!",250:"I finally found the chest of the 404 gems!",520:" ",610:"Oh no!!!",700:"I need to find all of them!",850:" "};go=1;var x,m,w,J=0,X=[],k=0;function T(A){if(x=0,m=0,k<1e3){if(N[k]&&(keys[N[k]]=!keys[N[k]]),p[k]&&(o.innerHTML=p[k],o.style.display=" "==p[k]?"none":"inline-block",o.style.left=(l.x+48)/1008*100+"%"),280==k&&(J=2),350==k&&(J=4),440==k&&(J=10),560==k){for(var t=0;t<100;t++)X.push(new G(620,240));M[160].type=null,sound([3,,.59,.78,.84,.1765,,-.37,,,,,,,,,.3976,-.2442,1,,,,,.5])}if(k>=560&&k<=650){var i=650-k;x=Math.random()*i-i/2,m=Math.random()*i-i/2}975==k&&(l.x=50,l.y=20050),990==k&&(l.js=1,allowKeys=1,floor.style.display="block",ti.style.display="block",sc.style.display="block",w=A)}for(y&&k++,e.fillRect(0,0,1008,480),t=0;t<d.length;t++)d[t].x<-200&&(d[t].x=1200),e.drawImage(u,d[t].x-=d[t].speed,d[t].y,128*d[t].size,71*d[t].size);e.drawImage(O,0,0,1008,592);var B=0;start=Math.max(0,Math.round(l.y/48)-6);var n=48*start-48;for(t=21*start;t<21*(start+11);t++){if(t%21==0&&(n+=48,B=0),M[t].x=B,M[t].y=n,null!=M[t].type){var a=M[t].type-1,h=x,r=m;-1!=[11,12,13,14].indexOf(a)&&(h=5*Math.sin(k/24));var f=0;8==a?(r=Math.random()*J,h=-Math.random()*J):22==a?(a=10,f=Math.PI/4):23==a&&(a=10,f=-Math.PI/4),f?(e.save(),e.translate(B+24,n+h+deltaY+24),e.rotate(f),e.drawImage(s,48*a,0,48,48,-24,-24,48,48),e.restore()):e.drawImage(s,48*a,0,48,48,B+r,n+h+deltaY,48,48),15==a&&(k%180==0&&(C[t]=10+(20*Math.random()|0)),C[t]?C[t]--:e.drawImage(s,768,0,48,48,B,n+deltaY,48,48)),10==a&&0==M[t].returnTo?M[t].type=10:10==a&&M[t].returnTo--}B+=48}for(t=0;t<X.length;t++)X[t].update();l.update(),go&&(window.requestAnimationFrame(T),nb=(A-w)/1e3,sec=0|nb,mill=Math.min(99,100*(nb-sec)),ti.innerHTML=((sec/60|0)<10?"0":"")+(sec/60|0)+":"+(sec%60<10?"0":"")+sec%60+":"+(mill<10?"0":"")+(0|mill)),l.y>2e4&&(e.fillStyle="#754F2C",e.font="20px Arial",e.fillText("move with arrow keys",410,20600-l.y),e.fillStyle="#D0F4F7")}G=function(A,t){this.x=A,this.y=t,this.speed=5+15*Math.random(),this.angle=Math.random()*Math.PI*2,this.life=300,this.tN=[11,12,13,14][4*Math.random()|0],this.vY=-10,this.update=function(){this.life--,this.life||(X=[]),this.vY+=.1,e.drawImage(s,48*this.tN,0,48,48,this.x,this.y,48,48),this.x+=Math.sin(this.angle)*this.speed,this.y+=Math.cos(this.angle)*this.speed+this.vY}};var C=[],b=[];S=function(A,t,i){this.fi=A,this.sf=A,this.lf=t,this.wait=0,this.image=new Image;var B="p.png"+(i?"R":"");this.name=B,this.r=i,b[B]||(b[B]=new Image,b[B].src=B.replace("R",""),this.r&&(b[B].onload=function(){if(!this._m){var A=document.createElement("canvas");A.width=576,A.height=32;var t=A.getContext("2d");t.translate(576,0),t.scale(-1,1);for(var i=0;i<18;i++)t.drawImage(this,32*i,0,32,32,32*(18-i),0,32,32);this.src=A.toDataURL(),this._m=1}})),this.update=function(){this.wait>0?this.wait--:(this.wait=3,++this.fi>=this.lf&&(this.fi=this.sf)),this.draw()},this.draw=function(){e.drawImage(b[this.name],32*this.fi,0,32,32,this.x,this.y+deltaY,48,48),deltaY=256-this.y}};var D=0;keys=[],deltaY=0,allowKeys=0,document.onkeydown=function(A){allowKeys&&(keys[A.keyCode]=1)},document.onkeyup=function(A){allowKeys&&(keys[A.keyCode]=0,38==A.keyCode&&(l.js=1)),y||(h.remove(),iA(),y=1)},g=function(A,t){var i=A/48+21*(t/48|0)|0;return M[i]?-1!=[12,13,14,15].indexOf(M[i].type)?(sound([0,,.0202,.4332,.3526,.46,,,,,,.5604,.6381,,,,,,1,,,,,.5]),sc.innerHTML=++D+"/404",M[i].type=null,null):null!=M[i].type&&-1==[4,5,6,7,8,16,18].indexOf(M[i].type)?M[i]:null:null},P=function(A,t){this.state="idle",this.x=A,this.y=t,this.d=1,this.s={},this.v={x:0,y:1},this.js=1,this.s.idle=new S(6,11),this.s.idleL=new S(6,11,1),this.s.walk=new S(1,5),this.s.walkL=new S(1,5,1),this.s.jump=new S(12,14),this.s.jumpL=new S(12,14,1),this.s.fall=new S(15,17),this.s.fallL=new S(15,17,1),this.sprite=this.s[this.state],this.update=function(){var A=this.state;floor2.innerHTML=424-this.y/48|0,20==Math.round(this.y/48)&&(go=0,keys=[],f.innerHTML="CONGRATULATIONS !<br/>You reach the 404th floor in "+ti.innerHTML+"<br/>"+D+" / 404 gems found<br/><br/><a href='//twitter.com/intent/tweet?hashtags=js13k&url="+location+"&text=I beat "+document.title+" in "+ti.innerHTML+" with "+D+"/404 gems !'>Share on twitter</a>",f.style.display="flex"),"jump"!=this.state&&"fall"!=this.state?(this.v.x=0,keys[39]?(this.v.x=6,this.d=1):keys[37]&&(this.v.x=-6,this.d=0),keys[38]&&this.js&&(this.v.y=-18,sound([0,,.1945,,.2019,.3725,,.2486,,,,,,.3973,,,,,1,,,.0979,,.5]),this.js=0)):keys[39]?(this.d=1,this.v.x<0&&(this.v.x*=.9),this.v.x>6.2&&(this.v.x*=.95),this.v.x<6.2&&(this.v.x+=.5)):keys[37]?(this.d=0,this.v.x>0&&(this.v.x*=.9),this.v.x<-6.2&&(this.v.x*=.95),this.v.x>-6.2&&(this.v.x-=.5)):this.v.x*=.9,this.v.y+=1.01,this.v.y>47&&(this.v.y=47);var t=0;if(this.v.y>0)for(i of(B=48,[24,12,36]))if(c=g(this.x+i+this.v.x,this.y+this.v.y+B)){switch(this.v.y=0,this.y=c.y-48,c.type){case 10:case 11:this.v.y=-24,this.state="jump",c.type=11,c.returnTo=5,sound([0,,.16,.33,.59,.35,,.02,-.02,.69,.3,,,.31,,.36,,,1,,,.0715,,.5]);break;case 23:case 24:this.v.y=-25,this.v.x=23==c.type?24:-24,this.state="jump",l.x=c.x,sound([0,,.16,.33,.59,.35,,.02,-.02,.69,.3,,,.31,,.36,,,1,,,.0715,,.5]);case 3:this.y+=Math.min(48,this.x+24+this.v.x-c.x),t=1;break;case 20:this.y+=Math.min(48,48-(this.x+24+this.v.x-c.x)),t=1}break}if(!t){if(this.v.y<0){B=0;for(var i=12;i<=36;i+=12)if(c=g(this.x+i+this.v.x,this.y+this.v.y+B)){this.v.y=0,this.y=c.y+48;break}}if(this.v.x>0){i=48;A:for(var B=0;B<=47;B+=12)if(c=g(this.x+i+this.v.x,this.y+this.v.y+B)){switch(c.type){case 3:continue;case 23:case 24:this.v.y=-25,this.v.x=23==c.type?24:-24,this.state="jump",l.x=c.x,sound([0,,.16,.33,.59,.35,,.02,-.02,.69,.3,,,.31,,.36,,,1,,,.0715,,.5]);break A;case 20:this.y+=Math.min(0,-(this.x+24+this.v.x-c.x));break A}this.v.x=0,this.x=c.x-48;break}}if(this.v.x<0){i=0;A:for(B=0;B<=47;B+=12)if(c=g(this.x+i+this.v.x,this.y+this.v.y+B)){switch(c.type){case 20:continue;case 23:case 24:this.v.y=-25,this.v.x=23==c.type?24:-24,this.state="jump",l.x=c.x,sound([0,,.16,.33,.59,.35,,.02,-.02,.69,.3,,,.31,,.36,,,1,,,.0715,,.5]);break A;case 3:this.y+=Math.min(48,Math.min(48,this.x+24+this.v.x-c.x)-48);break A}this.v.x=0,this.x=c.x+48;break}}}this.state="idle",0!=this.v.x&&(this.state="walk"),this.v.y>0?this.state="fall":this.v.y<0&&(this.state="jump"),"fall"!=A&&"jump"!=A||"walk"!=this.state&&"idle"!=this.state||sound([3,,.0137,,.1662,.31,,-.5727,,,,,,,,,,,1,,,,,.5]),this.y+=this.v.y,this.x+=this.v.x,this.sprite=this.s[this.state+(this.d?"":"L")],this.sprite.x=this.x+x,this.sprite.y=this.y+m,this.sprite.update()}};var U={songData:[{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[1,2,1,2,1,2,3,4,2,1,5,4],c:[{n:[135,,139,,142,,139,,147,,139,,142,,139,,135,,139,,142,,139,,147,,139,,142,,139],f:[]},{n:[140,,144,,147,,144,,140,,144,,147,,144,,140,,144,,147,,144,,140,,144,,147,,144],f:[]},{n:[137,,140,,144,,140,,137,,140,,144,,140,,137,,140,,144,,140,,137,,140,,144,,140],f:[]},{n:[142,,146,,149,,146,,142,,146,,149,,146,,142,,146,,149,,146,,142,,146,,149,,146],f:[]},{n:[137,,141,,144,,141,,137,,141,,144,,141,,137,,141,,144,,141,,137,,141,,144,,141],f:[]}]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[,,,,1,2,3,4,5,6,7,8],c:[{n:[151,,,,,,,,,,,,151,,152,,154,,,,151,,,,159,,,,,,158],f:[]},{n:[158,,,,,,,,156],f:[]},{n:[152,,,,,,,,,,,,152,,154,,156,,,,152,,,,161,,,,,,159],f:[]},{n:[159,,,,,,,,158],f:[]},{n:[159,,,,,,156,,152,,,,,,,,,,,,152,,154,,156,,,,158],f:[]},{n:[159,,,,,,154,,151],f:[]},{n:[159,,,,,,156,,153,,,,,,,,,,,,153,,154,,156,,,,153],f:[]},{n:[154],f:[]}]},{i:[0,255,116,1,0,255,116,0,1,0,4,6,35,0,0,0,0,0,0,2,14,0,0,20,0,0,0,0],p:[,,,,1,1,1,1,1,1,1,1],c:[{n:[139,,,,151,,,,139,,,,151,,,,139,,,,151,,,,139,,,,151],f:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,20]}]},{i:[0,255,116,1,0,255,116,0,1,14,4,6,45,0,0,0,0,0,0,2,136,15,0,16,0,0,66,6],p:[,,,,1,1,1,1,1,1,1,1],c:[{n:[,,,,139,,,,,,,,139,,,,,,,,139,,,,,,,,139],f:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,16]}]},{i:[0,160,128,1,0,159,128,0,1,210,4,7,41,0,0,0,60,4,1,2,255,0,0,15,61,5,32,6],p:[,,,,1,1,1,1,1,1,1,1],c:[{n:[,,,,139,,,,,,,,139,,,,,,,,139,,,,,,,,139],f:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,15]}]},{i:[0,0,128,0,0,0,128,0,0,125,0,1,59,0,0,0,0,0,0,1,193,171,0,11,39,3,88,3],p:[,,2,2,1,1,1,1,1,1,1,1],c:[{n:[156,,156,,156,,156,,156,,156,,156,,156,,156,,156,,156,,156,,156,,156,,156,,156],f:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,11]},{n:[156,,,,,,,,156,,,,,,,,156,,,,,,,,156],f:[]}]},{i:[2,188,128,0,2,188,140,18,0,0,33,119,158,0,0,0,0,0,0,2,5,0,0,32,0,0,24,8],p:[1,2,1,2,1,2,3,4,2,1,5,4],c:[{n:[147,,,,,,,,,,,,,,,,147,,,,,,,,,,,,,,,,139,,,,,,,,,,,,,,,,139,,,,,,,,,,,,,,,,142,,,,,,,,,,,,,,,,142],f:[6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,188]},{n:[140,,,,,,,,,,,,,,,,140,,,,,,,,,,,,,,,,144,,,,,,,,,,,,,,,,144,,,,,,,,,,,,,,,,147,,,,,,,,,,,,,,,,147],f:[]},{n:[137,,,,,,,,,,,,,,,,137,,,,,,,,,,,,,,,,140,,,,,,,,,,,,,,,,140,,,,,,,,,,,,,,,,144,,,,,,,,,,,,,,,,144],f:[]},{n:[142,,,,,,,,,,,,,,,,142,,,,,,,,,,,,,,,,146,,,,,,,,,,,,,,,,146,,,,,,,,,,,,,,,,149,,,,,,,,,,,,,,,,149],f:[]},{n:[137,,,,,,,,,,,,,,,,137,,,,,,,,,,,,,,,,141,,,,,,,,,,,,,,,,141,,,,,,,,,,,,,,,,144,,,,,,,,,,,,,,,,144],f:[]}]}]};iA=function(){var A=new AudioContext,t=A.createGain(),i=A.createBufferSource();t.connect(A.destination),A.decodeAudioData(j.buffer,(function(A){i.buffer=A,i.connect(t),i.loop=1,i.loopStart=16,i.loopEnd=48,i.start(0)}))};for(var I=new function(){var A,t,i,B=function(A){return Math.sin(6.283184*A)},e=function(A){return.003959503758*Math.pow(2,(A-128)/12)},s=function(A,t,i){var B,s,a,h,r,o,f,c=n[A.i[0]],O=A.i[1],l=A.i[3],M=n[A.i[4]],d=A.i[5],u=A.i[8],v=A.i[9],L=A.i[10]*A.i[10]*4,y=A.i[11]*A.i[11]*4,N=A.i[12]*A.i[12]*4,x=1/N,p=A.i[13],m=5513*Math.pow(2,2-A.i[14]),w=new Int32Array(L+y+N),J=0,g=0;for(B=0,s=0;B<L+y+N;B++,s++)s>=0&&(s-=m,o=e(t+(15&(p=p>>8|(255&p)<<4))+A.i[2]-128),f=e(t+(15&p)+A.i[6]-128)*(1+8e-4*A.i[7])),a=1,B<L?a=B/L:B>=L+y&&(a-=(B-L-y)*x),h=o,l&&(h*=a*a),r=c(J+=h)*O,h=f,u&&(h*=a*a),r+=M(g+=h)*d,v&&(r+=(2*Math.random()-1)*v),w[B]=80*r*a|0;return w},n=[B,B,function(A){return A%1*2-1},function(A){var t=A%1*4;return t<2?t-1:3-t}];this.gen=function(){var e,a,h,r,o,f,c,O,l,M,d,u,v,L,y=new Int32Array(4233984),N=A.songData[t],x=0,p=0,m=0,w=[];for(h=0;h<=11;++h)for(c=N.p[h],r=0;r<32;++r){var J=c?N.c[c-1].f[r]:0;J&&(N.i[J-1]=N.c[c-1].f[r+32]||0,J<16&&(w=[]));var g=n[N.i[15]],k=N.i[16]/512,W=Math.pow(2,N.i[17]-9)/5513,X=N.i[18],T=N.i[19],C=43.23529*N.i[20]*3.141592/44100,b=1-N.i[21]/255,D=1e-5*N.i[22],U=N.i[23]/32,I=N.i[24]/512,S=6.283184*Math.pow(2,N.i[25]-9)/5513,j=N.i[26]/255,H=5513*N.i[27]&-2;for(d=5513*(32*h+r),o=0;o<4;++o)if(f=c?N.c[c-1].n[r+32*o]:0){w[f]||(w[f]=s(N,f));var _=w[f];for(a=0,e=2*d;a<_.length;a++,e+=2)y[e]+=_[a]}for(a=0;a<5513;a++)(M=y[O=2*(d+a)])||m?(u=C,X&&(u*=g(W*O)*k+.5),p+=(u=1.5*Math.sin(u))*(v=b*(M-p)-(x+=u*p)),M=3==T?p:1==T?v:x,D&&(M=(M*=D)<1?M>-1?B(.25*M):-1:1,M/=D),m=(M*=U)*M>1e-5,L=M*(1-(l=Math.sin(S*O)*I+.5)),M*=l):L=0,O>=H&&(L+=y[O-H+1]*j,M+=y[O-H]*j),y[O]=0|L,y[O+1]=0|M,i[O]+=0|L,i[O+1]+=0|M}return 7==++t},this.create=function(){var A=new Uint8Array(8468012);A.set([82,73,70,70,36,54,129,0,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,0,54,129,0]);for(var t=0,B=44;t<4233984;++t){var e=i[t];e=e<-32767?-32767:e>32767?32767:e,A[B++]=255&e,A[B++]=e>>8&255}return A},A=U,t=0,i=new Int32Array(4233984)};!I.gen(););var j=I.create();onresize=function(){r=2.1,innerWidth/innerHeight<=r?(W=innerWidth,H=W/r):(H=innerHeight,W=H*r),a.style.width=W+"px",a.style.height=H+"px",o.style.transform="scale("+W/1008+")"},load()</script>