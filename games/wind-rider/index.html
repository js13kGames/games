<!doctype html><meta content=#000 name=theme-color><meta content="width=device-width;maximum-scale=1;user-scalable=no" name=viewport><link href=icon.png rel=apple-touch-icon><title>Wind Rider</title><style>body{margin:0}#content{width:95%;margin:auto;max-width:960px;max-height:540px;position:absolute;top:0;bottom:0;right:0;left:0}canvas{height:100%;width:100%;-webkit-tap-highlight-color:transparent;-ms-touch-action:none;-webkit-touch-callout:none;-webkit-user-select:none;background:#3a9bea;background:-moz-linear-gradient(top,#3a9bea 0,#6fa7d6 70%,#565656 71%,#4f4f4f 100%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0,#3a9bea),color-stop(70%,#6fa7d6),color-stop(71%,#565656),color-stop(100%,#4f4f4f));background:-webkit-linear-gradient(top,#3a9bea 0,#6fa7d6 70%,#565656 71%,#4f4f4f 100%);background:-o-linear-gradient(top,#3a9bea 0,#6fa7d6 70%,#565656 71%,#4f4f4f 100%);background:-ms-linear-gradient(top,#3a9bea 0,#6fa7d6 70%,#565656 71%,#4f4f4f 100%);background:linear-gradient(to bottom,#3a9bea 0,#6fa7d6 70%,#565656 71%,#4f4f4f 100%)}#vignette{height:100%;width:100%;position:absolute;pointer-events:none;background:-moz-radial-gradient(center,ellipse cover,rgba(255,255,255,0) 0,rgba(115,175,221,.2) 62%,rgba(0,0,0,.6) 100%);background:-webkit-gradient(radial,center center,0,center center,100%,color-stop(0,rgba(255,255,255,0)),color-stop(62%,rgba(115,175,221,.2)),color-stop(100%,rgba(0,0,0,.6)));background:-webkit-radial-gradient(center,ellipse cover,rgba(255,255,255,0) 0,rgba(115,175,221,.2) 62%,rgba(0,0,0,.6) 100%);background:-o-radial-gradient(center,ellipse cover,rgba(255,255,255,0) 0,rgba(115,175,221,.2) 62%,rgba(0,0,0,.6) 100%);background:-ms-radial-gradient(center,ellipse cover,rgba(255,255,255,0) 0,rgba(115,175,221,.2) 62%,rgba(0,0,0,.6) 100%);background:radial-gradient(ellipse at center,rgba(255,255,255,0) 0,rgba(115,175,221,.2) 62%,rgba(0,0,0,.6) 100%)}#twitBtn{position:absolute;top:80%;left:27%}.hidden{display:none}</style><script>!function(){var t,e,n;(function(i){function o(t,e){return y.call(t,e)}function s(t,e){var n,i,o,s,r,a,c,h,u,l,f,d=e&&e.split("/"),p=v.map,m=p&&p["*"]||{};if(t&&"."===t.charAt(0))if(e){for(d=d.slice(0,d.length-1),r=(t=t.split("/")).length-1,v.nodeIdCompat&&M.test(t[r])&&(t[r]=t[r].replace(M,"")),t=d.concat(t),u=0;u<t.length;u+=1)if("."===(f=t[u]))t.splice(u,1),u-=1;else if(".."===f){if(1===u&&(".."===t[2]||".."===t[0]))break;u>0&&(t.splice(u-1,2),u-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((d||m)&&p){for(u=(n=t.split("/")).length;u>0;u-=1){if(i=n.slice(0,u).join("/"),d)for(l=d.length;l>0;l-=1)if((o=p[d.slice(0,l).join("/")])&&(o=o[i])){s=o,a=u;break}if(s)break;!c&&m&&m[i]&&(c=m[i],h=u)}!s&&c&&(s=c,a=h),s&&(n.splice(0,a,s),t=n.join("/"))}return t}function r(t,e){return function(){return f.apply(i,w.call(arguments,0).concat([t,e]))}}function a(t){return function(e){m[t]=e}}function c(t){if(o(g,t)){var e=g[t];delete g[t],x[t]=!0,l.apply(i,e)}if(!o(m,t)&&!o(x,t))throw new Error("No "+t);return m[t]}function h(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function u(t){return function(){return v&&v.config&&v.config[t]||{}}}var l,f,d,p,m={},g={},v={},x={},y=Object.prototype.hasOwnProperty,w=[].slice,M=/\.js$/;d=function(t,e){var n,i=h(t),o=i[0];return t=i[1],o&&(n=c(o=s(o,e))),o?t=n&&n.normalize?n.normalize(t,function(t){return function(e){return s(e,t)}}(e)):s(t,e):(o=(i=h(t=s(t,e)))[0],t=i[1],o&&(n=c(o))),{f:o?o+"!"+t:t,n:t,pr:o,p:n}},p={require:function(t){return r(t)},exports:function(t){var e=m[t];return void 0!==e?e:m[t]={}},module:function(t){return{id:t,uri:"",exports:m[t],config:u(t)}}},l=function(t,e,n,s){var h,u,l,f,v,y,w=[],M=typeof n;if(s=s||t,"undefined"===M||"function"===M){for(e=!e.length&&n.length?["require","exports","module"]:e,v=0;v<e.length;v+=1)if("require"===(u=(f=d(e[v],s)).f))w[v]=p.require(t);else if("exports"===u)w[v]=p.exports(t),y=!0;else if("module"===u)h=w[v]=p.module(t);else if(o(m,u)||o(g,u)||o(x,u))w[v]=c(u);else{if(!f.p)throw new Error(t+" missing "+u);f.p.load(f.n,r(s,!0),a(u),{}),w[v]=m[u]}l=n?n.apply(m[t],w):void 0,t&&(h&&h.exports!==i&&h.exports!==m[t]?m[t]=h.exports:l===i&&y||(m[t]=l))}else t&&(m[t]=n)},t=e=f=function(t,e,n,o,s){if("string"==typeof t)return p[t]?p[t](e):c(d(t,e).f);if(!t.splice){if((v=t).deps&&f(v.deps,v.callback),!e)return;e.splice?(t=e,e=n,n=null):t=i}return e=e||function(){},"function"==typeof n&&(n=o,o=s),o?l(i,t,e,n):setTimeout((function(){l(i,t,e,n)}),4),f},f.config=function(t){return f(t)},t._defined=m,n=function(t,e,n){e.splice||(n=e,e=[]),!o(m,t)&&!o(g,t)&&(g[t]=[t,e,n])},n.amd={jQuery:!0}})(),n("almond",(function(){})),n("minivents.min",["require"],(function(t){function e(t){var e={};(t=t||this).on=function(t,n,i){e[t]||(e[t]=[]),e[t].push({f:n,c:i})},t.off=function(t,n){t||(e={});for(var i=e[t]||[],o=i.length=n?i.length:0;o-- >0;)n==i[o].f&&i.splice(o,1)},t.emit=function(){var t,n=Array.apply([],arguments),i=e[n.shift()]||[],o=i.length;for(t=0;o>t;t++)i[t].f.apply(i[t].c,n)}}return window.Events=e,e})),n("vector",["require"],(function(t){function e(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))}var n=function(t,e){this.x=t,this.y=e};return n.prototype={add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this},mag:function(){return e(this.x,this.y)},scale:function(t){return this.x*=t,this.y*=t,this},normalise:function(){var t=Math.max(Math.abs(this.x),Math.abs(this.y));return this.x/=t,this.y/=t,this},limit:function(t){"number"==typeof t?(this.x=Math.min(t,Math.max(-t,this.x)),this.y=Math.min(t,Math.max(-t,this.y))):(this.x=Math.min(t.hiX,Math.max(t.loX,this.x)),this.y=Math.min(t.hiY,Math.max(t.loY,this.y)))},getDist:function(t){return e(Math.abs(this.x-t.x),Math.abs(this.y-t.y))},getAngle:function(){return Math.atan2(this.y,this.x)},getScaled:function(t){return new n(this.x*t,this.y*t)},clone:function(){return new n(this.x,this.y)},toString:function(){return"Vector: ["+this.x+", "+this.y+"]"}},n.fromPolar=function(t,e){return new n(t*Math.cos(e),t*Math.sin(e))},n.dist=function(t,e){return t.getDist(e)},window.Vector=n,n})),n("physics",["require","vector"],(function(t){var e=t("vector"),n=function(){this.physicsObjects=[],gameEvents.on("update",this.update,this),gameEvents.on("registerPhysics",this.registerObject,this),gameEvents.on("destroy",this.removeObject,this),gameEvents.on("accelerate",this.addAcceleration,this)};return n.prototype={registerObject:function(t,n,i,o){this.physicsObjects.push(t),t.velocity=o&&o.velocity||new e(0,0),t.acceleration=o&&o.acceleration||new e(0,0),t.position=new e(n,i)},removeObject:function(t){var e=this.physicsObjects.indexOf(t);e>-1&&this.physicsObjects.splice(e,1)},update:function(t){for(var e=0;e<this.physicsObjects.length;e++)this.updatePhysics(this.physicsObjects[e],t.windVector)},updatePhysics:function(t,n){var i=new e(n.x,n.y);i.scale(.05),debug.wind&&t.acceleration.add(i),t.velocity.add(t.acceleration),t.acceleration=new e(0,0),t.position.add(t.velocity),t.velocity.scale(.9)},addAcceleration:function(t,e){t.acceleration.add(e)}},n})),n("bike",["require","vector"],(function(t){function e(t,e,n,o,s,r){t.save(),t.translate(s.x,s.y);var a=e.getScaled(n*o);return t.beginPath(),t.moveTo(0,0),t.lineTo(a.x,a.y),t.strokeStyle=r||"#000",t.stroke(),t.restore(),new i(a.x,a.y).add(s)}function n(t){return Math.PI*t/180}var i=t("vector"),o=i.fromPolar(1,n(352)),s=i.fromPolar(1,n(70)),r=i.fromPolar(1,n(185)),a=i.fromPolar(1,n(131)),c=new i(0,0),h=function(t){this.scale=10,this.position=t,this.rotation=Math.PI/2,this.colour="#"+Math.floor(16777215*Math.random()).toString(16),console.log(this.colour),gameEvents.on("render",this.render,this)};return h.prototype={render:function(t){this.drawBike(t)},update:function(t){this.position=t.position,this.velocity=t.velocity,this.rotation+=2*Math.PI+n(this.velocity.x),this.rotation=this.rotation%(2*Math.PI)},drawPedal:function(t,n,o){t.save(),t.translate(n.x,n.y);var s=e(t,i.fromPolar(o?3*this.scale:-3*this.scale,this.rotation),1,1,new i(0,0),o?"#f00":"#0f0");t.beginPath(),t.moveTo(s.x-this.scale,s.y),t.lineTo(s.x+this.scale,s.y),o?this.pedalA=s:this.pedalB=s,t.strokeStyle="#000",t.stroke(),t.restore()},drawWheel:function(t,n){t.save(),t.translate(n.x,n.y),t.rotate(this.rotation);for(var o=0;o<2*Math.PI;o+=Math.PI/5){var s=i.fromPolar(5*this.scale,o);t.moveTo(0,0),e(t,s,1,1,new i(0,0),"#aaa")}t.beginPath(),t.arc(0,0,5*this.scale,0,2*Math.PI),t.strokeStyle="#000",t.stroke(),t.restore(),t.moveTo(n.x,n.y)},drawBike:function(t){t.save(),t.lineWidth=4,t.translate(this.position.x,this.position.y);var n=e(t,s,2,this.scale,c,this.colour),h=new i(0,0).add(s).scale(7.5*this.scale).add(n);this.drawPedal(t,h,!1),e(t,s,7.5,this.scale,n,this.colour),t.moveTo(n.x,n.y);var u=e(t,o,10,this.scale,n,this.colour),l=c.clone().add(u).subtract(s.clone().scale(2*this.scale)),f=new i(0,0).add(s).scale(10.3*this.scale).add(l);t.moveTo(f.x,f.y),this.drawWheel(t,f),t.moveTo(l.x,l.y),e(t,s,10,this.scale,l,this.colour),t.moveTo(u.x,u.y),e(t,a,11.2,this.scale,u,this.colour),t.moveTo(h.x,h.y);var d=e(t,r,7.5,this.scale,h,this.colour);this.drawWheel(t,d),t.beginPath(),t.moveTo(d.x,d.y),t.lineTo(n.x,n.y),this.colourStroke(t),this.drawPedal(t,h,!0),t.restore()},colourStroke:function(t){t.strokeStyle=this.colour,t.stroke()}},h})),n("player",["require","vector","bike"],(function(t){var e=t("vector");new e(0,.1);return Bike=t("bike"),Player=function(){gameEvents.emit("registerPhysics",this,480,265),this.radius=25,this.useRight=!1,this.bike=new Bike(this.position.clone()),bornTime=Date.now(),debug.player&&gameEvents.on("update",this.update,this),debug.player&&gameEvents.on("render",this.render,this),debug.player&&gameEvents.on("press",this.onPress,this),debug.player&&gameEvents.on("keyup",this.onKeyUp,this)},Player.prototype={update:function(){var t={left:-this.radius,right:canvas.width+this.radius};debug.death?(this.position.x<t.left||this.position.x>t.right)&&gameEvents.emit("gameover"):this.position.x>t.right?this.position.x=t.left:this.position.x<t.left&&(this.position.x=t.right),this.bike.update({position:this.position,velocity:this.velocity}),this.useRight=this.bike.rotation>Math.PI/2*3||this.bike.rotation<=Math.PI/2},render:function(t){t.save(),t.font="48px CourierNew, Courier, sans-serif",t.textBaseline="middle",this.useRight?(t.fillStyle="#f00",t.textAlign="right",t.fillText("Tap right!",890,500)):(t.fillStyle="#0f0",t.textAlign="left",t.fillText("Tap left!",50,500)),t.restore()},onPress:function(t){(this.useRight&&t.x>480||!this.useRight&&t.x<=480)&&this.accelerate()},onKeyUp:function(t){(this.useRight&&39===t||!this.useRight&&37===t)&&this.accelerate()},accelerate:function(){gameEvents.emit("accelerate",this,new e(10,0))},getLifeSpan:function(){return Math.round((Date.now()-bornTime)/1e3)},destroy:function(){gameEvents.off("update",this.update,this),gameEvents.off("render",this.render,this),gameEvents.off("press",this.onPress,this)}},Player})),n("wind",["require","vector"],(function(t){var e=t("vector");return Wind=function(){this.windVector=new e(0,0),this.angle=0,this.speed=0,this.size=12,this.xScale=0,this.highestWind=0,gameEvents.on("update",this.update,this),gameEvents.on("render",this.render,this)},Wind.prototype={update:function(t){this.speed+=2*Math.random()-1,this.speed=Math.max(this.speed,0),this.speed=Math.min(this.speed,t.difficulty),this.mph=Math.round(this.speed),this.highestWind<this.mph&&(this.highestWind=this.mph)},render:function(t){context.font="50px CourierNew, Courier, sans-serif",context.textAlign="right",context.fillStyle="#000000",t.fillText(this.mph+" MPH winds",950,50)},destroy:function(){gameEvents.off("update",this.update,this),gameEvents.off("render",this.render,this)},getVector:function(){return new e(-this.speed,0)},getHighestWindSpeed:function(){return this.highestWind}},Wind})),n("sceneManager",["require","physics","player","wind"],(function(t){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},n=function(t){var e=document.getElementById("content"),n=Math.round((t.pageX-e.offsetLeft-e.clientLeft)*scale),i=Math.round((t.pageY-e.offsetTop-e.clientTop)*scale);gameEvents.emit("press",new Vector(n,i))},i=!1,o=t("physics"),s=t("player"),r=t("wind");return window.canvas=document.getElementById("gameCanvas"),window.context=canvas.getContext("2d"),"ontouchstart"in canvas?canvas.addEventListener("touchstart",n):canvas.addEventListener("mousedown",n),document.addEventListener("keyup",(function(t){27===t.which&&(i=!i),gameEvents.emit("keyup",t.which)})),function(){function t(){gameEvents.off(),gameEvents.on("gameover",n),new o,h=new s,u=new r,l=Date.now(),f=Date.now(),d=Date.now(),p=0,m=!1,g=f,v=0,x=3,y="",canvas.width=canvas.width,c()}function n(){m=!0}function a(e){e.x>=600&&e.x<725&&e.y>=410&&e.y<475&&t()}function c(){document.getElementById("twitBtn").classList.toggle("hidden")}new o;var h=new s,u=new r,l=Date.now(),f=Date.now(),d=Date.now(),p=0,m=!1,g=f,v=0,x=3,y="";gameEvents.on("gameover",n),function t(){if(e(t),function(){var t=((l=Date.now())-d)/1e3;m?x=Math.max(1-(Date.now()-v)/1e3,0):(g=Math.round((Date.now()-f)/1e3),d=l,p+=t,gameEvents.emit("update",{dt:t,windVector:u.getVector(),difficulty:p}))}(),m){if(gameEvents.off("gameover",n),h){finalLifeSpan=h.getLifeSpan(),h.destroy(),h=null,v=Date.now(),function(){var t=document.getElementById("crash");t.load(),t.play()}(),y="You survived "+finalLifeSpan+" seconds in winds of up to "+u.getHighestWindSpeed()+"mph!";finalLifeSpan,u.getHighestWindSpeed();document.getElementById("twitBtn").innerHTML="",c(),gameEvents.on("press",a)}u&&(u.destroy(),u=null),function(){var t=x/3*20,e=(2*Math.random()-1)*t,n=(2*Math.random()-1)*t;canvas.width=canvas.width,context.font="72px CourierNew, Courier, sans-serif",context.fillStyle="#000000",context.textAlign="center",context.textBaseLine="middle",context.fillText("Game over",480+e,270+n),context.font="20px CourierNew, Courier, sans-serif",context.fillText(y,480,370),context.fillStyle="#fff",context.fillRect(600,410,125,65),context.fillStyle="#000",context.fillText("Retry",660,450)}()}else i?(d=Date.now(),drawnPausedText||(drawnPausedText=!0,context.font="72px CourierNew, Courier, sans-serif",context.fillStyle="#000000",context.textAlign="center",context.textBaseLine="middle",context.fillText("Paused",480,270))):(drawnPausedText=!1,canvas.width=canvas.width,context.font="48px CourierNew, Courier, sans-serif",g<6&&(context.fillStyle=g%2==0?"#000":"#fff",context.textAlign="center",context.textBaseline="middle",context.fillText("Avoid both sides!",480,270)),context.fillStyle="#000",context.textAlign="left",context.textBaseline="top",context.fillText(g,10,10),gameEvents.emit("render",context))}()}})),n("game",["require","minivents.min","sceneManager"],(function(t){var e=t("minivents.min");window.gameEvents=new e,window.debug={wind:!0,death:!0,player:!0},window.SceneManager=t("sceneManager");new SceneManager;document.ontouchmove=function(t){t.preventDefault()}})),n("main",["require","game"],(function(t){function e(){var t=document.getElementById("content"),e=.5625*t.clientWidth;t.setAttribute("style","height:"+e+"px;"),t.style.height=e+"px",window.scale=960/t.clientWidth}window.onresize=e,e(),window.TWO_PI=2*Math.PI,t("game")})),e(["main"])}()</script><div id=content><div id=vignette></div><div id=canvasContainer><canvas height=540 id=gameCanvas width=960></canvas><div id=twitBtn class=hidden></div></div></div><audio id=crash src=crash1.wav></audio>