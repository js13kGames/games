<!doctype html><title>Rin the Cat Sorceresses - js13kGames 2025</title><style>body,html{margin:0;padding:0;overflow:hidden;height:100%}canvas{display:block;image-rendering:pixelated}</style><canvas id=game></canvas><script>let e=32,t=32,a=256,l=32,i='"Press Start 2P", "VT323", "Consolas", "monospace"',o="#3ae1f4ff",h="#83f3ffff",r="#ff5c5c",n="#d3d3d3ff",f=.004,s=.25,y=300,d=100/126,p=[1,2,3,8,12,21,22,25],c=[4,5,6,7,9,11,18,23,24],M=[10,13,14,15,16,17,19,20,26],v=[[2,3],[2,4],[3,4]],x=[[1,1],[1,2],[1,2]],m=[[0,1],[0,1],[1,1]],g={},u=(["brick1","brick2","player","cat","enemy","bullet1","bullet2","bulletc","life","shield"].forEach(e=>{var t=new Image;t.src=`${e}.png`,g[e]=t}),document.getElementById("game")),w=u.getContext("2d"),P=Array.from({length:a},()=>Array.from({length:a},()=>"")),I=0,b=0,T=0,Y=!1,S=!1,X=0,k=0,C=0,A=0,E=0,R=3,B=3,W=0,L=0,F=512,_=512,H=!1,D=0,V=0,G=0,O=0,U=0,$=0,q=0,N=1,j=[],z=[],J=[],K=[],Q=[],Z=0,ee=0,te=0,ae=!1,le=!1,ie=0,oe=0,he={};function re(){F=512,_=512,J=[],z=[],P=Array.from({length:a},()=>Array.from({length:a},()=>"")),q=y,j=[];let i=0,o=0,h=0;for(;i<8&&o<8;){for(let u=0;u<l;u++)for(let w=0;w<l;w++)P[o*l+u][i*l+w]=0==w||0==u||w==l-1||u==l-1?"brick1":"brick2";if(0!==i||0!==o)if(h)for(let b=l/2-2;b<l/2+2;b++)P[o*l+b].splice(i*l-1,2,"brick2","brick2");else for(let T=l/2-2;T<l/2+2;T++)[P[o*l-1][i*l+T],P[o*l][i*l+T]]=["brick2","brick2"];if(0===i&&0===o&&(firstMoveRightFlag=h),h=Math.random()<.5,j.push(h),7===i&&(h=!1),(h=7===o||h)?i++:o++,i+o===1&&z.push({type:1,x:(i+.5)*l*e,y:(o+.5)*l*t,hp:20,maxHp:20}),2<=i+o&&i+o<14){function Y(e,t){var a=[];for(let l=0;l<t;l++)a.push(e[Math.floor(Math.random()*e.length)]);return a}var r=Math.floor(I/2),n=Y(p,ue(v[r][0],v[r][1])),f=Y(c,ue(x[r][0],x[r][1])),s=(r=Y(M,ue(m[r][0],m[r][1])),n.concat(f,r));for(let S=0;S<s.length;S++){var d=(i*l+12+Math.random()*(l-24))*e,g=(o*l+12+Math.random()*(l-24))*t;z.push({type:s[S],x:d,y:g,hp:30})}}else i+o===14&&z.push({type:114+Math.floor(I/2),x:(i+.5)*l*e,y:(o+.5)*l*t,hp:1500,maxHp:1500})}}function ne(e,t){return e=F-e,t=_-t,Math.atan2(t,e)}function fe(a,i){return D=Math.floor(F/e/l),V=Math.floor(_/t/l),a=Math.floor(a/e),i=Math.floor(i/t),P[i]&&"brick1"===P[i][a]||D+V>G}function se(e,t,a=[0],l=[1],i=[6],o=[10]){for(let s=0;s<a.length;s++){var h=a[s],r=l[s%l.length],n=i[s%i.length],f=o[s%o.length];r={type:r,x:e,y:t,velX:Math.cos(h)*n,velY:Math.sin(h)*n,lifeTime:f||10},J.push(r)}}function ye(e,t){var a;0===e&&0===t||($=s,a=Math.hypot(e,t)||1,O=e/a*10,U=t/a*10,q-=100,K.push({text:"Meow!",x:F,y:_,lifeTime:1,color:h}),L=0)}function de(){return 100+8*Math.floor(T/1e5)}function pe(e,t,a,l=n,o="18px"){w.save(),w.font=o+" "+i,w.fillStyle=l,w.fillText(e,t,a),w.restore()}document.addEventListener("keydown",e=>{he[e.key.toLowerCase()]=!0," "===e.key&&ye(he.a?-1:0+he.d?1:0,he.w?-1:0+he.s?1:0)}),document.addEventListener("keyup",e=>{he[e.key.toLowerCase()]=!1}),u.addEventListener("contextmenu",e=>e.preventDefault()),u.addEventListener("mousemove",e=>{ie=e.offsetX,oe=e.offsetY}),u.addEventListener("mousedown",e=>{0===e.button&&(ae=!0),2===e.button&&$<=0&&q>=100&&(le=!0,ie=e.offsetX,oe=e.offsetY,ye(ie+A-F,oe+E-_))}),u.addEventListener("mouseup",e=>{0===e.button&&(ae=!1),2===e.button&&(le=!1)}),re();let ce=0,Me=window.AudioContext?new window.AudioContext:window.webkitAudioContext?new window.webkitAudioContext:null;function ve(e){if(Me&&!(1e-9<ce&&"alarm"!==e)){var t=Me.currentTime;if("alarm"===e||"tip"===e||"hit"===e)for(let h=0;h<("alarm"===e?4:1);h++){var a=Me.createOscillator(),l=Me.createGain(),i=(a.type="sine",a.frequency.value="hit"===e?450:1200,new Float32Array([0,1,.4,.2,.1])),o=new Float32Array(i.length);i=Me.createPeriodicWave(i,o),a.setPeriodicWave(i),a.connect(l).connect(Me.destination),l.gain.value=.18,o=t+.1*h,a.start(o),l.gain.setValueAtTime(.18,o),l.gain.linearRampToValueAtTime(0,o+.15),a.stop(o+.16)}else if("parry"===e){var h=Me.createBuffer(1,2200,Me.sampleRate),r=h.getChannelData(0);for(let e=0;e<r.length;e++)r[e]=(2*Math.random()-1)*Math.exp(-e/400);var n=Me.createBufferSource(),f=Me.createGain();n.buffer=h,n.connect(f).connect(Me.destination),f.gain.value=.22,n.start(t),f.gain.setValueAtTime(.22,t),f.gain.linearRampToValueAtTime(0,t+.07),n.stop(t+.14)}ce=.05}}function xe(e=1){return 2*Math.PI/e}function me(e,t,a){return e+(t-e)*a}function ge(e,t){return Math.random()*(t-e)+e}function ue(e,t){return Math.floor(Math.random()*(t-e+1))+e}function we(){S||(X=Math.max(X,T),k=Math.max(k,Math.floor(I/2)));try{localStorage.setItem("highScore",X),localStorage.setItem("unlockProgress",k),localStorage.setItem("clearStatus",C)}catch(e){}}(function(){try{X=parseInt(localStorage.getItem("highScore"))||0,k=parseInt(localStorage.getItem("unlockProgress"))||0,C=parseInt(localStorage.getItem("clearStatus"))||0}catch(e){}})(),setInterval(function(){(function(){if(b++,ce=Math.max(0,ce-1/60),0<R){let e,t;if(0<$)e=O,t=U,$-=1/60;else{var a=he.a?-1:0+he.d?1:0,i=he.w?-1:0+he.s?1:0,h=Math.hypot(a,i)||1;if(0===h)return;e=a*((ae?2.5:4)/h),t=i*((ae?2.5:4)/h)}fe(F+=e,_)&&(F-=e),_+=t,fe(F,_)&&(_-=t)}if(((H=0<$)||0<L)&&0<R)for(var r of J){var n=r.x-F,s=r.y-_;!r.converted&&Math.hypot(n,s)<=de()&&(0<L?(r.lifeTime=0,Q.push({type:4,x:r.x,y:r.y,velX:4*(Math.random()-.5),velY:4*(Math.random()-.5),lifeTime:.5}),ve("parry")):(r.converted=!0,W<.5&&(0<Math.floor(B+f)-Math.floor(B)&&B<3&&(K.push({text:"Shield Recover",x:F,y:_,lifeTime:1,color:o}),ve("tip")),W+=f,B+=f),ve("parry"),Q.push({type:2,x:r.x,y:r.y,velX:4*(Math.random()-.5),velY:4*(Math.random()-.5),lifeTime:.5}),q+=0,r.lifeTime=5,T+=15))}else q=Math.min(d+q,y);for(var p of(L=Math.max(L-1/60,0),B=Math.min(B,3),W=Math.max(W-1/60,0),G=16,z)){var c=Math.floor(p.x/e/l),M=Math.floor(p.y/t/l),v=(G=Math.min(G,c+M),ne(p.x,p.y)),x=2*Math.random()*Math.PI,m=b%1500;if(D===c&&V===M)if(1===p.type&&b%70%6==0&&b%70<30)se(p.x,p.y,[v],[3]);else if((2===p.type||3===p.type)&&b%70%5==0&&b%70<25)c=2===p.type?[v-xe(24),v+xe(24)]:[v,v-xe(36),v+xe(36)],se(p.x,p.y,c,[2]);else if(4===p.type&&b%80<25)se(p.x,p.y,[v+b%80*xe(48),v-b%80*xe(48)],[2],[2.5]);else if((5===p.type||6===p.type||7===p.type)&&b%80==0||(13===p.type||14===p.type)&&b%100<=30&&b%10==0)for(let e=0;e<24;e++)se(p.x,p.y,[v+e*xe(24)],[13<=p.type?[4,5][p.type-13]:[1,4,5][p.type-5]],[4.5]);else if(8<=p.type&&p.type<=11&&b%80==0){var g=[[v],[v,v+Math.PI],[v-Math.PI/3,v+Math.PI/3],[x,x+Math.PI/2,x+Math.PI,x+Math.PI/2*3]][p.type-8],u=[[1],[5],[5,6],[1]][p.type-8];for(let e=0;e<15;e++)se(p.x,p.y,g,u,[5-.25*e])}else if(12===p.type&&b%60==0)for(let e=0;e<16;e++)se(p.x+45*Math.cos(e*Math.PI/8),p.y+45*Math.sin(e*Math.PI/8),[v],[1],[3]);else if(15===p.type&&b%90<=45&&b%6==0)M=2*Math.random()*Math.PI,se(p.x,p.y,[M,M,M],[2,2,2],[2.5,3.5,4.5]);else if(16===p.type&&b%100<=60&&b%3==0)se(p.x,p.y,[v+ge(-xe(24),xe(24))],[2],[2+2.5*Math.random()]);else if(17===p.type&&b%100<=60&&b%20==0)for(let e=0;e<8;e++)se(p.x,p.y,[v+ge(-xe(10),xe(10))],[2],[3+1.5*Math.random()]);else if(18===p.type&&b%75==0)for(let e=0;e<6;e++)se(p.x,p.y,[v+e*xe(6)],[7],[2.8]);else if(19!==p.type&&20!==p.type||b%80!=0){if(21===p.type&&b%60==0)for(let e=0;e<15;e++)se(p.x-25*Math.sin(v),p.y+25*Math.cos(v),[v],[1],[5-.25*e]),se(p.x+25*Math.sin(v),p.y-25*Math.cos(v),[v],[1],[5-.25*e]);else if(22===p.type&&b%75==0)for(let e=4;1<=e;e--)for(let t=-e;t<=e;t++)se(p.x,p.y,[v+t/e*xe(18)],[2],[2+.8*e]);else if((23===p.type||24===p.type)&&b%110<=40)se(p.x,p.y,[v+b%90*xe(20)],[23===p.type?2:5],[4.5]);else if(25===p.type&&b%70%6==0&&b%70<30)se(p.x,p.y,[v],[8]);else if(26===p.type&&b%120==0)for(let e=0;e<7;e++)se(p.x,p.y,[v+ge(-xe(4),xe(4))],[8],[3+1.5*Math.random()]);else if(114===p.type){if(m<400){if(m%2==0&&se(p.x,p.y,[v+m*Math.PI/30],[4],[2.5]),m%40==0)for(let e=0;e<24;e++)se(p.x,p.y,[v+e*Math.PI/12],[200<=m?5:6],[4.5])}else if(400<=m&&m<800){if(m%40==0)for(let e=0;e<16;e++){var w=p.x+45*Math.cos(e*Math.PI/8),P=p.y+45*Math.sin(e*Math.PI/8);se(w,P,[ne(w,P)],[2],[2.5])}if(m%60==0){var C=Math.PI/4.5*Math.random(),A=Math.PI/4.5*Math.random();for(let e=0;e<15;e++)se(p.x,p.y,[v,v+C,v-A],[1],[5-.25*e])}}else if(800<=m&&m<1200){if(m%3==0&&se(p.x,p.y,[v+Math.random()*Math.PI/6-Math.PI/12],[2],[2+2.5*Math.random()]),m%120==0)for(let e=0;e<15;e++)se(p.x,p.y,[x,x+Math.PI/2,x+Math.PI,x+Math.PI/2*3],[1],[5-.25*e])}else if(1200<=m){if(m%3==0)for(let e=0;e<12;e++)se(p.x,p.y,[v+e*Math.PI/6],[2,5,6][e%3],[4.5]);if(m%90==0)for(let e=0;e<15;e++)se(p.x,p.y,[v-Math.PI/2.5,v+Math.PI/2.5],[5,6],[5-.25*e])}}else if(115===p.type){if(m<=600&&m%45==0){var E=ge(-xe(20),xe(20));for(let e=0;e<10;e++){var N=v+xe(10)*e+E;for(let e=0;e<20;e++)se(p.x+50*Math.cos(e*Math.PI/10),p.y+50*Math.sin(e*Math.PI/10),[N],[2],[2.5])}}if(200<=m&&m<=800){if(m%48==0)for(let e=0;e<16;e++){var j=p.x+50*Math.cos(e*Math.PI/8),Z=p.y+50*Math.sin(e*Math.PI/8);se(j,Z,[ne(j,Z)],[3],[8])}if(m%3==0)for(let e=0;e<12;e++)se(p.x,p.y,[e*Math.PI/6+Math.sin(m/300*xe(2))],[2],[2])}if(800<=m&&m<1350&&(m%2==0&&se(p.x,p.y,[v+m/70*xe(1)+ge(-xe(50),xe(50)),v-m/70*xe(1)+ge(-xe(50),xe(50))],[2],[2.5]),m%120==0))for(let e=0;e<15;e++)se(p.x,p.y,[x,x+xe(2)],[1],[8-.25*e]);if(1e3<=m&&m%12==0){var ee=ge(-40,40),le=ge(-40,40),ie=ge(-xe(6),xe(6));for(let e=0;e<15;e++)se(p.x+ee,p.y+le,[v+ie],[1],[7-.25*e])}}else if(116===p.type){if(m<=600&&m%10==0)for(let e=0;e<30;e++)se(p.x,p.y,[e*xe(30)+m/400*xe(6)],[m<=150||300<=m&&m<=450?5:6],[6.5]);if(700==m||1400==m)for(let e=0;e<15;e++)se(p.x,p.y,[v-Math.PI/3,v+Math.PI/3],[x,x+Math.PI/2,x+Math.PI,x+Math.PI/2*3],[1],[6-.25*e]);if(550<=m&&m<=950&&m%40==0)for(let e=0;e<16;e++){var oe=p.x+45*Math.cos(e*Math.PI/8),ye=p.y+45*Math.sin(e*Math.PI/8);se(oe,ye,[ne(oe,ye)],[2],[8])}if(650<=m&&m<=1300&&m%50==0){var pe=ge(-xe(20),xe(20));for(let e=0;e<10;e++){var Me=v+xe(10)*e+pe;for(let e=0;e<24;e++)se(p.x+40*Math.cos(e*Math.PI/12),p.y+40*Math.sin(e*Math.PI/12),[Me],[6],[5])}}if(900<=m&&m<=1350&&m%50==0)for(let e=0;e<8;e++)se(p.x,p.y,[v+e*xe(8)],[7],[4.5]);if(950<=m&&m<=1450&&m%70==0)for(let e=0;e<15;e++)se(p.x,p.y,[x,x+Math.PI/2,x+Math.PI,x+Math.PI/2*3],[1],[5-.25*e]);1400<=m&&m%50<25&&se(p.x,p.y,[v+b%50*xe(48),v-b%50*xe(48)],[2],[2.5])}}else c=20===p.type?[v-xe(12),v+xe(12)]:[v,v-xe(24),v+xe(24)],se(p.x,p.y,c,[7],[4])}for(var me of(z=z.filter(e=>0<e.hp),J)){if(me.converted&&z.length){let a=1e9,i=null;for(var ue of z){var Pe=Math.hypot(me.x-ue.x,me.y-ue.y),Ie=Math.floor(ue.x/e/l),be=Math.floor(ue.y/t/l);Pe<a&&D===Ie&&V===be&&(a=Pe,i=ue),Pe<=10&&(me.lifeTime=0,ue.hp=(ue.hp||1)-1,T+=25,Q.push({type:1,x:me.x,y:me.y,velX:4*(Math.random()-.5),velY:4*(Math.random()-.5),lifeTime:.5}),ve("hit"))}var Te;i&&(Ce=i.x-me.x,Se=i.y-me.y,Ye=Ce/(Ce=Math.hypot(Ce,Se)||1)*(ke=Math.hypot(me.velX,me.velY)),Se=Se/Ce*ke,me.velX*Ye+me.velY*Se<-.99*ke*ke?(Ce=[-me.velY,me.velX],Te=Math.hypot(Ce[0],Ce[1])||1,me.velX=.98*me.velX+Ce[0]/Te*ke*.02,me.velY=.98*me.velY+Ce[1]/Te*ke*.02):(me.velX=.82*me.velX+.18*Ye,me.velY=.82*me.velY+.18*Se),Ce=Math.hypot(me.velX,me.velY)||1,Te=Math.min(ke+.08,10),me.velX=me.velX/Ce*Te,me.velY=me.velY/Ce*Te)}if(!me.converted){var Ye=me.x-F,Se=me.y-_;if(Math.hypot(Ye,Se)<=10&&L<=0&&0<R){me.lifeTime=0,ve("alarm");for(let e=0;e<6;e++)Q.push({type:3,x:me.x,y:me.y,velX:4*(Math.random()-.5),velY:4*(Math.random()-.5),lifeTime:.5});L=.65,1<=B?(B--,K.push({text:"Shield Blocked ("+Math.round(B,1)+" Left)",x:me.x,y:me.y-20,color:"rgba(209, 106, 106, 1)",lifeTime:1})):(1<--R?K.push({text:R+" Lifes Remaining",x:me.x,y:me.y-20,color:"rgba(255, 92, 92, 1)",lifeTime:1}):K.push({text:"Caution: Last Life!",x:me.x,y:me.y-20,color:"rgba(255, 92, 92, 1)",lifeTime:1}),R<=0&&(I=-Math.abs(I)),B=3)}var Xe,ke=Math.hypot(me.velX,me.velY)||1;if(2===me.type)me.velX=me.velX/ke*Math.min(ke+.06,5.8),me.velY=me.velY/ke*Math.min(ke+.06,5.8);else if(3===me.type)me.velX=me.velX/ke*Math.max(ke-.06,2),me.velY=me.velY/ke*Math.max(ke-.06,2);else if(4===me.type)me.velBX&&me.velBY||(me.velBX=-me.velX,me.velBY=-me.velY),me.velX=.992*me.velX+.008*me.velBX,me.velY=.992*me.velY+.008*me.velBY;else if(5===me.type||6===me.type)me._angle=me._angle??Math.atan2(me.velY,me.velX),me._angle+=5===me.type?.012:-.012,me.velX=Math.cos(me._angle)*ke,me.velY=Math.sin(me._angle)*ke;else if(7===me.type){if(!me._spawned&&2<ke){var Ce=Math.max(ke-.06,2);if(me.velX=me.velX/ke*Ce,me.velY=me.velY/ke*Ce,Ce<=2){me._spawned=!0;for(let e=0;e<12;e++)se(me.x,me.y,[e*xe(12)],[1],[4.5]);me.lifeTime=0}}}else 8===me.type&&(Xe=ne(me.x,me.y),me.velX+=.12*Math.cos(Xe),me.velY+=.12*Math.sin(Xe),Xe=Math.hypot(me.velX,me.velY)||1,me.velX=me.velX/Xe*Math.min(Xe+.1,5.8),me.velY=me.velY/Xe*Math.min(Xe+.1,5.8))}me.x+=me.velX,me.y+=me.velY,fe(me.x,me.y)&&(me.lifeTime=0,Q.push({type:1,x:me.x,y:me.y,velX:4*(Math.random()-.5),velY:4*(Math.random()-.5),lifeTime:.5})),me.lifeTime-=1/60}if(J=J.filter(e=>0<e.lifeTime),K=K.filter(e=>0<e.lifeTime),Q=Q.filter(e=>0<e.lifeTime),he.enter&&I%2==0&&I<6&&!S&&(I++,ve("tip"),re(),B=3,1===I?(R=3,T=0):3===I?R+=1:5===I&&(R+=2),te=3,we()),he.r&&100===I&&(S=!1,Y=!1,I=0,re()),(he[1]||he[2]||he[3])&&0===I&&!S){if(he[3]&&k<3||he[1]&&k<1||he[2]&&k<2)return;S=!0,ve("tip"),I=he[1]?1:he[2]?3:5,re(),R=3,B=3,z=[z[z.length-1]],F=z[0].x-448,_=z[0].y-448}0<I&&0===z.length&&I%2==1&&(S?I=100:(I++,ve("tip"),J=[],we())),I<-1e-9&&he.r&&(we(),I=0,ve("tip"),re(),Y=!1,S=!1,T=0),I<-1e-9&&he.enter&&(we(),I=Math.abs(I),ve("tip"),Y=!0,R=3,B=3,L=1,q=y,T=Math.floor(.5*T)),S||(X=Math.max(X,T),k=Math.max(k,Math.floor(I/2)))})(),function(){u.width=window.innerWidth,u.height=window.innerHeight,w.clearRect(0,0,u.width,u.height),w.fillStyle="#000",w.fillRect(0,0,u.width,u.height),w.imageSmoothingEnabled=!1,w.textAlign="center";for(let i=0;i<a;i++)for(let o=0;o<a;o++){var l,f,d=P[i][o];g[d]&&(l=o*e-A,f=i*t-E,w.drawImage(g[d],l,f,e,t))}var p,c,M,v,x,m,b=F-u.width/2,W=_-u.height/2;if(A=me(A,b,.1),E=me(E,W,.1),0<R){w.save(),w.fillStyle=h,w.globalAlpha=.18,w.beginPath(),w.arc(F-A,_-E,de(),0,2*Math.PI),H||0<L?w.fill():(w.strokeStyle=h,w.lineWidth=2,w.stroke()),w.restore();for(let e=1;e<=R;e++)w.drawImage(g.life,u.width/2-20-32*e,u.height-45,24,24);for(let e=1;e<=3;e++)e<=Math.floor(B)?w.drawImage(g.shield,u.width/2+20+32*e,u.height-45,24,24):e-1<B&&B<e&&0<(p=B-Math.floor(B))&&w.drawImage(g.shield,0,0,8*p,8,u.width/2+20+32*e,u.height-45,24*p,24);w.save();var O=F-A-33,U=_-E+15;w.shadowColor=h,w.strokeStyle=h,w.fillStyle=o,w.shadowBlur=32,w.fillRect(O,U,66*Math.min(q,y)/y,7),w.lineWidth=1.5;for(let e=1;e<=2;e++){var le=O+66*e/3;w.beginPath(),w.moveTo(le,U-5),w.lineTo(le,7+U+5),w.stroke()}w.restore();var oe=F-(b=26)/2-A;let e=_-(W=H?22:40)-E;H&&(e-=20*Math.sin(Math.PI*(s-$)/s));var he=ie+A<F;w.save(),w.shadowColor=h,w.shadowBlur=64,he?(w.translate(oe+b/2,0),w.scale(-1,1),w.drawImage(g[H?"cat":"player"],-b/2,e,b,W)):w.drawImage(g[H?"cat":"player"],oe,e,b,W),w.restore(),ae&&!H&&(w.save(),w.fillStyle=r,w.shadowColor=r,w.shadowBlur=32,w.beginPath(),w.arc(F-A,_+-15-E,4,0,2*Math.PI),w.fill(),w.restore())}for(c of z){var re=c.x>=F,ne=c.x-13-A,fe=c.y-40-E;w.save(),w.shadowColor=r,w.shadowBlur=64,re?(w.translate(ne+13,0),w.scale(-1,1),w.drawImage(g.enemy,-13,fe,26,40)):w.drawImage(g.enemy,ne,fe,26,40),w.restore()}for(M of J){var se=M.x-A,ye=M.y-E-15,ce=Math.atan2(M.velY,M.velX);w.save(),w.translate(se,ye),w.rotate(ce),w.drawImage(M.converted?g.bulletc:5<=M.type?g.bullet1:g.bullet2,-7,-7,14,14),w.restore()}for(v of(w.font="16px "+i,K))v.lifeTime-=1/60,w.fillStyle=v.color||n,w.fillText(v.text,v.x-A,v.y-E-12*Math.sin((1-v.lifeTime)*Math.PI/2));for(x of Q)x.x+=x.velX,x.y+=x.velY,x.lifeTime-=1/60,1===x.type?(w.save(),w.fillStyle=n,w.beginPath(),w.arc(x.x-A,x.y-E,3,0,2*Math.PI),w.fill(),w.restore()):2!==x.type&&3!==x.type&&4!==x.type||(w.save(),w.translate(x.x-A,x.y-E),m=4*(x.lifeTime||0)*Math.PI,w.rotate(m),w.strokeStyle=2===x.type?h:3===x.type?r:n,w.lineWidth=2,w.strokeRect(-11,-11,22,22),w.restore());if(1===I&&(pe("Use [W][A][S][D] to Move",512-A,392-E),pe("[Mouse Right Click] Or [Space] to turn into a Black Cat and dash",512-A,422-E),he=512+(j[0]?1024:0),oe=512+(j[0]?0:1024),pe("When transformed into a cat, a field of doom forms around you",he-A,oe-120-E),pe("Enemy bullets affected by doom will turn to attack themselves",he-A,oe-90-E),pe("Try defeat the guard here",he-A,oe-60-E),he+=j[1]?1024:0,oe+=j[1]?0:1024,pe("Be careful! You will lose shield/hit-points when being hit.",he-A,oe-30-E),pe("When hit-points drop to 0, Rin will fail to escape.",he-A,oe-E),he+=j[2]?1024:0,oe+=j[2]?0:1024,pe("Lost shield points can be recovered by converting bullets.",he-A,oe-30-E),pe("If your shield is insufficient to block a bullet, you will lose life.",he-A,oe-E)),3===I&&(pe("Each 100000 points will make convert range larger.",512-A,392-E),pe("When you die and choose to continue, you will score.",512-A,422-E)),1===z.length&&114<=z[0].type)b=z.length?z[0].hp/(z[0].maxHp||1):0,ee=me(ee,b,.05),pe(["Cauchy's Clone v.1.17","Cauchy's Clone v2.0","Cauchy The Cat Witch"][z[0].type-114],u.width/4-100,25,r,"18px"),w.save(),w.globalAlpha=.24,w.fillStyle=r,w.fillRect(u.width/4,15,u.width/2*ee,10),w.restore(),pe(Math.round(100*ee,1)+"%",u.width/4+ee*u.width/2+25,25,r,"18px");else{w.save(),w.fillStyle=o,w.strokeStyle=h,w.shadowColor=h,w.shadowBlur=16,Z=me(Z,(D+V)/14,.02),w.fillRect(u.width/4,15,u.width/2*Z,10);var Me=u.width/28;for(let e=0;e<7;e++)w.beginPath(),w.moveTo(u.width/2+e*Me,10),w.lineTo(u.width/2+e*Me,30),w.stroke(),w.beginPath(),w.moveTo(u.width/2-e*Me,10),w.lineTo(u.width/2-e*Me,30),w.stroke();pe(Math.round(100*Z,1)+"%",u.width/4+Z*u.width/2+25,25,o,"18px"),w.restore()}if(pe(S?"Practice Mode":D+V===G?"Eliminate Enemies in this room":"Reach the next room to escape",u.width/2,u.height-60,o),pe("Score: "+String(T).padStart(6,"0"),u.width/2,45,o),0<te&&(w.globalAlpha=Math.sin(te/3*Math.PI),pe("Cauchy's Basement",u.width/2,u.height/2-40,h,"62px"),pe("Floor "+(Math.floor(I/2)+1)+"/3",u.width/2+60,u.height/2,h,"42px"),te-=1/60,w.globalAlpha=1),w.save(),w.globalAlpha=1,w.filter=`blur(${12*Math.abs(N)}px)`,w.drawImage(u,0,0),w.filter="none",w.restore(),N=me(N,I%2==1?0:1,.1),0===I){pe("Rin the Cat Sorceresses",u.width/2,u.height/2,n,"62px"),pe("Press [Enter] to Start",u.width/2,u.height/2+120,n,"24px");let e="Defeat Bosses (Accept Continuing) to Unlock Practice Mode";if(0<k){e="Press ";for(let t=1;t<=Math.min(k,3);t++)e+="["+t+"] ";e+=" to Practice Boss fights"}pe(e,u.width/2,u.height/2+150,n,"24px"),pe("High-Score: "+X,u.width/2,u.height-80,n,"24px"),2===C?pe("True Ending Achieved!",u.width/2,u.height-50,h,"24px"):1===C&&pe("Normal Ending Achieved!",u.width/2,u.height-50,n,"24px")}2<=I&&I<=4&&I%2==0&&(J=[],pe("Stage "+Math.floor(I/2)+"/3 Clear",u.width/2,u.height/2-120,n,"42px"),pe("Press [Enter] to Upstairs",u.width/2,u.height/2+120,n,"24px")),6===I&&(J=[],pe("Stage All Clear!",u.width/2,u.height/2-120,n,"42px"),pe("The Cat Sorceresses Rin Finally Defeat the Evil Cat Witch and Escape!",u.width/2,u.height/2-80,n,"24px"),pe("--- With her Black Cat Power",u.width/2+30,u.height/2-40,n,"24px"),Y?(pe("However, Rin accidently let Cauchy escape",u.width/2,u.height/2+40,n,"24px"),pe("Cauchy, the Evil Cat Witch, is still at large...",u.width/2,u.height/2+80,n,"24px"),pe("[Try beat the game without continuing!]",u.width/2,u.height/2+120,n,"24px"),C<1&&(C=1,we())):(pe("Congratulations!",u.width/2,u.height/2+40,n,"24px"),pe("Thanks to your skill, Cauchy is sealed away for good.",u.width/2,u.height/2+120,n,"24px"),pe("You Achieved the True Ending! Thanks for Playing!",u.width/2,u.height/2+160,h,"24px"),C<2&&(C=2,we())),pe("Your Final Score: "+T,u.width/2,u.height-80,Y?n:h,"32px")),100===I&&(J=[],pe("Practice Mode Finished!",u.width/2,u.height/2,n,"62px"),pe("Press [R] to Return to Menu",u.width/2,u.height/2+120,n,"24px")),I<-1e-9&&(pe("Game Over",u.width/2,u.height/2,n,"62px"),pe("Press [Enter] to Continue",u.width/2,u.height/2+120,n,"24px"),pe("Press [R] to Restart",u.width/2,u.height/2+150,n,"24px"),pe("Continuing will affect the final ending",u.width/2,u.height/2+180,n,"18px"))}()},1e3/60)</script>