<!doctype html><title>Bring Back the Berries</title><style>*{margin:0;overflow:hidden;font-family:'Franklin Gothic Medium','Arial Narrow',Arial,sans-serif}body,html{background-color:#eee;height:100%}.game-title{font-size:50px;margin-bottom:30px}canvas{touch-action:none;display:none;background-color:#7ec0ee}#start_screen{background-color:#eee;height:80%;position:relative}.start-wrapper{margin:0;position:absolute;top:50%;-ms-transform:translateY(-50%);transform:translateY(-50%);text-align:center;width:100%}#start_button{height:100px;width:150px;border-radius:5px;font-family:'Gill Sans','Gill Sans MT',Calibri,'Trebuchet MS',sans-serif;font-size:20px;background-color:#000;color:#eee}#start_button:focus,#start_button:hover{background-color:#555;color:#eee}.container{text-align:center;margin:auto;width:20%}.controls{width:20%;border:1px solid #000;text-align:center;margin:auto}.slidecontainer{text-align:center;width:100%}.slider{-webkit-appearance:none;width:100%;height:25px;background:#d3d3d3;outline:0;opacity:.7;-webkit-transition:.2s;transition:opacity .2s}.slider:hover{opacity:1}.slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:25px;height:25px;background:#4caf50;cursor:pointer}.slider::-moz-range-thumb{width:25px;height:25px;background:#4caf50;cursor:pointer}</style><div id=start_screen><div class=start-wrapper><h1 class=game-title>Bring Back the Berries</h1><input id=start_button type=button value=Start><br><br><div class=container><h2>Use Spacebar to Shoot</h2><h2>Use Arrow Keys to Move</h2><br></div><br><br><br><div class=controls><br><h2>Volume:</h2><div class=slidecontainer><input id=myRange type=range value=50 class=slider max=100 min=1><p>Value: <span id=demo></span></div><br><br><h3>Tips:</h3><p>If you run out of food or health you will lose<p>Use the quills back to defend yourself from the bears<p>Feed your family or you will lose<p>The more food you have with you, the faster the bears will chase you</div></div></div><canvas id=canvas></canvas><script>let canvas,player,ctx,stockPile,enemyInterval,foodInterval,foodArray=[],enemyArray=[],familyArray=[],bulletArray=[],lastUpdate=Date.now(),continueAnimation=!1,score=0;var porcupine=new Image;porcupine.src="porcupine.png";var bush=new Image;bush.src="bush.png";var bear=new Image;bear.src="bear.png";var music=new Audio("explosion.mp3"),slider=document.getElementById("myRange"),output=document.getElementById("demo");output.innerHTML=slider.value,slider.oninput=function(){output.innerHTML=this.value},canvas=document.getElementById("canvas"),canvas.width=window.innerWidth,canvas.height=window.innerHeight,ctx=canvas.getContext("2d");let gameStarted=!1;const gravity=.8,ground=canvas.height/1.3,bearSpeed=5,leftBounds=-100,rightBounds=canvas.width+100,ballRadius=10,burrowOpening={x:100,y:ground,width:100,height:40},familyAttrs={width:50,height:50,x:canvas.width/1.2,y:canvas.height-50};class Player{constructor(){this.width=50,this.height=50,this.x=100,this.y=familyAttrs.y,this.dx=0,this.dy=0,this.moveRight=!1,this.moveLeft=!1,this.right=!0,this.left=!1,this.jumped=!1,this.spikeSize=30,this.health=5,this.food=10,this.inBurrow=!0,this.backDamage=10,this.spikeDamage=5}draw(){ctx.font="30px Arial";let t="Health: ",e="Food: ";for(let e=0;e<this.health;e+=1)t+="❤️";for(let t=0;t<this.food;t+=1)e+="🍓";ctx.fillText(t,10,50),ctx.fillText(e,10,100),this.right?ctx.drawImage(porcupine,0,0,256,256,this.x-this.width+10,this.y-this.height+5,3*this.width,3*this.height):this.left&&ctx.drawImage(porcupine,256,0,512,256,this.x-this.width-10,this.y-this.height+5,6*this.width,3*this.height)}update(){this.food-=.01,this.y+this.height<ground&&(this.dy+=.8,this.y+=this.dy),this.jumped&&(this.y+=this.dy),this.y+this.height>ground&&!this.inBurrow&&(this.jumped=!1,this.y=ground-this.height),this.x+=this.dx,this.x<0?this.x=0:this.x+this.width>canvas.width&&(this.x=canvas.width-this.width),this.inBurrow&&(this.y=familyAttrs.y),hitSquare(this,stockPile)&&this.food>10&&(this.food-=1,stockPile.food+=1)}jump(){this.inBurrow?this.x>burrowOpening.x&&this.x<burrowOpening.x+burrowOpening.width&&this.inBurrow&&(this.inBurrow=!1,this.y=ground):(this.dy=-10,this.jumped=!0)}fall(){this.dy<0&&!this.inBurrow&&(this.dy=.2*this.dy)}moveDown(){this.x>burrowOpening.x&&this.x<burrowOpening.x+burrowOpening.width&&(this.inBurrow=!0)}shoot(){let t;t=this.right?"right":"left",bulletArray.push(new Bullet(this.x,this.y+this.height/2,t)),this.food-=1}}class Bullet{constructor(t,e,i){this.x=t,this.y=e,this.width=10,this.height=10,this.direction=i,this.dx=0}update(){"right"==this.direction?this.dx=10:this.dx=-10,this.x+=this.dx}draw(){ctx.font="30px Arial",ctx.fillText("🍓",this.x,this.y)}}class Enemy{constructor(t,e){this.width=100,this.height=200,this.x=t,this.y=ground-this.height,this.dx=e,this.dy=0,this.food=2}draw(){this.dx>0?ctx.drawImage(bear,272,0,544,272,this.x-50,this.y,4*this.width,this.height):ctx.drawImage(bear,0,0,272,272,this.x-50,this.y,2*this.width,this.height)}update(){this.x+=this.dx;let t=this.dx;this.dx=0;for(let e=0;e<player.food;e+=1)t>0?this.dx+=1:this.dx-=1;if(0!=this.food)for(let t=0;t<foodArray.length;t+=1)hitDot(this,foodArray[t])&&(this.food-=1,foodArray.splice(t,1))}}class Food{constructor(t,e,i){this.x=t,this.y=e,this.radius=i}draw(){ctx.fillText("🍓",this.x-this.radius,this.y+this.radius)}}class Family{constructor(t,e,i){this.x=t,this.y=e,this.dx=i,this.width=familyAttrs.width,this.height=familyAttrs.height,this.dy=0,this.food=10,this.health=1,this.right=!0,this.left=!1,0==this.dx&&(this.dx+=1)}draw(){this.dx>0?ctx.drawImage(porcupine,0,0,256,256,this.x-this.width+10,this.y-this.height+5,3*this.width,3*this.height):ctx.drawImage(porcupine,256,0,512,256,this.x-this.width-10,this.y-this.height+5,6*this.width,3*this.height);let t="";for(let e=0;e<this.food;e+=1)t+="🍓";ctx.font="12px Arial",ctx.fillStyle="white",ctx.textAlign="left",ctx.fillText(t,this.x,this.y)}update(){(this.x+this.width>canvas.width||this.x<30)&&(this.dx*=-1),this.x+=this.dx,this.food-=.008,hitSquare(this,stockPile)&&stockPile.food>0&&this.food<10&&(stockPile.food-=1,this.food+=1),this.x+this.width<=stockPile.x&&(stockPile.food-=1,this.food+=1)}}class StockPile{constructor(){this.width=burrowOpening.width,this.height=3*burrowOpening.height,this.x=30,this.y=canvas.height-this.height,this.food=10}draw(){ctx.beginPath(),ctx.rect(this.x,this.y,this.width,this.height),ctx.strokeStyle="grey",ctx.stroke(),ctx.font="30px Arial bold",ctx.fillStyle="white",ctx.fillText("Storage:",this.x,this.y+20),ctx.fillText("🍓 x"+this.food,this.x,this.y+this.height/2)}addFood(){}}function randomInt(t,e){return Math.floor(Math.random()*(e-t+1))+t}function hitDot(t,e){if(t.x+t.width>e.x-e.radius&&t.y<e.y+e.radius&&t.x<e.x+e.radius&&t.y+t.height>e.y+e.radius)return!0}function hitEnemy(t,e){if(t.y<e.y+e.height&&t.y+t.height>e.y&&t.x<e.x+e.width&&t.x+t.width>e.x)return(e.dx>0&&1!=t.right||e.dx<0&&1!=t.left)&&(player.health-=1),!0}function hitSquare(t,e){if(t.y<e.y+e.height&&t.y+t.height>e.y&&t.x<e.x+e.width&&t.x+t.width>e.x)return!0}function update(t){player.moveRight&&(player.x+=.5*t),player.moveLeft&&(player.x-=.5*t),player.moveLeft||player.moveRight||(player.dx=0),player.update();for(let t=0;t<foodArray.length;t+=1)hitDot(player,foodArray[t])&&(foodArray.splice(t,1),player.food+=1);for(let t=0;t<familyArray.length;t+=1)familyArray[t].update(),familyArray[t].food<=0&&gameover();for(let t=0;t<enemyArray.length;t+=1)enemyArray[t].update(),(hitEnemy(player,enemyArray[t])||enemyArray[t].x>2*rightBounds||enemyArray[t].x<1.2*leftBounds)&&enemyArray.splice(t,1);for(let t=0;t<bulletArray.length;t+=1){bulletArray[t].update();for(let e=0;e<enemyArray.length;e+=1)if(hitSquare(bulletArray[t],enemyArray[e])){bulletArray.splice(t,1),enemyArray.splice(e,1);break}bulletArray[t]<0||(bulletArray[t],canvas.width)}(player.health<=0||player.food<=0)&&gameover(),score+=1}function render(){if(ctx.clearRect(0,0,canvas.width,canvas.height),continueAnimation){ctx.font="20px Arial bold",ctx.fillStyle="black",ctx.fillText("Score: "+score,canvas.width-200,50),ctx.closePath(),ctx.beginPath(),ctx.drawImage(bush,canvas.width/2,ground-100-ballRadius,canvas.width/4,100+2*ballRadius),ctx.closePath(),ctx.beginPath(),ctx.rect(0,ground,canvas.width,canvas.height),ctx.fillStyle="saddlebrown",ctx.fill(),ctx.closePath(),ctx.beginPath(),ctx.rect(30,ground+30,canvas.width-30,canvas.height),ctx.fillStyle="black",ctx.fill(),ctx.closePath(),ctx.beginPath(),ctx.rect(burrowOpening.x,burrowOpening.y,burrowOpening.width,burrowOpening.height),ctx.fillStyle="black",ctx.fill(),player.draw();for(let t=0;t<foodArray.length;t+=1)foodArray[t].draw();for(let t=0;t<enemyArray.length;t+=1)enemyArray[t].draw();for(let t=0;t<familyArray.length;t+=1)familyArray[t].draw();for(let t=0;t<bulletArray.length;t+=1)bulletArray[t].draw();stockPile.draw()}else ctx.font="50px Arial bold",ctx.fillStyle="white",ctx.fillText("GAME OVER, YOU LOSE",canvas.width/3,canvas.height/2.5),ctx.fillText("Score: "+score,canvas.width/3,canvas.height/2),ctx.fillText("Press r to restart",canvas.width/3,canvas.height/1.5)}function gameover(){continueAnimation=!1}function animate(){if(continueAnimation){let t=Date.now(),e=t-lastUpdate;lastUpdate=t,update(e),render(e)}requestAnimationFrame(animate)}function reset(){gameStarted||(gameStarted=!0,document.getElementById("start_screen").style.display="none",document.getElementById("canvas").style.display="block",requestAnimationFrame(animate)),score=0,player=new Player,player.food=10,continueAnimation=!0,clearInterval(foodInterval),clearInterval(enemyInterval),familyArray=[],enemyArray=[],foodArray=[],bulletArray=[],foodInterval=setInterval((()=>{foodArray.length<5&&foodArray.push(new Food(randomInt(canvas.width/2,canvas.width/1.35),randomInt(ground-100,ground-20),ballRadius))}),500),enemyInterval=setInterval((()=>{enemyArray.length<10&&(randomInt(0,2)>=1?enemyArray.push(new Enemy(randomInt(leftBounds,0),5)):enemyArray.push(new Enemy(randomInt(canvas.width,canvas.width+10),-5)))}),2e3),familyArray.push(new Family(randomInt(30,canvas.width-30),familyAttrs.y,randomInt(-10,-5))),familyArray.push(new Family(randomInt(30,canvas.width-30),familyAttrs.y,randomInt(5,10))),stockPile=new StockPile}document.addEventListener("keydown",(t=>{39==t.keyCode&&(player.moveRight=!0,player.right=!0,player.left=!1),37==t.keyCode&&(player.moveLeft=!0,player.right=!1,player.left=!0),38==t.keyCode&&0==player.jumped&&player.jump(),40==t.keyCode&&0==player.jumped&&player.moveDown(),32!=t.keyCode&&13!=t.keyCode||0!=gameStarted||(music.volume=slider.value/100,reset()),32==t.keyCode&&gameStarted&&continueAnimation&&(player.shoot(),music.play()),82==t.keyCode&&reset()})),document.addEventListener("keyup",(t=>{39==t.keyCode&&(player.moveRight=!1),37==t.keyCode&&(player.moveLeft=!1),38==t.keyCode&&player.fall()})),document.getElementById("start_button").addEventListener("click",(()=>{0==gameStarted&&(music.volume=slider.value/100,reset())}))</script>