<!doctype html><meta content="width=device-width" name=viewport><title>Shadow Prowler - js13kGames 2025</title><style>body{background-color:#1a1a1a;color:#eee;font-family:'Courier New',Courier,monospace;text-align:center;margin:0;padding:20px}#game-container{display:inline-flex;align-items:flex-start;gap:20px}canvas{background-color:#333;border:2px solid #555;border-radius:8px}#ui{width:200px;text-align:left;font-size:1.2em}.instructions{margin-top:20px;font-size:.9em;color:#aaa}#message{font-weight:700;height:30px;color:#fc0}</style><h1>Shadow Prowler</h1><div id=game-container><canvas id=gameCanvas></canvas><div id=ui><div id=message></div><div>Time: <span id=timer>60</span>s</div><div>Fish: <span id=fish-count>0</span></div><div class=instructions>Use <b>Arrow Keys</b> or <b>WASD</b> to move.<br>Stay in the shadows to avoid dogs!</div></div></div><script type=module>import{WebSocket as t}from"/2025/online/partysocket.js";const e=document.getElementById("gameCanvas"),a=e.getContext("2d"),o=40;e.width=600,e.height=480;const n=document.getElementById("timer"),l=document.getElementById("fish-count"),i=document.getElementById("message");let r,y,h,s,g,x,c,d,f;const p=Math.random().toString(36).substr(2,9);function m(){d="playing",i.textContent="",x=60,g=new Map,y=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,2,2,2,0,0,0,1,0,0,0,1],[1,0,1,2,2,1,2,1,1,0,1,0,1,0,1],[1,0,1,2,2,1,2,1,0,0,0,0,1,0,1],[1,0,0,0,0,0,0,0,0,1,1,0,0,0,1],[1,2,2,1,0,1,1,1,0,1,2,2,1,0,1],[1,2,2,1,0,1,0,0,0,1,2,2,1,0,1],[1,0,0,0,0,0,0,1,0,0,0,0,0,0,1],[1,0,1,1,1,1,0,1,1,1,1,0,1,2,1],[1,0,0,0,0,1,0,0,0,0,0,0,1,2,1],[1,2,2,2,0,0,0,1,0,0,1,0,0,2,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],r={x:1,y:1,hidden:!1},s=[{x:13,y:1},{x:1,y:10},{x:8,y:4}],h=[{x:7,y:2,path:[{x:7,y:2},{x:7,y:5}],target:1,speed:.03},{x:2,y:8,path:[{x:2,y:8},{x:10,y:8}],target:1,speed:.05}],c&&clearInterval(c),c=setInterval(()=>{x--,x<=0&&w("Time is up!")},1e3),M(),f=new t("wss://relay.js13kgames.com/shadow-prowler"),f.onopen=u,f.onmessage=t=>{try{const e=JSON.parse(t.data);e.id!==p&&g.set(e.id,{x:e.x,y:e.y})}catch(t){}}}function M(){n.textContent=x,l.textContent=3-s.length+"/3"}function w(t){"playing"===d&&(d="over",clearInterval(c),i.textContent=`${t} Press R to restart.`)}function u(){f&&f.readyState===t.OPEN&&f.send(JSON.stringify({id:p,x:r.x,y:r.y}))}window.addEventListener("keydown",t=>{if("playing"!==d)return void("r"===t.key.toLowerCase()&&m());let e=r.x,a=r.y;"ArrowUp"!==t.key&&"w"!==t.key.toLowerCase()||a--,"ArrowDown"!==t.key&&"s"!==t.key.toLowerCase()||a++,"ArrowLeft"!==t.key&&"a"!==t.key.toLowerCase()||e--,"ArrowRight"!==t.key&&"d"!==t.key.toLowerCase()||e++,1!==y[a][e]&&(r.x=e,r.y=a,u())}),m(),function t(){"playing"===d&&(h.forEach(t=>{const e=t.path[t.target];Math.abs(t.x-e.x)<.1&&Math.abs(t.y-e.y)<.1&&(t.target=1-t.target);const a=t.path[t.target];t.x+=Math.sign(a.x-t.x)*t.speed,t.y+=Math.sign(a.y-t.y)*t.speed}),function(){r.hidden=2===y[r.y][r.x];const t=s.findIndex(t=>t.x===r.x&&t.y===r.y);-1!==t&&(s.splice(t,1),0===s.length&&w("You got all the fish!")),r.hidden||h.forEach(t=>{Math.floor(t.x)===r.x&&Math.floor(t.y)===r.y&&w("Caught by a dog!");const e=r.x-Math.floor(t.x),a=r.y-Math.floor(t.y),o=Math.sign(t.path[t.target].x-t.x)||Math.sign(t.path[t.target].y-t.y);t.path[t.target].y===t.path[0].y&&Math.sign(e)===o&&Math.abs(e)<3&&Math.abs(a)<=1&&w("Spotted!"),t.path[t.target].x===t.path[0].x&&Math.sign(a)===o&&Math.abs(a)<3&&Math.abs(e)<=1&&w("Spotted!")})}(),M()),function(){a.clearRect(0,0,e.width,e.height);for(let t=0;t<12;t++)for(let e=0;e<15;e++){const n=y[t][e];a.fillStyle=1===n?"#4a4a4a":2===n?"#2a2a2a":"#383838",a.fillRect(e*o,t*o,o,o)}a.fillStyle="#ff8c00",s.forEach(t=>{a.beginPath(),a.arc(t.x*o+20,t.y*o+20,10,0,2*Math.PI),a.fill()}),h.forEach(t=>{a.fillStyle="#8B4513",a.fillRect(t.x*o+5,t.y*o+5,30,30),a.fillStyle="rgba(255, 255, 0, 0.3)",a.beginPath();const e=t.x*o+20,n=t.y*o+20,l=Math.sign(t.path[t.target].x-t.x)||Math.sign(t.path[t.target].y-t.y);t.path[t.target].x!==t.path[0].x?(a.moveTo(e,n),a.lineTo(e+3*l*o,n-60),a.lineTo(e+3*l*o,n+60)):(a.moveTo(e,n),a.lineTo(e-60,n+3*l*o),a.lineTo(e+60,n+3*l*o)),a.closePath(),a.fill()}),a.globalAlpha=.5,a.fillStyle="#aaa",g.forEach(t=>{a.beginPath(),a.arc(t.x*o+20,t.y*o+20,15,0,2*Math.PI),a.fill()}),a.globalAlpha=1,a.fillStyle=r.hidden?"#444":"#000",a.beginPath(),a.arc(r.x*o+20,r.y*o+20,15,0,2*Math.PI),a.fill();const t=r.x*o+20,n=r.y*o+20-15;a.beginPath(),a.moveTo(t-7,n),a.lineTo(t-2,n-5),a.lineTo(t-5,n+2),a.moveTo(t+7,n),a.lineTo(t+2,n-5),a.lineTo(t+5,n+2),a.fill()}(),requestAnimationFrame(t)}()</script>