<!doctype html><meta name=viewport content="width=device-width"><title>Blackhat's Black Cats - js13kGames 2025</title><style>body,html{margin:0;padding:0;background:radial-gradient(circle,#000 0,#0b0038 100%)}:root{--bar-height:3vh;--menu-width:15vw;--notification-width:20vw}#app{position:relative;height:100vh;width:100vw;z-index:1}#top-bar{display:flex;flex-direction:row;justify-content:space-between;max-height:var(--bar-height);border:solid 2px #000;color:#fff}#content{display:grid;grid-template-columns:1fr 3fr 1.5fr;height:calc(100% - var(--bar-height));width:100%}#menu{height:calc(100% - var(--bar-height));display:flex;flex-direction:column;padding:8px 2px;gap:4px}#screen{overflow:scroll;padding:16px;display:flex;flex-direction:column;gap:4px}#time{display:flex;flex-direction:row;justify-content:space-evenly;align-items:center;width:30vw}.time{border-radius:50%;width:8px;height:8px}.time.remain{background-color:#8a2be2}.time.used{background-color:#d3d3d3}#dialog{max-height:70vh;max-width:70vw;background-color:transparent;border:none}#notifications-wrapper{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:8px}#notifications-background{display:flex;flex-direction:column;align-items:center;height:60vh;width:100%;border-radius:8px;background-color:#191970}#notifications{display:flex;flex-direction:column;gap:4px;width:95%;height:100%;border-radius:8px;overflow:auto;opacity:.8}button{border:4px solid Indigo;background-color:#6a5acd;color:#fff}button:disabled{background-color:grey;color:#000;border-color:#a9a9a9}#backgroundtext{position:fixed;bottom:50%;right:50%;transform:translateX(50%);z-index:0;overflow:hidden;white-space:nowrap;-webkit-text-stroke:2px white;font-size:70px}#notification-title{color:#f5fffa}</style><h1 id=backgroundtext>BLACK HAT'S BLACK CATS</h1><dialog id=dialog><button id=close-dialog>X</button><div id=dialog-content></div></dialog><div id=app><div id=top-bar><div id=time></div><div id=day>0</div><div id=gp>Gold: 0</div><div><span>Cat space: </span><span id=cat-space>0/10</span></div><div><button id=advance-day>Next Day</button><button id=advance-time>Hour Tick</button></div></div><div id=content><div id=menu><button id=m-catInventory>Cats</button><button id=m-bondings>Bondings</button><button id=m-knownWitches>Witches</button><button id=m-spells>Spells</button><button id=m-news>Wiccan Times</button><button id=m-catAcquisition>Cat Acquisition</button></div><div id=screen></div><div id=notifications-wrapper><div id=notifications-background><h3 id=notification-title>Notifications</h3><div id=notifications></div></div></div></div></div><script>!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const n of t)if("childList"===n.type)for(const t of n.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)}).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();let t={knownWitches:new Map,spells:new Map,witches:new Map,entities:new Map,bondings:new Map,completedBondings:new Map,expiredBondings:new Map,news:new Map,catAcquisition:new Map,happenings:new Map,day:1,creations:1,catInventory:new Map,maxCatInventorySize:10,cats:new Map,selectedBonding:null,selectedCat:null,currentScreen:"catInventory",remainingTime:16,maxTime:16,gp:100,notifications:new Map,traps:new Map,catCatcher:new Map,selectedAcqusition:"traps",renown:15,expenses:0,bank:null};const e={knownWitches:new Map,spells:new Map,witches:new Map,entities:new Map,bondings:new Map,completedBondings:new Map,expiredBondings:new Map,news:new Map,catAcquisition:new Map,happenings:new Map,day:1,creations:1,catInventory:new Map,maxCatInventorySize:10,cats:new Map,selectedBonding:null,selectedCat:null,currentScreen:"catInventory",remainingTime:16,maxTime:16,gp:100,notifications:new Map,traps:new Map,catCatcher:new Map,selectedAcqusition:"traps",renown:115,expenses:0,bank:null},n=t=>document.getElementById(t),i=n("day"),o=n("close-dialog"),a=n("dialog"),s=n("screen"),l=n("dialog-content"),r=["0","10","50","100","250","500"],c={0:{max:.1,min:.05},10:{max:.25,min:.1},50:{max:.5,min:.1},100:{max:1,min:1},250:{max:1.5,min:1.5},500:{max:2,min:2}},d={0:{max:.05,min:.05},10:{max:.1,min:.05},50:{max:.25,min:.1},100:{max:.5,min:.25},250:{max:.75,min:.5},500:{max:1,min:.75}},h={0:{max:9,min:0},10:{max:49,min:10},50:{max:99,min:50},100:{max:249,min:100},250:{max:499,min:250},500:{max:750,min:500}},u=["Tabby","Siamese","Persian","Maine Coon","Bengal","Sphynx","Ragdoll","British Shorthair","Abyssinian","Scottish Fold"],p={Tabby:{value:7,color:["orange","greytone"]},Siamese:{value:25,color:["white"]},Persian:{value:30,color:["white","grey","black","orange"]},"Maine Coon":{value:15,color:["white","orange","greytone","black"]},Bengal:{value:45,color:["orange","greytone"]},Sphynx:{value:20,color:["pink","grey","black","white"]},Ragdoll:{value:35,color:["white"]},"British Shorthair":{value:15,color:["black","grey","white","orange"]},Abyssinian:{value:40,color:["orange"]},"Scottish Fold":{value:25,color:["grey","white","greytone","black","orange"]}},g=["black","orange","greytone","white","grey","pink"],f=()=>Object.keys(p).filter(t=>p[t].color.includes("black")),m=["affectionate","calm","charming","clever","independent","mischievous","playful","possessive","reclusive","stubborn","vocal","agressive","thoughtful","short fused","defiant","greedy"],b=["Alioth","Nimue","Oliver","Quicksilver","Raven","Stian","Sylph","Talon","Void","Voodoo","Wraith","Zorya"],y=["Adeline","Aelin","Agatha","Allegra","Calliope","Cassandra","Georgianna","Gladys","Hazel","Heather","Helga","Hestia","Moxie","Nebula","Odette","Olga","Salome","Scarlet","Seraphina","Sherah","Ursula","Vandelia","Vashti","Zelia","Zephyra","Zelda"],v=["Addicock","Amondsham","Atherton","Barnaby","Beauchamp","Beaumont","Blount","Brook","Chatwyn","Chilton","Cheddar","Cockayne","Coggshall","Cossington","Culpepper","Dogmersfield","Dusteby","Flexney","Fortescue","Latham","Leventhorpe","Markeley","Massingberd","Mauntell","McSpooky","Menzies","Motesfont","Piggott","Pinncock","Polsted","Radcliffe","Risley","Roper","Strelley","Sweetecok","Tabard","Warbulton","Wexcombe","Winthrop","Wistring","Worsley","Wreke"],w=["Alchemist","Diviner","Enchantress","Herbalist","Necromancer","Satanist"],k=[["Animist","Materialist"],["Authoritarian","Egalitarian"],["Exploratory","Scholastic"],["Extremist","Moderate"],["Purist","Syncretic"]],x=t;function S(t,e){return x.renown<750&&x.renown>0&&(x.renown+=t*e,x.renown<0&&(x.renown=0),x.renown>750&&(x.renown=750)),x.renown}function C(t){const e=t;return Object.entries(h).find(([t,n])=>n.max>=e&&e>=n.min)[0]}let M=t;const B=t=>document.createElement(t);function A(t,e){return t.getElementById(e)}function T(t,e){for(;t.firstChild;)t.lastChild&&t.removeChild(t.lastChild);e.forEach(e=>t.appendChild(e))}const $=(t,e=0)=>Math.floor(Math.random()*(t-e))+e,E=()=>($(1e5)*performance.now()).toString();function I(t,e,n){const i=[...t];let o=e;const a=[];if(n&&$(101)<=n)return[];if(o>=i.length)return t;for(let t=0;t<$(o)+1;t++)a.push(...i.splice($(i.length),1));return a}function q(){const t=M.witches;return Array.from(t.values())[$(t.size)]}function z(t){return{days:Math.floor(t/16),ticks:t%16}}function D(t){return Array.from(M[t].values())}const L=t,W=["name","type","deceased","inBonding","effectingspells"],F=["vocation"],N=["age","sex","approach","species","traits"],R=["sex","color"],H=["age","variant"],O=["value","color"],Y=["variant","age","value","color"];function j(t){const e={...t},{type:n,knowns:i,traits:o,knownTraits:a}=e,s=[];if(a.length!==o.length&&s.push("traits"),("cat"===n?H:N).forEach(t=>{i.includes(t)||s.push(t)}),s.length<1)return!1;const l=s[$(s.length)];if("traits"===l){const e=o.filter(t=>!a.includes(t)),n=e[$(e.length)];return t.knownTraits.push(n),n}return t.knowns.push(l),e[l]}class P{id;type;inbonding;name;knowns;relationship;age;deceased;sex;value;color;species;traits;knownTraits;variant;effectingspells;vocation;approach;constructor(t,e,n=!1,i,o=[],a,s,l,r,c,d,h=null,u,p,g=null,f=[],m=null,b=null){this.id=t,this.type=e,this.inbonding=n,this.name=i,this.knowns=[..."cat"===e?R:F,...o],this.relationship=a,this.age=s,this.deceased=l,this.sex=r,this.value=c,this.color=d,this.species=h,this.traits=u,this.knownTraits=p,this.variant=g,this.effectingspells=f,this.vocation=m,this.approach=b}}function G(t){const e=E(),n=b[Math.floor(Math.random()*b.length)],i=u[Math.floor(Math.random()*u.length)],o=K($(6,4)),a=new P(e,"cat",!1,n,[],null,$(27,1),!1,"Male",$(50),"black","Feline",o,I(o,2,10),i,[],null,null);return t??L.catInventory.set(e,a),L.entities.set(e,a),L.cats.set(e,a),a}function Z(t=!1,e,n=0,i=9){const o=E(),a=`${y[$(y.length)]} ${v[$(v.length)]}`,s=K(3),l=w[$(w.length)],r=k[$(k.length)][$(2)],c=new P(o,"witch",!1,a,[],null,$(154,16),!1,"Female",function(t,e){const n=e-t;return Math.floor(function(t){return 1-1/(1+Math.pow(Math.E,9*(t-.65)))}(Math.random())*n+t)}(n,i),null,"Human",s,I(s,2,50),null,[],l,r);return t&&L.knownWitches.set(o,c),L.witches.set(o,c),L.entities.set(o,c),c}function V(t,e,n,i){const o=E(),a=K($(5,3)),s="black"===e?f()[$(f().length)]:u[$(u.length)],{value:l,color:r}=p[s],c=r[$(r.length)],d=new P(o,"cat",!1,"",[],null,$(27,1),!1,Math.random()<.5?"Male":"Female",l,"black"===e?"black":c,"Feline",a,i?[]:I(a,2,10),s);return L.entities.set(o,d),t.set(n??o,d),d}function K(t){const e=[],n=[...m];for(let i=0;i<t;i++)e.push(...n.splice($(n.length),1));return e}const U=["title","content","ongoing","offer","spell"];class Q{id;ongoing;nextEventDay;nextEventTick;knowns;variant;agent;title;content;offer;spell;bondrequirements;cat;triedCount;constructor(t,e,n,i,o=[],a,s,l,r,c,d,h,u){this.id=t,this.ongoing=e,this.nextEventDay=n,this.nextEventTick=i,this.knowns=[...o],this.variant=a,this.agent=s,this.title=l,this.content=r,this.offer=c,this.spell=d,this.bondrequirements=h,this.triedCount=u,this.cat=null}}const J="Moew No! Not enough shinies...",X="Not enough boxes, for cats to fits intos.",_="You learnt something new!",tt="You learnt nothing new...",et="You gleam a brief view into the magnificent life of a purrcious cat, but you learn nothing new.",nt="No more zoomies, time for nap.",it=t;function ot(t=1){const e=it.traps;for(let n=0;n<t;n++)e.set(`trap-${e.size}`,null)}function at(t){const e=it.traps;e.forEach((n,i)=>{e.get(i)||(t?Math.random()<t:Math.random()<.1)&&V(it.traps,"any",i,!0)})}function st(t,e){it.catCatcher.clear();const n=$(5,3);for(let t=0;t<n;t++)V(it.catCatcher,"black");for(let t=0;t<n;t++)V(it.catCatcher,"any")}const lt=t,rt=n("advance-time");function ct(t=-1){return lt.remainingTime<1&&t<0?(rt.disabled=!0,Tt(nt)):(at(),Et.bondings.forEach(t=>{const e=t.ongoing;if(!e&&t.nextEventDay<Et.day&&(Et.expiredBondings.set(t.id,t),Et.bondings.delete(t.id),t.agent.inbonding=!1),e&&t.nextEventDay===Et.day){const e=t.cat,n=t.agent;let i=0;e.traits.forEach(t=>{n.traits.includes(t)&&i++});const o=t.offer??0,a=i===e.traits.length?Math.ceil(o+o*i/n.traits.length+(e.variant===t.bondrequirements?.variant?.25*o:0)):o,s=t.spell;if(i<1){Et.catInventory.set(e.id,e),e.inbonding=!1,t.agent.inbonding=!1,e.relationship=null,t.agent.relationship=null;const i=n.traits.filter(t=>!n.knownTraits.includes(t)),o=i[$(i.length)];t.triedCount>2?(S(-100,c[C(t.agent.value)].min),Et.completedBondings.set(t.id,t),Et.bondings.delete(t.id)):(t.ongoing=!1,t.cat=null,t.bondrequirements.traits.push(o),t.nextEventDay=Et.day+$(5,7)),ht("Bonding Failed!",`Unfortuantely ${e.name} and ${t.agent.name} did not get along. ${e.name} returned to you slightly miffed.${i.length>0?` It seems${n.name} would preffer a familiar that is a bit more: ${o}`:""}`,[],e,0,null)}else Et.completedBondings.set(t.id,t),Et.bondings.delete(t.id),kt(a),e.inbonding=!1,t.agent.inbonding=!1,S(100,c[C(t.agent.value)].max),s&&Et.spells.set(s,gt[s]),ht("Bonding Succeeded!",`${e.name} and ${t.agent.name} bonded successfully. ${e.name} will now be a beloved familiar.`,[],e,o,s)}}),St(),lt.remainingTime+=t),wt(),lt.remainingTime}const dt=t;function ht(t,e,n,i,o,a){const s=E(),l=new Q(s,!0,null,null,n,"notification",i,t,e,o,a,null);dt.happenings.set(s,l),dt.notifications.set(s,l),xt()}const ut=["variant","description"];class pt{name;variant;label;description;value;target;action;constructor(t){this.name=t.name,this.variant=t.variant,this.description=t.description,this.target=t.target,this.value=t.value,this.label=t.label,this.action=t.action}}const gt={scrying:new pt({name:"scrying",variant:"scrying",description:"If you apply the marking to anything, you can then view it and its surroundings through the ether. You might not learn something interesting.",value:0,label:"Scry",action:t=>{ct()>0?function(t){if(.25<Math.random())if(t.relationship)if(Math.random()<.25){const e=q();let n;M.knownWitches.has(e.id)?M.knownWitches.set(e.id,e):n=j(e),ht(_,`You scry on ${t.name} and discover that ${t.relationship.name} is having a bewitching talk with ${e.name}.${n?`You learn something new about ${e.name}`:""}`,[],t,null,null)}else{const e=j(t.relationship);e?ht(_,`You learned that ${t.relationship.name} is ${e}`,[],t,null,null):ht(tt,et,[],t,null,null)}else{const e=j(t);e?ht(_,`You learned that ${t.name} is ${e}`,[],t,null,null):ht(tt,et,[],t,null,null)}else ht(tt,et,[],t,null,null)}(t.target):Tt(nt)},target:void 0}),forzachromata:new pt({name:"forzachromata",variant:"colorize",description:"By weaving this spell onto any target, you change their base color to whatever you desire.",value:10,label:"Colorize",action:t=>{ct()>0?(t.target.color=t.color,ht(`${t.target.name} has been colorized`,`${t.target.name} looks bedazzeling with the new ${t.color} color`,[],t.target,null,null),St()):Tt(nt)},target:void 0}),mutatioousia:new pt({name:"mutatioousia",variant:"trait-change",description:"",value:100,label:"Change trait",action:t=>{t.target.traits.includes(t.trait)?(t.target.knownTraits.includes(t.trait)||t.target.knownTraits.push(t.trait),Tt(`${t.target.name} seems to already behave this way.`)):t.target.traits.length>5?Tt(`${t.target.name}'s little brain couldn't possibly hold any more traits`):ct()>0?(t.target.traits.push(t.trait),t.target.knownTraits.push(t.trait),ht(`${t.target.name}'s traits have changed`,`${t.target.name} is coming to grips with the psychological expansion of being ${t.trait}`,[],t.target,null,null),St()):Tt(nt)},target:void 0})},ft=t,mt=n("menu");o.onclick=()=>{a.close()};const bt="background-color:mediumslateblue;color:white;border:2px solid lightslategrey;padding:16px",yt=mt.children,vt=n("time");function wt(){const t=[];for(let e=0;e<ft.maxTime;e++){const n=B("div");n.className="time "+(e<ft.remainingTime?"remain":"used"),t.push(n)}T(vt,t)}function kt(t){ft.gp+=t,n("gp").textContent=`Gold: ${ft.gp}`}function xt(){const t=n("notifications"),e=Array.from(ft.notifications.values()),i=[],o=[];e.reverse().forEach(t=>{t.ongoing?i.push(t):o.push(t)}),T(t,[...i,...o].map(t=>function(t){const e=B("notification-card");return e.setAttribute("title",t.title),e.setAttribute("ongoing",t.ongoing.toString()),e.setAttribute("agent",`From: ${t.agent.name}`),e.setAttribute("title",t.title),e.setAttribute("active",t.ongoing.toString()),e.setAttribute("agent",`From: ${t.agent.name}`),e.setClickable(()=>{const e=B("happening-card");U.filter(e=>"string"==typeof t[e]||"number"==typeof t[e]).forEach(n=>{e.setAttribute(n.toLowerCase(),t[n])}),e.setAttribute("agent",t.agent.name),T(l,[e]),a.showModal(),t.ongoing=!1,xt()}),e}(t)))}function St(){const t=ft.currentScreen;switch(t){case"catInventory":T(s,Ct(D(t),W,Bt,void 0,void 0,At));break;case"knownWitches":T(s,Ct(D(t),W,zt,"Offer bonding"));break;case"bondings":case"news":T(s,function(t){return t.map(t=>function(t){const e=B("happening-card"),{knowns:i,agent:o,variant:s}={...t};if([...U,...i].forEach(n=>{t[n]&&e.setAttribute(n,t[n])}),o&&e.setAttribute("agent",`${o.name}`),"bonding"===s&&function(t,e){const{content:i,bondrequirements:o,cat:s}={...t};i&&e.setAttribute("content",` Needs to be: ${o.traits.join(", ")} and it would be wicked if it was a ${o.variant}`),s&&e.setAttribute("cat",s.name),t.ongoing||(e.setAttribute("variant","bonding"),e.setDivClick(()=>{ft.selectedBonding=t,T(n("dialog-content"),Ct(D("catInventory").filter(t=>!t.inbonding&&!t.relationship),W,void 0,void 0,t=>{const e=ft.selectedBonding,n=e.cat;n&&(n.inbonding=!1),e.cat=t,e.cat.inbonding=!0,a.close(),St()})),a.showModal()}),s&&(e.setAttribute("clear","block"),e.setClearCat(()=>{t.cat&&(t.cat.inbonding=!1,ft.catInventory.set(t.cat.id,t.cat)),t.cat=null,St()}),e.setSendBonding(()=>{if("black"!==t.cat.color){const e=t.cat,n=t.agent;ft.catInventory.delete(e.id),e.inbonding=!1,e.relationship=null,t.cat.deceased=!0,t.cat=null,ht("Bonding failed!",`"What is this vermin? It's NOT BLACK!" ${n.name} hollers and proceeds to wave her spell slinging arm at ${e.name} who disapear in a puff of smoke.`,[],t.agent,null,null),S(-20,1)}else ct(),function(t){t.ongoing=!0,t.agent.inbonding=!0,t.cat.relationship=t.agent,t.agent.relationship=t.cat;const{days:e,ticks:n}=z($(112,72));t.nextEventDay+=e,t.nextEventTick+=n}(t);St()})))}(t,e),"news"===t.variant){const n=function(t){const e=[],n=t.agent;return n.knownTraits.length!==n.traits.length&&e.push("traits"),e.push(...["age","vocation","approach"].filter(e=>!t.agent.knowns.includes(e))),e.length>0&&e}(t);n&&e.setInterestingButton(()=>{t.agent.knowns.push(...n.filter(t=>"traits"!==t)),t.agent.knownTraits=t.agent.traits,ft.knownWitches.has(o.id)||ft.knownWitches.set(o.id,o),St()})}return e}(t))}(D(t)));break;case"catAcquisition":T(s,function(){const t=B("cat-acquisition");switch(t.setCatcherBtn(()=>{ft.selectedAcqusition="catCatcher",St()}),t.setTrapsBtn(()=>{ft.selectedAcqusition="traps",St()}),ft.selectedAcqusition){case"traps":t.setAcquisitionType(function(t){const e=[];t.forEach((n,i)=>{if(n)e.push(Mt(n.name,n.type,O,n,t=>{ft.catInventory.size>=ft.maxCatInventorySize?Tt(X):$t(n,()=>{(function(t){const e=it.traps.get(t);it.traps.set(t,null),it.catInventory.set(e.id,e)})(i),St()})},"Acquire",void 0,()=>{t.delete(i),St()}));else{const t=B("pre");t.textContent="#################### <Trap is Empty> ####################",t.style="border:2px solid grey;background:AliceBlue;padding:8px;margin:0;",e.push(t)}});const n=B("button");return n.innerText="Purchase trap -100 gp",n.onclick=()=>{ft.gp<100?Tt(J):(ot(),kt(-100),St())},[...e,n]}(ft.traps));break;case"catCatcher":t.setAcquisitionType(Ct(D("catCatcher"),Y,t=>{t.value&&ft.gp<t.value?Tt(J):ft.catInventory.size>=ft.maxCatInventorySize?Tt(X):$t(t,()=>{ft.catCatcher.delete(t.id),ft.catInventory.set(t.id,t),t.value&&kt(-t.value),St()})},"Purchase"))}return[t]}());break;case"spells":T(s,D("spells").map(t=>function(t){const e=B("spell-card"),i={...t};return ut.forEach(t=>{e.setAttribute(t,i[t])}),"scrying"===i.variant&&e.setApplyButton(()=>{a.showModal(),T(n("dialog-content"),Ct(D("catInventory").filter(t=>!t.inbonding&&!t.relationship),W,void 0,void 0,e=>{ct()>0&&(e.effectingspells.push(t.name),a.close(),St())}))}),"colorize"===i.variant&&e.setColorButtons(g,t=>{a.showModal(),T(n("dialog-content"),Ct(D("catInventory").filter(t=>!t.inbonding&&!t.relationship),W,void 0,void 0,e=>{ct()>0&&(i.action({color:t,target:e}),a.close(),St())}))}),"trait-change"===i.variant&&e.setTraitButtons(m,t=>{a.showModal(),T(n("dialog-content"),Ct(D("catInventory").filter(t=>!t.inbonding&&!t.relationship),W,void 0,void 0,e=>{ct()>0&&(i.action({trait:t,target:e}),St())}))}),e}(t)))}n("cat-space").textContent=`${ft.catInventory.size}/${ft.maxCatInventorySize}`,kt(0)}function Ct(t,e,n,i,o,a){return t.map(t=>{const{name:s,type:l}={...t};return Mt(s,l,e,t,n,i,o,a)})}function Mt(t,e,n,i,o,a,s,l){const r=B("creature-card"),c={...i};n.forEach(t=>r.setAttribute(t,c[t]));const d=[...i.knownTraits,...i.knowns.map(t=>c[t])];r.setAttribute("description",`What you know about ${t}: ${d.join(", ")}`),r.setAttribute("image","witch"===e?'<svg width="50px" height="50px" viewBox="0 0 64 64" version="1.1" id="svg1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><defs id="defs1" /><g id="layer2"><path style="fill:#000000;stroke-width:0.264583" d="m 27.975404,17.69607 -4.554135,-5.204727 16.915362,-11.3202796 -3.51319,11.1901616 8.587798,4.163781 -9.758863,6.245672 4.293899,4.163781 19.647842,2.992718 -3.750919,5.626027 -7.699478,2.701534 -9.636331,-2.619851 -11.169547,1.218204 -9.511654,3.873893 L 9.2277009,38.233372 5.4649629,33.440367 18.737015,29.66694 Z" id="path1" /><ellipse style="fill:#000000;fill-opacity:0;stroke:#000000;stroke-width:2.973;stroke-dasharray:none;stroke-opacity:1" id="path2" cx="32.334358" cy="39.946278" rx="15.554242" ry="12.626583" /><path style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:2.97299;stroke-dasharray:none;stroke-opacity:1" d="m 19.908079,48.79431 -8.067326,12.100988 45.93171,-4.033663 -10.799807,-10.799807 -7.546853,5.725199 -12.100989,0.13012 z" id="path3" /></g></svg>':'<svg width="50" height="50" viewBox="0 0 13.229167 13.229167" version="1.1" id="svg1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><defs id="defs1" /><g id="layer3"><ellipse style="fill:#000000;stroke-width:3.46405" id="path1" cx="6.7165418" cy="6.762547" rx="5.7044616" ry="4.6463757" /><path style="fill:#000000;stroke-width:2.97299" id="path2" d="m 3.8643123,0.87407064 -3.58828998,2.07170016 0,-4.1434003 z" transform="matrix(1.2307693,0,0,1.2109549,1.0403918,2.0007871)" /><path style="fill:#000000;stroke-width:2.97299" id="path3" d="M 14.445168,-3.0822493 14.309456,4.1726843 8.0943555,0.42768766 Z" transform="matrix(0.6015936,0,0,0.80976924,3.730884,2.3578993)" /><ellipse style="fill:#ffffff;fill-opacity:1;stroke-width:2.19414" id="path4" cx="5.0302038" cy="5.2399859" rx="1.472119" ry="0.73605949" transform="rotate(5)" /><ellipse style="fill:#ffffff;fill-opacity:1;stroke-width:2.19414" id="path4-7" cx="-8.5396643" cy="-6.8836594" rx="1.472119" ry="0.73605949" transform="rotate(172.4)" /><ellipse style="fill:#000000;fill-opacity:1;stroke-width:2.97299" id="path5" cx="4.5083642" cy="5.612453" rx="0.55204457" ry="0.9660781" /><ellipse style="fill:#000000;fill-opacity:1;stroke-width:2.97299" id="path5-7" cx="9.3521757" cy="5.6129494" rx="0.55204457" ry="0.9660781" /><path style="fill:#000000;fill-opacity:1;stroke-width:2.97299" d="m 2.3461896,9.2467471 c 0,0 -0.7003033,0.3421585 -1.0104363,1.2343839 -0.310133,0.892226 -0.1856604,1.801861 -0.1856604,1.801861 0,0 1.439634,0.523797 5.4728956,0.388576 4.0332615,-0.135221 5.1539625,-0.618594 5.1539625,-0.618594 0,0 0.167413,-0.564258 0.08065,-1.368828 -0.08676,-0.8045692 -0.632697,-1.4373989 -0.632697,-1.4373989 z" id="path6" /><path style="fill:#ffffff;fill-opacity:1;stroke-width:2.97299" id="path7" d="M 7.5906136,8.8787176 3.8179848,7.284541 7.0848966,4.8144369 Z" transform="matrix(0.20851111,0.12038394,-0.09843707,0.17049801,6.328186,5.3769613)" /></g></svg>'),o&&("cat"===e&&(r.setAttribute("showcatslot","true"),r.setInteractClick(()=>o(i),a)),"witch"===e)&&C(ft.renown)>=C(i.value)&&(r.setAttribute("showcatslot","true"),r.setInteractClick(()=>o(i),a)),s&&r.setDivClick(()=>s(i)),l&&r.setReleaseButton(()=>l(i)),i.relationship&&r.setRelationship(i);const h=i.effectingspells;if(h&&"catInventory"===ft.currentScreen){const t=h.map(t=>function(t,e){const n=B("button");return n.textContent=gt[e].label,n.onclick=()=>{gt[e].action({target:t,color:void 0}),St()},n}(i,t));r.setActivateSpells(t)}return r}function Bt(t){if(ct()>0){const e=j(t);e?ht(_,`You managed to learn that ${t.name} is ${e}`,[],t,null,null):ht(tt,`There doesn't seem to be anything left to learn about ${t.name}.`,[],t,null,null)}St()}function At(t){ft.catInventory.delete(t.id),St()}function Tt(t){a.close();const e=B("p");e.textContent=t,e.style=bt,T(l,[e]),a.showModal()}function $t(t,e){let n="";const i=B("button");i.textContent="Welcome home purrrcious",i.disabled=!0,i.onclick=()=>{t.name=n,e(),a.close()};const o="cat-name-field",s=B("input");s.oninput=t=>{n=t.target.value,""!==n&&(i.disabled=!1)},s.id=o;const r=B("label");r.htmlFor=o,r.textContent="Name your new cat ",a.showModal();const c=B("div");(function(t,e){e.forEach(e=>t.appendChild(e))})(c,[r,s,i]),c.style=bt+"display:flex;flex-direction:column;",T(l,[c])}const Et=t;function It(t){const e=E(),n=t??function(){const t=M.witches,e=function(t){return t.filter(t=>M.renown<h[C(t.value)].max&&M.renown>h[C(t.value)].min)}(Array.from(t.values()).filter(t=>!t.inbonding&&!t.relationship));return e.length<1&&e.push(Z(void 0,0,h[C(M.renown)].min,h[C(M.renown)].max)),e[$(e.length)]}();n.inbonding=!0;const{days:i,ticks:o}=z($(112,72)),a=d[C(n.value)],s=n.traits[$(n.traits.length)];n.knownTraits.includes(s)||n.knownTraits.push(s);const l=Math.random()<.05?function(){const t=Object.keys(gt).filter(t=>!M.spells.has(t)).filter(t=>gt[t].value<=M.renown);return t.length<1?null:t[$(t.length)]}():null,r=l?null:Math.floor(500*((t,e)=>Math.random()*(t-e)+e)(a.max,a.min)),c=Object.keys(p).filter(t=>p[t].color.includes("black")),u=new Q(e,!1,Et.day+i,o,["offer"],"bonding",n,"I could try out one of your BLACK CATs",qt[$(qt.length)],r,l,{traits:[s],variant:c[$(c.length)]},1);Et.knownWitches.set(n.id,n),Et.bondings.set(e,u),Et.happenings.set(e,u)}const qt=["Where can I find it?","I'm looking to buy it.","Need a new kitty."];function zt(t){let e="",n="";t.relationship?(e=`Bonding offer to ${t.name} rejected.`,n="Begon you pixie! I already have a beloved familiar",t.knowns.includes("relationship")||t.knowns.push("relationship")):t.inbonding?(e=`Bonding offer to ${t.name} rejected.`,n="I'm already in a process you numpty!"):C(t.value)>C(Et.renown)?(e=`Bonding offer to ${t.name} rejected.`,n="You are rather beneath me."):(e=`Bonding offer to ${t.name} accepted.`,n="What an interesting proposition. What is the catch?",It(t)),ht(e,n,[],t,null,null)}const Dt=t;function Lt(){const t=E(),e=q(),n=new Q(t,!1,null,null,["agent","patient"],"news",e,"Cat wanted for adoption!",`Long-time native ${e.name} wishes for a new companion.`,null,null,null);M.happenings.set(t,n),M.news.set(t,n)}const Wt=t;function Ft(){Wt.day+=1,i&&(i.innerText=`Day: ${Wt.day.toString()}`),Wt.day%7==0&&function(){const{gp:t,expenses:n}=Dt;t>=n?(Dt.gp-=Dt.expenses,Dt.expenses=0,ht("You settle your debts.","This week's expenses are paid in full!",[],Dt.bank,null,null)):(Tt("You ran out of money, and the bank takes everything. Game over. Game will reset in 10 seconds."),setTimeout(()=>{Object.assign(Dt,e),jt(),a.close(),St()},1e4))}(),Math.random()<.2&&Lt(),Math.random()<.15&&It(),function(){let t=new Map([["newspaper",1],["cat",1],["trap",0],["rent",50]]);const{day:e,catInventory:n}=Dt,i=t.get("newspaper")+Array.from(n.values()).length*t.get("cat")+1*t.get("trap"),o=t.get("rent"),a=e%7==0;Dt.expenses+=i,a&&(Dt.expenses+=o)}(),st(),at(.25),ct(lt.maxTime-lt.remainingTime),rt.disabled&&(rt.disabled=!1),St()}class Nt extends HTMLElement{titleSlot;contentSlot;clickableSlot;interestingButton;fromSlot;offerSlot;clearSlot;catSlot;bondingSlot;sendBondingSlot;cardSlot;constructor(){super(),this.attachShadow({mode:"open"});const t=this.shadowRoot,e=B("template");e.innerHTML='<style>h1{color:#1A4D4A;}p{color:#EFEBE0;font-size:1.2rem;}div{background-color:#6C597D;padding:8px;border-radius:6px;border:solid 8px #4F7F7D;}div:hover{background-color:#7C898D;padding:8px;border-radius:6px;border:solid 8px #4F7F7D;}div.active{background-color:#9adae6}</style><div id="card"><h1 id="title"></h1><p>From: <span id="from"></span></p><p id="content"></p><p id="offer"></p><p id="cat"></p><span id="bonding" style="display:none"><button id="clickable">Pick Cat</button><button style="display:none" id="clear-cat">Clear Cat</button><button id="send-bonding" style="display:none">Send</button></span><button id="interesting" style="display:none">Interesting...</button></div>',t.appendChild(e.content.cloneNode(!0)),this.cardSlot=A(t,"card"),this.titleSlot=A(t,"title"),this.contentSlot=A(t,"content"),this.clickableSlot=A(t,"clickable"),this.fromSlot=A(t,"from"),this.offerSlot=A(t,"offer"),this.catSlot=A(t,"cat"),this.clearSlot=A(t,"clear-cat"),this.bondingSlot=A(t,"bonding"),this.sendBondingSlot=A(t,"send-bonding"),this.interestingButton=A(t,"interesting")}static get observedAttributes(){return["title","variant","content","agent","offer","cat","clear","active","spell"]}setInterestingButton(t){this.interestingButton.onclick=t,this.interestingButton.style="display: block;"}setDivClick(t){this.clickableSlot.onclick=t}setClearCat(t){this.clearSlot.onclick=t}setSendBonding(t){this.sendBondingSlot.onclick=t}attributeChangedCallback(t,e,n){switch(t){case"title":this.titleSlot.textContent=n;break;case"content":this.contentSlot.textContent+=n;break;case"agent":this.fromSlot.textContent=n;break;case"offer":this.offerSlot.textContent=`${n} gp`;break;case"cat":this.catSlot.textContent=`Selected Cat: ${n}`,this.sendBondingSlot.style="display:block";break;case"variant":"bonding"===n&&(this.bondingSlot.style="display:block");break;case"clear":this.clearSlot.style=`display:${n}`;break;case"active":this.cardSlot.className+="true"===n?"active":"";break;case"spell":this.offerSlot.textContent=`A certain spell called "${n}"`}}}class Rt extends HTMLElement{titleSlot;pictureSlot;descriptionSlot;cardSlot;bondingSlot;catSlot;interactButton;releaseButton;relationshipSlot;spellListSlot;spellSlot;activateSpellsSlot;constructor(){super(),this.attachShadow({mode:"open"});const t=this.shadowRoot,e=B("template");e.innerHTML='<style>#card{background-color:#1a122f;border:1px solid #4a3b6b;border-radius:8px;padding:16px;color:#e0d8f1;font-family:\'Times New Roman\',serif;margin:8px;display:flex;flex-direction:column;}#card:hover{background-color:#2a223f}h3 {margin-top:0;color:#b8a9d9;}p{margin:8px 0;}#traits{font-style:italic;color:#c8b9e8;}#pps {width:50px;height:50px;border-radius:4px;background-color:#EEE;border:2px solid #333;box-shadow:0 2px 4px rgba(0, 0, 0, 0.3);background-size:cover;background-position:center;display:inline-block;}#content{display:flex;gap:8px;}#content-text{display:block;}</style><div id="card"><h3 id="title"></h3><div id="content"><div id="pps"></div><div id="content-text"><p id="spell" style="display:none;">Active spells: <span id="s-l"></span></p><p id="description"></p></div></div><div id="relationship" style="display:none;"></div><div id="bonding" style="display:none;"><button>Test</button></div><div id="cat" style="display:none"><button id="interact">Interact With Cat</button><button id="release" style="display:none;">Release</button></div><div id="a-s"></div></div>',t.appendChild(e.content.cloneNode(!0)),this.cardSlot=A(t,"card"),this.titleSlot=A(t,"title"),this.pictureSlot=A(t,"pps"),this.descriptionSlot=A(t,"description"),this.bondingSlot=A(t,"bonding"),this.catSlot=A(t,"cat"),this.interactButton=A(t,"interact"),this.releaseButton=A(t,"release"),this.relationshipSlot=A(t,"relationship"),this.spellSlot=A(t,"spell"),this.spellListSlot=A(t,"s-l"),this.activateSpellsSlot=A(t,"a-s")}setDivClick(t){this.cardSlot.onclick=t}setInteractClick(t=null,e){e&&(this.interactButton.textContent=e),this.interactButton.onclick=t}setReleaseButton(t){t&&(this.releaseButton.style.display="block"),this.releaseButton.onclick=t}setRelationship(t){this.relationshipSlot.style="display:block;",this.relationshipSlot.textContent=`${"cat"===t.type?"Familiar of":"Companion of"} ${t.relationship.name}`}setActivateSpells(t){T(this.activateSpellsSlot,t)}static get observedAttributes(){return["name","variant","description","image","inbonding","showcatslot","effectingspells"]}attributeChangedCallback(t,e,n){switch(t){case"name":this.titleSlot.textContent=n;break;case"variant":this.titleSlot.textContent=`${this.titleSlot.textContent} (${n})`;break;case"image":this.pictureSlot.innerHTML=n;break;case"description":this.descriptionSlot.textContent=n;break;case"inbonding":"true"===n&&(this.titleSlot.textContent+=" - in bonding",this.bondingSlot.style="display:block");break;case"showcatslot":this.catSlot.style="display:block";break;case"effectingspells":""!==n&&(this.spellSlot.style="display:block;"),this.spellListSlot.textContent=n}}}class Ht extends HTMLElement{titleSlot;clickable;fromSlot;constructor(){super(),this.attachShadow({mode:"open"});const t=this.shadowRoot,e=B("template");e.innerHTML='<style>#clickable {display: flex;flex-direction: column;justify-content: center;align-items: center;background: white;}#clickable:hover {background: #ADD8E6;}#clickable #inActive {background-color: gray;}</style><div id="clickable"><div id="from"></div><div id="title"></div></div>',t.appendChild(e.content.cloneNode(!0)),this.clickable=A(t,"clickable"),this.titleSlot=A(t,"title"),this.fromSlot=A(t,"from")}static get observedAttributes(){return["title","active","agent"]}setClickable(t){this.clickable.onclick=t}attributeChangedCallback(t,e,n){switch(t){case"title":this.titleSlot.textContent=n;break;case"active":this.clickable.className="false"===n?"inactive":"active";break;case"agent":this.fromSlot.textContent=n}}}class Ot extends HTMLElement{cardSlot;ccbtn;cgbtn;aqcSlot;constructor(){super(),this.attachShadow({mode:"open"});const t=this.shadowRoot,e=B("template");e.innerHTML='<style>#card{background-color: #6C597D;padding:8px;border-radius:6px;border: solid 8px #4F7F7D;height:80vh;}#aqc-slot {display:flex;flex-direction:column;height:70vh;overflow: auto;gap: 4px;margin-top:8px;}.btn-container{display:flex;justify-content:space-evenly;}</style><div id="card"><h2>Get Your Cats here!</h2><div class=btn-container><button id= "cc">Cat Catcher</button><button id="cg">Traps</button></div><div id="aqc"></div></div>',t.appendChild(e.content.cloneNode(!0)),this.cardSlot=A(t,"card"),this.ccbtn=A(t,"cc"),this.cgbtn=A(t,"cg"),this.aqcSlot=A(t,"aqc")}setCatcherBtn(t){this.ccbtn.onclick=t}setTrapsBtn(t){this.cgbtn.onclick=t}setAcquisitionType(t){T(this.aqcSlot,t)}static get observedAttributes(){return["title"]}attributeChangedCallback(t,e,n){"title"===t&&(this.cardSlot.textContent=n)}}class Yt extends HTMLElement{descriptionSlot;variantSlot;cardSlot;applyBtn;btnSlot;constructor(){super(),this.attachShadow({mode:"open"});const t=this.shadowRoot,e=B("template");e.innerHTML='<style>#card{background-color: #6C597D;padding:8px;border-radius:6px;border: solid 8px #4F7F7D;color: white;}</style><div id="card"><h2 id="variant"></h2><p id="description"></p><div id="btn"><button id="apply" style="display:none;">Apply to Cat</button></div></div>',t.appendChild(e.content.cloneNode(!0)),this.cardSlot=A(t,"card"),this.variantSlot=A(t,"variant"),this.descriptionSlot=A(t,"description"),this.applyBtn=A(t,"apply"),this.btnSlot=A(t,"btn")}static get observedAttributes(){return["variant","description"]}setApplyButton(t){this.applyBtn.style="display:block;",this.applyBtn.onclick=t}setColorButtons(t,e){t.forEach(t=>{const n=B("button");n.id=t,n.textContent=t,n.onclick=()=>e(t),this.btnSlot.appendChild(n)})}setTraitButtons(t,e){t.forEach(t=>{const n=B("button");n.id=t,n.textContent=t,n.onclick=()=>e(t),this.btnSlot.appendChild(n)})}attributeChangedCallback(t,e,n){switch(t){case"variant":this.variantSlot.textContent=n;break;case"description":this.descriptionSlot.textContent=n}}}function jt(){r.forEach(t=>{Pt(()=>Z(void 0,0,h[t].min,h[t].max),30)}),Pt(G,2),Pt(It,1),Pt(Lt,1),ot(),st(),function(){const[t,e,n,i,o,a]=Array.from(yt);t.onclick=()=>{ft.currentScreen="catInventory",St()},n.onclick=()=>{ft.currentScreen="knownWitches",St()},e.onclick=()=>{ft.currentScreen="bondings",St()},o.onclick=()=>{ft.currentScreen="news",St()},a.onclick=()=>{ft.currentScreen="catAcquisition",St()},i.onclick=()=>{ft.currentScreen="spells",St()}}(),St(),i.innerText=`Day: ${Wt.day.toString()}`,n("advance-day").onclick=Ft,rt.onclick=()=>{ct()},wt(),null===t.bank&&(t.bank=new P("666","bank",!1,"Golden Cauldron Rental & Usury",[],null,47,!1,"none",0,null,null,[],[],"bank",[],"Banker","Capitalist"))}function Pt(t,e){for(let n=0;n<(e??3);n++)t()}customElements.define("happening-card",Nt),customElements.define("creature-card",Rt),customElements.define("notification-card",Ht),customElements.define("cat-acquisition",Ot),customElements.define("spell-card",Yt),jt()</script>