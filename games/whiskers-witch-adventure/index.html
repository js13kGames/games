<title>Whiskers Witch Adventure - js13kGames 2025</title><style>#wico.chn{transform:scale(1.5);opacity:.4}#plhe.chn{transform:scale(.8)}</style><body style=margin:0;background-color:#000;display:grid;place-items:center;height:100%;overflow:hidden><canvas height=1080 id=c3d style="width:min(100vw,calc(100vh * 16/9));position:absolute;aspect-ratio:16/9;color:#fff" width=1920></canvas><div id=tmpl style="background-color:#000;width:min(100vw,calc(100vh * 16/9));position:absolute;aspect-ratio:16/9;color:#fff;font-size:35px;user-select:none"><h1 id=msg style=text-align:center>Click to Start</h1><div id=wico style="left:30px;bottom:30px;position:absolute;transition:.5s ease"></div><div id=plhe style="right:30px;bottom:30px;position:absolute;transition:.5s ease;text-shadow:-1px -1px 0 #fff,1px -1px 0 #fff,-1px 1px 0 #fff,1px 1px 0 #fff"></div></div><script>async function t(t,i=512,e){const s=new Image;return s.src=URL.createObjectURL(new Blob([`<svg width="${i}" height="${e??i}" xmlns="http://www.w3.org/2000/svg">${t}</svg>`],{type:"image/svg+xml"})),new Promise(t=>s.addEventListener("load",()=>t(s)))}function i(i,e=""){return t(`<text x="50%" y="50%" font-size="400" text-anchor="middle" dominant-baseline="middle" style="${e}">${i}</text>`)}function e(i,e=512){return t(`<rect x="0" y="0" width="100%" height="100%" fill="${i}"/>`,e)}function s(i,e,s,n,r,a,h){return t(`${k("f")}<feTurbulence type="fractalNoise" baseFrequency="${e}" numOctaves="${s}" stitchTiles="stitch"/><feDiffuseLighting color-interpolation-filters="sRGB" lighting-color="${i}" surfaceScale="${n}" diffuseConstant="${r}"><feDistantLight azimuth="${a}" elevation="${h}"/></feDiffuseLighting></filter><rect width="100%" height="100%" filter="url(#f)" />`)}function n(t){return t*(180/Math.PI)}function r(t){const i=t[2].i().t(t[1]),e=t[0].i().t(t[1]);return(new P).h(i,e)}function a(t,i,e){return Math.min(Math.max(t,i),e)}function h(t,i,e){return new Array((t+1)*(i+1)).fill().map(()=>e.texture.id)}function o(t,i,e){return(new P).set(e.transformPoint(new P(i[t],i[t+1],i[t+2])))}function c(t,i){const e=i.multiply(t.o);G.uniformMatrix4fv(et,!1,it.multiply(t.o).toFloat32Array()),G.uniform1i(ht,t.l),G.uniform1i(ot,t.u),G.uniform1f(at,t.alpha),G.vertexAttrib1f(2,t.M?.texture?.id??-1),G.bindVertexArray(t.v.m),G.uniformMatrix4fv($,!0,t.o.inverse().toFloat32Array()),G.uniformMatrix4fv(I,!1,e.toFloat32Array()),G.drawElements(G.TRIANGLES,t.v.p().length,G.UNSIGNED_SHORT,0)}function l(t,i){return!(t.min.x>i.max.x||i.min.x>t.max.x||t.min.y>i.max.y||i.min.y>t.max.y||t.min.z>i.max.z||i.min.z>t.max.z)}function u(t,i,e){((t,i)=>{let e=0;return i.min.x>t.k.x?e+=(t.k.x-i.min.x)**2:t.k.x>i.max.x&&(e+=(t.k.x-i.max.x)**2),i.min.y>t.k.y?e+=(t.k.y-i.min.y)**2:t.k.y>i.max.y&&(e+=(t.k.y-i.max.y)**2),i.min.z>t.k.z?e+=(t.k.z-i.min.z)**2:t.k.z>i.max.z&&(e+=(t.k.z-i.max.z)**2),t.radius*t.radius>=e})(i,t.bounds)&&(t.children?t.children.forEach(t=>u(t,i,e)):e(t))}function f(t,i){if(0>(new P).C(t.k,i.D[0]).A(i._))return;const e=((t,i,e,s)=>{const n=(new P).C(e,i),r=(new P).C(s,i),a=(new P).C(t,i),h=n.A(a),o=r.A(a);if(0>=h&&0>=o)return i;const c=(new P).C(t,e),l=n.A(c),u=r.A(c);if(l>=0&&l>=u)return e;const f=h*u-l*o;if(0>=f&&h>=0&&0>=l){const t=h-l;if(1e-8>Math.abs(t))return i;const e=h/t;return(new P).F(i,(new P).set(n).G(e))}const y=(new P).C(t,s),w=n.A(y),x=r.A(y);if(x>=0&&x>=w)return s;const m=w*o-h*x;if(0>=m&&o>=0&&0>=x){const t=o-x;if(1e-8>Math.abs(t))return i;const e=o/t;return(new P).F(i,(new P).set(r).G(e))}const p=l*x-w*u;if(0>=p&&u-l>=0&&w-x>=0){const t=u-l+(w-x);if(1e-8>Math.abs(t))return e;const i=(u-l)/t,n=(new P).C(s,e).G(i);return(new P).F(e,n)}const d=1/(p+m+f),T=m*d,g=f*d,M=(new P).set(n).G(T),A=(new P).set(r).G(g);return(new P).F(M,A).S(i)})(t.k,i.D[0],i.D[1],i.D[2]),s=(new P).C(t.k,e),n=s.A(s);return n>t.radius*t.radius?void 0:{O:s.$(),B:t.radius-Math.sqrt(n)}}function y(t,i,e,s,n,r,a,h){return h.setValueAtTime(0,r),h.linearRampToValueAtTime(n,r+t),h.linearRampToValueAtTime(e,r+t+i),h.setValueAtTime(e,r+a),h.linearRampToValueAtTime(0,r+a+s),r+a+s}function w(t){return 440*2**((t-69)/12)}function x(t){const i=xt.createBufferSource();i.buffer=mt,i.loop=!0;const e=xt.createBiquadFilter();e.type="lowpass",e.frequency.value=t?120:450,e.gain.value=0,i.connect(e);const s=xt.createGain(),n=y(.05,.01,t?1:.07,.03,t?2:1,xt.currentTime,.07,s.gain);e.connect(s),s.connect(xt.destination),i.start(),i.stop(n)}function m(t,i){const e=t=>new q(2.5,1,1,1,3,3).q(.5,"x").P(i=>t?0>i.x:i.x>0).G(1,.5,.5).R().T(L.I),s=t=>new q(2,2,2,8,8,8).T(L.U,L.U,L.U,L.U,L.W,L.U).K(2).P(t=>t.z>1&&t.y>0).H(0,.3,-.2).V(!0).N(new q(3,3,3,3,3,3).P(At(1.5)).q(2.5).R().H(0,1).J(t=>{const i=Math.pow(1-t.y/3,2.5);t.x*=i,t.z*=i,t.y>0&&(t.y-=.4)}).H(0,1.5).T(L.Y).V()).N(new q(2,4,2,2,1,2).q(2).P(t=>0>t.y).G(1.2,1,.5).H(0,0,-1.8).R().H(0,-1,0).T(L.Z).V(!0)).N(new q(3,5,3,3,3,3).q(2.2).H(0,1).J(t=>{const i=Math.pow(1-t.y/5,1.5);t.x*=i,t.z*=i,t.y>0&&(t.y-=.5)}).H(0,-4.5).T(L.I).V()).N(e().L(0,0,-.3).H(-1.5,-2,0).N(e(!0).L(0,0,.3).H(1.5,-2)).P(t=>Math.abs(t.x)>2).H(0,t-.5).V(!0)).P(t=>t.y>-4).L(0,0,.3*(t-.5)).j(),n=s(0),r=s(1);n.X(1,r.tt);const a=new wt(n,L.it);return a.position.set(t),a.st.set(i),a}function p(t){const i=xt.createOscillator(),e=xt.createGain(),s=xt.createBiquadFilter();i.type="sawtooth",i.frequency.value=700,i.frequency.setValueAtTime(t?800:700,xt.currentTime+.15),i.frequency.linearRampToValueAtTime(t?900:500,xt.currentTime+.7),i.frequency.linearRampToValueAtTime(900,xt.currentTime+.9),e.gain.setValueAtTime(0,xt.currentTime),e.gain.linearRampToValueAtTime(.6,xt.currentTime+.2),e.gain.linearRampToValueAtTime(.4,xt.currentTime+.3),e.gain.linearRampToValueAtTime(0,xt.currentTime+(t?.5:.8)),s.type="lowpass",s.frequency.value=t?2e3:2200,s.Q.value=8,s.frequency.linearRampToValueAtTime(t?1900:2800,xt.currentTime+.3),s.frequency.linearRampToValueAtTime(40,xt.currentTime+1),s.Q.linearRampToValueAtTime(22,xt.currentTime+.5),i.connect(e),e.connect(s),s.connect(xt.destination),i.start(),i.stop(xt.currentTime+1)}function d(t,i,e){const s=xt.createGain(),n=xt.createGain(),r=y(0,.1,0,.1,.3,t,i,s.gain),a=y(0,1,.2,.5,3046,t,i,n.gain),h=xt.createOscillator();h.frequency.value=e;const o=xt.createOscillator();o.type="sine",o.frequency.value=6*e,h.connect(s),o.connect(n),s.connect(gt),s.connect(Tt),n.connect(h.frequency),h.start(t),o.start(t),h.stop(r),o.stop(a)}function T(t,i,e){const s=xt.createGain(),n=xt.createGain(),r=y(0,.5,0,.05,.15,t,i,s.gain),a=y(0,1,.2,.05,200,t,i,n.gain),h=xt.createOscillator();h.frequency.value=e;const o=xt.createOscillator();o.type="triangle",o.frequency.value=2*e,h.connect(s),o.connect(n),s.connect(gt),s.connect(Tt),n.connect(h.frequency),h.start(t),o.start(t),h.stop(r),o.stop(a)}function g(t,i){const e=t.charCodeAt(0)-33;if(i)return[e,2];const s=Math.floor(e/6);let n;return n=14===s?0:74+s,[n,e%6]}function M(){const t=[d,T];zt.forEach((i,e)=>{let s=0;i.forEach(i=>{if(i[0]){const n=i[1]/9;t[e](xt.currentTime+s,n,w(i[0])),s+=n}else s+=i[1]/9})})}function A(){const t=new q(512,1,512,1,1,1,1);return new wt(t.T(L.ht).et(40,40).V().j(),L.ht)}function v(t,i,e,s=2){return new q(4,t,4,s,1,s).P(At(2)).q(i).T(e).R().H(0,t/2).et().V()}function R(t){const i=new q(4,t?4:30,4,3,t?3:1,3).T(L.nt);return t?i.K(12):i.P(At()).q(12).P(t=>t.y>0).G(.5,1,.5),i.R().H(0,25).et().N(new q(4,15,4,3,1,3).P(At()).et().q(2).R().H(0,8).T(L.rt)).V(!0)}function z(t,i,e,s){return new q(4,e,40,1,1,6).T(s).H(-20).et(20,20).N(new q(38,e,6.4,6).T(s).H(1,0,16.8).et(20,20)).N(new q(38,e,6.4,6).T(s).H(1,0,-16.8).et(20,20)).P(t=>19>=Math.abs(t.x)&&19>=Math.abs(t.z)).q(t).ot().q(i).R().j()}function E(t,i,e,s){return new q(1,1,40,1,1,6).P(t=>t.y>0).J(e=>e.y=e.z*i+20*i+t).R().H(-10).P(t=>10>=Math.abs(t.x)).q(e).ot().q(s).R().j()}function H(){return new wt(new q(130,30,90,4,3,2).T(...Ht()).P(t=>t.x>60).H(0,0,-5).P(t=>t.x>60&&-30>t.z).H(40,0,35).P(t=>30>t.x).H(0,0,10).P(t=>t.y>10&&-40>t.x&&0>t.z).H(-6,6).P(t=>t.y>10).G(1.2,1,1.2).N(new q(1.5,84,120,1,1,3).P(t=>t.y>0).q(50,"x").R().T(L.ct).H(105,27,10)).N(new q(4,20,4,2,1,2).P(At(2)).q(10).T(...Ht()).R().H(10,-5,-60)).N(new q(4,10,4,3,1,2).P(At(2)).q(10).T(...Ht()).R().H(-20,-10,-75)).R().H(150,15,-100).j().N(new q(240,40,240,4,2,4).T(...Ht()).P(t=>t.y>15&&120>Math.abs(t.x)&&120>Math.abs(t.z)).H(0,7).P(t=>t.x>0&&40>t.z).H(25,0).P(t=>t.x>0&&0>t.z).H(90).P(t=>t.y>15&&t.x>0).G(1.1,1,1.1).R().et(40,40).H(-135,20,-135).j()).N(new q(180,30,60,4,2,2).T(...Ht()).P(t=>-30>t.x&&t.z>20).H(0,0,20).P(t=>0>t.z&&20>t.x&&t.x>-60&&t.y>0).H(0,10).P(t=>-60>t.x).H(0,0,30).P(t=>t.x>30&&50>t.x&&t.z>20).H(0,0,10).P(t=>t.x>50).G(1,1,.3).P(t=>t.y>10&&t.x>-90).G(1.2,1,1.2).et(20,20).R().H(-170,15,65).j()).N(new q(512,32,2).T(L.nt).H(0,16,256).et().N(new q(2,32,512).T(L.nt).H(256,16).et()).N(new q(2,32,512,1,1,4).P(t=>256>t.z&&t.y>0).H(0,20).P(t=>128>t.z&&t.y>0).H(0,20).R().T(L.nt).H(-256,16).et(40,40)).N(new q(512,32,2,4).T(L.nt).P(t=>t.y>0&&256>t.x).H(0,40).R().H(0,16,-256).et(20,20)).j()).N(Et(60,1,1.3).T(L.ct).P(t=>t.z>10&&0>t.y).H(0,-13).N(Et(2,1,1.3).T(L.ct).P(t=>0>t.y&&20>Math.abs(t.z)).G(1,1,.2).P(t=>t.y>5&&16>t.y&&17>Math.abs(t.z)).H(0,-14).P(t=>0>t.y).H(0,-14).et(20,20).R().H(31).j()).R().L(0,0,Math.PI/2).G(3,1,3).P(t=>t.y>10&&t.z>70).H(0,0,10).N(new q(2,100,150,1,1,10).T(L.ct).P(t=>t.y>0).q(90,"x").H(0,-40).R().H(100,25)).N(Et(120,1,1).T(L.ct).G(1,1,1.3).R().G(1,1.3,2).H(40,50)).N(new q(145,1,187).T(L.ct).P(t=>0>t.x&&t.z>0).H(3,0,-2).R().H(27,-24.8,-36)).R().H(155,25,15).V().j()).N(z(20,25,20,L.nt).N(z(50,55,20,L.nt).L(0,Math.PI/2)).N(new q(6,20,26).T(L.nt).et().L(0,Math.PI/-4).H(27,0,-26)).L(0,Math.PI/-4).N(v(20,20,L.lt).H(80,-10,30)).H(-190,10,190).V().j()).N(z(25,35,140,L.nt).L(Math.PI/2,0,Math.PI/-2).L(0,Math.PI/1.9).H(190,50,-84).V().j()).N(new q(4,6,4,6,1,6).T(L.lt).P(At).q(14).R().H(5,3,40).N(new q(4,18,4,6,1,6).T(L.lt).q(8).R().H(7,9)).N(new q(12,20,12,4,1,6).T(L.lt).P(t=>-4>=t.x).q(6,"y",{x:1,y:0,z:0}).P(t=>t.x>=4).q(8,"y",{x:-3,y:0,z:0}).P(t=>t.x>-2).H(30,5).P(t=>t.x>30).H(30,10).L(0,-.4).G(1.2,1,1.2).P(t=>10>t.y).J(t=>t.y=-14).R().H(18,14,0).et().j()).N(new q(4,44,4,6,1,6).T(L.lt).P(At()).q(8).R().H(80,18,50).j()).N(new q(4,52,4,6,1,6).T(L.lt).P(At()).q(8).R().H(60,26,45).j()).L(0,Math.PI).H(240,0,52).V().j()).N(Pt(8).T(...Ht()).et().N(Pt(20).T(...Ht()).H(30,8,18).et()).N(Pt(12).T(...Ht()).H(68,19,40).et()).N(Pt(10).T(...Ht()).H(95,30,32).et()).N(Pt(28).T(...Ht()).H(140,35,50).et()).R().L(0,-1).H(-190,120,-60).V().j()).N(new q(4,2,20).T(L.lt).N(new q(20,2,4).T(L.lt).H(-8,0,12)).N(new q(4,2,38).T(L.lt).H(-20,0,29)).N(new q(18,2,4).T(L.lt).H(-13,0,50)).N(new q(4,2,20).T(L.lt).H(-6,0,62)).N(new q(4,2,4,3,1,3).T(L.lt).P(At()).q(8).R().H(-6,0,79.5)).L(0,Math.PI/2).H(133,39,-220).V().j()).N(new q(200,80,200,6,1,6).T(...Ht()).et(60,30).P(At(100)).q(100).ot().K(70,{x:0,y:-100,z:0}).G(1.5,.8,1.5).P(t=>t.y>0).L(0,0,-.1).G(.8,1,.8).R().H(0,40).N(E(0,1.5,80,120).T(L.ct).et(30,30)).N(Pt(20).H(-10,60,80).T(L.ct).et(30,30)).N(Pt(20).H(35,62,70).T(L.ct).et(30,30)).N(Pt(25).H(-60,50,-65).T(L.ct).et(30,30)).N(new q(100,90,100,6,1,6).T(...Ht()).P(At(50)).q(50).ot().K(50,{x:0,y:-170,z:0}).G(1.5,1,1.5).P(t=>t.y>0).L(0,0,-.1).G(.8,1,.8).et(30,30).R().N(E(0,1,40,60).T(L.ct).et(30,30).L(0,4).H(0,-20)).N(Pt(15).H(-35,18,-20).T(L.ct).et(30,30)).N(Pt(15).H(-35,25,10).T(L.ct).et(30,30)).N(Pt(10).H(-30,35,25).T(L.ct).et(30,30)).H(-16,100)).N(new q(40,60,30).T(L.ct).P(t=>0>t.y&&0>t.z).H(0,0,-50).R().L(0,.1).H(104,30,0)).R().L(0,3).H(-130,40,-130).V().j()).N(Et(20,1.3,2).T(L.lt).et(20,20).N(Et(2,1.3,2).T(L.lt).R().H(9,3).et(20,20)).N(Et(2,1.3,2).T(L.lt).R().H(-9,3).et(20,20)).N(new q(1,38,35).T(L.wt).et(3)).N(v(26,10,L.lt,4).N(v(14,10,L.lt,4).H(0,0,-20)).R().H(-54,-20,25).j()).R().H(-190,20,9).j()).N(new q(12,2,70).T(L.lt).P(t=>t.z>0).H(0,-35).R().L(0,.6).H(-55,29,113).j()).N(R().N(R(!0).H(32,0,10)).N(R().H(60,0,20)).N(R(!0).H(93,0,38)).N(E(20,0,39,45).et().T(L.nt).G(1,1.5,1).L(0,3).H(90,0,90).V()).N(new q(140,30,20).T(L.nt).P(t=>0>t.z&&0>t.x).H(0,0,-20).R().H(10,15,135).et().V()).N(new q(80,35,2).T(L.wt).H(-100,13,107).et(3)).N(new q(30,33,40).T(L.nt).H(-155,14,125).et().V()).N(v(30,4,L.lt).H(-15,0,-20)).N(v(20,4,L.lt).H(-25,-2,-36)).N(v(10,4,L.lt).H(-30,0,-50)).N(v(20,4,L.lt).H(-135,0,132)).N(v(10,4,L.lt).H(-135,0,118)).N(v(10,14,L.lt).H(-100,-5,125)).N(v(5,18,L.lt).H(-10,0,40)).H(120,0,110)).N(R(!0).H(90,25,-45).N(R(!0).H(75,35,-180)).N(R().H(-5,41,-190)).N(R().H(-20,42,-215).G(1,1.3).H(0,-10)).N(R().H(-210,26,100)).N(R().G(1,1.3).H(-230,28,120))).j(),L.ht)}class P extends DOMPoint{S(t){return this.F(this,t),this}F(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this}set(t,i,e){return t&&"object"==typeof t&&(i=t.y,e=t.z,t=t.x),this.x=t??this.x,this.y=i??this.y,this.z=e??this.z,this}i(){return new P(this.x,this.y,this.z,this.w)}G(t){return this.x*=t,this.y*=t,this.z*=t,this}t(t){return this.C(this,t),this}C(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this}h(t,i){const e=t.z*i.x-t.x*i.z,s=t.x*i.y-t.y*i.x;return this.x=t.y*i.z-t.z*i.y,this.y=e,this.z=s,this}A(t){return this.x*t.x+this.y*t.y+this.z*t.z}toArray(){return[this.x,this.y,this.z]}get ut(){return Math.hypot(...this.toArray())}$(){const t=this.ut;return 0===t?new P:(this.x/=t,this.y/=t,this.z/=t,this)}ft(t,i){const e=(new P).C(t,this);if(e.ut>1){const t=e.$().G(i);this.S(t)}return this}dt(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this}Mt(t){return this.x===t.x&&this.y===t.y&&this.z===t.z}}const b=new class{constructor(){this.yt=new P,this.xt=new P,this.vt=new P,this.gt=!1,this.bt=!1,this.zt=new Map,this.isEnabled=!1,this.kt=null,this.gamepad=null,this.At=0,this.Ct={Dt:0,_t:3},document.addEventListener("keydown",t=>this.Ft(t,!0)),document.addEventListener("keyup",t=>this.Ft(t,!1)),window.addEventListener("mousemove",t=>{this.vt.x+=.05*t.movementX,this.vt.y+=.05*t.movementY})}Gt(){this.isEnabled=!0,this.vt.set(0,0,0)}St(){if(!this.isEnabled)return;this.bt=this.gt;const t=navigator.getGamepads();t&&(null===this.kt?t.forEach(t=>{const i=t?.axes.some(t=>t>.2);(t?.buttons.some(t=>t.pressed)||i)&&(this.kt=t?t.index:null,""===t?.mapping&&navigator.userAgent.includes("refox")&&(this.Ct.Dt=1,navigator.userAgent.includes("Win")&&(this.Ct._t=5)))}):this.gamepad=t[this.kt]);const i=t=>this.gamepad?.buttons[t]?.pressed,e=this.zt.get("KeyA")||i(14)?-1:0,s=this.zt.get("KeyD")||i(15)?1:0,n=this.zt.get("KeyW")||i(12)?-1:0,r=this.zt.get("KeyS")||i(13)?1:0;this.yt.x=e+s||this.gamepad?.axes[0]||0,this.yt.y=n+r||this.gamepad?.axes[1]||0,this.xt.x=this.vt.x||this.gamepad?.axes[2]||0,this.xt.y=this.vt.y||this.gamepad?.axes[this.Ct._t]||0,this.gt=this.zt.get("Space")||i(this.Ct.Dt),this.At=this.yt.ut,.15>this.At&&(this.yt.x=0,this.yt.y=0),this.At>1.3&&this.yt.$(),.15>this.xt.ut&&this.xt.set(0,0,0),this.vt.set(0,0)}Ft(t,i){this.zt.set(t.code,i)}};class N{constructor(t){this.texture=t.texture}}const S=new class{constructor(){this.Ot=c3d.getContext("webgl2");const t=this.createShader(this.Ot.VERTEX_SHADER,"#version 300 es\nlayout(location=0) in vec3 A;layout(location=1) in vec2 B;layout(location=2) in float m;layout(location=3) in vec3 i;layout(location=4) in vec3 D;uniform mat4 E,F,t;uniform float G;uniform int H,I;vec4 r[2];out vec2 l;out float f;out vec3 n;out mat4 o;out vec4 e;void main(){r[0]=vec4(i,1);r[1]=vec4(D,1);vec4 v=mix(r[H],r[I],G);gl_Position=E*v;l=B;f=m;n=A;o=F;e=t*v;}"),i=this.createShader(this.Ot.FRAGMENT_SHADER,"#version 300 es\nprecision highp float;\nin vec2 l;in float f;in vec3 n;in mat4 o;in vec4 e;uniform mediump sampler2DArray s;uniform mediump sampler2DShadow d;vec3 h=normalize(vec3(.3,.3,.2));vec4 x=vec4(.2,.2,.2,1);out vec4 u;float p(mediump sampler2DShadow f,vec4 v){float i=0.,n=1./4096.;for(int l=-1;l<=1;l++)for(int m=-1;m<=1;m++){vec2 e=vec2(l,m)*n;i+=texture(f,vec3(v.xy+e,v.z-.002));}return i/9.;}float p(float f,float i,float m){return 2.*i/(m+i-f*(m-i));}void main(){float v=p(d,e);vec3 m=normalize(mat3(o)*n);float i=max(dot(h,m),0.),t=f>14.?1.:mix(.2*i,i,v);vec3 a=t*vec3(1),z=a+x.xyz,y=clamp(z,vec3(.3),vec3(1));vec4 g=texture(s,vec3(l,f));float w=p(gl_FragCoord.z,1.,7e2),A=clamp(smoothstep(.4,1.,w),0.,.5);vec3 C=vec3(.3,.3,.5),c=mix(g.xyz*y,C,A);u=vec4(c,g.w);if(u.w<.2)discard;}");this.$t=this.createProgram(t,i);const e=this.createShader(this.Ot.VERTEX_SHADER,"#version 300 es\nlayout(location=0) in vec4 i;out vec4 y;void main(){y=i;gl_Position=i;gl_Position.z=1.;}"),s=this.createShader(this.Ot.FRAGMENT_SHADER,"#version 300 es\nprecision highp float;\nuniform mediump sampler2D s;uniform mat4 C;in vec4 y;out vec4 u;void main(){vec4 m=C*y;vec3 v=normalize(m.xyz/m.w);float f=atan(v.x,v.z),n=asin(clamp(v.y,-1.,1.));vec2 i;i.x=f/6.28+.5;i.y=n/3.14+.5;u=texture(s,i);}");this.Bt=this.createProgram(e,s);const n=this.createShader(this.Ot.VERTEX_SHADER,"#version 300 es\nprecision highp float;\nlayout(location=2) in float m;layout(location=3) in vec4 i;uniform mat4 t;out float f;void main(){gl_Position=t*i;f=m;}"),r=this.createShader(this.Ot.FRAGMENT_SHADER,"#version 300 es\nprecision highp float;\nout float v;in float f;void main(){if(f>11.f)discard;v=gl_FragCoord.z;}");this.Tt=this.createProgram(n,r);const a=this.createShader(this.Ot.VERTEX_SHADER,"#version 300 es\nlayout(location=0) in vec3 i;layout(location=1) in float a;layout(location=2) in float c;layout(location=3) in float m;uniform mat4 w;out float z,f;void main(){gl_Position=w*vec4(i,1);gl_PointSize=a;z=c;f=m;}"),h=this.createShader(this.Ot.FRAGMENT_SHADER,"#version 300 es\nprecision highp float;\nin float z,f;out vec4 g;uniform mediump sampler2DArray s;void main(){vec4 m=texture(s,vec3(gl_PointCoord,f));float v=m.w*z;if(v<.01)discard;g=vec4(m.xyz,v);}");this.Rt=this.createProgram(a,h);const o=this.Ot.getUniformLocation(this.$t,"d"),c=this.Ot.getUniformLocation(this.$t,"s"),l=this.Ot.getUniformLocation(this.Bt,"s");this.Ot.useProgram(this.$t),this.Ot.uniform1i(c,0),this.Ot.uniform1i(o,1),this.Ot.useProgram(this.Bt),this.Ot.uniform1i(l,2)}createShader(t,i){const e=this.Ot.createShader(t);return this.Ot.shaderSource(e,i),this.Ot.compileShader(e),e}createProgram(t,i){const e=this.Ot.createProgram();return this.Ot.attachShader(e,t),this.Ot.attachShader(e,i),this.Ot.linkProgram(e),e}},G=S.Ot;class F{constructor(t,i){this.source=i,this.id=t}}const _=new class{constructor(){this.Pt=[]}qt(t){const i=new F(this.Pt.length,t);return this.Pt.push(i),i}It(t){G.activeTexture(G.TEXTURE2),G.bindTexture(G.TEXTURE_2D,G.createTexture()),G.texImage2D(G.TEXTURE_2D,0,G.RGBA,G.RGBA,G.UNSIGNED_BYTE,t),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,G.LINEAR)}Qt(){G.activeTexture(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D_ARRAY,G.createTexture()),G.texStorage3D(G.TEXTURE_2D_ARRAY,8,G.RGBA8,512,512,this.Pt.length),this.Pt.forEach((t,i)=>{G.texSubImage3D(G.TEXTURE_2D_ARRAY,0,0,0,i,512,512,1,G.RGBA,G.UNSIGNED_BYTE,t.source)}),G.generateMipmap(G.TEXTURE_2D_ARRAY)}},L={},k=t=>`<filter id="${t}" ${window.navigator.userAgent.includes("refox")?'width="514px" height="514px" x="-1" y="-1"':'width="100%" height="100%" x="0" y="0"'} >`;class D{constructor(...t){this.st=new P,this.Et=!1,this.right=new P,this.jt=new P,this.forward=new P,this.position=new P,this.G=new P(1,1,1),this.Lt=[],this.Nt=new DOMMatrix,this.o=new DOMMatrix,this.Vt=new P(0,1,0),this.Ht=new DOMMatrix,t&&this.S(...t)}S(...t){t.forEach(t=>{t.Kt&&(t.Kt.Lt=t.Kt.Lt.filter(t=>t!==this)),t.Kt=this,this.Lt.push(t)})}Ut(t){this.Lt=this.Lt.filter(i=>i!==t)}L(t,i,e){this.st.S({x:n(t),y:n(i),z:n(e)}),this.Ht.rotateSelf(n(t),n(i),n(e))}Wt(t,i,e){this.Ht=new DOMMatrix,this.st.set(n(t),n(i),n(e)),this.Ht.rotateSelf(n(t),n(i),n(e))}Jt(){const t=new DOMMatrix;return t.translateSelf(this.position.x,this.position.y,this.position.z),this.Et?t.multiplySelf(this.Ht):t.rotateSelf(this.st.x,this.st.y,this.st.z),t.scaleSelf(this.G.x,this.G.y,this.G.z),t}Yt(){this.Nt=this.Jt(),this.o=this.Kt?this.Kt.o.multiply(this.Nt):DOMMatrix.fromMatrix(this.Nt),this.Lt.forEach(t=>t.Yt())}Zt(){const t=[];return function t(i,e){i.Lt.forEach(i=>{e.push(i),t(i,e)})}(this,t),t}Xt(t){this.Et=!0,this.forward.C(this.position,t).$(),this.right.h(this.Vt,this.forward).$(),this.jt.h(this.forward,this.right).$(),this.Ht=new DOMMatrix([this.right.x,this.right.y,this.right.z,0,this.jt.x,this.jt.y,this.jt.z,0,this.forward.x,this.forward.y,this.forward.z,0,0,0,0,1])}}class q{T(t,i,e,s,n,r){const a=[...h(this.ti,this.ii,e??t),...h(this.ti,this.ii,s??t),...h(this.ii,this.si,t),...h(this.ii,this.si,i??t),...h(this.ti,this.si,n??t),...h(this.ti,this.si,r??t)];return this.ei(2,new Float32Array(a),1),this}constructor(t=1,i=1,e=1,s=1,n=1,r=1,a=6){this.tt=[],this.hi=[],this.buffers=new Map,this.ti=s,this.ii=r,this.si=n,this.m=G.createVertexArray();const h=[],o=[];let c=0;const l=(t,i,e,s,n,r,a,l,u,f)=>{const y=r/u,w=a/f,x=r/2,m=a/2,p=l/2,d=u+1,T=f+1;for(let r=0;T>r;r++){const a=r*w-m;for(let h=0;d>h;h++){const c=h*y-x,l=new P;l[t]=c*s,l[i]=a*n,l[e]=p,this.tt.push(l),o.push(h/u,r/f)}}for(let t=0;f>t;t++)for(let i=0;u>i;i++){const e=c+i+d*(t+1),s=c+(i+1)+d*t;h.push(c+i+d*t,e,s,e,c+(i+1)+d*(t+1),s)}c+=d*T},u=[["x","z","y",1,1,t,e,i,s,r],["x","z","y",1,-1,t,e,-i,s,r],["z","y","x",-1,-1,e,i,t,r,n],["z","y","x",1,-1,e,i,-t,r,n],["x","y","z",1,-1,t,i,e,s,n],["x","y","z",-1,-1,t,i,-e,s,n]];for(let t=0;a>t;t++)l(...u[t]);this.ei(1,new Float32Array(o),2),this.indices=new Uint16Array(h),this.V().j().R()}R(){return this.hi=this.tt,this}ot(){return this.hi=this.tt.filter(t=>!this.hi.includes(t)),this}P(t){return this.hi=this.tt.filter(t),this}ni(t){return this.hi=this.hi.filter(t),this}H(t=0,i=0,e=0){return this.hi.forEach(s=>s.S({x:t,y:i,z:e})),this}G(t=1,i=1,e=1){const s=(new DOMMatrix).scaleSelf(t,i,e);return this.hi.forEach(t=>t.set(s.transformPoint(t))),this}L(t=0,i=0,e=0){const s=(new DOMMatrix).rotateSelf(n(t),n(i),n(e));return this.hi.forEach(t=>t.set(s.transformPoint(t))),this}J(t){return this.hi.forEach(t),this}K(t,i={x:0,y:0,z:0}){return this.J(e=>{e.t(i).$().G(t)}),this}N(t){const i=t.p().map(t=>t+this.tt.length);this.indices=new Uint16Array([...this.indices,...i]),this.tt.push(...t.tt);const e=this.ri(1).data,s=t.ri(1).data,n=new Float32Array([...e,...s]);this.ei(1,n,2);const r=this.ri(0).data,a=t.ri(0).data,h=new Float32Array([...r,...a]);if(this.ei(0,h,3),this.ri(2)){const i=this.ri(2).data,e=t.ri(2).data,s=new Float32Array([...i,...e]);this.ei(2,s,1)}return this}q(t,i="y",e={x:0,y:0,z:0}){return this.J(s=>{const n=s[i];s[i]=0,s.t(e).$().G(t),s[i]=n}),this}oi(t){let i=1/0,e=-1/0;return this.hi.forEach(t=>{i>t.x&&(i=t.x),t.x>e&&(e=t.x)}),this.J(s=>{const n=(s.x-i)/(e-i)*2*Math.PI;s.x=t*Math.cos(n),s.z=t*Math.sin(n)}),this}et(t=12,i=12,e=0,s=0){const n=(t,i)=>(t-1+2)*(i-1+2)*2,r=n(this.ti,this.ii),a=r+n(this.ii,this.si),h=this.ri(1).data;let o,c;return this.tt.forEach((n,l)=>{r>l?(o=n.x,c=n.z):a>l?(o=n.z,c=n.y):(o=n.x,c=n.y),h.set([o/t+e,c/i+s],2*l)}),this.ei(1,h,2),this}V(t){const i=new Map,e=new Uint16Array(this.indices.length);t&&this.indices.forEach((t,s)=>{const n=this.tt.findIndex(i=>this.tt[t].Mt(i));e[s]=n;const r=i.get(n);r?r.push(t):i.set(t,[])});const s=this.tt.map(()=>new P),n=t?e:this.indices;for(let t=0;n.length>t;t+=3){const e=r([this.tt[n[t]],this.tt[n[t+1]],this.tt[n[t+2]]]);s[n[t]].S(e),s[n[t+1]].S(e),s[n[t+2]].S(e),i.get(n[t])?.forEach(i=>s[i].set(s[n[t]])),i.get(n[t+1])?.forEach(i=>s[i].set(s[n[t+1]])),i.get(n[t+2])?.forEach(i=>s[i].set(s[n[t+2]]))}return this.ei(0,new Float32Array(s.flatMap(t=>t.$().toArray())),3),this}j(){return this.ei(3,new Float32Array(this.tt.flatMap(t=>t.toArray())),3),this}ri(t){return this.buffers.get(t)}ei(t,i,e){return this.buffers.set(t,{data:i,size:e}),this}p(){return this.indices}X(t,i){return this.ei(3+t,new Float32Array(i.flatMap(t=>t.toArray())),3),this}ai(){const t=[...this.buffers.values()].reduce((t,i)=>t+i.data.length,0),i=new Float32Array(t);G.bindBuffer(34962,G.createBuffer()),G.bindVertexArray(this.m);let e=0,s=0;new Map([...this.buffers.entries()].sort()).forEach((t,n)=>{G.vertexAttribPointer(n,t.size,G.FLOAT,!1,0,e),G.enableVertexAttribArray(n),i.set(t.data,s),e+=t.data.length*t.data.BYTES_PER_ELEMENT,s+=t.data.length}),G.bufferData(34962,i,G.STATIC_DRAW),G.bindBuffer(34963,G.createBuffer()),G.bufferData(34963,this.indices,G.STATIC_DRAW)}}class C extends D{constructor(){super(),this.ci=new q,this.li=[],this.wi=[],this.ci.ei(0,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),2),this.ci.ai()}S(...t){super.S(...t),[...t,...t.flatMap(t=>t.Zt())].forEach(t=>{t.v&&(t.v.ai(),this.li.push(t))})}Ut(t){super.Ut(t),[t,...t.Zt()].forEach(t=>{t.v&&(this.li=this.li.filter(i=>i!==t))})}}class O extends D{constructor(t,i,e,s){super();const n=Math.tan(.5*Math.PI-.5*t),r=1/(e-s);this.ui=new DOMMatrix([n/i,0,0,0,0,n,0,0,0,0,(e+s)*r,-1,0,0,e*s*r*2,0])}}class U{constructor(t,i){this.D=t,this._=i??(t=>r(t).$())(t);const e=new P(1/0,1/0,1/0),s=new P(-1/0,-1/0,-1/0);this.D.forEach(t=>{e.x=Math.min(e.x,t.x),e.y=Math.min(e.y,t.y),e.z=Math.min(e.z,t.z),s.x=Math.max(s.x,t.x),s.y=Math.max(s.y,t.y),s.z=Math.max(s.z,t.z)}),this.fi={min:e,max:s}}}const B=[],W=()=>2*Math.random()-1,V=(t,i)=>t.i().S(new P(W()*i,W()*i,W()*i)),X=(t,i)=>new P(W()*t,.1*W()+i,W()*t);G.enable(G.CULL_FACE),G.enable(G.DEPTH_TEST),G.enable(G.BLEND),G.blendFunc(G.SRC_ALPHA,G.ONE_MINUS_SRC_ALPHA);const I=G.getUniformLocation(S.$t,"E"),$=G.getUniformLocation(S.$t,"F"),j=G.getUniformLocation(S.Bt,"C"),Y=new P(0,0,0),K=new DOMMatrix([2/640,0,0,0,0,2/640,0,0,0,0,-2/800,0,-0,-0,-0,1]),Q=new P(.3,.5,.2).$(),J=new D;J.position.set(Q),J.Xt(Y),J.Ht.invertSelf();const Z=K.multiply(J.Ht),tt=G.getUniformLocation(S.Tt,"t");G.useProgram(S.Tt),G.uniformMatrix4fv(tt,!1,Z.toFloat32Array());const it=new DOMMatrix([.5,0,0,0,0,.5,0,0,0,0,.5,0,.5,.5,.5,1]).multiplySelf(Z),et=G.getUniformLocation(S.$t,"t");G.useProgram(S.$t);const st=new DOMPoint(4096,4096),nt=G.createTexture();G.activeTexture(G.TEXTURE1),G.bindTexture(G.TEXTURE_2D,nt),G.texStorage2D(G.TEXTURE_2D,1,G.DEPTH_COMPONENT32F,st.x,st.y),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_COMPARE_MODE,G.COMPARE_REF_TO_TEXTURE),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_S,G.CLAMP_TO_EDGE),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_T,G.CLAMP_TO_EDGE);const rt=G.createFramebuffer();G.bindFramebuffer(G.FRAMEBUFFER,rt),G.framebufferTexture2D(G.FRAMEBUFFER,G.DEPTH_ATTACHMENT,G.TEXTURE_2D,nt,0);const at=G.getUniformLocation(S.$t,"G"),ht=G.getUniformLocation(S.$t,"H"),ot=G.getUniformLocation(S.$t,"I"),[ct,lt]=(()=>{const t=G.createVertexArray();G.bindVertexArray(t);const i=G.createBuffer();return G.bindBuffer(G.ARRAY_BUFFER,i),G.enableVertexAttribArray(0),G.vertexAttribPointer(0,3,G.FLOAT,!1,24,0),G.enableVertexAttribArray(1),G.vertexAttribPointer(1,1,G.FLOAT,!1,24,12),G.enableVertexAttribArray(2),G.vertexAttribPointer(2,1,G.FLOAT,!1,24,16),G.enableVertexAttribArray(3),G.vertexAttribPointer(3,1,G.FLOAT,!1,24,20),[t,()=>{if(!B.length)return 0;for(let t=B.length-1;t>=0;t--){if(B[t].di){B[t].di(B[t]);continue}const i=B[t];i.Mi&&(i.yi.y-=.03),i.xi-=i.mi,i.size+=i.pi,i.position.S(i.yi),i.xi>0||B.splice(t,1)}const t=new Float32Array(6*B.length);for(let i=0;B.length>i;i++){const e=B[i],s=6*i;t[s]=e.position.x,t[s+1]=e.position.y,t[s+2]=e.position.z,t[s+3]=e.size,t[s+4]=e.xi,t[s+5]=e.gi}return G.bindBuffer(G.ARRAY_BUFFER,i),G.bufferData(G.ARRAY_BUFFER,t,G.DYNAMIC_DRAW),B.length}]})(),ut=G.getUniformLocation(S.Rt,"w");class ft{constructor(t,i){this.k=t,this.radius=i}}class yt{constructor(t,i=0){this.bi=[],this.children=null,this.bounds=t,this.zi=i}ki(){return this.bounds.max.y-this.bounds.min.y>=yt.Ai&&this.bounds.max.z-this.bounds.min.z>=yt.Ai&&this.bounds.max.x-this.bounds.min.x>=yt.Ai}Ci(t){if(this.children)this.Di(t);else if(this.bi.push(t),this.bi.length>yt._i&&yt.Fi>this.zi&&this.ki()){this.Gi();for(const t of this.bi)this.Di(t);this.bi=[]}}Di(t){for(const i of this.children)l(t.fi,i.bounds)&&i.Ci(t)}Gi(){const{min:t,max:i}=this.bounds,e={x:(t.x+i.x)/2,y:(t.y+i.y)/2,z:(t.z+i.z)/2};this.children=[];for(let s=0;8>s;s++)this.children.push(new yt({min:{x:1&s?e.x:t.x,y:2&s?e.y:t.y,z:4&s?e.z:t.z},max:{x:1&s?i.x:e.x,y:2&s?i.y:e.y,z:4&s?i.z:e.z}},this.zi+1))}}yt._i=10,yt.Fi=6,yt.Ai=1;class wt extends D{constructor(t,i){super(),this.l=0,this.u=1,this.alpha=0,this.v=t,this.M=i}}const xt=new AudioContext,mt=xt.createBuffer(1,xt.sampleRate,xt.sampleRate);for(let t=0;xt.sampleRate>t;++t)mt.getChannelData(0)[t]=2*Math.random()-1;const pt=xt.createBuffer(1,xt.sampleRate,xt.sampleRate);for(let t=0;64>t;++t){const t=10*Math.random()+1,i=10*Math.random()+1;for(let e=0;xt.sampleRate>e;++e){const s=Math.sin(e/xt.sampleRate*2*Math.PI*440*t)*Math.sin(e/xt.sampleRate*2*Math.PI*440*i);pt.getChannelData(0)[e]+=s/8}}const dt=xt.createConvolver();dt.buffer=((t=2,i=2)=>{const e=xt.sampleRate,s=e*t,n=xt.createBuffer(2,s,e);for(let t=0;n.numberOfChannels>t;t++){const e=n.getChannelData(t);for(let t=0;s>t;t++)e[t]=(2*Math.random()-1)*Math.pow(1-t/s,i)}return n})(2,.5);const Tt=xt.createGain(),gt=xt.createGain();Tt.gain.value=.15,gt.gain.value=.15,Tt.connect(xt.destination),gt.connect(dt).connect(xt.destination);class Mt{constructor(t){this.Si=9,this.Oi=!1,this.$i=!1,this.Bi=!1,this.Ti=!1,this.Ri=0,this.Pi=new P(0,1,0),this.yi=new P(-.01,0,-.01),this.qi=new P,this.Ii=!1,this.speed=1,this.angle=90,this.Qi=new Set,this.Ei=new Set,this.ji=.94,this.pitch=.31,this.Li=.04,this.Ni=1.2,this.Vi=-.07,this.isFrozen=!1,this.Hi=new P,this.Ki={Ui:!1,frameCount:0},this.Wi=new D((()=>{function t(t){const i=new q(4,1,1,8,8,8).T(L.Z);return i.q(2,"x").H(0,0===t?0:-.05).N(((t=0,i=0)=>{const e=new q(1,3,1,4,5,4).T(L.Z).q(.3).P(t=>0===t.x&&0===t.z&&t.y>1).H(0,.2);return[...new Set(e.tt.map(t=>t.y))].sort((t,i)=>t-i).forEach((t,s)=>{s>0&&e.P(i=>i.y===t).H(.5*Math.sin(t),0,Math.sin(-1.5*s)*i)}),new q(2,2,2,8,8,8).T(L.Z).K(2).P(t=>1>t.x&&-.2>t.y&&t.z>2/3).H(0,-1).P(t=>-2.2>t.y).H(0,-.5,1).G(.5,1,.5).P(t=>t.z>0).L(0,0,i).P(t=>1>t.x&&-.2>t.y&&-2/3>t.z).H(0,-1).P(t=>-2.2>t.y&&0>t.z).H(0,-.5,-1).G(.5,1,.5).P(t=>0>t.z).L(0,0,t).P(t=>t.y>1&&-1>t.x&&.3>Math.abs(t.z)).H(-.3,.2).N(e.R().L(0,0,.5).H(-2.3,2.8))})(0===t?.3:-.3,0===t?-.3:.3).R().H(-2)).N(((t=0,i=0)=>new q(2,2,2,8,8,8).T(L.Z).K(2).P(t=>.5>t.x&&t.x>-.5&&-.2>t.y&&t.z>2/3).H(0,-1).P(t=>-2.2>t.y).H(0,-.5,1).G(.5,1,.5).P(t=>t.z>0).L(0,0,i).P(t=>.5>t.x&&t.x>-.5&&-.2>t.y&&-2/3>t.z).H(0,-1).P(t=>-2.2>t.y&&0>t.z).H(0,-.5,-1).G(.5,1,.5).P(t=>0>t.z).L(0,0,t))(1===t?.3:-.3,1===t?-.3:.3).R().H(2)).N(((t=0)=>{const i=new q(3.8,.01,3.2,1,1,1).T(L.Ji,L.Yi,L.Yi,L.Yi,L.Yi,L.Yi).L(1.1,1.57,0),e=new q(6,.01,6,1,1,1).T(L.Zi,L.Yi,L.Yi,L.Yi,L.Yi,L.Yi).L(1.5,1.57,0);return new q(2,2,2,8,8,8).T(L.Z).K(2).P(t=>1.5>t.z&&t.z>.5&&t.y>1&&.3>Math.abs(t.x)).H(0,1.5).P(t=>t.z>-1.5&&-.5>t.z&&t.y>1&&.3>Math.abs(t.x)).H(0,1.5).P(t=>t.x>1&&t.y>0).H(-.4,.2).P(t=>0>t.x&&.3>t.y).H(-.7,-1).N(i.H(1.6,.75)).N(e.H(2.1,-.5)).R().H(0,t).L(0,t)})(0===t?.1:-.1).H(4,2.9)),i.L(0,-Math.PI/2).G(.5,.5,.5).V(),i.j()}const i=t(0),e=t(1);i.X(1,e.tt);const s=new wt(i,L.Z);return s.l=0,s.u=1,s})()),this.Wi.Et=!0,this.camera=t,this.camera.position.set(194,5.5,220),this.qi.set(this.Wi.position),this.Xi=new ft(new P(181,2,211),2)}update(t){if(this.Ti=this.Bi,this.isFrozen||this.ts(),this.yi.y-=.017,this.Xi.k.S(this.yi),this.yi.y=a(this.yi.y,-1,1),this.ss(t),this.Xi.k.x=a(this.Xi.k.x,-255,255),this.Xi.k.z=a(this.Xi.k.z,-255,255),this.Wi.position.set(this.Xi.k),this.Wi.position.y-=.5,this.isFrozen)return;if(10>this.Ri&&!this.Oi&&b.At>0){const t=this.Wi.Lt[0];t.alpha+=.4*this.yi.ut,1>t.alpha||((()=>{const t=xt.createBufferSource();t.buffer=pt,t.playbackRate.value=1.5+Math.random()/2,t.playbackRate.setTargetAtTime(5,xt.currentTime,.1),t.loop=!0;const i=xt.createBiquadFilter();i.type="lowpass",i.frequency.value=250+70*Math.random(),t.connect(i);const e=xt.createGain(),s=y(.05,.01,0,.03,a(Math.random(),.1,.2),xt.currentTime,.07,e.gain);i.connect(e),e.connect(xt.destination),t.start(),t.stop(s)})(),t.alpha=0,t.l=0===t.l?1:0,t.u=0===t.u?1:0)}if(b.xt.ut)this.ji+=b.xt.x*-this.Li,this.pitch+=b.xt.y*this.Li,this.pitch=a(this.pitch,this.Vi,this.Ni);else{const t=this.camera.position.i().t(this.Wi.position).$(),i=Math.atan2(4,15);this.pitch+=0*(i-this.pitch),this.ji=Math.atan2(t.x,t.z)}const i=15*Math.cos(this.pitch)*Math.sin(this.ji),e=15*Math.sin(this.pitch),s=15*Math.cos(this.pitch)*Math.cos(this.ji),n=this.Wi.position.i().S({x:i,y:e,z:s});this.camera.position.dt(n,.7);const r=this.Wi.position.i();r.y+=3,this.qi.dt(r,.7),this.camera.Xt(this.qi),this.camera.Yt(),!this.Ti&&this.Bi&&(x(!0),b.gamepad?.vibrationActuator?.playEffect("dual-rumble",{startDelay:0,duration:40,weakMagnitude:0,strongMagnitude:.01}))}ss(t){this.Qi.clear(),this.Ei.clear(),u(t,this.Xi,t=>{t.bi.forEach(t=>this.Qi.add(t)),t.es?.forEach(t=>this.Ei.add(t))}),((t,i)=>{i.$i=!1;for(const e of t){const t=f(i.Xi,e);if(t){const s=t.B;if(.7>e._.y||i.yi.y>0){const n=t.O.G(s);i.Xi.k.S(n);const r=t.O.G(i.yi.A(t.O));i.yi.t(r),.7>e._.y&&e._.y>=.3&&(i.$i=!0,i.Oi=!1,i.hs(e._,.3)),-.6>=e._.y&&i.yi.y>0&&(i.yi.y=0)}else i.hs(e._,.3),i.Xi.k.y+=s,i.yi.y=0,i.Oi=!1,i.$i=!0}}})(this.Qi,this),this.$i?(this.Ri=0,this.Bi=!0):(this.Ri++,this.Bi=10>this.Ri),this.Bi||this.hs(new P(0,1,0),.03),this.Xi.k.S(this.yi)}hs(t,i){this.Pi.dt(t,i).$(),this.Wi.Ht=new DOMMatrix;const e=(new P).h(this.Wi.Vt,this.Pi),s=Math.acos(this.Pi.A(this.Wi.Vt));this.Wi.Ht.rotateAxisAngleSelf(e.x,e.y,e.z,n(s))}ts(){if(this.Hi.set(0,0,0),b.At>.01){const t=(new P).set(this.camera.Ht.transformPoint(new P(0,0,-1)));t.y=0,t.$();const i=new P(t.z,0,-t.x);this.Hi.x=.24*(t.x*-b.yt.y+i.x*-b.yt.x),this.Hi.z=.24*(t.z*-b.yt.y+i.z*-b.yt.x)}this.yi.x+=.25*(this.Hi.x-this.yi.x),this.yi.z+=.25*(this.Hi.z-this.yi.z),this.Ii||(this.angle=Math.atan2(this.yi.x,this.yi.z),this.Wi.Lt[0].Wt(0,this.angle,0)),b.gt&&!b.bt&&(this.Ki.Ui=!0),this.Ki.Ui&&(this.Ki.frameCount++,this.Ki.frameCount>10&&(this.Ki.Ui=!1,this.Ki.frameCount=0)),this.Ki.Ui&&this.Bi&&!this.Oi&&(this.yi.y=.5,this.Oi=!0,x(),this.Ki.Ui=!1,this.Ki.frameCount=0)}}const At=(t=2)=>i=>Math.abs(i.x)===t||Math.abs(i.z)===t;class vt{constructor(t){this.ns=[],this.Wi=t,this.Xi=new ft(t.position.i(),10),this.rs=new wt(new q(4,4,4,4,4,4).K(8).j(),L.cs),this.rs.position.set(this.Wi.position)}}class Rt{constructor(t,i){this.es=[],this.ls=0,this.ws=new P,this.us=new P,this.fs=new P,this.ds=0,this.Ms=t,this.es.push(new vt(m(new P(112,11.5,152),new P(0,54,0)))),this.es.push(new vt(m(new P(-190,6.5,190),new P(0,37)))),this.es.push(new vt(m(new P(-219,6.5,8),new P(0,90)))),this.es.push(new vt(m(new P(212,46,-214),new P(0,-90)))),this.es.push(new vt(m(new P(101,63,14.5),new P(0,90)))),this.es.push(new vt(m(new P(250,91,-88.5),new P(0,-90)))),this.es.push(new vt(m(new P(-105,194.5,-106.5),new P(0,-180)))),this.es.push(new vt(m(new P(-237,48,-172),new P(0,180)))),this.es.push(new vt(m(new P(-156,168,90),new P(0,-160)))),this.es.push(new vt(m(new P(-71,103,-44),new P(0,30)))),this.es.push(new vt(m(new P(20,11,235),new P(0,180)))),this.es.push(new vt(m(new P(-107,26,222),new P(0,-125)))),this.es.push(new vt(m(new P(235,12,13),new P(0,180)))),this.Ms.S(...this.es.flatMap(t=>[t.Wi])),this.Ms.wi.push(...this.es.map(t=>(t.rs.v.ai(),t.rs))),this.es.forEach(t=>{u(i,t.Xi,i=>{i.es||(i.es=[]),i.es.push(t),t.ns.push(i)})}),wico.textContent="🧙‍♀️ 0 / 13"}update(t){if(this.es.forEach(t=>{t.rs.L(.005,.005,0),t.Wi.alpha+=.03,1>t.Wi.alpha||(t.Wi.alpha=0,t.Wi.l=0===t.Wi.l?1:0,t.Wi.u=0===t.Wi.u?1:0)}),this.ys){if(t.isFrozen=!0,t.yi.x=0,t.yi.z=0,this.ls++,t.camera.position.set(this.us),t.camera.Xt(this.ys.Wi.position),10===this.ls&&p(),80===this.ls){(()=>{const t=xt.createOscillator(),i=xt.createGain();t.type="triangle",t.frequency.setValueAtTime(400,xt.currentTime).exponentialRampToValueAtTime(800,xt.currentTime+.2),i.gain.setValueAtTime(.8,xt.currentTime).exponentialRampToValueAtTime(.001,xt.currentTime+.2),t.connect(i).connect(xt.destination),t.start(),t.stop(xt.currentTime+.2)})(),b.gamepad?.vibrationActuator?.playEffect("dual-rumble",{startDelay:0,duration:80,weakMagnitude:1,strongMagnitude:1});for(let t=0;30>t;t++)B.push({position:V(this.ys.Wi.position,4),size:50+30*Math.random(),xi:1,yi:X(.4,.4),pi:-1,mi:.01,Mi:!0,gi:L.bubbles.texture.id});this.Ms.wi=this.Ms.wi.filter(t=>t!==this.ys.rs)}if(90===this.ls){const t=this.ys.Wi.position.i();t.y+=3;for(let i=0;5>i;i++)B.push({position:V(t,1.5),size:1+Math.random(),xi:4,yi:new P(.04*W(),.04,.04*W()),pi:1,mi:.03,Mi:!1,gi:L.xs.texture.id})}160===this.ls&&(()=>{for(let t=0;15>t;t++)d(xt.currentTime+t/15,.5,w(85+t)),d(xt.currentTime+t/15+.5,.5,w(75+t)),d(xt.currentTime+t/15+.7,.5,w(90+t));(t=>{const i=xt.createBufferSource();i.buffer=mt,i.playbackRate.value=1,i.loop=!0;const e=xt.createGain(),s=y(.05,.05,.3,.2,.7,t,.1,e.gain);i.connect(e),e.connect(gt),e.connect(Tt),i.start(t),i.stop(s)})(xt.currentTime+.9)})(),this.ls>160&&b.gamepad?.vibrationActuator?.playEffect("dual-rumble",{startDelay:0,duration:20,weakMagnitude:(this.ls-160)/130,strongMagnitude:0}),this.ls>160&&200>this.ls&&B.push({position:this.fs.i(),size:40+10*Math.random(),xi:3,yi:this.fs.i(),pi:Math.random(),mi:Math.max(Math.abs(2*Math.random()),.2),Mi:!1,gi:L.vs.texture.id,di(t){t.position.x=this.yi.x+7*Math.sin(t.position.y*t.pi),t.position.z=this.yi.z+7*Math.cos(t.position.y*t.pi),t.position.y+=.1*t.mi,t.xi-=.02,t.size+=this.mi}}),this.ls>220&&(this.ys.Wi.G.x*=.75,this.ys.Wi.G.y*=1.1,this.ys.Wi.G.z*=.75),250===this.ls&&(this.es=this.es.filter(t=>t!==this.ys),this.Ms.Ut(this.ys.Wi),this.ys.ns.forEach(t=>t.es=t.es?.filter(t=>t!==this.ys))),275===this.ls&&(this.ys=void 0,t.isFrozen=!1,t.camera.position.set(this.ws),t.camera.Xt(t.qi),this.ls=0),t.camera.Yt()}else t.Ei.forEach(i=>{((t,i)=>{const e=t.k.x-i.k.x,s=t.k.y-i.k.y,n=t.k.z-i.k.z,r=t.radius+i.radius;return r*r>=e*e+s*s+n*n})(i.Xi,t.Xi)&&(wico.classList.add("chn"),setTimeout(()=>wico.classList.remove("chn"),250),wico.textContent=`🧙‍♀️ ${14-this.es.length} / 13`,this.ws=t.camera.position.i(),this.us=(new P).set(i.Wi.o.transformPoint(new P(0,0,15))),this.fs=(new P).set(i.Wi.position),this.fs.y-=5,this.ys=i)}),0===this.es.length&&(msg.innerHTML="You Win!",tmpl.style.backgroundColor=`rgba(0, 0, 0, ${this.ds})`,this.ds+=.003,this.ds>.9&&(t.isFrozen=!0))}}const zt=[[..."(v(vGRv`R_Rv_wj^RFAvFSqx(ARv`R_jvpxjx_Vvw)ARv`R_Rv_wj^RFAvFSqw)AS`R^vjvqwkwsy".split("").map(t=>g(t))],[..."HSHSCMCMCMCM@G@G@G@GCGCGAJAJ@G@G@G@GCMCMBMBM@G@G@G@GCLCLCMCMGJGT".split("").map(t=>g(t,!0))]],Et=(t,i,e)=>new q(t,40,50,1,1,8).P(t=>0>t.y&&14>Math.abs(t.z)).q(15,"x",{x:0,y:-40,z:0}).P(t=>t.y>19).q(20,"x").P(t=>t.y>0).G(1,i,e),Ht=()=>[L.ct,L.ct,L.ht,L.ct,L.ct,L.ct],Pt=t=>new q(4,t/2,4,6,1,6).T(L.lt).P(At()).q(t).P(t=>0>t.y).G(0,1,0).R();class bt{constructor(t){this.Wi=(()=>{const t=t=>new q(4,4,4,4,4,4).T(L.ps,L.gs).K(4).N(new q(1,2,1,2,2,2).T(L.ht).q(.5).P(t=>0>t.y).G(2,1,2).R().H(0,4.5)).L(0,Math.PI/2).G(1,1-t,1).V(!0).H(0,t>0?3:4).j(),i=t(.2);return i.X(1,t(0).tt),new wt(i,L.bs)})(),this.Xi=new ft(this.Wi.position.i(),4),this.zs=new P,this.path=[],this.ks=0,this.direction=1,this.currentTarget=new P,this.As=0,this.path=t,this.Wi.alpha=Math.random(),this.Wi.position.set(t[0]),this.Xi.k.set(this.Wi.position),this.Xi.k.y+=1.5}Cs(t,i,e){return t+((i-t+Math.PI)%(2*Math.PI)-Math.PI)*e}update(){this.Wi.alpha+=.03,1>this.Wi.alpha||(this.Wi.alpha=0,this.Wi.l=0===this.Wi.l?1:0,this.Wi.u=0===this.Wi.u?1:0),this.currentTarget.C(this.path[this.ks],this.Wi.position);const t=this.currentTarget.A(this.currentTarget);if(.03>t)return this.ks+=this.direction,void(this.path.length>this.ks?0>this.ks&&(this.ks=1,this.direction=1):(this.ks=this.path.length-2,this.direction=-1));const i=Math.sqrt(t),e=.15;this.Wi.position.x+=this.currentTarget.x/i*e,this.Wi.position.y+=this.currentTarget.y/i*e,this.Wi.position.z+=this.currentTarget.z/i*e,this.Xi.k.set(this.Wi.position),this.Xi.k.y+=1.5,this.As=this.Cs(this.As,Math.atan2(this.currentTarget.x,this.currentTarget.z),.1),this.Wi.Wt(0,this.As,0)}}class Nt{constructor(t){this.Ds=[new bt([new P(-20,0,197),new P(60,0,197)]),new bt([new P(-211,0,220),new P(-230,0,194),new P(-217,0,166)]),new bt([new P(-190,43,-7),new P(-190,46,11),new P(-190,40,33)]),new bt([new P(-29,67,-105),new P(-45,61,-65),new P(-70,52,-43)]),new bt([new P(-193,116,-106),new P(-174,119,-80),new P(-143,122,-61)]),new bt([new P(223,29.5,-93),new P(122,29.5,-83)]),new bt([new P(122,29.5,-71),new P(223,29.5,-81)]),new bt([new P(-98,41,-243),new P(-198,42,-230)]),new bt([new P(139,0,-215),new P(222,0,-215)])],this.Ms=t,this.Ms.S(...this.Ds.flatMap(t=>t.Wi)),plhe.textContent=new Array(9).fill("🖤").join("")}update(t){this.Ds.forEach(i=>{if(i.update(),i.zs.C(t.Xi.k,i.Xi.k),36>i.zs.A(i.zs)){(()=>{const t=xt.currentTime,i=xt.createGain(),e=xt.createGain(),s=y(.1,.1,0,.1,.8,t,.5,i.gain),n=y(.2,.1,.2,.1,2046,t,.5,e.gain),r=xt.createBiquadFilter();r.type="lowpass",r.frequency.value=160,r.Q.value=5;const a=xt.createOscillator();a.frequency.value=250;const h=xt.createOscillator();h.type="sine",h.frequency.value=50,a.connect(i),h.connect(e),i.connect(r),r.connect(xt.destination),e.connect(a.frequency),a.start(t),h.start(t),a.stop(s),h.stop(n)})(),this.Ms.Ut(i.Wi),this.Ds=this.Ds.filter(t=>t!==i);for(let t=0;30>t;t++)B.push({position:i.Xi.k.i(),size:80*Math.random(),xi:5,yi:new P(.25*W(),.5+.5*Math.random(),.25*W()),pi:.1,mi:.03,Mi:!0,gi:L._s.texture.id});t.Xi.k.y>i.Xi.k.y+2?(t.yi.y=.5,b.gamepad?.vibrationActuator?.playEffect("dual-rumble",{startDelay:0,duration:120,weakMagnitude:.2,strongMagnitude:.9})):(b.gamepad?.vibrationActuator?.playEffect("dual-rumble",{startDelay:0,duration:300,weakMagnitude:1,strongMagnitude:1}),t.Si--,t.Ii=!0,t.isFrozen=!0,p(!0),plhe.classList.add("chn"),setTimeout(()=>{t.Ii=!1,t.isFrozen=!1,t.yi.x*=-.1,t.yi.z*=-.1,plhe.classList.remove("chn")},500),t.yi.x*=-.1,t.yi.z*=-.1,plhe.textContent=new Array(t.Si).fill("🖤").join(""))}})}}class St{constructor(){this.Fs=new yt({max:{x:276,y:190.31,z:257,w:1},min:{x:-260,y:-7,z:-267}},0),this.Gs=new C,this.Ss=new Mt(new O(Math.PI/2.5,16/9,1,700)),this.Gs.S(this.Ss.Wi,A(),H()),[A(),H()].flatMap(t=>{const i=t.v.p(),e=t.v.ri(3),s=[];for(let n=0;i.length>n;n+=3){const r=3*i[n+1],a=3*i[n+2],h=o(3*i[n],e.data,t.o),c=o(r,e.data,t.o),l=o(a,e.data,t.o);s.push([h,c,l])}return s.map(t=>new U(t))}).forEach(t=>this.Fs.Ci(t)),this.Os=new Rt(this.Gs,this.Fs),this.$s=new Nt(this.Gs),M(),setInterval(M,14200)}Bs(){this.Ss.update(this.Fs),this.$s.update(this.Ss),this.Os.update(this.Ss),this.Gs.Yt(),((t,i)=>{const e=t.o.inverse(),s=e.scale(1,1,1),n=t.ui.multiply(e);G.useProgram(S.Tt),G.cullFace(G.BACK),G.bindFramebuffer(G.FRAMEBUFFER,rt),G.clear(G.COLOR_BUFFER_BIT|G.DEPTH_BUFFER_BIT),G.viewport(0,0,st.x,st.y),G.blendFunc(G.SRC_ALPHA,G.ONE_MINUS_SRC_ALPHA),i.li.forEach(t=>{G.bindVertexArray(t.v.m),G.uniformMatrix4fv(tt,!1,Z.multiply(t.o).toFloat32Array()),G.drawElements(G.TRIANGLES,t.v.p().length,G.UNSIGNED_SHORT,0)}),G.useProgram(S.$t),G.activeTexture(G.TEXTURE0),G.texParameteri(G.TEXTURE_2D_ARRAY,G.TEXTURE_MIN_FILTER,G.LINEAR_MIPMAP_LINEAR),G.viewport(0,0,G.canvas.width,G.canvas.height),G.bindFramebuffer(G.FRAMEBUFFER,null),G.clearColor(0,0,0,0),G.clear(G.COLOR_BUFFER_BIT|G.DEPTH_BUFFER_BIT),i.li.forEach(t=>c(t,n)),G.depthFunc(G.LEQUAL),G.useProgram(S.Bt),G.activeTexture(G.TEXTURE2),s.m41=0,s.m42=0,s.m43=0;const r=t.ui.multiply(s).inverse();G.uniformMatrix4fv(j,!1,r.toFloat32Array()),G.bindVertexArray(i.ci.m),G.drawArrays(G.TRIANGLES,0,6),G.depthFunc(G.LESS),G.useProgram(S.Rt),G.bindVertexArray(ct),G.uniformMatrix4fv(ut,!1,n.toFloat32Array()),G.drawArrays(G.POINTS,0,lt()),G.useProgram(S.$t),G.activeTexture(G.TEXTURE0),G.blendFunc(G.SRC_ALPHA,G.SRC_ALPHA),i.wi.forEach(t=>{t.Yt(),c(t,n)}),G.bindVertexArray(null)})(this.Ss.camera,this.Gs)}}let Gt=0;const Ft=1e3/60;document.onclick=async()=>{document.onclick=()=>tmpl.requestPointerLock(),tmpl.requestPointerLock(),msg.innerHTML="",await(async()=>{L.wt=new N({texture:_.qt(await t('<rect width="50%" height="100%" x="25%" fill="#999"/>'))}),L.Z=new N({texture:_.qt(await t(`${k("b")}<feTurbulence baseFrequency="0.01,0.0008" numOctaves="2" seed="23" type="fractalNoise" stitchTiles="stitch" /><feColorMatrix values="0.01 0.01 0.01 0 0 0.01 0.01 0.01 0 0 0.01 0.01 0.01 0 0 1 1 1 1 1"/></filter><rect x="0" y="0" width="100%" height="100%" filter="url(#b)"/>`))}),L.ct=new N({texture:_.qt(await s("#7f3a00",".005",7,4,6,170,4))}),L.ht=new N({texture:_.qt(await s("#008115",".005",8,-2,1,0,40))}),L.nt=new N({texture:_.qt(await s("#0d4b22",".1",8,-2,1,0,40))}),L.lt=new N({texture:_.qt(await s("#999",".02",8,7,1,115,60))}),L.rt=new N({texture:_.qt(await s("#7B3F00","0.09,.01",4,1,6,170,6))}),L.W=new N({texture:_.qt(await t('<rect x="0" y="0" width="100%" height="100%" fill="#56b41b"/><circle r="40" cx="160" cy="220" fill="#fff"  stroke-width="8" /><circle r="40" cx="352" cy="220" fill="#fff"  stroke-width="8" /><circle cx="352" cy="230" r="30" fill="#black"/><circle cx="160" cy="230" r="30" fill="#black"/><circle cx="256" cy="360" r="60" fill="#fff"/><rect x="0" y="300" width="100%" height="50" fill="#56b41b"/>'))}),L.U=new N({texture:_.qt(await e("#56b41b"))}),L.I=new N({texture:_.qt(await e("#902EBB"))}),L.gs=new N({texture:_.qt(await t('<svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="20 15 72 72"><circle r="300"/><path id="p" d="M156 9q10 0 10 30T10 999 6 49 56 9M48 45l-17 -15l-5 15h60l-5 -15l-17 15M20 50l12 25l8 -4l8 9l8 -7l8 7l8 -9l8 4l12 -25l-12 12l-8 -5l-8 9l-8 -7l-8 7l-8 -9l-8 5" fill="#f71"/></svg>'))}),L.ps=new N({texture:_.qt(await e("#f71"))}),L.Y=new N({texture:_.qt(await e("#902EBB"))}),L.Zi=new N({texture:_.qt(await t('<path d="M256 210 Q236 220 226 240 Q256 250 286 240 Q276 220 256 210 Z" fill="pink" stroke="black" stroke-width="4" /><path d="M256 250 Q256 270 240 280 Q220 290 200 280 Q180 270 170 260" fill="none" stroke="pink" stroke-width="4" /><path d="M256 250 Q256 270 272 280 Q292 290 312 280 Q332 270 342 260" fill="none" stroke="pink" stroke-width="4" /><line x1="200" y1="250" x2="120" y2="240" stroke="white" stroke-width="4"/><line x1="200" y1="260" x2="120" y2="260" stroke="white" stroke-width="4"/><line x1="200" y1="270" x2="120" y2="280" stroke="white" stroke-width="4"/><line x1="312" y1="250" x2="392" y2="240" stroke="white" stroke-width="4"/><line x1="312" y1="260" x2="392" y2="260" stroke="white" stroke-width="4"/><line x1="312" y1="270" x2="392" y2="280" stroke="white" stroke-width="4"/>'))}),L.vs=new N({texture:_.qt(await i("✨","filter: hue-rotate(160deg)"))}),L.xs=new N({texture:_.qt(await i("❤️"))}),L._s=new N({texture:_.qt(await t('<filter id="f"><feTurbulence baseFrequency="0.02" numOctaves="5" seed="2" type="fractalNoise" /><feDisplacementMap in="SourceGraphic" scale="400" xChannelSelector="R" yChannelSelector="G"/></filter><circle filter="url(#f)" cx="50%" cy="50%" r="40%" fill="#f71"/>'))}),L.bubbles=new N({texture:_.qt(await i("🫧"))}),L.cs=new N({texture:_.qt(await t(`${k("b")}<feTurbulence baseFrequency="0.005" numOctaves="2" seed="23"  stitchTiles="stitch" /><feColorMatrix values="0 1 0 0 0 0 0 0 0 0 1 1 1 1 1 0 -1 -1 -1 1.2"/></filter><rect x="0" y="0" width="100%" height="100%" filter="url(#b)"/>`))}),L.Ji=new N({texture:_.qt(await t('<circle r="75" cx="160" cy="256" fill="#0c0" stroke="black" stroke-width="8" /><ellipse cx="160" cy="256" rx="25" ry="70" fill="black"/><circle r="75" cx="352" cy="256" fill="#0c0" stroke="black" stroke-width="8" /><ellipse cx="352" cy="256" rx="25" ry="70" fill="black"/>'))}),_.It(await t('<filter id="g" width="100%" height="100%" x="0" y="0"><feTurbulence type="fractalNoise" baseFrequency=".002 .01" numOctaves="5" stitchTiles="stitch" seed="25"/><feColorMatrix values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 -0.45 0.2"/><feBlend in2="SourceGraphic"/></filter><rect width="100%" height="100%" y="0" fill="#248" filter="url(#g)"/><filter id="f"><feTurbulence baseFrequency="0.008,0" numOctaves="2" seed="15" stitchTiles="stitch" type="fractalNoise" /><feDisplacementMap in="SourceGraphic" scale="-100"/></filter><g><rect filter="url(#f)" height="45%" width="104%" y="-30" x="-2%" fill="#163b28"/></g>',4096,1024)),_.Qt()})();const n=new St;let r=1;!function t(){r-=.008,tmpl.style.backgroundColor=`rgba(0.0, 0.0, 0.0, ${r}`,r>0?setTimeout(t,10):tmpl.style.backgroundColor="none"}(),b.Gt(),function t(i){const e=i-Gt;Ft>e||(Gt=i-e%Ft,b.St(),n.Bs()),requestAnimationFrame(t)}(0)}</script>