<title>cat meow - A js13kGames 2017 WebXR game with A-frame</title><script src=/2017/webxr/aframe.js></script><script>var gameState="play";AFRAME.registerComponent("cursor-listener",{init:function(){this.el.addEventListener("click",(function(t){if("over"!==gameState){gameState="over";var e=document.querySelector("#cat"),r=document.querySelector("#camera"),n=document.querySelector("#cursor");e.components.sound.stopSound();var o=document.createElement("a-entity");o.setAttribute("position",n.getAttribute("position")),o.setAttribute("rotation",n.getAttribute("rotation")),o.setAttribute("scale","1.4 1.4 1.4"),o.setAttribute("text",{color:"midnightblue",value:"You found the cat. Stare to restart.",align:"center",wrapCount:"18"}),o.setAttribute("id","end-screen"),o.setAttribute("cursor-listener"),r.appendChild(o),n.setAttribute("visible",!1)}else setTimeout((function(){window.location.reload()}),1e3)}))}}),AFRAME.registerComponent("collider-check",{dependencies:["raycaster"],init:function(){this.el.addEventListener("raycaster-intersected",(function(t){"play"===gameState&&document.querySelector("#cat").setAttribute("sound",{volume:10})})),this.el.addEventListener("raycaster-intersected-cleared",(function(t){"play"===gameState&&document.querySelector("#cat").setAttribute("sound",{volume:3})}))}}),AFRAME.registerComponent("random-radius",{init:function(){var t=document.querySelector("#cat-wrapper"),e=Math.floor(300*Math.random());t.setAttribute("rotation",`0 ${e} 0`)}})</script><body><a-scene><a-assets><a-audio id=meow preload=auto src=meow.ogg></a-audio></a-assets><a-sky color=powderblue id=sky></a-sky><a-entity id=camera rotation="0 0 0" camera="userHeight: 1.6" look-controls><a-entity id=cursor position="0 0 -0.8" geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03" material="color: black; shader: flat" cursor="fuse: true; fuseTimeout: 300"></a-entity></a-entity><a-text color=midnightblue id=title position="-0.9 2 -1" scale="1.7 2.5 1.7" value="cat meow"></a-text><a-entity id=lightSphere position="-7 4 -2" geometry="primitive: sphere; radius: .5" material="color: lightyellow; shader: flat" light="color: #ffffff; type: ambient; intensity: 1.3"></a-entity><a-entity id=plane position="0 0 0 -4" geometry="primitive: plane; width: 6; height: 6" material="color: lightslategrey" rotation="-90 0 0"></a-entity><a-torus color=lightslategrey position="0 0.6 0" radius=3 radius-tubular=0.5 rotation="90 0 0" shader=flat id=bush></a-torus><a-entity id=cat-wrapper position="0 0 0" rotation="0 90 0" random-radius><a-entity id=cat position="3 0.48 0" rotation="0 90 0" class=collidable collider-check cursor-listener sound="src: #meow; autoplay: true; loop: true, poolSize: 1, volume: 3"><a-animation attribute=position begin=raycaster-intersected delay=2000 dur=2000 fill=forward to="1.3 0.48 0"></a-animation><a-sphere color=indianred id=cat-head position="0 0.4 -0.5" radius=0.3 scale="1 0.8 0.8" shader=flat><a-cone color=indianred height=0.3 position="0.2 0.3 0" radius-bottom=0.1 radius-top=0 rotation="0 0 -14" shader=flat></a-cone><a-cone color=indianred height=0.3 position="-0.2 0.3 0" radius-bottom=0.1 radius-top=0 rotation="0 0 14" shader=flat></a-cone></a-sphere><a-cylinder color=indianred height=0.8 id=cat-body position="0 0.04 0" radius=.3 rotation="-90 0 0" scale="1 1 0.8" shader=flat><a-cone color=indianred height=.5 position="-0.14 0.246 -0.4" radius-bottom=0.11 radius-top=0.05 rotation="-90 0 0" shader=flat></a-cone><a-cone color=indianred height=.5 position="0.14 0.246 -0.4" radius-bottom=0.11 radius-top=0.05 rotation="-90 0 0" shader=flat></a-cone><a-cone color=indianred height=.5 position="-0.14 -0.29 -0.4" radius-bottom=0.11 radius-top=0.05 rotation="-90 0 0" shader=flat></a-cone><a-cone color=indianred height=.5 position="0.14 -0.29 -0.4" radius-bottom=0.11 radius-top=0.05 rotation="-90 0 0" shader=flat></a-cone><a-torus color=indianred position="-0.014 -0.97 0.242" radius=0.58 radius-tubular=0.02 rotation="0 -70 0" shader=flat arc=90></a-torus></a-cylinder></a-entity></a-entity></a-scene>