<!doctype html><title>MINIPUNK</title><style>body,html{width:100%;height:100%;margin:0;border:0;overflow:hidden;display:block;background:#000}canvas{position:absolute;left:0;top:0;width:100vw;height:100vh}</style><canvas></canvas><canvas></canvas><script>"use strict";let aa={b:5513,c:21,d:[{a:7,b:2,d:0,e:1,f:196,h:7,i:0,j:0,k:1,l:195,n:0,o:100,q:22,r:3636,s:194,t:2,u:612,v:254,w:6,x:0,p:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],c:[{n:[135,0,0,0,0,0,0,0,135,0,0,0,0,0,0,0,135,0,0,0,0,0,0,0,135,0,0,0,0,0,0,0]}]},{a:8,b:0,d:0,e:1,f:82,h:8,i:0,j:0,k:0,l:0,n:255,o:100,q:0,r:9090,s:130,t:3,u:5200,v:63,w:0,x:0,p:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],c:[{n:[0,0,0,0,147,0,0,0,0,0,0,0,147,0,0,0,0,0,0,0,147,0,0,0,0,0,0,0,147,0,0,0]}]},{a:7,b:0,d:0,e:0,f:130,h:7,i:0,j:9,k:0,l:128,n:0,o:197,q:548,r:12631,s:100,t:2,u:11025,v:255,w:2,x:49,p:[1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2],c:[{n:[128,0,128,0,128,0,128,0,128,0,128,0,128,0,128,0,131,0,131,0,131,0,131,0,131,0,131,0,131,0,131,0]},{n:[128,0,128,0,128,0,128,0,128,0,128,0,128,0,128,0,126,0,126,0,126,0,126,0,126,0,126,0,126,0,126,0]}]},{a:7,b:0,d:0,e:0,f:125,h:4,i:0,j:0,k:0,l:57,n:0,o:100,q:351,r:7105,s:125,t:4,u:5839,v:254,w:4,x:63,p:[0,0,0,0,0,0,1,1,2,2,1,1,0,0,0,0,1,1],c:[{n:[164,0,0,0,167,0,0,0,164,0,0,0,162,0,0,0,164,0,0,0,167,0,0,0,164,0,0,0,162,0,0,0]},{n:[164,0,0,0,167,166,167,166,167,0,0,0,0,0,0,0,164,0,0,0,162,0,162,0,162,0,0,0,0,0,0,0]}]},{a:7,b:0,d:0,e:0,f:162,h:7,i:0,j:0,k:0,l:160,n:0,o:10137,q:68770,r:5614,s:110,t:0,u:11025,v:255,w:0,x:0,p:[0,0,1,2,1,2,0,0,0,0,1,2,1,2,1,2,1,2],c:[{n:[116,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,119,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[116,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,114,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]},{a:7,b:0,d:0,e:0,f:131,h:8,i:0,j:0,k:0,l:130,n:64,o:22456,q:5614,r:2193,s:125,t:3,u:4067,v:176,w:6,x:44,p:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1],c:[{n:[152,0,0,0,140,0,0,0,155,0,0,0,143,0,0,0,152,0,0,0,140,0,0,0,150,0,0,0,138,0,0,0]}]}],a:80};function ba(t,a,e){e=a.w*e>>1,a=a.x/255;let i=0;for(;i<t.length-e;)t[i+e]+=t[i]*a,i++}function ca(t){let a=da.createBuffer(1,t.length,44100);return a.getChannelData(0).set(t),a}function ea(t,a,e,i){let n=0,r=0,h=.00390625*Math.pow(1.059463094,a+12*(t.g.a-8)+t.g.b-128)*(1+8e-4*t.g.d);a=.00390625*Math.pow(1.059463094,a+12*(t.g.h-8)+t.g.i-128)*(1+8e-4*t.g.j);let s=t.g.v/255,o=0,c=0,b=e.length;for(var f=t.m+t.A+t.B-1;0<=f;--f){let u=f+i;var l=1;f<t.m?l=f/t.m:f>=t.m+t.A&&(l-=(f-t.m-t.A)/t.B);var g=h;t.g.e&&(g*=l*l),n+=g;let m=2*Math.max(-.3,Math.min(.3,Math.sin(6.283184*n)))*t.g.f;switch(g=a,t.g.k&&(g*=l*l),r+=g,m+=2*Math.max(-.3,Math.min(.3,Math.sin(6.283184*r)))*t.g.l,t.g.n&&(m+=(2*Math.random()-1)*t.g.n*l),m*=l/255,o+=(l=1.5*Math.sin(3.141592*t.g.u/44100))*c,c+=l*(g=s*(m-c)-o),t.g.t){case 1:m=g;break;case 2:m=o;break;case 3:m=c;break;case 4:m=o+g}m*=.00476*t.g.s,u<b&&(e[u]+=m)}}class fa{constructor(t,a){this.g=t,this.C=a||5605,this.m=t.o,this.A=t.q,this.B=t.r}}function ha(t){var a=new ia(aa);let e=new Float32Array(a.m),i=0;!function n(){if(i<a.g.d.length){i+=1;{var r=a.g.d[i-1],h=n;let t=new Float32Array(a.m),o=a.g.b,c=a.g.c,b=new fa(r,o),f=0,l=0,g=0;for(;l<c-1;){var s=r.p[l];s&&(s=r.c[s-1].n[g])&&ea(b,s,t,f),f+=o,32==++g&&(g=0,l++)}for(ba(t,r,o),r=0;r<t.length;r++)e[r]+=t[r];h()}}else t(e)}()}class ia{constructor(t){this.g=t,this.m=44100*t.a}}function ja(t,a,e){{t=new fa(t);let i=new Float32Array(t.m+t.A+t.B-1+32*t.C);ea(t,a,i,0),ba(i,t.g,t.C),e(ca(i))}}let da=new AudioContext,ka=da.createGain();ka.gain.value=.25,ka.connect(da.destination);let ma=da.createGain();ma.connect(da.destination);let na=null,oa=null,pa=null;function qa(t,a){if(t){var e=da.createBufferSource();e.buffer=t,e.loop=!!a,e.connect(a?ka:ma),e.start()}}function ra(t){for(;t>Math.PI;)t-=2*Math.PI;for(;t<-Math.PI;)t+=2*Math.PI;return t}function sa(t){return 0<t?1:0>t?-1:0}function m(){return new Float32Array(3)}function ta(t){var a=new Float32Array(3);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a}function n(t,a,e){let i=new Float32Array(3);return i[0]=t,i[1]=a,i[2]=e,i}function ua(t,a){t[0]=a[0],t[1]=a[1],t[2]=a[2]}function p(t,a,e,i){t[0]=a,t[1]=e,t[2]=i}function va(t,a,e){t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2]}function wa(t,a,e){t[0]=a[0]-e[0],t[1]=a[1]-e[1],t[2]=a[2]-e[2]}function xa(t,a,e){t[0]=a[0]*e,t[1]=a[1]*e,t[2]=a[2]*e}function ya(t,a,e){var i=r;t[0]=a[0]+e[0]*i,t[1]=a[1]+e[1]*i,t[2]=a[2]+e[2]*i}function za(t,a){var e=a[0];let i=a[1],n=a[2];0<(e=e*e+i*i+n*n)&&(e=1/Math.sqrt(e),t[0]=a[0]*e,t[1]=a[1]*e,t[2]=a[2]*e)}function Aa(t,a,e){var i=Ba;let n=[],r=[];n[0]=a[0]-i[0],n[1]=a[1]-i[1],n[2]=a[2]-i[2],r[0]=n[0],r[1]=n[1]*Math.cos(e)-n[2]*Math.sin(e),r[2]=n[1]*Math.sin(e)+n[2]*Math.cos(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2]}function Ca(t,a,e){var i=Ba;let n=[],r=[];n[0]=a[0]-i[0],n[1]=a[1]-i[1],n[2]=a[2]-i[2],r[0]=n[2]*Math.sin(e)+n[0]*Math.cos(e),r[1]=n[1],r[2]=n[2]*Math.cos(e)-n[0]*Math.sin(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2]}let Ba=m(),Da=n(0,0,1),w=m();function Ea(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Fa(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}function Ga(t,a,e){var i=Math.sin(e);e=Math.cos(e);var n=a[0],r=a[1],h=a[2],s=a[3],o=a[8],c=a[9],b=a[10],f=a[11];a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=n*e-o*i,t[1]=r*e-c*i,t[2]=h*e-b*i,t[3]=s*e-f*i,t[8]=n*i+o*e,t[9]=r*i+c*e,t[10]=h*i+b*e,t[11]=s*i+f*e}function x(t,a,e){return 4278190080+(e<<16)+(a<<8)+t}function Ha(t,a,e){var i=6*t|0,n=6*t-i;t=e*(1-a);var r=e*(1-n*a);switch(a=e*(1-(1-n)*a),i%6){case 0:var h=e,s=a,o=t;break;case 1:h=r,s=e,o=t;break;case 2:h=t,s=e,o=a;break;case 3:h=t,s=r,o=e;break;case 4:h=a,s=t,o=e;break;case 5:h=e,s=t,o=r}return x(255*h|0,255*s|0,255*o|0)}function Ia(t,a){var e=Ja;let i=1-a;return x(t[0]*i+e[0]*a|0,t[1]*i+e[1]*a|0,t[2]*i+e[2]*a|0)}let Ja=n(192,0,0);function Ka(){let t=Array(8).fill(0).map((()=>m()));return La(t,0,0,0,1,1,1),t}function La(t,a,e,i,n,r,h){let s=a-n;a+=n,n=e-r,e+=r,r=i-h,i+=h,p(t[0],s,e,i),p(t[1],a,e,i),p(t[2],a,e,r),p(t[3],s,e,r),p(t[4],s,n,i),p(t[5],a,n,i),p(t[6],a,n,r),p(t[7],s,n,r)}function y(t,a,e){for(let i=0;i<a.length;i++)va(t[i],a[i],e)}function Ma(t,a,e){for(let i=0;i<a.length;i++)Aa(t[i],a[i],e)}function A(t,a,e){for(let i=0;i<a.length;i++)Ca(t[i],a[i],e)}function Na(t,a,e){for(let s=0;s<a.length;s++){var i=t[s],n=a[s],r=Ba,h=e;let o=[],c=[];o[0]=n[0]-r[0],o[1]=n[1]-r[1],o[2]=n[2]-r[2],c[0]=o[0]*Math.cos(h)-o[1]*Math.sin(h),c[1]=o[0]*Math.sin(h)+o[1]*Math.cos(h),c[2]=o[2],i[0]=c[0]+r[0],i[1]=c[1]+r[1],i[2]=c[2]+r[2]}}function Oa(t,a,e){for(let i=0;8>i;i++){let n=4>i?a:e;t[i][0]*=n,t[i][5]*=n}}function E(t,a,e){{var i=a[0],n=a[1],r=a[3],h=n[0]-i[0],s=n[1]-i[1];n=n[2]-i[2];let t=r[0]-i[0],e=r[1]-i[1];i=r[2]-i[2],w[0]=s*i-n*e,w[1]=n*t-h*i,w[2]=h*e-s*t}for(za(w,w),h=[0,1,2,0,2,3],s=0;6>s;s++){for(i=h[s],r=0;3>r;r++)t.G[t.H++]=a[i][r];for(i=0;3>i;i++)t.D[t.C++]=w[i];t.J[t.g++]=e}}function Pa(t,a){var e=Qa.C;E(e,[t[0],t[1],t[2],t[3]],a),E(e,[t[7],t[6],t[5],t[4]],a),E(e,[t[1],t[0],t[4],t[5]],a),E(e,[t[3],t[2],t[6],t[7]],a),E(e,[t[0],t[3],t[7],t[4]],a),E(e,[t[2],t[1],t[5],t[6]],a)}function Ra(t){G.bindBuffer(34962,t.F),G.bufferData(34962,t.G,t.usage),G.bindBuffer(34962,t.m),G.bufferData(34962,t.A,t.usage),G.bindBuffer(34962,t.B),G.bufferData(34962,t.D,t.usage)}class Sa{constructor(t,a){this.usage=t,this.K=a||1e3,t=6*this.K,this.G=new Float32Array(3*t),this.A=new Uint8Array(4*t),this.J=new Uint32Array(this.A.buffer),this.D=new Float32Array(3*t),this.C=this.g=this.H=0,this.F=G.createBuffer(),this.m=G.createBuffer(),this.B=G.createBuffer()}L(){0!==this.g&&(G.bindBuffer(34962,this.F),G.vertexAttribPointer(Qa.B.B,3,5126,!1,0,0),G.bindBuffer(34962,this.m),G.vertexAttribPointer(Qa.B.D,4,5121,!0,0,0),G.bindBuffer(34962,this.B),G.vertexAttribPointer(Qa.B.F,3,5126,!1,0,0),G.drawArrays(4,0,this.g))}}function Ta(){this.I=!1,this.V=0,this.R=9}function Ua(t){t.I?(t.V++,t.R=0):(t.V=0,t.R++)}let H=Array(256);for(let t=0;256>t;t++)H[t]=new Ta;document.addEventListener("keydown",(function(t){0<=(t=t.keyCode)&&256>t&&(H[t].I=!0)})),document.addEventListener("keyup",(function(t){0<=(t=t.keyCode)&&256>t&&(H[t].I=!1)}));let I=new class{constructor(){this.y=this.x=0,this.buttons=Array(3).fill(0).map((()=>new Ta)),this.g=!1,this.sensitivity=5e-4}};class Va{constructor(){this.height=this.width=2,this.m=this.g=1}bind(){G.bindFramebuffer(36160,null),G.viewport(0,0,this.width,this.height)}}class Wa{constructor(t,a){this.width=t,this.height=a,this.g=G.createTexture(),G.bindTexture(3553,this.g),G.texImage2D(3553,0,6408,t,a,0,6408,5121,null),G.texParameteri(3553,10241,9729),G.texParameteri(3553,10242,33071),G.texParameteri(3553,10243,33071),this.A=G.createFramebuffer(),G.bindFramebuffer(36160,this.A),G.framebufferTexture2D(36160,36064,3553,this.g,0),this.m=G.createRenderbuffer(),G.bindRenderbuffer(36161,this.m),G.renderbufferStorage(36161,33189,t,a),G.framebufferRenderbuffer(36160,36096,36161,this.m)}bind(){G.bindFramebuffer(36160,this.A),G.viewport(0,0,this.width,this.height)}}function Xa(t,a){return t=G.getAttribLocation(t.g,a),G.enableVertexAttribArray(t),t}class Ya{constructor(t,a){t=Za(35633,t),a=Za(35632,a),this.g=G.createProgram(),G.attachShader(this.g,t),G.attachShader(this.g,a),G.linkProgram(this.g)}bind(){G.useProgram(this.g)}}function Za(t,a){return t=G.createShader(t),G.shaderSource(t,a),G.compileShader(t),t}class $a extends Ya{constructor(){super("attribute vec4 a;attribute vec4 b;attribute vec3 c;uniform mat4 d;uniform mat4 e;uniform vec3 h;varying highp vec4 f;varying highp float i;void main(void){gl_Position=e*d*a;if (b.r>0.9||b.g>0.9||b.b>0.9){f=b;}else{highp vec3 j=normalize(vec3(-0.5,0.6,-0.7));highp float k=0.4+0.6*max(dot(c,j),0.0);f=vec4(k*b.rgb,1.0);}i=distance(a.xyz,h);}","varying highp vec4 f;varying highp float i;void main(void){if (f.r>0.9||f.g>0.9||f.b>0.9){gl_FragColor=f;}else{highp vec4 m=vec4(0.2,0.4,0.5,1.0);highp float n=(400.0-i)/(380.0);n=clamp(n,0.0,1.0);gl_FragColor=mix(m,f,n);}}"),this.B=Xa(this,"a"),this.D=Xa(this,"b"),this.F=Xa(this,"c"),this.m=G.getUniformLocation(this.g,"d"),this.A=G.getUniformLocation(this.g,"e"),this.C=G.getUniformLocation(this.g,"h")}}class ab extends Ya{constructor(){super("attribute vec2 a;attribute vec2 b;varying highp vec2 c;void main(void){gl_Position=vec4(a.x,a.y,-1.0,1.0);c=b;}","varying highp vec2 c;uniform int d;uniform sampler2D e;highp float w[11];void main(void){w[0]=0.01;w[1]=0.02;w[2]=0.04;w[3]=0.08;w[4]=0.16;w[5]=0.38;w[6]=0.16;w[7]=0.08;w[8]=0.04;w[9]=0.02;w[10]=0.01;if(d==0){highp vec4 f=texture2D(e,c);if(f.r>0.95||f.g>0.95||f.b>0.95){gl_FragColor=f;}else{discard;}} else if(d==1||d==3){highp vec4 g=vec4(0.0);highp float s=0.0;for (int x=-5;x<=5;x++){highp vec4 f=texture2D(e, c + vec2(float(x)/512.0, 0.0));g.rgb +=w[x + 5] * f.rgb * f.a;s +=w[x + 5] * f.a;}if(s==0.0){gl_FragColor=vec4(0.0);}else{g.rgb/=s;g.a=s;gl_FragColor=g;}}else{highp vec4 g=vec4(0.0);highp float s=0.0;for(int y=-5;y<=5;y++){highp vec4 f=texture2D(e,c+vec2(0.0, float(y)/512.0));g.rgb+=w[y+5]*f.rgb*f.a;s+=w[y+5]*f.a;}if(s==0.0){gl_FragColor=vec4(0.0);}else{g.rgb/=s;g.a=s;gl_FragColor=g;}}}"),this.A=Xa(this,"a"),this.m=Xa(this,"b"),this.B=G.getUniformLocation(this.g,"d"),this.C=G.getUniformLocation(this.g,"e")}}class bb extends Ya{constructor(){super("attribute vec2 a;attribute vec2 b;varying highp vec2 c;void main(void){gl_Position=vec4(a.x,a.y,0.0,1.0);c=b;}","varying highp vec2 c;uniform sampler2D d;uniform sampler2D e;void main(void) {highp vec4 f=texture2D(d,c);highp vec4 g=texture2D(e,c);gl_FragColor=vec4(f.rgb+2.0*g.a*g.rgb,1.0);}"),Xa(this,"a"),Xa(this,"b"),this.A=G.getUniformLocation(this.g,"d"),this.m=G.getUniformLocation(this.g,"e")}}class cb{constructor(){this.D=this.C=0,this.B=12,this.m=m(),this.A=m(),this.g=m()}set(t,a,e,i,n){this.g[0]=t,this.g[1]=a,this.g[2]=e,this.C=i,this.D=n}}function db(t){G.clearColor(0,0,0,1),G.clearDepth(1),G.enable(2929),G.depthFunc(515),G.enable(3042),G.blendFunc(770,771),G.clear(16640);var a=t.M,e=1/Math.tan((eb?50:60)*Math.PI/180/2),i=1/-4999.9;a[0]=e/(K.width/K.height),a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=e,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=5000.1*i,a[11]=-1,a[12]=0,a[13]=0,a[14]=1e3*i,a[15]=0,Fa(t.D),e=a=t.D;var n=t.g.C;i=Math.sin(n),n=Math.cos(n);var r=e[4],h=e[5],s=e[6],o=e[7],c=e[8],b=e[9],f=e[10],l=e[11];e!==a&&(a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]),a[4]=r*n+c*i,a[5]=h*n+b*i,a[6]=s*n+f*i,a[7]=o*n+l*i,a[8]=c*n-r*i,a[9]=b*n-h*i,a[10]=f*n-s*i,a[11]=l*n-o*i,Fa(t.F),Ga(t.F,t.F,t.g.D),a=t.m;var g=t.D;e=t.F,i=g[0],n=g[1],r=g[2],h=g[3],s=g[4],o=g[5],c=g[6],b=g[7],f=g[8],l=g[9];var u=g[10],m=g[11],d=g[12],M=g[13],v=g[14];g=g[15];var A=e[0],p=e[1],y=e[2],x=e[3];a[0]=A*i+p*s+y*f+x*d,a[1]=A*n+p*o+y*l+x*M,a[2]=A*r+p*c+y*u+x*v,a[3]=A*h+p*b+y*m+x*g,A=e[4],p=e[5],y=e[6],x=e[7],a[4]=A*i+p*s+y*f+x*d,a[5]=A*n+p*o+y*l+x*M,a[6]=A*r+p*c+y*u+x*v,a[7]=A*h+p*b+y*m+x*g,A=e[8],p=e[9],y=e[10],x=e[11],a[8]=A*i+p*s+y*f+x*d,a[9]=A*n+p*o+y*l+x*M,a[10]=A*r+p*c+y*u+x*v,a[11]=A*h+p*b+y*m+x*g,A=e[12],p=e[13],y=e[14],x=e[15],a[12]=A*i+p*s+y*f+x*d,a[13]=A*n+p*o+y*l+x*M,a[14]=A*r+p*c+y*u+x*v,a[15]=A*h+p*b+y*m+x*g,Ga(t.m,t.m,Math.PI),e=a=t.m,i=(r=t.O)[0],n=r[1],r=r[2],a[0]=e[0]*i,a[1]=e[1]*i,a[2]=e[2]*i,a[3]=e[3]*i,a[4]=e[4]*n,a[5]=e[5]*n,a[6]=e[6]*n,a[7]=e[7]*n,a[8]=e[8]*r,a[9]=e[9]*r,a[10]=e[10]*r,a[11]=e[11]*r,a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15],w[0]=-t.g.g[0],w[1]=-t.g.g[1],w[2]=-t.g.g[2],e=a=t.m,i=w[0],n=w[1],r=w[2],e===a?(a[12]=e[0]*i+e[4]*n+e[8]*r+e[12],a[13]=e[1]*i+e[5]*n+e[9]*r+e[13],a[14]=e[2]*i+e[6]*n+e[10]*r+e[14],a[15]=e[3]*i+e[7]*n+e[11]*r+e[15]):(h=e[0],s=e[1],o=e[2],c=e[3],b=e[4],f=e[5],l=e[6],u=e[7],m=e[8],d=e[9],M=e[10],v=e[11],a[0]=h,a[1]=s,a[2]=o,a[3]=c,a[4]=b,a[5]=f,a[6]=l,a[7]=u,a[8]=m,a[9]=d,a[10]=M,a[11]=v,a[12]=h*i+b*n+m*r+e[12],a[13]=s*i+f*n+d*r+e[13],a[14]=o*i+l*n+M*r+e[14],a[15]=c*i+u*n+v*r+e[15]),G.uniformMatrix4fv(t.B.A,!1,t.M),G.uniformMatrix4fv(t.B.m,!1,t.m),G.uniform3fv(t.B.C,t.g.g),t.C.L(),fb.L()}class gb{constructor(){this.N=new Wa(1920,1080),this.G=[new Wa(512,512),new Wa(512,512)],this.H=G.createBuffer(),G.bindBuffer(34962,this.H),G.bufferData(34962,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),35044),this.J=G.createBuffer(),G.bindBuffer(34962,this.J),G.bufferData(34962,new Float32Array([0,0,1,0,0,1,1,0,1,1,0,1]),35044),this.B=new $a,this.A=new ab,this.K=new bb,this.C=new Sa(35048,1e4),this.g=new cb,this.D=Ea(),this.F=Ea(),this.M=Ea(),this.m=Ea(),this.O=n(-1,1,1)}}function M(t,a,e,i){N.fillStyle="#000",N.fillText(t,a+1,e+1),N.fillStyle=i||"#fff",N.fillText(t,a,e)}function hb(t,a,e){N.strokeStyle=e,N.beginPath(),N.arc(t,a,20,0,2*Math.PI),N.stroke()}function ib(t){switch(t){case 3:return Ha(116/360,.55+(.6-.55)*Math.random(),.45+(.5-.45)*Math.random());case 20:return x(64,255,255);case 21:return x(32,128,128);case 22:return x(255,64,255);case 23:return x(128,32,128);case 24:return x(255,128,64);case 25:return x(128,64,32);case 26:return x(255,255,255);case 27:return x(128,128,128);case 9:return Ha(0,0,.5+(.6-.5)*Math.random());case 10:return Ha(0,0,.2+(.22-.2)*Math.random());case 28:return x(128,0,0);case 29:return x(224,224,224)}return 0}function jb(t,a){var e=fb,i=Math.floor(t[0]),n=Math.floor(t[1]),r=Math.floor(t[2]),h=w[0],s=w[1],o=w[2],c=sa(h),b=sa(s),f=sa(o),l=kb(t[0],h),g=kb(t[1],s);t=kb(t[2],o);var u=c/h,d=b/s,M=f/o,v=m();if(0===h&&0===s&&0===o)throw new RangeError;for(a/=Math.sqrt(h*h+s*s+o*o),h=Math.min(l,g,t);;){if(0<v[0]){if(!O(e,i,n,r)||!O(e,i-1,n,r))return h}else if(0>v[0]&&(!O(e,i,n,r)||!O(e,i+1,n,r)))return h;if(0<v[1]){if(!O(e,i,n,r)||!O(e,i,n-1,r))return h}else if(0>v[1]&&(!O(e,i,n,r)||!O(e,i,n+1,r)))return h;if(0<v[2]){if(!O(e,i,n,r)||!O(e,i,n,r-1))return h}else if(0>v[2]&&(!O(e,i,n,r)||!O(e,i,n,r+1)))return h;if(l<g)if(l<t){if(l>a)break;h=l,i+=c,l+=u,v[0]=-c,v[1]=0,v[2]=0}else{if(t>a)break;h=t,r+=f,t+=M,v[0]=0,v[1]=0,v[2]=-f}else if(g<t){if(g>a)break;h=g,n+=b,g+=d,v[0]=0,v[1]=-b,v[2]=0}else{if(t>a)break;h=t,r+=f,t+=M,v[0]=0,v[1]=0,v[2]=-f}}return null}function lb(t,a,e){return 0>t||512<=t||0>a||256<=a||0>e||512<=e}function mb(t,a,e,i){var n=fb;lb(t,a,e)||(n.data[32768*(e/4|0)+128*(0|a)+(t/4|0)]=i)}function O(t,a,e,i){return 0===(lb(a,e,i)?0:t.data[32768*(i/4|0)+128*(0|e)+(a/4|0)])}class nb{constructor(){this.data=new Uint8Array(4194304),this.g=null}L(){this.g&&this.g.L()}}function kb(t,a){return 0>a?kb(-t,-a):(1-(t%1+1)%1)/a}function ob(t,a,e,i,n,r,h,s){n=a+n,h=h||Math.floor(10+4*Math.random()),s=void 0!==s?s:Math.floor(3+3*Math.random());var o=Math.random();o=.3>o?20:.6>o?22:.9>o?24:26,P(t,a,e,i,n,r,10),P(t,a,e,i,a,r,10),P(t,n,e,i,n,r,10),pb(t,a,e,i,n,e,1,o,h,s),pb(t,a,r,i,n,r,-1,o,h,s),pb(t,a,e,t,n,r,1,o,h,s),pb(i,a,e,i,n,r,-1,o,h,s)}function pb(t,a,e,i,n,r,h,s,o,c){for(let b=t;b<=i;b++)for(let f=a;f<=n;f++)for(let a=e;a<=r;a++)t===i&&(a<e+1||a>=r-1)||e===r&&(b<t+1||b>=i-1)||f%o<o-c?mb(b,f,a,10):Math.random()>.2*Math.max(0,Math.min(1,f/100))?mb(b+h,f,a,s+1):mb(b+h,f,a,s)}function P(t,a,e,i,n,r,h){for(;t<=i;t+=4)for(let i=a;i<=n;i+=1)for(let a=e;a<=r;a+=4)mb(t,i,a,h)}let qb=[];function rb(t,a,e,i,n,r){qb.push({x:t,y:a,z:e,ba:.3*(Math.random()-.5),ca:.3*(Math.random()-.4),da:.3*(Math.random()-.5),size:i,color:n,duration:r,$:r})}let sb=[n(480,49,172),n(503,49,172),n(503,95,328),n(408,95,328),n(412,95,256)];class tb{constructor(){this.P=100,this.g=144,this.A=24,this.N=.6,this.W=n(164,96,80),this.J=m(),this.H=m(),this.K=m(),this.aa=!1,this.Y=m(),this.Z=!1,this.X=m(),this.M=0,this.G=.3,this.U=this.O=1,this.T=.6,this.S=.8,this.D=.18,this.C=.8,this.m=.2,this.F=n(0,1.5,0),this.B=1.5}}let Q=new tb;Q.Z=!0,Q.M=3,p(Q.J,160,80,32),p(Q.H,144,72,24),p(Q.K,144,72,24),p(Q.X,200,224,255);let R=new tb;R.P=25,R.g=100,R.A=32,R.N=.8,R.aa=!0,R.Z=!0,R.M=2,p(R.Y,0,180,0),p(R.J,72,72,72),p(R.H,164,96,80),p(R.K,64,64,64),p(R.X,192,192,192);let S=new tb;S.g=36,S.A=12,S.N=1.2,S.G=.4,S.O=1.5,S.U=1.5,S.T=1.2,S.S=1.3,S.D=.24,S.C=1.4,S.m=.3,p(S.W,128,128,128),p(S.J,32,32,32),p(S.H,32,32,32),p(S.K,32,32,32),p(S.F,0,2,0),S.B=2;let T=new tb;T.P=600,T.g=36,T.A=6,T.N=2,T.G=.6,T.O=4,T.U=5,T.T=2.4,T.S=3.2,T.D=.6,T.C=2,T.m=.8,T.M=1,p(T.W,160,125,120),p(T.J,32,32,32),p(T.H,32,32,32),p(T.K,32,32,32),p(T.F,0,2.5,0),T.B=2.5;let ub=new tb;p(ub.F,0,0,0),ub.B=.3;class vb{constructor(t,a){this.duration=t,this.g=a||this}}let wb=new vb(-1),xb=new vb(.2,wb),yb=new vb(.2,xb),zb=new vb(.1,yb),Ab=new vb(.1,zb),Bb=new vb(2,zb),Cb=new vb(.5,wb),Db=new vb(1,new vb(1,wb));function Eb(t){Ca(w,Da,t.B),t.g[0]+=r*t.C.g*w[0],t.g[2]+=r*t.C.g*w[2],Fb(t)}function Gb(t){let a=Math.hypot(t.g[0],t.g[2]);.6>a?(t.g[0]=0,t.g[2]=0):(t.g[0]-=r*t.g[0]/a*72,t.g[2]-=r*t.g[2]/a*72)}function Hb(t,a){t.A=a,t.N=Ib}function Fb(t){let a=Math.hypot(t.g[0],t.g[2]);a>t.C.A&&(t.g[0]=t.g[0]/a*t.C.A,t.g[2]=t.g[2]/a*t.C.A)}class U{constructor(t,a,e,i){this.C=t,this.U=t===Q?1:2,this.F=!0,this.D=t.P,this.m=n(a,e,i),this.g=m(),this.J=.1,this.B=2*Math.random()*Math.PI,this.M=0,this.A=wb,this.H=this.N=-1,this.T=m(),this.S=m(),this.K=!1,this.G=1,this.P=m(),this.O=0}update(){if(this.C!==ub&&(this.g[0]-=3*r*this.g[0],this.g[2]-=3*r*this.g[2],this.g[1]-=120*r),this.C!==Q&&this.A!==Cb){var t=W.m[0]-this.m[0],a=W.m[1]-this.m[1];let i=W.m[2]-this.m[2],n=Math.hypot(t,i);if(8>Math.abs(a)&&64>n&&(this.K=!0),10<Math.abs(a)&&(this.K=!1),this.K){if(this.C===R||this.C===T)if(this.C===T&&400>this.D&&5>this.O){var e=sb[this.O];a=e[0]-this.m[0],e=e[2]-this.m[2],2>Math.hypot(a,e)?(T.g=36,T.A=6,T.B=2.5,this.O++):(T.g=288,T.A=40,T.B=.01,this.B=Math.atan2(a,e),Eb(this))}else this.B=Math.atan2(t,i),3<n?Eb(this):(Gb(this),this.A===wb&&Hb(this,Ab));this.C===S&&(this.A===Db?Gb(this):(this.B=Math.atan2(t,i),64<n?Eb(this):(Gb(this),this.A===wb&&(Hb(this,Db),va(this.P,W.m,Q.F)))))}}ya(this.m,this.m,this.g),Jb(this),this.A!==wb&&Ib-this.N>this.A.duration&&(this.A===Db&&(wa((t=new U(ub,this.m[0],this.m[1]+2.5,this.m[2])).g,this.P,t.m),za(t.g,t.g),xa(t.g,t.g,120),t.B=Math.atan2(t.g[0],t.g[2]),X.push(t)),Hb(this,this.A.g))}}let Kb=n(0,1,2),Lb=n(1,0,2),Mb=n(2,0,1);function Jb(t){let a=Math.abs(t.g[0]),e=Math.abs(t.g[1]),i=Math.abs(t.g[2]);a>i?(a>e?(Nb(t),Ob(t)):(Ob(t),Nb(t)),Pb(t)):(i>e?(Pb(t),Ob(t)):(Ob(t),Pb(t)),Nb(t))}function Nb(t){0>t.g[0]?Qb(t,Kb,n(-2,1.5,-1),n(-2,2.5,1),3):Qb(t,Kb,n(2,1.5,-1),n(2,2.5,1),-2)}function Ob(t){0>t.g[1]?Qb(t,Lb,n(-.8,1-r*t.g[1],-.8),n(.8,0,.8),1):Qb(t,Lb,n(-.8,0,-.8),n(.8,3,.8),1)}function Pb(t){0<t.g[2]?Qb(t,Mb,n(-1,1.5,2),n(1,2.5,2),-2):Qb(t,Mb,n(-1,1.5,-2),n(1,2.5,-2),3)}function Qb(t,a,e,i,n){e[0]=t.m[0]+e[0]|0,e[1]=t.m[1]+e[1]|0,e[2]=t.m[2]+e[2]|0,i[0]=t.m[0]+i[0]|0,i[1]=t.m[1]+i[1]|0,i[2]=t.m[2]+i[2]|0,wa(w,i,e),w[0]=sa(w[0]),w[1]=sa(w[1]),w[2]=sa(w[2]);let r=m();for(r[a[0]]=e[a[0]];;){for(r[a[1]]=e[a[1]];;){for(r[a[2]]=e[a[2]];;){var h=r[0],s=r[1],o=r[2];if(0!==(lb(h,s,o)?0:fb.data[32768*(o/4|0)+128*(0|s)+(h/4|0)]))return t.m[a[0]]=r[a[0]]+n,t.g[a[0]]=0,1===a[0]&&(t.M=0),void(t.C===ub&&(t.F=!1));if(r[a[2]]===i[a[2]])break;r[a[2]]+=w[a[2]]}if(r[a[1]]===i[a[1]])break;r[a[1]]+=w[a[1]]}if(r[a[0]]===i[a[0]])break;r[a[0]]+=w[a[0]]}}function Rb(t,a,e,i){var n=e[0]-t[0];let r=e[1]-t[1];t=e[2]-t[2];var h=i[0]-e[0];let s=i[1]-e[1],o=i[2]-e[2];return s/=e=Math.hypot(h,s,o),o/=e,i=(h/=e)*h+s*s+o*o,0>(h=2*(h*n+s*r+o*t))*h-4*i*(n=n*n+r*r+t*t-a*a)?null:(a=(-1*h+Math.sqrt(Math.pow(h,2)-4*i*n))/(2*i),n=(-1*h-Math.sqrt(Math.pow(h,2)-4*i*n))/(2*i),0<=a&&a<e||0<=n&&n<e?Math.min(a,n):0<=a&&a<e?a:0<=n&&n<e?n:null)}class Sb{constructor(t,a,e,i,r){this.g=n(t,a,e),this.m=n(i,0,r)}}function Tb(t,a){if(t.H=Ib,t.D-=a,0>=t.D){t.D=0,t.F=!1,t===W?(Ub=!0,Vb=new Wb,Xb("First Death!")):Xb("First Kill!"),t===Yb&&(Ub=!0,Vb=new Zb,Xb("Winner!")),a=t.m[0];for(var e=t.m[1]+1.5,i=t.m[2],n=x(192,0,0),r=0;80>r;r++)rb(a,e,i,2,n,40)}else{for(a=t.m[0],e=t.m[1]+1.5,i=t.m[2],n=x(192,0,0),r=0;20>r;r++)rb(a,e,i,1,n,10);t!==W&&(Hb(t,Cb),t===Yb&&(Hb(W,Cb),wa(W.g,W.m,Yb.m),za(W.g,W.g),xa(W.g,W.g,100),W.g[1]=30))}p(t.g,0,0,0)}function $b(){return Math.random()-.5}let ac=document.querySelectorAll("canvas"),bc=ac[0],cc=ac[1],N=cc.getContext("2d"),K=new Va,G=bc.getContext("webgl",{alpha:!1});window.addEventListener("resize",dc,!1),dc(),cc.addEventListener("mousedown",(function(t){da.resume(),I.buttons[t.button].I=!0})),cc.addEventListener("mouseup",(function(t){I.buttons[t.button].I=!1})),cc.addEventListener("mousemove",(function(t){I.x=t.pageX,I.y=t.pageY,Ub||(W.B=ra(W.B+I.sensitivity*t.movementX),W.J=ra(W.J+I.sensitivity*t.movementY))})),document.addEventListener("pointerlockchange",(function(){I.g=document.pointerLockElement===cc||document.mozPointerLockElement===cc}));let X=[],W=null,Yb=null,ec=[];for(let t=0;20>t;t++)ec.push(new Sb(512*Math.random(),150,128,120,0)),ec.push(new Sb(512*Math.random(),160,384,-120,0)),ec.push(new Sb(128,170,512*Math.random(),0,-120)),ec.push(new Sb(384,180,512*Math.random(),0,120));let fb=new nb,fc=.001*Date.now(),Ib=0,r=.0167,gc=!1,Ub=!0,eb=!1,hc=m(),ic=m(),jc=null,Qa=new gb;function Xb(t){localStorage["OS13kTrophy,⚔️,MINIPUNK,"+t]=""}P(0,0,0,511,0,511,10);for(let t=0;512>t;t+=64)ob(t,0,0,t+63,128,31),ob(t,0,480,t+63,128,511);for(let t=0;512>t;t+=64)ob(0,0,t,31,128,t+63),ob(480,0,t,511,128,t+63);for(let t=0;512>t;t+=128)for(let a=0;512>a;a+=128){let e=96;256<=t&&480>=t&&128<=a&&384>a?e=24:P(t+14,25,a+14,t+114,25,a+114,9),P(t+24,0,a+24,t+103,Math.max(24,e-8),a+103,10),ob(t+20,0,a+20,t+59,e,a+59),ob(t+20,0,a+68,t+59,e,a+107),ob(t+68,0,a+20,t+107,e,a+59),ob(t+68,0,a+68,t+107,e,a+107)}P(0,0,0,511,24,103,10),P(104,0,152,151,24,231,10),P(344,0,152,407,24,231,10),P(152,0,280,511,24,511,10),P(0,24,0,511,24,511,10),P(120,24,444,124,24,468,0);for(let t=0;24>t;t++)P(120,1,380+4*t,124,1+t,384+4*t,10);P(152,24,280,232,92,511,10),P(280,25,142,511,25,354,3),ob(380,24,160,511,60,352,10,0),ob(420,84,180,511,60,332,10,0),ob(430,144,200,511,60,312,10,0),P(418,110,292,419,133,299,24),P(418,110,284,419,117,291,24),P(418,94,276,419,133,283,24),P(418,94,260,419,133,267,24),P(418,126,252,419,133,259,24),P(418,94,252,419,101,259,24),P(418,94,244,419,133,251,24),P(418,110,228,419,133,235,24),P(418,110,220,419,117,227,24),P(418,94,212,419,133,219,24);for(let t=0;24>t;t++)P(284+4*t,24,236,288+4*t,24+t,276,10);P(380,48,236,380,58,276,0),P(384,48,164,504,83,351,0);for(let t=384;504>t;t+=4)for(let a=164;351>a;a+=4)mb(t,48,a,0==((t>>2)+(a>>2))%2?29:10);P(496,48,164,496,84,351,28),P(496,48,164,504,48,351,28),P(496,49,168,496,58,175,0);for(let t=184;328>=t;t+=24)if(256!==t)for(let a=388;504>=a;a+=24)P(a,48,t,a+1,83,t+1,29);P(500,49,176,507,100,330,0);for(let t=0;38>t;t++){let a=Math.min(49+t,84);P(500,a,176+4*t,507,a,179+4*t,28)}P(420,84,324,504,84,330,28),P(420,85,324,504,100,330,0);{var Y=fb;let t=0,a=6;for(let e=0;128>e;e++)for(let i=0;256>i;i++)for(let n=0;128>n;n++){if(0===Y.data[t++])continue;let r=4*n,h=i,s=4*e;O(Y,r,h+1,s)&&a++,O(Y,r,h-1,s)&&a++,O(Y,r,h,s+4)&&a++,O(Y,r,h,s-1)&&a++,O(Y,r-1,h,s)&&a++,O(Y,r+4,h,s)&&a++}Y.g=new Sa(35044,a);{var kc=Y.g,lc=x(124,173,203);let t=n(-2048,2048,2048),a=n(2048,2048,2048),e=n(2048,2048,-2048),i=n(-2048,2048,-2048),r=n(-2048,-2048,2048),h=n(2048,-2048,2048),s=n(2048,-2048,-2048),o=n(-2048,-2048,-2048);E(kc,[t,a,e,i],lc),E(kc,[o,s,h,r],lc),E(kc,[a,t,r,h],lc),E(kc,[i,e,s,o],lc),E(kc,[t,i,o,r],lc),E(kc,[e,a,h,s],lc)}t=0;for(let a=0;128>a;a++)for(let e=0;256>e;e++)for(let i=0;128>i;i++){let r=Y.data[t++];if(0===r)continue;let h=ib(r),s=4*i,o=e,c=4*a,b=s+4,f=o+1,l=c+4,g=n(s,f,l),u=n(b,f,l),m=n(b,f,c),w=n(s,f,c),d=n(s,o,l),M=n(b,o,l),v=n(b,o,c),A=n(s,o,c);O(Y,s,o+1,c)&&E(Y.g,[g,u,m,w],h),O(Y,s,o-1,c)&&E(Y.g,[A,v,M,d],h),O(Y,s,o,c+4)&&E(Y.g,[u,g,d,M],h),O(Y,s,o,c-1)&&E(Y.g,[w,m,v,A],h),O(Y,s-1,o,c)&&E(Y.g,[g,w,A,d],h),O(Y,s+4,o,c)&&E(Y.g,[m,u,M,v],h)}Ra(Y.g)}function mc(t){for(gc=gc||I.g,I.g||(Ub=!0),t*=.001,r=Math.max(.004,t-fc),fc=t,Ub||(Ib+=r),t=0;256>t;t++)Ua(H[t]);for(t=0;3>t;t++)Ua(I.buttons[t]);if((t=Qa.C).H=0,t.g=0,t.C=0,I.g||Vb||(Vb=new nc),Vb)Vb.update();else{if(!Ub){if(Ca(w,Da,W.B),W.A===Bb){wa(W.g,jc.m,W.m);var a=W.g;t=a[0];var e=a[1];a=a[2],4>(t=Math.sqrt(t*t+e*e+a*a))?(p(W.g,0,0,0),Hb(W,zb)):(za(W.g,W.g),xa(W.g,W.g,180))}else W.A!==Cb&&(t=!0,(H[38].I||H[87].I||H[90].I)&&(W.g[0]+=r*Q.g*w[0],W.g[2]+=r*Q.g*w[2],t=!1),(H[40].I||H[83].I)&&(W.g[0]-=r*Q.g*w[0],W.g[2]-=r*Q.g*w[2],t=!1),(H[37].I||H[65].I||H[81].I)&&(W.g[0]-=.5*r*Q.g*w[2],W.g[2]+=.5*r*Q.g*w[0],t=!1),(H[39].I||H[68].I)&&(W.g[0]+=.5*r*Q.g*w[2],W.g[2]-=.5*r*Q.g*w[0],t=!1),Fb(W),t&&Gb(W),1===H[32].V&&1>=W.M&&(W.g[1]=30,W.M++,qa(oa)),W.A===wb&&1===I.buttons[0].V&&(eb&&jc?(W.G=2,Hb(W,Bb)):(W.G=1,Hb(W,Ab)),qa(pa)));for(eb=I.buttons[2].I,t=0;t<X.length;t++)X[t].update();var i=!0;for(t=e=0;i&&10>e;)for(i=!1,e++,a=0;a<X.length-1;a++){var h=X[a];if(h.F)for(var s=a+1;s<X.length;s++){var o=X[s];if(o.F&&!(h.m[1]>o.m[1]+2.5||o.m[1]>h.m[1]+2.5)){var c=h.m[0]-o.m[0],b=h.m[2]-o.m[2],f=Math.hypot(c,b);2>f&&(o.C===ub?h.C===Q&&(Tb(h,50),o.F=!1,t++):(i=c-c/f*2,b-=b/f*2,h.m[0]-=i,h.m[2]-=b,o.m[0]+=i,o.m[2]+=b,f=ta(h.g),c=ta(o.g),p(h.g,-i,0,-b),p(o.g,i,0,b),Jb(h),Jb(o),ua(h.g,f),ua(o.g,c),i=!0))}}}for(e=0;e<X.length;e++)if((a=X[e]).F&&a.A===zb)for(h=0;h<X.length;h++)e!==h&&(!(s=X[h]).F||a.U===s.U||.01<1-Math.max(0,Math.min(1,(Ib-s.H)/.5))||a.m[1]>s.m[1]+2.5||s.m[1]>a.m[1]+2.5||(va(o=ta(s.m),o,s.C.F),null!==Rb(o,s.C.B,a.T,a.S)&&(Tb(s,25*a.G),t++)));for(0<t&&qa(na),t=X.length-1;0<=t;t--)X[t].F||X.splice(t,1);if(W.D<Q.P&&5<Ib-W.H&&(W.D=Math.min(100,W.D+33*r)),W.A!==Bb&&eb){for(t=W.m,e=64,a=null,h=1;h<X.length;h++)s=X[h],(o=Math.hypot(s.m[0]-t[0],s.m[1]-t[1],s.m[2]-t[2]))<e&&(va(i=ta(s.m),i,s.C.F),null!==Rb(i,s.C.B,hc,ic)&&(e=o,a=s));jc=a}}(t=Qa.g).C=W.J,t.D=W.B,t.m[0]=.5*t.m[0]+.5*W.m[0],t.m[1]=.5*t.m[1]+.5*(W.m[1]+3.5),t.m[2]=.5*t.m[2]+.5*W.m[2],Aa(w,Da,t.C),Ca(w,w,t.D),xa(w,w,-1),e=eb?3:16,e=null!==(a=jb(t.m,e))?.9*a:e,t.B=e<t.B?e:.9*t.B+(1-.9)*e,t.A[0]=t.m[0]+t.B*w[0],t.A[1]=t.m[1]+t.B*w[1],t.A[2]=t.m[2]+t.B*w[2],t.g[0]=.5*t.g[0]+.5*t.A[0],t.g[1]=.5*t.g[1]+.5*t.A[1],t.g[2]=.5*t.g[2]+.5*t.A[2],eb&&(ua(hc,t.g),xa(w,w,-64),va(ic,hc,w))}for(t=0;t<ec.length;t++)ya((e=ec[t]).g,e.g,e.m),-100>e.g[0]&&(e.g[0]+=712),612<e.g[0]&&(e.g[0]-=712),-100>e.g[2]&&(e.g[2]+=712),612<e.g[2]&&(e.g[2]-=712);for(i=0;i<X.length;i++)if(b=(t=X[i]).C,f=Ka(),b===ub)La(f,0,0,0,.3,.3,.3),A(f,f,t.B),y(f,f,t.m),Pa(f,x(255,0,0));else{e=Ib/b.N%1*2*Math.PI,a=.01<Math.hypot(t.g[0],t.g[2]);var l=1-Math.max(0,Math.min(1,(Ib-t.H)/.5));h=m(),a&&p(h,0,.2*(.5+Math.sin(2*e)),0),c=Ia(b.W,l);var g=Ia(b.Y,l),u=Ia(b.J,l);s=Ia(b.H,l),o=Ia(b.K,l),l=Ia(b.X,l);var d=b.U/2,v=b.O/2,P=b.T/2,C=b.S/2,B=b.C/2,T=b.C+b.O,O=t.m[0],k=t.m[1],D=t.m[2],F=(Ib-t.N)/t.A.duration,U=0;t.A===Ab?U=F:t.A===zb?U=1-2*F:t.A===yb?U=-1:t.A===xb&&(U=-1+F),La(f,0,0,0,b.G,b.G,b.G),Oa(f,1,.9),A(f,f,.2*U),A(f,f,t.B),y(f,f,n(O,k+T+b.G,D)),y(f,f,h),Pa(f,c),t.C===R&&(La(f,0,0,0,.15,.3,.3),y(f,f,n(0,2.2,-.1)),A(f,f,.2*U),A(f,f,t.B),y(f,f,n(O,k,D)),y(f,f,h),Pa(f,g)),t.C===S&&(La(f,0,0,0,.2,.2,.2),y(f,f,n(0,3.3,.3)),A(f,f,.2*U),A(f,f,t.B),y(f,f,n(O,k,D)),y(f,f,h),Pa(f,Ha(0,1,t.A===Db?.5+.5*F:.5))),La(f,0,0,0,d,v,P),Oa(f,1,.8),A(f,f,U),A(f,f,t.B),y(f,f,n(O,k+b.C+v,D)),y(f,f,h),Pa(f,u),0<b.M&&(La(f,0,0,0,.1,c=b.M/2,.1),Oa(f,.2,1),y(f,f,n(0,c,0)),t.A===Ab?(Ma(f,f,.5*F),A(f,f,2.5)):t.A===zb?(Ma(f,f,.5+F),A(f,f,2.5-4*F),y(f,f,n(0,0,F))):t.A===yb?(Ma(f,f,1.5),A(f,f,-1.5),y(f,f,n(0,0,1))):t.A===xb&&(Ma(f,f,1.5-1.5*F),A(f,f,4*F-1.5),y(f,f,n(0,0,1-F))),y(f,f,a?n(.7+.05*Math.sin(e),0,.2-.2*Math.sin(e)):n(.8,0,.2)),A(f,f,t.B),y(f,f,n(O,k+1,D)),y(f,f,h),t!==Yb&&Pa(f,l),ua(t.T,f[4]),ua(t.S,f[0])),La(f,0,0,0,b.D,C,b.D),Oa(f,.7,1),y(f,f,n(0,-C,0)),Na(f,f,-.1),a&&t.A===wb&&Ma(f,f,-.6*Math.sin(e)),y(f,f,n(-d-.1,T,0)),A(f,f,U),A(f,f,t.B),y(f,f,n(O,k,D)),y(f,f,h),Pa(f,s),La(f,0,0,0,b.D,C,b.D),Oa(f,.7,1),y(f,f,n(0,-C,0)),Na(f,f,.1),a&&t.A===wb&&Ma(f,f,.6*Math.sin(e)),y(f,f,n(d+.1,T,0)),A(f,f,U),A(f,f,t.B),y(f,f,n(O,k,D)),y(f,f,h),Pa(f,s),La(f,0,0,0,b.m,B,b.m),Oa(f,.8,1),y(f,f,n(0,-B,0)),a&&Ma(f,f,Math.sin(e)),y(f,f,n(.9*-d+b.m,b.C,0)),A(f,f,t.B),y(f,f,n(O,k,D)),y(f,f,h),Pa(f,o),La(f,0,0,0,b.m,B,b.m),Oa(f,.8,1),y(f,f,n(0,-B,0)),a&&Ma(f,f,-Math.sin(e)),y(f,f,n(.9*d-b.m,b.C,0)),A(f,f,t.B),y(f,f,n(O,k,D)),y(f,f,h),Pa(f,o)}for(t=Ka(),e=0;e<ec.length;e++)La(t,(a=ec[e]).g[0],a.g[1],a.g[2],4,2,4),Pa(t,x(255,128,64));for(t=qb.length-1;0<=t;t--)a=(e=qb[t]).$/e.duration*e.size,E(Qa.C,[n(e.x+$b()*a,e.y+$b()*a,e.z+$b()*a),n(e.x+$b()*a,e.y+$b()*a,e.z+$b()*a),n(e.x+$b()*a,e.y+$b()*a,e.z+$b()*a),n(e.x+$b()*a,e.y+$b()*a,e.z+$b()*a)],e.color),0>=--e.$?qb.splice(t,1):(e.x+=e.ba,e.y+=e.ca,e.z+=e.da);for(Ra((t=Qa).C),t.B.bind(),t.N.bind(),db(t),t.G[0].bind(),db(t),t.A.bind(),G.enable(3042),G.blendFunc(1,1),e=t.G[0],a=t.G[1],h=0;5>h;h++)a.bind(),G.clearColor(0,0,0,0),G.clear(16384),G.disable(2929),G.activeTexture(33984),G.bindTexture(3553,e.g),G.uniform1i(t.A.C,0),G.uniform1i(t.A.B,h),s=t,G.bindBuffer(34962,s.H),G.vertexAttribPointer(s.A.A,2,5126,!1,0,0),G.bindBuffer(34962,s.J),G.vertexAttribPointer(s.A.m,2,5126,!1,0,0),G.drawArrays(4,0,6),s=e,e=a,a=s;K.bind(),t.K.bind(),G.clearColor(0,0,0,1),G.clear(16384),G.disable(3042),G.activeTexture(33984),G.bindTexture(3553,t.N.g),G.activeTexture(33985),G.bindTexture(3553,e.g),G.uniform1i(t.K.A,0),G.uniform1i(t.K.m,1),G.bindBuffer(34962,t.H),G.vertexAttribPointer(t.A.A,2,5126,!1,0,0),G.bindBuffer(34962,t.J),G.vertexAttribPointer(t.A.m,2,5126,!1,0,0),G.drawArrays(4,0,6),N.clearRect(0,0,K.width,K.height),N.textBaseline="top",Vb?Vb.L():(N.font="bold 24px 'Arial Black'",N.textAlign="left",N.fillStyle="#fff",N.fillRect(30,30,W.D,20),N.fillStyle="#888",N.fillRect(30+W.D,30,100-W.D,20),M(Ib.toFixed(1),K.width-100,30),eb&&(t=K.g,e=K.m,a=jc?"#f00":"#fff",hb(t+1,e+1,"#000"),hb(t,e,a||"#fff"))),requestAnimationFrame(mc)}function oc(){X=[],W=new U(Q,384,2,128),W.B=1.5*Math.PI,X.push(W);for(var t=128;256>=t;t+=128)for(var a=128;256>=a;a+=128)X.push(new U(R,a,2,t)),256>a&&X.push(new U(R,a+6,2,t+6));for(t=128;384>=t;t+=128)for(a=128;256>=a;a+=128)128===a&&384===t||(X.push(new U(R,a-6,26,t)),X.push(new U(R,a+6,26,t)),X.push(new U(R,a,26,t-6)),X.push(new U(R,a,26,t+6)),256<=a&&X.push(new U(S,a,26,t)));X.push(new U(S,414,85,208)),X.push(new U(S,414,85,232)),X.push(new U(S,414,85,280)),X.push(new U(S,414,85,304)),Yb=new U(T,460,49,256),Yb.B=1.5*Math.PI,Yb.G=4,X.push(Yb),X.push(new U(S,400,49,236)),X.push(new U(S,400,49,276)),X.push(new U(S,460,49,236)),X.push(new U(S,460,49,276)),Ib=0,Ub=!1,Vb=new pc,cc.requestPointerLock()}function qc(){Ub=!1,Vb=null,cc.requestPointerLock()}function rc(t){ka.gain.value=t}function sc(t){ma.gain.value=t}function tc(t){I.sensitivity=.002*t}function uc(){let t=fc/100%1*2*Math.PI;Qa.g.set(200-200*Math.cos(t),300,256+256*Math.sin(t),.3*Math.PI,.5*Math.PI+t)}function vc(){N.fillStyle="rgba(0,0,0,0.5)",N.fillRect(0,0,K.width,K.height)}function wc(){N.font="bold 80px 'Arial Black'",M("MINIPUNK",10,10)}ha((t=>(t=>{qa(t,!0)})(ca(t)))),ja({a:8,b:0,d:0,e:1,f:160,h:8,i:0,j:0,k:1,l:99,n:60,o:50,q:200,r:6800,s:125,t:4,u:11025,v:254,w:0,x:13,y:5,z:0},134,(t=>{na=t})),ja({a:7,b:3,d:140,e:1,f:196,h:6,i:0,j:9,k:0,l:0,n:0,o:927,q:1584,r:4611,s:192,t:4,u:948,v:196,w:0,x:0,y:0,z:1},138,(t=>{oa=t})),ja({a:7,b:3,d:140,e:1,f:196,h:6,i:0,j:9,k:0,l:0,n:0,o:4611,q:1403,r:11102,s:192,t:4,u:948,v:196,w:0,x:0,y:0,z:1},144,(t=>{pa=t})),requestAnimationFrame(mc);class xc{constructor(t,a,e,i,n,r){this.B=t,this.x=a,this.y=e,this.w=i,this.A=n,this.m=r,this.enabled=!0,this.g=!1}update(){this.g=!1,this.enabled&&I.x>this.x&&I.y>this.y&&I.x<this.x+this.w&&I.y<this.y+this.A&&(this.g=!0,1===I.buttons[0].R&&this.m())}L(){M(this.B,this.x,this.y,this.enabled?this.g?"#ff0":"#fff":"#888")}}class yc{constructor(t,a,e,i,n,r){this.x=t,this.y=a,this.w=e,this.g=i,this.m=n,this.A=r}update(){if(I.buttons[0].I&&I.x>this.x&&I.y>this.y&&I.x<this.x+this.w&&I.y<this.y+this.g){let t=(I.x-this.x)/this.w;.01<Math.abs(this.m-t)&&(this.m=t,this.A(t))}}L(){let t=this.w*this.m|0,a=this.w-t;N.fillStyle="#fff",N.fillRect(this.x,this.y,t,this.g),N.fillStyle="#888",N.fillRect(this.x+t,this.y,a,this.g)}}class zc{update(){1===I.buttons[0].R&&(Vb=new nc),gc||uc()}L(){vc(),wc(),N.font="bold 40px 'Arial Black'",M("CLICK TO START",60,150)}}class nc{constructor(){this.g=[new xc("NEW GAME",60,150,300,40,oc),new xc("CONTINUE",60,210,300,40,qc)],this.m=[new yc(220,318,200,20,ka.gain.value,rc),new yc(220,358,200,20,ma.gain.value,sc),new yc(220,398,200,20,I.sensitivity/.002,tc)]}update(){this.g[1].enabled=gc,this.g.forEach((t=>t.update())),this.m.forEach((t=>t.update())),gc||uc()}L(){vc(),wc(),N.font="bold 40px 'Arial Black'",this.g.forEach((t=>t.L())),M("SETTINGS",60,270),M("KEY GUIDE",60,450),N.font="20px 'Arial Black'",M("MUSIC",110,320),M("SOUND",110,360),M("MOUSE",110,400),this.m.forEach((t=>t.L())),M("WASD - MOVE",110,500),M("LEFT CLICK - ATTACK",110,540),M("RIGHT CLICK - ZOOM",110,580),M("SPACEBAR - JUMP",110,620),M("TIP: TRY ZOOM + ATTACK",110,680)}}class pc{constructor(){this.g=fc}update(){1===I.buttons[0].R&&(Vb=null);let t=Math.max(0,Math.min(20,fc-this.g-1));Qa.g.set(450-20*t,54+.25*t*t,256,.005*t*Math.PI,.5*Math.PI)}L(){N.font="bold 32px 'Arial Black'",M("THE EVIL 404 MEGACORP",20,K.height-300),M("THREATENS TO TAKE OVER THE INTERNET",20,K.height-250),M("YOU MUST STOP THEM",20,K.height-175),21<fc-this.g&&M("CLICK TO CONTINUE",20,K.height-100)}}class Wb{constructor(){this.g=fc}update(){1<fc-this.g&&1===I.buttons[0].R&&(document.exitPointerLock(),Vb=new nc,gc=!1)}L(){vc(),wc(),N.font="bold 40px 'Arial Black'",M("YOU DIED",60,150),M("CLICK TO CONTINUE",60,250)}}class Zb{constructor(){this.g=fc}update(){2<fc-this.g&&1===I.buttons[0].R&&(document.exitPointerLock(),Vb=new nc,gc=!1)}L(){vc(),wc(),N.font="bold 40px 'Arial Black'",M("YOU DEFEATED THE EVIL 404 MEGACORP",60,150),M("THE INTERNET SURVIVES!",60,200),M("HTTP 200 OK  (☞ﾟヮﾟ)☞",60,300),M("FINAL TIME: "+Ib.toFixed(1),60,400),M("CLICK TO CONTINUE",60,500)}}let Vb=new zc;function dc(){K.width=window.innerWidth,K.height=window.innerHeight,K.g=K.width/2|0,K.m=K.height/2|0,bc&&(bc.width=K.width,bc.height=K.height),cc&&(cc.width=K.width,cc.height=K.height)}</script>