<!doctype html><title>Lost Path - js13kGames</title><style>*{padding:0;margin:0}#heading{text-align:center;margin-top:15px;margin-bottom:15px;font-size:xx-large}#heading{margin:0 auto}#canvas{background:#99afa3;display:block;margin:0 auto}#c{background:#eee;display:block;margin:0 auto}#timerel{background:#eee;display:block;margin:0 auto}</style><style>.modal{display:none;position:fixed;z-index:1;padding-top:20%;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#000;background-color:rgba(0,0,0,.4)}.modal-content{position:relative;background-color:#fefefe;margin:auto;padding:0;border:1px solid #888;width:30%;box-shadow:0 4px 8px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19);-webkit-animation-name:animatetop;-webkit-animation-duration:.4s;animation-name:animatetop;animation-duration:.4s}@-webkit-keyframes animatetop{from{top:-300px;opacity:0}to{top:0;opacity:1}}@keyframes animatetop{from{top:-300px;opacity:0}to{top:0;opacity:1}}.close{color:#fff;float:right;font-size:28px;font-weight:700}.close:focus,.close:hover{color:#000;text-decoration:none;cursor:pointer}.modal-header{padding:2px 16px;background-color:#41d9f4;color:#fff;text-align:center;height:50%}.modal-body{padding:2px 16px}.modal-footer{padding:2px 16px;background-color:#f4bc42;color:#fff;text-align:center;height:50%}</style><section><div id=wrapper style=margin-left:auto;margin-right:auto><h1 id=heading style=background-color:#a59e9a;text-decoration-style:solid;color:#f8f8f8;width:40%;margin-top:0;margin-bottom:10px>Lost Path</h1><div id=maze><p style=text-align:center;margin-bottom:10px>Find the way out of Maze in 30 seconds!<div id=c style=margin-left:auto;margin-right:auto;margin-bottom:10px;text-align:center;width:10%;font-size:large></div><canvas id=canvas width=523 height=523 style=margin-left:auto;margin-right:auto>This text is displayed if your browser does not support HTML5 Canvas.</canvas><div id=timerel style=margin-left:auto;margin-right:auto;margin-top:0;text-align:center;width:15%;font-size:large></div></div><div id=myModal class=modal><div class=modal-content><div class=modal-header><span class=close>Ã—</span><h2 class=gamehead></h2></div><div class=modal-footer><h2 id=demo style=cursor:pointer>Play Again?</h2></div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];function myFunction(){document.location.reload()}function startTimer(t,i){var s,e,n,o=Date.now();function h(){playing&&(s=t-((Date.now()-o)/1e3|0),e=(e=s/60|0)<10?"0"+e:e,n=(n=s%60|0)<10?"0"+n:n,i.textContent="Game ends in "+e+":"+n,s<=0&&(i.textContent="Game Over",o=Date.now()+1e3,playing=!1,modelfungo()))}h(),setInterval(h,1e3)}function doKeyDown(t){var i=!1;if(playing){switch(t.keyCode){case 38:case 87:m.moveup("canvas"),i=!0;break;case 40:case 83:m.movedown("canvas"),i=!0;break;case 37:case 65:m.moveleft("canvas"),i=!0;break;case 39:case 68:m.moveright("canvas"),i=!0}m.checker("canvas")&&(playing=!1),console.log(m.getMoves())}i&&t.preventDefault()}modelfungo=function(){console.log("func called"),modal.style.display="block",x=document.querySelector(".gamehead"),x.textContent="Game Over"},modelfunwin=function(){console.log("func called"),modal.style.display="block",x=document.querySelector(".gamehead"),x.textContent="Congrats! You Win"},document.getElementById("demo").addEventListener("click",myFunction),span.onclick=function(){modal.style.display="none"},window.onclick=function(t){t.target==modal&&(modal.style.display="none")},window.onload=function(){twominutes=30,x=document.querySelector("#timerel"),startTimer(twominutes,x)},playing=!0,window.addEventListener("keydown",doKeyDown,!0);var dsd=function(t){this.N=t,this.P=new Array(this.N),this.R=new Array(this.N),this.init=function(){for(var t=0;t<this.N;t++)this.P[t]=t,this.R[t]=0},this.union=function(t,i){var s=this.find(t),e=this.find(i);this.R[s]>this.R[e]?(this.R[s]=this.R[e]+1,this.P[s]=e):(this.R[e]=this.R[s]+1,this.P[e]=s)},this.find=function(t){return t==this.P[t]?t:(this.P[t]=this.find(this.P[t]),this.P[t])}};function random(t,i){return t+Math.random()*(i-t)}function randomChoice(t){return t[Math.round(random(0,t.length-1))]}var maze=function(t,s){this.N=t,this.M=s,this.S=25,this.moves=0,this.Board=new Array(2*this.N+1),this.EL=new Array,this.vis=new Array(2*this.N+1),this.delay=2,this.x=1,this.init=function(){for(var t=0;t<2*this.N+1;t++)this.Board[t]=new Array(2*this.M+1),this.vis[t]=new Array(2*this.M+1);for(t=0;t<2*this.N+1;t++)for(var i=0;i<2*this.M+1;i++)this.Board[t][i]=t%2||i%2?t%2?i%2?" ":"|":"-":"+",this.vis[t][i]=0},this.add_edges=function(){for(var t=0;t<this.N;t++)for(var i=0;i<this.M;i++)t!=this.N-1&&this.EL.push([[t,i],[t+1,i],1]),i!=this.M-1&&this.EL.push([[t,i],[t,i+1],1])},this.h=function(t){return t[1]*this.M+t[0]},this.randomize=function(t){for(var i=0;i<t.length;i++){var s=Math.floor(387*Math.random())%t.length,e=t[s];t[s]=t[i],t[i]=e}return t},this.breakwall=function(t){var i=t[0][0]+t[1][0]+1,s=t[0][1]+t[1][1]+1;this.Board[i][s]=" "},this.gen_maze=function(){this.EL=this.randomize(this.EL);var t=new dsd(this.M*this.M);t.init();var i=this.h([0,0]),s=this.h([this.N-1,this.M-1]);this.Board[1][0]=" ",this.Board[2*this.N-1][2*this.M]=" ";for(var e=0;e<this.EL.length;e++){var n=this.h(this.EL[e][0]),o=this.h(this.EL[e][1]);if(t.find(i)==t.find(s))t.find(n)==t.find(i)&&t.find(o)==t.find(i)||t.find(n)!=t.find(o)&&(t.union(n,o),this.breakwall(this.EL[e]),this.EL[e][2]=0);else{if(t.find(n)==t.find(o))continue;t.union(n,o),this.breakwall(this.EL[e]),this.EL[e][2]=0}}},this.draw_canvas=function(t){this.canvas=document.getElementById(t);var i=this.S;if(temp=[],this.canvas.getContext){this.ctx=this.canvas.getContext("2d"),this.Board[1][0]="$";for(var s=0;s<2*this.N+1;s++)for(var e=0;e<2*this.M+1;e++)" "!=this.Board[s][e]?(this.ctx.fillStyle="#0b052d",this.ctx.fillRect(i*s,i*e,i,i)):s<5&&e<5&&temp.push([s,e]);x=randomChoice(temp),this.Board[x[0]][x[1]]="&",this.ctx.fillStyle="#c4192a",this.ctx.fillRect(i*x[0],i*x[1],i,i)}},this.checkPos=function(t){for(var i=0;i<2*this.N+1;i++)for(var s=0;s<2*this.M+1;s++)if("&"==this.Board[i][s])return[i,s]},this.moveclear=function(t,i){var s=this.S;this.ctx=this.canvas.getContext("2d"),this.ctx.fillStyle="#e27158",this.ctx.fillRect(s*t,s*i,s,s),this.Board[t][i]=" "},this.move=function(t,i){var s=this.S;this.ctx=this.canvas.getContext("2d"),this.ctx.fillStyle="#c4192a",this.ctx.fillRect(s*t,s*i,s,s),this.Board[t][i]="&"},this.moveup=function(t){cord=this.checkPos(t);this.S;i=cord[0],j=cord[1],j-=1,j<0||j>2*this.M||" "==this.Board[i][j]&&(this.moveclear(i,j+1),this.move(i,j),this.moves+=1)},this.movedown=function(t){cord=this.checkPos(t);this.S;i=cord[0],j=cord[1],j+=1,j<0||j>2*this.M||" "==this.Board[i][j]&&(this.moveclear(i,j-1),this.move(i,j),this.moves+=1)},this.moveleft=function(t){cord=this.checkPos(t);this.S;i=cord[0],j=cord[1],i-=1,i<0||i>2*this.N||" "==this.Board[i][j]&&(this.moveclear(i+1,j),this.move(i,j),this.moves+=1)},this.moveright=function(t){cord=this.checkPos(t);this.S;i=cord[0],j=cord[1],i+=1,i<0||i>2*this.N||" "==this.Board[i][j]&&(this.moveclear(i-1,j),this.move(i,j),this.moves+=1)},this.checker=function(t){return cord=this.checkPos(t),i=cord[0],j=cord[1],19==i&&20==j||1==i&&0==j?(modelfunwin(),1):0},this.getMoves=function(){return this.moves}};function drawMoves(){document.getElementById("c").innerHTML="Moves: "+m.getMoves()}m=new maze(10,10),m.init(),m.add_edges(),m.gen_maze(),m.draw_canvas("canvas"),setInterval(drawMoves,100)</script><script></script></section>