<!doctype html><title>Sorades 13k - js13kGames 2012</title><style>*{color:#eee;font-family:Consolas,monospace}body,html{background:#111;height:100%;margin:0;overflow:hidden;padding:0;text-align:center;width:100%}a:hover{background:#fff;color:#000;text-decoration:none}#container,canvas{display:block;margin:auto;max-width:100%}canvas{background:#000}#desc{background:#10161c;background-image:-webkit-linear-gradient(#000 -8px,#10161c 16px);background-image:-moz-linear-gradient(#000 -8px,#10161c 16px);background-image:-o-linear-gradient(#000 -8px,#10161c 16px);background-image:linear-gradient(#000 -8px,#10161c 16px);border:1px solid #234563;border-radius:0 0 .4em .4em;border-top-style:none;margin:0 auto;max-width:990px;padding:.6em 16px;text-shadow:0 1px 2px #000}.note{font-size:smaller;margin:0 0 1.5em}svg{height:24px;width:24px;vertical-align:top}#tweet{background:#10161c;background-color:rgba(18,24,31,.9);border:1px solid #234563;border-radius:.4em;bottom:3em;box-shadow:0 0 1em #000;box-sizing:border-box;left:50%;line-height:1.6em;margin:0 0 0 -20em;padding:1.5em 0;position:absolute;width:40em}form{margin:0;padding:0}input{background:#1a2a39;background-color:rgba(50,100,145,.2);border:1px solid #234563;font-size:100%;width:37em}@media all and (min-height:784px){#container{padding-top:8px}}@media all and (min-height:800px){#container{padding-top:16px}}@media all and (min-height:832px){#container{padding-top:32px}}@media all and (min-height:896px){#container{padding-top:64px}}@media all and (min-height:1024px){#container{padding-top:128px}}@media all and (min-width:1176px){#container{width:1176px}canvas{float:right;margin-left:16px}#desc{background-image:-webkit-linear-gradient(left,#10161c 136px,#000 160px);background-image:-moz-linear-gradient(left,#10161c 136px,#000 160px);background-image:-o-linear-gradient(left,#10161c 136px,#000 160px);background-image:linear-gradient(left,#10161c 136px,#000 160px);border-radius:.4em;border-top-style:solid;margin:0;padding-top:1.5em;text-align:right}.note,a.logo{display:block}a.logo:hover{background:0 0}svg{height:64px;margin:0 86px -32px -32px;width:64px}}</style><div id=container><canvas width=1024 height=768 id=c>This arcade space shooter requires a modern HTML5 enabled web browser and JavaScript enabled. It was made for the <a href=https://js13kgames.com/ >js13kGames</a> competition in 2012.</canvas><p id=desc><a href=http://maettig.com/code/canvas/starship-sorades-13k/ rel=bookmark title="Permalink to this game">SORADES 13K</a> is a <a href="http://www.gramambo.de/index.php?option=com_content&view=article&id=4&Itemid=5#Spiele">Gramambo game</a> by <a href=http://maettig.com/ >Thiemo Mättig</a> <span class=note>(<a href=https://twitter.com/maettig>@maettig</a>).</span> <span class=note>SFX by <a href=http://www.sven-gramatke.de/ >Sven Gramatke</a>.</span> <span class=note>Press X to fire, <a href=# onclick="return toggleFullscreen()">F for fullscreen</a>.</span> <span class=note>Licensed under <a href=http://creativecommons.org/licenses/by-sa/3.0/de/ >CC-BY-SA-3.0-DE</a>.</span> <span class=note>Contains <a href=https://github.com/mneubrand/jsfxr>jsfxr</a> by <a href=https://twitter.com/markusneubrand>Markus Neubrand</a>, based on <a href=http://code.google.com/p/as3sfxr/ >as3sfxr</a> (<a href=http://www.apache.org/licenses/LICENSE-2.0>Apache License 2.0</a>) by <a href=http://tomvian.com/ >Thomas Vian</a>, based on <a href=http://www.drpetter.se/project_sfxr.html>sfxr</a> (<a href=http://www.opensource.org/licenses/mit-license.php>MIT License</a>) by <a href=http://www.drpetter.se/ >Tomas Pettersson</a>.</span> <a href=http://www.gramambo.de/ class=logo><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 8 8"><g fill=#08F stroke=#000><path d="M7 3s1 1 0 2L5 7S4 8 3 7L1 5S0 4 1 3l2-2s1-1 2 0z" stroke-width=.3 /><path d="M4 4h.5c1 0 1 1.6 0 1.6h-.9c-1.5 0-1.5-3.2 0-3.2h1.9"/></g></svg></a></div><p id=tweet><a href="https://twitter.com/share?text=I+played+SORADES+13K.&url=http://maettig.com/code/canvas/starship-sorades-13k/&via=maettig" target=twitter>Click here to tweet your score</a><br>or blog it:<br><input value="I played SORADES 13K: http://maettig.com/code/canvas/starship-sorades-13k/"></p><script>var it=!0,ht=!1;function e(){this.T=function(t){t=t.split(","),this.b=0|t[0],this.o=+t[1]||0,this.k=+t[2]||0,this.M=+t[3]||0,this.l=+t[4]||0,this.f=+t[5]||0,this.B=+t[6]||0,this.D=+t[7]||0,this.h=+t[8]||0,this.O=+t[9]||0,this.J=+t[10]||0,this.p=+t[11]||0,this.z=+t[12]||0,this.L=+t[13]||0,this.Q=+t[14]||0,this.C=+t[15]||0,this.q=+t[16]||0,this.r=+t[17]||0,this.e=+t[18]||0,this.S=+t[19]||0,this.H=+t[20]||0,this.A=+t[21]||0,this.R=+t[22]||0,this.I=+t[23]||0}}var q,s,j,n,N,d,c,w,i,at=new function(){var o,U,l,r,s,n,d,i,c,w,D,L,K,G,g,f,u,m,y,J,H,Q,v,V,k,Y,X,b,p,Z,M,x,T,I,_,P,S,F,B,C,$,A,R,tt,W,et,E,z,O,q,j,N;this.G=new e,this.reset=function(t){var e=this.G;if(u=100/(e.f*e.f+.001),y=100/(e.B*e.B+.001),J=1-.01*e.D*e.D*e.D,H=1e-6*-e.h*e.h*e.h,0==e.b&&(p=.5-.5*e.L,Z=5e-5*-e.Q),Y=0<e.p?1-.9*e.p*e.p:1+10*e.p*e.p,X=0,b=1==e.z?0:2e4*(1-e.z)*(1-e.z)+32,t){for(e.U=ht,U=e.I*e.I,l=e.b,e.k<.01&&(e.k=.01),(t=e.o+e.k+e.l)<.18&&(e.o*=t=.18/t,e.k*=t,e.l*=t),G=e.M,g=0,Q=e.B,B=1!=e.e||0!=e.A,A=C=0,R=.1*e.e*e.e*e.e,tt=1+1e-4*e.S,W=1-(.8<(W=5/(1+20*e.H*e.H)*(.01+R))?.8:W),et=1!=e.e,E=0,z=.1*e.A*e.A,O=1+3e-4*e.R,v=0,V=.01*e.J*e.J,k=.5*e.O,n=s=r=0,c=1e5*e.k*e.k,w=1e5*e.l*e.l+10,d=i=1e5*e.o*e.o,this.F=i+c+w|0,D=1/i,L=1/c,K=1/w,T=0!=e.q||0!=e.r,I=1020*e.q*e.q,e.q<0&&(I=-I),_=.2*e.r*e.r*e.r,S=0,F=F||Array(1024),q=q||Array(32),t=0;t<1024;t++)F[t]=0;for(t=0;t<32;t++)q[t]=2*Math.random()-1;x=(M=0)==e.C?0:parseInt(2e4*(1-e.C)*(1-e.C))+32}},this.N=function(t){var e=at.F;o=ht;for(var i=0;i<e;i++){if(o)return i;if(0!=x&&++M>=x&&(M=0,this.reset(ht)),0!=b&&++X>=b&&(b=0,u*=Y),(u*=J+=H)>y&&(u=y,0<Q)&&(o=it),m=u,0<k&&(v+=V,m=u*(1+Math.sin(v)*k)),(m=parseInt(m))<8&&(m=8),0==l&&((p+=Z)<0?p=0:.5<p&&(p=.5)),++n>d)switch(n=0,++s){case 1:d=c;break;case 2:d=w}switch(s){case 0:r=n*D;break;case 1:r=1+2*(1-n*L)*G;break;case 2:r=1-n*K;break;case 3:r=0,o=it}T&&(I+=_,(P=parseInt(I))<0?P=-P:1023<P&&(P=1023)),B&&0!=O&&((z*=O)<1e-5?z=1e-5:.1<z&&(z=.1));for(var h=j=0;h<8;h++){if(++g>=m&&(g-=m,3==l))for(var a=0;a<32;a++)q[a]=2*Math.random()-1;switch(l){case 0:N=g/m<p?.5:-.5;break;case 1:N=1-g/m*2;break;case 2:N=(N=(f=.5<(f=g/m)?6.28318531*(f-1):6.28318531*f)<0?1.27323954*f+.405284735*f*f:1.27323954*f-.405284735*f*f)<0?.225*(N*-N-N)+N:.225*(N*N-N)+N;break;case 3:N=q[Math.abs(parseInt(32*g/parseInt(m)))]}B&&($=C,(R*=tt)<0?R=0:.1<R&&(R=.1),A=et?(A+(N-C)*R)*W:(C=N,0),E+=(C+=A)-$,N=E*=1-z),T&&(F[1023&S]=N,N+=F[S-P+1024&1023],S=S+1&1023),j+=N}j*=.125*r*U,t[i]=1<=j?32767:j<=-1?-32768:32767*j|0}return e}},g=1024,f=768,U=0,D=0,u=0,m=0,L=[],K=1.5,y=512,v=672,k=0,b=0,p=0,M=100,G=0,x=0,J=0,T=0,H={},I=[],P=(I.a=8,I.P=35,[]),S=[],F=(S.a=16,S.images={},[]),B=(F.a=16,F.frame=0,[]);function a(){var t;return document.fullscreenElement||document.mozFullScreen||document.webkitIsFullScreen?document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():(t=document.getElementsByTagName("canvas")[0]).requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT),ht}function C(t,e){t+=k/2,e+=b/2,I.push({b:I.P,x:y+Math.random()*t,y:v+Math.random()*e,m:t,j:e})}function A(t,e,i){P.push({x:t,y:e,size:i||64*Math.random(),g:Math.random(),l:.4*Math.random()-.2,alpha:1})}function Q(t){var e,i;i||(e=Math.random(),i=.9<e?"+":.8<e?"E":.7<e?"S":.6<e?"B":"€"),S.images[i]||(S.images[i]=o(function(t,e){e.shadowBlur=6,e.fillStyle="#FFC",e.shadowColor=e.fillStyle,e.arc(t.width/2,t.height/2,t.width/2-e.shadowBlur,0,2*Math.PI),e.fill(),e.fillStyle="rgba(0,0,0,.5)",e.font="bold "+(t.width/1.8|0)+"px sans-serif",e.textAlign="center",e.textBaseline="middle",e.fillText(i,t.width/2,t.height/2)},2*S.a)),S.push({h:i,x:t.x||512,y:t.y||-S.a,m:t.m?t.m/2:2*Math.random()-1,j:1+(t.j?t.j/2:0)})}function h(t,e,i){var h=t.y+(t.u||0)|0;return h<-192?ht:(i&&(e>Math.PI&&(e-=2*Math.PI),(e=i<e?i:e)<-i)&&(e=-i),i=3+c/2,F.push({x:0|t.x,y:h,m:e?Math.sin(e)*i:0,j:e?Math.cos(e)*i:i,e:0}),it)}function V(t,e){(t<0||t>=B.v.length)&&(t=Math.random()*B.v.length|0),(t=B.v[t]).a||(t.a=64),t.c||(t.c=o(t.s,2*t.a)),t.t(e)}function R(t){O[t]&&O[t][O[t].h]&&(O[t][O[t].h++].play(it),O[t].h%=O[t].length)}function o(t,e,i,h){return(h=h||document.createElement("canvas")).width=0|e,h.height=0|(i||e),t(h,h.getContext("2d")),h}function r(t,e,i){t.beginPath(),t.moveTo(e-10,i),t.lineTo(e,i+10),t.lineTo(e+10,i),t.lineTo(e,i-10),t.closePath(),t.globalCompositeOperation="lighter",t.shadowColor="#FFF",t.stroke()}function W(a,t){s=o(function(t,e){e.shadowBlur=12,e.font="bold "+(.9*t.height-2*e.shadowBlur|0)+"px Consolas,monospace",e.textAlign="center",e.textBaseline="middle";var i=t.width-2*e.shadowBlur;e.fillStyle="#62F",e.shadowColor="#FFF";for(var h=2;h--;)e.fillText(a,t.width/2,t.height/2,i);for(e.fillStyle="#FFF",e.shadowBlur=3,e.shadowColor="rgba(0,0,0,.5)",e.lineWidth=3,e.lineJoin="round",e.strokeStyle="#FFF",e.shadowColor="#000",e.strokeText(a,t.width/2,t.height/2,i),e.globalAlpha=.2,e.globalCompositeOperation="source-atop",e.fillStyle="#62F",h=0;h<t.height;h+=3)e.fillRect(0,h,t.width,1)},640,128,s),j=(g-s.width)/2|0,n=16,N=1,u=t||90,t<0&&(u=0,E.globalAlpha=1,E.drawImage(s,j,n))}window.toggleFullscreen=a;for(var l=10;l--;)L[l]=o(function(t,e){e.shadowBlur=6,e.font="bold "+(1.3*t.width|0)+"px Consolas,monospace",e.textAlign="center",e.textBaseline="middle",e.lineWidth=2,e.lineJoin="round",e.shadowColor="#9F0",e.strokeText(l,t.width/2,t.height/2),e.strokeStyle="#9F0",e.strokeText(l,t.width/2,t.height/2)},32,48);var Y=o(function(t,e){e.fillStyle="#000",e.fillRect(0,0,t.width,t.height),e.globalCompositeOperation="lighter",e.beginPath();for(var i=6;i--;)e.moveTo(t.width*(i+1)/4,-t.height),e.lineTo(t.width*(i-2)/4,2*t.height),e.moveTo(-t.width,t.height*(i-2)/4),e.lineTo(2*t.width,t.height*(i+1)/4);e.lineWidth=3,e.shadowBlur=6,e.strokeStyle="#111",e.shadowColor="#444",e.stroke(),e.shadowBlur=0,e.globalAlpha=.25,e.translate(t.width,0),e.scale(-1,1),e.drawImage(t,0,0)},256),X=o(function(t,e){e.beginPath();for(var i=5;i--;)e.moveTo(t.width/2,t.height*(1+i)/10),e.lineTo(t.width*(11+i)/16,t.height*(15-i)/16),e.lineTo(t.width*(5-i)/16,t.height*(15-i)/16),e.closePath();e.lineWidth=3,e.shadowBlur=6,e.strokeStyle="#9F0",e.shadowColor=e.strokeStyle,e.stroke(),e.stroke(),e.beginPath(),e.moveTo(t.width/2-10,t.height/2),e.lineTo(t.width/2,t.height/2+10),e.lineTo(t.width/2+10,t.height/2),e.lineTo(t.width/2,t.height/2-10),e.closePath(),e.strokeStyle="#FFF",e.shadowColor=e.strokeStyle,e.stroke(),e.stroke()},64,128),Z=o(function(t,e){e.lineWidth=18,e.shadowBlur=18,e.strokeStyle="#000",e.shadowColor="#CF0",e.beginPath(),e.arc(t.width/2,t.height/2,t.width/2+e.lineWidth/2-8,0,2*Math.PI),e.stroke(),e.lineWidth=34,e.shadowBlur=0,e.beginPath(),e.arc(t.width/2,t.height/2,t.width/2+e.lineWidth/2-8,0,2*Math.PI),e.stroke()},128);I.c=o(function(t,e){e.beginPath(),e.moveTo(t.width/2,6),e.lineTo(t.width-6,t.height/2),e.lineTo(t.width/2,t.height-6),e.lineTo(6,t.height/2),e.closePath(),e.lineWidth=3,e.shadowBlur=6,e.strokeStyle="#CF0",e.shadowColor=e.strokeStyle,e.stroke(),e.stroke()},2*I.a),P.c=o(function(t,e){e.fillStyle="#F63",e.shadowBlur=6,e.shadowColor=e.fillStyle;for(var i=e.shadowBlur,h=5;h--;)e.fillRect(i,i,t.width-2*i,t.height-2*i);e.lineWidth=.3,e.strokeStyle="#FC6",i*=.8,e.beginPath(),e.moveTo(i,i),e.lineTo(t.width-i,t.height-i),e.moveTo(t.width-i,i),e.lineTo(i,t.height-i),e.stroke()},16),F.images=[];for(var _=8;_--;)F.images.push(o(function(t,e){e.translate(t.width/2,t.height/2),e.rotate(Math.PI/-2*_/8),e.translate(-t.width/2,-t.height/2),e.beginPath(),e.shadowBlur=6;var i=e.shadowBlur;e.moveTo(t.width/2,i),e.lineTo(t.width-i,t.height/2),e.lineTo(t.width/2,t.height-i),e.lineTo(i,t.height/2),e.closePath(),e.lineWidth=3,e.strokeStyle="#62F",e.shadowColor=e.strokeStyle,e.stroke(),e.stroke()},2*F.a));B.v=[{s:function(t,e){e.lineWidth=3,e.miterLimit=128,e.shadowBlur=6,e.strokeStyle="#62F",e.shadowColor=e.strokeStyle;for(var i=5;i--;){var h=t.width*(6-i)/11,a=t.height*(6-i)/20,o=t.width*(11-i)/26,l=t.height*(1+i)/9;e.moveTo(t.width/2,t.height*(12-i)/12-e.shadowBlur),e.lineTo(t.width-h,a),e.lineTo(t.width-o,l),e.lineTo(o,l),e.lineTo(h,a),e.closePath()}e.stroke(),e.stroke(),r(e,t.width/2,t.height/2)},t:function(t){for(var e=2+c;e--;){var i=96+Math.random()*f/4|0;B.push({c:this.c,x:this.a+(g-2*this.a)*Math.random()|0,y:t?i+t:-this.a,n:i,f:this.a,g:0,i:Math.PI/32,e:12+c,b:120*Math.random()|0,d:this.d})}},d:function(t){this.b=600/(c+4)|0,this.b<5&&(this.b=5),h(this,t,this.i)&&R(19)}},{s:function(t,e){e.lineWidth=3,e.shadowBlur=6,e.strokeStyle="#62F",e.shadowColor=e.strokeStyle;for(var i=5;i--;){var h=t.width*(5-i)/14+e.shadowBlur,a=t.height*(16-i)/17,o=t.width*(8-i)/22,l=t.height*(1+i)/11;e.moveTo(t.width/2,t.height*(6-i)/12),e.lineTo(t.width-h,a),e.lineTo(t.width-o,l),e.lineTo(o,l),e.lineTo(h,a),e.closePath()}e.stroke(),e.stroke(),r(e,t.width/2,t.height/2)},t:function(t){for(var e=1+c;e--;){var i=96+Math.random()*f/4|0;B.push({c:this.c,x:this.a+(g-2*this.a)*Math.random()|0,y:t?i+t:-this.a,n:i,f:this.a,g:0,i:Math.PI/16,e:20+2*c,b:120*Math.random()|0,d:this.d})}},d:function(t){this.b=600/(c+4)|0,this.b<5&&(this.b=5),t>Math.PI&&(t-=2*Math.PI),(h(this,(t=(t=t>this.i?this.i:t)<-this.i?-this.i:t)+.1)||h(this,t-.1))&&R(20)}},{s:function(t,e){e.lineWidth=3,e.miterLimit=32,e.shadowBlur=6,e.strokeStyle="#62F",e.shadowColor=e.strokeStyle,e.beginPath();for(var i=0;i<2*Math.PI;i+=Math.PI/4){var h=Math.PI/12,a=t.width/2-e.shadowBlur,o=t.width/2+Math.sin(i+h)*a,l=t.width/2+Math.cos(i+h)*a;i?e.lineTo(o,l):e.moveTo(o,l),h-=Math.PI/1.45,e.lineTo(t.width/2+Math.sin(i+h)*a,t.width/2+Math.cos(i+h)*a)}for(e.closePath(),i=0;i<2*Math.PI;i+=Math.PI/4)a=.4*t.width,o=t.width/2+Math.sin(i)*a,l=t.width/2+Math.cos(i)*a,i?e.lineTo(o,l):e.moveTo(o,l);e.closePath(),e.stroke(),e.stroke(),r(e,t.width/2,t.height/2)},t:function(t){for(var e=-1152/c|0,i=c;i--;)B.push({c:this.c,x:256+512*Math.random()|0,y:i*e+(t||-this.a),n:384,f:this.a,g:0,i:32*Math.PI,e:28+3*c,b:30*Math.random()|0,w:Math.random()*Math.PI,d:this.d})},d:function(){this.K||(this.K=5,this.b=540/(c+8)|0),this.K--,this.b<5&&(this.b=5),this.w+=.2;for(var t,e=Math.PI/8;e<2*Math.PI;e+=Math.PI)t=h(this,this.w+e);t&&R(18)}},{a:Math.max(g,f)/8|0,s:function(t,e){e.lineWidth=3,e.miterLimit=32,e.shadowBlur=6,e.strokeStyle="#62F",e.shadowColor=e.strokeStyle,e.beginPath();for(var i=7;i--;){e.moveTo(t.width/2,t.height*i/12+e.shadowBlur);var h=t.width*(11+i)/18-e.shadowBlur,a=t.height*(25-i)/28,o=(e.lineTo(h,a),t.width*(16-i)/16-e.shadowBlur),l=t.height*(i+4)/28;e.lineTo(o,l),e.lineTo(t.width/2,t.height*(i+30)/36-e.shadowBlur),e.lineTo(t.width-o,l),e.lineTo(t.width-h,a),e.closePath()}e.stroke(),e.stroke(),r(e,t.width/2,.8*t.height)},t:function(t){var e=t||3*-this.a,i=36+4*c;B.push({c:this.c,x:512,y:e,u:.6*this.a|0,n:this.a+8,f:this.a,g:0,i:Math.PI/8,e:i,b:60+30*Math.random()|0,d:this.d});for(var h=1.3*this.a,a=.4*h,o=a,l=1;l<c;l++)t=this.a+16-h+64*Math.sqrt(l),l%2&&(t+=this.a*(.7/l+.3)),B.push({c:this.c,x:512-o|0,y:e,u:h/2*.6|0,n:0|t,f:h/2,g:0,i:Math.PI/8,e:i/2|0,b:60+30*Math.random()|0,d:this.d}),B.push({c:this.c,x:512+o|0,y:e,u:h/2*.6|0,n:0|t,f:h/2,g:0,i:Math.PI/8,e:i/2|0,b:60+30*Math.random()|0,d:this.d}),o+=a,a*=.84,h*=.9},d:function(t){this.b=180*Math.random()|0,h(this,t)&&R(12)}}];var $=document.getElementById("tweet"),t=($.style.display="none",document.getElementsByTagName("canvas")[0]),E=(t.width=g,t.height=f,t.getContext("2d")),z=(E.fillStyle="#000",E.fillRect(0,0,t.width,t.height),W("LOADING",-1),W("SORADES 13K",180),[]),tt={27:80,32:88,48:88,50:40,52:37,53:40,54:39,56:38,65:37,67:88,68:39,73:38,74:37,75:40,76:39,83:40,87:38,89:88,90:88};function et(){if(!d){--J<=0&&z[88]&&(J=x?4:6,C(0,-16),1<x&&(C(-8,-8),C(8,-8),2<x)&&(C(0,16),3<x)&&(C(-16,0),C(16,0)),R(2<x?16:0<x?0:15)),p*=.8,z[37]&&(g<=y&&0<k&&(k=0),k-=K,p=.8*(p+1)-1),z[38]&&(f<=v&&0<b&&(b=0),b-=K),z[39]&&(y<0&&k<0&&(k=0),k+=K,p=.8*(p-1)+1),z[40]&&(v<0&&b<0&&(b=0),b+=K),y<0&&k<0?y=0:g<=y&&0<k&&(y=g-1),v<0&&b<0?v=0:f<=v&&0<b&&(v=767),y+=k,v+=b,k*=.9,b*=.9;for(var t=Y.width,e=U%t-t|0;e<f;e+=t)for(var i=0;i<g;i+=t)E.drawImage(Y,i,e);for(U+=2,e=m,i=984;e;)E.drawImage(L[e%10],i,4),e=e/10|0,i-=24;for(u&&(E.globalAlpha=u<90?u/90:1,E.drawImage(s,j,n),E.globalAlpha=1,u--,n+=N),e=12,i=I.length;i--;){E.drawImage(I.c,I[i].x-I.a|0,I[i].y-I.a|0),I[i].x+=I[i].m,I[i].y+=I[i].j;for(var h=F.length;h--;)if(I[i].y<F[h].y+e&&I[i].y>F[h].y-e&&I[i].x<F[h].x+e&&I[i].x>F[h].x-e){--F[h].e<0&&(m+=5,.75<Math.random()&&Q(F[h]),A(F[h].x,F[h].y),F[h].y=2*f,R(11)),I[i].b=0;break}(--I[i].b<0||I[i].y<-H.a||I[i].x<-I.a||I[i].x>=g+I.a||I[i].y>=f+I.a)&&I.splice(i,1)}for(D&&(E.fillStyle="rgba(255,255,255,"+D--/5/2+")",E.fillRect(0,0,g,f)),E.globalCompositeOperation="lighter",i=S.length;i--;){if(v<S[i].y+60&&v>S[i].y-60&&y<S[i].x+25&&y>S[i].x-25){switch(m+=10,S[i].h){case"+":x<4?(x++,R(5)):R(6);break;case"E":M<100?(w=180,R(5)):R(6),100<(M+=5)&&(M=100);break;case"S":T+=45e3/(T+300)|0,R(3);break;case"B":for(h=B.length;h--;)B[h].e--;for(h=Math.min(F.length,5);h--;)A(F[h].x,F[h].y);F.length=0,D=5,R(13);break;default:R(7)}S[i].y=2*f}E.drawImage(S.images[S[i].h],S[i].x-S.a|0,S[i].y-S.a|0),S[i].x+=S[i].m,S[i].y+=S[i].j,(S[i].y>=f+S.a||S[i].x<-S.a||S[i].x>=g+S.a||S[i].y<-S.a)&&S.splice(i,1)}for(h=F.length;h--;)v<F[h].y+60&&v>F[h].y-60&&y<F[h].x+25&&y>F[h].x-25&&(r=void 0,T?R(2):(G<0&&(M-=10,G=10),(M=M<0?0:M)||d?M<25&&R(17):(A(y,v,512),A(y,v,1024),d=it,W("GAME OVER",-1),q&&window.clearInterval(q),o="I survived "+((c||1)-1)+" waves and got "+m+" points in SORADES 13K:",l=/^\w+:\/\/maettig\.com/.test(location.href)?location.href:"http://maettig.com/code/canvas/starship-sorades-13k/",$.getElementsByTagName("A")[0].href="https://twitter.com/share?text="+encodeURIComponent(o)+"&url="+encodeURIComponent(l)+"&via=maettig",$.style.display="",(r=$.getElementsByTagName("INPUT")[0]).value=o+" "+l,r.onfocus=function(){this.select()},r.focus(),R(14)),R(1),2<x&&x--,w=180),A(F[h].x,F[h].y),F[h].y=2*f),E.drawImage(F.images[F.frame],F[h].x-F.a|0,F[h].y-F.a|0),F[h].x+=F[h].m,F[h].y+=F[h].j,(F[h].y>=f+F.a||F[h].x<-F.a||F[h].x>=g+F.a||F[h].y<-f)&&F.splice(h,1);for(F.frame++,F.frame%=F.images.length,G--,i=P.length;i--;)E.save(),E.globalAlpha=P[i].alpha,E.translate(P[i].x,P[i].y),E.rotate(P[i].g),E.drawImage(P.c,-P[i].size/2,-P[i].size/2,P[i].size,P[i].size),E.restore(),P[i].size+=16,P[i].g+=P[i].l,P[i].alpha-=.1,P[i].alpha<.1&&P.splice(i,1);E.save(),E.translate(y,v),E.rotate(10*p/180*Math.PI),E.drawImage(X,-32,-64),E.restore(),T&&((30<T||.5<Math.random())&&E.drawImage(Z,y-64+.5|0,v-64+.5|0),--T||R(4)),B.length||u||(m+=1e3*(c||0),c=(c||0)+1,V(0,-576),V(1,-1152),V(2,-768),V(3,-1728),W("WAVE "+c),R(8)),i=B.length;t:for(;i--;){e=B[i].y+(B[i].u||0),t=Math.atan((B[i].x-y)/(e-v)),v<=e&&(t+=Math.PI);var h=(t+Math.PI)%(2*Math.PI)-Math.PI,a=B[i].i||0;for(a<h?h=a:h<-a&&(h=-a),B[i].g=(29*B[i].g-h)/30,E.save(),E.translate(B[i].x,e),E.rotate(B[i].g),E.drawImage(B[i].c,-B[i].f,B[i].y-e-B[i].f,2*B[i].f,2*B[i].f),E.restore(),e=.6*B[i].f,h=I.length;h--;)if(I[h].y<B[i].y+e&&I[h].y>B[i].y-e&&I[h].x>B[i].x-e&&I[h].x<B[i].x+e){if(m+=1,A(I[h].x,I[h].y),I.splice(h,1),--B[i].e<=0){m+=100,Q(B[i]),A(B[i].x,B[i].y,2*B[i].f),A(B[i].x,B[i].y,3*B[i].f),B.splice(i,1),R(10);continue t}R(9);break}B[i].y<B[i].n&&(B[i].y+=B[i].j||1),--B[i].b<0&&B[i].d(t)}E.globalCompositeOperation="source-over",w&&(i=y-31.5|0,e=v+62.5|0,t=512*M/100|0,E.globalAlpha=w/180,E.fillStyle="#000",E.fillRect(i,e,64,4),E.fillStyle="rgb("+(255<t?512-t:255)+","+(255<t?255:t)+",0)",E.fillRect(i,e,64*M/100|0,4),E.lineWidth=.5,E.strokeStyle="#FFF",E.strokeRect(i,e,64,4),E.globalAlpha=1,25<=M)&&w--}var o,l,r}document.onkeydown=function(t){var e;t=(t||event).keyCode,z[tt[t]||t]=it,z[70]?a():z[77]?i?(X=i,i=null):((e=new Image).onload=function(){i=X,X=e},e.src="sorades.jpg"):z[80]&&M?(d=!d)&&!u&&W("PAUSE",-1):d&&z[88]&&(d=ht)},document.onkeyup=function(t){t=(t||event).keyCode,z[tt[t]||t]=ht};var O="8|0,,.167,.1637,.1361,.7212,.0399,-.363,,,,,,.1314,.0517,,.0154,-.1633,1,,,.0515,,.2 4|3,.0704,.0462,.3388,.4099,.1599,,.0109,-.3247,.0006,,-.1592,.4477,.1028,.1787,,-.0157,-.3372,.1896,.1628,,.0016,-.0003,.5 4|3,.1,.3899,.1901,.2847,.0399,,.0007,.1492,,,-.9636,,,-.3893,.1636,-.0047,.7799,.1099,-.1103,.5924,.484,.1547,1 1|1,,.0398,,.4198,.3891,,.4383,,,,,,,,.616,,,1,,,,,.5 1|1,.1299,.27,.1299,.4199,.1599,,.4383,,,,-.6399,,,-.4799,.7099,,,1,,,,,.5 1|0,.43,.1099,.67,.4499,.6999,,-.2199,-.2,.5299,.5299,-.0399,.3,,.0799,.1899,-.1194,.2327,.8815,-.2364,.43,.2099,-.5799,.5 1|0,.2,.1099,.0733,.0854,.14,,-.1891,.36,,,.9826,,,.4642,,-.1194,.2327,.8815,-.2364,.0992,.0076,.2,.5 2|0,.09,.1099,.0733,.0854,.1099,,-.1891,.827,,,.9826,,,.4642,,-.1194,.2327,.8815,-.2364,.0992,.0076,.8314,.5 1|1,.1,1,.1901,.2847,.3199,,.0007,.1492,,,-.9636,,,-.3893,.1636,-.0047,.6646,.9653,-.1103,.5924,.484,.1547,.6 8|3,.1,.3899,.1901,.2847,.0399,,.0007,.1492,,,-.9636,,,-.3893,.1636,-.0047,.6646,.9653,-.1103,.5924,.484,.1547,.4 4|3,.2,.1899,.4799,.91,.0599,,-.2199,-.2,.5299,.5299,-.0399,.3,,.0799,.1899,-.1194,.2327,.8815,-.2364,.43,.2099,-.5799,.5 4|3,,.3626,.5543,.191,.0731,,-.3749,,,,,,,,,,,1,,,,,.4 4|1,.071,.3474,.0506,.1485,.5799,.2,-.2184,-.1405,.1681,,-.1426,,.9603,-.0961,,.2791,-.8322,.2832,.0009,,.0088,-.0082,.3 1|3,.05,.3365,.4591,.4922,.1051,,.015,,,,-.6646,.7394,,,,,,1,,,,,.7 1|1,1,.09,.5,.4111,.506,.0942,.1499,.0199,.8799,.1099,-.68,.0268,.1652,.62,.6999,-.0399,.4799,.5199,-.0429,.0599,.8199,-.4199,.7 8|2,,.1199,.15,.1361,.5,.0399,-.363,-.4799,,,,,.1314,.0517,,.0154,-.1633,1,,,.0515,,.2 8|2,,.98,.4699,.07,.7799,.0399,-.28,-.4799,.2399,.1,,.36,.1314,.0517,,.0154,-.1633,1,,.37,.0399,.54,.1 1|0,.9705,.0514,.5364,.5273,.4816,.0849,.1422,.205,.7714,.1581,-.7685,.0822,.2147,.6062,.7448,-.0917,.4009,.6251,.1116,.0573,.9005,-.3763,.3 4|0,.0399,.1362,.0331,.2597,.85,.0137,-.3976,,,,,,.2099,-.72,,,,1,,,,,.3 4|0,,.2863,,.3048,.751,.2,-.316,,,,,,.4416,.1008,,,,1,,,.2962,,.3 4|0,,.3138,,.0117,.7877,.1583,-.3391,-.04,,.0464,.0585,,.4085,-.4195,,-.024,-.0396,1,-.0437,.0124,.02,.0216,.3 1|0,1,.8799,.3499,.17,.61,.1899,-.3,-.18,.3,.6399,-.0279,.0071,.8,-.1599,.5099,-.46,.5199,.25,.0218,.49,.4,-.2,.3".split(" ");window.setTimeout(function(){for(var t=O.length;t--;){var e=O[t].split("|",2);if(O[t]=[],O[t].h=0,"function"==typeof Audio)try{var i,h=e[1],a=(at.G.T(h),at.reset(it),h=new Uint8Array(4*((at.F+1)/2|0)+44),2*at.N(new Uint16Array(h.buffer,44)));(o=new Uint32Array(h.buffer,0,44))[0]=1179011410,o[1]=36+a,o[2]=1163280727,o[3]=544501094,o[4]=16,o[5]=65537,o[6]=44100,o[7]=88200,o[8]=1048578,o[9]=1635017060;for(var a=44+(o[10]=a),o=0,l="data:audio/wav;base64,";o<a;o+=3){var r=h[o]<<16|h[o+1]<<8|h[o+2];l+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[r>>18]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[r>>12&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[r>>6&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[63&r]}for(o-=a,i=l.slice(0,l.length-o)+"==".slice(0,o);e[0]--;)O[t].push(new Audio(i))}catch(t){}}q=window.setInterval(et,33),R(21)},0)</script>