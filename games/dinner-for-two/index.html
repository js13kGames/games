<title>Dinner for Two - js13kGames 2025</title><meta name=viewport content="width=device-width,maximum-scale=1,user-scalable=no"><style>body{margin:0;background-color:#111;display:flex;justify-content:center;align-items:center;touch-action:none}#c{display:block;touch-action:none;width:calc(min(100%,100vh * 1.6667))}#p{display:none;position:absolute;border:.4vh solid #fff;border-radius:1vh;font-family:monospace;text-transform:uppercase;font-size:4vh;text-align:center;color:#fff;padding:2vh 6vh;cursor:pointer}#p:hover{background-color:#444}</style><div id=p>play</div><canvas id=c></canvas><script id=j>var t,e;const n={$:t=>document.querySelector(t),t:Object.keys,o:(t,e)=>n.t(t).find(n=>t[n]===e)||"",l:Math.sin,_:Math.cos,i:Math.min,u:Math.max,v:Math.abs,p:Math.PI,h:()=>Math.random(),m:()=>n.h()>.5,M:()=>2*(n.h()-.5),A:(t,e)=>t+(e-t*n.M()),k:(t,e=0)=>Math.floor(n.h()*(t-e)+e),S:(t,e=10)=>[n.A(t[0],e),n.A(t[1],e)],L:(t,e,o)=>n.i(n.u(t,e),o),I:(t,e)=>Math.abs(t-e),V:(t,e)=>n.u(n.I(t[0],e[0]),n.I(t[1],e[1])),O:(t,e,n)=>[t[0]+(e[0]-t[0])*Math.min(n,1),t[1]+(e[1]-t[1])*Math.min(n,1)],T:(t,e,o)=>n.V(t,e)<o,U:(t,e)=>[t[0]+e[0],t[1]+e[1]],C:(t,e)=>Math.atan2(e[1]-t[1],e[0]-t[0]),F:t=>Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)),P:(t,e)=>[t[0]*n._(e)-t[1]*n.l(e),t[0]*n.l(e)+t[1]*n._(e)],D:(t,e,o)=>[t[0]+(e[0]-t[0])*n.L(o,0,1),t[1]+(e[1]-t[1])*n.L(o,0,1)],R:(t,e,n)=>{const o=e[0],r=e[1],l=e[2],s=e[3],i=e[4],a=e[5],c=e[6],u=e[7],f=e[8],h=n[0],v=n[1],d=n[2],g=n[3],G=n[4],m=n[5],p=n[6],w=n[7],T=n[8];return t[0]=o*h+s*v+c*d,t[1]=r*h+i*v+u*d,t[2]=l*h+a*v+f*d,t[3]=o*g+s*G+c*m,t[4]=r*g+i*G+u*m,t[5]=l*g+a*G+f*m,t[6]=o*p+s*w+c*T,t[7]=r*p+i*w+u*T,t[8]=l*p+a*w+f*T,t},q:(t,e,o,r,l,s)=>{const i=n._(o||0),a=n.l(o||0),c=i*r,u=a*r,f=-a*l,h=i*l;return s[0]=c,s[1]=u,s[2]=0,s[3]=f,s[4]=h,s[5]=0,s[6]=t,s[7]=e,s[8]=1,s},j:(...t)=>{const e=[0,0],o=[1,1];let r=0;for(const l of t){const t=l.G[0]*o[0],s=l.G[1]*o[1],i=n._(r),a=n.l(r),c=t*i-s*a,u=t*a+s*i;e[0]+=c,e[1]+=u,o[0]*=l.Y[0],o[1]*=l.Y[1],r+=l.B}return e},W:(t,e,o,r)=>{const l=t.H;let s=0;const i=t.J(),a=t.J();return new Promise(c=>{t.H=(t,u,f)=>{s=n.i(o,s+f),l(i,u,f),e(a,u,f);const h=s/o;t.G[0]=i.G[0]+(a.G[0]-i.G[0])*h,t.G[1]=i.G[1]+(a.G[1]-i.G[1])*h,t.Y[0]=i.Y[0]+(a.Y[0]-i.Y[0])*h,t.Y[1]=i.Y[1]+(a.Y[1]-i.Y[1])*h,t.B=i.B+(a.B-i.B)*h,t.K=i.K+(a.K-i.K)*h,s>=o&&(t.H=e,r&&r(u),c())}})},N:t=>new Promise(e=>{setTimeout(()=>{e()},1e3*t)})},o=1200,r=512;t="#version 300 es\n#define GLSLIFY 1\nconst vec2 POS[4]=vec2[4](vec2(-1,-1),vec2(1,-1),vec2(-1,1),vec2(1,1));out vec2 vUV;void main(){vec2 p=POS[gl_VertexID];vUV=(p+1.)*.5;gl_Position=vec4(p,0,1);}";const l={X:["#222329","#2f2f39","#3b404b","#5e6069","#97866E","#82735B","#736551","#5f5841","#db8946","#b95e44","#f5b47e","#cfcfdf"],Z:{ee:[[1,0,.42,.76,.3,.7,.16,.44,.22,.22,.38,.08,.62,.08,.8,.24,.82,.44,.68,.7,.58,.76],[0,0,.22,.22,.16,.44,.3,.7,.42,.76,.58,.76,.68,.7,.82,.44,.8,.24,.76,.42,.72,.52,.66,.62,.62,.68,.5,.72,.36,.68,.28,.54,.22,.42],[2,0,.62,.22],[0,0,.56,.42,.54,.52,.6,.52,.68,.48,.74,.4,.7,.34,.62,.34],[0,0,.46,.42,.46,.52,.4,.52,.32,.48,.26,.4,.32,.34,.4,.34],[3,0,.52,.62,.8,.6,.94,.6,.82,.56],[3,0,.54,.64,.74,.66,.86,.7,.76,.64],[3,0,.48,.62,.2,.54,.08,.6,.22,.58],[3,0,.46,.64,.28,.66,.18,.72,.26,.64],[0,0,.34,.12,.26,.18,.22,.28,.2,.02],[0,0,.66,.12,.8,.24,.76,.02],[0,0,.24,.24],[2,0,.24,.22,.32,.14,.22,.06],[2,0,.68,.14,.78,.24,.74,.06],[2,0,.26,.22,.4,.16,.62,.16,.76,.24,.6,.1,.4,.1],[3,0,.56,.32,.66,.3,.74,.34,.66,.26],[3,0,.46,.32,.38,.26,.28,.34,.38,.3],[0,0,.5,.58,.58,.64,.54,.68,.46,.68,.42,.64]],te:[[6,0,.06,.52,.1,.9,.14,.88,.14,.58],[6,0,.84,.9,.88,.92,.9,.54,.84,.58],[5,0,.02,.52,.08,.48,.9,.48,.96,.52,.96,.92,.88,.92,.88,.58,.1,.58,.1,.9,.02,.9],[4,0,.02,.52,.3,.2,.74,.2,.96,.52],[11,0,.3,.2,.02,.52,.96,.52,.06,.5],[8,0,.34,.12,.7,.12]],ne:[[2,0,0,.58,0,.98,.98,.98,.98,.58],[7,0,0,0,.82,0,.82,.62,0,.62],[6,0,.78,.62,.78,0,.98,0,.98,.8]],oe:[[0,0,.4,.28,.28,.4,.22,.5,.26,.64,.36,.74,.54,.78,.62,.76,.58,.82,.58,.9,.64,.92,.72,.9,.78,.84,.92,.7,.92,.52,.86,.4,.8,.38,.72,.42,.68,.32,.62,.26,.54,.24],[1,0,.42,.34,.48,.32,.6,.36,.72,.52,.78,.5,.84,.5,.82,.42,.76,.42,.72,.46,.64,.3,.52,.26,.42,.3,.36,.4],[3,0,.62,.84,.56,.9,.58,.86],[3,0,.66,.86,.62,.94,.62,.88],[1,0,.64,.8,.72,.8,.68,.78]],re:[[0,0,.44,.46,.52,.46,.56,.5,.56,.62,.6,.7,.68,.78,.78,.8,.82,.76,.88,.78,.96,.88,.9,.96,.68,.94,.52,.86,.42,.78,.4,.64,.4,.52],[1,0,.44,.72,.44,.64,.48,.74,.62,.86,.7,.92,.6,.88,.46,.78],[3,0,.88,.76,.86,.82,.84,.86,.88,.84],[3,0,.92,.84,.94,.82,.94,.86,.9,.88]],se:[[11,0,.5,.06,.9,.2,.86,.64,.5,.92,.06,.88,.1,.34]],ae:[[4,0,.5,.08,.76,.16,.88,.48,.78,.8,.5,.9,.2,.8,.1,.5,.2,.2],[0,0,.5,.08,.58,.36,.6,.58,.5,.9,.36,.58,.38,.36]],le:[[3,0,.92,.44,.88,.5,.8,.48,.32,.48,.18,.54,.04,.52,.2,.48,.04,.46,.2,.44,.04,.42,.22,.4,.26,.42,.84,.4],[11,0,.04,.42,.22,.42,.32,.44,.82,.42,.92,.44,.84,.4,.32,.42,.22,.4],[11,0,.04,.46,.16,.46,.2,.44],[11,0,.04,.52,.18,.5,.2,.48]],ce:[[3,0,.94,.48,.92,.52,.84,.52,.54,.52,.42,.54,.24,.52,.04,.44,.5,.46,.9,.44],[8,0,.04,.44,.46,.48],[11,0,.04,.44,.52,.46,.9,.44,.88,.48,.54,.48,.52,.46,.52,.46,.52,.46,.52,.46,.48,.48]],_e:[[11,0,.12,.62,.22,.7,.48,.76,.74,.74,.9,.66,.94,.5,.82,.38,.6,.32,.38,.32,.2,.36,.08,.46],[3,0,.18,.48,.26,.44,.44,.4,.62,.4,.76,.44,.88,.54,.86,.5,.76,.42,.62,.38,.4,.38,.24,.42],[3,0,.08,.46,.14,.62,.24,.7,.48,.74,.74,.72,.88,.66,.94,.5,.9,.68,.74,.76,.48,.78,.22,.72,.12,.64],[3,0,.22,.6,.38,.64,.6,.66,.74,.64,.82,.6,.74,.66,.6,.68,.38,.66]],ie:[[11,0,.36,.14,.68,.16,.82,.22,.86,.32,.72,.82,.62,.9,.5,.92,.38,.9,.28,.82,.14,.3,.2,.22],[5,0,.36,.14,.24,.22,.2,.28,.24,.32,.36,.36,.64,.38,.54,.4,.38,.4,.2,.34,.14,.3,.2,.22],[5,0,.16,.38,.28,.82,.38,.9,.5,.92,.62,.9,.46,.88,.32,.82],[3,0,.22,.5,.3,.56,.52,.58,.76,.54,.78,.48,.72,.44,.5,.42,.28,.46],[2,0,.24,.54,.26,.62,.36,.82,.46,.86,.62,.88,.7,.82,.76,.56,.52,.6,.38,.6,.3,.58],[4,0,.82,.22,.86,.32,.84,.34,.7,.38,.8,.34,.82,.3]],ue:[[6,0,.08,.18,.06,.86,.94,.84,.94,.18],[3,0,.16,.26,.84,.24,.86,.78,.14,.78],[4,0,.06,.86,.08,.16,.94,.16,.94,.84,.9,.22,.84,.24,.9,.2,.14,.22,.16,.26,.1,.22],[4,0,.14,.78,.86,.78,.74,.8,.38,.8],[1,0,.26,.54,.16,.26,.14,.78,.24,.78,.6,.78,.86,.78,.84,.24,.76,.34,.56,.4,.54,.64,.36,.62,.24,.68,.18,.58],[7,0,.28,.74,.46,.68,.54,.72,.52,.64,.6,.6,.66,.66,.64,.58,.66,.46,.74,.4,.72,.34,.64,.36,.6,.44,.42,.4,.3,.5]],fe:[[9,0,.06,.1,.06,.88,.1,.92,.88,.92,.92,.88,.92,.1,.88,.06,.1,.06],[8,0,.1,.4,.14,.14,.84,.14,.88,.4,.88,.12,.86,.1,.12,.1,.1,.12]],ve:[[8,0,.06,.1,.06,.88,.1,.92,.88,.92,.92,.88,.92,.1,.88,.06,.1,.06],[10,0,.1,.4,.14,.14,.84,.14,.88,.4,.88,.12,.86,.1,.12,.1,.1,.12]],pe:[[0,0,.02,.1,.02,.88,.1,.96,.88,.96,.96,.88,.96,.1,.88,.02,.1,.02]],de:[[10,0,.4,.62,.06,.5,.42,.42,.5,.06,.6,.36,.92,.5,.62,.58,.5,.92],[11,0,.28,.26],[11,0,.36,.52,.48,.48,.5,.36,.54,.48,.64,.5,.52,.54,.5,.66,.46,.56]],we:[[0,0,0,0,.98,0,.98,.98,0,.98]],ye:[[11,0,.4,.74,.46,.74,.48,.36,.52,.36,.52,.5,.46,.5,.52,.58,.52,.74,.6,.74,.6,.28,.4,.28],[11,0,.62,.28,.62,.36,.7,.36,.62,.64,.62,.74,.78,.74,.78,.66,.7,.66,.78,.44,.78,.28],[11,0,.8,.28,.86,.28,.88,.52,.9,.54,.92,.28,.98,.28,.96,.74,.8,.74,.8,.66,.9,.66,.9,.64,.8,.58],[11,0,.2,.28,.38,.28,.38,.48,.32,.54,.38,.7,.38,.74,.32,.74,.22,.52,.3,.44,.32,.36,.28,.36,.28,.74,.2,.74],[11,0,.18,.5,.18,.28,.02,.28,0,.74,.18,.74,.18,.54,.12,.54,.1,.66,.08,.66,.08,.36,.1,.36,.12,.5]],he:[[8,0,0,0,.98,0,.98,.98,0,.98]],me:[[9,0,0,0,.98,0,.98,.98,0,.98]],xe:[[7,0,.24,.24,.14,.22,.06,.16,.02,.08,.12,.12],[6,0,.24,.24,.12,.16,.02,.08,.12,.1],[5,0,.94,.8,.86,.64,.76,.5,.6,.36,.44,.28,.32,.24,.2,.24,.34,.26,.46,.32,.56,.38,.64,.44,.72,.52,.82,.66,.9,.84,.92,.84],[4,0,.2,.24,.32,.24,.44,.28,.6,.36,.76,.5,.86,.64,.94,.8,.92,.84,.84,.66,.76,.54,.62,.4,.5,.32,.4,.28,.34,.26],[9,0,.28,.24,.24,.2,.18,.18,.14,.16,.16,.2,.08,.2,.06,.24,.06,.3,.04,.28,.06,.36,.04,.42,.02,.4,.04,.48,.08,.52,.14,.5,.16,.42,.14,.34,.16,.28,.2,.26,.24,.26],[8,0,.28,.24,.24,.2,.18,.18,.14,.16,.2,.2],[8,0,.08,.2,.16,.2,.2,.22,.14,.24,.12,.28,.12,.24,.14,.22],[8,0,.06,.24,.08,.3,.06,.3],[8,0,.08,.32,.1,.36,.12,.44,.1,.44,.1,.4],[3,0,.28,.24,.1,.26,.04,.32,.02,.38,.12,.34,.16,.3],[2,0,.28,.24,.16,.28,.1,.32,.02,.38,.12,.34,.16,.3]],be:[[11,0,.44,.32,.5,.5,.54,.32,.62,.32,.56,.58,.44,.58,.36,.32],[11,0,.34,.32,.2,.32,.22,.58,.4,.58,.38,.5,.28,.5,.28,.48,.36,.48,.36,.42,.28,.42,.3,.4,.36,.4],[11,0,.02,.32,.04,.58,.2,.58,.18,.48,.12,.48,.1,.32],[11,0,.64,.32,.6,.58,.8,.58,.78,.5,.7,.5,.7,.48,.76,.48,.76,.42,.7,.42,.68,.4,.78,.4,.78,.32],[11,0,.8,.32,.82,.58,.98,.58,.96,.48,.9,.48,.88,.32]],ge:[[11,0,.34,.34,.34,.42,.42,.42,.4,.76,.52,.74,.58,.2]],Me:[[11,0,.3,.26,.52,.18,.66,.36,.48,.6,.68,.6,.6,.74,.3,.74,.26,.6,.48,.4,.46,.36,.3,.42]],Ae:[[11,0,.3,.28,.46,.22,.64,.28,.68,.44,.6,.5,.68,.56,.64,.7,.48,.74,.32,.64,.38,.56,.5,.6,.54,.58,.42,.52,.44,.42,.52,.4,.52,.36,.46,.36,.38,.4]],ke:[[11,0,.4,.18,.3,.46,.48,.48,.42,.76,.56,.74,.62,.5,.68,.5,.7,.38,.64,.36,.68,.2,.56,.22,.52,.36,.46,.36,.52,.2]],Se:[[0,0,.22,.32,.54,.32,.54,.2,.58,.16,.88,.52,.6,.86,.56,.82,.56,.68,.22,.68,.18,.64,.18,.36],[8,0,.24,.36,.22,.38,.22,.62,.24,.64,.6,.64,.6,.78,.62,.78,.82,.52,.6,.22,.58,.22,.58,.36],[10,0,.22,.48,.28,.42,.58,.36,.24,.36,.22,.38],[10,0,.58,.22,.6,.22,.82,.52,.62,.32,.58,.34]],Le:[[6,0,.84,.88,.42,.44,.46,.44,.88,.84,.88,.88],[2,0,.44,.46,.3,.52,.12,.34,.14,.3,.3,.14,.18,.3,.2,.34,.34,.22,.24,.36,.28,.4,.42,.28,.32,.42,.34,.46,.44,.42,.48,.42],[2,0,.44,.46,.48,.42,.54,.32,.36,.14,.32,.14,.32,.16,.22,.28,.34,.18,.38,.22,.3,.34,.42,.26,.46,.3,.36,.4,.48,.32,.48,.36],[2,0,.48,.38,.28,.18,.46,.4,.42,.44,.2,.26,.4,.46,.44,.44],[3,0,.42,.24,.38,.26,.4,.22,.32,.14,.36,.14,.54,.32,.48,.42,.5,.32],[3,0,.34,.22,.2,.36,.2,.34],[4,0,.44,.44,.88,.88,.88,.84,.46,.44],[3,0,.42,.28,.28,.4,.32,.38]],Ie:[[11,0,.18,.6,.1,.54,.12,.62,.22,.64,.46,.56],[11,0,.44,.42,.2,.4,.14,.46,.14,.52,.2,.56,.18,.5,.2,.44],[11,0,.44,.4,.28,.34,.12,.32,.04,.5,.08,.6,.08,.48,.16,.36],[11,0,.56,.56,.72,.64,.82,.62,.86,.52,.74,.6],[11,0,.56,.4,.72,.34,.88,.32,.94,.46,.88,.6,.9,.46,.82,.36],[11,0,.56,.42,.74,.4,.82,.42,.84,.5,.8,.52,.82,.48,.76,.42],[0,0,.5,.34,.44,.36,.4,.5,.46,.64,.54,.64,.6,.5,.56,.36],[3,0,.44,.48,.48,.38,.52,.38,.56,.48,.5,.4],[3,0,.46,.56,.48,.62,.52,.62,.54,.56,.5,.6]],Ve:[[10,0,.56,.22,.32,.24,.34,.48,.42,.48,.54,.46,.58,.54,.5,.58,.46,.52,.36,.56,.38,.7,.52,.7,.72,.6,.6,.38,.42,.38,.42,.32,.6,.32]],Oe:[[9,0,.32,.72,.46,.48,.6,.42,.66,.46,.66,.7,.46,.74,.32,.62,.3,.4,.46,.26,.6,.28,.6,.38,.44,.42,.42,.52,.48,.64,.56,.62,.54,.56]],Te:[[11,0,.18,.34,.22,.48,.28,.5,.3,.4,.32,.48,.38,.5,.4,.32,.34,.32,.32,.38,.3,.36,.26,.36,.26,.4,.22,.32],[11,0,.42,.32,.4,.48,.52,.5,.5,.44,.44,.44,.48,.42,.48,.4,.44,.4,.48,.38,.5,.32],[11,0,.52,.34,.52,.48,.64,.5,.62,.42,.58,.42,.58,.32],[11,0,.62,.32,.66,.5,.78,.48,.76,.42,.7,.42,.7,.32],[11,0,.26,.72,.16,.58,.18,.76,.34,.76,.36,.7,.3,.6,.16,.58,.2,.64,.24,.64,.3,.68,.28,.7],[11,0,.38,.76,.38,.58,.52,.6,.54,.78,.38,.76,.42,.7,.48,.7,.46,.64,.42,.64,.44,.7,.5,.74],[11,0,.58,.76,.54,.6,.64,.6,.72,.7,.7,.6,.76,.56,.78,.78,.68,.76,.62,.68,.64,.76],[11,0,.92,.54,.8,.6,.82,.76,.94,.76,.92,.7,.86,.7,.9,.68,.9,.66,.84,.66,.92,.64]]}},s={Z:l.Z,Ue:new Map,Ce:new Map,async Fe(){for(const t of Object.keys(s.Z))this.Ue.set(t,await this.Pe(l.X,l.Z[t]))},async Pe(t,e){const n=new OffscreenCanvas(r,r),o=n.getContext("2d");o.imageSmoothingEnabled=0,o.fillStyle="rgba(0, 0, 0, 0)",o.clearRect(0,0,n.width,n.height);for(let r=0;r<e.length;r++){const l=e[r],s=t[l[0]],i=n.width*l[2],a=n.height*l[3];o.beginPath(),o.moveTo(i,a);for(let t=4;t<l.length;t+=2){const e=n.width*l[t],r=n.height*l[t+1];o.lineTo(e,r)}o.closePath(),o.fillStyle=s,o.fill()}return o.getImageData(0,0,n.width,n.height)},ze(t){return 0===this.Ce.size&&Object.keys(this.Z).forEach((t,e)=>{this.Ce.set(l.Z[t],e)}),this.Ce.get(t)},De(t){switch(t){case 1:return{Re:[0,1,0,0,1,0,0,0,0,0,0,0,1,0,0,0],qe:[0,0,1,0,0,0,1,0],je:[1,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0],Ge:[1,0,0,0,0,1,0,0]};case 2:return{Re:[0,1,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0,1,1,0,1,0,1,0,1,0,0,0,1,0,0,0],qe:[1,0,1,0,1,0,1,0],je:[1,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0],Ge:[1,0,0,0,0,1,0,0]};case 3:return{qe:[0,0,1,0,0,0,1,0],Ge:[1,0,0,0,0,1,0,0]};case 4:return{qe:[1,0,1,0,1,0,1,0],Ge:[1,0,0,0,0,1,0,0]};default:return{}}},Ye(t){switch(t){case 1:return{Be:[1],Ee:2};case 2:return{We:[1],Ee:2};case 3:return{$e:[1],Ee:2};default:return{}}}},i=[],a=[],c=new Float32Array([200,0,0,0,200,0,0,0,1]),u=new Float32Array([2/o,0,0,0,-2/720,0,-1,1,1]),f=(t,e,r=1)=>{const l=t.G[0],h=t.G[1],v=t.B||0,d=t.Y[0],g=t.Y[1];t.He||(t.He=[new Float32Array(9),new Float32Array(9),new Float32Array(9)]);let G=n.q(l*o,720*h,v,d,g,t.He[0]);const m=e?n.R(t.He[1],e,G):G,p=n.R(t.He[2],t.He[1],c),w=r*t.K;if(null!==t.Je){const e=i[a.length]||{};i[a.length]=e,e.Ke=n.R(e.Ke||new Float32Array(9),u,p),e.Ne=s.ze(t.Je),e.K=w,a.push(e)}if(t.Qe)for(const e of t.Qe)f(e,m,w)},h=(t,e)=>{a.length=0;for(const e of t)f(e,null);let n=0;for(const t of a)e[n++]=t.Ke[0],e[n++]=t.Ke[1],e[n++]=t.Ke[2],e[n++]=t.Ke[3],e[n++]=t.Ke[4],e[n++]=t.Ke[5],e[n++]=t.Ke[6],e[n++]=t.Ke[7],e[n++]=t.Ke[8],e[n++]=0|t.Ne,e[n++]=t.K;return a.length},v=(t,e,n=[1,1],o=1,r=0)=>{const l={Je:t,G:e,Y:n,B:r,K:o,Qe:[],H:()=>{},Xe:t=>{l.Qe.push(t)},Ze:t=>{const e=l.Qe.indexOf(t);-1!==e&&l.Qe.splice(e,1)},et:(t,e)=>{l.H(l,t,e);for(const n of l.Qe)n.et(t,e)},J:function(){const t=v(this.Je,[this.G[0],this.G[1]],[this.Y[0],this.Y[1]],this.K,this.B);return t.H=this.H,t}};return l};e=t=>{const e={tt:0,nt:0,ot:v(null,[0,0]),H:(t,e,n)=>{},et:(n,o)=>{t&&(t(e,n),t=void 0),e.tt||(e.H(e,n,o),e.ot.et(n,o))}};return e};const d=[1.42,-.6],g=[.42,.5],G=[-.56,-1.6],m=[.56,.5],p=(t,o)=>{const r=new Map;r.set(L,s.Z.ge),r.set(M,s.Z.Me),r.set(x,s.Z.Ae),r.set(R,s.Z.ke),r.set(Z,s.Z.Ve),r.set(Y,s.Z.Oe);let l=0;const i=e();i.H=(t,e,n)=>{l+=n,l>4&&o()};const a=v(s.Z.be,d,[.5,.5]);a.H=(t,e,o)=>{t.B=.02*n._(3*l),l<2?t.G=n.D(d,g,l/2):l>3&&(t.K=n.u(0,1-(l-3)))};const c=v(r.get(t),G,[.5,.5]);c.H=(t,e,o)=>{t.B=.02*n.l(3*l),l<2?t.G=n.D(G,m,l/2):l>3&&(t.K=n.u(0,1-(l-3)))};const u=v(s.Z.pe,[.5,.5],[10,10]);return i.ot.Xe(u),i.ot.Xe(a),i.ot.Xe(c),i},w=(t,e)=>{let o=0,r=0;const l=v(null,e);l.H=(e,s,i)=>{o=n.i(1,o+i),r=o/1,o>=1&&t.Ze(l)};for(let t=0;t<20;t++){const t=n.A(-n.p,n.p),e=n.h(),o=n._(t)*e,i=n.l(t)*e,a=v(s.Z.de,[0,0]);a.H=(t,l,s)=>{t.G[0]+=.6*o*s*(1-r),t.G[1]+=.6*i*s*(1-r)+.05*s*r,t.Y[0]=.1*(1-e),t.Y[1]=.1*(1-e),t.K=n.L((4-4*r)*(1-e),0,1),t.B+=4*(o+i)*s*(1-r)},l.Xe(a)}return l},T=[{Je:s.Z.ce,G:[.62,.55],Y:[.32,.32],rt:null},{Je:s.Z.le,G:[.38,.55],Y:[-.3,.3],rt:null},{Je:s.Z.le,G:[.66,.675],Y:[.3,.3],rt:null},{Je:s.Z.ce,G:[.34,.675],Y:[-.32,.32],rt:null},{Je:s.Z._e,G:[.64,.6],Y:[.4,.3],rt:null},{Je:s.Z._e,G:[.36,.6],Y:[-.4,.3],rt:null},{Je:s.Z.ie,G:[.45,.59],Y:[.2,.2],rt:null},{Je:s.Z.ie,G:[.55,.59],Y:[-.2,.2],rt:null}],y=(t=1)=>{let e=n.A(-.2,.2),o=0;return(n,r,l)=>{o+=l,n.G[0]+=.2*l*(t?-1:1),n.B+=e,n.K=1-o/.5,o>=.5&&(n.H=()=>{})}},A={st:s.Z.le,lt:s.Z.ce,ct:s.Z.ie,_t:s.Z._e},b={it:s.Z.xe,ut:s.Z.Le},E=(t,o)=>{const r=v(s.Z.pe,[.5,.5],[10,10]),l=e((e,o)=>{o.vt.ft={dt:t,wt:null,yt:null,ht:.002,xt:0,nt:0,bt:new Map};const l=(()=>{const t=v(null,[0,0]),e=v(s.Z.ue,[-.45,-.33],[.8,.8]);e.H=(t,o,r)=>{e.B=.03*n.l(.5*o.Mt.gt)};const o=v(s.Z.te,[0,.28],[2,2]),r=v(s.Z.ne,[.02,-.1],[3.2,3.2]);return t.Xe(r),t.Xe(e),t.Xe(o),t})();l.G=[.5,.5];const i=(t=>{const e=v(null,[0,0]),o=v(null,[.9,.1]),r=v(null,[.1,.1]),l=Object.keys(A),i=Object.keys(b).filter(e=>(e!==n.o(b,b.it)||t.At)&&(e!==n.o(b,b.ut)||t.kt));for(const t of[...l,...i]){const a=!!A[t],c=a?l.indexOf(t):i.indexOf(t),u=v(s.Z.pe,[0,0+.16*c],[.26,.26]),f=v(s.Z.fe,[0,0]);u.Xe(f);const h=v(a?A[t]:b[t],[0,0],[.8,.8]);h.B=Math.PI/6,f.Xe(h),f.H=(l,i)=>{if(i.vt.ft.yt===t)l.Qe[0].K=0,u.Y[0]=.26,l.Je=s.Z.fe;else{l.Qe[0].K=.8;const c=n.j(e,a?o:r,u,l);n.V(i.It.Lt.St,c)<.06?(i.It.Lt.Vt&&!i.It.Lt.Ot&&(i.vt.ft.yt=t),l.K=1,u.Y[0]=.3,l.Je=s.Z.ve):(u.Y[0]=.26,l.Je=s.Z.fe)}},(a?o:r).Xe(u)}return e.Xe(o),e.Xe(r),e})(t),a=(t=>{const e=v(s.Z.oe,[0,0],[1,1]),o=((t,e)=>{var o;const r=v(s.Z.ee,[0,0],[.8,.8],1,.3);r.H=(t,o,r)=>{t.G=[.01*n.l(10*o.Mt.gt*e.Tt),t.G[1]]};for(let e=0;e<2;e++){const l=e?1:-1,i=v(s.Z.se,[.045*l,-.03],[.12*l,.12],1);i.H=(t,e,o)=>{const r=(n.l(1.5*e.Mt.gt)+1)/2;t.Y[0]=.12*l*(e.vt.ft?.wt?1.2:1),t.Y[1]=.12*(r>.98?.1:e.vt.ft?.wt?1.4:1)};const a=v(s.Z.ae,[0,0],[.8,.8]);a.H=(e,r,l)=>{const s=[...o||r.It.Lt.St],a=n.j(t,i),c=n.V(a,s),u=n.C(a,s),f=[.2*n._(u)*c*((i.Y[0]||1)<0?-1:1),.2*n.l(u)*c];e.G=n.O(e.G,f,10*l)},i.Xe(a),r.Xe(i)}return{rt:r,Ut:async e=>{n.j(t,r),o=e}}})(e,t),r=v(s.Z.re,[-.06,0],[1.2,1.2],1,3);let l=null;const i=(t,e,o)=>{t.Y=[1.2,1.2],t.G=[-.06,0],t.B=3+.1*n.l(3*e.Mt.gt)},a=(t,e,o)=>{t.Y=[.9,.9],t.G=[-.06,0],t.B=.1*n.l(1*e.Mt.gt)};return r.H=a,e.H=(t,e,s)=>{e.vt.ft.xt>.5&&!l&&(l=(async(t,e)=>Promise.all([n.W(r,i,.5),o.Ut([t?.2:.8,.9])]).then(()=>n.N(1+2*n.h())).then(()=>e.vt.ft.xt>.5&&!e.vt.ft.nt?n.W(r,(t=>(e,o,r)=>{e.Y=[.9,3],e.G=[-.04,.05],e.B=(t?1.2:-.7)-.2+.2*n.l(20*o.Mt.gt)})(t),.4,e=>{if(!e.vt.ft.nt){for(const n of T)e.vt.ft.bt.get(n)&&(t&&n.G[0]<.5||!t&&n.G[0]>=.5)&&e.vt.ft.bt.set(n,0);e.Mt.Ct(3)}}).then(()=>{e.vt.ft.xt=n.L(e.vt.ft.xt-.4,0,1)}):Promise.resolve()).then(()=>Promise.all([n.W(r,a,.2)])).then(async()=>{o.Ut(null),l=null}))(n.m(),e)),null!==e.vt.ft?.wt&&o.Ut(e.vt.ft.wt)},e.Xe(r),e.Xe(o.rt),e})(t);a.G=[.5,.4],a.Y=[.5,.5];const c=(()=>{var t=0;const e=v(null,[0,0]),n=new Map;return e.H=(o,r,l)=>{if(!t){t=1;for(const t of T){const n=v(t.Je,[...t.G],t.Y);n.K=0,t.rt=n,e.Xe(n)}}for(const t of T)r.vt.ft.bt.get(t)&&!n.get(t)?(t.rt.H=()=>{},t.rt.B=0,t.rt.K=1,t.rt.G=[...t.G]):!r.vt.ft.bt.get(t)&&n.get(t)&&(e.Xe(w(e,t.G)),t.rt.G=[...t.G],t.rt.H=y(t.G[0]<.5)),n.set(t,r.vt.ft.bt.get(t)||0)},e})(),u=(()=>{var t=null,e=[0,0];const o=v(null,[0,0]),r=v(null,[.45,-.33],[.35,.35]);r.K=.2;const l=v(null,[-.45,-.33],[.35,.35]);return l.H=(o,i,a)=>{if(i.vt.ft.yt!==t)l.G[0]=i.It.Lt.St[0]+.02*n.l(3*i.Mt.gt),l.G[1]=i.It.Lt.St[1]+.02*n._(3*i.Mt.gt),i.vt.ft.yt?(l.Je=A[i.vt.ft.yt]||b[i.vt.ft.yt],t=i.vt.ft.yt,l.Je===s.Z.Le||l.Je===s.Z.xe?l.Y=[.8,.8]:l.Y=[.35,.35]):(l.Je=null,t=null);else if(l.Je){l.G=n.O(l.G,i.It.Lt.St,.01*a),l.Je===s.Z.Le||l.Je===s.Z.xe?(l.G=n.O(l.G,i.It.Lt.St,.1),l.G=n.U(l.G,[.01,.03]),l.B=n.l(-3-l.G[0])):(l.G=n.O(l.G,i.It.Lt.St,.1),l.G[0]+=n.l(3*i.Mt.gt)*i.vt.ft.ht,l.G[1]+=n._(3*i.Mt.gt)*i.vt.ft.ht,l.B=.03*n.l(3*i.Mt.gt));const t=((t,e,o)=>{let r=null;for(const l of T)if(l.Je===e&&!t.ft.bt.get(l)){const t=n.V(o,l.G);(!r||t<n.V(o,l.G))&&(r=l)}return r})(i.vt,l.Je,i.It.Lt.St);t&&(r.Je=l.Je,r.G=[...t.G],r.Y=t.Y,n.V(l.G,t.G)<.01&&(i.vt.ft?.bt.set(t,1),i.vt.ft.yt=null,i.Mt.Ct(1)))}else l.G[0]=i.It.Lt.St[0],r.Je=null;if(l.Je===s.Z.xe){const t=n.V(l.G,e);i.vt.ft.xt-=.1*t}e=[...l.G]},o.Xe(r),o.Xe(l),o})();if(e.ot.Xe(l),e.ot.Xe(c),e.ot.Xe(a),e.ot.Xe(i),e.ot.Xe(u),t.Tt>0){const t=(()=>{const t=v(null,[0,0]);let e=0;t.H=(t,o,r)=>{o.vt.ft.xt=n.L(o.vt.ft.xt+r*o.vt.ft.dt.Tt*.2,0,1),o.vt.ft.xt>=.5?(e+=r,e>.5&&(e=0,o.Mt.Ct(2))):e=0};const o=v(s.Z.we,[0,0],[.8,.1]),r=v(s.Z.me,[0,0],[.95,.7]);r.H=(t,e,n)=>{const o=.95*e.vt.ft.xt;t.Y[0]=o,t.G[0]=.158*e.vt.ft.xt-.158},o.Xe(r),t.Xe(o);const l=v(s.Z.ye,[-.09,-0],[.2,.1]);return l.H=(t,e,o)=>{e.vt.ft.xt>=.5?(l.G[1]=.01*n.l(10*e.Mt.gt),l.B=.1*n.l(10*e.Mt.gt)):(l.G[1]=0,l.B=0)},t.Xe(l),t})();t.G=[.5,.1],e.ot.Xe(t)}if(t.Ft>0){const t=(()=>{let t=0,e=0;const o=v(null,[0,0]);return o.H=(r,l,i)=>{if(!e&&(t+=i,t>l.vt.ft.dt.Ft)){t=0,e=1;const r=(t=>{var e=0,o=[n.h(),n.h()];const r=v(s.Z.Ie,[n.m()?1:0,n.m()?1:0],[.2,.2]);return r.H=(l,s,i)=>{(e+=i)>1&&(o=[n.h(),n.h()]);const a=l.G,c=n.C(a,o),u=[a[0]+.2*n._(c)*i,a[1]+.2*n.l(c)*i],f=n.U(u,[.01*(n.h()-.5),.01*(n.h()-.5)]);r.G=f,s.vt.ft.wt=f;const h=2-n.V(l.G,[.5,.5]);s.vt.ft.xt+=i*h*s.vt.ft.dt.Tt*.3,s.vt.ft?.yt===n.o(b,b.ut)&&n.V(s.It.Lt.St,r.G)<.1&&t()},r})(()=>{e=0,o.Ze(r),l.vt.ft.wt=null});o.Xe(r)}},o})();e.ot.Xe(t)}e.ot.Xe(r)});let i=0,a=0,c=0;return l.H=(t,e,l)=>{c+=l,c<1&&(r.K=n.L(1-c,0,1)),T.every(t=>e.vt.ft.bt.get(t))&&(e.vt.ft.nt=1,i=1),i&&(a+=l,r.K=n.L(a-1,0,1),a>2&&o())},l},L={At:0,kt:0,Ft:0,Tt:0},M={At:0,kt:0,Ft:0,Tt:.24},x={At:1,kt:0,Ft:0,Tt:.3},R={At:0,kt:1,Ft:2,Tt:.05},Z={At:1,kt:1,Ft:6,Tt:.2},Y={At:1,kt:1,Ft:6,Tt:.3};new class{constructor(e,l){this.Pt=0,this.zt=null,this.Dt=null,this.zt=e,void 0!==self.WorkerGlobalScope?(this.Dt=(()=>{var t,e,n,o,r,l;const s=new Set;t=[],e=0,n=void 0,o={t:{},Lt:{St:[0,0],Vt:0}},r=null,l=[],self.onmessage=({data:t})=>{n&&(n.It=t.It,i(t.Rt))};const i=async o=>{if(!n)return;const i=performance.now(),c=(i-e)/1e3;if(e=i,a.gt+=c,t.length){for(const e of t)e.tt||e.et(n,c),e.nt&&s.add(e);((t,e)=>{const n={qt:t,jt:e,Gt:r,Yt:l.length?l:null};self.postMessage(n,[t.buffer]),r=null,l=[]})(o,h(t.map(t=>t.ot),o))}},a={gt:0,Bt(t,e){n={Mt:a,vt:e,It:o},a.Et(t)},Et(e){t.push(e)},Wt(){t.length>1&&t.pop()},$t(e){t=t.filter(t=>t!==e)},Ht(t){r=t},Ct(t){l.push(t)}};return a})(),this.Dt.Bt(e,l)):(this.Dt=(()=>{const e=n.$("#c");let l=e.getBoundingClientRect();const i=n.$("#j").innerHTML,a=URL.createObjectURL(new Blob([i],{type:"text/javascript"})),c=new Worker(a),u=n.$("#p");let f={St:[0,0],Vt:0},v={},d={},g=null,G=new Float32Array(11e4),m=null;c.onmessage=t=>{p(t.data)};const p=t=>{t.qt&&(T(t.qt,t.jt),G=t.qt),null!==t.Gt&&m&&m.playLoop(s.De(t.Gt)),t.Yt&&m&&t.Yt.forEach(t=>{m.playSingle(s.Ye(t))})},w=t=>{const e={Rt:t,It:{t:{...d,...v},Lt:f}};c.postMessage(e,[t.buffer]),d={}},T=(t,e)=>{g.Jt(t,e),G=t},y=()=>{l=e.getBoundingClientRect()},A=()=>{G&&(w(G),G=null),requestAnimationFrame(A)},b=async()=>{u.style.display="none";const l=new window.AudioContext;m=(t=>{const e=t||new(window.AudioContext||window.webkitAudioContext);let o=null,r=.125,l=0,s=0,i=null,a=8;const c=(t,e,n=55)=>n*Math.pow(2,e)*Math.pow(2,(t=>12*Math.floor(t/7)+[0,2,3,5,7,8,10][t%7])(t)/12),u=(t,n,o,r=.6)=>{const l=e.createGain();return l.gain.setValueAtTime(1e-4,t),l.gain.exponentialRampToValueAtTime(r,t+n),l.gain.exponentialRampToValueAtTime(1e-4,t+o),l},f=(t,n,o)=>{const r=e.createBiquadFilter();return r.type=n,r.frequency.setValueAtTime(o,t),r},h=(t,n,o)=>{const r=e.createOscillator();return r.type=n,r.frequency.setValueAtTime(o,t),r},v=t=>{for(let e=0;e<t.length-1;e++)t[e].connect(t[e+1])},d=(t,e,n)=>{t.start(e),t.stop(n)},g=t=>{const n=h(t,"square",c(2,2)),o=u(t,.002,.15,.1);n.frequency.exponentialRampToValueAtTime(60+l%8*4,t+.1),v([n,o,e.destination]),d(n,t,t+.1)},G=t=>{const n=h(t,"sine",c(2,1)),o=f(t,"lowpass",900),r=u(t,.002,.2);v([n,o,r,e.destination]),d(n,t,t+.2)},m=(t,n)=>{const o=h(t,"sawtooth",c(l%16,n-1)),r=f(t,"lowpass",600),s=u(t,.01,.6);v([o,r,s,e.destination]),d(o,t,t+.6)},p=(t,n)=>{const o=h(t,"sine",c(4,n+1)),r=u(t,.04,.6);v([o,r,e.destination]),d(o,t,t+.6)},w=(t,n)=>{const o=h(t,"triangle",c(2,n)),r=u(t,.04,.2);v([o,r,e.destination]),d(o,t,t+.2)},T=(t,n)=>{const o=h(t,"sawtooth",c(4,n-1)),r=u(t,.04,2,.3);v([o,r,e.destination]),d(o,t,t+2)},y=(t,n)=>{const o=u(t,.04,1.2,.06);v([o,e.destination]),[0,2,4].forEach((e,n)=>{const r=h(t,"sine",c(e,2+Math.round(l%8/2)));r.detune.setValueAtTime(n+2,t),v([r,o]),d(r,t,t+1.2)})},A=t=>({Ee:t.Ee||1,Re:t.Re||[],je:t.je||[],qe:t.qe||[],Ge:t.Ge||[],Be:t.Be||[],We:t.We||[],$e:t.$e||[]});return{playLoop:t=>{i=A(t),a=n.u(i.Re.length,i.je.length,i.qe.length,i.Ge.length,i.Be.length,i.We.length,i.$e.length,8),r=60/164/2,o||(o=window.setInterval(()=>(()=>{if(i)for(;s<e.currentTime+.12;){const t=l%a,e=s;i.Ge[t%i.Ge.length]&&G(e),i.qe[t%i.qe.length]&&g(e),i.Re[t%i.Re.length]&&m(e,i.Ee),i.Be[t%i.Be.length]&&p(e,i.Ee),i.We[t%i.We.length]&&w(e,i.Ee),i.$e[t%i.$e.length]&&T(e,i.Ee),i.je[t%i.je.length]&&y(e),s+=r,l++}})(),25))},playSingle:t=>{const n=A(t),o=e.currentTime;n.Ge[0]&&G(o),n.qe[0]&&g(o),n.Re[0]&&m(o,n.Ee),n.je[0]&&y(o),n.Be[0]&&p(o,n.Ee),n.We[0]&&w(o,n.Ee),n.$e[0]&&T(o,n.Ee)},stop:()=>{o&&clearInterval(o),o=null}}})(l),n.N(2).then(()=>{y()}),window.matchMedia("(pointer: coarse)").matches&&document.documentElement.requestFullscreen(),g=(e=>{e.width=o,e.height=720;const n=e.getContext("webgl2",{premultipliedAlpha:1}),l=n.attachShader.bind(n),i=n.createBuffer.bind(n),a=n.bindBuffer.bind(n),c=n.bufferData.bind(n),u=n.createFramebuffer.bind(n),f=n.bindFramebuffer.bind(n),v=n.createTexture.bind(n),d=n.bindTexture.bind(n),g=n.texParameteri.bind(n),G=n.texSubImage3D.bind(n),m=n.getUniformLocation.bind(n),p=n.useProgram.bind(n),w=n.uniform1i.bind(n),T=n.getAttribLocation.bind(n),y=n.activeTexture.bind(n),A=n.texImage3D.bind(n),b=n.viewport.bind(n),E=n.TEXTURE_2D,L=n.TEXTURE_2D_ARRAY,M=n.TEXTURE_MAG_FILTER,x=n.TEXTURE_MIN_FILTER,R=n.FLOAT,Z=n.FRAMEBUFFER,Y=n.UNSIGNED_BYTE,_=n.RGBA,I=n.NEAREST,H=n.CLAMP_TO_EDGE,S=n.ARRAY_BUFFER,X=n.TRIANGLE_STRIP,B=(t,e)=>{const o=n.createShader(t);return n.shaderSource(o,e),n.compileShader(o),o},U=(t,e)=>{const o=n.createProgram();return l(o,B(n.VERTEX_SHADER,t)),l(o,B(n.FRAGMENT_SHADER,e)),n.linkProgram(o),o},V=(t,e,o)=>{t<0||(n.enableVertexAttribArray(t),n.vertexAttribPointer(t,e,R,0,44,o),n.vertexAttribDivisor(t,1))},F=(t,e)=>{const o=u();f(Z,o);const r=v();return d(E,r),n.texImage2D(E,0,_,t,e,0,_,Y,null),g(E,x,I),g(E,M,I),n.framebufferTexture2D(Z,n.COLOR_ATTACHMENT0,E,r,0),{Kt:o,Nt:r,Qt:t,Xt:e}},P=U("#version 300 es\n#define GLSLIFY 1\nconst vec2 POS[4]=vec2[4](vec2(-1.0,-1.0),vec2(1.0,-1.0),vec2(-1.0,1.0),vec2(1.0,1.0));const vec2 UVS[4]=vec2[4](vec2(0.0,0.0),vec2(1.0,0.0),vec2(0.0,1.0),vec2(1.0,1.0));in mat3 aTransform;in float aLayer;in float aOpacity;out vec2 vUV;out float vOpacity;flat out int vLayer;void main(){vec3 p=aTransform*vec3(POS[gl_VertexID],1.0);gl_Position=vec4(p.xy,0.0,1.0);vUV=UVS[gl_VertexID];vLayer=int(aLayer+0.2);vOpacity=aOpacity;}","#version 300 es\nprecision mediump float;\n#define GLSLIFY 1\nin vec2 vUV;in float vOpacity;flat in int vLayer;uniform highp sampler2DArray uTexArray;out vec4 outColor;void main(){vec4 col=texture(uTexArray,vec3(vUV,float(vLayer)));if(col.a<0.9)discard;col.a*=vOpacity;outColor=col;}");p(P),w(m(P,"uTexArray"),0);const O=i();a(S,O);const K=T(P,"aTransform");V(K,3,0),V(K+1,3,12),V(K+2,3,24),V(T(P,"aLayer"),1,36),V(T(P,"aOpacity"),1,40);const C=[U(t,"#version 300 es\nprecision mediump float;\n#define GLSLIFY 1\nuniform float t;in vec2 vUV;out vec4 fragColor;uniform sampler2D uTexture;void main(){vec3 base=texture(uTexture,vUV).rgb;vec3 mb=textureLod(uTexture,vUV,2.0).rgb*0.60+textureLod(uTexture,vUV,3.0).rgb*0.30+textureLod(uTexture,vUV,4.0).rgb*0.10;float tx=mod(t*0.01,1.0);float noise=min((mod(vUV.x-tx,0.001)*999.),(mod(vUV.y+tx,0.001)*999.));noise=step(0.2,noise)*0.01;vec3 col=(base+(mb*0.4))-noise;col=col*vec3(1.,0.9,.85);fragColor=vec4(col,1.0);}"),U(t,"#version 300 es\nprecision mediump float;\n#define GLSLIFY 1\nin vec2 vUV;in float t;uniform sampler2D uTexture;out vec4 fragColor;void main(){fragColor=texture(uTexture,vUV);}")];let J=F(e.width,e.height),D=F(e.width,e.height);n.enable(n.BLEND),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA);const k=()=>{const t=[...s.Ue.values()];if(!t.length)return null;const e=v();y(n.TEXTURE0),d(L,e),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0),g(L,x,I),g(L,M,I),g(L,n.TEXTURE_WRAP_S,H),g(L,n.TEXTURE_WRAP_T,H),A(L,0,_,r,r,t.length,0,_,Y,null);for(let e=0;e<t.length;e++)G(L,0,0,0,e,r,r,1,_,Y,t[e]);return{tex:e,width:r,height:r,layers:t.length}};return k(),{Jt:(t,e)=>{a(S,O),c(S,t,n.DYNAMIC_DRAW),p(P),f(Z,J.Kt),b(0,0,J.Qt,J.Xt),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.drawArraysInstanced(X,0,4,e),((t,e,o)=>{let r=t,l=D;for(let t=0;t<C.length;t++){const s=C[t];p(s),w(m(s,"uTexture"),0),n.uniform1f(m(s,"t"),performance.now()/1e3),y(n.TEXTURE0),d(E,r),n.generateMipmap(E),g(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST_MIPMAP_LINEAR),f(Z,t===C.length-1?null:l.Kt),b(0,0,e,o),n.drawArrays(X,0,4),r=l.Nt,l=l===J?D:J}})(J.Nt,J.Qt,J.Xt)},Zt:k,en:h}})(e),w(new Float32Array(11e4)),A()};return window.onresize=y,window.onpointermove=t=>{f.St[0]=n.L((t.clientX-l.left)/l.width,0,1),f.St[1]=n.L((t.clientY-l.top)/l.height,0,1)},window.onpointerdown=t=>{f.Vt=1},window.onpointerup=t=>{f.Vt=0},window.addEventListener("keydown",t=>{d[t.key]=1,v[t.key]=1}),window.addEventListener("keyup",t=>{v[t.key]=0}),{Bt:async()=>{await s.Fe(),u.addEventListener("click",b),n.N(0).then(()=>{u.style.display="block",y()})}}})(),this.Dt.Bt())}}(e(async(t,o)=>{o.Mt.Ht(2);for(const t of[L,M,x,R,Z,Y])o.Mt.Ht(t===Z||t===Y?4:3),await new Promise(e=>{const n=p(t,e);o.Mt.Et(n)}),o.Mt.Wt(),o.Mt.Ht(t===Z||t===Y?2:1),await new Promise(e=>{const n=E(t,e);o.Mt.Et(n)}),o.Mt.Wt();o.Mt.Wt(),o.Mt.Et((()=>{let t=0;const o=e();o.H=(e,n,o)=>{t+=o};const r=v(s.Z.Te,[.5,.5],[1.2,1.2]);return r.H=(e,o,r)=>{e.B=.05*n.l(5*t)},o.ot.Xe(r),o})())}),{tt:0,ft:null,nt:0})</script>