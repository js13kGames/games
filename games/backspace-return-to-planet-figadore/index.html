<!doctype html><title>BACKSPACE - Return to planet Figadore</title><style>body{background:#000}#wrapper{position:absolute;left:0;top:0;width:100%;height:100%;overflow:hidden}</style><script>function aa(a){var t=0;return function(){return t<a.length?{done:!1,value:a[t++]}:{done:!0}}}function ca(a){if(!(a instanceof Array)){var t="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];a=t?t.call(a):{next:aa(a)};for(var r=[];!(t=a.next()).done;)r.push(t.value);a=r}return a}function da(){this.A=function(a){for(var t=0;24>t;t++)this[String.fromCharCode(97+t)]=a[t]||0;.01>this.c&&(this.c=.01),.18>(a=this.b+this.c+this.e)&&(a=.18/a,this.b*=a,this.c*=a,this.e*=a)}}var ea=new function(){var a,t,r,e,n,i,s,o,h,f,c,u;this.A=new da,this.reset=function(){var a=this.A;e=100/(a.f*a.f+.001),n=100/(a.g*a.g+.001),i=1-a.h*a.h*a.h*.01,s=-a.i*a.i*a.i*1e-6,a.a||(c=.5-a.n/2,u=5e-5*-a.o),o=1+a.l*a.l*(0<a.l?-.9:10),h=0,f=1==a.m?0:(1-a.m)*(1-a.m)*2e4+32},this.L=function(){this.reset();var e=this.A;return a=e.b*e.b*1e5,t=e.c*e.c*1e5,r=e.e*e.e*1e5+12,3*((a+t+r)/3|0)},this.K=function(l,d){var v=this.A,b=1!=v.s||v.v,M=v.v*v.v*.1,x=1+3e-4*v.w,y=v.s*v.s*v.s*.1,A=1+1e-4*v.t,g=1!=v.s,B=v.x*v.x,p=v.g,w=v.q||v.r,m=v.r*v.r*v.r*.2,E=v.q*v.q*(0>v.q?-1020:1020),S=v.p?32+((1-v.p)*(1-v.p)*2e4|0):0,z=v.d,C=v.j/2,D=v.k*v.k*.01,O=v.a,k=a,L=1/a,N=1/t,F=1/r;.8<(v=5/(1+v.u*v.u*20)*(.01+y))&&(v=.8),v=1-v;for(var I,P,T,K,J,U=!1,G=0,R=0,Y=0,q=0,H=0,V=0,Z=0,W=0,Q=0,X=0,$=Array(1024),j=Array(32),_=$.length;_--;)$[_]=0;for(_=j.length;_--;)j[_]=2*Math.random()-1;for(_=0;_<d;_++){if(U)return _;if(S&&++Q>=S&&(Q=0,this.reset()),f&&++h>=f&&(f=0,e*=o),(e*=i+=s)>n&&(e=n,0<p&&(U=!0)),P=e,0<C&&(X+=D,P*=1+Math.sin(X)*C),8>(P|=0)&&(P=8),O||(0>(c+=u)?c=0:.5<c&&(c=.5)),++R>k)switch(R=0,++G){case 1:k=t;break;case 2:k=r}switch(G){case 0:Y=R*L;break;case 1:Y=1+2*(1-R*N)*z;break;case 2:Y=1-R*F;break;case 3:Y=0,U=!0}w&&(0>(T=0|(E+=m))?T=-T:1023<T&&(T=1023)),b&&x&&(1e-5>(M*=x)?M=1e-5:.1<M&&(M=.1)),J=0;for(var aa=8;aa--;){if(++Z>=P&&(Z%=P,3==O))for(I=j.length;I--;)j[I]=2*Math.random()-1;switch(O){case 0:K=Z/P<c?.5:-.5;break;case 1:K=1-Z/P*2;break;case 2:K=.225*((0>(K=1.27323954*(K=6.28318531*(.5<(K=Z/P)?K-1:K))+.405284735*K*K*(0>K?1:-1))?-1:1)*K*K-K)+K;break;case 3:K=j[Math.abs(32*Z/P|0)]}b&&(I=V,0>(y*=A)?y=0:.1<y&&(y=.1),g?(H+=(K-V)*y,H*=v):(V=K,H=0),q+=(V+=H)-I,K=q*=1-M),w&&($[W%1024]=K,K+=$[(W-T+1024)%1024],W++),J+=K}J*=.125*Y*B,l[_]=1<=J?32767:-1>=J?-32768:32767*J|0}return d}};function fa(a){ea.A.A(a);var t=ea.L();a=new Uint8Array(4*((t+1)/2|0)+44),t=2*ea.K(new Uint16Array(a.buffer,44),t);var r=new Uint32Array(a.buffer,0,44);r[0]=1179011410,r[1]=t+36,r[2]=1163280727,r[3]=544501094,r[4]=16,r[5]=65537,r[6]=44100,r[7]=88200,r[8]=1048578,r[9]=1635017060,r[10]=t,t+=44,r=0;for(var e="data:audio/wav;base64,";r<t;r+=3){var n=a[r]<<16|a[r+1]<<8|a[r+2];e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[n>>18]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[n>>12&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[n>>6&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[63&n]}return e}function na(a){var t=a.A<<1&255,r=t+a.L;return 127<a.A&&r++,a.A=255&r,a.L=t,r=r/256+(t=a.K)+a.P&255,a.K=r,a.P=t,r}function d(a){var t=oa,r=na(t);return 255<a&&(r=(r<<8)+na(t)),65535<a&&(r=(r<<8)+na(t)),r%a}function pa(){this.A=[],this.K=this.L=0,this.P=null,this.T=!1}function qa(){var a=f;a.T=!0,window.requestAnimationFrame(a.X.bind(a))}pa.prototype.add=function(a,t){this.A.push({start:a,item:t,done:!1}),this.A.sort((function(a,t){return t.start<a.start?1:t.start==a.start?0:-1}))},pa.prototype.X=function(a){var t=0;if(this.T){if(0==this.L)this.K=a;else{for(var r=a-this.K,e=0;e<this.A.length;e++)!this.A[e].done&&this.A[e].start<r&&(this.A[e].done=!0,this.A[e].item()),this.A[e].done||t++;null!=this.P&&this.P()}this.L=a,(this.L==this.K||0<t)&&window.requestAnimationFrame(this.X.bind(this))}},pa.prototype.reset=function(){this.T=!1,this.A=[],this.K=this.L=0,this.P=null};var ta=window.URL||window.webkitURL;function ua(a){try{var t=fa(a),r=new Audio;r.src=t,r.play(),r.addEventListener("ended",(function(){ta.revokeObjectURL(t)}),!1)}catch(a){}}var va=[0,5385,514,4806,4845,3108,9561,512,9216,2304,16320,4800,2048,192,16384,3072,3135,1030,219,207,230,8297,253,5121,255,231,4608,2560,9216,200,2304,4259,699,247,4751,57,4623,249,241,61,246,4617,30,9328,56,1334,8502,63,243,8255,8435,237,4609,62,3120,10294,11520,5376,3081,57,8448,15,1026,8,256,223,252,216,222,251,5312,399,244,4096,8198,13824,3080,4308,8272,220,1137,391,80,8328,120,28,2064,10260,11520,654,2120,2377,4608,9353,1312],wa=[[10,67,13,69,40,69,43,67,40,64,13,64],[44,66,46,63,44,39,41,36,39,39,41,63],[41,34,44,32,41,8,39,5,36,7,39,31],[5,4,7,6,35,6,37,4,35,1,7,1],[6,34,8,32,6,8,3,5,1,7,3,32],[9,66,11,63,9,39,6,36,4,38,6,63],[7,35,10,38,20,38,22,35,20,33,10,33],[25,35,28,38,38,38,41,35,38,33,28,33],[14,61,21,47,20,39,13,53],[26,63,29,61,27,40,24,37,22,39,23,60],[38,61,38,53,28,39,29,47],[20,32,19,23,9,9,10,18],[24,34,26,32,24,11,21,8,19,10,21,31],[28,32,34,18,34,9,27,23],[47,8,4]];function l(a,t,e,n,i){for(var s=r.Y,o="",h=0;h<e.length;h++){var f=e.charCodeAt(h)-32;if(!(0>f||94<f)){f=va[f]||0;for(var c=0;2>c;c++){o+="<g style='transform:scale(1,-1); transform-origin:center;'",0==c&&(o+=" filter='url(#dblur2)'"),o+=">";for(var u=0;16>u;u++)if(f&1<<u){if(14==u)o+='<circle cx="'+i*wa[u][0]+'" cy="'+i*wa[u][1]+'" r="'+i*wa[u][2];else{o+='<polygon points="';for(var l=0;l<wa[u].length/2;l++)o+=" "+i*wa[u][2*l],o+=","+i*wa[u][2*l+1]}o+='" style="fill:'+(n||"#ff0000")+';stroke:none;" transform="translate('+(a+i*h*52)+" "+(r.ga-t)+')"/>'}o+="</g>"}}}s.innerHTML+=o}var xa=[{t:"chipcube",D:[[-8,10,-10],[-10,10,-8],[-10,10,8],[-8,10,10],[8,10,10],[10,10,8],[10,10,-8],[8,10,-10],[-8,-10,-10],[-10,-10,-8],[-10,-10,8],[-8,-10,10],[8,-10,10],[10,-10,8],[10,-10,-8],[8,-10,-10],[-10,8,-10],[-10,8,10],[10,8,10],[10,8,-10],[-10,-8,-10],[-10,-8,10],[10,-8,10],[10,-8,-10]],N:[[1,2,3,4,5,6,7,8],[16,15,14,13,12,11,10,9],[3,2,17,21,10,11,22,18],[7,6,19,23,14,15,24,20],[17,1,8,20,24,16,9,21],[4,18,22,12,13,23,19,5],[1,17,2],[3,18,4],[5,19,6],[7,20,8],[10,21,9],[12,22,11],[14,23,13],[16,24,15]],O:[1,1,1,1,1,1,1,1,1,1,1,1,1,1],C:10},{t:"tree",D:[[-.5,-4,-.5],[-.5,-4,.5],[.5,-4,.5],[.5,-4,-.5],[-.5,0,-.5],[-.5,0,.5],[.5,0,.5],[.5,0,-.5],[-3,0,-3],[-3,0,3],[3,0,3],[3,0,-3],[0,8,0]],N:[[1,5,8,4],[4,8,7,3],[1,2,6,5],[3,2,6,7],[9,13,12],[12,13,11],[11,13,10],[10,13,9],[9,12,11,10]],O:[9,9,9,9,10,10,10,10,10],C:10},{t:"starship",D:[[-5,-1,-9],[-5,-2,-9],[-3,-2,-7],[-2,-1,-7],[2,-1,-7],[3,-2,-7],[5,-2,-9],[5,-1,-9],[-3,0,-7],[-1,0,-7],[1,0,-7],[3,0,-7],[-3,1,-7],[-1,1,-7],[1,1,-7],[3,1,-7],[-3,0,-8],[-1,0,-8],[-3,1,-8],[-1,1,-8],[1,0,-8],[3,0,-8],[1,1,-8],[3,1,-8],[-5,-2,-7],[5,-2,-7],[-4,-2,-3],[4,-2,-3],[-3,-2,-2],[3,-2,-2],[-3,0,2],[3,0,2],[0,0,9],[-2,1,1],[0,1,5],[2,1,1],[1,2,1],[-1,2,1],[-1,2,0],[1,2,0],[-1,2,-1],[1,2,-1],[-2,2,-3],[2,2,-3],[-2,2,-5],[2,2,-5],[-1,2,-6],[1,2,-6],[0,2,2],[-2,1,-7],[2,1,-7]],N:[[9,13,19,17],[19,20,18,17],[20,14,10,18],[13,14,20,19],[9,17,18,10],[11,15,23,21],[15,16,24,23],[21,23,24,22],[11,21,22,12],[24,16,12,22],[2,25,27,29,4,3],[1,2,25],[1,25,2],[30,28,26,7,6,5],[8,7,26],[8,26,7],[34,35,49,38],[35,36,37,49],[49,37,40,39,38],[35,34,31,33],[32,36,35,33],[33,31,29],[33,32,30],[39,40,42,44,46,48,47,45,43,41],[38,41,29],[38,29,34],[31,34,29],[37,30,42],[37,36,30],[32,30,36],[4,5,33],[4,29,33],[5,30,33],[4,9,13,16,12,5],[50,47,48,51],[45,47,50],[46,51,48],[9,4,29],[12,30,5],[13,9,29],[12,16,30],[29,41,43],[44,42,30],[29,43,45],[46,44,30],[29,45,50],[30,51,46],[29,50,13],[30,16,51]],O:[0,33,0,0,0,0,0,33,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0],C:20},{t:"missile",D:[[-5,5,-25],[5,5,-25],[5,-5,-25],[-5,-5,-25],[0,0,25]],N:[[1,2,3],[3,4,1],[1,5,2],[2,5,3],[3,5,4],[4,5,1]],O:[14,14,14,14,14,14],C:5},{t:"invader",D:[[0,-1,-3],[-2,0,2],[-1,1,3],[1,1,3],[2,0,2],[0,0,-1],[-1,1,2],[0,1,1],[1,1,2],[-1,-1,3],[1,-1,3]],N:[[6,7,8],[9,6,8],[4,3,10,11],[5,4,11],[3,2,10],[5,11,1],[2,1,10],[11,10,1],[3,8,7],[4,9,8],[3,4,8],[4,5,9],[3,7,2],[9,5,6],[2,7,6],[6,5,1],[2,6,1]],O:[4,4,0,38,38,0,0,0,0,0,0,0,0,0,0,0,0],C:50},{t:"moon",D:[[0,0,0]],N:[[1]],O:[15],C:50}],ya=[[102,102,102],[255,0,0],[0,255,0],[0,0,255],[0,255,255],[255,0,255],[255,255,0],[255,255,255],[0,0,0],[127,0,0],[0,127,0],[0,0,127],[0,127,127],[127,0,127],[127,127,0],[204,204,204]],u=Math.PI/180;function za(){this.Y=this.ba=this.T=null,this.J=0,this.B=180,this.G=45,this.H=0,this.U=-600,this.I=5e3,this.d=[],this.A=[],this.z=this.y=this.x=0,this.N=800,this.ga=720,this.X=800/1500,this.L=this.K=0,this.P={x:0,y:600,z:600}}function Aa(a,t,r,e){t*=u,a.d[4]=Math.cos(t),a.d[5]=Math.sin(t),a.d[6]=-a.d[5],a.d[7]=a.d[4],r*=u,a.d[8]=Math.cos(r),a.d[9]=Math.sin(r),a.d[10]=-a.d[9],a.d[11]=a.d[8],e*=u,a.d[0]=Math.cos(e),a.d[1]=Math.sin(e),a.d[2]=-a.d[1],a.d[3]=a.d[0]}function Ba(a,t,r,e){t*=u,a.A[4]=Math.cos(t),a.A[5]=Math.sin(t),a.A[6]=-a.A[5],a.A[7]=a.A[4],r*=u,a.A[8]=Math.cos(r),a.A[9]=Math.sin(r),a.A[10]=-a.A[9],a.A[11]=a.A[8],e*=u,a.A[0]=Math.cos(e),a.A[1]=Math.sin(e),a.A[2]=-a.A[1],a.A[3]=a.A[0]}function Ca(a,t,r,e){a.x=t,a.y=r,a.z=e,a.x*=a.X,a.y*=a.X,a.z*=a.X,a.y*=-1,t=a.x,a.x=t*a.d[4]+a.y*a.d[6],a.y=t*a.d[5]+a.y*a.d[7],t=a.x,a.x=t*a.d[8]+a.z*a.d[10],a.z=t*a.d[9]+a.z*a.d[11],t=a.y,a.y=t*a.d[0]+a.z*a.d[2],a.z=t*a.d[1]+a.z*a.d[3],a.x=a.N*a.x/(a.N+a.z),a.y=a.N*a.y/(a.N+a.z),a.y+=360,a.x+=640,a.K=Math.floor(a.x),a.L=Math.floor(a.y)}function Da(a,t,r){var e=t[0]-a[0],n=t[1]-a[1];t=t[2]-a[2];var i=r[0]-a[0],s=r[1]-a[1];return{x:n*(a=r[2]-a[2])-t*s,y:t*i-e*a,z:e*s-n*i}}function Ia(a){var t=new ArrayBuffer(4),r=new Float32Array(t);return t=new Uint32Array(t),a=.5*(r[0]=a),t[0]=1597463174-(t[0]>>1),(r=r[0])*(1.5-a*r*r)}function Ja(a,t,r,e,n,i,s,o){var h='<polygon points="',f={R:0,S:0,Z:0,aa:""},c=[],u=[],l=[],v=[],b=[],M=[],x=[];if(1==r.length)return 90>a.B||270<a.B||(h='<g style="filter:url(#dblur1)"><circle ',Ca(a,i+t.D[r[0]-1][0]*e,s+t.D[r[0]-1][1]*e,o+t.D[r[0]-1][2]*e),h+='cx="'+a.K+'" cy="'+a.L+'" ',c.push(a.z),h=(h+='r="'+t.C+'"')+'" fill="rgb('+(b=Math.floor(ya[n%16][0])+","+Math.floor(ya[n%16][1])+","+Math.floor(ya[n%16][2]))+')" stroke="rgb('+b+')" /><ellipse cx="'+(a.K-t.C/3)+'" cy="'+(a.L-t.C/3)+'" ',h+='rx="'+t.C/4.5,h=(h+='" ry="'+t.C/4)+'" fill="'+(b=" rgba(20,20,20,0.4)")+'" stroke="'+b+'" /><ellipse cx="'+(a.K+t.C/4)+'" cy="'+(a.L+t.C/4)+'" ',h+='rx="'+t.C/6,h+='" ry="'+t.C/6,h+='" fill="'+(b=" rgba(20,20,20,0.4)")+'" stroke="'+b+'" /></g>',f.S=Math.max.apply(Math,ca(c)),f.R=Math.min.apply(Math,ca(c)),f.Z=f.R+(f.S-f.R)/2,f.aa=h),f;if(2==r.length)return h="<line ",Ca(a,i+t.D[r[0]-1][0]*e,s+t.D[r[0]-1][1]*e,o+t.D[r[0]-1][2]*e),h+='x1="'+a.K+'" y1="'+a.L+'" ',c.push(a.z),Ca(a,i+t.D[r[1]-1][0]*e,s+t.D[r[1]-1][1]*e,o+t.D[r[1]-1][2]*e),h+='x2="'+a.K+'" y2="'+a.L+'"  class="line3d"/>',c.push(a.z),f.S=Math.max.apply(Math,ca(c)),f.R=Math.min.apply(Math,ca(c)),f.Z=f.R+(f.S-f.R)/2,f.aa=h,f;for(var y=0;y<r.length;y++){var A=t.D[r[y]-1][0],g=t.D[r[y]-1][1],B=t.D[r[y]-1][2],p=A;A=p*a.A[4]+g*a.A[6],g=p*a.A[5]+g*a.A[7],A=(p=A)*a.A[8]+B*a.A[10],B=p*a.A[9]+B*a.A[11],A=[A,g=(p=g)*a.A[0]+B*a.A[2],B=p*a.A[1]+B*a.A[3]],u[y]=i+A[0]*e,l[y]=s+A[1]*e,v[y]=o+A[2]*e,Ca(a,u[y],l[y],v[y]),b[y]=a.K,M[y]=a.L,x[y]=a.z,c.push(a.z),h+=a.K+","+a.L+" "}return 0>(b[0]-b[1])*(M[2]-M[1])-(M[0]-M[1])*(b[2]-b[1])&&(f.S=Math.max.apply(Math,ca(c)),f.R=Math.min.apply(Math,ca(c)),f.Z=f.R+(f.S-f.R)/2,f.R>-a.N&&(c=Da(t=[b[0],M[0],x[0]],[b[1],M[1],x[1]],[b[2],M[2],x[2]]),b=a.P.x+a.H-t[0],M=a.P.y+a.U-t[1],t=a.P.z+a.I-t[2],a=c.x*c.x+c.y*c.y+c.z*c.z,0!=(a*=Ia(a))&&(a=1/a,c.x*=a,c.y*=a,c.z*=a),a=b*b+M*M+t*t,0!=(a*=Ia(a))&&(b*=a=1/a,M*=a,t*=a),a=.7*Math.max(0,c.x*b+c.y*M+c.z*t),0>(a+=.18)&&(a=0),1<a&&(a=1),b=Math.floor(ya[n%16][0]*a)+","+Math.floor(ya[n%16][1]*a)+","+Math.floor(ya[n%16][2]*a),16<n&&((n=b.split(","))[0]=""+(parseInt(n[0],10)+d(128)-75),n[1]=""+(parseInt(n[1],10)+d(128)-75),n[2]=""+(parseInt(n[2],10)+d(128)-75),b=n[0]+","+n[1]+","+n[2]),2400<f.S?h+='" style="filter:url(#dblur2)':2300<f.S&&(h+='" style="filter:url(#dblur1)'),f.aa=h+'" fill="rgb('+b+')" stroke="rgb('+b+')" />')),f}function Ka(a,t){var r=[],e=[],n=t.x,i=t.y,s=t.z;return Ba(a,t.J,t.B,t.G),t.N.forEach((function(a,o){1<t.N.length&&null==t.n&&(e[o]=Da(t.D[a[0]-1],t.D[a[1]-1],t.D[a[2]-1])),r.push(Ja(this,t,a,t.C,t.O[o]||7,n+this.H,i+this.U,s+this.I))}),a),null==t.n&&(t.n=e),r}function La(a){var t="";return a.sort((function(a,t){return t.Z-a.Z})),a.forEach((function(a){t+=a.aa})),t}function Ma(){var a=r,t=[];Aa(a,a.J,a.B,a.G),v.forEach((function(a){t=t.concat(Ka(this,a))}),a),a.ba.innerHTML=La(t)}function Na(){var a=r;a.T=document.getElementById("svg"),a.ba=document.getElementById("playfield"),a.Y=document.getElementById("hud")}za.prototype.resize=function(){this.T.style.width=window.innerWidth+"px",this.T.style.height=window.innerHeight+"px"};var Oa=1/60,Pa=0,Ya=0,Za=-1,B=[],E=[],J=[],r=new za,v=[],K={},M={id:null,M:0,F:0},N=0,$a=0,ab=0,bb=0,O=0,P=0,cb=0,Q=[],S=[],db=0,T=1,eb=0,fb=500,gb=300,oa=new function(){this.A=3,this.L=this.K=6,this.P=4},f=new pa,U=0;function V(a){return 0!=(M.M&a)||0!=(M.F&a)}function hb(){if(0!=M.M||0!=M.F){var a=0;V(1)&&!V(4)&&(a=0!=(1&M.F)?J[0]:-1,r.B+=2*a,O=50*-a,P=50*-a),V(4)&&!V(1)&&(a=0!=(4&M.F)?J[0]:1,r.B+=2*a,O=50*-a,P=50*-a),V(2)&&!V(8)?(a=0!=(2&M.F)?J[1]:-1,r.H+=36*a*Math.sin(r.B*u),r.I+=36*a*Math.cos(r.B*u)):(r.H-=15*Math.sin(r.B*u),r.I-=15*Math.cos(r.B*u)),V(8)&&!V(2)&&(a=0!=(8&M.F)?J[1]:1,r.H+=24*a*Math.sin(r.B*u),r.I+=24*a*Math.cos(r.B*u)),0>r.J&&(r.J=360+r.J),0>r.B&&(r.B=360+r.B),0>r.G&&(r.G=360+r.G),360<r.J&&(r.J-=360),360<r.B&&(r.B-=360),360<r.G&&(r.G-=360),V(16)&&0==cb&&5>Q.length&&(a=Y("missile",-r.H,-r.U,-r.I,r.J,r.B,0),v[a].V=100*Math.sin(v[a].B*u),v[a].W=100*Math.cos(v[a].B*u),v[a].ca=180,Q.push(v[a].id),ua([3,-.1273,.6436,.0195,-.1374,.9708,,.0012,-.3374,-.6906,-.4025,.0102,-.6567,.9377,.1812,-.6699,.7458,-.0607,.7014,-.4196,-.8569,.4117,-.3709,.25]),cb=30)}else r.H-=15*Math.sin(r.B*u),r.I-=15*Math.cos(r.B*u);bb!=ab&&(a=bb-ab,r.H+=a*Math.sin((r.B+90)*u),r.I+=a*Math.cos((r.B+90)*u),bb=bb=ab),0<O&&(O-=2<O?2:1),0>O&&(O+=-2>O?2:1),0<P&&(P-=2<P?2:1),0>P&&(P+=-2>P?2:1),20<r.G&&(r.G-=.25)}function qb(a,t,r,e,n,i,s){return t=Math.abs(Math.max(t,n)-Math.min(t,n)),r=Math.abs(Math.max(r,i)-Math.min(r,i)),Math.abs(Math.max(a,e)-Math.min(a,e))<s&&t<s&&r<s}function Z(a){for(var t=0;t<v.length;t++)if(v[t].id==a)return t;return-1}function rb(a,t,r){try{if(-1!=a)for(var e=0;e<v[a].O.length;e++)v[a].O[e]==t&&(v[a].O[e]=r)}catch(a){}}function sb(a){for(var t=0,r=0;r<S.length;r++){var e=Z(S[r]);-1!=e&&v[e].flags==a&&t++}return t}function tb(){for(var a=0;a<S.length;a++){var t=Z(S[a]);-1!=t&&v.splice(t,1)}S=[]}function ub(){switch(r.Y.innerHTML="",U){case 1:l(180,200,"BACKSPACE","gold",2),l(180,300,"RETURN TO PLANET FIGADORE","gold",.7),l(120,700,"WASD/CURSORS/SPACE/ENTER/GAMEPAD TO PLAY","gold",.5);break;case 2:l(1e3,50,"SCORE "+db,"gold",.5),1==eb&&l(300,300,"LEVEL "+T,"gold",2);var a=sb(1),t=sb(0),e=a+t;r.Y.innerHTML+='<rect x="1200" y="100" width="50" height="300" rx="15" fill="black" fill-opacity="0" stroke="rgb(255,215,0)" stroke-width="4"/><rect x="1210" y="110" width="30" height="'+a/e*280+'" rx="5" fill="red" stroke="none" /><rect x="1210" y="'+(110+a/e*280)+'" width="30" height="'+t/e*280+'" rx="5" fill="green" stroke="none" />';break;case 3:0==sb(1)?(l(100,340,"YOU'VE DONE IT","gold",1.5),l(185,480,"PLANET FIGADORE IS SAVED","gold",.7)):(l(350,340,"FAILED","red",2),l(140,480,"TO DISINFECT PLANET FIGADORE","red",.7),l(200,700,"PRESS FIRE TO GO BACK AND TRY AGAIN","gold",.5))}}function vb(a){tb();for(var t=0;t<a;t++){var r=Y("invader",d(1e4)-5e3,800,0-d(1e4),0,d(360),0);t<a/2&&(rb(r,0,1),v[r].flags=1),S.push(v[r].id),v[r].V=25*Math.sin(v[r].B*u),v[r].W=-25*Math.cos(v[r].B*u)}}function wb(){if(2==U)if(0==sb(1)||0==S.length)6==++T?(U=3,T=1,N=$a=0,ub(),tb(),v=[],f.reset(),f.add(1e3,(function(){window.requestAnimationFrame(xb)})),qa()):(eb=1,r.J=0,r.B=180,r.G=45,r.H=0,r.U=-600,r.I=5e3,f.reset(),f.add(2e3,(function(){eb=0})),qa(),fb=500-50*T,gb=300,r.G=45,ua([1,,.0957,.3189,.3562,.5325,,,,,,.5407,.6494,,,,,,1,,,,,.5]),vb(5*T));else{0<gb&&gb--,0<cb&&cb--;for(var a=0;a<Q.length;a++){var t=Z(Q[a]);if(-1!=t&&(v[t].ca--,0>=v[t].ca)){v.splice(t,1),Q.splice(a,1);break}}if(0<S.length&&0==gb)for(a=0;a<S.length;a++){var e=Z(S[a]);if(-1!=e)for(t=0;t<S.length;t++){var n=Z(S[t]);if(-1!=n){var i=v[e],s=v[n];if(1==i.flags&&0==s.flags){if(qb(i.x,i.y,i.z,s.x,s.y,s.z,150)){if(rb(n,0,1),v[n].flags=1,sb(1)==S.length)return ua([2,-.8487,.4388,.0386,.8212,.0033,,.0239,.842,.9778,-.7578,.632,.2456,-.5832,-.0135,.4773,-.0882,.0027,.7743,.8443,-.8965,.0863,-.9315,.25]),U=3,T=1,N=$a=0,ub(),tb(),v=[],f.reset(),f.add(1e3,(function(){window.requestAnimationFrame(xb)})),void qa();ua([1,-.3997,.4534,.4353,-.3988,.6939,,-.2292,.0213,.5732,.2278,.7962,-.8172,-.3081,-.917,.7628,-.3341,.069,.9999,-.0474,-.9969,,-.1301,.5])}}else 0==i.flags&&1==s.flags&&qb(i.x,i.y,i.z,s.x,s.y,s.z,375)&&(i=v[e].B,v[e].V=5*Math.sin(i*u),v[e].W=-5*Math.cos(i*u))}}}for(n=0;n<Q.length;n++)if(-1!=(t=Z(Q[n]))){for(v[t].B=Ya%360,a=0;a<S.length;a++)if(-1!=(e=Z(S[a]))&&(s=v[t],1==(i=v[e]).flags&&qb(s.x,s.y,s.z,i.x,i.y,i.z,fb))){v.splice(t,1),Q.splice(n,1),rb(e,1,0),1==v[e].flags&&ua([2,.0016,.0106,.3845,.4799,.8265,,,-.5788,-15.1307,-.5269,.6409,-.5847,-.795,.0018,.6167,-.0092,-.5819,.9686,.0028,-.5964,.4727,-5e-4,.5]),v[e].flags=0,db++,t=-1;break}if(-1==t)break}for(hb(),(-5e3>r.H||5e3<r.H||0>r.I||1e4<r.I)&&(r.H=0,r.I=5e3),v[M.id].x=-r.H,v[M.id].y=-r.U,v[M.id].z=-r.I,v[M.id].J=-r.J,v[M.id].B=-r.B,v[M.id].G=0,v[M.id].J+=O,v[M.id].B+=P,v[M.id].G+=0,v.forEach((function(a){a.x+=a.V,a.y+=a.ea,a.z+=a.W})),a=0;a<S.length;a++)-1!=(e=Z(S[a]))&&(i=v[e].B,10>d(250)&&(i=(v[e].B+(d(50)-25))%360,v[e].B=i,v[e].V=25*Math.sin(i*u),v[e].W=-25*Math.cos(i*u)),-5e3>v[e].x||-1e4>v[e].z||5e3<v[e].x||0<v[e].z)&&(i=(v[e].B+180+d(45))%360,v[e].B=i,v[e].V=25*Math.sin(i*u),v[e].W=-25*Math.cos(i*u),v[e].x+=v[e].V,v[e].z+=v[e].W);ub()}}function yb(a){if(0<Ya){if((Pa+=(a-Ya)/1e3)>Oa&&900<Pa/Oa&&(Pa=2*Oa),navigator.getGamepads){for(var t=navigator.getGamepads(),r=0,e=!1,n=!1,i=!1,s=!1,o=!1,h=0;h<t.length;h++)if(0==r&&t[h]&&t[h].connected){r++,Za!=h&&(Za=h,"standard"===t[h].mapping?(B[0]=14,B[1]=15,B[2]=12,B[3]=13,B[4]=0,E[0]=0,E[1]=1,E[2]=2,E[3]=3):"054c-0268-Sony PLAYSTATION(R)3 Controller"==t[h].id?(B[0]=15,B[1]=16,B[2]=13,B[3]=14,B[4]=0,E[0]=0,E[1]=1,E[2]=3,E[3]=4):"045e-028e-Microsoft X-Box 360 pad"==t[h].id?(B[0]=-1,B[1]=-1,B[2]=-1,B[3]=-1,B[4]=0,E[0]=6,E[1]=7,E[2]=3,E[3]=4):"0f0d-00c1-  Switch Controller"==t[h].id?(B[0]=-1,B[1]=-1,B[2]=-1,B[3]=-1,B[4]=1,E[0]=4,E[1]=5,E[2]=2,E[3]=3):"054c-05c4-Sony Computer Entertainment Wireless Controller"==t[h].id?(B[0]=-1,B[1]=-1,B[2]=-1,B[3]=-1,B[4]=0,E[0]=0,E[1]=1,E[2]=3,E[3]=4):(B[0]=-1,B[1]=-1,B[2]=-1,B[3]=-1,B[4]=-1,E[0]=-1,E[1]=-1,E[2]=-1,E[3]=-1));for(var f=0;f<t[h].axes.length;f++){var c=t[h].axes[f];f==E[0]&&(J[0]=c,-.5>c&&(e=!0),.5<c&&(n=!0)),f==E[1]&&(J[1]=c,-.5>c&&(i=!0),.5<c&&(s=!0)),f==E[2]&&(J[2]=c),f==E[3]&&(J[3]=c)}for(f=0;f<t[h].buttons.length;f++){var u=1==(c=t[h].buttons[f]);if("object"==typeof c&&(u=c.pressed),u)switch(f){case B[0]:e=!0;break;case B[1]:n=!0;break;case B[2]:i=!0;break;case B[3]:s=!0;break;case B[4]:o=!0}}M.F=i?2|M.F:-3&M.F,M.F=s?8|M.F:-9&M.F,M.F=e?1|M.F:-2&M.F,M.F=n?4|M.F:-5&M.F,M.F=o?16|M.F:-17&M.F}0==r&&-1!=Za&&(Za=-1)}for(;Pa>Oa;)wb(),Pa-=Oa;Ma()}Ya=a,2==U&&window.requestAnimationFrame(yb)}function zb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(a){var t=16*Math.random()|0;return("x"==a?t:3&t|8).toString(16)}))}function Ab(a,t,r,e,n,i,s){return(a=JSON.parse(JSON.stringify(a))).id=zb(),a.x=t,a.y=r,a.z=e,a.J=n,a.B=i,a.G=s,a.V=0,a.ea=0,a.W=0,a.flags=0,v.push(a),v.length-1}function Bb(a,t){switch(a.which){case 37:case 65:case 90:M.M=1==t?1|M.M:-2&M.M,a.preventDefault();break;case 38:case 87:case 59:M.M=1==t?2|M.M:-3&M.M,a.preventDefault();break;case 39:case 68:case 88:M.M=1==t?4|M.M:-5&M.M,a.preventDefault();break;case 40:case 83:case 190:M.M=1==t?8|M.M:-9&M.M,a.preventDefault();break;case 13:case 32:M.M=1==t?16|M.M:-17&M.M,a.preventDefault();break;case 27:a.preventDefault()}1==t&&(N=a.which)}function Y(a,t,r,e,n,i,s){for(var o=0;o<xa.length;o++)if(xa[o].t==a)return Ab(xa[o],t,r,e,n,i,s)}function xb(){if(1==U&&(Ma(),v[0].J=(v[0].J+2)%360,v[0].B=(v[0].B+2)%360,v[0].G=(v[0].G+1)%360,150>v[0].C&&v[0].C++),N!=$a)switch(U){case 1:f.reset(),db=0,T=1,N=$a=0,tb(),v=[];for(var a={t:"terrain",fa:10,d:10,da:100,$:[],D:[],N:[],O:[],C:10,x:0,y:0,z:0},t=0;10>t;t++)for(var e=0;10>e;e++)a.$[10*t+e]=0<e?a.$[10*t+(e-1)]+(d(16)-8):d(32),a.D.push([100*e-500,a.$[10*t+e],-100*t]);for(t=1;10>t;t++)for(e=1;10>e;e++){var n=10*t+e+1;a.N.push([n,n-1,n-10-1]),a.O.push(2),a.N.push([n,n-10-1,n-10]),a.O.push(2)}for(K=a,a=0;10>a;a++)for(t=0;10>t;t++)5>d(10)&&Y("tree",(t-5)*K.da*K.C,(4+K.$[a*K.fa+t])*K.C,-a*K.da*K.C,0,d(90),0);Y("moon",200,900,-5e4,0,0,0),M.id=Y("starship",0,0,0,0,0,0),Y("chipcube",200,200,-200,10,10,10),Ab(K,0,0,0,0,0,0),vb(5),r.J=0,r.B=180,r.G=45,r.H=0,r.U=-600,r.I=5e3,U=2,window.requestAnimationFrame(yb);break;case 2:break;case 3:Cb();break;default:$a=N}else window.requestAnimationFrame(xb)}function Cb(){U=1,N=$a=0,ub(),tb(),v=[],Y("invader",0,0,0,0,0,0),v[0].C=.1,r.J=0,r.B=0,r.G=0,r.H=0,r.U=0,r.I=0,Ma(),f.reset(),f.add(1e3,(function(){window.requestAnimationFrame(xb)})),qa()}function Db(){document.onkeydown=function(a){Bb(a=a||window.event,1)},document.onkeyup=function(a){Bb(a=a||window.event,0)},window.A=function(a){(a=a||window.event).preventDefault()},Na(),window.addEventListener("resize",(function(){r.resize()})),window.addEventListener("mousemove",(function(a){ab=a.clientX})),r.resize(),Cb()}window.onload=function(){Db()}</script><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" name=viewport><div id=wrapper><svg id=svg style=position:absolute;top:0;left:0;width:1280px;height:720px viewbox="0 0 1280 720" xmlns=http://www.w3.org/2000/svg><defs><filter id=dblur1><feGaussianBlur stdDeviation=1 /></filter><filter id=dblur2><feGaussianBlur stdDeviation=2 /></filter><filter id=dblur3><feGaussianBlur stdDeviation=3 /></filter><filter id=dblur4><feGaussianBlur stdDeviation=4 /></filter><clipPath id=crop><rect height=720 width=1280 x=0 y=0 /></clipPath><linearGradient id=skygradient x1=0% x2=0% y1=0% y2=100%><stop offset=0% style=stop-color:rgb(0,0,0);stop-opacity:1 /><stop offset=100% style=stop-color:rgb(42,82,152);stop-opacity:1 /></linearGradient></defs><rect height=720 width=1280 fill=url(#skygradient) /><g clip-path=url(#crop) id=playfield shaperendering=optimizeSpeed></g><g clip-path=url(#crop) id=hud shaperendering=optimizeSpeed></g></svg></div>