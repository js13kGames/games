<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
<style type="text/css">#layer-3d{perspective:390px;perspective-origin:50%}#game-plane{width:1200px;height:660px;top:0;left:0;transform-style:preserve-3d;transform:rotateX(96deg) translateZ(-82px) translateY(64px) scaleY(.8) scaleX(.5)}#layer-3d *{position:absolute;transform-style:preserve-3d}#console{right:12rem;top:1rem;width:100px;height:20px;padding:.5rem;background:#fff;color:#111;position:absolute;display:none}#layer-ui{background:#444;border-left:32px solid #333;box-sizing:border-box;transition:all 1s cubic-bezier(.36,-.64,.34,1.76);top:0;z-index:10000}.ui-hide{transform:translateY(-100%)}#guide{top:280px;left:60px;color:#777;font-size:12px}#guide div{position:relative;display:block;margin-top:1rem}#guide span{border:1px solid #585858;border-radius:4px;color:#777;padding:8px 16px;text-transform:uppercase;box-shadow:0 3px #585858;display:inline-block;margin-right:2px}#ff{display:none!important}#intro{color:#bbb;font-size:16px;font-weight:700;top:50px;left:60px;text-shadow:1px 2px 1px rgba(0,0,0,.2);width:700px;line-height:24px;letter-spacing:-1px}#intro div{margin-top:12px}button{font-size:14px;padding:1rem 3rem;text-decoration:none;color:#008dc1;color:#444;background-color:#fff;border:0;outline:0;cursor:pointer;font-family:Arial,SansSerif;letter-spacing:2px;top:190px;left:60px}button:hover{transition:all .2s;background-color:#008dc1;color:#fff}.logo{font-family:Arial,SansSerif;font-size:200px;font-weight:700;letter-spacing:-40px;top:480px;left:189px}#a2,.logo{color:#50bfe1}#a2{left:500px;opacity:.8;background:linear-gradient(330deg,#e05252,#99e052 25%,#52e0e0 50%,#9952e0 75%,#e05252);-webkit-background-clip:text;-webkit-text-fill-color:transparent}#uibg{position:absolute;top:270px;right:-300px}@keyframes k-slide{0%{opacity:1}to{transform:rotate(-10deg) scale3d(1.7,1.7,1)}}#stats{background-color:rgba(10,41,65,.4);position:absolute;bottom:16px;right:0;height:40px;font-weight:700;padding:8px 16px;border-left:4px solid rgba(10,41,65,.8)}#stats span:nth-child(2n){font-size:9px}#stats span:nth-child(odd){display:inline-block;text-align:right;width:20px}*{margin:0;padding:0}body,html{width:100%;height:100%;background-color:#000;font-family:Courier New}body{display:flex;flex-direction:column;justify-content:center;align-items:center;transition:background-color 1s ease-in;overflow:hidden}body.in-game{background-color:#000}.hide{display:none!important}#app-container{position:relative;background-color:#fff}#app-container,.game-layer{width:1200px;height:660px;overflow:hidden}.game-layer{display:block;top:0;left:0}.game-layer,.game-layer>*{position:absolute}.a_sink #game-plane{transform:rotateX(110deg) translateZ(-82px) translateY(72px) scaleY(.8) scaleX(.5)}.a_hit{animation:.3s ease k_hit}.a_over #fader{opacity:1}#fader{transition:opacity 3s ease;background-color:#fff;width:1200px;height:660px;opacity:0;pointer-events:none}@keyframes k_end{0%{filter:blur(0) brightness(100%)}10%{filter:blur(0) brightness(110%)}52%{filter:blur(5px) brightness(150%)}to{filter:blur(5px) opacity(20%)}}@keyframes k_hit{0%{filter:blur(0) brightness(100%)}30%{transform:translateX(-2px) rotate(.5deg)}40%{transform:translateZ(2px) rotate(-.5deg);filter:blur(10px) brightness(120%) hue-rotate(140deg)}70%{transform:translateZ(-2px) rotate(.5deg)}to{filter:blur(0) brightness(100%) hue-rotate(0deg)}}.c_hero>.c_seg{border:none}.c_hero *{border-radius:2px;border:1px solid rgba(0,0,0,.2)}.c_torso{background-color:#8f1526}.c_left-leg,.c_right-leg{background-color:#363636}.c_left-leg .c_lower,.c_right-leg .c_lower{background-color:#444}.c_left-leg .c_foot:after,.c_right-leg .c_foot:after{background-color:#151a1c;width:40px;height:20px;border-radius:4px;content:"";display:block;transform:rotateX(90deg)}.c_left-arm,.c_right-arm{background-color:#8f1526}.c_left-arm .c_lower,.c_right-arm .c_lower{background-color:#444}.c_left-arm .c_lower .c_hand,.c_right-arm .c_lower .c_hand{background-color:#ffcc6b}.c_head{background-color:transparent;border:none}.c_head:after{width:12px;height:40px;border-radius:16px;content:"";display:block;transform:rotateY(90deg);border:1px solid rgba(0,0,0,.2);border-left:16px solid #7c411c}.c_hair,.c_head:after{background-color:#a75826}.c_hair{border-top:none}.c_hair.c_0:after,.c_hair.c_1:after{content:"";display:block;width:0;height:0;border-style:solid;border-width:20px 0 0 40px;border-color:transparent transparent transparent #a75826;transform:translateX(-19px) translateY(14px) scaleY(1) rotate(250deg)}.c_cape{background-color:#751120;border-top:none}.c_cape.c_0:after,.c_cape.c_1:after{content:"";display:block;width:0;height:0;border-style:solid;border-width:20px 0 0 40px;border-color:transparent transparent transparent #751120;transform:translateX(4px) translateY(22px) scaleY(1.8) rotate(250deg)}#hero{width:200px;height:260px;top:264px;left:50%;position:absolute;transform-origin:0 50%;transition:top 2s}.b_shadow{background:radial-gradient(ellipse at center,rgba(0,0,0,.5) 20%,rgba(0,0,0,.1) 70%,transparent 100%);border-radius:16px;transform:scaleY(1.2)}.b_plate{background-color:#fff}.b_plate:before{display:block;content:"";background-color:rgba(18,79,123,.5);position:absolute;transform:translateZ(-4px);width:120px;height:60px;text-align:center;color:#008dc1;font-weight:700}.b_plate.b_4,.b_plate.b_5{opacity:0;transition:opacity .5s}.b_plate.b_4:before{content:"MERGE WITH CERBERUS"}.b_plate.b_4:before,.b_plate.b_5:before{padding:16px;background-color:hsla(0,0%,100%,.3);border-top:4px solid #fff;transform:rotateX(270deg) translateY(-54px) translateX(-40px)}.b_plate.b_5:before{content:"FIGHT CERBERUS"}.b_plate.b_6:before{padding:16px;content:"SHUTDOWN CERBERUS";background-color:#48dd7d;border-top:4px solid #2e8f52;color:#fff;transform:rotateX(270deg) translateY(-20px) translateX(40px)}.b_plate.b_6:nth-child(2n):before{display:none}.b_turret{background:linear-gradient(180deg,rgba(228,245,252,0) 20%,#e4f5fc);border-left:4px solid rgba(75,198,225,.9);transform-origin:0 0;transform:rotateX(90deg) translateY(-400px)}.b_turret-head{background-color:#fff;border-top:4px solid rgba(75,198,225,.7);border-bottom:2px solid hsla(0,0%,100%,.7);transition:all 1s cubic-bezier(.36,-.64,.34,1.76);transform:translateY(500px)}.b_turret-head.fire{background-color:red;height:40px!important}.b_missile{background-color:red;border-radius:4px;transform-origin:50% 50%;transform:rotateX(90deg) translateY(20px);display:none}.b_missile:before{display:block;content:"";background-color:rgba(255,0,0,.1);position:absolute;transform:rotateX(270deg) translateZ(-14px);width:12px;height:12px;border-radius:12px}#w_fog{top:0;left:400px;height:80px;width:400px;background:radial-gradient(ellipse at center,hsla(0,0%,100%,.85) 20%,hsla(0,0%,100%,0) 70%);transform:rotateX(90deg) rotate(0deg) translateY(10px) scaleX(3) scaleY(2);display:none}.in-game #w_fog{display:block}.b_fog{background:linear-gradient(180deg,rgba(228,245,252,0) 20%,#e4f5fc 40%,#bfe8f9 55%,rgba(42,176,237,0) 80%);opacity:.95;z-index:20}@keyframes kf-hov{0%{transform:translateZ(1px)}to{transform:translateZ(0)}}#b_base{width:1200px;height:660px;transform-origin:50% 50%}#b_lake{top:400px}#b_tower{top:0;left:300px;overflow:hidden;width:600px;height:400px}.b_cliff{z-index:10;top:20px}.b_cliff.b_1{left:880px}.b_twr-beam{mix-blend-mode:screen;height:400px;width:4px;left:296px;background-color:#fff;box-shadow:0 0 5px #fff;opacity:.6;transition:all .7s}.a_over .b_twr-beam{display:none}.b_ship{width:18px;height:2px;background-color:#082539}.b_ship:after{position:absolute;top:-6px;left:5px;color:#082539;font:700 14px Courier New;content:"W"}.b_omega-root{animation:3s ease k_mv infinite alternate forwards}.b_omega{transform:translateY(-300px);transition:transform 3s cubic-bezier(.36,-.64,.34,1.76)}.boss .b_omega{transform:translateY(20px)}.boss #b_base{transition:opacity 2s ease;opacity:.4}.a_over #w_fog,.boss #w_fog{display:none}@keyframes k_mv{0%{transform:rotateX(65deg) translateY(70px)}50%{transform:rotate(5deg) rotateX(70deg) translateY(70px) translateX(20px)}to{transform:rotate(-7deg) rotateX(87deg) translateY(50px)}}.b_omega-fg{background-color:red;top:300px;left:500px}.b_omega-x{background-color:#fff;transform:translateZ(-20px);box-shadow:0 0 25px #fff}.b_omega-x.closed{background-color:rgba(10,41,65,.38);box-shadow:none}.b_omega-tile{background-color:#04131e;transition:all .5s}#msgs{height:400px;width:340px;top:320px;left:16px;line-height:21px}#msgs,#msgs .msg{position:absolute}#msgs .msg{top:160px;right:0;color:#cfcfcf;font-weight:400;font-size:12px;background-color:#000;padding:16px 20px;display:inline-block;transition:all .5s cubic-bezier(.36,-.64,.34,1.76);transform:translateX(-300px)}.msg:not(.c1):after{content:"";position:absolute;width:0;height:0;left:0;bottom:-20px;border:20px solid;border-color:transparent transparent transparent #000}.c1{opacity:.4}.end{background-color:rgba(255,0,0,.9)!important;padding:24px 20px!important;font-weight:700!important;font-size:14px!important;color:#fff!important}.end:after{display:none}#msgs .msg.boss{background-color:rgba(89,24,112,.9);text-shadow:0 0 .2em #87f,0 0 .2em #87f,0 0 .2em #87f}.msg.boss:not(.c1):after{border-color:transparent transparent transparent #591870}@-moz-document url-prefix(){.b_fog{mix-blend-mode:normal}#ff{display:block!important}.a_hit{animation:.3s ease k_hit2}.a_hit #fader{transition:.1s;opacity:.4}@keyframes k_hit2{30%{transform:translateX(-2px) rotate(.5deg)}40%{transform:translateZ(2px) rotate(-.5deg)}70%{transform:translateZ(-2px) rotate(.5deg)}}}</style></head>
<body>
<div id="app-container">
    <div id="layer-3d" class="game-layer">
        <div id="b_base">
            <canvas id="b_stars" width="1200px" height="660px"></canvas>
            <canvas id="b_lake" width="1200px" height="260px"></canvas>
            <div id="b_tower"></div>
        </div>
        <div id="game-plane">
            <div id="w_fog"></div>
        </div>
        <div id="fader"></div>
        <div id="hero">
        </div>
    </div>
    <div id="layer-comms">
        <div id="msgs"></ul></div>
        <div id="stats">
            <div id="dist">
                <span id="distEl"></span>
                <span>DISTANCE TO TARGET</span></div>
            <div id="health">
                <span id="healthEl"></span>
                <span>HEALTH</span>
            </div>
            <div id="console"></div>
        </div>
    </div>
    <div id="layer-ui" class="game-layer">
        <img id="uibg"/>
        <div class="logo">
            <span id="a1">VEDA'S</span><span id="a2">RUN</span>
        </div>
        <div id="intro">
            I'm <strong>Veda</strong>, last of the Tech Savants. It's been 12 years since the Machines took over. The world is unrecognizable now, humanity is on it's last breath. <strong>Cerberus</strong> has completed the Quantum Tower. All is lost if the Machines turn it on. <div>It has to be shut down. This ends <strong>now</strong>.</div>
        </div>
        <button autofocus id="btn-start">START GAME</button>
        <div id="guide">
            <div><span>&#8593;</span><span>&#8595;</span><span>&#8592;</span><span>&#8594;</span> to move</div>
            <div><span>SPACE</span> while moving to jump</div>
            <div><span>F11</span> toggle fullscreen</div>
            <div id="ff">Chrome is recommended for higher fidelity effects and fps</div>
        </div>

    </div>
</div>
<script type="text/javascript">!function(t){function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,i){"use strict";function s(t,e,i){return[t,660-(660*i+(660-e)-C.tz)]}function n(t,e,i,s,n,h,o){t.strokeStyle="rgba(0,0,0,0.1)",t.globalAlpha=1;for(var l=0;l<o.length-1;l++){var c=o[l][0]*i,u=o[l][1]*s,f=o[l+1][0]*i,d=o[l+1][1]*s;if(c!==f){var m=t.createLinearGradient(c,e-u,c,e);m.addColorStop(0,r(n,30*o[l][2])),m.addColorStop(1,r(h,30*o[l][2])),t.fillStyle=m,t.beginPath(),t.moveTo(c,e),t.lineTo(c,e-u),t.lineTo(f,e-d),t.lineTo(f,e),t.fill()}}t.globalCompositeOperation="source-atop",t.globalAlpha=.7,null===C.tx_fuzzy&&(C.tx_fuzzy=a("#4DA9CF")),t.drawImage(C.tx_fuzzy,0,0,400,e)}function a(t){var e=l(null,"canvas","x",0,256,32),i=e.getContext("2d");i.globalCompositeOperation="hard-light",i.fillStyle=t;for(var s=0;s<256;s++)i.globalAlpha=c(1,10)/10,i.fillRect(s,0,1,c(16,32)),i.filter="blur(1px)";return e}function r(t,e){return t=t.indexOf("#")>=0?t.substring(1,t.length):t,e=parseInt(255*e/100),"#"+h(t.substring(0,2),e)+h(t.substring(2,4),e)+h(t.substring(4,6),e)}function h(t,e){var i=parseInt(t,16)+e,s=i>255?255:i;return s=s.toString(16).length>1?s.toString(16):"0"+s.toString(16)}function o(t){return document.getElementById(t)}function l(t,e,i,s,n,a,r,h){var o=document.createElement(e);return void 0!==n&&(o.width=n,o.height=a,o.style.width=n+"px",o.style.height=a+"px"),void 0!==r&&(o.style.left=r+"px",o.style.top=h+"px"),o.className="b_"+i,void 0!==s&&o.classList.add("b_"+s),t?t.appendChild(o):o}function c(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}function u(t,e,i){return Math.abs(t-e)<i}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var C={isRunning:!1,fps:60,vx:0,vy:0,vw:1200,vh:660,grid:60,game:null,plane:null,player:null,comms:null,status:2,pressedKeys:{},objects:[],omega:null,ix:0,iy:0,iz:0,tz:0,ts:0,vfx:!0,text:!0,doChecks:!0,attack:!0,speed:4,intro:!0,map:[],tx_fuzzy:null,console:null,log:function(t){C.console.style.display="block",C.console.innerText=t}};!function(){Math.clamp=function(t,e,i){return Math.max(e,Math.min(i,t))},Math.pong=function(t,e,i){var s=Math.clamp(t,e,i);return s===i?e:s},Math.toggle=function(){return Math.random()>=.5},Math.within=function(t,e,i){return Math.abs(t-e)<=i}}();var k={LEFT:37,RIGHT:39,UP:38,DOWN:40,SPACE:32},M=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),L=function(){function t(){f(this,t)}return M(t,null,[{key:"init",value:function(){o("layer-ui")&&(C.intro||(o("layer-ui").style.display="none"),o("btn-start").addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),document.body.classList.add("in-game"),o("layer-ui").classList.add("ui-hide"),setTimeout(function(){return C.game.startLoop()},750)}))}}]),t}(),A=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),I=function(){function t(){d(this,t),this.fps=0,this.prevTs=0,this.frames=0,this.canvas=document.createElement("canvas"),this.canvas.width=80,this.canvas.height=40,this.canvas.style.cssText="position:absolute; top: 8px; right: 8px;opacity: 0.5;",document.body.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.ctx.font="16px san-serif"}return A(t,[{key:"update",value:function(){this.frames++;var t=performance.now();0===this.prevTs&&(this.prevTs=t),t-this.prevTs>=1e3&&(this.fps=this.frames,this.frames=0,this.prevTs=t)}},{key:"render",value:function(){this.ctx.fillStyle="#111",this.ctx.fillRect(0,0,80,40),this.ctx.fillStyle="#69a6ff",this.ctx.fillText(this.fps,8,32)}}]),t}(),_=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),z=0,S=function(){function t(e,i,n,a){m(this,t),this.segNum=i;var r=s(n,a,i);this.prevTz=C.iz,this.x=r[0],this.y=r[1],this.bx=n,this.by=a,this.xInc=0,this.yInc=0,this.tX=0,this.tY=660,this.absX=0,this.el=l(e,"div","turret",z,8,900,n,a),this.elHead=l(this.el,"div","turret-head",z,20,20,-5,10),this.missile=l(o("game-plane"),"div","missile",z,6,3,this.x,this.y),this.pos=500,this.busy=0,this.missileActive=0,this.coasting=!1,this.parent=e,z++,this.isActive=!0}return _(t,[{key:"destroy",value:function(){this.isActive=!1,this.el.remove(),this.elHead.remove(),this.missile.remove()}},{key:"update",value:function(){var t=this;C.ts%20==0&&0===this.busy&&0===this.missileActive&&Math.toggle()?(C.attack&&(this.addMissile(),this.elHead.classList.add("fire")),setTimeout(function(){t.pos=c(300,800),t.elHead.classList.remove("fire")},500),this.busy=200):this.busy>0&&(this.busy=Math.max(0,this.busy-1)),this.elHead.style.transform="translateY("+this.pos+"px)",this.missileActive>0&&(this.y+=this.yInc+C.iz,this.missile.style.top=this.y+"px",this.x+=this.xInc-C.ix,this.missile.style.left=this.x+"px",this.missileActive=Math.max(0,this.missileActive-1),this.coasting||0!==this.missileActive?this.coasting&&0===this.missileActive&&(this.coasting=!1,this.missile.style.display="none"):C.player.checkHit(this.absX)?this.missile.style.display="none":(this.coasting=!0,this.missileActive=5))}},{key:"addMissile",value:function(){this.missileActive=100;var t=s(this.bx,this.by,this.segNum);this.x=this.bx-C.tx,this.y=t[1],this.tX=600,this.tY=660,this.absX=this.tX-C.tx,this.xInc=(this.tX-this.x)/this.missileActive,this.yInc=(this.tY-this.y)/this.missileActive,this.tY-this.y>100&&(this.missile.style.display="block")}}]),t}(),E=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),F=["0001111000,0000110000,0000110000,0000110000,0000110000,0000110000,0000110000,0000110000,0000000000,0000110000","0000110000,0000110000,0000110000,0000000000,0000000000,0000000000,0000110000,0001111000,0001111000,0001111000","0001111000,0001111000,0077777700,0077777700,0077777700,0077777700,0077777700,0077777700,0077777700,0077777700","0001111000,0011111100,0011111100,0000000000,0000000000,0000000000,0000000000,0000000000,0001111000,0001111000","0001111000,0000000000,0000000000,0000000000,0000000000,0000000000,0000000000,0077777700,0077777700,2221111222","0011111100,0011001100,0011001100,0011001100,0011111100,0000110000,0000110000,0000110000,0000110000,0000110000","","","0077777700,0077777700,0011111100,2000000002,2000000002,0011111100,0077777700,0077777700,0077777700,0077777700","0001111000,0001111000,0011000000,0011000000,0011000000,0011110000,0000110000,0000110000,0000110000,0000110000","0077777700,0077777700,0077777700,0000000000,0000000000,0077777700,0077777700,0077777700,0077777700,0077777700","0000110000,0000110000,0000110000,0000110000,0000110000,0000110000,0000110000,0000110000,1111111111,1000000001","1000000001,1000000001,1000000001,1000000001,4000000005,2222222222,0000110000,0000110000,0000110000,0000110000","0000110000,0000110000,0000110000,0000110000,0000110000,0000110000,0000110000,0000660000,0000110000,0000110000","x"],R=function(){function t(){g(this,t),this.x=0,this.y=0,this.z=0,this.mesh=o("game-plane"),this.segmentWidth=1200,this.segmentLength=660,this.maxSegments=14,this.horizTiles=10,this.vertTiles=10,this.gsW=this.segmentWidth/this.horizTiles,this.gsH=this.segmentLength/this.vertTiles,this.mapLength=this.segmentLength*this.maxSegments,this.segs=[l(this.mesh,"div","segment",0,1200,660,0,0),l(this.mesh,"div","segment",1,1200,660,0,0)],this.shadow=l(this.mesh,"div","shadow",0,24,24,588,638),this.activeSeg=0,this.renderSegment(0,0),this.renderSegment(1,1)}return E(t,[{key:"renderSegment",value:function(t,e){var i=this.segs[t];for(C.objects.forEach(function(t){t.parent===i&&t.destroy()}),C.objects=C.objects.filter(function(t){return t.isActive});i.hasChildNodes();)i.removeChild(i.lastChild);for(var s=0;s<this.vertTiles;s++){for(var n=[],a=0;a<this.horizTiles;a++)n.push(this.getTile(t,s,a,e));C.map.push(n)}}},{key:"getTile",value:function(t,e,i,s){var n=0,a=F[s];if(a.length>1){var r=a.split(",")[e][i];n="7"===r?Math.toggle()?1:0:parseInt(r)}else""===a&&(n=Math.toggle()?1:0);switch(n){case 1:case 4:case 5:case 6:l(this.segs[t],"div","plate",n,this.gsW,this.gsH,i*this.gsW,(this.vertTiles-e-1)*this.gsH);break;case 2:C.objects.push(new S(this.segs[t],s,i*this.gsW+this.gsW/2,(this.vertTiles-e-1)*this.gsH+this.gsH/2))}return n}},{key:"update",value:function(){this.x=this.x-C.ix,this.z=Math.max(this.z+C.iz,0),C.tz=this.z;var t=this.z%this.segmentLength,e=Math.floor(this.z/this.segmentLength),i=e%2,s=Math.abs(i-1);i!==this.activeSeg&&(this.renderSegment(s,e+1),this.activeSeg=i),this.segs[i].style.transform="translateX("+this.x+"px) translateY("+t+"px)",this.segs[s].style.transform="translateX("+this.x+"px) translateY("+(-this.segmentLength+t)+"px)",C.iy>0&&(this.mesh.style.transform="rotateX(97deg) translateZ("+(-82-C.iy)+"px) translateY(72px) scaleY(0.8) scaleX(0.5)")}},{key:"reset",value:function(){this.x=0,this.y=0,this.z=0,C.map=[],this.activeSeg=0,this.renderSegment(0,0),this.renderSegment(1,1)}}]),t}(),P=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),H=function(){function t(e,i){p(this,t),this.isFlying=!1,this.trigger=c(2,20),this.el=l(e,"div","ship",i),this.reset()}return P(t,[{key:"reset",value:function(){this.trigger=c(2,20),this.el.style.transition="none",this.isFlying=!1,this.el.style.opacity=1,this.el.style.transform="rotate("+2*-this.trigger+"deg) translateX("+(140*this.trigger-600)+"px) translateY("+(-20-10*this.trigger)+"px) scaleX(3) scaleX(3)"}},{key:"update",value:function(){var t=this;this.isFlying||C.ts%(50+this.trigger)!=0||(this.el.style.transition="all "+(3+this.trigger/3)+"s ease",this.el.style.opacity=0,this.el.style.transform="rotate(10deg) translateX(700px) translateY(180px) scaleX(1) scaleX(1)",this.isFlying=!0,setTimeout(function(){return t.reset()},7e3))}}]),t}(),X=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),O=function(){function t(){y(this,t),this.x=0,this.sc=1,this.mesh=o("b_base"),this.twr=o("b_tower"),this.beam,this.renderBackdrop(),this.renderTower(),this.renderCliffs(),l(this.mesh,"div","fog",0,1200,150,0,352),this.ships=C.vfx?[new H(this.mesh,0),new H(this.mesh,1),new H(this.mesh,2),new H(this.mesh,3)]:[]}return X(t,[{key:"renderCliffs",value:function(){var t=l(this.mesh,"canvas","cliff",0,600,500).getContext("2d");n(t,400,20,34,"#359bc7","#9ee9f4",[[0,8,0],[2,9,1],[5,8,0],[6,8,2],[9,7,0],[9,6,1],[11,5,1],[11,4,0],[13,5,2],[17,3,2],[17,2,1],[20,1.5,0]]),t=l(this.mesh,"canvas","cliff",1,600,500).getContext("2d"),n(t,400,20,28,"#359bc7","#9ee9f4",[[0,2,1],[2,3,0],[2,4,1],[3,5,0],[4,4,2],[6,7,0],[9,7,2],[9,8,2],[11,9,0],[13,9,0],[13,9,.5],[20,10,0]])}},{key:"renderBackdrop",value:function(){var t=o("b_stars").getContext("2d"),e=C.vw,i=660,s=t.createLinearGradient(0,0,0,i);s.addColorStop(0,"#19587B"),s.addColorStop(1,"#7BCEF0"),t.fillStyle=s,t.fillRect(0,0,e,i),t.globalCompositeOperation="overlay",s=t.createRadialGradient(e/2,i,330,e/2,440,i),s.addColorStop(0,"#fff"),s.addColorStop(.4,"#7BCEF0"),s.addColorStop(1,"rgba(25,88,123,0.5)"),t.globalAlpha=.8,t.fillStyle=s,t.fillRect(0,0,e,i),t.globalCompositeOperation="source-over",t.fillStyle="#41c2e5",t.globalAlpha=.2,t.fillRect(0,380,e,40),t.globalAlpha=1,t.globalCompositeOperation="lighten";var n=o("b_lake").getContext("2d");n.save(),n.scale(1,-1),n.globalAlpha=.85,n.drawImage(o("b_stars"),0,-260,1200,460);var a=document.createElement("canvas");a.width=5,a.height=50;for(var r=a.getContext("2d"),h=0;h<100;h++)r.fillStyle="rgba(0,0,0,"+c(2,10)/10+")",r.fillRect(c(1,a.width),c(1,a.height),c(1,a.width/5),1);n.restore(),n.fillStyle="#124F7B",n.globalAlpha=.8,n.globalCompositeOperation="screen",n.globalAlpha=1,n.drawImage(a,0,0,1200,700);for(var l=0;l<100;l++)t.beginPath(),t.arc(c(10,e),c(10,528),c(0,20)/10,0,2*Math.PI,!1),t.fillStyle="rgba(255,255,255,"+c(2,10)/10+")",t.fill()}},{key:"renderTower",value:function(){C.bgRender=l(this.twr,"canvas","twr-cvs",0,800,600);var t=C.bgRender.getContext("2d");t.fillStyle="#2C99C9",t.globalCompositeOperation="screen",t.translate(200,400),t.scale(1,-1),t.globalAlpha="0.3",t.beginPath(),t.moveTo(0,0),t.lineTo(330,300),t.lineTo(330,250),t.lineTo(200,0),t.fill(),t.globalAlpha="0.7",t.fillRect(62,0,34,170),t.fillRect(34,0,24,120),t.fillRect(120,0,2,200),t.fillRect(106,0,2,280),t.fillRect(120,0,32,150),t.fillRect(160,0,24,100),t.fillRect(150,0,3,320),t.fillRect(142,0,18,280),t.fillRect(-20,0,2,110),t.fillRect(-10,0,2,80),t.fillRect(37,0,2,250),t.fillRect(204,0,2,220),t.fillRect(234,0,2,120),t.globalAlpha="0.2",t.fillStyle="#94EBF2",t.fillRect(86,0,28,400),t.globalAlpha="1",t.fillStyle="#fff",t.fillRect(98,0,4,400),t.globalAlpha="0.25",t.fillStyle="#2C99C9",t.lineWidth=18,t.strokeStyle="#2C99C9",t.beginPath(),t.arc(40,80,120,.7*Math.PI,.9*Math.PI,!0),t.stroke(),t.globalAlpha="0.15",t.beginPath(),t.arc(280,0,120,0,2*Math.PI,!1),t.arc(-100,20,70,0,2*Math.PI,!1),t.fill(),t.globalAlpha="0.8",t.beginPath(),t.moveTo(-130,0),t.lineTo(20,70),t.lineTo(20,130),t.lineTo(120,0),t.fill(),t.globalAlpha="0.4",t.beginPath(),t.moveTo(140,0),t.lineTo(220,70),t.lineTo(220,130),t.lineTo(230,180),t.lineTo(260,160),t.lineTo(260,80),t.lineTo(280,30),t.lineTo(280,0),t.fill(),t.globalCompositeOperation="source-atop",t.globalAlpha="0.8",t.fillStyle="#fcffed";for(var e=0;e<40;e++)for(var i=0;i<50;i++)t.fillRect(15*e-200,5*i,c(2,4),c(0,2));o("uibg").src=C.bgRender.toDataURL(),this.beam=l(this.twr,"div","twr-beam")}},{key:"update",value:function(){C.ts%5==0&&(this.beam.style.backgroundColor=Math.toggle()?"white":"#ffcee9",this.beam.style.transform="translateX("+c(0,8)+"px) scaleX("+c(10,60)/10+")"),C.tz>=700&&(this.x=this.x-C.ix/40,this.sc=1+2*(C.tz-700)/16e3,this.twr.style.transform="translateX("+this.x+"px)",this.mesh.style.transform="translateY("+C.iy/2+"px) scaleX("+this.sc+") scaleY("+this.sc+")"),this.ships.forEach(function(t){return t.update()})}},{key:"reset",value:function(){this.x=0,this.sc=1,this.twr.style.transform="translateX("+this.x+"px)",this.mesh.style.transform="translateY("+C.iy/2+"px) scaleX("+this.sc+") scaleY("+this.sc+")"}}]),t}(),Y=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),j=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:40,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,f=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];v(this,t),this.name=e,this.left=i,this.top=s,this.w=n/1.5,this.h=a,this.x=r,this.y=h,this.z=o,this.rotX=l,this.rotY=c,this.rotZ=u,this.children=[],this.mesh={},this.el=document.createElement("div"),this.el.className="c_"+e,this.el.classList.add("c_root"),this.el.style.cssText="position:absolute; transform-origin: 50% 0;"+(f?"background-color: transparent !important;":""),this.el.style.top=this.top+"px",this.el.style.left=this.left+"px",this.el.style.width=this.w+"px",this.el.style.height=this.h+"px",f&&(this.seg1=document.createElement("div"),this.seg1.className="c_"+e,this.seg1.classList.add("c_seg","c_0"),this.seg1.style.cssText="position:absolute; transform-origin: 0 0; top: 0px; left: 0px;",this.seg1.style.width=this.w+"px",this.seg1.style.height=this.h+"px",this.seg1.style.transform="rotateY(60deg)",this.seg2=document.createElement("div"),this.seg2.className="c_"+e,this.seg2.classList.add("c_seg","c_1"),this.seg2.style.cssText="position:absolute; transform-origin: 0 0; top: 0px; left: 0px;",this.seg2.style.width=this.w+"px",this.seg2.style.height=this.h+"px",this.seg2.style.transform="rotateY(-60deg)",this.seg2.style.filter="brightness(80%)",this.el.appendChild(this.seg1),this.el.appendChild(this.seg2))}return Y(t,[{key:"addChild",value:function(t){return this.el.appendChild(t.el),this.children.push(t),this.mesh[t.name]=t,t}},{key:"transform",value:function(t){this.x=t[0],this.y=t[1],this.z=t[2],this.rotX=t[3],this.rotY=t[4],this.rotZ=t[5],this.el.style.transform="translateX("+this.x+"px) translateY("+this.y+"px) translateZ("+this.z+"px) rotateX("+this.rotX+"deg) rotateY("+this.rotY+"deg) rotateZ("+this.rotZ+"deg)"}}]),t}(),N=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),B=function(){function t(e){b(this,t),this.el=o("hero"),this.hero=new j("hero",0,0,60,260),this.hero.el.style.transformOrigin="50% 50%",this.leftLeg=this.hero.addChild(new j("left-leg",-10,110,18,90)),this.leftLegLower=this.hero.mesh["left-leg"].addChild(new j("lower",0,80,18,80)),this.leftLegFoot=this.hero.mesh["left-leg"].mesh.lower.addChild(new j("foot",0,70,40,10,0,0,0,0,0,0,!1)),this.leftArm=this.hero.addChild(new j("left-arm",0,38,14,60)),this.leftArmLower=this.hero.mesh["left-arm"].addChild(new j("lower",0,48,10,50)),this.leftArmHand=this.hero.mesh["left-arm"].mesh.lower.addChild(new j("hand",2,48,4,20)),this.head=this.hero.addChild(new j("head",-10,2,18,32,0,0,0,0,0,0,!1)),this.torso=this.hero.addChild(new j("torso",-10,35,40,90)),this.rightLeg=this.hero.addChild(new j("right-leg",-10,110,18,90)),this.rightLegLower=this.hero.mesh["right-leg"].addChild(new j("lower",0,80,18,80)),this.rightLegFoot=this.hero.mesh["right-leg"].mesh.lower.addChild(new j("foot",0,70,40,10,0,0,0,0,0,0,!1)),this.rightArm=this.hero.addChild(new j("right-arm",0,38,14,60)),this.rightArmLower=this.hero.mesh["right-arm"].addChild(new j("lower",0,48,10,55)),this.rightArmHand=this.hero.mesh["right-arm"].mesh.lower.addChild(new j("hand",2,48,4,20)),this.cape=this.hero.addChild(new j("cape",-20,105,38,70)),this.hair=this.hero.addChild(new j("hair",-6,30,10,46)),this.el.appendChild(this.hero.el),this.meshMap=[this.hero,this.head,this.torso,this.leftLeg,this.leftLegLower,this.leftLegFoot,this.leftArm,this.leftArmLower,this.leftArmHand,this.rightLeg,this.rightLegLower,this.rightLegFoot,this.rightArm,this.rightArmLower,this.rightArmHand,this.cape,this.hair],this.baseFrame=[[0,-20,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,-12,-2,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,-22,-10,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,12,2,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,22,10,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,24],[0,0,0,0,0,36]];var i=[[0,0,0,0,0,18],[0,0,0,0,0,5],[0,0,0,0,0,5],[0,0,-12,0,0,-60],[0,0,0,0,0,20],[0,0,0,0,0,10],[0,0,-25,-20,0,65],[0,0,0,0,0,-80],[0,0,0,0,0,-10],[0,0,12,0,0,10],[0,0,0,0,0,70],[0,0,0,0,0,20],[0,0,20,0,0,-70],[0,0,0,0,0,-90],[0,0,0,0,0,-10],[0,0,0,-5,-10,50],[0,0,0,15,10,50]],s=[[0,0,0,0,0,18],[0,0,0,0,0,5],[0,0,0,0,0,5],[0,0,-12,0,0,10],[0,0,0,0,0,70],[0,0,0,0,0,20],[0,0,-25,0,0,-70],[0,0,0,0,0,-90],[0,0,0,0,0,-10],[0,0,12,0,0,-60],[0,0,0,0,0,20],[0,0,0,0,0,10],[0,0,20,20,0,65],[0,0,0,0,0,-80],[0,0,0,0,0,-10],[0,0,0,5,10,50],[0,0,0,-15,-10,50]];this.frames=[this.baseFrame,i,this.baseFrame,s],this.currFrame=0,this.a_isAnimating=!0,this.a_startFrame=this.frames[0],this.a_endFrame=this.frames[1],this.a_fn=0,this.a_fmax=8,this.xInc=5,this.zInc=e.speed,this.yInc=1,this.yMax=50,this.isInFall=!1,this.coastX=0,this.isRunning=!1,this.x=e.vw/2,this.z=0,this.baseTransform="translateZ(264px) rotateY(90deg) scale3d(0.24,0.24,0.24)",this.currTransform=null,this.isHit=!1,this.health=5,this.updateAnimation()}return N(t,[{key:"updateAnimation",value:function(){this.a_fn>=this.a_fmax&&(this.a_startFrame=this.a_endFrame,this.a_endFrame=this.getNextFrame(),this.a_fn=0);for(var t=[this.baseFrame[0].length],e=0;e<this.baseFrame.length;e++){for(var i=0;i<this.baseFrame[0].length;i++)t[i]=this.a_startFrame[e][i]+(this.a_endFrame[e][i]-this.a_startFrame[e][i])*(this.a_fn/this.a_fmax);this.meshMap[e].transform(t)}this.a_fn++}},{key:"updateState",value:function(){if(2===C.status){var t=this.baseTransform;(C.pressedKeys[k.LEFT]||C.pressedKeys[k.RIGHT])&&(C.pressedKeys[k.LEFT]?(C.ix=-this.xInc,t=t.replace("90deg","110deg")):(C.ix=this.xInc,t=t.replace("90deg","70deg"))),C.pressedKeys[k.UP]||C.pressedKeys[k.DOWN]?(C.iz=C.pressedKeys[k.UP]?this.zInc:-this.zInc,this.a_isAnimating=!0):this.a_isAnimating=!1,C.pressedKeys[k.SPACE]&&!this.isInFall?(C.iy=Math.clamp(C.iy+this.yInc,0,this.yMax),C.iy===this.yMax&&(this.isInFall=!0,this.coastX=0),t=t.replace("280",(280-C.iy).toString())):this.coastX<20?(this.coastX++,t=t.replace("280",(280-this.yMax).toString())):(C.iy=Math.clamp(C.iy-this.yInc,0,this.yMax),0===C.iy&&(this.isInFall=!1),t=t.replace("280",(280-C.iy).toString())),t!==this.currTransform&&(this.currTransform=t,this.el.style.transform=t),this.z+=C.iz,this.x+=C.ix,C.tx=this.x-C.vw/2,this.a_fmax=C.iy>0&&!this.isInFall?30:8,this.checkCollision()}}},{key:"checkHit",value:function(t){return!(!C.doChecks||0!==C.iy||!u(-C.tx,t-C.vw/2,20))&&(this.health--,o("app-container").classList.add("a_hit"),setTimeout(function(){return o("app-container").classList.remove("a_hit")},500),0==this.health&&(this.el.style.top="450px",C.plane.shadow.style.display="none",C.game.end(4)),!0)}},{key:"checkCollision",value:function(){var t=Math.floor(C.tz/C.plane.gsH),e=Math.floor((600-C.plane.x)/C.plane.gsW),i=C.map[t][e];C.doChecks&&0===C.iy&&(this.isHit||i||(this.isHit=!0,o("app-container").classList.add("a_hit"),this.el.style.top="450px",C.plane.shadow.style.display="none",setTimeout(function(){return o("app-container").classList.remove("a_hit")},500))),this.isHit&&(C.iz=this.zInc,C.ix=0,C.iy=0,this.zInc=Math.max(0,this.zInc-.03),this.zInc<1.5&&C.game.end(4)),0===C.iy&&(C.tz>8e3&&(0===e||9===e)?C.game.end(0===e?1:2):C.tz>9e3&&C.game.end(3))}},{key:"update",value:function(){this.updateState(),this.a_isAnimating&&this.updateAnimation()}},{key:"getNextFrame",value:function(){return this.currFrame=(this.currFrame+1)%this.frames.length,this.frames[this.currFrame]}},{key:"reset",value:function(){this.xInc=5,this.zInc=C.speed,this.yInc=1,this.isInFall=!1,this.coastX=0,this.isRunning=!1,this.x=C.vw/2,this.z=0,this.health=5,this.currTransform=this.baseTransform,this.isHit=!1,this.el.style.top="270px",C.plane.shadow.style.display="block"}}]),t}(),W=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),K=function(){function t(){x(this,t),this.el=o("msgs"),this.script=new Map([[0,"The Arctic... It's unrecognizable now. The endgame is near... the machines have finished the Quantum Beam, I can see it pulsing in the distance. I need to stop them... before it's too late."],[400,"I can jump really high (Hold SPACE while moving) but I need to be careful not to slip off the platforms."],[730,"Hmm, that's a really long way away but I should be able to clear it (Press and hold SPACE while moving to long jump)."],[1e3,"I made it!"],[2e3,"Beam cannons ahead! Need to be careful here and avoid the pulses. I can only take 5 before my shields are down."],[3e3,"That was close!"],[3800,"The platforms are unstable, I need to tread carefully here."],[6200,"Something's not right... It's too quiet."]]),this.timer=1,this.activeId=-1,this.activeEl=null,this.activeText="",this.index=0,this.length=0,this.pause=0}return W(t,[{key:"update",value:function(){if(C.tz!==this.activeId){var t=this.script.get(C.tz);this.activeId=C.tz,void 0!==t&&this.showMsg(t)}if(this.index<this.length&&0===this.pause?(this.index++,this.activeEl.innerHTML=this.activeText.substr(0,this.index),". "!==this.activeText.substr(this.index,2)&&", "!==this.activeText.substr(this.index,2)||(this.pause=24)):this.pause=Math.max(0,this.pause-1),this.timer=3===C.status?this.timer:Math.max(0,this.timer-.01),this.el.style.opacity=this.timer,0===this.timer)for(;this.el.firstChild;)this.el.removeChild(this.el.firstChild)}},{key:"showMsg",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(3!==C.status||i){var n=document.createElement("div");n.appendChild(document.createTextNode(t)),n.className="msg",1===s&&n.classList.add("boss"),i&&n.classList.add("end"),C.text||i||(n.style.display="none"),this.el.appendChild(n),n.style.height=n.clientHeight-24+"px",n.style.width=Math.min(300,n.clientWidth)+"px",this.activeEl&&(this.activeEl.innerHTML=this.activeText,this.activeEl.classList.add("c1"),this.activeEl.style.transform="translateY(-105%)"),this.activeEl=n,setTimeout(function(){n.style.transform="translateX(0px)",n.innerHTML=i?t:"",e.activeText=t,e.index=0,e.length=t.length},10),this.el.children.length>2&&this.el.removeChild(this.el.firstChild),this.timer=10,this.el.style.opacity=this.timer}}}]),t}(),q=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),Z=function(){function t(){w(this,t),this.root=l(o("game-plane"),"div","omega-root",0,300,180,400,300),this.el=l(this.root,"div","omega",0,300,200,0,0),l(this.el,"div","omega-tile",1,40,10,-42,164),l(this.el,"div","omega-tile",1,40,10,420,164),this.map=new Map([["0,3",0],["0,4",0],["0,5",0],["0,6",0],["1,4",0],["1,5",0],["4,0",1],["4,1",1],["5,1",1],["5,2",1],["6,2",1],["6,3",1],["4,9",1],["4,8",1],["5,8",1],["5,7",1],["6,7",1],["6,6",1],["10,0",0],["10,9",0],["11,0",0],["11,9",0],["13,3",2],["13,4",2],["12,4",2],["12,5",2],["13,5",2],["13,6",2]]),this.els=[];for(var e=0;e<20;e++)for(var i=0;i<10;i++){var s=this.map.get(e+","+i);e>8&&(0==i||9===i)&&(s=0);var n=l(this.el,"div",s>0?"omega-x":"omega-tile",1,40,11,42*i,200-12*e);n.style.opacity=0===s?0:c(9,10)/10,this.els.push(n)}this.entropy=10,this.opacity=1,this.exploding=!1,this.update(),this.intro(),setTimeout(function(){return o("app-container").classList.add("boss")},10)}return q(t,[{key:"reset",value:function(){o("app-container").classList.remove("boss"),this.root.remove()}},{key:"update",value:function(){var t=this;if(C.ts%50==0){for(var e=Math.toggle(),i=0,s=0;s<20;s++)for(var n=0;n<10;n++){var a=this.map.get(s+","+n);1===a&&e?function(){var e=t.els[i];e.classList.add("closed"),setTimeout(function(){return e.classList.remove("closed")},250)}():Math.toggle()&&(this.els[i].style.transform="translateZ("+(c(0,this.entropy)-this.entropy/2)+"px)"),i++}this.exploding&&(this.entropy=Math.max(this.entropy+10,300))}}},{key:"intro",value:function(){setTimeout(function(){return C.comms.showMsg("CERBERUS!",!1)},2e3),setTimeout(function(){return C.comms.showMsg("You are strong, but you have lost human. Your journey ends here.",!1,1)},4500),setTimeout(function(){return C.comms.showMsg("Never.",!1)},8500),setTimeout(function(){C.comms.showMsg("I grant you two choices. Choose the door on the right to continue the fight, a fight you cannot win.",!1,1),document.querySelector(".b_plate.b_5")&&(document.querySelector(".b_plate.b_5").style.opacity=1)},11e3),setTimeout(function(){C.comms.showMsg("Or, merge your mind with my neural network, follow the door on your left. Before humanity is eclipsed, I would like to study you.",!1,1),document.querySelector(".b_plate.b_4")&&(document.querySelector(".b_plate.b_4").style.opacity=1)},15500),setTimeout(function(){return C.comms.showMsg("Make your choice... choose wisely.",!1,1)},2e4)}},{key:"outro",value:function(){this.exploding=!0}}]),t}(),D=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}();window.onerror=function(){return C.isRunning=!1,document.getElementById("app-container").style.border="solid 4px #ff4444",!1};var G=function(){function t(){T(this,t),this.initialized=!1,this.accumulator=0,this.delta=1e3/C.fps,this.step=1/C.fps,this.last=0,this.rAF=null,this.now=0,this.dt=0,this.stats=new I}return D(t,[{key:"init",value:function(){this.initialized||(this.initialized=!0,addEventListener("keydown",this.keydownEventHandler),addEventListener("keyup",this.keyupEventHandler),L.init(),C.game=this,C.console=o("console"),C.plane=new R,C.backdrop=new O,C.player=new B(C),C.comms=new K,this.dist=o("distEl"),this.health=o("healthEl"),window.gs=C,C.intro?this.update():this.startLoop())}},{key:"end",value:function(t){var e=" Press 1 to RESTART";switch(t){case 1:C.comms.showMsg("The AI is strong... I feel it probing, try1ng t0 contr01 my m1nd... I cann0t g1ve 1n... 1 n10d 10 f1g10... 01101100 01101111 01110011 01110100"+e,!0);break;case 2:C.comms.showMsg("I see them coming over the horizon... they are so many, thousands of them... I must... fight... I can't... I have lost."+e,!0);break;case 3:return document.querySelector(".b_plate.b_6")&&(document.querySelector(".b_plate.b_6").style.opacity=0),C.status=3,C.doChecks=!1,C.player.a_isAnimating=!1,C.omega.outro(),setTimeout(function(){o("layer-3d").classList.add("a_over"),o("app-container").classList.remove("boss")},2500),void setTimeout(function(){C.comms.showMsg("It is done. The beam has been shutdown, the machines are disabled. This battle is won but the war is only getting started. Humanity... will prevail.",!0)},3e3);case 4:C.comms.showMsg("Watch your step and stay on the platforms. Avoid getting hit by the beam cannons."+e,!0)}C.status=3,C.doChecks=!1,C.player.a_isAnimating=!1,o("layer-3d").classList.add("a_over")}},{key:"update",value:function(){this.dist.textContent=Math.max(0,Math.round((C.plane.mapLength-C.tz)/100)).toLocaleString(),this.health.textContent=C.player.health,C.ts++,C.ix=0,C.iz=0,C.player.update(),3!==C.status&&C.comms.update(),C.tz>7e3&&(C.attack=!1,C.vfx=!1,null===C.omega&&(C.omega=new Z),C.omega.update()),C.plane.update(),C.backdrop.update(),C.objects.forEach(function(t){return t.update()})}},{key:"render",value:function(){}},{key:"startLoop",value:function(){C.isRunning=!0,this.last=performance.now(),window.requestAnimationFrame(this.frame.bind(this))}},{key:"frame",value:function(t){if(!C.isRunning)return!1;if(this.now=performance.now(),this.dt=this.now-this.last,this.last=this.now,!(this.dt>1e3)){for(this.accumulator+=this.dt;this.accumulator>=this.delta;)this.update(this.step),this.accumulator-=this.delta;this.stats.update(),this.render(),this.rAF=window.requestAnimationFrame(this.frame.bind(this))}}},{key:"keydownEventHandler",value:function(t){C.pressedKeys[t.which]=!0,49===t.which&&(C.iz=0,C.ix=0,C.iy=0,C.tz=0,C.ts=0,C.player.reset(),C.plane.reset(),C.backdrop.reset(),C.omega&&(C.omega.reset(),C.omega=null),C.doChecks=!0,C.attack=!0,C.vfx=!0,o("layer-3d").classList.remove("a_over"),C.status=2,C.comms.showMsg("Let's go"))}},{key:"keyupEventHandler",value:function(t){C.pressedKeys[t.which]=!1}}]),t}(),U=new G;document.addEventListener("DOMContentLoaded",function(){return U.init()});i(1),i(2),i(3),i(4),i(5),i(6),i(7),i(8),i(9)},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){}]);</script></body>
</html>