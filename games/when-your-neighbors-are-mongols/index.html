<!doctype html><title>When Your Neighbors Are Mongols - js13kGames 2023</title><style id=D9>*{margin:0;padding:0;user-select:none;outline:0;overflow:hidden;font-family:Arial;color:#000;text-align:center}body{cursor:pointer;background-color:#000}#D1,#D2,#D3,#D4,#D5{transform-origin:top left;position:fixed}#D1,#D4,#D5{width:1920px;height:1080px}#D5{background-color:#000d;padding:450px 0;z-index:-1}#D8{background-color:#600d;padding:100px 0}#D4{z-index:5}#D7{position:absolute}#D0,#D8{display:none}#D6{position:fixed;right:20px;top:16px;background-color:#1af;width:40px;height:0}h1,h2,h3,h4{display:inline-block;font-weight:900}h4{padding:0 20px;border-radius:60px;margin:0 64px}h4:hover{outline:16px solid red}h4:active{scale:.9}.B{filter:url(#Z1);-webkit-filter:url(#Z1)}</style><body oncontextmenu=return!1 ondragstart=return!1><div id=D1></div><div id=D4><div id=D7><br><br><br><h2 class=B>OPTIONS</h2><br><br><br><h4 id=B1 class=B>AUDIO</h4><h2 id=L1 class=B>OFF</h2><br><br><br><h4 id=B2 class=B>MOVE UP</h4><h2 id=L2 class=B>KeyZ</h2><br><br><br><h4 id=B3 class=B>MOVE DOWN</h4><h2 id=L3 class=B>KeyZ</h2><br><br><br><br><br><br><h4 id=B4 class=B>OKAY</h4><br><br><br><br><br><br><h2 id=L4 class=B></h2><br><br><br><br><h4 id=B5 class=B>PLAY</h4><br><br><br><h4 id=B6 class=B>OPTIONS</h4><br><br><br><br><br><br><h3 class=B>WHEN YOUR NEIGHBORS ARE</h3><h1 class=B>MONGOLS</h1><br><br><br><br><h3 id=L5 class=B>0</h3><div id=D6 class=B></div><br><br><br><br><br><br><br><br><br><div id=D8><h1 class=B>GAME OVER</h1><br><br><br><br><h4 id=B7 class=B>OKAY</h4></div></div></div><div id=D5><h2 class=B>PRESS NEW KEY</h2></div><script>let G,m,M,u,w,H,Z,v,J,x,o,K,j,q,b,Q,V,W,e0,$,F,A,_,E,o0,t0,a0,r0,l0,n0,i0,f0,s0,D,c0,g0,y0,c,d0,p0,h0,m0,u0,a,w0,v0,x0,b0,$0,F0,A0,_0,E0,D0,i,X=1920,t=1080,r=window,X0=document,R0=X0.body,I0=r.localStorage,Y=Math,Y0=Y.min,T0=Y.abs,S0=Y.cos,L0=Y.sin,T=2*Y.PI,k0=Y.imul,B0=0,z0=0,P0=1,N0=0,C0=0,O0=(e,o,t,a,r,l,n,i,f,s)=>{var c=u0,g=6*C0;h0[4+g]=f||4294967167,m0[5+g]=s||0,c[g*=2]=r,c[1+g]=l,c[2+g]=n,c[3+g]=i,c[4+g]=e,c[5+g]=o,c[6+g]=t,c[7+g]=a,C0++},U0=e=>D.texParameteri(D.TEXTURE_2D,e,D.NEAREST),S=48e3,G0=0,M0=[],l=(e,o,t,a,r,l,n,i,f,s,c,g,y,d,p,h,m,u,w)=>{let v,x,b=i*=500*T/S/S,$=o*=T/S,F=[],A=0,_=0,E=0,D=1,X=0,R=0,I=0;for(f*=500*T/S**3,d*=T/S,s*=T/S,c*=S,g=g*S|0,x=(t*=S+9)+(u*=S)+(a*=S)+(r*=S)+(h*=S)|0;E<x;F[E++]=I)++R%(100*p|0)||(I=l?1<l?2<l?3<l?L0((A%T)**3):Y.max(Y0(Y.tan(A),1),-1):1-(2*A/T%2+2)%2:1-4*T0(Y.round(A/T)-A/T):L0(A),I=(g?1-w+w*L0(T*E/g):1)*(0<I?1:-1)*T0(I)**n*e*.5*(E<t?E/t:E<t+u?1-(E-t)/u*(1-m):E<t+u+a?m:E<x-h?(x-E-h)/r*m:0),I=h?I/2+(h>E?0:(E<x-h?1:(x-E)/h)*F[E-h|0]/2):I),v=(o+=i+=f)*S0(d*_++),A+=v-v*y*(1-1e9*(L0(E)+1)%2),D&&++D>c&&(o+=s,$+=s,D=0),!g||++X%g||(o=$,i=b,D=D||1);M0.push({samples:F,buffer:0})},R=e=>{var o,t;a.audio&&(G0||H0(),(e=M0[e]).buffer&&e.buffer.disconnect(G0.destination),o=G0.createBuffer(1,e.samples.length,S),t=G0.createBufferSource(),o.getChannelData(0).set(e.samples),t.buffer=o,t.connect(G0.destination),t.start(0),e.buffer=t)},H0=()=>G0=new(r.AudioContext||r.webkitAudioContext),I=(e,o,t)=>e<o?o:t<e?t:e,Z0=e=>X0.getElementById(e),L=(e,o)=>e.splice(o,1),J0=(e,o)=>e.style.display=o?"block":"none",K0=e=>D1.style.background=`linear-gradient(#1af 0%, #fff ${e}px, #6e5 ${e}px, #5c6 100%)`,j0=(e=0)=>{if(M.clearRect(0,0,X,t),e)for(let e=256;e<t;e+=4)M.fillRect(B(0,X),e,B(8,48),2)},q0=(e,o,t)=>Q0(R0,`<canvas id=${e} width=${o} height=${t}></canvas>`),n=(e,o)=>e.innerHTML=o,Q0=(e,o)=>e.innerHTML+=o,V0=(e,o,t)=>Q0(D9,`h${e}{font-size:${o}px;line-height:${t}px;}`),W0=()=>D6.style.height=a0+"px",e1=(e,o)=>{e.onclick=e=>{R(4),o()}},o1=e=>D7.style.top=e+"px",t1=(e,o=.25,t=3)=>(j+e.randomness)%o>o/2?0:t,a1=e=>e.length,r1="wynam",l1=()=>I0.setItem(r1,JSON.stringify(a)),n1={seed:0,setSeed:e=>n1.seed=e,getSeed:()=>n1.seed,random:()=>{n1.seed+=1831565813;var e=n1.seed,e=k0(e^e>>>15,1|e);return(((e^=e+k0(e^e>>>7,61|e))^e>>>14)>>>0)/4294967296}},k=()=>n1.random(),B=(e,o)=>~~(k()*(o-e)+e),i1=(e,o)=>{v=e,J=o,D5.style.zIndex=9,w=1},f1=e=>{if(r0+=e,n(L5,r0.toLocaleString()),!l0&&r0>a.best){l0=1;for(let e=0;e<7;e++)P(2,832+B(0,256),40+B(0,40),k()*T,J1+B(0,2),300+100*k(),1,2,0,1+k(),k()<.5?.05*-T:.05*T,20*k()-10,20*k()-10)}},z=(e,o,t,a,r,l,n,i,f,s,c,g,y,d,p,h,m,u,w,v,x,b,$,F,A)=>({type:e,x:o,y:t,vx:a,vy:r,radius:l,leaping:n,leaving:i,collides:f,actionDelay:s,randomness:c,timed:g,damage:y,texture:d,ttl:p,rotation:h,iX:m,iY:u,scale:w,alpha:v,rotationRate:x,gx:b,gy:$,fades:F,shrinks:A,counter:p,originalAlpha:v,originalScale:w}),P=(e,o,t,a,r,l,n,i,f,s,c,g=0,y=0)=>{$.push(z(6,o,t,S0(a)*l,L0(a)*l,0,0,0,0,0,0,0,0,O(r),e,a,0,0,s,i,c,g,y,n,f))},s1=e=>{e.x+=e.vx*x,e.y+=e.vy*x},c1=(o,t,a)=>{let r=T*k();for(let e=0;e<t;e++)A.push(z(7,o.x,o.y-60,650*S0(r),650*L0(r),0,0,0,0,0,0,1,0,O("shrapnel2"),a,0,0,0,1,1)),r+=T/t;P(.4,o.x-66,o.y-120,k()*T,J1+B(0,2),0,1,1,0,2+k(),0,0,0);for(let e=0;e<5;e++)P(.75,o.x-80+B(0,80),o.y-160+B(0,80),-.375*T+k()*(.25*T),j1+B(0,2),20+B(0,20),1,.25*k(),0,2+.5*k(),.005*T*k(),0,0)},g1=(o,t)=>{for(let e=0;e<t;e++)P(1,o.x-30,o.y-40,-.375*T+k()*(.25*T),q1+B(0,9),500+B(50,250),1,1,1,.5+.5*k(),0,0,15+B(10,20))},y1=e=>{R(6),g1(N,7+B(0,5)),(a0-=e)<=0&&(a0=0,R(18),J0(D8,1),P0=2,u=0,l0)&&(a.best=r0,n(L4,a.best.toLocaleString()),l1())},N=z(5,1720,0,0,0),C=[{c1:"d00",c2:"800",t:"H",p:()=>{R(20),a0=I(a0+100,0,1048)}},{c1:"9b0",c2:"560",t:"B",p:()=>{R(15);for(let e=0;e<7;e++){var o=-t+B(0,999);A.push(z(7,50+B(0,1500),o,0,700+B(0,300),0,1,o+1350,0,0,0,0,0,O(C1),0,0,0,0,1,1))}}},{c1:"59f",c2:"04a",t:"Y",p:e=>{R(19),f1(5e3),P(1,e.x-30,e.y-40,0,"points",0,1,1,0,1,0,0,-150)}},{c1:"e50",c2:"940",t:"R",p:()=>{R(14),n0=I(n0-.1,.1,9)}},{c1:"3ca",c2:"276",t:"P",p:()=>{R(17),i0=I(i0-50,-1200,-400)}},{c1:"c4e",c2:"80b",t:"G",p:()=>{R(16),s0=1;for(let e=0;e<4;e++)P(1,-275+B(0,24),N.y-75+B(0,30),0,"rail"+B(0,3),0,1,.6,0,2,0,0,0)}},{c1:"aaa",c2:"777",t:"S",p:()=>{R(14),f0=I(f0+25,0,350)}},{c1:"f59",c2:"d05",t:"Z",p:()=>{Q=1,W=6,V=.2}}],d1=[],p1=0,h1="feGaussianBlur",m1="feColorMatrix",u1="feTurbulence",w1="feDisplacementMap",v1="feComposite",x1=' operator="',b1="feSpecularLighting",$1="fePointLight",f='" result="',F1="stdDeviation",A1="0 0 0 0 0, ",_1="0000",s=(e,o)=>`<svg width="${e}" height="${o}" version="1.1" viewBox="0 0 ${e} ${o}" xmlns="http://www.w3.org/2000/svg">`,g=(e,o,t,a,r,l=0,n=l,i=0,f="")=>`<rect x="${e}" y="${o}" width="${t}" height="${a}" ${e=r,e.match(/[G-Z]/g)?`filter="url(#${e})"`:`fill="#${e}"`} rx="${l}" ry="${n}" stroke-width="${i}" stroke="#${f}"/>`,E1=(e,o,t,a,r,l,n)=>`<rect transform="rotate(${n})" x="${e}" y="${o}" width="${t}" height="${a}" fill="#${r}" rx="${l}"/>`,y=(e,o,t=0,a=_1)=>`<path d="${e}" fill="#${o}" stroke-width="${t}" stroke="#${a}"/>`,X1=(e,o,t,a,r)=>`<text x="${e}" y="${o}" fill="#${a}" font-family="Arial" font-size="${r}px" font-weight="900">${t}</text>`,d=(e,o)=>g(e,o,11,18,"d76")+" "+g(e+10,o,14,18,"fb8"),p=(t,a,r,l=1)=>{let n=new Image;n.onload=()=>{var e=n.width,o=n.height;G.getContext("2d").drawImage(n,a,r,e*l,o*l),d1[t]={x:a,y:r,w:e*l,h:o*l},E0&&(e=G,D.bindTexture(D.TEXTURE_2D,D.createTexture()),D.texImage2D(D.TEXTURE_2D,0,D.RGBA,D.RGBA,D.UNSIGNED_BYTE,e),D.generateMipmap(D.TEXTURE_2D),D.activeTexture(D.TEXTURE0),U0(D.TEXTURE_MAG_FILTER),U0(D.TEXTURE_MIN_FILTER),d0=e.width,p0=e.height,D.uniform2f(D.getUniformLocation(g0,"j"),d0,p0),D.viewport(0,0,c0.width,c0.height),D.uniform2f(D.getUniformLocation(g0,"i"),c0.width/2,c0.height/2),c=1,D0=[{body:O(T1),bodyX:-44,bodyY:-100,weapon:O(k1),weaponX:-50,weaponX2:0,weaponY:-100,foot:O(S1),leftFootX:-45,leftFootY:0,rightFootX:1,rightFootY:3},{body:O(T1),bodyX:-44,bodyY:-100,weapon:O("w_ram"),weaponX:-50,weaponX2:5,weaponY:-50,foot:O(S1),leftFootX:-45,leftFootY:0,rightFootX:1,rightFootY:3},{body:O(T1),bodyX:-44,bodyY:-100,weapon:O(z1),weaponX:-110,weaponX2:0,weaponY:-75,foot:O(S1),leftFootX:-45,leftFootY:0,rightFootX:1,rightFootY:3},{body:O(T1),bodyX:-44,weaponX2:0,bodyY:-100,weapon:O("w_bomb"),weaponX:-65,weaponY:-70,foot:O(S1),leftFootX:-45,leftFootY:0,rightFootX:1,rightFootY:3},{body:O(T1),bodyX:-44,weaponX2:0,bodyY:-100,weapon:O(P1),weaponX:-45,weaponY:-30,foot:O(S1),leftFootX:-45,leftFootY:0,rightFootX:1,rightFootY:3},{body:O("s_body"),bodyX:-60,bodyY:-120,weapon:O("bfg"),weaponX:-92,weaponY:-64,foot:O("s_foot"),leftFootX:-40,leftFootY:-10,rightFootX:10,rightFootY:-7}])},n.src="data:image/svg+xml;base64,"+btoa(i+"</svg>")},O=e=>d1[e],R1=[-24,13,48,7,21,48,33,43,48,69,64,48,105,70,90,192,75,64,243,88,56,295,94,48,328,83,56,368,51,56,411,19,64,464,1,48],I1=[-20,37,10,51,46,56,77,52,109,43,139,34,159,31,182,24,214,31,237,41,267,54,303,58,337,53,371,49,406,37,440,27,472,16],Y1=[87,-20,251,-2,342,-11,412,-35],T1="m_body",S1="m_foot",k1="w_sword",z1="w_spear",P1="w_unnarmed",N1="p_spear",C1="p_bomb",O1="p_sword",U1="d_mountain",G1="d_temple",M1="d_cloud",H1="d_bush_b",Z1="d_bush_f",J1="muzzle",K1="powerup",j1="smoke",q1="blood",Q1="743",V1="aaa",h="eee",W1="860",ee="b93",oe="955",te="d56",ae="0006",re=(e,o=0,t="f00")=>`<filter id="Z${++p1}" x="-25%" y="-25%" width="150%" height="160%"><feFlood flood-color="#${t}${f}J"></feFlood><${u1} baseFrequency="0.1" type="fractalNoise" numOctaves="1" seed="${o}${f}K"></${u1}><${h1} in="SourceAlpha" ${F1}="0.1${f}L"></${h1}><${w1} in="L" in2="K" scale="25${f}M"></${w1}><${v1} in="J" in2="M"${x1}in${f}N"></${v1}><${m1} type="matrix" values="${A1}${A1}${A1}0 0 0 1 0" in="N${f}O"></${m1}><${h1} ${F1}="2" in="O${f}P"></${h1}><${b1} surfaceScale="5" specularConstant=".75" specularExponent="30" lighting-color="#fff" in="P${f}Q">${e?"":`<${$1} x="-50" y="-100" z="400"></${$1}>`}</${b1}><${v1} ${x1}in" in="Q" in2="O"></${v1}><${v1} ${x1}arithmetic" k1="0" k2="1" k3="1" k4="0" in="N"></${v1}></filter>`,le=(e,o)=>{i=s(512,e)+'<g id="a" fill="#4a2">'+g(47,37,14,48,o,24)+E1(17,53,14,48,o,24,-18)+E1(71,20,14,48,o,24,18)+"</g> ";for(let e=0;e<I1.length;e+=2)i+=g(I1[e],I1[e+1],40,200,o,20);for(let e=0;e<Y1.length;e+=2)i+=`<use href="#a" x="${Y1[e]}" y="${Y1[e+1]}"/>`},ne=g(1,61,15,6,W1)+g(16,61,15,6,ee)+y("m16 61v-60l10 15-5 45z",V1)+y("m16 61v-60l-10 15 5 45z",h),U=(e,o,t,a=4294967167,r=0)=>O0(e.x,e.y,e.w,e.h,o,t,e.w,e.h,a,r);r.onload=e=>{n1.setSeed(578945323),(a=I0.getItem(r1))?a=JSON.parse(a):(a={best:0,audio:1,controls:[{key:81,code:"KeyQ"},{key:65,code:"KeyA"}]},l1()),n(L2,a.controls[0].code),n(L3,a.controls[1].code),n(L4,a.best.toLocaleString()),n(L1,a.audio?"ON":"OFF"),o1(-t),V0(1,240,240),V0(2,150,150),V0(3,80,80),V0(4,150,150),Q0(D4,s(0,0)+re(0,B(0,1e9))+"</svg>"),q0("D2",X,t),q0("D3",X,t),q0("D0",1024,2048),m=Z0("D2"),G=Z0("D0"),(M=m.getContext("2d")).globalAlpha=.6,M.fillStyle="#0002",K0(918);for(let e=0;e<4;e++)l(.04,[261.6,293.6,329.6,391.9][e],0,.07,.49,0,.62,0,0,0,0,.05,.1,0,0,0,.33,.11,.04);l(.1,633,.02,.01,.01,0,.99,79,0,633,.02,.06,0,63,.1,.05,.58,.02,.99),l(.06,499,.02,.02,.06,1,1.65,-23,3.2,0,0,0,1.7,0,.1,0,.77,.02,0),l(.02,444,.02,.03,.1,3,1.92,-8.9,-.6,0,0,.05,.8,0,.5,0,.54,.08,.02),l(.07,382,.03,.27,.48,4,.07,.2,.2,0,0,0,1.9,-66,1,0,.46,.15,0),l(.02,1e4,0,0,.1,0,1,0,0,0,0,.01,6.8,-.02,0,0,1,0,0),l(.03,360,0,0,.12,2,2,0,0,0,0,0,9,0,.1,0,1,0,0),l(.05,337,0,.07,.2,0,1.65,0,1.7,50,0,.05,1.5,74,.3,.02,.91,.07,.03),l(.05,494,.03,.05,.05,2,1.67,2.8,0,0,0,0,.5,0,.5,.12,.91,.06,0),l(.05,364,0,.08,.17,3,1.08,2.9,0,0,0,0,.6,13,.4,.15,.86,.05,.26),l(.06,388,.01,.12,.5,3,4.1,0,0,0,0,.01,.7,-29,.4,.01,.31,.08,.47),l(.05,189,.01,.09,.13,2,.07,1.1,-1.5,870,.03,.11,0,0,0,.05,.67,.03,0),l(.3,294,.09,.29,.29,3,0,-2.4,-.1,-17,.05,.01,0,0,0,.18,.94,.18,.09),l(.4,717,.08,.24,.14,3,1.77,30,0,-66,.07,0,0,-73,0,0,.72,.03,.22),l(.1,1986,.01,.1,.16,2,.75,0,0,0,0,0,0,0,0,.03,.61,.04,0),l(1,891,.03,.15,.32,2,2.51,.8,.9,0,0,0,1.2,1.3,.1,.33,.46,.08,.08),l(.3,72,.01,.19,.2,1,.16,-3.9,0,358,.01,.03,0,0,0,.09,.67,.14,0),l(.3,189,.01,.09,.13,2,.07,1.1,-1.5,870,.03,.11,0,0,0,.05,.67,.03,0),l(.06,384,.02,.27,.53,4,3.02,0,.1,50,.01,-.02,0,0,.1,.05,.47,.18,0),i=s(117,130)+g(29,51,44,20,"c98")+g(73,51,17,20,"ecb")+g(29,71,42,31,V1)+g(71,71,14,31,h)+g(0,116,114,16,ae,55)+y("m1 51h77l-20-50z","654")+y("m78 51h38l-58-50z","a76"),p("s_body",94,0),i=s(39,11)+g(25,1,13,9,h)+g(1,1,25,9,V1),p("s_foot",94,140),i=s(93,123)+g(8,1,69,59,"546",35,30)+g(8,1,69,59,"546",35,30)+g(16,1,61,56,"658",30,28)+g(15,67,56,32,"546")+g(29,91,42,8,"658")+g(29,67,42,21,"658")+g(10,35,61,32,"d76")+g(27,52,44,15,"fb8")+g(3,30,36,18,"975",6)+g(26,30,55,18,"a86",5)+g(0,106,88,16,ae,43)+y("m70 64-2-7-11-2-19 2-2 7",_1,3,"633")+y("m42 62h21l-8 19z","633"),p(T1,0,0),i=s(39,11)+g(1,1,13,9,"975")+g(13,1,25,9,"a86"),p(S1,0,140),i=s(140,50)+g(105,1,32,42,ee,16,21)+g(63,3,72,38,W1,15,19)+g(53,1,32,42,ee,16,21)+g(11,3,72,38,W1,15,19)+g(1,2,30,40,W1,15,20,2,ee)+g(128,24,11,22,"ecb")+g(114,24,14,22,"c98")+g(63,36,11,13,"ecb")+g(49,36,14,13,"c98"),p("bfg",220,0),i=s(89,28)+d(3,1)+d(69,7),p(P1,220,430),i=s(163,32)+g(1,12,123,8,Q1)+y("m117 16h45l-40-15z",h)+y("m117 16h45l-40 15z",V1),p(N1,220,390),i+=d(70,7),p(z1,220,52),i=s(138,55)+g(1,8,134,38,Q1,15,19)+g(107,8,30,38,"da7",15,19)+d(65,36)+d(19,1)+y("m120 28c-1-6 10-3 3 4-6 5-15-8-5-14 11-5 18 13 7 21",_1,2,Q1),p("w_ram",220,88),i=s(86,73)+g(1,9,77,63,"777",37)+g(15,11,63,58,"bbb",31)+g(34,1,7,10,"777")+g(41,1,9,11,"bbb"),p(C1,320,144),i+=d(58,49)+d(1,49),p("w_bomb",220,144),i=s(32,86)+ne+g(11,67,5,18,Q1)+g(16,67,5,18,"da7"),p(O1,220,465),i=s(89,86)+d(3,67)+d(69,67)+g(1,61,15,6,W1)+g(16,61,15,6,ee)+y("m16 61v-60l10 15-5 45z",V1)+y("m16 61v-60l-10 15 5 45z",h),p(k1,220,300),i=s(23,26)+g(1,1,21,24,"777",12)+g(6,2,16,21,h,10),p("p_bfg",220,242);for(let e=0;e<3;e++)i=s(36,36)+y("m1 1 34 7-22 27z",["f00","f80","ff0"][e]),p("shrapnel"+e,130,440+40*e);for(let e=0;e<C.length;e++){var o=C[e];i=s(107,72)+g(12,59,83,12,ae)+g(12,1,24,64,o.c2)+g(31,1,64,64,o.c1)+X1(36,55,o.t,h,64),p(K1+o.t,400,75*e)}i=s(120,48)+X1(1,32,5e3,h,32),p("points",400,600),i=s(85,66)+g(1,1,83,64,h),p("powerup_flash",512,405);for(let e=0;e<10;e++)i=s(60,60)+re(1,B(1,1e9))+g(5,5,50,50,"Z"+p1,20),p(q1+e,0,155+64*e);for(let e=0;e<10;e++)i=s(60,60)+re(0,B(1,1e9),"ccc")+g(5,5,50,50,"Z"+p1,20),p(j1+e,65,155+64*e);for(let e=0;e<4;e++)i=s(66,66)+y("m50 65-21-19-28 4 19-20-5-29 22 18 28-3-19 21z",["f00","f80","ff0","9df"][e]),p(J1+e,130,155+70*e);for(let e=0;e<4;e++)i=s(960,32)+re(1,B(1,1e9),"08f")+g(5,5,950,22,"Z"+p1,8),p("rail"+e,0,800+40*e);i=s(226,200)+g(31,35,11,164,oe)+g(41,35,14,164,te)+g(161,35,11,164,oe)+g(171,35,14,164,te)+g(94,35,11,25,oe)+g(104,35,14,25,te)+g(4,55,14,15,oe)+g(15,55,210,15,te)+g(1,15,14,20,oe)+g(13,15,210,20,te)+g(1,1,222,15,"356"),p(G1,160,580),i=s(401,228)+y("m1 227 205-226 194 226z","19d")+y("m1 227h150l55-226z","28c"),p(U1,623,393),i=s(512,181);for(let e=0;e<R1.length;e+=3)i+=g(R1[e],R1[e+1],R1[e+2],200,"fff",R1[e+2]/2);p(M1,512,0),le(135,"4a4"),p(H1,512,183),le(70,"5c4"),E0=1,p(Z1,512,320),e1(B5,e=>{e0=.25,j=0,w0=.5,v0=1,x0=20,b0=15,_0=18,$0=12,F0=7,A0=6,q=0,b=1,o0=0,t0=3,H=0,Z=0,N0=2,n0=1.5,i0=-400,A=[],_=[],E=[],$=[],l0=0,r0=0,n(L5,0),a0=1048,W0(),f0=100,N.y=540,o1(-2160),K0(256),j0(1),P0=0,u=1}),e1(B6,e=>o1(0)),e1(B7,e=>{P0=1,u=0,J0(D8,0),j0(),K0(918),o1(-t)}),e1(B1,e=>{a.audio=!a.audio,n(L1,a.audio?"ON":"OFF"),l1()}),e1(B2,e=>i1(0,L2)),e1(B3,e=>i1(1,L3)),e1(B4,e=>o1(-t));{var c=D3;c0=c,D=c.getContext("webgl",{antialias:0,preserveDrawingBuffer:1}),y0=D.getExtension("ANGLE_instanced_arrays"),D.clearColor(0,0,0,0);let a=0,e=(e,o,t)=>{e=D.getAttribLocation(s,e),D.enableVertexAttribArray(e),D.vertexAttribPointer(e,t,o,0,24,a),y0.vertexAttribDivisorANGLE(e,1),o==D.SHORT&&(t*=2),o==D.FLOAT&&(t*=4),a+=t},o=(e,o)=>(e=D.createShader(e),D.shaderSource(e,o),D.compileShader(e),e),t=(e,o,t=D.STATIC_DRAW)=>{D.bindBuffer(e,D.createBuffer()),D.bufferData(e,o,t)},r="attribute",l="varying",n="uniform",i=o(D.VERTEX_SHADER,r+` vec2 a;${r} vec2 b;${r} vec2 c;${r} vec4 d;${r} vec4 e;${r} float f;${l} highp vec2 g;${l} vec4 h;${n} vec2 i;${n} vec2 j;void main(void){vec2 k;if(f!=0.0){float l=cos(f);float m=sin(f);vec2 n=c*(a-0.5);k=(b+vec2(l*n.x-m*n.y,m*n.x+l*n.y)+c/2.0)/i;}else{k=(b+c*a)/i;}gl_Position=vec4(k.x-1.0,1.0-k.y,0.0,1.0);g=(d.xy+d.zw*a)/j;if(e.x>127.0){float o=pow(2.0,(e.x-127.0)/16.0)/255.0;h=vec4(e.w*o,e.z*o,e.y*o,1.0);}else h=vec4(e.w/255.0,e.z/255.0,e.y/255.0,e.x/127.0);}`),f=o(D.FRAGMENT_SHADER,l+` highp vec2 g;${l} highp vec4 h;${n} sampler2D p;void main(void){gl_FragColor=texture2D(p,g)*h;}`),s=D.createProgram();D.attachShader(s,i),D.attachShader(s,f),D.linkProgram(s),D.useProgram(s),g0=s,D.blendFunc(D.SRC_ALPHA,D.ONE_MINUS_SRC_ALPHA),D.enable(D.BLEND),D.disable(D.DEPTH_TEST),t(D.ELEMENT_ARRAY_BUFFER,new Uint8Array([0,1,2,2,1,3])),t(D.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,1])),c=D.getAttribLocation(s,"a"),D.enableVertexAttribArray(c),D.vertexAttribPointer(c,2,D.FLOAT,0,0,0),c=new ArrayBuffer(96e4),u0=new Int16Array(c),m0=new Float32Array(c),h0=new Uint32Array(c),t(D.ARRAY_BUFFER,c,D.DYNAMIC_DRAW),e("b",D.SHORT,2),e("c",D.SHORT,2),e("d",D.SHORT,4),e("e",D.UNSIGNED_BYTE,4),e("f",D.FLOAT,1)}D4.onclick=o=>{if(0===P0){var t=o.offsetX,a=o.offsetY;if(a1(E))for(let e=E.length-1;0<=e;e--)if(8===(actor=E[e]).type&&actor.x-58<t&&t<actor.x+58&&actor.y-40<a&&a<actor.y+40){L(E,e),actor.leaping(actor);for(let e=0;e<7;e++)P(.2,o.offsetX-33,o.offsetY-33,k()*T,J1+B(0,2),750+100*k(),1,1,0,.5+k(),k()<.5?.05*-T:.05*T,0,0);return}}},r.onkeydown=e=>{e=e.keyCode,u&&(H||38!=e&&e!=a.controls[0].key||(H=1),Z||40!=e&&e!=a.controls[1].key||(Z=1))},r.onkeyup=e=>{var o=e.keyCode;w?(n(J,e.code),a.controls[v].code=e.code,a.controls[v].key=o,w=0,D5.style.zIndex=-1,l1()):u&&(!H||38!=o&&o!=a.controls[0].key||(H=0),!Z||40!=o&&o!=a.controls[1].key||(Z=0))},r.onresize=e=>{let o=r.innerWidth;(scaleAndCenter=e=>{e.style.transform=`scale(${Y0(o/X,r.innerHeight/t)})`,e.style.left=~~(o-D1.getBoundingClientRect().width)/2+"px"})(D1),scaleAndCenter(m),scaleAndCenter(D3),scaleAndCenter(D4),scaleAndCenter(D5)},r.onresize(),$=[],K=Date.now(),onEnterFrame()},onEnterFrame=e=>{if(requestAnimationFrame(onEnterFrame),o=Date.now(),x=(o-K)/1e3,K=o,0===P0){let o,a,t,r,l,n=(e,o)=>e.x>o.x-30&&e.x<o.x+30&&o.y-80<e.y&&e.y<o.y;q+=x,b=I(b+3e-4,0,2),1<=(j+=x)&&(--j,R(9)),(e0-=x)<=0&&(R(B0),R(8),e0+=.25),U(O(U1),135,28),U(O(U1),890,28);for(let e=-(z0+=30*x)%512;e<X;e+=512)U(O(M1),e,75,0,0);for(let e=0;e<X;e+=512)U(O(H1),e,124);U(O(G1),1600,60);for(let e=-197;e<X;e+=512)U(O(Z1),e,189);if(spawnPowerup=e=>{var o=B(100,1520),t=B(300,880);E.push(z(8,o,t,0,0,50,e.p,0,1,0,k(),K1+e.t,0,O(K1+e.t),4+k(),0,0)),P(.1,o-1,t-1,0,"powerup_flash",0,1,1,0,1,0,0,0)},(A0-=x)<0&&(A0+=2+k(),spawnPowerup(C[6])),(F0-=x)<0&&(F0+=4+k(),spawnPowerup(C[2])),($0-=x)<0&&($0+=5+k(),spawnPowerup(C[5])),(b0-=x)<0&&(b0+=7+k(),spawnPowerup(C[1])),(_0-=x)<0&&(_0+=12+k(),spawnPowerup(C[7])),(x0-=x)<0&&(x0+=9+k(),spawnPowerup(C[0])),(w0-=x)<0&&(w0+=1+k()*b,spawnPowerup(C[3])),(v0-=x)<0&&(v0+=1+k()*b,spawnPowerup(C[4])),F=[N],N.vy=0,H&&(N.vy=-f0),Z&&(N.vy=f0),N.y=I(N.y+N.vy*x,300,1055),(N0-=x)<=0&&(N0=n0,t=N.x-80,r=N.y-50,A.push(z(7,t,r-6+B(0,12),i0,0,0,0,0,0,0,0,0,0,O("p_bfg"),0,0,0,0,1,1)),P(.5,t-30,r-30,.5*T,j1+B(0,9),280+B(0,70),1,.75,1,1,0,15-k(),-15+k()),P(.05,t-30,r-20,k()*T,J1+B(0,2),0,1,1,0,1,0,0,0)),a1(A))for(let e=A.length-1;0<=e;e--)o=A[e],s1(o),o.leaping?o.y>=o.leaving?(L(A,e),c1(o,3,.25)):F.push(o):o.timed?(o.ttl-=x)<0?L(A,e):F.push(o):o.x<-64?L(A,e):F.push(o);if(a1(E)&&a1(A)){E.sort((e,o)=>e.x>o.x?1:-1),A.sort((e,o)=>o.x>e.x?1:-1);let t=e=>{R([10,11,12,7,12][mongol.type]),mongol.leaving=1,mongol.collides=0,mongol.vy=-1e3-B(200,500),mongol.vx=-500+B(0,1e3),3===mongol.type&&c1(mongol,3,.25),g1(mongol,9),a=O(q1+B(0,9)),M.drawImage(G,a.x,a.y,a.w,a.h,mongol.x-20,mongol.y,1.5*a.w,a.h/B(2,6)),f1([100,250,500,1e3,50][mongol.type]),L(A,e)};if(s0){for(let e=E.length-1;0<=e;e--)(mongol=E[e]).leaping||mongol.leaving||8==mongol.type||mongol.y-32>N.y-80&&mongol.y+16<N.y&&t(e);s0=0}if(Q&&(V-=x)<=0){V+=.2;var i=B(0,E.length-1);if(8!=(mongol=E[i]).type&&!mongol.leaving&&!mongol.leaping){var f=mongol.x-480,s=mongol.y-535;for(let e=0;e<3;e++)R(21),P(.5,f+B(0,20),s,.25*T,"rail"+B(0,3),0,1,.75,0,1,0,0,0);P(.5,mongol.x-45,mongol.y-80,k()*T,"muzzle3",0,1,2,0,1.5,0,0,0),t(i),W--<0&&(Q=0)}}for(let e=A.length-1;0<=e;e--)l=A[e],(o=>{for(let e=E.length-1;0<=e;e--)if(!(mongol=E[e]).leaping&&!mongol.leaving&&8!=mongol.type&&n(l,mongol))return t(o)})(e)}if(W0(),.05<t0&&(t0=I(t0-=x/10,.05,10)),(o0-=x)<=0){o0=t0+.1*k();let e=k(),o=0;e<.6&&o++,e<.4&&o++,e<.1&&o++,B0=o,E.push(z(o,-150+B(0,70),B(350,980),[100*b,80*b,60*b,300*b][o]+B(10,30),0,30,0,0,1,2+2*k(),e))}if(a1(E)){let t,a=E.length;for(let e=a-1;0<=e;e--){var c,g;8!=(t=E[e]).type?(s1(t),t.leaping||t.leaving?(t.vy+=45,2120<t.x?(L(E,e),y1([10,25,50,100,25][t.type])):1230<t.y?L(E,e):F.push(t)):(2===t.type?(t.actionDelay-=x)<0&&(c=Y.atan2(N.y+20-t.y,N.x-t.x),g=800*b+100*k(),_.push(z(7,t.x-110,t.y-75,S0(c)*g,L0(c)*g,160,0,0,0,0,0,0,40,O(N1),0,0,0,0,1,1)),t.type=4):0===t.type&&(t.actionDelay-=x)<0&&(_.push(z(7,t.x-60,t.y-92,600*b+100*k(),0,16,43,0,0,0,0,0,20,O(O1),0,0,0,0,1,1,.07*T+.02*k())),t.type=4),1645<t.x&&(t.leaping=1,t.collides=0,t.vx=700,t.vy=-850,R(5)))):(t.ttl-=x)<0?(L(E,e),P(.3,t.x-53,t.y-36,0,t.timed,0,1,1,0,1,0,0,-200)):(t.randomness-=x)<0&&(t.randomness++,P(.15,t.x-42,t.y-36,0,"powerup_flash",0,1,1,0,1,0,0,0)),F.push(t)}a=E.length;for(let o=0;o<a-1;o++){t=E[o];for(let e=o+1;e<a;e++){var y,d,p,h,m=E[e];t.collides&&m.collides&&(y=m.x-t.x,d=m.y-t.y,h=Y.sqrt(y*y+d*d),t.radius+m.radius>=h)&&(y/=h,d/=h,h*=t.radius/(t.radius+m.radius),p=t.x+y*h,h=t.y+d*h,t.x=p-y*t.radius,t.y=I(h-d*t.radius,300,1030),m.x=p+y*m.radius,m.y=h+d*m.radius)}}}if(F.sort((e,o)=>e.y>o.y?1:-1),a1(_))for(let e=_.length-1;0<=e;e--)o=_[e],s1(o),o.x>X?L(_,e):F.push(o),n({x:o.x+o.radius,y:o.y+o.leaping},N)&&(y1(o.damage),L(_,e));if(a1($))for(let e=$.length-1;0<=e;e--){var u;((actor=$[e]).counter-=x)<=0?L($,e):(actor.vx+=actor.gx,actor.vy+=actor.gy,s1(actor),actor.rotation+=actor.rotationRate,u=1/actor.ttl*actor.counter,actor.fades&&(actor.alpha=actor.originalAlpha*u),actor.shrinks&&(actor.scale=actor.originalScale*u,actor.iX=actor.texture.w*actor.originalScale*(1-u)/2,actor.iY=actor.texture.h*actor.originalScale*(1-u)/2),F.push(actor))}var w,v=4294967167;for(let e=0;e<F.length;e++)o=F[e],t=o.x,r=o.y,o.type<6?(overlayImage=D0[o.type],U(overlayImage.body,t+overlayImage.bodyX,r+overlayImage.bodyY,v,o.leaving?-.125*Y.PI:0),o!=N?(U(overlayImage.foot,t+overlayImage.leftFootX,r+overlayImage.leftFootY+t1(o),v,o.leaving?.125*Y.PI:0),U(overlayImage.foot,t+overlayImage.rightFootX,r+overlayImage.rightFootY-t1(o),v,o.leaving?-.25*Y.PI:0)):(U(overlayImage.foot,t+overlayImage.leftFootX,r+overlayImage.leftFootY+(0!=o.vy?t1(o):0)),U(overlayImage.foot,t+overlayImage.rightFootX,r+overlayImage.rightFootY-(0!=o.vy?t1(o):0))),U(overlayImage.weapon,t+overlayImage.weaponX+t1(o,1,overlayImage.weaponX2),r+overlayImage.weaponY+t1(o,.5,5))):(w=o.texture,8===o.type?O0(w.x,w.y,w.w,w.h,o.x-53,o.y-36,w.w,w.h):(0!=o.rotationRate&&(o.rotation+=o.rotationRate),O0(w.x,w.y,w.w,w.h,o.x+o.iX,o.y+o.iY,~~(w.w*o.scale),~~(w.h*o.scale),4294967040+127*o.alpha,o.rotation)))}D.clear(D.COLOR_BUFFER_BIT),D.bufferSubData(D.ARRAY_BUFFER,0,h0.subarray(0,6*C0)),y0.drawElementsInstancedANGLE(D.TRIANGLES,6,D.UNSIGNED_BYTE,0,C0),C0=0}</script>