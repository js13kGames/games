var spriteObject={sourceX:0,sourceY:0,sourceWidth:16,sourceHeight:16,width:32,height:32,x:0,y:0,vx:0,vy:0,visible:!0,backdrop:!1,accelerationX:0,accelerationY:0,speedLimit:2,friction:.96,bounce:-.7,gravity:.2,floating:-.2,frictionInAir:.96,frictionInWater:.9,speedLimitInAir:2,speedLimitInWater:1,isOnGround:void 0,isInWater:void 0,jumpForce:-4,centerX:function(){return this.x+this.width/2},centerY:function(){return this.y+this.height/2},halfWidth:function(){return this.width/2},halfHeight:function(){return this.height/2}},messageObject={x:0,y:0,visible:!0,text:"Message",font:"normal bold 20px Helvetica",fillStyle:"red",textBaseline:"top"};function hitTestCircle($,a){var e,t=$.centerX()-a.centerX(),i=$.centerY()-a.centerY();return Math.sqrt(t*t+i*i)<$.halfWidth()+a.halfWidth()}function blockCircle($,a,e){void 0===e&&(e=!1);var t=$.centerX()-a.centerX(),i=$.centerY()-a.centerY(),r=Math.sqrt(t*t+i*i),b=$.halfWidth()+a.halfWidth();if(r<b){var n=b-r;if(dx=t/r,dy=i/r,$.x+=n*dx,$.y+=n*dy,e){var o={};o.vx=i,o.vy=-t,bounceOffSurface($,o)}}}function hitTestRectangle($,a){var e=!1,t=$.centerX()-a.centerX(),i=$.centerY()-a.centerY(),r=$.halfWidth()+a.halfWidth(),b=$.halfHeight()+a.halfHeight();return Math.abs(t)<r&&Math.abs(i)<b}function blockRectangle($,a,e,t){void 0===e&&(e=!1),void 0===e&&(t=!1);var i="",r=$.centerX()-a.centerX(),b=$.centerY()-a.centerY(),n=$.halfWidth()+a.halfWidth(),o=$.halfHeight()+a.halfHeight();if(Math.abs(r)<n){if(Math.abs(b)<o){var s=n-Math.abs(r),h=o-Math.abs(b);s>=h?(b>0?(i="top",t||($.y=$.y+h)):(i="bottom",$.y=$.y-h),e&&($.vy*=-1)):(r>0?(i="left",t||($.x=$.x+s)):(i="right",t||($.x=$.x-s)),e&&($.vx*=-1))}else i="none"}else i="none";return i}function blockCircle($,a,e){void 0===e&&(e=!1);var t=$.centerX()-a.centerX(),i=$.centerY()-a.centerY(),r=Math.sqrt(t*t+i*i),b=$.halfWidth()+a.halfWidth();if(r<b){var n=b-r;if(dx=t/r,dy=i/r,$.x+=n*dx,$.y+=n*dy,e){var o={};o.vx=i,o.vy=-t,bounceOffSurface($,o)}}}function bounceOffSurface($,a){a.lx=a.vy,a.ly=-a.vx,a.magnitude=Math.sqrt(a.vx*a.vx+a.vy*a.vy),a.dx=a.vx/a.magnitude,a.dy=a.vy/a.magnitude;var e=$.vx*a.dx+$.vy*a.dy,t=e*a.dx,i=e*a.dy,r=$.vx*(a.lx/a.magnitude)+$.vy*(a.ly/a.magnitude),b=r*(a.lx/a.magnitude),n=r*(a.ly/a.magnitude),o=t+(b*=-1),s=i+(n*=-1);$.vx=o,$.vy=s}!function(){var $=document.querySelector("canvas"),a=$.getContext("2d");a.imageSmoothingEnabled=!1;var e=[],t=[],i=0,r=0,b=["Why did they send me back in time this time again?","I just wanna stay home in my comfy sofa and relax.","What is the point of this useless level, anyway?","All they gave me was a lousy jetpack and a raygun.","Please, say this is the last level or I quit now."],n=["0000000000000000000000000000000000000000","0000000000000000aa0000000000003000aa0000","000000000000000acda00000000000000acda000","000000000000000abba00000000000000abba000","000000000000000abba00000000000000abba000","000000000000000abba000000aa000000abba000","000000000000000abba00000acda00000abba000","000000000000000abba0000acbbda0000abba000","000000000000000abba0000afbbea0000abba000","000100800000000abba00000afea00000abba000","444444440000000abba000000aa000000abba000","444444444000000abba00000000000000abba000","444444444400000abba00000000000000abba000","444444444440000aaaa00000000000000aaaa000","4444444444440000000000080000000000000000","4444444444444000000007777000000000000000","4444444444444400000000000000000000000000","4444444444444440200000000000800200000500","4444444444444444444466666644444449994444","4444444444444444444466666644444444444444","4444444444444444444466666644444444444444","4444444444444444444466666644444444444444","4444444444444444444466666644444444444444","4444444444444444444466666644444444444444"];function o($){for(var a=[...Array(24)].map($=>Array(36).fill(0)),e=0;e<24;e++)for(var t=0;t<40;t++)a[e][t]=parseInt($[e][t],16);return a}t.push(o(n)),t.push(o(["0000000000000000000000000000000000000000","0000000000000000000030000000000000000500","0000008000000000000aa0000000000000777777","000007777000000000acda000000000000000000","00000000000000000acbbda00000000000000000","0000000000000000acbbbbda0000000008000000","000000000000000acbbbbbbda000000777700000","000000000080000afbbbbbbea000000000000000","0000000077770000afbbbbea0000000000000000","00000000000000000afbbea00000000000000000","000000000000000000afea000000000008000000","0000000000000000000aa0000000000077770000","0000000000000020000000002000000000000000","0000800000000444440000444440000000000000","0007777000004444440000444444000000000000","0000000000044444440000444444400000000000","0000000000444440000000000444440000000000","0100000004444440000000000444444000000000","4444444444444440800000020444444444444444","4444444444444444446666444444444444444444","4444444444444444446666444444444444444444","4444444444444444446666444444444444444444","4444444444444444446666444444444444444444","4444444444444444446666444444444444444444"])),t.push(o(["0000000000aa0000000000000000aa0000000000","000000000acda00000000000000acda000000000","00000000acbbda000000000000acbbda00000000","00000000abbbba000000000000abbbba00000000","01000000abbbba000000000000abbbba00000500","77777000abbbba000000000000abbbba00077777","00000000abbbba000000200000abbbba00000000","00000000abbbba000044444400abbbba00000000","00000000abbbba000004444000abbbba00000000","00000000abbbba000000440000abbbba00000000","00000000abbbba003000440030abbbba00000000","00000000abbbba000000440000abbbba00000000","00000000abbbba000000440000abbbba00000000","00000000abbbba000000440000abbbba00000000","00000000abbbba000000440000abbbba00000000","00000000abbbba000000440000abbbba00000000","00800000abbbba000000440000abbbba00000800","77777000abbbba000000440000abbbba00077777","00000000abbbba000000440000abbbba00000000","00000000aaaaaa000000440000aaaaaa00000000","0000000000800000000044000000080000000000","0000000000000000000044000000000000000000","0000000000000000000444400000000000000000","9999999999999999994444449999999999999999"])),t.push(o(["0000000000000000004444000000000000000000","0000000000000000000440000000000000000000","0000000000000000000440000000000000000000","0000000000000000000440000000000000003000","0010000000000000000440000000000000000050","4444444400300000000440000000000044000444","4444444440000000000440000000000444400044","4444444444000000000440000000004444440044","0000000444000000000440000000044440000000","000aa000440000000004400000004444000aa000","00acda0004000000000440000004444000acda00","00abba0000004400000440000044440000abba00","00abba0000044440804444080444400000abba00","00abba0000004444444444444444000000abba00","00abba0000000444444444444440000000abba00","00abba0000000044444444444440000000abba00","00abba0000000444400000000000000000abba00","00abba0000000444000000000000040000abba00","00aaaa0000000440000000000004444000aaaa00","0008000000000400000000000000444400208000","4444444444400000000000000000044444444444","4444444444400000000000000000004444444444","4444444444400000800000020000000444444444","4444444444444444444444444444444444444444"])),t.push(o(["0000000000000000000aa0000000000000000000","000000000000000000acda000000000000000000","00000000000000000acbbda00000000000000000","0000000000000000acbbbbda0000000000000000","001000000000000acbbbbbbda000000000000500","44444440000000acbbbbbbbbda00000004444444","0000004400000acbbbbbbbbbbda0000044000000","0000000440000aaaaaaaaaaaaaa0000440000000","0000000044000000000000000000004400000000","0000000004400000000200000000044000000000","0000000000000004444444444000000000000000","0000000000000044000000004400000000000000","0000000000000440000000000440000000000000","0000000000004400000000000044000000000000","0000000000044000000000000004400000000000","0000000000440000000000000000440000000000","0000000004400000000000000000044000000000","0000028044002800000000000082004408200000","6666444444444444446666444444444444446666","6666666666666666666666666666666666666666","6666666666666666666666666666666666666666","6666666666666666666666666666666666666666","6666666666666666666666666666666666666666","6666666666666666666666666666666666666666"]));var s=null,h=null,l=null,c=[],f=[],v=[],_=[],d=[],u=[],y=[],g=[],x=[],m=[],p=[],w=[],k=0,I=new Image;I.addEventListener("load",E,!1),I.src="Gothic.png",w.push(I);var W=0,X=0,Y=!1,T=!1,L=!1,A=0,O=0,S=!1,G=!1,R=!1,B=!1,j=!1,q=!1,F=!1,C={x:0,y:0,width:32*n[0].length,height:32*n.length},H={x:0,y:0,width:$.width,height:$.height,rightInnerBoundary:function(){return this.x+this.width/2+this.width/4},leftInnerBoundary:function(){return this.x+this.width/2-this.width/4},topInnerBoundary:function(){return this.y+this.height/2-this.height/4},bottomInnerBoundary:function(){return this.y+this.height/2+this.height/4}};function E(){++k===w.length&&(I.removeEventListener("load",E,!1),O=5)}function P($,a,e){for(var t=0;t<24;t++)for(var i=0;i<40;i++){var r=$[t][i];if(0!=r&&r>=a&&r<=e){var b=16*Math.floor((r-1)%16),n=16*Math.floor((r-1)/16),o=Object.create(spriteObject);switch(o.sourceX=b,o.sourceY=n,o.x=32*i,o.y=32*t,r){case 1:o.dx=1,o.dy=0,s=o,c.push(o);break;case 2:o.vx=1,o.shotTimer=0,c.push(o),f.push(o);break;case 3:o.vy=1,o.shotTimer=0,c.push(o),x.push(o);break;case 4:o.platform=!1,c.push(o),v.push(o);break;case 5:h=o,c.push(h);break;case 6:c.push(o),d.push(o);break;case 7:o.platform=!0,c.push(o),v.push(o);break;case 8:c.push(o),u.push(o),A++;break;case 9:c.push(o),y.push(o);break;default:o.backdrop=!0,c.push(o)}}}}function D($,a){var e=a.indexOf($);-1!==e&&a.splice(e,1)}function z($,a){for(var e=0;e<10;e++)J($,a,(Math.random()-.5)*10,(Math.random()-.5)*10)}function M($,a,e,t){var i=Object.create(spriteObject);return i.sourceWidth=8,i.sourceHeight=8,i.width=16,i.height=16,i.x=$,i.y=a,i.vx=e,i.vy=t,i}function J($,a,e,t){var i=M($,a,e,t);i.sourceX=248,i.sourceY=8,i.moving=!0,c.push(i),m.push(i)}function V($,a,e,t){var i=M($,a,e,t);i.sourceX=240,c.push(i),g.push(i)}H.x=C.x+C.width/2-H.width/2,H.y=C.y+C.height/2-H.height/2,window.addEventListener("keydown",function($){switch($.keyCode){case 37:G=!0;break;case 39:S=!0;break;case 38:R=!0;break;case 40:B=!0;break;case 88:q=!0;break;case 90:j=!0;break;case 82:F=!0}$.preventDefault()},!1),window.addEventListener("keyup",function($){switch($.keyCode){case 37:G=!1;break;case 39:S=!1;break;case 38:R=!1;break;case 40:B=!1;break;case 88:q=!1;break;case 90:j=!1}},!1),(titleMessage=Object.create(messageObject)).x=150,titleMessage.y=50,titleMessage.font="bold 40px Georgia",titleMessage.fillStyle="red",titleMessage.text="Gothic Tower",titleMessage.visible=!1,_.push(titleMessage),(l=Object.create(messageObject)).x=180,l.y=150,l.font="bold 30px Georgia",l.fillStyle="olive",l.text="",l.visible=!1,_.push(l),(infoMessage=Object.create(messageObject)).x=80,infoMessage.y=200,infoMessage.font="bold 20px Georgia",infoMessage.fillStyle="olive",infoMessage.text="Play with: z - thrust, x - fire, arrows - steering.",infoMessage.visible=!1,_.push(infoMessage),(authorMessage=Object.create(messageObject)).x=70,authorMessage.y=300,authorMessage.font="bold 20px Georgia",authorMessage.fillStyle="maroon",authorMessage.text="By Magnus Lindh for the js13k Game Jam 2023.",authorMessage.visible=!1,_.push(authorMessage),function n(){switch(requestAnimationFrame(n,$),F&&4!=O&&(F=!1,i--,O=4,L&&(i=-1,L=!1),zzfx(...[,,621,.02,.01,1,1,.38,,4.2,,,,,21,,,,.05])),O){case 0:console.log("loading...");break;case 1:P(e=[...t[i]],10,16),P(e,1,9),O=2;break;case 2:(function $(){T&&!F&&(O=3,zzfx(...[1.48,,581,.05,.3,.43,1,.21,,,-19,.1,.03,,,,.06,.48,.22])),s.accelerationX=0,s.accelerationY=0,s.friction=s.frictionInAir,s.isInWater=!1;for(var a,r,b,n,o,l=0;l<d.length;l++)if(hitTestRectangle(s,d[l])){s.friction=s.frictionInWater,s.isInWater=!0;break}function _($){$.x+=$.vx,$.y+=$.vy}G&&!S&&(s.accelerationX=-.2,s.dx=-1),S&&!G&&(s.accelerationX=.2,s.dx=1),R&&!B&&s.isOnGround&&!s.isInWater&&(s.vy+=s.jumpForce,s.isOnGround=!1,zzfx(...[1.03,,137,,.06,.06,1,.49,5.7,.1,,,,.8,,,,.24,.07])),j&&!s.isInWater&&(s.accelerationY=-.3,a=s.x+16-8,r=s.y+32-8,b=Math.random()-.5,(o=M(a,r,b,n=5*Math.random())).sourceX=248,o.sourceY=8,o.life=30,c.push(o),p.push(o),zzfx(...[.1,,511,.01,.23,.03,2,2.74,15,45,-6,.04,,.4,,.3,,,.01])),X++,q&&X>60&&!s.isInWater&&(X=0,V(s.x+32*s.dx,s.y,3*s.dx,3*s.dy),zzfx(...[,,360,.01,.08,.02,1,.44,-3.7,,,,,.4,,,,.83,.06])),s.isInWater&&(R&&!B&&(s.accelerationY=-.1),B&&!R&&(s.accelerationY=.1)),s.vx+=s.accelerationX,s.vy+=s.accelerationY,s.isOnGround&&(s.vx*=s.friction),s.isInWater&&(s.vx*=s.friction,s.vy*=s.friction),s.vy+=s.gravity,s.isInWater&&(s.vy+=s.floating),s.isInwater?s.speedLimit=s.speedLimitInWater:s.speedLimit=s.speedLimitInAir,s.vx>s.speedLimit&&(s.vx=s.speedLimit),s.vx<-s.speedLimit&&(s.vx=-s.speedLimit),s.vy>2*s.speedLimit&&(s.vy=2*s.speedLimit),s.vy<-(2*s.speedLimit)&&(s.vy=-(2*s.speedLimit)),_(s);for(var l=0;l<g.length;l++)_(g[l]);for(var l=0;l<m.length;l++)m[l].moving&&(_(m[l]),m[l].vy+=.2);for(var l=0;l<p.length;l++){var w=p[l];w.life>0&&(_(w),w.life--,20==w.life&&(w.sourceX=240,w.sourceY=8),10==w.life&&(w.sourceX=248,w.sourceY=0),0==w.life&&(D(w,p),D(w,c),w.visible=!1))}for(var l=0;l<p.length;l++)for(var w=p[l],k=0;k<v.length;k++)if(hitTestRectangle(w,v[k])){D(w,p),D(w,c);break}for(var l=0;l<m.length;l++)if(m[l].moving)for(var k=0;k<v.length;k++)hitTestRectangle(m[l],v[k])&&(m[l].moving=!1);for(var l=0;l<g.length;l++){var I=g[l];(I.x>C.width||I.x<0||I.y>C.height||I.y<0)&&(D(I,g),D(I,c))}for(var l=0;l<g.length;l++){var I=g[l];hitTestRectangle(I,s)&&(T=!0)}for(var l=0;l<g.length;l++)for(var I=g[l],k=0;k<v.length;k++)if(hitTestRectangle(I,v[k])){D(I,g),D(I,c);break}function L($){for(var a=0;a<g.length;a++)for(var e=g[a],t=0;t<$.length;t++){var i=$[t];if(hitTestRectangle(e,i)&&i.visible){D(e,g),D(e,c),i.visible=!1,z(i.x,i.y),zzfx(...[2.11,,970,.01,.22,.5,4,1.96,,,,,.06,1.4,,.5,.42,.3,.19]);break}}}function E($){for(var a=0;a<$.length;a++){var e=$[a];e.shotTimer++;var t=s.x-e.x,i=s.y-e.y,r=Math.sqrt(t*t+i*i);r<200&&e.shotTimer>60&&e.visible&&(V(e.x+8+t/r*32,e.y+8+i/r*32,t/r*3,i/r*3),e.shotTimer=0,zzfx(...[,,49,.01,.03,.23,2,0,,,,,,,,.3,,.74]))}}L(f),L(x),E(f),E(x);for(var l=0;l<v.length;l++){var P=blockRectangle(s,v[l],!1,v[l].platform);"bottom"===P&&s.vy>=0?(s.isOnGround=!0,s.vy=-s.gravity):"top"===P&&s.vy<=0&&!v[l].platform?s.vy=0:"right"===P&&s.vx>=0&&!v[l].platform?s.vx=0:"left"===P&&s.vx<=0&&!v[l].platform&&(s.vx=0),"bottom"!==P&&s.vy>0&&(s.isOnGround=!1)}for(var l=0;l<f.length;l++){var J=f[l];if(J.visible&&_(J),Math.floor(J.x)%32==0&&Math.floor(J.y)%32==0){var K=Math.floor(J.x/32),N=Math.floor(J.y/32);if(N<23){var Q=e[N+1][K-1],U=e[N+1][K+1];(4!==Q||4!==U)&&(J.vx*=-1)}K>0&&4===e[N][K-1]&&(J.vx*=-1),K<39&&4===e[N][K+1]&&(J.vx*=-1)}}for(var l=0;l<x.length;l++){var Z=x[l];if(Z.visible&&_(Z),Math.floor(Z.x)%32==0&&Math.floor(Z.y)%32==0){var $$=Math.floor(Z.x/32),$2=Math.floor(Z.y/32);0==$$||39==$$||0==$2||23==$2?Z.vy*=-1:($2>0&&4===e[$2-1][$$]&&(Z.vy*=-1),$2<23&&4===e[$2+1][$$]&&(Z.vy*=-1))}}for(var l=0;l<f.length;l++){var J=f[l];J.visible&&hitTestCircle(s,J)&&(s.vy>0?(blockCircle(s,J,!0),J.visible=!1,z(J.x,J.y)):T=!0)}hitTestRectangle(s,h)&&W===A&&(Y=!0,O=i<t.length-1?4:3,zzfx(...[,,644,.05,.26,.24,2,.4,-2.6,-.1,52,.05,.01,,,,,.52,.2]));for(var l=0;l<u.length;l++){var $a=u[l];hitTestRectangle(s,$a)&&$a.visible&&($a.visible=!1,W++,zzfx(...[1.03,,1292,,.07,.14,1,1.6,,,351,.03,,,,.1,,.76,.03]))}for(var l=0;l<y.length;l++)hitTestRectangle(s,y[l])&&(T=!0);s.x<0&&(s.vx=0,s.x=0),s.y<0&&(s.vy=0,s.y=0),s.x+s.width>C.width&&(s.vx=0,s.x=C.width-s.width),s.y+s.height>C.height&&(s.vy=0,s.y=C.height-s.height,s.isOnGround=!0,s.vy=-s.gravity),s.x<H.leftInnerBoundary()&&(H.x=Math.floor(s.x-H.width/4)),s.y<H.topInnerBoundary()&&(H.y=Math.floor(s.y-H.height/4)),s.x+s.width>H.rightInnerBoundary()&&(H.x=Math.floor(s.x+s.width-H.width/4*3)),s.y+s.height>H.bottomInnerBoundary()&&(H.y=Math.floor(s.y+s.height-H.height/4*3)),H.x<C.x&&(H.x=C.x),H.y<C.y&&(H.y=C.y),H.x+H.width>C.x+C.width&&(H.x=C.x+C.width-H.width),H.y+H.height>C.height&&(H.y=C.height-H.height)})();break;case 4:l.visible=!0,l.fillStyle="white",l.text="Get ready for level "+(i+2),infoMessage.visible=!0,infoMessage.fillStyle="white",infoMessage.text=b[i+1],60==++r&&(r=0,++i<t.length?(c=[],f=[],v=[],d=[],u=[],y=[],g=[],x=[],m=[],p=[],A=0,W=0,T=!1,Y=!1,H.x=C.x+C.width/2-H.width/2,H.y=C.y+C.height/2-H.height/2,l.visible=!1,infoMessage.visible=!1,O=1):O=3);break;case 3:l.visible=!0,l.fillStyle="white",W===A&&Y?(l.text="Victory! Press r.",L=!0):l.text="Defeat! Press r.";break;case 5:titleMessage.visible=!0,l.text="Press x to play.",l.visible=!0,infoMessage.visible=!0,authorMessage.visible=!0,q&&(titleMessage.visible=!1,l.visible=!1,infoMessage.visible=!1,authorMessage.visible=!1,i--,O=4)}(function e(){if(a.globalAlpha=1,a.fillStyle="black",a.fillRect(0,0,$.width,$.height),0!==c.length)for(var t=0;t<2;t++){0==t?a.translate(-(.9*H.x)-.02*C.width,-(.9*H.y)-.02*C.height):a.translate(-H.x,-H.y);for(var i=0;i<c.length;i++){var r=c[i];if(r.visible&&(r.backdrop&&0==t||!r.backdrop&&1==t)){var b=Math.pow(s.x-r.x,2)+Math.pow(s.y-r.y,2);1==t?a.globalAlpha=Math.exp(-(1e-5*b)):a.globalAlpha=.5,a.drawImage(I,r.sourceX,r.sourceY,r.sourceWidth,r.sourceHeight,Math.floor(r.x),Math.floor(r.y),r.width,r.height)}}a.resetTransform()}if(0!==_.length){a.globalAlpha=1;for(var i=0;i<_.length;i++){var n=_[i];n.visible&&(a.font=n.font,a.fillStyle=n.fillStyle,a.textBaseline=n.textBaseline,a.fillText(n.text,n.x,n.y))}}})()}()}(),function(){for(var $=0,a=["ms","moz","webkit","o"],e=0;e<a.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[a[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[a[e]+"CancelAnimationFrame"],window[a[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a,e){var t=new Date().getTime(),i=Math.max(0,16-(t-$)),r=window.setTimeout(function(){a(t+i)},i);return $=t+i,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function($){clearTimeout($)})}(),zzfxV=.3,zzfx=($=1,a=.05,e=220,t=0,i=0,r=.1,b=0,n=1,o=0,s=0,h=0,l=0,c=0,f=0,v=0,_=0,d=0,u=1,y=0,g=0,x=Math,m=44100,p=2*x.PI,w=o*=500*p/m/m,k=e*=(1-a+2*a*x.random(a=[]))*p/m,I=0,W=0,X=0,Y=1,T=0,L=0,A=0,O,S)=>{for(t=m*t+9,y*=m,i*=m,r*=m,d*=m,s*=500*p/m**3,v*=p/m,h*=p/m,l*=m,c=m*c|0,S=t+y+i+r+d|0;X<S;a[X++]=A)++L%(100*_|0)||(A=b?1<b?2<b?3<b?x.sin((I%p)**3):x.max(x.min(x.tan(I),1),-1):1-(2*I/p%2+2)%2:1-4*x.abs(x.round(I/p)-I/p):x.sin(I),A=(c?1-g+g*x.sin(p*X/c):1)*(0<A?1:-1)*x.abs(A)**n*zzfxV*$*(X<t?X/t:X<t+y?1-(X-t)/y*(1-u):X<t+y+i?u:X<S-d?(S-X-d)/r*u:0),A=d?A/2+(d>X?0:(X<S-d?1:(S-X)/d)*a[X-d|0]/2):A),I+=(O=(e+=o+=s)*x.cos(v*W++))-O*f*(1-1e9*(x.sin(X)+1)%2),Y&&++Y>l&&(e+=h,k+=h,Y=0),!c||++T%c||(e=k,o=w,Y||=1);return($=zzfxX.createBuffer(1,S,m)).getChannelData(0).set(a),(e=zzfxX.createBufferSource()).buffer=$,e.connect(zzfxX.destination),e.start(),e},zzfxX=new AudioContext;