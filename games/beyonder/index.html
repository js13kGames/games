<!doctype html><meta content="width=device-width,maximum-scale=1" name=viewport><title>Beyonder</title><style>*{text-shadow:0 0 .25em #0008,0 0 .5em #fff}body{margin:0;overflow:hidden;font-family:-apple-system,system-ui;font-weight:900;color:#fff;font-size:2vmax;cursor:default;background:#000;user-select:none;-webkit-user-select:none;text-align:center}canvas{width:100%;height:100%;display:block}.c,.d{display:flex;flex-direction:column;align-items:center;justify-content:flex-end;z-index:1;position:fixed;inset:0;padding:1em;background:#0003}.d{background:#000}[hidden]{display:none}.title{font-size:2em;margin-bottom:1em}.e{margin-bottom:2em;font-size:.75em;max-width:40em}.f{font-size:.5em}.start{font-size:1.1em;padding:.5em 0;width:5em;border-radius:.25em;transition:all .2s ease}.start:hover{text-shadow:0 0 .25em #fff,0 0 .5em #000;color:#000}.start.b{bottom:.5em}</style><canvas></canvas><div class=c><div class=title>Beyonder</div><div class=e>You're dead. There is one thing left to do: go beyonder.<br>Follow the flow, or be a lost soul forever.<br><br>You move in the direction you're looking.<br>Go faster by using a mouse button, trigger or touch.<br>How fast can <i>you</i> reach the place that lies beyonder?</div><div class="start a">Start</div><div class="start b">VR</div><div class=f>Stick-controls supported for VR</div></div><div class=d>Generating music...</div><script>function h(t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]){return new Float32Array(t)}function aa(t,e=t){let a=e[0],n=e[1],r=e[2],c=e[3],o=e[4],i=e[5],l=e[6],u=e[7],f=e[8],h=e[9],s=e[10],b=e[11],m=e[12],d=e[13],v=e[14],g=a*i-n*o,M=a*l-r*o,p=a*u-c*o,y=n*l-r*i,w=n*u-c*i,x=r*u-c*l,A=f*d-h*m,P=f*v-s*m,L=f*(e=e[15])-b*m,B=h*v-s*d,S=h*e-b*d,C=s*e-b*v,D=1/(g*C-M*S+p*B+y*L-w*P+x*A);t.set([(i*C-l*S+u*B)*D,(r*S-n*C-c*B)*D,(d*x-v*w+e*y)*D,(s*w-h*x-b*y)*D,(l*L-o*C-u*P)*D,(a*C-r*L+c*P)*D,(v*p-m*x-e*M)*D,(f*x-s*p+b*M)*D,(o*S-i*L+u*A)*D,(n*L-a*S-c*A)*D,(m*w-d*p+e*g)*D,(h*p-f*w-b*g)*D,(i*P-o*B-l*A)*D,(a*B-n*P+r*A)*D,(d*M-m*y-v*g)*D,(f*y-h*M+s*g)*D])}function ca(t,e,a){let n=e[0],r=e[1],c=e[2],o=e[3],i=e[4],l=e[5],u=e[6],f=e[7],h=e[8],s=e[9],b=e[10],m=e[11],d=e[12],v=e[13],g=e[14];e=e[15];let M=a[0],p=a[1],y=a[2],w=a[3];return t[0]=M*n+p*i+y*h+w*d,t[1]=M*r+p*l+y*s+w*v,t[2]=M*c+p*u+y*b+w*g,t[3]=M*o+p*f+y*m+w*e,M=a[4],p=a[5],y=a[6],w=a[7],t[4]=M*n+p*i+y*h+w*d,t[5]=M*r+p*l+y*s+w*v,t[6]=M*c+p*u+y*b+w*g,t[7]=M*o+p*f+y*m+w*e,M=a[8],p=a[9],y=a[10],w=a[11],t[8]=M*n+p*i+y*h+w*d,t[9]=M*r+p*l+y*s+w*v,t[10]=M*c+p*u+y*b+w*g,t[11]=M*o+p*f+y*m+w*e,M=a[12],p=a[13],y=a[14],w=a[15],t[12]=M*n+p*i+y*h+w*d,t[13]=M*r+p*l+y*s+w*v,t[14]=M*c+p*u+y*b+w*g,t[15]=M*o+p*f+y*m+w*e,t}function da(t,e){let a=e[0],n=e[1],r=e[2];return e=e[3],t[0]=1-2*(n*n+r*r),t[1]=2*(a*n+e*r),t[2]=2*(a*r-e*n),t[4]=2*(a*n-e*r),t[5]=1-2*(a*a+r*r),t[6]=2*(n*r+e*a),t[8]=2*(a*r+e*n),t[9]=2*(n*r-e*a),t[10]=1-2*(a*a+n*n),t}function m(t){return new Float32Array(t||3)}function ea(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function fa(t){return Math.hypot(...t)}function ha(t,e,a){t[0]=e[0]+a[0],t[1]=e[1]+a[1],t[2]=e[2]+a[2]}function ia(t,e,a){return t[0]=e[0]-a[0],t[1]=e[1]-a[1],t[2]=e[2]-a[2],t}function ja(t,e,a,n){return t[0]=e[0]+a[0]*n,t[1]=e[1]+a[1]*n,t[2]=e[2]+a[2]*n,t}function ka(t,e,a,n){return t[0]=e[0]+(a[0]-e[0])*n,t[1]=e[1]+(a[1]-e[1])*n,t[2]=e[2]+(a[2]-e[2])*n,t}function q(t,e){return Math.hypot(t[0]-e[0],t[1]-e[1],t[2]-e[2])}function la(t,e=t){let a=Math.hypot(e[0],e[1],e[2]);return t[0]=e[0]/a,t[1]=e[1]/a,t[2]=e[2]/a,t}function ma(t,e,a){return t[0]=e[1]*a[2]-e[2]*a[1],t[1]=e[2]*a[0]-e[0]*a[2],t[2]=e[0]*a[1]-e[1]*a[0],t}function na(t,e,a){var n=e[0];let r=e[1],c=e[2];e=a[0];let o=a[1],i=a[2],l=(a=a[3])*n+o*c-i*r,u=a*r+i*n-e*c,f=a*c+e*r-o*n;n=-e*n-o*r-i*c,t.set([l*a+n*-e+u*-i-f*-o,u*a+n*-o+f*-e-l*-i,f*a+n*-i+l*-o-u*-e])}function oa(t,e,a){return e=ea(e,a)/ea(a,a),t[0]=a[0]*e,t[1]=a[1]*e,t[2]=a[2]*e,t}function r(t){return new Float32Array(t||[0,0,0,1])}function pa(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=-e[3],t}function qa(t,e){var a=[0,0,1];e/=2;let n=Math.sin(e);return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=Math.cos(e),t}function ra(t,e,a){let n=ea(e,a)+1;return n<Number.EPSILON?(n=0,Math.abs(e[0])>Math.abs(e[2])?t.set([-e[1],e[0],0,n]):t.set([0,-e[2],e[1],n])):t.set([e[1]*a[2]-e[2]*a[1],e[2]*a[0]-e[0]*a[2],e[0]*a[1]-e[1]*a[0],n]),e=Math.hypot(t[0],t[1],t[2],t[3]),t[0]/=e,t[1]/=e,t[2]/=e,t[3]/=e,t}function sa(t,e,a){let n=e[0],r=e[1],c=e[2];e=e[3];let o=a[0],i=a[1],l=a[2];return a=a[3],t[0]=n*a+e*o+r*l-c*i,t[1]=r*a+e*i+c*o-n*l,t[2]=c*a+e*l+n*i-r*o,t[3]=e*a-n*o-r*i-c*l,t}var t=m(),ta=r(),ua=r();function va(t){la(t);let e=r();ra(e,m([0,0,1]),t),sa(e,sa(e,ua,e),pa(r(),ua)),sa(ta,ta,e)}var wa=h(),xa=h(),z=h();let A=new AudioContext({sampleRate:22050}),ya=A.createDynamicsCompressor();ya.connect(A.destination);let B=A.sampleRate;function za(t=1){let e=A.createGain();return e.gain.value=t,e}function Aa(t,e,a,n){let r=A.createBiquadFilter();return r.type=t,r.frequency.value=e,r.Q.value=a||1,r.gain.value=n||0,r}let Ba=document.querySelector(".b"),Ca=document.querySelector(".a"),Da=document.querySelector(".c"),La=document.querySelector(".d"),Ma=!1;class Na{constructor(t,e=!1){this.g=t,this.m=e,this.u=0}sample(t){for(;this.u<this.g.length-1;){let[e,a,n=1]=this.g[this.u],[r,c]=this.g[this.u+1];if(e<=t&&t<r)return t=(t-e)/(r-e),t=1<n?t**n:1-(1-t)**(1/n),this.m?a*(c/a)**t:a+t*(c-a);this.u++}return this.g[this.g.length-1][1]}}function Oa(){let t=.5*Math.random()+.5,e=.5*Math.random()+.5,a=.5*Math.random()+.5,n=Math.random();return n<1/7?t=.1:n<2/7?e=t=.1:n<3/7?e=.1:n<4/7?a=e=.1:n<5/7?a=.1:n<6/7&&(t=a=.1),[t,e,a]}let Sa,L,C=()=>new Promise((t=>{La.textContent+=".",requestAnimationFrame(t)}));function Pa(t,e){return t%=1,Math.sin(2*Math.PI*(t<.25*e?t/e:.5>t?.25+.25*(t-.25*e)/(.5-.25*e):t<1-.25*e?.5+.25*(t-.5)/(1-.25*e-.5):.75+.25*(t-(1-.25*e))/(.25*e)))}function Qa(){return 2*Math.random()-1}function Ra(t){var e=[.8,.4];let a=0;t.forEach((t=>{a=Math.max(a,t.length)}));let n=new Float32Array(a);return t.forEach(((a,r)=>{for(let c=0;c<a.length;c++)n[c]+=e[r]*a[c]/t.length})),n}function D(t,e){t=new Float32Array(t*B);for(let a=0;a<t.length;a++)t[a]=e(a/t.length,a/B);return t}function J(t,e){e=new Na(e);for(let a=0;a<t.length;a++)t[a]*=e.sample(a/t.length);return t}function K(t){return Math.min(Math.max(t,0),1)}function Ta(){let t=za(),e=za(0),a=A.createConvolver();a.buffer=Sa,e.connect(ya),a.connect(t).connect(ya);let n=[];L={l(e,r,c,o,i){let l=za(r?1e-5:1);o=za(o),i=za(i),c.connect(o).connect(l).connect(t),l.connect(i).connect(a),n.push({J:e,W:r,controller:l})},V(t){t.connect(e)},aa(e){t.gain.setValueAtTime(Math.sqrt(e),A.currentTime)},Y(t){e.gain.setValueAtTime(Math.sqrt(t),A.currentTime)},$(t){for(let e of n)e.controller.gain.setValueAtTime(1e-5*1e5**K((t-e.J)/(e.W-e.J)),A.currentTime)},Z(t){for(let e=0;e<n.length;e++)n[e].controller.gain.setValueAtTime(1e-5*1e5**K(1+e-t),A.currentTime)}}}function Ua(t,e){e.h.bind();for(let t=0;t<e.A.length;t++)e.A[t]&&e.A[t].bind(t);M.bindVertexArray(t.C),M.bindBuffer(34962,t.D),M.drawArrays(t.type,0,t.I)}let N=document.querySelector("canvas");function Va(){N.width=innerWidth*devicePixelRatio,N.height=innerHeight*devicePixelRatio}onresize=Va,Va();let M=N.getContext("webgl2",{xrCompatible:!0});function O(t,e,a){M.uniform1f(M.getUniformLocation(t.j,e),a)}M.enable(2929);class Wa{constructor(){this.j=M.createProgram()}join(t){return M.attachShader(this.j,t.h),this}bind(){return M.useProgram(this.j),this}}class Xa{constructor(t,e){this.h=M.createShader(t),M.shaderSource(this.h,"#version 300 es\n"+e),M.compileShader(this.h)}}function Ya(t){return new Xa(35633,"precision highp float;layout(location=0)in vec3 ap;uniform mat4 up;uniform mat4 uv;uniform mat4 um;uniform vec3 uhp;out vec3 vp;"+t)}let db,eb,Za=Ya("void main(){vp=vec3(um*vec4(ap,1.));gl_Position=up*uv*vec4(vp,1.);}");function $a(e){e.h.bind(),M.uniformMatrix4fv(M.getUniformLocation(e.h.j,"up"),!1,wa),M.uniform3fv(M.getUniformLocation(e.h.j,"uhp"),t),M.uniform3fv(M.getUniformLocation(e.h.j,"ucp"),z.slice(12,15)),M.uniformMatrix4fv(M.getUniformLocation(e.h.j,"uv"),!1,xa)}function ab(t,e){t.h.bind(),M.uniformMatrix4fv(M.getUniformLocation(t.h.j,"um"),!1,e)}class bb{constructor(t,e){for(this.h=new Wa,e?(e=Ya(e),this.h.join(e)):this.h.join(Za),t=new Xa(35632,"precision highp float;in vec3 vp;out vec4 o;uniform vec4 uc;uniform sampler2D ut[2];"+t+" void main(){o=shader();}"),this.h.join(t),t=this.h,M.linkProgram(t.j),M.useProgram(t.j),M.useProgram(null),this.h.bind(),this.A=[],t=0;2>t;t++)M.uniform1i(M.getUniformLocation(this.h.j,`ut[${t}]`),t)}}class cb{constructor({data:t,width:e,height:a,U:n=10497,filter:r=9729}){this.g=M.createTexture(),M.bindTexture(3553,this.g),e?M.texImage2D(3553,0,6408,e,a||e,0,6408,5121,new Uint8Array(t)):M.texImage2D(3553,0,6408,6408,5121,t),M.texParameteri(3553,10242,n),M.texParameteri(3553,10243,n),M.texParameteri(3553,10241,r),M.texParameteri(3553,10240,r)}bind(t=0){M.activeTexture(33984+t),M.bindTexture(3553,this.g)}}function fb(t,e=[3,2,3]){for(var a=0;a<e.length;a++)t.g+=4*e[a];M.bindVertexArray(t.C),M.bindBuffer(34962,t.D),a=0;for(let n=0;n<e.length;n++)M.vertexAttribPointer(n,e[n],5126,!1,t.g,a),M.enableVertexAttribArray(n),a+=4*e[n];M.bindBuffer(34962,null),M.bindVertexArray(null),t.g/=4,t.I=t.length/t.g}function gb(t,e){t.length=e.length,M.bindVertexArray(t.C),M.bindBuffer(34962,t.D),M.bufferData(34962,e,35044),t.I=t.length/t.g}function hb(){var t=ib,e=jb;M.bindVertexArray(t.C),M.bindBuffer(34962,t.D),M.bufferSubData(34962,0,e)}class kb{constructor(t=4){this.type=t,this.C=M.createVertexArray(),M.bindVertexArray(this.C),this.D=M.createBuffer(),M.bindBuffer(34962,this.D),this.I=this.length=this.g=0,M.bindBuffer(34962,null),M.bindVertexArray(null)}}let mb,lb=new kb;function nb(t,e){let a=new ob((t=>-t[1]));pb(a,[null,1/0]);let n=t=>{let r=q(e,t.v.i);for(var c=[0,0,0],o=0;3>o;o++)c[o]=o===t.F?e[o]:t.v.i[o];c=q(c,t.v.i),t.right||t.left?(o=t.right?t.left&&e[t.F]<t.v.i[t.F]?t.left:t.right:t.left,n(o),r<a.g[0][1]&&(pb(a,[t,r]),qb(a)),Math.abs(c)<a.g[0][1]&&(t=o===t.left?t.right:t.left)&&n(t)):r<a.g[0][1]&&(pb(a,[t,r]),qb(a))};return n(t.g),[a.g[0][0].v,a.g[0][1]]}fb(lb,[3]),gb(lb,new Float32Array([-1,-1,-1,1,-1,-1,0,1,-1,-1,-1,-1,0,0,1,0,1,-1,1,-1,-1,0,0,1,-1,-1,-1,0,1,-1,0,0,1,1,-1,-1]));class rb{constructor(t){let e=(t,a,n)=>{let r=a%3;if(0===t.length)return null;if(1===t.length)return{v:t[0],left:null,right:null,parent:n,F:r};t.sort(((t,e)=>t.i[r]-e.i[r]));let c=Math.floor(t.length/2);return(n={v:t[c],left:null,right:null,parent:n,F:r}).left=e(t.slice(0,c),a+1,n),n.right=e(t.slice(c+1),a+1,n),n};this.g=e([...t],0,null)}}function pb(t,e){t.g.push(e),e=t.g.length-1;let a=t.g[e];for(;0<e;){let n=Math.floor((e+1)/2)-1,r=t.g[n];if(!(t.m(a)<t.m(r)))break;t.g[n]=a,t.g[e]=r,e=n}}function qb(t){var e=t.g.pop();if(0<t.g.length){t.g[0]=e,e=0;let n=t.g.length,r=t.g[e],c=t.m(r);for(;;){let o=2*(e+1),i=o-1,l=null;var a=void 0;if(i<n&&(a=t.g[i],(a=t.m(a))<c&&(l=i)),o<n&&t.m(t.g[o])<(null===l?c:a)&&(l=o),null===l)break;t.g[e]=t.g[l],t.g[l]=r,e=l}}}class ob{constructor(t){this.g=[],this.m=t}size(){return this.g.length}}function sb(t,e){t.g.push({u:t.g.length,i:e})}function tb(){var t=ub;let e=[];for(let a of t.g)e.push(a.i[0],a.i[1],a.i[2]);return new Float32Array(e)}function vb(t){var e=ub;let[{u:a}]=nb(e.m,t);var n=e.g[a-1]?.i,r=e.g[a].i,c=e.g[a+1]?.i;let o,i;n?c?(o=ia(m(),r,n),i=ia(m(),c,r)):o=i=ia(m(),r,n):(o=i=ia(m(),c,r),n=ja(m(),r,o,-20));var l=fa(o);let u=fa(i);la(o),la(i),c=ia(m(),t,r);var f=oa(m(),ia(m(),t,n),o);let h=oa(m(),c,i),s=fa(f),b=fa(h);ha(f,f,n),ha(h,h,r),n=q(h,t);let d=q(r,t);t=q(f,t);let v=o;if(l=Math.max(0,a-1+s/l),n<t&&(t=n,v=i,f=h,l=a+b/u),d<t&&(t=d,f=r,v=0<fa(r=ma(m(),o,i))?la(ma(m(),c,r)):o,l=a),isNaN(t)||isNaN(f[0])||isNaN(v[0]))throw Error("wtf");return[t,f,v,l/(e.g.length-1)]}class wb{constructor(){this.g=[]}update(){this.m=new rb(this.g)}}let xb=new wb;for(let t=-10;50>=t;t++)sb(xb,m([0,0,25*-t]));xb.update();let yb=new wb;sb(yb,m());let P,Fb,zb=m([0,0,-1]),Ab=m(zb),Bb=m([0,0,-1]);for(let t=0;1065>t;t++){15<=t&&950>t&&.1>q(Ab,Bb)&&(Bb[0]+=Math.random()-.5,Bb[1]+=Math.random()-.5,Bb[2]+=Math.random()-.5,la(Bb)),la(ka(Ab,Ab,Bb,.25));let e=m();ja(e,yb.g[t].i,Ab,25),sb(yb,e)}function Cb(...t){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" width="1024" height="1024">${t.join("")}</svg>`}function Db(){return`<radialGradient id="g">${[[10,"#fff"],[40,"#fff8"],[80,"#fff2"],[100,"#fff0"]].map((([t,e])=>`<stop offset="${t}%" stop-color="${e}"/>`))}</radialGradient>`}async function Eb(t){let e=new Image(1024,1024);e.src="data:image/svg+xml;utf8,"+encodeURIComponent(t),await new Promise((t=>{e.onload=t}));let a=(t=document.createElement("canvas")).getContext("2d");return t.width=1024,t.height=1024,a.drawImage(e,0,0,1024,1024),t}async function Gb(){let t=Cb('<filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.01" numOctaves="3" result="t"/><feDisplacementMap in2="t" in="SourceGraphic" scale="50" xChannelSelector="R" yChannelSelector="G" /></filter>',`<defs>${Db()}</defs>`,'<g filter="url(#n)" fill="url(#g)">\n      <rect fill="#000" width="1024" height="1024"/>\n      <ellipse rx="500" ry="100" cx="512" cy="512"/>\n      <ellipse rx="300" ry="200" cx="512" cy="512"/>\n    </g>');Fb=new cb({data:await Eb(t),U:33071})}yb.update();let Hb,Ib=new kb;fb(Ib,[3]),gb(Ib,new Float32Array([-1,1,0,-1,-1,0,1,-1,0,1,1,0,-1,1,0,1,-1,0]));let Jb,Kb=0,Lb=0,Mb=0,Nb=0,Ob=0,ub=xb,Pb=m(),Q=0,Qb=Array.from({length:50},(()=>{let t=[Math.random()-.5,Math.random()-.5,Math.random()-.5];var e=qa(r(),Math.random()*Math.PI),a=ra(r(),[0,0,1],la(t));let n=5+20*Math.random();for(sa(e,a,e),e=da(h(),e),a=0;12>a;a++)e[a]*=n;return e[12]=50*t[0],e[13]=50*t[1],e[14]=50*t[2],[e,m([...Oa(),1]),.5>Math.random()]})),Rb=new kb(3);fb(Rb,[3]),gb(Rb,tb()),new bb("\nvec4 shader () { return vec4(1.0); }\n");let jb=new Float32Array(7e3),Sb=new Float32Array(4e3);for(let t=0;1e3>t;t++)jb.set([500*(Math.random()-.5),500*(Math.random()-.5),500*(Math.random()-.5),0,...Oa()],7*t);let ib=new kb(0);fb(ib,[3,1,3]),gb(ib,jb);let Tb=h([2e3,0,0,0,0,2e3,0,0,0,0,2e3,0,...yb.g.at(-1).i,1]);function Ub(){let e=m(t);for(let t=0;1e3>t;t++){let a=jb.subarray(7*t,7*t+3);ia(a,a,e)}ia(t,t,e),hb(),Pb=vb(t)[1]}function Vb(){var e=K(1-(q(t,Pb)-75)/87.5);M.depthMask(!1),$a(eb),ab(eb,h([-500,0,0,0,0,-500,0,0,0,0,-500,0,...z.slice(12,15),1])),O(eb.h,"ui",Kb),O(eb.h,"uk",Lb),O(eb.h,"us",Mb),O(eb.h,"ucc",Ob),O(eb.h,"ufa",e),Ua(lb,eb),M.enable(3042),M.blendFunc(1,1),M.disable(2929),M.depthMask(!1),$a(Hb);for(let t=0;t<Qb.length;t++){let[a,n,r]=Qb[t],c=h(a);c[12]+=z[12],c[13]+=z[13],c[14]+=z[14],ab(Hb,c),O(Hb.h,"uk",r?Lb:0),O(Hb.h,"us",r?0:Mb),M.uniform4fv(M.getUniformLocation(Hb.h.j,"uc"),n),O(Hb.h,"ufa",e),O(Hb.h,"ub",K(Ob-t%4)),Ua(Ib,Hb)}$a(mb),ab(mb,h()),M.uniform3fv(M.getUniformLocation(mb.h.j,"ufp"),Pb),O(mb.h,"uk",Lb),O(mb.h,"us",Mb),Ua(ib,mb),$a(Jb),(e=h(z))[12]=0,e[13]=0,e[14]=0,ab(Jb,ca(h(),Tb,e)),e=q(t,yb.g.at(-1).i),O(Jb.h,"uei",1/(90<Q?K(.01*(500-e)):0)),Ua(Ib,Jb),M.depthMask(!0),M.enable(2929),M.disable(3042)}let Wb,Xb,Yb=!1,Zb={};function $b(t,e,a,n=!1){let r=Math.min(a+t.length,e.length);if(n)e.set(t.subarray(0,r-a),a);else for(n=a;n<r;n++)e[n]+=t[n-a]}function ac(){return new Float32Array(Math.ceil(240*B/150))}document.addEventListener("mousedown",(()=>{Yb=!0})),document.addEventListener("touchstart",(t=>{for(let e of t.changedTouches)Zb[e.identifier]=e;Yb=!0})),document.addEventListener("mouseup",(()=>{Yb=!1})),document.addEventListener("touchend",(t=>{for(let e of t.changedTouches)delete Zb[e.identifier];Yb=!1})),document.addEventListener("touchmove",(t=>{for(let e of t.changedTouches)t=Zb[e.identifier],Zb[e.identifier]=e,10<Math.hypot(e.clientX-t.clientX,e.clientY-t.clientY)&&(Yb=!1)}));let bc={};function R(t,e,a,n=!1){Array.isArray(e)||(e=[e]);let r=a.toString().substring(0,20);t.forEach((t=>{let c=r+t.slice(1).join("|");bc[c]||(bc[c]=a(440*2**(t[1]/12),60*(t[2]||1)/150,...t.slice(3))),Array.isArray(bc[c])||(bc[c]=[bc[c]]);for(let a=0;a<e.length;a++)$b(bc[c][a],e[a],Math.floor(B*t[0]*60/150),n)}))}let cc=[[0,0],[.0045,1,.5],[.17,.75,.3],[1,0]];function dc(t){let e=0;return J(D(1,(function(){return e+=t/B,2*Math.abs(e%1*2-1)-1})),cc)}let ec=!1;function fc(t,e){function a(){return n+=t/B,Pa(n,.5)}let n=0,r=[[0,0],[.01/e,1],[Math.min(.5,1-.01/e),.75,1],[1-.01/e,.75,1],[1,0]],c=D(e,a);t*=.98566;let o=D(e,a);return t*=1.0293,e=D(e,a),ec&&([o,e]=[e,o]),ec=!ec,[J(Ra([c,o]),r),J(Ra([c,e]),r)]}function gc(t){return function(e,a){let n=0,r=[[0,0],[.01/(a+=.2),1],[Math.min(.5,1-.2/a),.75,1],[1-.2/a,.75,1],[1,0]];return J(D(a,(function(a,r){return n+=e*2**(5*(.7>r?0:Math.min(2*(r-.7),1))*Math.sin(30*r)/1200)/B,t(n,.35)})),r)}}let hc=gc(Pa),ic=gc((function(t){return-1>(t=3*Math.sin(2*t*Math.PI))&&(t=-1),1<t&&(t=1),Math.sin(t*Math.PI*.5)}));function jc(){let t=0,e=new Na([[0,1580],[.022,200,.05],[1,65.3]],!0);return J(D(.33,(function(a){return a=e.sample(a),t+=a/B,-1>(a=1.1*Math.sin(2*t*Math.PI))&&(a=-1),1<a&&(a=1),Math.sin(a*Math.PI*.5)})),[[0,0],[.015,1,.5],[.6,.4,.3],[1,0]])}function kc(t,e,a){t=[[0,a,.2],[.2,a,.15],[1,0]];let n=new Na([[0,0,.5],[.02,1,.45],[.2,0]]);return J(D(.6,(function(t,e){return t=n.sample(t),.8*Qa()*a*(1-t)+Pa(261.63*e/4*3,1-.2*a)*t})),t)}function lc(t,e){let a=[[0,0],[.01/e,.5],[1-.01/e,.5-.1*e],[1,0]],n=Math.random(),r=Math.random(),c=Math.random(),o=Math.random(),i=0,l=Qa(),u=1-Math.exp(-100/B),f=t*2**(10/1200),h=t*2**-.005,s=(e,a)=>()=>(n+=e/B,r+=a/B,c+=t/B,o+=.25*t/B,1<=o&&(--o,l=Qa()),i=u*l+(1-u)*i,Math.sin(2*Math.PI*n)+.25*Math.sin(4*Math.PI*r)+Math.sin(8*Math.PI*c)*i);return[J(D(e,s(t*2**(-10/1200),t*2**.005)),a),J(D(e,s(f,h)),a)]}function mc(t,e,a){return t=[[0,0],[.015,.5*a,.4],[1,0]],J(D(.2,Qa),t)}function nc(t,e){return J(D(e,Qa),[[0,0,4],[1,.5]])}ic.toString=()=>"lead2";let oc,S=[3,5,6,8,10,11,13],pc=[3,5,6,8,10,12,13],T=S;function U(t){let e=Math.floor(t/7);return T[t-=7*e]+12*e}function qc(){return Math.ceil(7920*B/150)}function rc(t,e=0){let a=[];for(let n=0;n<t.length;n++)for(let r of t[n])a.push([.5*n+e,U(r)+-12]);return a}function sc(){function t(t){T=S,R(t=rc([[0,-7,-14],[2],[4],[0],[6],[0],[2],[4],[0],[2],[4],[0],[6],[0],[2],[7],[0,-9,-16],[2],[4],[0],[6],[0],[2],[4],[0],[2],[4],[0],[6],[0],[2],[4],[-1,-8,-15],[1],[3],[-1],[6],[-1],[1],[3],[-1],[1],[3],[-1],[6],[-1],[1],[3],[-1,-10,-17],[1],[3],[-1],[6],[-1],[1],[3],[-1],[1],[3],[-1],[6],[-1],[1],[7]],t),n,dc)}function e(t){return T=S,R(rc([[0,-9,-16],[2],[4],[0],[6],[0],[2],[4],[0],[2],[4],[0],[6],[0],[2],[7],[0,-7,-14],[2],[4],[0],[6],[0],[2],[4],[-1,-8,-15],[2],[4],[-1],[6],[-1],[2],[4],[0,-9,-16],[2],[4],[0],[6],[0],[2],[4],[0],[2],[4],[0],[6],[0],[2],[7],[0,-7,-14],[2],[4],[0],[6],[0],[2],[4]],t),n,dc),T=pc,R(t=rc([[-2,-4,-11],[0],[3],[-2],[6],[-2],[0],[2]],t+28),n,dc),n}let a=A.createBuffer(1,qc(),B),n=a.getChannelData(0);return t(0),t(32),e(64),e(96),R([[128,U(-2)-12],[128,U(0)],[128.5,U(0)-12],[129,U(2)-12],[129.5,U(4)-12],[130,U(2)-12],[130.5,U(-2)-12],[131,U(1)-12],[131.5,U(0)-12]],n,dc),a}let tc=[[0,0,1],[1,-2,1],[2,-1,1],[3,-3,1],[4,0,1],[5,-2,1],[6,-1,1],[7,-3,1],[8,-2,1],[9,0,.5],[9.5,-1,.5],[10,-2,1],[11,0,.5],[11.5,3,.5],[12,-2,1],[13,0,.5],[13.5,-1,.5],[14,-2,1],[15,0,.5],[15.5,3,1.5]];function uc(){let t=A.createBuffer(2,qc(),B);return T=S,R(tc.map((([t,e,a])=>[8*t,U(e)-36,8*a])),[t.getChannelData(0),t.getChannelData(1)],fc),t}function vc(){let t=A.createBuffer(2,qc(),B);return T=S,R([...tc.map((([t,e,a])=>[8*t,U(e)-24,8*a])),...tc.map((([t,e,a])=>[8*t,U(e)-12,8*a]))],[t.getChannelData(0),t.getChannelData(1)],fc),t}function wc(){let t=A.createBuffer(2,qc(),B);T=S;let e=[[2,4],[1,2],[-1,2],[0,7],[1,.5],[2,.5],[3,4],[2,2],[1,2],[1,4],[2,2],[3,2],[4,6],[6,1.5],[3,6.5],[6,1.5],[3,4.5],[4,3.25],[3,.25],[2,.25],[1,.25],[0,4],[1,2],[2,2],[2,6],[1,1],[2,1],[4,3.5],[3,.25],[2,.25],[3,2],[4,2],[0,7.5],[1,.25],[2,.25],[4,3.5],[3,.25],[2,.25],[3,2],[2,1],[1,1],[0,6],[1,1],[2,1],[4,3.5],[3,.25],[2,.25],[3,2],[4,2],[0,7.5],[1,.25],[2,.25],[4,3.5],[3,.25],[2,.25],[3,2],[2,1],[1,1],[2,1],[1,1],[0,1],[1,1]],a=0,n=[];for(let t of e)n.push([a,U(t[0])-12,t[1]]),a+=t[1];return R(n,[t.getChannelData(0),t.getChannelData(1)],fc),t}let Gc,Hc,Ic,xc=[[110,5,1],[111,6,.75],[112,6,.75],[112.75,5,.5],[113.5,4,.33],[114,4,3.33],[117.5,4,.16],[117.66,5,.16],[117.83,6,.16],[118,7,1],[119,8,1],[120,9,3.1],[123.33,7,.16],[123.5,8,.16],[123.66,9,.16],[123.83,10,.16]];function yc(){let t=A.createBuffer(1,qc(),B);T=S;var e=[[0,2,4],[4,1,2],[6,-1,1.5],[7.75,-1,.25],[8,0,3.5],[11.5,-1,.25],[11.75,0,.25],[12,1,1.75],[14,2,.5],[15,1,.25],[15.25,2,.25],[15.5,3,.25],[15.75,4,1.75],[17.5,3,.25],[17.75,2,.4],[18.5,3,2.9],[21.5,2,.25],[21.75,1,.25],[22,2,.125],[22.125,3,.5],[22.75,2,.5],[23.5,1,.5],[24,1,3],[27.5,0,.25],[27.75,1,.25],[28,2,1.5],[29.5,1,.25],[29.75,2,.25],[30,3,1.5],[31.5,2,.25],[31.75,3,.25],[32,4,3],[35.5,4,.5],[36,7,1.5],[37.5,9,1],[38.5,8,1],[39.5,6,3.6],[43.5,6,.5],[44,7,.75],[44.75,6,.75],[45.5,4,.75],[46.5,3,1],[48,3,.75],[48.75,4,.7],[49.5,3,.4],[50,3,.5],[50.67,2,.5],[51.33,2,.5],[52,2,.5],[52.67,3,.5],[53.33,2,.5],[54,1,.5],[54.67,0,.5],[55.33,1,.5],[56,2,3.25],[59.5,1,.25],[59.75,2,.25],[60,3,1.6],[62,4,1.6],[87.16,1,.16],[87.33,0,.16],[87.5,1,.16],[87.66,2,.16],[87.83,3,.16],[88,4,3.5],[105.5,7,1.5],[107,6,.5],[107.5,5,.5],[108,4,2]];return R(e.map((([t,e,a])=>[t,U(e)+12,a])),t.getChannelData(0),hc),R(e.map((([t,e,a])=>[t,U(e)-12,a])),t.getChannelData(0),hc),R((e=[[94,3,2],[96,2,4],...xc,[124,11,1.5],[125.5,10,.16],[125.66,9,.16],[125.83,8,.16],[126,7,1.5],[127.5,7,.16],[127.66,6,.16],[127.83,5,.16],[128,4,4]]).map((([t,e,a])=>[t,U(e)+12,a])),t.getChannelData(0),hc),t}function zc(){let t=A.createBuffer(1,qc(),B);return T=S,R([[64,4,3.2],[67.5,3,.25],[67.75,4,.25],[68,5,2],[70,4,1],[71,3,.5],[72,3,.5],[72.67,4,.4],[73.33,4,.4],[74,4,1.5],[75.5,3,.25],[75.75,4,.25],[76,5,2],[78,6,2],[80,3,1.5],[81.5,4,.25],[82,0,5],[91.25,3,.25],[91.5,2,.25],[91.75,1,.25],[92,2,2],[94,-1,2],[96,0,3],[99.5,3,.16],[99.66,4,.16],[99.83,5,.16],[100,6,1.5],[101.5,5,1.5],[103,4,1],[104,3,1.5],...xc,[124,11,2],[126,10,1],[127,9,.6],[128,10,4]].map((([t,e,a])=>[t,U(e),a])),t.getChannelData(0),ic),t}function Ac(){let t=A.createBuffer(1,qc(),B),e=t.getChannelData(0);T=S;let a=ac();R([[0,0],[2.5,0]],a,jc);for(let t=0;33>t;t++)e.set(15===t||32===t?a.subarray(0,a.length/2):a,Math.floor(4*B*t*60/150));return t}function Bc(){let t=A.createBuffer(1,qc(),B),e=t.getChannelData(0);T=S;let a=ac();R([[1,0,0,1],[3,0,0,1]],a,kc);let n=ac();R([[1,0,0,1],[3,0,0,1],[3.5,0,0,.8]],n,kc,!0);for(let t=0;32>t;t++)e.set(3==t%4?n:a,Math.floor(4*B*t*60/150));return t}function Cc(){let t=A.createBuffer(1,qc(),B),e=t.getChannelData(0);T=S;let a=ac();R([[0,0,0,.5],[.5,0,0,1],[1.5,0,0,1],[2,0,0,1],[2.5,0,0,.5],[3.5,0,0,1]],a,mc);for(let t=0;32>t;t++)e.set(a,Math.floor(4*B*t*60/150));return R([[27,0,5],[59,0,5],[127,0,5]],e,nc),t}function Dc(){let t=A.createBuffer(2,qc(),B);T=S;let e=[[1,0,4,9],[1,-2,2,7],[1,-1,3,6],[1,-3,1,6],[1,0,4,7],[1,-2,2,7],[1,-1,3,6],[1,-3,1,6],[1,-2,2,7],[.5,0,4,7],[.5,-1,3,6],[1,-2,2,7],[.5,0,4,7],[.5,0,3,8],[1,-2,2,7,9],[.5,0,4,7,9],[.5,-1,3,6,8],[1,-2,2,5,7],[.5,0,4,4,6]],a=0,n=[];for(let[t,...r]of e){for(let e of r)n.push([a,U(e)-12,8*t]);a+=8*t}return T=pc,n.push([124,U(3)-12,8]),n.push([124,U(5)-12,8]),n.push([124,U(7)-12,8]),R(n,[t.getChannelData(0),t.getChannelData(1)],lc),t}function Ec(t){let e=A.createBufferSource();return e.loop=!0,e.loopEnd=t.length,e.buffer=t,e}async function Fc(){let t=Ec(sc());await C();let e=Ec(uc());await C();let a=Ec(vc());await C();let n=Ec(wc());await C();let r=Ec(yc());await C();let c=Ec(zc());await C();let o=Ec(Ac());await C();let i=Ec(Bc());await C();let l=Ec(Cc());await C();let u=Ec(Dc());await C(),oc={start(){t.start(),e.start(),a.start(),n.start(),r.start(),c.start(),o.start(),i.start(),l.start(),u.start(),L.l(-1,0,t,.125,1),L.l(6,8,e,.25,0),L.l(16,18,a,.15,1),L.l(25,27,n,.25,1),L.l(40,42,o,.16,0);var f=Aa("highpass",5e3);l.connect(f),L.l(48,50,f,.06,.31),L.l(45,47,i,.08,.31),f=Aa("peaking",557,1.33,-7.6),u.connect(f),L.l(55,57,f,.15,.31),f=Aa("lowpass",5e3),r.connect(f),c.connect(f),L.l(75,77,f,.05,1)}}}async function Jc(t,e){let a=t.split("\n");return t=a.map(((t,n)=>`<text style="font:900 120px system-ui" fill="${e}" text-anchor="middle" x="512" y="${512-50*a.length+100*n}">${t}</text>`)),t=Cb(...t),new cb({data:await Eb(t),U:33071})}async function Kc(){Hc=await Jc("Nice!\nYou’ve ascended!","#000"),Ic=await Jc("Forever lost\nin limbo","#fff")}let Lc,Mc,V=0,W=new Float32Array([0,0,0,0]),Nc=0,Oc=0;function Pc(){var e=0;3!==V&&(Oc=Math.max(0,Oc+(Yb?P:-.3*P)),e=Math.pow(2,Oc));var a=m([0,0,-1]);if(na(a,a,ua),na(a,a,ta),ja(t,t,a,100*e*P),0===V)500<fa(t)&&Ub();else t:{if(Kb+=P,1===V)e=q(t,Pb),Lc=K(1-(e-75)/87.5),Mc=K((e-75)/175),375<e?(V=2,Xb.G()):150>q(t,yb.g.at(-1).i)&&(V=3,Xb.G());else if(2===V){if(Nc=K(Nc+.1*P),1===Nc){Ma||(Ma=!0,location.reload());break t}W[3]+=P/3,Mc=K(1-W[3]/2)}else 3===V&&(Nc=K(Nc+.1*P),e=1-Math.exp(20*-P),W[0]=W[1]=W[2]=1,W[3]+=(1-W[3])*e/10,Lc+=(1-Lc)*e,Mc-=Mc*e);e=K((Q-40)/2)**4;var n=K((Q-45)/2)**4,c=K((Q-75)/2)**4;a=K((Q-6)/2)**4+K((Q-16)/2)**4+K((Q-25)/2)**4+e+n+K((Q-48)/2)**4+K((Q-55)/2)**4+c;var o=Math.floor(Kb/1.6%33),i=Kb%1.6/1.6,l=15!==o&&.625<i?1-4*(i-.625):1-4*i;let r=0;3==o%4&&.875<=i?r=1-4*(i-.875):.75<=i?r=1-4*(i-.75):.25<=i?r=1-4*(i-.25):0==o%4&&0<o&&(r=1-4*(i+.125)),32===o&&(r=l=0);var u=0;for(var f of Qc[o])i>f[0]/4&&(u=.1+f[1]);f=K(r)*Lc*n,c*=u*Lc,Lb=K(l)*Lc*e,Mb=f,Nb=c,Ob=a,3===V?(Rc+=P,L.Z(Rc/5)):L.$(Q),L.aa(Lc),L.Y(Mc)}for(3!==V&&250>q(t,Pb)&&(f=vb(t),ka(Pb,Pb,f[1],1-Math.exp(-10*P)),Q=100*f[3]),da(z,sa(r(),ta,ua)),z[12]=t[0],z[13]=t[1],z[14]=t[2],aa(xa,z),f=0;1e3>f;f++){e=jb.subarray(7*f,7*f+3),a=jb.subarray(7*f+3,7*f+6);let[r,h,s]=vb(e);c=50*(l=K(1-(r-25)/75))*l,u=Sb.subarray(4*f,4*f+3),n=.25*(1+f%5*(f%2))*Nb,o=la(ia(m(),e,h)),ja(i=ma(m(),o,s),i,o,-.5),ja(s,s,i,n),ka(u,u,s,1-Math.exp(5*-P)),ja(e,e,u,3*c*P),a[0]=5*l,Sb[4*f+3]=.001>l?Sb[4*f+3]+P:0,(375<q(e,Pb)||1<Sb[4*f+3])&&(la(a=[Math.random()-.5,Math.random()-.5,Math.random()-.5]),ja(e,t,a,250),e=vb(e)[2],Sb[4*f]=e[0],Sb[4*f+1]=e[1],Sb[4*f+2]=e[2],Sb[4*f+3]=0)}hb()}let Rc=0,Qc=[[[0,1]],[[0,0],[1.75,1],[2,0],[3.75,1]],[[0,1]],[[0,0],[1.75,1],[2,0]],[[0,1]],[[0,0],[1.75,1],[2,0]],[[0,1]],[[0,0],[1.75,1],[2,0],[3.75,1]],[[0,1]],[[0,0],[1.75,1],[2,0],[3.75,1]],[[0,1]],[[0,0],[1.75,1],[2,0],[3.75,1]],[[0,1]],[[0,1]],[[0,0],[3.75,1]],[[0,0],[1.75,1],[2,0],[3.75,1]],[[0,1]],[[0,0],[1.75,1],[2,0],[3.75,1]],[[0,1]],[[0,0],[1.75,1],[2,0],[3.75,1]],[[0,1]],[[0,0],[1.75,1],[2,0],[3.75,1]],[[0,1]],[[0,0],[1.75,1],[2,0],[3.75,1]],[[0,1]],[[0,0],[1.75,1],[2,0],[3.75,1]],[[0,1]],[[0,0],[1.75,1],[2,0],[3.75,1]],[[0,1]],[[0,0],[1.75,1],[2,0],[3.75,1]],[[0,1]],[[0,0],[1.75,1],[2,0],[3.75,1]],[[0,1]]];function Sc(){var t;M.enable(3042),M.depthMask(!1),M.disable(2929),M.blendFunc(770,0===W[0]?771:1),Wb.h.bind(),M.uniform4fv(M.getUniformLocation(Wb.h.j,"uc"),W),Ua(Ib,Wb),3===V?t=Hc:2===V&&(t=Ic),t&&(M.blendFunc(770,771),Gc.h.bind(),Gc.A[0]=t,$a(Gc),ca(t=h([2,0,0,0,0,2,-.1,0,0,-.1,1,0,0,0,-20*(1-Nc)**2-10,1]),z,t),ab(Gc,t),Ua(Ib,Gc)),M.depthMask(!0),M.enable(2929),M.disable(3042)}var Tc=navigator.xr,Y=null,Uc=null,Vc=null;let Xc,Yc,Wc={S:[m(),m()],H:!1,T(){Wc.H=!0,Y.addEventListener("selectstart",Wc.N),Y.addEventListener("selectend",Wc.M)},G(){Wc.H=!1,Y.removeEventListener("selectstart",Wc.N),Y.removeEventListener("selectend",Wc.M)},N(){Yb=!0},M(){Yb=!1},update(e){var a=e.getViewerPose(Uc).views[0].transform.orientation;if(ua=r([a.x,a.y,a.z,a.w]),Wc.H){a=Y.inputSources;for(var n=0;n<Math.min(2,a.length);n++){var c=a[n];.5<fa(c=m([c.gamepad.axes[2],c.gamepad.axes[3],0]))&&.2>fa(Wc.S[n])&&va(m([-c[0],c[1],2])),Wc.S[n].set(c)}}a=pa(r(),ta),na(n=m([-t[0],-t[1],-t[2]]),n,a),a=new XRRigidTransform({x:n[0],y:n[1],z:n[2]},{x:a[0],y:a[1],z:a[2],w:a[3]}),a=Uc.getOffsetReferenceSpace(a),Vc=e.getViewerPose(a)}};var Zc=()=>{};async function $c(){Y=await Tc.requestSession("immersive-vr",{requiredFeatures:["local"]}),Yc=new XRWebGLLayer(Y,M),Y.updateRenderState({baseLayer:Yc,depthNear:10,depthFar:2e3}),Y.addEventListener("end",(()=>{Y=null,Zc()})),Uc=await Y.requestReferenceSpace("local"),Y.requestAnimationFrame(ad),Xb=Wc}function ad(t,e){if(Y.requestAnimationFrame(ad),Xc){P=Math.min(.1,(t-Xc)/1e3),Xc=t,Wc.update(e),Pc(),M.bindFramebuffer(36160,Yc.framebuffer),M.clearColor(0,0,0,1),M.clear(16640);for(let e of Vc.views)wa=e.projectionMatrix,xa=e.transform.inverse.matrix,z=e.transform.matrix,t=Yc.getViewport(e),M.viewport(t.x,t.y,t.width,t.height),Vb(),Sc()}else Xc=t}document.addEventListener("keydown",(()=>{})),document.addEventListener("keyup",(()=>{}));let bd,cd,fd,Z={o:0,s:0,deltaX:0,deltaY:0,start(){let t=1/Math.tan(.5),e=1/-1990;wa=h([t/(N.width/N.height),0,0,0,0,t,0,0,0,0,2010*e,-1,0,0,4e4*e,0])},async T(){document.body.requestPointerLock&&(document.body.requestPointerLock(),document.body.onclick=()=>document.body.requestPointerLock(),document.addEventListener("mousemove",Z.L)),DeviceOrientationEvent&&DeviceOrientationEvent.requestPermission&&await DeviceOrientationEvent.requestPermission(),addEventListener("deviceorientation",Z.X,!1),document.body.addEventListener("touchstart",Z.R),document.body.addEventListener("touchmove",Z.P),document.body.addEventListener("touchend",Z.O)},G(){document.removeEventListener("mousemove",Z.L),document.body.removeEventListener("touchstart",Z.R),document.body.removeEventListener("touchmove",Z.P),document.body.removeEventListener("touchend",Z.O)},update(){Z.B||!Z.deltaX&&!Z.deltaY||(Z.o=Z.deltaX/P,Z.s=Z.deltaY/P),Z.o-=4*Z.o*P,Z.s-=4*Z.s*P;let t=m([Z.deltaX+Z.o*P,-Z.deltaY-Z.s*P,1]);Z.deltaX=0,Z.deltaY=0,va(t)},L(t){document.pointerLockElement===document.body&&(Z.o-=.04*(t.movementX||0),Z.s-=.04*(t.movementY||0))},R(t){Z.B=t.changedTouches[0]},P(t){t=t.changedTouches[0];let e=(Z.B.screenY-N.height/2)/(N.height/2),a=(t.screenY-N.height/2)/(N.height/2);Z.deltaX=(t.screenX-N.width/2)/(N.height/2)-(Z.B.screenX-N.width/2)/(N.height/2),Z.deltaY=a-e,Z.B=t},O(){Z.B=0},X(t){var e=t.alpha?.017453292519943295*t.alpha:0,a=t.beta?.017453292519943295*t.beta:0,n=t.gamma?.017453292519943295*t.gamma:0;t=.017453292519943295*((orientation??screen.orientation.angle)||0);let c=r([-Math.SQRT1_2,0,0,Math.SQRT1_2]);var o=Math.cos(a/2);let i=Math.cos(e/2),l=Math.cos(-n/2);sa(o=r([(a=Math.sin(a/2))*i*l+o*(e=Math.sin(e/2))*(n=Math.sin(-n/2)),o*e*l-a*i*n,o*i*n-a*e*l,o*i*l+a*e*n]),o,c),sa(o,o,qa(r(),-t)),Z.K?sa(ua,Z.K,o):Z.K=pa(o,o)}};function dd(){cd=requestAnimationFrame(ed),Z.start(),Xb=Z}function ed(t){cd=requestAnimationFrame(ed),bd?(P=Math.min(.1,(t-bd)/1e3),bd=t,Z.update(),Pc(),M.bindFramebuffer(36160,null),M.clearColor(0,0,0,1),M.clear(16640),Vb(),Sc()):bd=t}function gd(){let t=A.createBuffer(2,6*A.sampleRate,A.sampleRate),e=t.getChannelData(0),a=t.getChannelData(1);for(let t=0;t<e.length;t++)e[t]=Qa(),a[t]=Qa();fd={start(){let e=A.createBufferSource();e.buffer=t,e.loop=!0,e.loopEnd=t.length;let a=za();var n=Aa("lowpass",80);e.connect(n).connect(a),n=Aa("bandpass",3e3);let r=za(.002);e.connect(n).connect(r).connect(a),e.start(),L.V(a)}}}async function hd(){A.resume(),await Xb.T(),oc.start(),fd.start(),V=1,ub=yb,gb(Rb,tb()),Ub()}(async function(){await Kc(),await Gb(),await C();for(var t=Array(16777216),e=0;4194304>e;e++)t[4*e]=Math.floor(256*Math.random()),t[4*e+1]=Math.floor(256*Math.random()),t[4*e+2]=Math.floor(256*Math.random()),t[4*e+3]=255;db=new cb({data:t,width:2048}),await C(),mb=new bb("in float vd;in vec3 vc;uniform float uk;float fba=187.5;float ga=250.;vec4 shader(){float b=1.+uk;float a=clamp((ga-vd)/(ga-fba),.0,1.);float r=2.*length(gl_PointCoord.xy-.5);return exp(-5.*r*r)*(r<.05?1.:.05/r)*vec4(vc,1.)*b*a;}","layout(location=1)in float app;layout(location=2)in vec3 ac;uniform vec3 ufp;uniform float uk;out float vd;out vec3 vc;void main(){vp=ap;vec4 m=uv*vec4(ap,1.);gl_Position=up*m;float a=clamp((m.z+10.)/-10.,.0,1.);gl_PointSize=(1.+uk)*10000./-m.z;vd=max(length(uhp-vp),length(ufp-vp));vc=a*min(vec3(app),ac*5.);}"),Wb=new bb("vec4 shader(){return uc;}","void main(){gl_Position=vec4(ap,1.);}"),Gc=new bb("in vec2 vu;vec4 shader(){return texture(ut[0],vu);}","out vec2 vu;void main(){vu=ap.xy*.5+.5;vu.y=1.-vu.y;vp=vec3(um*vec4(ap,1.));gl_Position=up*uv*vec4(vp,1.);}"),Hb=new bb("uniform float uk;uniform float us;uniform float ufa;uniform float ub;in vec2 vu;vec4 shader(){float g=texture(ut[0],vu*.5+.5).r*.5;float s=.2+.7*(uk+us);float r=length(vu);float gc=.5*exp(-2.*r*r)/(20.*r);return(.5+.5*ufa)*uc*vec4(vec3(g*s)+gc,1.)*(.1+.9*ub);}","out vec2 vu;void main(){vu=ap.xy;gl_Position=up*uv*um*vec4(ap,1.);}"),Hb.A[0]=Fb,eb=new bb("uniform vec3 ucp;uniform float uk;uniform float us;uniform float ufa;uniform float ucc;\n#define LAYERS 4.\n#define PI 3.141592654\n vec2 mod2(inout vec2 p,vec2 size){vec2 c=floor((p+size*.5)/size);p=mod(p+size*.5,size)-size*.5;return c;}vec2 hash2(vec2 p){return texture(ut[0],.001*p).xy;}vec3 toSpherical(vec3 p){float r=length(p);float t=acos(p.z/r);float ph=atan(p.y,p.x);return vec3(r,t,ph);}float noise(vec2 p){return texture(ut[0],.002*p).x;}float tanh_approx(float x){float x2=x*x;return clamp(x*(27.+x2)/(27.+9.*x2),-1.,1.);}const vec4 hsv2rgb_K=vec4(1.,2./3.,1./3.,3.);vec3 hsv2rgb(vec3 c){vec3 p=abs(fract(c.xxx+hsv2rgb_K.xyz)*6.-hsv2rgb_K.www);return c.z*mix(hsv2rgb_K.xxx,clamp(p-hsv2rgb_K.xxx,.0,1.),c.y);}vec3 stars(vec3 rd,vec2 sp){vec3 col=vec3(.0);float m=LAYERS;for(float i=.0;i<m;++i){vec2 pp=sp+.5*i;float s=i/(m-1.);vec2 dim=vec2(mix(.05,.003,s)*PI);vec2 np=mod2(pp,dim);vec2 h=hash2(np+127.+i);vec2 o=-1.+2.*h;float y=sin(sp.x);pp+=o*dim*.5;pp.y*=y;float l=length(pp);float h2=fract(h.x*1887.);float h3=fract(h.x*2997.);col=h3<y?col+exp(-6000.*max(l-.001,.0))*mix(8.*h2,.25*h2*h2,s):col;}return col;}vec3 sky(vec3 rd,vec2 sp){float y=-.5+sp.x/PI;y=abs(y)+.1*smoothstep(.5,PI,abs(sp.y));return hsv2rgb(vec3(.6,.75,.35*exp(-15.*y)));}vec3 color(vec3 rd,vec3 lp,vec4 md){vec2 sp=toSpherical(rd.xzy).yz;float sf=.0;float cf=.0;vec3 col=vec3(.0);col+=sky(rd,sp)*min(1.,ufa)*min(1.,ucc);col+=stars(rd,sp)*(.1+us);return col;}vec4 shader(){vec3 lp=vec3(.0,.5,-1.);vec4 md=50.*vec4(vec3(1.,1.,-.6),.5);vec3 rd=normalize(vp-ucp);vec3 col=color(rd,lp,md);return vec4(col,1.);}"),eb.A[0]=db,Jb=new bb("uniform float uei;in vec2 vu;vec4 shader(){float r=2.*length(vu)*uei;return exp(-5.*r*r)*(r<.05?1.:.05/r)*vec4(1.);}","uniform vec3 ufp;out vec2 vu;void main(){vu=ap.xy;gl_Position=up*uv*um*vec4(ap,1.);}"),e=[[0,1,.15],[1,0]],t=[t=J(D(4,Qa),e),e=J(D(4,Qa),e)],Array.isArray(t)||(t=[t]),e=A.createBuffer(t.length,t[0].length,B);for(let a=0;a<t.length;a++)e.getChannelData(a).set(t[a]);Sa=e,await C(),Ta(),await Fc(),gd(),await C()})().then((()=>{La.hidden=!0,Zc=()=>{dd()},Ba.onclick=async()=>{Xb.G(),cancelAnimationFrame(cd),await $c(),await hd()},Ca.onclick=async()=>{Da.hidden=!0,await hd()},dd()}))</script>