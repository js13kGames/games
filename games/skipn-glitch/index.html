<!doctype html><meta content="width=device-width" name=viewport><title>Skip'n Glitch</title><meta content="Skip'n Glitch is a strategic competitive puzzle game of numbers made for js13k games competition" name=description><meta content="Copyright Â© 2016 by Noncho Savov. All Rights Reserved." name=copyright><meta content="Skip'n Glitch" name=application-name><meta content="Skip'n Glitch by FoumartGames" property=og:title><meta content=article property=og:type><meta content=http://www.foumartgames.com/games/SkipGlitch/logo.png property=og:image><meta content=http://www.foumartgames.com/games/SkipGlitch/ property=og:url><meta content="Skip'n Glitch is a game of numbers made for js13k games competition" property=og:description><meta content=summary name=twitter:card><meta content="Skip'n Glitch by FoumartGames" name=twitter:title><meta content="Skip'n Glitch is a game of numbers made for js13k games competition" name=twitter:description><meta content=http://www.foumartgames.com/games/SkipGlitch/logo.png name=twitter:image><style>body{margin:0;padding:0;overflow:auto;background-color:#000;overflow:hidden}button,div{position:absolute;box-sizing:border-box}.central{top:0;bottom:0;left:0;right:0;margin:auto;width:100%;height:100%}#frame{width:100%;max-width:640px;min-width:600px;height:100%;max-height:960px;min-height:800px}#container{text-align:center;background-color:#161616;border:solid 10px;border-color:#161616 #1a1a1a #161616 #1a1a1a;left:0;right:0;top:0;bottom:0;opacity:0}.bgr{background-image:url("data:image/gif;base64,R0lGODlhAgACAIABAERERP///yH5BAEAAAEALAAAAAACAAIAAAIDDBAFADs=");background-size:100px 100px;background-position:0 0;image-rendering:pixelated;image-rendering:-moz-crisp-edges}#bgr0{background-color:#000;opacity:0}#bgr1{opacity:0}#bgr2{opacity:0}#bgr3{opacity:0}.plate{opacity:0;visibility:hidden}#platebgr{background-color:#131313;opacity:.5}#area{opacity:0;visibility:hidden}#hilight{border-radius:10px;border:dotted 3px}.diggit{position:absolute;background-color:transparent;pointer-events:none}.diggit-holder{background-color:transparent}.diggit-frame{background-color:#484848;border:solid 10px;border-color:#666 #333 #222 #555;max-width:128px;min-width:32px;max-height:128px;min-height:32px;width:100%;height:100%}.diggit-button{cursor:pointer;visibility:hidden;width:100%;height:100%;transform:scale(.95);opacity:0}.diggit-button:hover{transform:scale(1);border-radius:8px}.greenbtn{border-radius:6px;background-color:#090;border:solid 10px;border-color:#2c2 #070 #060 #2b2}.greenbtn:hover{background-color:#0b0;border-color:#0f0 #080 #070 #0d0}.bluebtn{border-radius:6px;background-color:#17d;border:solid 10px;border-color:#29f #16a #059 #18d}.bluebtn:hover{background-color:#28f;border-color:#3af #2070d0 #06a #29f}.redbtn{border-radius:6px;background-color:#c33;border:solid 10px;border-color:#e66 #b32b2b #822 #d05050}.redbtn:hover{background-color:#e44;border-color:#f88 #d33838 #a33 #f86060}.mess{height:70%;min-height:200px;max-height:800px;width:100%;min-width:460px;max-width:620px;background-color:#1b1b1b;visibility:hidden;opacity:0;border:solid 10px;border-color:#666 #363636 #282828 #444}#topscore{top:.5%;border-bottom-left-radius:28px;border-bottom-right-radius:28px;opacity:0}#bottomscore{bottom:.5%;border-top-left-radius:28px;border-top-right-radius:28px;opacity:0}.uiscore{left:1%;width:98%;height:14%;cursor:pointer;pointer-events:none;visibility:hidden}.redscore{background-color:#711;border:solid 10px;border-color:#600 #911 #a11 #800}.redscore:hover{background-color:#822;border-color:#711 #a11 #b22 #911}.greenscore{background-color:#070;border:solid 10px;border-color:#0a0 #005f00 #004800 #080}.greenscore:hover{background-color:#080;border-color:#0b0 #070 #005800 #090}#inputtxt{bottom:25px;width:100%;visibility:hidden}input[type=text]{padding:1vh 25px;border:2px solid #484;border-radius:4px;font-family:"Lucida Console",Monaco,monospace;font-size:24px}:focus{outline:0}button{color:#fff;cursor:pointer}.menubtn{right:-.5%;border-radius:0;border-top-left-radius:28px;border-bottom-left-radius:28px}.boardbtn{left:-.5%;border-radius:0;border-top-right-radius:28px;border-bottom-right-radius:28px}.closebtn{border-radius:0;border-bottom-left-radius:28px;top:.5%;right:.75%;cursor:pointer}.bluetitle{background-color:#05b;border:solid 10px;border-color:#07e #048 #036 #06c}.bluetitle:hover{background-color:#06d;border-color:#08f #059 #047 #08d}.redtitle{background-color:#922;border:solid 10px;border-color:#c44 #933 #711 #a44}</style><div id=frame class=central><div id=container><div id=bgr0 class="central bgr"></div><div id=bgr1 class="central bgr"></div><div id=bgr2 class="central bgr"></div><div id=bgr3 class="central bgr"></div><div id=plate class="central plate"><div id=platebgr class=central></div><div id=hilight></div></div><div id=area class=central></div><div id=mess class="central mess"><div id=messtxt class=central></div><button class=greenscore onclick=messSelect(gameState) style=bottom:6px;right:6px><div id=messbtn style=position:relative></div></button></div><div id=title class=central><div id=logo style=top:12%;left:50%;margin-left:-225px></div><button class=greenscore onclick=animeChange() style=right:225px;border-radius:28px><div id=animebtn style=position:relative;right:12px></div></button> <button class="greenscore menubtn" onclick=messSelect(1)><div id=practicebtn style=position:relative;left:28px></div></button> <button class="menubtn bluetitle" onclick=messSelect(2)><div id=versusbtn style=position:relative;left:28px></div></button> <button class="greenscore boardbtn" onclick=boardChange()><div id=boardbtn style=position:relative;right:6px></div></button> <button class="menubtn redbtn" onclick=messSelect(3)><div id=multibtn style=position:relative;left:28px></div></button><div id=copy style=bottom:42px;left:15px></div></div></div><div id=topscore class="uiscore redscore"><div id=toptxt class=central style=position:relative;top:-25px;opacity:0></div></div><div id=bottomscore class="greenscore uiscore"><div id=bottomtxt class=central style=position:relative;opacity:0></div></div><button class="redbtn closebtn" onclick=closeGame() id=closediv><div id=closebtn style=position:relative;right:2px></div></button></div><script>"use strict";var containerWidth,containerHeight,areaWidth,areaHeight,topHeight,bottomHeight,width,height,x,y,i,j,w,h,buttons,gameState,flipBoardSymbol,rotateBoardSymbol,blueFirstSymbol,buttonWidth,buttonHeight,bgrodd,bgrinterval,prevstamp,prevprevstamp,container=document.getElementById("container"),topscore=document.getElementById("topscore"),bottomscore=document.getElementById("bottomscore"),topTxt=document.getElementById("toptxt"),bottomTxt=document.getElementById("bottomtxt"),textSize=3,textLeading=22,player="green",opponent="red",cpu=0,turn=-1,turns=0,multiplierTop=1,multiplierBottom=1,size=6,anim=0,flipopt=!1,rotateopt=!1,blueopt=!1,colors={green:"#4b4",red:"#a33",blue:"#38e",greenHi:"#003800",redHi:"#522",blueHi:"#024",greenBorder:"#6f6 #40d040 #2a2 #58dd58",redBorder:"#f99 #ee7070 #c44 #e66",blueBorder:"#5bf #49e #38d #3ad",greyBorder:"#666 #333 #222 #555",darkBorder:"#404040 #282828 #202020 #333"},bgrdata=[[25,50,75,0],[-65,50,75,-25],[-30,40,-30,40]],bgrtype=-1,bgrpos=0,scores={green:0,blue:0,red:0};function init(){mainMenu(),onResize()}function onResize(t){containerWidth=container.offsetWidth,containerHeight=container.offsetHeight,areaWidth=TweenFX.getStyle(area,"width"),areaHeight=TweenFX.getStyle(area,"height"),window.innerHeight<800?TweenFX.to(frame,0,{scale:1+(window.innerHeight-800)/800}):1!=TweenFX.getTransform(frame).scaleX&&TweenFX.to(frame,0,{scale:1}),turn&&!flipopt?(hilight.style.width=areaWidth+6+"px",hilight.style.height=areaHeight/height+6+"px",hilight.style.top=e*(areaHeight/height)-3+"px",hilight.style.left="-3px"):(hilight.style.height=areaHeight+6+"px",hilight.style.width=areaWidth/width+6+"px",hilight.style.left=o*(areaWidth/width)-3+"px",hilight.style.top="-3px"),buttonWidth=areaWidth/width,buttonHeight=areaWidth/height,t?(TweenFX.to(area,0,{height:buttonHeight*height}),TweenFX.to(plate,0,{height:buttonHeight*height})):area.style.height=plate.style.height=buttonHeight*height+"px";for(var e=0;e<height;e++)for(var o=0;o<width;o++)TweenFX.to(buttons[e][o].holder,t?2:0,{width:buttonWidth,height:buttonHeight,x:buttonWidth*o,y:buttonHeight*e}),TweenFX.to(buttons[e][o].diggit,0,{width:.8*buttonWidth,height:.8*buttonHeight}),TweenFX.to(buttons[e][o].canvas,0,{height:.8*buttonHeight});killAll(copy),TypeFX.drawText(copy,"Copyright @ 2016 by FoumartGames. Developed by Noncho Savov.",2,0,"#888")}function updateMenu(){killAll(practicebtn),killAll(versusbtn),killAll(multibtn),killAll(boardbtn),killAll(closebtn),killAll(animebtn),closediv.style.visibility="hidden",TypeFX.drawText(practicebtn,"Tutorial    ",4),TypeFX.drawText(versusbtn,"Two players - same device    ",4),TypeFX.drawText(multibtn,"Play versus Computer    ",4),TypeFX.drawText(boardbtn,size<10?"   "+size+"  ":"  "+size+" ",4),TypeFX.drawText(animebtn,anim>=10?"  "+anim:"   "+anim+" ",4),TypeFX.drawText(closebtn,"  X ",4),practicebtn.parentNode.style.bottom=animebtn.parentNode.style.bottom="34%",versusbtn.parentNode.style.bottom="23%",multibtn.parentNode.style.bottom=boardbtn.parentNode.style.bottom="12%",practicebtn.parentNode.style.padding=versusbtn.parentNode.style.padding=multibtn.parentNode.style.padding=boardbtn.parentNode.style.padding=animebtn.parentNode.style.padding="12px 0px 10px 0px",closebtn.parentNode.style.padding="6px 0px 5px 0px"}function closeGame(){messSelect(0)}function animeChange(){(anim+=5)>20&&(anim=0),updateMenu()}function boardChange(){(size+=2)>10&&(size=6),updateMenu()}function bgrmove(t){(!TweenFX.tweenedElements.length&&anim||t)&&window.requestAnimationFrame(bgrmoveframe)}function bgrmoveframe(t){t-prevstamp>1e3&&prevstamp-prevprevstamp>1e3?(clearInterval(bgrinterval),prevprevstamp=0,prevstamp=0):(prevprevstamp=prevstamp,prevstamp=t),bgrpos++,bgr0.style.backgroundPosition=bgrpos+bgrdata[bgrtype][0]+"px "+(15+bgrpos)+"px",bgr1.style.backgroundPosition=-bgrpos+bgrdata[bgrtype][1]+"px "+-bgrpos+"px",bgr2.style.backgroundPosition=-bgrpos+bgrdata[bgrtype][2]+"px "+(35+bgrpos)+"px",bgr3.style.backgroundPosition=bgrpos+bgrdata[bgrtype][3]+"px "+(25-bgrpos)+"px",bgrpos>100&&(bgrpos=1)}function mainMenu(){TweenFX.to(topscore,anim,{height:40,alpha:1}),TweenFX.getStyle(bottomscore,"height"),TweenFX.to(bottomscore,anim,{height:40,alpha:1});var t=[[[3,3,,9,2,,,2]],[[9,4,1,,3,,3],[9,4,1,4.5,,3,,3],[10,4,,9,,,3,3],[4,2.5,1,3,,1,1,,1,,1],[4,2.5,6,7.5,1,,,1,1,,1]],[[4,16,,-4,,3],[4,6,5,6,,3],[4,6,5,,,3,3,,,,1],[3,7,3,3,3,,,3,,1,,1]],[[4,12,,,3,,3],[4,4,,13,3,3,3,3]],[[4,17,,,,,3],[6,4,3,8,1,,3,1,,,,1],[6,4,3,,,3,,1,,,,1],[4,6,5,3,1,,,1,1,,1]],[[3,4,-2,-3,,2,,2],[5,6,,8,,3,,2],[3,2,,11,,,,1,1,,1],[2,2.5,2,11.5,2,,,2,1,1]]];drawTitle(t,0,20,10,"bluetitle"),drawTitle(t=[[[9,4,,4,3,3],[9,4,,11,,,2,3],[4,5,,7,,1,1,,1,,1],[5,4,4,1,3,,3,1,,,1],[4,5,5,7,1,,,1,1,,1],[12,4,,15,3,3],[12,4,,20,,,3,3],[3.5,3,,18,,1,1,,1,,1],[3.5,3,8.5,18,1,,,1,1,,1],[4,2,3,14,3,1,3,,1,,1,1]],[[4,14,-3,1,,3,,3]],[[4,10,,5,3,,3],[4,4,,,3,3,3,3]],[[4,15,,,3,3,1,4],[3,4,3,5,1,,3,,,,,1],[3,4,3,11,1,,2.5,,,,,1]],[[8,4,,5,3,3],[8,4,,11,,,3,3],[4,4,,8,,1,1,,1,,1]],[[4,15,,,,3],[6,4,3,4,1,3,,1,,,,1],[4,8,5,7,1,,2,,1]]],0,150,10,"redbtn"),updateMenu(),-1==bgrtype&&(topHeight=TweenFX.getStyle(topscore,"height"),bottomHeight=TweenFX.getStyle(bottomscore,"height"),bgrmove(!0),TweenFX.to(container,anim,{alpha:1},(function(){TweenFX.to(bgr0,anim/2,{alpha:.05},TweenFX.to,bgr1,4,{alpha:.1},TweenFX.to,bgr3,3,{alpha:.15},TweenFX.to,bgr2,2,{alpha:.2},(function(){TweenFX.to(bgr0,.6*anim,{alpha:.2}),TweenFX.to(bgr1,5*anim,{alpha:.4}),TweenFX.to(bgr2,3*anim,{alpha:.35}),TweenFX.to(bgr3,4*anim,{alpha:.35})}))}))),prevstamp||prevprevstamp||(bgrtype=anim?parseInt(3*Math.random()):1,bgrinterval=setInterval(bgrmove,80))}function drawTitle(t,e,o,i,a){for(var n,r,l,s=0;s<t.length;s++){l=0;for(var p=0;p<t[s].length;p++)l<((r=t[s][p])[0]||0)+(r[2]||0)&&(l=(r[0]||0)+(r[2]||0)),n=document.createElement("div"),document.getElementById("logo").appendChild(n).className=a,n.style.width=(r[0]*i||0)+"px",n.style.height=(r[1]*i||0)+"px",n.style.left=e+(r[2]*i||0)+"px",n.style.top=o+(r[3]*i||0)+"px",n.style.borderRadius=(r[4]*i||0)+"px "+(r[5]*i||0)+"px "+(r[6]*i||0)+"px "+(r[7]*i||0)+"px",r[8]&&(n.style.borderTop="none"),r[9]&&(n.style.borderRight="none"),r[10]&&(n.style.borderBottom="none"),r[11]&&(n.style.borderLeft="none");e+=l*i+i}}function startGame(t){TweenFX.to(title,2*anim,{alpha:0}),gameState+=3,t>1&&(TweenFX.to(topTxt,2*anim,{alpha:1}),TweenFX.to(bottomTxt,2*anim,{alpha:1})),messSelect(gameState)}function beginGame(){7==(gameState+=3)?(message("Skip'n Glitch is a competitive\rpuzzle game with simple rules   \rand strategic gameplay."," Next ",!0,textSize+1,8),TweenFX.to(bottomscore,2*anim,{height:64},(function(){TypeFX.drawText(bottomTxt,"\rYour goal is to outscore your opponent.",textSize,-textLeading),TweenFX.to(bottomTxt,2*anim,{alpha:1})}))):8==gameState?(message("            | Flip Board [*]\rOptions | Rotate Tiles [*]       \r            | Blue First [*]","Play",!0),flipopt=!0,rotateopt=!0,flipBoardSymbol=messtxt.childNodes[26],rotateBoardSymbol=messtxt.childNodes[52],blueFirstSymbol=messtxt.childNodes[87],flipBoardSymbol.style.cursor=rotateBoardSymbol.style.cursor=blueFirstSymbol.style.cursor="pointer",flipBoardSymbol.addEventListener("click",flipBoard),rotateBoardSymbol.addEventListener("click",rotateBoard),blueFirstSymbol.addEventListener("click",blueFirst),blueFirst()):9==gameState&&messSelect(gameState)}function flipBoard(){TweenFX.getStyle(flipBoardSymbol,"opacity")<1?(flipopt=!0,flipBoardSymbol.style.opacity=1):(flipopt=!1,flipBoardSymbol.style.opacity=.2)}function rotateBoard(){TweenFX.getStyle(rotateBoardSymbol,"opacity")<1?(rotateopt=!0,rotateBoardSymbol.style.opacity=1):(rotateopt=!1,rotateBoardSymbol.style.opacity=.2)}function blueFirst(){TweenFX.getStyle(blueFirstSymbol,"opacity")<1?(blueopt=!0,blueFirstSymbol.style.opacity=1,turn=0):(blueopt=!1,blueFirstSymbol.style.opacity=.2,turn=1)}function message(t,e,o,i,a){killAll(messbtn),TypeFX.drawText(messtxt,t,i||textSize+1,a||5),e?(TypeFX.drawText(messbtn,e,textSize+1),messbtn.style.width=TweenFX.getStyle(messbtn,"width")+2+"px",messbtn.style.left="4px"):hide(messbtn.parentNode),o&&(mess.style.height=TweenFX.getStyle(messtxt,"height")+50+"px"),TweenFX.to(mess,3*anim,{alpha:.95})}function createGrid(t,e){var o;width=t,height=e;var i=[[6,5,9,8,0,2],[1,9,5,2,4,3],[4,5,6,7,9,7],[0,4,8,7,7,9],[2,2,1,5,2,4],[6,4,8,9,3,1]];buttons=[];for(var a=0;a<height;a++){buttons.push([]);for(var n=0;n<width;n++)o=new Diggit(area,n,a,100,100,4!=gameState?Math.round(9*Math.random()):i[a][n]),buttons[a].push(o),TweenFX.to(o.div,0,{scale:.9})}area.style.transform=plate.style.transform="scale(0.2)",TweenFX.to(area,3*anim,{scale:1,alpha:1}),TweenFX.to(plate,3*anim,{scale:1,alpha:1},beginGame),onResize(),onResize()}function Diggit(t,e,o,i,a,n){var r,l;this.x=e,this.y=o,this.width=i,this.height=a,this.z=n,this.state=0,this.holder=l=document.createElement("div"),t.appendChild(l).className="diggit-holder",l.style.width=i+"px",l.style.height=a+"px",this.div=document.createElement("div"),l.appendChild(this.div).className="diggit-frame",this.playerButton=document.createElement("div"),l.appendChild(this.playerButton).className="diggit-button "+player+"btn",this.playerButton.addEventListener("click",buttonClick),this.opponentButton=document.createElement("div"),l.appendChild(this.opponentButton).className="diggit-button "+opponent+"btn",this.opponentButton.addEventListener("click",buttonClick),this.diggit=r=document.createElement("div"),l.appendChild(r).className="diggit",r.style.left=0,r.style.top=0,r.style.right=0,r.style.bottom=0,r.style.margin="auto",this.canvas=TypeFX.drawDiggit(r,n+48,10),this.canvas.style.transform="scale(0.8)",this.canvas.style.marginTop="2px",this.canvas.style.userSelect="none",this.canvas.style.webkitUserSelect="none",this.canvas.style.mozUserSelect="none"}function buttonClick(t){for(var e=0;e<height;e++)for(var o=0;o<width;o++)buttons[e][o].playerButton==t.target&&buttonClicked(buttons[e][o],player),buttons[e][o].opponentButton==t.target&&buttonClicked(buttons[e][o],opponent)}function buttonClicked(t,e){if(3==cpu){if(9!=t.z&&5!=t.z&&(4!=t.z||20!=turns&&22!=turns))return;cpu=1,updateUI(player),updateUI(opponent),killAll(messtxt),TweenFX.to(mess,2*anim,{alpha:0})}2!=cpu&&turns++;var o,i,a=0,n=[];if(turn)for(2!=cpu&&(turn=0),o=0;o<width;o++)buttonDarken(buttons[t.y][o]),buttonDisable(buttons[t.y][o].playerButton);else for(2!=cpu&&(turn=-1),i=0;i<height;i++)buttonDarken(buttons[i][t.x]),buttonDisable(buttons[i][t.x].opponentButton);if(2!=cpu){if(buttonMark(t),turn){for(i=0;i<height;i++)1==buttons[i][t.x].state?a++:n.push(buttons[i][t.x]);a==height-1?multiplierBottom++:multiplierBottom=1}else{for(o=0;o<width;o++)1==buttons[t.y][o].state?a++:n.push(buttons[t.y][o]);a==width-1?multiplierTop++:multiplierTop=1}a==height-2&&closeTile(n[0]==t?n[1]:n[0],e),t.state=1,scores[e]+=t.z*((e==player?multiplierBottom:multiplierTop)||1),updateUI(player),updateUI(opponent),turn?hilightHorizontal(t.y):hilightVertical(t.x)}}function closeTile(t,e){"none"==t.playerButton.style.pointerEvents&&(scores[e==player?opponent:player]+=t.z*((e==player?multiplierBottom:multiplierTop)||1),TweenFX.to(t.opponentButton,15,{scale:1}),TweenFX.to(t.playerButton,15,{scale:1}),TweenFX.to(t.diggit.firstChild,15,{scale:1.1,alpha:.25},(function(){TweenFX.to(t.diggit.firstChild,35,{scale:.8,alpha:1}),buttonDarken(t),buttonDisable(t.playerButton),buttonDisable(t.opponentButton),buttonMark(t),updateUI(player),updateUI(opponent)})),t.state=1,setTimeout((function(){recursiveGlitch(t)}),100))}function recursiveGlitch(t){for(var e=[],o=[],i=0;i<height;i++)buttons[i][t.x].state||e.push(buttons[i][t.x]);1==e.length&&o.push(e.pop());for(var a=0;a<width;a++)buttons[t.y][a].state||e.push(buttons[t.y][a]);for(1==e.length&&o.push(e.pop()),a=0;a<o.length;a++)closeTile(o.pop());checkEnd()}function buttonDisable(t){t.style.pointerEvents="none",TweenFX.to(t,10,{alpha:0})}function buttonDarken(t){t.div.style.borderColor=t.state?colors.darkBorder:colors.greyBorder,t.div.style.transform="scale(0.9)"}function buttonMark(t){t.diggit.firstChild.getContext("2d").clearRect(0,0,100,100),TypeFX.drawGlyph(t.diggit.firstChild,42,10,"#cc8888"),t.holder.style.opacity="0.4"}function updateUI(t){var e=t==player?bottomTxt:topTxt;killAll(e),TypeFX.drawText(e,"\r    Score: "+(scores[t]<10?"0":"")+scores[t]+(t==player?multiplierBottom>1?"  *"+multiplierBottom:"    ":multiplierTop>1?"  *"+multiplierTop:"    "),textSize+2,2-textLeading)}function checkEnd(){var t,e=0;for(t=0;t<height;t++)for(var o=0;o<width;o++)buttons[t][o].state&&e++;return e==height*width&&(endGame(opponent),!0)}function hilightHorizontal(t,e){if(!checkEnd()){e||(e=player),bottomscore.style.pointerEvents="auto",bottomscore.style.opacity="1",topscore.style.pointerEvents="none",topscore.style.opacity="0.9",hilight.style.background=colors[player+"Hi"],hilight.style.borderColor=colors[player],hilight.style.width=areaWidth+6+"px",hilight.style.height=areaHeight/height+6+"px",hilight.style.top=t*(areaHeight/height)-3+"px",hilight.style.left="-3px",11==gameState?1==cpu&&(cpu=3,messSelect(12),cpu=2,setTimeout((function(){buttonClicked(buttons[t][0],e)}),100)):12==gameState?(cpu=3,messSelect(gameState)):13==gameState||14==gameState?(cpu=3,messSelect(gameState),cpu=2,setTimeout((function(){buttonClicked(buttons[t][0],e)}),100)):15==gameState?1==cpu&&(cpu=-1,messSelect(16)):16==gameState?1==cpu&&(cpu=-1):17==gameState&&messSelect(17);for(var o=[],i=0,a=0;a<width;a++)hilightButton(a,t,buttons[t][a].playerButton,player),o.push(buttons[t][a].state?0:buttons[t][a].z),buttons[t][a].state||i++;for(o=getAllIndexes(o,o[o.indexOf(Math.max.apply(this,o))]),a=0;a<o.length;a++)cpu>=2&&hilightFrame(buttons[t][o[a]].playerButton,player);rotateopt&&turns&&rotateDigits(),flipopt&&turns&&flipDigits(),i>2&&(multiplierTop=1,updateUI(opponent)),cpu>=0&&(TweenFX.to(topscore,16==gameState?1:10,{height:110-(cpu>=2&&10==gameState?20:0)}),TweenFX.to(bottomscore,16==gameState?1:10,{height:bottomHeight})),cpu>=0&&cpu<2&&11!=gameState&&12!=gameState&&13!=gameState&&14!=gameState&&TweenFX.to(topTxt,16==gameState?1:10,{scale:.75,y:-5}),TweenFX.to(bottomTxt,16==gameState?1:10,{scale:1,y:0},doTurn,o[0],t,e)}}function hilightVertical(t,e){if(!checkEnd()){e||(e=opponent),bottomscore.style.pointerEvents="none",bottomscore.style.opacity="0.9",topscore.style.pointerEvents="auto",topscore.style.opacity="1",hilight.style.backgroundColor=colors[opponent+"Hi"],hilight.style.borderColor=colors[opponent],hilight.style.height=areaHeight+6+"px",hilight.style.width=areaWidth/width+6+"px",hilight.style.left=t*(areaWidth/width)-3+"px",hilight.style.top="-3px";for(var o=[],i=0,a=0;a<height;a++)hilightButton(t,a,buttons[a][t].opponentButton,opponent),o.push(buttons[a][t].state?-1:buttons[a][t].z),buttons[a][t].state||i++;o=getAllIndexes(o,o[o.indexOf(Math.max.apply(this,o))]),rotateopt&&rotateDigits(),flipopt&&flipDigits(),i>2&&(multiplierBottom=1,updateUI(player)),TweenFX.to(topscore,16==gameState?1:10,{height:topHeight}),TweenFX.to(bottomscore,16==gameState?1:10,{height:110}),TweenFX.to(topTxt,16==gameState?1:10,{scale:1,y:0},doTurn,t,o[0],e),cpu>=0&&cpu<2&&11!=gameState&&12!=gameState&&13!=gameState&&14!=gameState&&TweenFX.to(bottomTxt,16==gameState?1:10,{scale:.75,y:-5})}}function rotateDigits(){for(var t=0;t<height;t++)for(var e=0;e<width;e++)buttons[t][e].state||TweenFX.to(buttons[t][e].diggit,anim,{rotate:flipopt?turn?0:-90:turn?0:180})}function flipDigits(){if(!rotateopt)for(var t=0;t<height;t++)for(var e=0;e<width;e++)buttons[t][e].state||TweenFX.to(buttons[t][e].diggit,anim,{rotate:turn?0:90});TweenFX.to(area,anim,{rotate:turn?0:-90}),TweenFX.to(plate,anim,{rotate:turn?0:-90})}function doTurn(t,e,o){if(gameState>10){if(16==turns)return cpu=3,void messSelect(gameState+=1);if(18==turns)cpu=3;else{if(20==turns&&21==gameState)return cpu=3,messSelect(gameState+=1),cpu=2,void setTimeout((function(){buttonClicked(buttons[e][0],o),cpu=3}),100);if(22==turns)return cpu=3,void messSelect(gameState+=1)}}(cpu&&o==opponent||(15==gameState||16==gameState)&&o==player)&&makeTurn(t,e,o)}function makeTurn(t,e,o){var i=buttons[e][t],a=(o==player?"player":"opponent")+"Button";TweenFX.to(i.diggit.firstChild,16==gameState?1:15,{scale:1.1,alpha:.25}),TweenFX.to(i[a],16==gameState?2:15,{scale:1},(function(){hilightFrame(i[a],o==player?player:opponent),i[a].style.backgroundColor={red:"#ff3838",green:"#38ff38",blue:"#3838ff"}[o],i.diggit.firstChild.getContext("2d").clearRect(0,0,100,100),TypeFX.drawGlyph(i.diggit.firstChild,42,10,{red:"#a33",green:"#3a3",blue:"#33a"}[o]),TweenFX.to(i.diggit.firstChild,16==gameState?3:35,{scale:.8,alpha:1}),TweenFX.to(i[a],16==gameState?2:35,{scale:.95,alpha:.9},buttonClicked,i,o)}))}function endGame(t){TweenFX.to(hilight,2*anim,{alpha:0}),multiplierTop=1,updateUI(opponent),multiplierBottom=1,updateUI(player),gameState>9?message("Often the Glitch causes a chain\rreaction, which combined with\rSkips can earn bonus!"," Menu ",!0,textSize+1,6):scores[player]>scores[opponent]?(gameState=0,message(player+" player won."," Menu ",!0,textSize+1,6)):scores[player]<scores[opponent]?(gameState=0,message(opponent+" player won."," Menu ",!0,textSize+1,6)):message("End game."+t," Menu ",!0,textSize+1,6)}function hilightButton(t,e,o,i){buttons[e][t].state?(buttons[e][t].div.style.borderColor=colors[i+"Border"],buttons[e][t].div.style.backgroundColor="#555"):(o.style.pointerEvents=cpu>=1&&i==opponent||-1==cpu&&16!=turns||i==opponent&&"red"==opponent?"none":"auto",TweenFX.to(o,10,{alpha:1}))}function hilightFrame(t,e){t.style.borderColor=colors[e+"Border"]}function getAllIndexes(t,e){for(var o=[],i=-1;-1!=(i=t.indexOf(e,i+1));)o.push(i);return o}function messSelect(t){gameState=t,killAll(messtxt),TweenFX.to(mess,2*anim,{alpha:0},(function(){switch(t){case 1:cpu=-1;case 2:2==t&&(opponent="blue",topscore.className="uiscore bluetitle");case 3:startGame(t);break;case 4:createGrid(6,6);break;case 5:case 6:6==t&&(cpu=1),createGrid(size,size);break;case 7:closediv.style.visibility="visible",closediv.style.top="-1.45%",closediv.style.right="-2.4%",TweenFX.to(closediv,anim,{scale:.5}),message("Players take turns in choosing\rfrom provided rows or columns\rof highlighted tiles. `"," Next ",!0,textSize+1,8),hilightHorizontal(5,player),setTimeout((function(){cpu=2,buttonClicked(buttons[5][0],player)}),100),killAll(bottomTxt),TweenFX.to(bottomscore,2*anim,{height:96},(function(){TypeFX.drawText(bottomTxt,"\rNumbers on tiles represents score weight,\r\r\r\robviously 9 (nine) is better than 0 (zero).",textSize,-textLeading),killAll(topTxt)})),gameState+=3;break;case 8:case 9:closediv.style.visibility="visible",closediv.style.top="0.5%",closediv.style.right="0.75%",TweenFX.to(closediv,anim,{scale:1}),updateUI(player),updateUI(opponent),TweenFX.to(mess,2*anim,{alpha:0});var e=Math.round(Math.random()*(height-1));turn?hilightHorizontal(e):hilightVertical(e);break;case 10:message("You select from the row of tiles\rhighlighted in Green, while your\ropponent chooses from\rcolumns marked in Red."," Hide ",!0,textSize+1,6),cpu=-1,hilightHorizontal(5,player),TweenFX.to(hilight,2*anim,{alpha:1}),killAll(topTxt),topTxt.style.opacity="0",TypeFX.drawText(topTxt,"\r\rOpponent's score will be displayed here.",textSize,-textLeading/2.75),TweenFX.to(topTxt,2*anim,{alpha:1,scale:1}),killAll(bottomTxt),TypeFX.drawText(bottomTxt,"\rThe column in which your opponent will fall\r\r\r\rdepends on your selection. Choose wisely !",textSize,-textLeading),TweenFX.to(bottomscore,2*anim,{height:96}),TweenFX.to(topscore,anim,{height:86}),gameState+=1;break;case 11:cpu=2,buttonClicked(buttons[5][0],player),cpu=3,hilightHorizontal(5,player),killAll(topTxt),TypeFX.drawText(topTxt,"\r\r\r\rThe CPU offers a fair and challenging AI.\r\r\rIt's more fun when playing in multiplayer.",textSize,2-textLeading),killAll(bottomTxt),updateUI(player),TweenFX.to(bottomtxt,2*anim,{scale:.8}),TweenFX.to(bottomscore,2*anim,{height:110}),gameState+=1;break;case 12:gameState+=1;break;case 13:gameState+=1,TweenFX.to(hilight,anim,{alpha:0}),messSelect(gameState);break;case 14:killAll(topTxt),killAll(bottomTxt),TypeFX.drawText(topTxt,"\rAs you see the game mechanic is simple, but\r\r\rthere are special tricks that affect score.",textSize,4-textLeading),message("Now we will advance ahead into \ra developed state of game play\rto demonstrate some\rSkips and Glitches :)","Autoplay",!0,textSize+1,2),TypeFX.drawText(bottomTxt,"\rThe special tricks allows you to earn more\r\r\r\rthan the maximum 9 points from a single tile.\r\r\r\rGlitches are useful at the opponent's turns.",textSize,-textLeading),gameState+=1;break;case 15:cpu=1,updateUI(player),updateUI(opponent),TweenFX.to(mess,2*anim,{alpha:0}),TweenFX.to(hilight,2*anim,{alpha:1}),hilightHorizontal(parseInt(TweenFX.getStyle(hilight,"top")/100));break;case 16:break;case 17:killAll(topTxt),updateUI(opponent),killAll(bottomTxt),message("The first special trick is to not\rleave a choice for your\ropponent, Skipping him!"," Hide ",!0,textSize+1,2),TypeFX.drawText(bottomTxt,"\rSkip multiple times in a row to multiply each\r\r\r\rconsecutive selected tile's score *2,*3,*4!",textSize,-textLeading),cpu=2,setTimeout((function(){buttonClicked(buttons[1][1],player),cpu=3}),100),gameState+=1;break;case 18:cpu=2,buttonClicked(buttons[1][0],player),cpu=3,hilightHorizontal(1,player),killAll(bottomTxt),updateUI(player);case 19:case 20:gameState+=1;break;case 21:cpu=3,gameState+=1;break;case 22:message("Notice how consecutive Skipping\rgreatly increases your score to\rget dozen points at once!","Hide",!0,textSize+1,10),gameState+=1;break;case 23:cpu=2,buttonClicked(buttons[1][0],player),cpu=3,hilightHorizontal(1,player);break;case 24:cpu=2,setTimeout((function(){buttonClicked(buttons[5][0],player),cpu=3}),100),killAll(bottomTxt),message("Selecting between the only two\rtiles left in your row or column\rproduces the Glitch!"," Hide ",!0,textSize+1,10),TypeFX.drawText(bottomTxt,"\rThe Glitch move was inevitable because tiles\r\r\r\rwere often stucking the game whenever left\r\r\r\ralone both in their rows and columns.",textSize,-textLeading),gameState+=1;break;case 25:cpu=2,buttonClicked(buttons[5][0],player),cpu=3,hilightHorizontal(5,player);break;case 26:gameState+=1;break;default:scores={green:0,blue:0,red:0},cpu=0,gameState=0,turn=-1,turns=0,multiplierTop=1,multiplierBottom=1,killAll(area),killAll(topTxt),killAll(bottomTxt),TweenFX.to(plate,anim,{alpha:0}),TweenFX.to(title,2*anim,{alpha:1}),mainMenu()}}))}function createListFunction(t){return function(){for(var e=0;e<arguments.length;e++)arguments[e]&&t(arguments[e],e)}}window.addEventListener("load",init,!1),window.addEventListener("resize",onResize,!1);var kill=createListFunction((function(t,e){t.parentNode&&t.parentNode.removeChild(t)})),hide=createListFunction((function(t,e){t.style.visibility="hidden"})),show=createListFunction((function(t,e){t.style.visibility="visible"})),killAll=function(t){for(;t.firstChild;)kill(t.firstChild)},TypeFX=function(){var t,e,o,i,a,n=[[[,,,5],[,6]],[[,,,2],[2,,,2]],[[1,,,7],[3,,,7],[,2,5],[,4,5]],[[1,1,4],[,2],[1,3,3],[4,4],[,5,4],[2,,,7]],[[,5,,2],[1,4],[2,3],[3,2],[4,,,2],[,1],[4,5]],[[1],[,1],[,3,,3],[1,2],[2,1],[1,6,2],[4,6],[3,4,,2],[4,3],[2,3]],[[,,,2]],[[,2,,3],[1,1],[1,5],[2],[2,6]],[[2,2,,3],[1,1],[1,5],[],[,6]],[[,2],[,4],[1,3,3],[2,1,,5],[4,2],[4,4]],[[,3,5],[2,1,,5]],[[1,6,,2],[,8]],[[,4,5]],[[,6]],[[,6],[1,4,,2],[2,3],[3,1,,2],[4]],[[1,,3],[,1,,5],[1,6,3],[4,1,,5],[1,4],[2,3],[3,2]],[[1,1],[2,,,6],[1,6,3]],[[,1],[1,,3],[4,1,,2],[3,3],[2,4],[1,5],[,6,5]],[[,1],[1,,3],[4,1,,2],[4,4,,2],[,5],[1,6,3],[2,3,2]],[[,3],[1,2],[2,1],[,4,5],[3,,,7]],[[,,5],[,1],[,2,4],[4,3,,3],[,5],[1,6,3]],[[1,,3],[4,1],[,1,,5],[1,6,3],[1,3,3],[4,4,,2],[2,8]],[[,,5],[4,1,,2],[3,3,,2],[2,5,,2]],[[1,,3],[,1,,2],[4,1,,2],[,4,,2],[4,4,,2],[1,3,3],[1,6,3]],[[1,,3],[,1,,2],[1,3,3],[4,1,,5],[1,6,3],[,5],[2,8]],[[,2],[,5]],[[1,2],[1,4,,2],[,6]],[[,3],[1,2],[1,4],[2,1],[2,5]],[[,2,5],[,4,5]],[[2,3],[1,2],[1,4],[,1],[,5]],[[,1],[1,,3],[4,1,,2],[3,3],[2,4],[2,6]],[[1,,4],[,1,,5],[5,1,,5],[1,6,4],[3,2],[2,2,,3],[3,4]],[[,1,,6],[4,1,,6],[1,,3],[,3,4]],[[,,4],[,,,7],[,3,4],[,6,4],[4,1,,2],[4,4,,2]],[[1,,3],[,1,,5],[1,6,3],[4,5],[4,1]],[[,,,7],[,,4],[,6,4],[4,1,,5]],[[,,5],[,3,4],[,6,5],[,,,7]],[[,,5],[,3,4],[,,,7]],[[1,,3],[,1,,5],[1,6,3],[4,5],[3,4,2],[4,1]],[[,,,7],[4,,,7],[1,3,3]],[[,,3],[,6,3],[1,1,,5]],[[4,,,6],[1,6,3],[,5]],[[,,,7],[1,3],[2,2],[2,4],[3,1],[4],[3,5],[4,6]],[[,,,7],[1,6,4]],[[,,,7],[1,2],[3,2],[2,3],[4,,,7]],[[,,,7],[1,2],[2,3],[3,4],[4,,,7]],[[1,,3],[,1,,5],[1,6,3],[4,1,,5]],[[,,,7],[,,4],[,3,4],[4,1,,2]],[[1,,3],[,1,,5],[1,6,3],[4,1,,5],[4,7]],[[,,,7],[,,4],[,3,4],[4,1,,2],[4,4,,3]],[[1,,4],[,1,,2],[1,3,3],[4,4,,2],[,6,4]],[[,,5],[2,,,7]],[[,,,6],[1,6,3],[4,,,6]],[[,,,3],[4,,,3],[1,3,,2],[3,3,,2],[2,5,,2]],[[,,,7],[1,5],[2,4],[3,5],[4,,,7]],[[,,,2],[4,,,2],[,5,,2],[4,5,,2],[1,2],[3,2],[2,3],[1,4],[3,4]],[[,,,2],[4,,,2],[1,2],[3,2],[2,3,,4]],[[,,5],[,6,5],[,5],[1,4],[2,3],[3,2],[4,1]],[[,,,7],[1,,2],[1,6,2]],[[4,6],[3,4,,2],[2,3],[1,1,,2],[]],[[2,,,7],[,,2],[,6,2]],[[,2],[1,1],[2,,,7],[3,1],[4,2]],[[,7,5]],[[,5],[1,6],[2,1,,7],[3,6],[4,5]],[[1,2,2],[,3,,3],[1,6,2],[3,2,,5]],[[,,,7],[,2,3],[,6,3],[3,3,,3]],[[,3,,3],[1,2,2],[1,6,2],[3,3],[3,5]],[[3,,,7],[1,2,2],[1,6,2],[,3,,3]],[[1,2,2],[,3,,3],[1,6,2],[3,3],[,4,4]],[[1,1,,6],[,3,3],[2]],[[1,2,2],[,3,,3],[1,6,2],[3,2,,6],[1,8,2]],[[,,,7],[,2,3],[3,3,,4]],[[1,2,,5],[1],[,2]],[[1,2,,5],[1],[,2],[,7]],[[,,,7],[1,4],[2,3],[2,5],[3,2],[3,6]],[[,,,6],[1,6]],[[,2,,5],[2,3,,4],[4,3,,4],[,2,4]],[[,2,,5],[3,3,,4],[,2,3]],[[1,2,2],[,3,,3],[1,6,2],[3,3,,3]],[[,2,3],[,2,,7],[,6,3],[3,3,,3]],[[1,2,2],[3,2,,7],[1,6,2],[,3,,3]],[[,2,,5],[1,3],[2,2,2]],[[1,2,3],[1,4,2],[,6,3],[,3],[3,5]],[[1,,,6],[,2,3],[2,6]],[[,2,,4],[1,6,2],[3,2,,4]],[[,2,,5],[3,2,,3],[1,6],[2,5]],[[,2,,4],[2,2,,4],[4,2,,4],[1,6],[3,6]],[[,2,,2],[1,4,2],[3,2,,2],[,5,,2],[3,5,,2]],[[,2,,4],[1,6,2],[3,2,,6],[1,8,2]],[[,2,4],[3,3],[1,4,2],[,5],[,6,4]],[[1,1,,2],[1,4,,2],[2],[2,6],[,3]],[[1,,,9]],[[1,1,,2],[1,4,,2],[],[,6],[2,3]]],r=[];for(t=0;t<33;t++)n.unshift([]);for(t=0;t<n.length;t++)33==t||39==t||46==t||58==t?r.push(1):[32,44,59,105,106,108].indexOf(t)>-1?r.push(2):[34,40,41,60,62,73,91,93,102,116,123,124,125].indexOf(t)>-1?r.push(3):t>96&&109!=t&&119!=t?r.push(4):64==t?r.push(6):r.push(5);function l(t,e,o,i){parseInt(e)||(e=e.charCodeAt(0)),i||(i="white"),o||(o=1);var a=document.createElement("canvas");return a.width=o*r[e],a.height=10*o,s(a,e,o,i),t.appendChild(a),a}function s(e,o,r,l){var s=e.getContext("2d");if(s.fillStyle=l,n[o])for(t=0;t<n[o].length;t++)4==n[o][t].length?(i=n[o][t][3],a=1):3==n[o][t].length?(a=n[o][t][2],i=1):(a=1,i=1),s.beginPath(),s.rect(n[o][t][0]*r||0,((n[o][t][1]||0)+1)*r,a*r,i*r),s.fill()}return{symbols:n,drawDiggit:l,drawGlyph:s,drawText:function(t,i,a,n,r){var s,p=i.split("\r"),h=[];for(o=0;o<p.length;o++)for(h.push(0),e=0;e<p[o].length;e++)(s=l(t,p[o].charCodeAt(e),a,r)).style.position="absolute",s.style.left=h[o]+"px",s.style.top=o?o*a*10+(o*n||0)+"px":0,h[o]+=s.width+a;t.style.width=Math.max.apply(this,h)+"px",t.style.height=p.length*a*10+(p.length*n||0)+"px"}}}(),TweenFX=function(){var t,e=/[+-]?\d+(\.\d+)?/g,o=["alpha","opacity","left","top","right","bottom","width","height","x","y"],i=["rotate","scale","scaleX","scaleY"],a=[],n=[];function r(e,r,p,h,u){var c,d,g,m,b=0,y=[];for(d in p)o.indexOf(d)>-1?((g="x"==d?o[2]:"y"==d?o[3]:d==o[0]?o[1]:d)==o[1]&&p[d]>0&&("hidden"==e.style.visibility&&(e.style.opacity="0"),e.style.visibility="visible"),y.push({property:g,start:l(e,g),end:p[d]})):i.indexOf(d)>-1&&(m||(m=s(e)));if(m)for(c=0;c<i.length;c++)d=i[c],g=p.hasOwnProperty(d),d==i[1]?g&&(y.push({property:i[2],start:m[i[2]],end:p[d]}),y.push({property:i[3],start:m[i[3]],end:p[d]}),c+=2):y.push({property:d,start:m[d],end:g?p[d]:m[d]});function f(t,e){return t&&(e=function(t){return t?a.indexOf(t):a.length}(t)),e>-1&&(cancelAnimationFrame(n.splice(e,1)),a.splice(e,1)),e}f(e),y.length&&(n.push(requestAnimationFrame((function l(){if(!t){for(b+=1,m="",c=0;c<y.length;c++)y[c].start==y[c].end?g=y[c].end:(d=y[c].start>y[c].end?y[c].end+(y[c].start-y[c].end)/r*(r-b):y[c].start-(y[c].start-y[c].end)/r*b,g=b>=r?y[c].end:d),g+=o.indexOf(y[c].property)>1?"px":i.indexOf(y[c].property)?"":"deg",o.indexOf(y[c].property)>-1?e.style[y[c].property]=g:m+=y[c].property+"("+g+") ";if(m.length&&(e.style.transform=m),b>=r)return"0"==e.style.opacity&&(e.style.visibility="hidden"),f(e),void(h&&h.apply(this,u))}(c=a.indexOf(e))>-1&&(n[c]=requestAnimationFrame(l))}))),a.push(e))}function l(t,o){return 1*(window.getComputedStyle(t,null).getPropertyValue(o).match(e)||[0]).map((function(t){return 1*t}))}function s(t,e){var o=window.getComputedStyle(t,null).getPropertyValue("transform").replace("matrix(","").replace("matrix3d(","").replace(")","").split(", ");return 16==o.length?o=[o[0],o[1],o[4],o[5]]:o.length<6&&(o=[1,0,0,1]),e?p(o)[e]:p(o)}function p(t){return{scaleX:Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)),scaleY:Math.sqrt(Math.pow(t[2],2)+Math.pow(t[3],2)),rotate:180/Math.PI*Math.atan2(t[3],t[2])-90}}return{to:function(t,e,o,i){r(t,e,o,i,Array.apply(null,arguments).slice(4))},pause:function(e){return arguments.length?(e||!1===e)&&(t=e):t=!t,t},stop:function(t){-1==stopTween(t)&&removeAllTweens()},tweenedElements:a,getStyle:l,getTransform:s}}()</script>