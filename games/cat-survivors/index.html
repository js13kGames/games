<!doctype html><title>Cat Survivors - js13kGames 2025</title><meta content="width=device-width,user-scalable=no" name=viewport><style>*{margin:0;padding:0;overflow:hidden;touch-action:none;user-select:none;-webkit-user-select:none}body{height:100vh}canvas{image-rendering:pixelated}</style><canvas></canvas><script>var e,t,l,i,o,a,r,s,n,f,c,h,u,g,p,T,d,v,S,m,y,b,k,P,{PI:A,cos:R,sin:C,round:W,tan:E,random:F,atan2:w,hypot:D,exp:q,sign:V,imul:x}=Math,L=2*A,O=(e,t)=>t>e?e:t,B=(e,t)=>e>t?e:t,M=e=>e>0?e:-e,I=new AudioContext,G=I.createGain(),U=document.body,H=U.firstElementChild,N=H.getContext("2d",{alpha:!1}),K=0,Y=0,J=0,X=0,_=0,z=0,Q=0,Z=0,$=0,j=0,ee=0,te=0,le=1,ie=1,oe=0,ae={},re={},se={},ne=e=>ie=e,fe=()=>X||Object.entries(re).some(([,e])=>e),ce=e=>oe=e,he=0,ue=0,ge=0,pe=0,Te=0,de=(e,t,l,i=ee/2,o=te/2)=>{he=e-i/l,ge=e+i/l,ue=t-o/l,pe=t+o/l,Te=B(0,Te-8*Z),N.save(),N.translate(i,o),N.scale(l,l),N.translate((4*Te*(F()-.5)|0)-e,(4*Te*(F()-.5)|0)-t)},ve=e=>Te=e,Se=(e,t,l)=>e>he-l&&ge+l>e&&t>ue-l&&pe+l>t,me=2**-.5,ye=(e,t,l)=>t>e?O(e+l,t):e>t?B(e-l,t):e,be=(e,t,l)=>e*(1-l)+t*l,ke=e=>e[F()*e.length|0],Pe=e=>e*(2-e),Ae=(e,t,l)=>be(e>>16&255,t>>16&255,l)<<16|be(e>>8&255,t>>8&255,l)<<8|be(255&e,255&t,l),Re=(e,t=1)=>"rgba("+(e>>16&255)+","+(e>>8&255)+","+(255&e)+","+t+")",Ce=(e,t=e/60|0,l=e%60|0)=>""+(t/10|0)+t%10+":"+(l/10|0)+l%10,We=e=>O(1,B(0,e)),Ee=(e,t)=>Array(e).fill(t),Fe=(e=.5)=>F()<e,we=(e,t,l,i=We((l-e)/(t-e)))=>i*i*(3-2*i),De=[6715170,2245717,13426175],qe=[16777215,,],Ve="#fff",xe="#000",Le=e=>Re(Ae(0,qe[0],e)),Oe=(e,t=0,l=1)=>Re(Ae(Ae(0,e,l),qe[0],Pe(t))),Be=e=>"bold "+e+"px sans-serif",Me=(e,t,l,o,a=1,r=2)=>{i.push({t:e,e:t,k0:l,w0:10*(F()-.5),C0:-10*F(),p:F()-.5,a:1,A0:r,i:o,h:a})},Ie=(e,t,l,i,o,a=1,r=""+l,s=.2*o/10)=>{N.font=Be(o),N.textAlign=["left","center","right"][a],N.lineWidth=o/10*2,N.lineCap=N.lineJoin="round",N.strokeStyle=xe,N.fillStyle=i,N.strokeText(r,e+s,t+s),N.fillText(r,e,t)},Ge={},Ue=(e,t,l,i)=>{if(!Ge[l]){let e=document.createElement("canvas"),t=e.getContext("2d");e.width=64,e.height=64,t.textAlign="center",t.font=Be(60),t.filter="contrast(1.4) drop-shadow(0px 0px 1px #000)",t.fillText(l,32,53),t.drawImage(e,0,0),Ge[l]=e}N.drawImage(Ge[l],e-i/2,t-i/2,i,i)},He=(e,t=C(8*z+e))=>{N.save(),N.scale(1+.1*t,1-.3*t),N.translate(0,4-2*(1-t)),N.fillStyle="#9ac",N.fillRect(-4,-3,8,3),N.beginPath(),N.ellipse(0,0,4,2,0,0,L),N.fill(),N.fillStyle=Le(.2-.2*C(4*z)),N.beginPath(),N.ellipse(0,-3,4,2,0,0,L),N.fill(),N.fillStyle="#cde",N.save(),N.translate(-4,-2.6),N.rotate(.4*t*C(4*z)-.4),N.beginPath(),N.ellipse(4,0,4.2,2.2,0,0,L),N.fill(),N.fillStyle="#a9a",N.beginPath(),N.moveTo(3,0),N.quadraticCurveTo(5,-2,7,0),N.quadraticCurveTo(5,2,3,0),N.lineTo(1,-1),N.lineTo(1,1),N.fill(),N.restore(),N.restore()},Ne=(e,t,l,i,o,a)=>{N.beginPath(),N.ellipse(e,t*me,l,l*me,0,0,L),i&&(N.fillStyle=i,N.fill())},Ke=(e,t,l,i)=>{N.fillStyle=i,N.beginPath(),N.arc(e,t,l,0,L),N.fill()},Ye=e=>{if(N.save(),N.translate(e.t,e.e*me-2+C(4*z+e.n0)/2+-12*C(2.5*e.c0)),2===e.K)N.rotate(A/6),N.fillStyle=Le(C(8*z)/2+.5),N.fillRect(-3,-2,6,4),N.fillStyle="#f00",N.fillRect(-2,-1,2,2),N.fillStyle="#00f",N.fillRect(0,-1,2,2);else if(3===e.K){N.rotate(C(4*z)*A/10);let e=R(4*z);N.fillStyle=Le(C(8*z)/2+.5),N.fillRect(-2*e,-2,4*e,1),N.fillRect(-.5,-4,1,6)}else if(4===e.K)He(e.n0);else{N.beginPath(),N.ellipse(0,0,e.s+C(e.n0+13*z)/8,e.s+R(e.n0+19*z)/8,0,0,L),N.lineWidth=1;let t=0===e.K?[65280,6750156,13395711][O(2,e.u0-1)]:10027008;N.fillStyle=Re(t),N.strokeStyle=Oe(t,.5),N.stroke(),N.fill()}N.restore()},Je=(e,t,l,i,a=(4===l?5:1))=>o.push({t:e,e:t+1,K:l,c:2,u0:i,l:0,o:0,W:1,s:a,e0:0,c0:0,n0:10*F(),i:0===l?[65280,6750156,13395711][O(2,i-1)]:1===l?10027008:13421721}),Xe=e=>h=e,_e=(e=(h=x(1103515245,h)+12345))=>2147483647&(e=>(e^=e>>11,e^=e<<7&2636928640,(e^=e<<15&4022730752)^e>>18))(e),ze=(e=1)=>e*(_e()/2147483647),Qe=(e,t,l,i)=>{N.save(),N.translate(e+ze(16),t+ze(16)),N.rotate((ze()-.5)/2);let o=1+ze()/2;N.scale(o,.6*o);for(let e=0;6>e;++e)Ke(1.5*R(L*e/6),1.5*C(L*e/6),.75,i);Ke(0,0,1,l),N.restore()},Ze=(e,t)=>{N.save(),N.translate(e+8,t+8),N.rotate((ze()-.5)/2),N.fillRect(-7,-5,14,5),N.fillRect(-7,1,14,5),N.restore()},$e=(e,t=Z)=>{N.lineWidth=1;for(let l=0;e.length>l;++l){let i=e[l];i.a+=t,i.S>i.a?(i.l*=q(-t*i.P),i.o*=q(-t*i.P),i.t+=i.l*t,i.e+=i.o*t,i.T0&&(i.p+=i.T0*t),Se(i.t,i.e,10)&&(N.save(),N.translate(i.t,i.e),N.strokeStyle=N.fillStyle=i.i,je[i.c](i,i.p+i.k*w(i.o,i.l),i.a/i.S),N.restore())):e.splice(l--,1)}},je=[(e,t,l)=>{N.rotate(t+C(l*A)),N.translate(0,10*C(-A/2+l*A)),N.scale(1,15*C(l*l*A)),N.beginPath(),N.moveTo(0,-1),N.lineTo(0,0),N.moveTo(-2,-1),N.lineTo(-2,0),N.moveTo(2,-1),N.lineTo(2,0),N.stroke()},(e,t,l,i=e.h*(1-l**2))=>{N.rotate(t),N.scale(i,.5*i),N.beginPath(),N.arc(0,0,4,0,L),N.fill()},(e,t,l,i=e.h*(1-l**2))=>{N.rotate(t),N.scale(i,i*e.w),N.beginPath(),N.arc(0,0,4,0,L),N.fill()},(e,t,l)=>{let i=e.h*(1-l**2);N.rotate(t),N.scale(i,.5*i),N.beginPath(),.5>l&&(N.arc(0,0,4,0,L,!0),N.clip(),N.arc(3*l-3,0,8*Pe(l),0,L,!1),N.fill())},(e,t,l,i=e.h*C(l*A)**.5)=>{N.rotate(t),N.scale(i,i),Ue(0,0,"❤️",8)},(e,t,l,i=e.h*We(3*C(l*A)))=>{N.rotate(t),N.scale(i*D(e.o,e.l)/20,i/2),N.beginPath(),N.arc(0,0,4,0,L),N.fill()}],et=I.createGain(),tt=I.createBiquadFilter(),lt=I.createGain(),it=0,ot=0,at=0,rt=0,st=[0,2,4,5,7,9,10],nt=e=>440*2**(e/12),ft=(e,t=0)=>st[e%st.length]+12*(e/st.length|0),ct=e=>[ft(e),ft(e+2),ft(e+6),ft(e+4)],ht=[0,3,4,2],ut=0,gt=e=>{let t=I.createBuffer(1,I.sampleRate*e,I.sampleRate),l=t.getChannelData(0);for(let e=0;l.length>e;e++)l[e]=2*F()-1;let i=I.createBufferSource();return i.buffer=t,i},pt=e=>{let t=I.createOscillator();t.type="sine",t.frequency.setValueAtTime(135,e),t.frequency.exponentialRampToValueAtTime(.001,e+.2);let l=I.createGain();l.gain.setValueAtTime(.8,e),l.gain.exponentialRampToValueAtTime(1e-4,e+.1),t.connect(l),l.connect(et),t.start(e),t.stop(e+.3)},Tt=e=>{let t=gt(.2),l=I.createBiquadFilter();l.type="highpass",l.frequency.value=2e3;let i=I.createGain();i.gain.setValueAtTime(.7,e),i.gain.exponentialRampToValueAtTime(.01,e+.15),t.connect(l),l.connect(i),i.connect(et),t.start(e),t.stop(e+.2)},dt=e=>{let t=gt(.12),l=I.createBiquadFilter();l.type="highpass",l.frequency.value=7e3;let i=I.createGain();i.gain.setValueAtTime(.12,e),i.gain.exponentialRampToValueAtTime(1e-4,e+.06),t.connect(l),l.connect(i),i.connect(et),t.start(e),t.stop(e+.08)},vt=(e,t,l=4)=>{let i=60*l/90;for(let l=0;16>l;l++){if((0===l||F()>.2&&(mt[St][l]||yt[St][l]))&&At(e,i/16,t[l>0||F()<l/16?0:1+2*F()|0]),l>7&&10>=l){e+=i/16;continue}let o=t[l%t.length],a=I.createOscillator();a.type="triangle",a.frequency.setValueAtTime(nt(o),e);let r=I.createGain();r.gain.setValueAtTime(.6,e),r.gain.exponentialRampToValueAtTime(.01,e+i/8),a.connect(r),r.connect(tt),a.start(e),a.stop(e+i/16),e+=i/16}},St=0,mt=[[1,,,,1,,,,1,,,1,,1,,],[1,,,1,,,1,,1,,,1,,,1,1]],yt=[[,,1,,,,1,,,,1,,,,1,1],[,,1,,,,1,,,,1,,,,1]],bt=[Ee(16,1),Ee(16,1)],kt=()=>{let e=[[3,4,2],[0,3],[3,0,5],[0,4,5],[0,2,5],[3,4,0],[0,2,3]];ht=[];let t=ut;for(let l=0;4>l;++l){let l=e[t];t=l[F()*l.length|0],ht.push(t)}return ht},Pt=()=>{let e=I.currentTime;for(;e+.3>ot;){let e=rt%16;0===e&&(at%4==0&&(at&&F()>.7&&(ut=ht[(at-1)%ht.length],kt()),St=F()>.5?0:1),vt(ot,ct(ut=ht[at%ht.length]),4),++at),mt[St][e]&&pt(ot),yt[St][e]&&Tt(ot),bt[St][e]&&dt(ot),ot+=60/90/4,++rt}},At=(e,t,l)=>{let i=I.createOscillator();i.type="sawtooth",i.frequency.setValueAtTime(nt(l%12-36),e);let o=I.createGain();o.gain.setValueAtTime(1,e),o.gain.exponentialRampToValueAtTime(.5,e+t),i.connect(o),o.connect(lt),i.start(e),i.stop(e+t)},Rt=()=>{it||(it=1,at=0,rt=0,ot=I.currentTime+.05,u=window.setInterval(Pt,25),et.gain.value=.05)},Ct=()=>{it&&(it=0,et.gain.value=0,u&&clearInterval(u))},Wt=[[.4,,237,.02,.28,.35,,2.5,,5,196,.14,,,,,.17,.59,.11,,-536],[.1,,,.07,.23,.29,,3.8,-5,,,,,.3,,,,.8,.25],[1/8,,1675,,.06,.24,1,1.82,,,837,.06],[,,101,.01,.01,.15,1,2.9,-5,7,,,,1.2,17,,.13,.52,.04,,-2025],[,,914,.01,.02,.03,,3.9,-52,,,,,,24,,.08,.53,.01],[.1,,415,.02,.02,.08,4,2.6,-1,16,,,,1.5,,.1,,.88,.09],[.5,1,56,,.16,.46,2,,14,-49,,,,,,,,.81,,.17,-527],[1/8,,304,.1,.3,,5,.1,-46,,,,,,-165],[,,150,.05,,.05,,1.3,,,,,,3],[.5,0,440,,.94,.34,,.7,,,,,.11,.2,,,,.34,.19,.23],[1/4,0,440,.1,.3,,2,1.9,,,,,,,,,,.3,.03,,-786]],Et=[],Ft=(e,t=0,l=0,i=1)=>{if(!Et[e]){let o=((e=1,t=.05,l=220,i=0,o=0,a=.1,r=0,s=1,n=0,f=0,c=0,h=0,u=0,g=0,p=0,T=0,d=0,v=1,S=0,m=0,y=0,b=44100,k=1/3)=>{let P=n*=500*L/b/b,A=l*=(1-t+2*t*F(t=[]))*L/b,w=0,D=0,q=0,V=1,x=0,U=0,H=0,N=0>y?-1:1,K=L*N*y*2/b,Y=R(K),J=C,X=J(K)/4,_=1+X,z=-2*Y/_,Q=(1-X)/_,Z=(1+N*Y)/2/_,$=-(N+Y)/_,j=Z,ee=0,te=0,le=0,ie=0;for(f*=500*L/b**3,p*=L/b,c*=L/b,h*=b,u=b*u|0,e*=k,N=(i=b*i+9)+(S*=b)+(o*=b)+(a*=b)+(d*=b)|0;N>q;t[q++]=H*e)++U%(100*T|0)||(H=r?r>1?r>2?r>3?J(w**3):B(O(E(w),1),-1):1-(2*w/L%2+2)%2:1-4*M(W(w/L)-w/L):J(w),H=(u?1-m+m*J(L*q/u):1)*(0>H?-1:1)*M(H)**s*(i>q?q/i:i+S>q?1-(q-i)/S*(1-v):i+S+o>q?v:N-d>q?(N-q-d)/a*v:0),H=d?H/2+(d>q?0:(N-d>q?1:(N-q)/d)*t[q-d|0]/2/e):H,y&&(H=ie=j*ee+$*(ee=te)+Z*(te=H)-Q*le-z*(le=ie))),K=(l+=n+=f)*R(p*D++),w+=K+K*g*J(q**5),V&&++V>h&&(l+=c,A+=c,V=0),!u||++x%u||(l=A,n=P,V=V||1);return(e=I.createBuffer(1,N,b)).getChannelData(0).set(t),(l=I.createBufferSource()).buffer=e,l.connect(G),l})(...Wt[e]);o.detune.value=100*t,o.start(I.currentTime+l),Et[e]=i}},wt=e=>+(12>e),Dt=[0,5,0,0,0,0,100,0,60,30,5,1,0,6,6],qt=e=>v[e],Vt=(e,t)=>v[e]+=t,xt=e=>S.filter(t=>e==wt(t.c)).length,Lt=()=>25*(1+g**.9)|0,Ot=e=>S.find(t=>t.c===e),Bt=(e,t)=>e.v0[t]+v[t],Mt=0,It=0,Gt=e=>It=e,Ut=0,Ht=0,Nt=[],Kt=e=>{for(Ut+=e>0?0:300*$;Ut>0;)Nt.push({t:F()*ee,e:F()*te-50,p:0,P:3,a:0,k:0,S:1+F(),i:"hsl("+(360*F()|0)+",100%,70%)",c:0,l:100*(F()-.5),o:100+100*F(),h:4*F(),w:1}),--Ut;for(Ht+=e*$*300;Ht-- >0;)Nt.push({t:F()*ee,e:-50,p:0,P:0,a:0,k:0,S:1+F(),i:"rgba(255,255,"+255*F()+","+F()/4+")",c:1,l:5*(F()-.5),o:0,h:10,w:1}),--Ht},Yt=["💪","🛡️","🔦","🏹","📖","✨","👟","🍀","❤️","🍅","🧲","🧠","🫧","🔥","🪓","🔪","➰","🪃","🧸","💫","⚡","💧","🐾"],Jt=["Might","Armor","Flashlight","Bracer","Empty Tome","Duplicator","Sneakers","Clover","Hp","Regen","Dry Wool","Education","Void Beam","Fireballs","Axes","Knifes","Tail Whip","Boomerang","Furricane","Sawblades","Lightning","Unlucky Drops","Claws"],Xt=["Base damage","Armor","Damage Area","Bullet Speed","Rate of Fire","Extra Bullet","Moving Speed","Lucky Dodger","Max HP","Recover HP","Pickup Range","Earn XP","Target Closest Enemy","Random Direction","Throws Axes up","Move to Aim","Side-Swiping Attack","Come Back","Damage Aura","Orbit and slice","Random Area","Trace of Damage","Scratching Around"],_t=["Bullets","Damage","Bullet Speed","Damage Area","Rate of Fire","Burst Frequency"],zt=[0,1,2],Qt=[0,0,0],Zt=0,$t=[],jt=0,el=0,tl=0,ll=0,il=0,ol=0,al=(e,t,l=[])=>(l[e]=t,l),rl=(e,t)=>{let l=e-12;return 0>l?[]:sl[l][t]},sl=[[[1,5,10,10,50,2],al(0,1),al(4,25),al(0,1),al(1,10)],[[3,5,10,10,50,4],al(0,1),al(1,5),al(0,1),al(4,20)],[[1,1,10,10,50,4],al(0,1),al(0,1),al(1,5),al(4,20)],[[3,1,10,10,50,4],al(0,1),al(1,5),al(0,1),al(4,30)],[[1,5,10,10,50,4],al(0,1),al(1,5),al(3,1),al(4,50)],[[1,1,10,10,50,4],al(0,1),al(1,4),al(0,1),al(4,20)],[[1,3,10,10,250,4],al(3,2),al(4,50),al(1,5),al(3,2)],[[1,5,5,10,25,4],al(0,1),al(1,5),al(0,1),al(4,30)],[[1,5,10,10,50,4],al(0,1),al(1,5),al(0,1),al(4,50)],[[2,3,10,10,200,4],al(3,5),al(1,3),al(4,30),al(1,3)],[[1,5,10,10,100,4],al(4,20),al(1,2),al(4,20),al(1,2)]],nl=[[1,2],[12,1],[3,1],[2,1],[4,8],[0,1],[8,5],[11,4],[6,10],[7,1],[9,10],[10,1]],fl=(e,t,l,i,o,a,r="Digit"+(l+1))=>{if(null==i)return;let s=(ee-90)/2+e,n=(te-150)/2+t,f=Ot(i),c=a&&(K>=s&&Y>=n&&s+90>=K&&n+150>=Y||0|ae[r]);N.fillStyle=c?"gray":"#444",N.save(),N.translate(e,t+te/2*(1-jt)**3+2*C(l-8*Q)-4*(+c-Qt[l])),N.rotate(.03*(l-1)),N.scale(o,o),N.beginPath(),N.fillStyle=wt(i)?"#446":"#644",N.strokeStyle=c?Ve:"#222",N.roundRect(-45,-75,90,150,5),N.fill(),N.lineWidth=1,N.stroke();let h=f?f.s0+1:0;Ie(0,-45,h?"LVL "+(h+tl):"New!",h?Ve:"#FF0",10),Ie(0,-60,Jt[i],Ve,10),Ue(0,0,Yt[i],40+C(8*Q)),Ie(0,48,((e,t,l=rl(e,t))=>{if(l?.length&&t>0)for(let e=0;l.length>e;++e)if(null!=l[e])return _t[e];return Xt[e]})(i,h),Ve,8),((e,t,l=nl[e],i=rl(e,t))=>{let o,a;if(i?.length&&t>0)for(let t=0;i.length>t;++t){let l=i[t];if(null!=l){o=Bt(Ot(e),t),a=l;break}}l&&(o=qt(l[0]),a=l[1]),a&&(Ie(-10,60,o,"#ccc",8,2),Ie(-2,60,"→",Ve,10),Ie(6,60,o+a,"#3f3",10,0))})(i,h),a&&Ie(0,75,"PRESS ["+(l+1)+"]","#999",6),tl&&jt>=1&&(c&&X?Qt[l]=1:X||(c&&Qt[l]?(Tl(i),cl()):Qt[l]=0),se[r]&&jt>=1&&(Tl(i),cl())),N.restore()},cl=()=>{tl=0,Ft(0),Qt.fill(0),$t.length&&gl($t.shift())?jt=0:ll=1},hl=e=>{let t=Ot(e);return t?t.s0<(e=>5===e?1:4)(e):wt(e)?xt(1)<qt(14):xt(0)<qt(13)},ul=e=>$t.push(e),gl=e=>{if(!ll&&!tl){Ut=0,Ht=0,Nt=[],Qt.fill(0),zt=[];for(let e=0;23>e;++e)hl(e)&&zt.push(e);if(zt.length>0){if(Ct(),1===g&&(zt=zt.filter(e=>!wt(e))),(e=>{for(let t=0;e.length>t;++t){let l=F()*e.length|0,i=e[l];e[l]=e[t],e[t]=i}})(zt),tl=1,ol=0,ne(0),el=e,e){(()=>{let e=0,t=.1;for(let l=0;24>l;++l)[1,0,1,0][l%4]&&Ft(4,12,e,0),[0,1,0,1][l%4]&&Ft(8,12-l/2,e,0),Ft(5,12-(3&l),e,0),Ft(9,ft(l%3+(l/3|0)),e,0),e+=t,t*=1.055;Ft(9,ft(7),e,0),e+=t;for(let t=0;8>t;++t)Ft(10,ft([0,1,2,1,2,3,4,5][t]),e,0),e+=.15})();for(let e=0;zt.length>e;){let t=zt[e];if(Ot(t))break;zt.splice(0,1),zt.push(t)}}else(()=>{let e=0;for(let t=0;6>t;++t)Ft(10,ft([0,1,2,1,2,3,4,5][t]),e,0),e+=.15})();return Ft(1),Gt(1),ve(0),1}{ce(1),Ft(0);let e=F()*nl.length|0;Me(s.d,s.g,Xt[e]+" +1","#FF0",1,1),Vt(nl[e][0],1)}}},pl=()=>{$t=[],Zt=0},Tl=e=>{if(null!=e){let t=Ot(e);t?++t.s0:(t=(e=>({c:e,s0:0,v0:[0,0,0,0,0,0],G:0,T:0,f:0,d0:0}))(e),S.push(t)),((e,t=rl(e.c,e.s0))=>{for(let l=0;t.length>l;++l)e.v0[l]+=t[l]??0})(t),((e,t=nl[e.c])=>{t&&Vt(...t)})(t),s.h0|=1<<e,++s.l0}},dl=e=>{(e=>{p+=e;let t=Lt();return p>=t&&(p-=t,++g,!0)})(e)&&ul(0)},vl=0,Sl=0,ml=0,yl=0,bl=0,kl=0,Pl=0,Al=0,Rl=0,Cl=0,Wl=0,El=0,Fl=0,wl=()=>!Dl&&!Ll&&s.r&&void(tl||(Gt(1),ne(0),il=ll=1,Ct())),Dl=1,ql=0,Vl=0,xl=0,Ll=0,Ol=0,Bl=(e,t,l)=>({O:e,V:t,D:5,s:5,...l}),Ml=e=>({...e,V:10*e.V,s:2*e.s,D:5*e.D,o0:-1}),Il=(e,t=1,l=F()*L,i=t*(D(ge-he,pe-ue)/2+e.s))=>((e,t,l,i=l.V*(1+g/5)|0)=>a.push({c:1,t:e,e:t,E:10*F(),W:1,u:0,G:0,l:0,o:0,o0:1+d/200|0,b:0,B:.5,Z:100,i:7829367,g0:3*F()|0,i0:0,p0:0,C:0,...l,V:i,r:i,R:(0===l.O||1===l.O?2:1)*l.R*(1+g/100)}))(s.d+i*R(l)+F(),s.g+i*C(l)/me+F(),e),Gl=()=>{Ll=0,xl=0,Dl=1,Vl=0,ql=0,e=[],t=[],l=[],i=[],o=[],a=[],r=[],s={c:0,r:100,V:100,t:-5,e:0,d:0,g:0,X:-10,J:0,j:-20,t0:0,r0:-40,f0:0,u:0,W:1.2,s:10,b0:10,z:0,l:0,o:0,b:0,i:0,N:0,_:0,l0:0,h0:0,C:0},n={...s,i:16772863,t:20,e:20,X:10},S=[],v=Dt.concat(),g=0,p=0,T=0,d=0,pl(),k=[],P=[]},Ul=(e,t,l=1)=>k.push({a:t,M:t/l,S0:0,v:e}),Hl=e=>{e.u>0&&(e.u=B(0,e.u-4*$))},Nl=t=>{for(let l=0;t>l;++l){let t=200*F(),l=F()*L;e.push({c:1,t:s.s*R(l)+s.t,e:(s.s*C(l)+s.e)*me,l:t*R(l),o:t*C(l)*me,p:0,k:1,a:0,S:.05+.5*F(),i:xe,h:.1+.3*F(),w:1,P:9})}},Kl=(e,t)=>{e._=w(b-e.g,y+t-e.d),e.N=D(b-e.g,y+t-e.d)>1?1:0,e.l=20*R(e._)*e.N,e.o=20*C(e._)*e.N},Yl=e=>{Hl(e),e.z=ye(e.z,0,4*$),e.d+=e.l*Z,e.g+=e.o*Z;{let t=e.d-e.X,l=e.g-e.J,i=D(t,l);i>0&&(t*=1/i,l*=1/i,e.X=e.d-(8+e.l0/4)*t,e.J=e.g-(8+e.l0/4)*l)}{let t=e.d-e.j,l=e.g-e.t0,i=D(t,l);i>0&&(t*=1/i,l*=1/i,e.j=e.X-(10+e.l0/8)*t,e.t0=e.J-(10+e.l0/8)*l)}{let t=e.j-e.r0,l=e.t0-e.f0,i=D(t,l);i>0&&(t*=1/i,l*=1/i,e.r0=e.j-10*t,e.f0=e.t0-10*l)}e.t=(e.X+e.d)/2,e.e=(e.J+e.g)/2},Jl=(e,t)=>{if(e.C===t.C){let l=e.t-t.t,i=e.e-t.e,o=D(l,i),a=e.s+t.s;if(a>o)if(o>0){let r=(a/o-1)/2;e.t+=l*r/e.s,e.e+=i*r/e.s,t.t-=l*r/t.s,t.e-=i*r/t.s}else e.t+=F(),e.e+=F(),t.t-=F(),t.e-=F()}},Xl=e=>{let t=Re(Ae(e.i,qe[0],Pe(e.u))),l=We(1.5*(e.b-1)),i=-40*M(C(l*L))*(1-l)+5*l,o=-R(e._),a=qt(8)*e.N/30,r=R(e._)*a,s=C(e._)*a,n=e.X-e.d,f=(e.J-e.g)*me;N.save(),N.translate(e.d,e.g*me+i),N.scale(1+.2*R(32*z)*e.z,1+.2*C(32*z)*e.z),N.lineCap="butt",N.lineJoin="round",N.lineWidth=10,N.strokeStyle=t,N.fillStyle=t,N.beginPath(),N.moveTo(2*o,-15),N.quadraticCurveTo(0,-10,0,-5),N.quadraticCurveTo(0+.5*n,.5*f-5,n,-5+f),N.stroke(),Ke(n,f-5,5,t);{N.lineCap="round";let t=e.j-e.X,l=(e.t0-e.J)*me,i=e.r0-e.j,o=(e.f0-e.t0)*me;N.beginPath(),N.lineWidth=3,N.moveTo(n,f-7),N.quadraticCurveTo(n+t,f+l,n+t+i,f+l+o),N.stroke()}{N.beginPath();let t=A/2,i=2*l,o=4*l,s=-.5*r*e.N*(1-l),c=3*(1-l)*e.N,h=8*z*a,u=-o+s*R(h),g=c*C(h);N.moveTo(-3,3*l-5),N.lineTo(-3+u,1-B(0,g)-i),u=o+s*R(h+2*t),g=c*C(h+2*t),N.moveTo(3,3*l-5),N.lineTo(3+u,1-B(0,g)-i),u=-o+s*R(h+t),g=c*C(h+t),N.moveTo(n-3,f-5+3*l),N.lineTo(n-3+u,f+1-B(0,g)-i),u=o+s*R(h+3*t),g=c*C(h+3*t),N.moveTo(n+3,f-5+3*l),N.lineTo(n+3+u,f+1-B(0,g)-i),N.lineWidth=3,N.lineCap="round",N.stroke()}if(N.save(),N.fillStyle=t,N.translate(0,-15),N.rotate(o/3),N.translate(2*o,0),N.beginPath(),N.moveTo(-5,0),N.lineTo(-4,-5),N.lineTo(-1,0),N.lineTo(1,0),N.lineTo(4,-5),N.lineTo(5,0),N.fill(),0>s)Ke(3-2*o,5,2,t),Ke(-3-2*o,5,2,t);else{let l=2*o;if(1>e.b&&!e.u)if(3072&e.h0){let e=Le(.5+.3*C(o*L*2+z));Ke(3-l,5,2,e),Ke(-3-l,5,2,e),N.fillRect(-3-l,3,6,1)}else Ke(3-l,5,2,Ve),Ke(-3-l,5,2,Ve),Ke(3-l,5,.5,xe),Ke(-3-l,5,.5,xe);else N.beginPath(),N.lineWidth=1,N.strokeStyle=Ve,N.moveTo(-2.5-l-1,4),N.lineTo(-2.5-l+1,6),N.moveTo(-2.5-l+1,4),N.lineTo(-2.5-l-1,6),N.moveTo(2.5-l-1,4),N.lineTo(2.5-l+1,6),N.moveTo(2.5-l+1,4),N.lineTo(2.5-l-1,6),N.stroke();512&e.h0&&(N.beginPath(),N.lineWidth=.4,N.lineCap="round",N.strokeStyle="pink",N.moveTo(-1.5-l,9),N.quadraticCurveTo(-1-l,10,0-l,7),N.quadraticCurveTo(1-l,10,1.5-l,9),N.stroke()),Ke(-l,7,.5,"pink"),N.fillStyle=t}N.restore(),N.restore()},_l=r=>{requestAnimationFrame(_l),(e=>{j=Q,$=O(1/30,(Q=e)-j),z+=Z=oe>0?5e-4:$*ie,N.reset(),N.scale(le,le),oe-=$})(r/1e3),Et=[],f=[],c=[s],Ll&&(Kl(s,10),Kl(n,-10)),(e=>{if(e.r>0){let t=qt(6)-e.V;if(t>0&&(e.V+=t,e.r+=t),e.r=O(e.V,e.r+Z*qt(7)),!Ll){if(Dl)e._=C(z*A)*A/6+A/4,e.N=1;else{let t=(ae.ArrowRight|ae.KeyD)-(ae.ArrowLeft|ae.KeyA),l=(ae.ArrowDown|ae.KeyS)-(ae.ArrowUp|ae.KeyW),i=t||l,o=i?t:bl,a=i?l:kl;e._=w(a,o),e.N=J||i?O(1,D(a,o)):0}let t=qt(8)*e.N;e.l=t*R(e._),e.o=t*C(e._)}}else{let t=e.b**2*8|0;if(e.b+=Z,t!=(e.b**2*8|0)&&8>t&&(e.u=1,e._=F()*A,e.X+=50*(F()-.5),e.J+=50*(F()-.5),Ft(3),Ft(4),Ft(5),ve(1),ce(.1),Nl(30),7===t)){let t=F()*L;e.l=200*R(t),e.o=200*C(t)}e.l*=q(-4*Z),e.o*=q(-4*Z)}})(s),Yl(s),Ll&&(c.push(n),Yl(n),((e,t)=>{let l=e.t-t.t,i=e.e-t.e,o=D(l,i),a=e.s+t.s;if(o>0&&a>o){let r=(a/o-1)/2;e.d+=l*r,e.g+=i*r,t.d-=l*r,t.g-=i*r}})(n,s)),(()=>{var e,t;Fl=we(120,125,d)-we(235,240,d),El=we(360,365,d)-we(415,420,d),e=Wl=we(480,485,d)-we(535,540,d),t=El,qe[1]=Ae(Ae(Ae(De[0],De[1],Fl),De[2],t),0,.7*e)})(),N.fillStyle=Oe(qe[1]),N.fillRect(0,0,ee,te);let h=be(be(2,4,ql**2),4,We((s.b*(1+s.u/4))**2));if(Ll){let e=We(xl/2)**.5;de(be(s.d,y,e),be(s.g,b,e)*me,h)}else de(s.d,s.g*me,h);if((e=>{for(let l=0;o.length>l;++l){let i=o[l],r=e.t-i.t,s=e.e-i.e,n=D(r,s);if(i.c0=ye(i.c0,i.e0,4*Z),i.e0)if(e.r>0){if(e.s>n){if(o.splice(l--,1),!Ll)if(0===i.K)dl(i.u0*qt(10));else if(1===i.K){let t=5*g*i.u0;e.r=O(e.V,e.r+t),Me(e.t,e.e,"+"+t+"hp","#9F3")}else if(2===i.K)for(let e of o)e.e0=1;else if(3===i.K){for(let e of a)e.r>0&&Se(e.t,e.e*me,0)&&ii(e,e.r);ve(4)}else 4===i.K&&ul(+Fe(.3)+1);Ft(2),e.z=1;for(let l=0;10>l;++l){let l=F()*L,o=F()**.5*100;t.push({c:2,t:i.t,e:i.e*me-6,l:e.l+o*R(l),o:e.o+o*C(l)*me,p:F()*L,P:6,a:0,k:0,S:.1+.2*F(),i:Oe(i.i,.3),w:1,h:1})}}else if(i.c0>=1){i.l=i.l*q(-9*Z)+5e3*Z*(r/n),i.o=i.o*q(-9*Z)+5e3*Z*(s/n);let e=n/(D(i.l,i.o)*Z);1>e&&(i.l*=e,i.o*=e),i.t+=i.l*Z,i.e+=i.o*Z}}else i.e0=0;else i.e0=0,e.r>0&&n<qt(9)?i.e0=1:(i.l=i.l*q(4*-Z),i.o=i.o*q(4*-Z),i.t+=i.l*Z,i.e+=i.o*Z);Se(i.t,i.e*me,4*i.s)&&c.push(i)}})(s),ni(),fi(),Ll?si():!Dl&&s.r>0&&((d=O(600,d+Z))>=600&&ai(),(()=>{let e=d%120,t=we(30,90,e)-we(115,120,e),l=(we(0,30,e)-we(115,120,e))/2;tt.frequency.value=500*t,lt.gain.value=l})(),oi(),(()=>{for(let e of P)if(d>=e.n)if(e.m)Ul(e.v,e.m,e.L);else for(let t=0,l=F()*L;(e.L||1)>t;++t)Il(ke(e.v),e.D0,l);k=k.filter(e=>e.a>0),P=P.filter(e=>e.n>d);for(let e of k){e.a-=Z;let t=(e.S0+=Z)/e.M|0;for(e.S0-=e.M*t;t-- >0;)Il(ke(e.v))}d>=600&&ai()})()),ql=ye(ql,Dl,4*Z),Vl+=2*Z,Dl&&fe()&&Vl>2&&(()=>{Rt(),Dl=0;for(let e=0;20>e;++e){let e=F()*L,t=50+100*F();Je(s.d+t*R(e),s.g+t*C(e),0,1)}Tl(12);{let e=Bl(0,5,{R:15,B:3,i:812607}),t=Bl(0,30,{R:20,B:3,i:4482611,s:8}),l=Bl(1,20,{R:20,B:3,i:qe[0]}),i=Bl(1,30,{R:40,B:3,s:3,D:10,i:16777164,Q:16711680,p0:1}),o=Bl(2,5,{R:30,B:3,s:3,i:16772829}),a=Bl(2,10,{R:20,B:3,s:5,i:6710869}),r=Bl(3,5,{R:25,i:13408716,Q:0,C:1}),s=Bl(3,5,{R:15,i:11184793,Q:3342336,s:7,C:1}),n=Bl(3,10,{R:25,s:4,i:3355443,Q:10066312,C:1}),f=Bl(4,20,{R:30,s:7,i:0,Q:16776960}),c=Bl(4,5,{R:40,s:5,i:0,Q:0}),h=Bl(5,5,{R:0,D:0,B:.01,i:13412966}),u=Ml(e),g=Ml(r),p=Ml(l),T=Ml({...f,i:16711680}),d={...e,g0:0};Il(h,0,F()*L,100),Il(h,0,F()*L,100),P=[{n:0,m:600,L:30,v:[h]},{n:0,m:60,L:60,v:[s]},{n:60,v:[g]},{n:60,m:60,v:[n,s,d],L:60},{n:120,v:[n,r,s,s,s],m:60,L:120},{n:180,v:[Ml(n)]},{n:180,m:60,L:120,v:[e]},{n:240,v:[u]},{n:240,m:60,L:120,v:[c,c,c,f]},{n:300,v:[T]},{n:300,m:60,L:120,v:[n,n,f,t]},{n:360,m:60,L:120,v:[l]},{n:390,m:30,L:30,v:[i]},{n:390,v:[p]},{n:420,m:60,L:200,v:[a,o]},{n:450,v:[Ml(a)]},{n:480,m:60,L:250,v:[f,t]},{n:510,v:[Ml(i)]},{n:540,m:60,L:300,v:[e,t,l,i,f,c,r,n,a,o]},{n:540,m:60,L:3,v:[g,u,T,p]}]}})(),(()=>{if(_)bl=K-ee/2,kl=Y-te/2;else{if(X){ml=K,yl=Y;let e=D(bl=K-ee/2,kl=Y-te/2);e>0&&(bl/=e,kl/=e),vl=K-44*bl,Sl=Y-44*kl}else if(J){ml=K,yl=Y;let e=D(bl=K-vl,kl=Y-Sl);e>0&&(bl/=e,kl/=e),20>e&&(bl=0,kl=0),e>44&&(ml=vl+44*bl,yl=Sl+44*kl)}Pl=ye(Pl,J,8*$)}})(),((e=he>>4,t=ue>>4,l=ge>>4,i=pe>>4,o=Oe(qe[1],0,.95),a=Re(Ae(16742144,qe[1],.5)),r=Re(Ae(qe[0],qe[1],.5)))=>{for(let s=t;i>=s;++s)for(let t=e;l>=t;++t){let e=t<<4,l=s<<4;Xe((l<<8)-e>>>0),1&_e()&&(N.fillStyle=o,Ze(e,l)),Xe(e+(l<<8)>>>0),3&_e()||Qe(e,l,a,r)}})(),2>Vl){let e=We(Vl-1);N.fillStyle="rgba(0,0,0,"+(1-e**3)+")",N.fillRect(he,ue,ge-he,pe-ue)}else if(s.b>0){let e=be(We(s.b/2),1,s.u);N.fillStyle="rgba(0,0,0,"+.8*e**2+")",N.fillRect(he-10,ue-10,ge-he+20,pe-ue+20)}c.sort((e,t)=>e.C-t.C||e.e-t.e),ri();{let e=Ot(18);if(e){let t=C(16*z)/2+20*Bt(e,3)/10;N.strokeStyle="#c96",N.lineWidth=1,N.beginPath(),N.ellipse(s.t,s.e*me,t,t*me,0,0,L),N.stroke()}}$e(e);let u=[Xl,$l,Ye,Ql];for(let e of c)u[e.c](e);if(!Dl&&s.r>0&&!Ll&&jl(),$e(t),Dl||(()=>{i.sort((e,t)=>e.e-t.e);for(let e=0;i.length>e;++e){let t=i[e];if(t.a-=$*t.A0,t.a>0){if(Se(t.t,t.e*me,10)){let e=1-t.a,l=C(e*A)**.5;N.save();let i=1-t.a**3;N.translate(t.t+t.w0*i,t.e*me-10+t.C0*i),N.rotate(e*t.p),N.scale(l,l),Ie(0,0,t.k0,t.i,10*t.h),N.restore()}}else i.splice(e--,1)}})(),N.restore(),de(1.1*s.d,1.1*s.g*me,h),(()=>{for(Al+=200*Z*Wl;Al>0;)l.push({c:2,t:be(he-20,ge+40,F()),e:be(ue-20,pe+40,F()),l:50*(F()-.5),o:50*(F()-.5),p:0,k:1,a:0,S:1+F(),i:"rgba(255,255,100,"+F()+")",P:2,h:F()/8,w:1}),--Al;for(Rl+=1e3*Z*El;Rl>0;)l.push({c:2,t:be(he-20,ge+40,F()),e:be(ue-50,pe,F()),l:100*(F()-.5),o:100+100*F(),p:0,k:1,a:0,S:1+F(),i:Ve,P:2,h:F()/8,w:1}),--Rl;for(Cl+=300*Z*Fl;Cl>0;){let e=F();l.push({c:5,t:be(he-20,ge+40,F()),e:be(ue-50,pe,F()),l:75,o:200,p:0,k:1,a:0,S:1+e,i:"rgba(100,255,255,"+F()/4+")",P:2*F(),h:e/4,w:1}),--Cl}})(),$e(l),N.restore(),(()=>{let e=(1-ql**2)*Pl;e>0&&(N.save(),N.globalAlpha=e/3,N.beginPath(),N.arc(vl,Sl,64*Pl,0,L),N.setLineDash([5,5]),N.strokeStyle=Ve,N.lineWidth=2,N.fillStyle="#333",N.stroke(),N.arc(vl,Sl,20*Pl,0,L,!0),N.fill(),N.beginPath(),N.arc(ml,yl,20*e,0,L),N.fillStyle=Ve,N.fill(),N.restore())})(),(Mt=ye(Mt,It,8*$))>0&&(N.fillStyle="rgba(0,0,10,"+3*Mt/4+")",N.fillRect(0,0,ee,te)),jt>0&&(()=>{for(let e=0;Nt.length>e;++e){let t=Nt[e];if(t.a+=$,t.S>t.a){let e=t.a/t.S;if(t.l*=q(-$*t.P),t.o*=q(-$*t.P),t.t+=t.l*$,t.e+=t.o*$,t.c){N.fillStyle=t.i;let l=1+t.h*C(e*e*A);N.fillRect(t.t-l/2,t.e,l,2*te)}else Ke(t.t,t.e,.001+t.h*C(e*A)*(.7+.3*C(32*e)),t.i)}else Nt.splice(e--,1)}})(),ei(),(()=>{if($t.length&&!ll&&!tl&&(Zt+=Z)>.5&&(Zt=0,gl($t.shift())),jt=ye(jt,tl,4*$),il=ye(il,ll,4*$),ol=ye(ol,1,$/7),ll&&fe()&&(ll=0,ne(1),Gt(0),Rt()),N.save(),N.translate(ee/2,te/2),il>0){let e=((1-jt)*il)**2;Ie(0,-70,"GET READY",Ve,(20+2*C(8*Q))*e),Ie(0,70,"TAP TO CONTINUE",Ve,(13+C(4*Q))*e)}if(jt>0)if(Ie(0,-100-te/2*(1-jt)**3,el?"REWARDS!":"NEW LEVEL!","#ff0",20+2*C(8*Q)),el){Kt(be(1,0,ol**5));let e=200*(1-(1-(1-ol)**5)),t=W(e),l=1-(1-ol)**2;fl(0,0,0,zt[t%zt.length],l,0),el-1&&(fl(-110,0,0,zt[(t+1)%zt.length],l,0),fl(110,0,0,zt[(t+2)%zt.length],l,0)),N.save(),N.translate(0,120),N.scale(5,5),He(4*Q+100*Pe(ol)),N.restore(),.2>e&&(Ie(0,100,"TAP TO COLLECT","#0F0",13+C(4*Q)),fe()&&(Tl(zt[t%zt.length]),el-1&&(Tl(zt[(t+1)%zt.length]),Tl(zt[(t+2)%zt.length])),cl()))}else Kt(0),fl(-110,0,0,zt[0],1,1),fl(0,0,1,zt[1],1,1),fl(110,0,2,zt[2],1,1),Ie(0,110+te/2*(1-jt)**3,"CHOOSE AN UPGRADE","#699",13+C(4*Q));N.restore()})(),re.Escape&&wl(),ql>0){1>Vl&&(N.fillStyle="rgba(0,0,0,"+(1-ql**3)+")",N.fillRect(0,0,ee,te));let e=(We(Vl-1)*ql)**2;N.save(),N.translate(ee/2,e*te/2-120),Ie(0,0,"Cat Survivors",Ve,24+2*C(8*z)),N.restore(),C(8*z)>=0&&Ie(ee/2,te/2+100+(1-e)*te/2,"TAP TO START",Ve,15)}N.save(),N.translate(ee/2,te/2),Dl||(s.b>0?zl(We(s.b-1),"GAME OVER","#e50"):Ll&&zl(We((xl+=$)-5),"YOU WIN","#ff3")),N.restore(),X=0,re={},se={}},zl=(e,t,l,i=e**2,o=te*(1-i)/2)=>{e>0&&(Ie(0,-80-o,t,l,26+2*C(8*z)),N.fillStyle="#888",N.fillStyle=Re(qe[0],.2),N.fillRect(-80,130+o-20,160,30),Ie(0,130+o,"TAP TO CONTINUE",Ve,16+C(4*z)),((e,t=0,l=40,i=z)=>{["TIME: "+Ce(d),"KILLS: "+T,"LEVEL: "+(g+1)].map(o=>Ie(t,l+=20,o,"#ddd",e*(10+Math.sin(8*(i+=1)))))})(i),e>=1&&fe()&&Gl())},Ql=l=>{let i=(O(1,8*l.n)*O(1,8*(l.F-l.n)))**2;if(N.save(),17===l.A)N.translate(l.t,l.e*me-8),N.scale(i*(1+C(13*l.n)/8),i*(1+R(19*l.n)/8)/2),N.rotate(8*l.n),N.beginPath(),N.moveTo(-l.s,0),N.lineTo(l.s,0),N.moveTo(0,-l.s),N.lineTo(0,l.s),N.strokeStyle="#CFF",N.lineWidth=1,N.stroke();else if(14===l.A)N.translate(l.t,l.e*me-6),N.scale(1.5*Math.sign(l.l)*i*(1+C(13*l.n)/8),1.5*i*(1+R(19*l.n)/8)),N.rotate(8*l.n),N.beginPath(),N.moveTo(-l.s,-1),N.lineTo(l.s/2,0),N.lineTo(l.s/2,2),N.quadraticCurveTo(l.s/4,3,0,2),N.lineTo(0,0),N.closePath(),N.fillStyle="#C66",N.strokeStyle="#621",N.lineWidth=1,N.stroke(),N.fill();else if(13===l.A){let o=l.s/6;{let t=F()*L,a=i*F()**.5*(l.s/2),r=l.t+a*R(t),s=l.e*me+a*C(t);e.push({c:2,t:r,e:s-2*l.s,l:10*F()*(r-l.t),o:10*F()*(s-l.e*me),p:F()*L,P:6,a:0,k:0,S:.1+.3*F(),i:"#F30",h:o,w:1})}{let e=F()*L,i=F()**.5*(l.s/2),a=l.t+i*R(e),r=l.e*me+i*C(e);t.push({c:2,t:a,e:r-2*l.s,l:l.l+10*F()*(a-l.t),o:l.o+10*F()*(r-l.e*me),p:F()*L,P:9,a:0,k:0,S:.1+.2*F(),i:"#F90",h:o,w:1})}}else if(20===l.A){N.translate(l.t,l.e*me),N.scale(i*(1+C(13*l.n)/8),i*(1+R(19*l.n)/8)),N.lineWidth=1,N.beginPath(),N.strokeStyle="#EFF";let e=F()*l.q,t=F()*L,o=e*R(t),a=e*C(t)*me;N.moveTo(o,a);for(let e=1;e>=0;e-=.05)o+=20*(F()-.5),a-=4+10*F(),N.lineTo(o*e**8+2*(F()-.5),a);N.stroke()}else if(12===l.A)N.translate(l.t,l.e*me-2*l.s),N.scale(i*(1+C(13*l.n)/8),i*(1+R(19*l.n)/8)),N.beginPath(),N.arc(0,0,l.s,0,L),N.strokeStyle="#CFF",N.fillStyle="#CEF",N.fill(),N.stroke();else if(15===l.A)N.translate(l.t,l.e*me-2*l.s),N.scale(i*(1+C(13*l.n)/8),i*(1+R(19*l.n)/8)),N.rotate(w(l.o*me,l.l)),N.beginPath(),N.moveTo(-l.s,0),N.lineTo(l.s,0),N.strokeStyle="#CFF",N.stroke(),N.beginPath(),N.moveTo(-l.s/2,-1),N.lineTo(-l.s/2,1),N.strokeStyle="#6CC",N.stroke();else if(19===l.A){N.translate(l.t,l.e*me-2*l.s),N.scale(i,i),N.rotate(8*-l.n),N.fillStyle="#ccc";let e=.8*l.s;N.fillRect(-e,-e,2*e,2*e),N.rotate(A/8),N.fillRect(-e,-e,2*e,2*e),N.rotate(A/8),N.fillRect(-e,-e,2*e,2*e),N.rotate(A/8),N.fillRect(-e,-e,2*e,2*e),Ke(0,0,e,"#88a")}N.restore()},Zl=e=>{let t=e.s,l=e.b/e.B;N.translate(e.t,(e.e-e.s/2-20*C(O(1,2*e.b)*A))*me),N.rotate((1-(1-l)**3)*e.E),N.scale(t,t*(1-.2*O(1,2*e.b))),Ke(0,0,1,Oe(e.i,e.u,.5*(1-l)))},$l=e=>{if(e.b>=e.B)return;let t=e.b/e.B;if(N.save(),N.globalAlpha=1-t**4,0===e.O||1===e.O){let t=e.s;if(e.r){let l=C(e.G**3*A)/2,i=l*(s.t-e.t),o=l*(s.e-e.e),a=B(0,C(e.E));N.translate(e.t+i,(e.e+o)*me-e.s/2-a*e.s),N.scale(t*V(s.t-e.t),t*(.9+.2*a));let r=Ae(e.i,e.Q,e.p0*(.5+C(32*z)/2));N.fillStyle=Oe(r,e.u,.9),N.strokeStyle=Oe(r,e.u,.3),N.lineWidth=.1,1===e.O?(N.lineWidth=.2,N.beginPath(),N.arc(0,-a/3,1,0,L),N.stroke(),N.fill(),N.beginPath(),N.arc(0,-.8-a/2,.8,0,L),N.stroke(),N.fill(),N.beginPath(),N.moveTo(-.9,.2-a/3),N.lineTo(-1.5,-.4),N.stroke(),N.beginPath(),N.moveTo(1,-a/3),N.lineTo(1.5,-.5),N.stroke(),N.translate(0,-.6-a/3)):(N.beginPath(),N.arc(-.5,.7+a/2,.3,0,L),N.stroke(),N.fill(),N.beginPath(),N.arc(.7,.7+a/3,.3,0,L),N.stroke(),N.fill(),N.fillStyle=Oe(e.i,e.u),N.beginPath(),N.arc(0,0,1,0,L),N.stroke(),N.fill(),N.lineWidth=.2,N.strokeStyle="#432",N.beginPath(),N.arc(.1,.5,.3,A,0),N.stroke()),1===e.g0&&(N.fillStyle="#936",N.beginPath(),N.ellipse(0,-.5,1,.2,0,0,L),N.fill()),2===e.g0&&(N.save(),N.rotate(-.3-.1*R(e.E)),N.fillStyle=xe,N.beginPath(),N.ellipse(0,-1,1,.4,0,0,L),N.fillRect(-.4,-2,.8,1),N.fill(),N.fillStyle=Ve,N.fillRect(-.3,-1.9,.1,.7),N.restore(),N.fillStyle=Ve,N.fillRect(0,-.6,.7,.1)),Ke(0,-.5,.3,Ve),Ke(.7,-.7,.3,Ve),Ke(0,-.5,.2,xe),Ke(.7,-.7,.2,xe)}else Zl(e)}else if(2===e.O){let l=e.s;e.r?(N.translate(e.t,e.e*me+7*t*t),N.rotate((1-(1-t)**3)*e.E),N.scale(l*V(s.t-e.t),l*(.9+.1*C(2*e.E))),N.save(),N.rotate(w(s.e-e.e,s.t-e.t)/8),N.fillStyle=Oe(e.i,e.u),N.beginPath(),N.arc(0,0,1,A,0),N.ellipse(0,0,1,.2,0,0,A),N.arc(.5,-1,.4,0,L),N.closePath(),N.arc(.1,-1,.5,0,L),N.closePath(),N.moveTo(0,0),N.lineTo(-2,0),N.lineTo(0,-.5),N.closePath(),N.strokeStyle=Oe(e.i,e.u,.3),N.lineWidth=.2,N.stroke(),N.fill(),Ke(1,0,.1,"pink"),Ke(.6,-.4,.1,xe),N.restore()):Zl(e)}else if(5===e.O){N.translate(e.t-1,e.e*me+1);let t=8,l=t/2,i=l/2;N.scale(1,1+C(e.E+8*z)/20),N.fillStyle=Oe(e.i,e.u,.7),N.beginPath(),N.moveTo(-l,-t),N.lineTo(-l+i,-t-i),N.lineTo(l+i,-t-i),N.lineTo(l+i,0-i),N.lineTo(l,0),N.fill(),N.fillStyle=Oe(e.i,e.u),N.fillRect(-l,-t,t,t),N.fillStyle=Oe(e.i,.5),N.fillRect(-4,-3,6,1)}else if(3===e.O){N.translate(e.t,e.e*me-10+7*t*t),N.rotate((1-(1-t)**3)*e.E),Pe(e.u);let l=be(C(4*e.E),-1,t),i=e.s/3.5;N.scale(i,i),N.save(),N.rotate(l),N.fillStyle=Oe(e.i,e.u),N.beginPath(),N.ellipse(-2,0,2,1,0,0,L),N.fill(),N.restore(),N.save(),N.rotate(-l),N.fillStyle=Oe(e.i,e.u),N.beginPath(),N.ellipse(2,0,2,1,0,0,L),N.fill(),N.restore(),Ke(0,.5,2,Oe(e.i,e.u,.3));let o=Re(e.Q);Ke(-1,1+l/2,.75,o),Ke(1,1+l/2,.75,o)}else if(4===e.O){N.translate(e.t,e.e*me-10*C(t*A));let l=e.s/3.5,i=C(-2*e.E);N.scale(l*V(s.t-e.t),l),N.save(),Ke(5,i/2-(6-6*t),.75,xe),Ke(5,i/2-(6-6*t),.25,Ve),N.beginPath(),N.lineJoin="round",N.lineCap="round",N.lineWidth=1;let o=5-5*t;N.moveTo(6,-o+i),N.quadraticCurveTo(4,-o-1,4,-(o/2-1)-i/2),N.quadraticCurveTo(4,-(o/2-1)-i/2,4,-(o/2-1)-i);for(let t=0;7>t;++t){let l=t/7,i=(t+.5)/7,o=4-l*(10+C(e.E)),a=C(-2*e.E+2*L*l)*(1-l),r=4-i*(10+C(e.E)),s=C(-2*e.E+2*L*i)*(1-i);N.quadraticCurveTo(o,a,r,s)}N.strokeStyle=Oe(e.i,e.u),N.stroke(),N.lineWidth=.25,N.strokeStyle=Oe(e.Q,e.u),N.stroke(),Ke(6,-(6-6*t)+i,.75,xe),Ke(6,-(6-6*t)+i,.25,Ve),N.restore()}N.restore()},jl=()=>{let e=16*s.r/s.V;N.save(),N.translate(s.t-8,s.e*me+12),N.lineCap="round",N.lineWidth=3,N.strokeStyle="#222",N.beginPath(),N.moveTo(0,0),N.lineTo(16,0),N.stroke(),N.beginPath(),N.lineWidth=2,N.strokeStyle="#210",N.moveTo(0,0),N.lineTo(16,0),N.stroke(),e>0&&(N.beginPath(),N.lineWidth=2,N.strokeStyle="#C42",N.moveTo(0,0),N.lineTo(e,0),N.stroke(),N.beginPath(),N.lineWidth=2/3,N.strokeStyle="#F88",N.moveTo(0,-2/3),N.lineTo(e,-2/3),N.stroke()),N.restore()},ei=()=>{if(Dl)return;let e=ee-16,t=tl?e:e*(p/Lt());if(N.save(),N.translate(8,8-20*ql**2),N.beginPath(),N.lineCap="round",N.lineWidth=12,N.strokeStyle="#111",N.moveTo(0,0),N.lineTo(e,0),N.stroke(),N.beginPath(),N.lineWidth=10,N.strokeStyle="#042",N.moveTo(0,0),N.lineTo(e,0),N.stroke(),t>0){let e=Ae(2280516,Ae(16711935,255,.5+.5*C(16*Q)),jt);N.beginPath(),N.lineWidth=10,N.strokeStyle=Re(e),N.moveTo(0,0),N.lineTo(t,0),N.stroke(),N.beginPath(),N.lineWidth=10/3,N.strokeStyle=Re(qe[0],.3),N.moveTo(0,-10/3),N.lineTo(t,-10/3),N.stroke()}Ie(e/2,3,"LVL "+(g+1),Ve,8,1),Ie(e,16,"☠️"+T,Ve,8,2),g?Ie(e/2,16,Ce(d),Ve,10):(Ie(e/2,te/2-120,"Use WASD or Touch to Move",Ve,16+C(2*z+2)),Ie(e/2,te/2-80,"eat green bubbles to level up",Ve,16+C(2*z)),Ie(e/2,te/2-60,p/5+" of "+Lt()/5,Ve,12+C(z))),ti(8,20,0),ti(8,40,1),N.restore()},ti=(e,t,l,i=0,o=16)=>{for(let a of S)wt(a.c)==l&&(N.save(),N.translate(e+(o+4)*i,t),N.rotate(-.1*C(i+5*Q)),N.fillStyle=Ve,N.globalAlpha=.3+a.G/2,N.fillRect(-o/2,-o/2,o,o),N.globalAlpha=1,Ue(0,0,Yt[a.c],15),Ie(8,-4,a.s0+1,Ve,8),N.restore(),++i)},li=(e,t=s)=>{(e=B(0,e-qt(12)))>0&&(Fe(qt(11)/100)?Fe()?Me(t.t,t.e,"DODGE","#ccF"):Me(t.t,t.e,"MISS","#ccc"):(t.r=B(0,t.r-e),t.u=1,ve(1),Nl(30),Me(t.d,t.g,-e,"#F33"),Ft(6),ce(.1),t.r||(Ct(),Ft(5),ce(1))))},ii=(e,l,i=1)=>{e.r=B(0,e.r-l),e.u=1,Ft(4),Ft(3);let o=(l-10)/20;if(Me(e.t,e.e,0|l,Oe(Ae(16776960,16711680,.5+.5*C(o*Math.PI/2)),We(1-o)),.5+o/4),((e,l)=>{for(let i=0;10>i;++i){let i=F()**.5*100,o=F()*L;t.push({c:1,t:e.t,e:e.e*me-e.s,l:i*R(o),o:i*C(o)*me,p:0,k:1,a:0,S:.05+.3*F(),i:l,P:1,h:1,w:1})}})(e,5===e.O?"#ccc":"#930"),Fe()||!e.r){0>=e.i0&&(e.E=0),e.i0=1,e.l=e.t-s.t,e.o=e.e-s.e;let t=D(e.l,e.o);if(t>0){let l=500*i*F()/e.s/t;e.l*=l,e.o*=l}}if(!e.r){if(5===e.O){Fe(.3)?Fe()?Je(e.t,e.e,2,1):Je(e.t,e.e,3,1):Fe(.8)&&s.V>s.r?Je(e.t,e.e,1,e.o0):Je(e.t,e.e,0,e.o0);for(let l=0;10>l;++l){let l=F()**.5*100,i=F()*L;t.push({c:2,t:e.t,e:e.e*me-.25*e.s,l:l*R(i),o:l*C(i)*me,p:F()*L,a:0,S:.05+.3*F(),i:"#fe9",P:1,k:0,h:1,w:1})}}else 0>e.o0?Je(e.t,e.e,4,1):.9>F()&&Je(e.t,e.e,0,e.o0),++T;e.E=V(e.l)*A*(4+8*F());for(let l=0;30>l;++l){let l=F()*L,i=100*F();t.push({c:2,t:e.t,e:e.e*me-6,l:i*R(l),o:i*C(l)*me-20,p:F()*L,P:4,a:0,k:0,S:.3+.4*F(),i:Oe(e.i,0,1),h:.5*F()+.2,w:1})}Ft(5)}},oi=()=>{f.sort((e,t)=>t.Z-e.Z);for(let l=0;S.length>l;++l){let i=S[l];if(i){let l=i.c;if(!wt(l)){let o=Bt(i,4)/100,a=Bt(i,1)*(1+.02*g)|0,n=Bt(i,3)/10,c=Bt(i,2)/10,h=Bt(i,0);if(i.G-=Z*o,0>i.G&&(i.f=h,i.G=1),i.d0+=Z,i.T-=Z*Bt(i,5),22===l){let e=f[B(0,f.length-i.f)];e&&40*n>e.Z&&0>i.T&&i.f&&(ii(e,a),t.push({c:0,t:e.t,e:e.e*me-.25*e.s,l:0,o:0,p:F()*L,a:0,S:.2,i:"#fee",P:1,k:0,h:1,w:1}),--i.f,i.T=1)}else if(17===l){if(0>i.T&&i.f){let e=5*n,t=F()*L;r.push({c:3,t:s.t+(s.s+e)*R(t),e:s.e+(s.s+e)*C(t),l:s.l+200*c*R(t),o:s.o+200*c*C(t),s:e,q:e,D:a,n:0,F:3,U:0,M:.3,H:100,I:100,W:1,Y:1,A:17,C:0}),Ft(8),--i.f,i.T=1}}else if(14===l){if(0>i.T&&i.f){let e=5*n,t=-A/4-F()*A/2;r.push({c:3,t:s.t+(s.s+e)*R(t),e:s.e+(s.s+e)*C(t),l:s.l+200*c*R(t),o:s.o+200*c*C(t),s:e,q:e,D:a,n:0,F:3,U:0,M:.3,H:100,I:100,W:1,Y:1,A:14,C:0}),Ft(8),--i.f,i.T=1}}else if(18===l){let t=20*n;if(i.d0>.01){i.d0=0;for(let l=0;i.s0+1>l;++l){let l=F()**.2*t,i=F()*L,o=l*R(i),a=l*C(i);e.push({c:2,t:s.t+o,e:(s.e+a)*me,l:0,o:-10*F(),p:0,a:0,S:.5+.5*F(),i:"#c96",P:0,h:.2*F()+.2,w:1,k:0})}}0>i.T&&i.f&&(r.push({c:3,t:s.t,e:s.e,l:0,o:0,s:t,q:t,D:a,n:0,F:.01,U:0,M:0,H:100,I:1,W:1,Y:0,A:18,$:{s:0,a0:0,P0:0},C:0}),i.f=0,i.T=0)}else if(21===l){let t=5*n;if(0>i.T&&i.f&&D(s.l,s.o)>=1){let l=s.t+10*n*(F()-.5),o=s.e+10*n*(F()-.5);e.push({c:2,t:l,e:o*me,l:0,o:0,p:0,a:0,S:3,i:"#012",k:0,P:0,h:2,w:me}),r.push({c:3,t:l,e:o,l:0,o:0,s:t,q:t,D:a,n:0,F:1.5,U:0,M:.3,H:100,I:100,W:1,Y:0,A:21,C:0,x0:0}),i.T=1}}else if(12===l){let e=2*n,t=f[B(0,f.length-i.f)];t&&0>i.T&&i.f&&(r.push({c:3,t:s.t+5*(t.t-s.t)/t.Z,e:s.e+5*(t.e-s.e)/t.Z,l:100*c*(t.t-s.t)/t.Z,o:100*c*(t.e-s.e)/t.Z,s:e,q:e,D:a,n:0,F:3,U:0,M:10,H:1,I:1,W:1,Y:1,A:12,C:0}),Ft(5),--i.f,i.T=1)}else if(20===l){if(0>i.T&&i.f){let t=20*n,l=he+(ge-he)*F(),o=(ue+(pe-ue)*F())/me,f=(c-1)*(s.t-l),h=(c-1)*(s.e-o);e.push({c:2,t:l,e:o*me,l:f,o:h,p:0,a:0,S:1,i:"rgba(200,255,255,0.1)",P:0,k:0,h:t/3,w:me}),r.push({c:3,t:l,e:o,l:f,o:h,s:t,q:t,D:a,n:0,F:.5,U:0,M:.5,H:100,I:100,W:0,Y:1,A:20,C:0,x0:0}),--i.f,i.T=1,Ft(7)}}else if(15===l){if(0>i.T&&i.f){let e=2*n,t=.9+.1*F(),l=w(s.g-s.J,s.d-s.X);r.push({c:3,t:s.t+10*R(l)+s.s*(.5-F()),e:s.e+10*C(l)+s.s*(.5-F()),l:100*t*c*R(l),o:100*t*c*C(l),s:e,q:e,D:a,n:0,F:3,U:0,M:10,H:1,I:1,W:1,Y:1,A:15,C:0}),--i.f,i.T=1,Ft(5)}}else if(13===l){if(0>i.T&&i.f){let e=f[F()*f.length|0];if(e){let t=2*n;for(let l=0;i.f>l;++l){let o=w(e.e-s.e,e.t-s.t)+.1*(l-i.f/2),n=50;r.push({c:3,t:s.t+5*R(o),e:s.e+5*C(o),l:n*c*R(o),o:n*c*C(o),s:t,q:t,D:a,n:0,F:3,U:0,M:.5,H:1,I:1,W:1,Y:1,A:13,C:0})}Ft(5),i.f=0,i.T=1}}}else if(16===l){if(0>i.T&&i.f){let e=130*c,l=10*n,o=((h-i.f)%2?1:-1)*V(s.X-s.d);r.push({c:3,t:s.t+o*l,e:s.e,l:s.l+o*e,o:s.o,s:l,q:l,D:a,n:0,F:.3,U:0,M:.5,H:1e3,I:1e3,W:0,Y:0,A:16,C:0}),Ft(8),--i.f,i.T=1,t.push({c:3,t:s.t+1.5*o*l,e:s.e*me,l:s.l+o*e,o:s.o+0,p:0,k:1,a:0,h:l/3,w:1,S:.5,i:"rgba(255,255,255,0.5)",P:2})}}else if(19===l&&0>i.T){let e=4*n,t=50*n,l=0,o=1,f=L/i.f;for(;i.f>0;)r.push({c:3,t:s.t,e:s.e,l:0,o:0,s:e,q:e,D:a,n:0,F:o/c,U:0,M:.1,H:10,I:999,W:1,Y:1,A:19,$:{s:t,a0:l,P0:c*L/o},C:0}),--i.f,l+=f;i.T=1}}}}},ai=()=>{for(let e of a)ii(e,e.r);Ll=1,y=(he+s.d)/2,b=s.g+50,m=0,n.d=he,n.g=s.g,Ct(),pl()},ri=(e=Oe(qe[1],0,.85))=>{for(let t of c)t.W&&Ne(t.t,t.e,t.s*t.W,e)},si=(l=n,i=m)=>{if((m=+(2>D(b-l.g,y-l.d-10)))!=i&&(setTimeout(()=>Ft(0),100),setTimeout(()=>Ft(1),1300)),m)for(l.z=.1,s.z=.1,Ol+=100*$;Ol>0;){e.push({t:be(he,ge,F()),e:be(ue-50,pe,F()),p:F()*L,P:2,a:0,k:0,S:1+.5*F(),i:Ve,c:4,T0:8*(F()-.5),l:0,o:100*F(),h:1+F(),w:1}),--Ol;for(let e=0;16>e;++e){let l=6*-xl%A,i=48*(1&e?-1:1)*C(l)**3+y,o=-3*(13*R(l)-5*R(2*l)-2*R(3*l)-R(4*l))+b*me;t.push({t:i+5*(F()-.5),e:o+5*(F()-.5),p:0,P:6,a:0,k:0,S:F(),i:Fe()?"pink":Ve,c:2,l:0,o:-100*F(),h:F(),w:1})}}},ni=()=>{for(let e=0;a.length>e;++e){let t=a[e];for(let l=e+1;a.length>l;++l)Jl(t,a[l]);if(Jl(t,s),Hl(t),t.r){let e=s.t-t.t,l=s.e-t.e,i=D(e,l);if(t.Z=i,t.G=B(0,t.G-2*Z),s.r>0?(Se(t.t,t.e*me,4*-t.s)&&f.push(t),s.b0+t.s>=i&&t.D>0&&0>=t.G&&(t.G=1,li(t.D))):(e*=-.5,l*=-.5),t.E+=8*Z,t.i0=ye(t.i0,0,2*Z),t.i0>0)t.l*=q(-5*Z),t.o*=q(-5*Z);else if(i>0){let o=(0===t.O||1===t.O?B(0,C(t.E)):1)*t.R;t.l=o*e/i,t.o=o*l/i}}else t.l*=q(-5*Z),t.o*=q(-5*Z),t.b+=Z,t.W=1-O(t.b/t.B,1),t.b>=t.B&&a.splice(e--,1);t.t+=t.l*Z,t.e+=t.o*Z,Se(t.t,t.e*me,4*t.s)&&c.push(t)}},fi=()=>{for(let e=0;r.length>e;++e){let t=r[e];if(t.t+=t.l*Z,t.e+=t.o*Z,t.$)t.$.a0+=Z*t.$.P0,t.t=t.$.s*R(t.$.a0)+s.t,t.e=t.$.s*C(t.$.a0)+s.e,t.l=s.l,t.o=s.o;else if(17===t.A){let e=s.t-t.t,l=s.e-t.e,i=D(e,l);t.l=q(-Z)*(t.l+Z*(200*e/i)),t.o=q(-Z)*(t.o+Z*(200*l/i)),s.s+t.s>i&&(t.n=t.F)}else 14===t.A&&(t.l*=q(-Z),t.o*=q(-Z),t.o+=200*Z);if(t.n+=Z,t.U-=Z,0>=t.U){let e=!1;for(let l=0;a.length>l;++l){let i=a[l];if(i.r>0&&D(t.t-i.t,t.e-i.e)<=t.q+i.s){if(ii(i,t.D,t.x0),! --t.H){t.n=t.F;break}e=!0}}e&&(--t.I,t.I||(t.n=t.F),t.U=t.M)}t.F>t.n?t.Y&&Se(t.t,t.e*me,4*t.s)&&c.push(t):r.splice(e--,1)}};G.gain.value=1/3,G.connect(I.destination),((e=()=>"s"==I.state[0]&&I.resume(),t=(e,t=U.clientWidth,l=U.clientHeight,i=devicePixelRatio)=>{H.style.width=t+"px",H.style.height=l+"px",H.width=t*=i,H.height=l*=i,le=O(t,l)/320,ee=t/le,te=l/le})=>{N.imageSmoothingEnabled=!1,document.onkeydown=(e,t=e.code)=>re[t]=ae[t]=1,document.onkeyup=(t,l=t.code)=>{e(),ae[l]=re[l]=0,se[l]=1},H.onpointerdown=(t,l=O(U.clientWidth,U.clientHeight)/320)=>{e(),t.isPrimary&&(K=t.x/l,Y=t.y/l,J=X=1,_=+("mouse"===t.pointerType))},H.onpointermove=(e,t=O(U.clientWidth,U.clientHeight)/320)=>{e.isPrimary&&(K=e.x/t,Y=e.y/t)},H.onpointerup=t=>{e(),t.isPrimary&&(J=0)},onresize=t,t()})(),et.gain.value=0,lt.gain.value=.7,tt.type="lowpass",tt.frequency.value=500,et.connect(I.destination),tt.connect(et),lt.connect(et),Gl(),onblur=wl,requestAnimationFrame(_l)</script>