<!doctype html><title>Game</title><meta content="width=device-width" name=viewport><body style=overflow:hidden;background-color:#000><script>const da=(t,i=!0)=>{let h=null;return i&&(h=document.createElement("div"),h.setAttribute("style","position: absolute; top: 0; left: 0; z-index: -1;")),(i=document.createElement("canvas")).setAttribute("style","position: absolute; top: 0; left: 0; z-index: -1;image-rendering: optimizeSpeed;image-rendering: pixelated;image-rendering: -moz-crisp-edges;"),i.width=160,i.height=t,null!=h&&(h.appendChild(i),document.body.appendChild(h)),(t=i.getContext("2d")).imageSmoothingEnabled=!1,[i,t]},ea=(t,i,h,s=1)=>"rgba("+String(0|t)+","+String(0|i)+","+String(0|h)+","+String(Math.min(1,Math.max(s,0)))+")";function fa(t){var i=window.innerWidth,h=window.innerHeight;let s=Math.min(i/t.width,h/t.height);1<=s&&(s=Math.floor(s));let e=t.g.style;e.width=String(s*t.width|0)+"px",e.height=String(s*t.height|0)+"px",e.left=String(i/2-s*t.width/2|0)+"px",e.top=String(h/2-s*t.height/2|0)+"px"}function q(t,i,h,s,e,a,o,n,r=0){if(null==i||0>=e||0>=a)return t;let l=t.T;return h|=0,s|=0,e|=0,a|=0,o|=0,n|=0,0!=(r|=0)&&l.save(),0!=(1&r)&&(l.translate(e,0),l.scale(-1,1),o*=-1),0!=(2&r)&&(l.translate(0,a),l.scale(1,-1),n*=-1),l.drawImage(i,h,s,e,a,o,n,e,a),0!=r&&l.restore(),t}function t(t,i,h,s,e,a=0,o=0,n=0){if(null==i)return t;let r=i.width/16|0,l=s;1==n?l=s-=h.length*(r+a)/2:2==n&&(l=s-=h.length*(r+a));for(let g=0;g<h.length;++g)10==(n=h.charCodeAt(g))?(l=s,e+=r+o):(q(t,i,n%16*r,(n/16|0)*r,r,r,l,e),l+=r+a);return t}function u(t,i,h,s,e){if(2>s||2>e)return t;i|=0,h|=0,s/=2,e/=2;let a,o=Math.round(e);for(let n=h-o;n<=h+o;++n)a=Math.round(s*Math.sqrt(1-(n-h)*(n-h)/(e*e))),t.fillRect(i-a,n,2*a,1);return t}function ha(t,i,h=t.width/2,s=t.height/2){var e=0|Math.max(0,s-i);let a=0|Math.min(t.height,s+i);0<e&&t.fillRect(0,0,t.width,e),a<t.height&&t.fillRect(0,a,t.width,t.height-a);for(let n=e;n<a;++n){var o=n-s;Math.abs(o)>=i?t.fillRect(0,n,t.width,1):(e=Math.round(h-Math.sqrt(i*i-o*o)),o=Math.round(h+Math.sqrt(i*i-o*o)),0<e&&t.fillRect(0,n,e,1),o<t.width&&t.fillRect(o,n,t.width-e,1))}}class ia{constructor(t,i,h){this.clear=(t=255,i=t,h=i)=>this.setFillColor(t,i,h).fillRect(),this.h=()=>this.g,this.u=t=>this.m.u(t),[this.g,this.T]=da(t,i),i&&(window.addEventListener("resize",(()=>fa(this))),fa(this)),this.m=h}get width(){return this.g.width}get height(){return this.g.height}setFillColor(t=255,i=t,h=i,s=1){return this.T.fillStyle=ea(t,i,h,s),this}fillRect(t=0,i=0,h=this.width,s=this.height){return this.T.fillRect(0|t,0|i,0|h,0|s),this}}const ja=(t,i,h=t.height)=>{let s,e=t.getContext("2d"),a=e.getImageData(0,0,t.width,t.height),o=Uint8ClampedArray.from(a.data);for(let e=i+1;e<h-1;++e){i=e*t.width+1;for(let h=1;h<t.width-1;++h,++i)if(255==o[4*i+3])for(let i=e-1;i<=e+1;++i)for(let e=h-1;e<=h+1;++e)s=i*t.width+e,0==o[4*s+3]&&(a.data[4*s]=0,a.data[4*s+1]=0,a.data[4*s+2]=0,a.data[4*s+3]=255)}e.putImageData(a,0,0)},ka=(t,i,h,s)=>{let e=document.createElement("img"),a=document.createElement("canvas");return e.onload=()=>{a.width=e.width,a.height=e.height;let t=a.getContext("2d");t.drawImage(e,0,0);var o=a.width,n=a.height;let r=t.getImageData(0,0,o,n),l=o/8|0;n=n/8|0;for(let t=0;t<n;++t)for(let s=0;s<l;++s){var g=void 0,d=void 0,u=r,c=o,f=8*s;d=8*t;var w=8*(s+1),b=8*(t+1),m=i,p=h[t*l+s];for(let t=d;t<b;++t)for(let i=f;i<w;++i){var M=4*(d=t*c+i);0>(g=p[g=[0,1,2,3][(((g=u.data)[M]/85|0)+(g[M+1]/85|0)+(g[M+2]/85|0))/3|0]])?u.data[4*d+3]=0:(u.data[4*d]=m[3*g],u.data[4*d+1]=m[3*g+1],u.data[4*d+2]=m[3*g+2],u.data[4*d+3]=255)}}t.putImageData(r,0,0),s()},e.src=t,a},la=(t,i)=>(i(t=new ia(160,!1,t)),t.h());function ma(t,i,h){t.g.set(i,h)}function na(t,i,h,s,e){++t.i,ma(t,i,ka(h,s,e,(()=>{++t.loaded})))}function w(t,i){return t.D.get(i)}class oa{constructor(){this.i=this.loaded=0,this.h=()=>this.loaded>=this.i,this.g=new Map,this.D=new Map}u(t){return this.g.get(t)}}class pa{constructor(t,i,h=1,s="square",e=2,a=.5){this.g=t,this.gain=t.createGain(),this.h=i.map((t=>Array.from(t))),this.i=h,this.type=s,this.l=e,this.j=a}play(t){let i=this.g.currentTime,h=0,s=this.g.createOscillator();s.type=this.type,t*=this.i;try{"function"==typeof this.gain.gain.cancelAndHoldAtTime&&this.gain.gain.cancelAndHoldAtTime(i)}catch(t){}s.frequency.setValueAtTime(this.h[0][0],i),this.gain.gain.setValueAtTime(Math.min(1,Math.max(t,.01)),i),h=0;for(let t of this.h){switch(this.l){case 0:s.frequency.setValueAtTime(t[0],i+h);break;case 1:s.frequency.linearRampToValueAtTime(t[0],i+h);break;case 2:s.frequency.exponentialRampToValueAtTime(t[0],i+h)}h+=1/60*t[1]}this.gain.gain.exponentialRampToValueAtTime(t*this.j,i+h),s.connect(this.gain).connect(this.g.destination),s.start(i),s.stop(i+h),s.onended=()=>{s.disconnect()}}}function x(t,i,h=1){if(t.g&&null!=i)try{i.play(h*t.ea)}catch(i){t.h||(console.log("Audio error: "+i),t.h=!0)}}class qa{constructor(){this.h=!1,this.G=(t,i=1,h="square",s=2,e=.5)=>new pa(this.i,t,i,h,s,e),this.U=()=>"AUDIO: "+["OFF","ON "][Number(this.g)],this.i=new AudioContext,this.g=!1,this.ea=1}toggle(t=!this.g){return this.g=t}}const ra=[[8,16],[68,28],[84,8],[16,56],[56,72],[112,16],[32,6]],sa=[[84,56],[42,36],[136,72]],ta=(t,i,h,s=1)=>{const e=[255],a=[255,170,255];let o,n;for(let r=h-s;r<=h+s;++r)n=s-Math.abs(r-h),o=i-Math.ceil(n/2),1<s&&r==h&&--o,t.setFillColor(...a).fillRect(o,r,2*n+1,1),0<n&&t.setFillColor(...e).fillRect(o+1,r,2*n-1,1)},ua=t=>la(t,(t=>{u(u(u(t.clear(170,85,255).setFillColor(255,170,85),128,40,44,44).setFillColor(255,255,170),126,38,42,42).setFillColor(170,85,255),118,30,40,40),t.setFillColor(85,0,170);for(let h=0;160>h;++h){var i=Math;let s=h/160;i=92+i.round.call(i,12*(1-(Math.abs(Math.cos(s*Math.PI*6))-8*Math.abs(s%.4-.2)))),t.fillRect(h,-8+i,1,160-i+1)}for(let i of ra)ta(t,i[0],8+i[1],1);for(let i of sa)ta(t,i[0],8+i[1],2)}));function va(t,i,h){i?1!==t.g.get(h)&&(t.g.set(h,3),t.i=!0):0!==t.g.get(h)&&t.g.set(h,2)}function y(t,i,h,s){return t.actions.set(i,[h,s]),t.h.push(h),void 0!==s&&t.h.push(s),t}function wa(t,i){return null==(t=t.g.get(i))?0:t}function z(t,i){if(void 0===(i=t.actions.get(i)))return 0;let h=wa(t,i[0]);return 0==h&&void 0!==i[1]?wa(t,i[1]):h}class xa{constructor(){this.i=!1,this.aa=()=>this.i,this.g=new Map,this.h=[],this.actions=new Map,window.addEventListener("keydown",(t=>{va(this,!0,t.code),this.h.includes(t.code)&&t.preventDefault()})),window.addEventListener("keyup",(t=>{va(this,!1,t.code),this.h.includes(t.code)&&t.preventDefault()})),window.addEventListener("contextmenu",(t=>t.preventDefault())),window.addEventListener("mousemove",(()=>window.focus())),window.addEventListener("mousedown",(()=>window.focus()))}update(){for(let t of this.g.keys())3===this.g.get(t)?this.g.set(t,1):2===this.g.get(t)&&this.g.set(t,0);this.i=!1}}class ya{constructor(){this.g=1,this.h=!1,this.j=0,this.active=!1,this.speed=1,this.i=0,this.l=()=>{},this.isActive=()=>this.active}A(t,i,h,s,e=0){this.h=t,this.speed=h,this.g=1,this.l=s,this.j=i,this.i=e,this.active=!0}update(t){this.active&&0>=(this.g-=this.speed*t.step)&&((this.h=!this.h)?(this.active=!1,this.g=0):(this.g+=1,this.l(t)))}s(t){if(this.active&&0!=this.j){var i=this.g;switch(this.h&&(i=1-i),this.j){case 1:0<this.i&&(i=Math.round(i*this.i)/this.i),t.setFillColor(0,0,0,i).fillRect(0,0,t.width,t.height);break;case 2:i=(1-i)*Math.max(Math.hypot(t.width/2,t.height/2),Math.hypot(t.width-t.width/2,t.height/2),Math.hypot(t.width-t.width/2,t.height-t.height/2),Math.hypot(t.width/2,t.height-t.height/2)),ha(t.setFillColor(0),i)}}}H(){this.active=!1}}class za{constructor(t,i,h,s,e,a){this.step=1,this.keyboard=t,this.audio=i,this.g=h,this.transition=s,this.m=e,this.h=a}get fa(){return this.g.width}get ba(){return this.g.height}F(t,i=0){this.h.F(t,i)}}function Aa(t,i){const h=16.66667*t.i.step;for(t.h+=i-t.o,t.h=Math.min(5*h,t.h),t.o=i,i=t.h/h|0;0<i--;)null!=t.g&&t.m.h()&&t.g.update(t.i),t.keyboard.update(),t.transition.update(t.i),t.h-=h;t.m.h()?(null!=t.g&&t.g.L(t.j),t.transition.s(t.j)):t.j.clear(0),window.requestAnimationFrame((i=>Aa(t,i)))}function Ba(t=(()=>{})){var i=A(A(A(A(A(new Ca,"game",new Da),"titlescreen",new Ea),"story",new Fa),"intro",new Ga),"start",new Ha);i.g=i.l.get("start"),null!=i.g&&i.g.I(null,i.i),t(i.i),Aa(i,0)}function A(t,i,h){return t.l.set(i,h),t}class Ca{constructor(){this.g=void 0,this.o=this.h=0,this.m=new oa,this.j=new ia(144,!0,this.m),this.keyboard=new xa,this.audio=new qa,this.transition=new ya,this.i=new za(this.keyboard,this.audio,this.j,this.transition,this.m,this),this.l=new Map}F(t,i=0){let h=this.l.get(t);if(null==h)throw"No scene with name: "+t;h.I(i,this.i),this.g=h}}const B=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,4,0,0,0,0,0,0,0,0,1,1,0,4,0,0,0,0,0,0,1,1,1,3,3,1,6,6,0,7,1,1,1,7,7,1,1,1,7],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,1,5,0,0,4,0,0,0,1,1,1,1,3,3,1,1,3,3,1,1,1,1,7,7,1,1,7,7,1,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,4,1,0,0,0,0,0,0,0,0,13,0,0,10,0,0,1,0,0,0,0,0,0,1,2,1,1,0,0,0,0,0,0,0,2,0,0,0,0,1,6,0,12,4,2,0,5,0,11,1,1,3,3,1,1,1,1,3,1,1,1,7,7,1,1,1,1,7,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,0,0,10,0,4,1,0,0,0,1,12,1,1,2,1,1,11,0,0,0,0,0,0,2,0,0,1,1,0,0,10,0,0,2,4,0,1,1,3,3,3,1,1,1,1,1,1,1,1,7,7,1,1,1,1,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,10,4,0,0,0,0,0,0,1,2,1,4,0,0,0,0,0,0,0,2,0,4,0,0,0,0,0,0,11,2,10,4,0,0,0,0,0,0,1,1,13,13,0,0,0,0,0,6,1,1,1,1,7,7,7,1,0,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,0,0,13,0,0,0,0,0,4,0,0,0,13,0,0,0,0,0,4,0,0,0,13,0,0,0,0,0,4,0,0,0,13,0,0,0,0,1,1,9,9,9,1,0,10,0,0,1,1,0,0,0,0,2,1,0,0,1,5,13,0,0,0,2,0,0,0,1,1,12,12,0,0,2,0,11,0,1,1,7,7,1,1,1,3,1,3],[0,5,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,5,0,4,4,4,4,2,1,9,9,1,2,1,1,1,1,2,13,0,0,1,2,0,0,0,0,1,1,1,2,1,1,9,9,9,1,11,0,0,2,0,0,10,0,0,0,1,3,3,1,1,1,1,1,7,1],[0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,4,1,0,0,0,0,0,4,1,0,13,1,0,1,1,0,1,1,1,0,0,1,11,0,0,0,1,1,0,0,12,1,1,0,0,2,1,0,0,0,0,1,0,0,0,2,4,10,11,1,13,1,9,9,1,1,1,9,1,1,7,1,7,7,7,7,7,7,7,7],[0,0,0,0,0,0,0,0,0,0,0,4,11,1,0,0,0,5,0,0,6,1,1,1,0,4,1,1,0,0,1,1,0,1,13,9,1,0,0,1,4,0,0,0,6,0,0,0,2,1,4,0,0,0,1,0,0,0,2,0,1,1,12,0,0,0,0,0,2,0,1,1,0,1,0,0,2,1,1,12,1,1,7,1,1,1,1,1,1,7],[0,0,0,0,4,0,0,0,0,0,0,5,0,0,4,0,0,0,0,0,0,1,0,0,4,0,0,10,0,0,0,13,0,0,4,0,0,1,13,2,0,13,0,0,4,0,0,0,0,2,0,13,0,0,4,0,0,0,0,2,0,13,0,0,4,0,0,0,0,1,0,13,0,0,4,0,11,0,0,0,6,1,7,1,1,7,1,7,1,7],[4,0,0,0,0,0,0,0,0,4,1,4,0,0,0,0,0,0,4,1,0,1,4,0,0,0,0,4,1,0,0,0,1,4,0,0,4,1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,5,1,7,1,9,9,9,9,1,7,1,1,1,1,7,7,7,7,1,1,1],[0,0,0,0,0,0,0,0,13,4,0,0,4,0,0,0,4,0,13,13,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,0,0,0,0,6,1,1,0,1,3,1,2,1,9,1,0,0,0,0,0,0,2,0,0,0,0,11,5,0,11,5,2,0,11,1,1,1,1,3,1,1,1,1,1,1],[0,0,0,0,10,0,0,5,0,0,5,5,0,0,10,0,0,1,1,2,1,1,2,0,10,0,0,0,0,2,0,1,2,9,1,1,0,1,1,1,0,0,2,10,12,0,0,0,0,1,11,1,1,1,1,7,7,1,2,1,1,1,1,1,1,1,1,1,2,1,0,0,4,4,4,4,4,4,2,1,7,1,1,1,1,1,1,1,1,1]];class C{constructor(t,i){this.da=()=>this.text,this.ia=t=>{this.g(t)},this.text=t,this.g=i}clone(){return new C(this.text,this.g)}}class Ia{constructor(t,i=!1){this.g=0,this.active=!1,this.isActive=()=>this.active,this.buttons=t.map(((i,h)=>t[h].clone())),this.h=Math.max(...this.buttons.map((t=>t.da().length))),this.active=i}A(t=this.g){this.g=t%this.buttons.length,this.active=!0}update(t){if(this.active){var i=this.g;3==z(t.keyboard,"up")?--this.g:3==z(t.keyboard,"down")&&++this.g,i!=this.g&&(i=this.buttons.length,this.g=(this.g%i+i)%i,x(t.audio,w(t.m,"choose"),.6)),null==(i=this.buttons[this.g])||3!=z(t.keyboard,"select")&&3!=z(t.keyboard,"start")||(i.ia(t),x(t.audio,w(t.m,"select"),.6))}}s(i,h=0,s=0,e=!0){if(this.active){var a=8*this.h,o=10*this.buttons.length;for(h=h+i.width/2-a/2,s=s+i.height/2-o/2,e&&(i.setFillColor(0,0,0,.67),i.fillRect(h-4,s-4,a+8,o+8)),a=0;a<this.buttons.length;++a)e=i.u(a==this.g?"fontYellow":"font"),t(i,e,this.buttons[a].da(),h,s+10*a,0,0)}}H(){this.active=!1}}class D{constructor(t=0,i=0){this.clone=()=>new D(this.x,this.y),this.x=t,this.y=i}}class E{constructor(t=255,i=t,h=i,s=1){this.clone=()=>new E(this.g,this.h,this.b,this.a),this.g=t,this.h=i,this.b=h,this.a=s}}function Ja(t,i,h,s,e){t.g=new D(i,h),t.speed=new D(s,e),t.target.x=t.speed.x,t.target.y=4,t.B=!0}class F{constructor(){this.i=8,this.v=this.B=!1,this.ha=()=>this.B,this.g=new D,this.speed=new D,this.target=new D,this.h=new D(1,1)}l(){}update(t){if(this.B){var i=this.speed.x,h=this.target.x,s=this.h.x*t.step;this.speed.x=i<h?Math.min(h,i+s):Math.max(h,i-s),i=this.speed.y,h=this.target.y,s=this.h.y*t.step,this.speed.y=i<h?Math.min(h,i+s):Math.max(h,i-s),this.g.x+=this.speed.x*t.step,this.g.y+=this.speed.y*t.step,this.l(t),this.v?this.g.y-this.i>=t.ba&&(this.g.y-=t.ba+this.i):(0>this.g.x+this.i||this.g.x-this.i>=t.fa||0>this.g.y+this.i||this.g.y-this.i>=t.ba)&&(this.B=!1)}}s(){}}class Ka extends F{constructor(){super(),this.o=0,this.h.x=0,this.h.y=.1,this.i=16,this.j=new E}l(t){this.o=(this.o+2*Math.PI/30*t.step)%(2*Math.PI)}s(t){if(this.B){var i=Math.round(this.g.x),h=Math.round(this.g.y),s=Math.round(7+2*Math.sin(this.o));t=t.setFillColor(this.j.g,this.j.h,this.j.b,this.j.a);let e,a=-Math.round(Math.cos(2*-Math.PI/3)*s),o=0,n=a/Math.abs(Math.round(Math.sin(2*-Math.PI/3)*s));for(let r=-s;r<=a;++r,o+=n)e=Math.round(o),t.fillRect(i-e,h+r,2*e,1),t.fillRect(i-e,h+s-2*a-r,2*e,1)}}M(t,i,h,s,e){Ja(this,t,i,h,s),this.j=e.clone()}}class Na extends F{constructor(){super(),this.j=0,this.h.x=0,this.h.y=.1,this.i=8}s(t,i){this.B&&q(t,i,80+this.j%2*8,8*Math.floor(this.j/2),8,8,Math.round(this.g.x)-4,Math.round(this.g.y)-4)}M(t,i,h,s,e){Ja(this,t,i,h,s),this.j=e}}class Oa extends F{constructor(){super(),this.o=this.j=0,this.h.x=.1,this.h.y=.1,this.i=8}l(t){6<=(this.j+=t.step)&&(this.j%=6,this.o=(this.o+1)%2)}s(t,i){this.B&&q(t,i,96,32+8*this.o,16,8,Math.round(this.g.x)-4,Math.round(this.g.y)-4)}M(t,i,h,s){Ja(this,t,i,h,s),this.speed.x=0,this.target.y*=-1}}const Pa=(t,i)=>{let h=null;for(let i of t)if(!i.ha()){h=i;break}return null==h&&(h=new i.prototype.constructor,t.push(h)),h};function K(t,i,h,s){return 0>h||0>s||h>=t.width||s>=t.height?1:t.g[i][s*t.width+h]}function L(t,i,h,s,e){0>h||0>s||h>=t.width||s>=t.height||(t.g[i][s*t.width+h]=e)}function M(t,i,h){let s=0;for(let e=0;e<t.height;++e)for(let a=0;a<t.width;++a)h(a,e,t.g[i][s++])}class N{constructor(t,i,h,s,e,a=!0){this.j=()=>this.h,this.l=()=>this.i,this.clone=()=>new N(this.g[0],this.g[1],this.width,this.height,this.h,this.i),this.g=Array(2),this.g[0]=Array.from(t),this.g[1]=Array.from(i),this.h=e,this.i=a,this.width=h,this.height=s}}function O(t,i,h=0,s=0){h=Math.round(t.g.x-t.size/2)+h,s=Math.round(t.g.y-t.size/2)+s,i.setFillColor(255,255,255,.67).fillRect(h,s,t.size,t.size)}class Qa extends F{constructor(t,i){var h=.25>Math.random()?2:1;super(),this.g.x=t,this.g.y=i,this.h.x=.1,this.h.y=.1,this.o=new D(.2+1.05*Math.random(),.2+1.3*Math.random()),this.B=this.v=!0,this.size=h,this.j=Math.random()*Math.PI*2}l(t){this.j=(this.j+.05*t.step)%(4*Math.PI),this.target.x=Math.sin(.5*this.j)*this.o.x,this.target.y=.5*this.o.y*(Math.sin(this.j)+1)}s(t){O(this,t),0>this.g.x?O(this,t,t.width):this.g.x>=t.width&&O(this,t,-t.width),0>this.g.y?O(this,t,0,t.height):this.g.y>=t.height&&O(this,t,0,-t.height)}}function Ra(t){let i,h;t.g=[];for(let s=0;6>s;++s)for(let e=0;5>e;++e)i=32*e+32*(2*Math.random()-1)/2,h=24*s+32*(2*Math.random()-1)/2,t.g.push(new Qa(i,h))}class Sa{constructor(){this.g=[],Ra(this)}update(t){for(let i of this.g)i.update(t)}s(t){for(let i of this.g)i.s(t)}}const Ta=(t,i,h)=>{let s=Array(i*h*4).fill(-1);for(let u=0;u<h;++u)for(let c=0;c<i;++c){var e=t[u*i+c];if(1==e){var a=t;e=i;var o=h,n=s,r=c,l=u;let f=Array(9);for(let t=-1;1>=t;++t)for(let i=-1;1>=i;++i){var g=r+i,d=l+t;f[3*(t+1)+(i+1)]=1==(0>g||0>d||g>=e||d>=o?1:a[d*e+g])}n[a=2*l*e*2+2*r]=0,f[1]&&f[3]?f[0]||(n[a]=5):f[1]?n[a]=4:f[3]?n[a]=1:(n[a]=2,0<r&&(n[a-1]=14)),n[++a]=0,f[1]&&f[5]?f[2]||(n[a]=6):f[1]?n[a]=11:f[5]?n[a]=1:(n[a]=3,r<e-1&&(n[a+1]=7)),n[a+=2*e-1]=0,f[7]&&f[3]?f[6]||(n[a]=12):n[a]=f[7]?4:f[3]?8:9,n[++a]=0,f[7]&&f[5]?f[8]||(n[a]=13):n[a]=f[7]?11:f[5]?8:10}}return s},Ua=[1,3,8,9,13],Va=[4,10];function Wa(t,i,h){let s=K(t.g,1,i,h);return Ua.includes(K(t.g,0,i,h))||4==s||10==s}function Xa(t,i,h,s,e=!1){if(3==s||1==s)return!0;let a=K(t.g,0,i,h),o=2==a;if(!o){if(4==s)return 2==K(t.g,0,i,h+1)||!e&&h<t.height-1&&4==K(t.g,1,i,h+2);if(0==a)for(h+=1;h<t.height&&4==K(t.l,1,i,h);++h)if(2==K(t.l,0,i,h))return!0}return o}function Ya(t,i,h,s,e,a,o=!1){if(0!=t.j[h*t.width+i]||13==K(t.g,0,i,h)||Wa(t,i+s,h+e)||Xa(t,i,h,a,o)==o)return!1;if(L(t.g,1,i,h,0),L(t.g,1,i+s,h+e,4),!o&&h<t.height-1&&9==K(t.g,0,i,h+1)){L(t.g,0,i,h+1,0),o=16*i;var n=16*(h+1);const s=[.5,1.5,2.5,3.5];for(let i=0;2>i;++i)for(let h=0;2>h;++h)Pa(t.P,Na).M(o+8*h+4,n+8*i+4,0,s[2*i+h],2*i+h);t.Y=!0}return t.j[(h+e)*t.width+(i+s)]=a,3==a?t.g.h=1:1==a&&(t.g.h=0),!0}function Za(t,i,h,s,e,a,o=!1){if(!o&&(2==a||4==a)||0!=t.j[h*t.width+i]||Wa(t,i+s,h+e))return!1;let n;if(!o){for(let e=h;e<t.height;++e){if(n=K(t.l,1,i-s,e),10!=K(t.l,1,i,e)||4!=n&&Ua.includes(K(t.l,0,i+s,e)))return!1;if(4==n){o=!0;break}}if(!o)return!1}return L(t.g,1,i,h,0),L(t.g,1,i+s,h+e,10),t.j[(h+e)*t.width+(i+s)]=a,!0}function $a(t,i,h=!1){if(0==i)return!1;let s=[1,0,-1,0][Number(i)-1],e=[0,-1,0,1][Number(i)-1],a=!1,o=!1;h||(t.l=t.g.clone());do{o=!1,M(t.g,1,((n,r,l)=>{switch(l){case 4:Ya(t,n,r,s,e,i,h)&&(o=a=!0);break;case 10:Za(t,n,r,s,e,i,h)&&(o=a=!0,t.W=!0,h&&(t.V=!0))}}))}while(o);return a}function ab(t,i,h,s,e=!1){var a=Math.PI/4;let o;for(let e=0;4>e;++e)o=a+2*Math.PI/4*e,Pa(t.R,Ka).M(i,h,2*Math.cos(o),2*Math.sin(o)-1,s);e&&Pa(t.O,Oa).M(i,h,2*Math.random()-1,.5)}function bb(t){for(let s=0;s<t.width*t.height;++s){var i=t.g;if(12==(i=0>s||s>=i.width*i.height?1:i.g[0][s])||13==i){var h=t.g;0>s||s>=h.width*h.height||(h.g[0][s]=12==i?13:12)}}}function cb(t,i,h){const s=[5,6,7],e=[new E(255,255,255),new E(255,255,85),new E(170,255,255)];let a,o,n,r=!1,l=!1;t.C=!0,M(t.g,0,((g,d)=>{a=K(t.g,0,g,d),o=K(t.g,1,g,d),11==a&&(l=!0,0!=o||r||(r=!0)),4==o&&s.includes(a)||10==o&&5==a?(n=e[0],10!=o&&L(t.g,1,g,d,0),5==a?(L(t.g,0,g,d,0),n=e[1]):7==a&&(L(t.g,0,g,d,8),n=e[2]),ab(t,16*g+8,16*d+8,n,4==o),x(h.audio,w(i,"die"),.6)):4==o&&(t.C=!1)})),l&&t.g.l()!=r&&(bb(t),t.g.i=r,x(h.audio,w(i,"toggle"+(r?"2":"1")),.6)),t.C&&(t.N=120,x(h.audio,w(i,"victory"),.8))}function db(t){t.v.push(t.l.clone()),64<=t.v.length&&t.v.shift()}function eb(t,i,h){let s,e;M(t.g,0,((a,o,n)=>{switch(s=16*a,e=16*o,n){case 2:for(n=0;2>n;++n)q(q(i,h,56,0,8,8,s,e+8*n),h,56,0,8,8,s+8,e+8*n,1);0<o&&2!=t.i[(o-1)*t.width+a]&&(e-=8,q(q(i,h,56,8,8,8,s,e),h,56,8,8,8,s+8,e,1));break;case 3:for(a=0;2>a;++a)q(i,h,64,0,8,16,s+8*a,e+-2);break;case 5:a=s,o=e,n=t.S*Math.PI*2;var r=4*Math.PI/16;if(null!=h){var l=64,g=32,d=16;a|=0,o|=0;for(let t=0;t<d;++t){var u=n+r*t;u=a+Math.round(Math.sin(u)),i.T.drawImage(h,l,g+t,16,1,u,o+t,16,1)}}break;case 6:for(a=0;2>a;++a)q(i,h,72,0,8,8,s+8*a,e+8);break;case 7:for(a=s,o=e,n=t.S*Math.PI*2,o+=6,i.setFillColor(170,255,255),g=0;16>g;++g)l=Math.round(2*Math.sin(n+2*Math.PI/16*g)*Math.sin(Math.PI/16*g)),i.fillRect(a+g,o+l,1,16-(l+6));break;case 8:q(i,h,80,32,16,16,s,e);break;case 9:q(i,h,80,0,16,16,s,e);break;case 11:(0==K(t.g,1,a,o)||t.o&&.5>t.h)&&q(i,h,48,24,16,8,s,e+8),q(i,h,48,40,16,8,s,e+8);break;case 12:case 13:q(i,h,96,16-16*(n-12),16,16,s,e)}}))}function fb(t,i,h){const s=[0,1,0,-1,0],e=[0,0,-1,0,1];let a,o=0,n=0;M(t.g,1,((r,l,g)=>{switch(a=t.j[l*t.width+r],o=16*r,n=16*l,0!=a&&(o-=s[Number(a)]*(1-t.h)*16,n-=e[Number(a)]*(1-t.h)*16),g){case 4:g=o;var d=n;let s=0,e=!1;3!=a&&1!=a&&2==K(t.g,0,r,l)&&(1!=K(t.g,0,r,l+1)||4==a)||2==a&&2==K(t.g,0,r,l+1)?(e=!0,s=0,0!=a&&(s+=Math.floor(2*t.h))):4==a&&2!=K(t.g,0,r,l)&&4!=K(t.g,1,r,l+1)?s=5:0!=a&&(4!=K(t.g,1,r,l+1)||l<t.height-1&&0==t.j[(l+1)*t.width+r])&&(s=1+Math.floor(4*t.h));let u=16;4==K(t.g,1,r,l-1)&&(u=32),e?q(i,h,64,16,16,16,g,d+1,0==s?0:1):q(q(i,h,0,u,16,8,g,d+1,t.g.j()),h,[0,16,16,32,32,48][s],u+[8,0,8,0,8,0][s],16,8,g,d+9,t.g.j());break;case 10:q(i,h,80,16,16,16,o,n+1)}}))}function gb(t){t.o||(t.l=t.g.clone()),db(t),t.g=new N(t.i,t.i.map((t=>Number(Va.includes(t))*t)),t.width,t.height,0),t.j=Array(t.width*t.height).fill(0),t.g.h=0}function hb(t){let i=t.o?t.l:t.v.pop();null!=i&&(t.g=i.clone(),t.o=!1,t.h=0,t.j.fill(0))}function ib(t,i){t.S=(t.S+.025*i.step)%1;for(let h of t.P)h.update(i);for(let h of t.R)h.update(i);for(let h of t.O)h.update(i);t.Z.update(i)}function jb(t,i,h){t.i=Array.from(h),t.v.length=0,t.g=new N(t.i,t.i.map((t=>Number(Va.includes(t))*t)),t.width,t.height,0),t.v.push(t.g.clone()),t.l=t.g.clone(),t.j.fill(0),t.$=Ta(t.i,t.width,t.height),t.C=!1,t.N=0,t.J=30,t.ca=i;for(let i of t.P)i.B=!1;for(let i of t.R)i.B=!1;for(let i of t.O)i.B=!1;Ra(t.Z)}class kb{constructor(t,i){this.h=0,this.V=this.W=this.Y=this.X=this.K=this.o=!1,this.S=0,this.J=30,this.C=!1,this.N=0,this.width=10,this.height=9,this.ga=()=>!this.C&&0>=this.J,this.i=Array.from(t),this.v=[],this.g=new N(this.i,this.i.map((t=>Number(Va.includes(t))*t)),this.width,this.height,0),this.v.push(this.g.clone()),this.l=this.g.clone(),this.j=Array(this.width*this.height).fill(0),this.$=Ta(this.i,this.width,this.height),this.ca=i,this.R=[],this.P=[],this.O=[],this.Z=new Sa}update(t,i){if(this.o){var h=this.h;this.h+=(this.K?.125:.0625)*t.step,this.X&&.5>=h&&.5<this.h&&x(t.audio,w(i,"climb"),.6),1<=this.h&&(this.h=0,this.K=this.X=this.o=!1,this.j.fill(0),cb(this,i,t),$a(this,4,!0)?(this.o=!0,this.h=0,this.K=!0):(!this.K&&this.V&&(x(t.audio,w(i,"boulder"),1.2),this.V=!1),db(this)))}if(this.C){if(0>=(this.N-=t.step))return!0}else 0<this.J?this.J-=t.step:(!this.o&&(h=0,1==(1&z(t.keyboard,"right"))?h=1:1==(1&z(t.keyboard,"up"))?h=2:1==(1&z(t.keyboard,"left"))?h=3:1==(1&z(t.keyboard,"down"))&&(h=4),this.W=this.Y=!1,$a(this,h))&&(this.o=!0,this.h=0,this.K=!1,2!=h&&4!=h||(this.X=!0),this.Y&&x(t.audio,w(i,"rumble"),.6),this.W&&x(t.audio,w(i,"boulder"),1.2)),3==z(t.keyboard,"undo")?(x(t.audio,w(i,"choose"),.6),hb(this)):3==z(t.keyboard,"restart")&&(x(t.audio,w(i,"choose"),.6),gb(this)));return!1}s(i){var h=i.u("base");let s=i.u("fontBig");if(null!=h&&null!=s){eb(this,i,h);for(var e=0;e<2*this.height;++e)for(var a=0;a<2*this.width;++a){var o=this.$[e*this.width*2+a];if(!(0>o)){if(0==o)i.setFillColor(255,170,85).fillRect(8*a,8*e,8,8);else{var n=--o%7;q(i,h,8*n,8*(o=o/7|0),8,8,8*a,8*e)}0<e&&(1<=(o=this.$[(e-1)*this.width*2+a])&&3>=o&&i.setFillColor(170,85,85).fillRect(8*a+2,8*e,4,1))}}for(var r of this.P)r.s(i,h);for(var l of(fb(this,i,h),this.R))l.s(i);for(var g of this.O)g.s(i,h);if(this.Z.s(i),this.C)for(i.setFillColor(0,0,0,.33).fillRect(),h=["STAGE","CLEAR"],n=i.width/2-54,e=5*Math.min(1,1-(this.N-60)/60),l=Math.floor(e),g=0;g<Math.min(5,l+1);++g)for(a=n+18*g,r=0,g==l&&(r=i.height/2*(1-e%1)),o=1;0<=o;--o)t(t(i,s,h[0].charAt(g),a+o,i.height/2-24-r+o),s,h[1].charAt(g),a+o,i.height/2-2+r+o);if(0<this.J)for(i.setFillColor(0,0,0,.33).fillRect(),h=1;0<=h;--h)t(i,s,"STAGE "+Number(0|this.ca),i.width/2+h,i.height/2-16+h,-14,0,1)}}}const P=["  HINT: USE ARROW KEYS TO MOVE.","  HINT: PRESS BACKSPACE TO UNDO.","  HINT: PRESS R TO RESTART.","  HINT: PRESS ENTER TO PAUSE."];class Da{constructor(){this.g=1,this.j=this.l=0,this.i=new kb(B[this.g-1],this.g),this.h=new Ia([new C("RESUME",(()=>this.h.H())),new C("RESTART",(()=>{gb(this.i),this.h.H()})),new C("UNDO",(()=>{hb(this.i),this.h.H()})),new C("AUDIO: ON ",(t=>{t.audio.toggle(),this.h.buttons[3].text=t.audio.U()})),new C("QUIT",(t=>{this.h.H(),t.transition.A(!0,1,1/30,(()=>{t.F("titlescreen",1)}),6)}))])}I(t,i){this.h.buttons[3].text=i.audio.U(),null!=t&&(this.g=Number(t),jb(this.i,this.g,B[this.g-1])),this.j=0}update(t){this.h.isActive()||(ib(this.i,t),this.l=(this.l+.025*t.step)%(2*Math.PI)),t.transition.isActive()||(this.h.isActive()?this.h.update(t):this.i.ga()&&3==z(t.keyboard,"pause")?(x(t.audio,w(t.m,"pause"),.6),this.h.A(0)):(this.g<=P.length&&(this.j=(this.j+.5*t.step)%(8*P[this.g-1].length)),this.i.update(t,t.m)&&(this.g==B.length?t.transition.A(!0,1,1/60,(t=>{t.transition.H(),t.F("story",1)}),6):t.transition.A(!0,2,1/30,(()=>{try{window.localStorage.setItem("dying_dreams_js13k_save",String(this.g+1))}catch(t){console.log(t)}++this.g,jb(this.i,this.g,B[this.g-1]),this.j=0})))))}L(i){var h=i.u("background");if(null!=h){var s=4*Math.PI/h.width;for(let t=0;t<h.width;++t){q(i,h,t,Math.round(4*Math.sin(this.l+s*t))+4,1,i.height,t,0)}}if(this.i.s(i),this.h.isActive()&&(i.setFillColor(0,0,0,.33).fillRect(),this.h.s(i)),this.g<=P.length)for(i.setFillColor(0,0,0,.33).fillRect(0,0,i.width,10),h=0;2>h;++h)t(i,i.u("font"),P[this.g-1],-Math.floor(this.j)+h*P[this.g-1].length*8,1,0)}}const Q=[0,37,6,27],R=[0,37,57,-1],lb=[0,21,42,-1],mb=[0,-1,6,27],nb=[0,36,57,-1],S=[0,36,56,-1],T=[0,33,54,-1],U=[0,33,54,58],V=[0,43,63,-1],ob=[0,52,56,-1],W=[0,6,27,47],pb=[0,22,43,-1],qb=[0,33,54,-1],rb=[0,21,42,-1],X=[0,0,52,-1],sb=[Q,Q,Q,R,[0,37,57,6],[0,37,57,27],mb,lb,nb,[0,42,63,-1],S,S,U,U,R,R,R,R,R,R,mb,lb,nb,Q,S,S,U,U,V,V,V,V,V,V,V,V,V,V,[0,63,43,-1],pb,T,T,V,V,V,V,V,V,qb,qb,V,V,pb,pb,T,T,V,V,V,V,V,V,V,V,ob,ob,W,W,X,X,V,V,V,V,V,V,rb,rb,[0,61,56,-1],ob,W,W,X,X];class Ga{constructor(){this.h=this.g=0}I(t,i){i.transition.A(!1,1,1/30,(()=>{}),6)}update(t){!t.transition.isActive()&&(60<=(this.h+=t.step)||t.keyboard.aa())&&(this.h=0,t.transition.A(!0,1,1/30,(t=>{1==this.g?(t.F("titlescreen",0),t.transition.A(!1,2,1/30,(()=>{}))):++this.g}),6))}L(i){let h=i.u("font");i.clear(0),0==this.g?(t(i,h,"A GAME BY",i.width/2,i.height/2-10,0,0,1),t(i,h,"JANI NYK@NEN",i.width/2,i.height/2+2,0,0,1)):t(i,h,"MADE FOR JS13K",i.width/2,i.height/2-4,0,0,1)}}class Ha{constructor(){this.g=new Ia([new C("YES",(t=>{t.audio.toggle(!0),t.F("intro")})),new C("NO",(t=>{t.audio.toggle(!1),t.F("intro")}))],!0)}I(){}update(t){this.g.update(t)}L(i){i.clear(85,170,255);let h=i.u("font");t(i.setFillColor(0,0,85).fillRect(10,20,i.width-16,64).fillRect(i.width/2-14,i.height/2+30,34,26).setFillColor(0,85,170).fillRect(6,16,i.width-16,64).fillRect(i.width/2-18,i.height/2+26,34,26),h,"WOULD YOU LIKE TO\nENABLE AUDIO? YOU\nCAN CHANGE THIS\nLATER.",12,24,0,2),this.g.s(i,0,40,!1)}}const Y=[["YOU ARE HAVING\nTHE SAME\nDREAM AGAIN.","THE DREAM WHERE\nEVERYONE MUST\nDIE."],["YOU WAKE UP.","EVERYONE AROUND\nYOU IS DEAD.","EVERYONE YOU\nEVER CARED\nABOUT.","DID YOU KILL\nTHEM OR WERE\nTHEY KILLED BY\nYOUR DREAM?","THAT YOU WILL\nNEVER KNOW."]];class Fa{constructor(){this.l=this.i=this.h=0,this.j=!1,this.g=this.height=this.o=this.C=0,this.v=!1}I(t){this.l=this.i=this.h=0,this.j=!1,this.g=Number(t),t=Y[this.g][0].split("\n"),this.o=Math.max(...t.map((t=>t.length))),this.height=t.length}update(t){let i;t.transition.isActive()||this.v||(this.C=(this.C+.15*t.step)%(2*Math.PI),this.j=this.i>=Y[this.g][this.h].length,this.j?t.keyboard.aa()&&(++this.h==Y[this.g].length?0==this.g?(t.F("game",1),t.transition.A(!1,2,1/30,(()=>{}))):(this.v=!0,t.transition.A(!1,1,1/120,(()=>{}),6)):(this.l=this.i=0,i=Y[this.g][this.h].split("\n"),this.o=Math.max(...i.map((t=>t.length))),this.height=i.length,this.j=!1),x(t.audio,w(t.m,"choose"),.6)):t.keyboard.aa()?(this.i=Y[this.g][this.h].length,this.j=!0):(4<=(this.l+=t.step)||["\n"," ","\t"].includes(Y[this.g][this.h]))&&(++this.i,this.l=0))}L(i){var h=i.u("font");if(i.clear(0),this.v)t(i,h,"THE END",i.width/2,i.height/2-4,0,0,1);else{var s=i.width/2-8*this.o/2,e=i.height/2-10*this.height/2;(0<this.h||0<this.i)&&this.h<Y[this.g].length&&t(i,h,Y[this.g][this.h].substring(0,this.i),s,e,0,2),h=2*Math.round(Math.sin(this.C)),this.j&&i.setFillColor(255).fillRect(s+8*this.o+4,e+10*this.height+4+h,6,6)}}}function tb(t,i=1){t.transition.A(!0,2,1/30,(t=>{1<i?t.F("game",i):(t.F("story",0),t.transition.H())}))}class Ea{constructor(){this.h=0,this.l=29,this.j=0,this.i=Array(7).fill(0),this.g=new Ia([new C("NEW GAME",(t=>{tb(t)})),new C("CONTINUE",(t=>{let i=1;try{var h=Number(window.localStorage.getItem("dying_dreams_js13k_save"));i=Math.min(B.length,Math.max(h,1))}catch(t){console.log(t),i=1}tb(t,i)})),new C("AUDIO: OFF",(t=>{t.audio.toggle(),this.g.buttons[2].text=t.audio.U()}))],!0)}I(t,i){this.g.A(0),this.g.buttons[2].text=i.audio.U(),null!=t&&(this.h=Number(t),1==this.h&&this.g.A(1))}update(t){const i=[.3,.5,.33,.75,.4,.6,.25];this.j=(this.j+Math.PI/60*t.step)%(2*Math.PI);for(let h=0;h<this.i.length;++h)this.i[h]=(this.i[h]+i[h]*t.step)%(t.fa+16);t.transition.isActive()||(0==this.h?(3!=z(t.keyboard,"start")&&3!=z(t.keyboard,"select")||(x(t.audio,w(t.m,"pause"),.6),++this.h),this.l=(this.l+t.step)%60):this.g.update(t))}L(i){var h=i.u("background");(null==h?i:q(i,h,0,0,h.width,h.height,0,-8,0)).setFillColor(0,0,0,.33).fillRect(),h=[32,80,96,64,120,76,48];for(var s=[32,16,56,72,108,128,144],e=[4,8,6,16,6,12,4],a=i.u("base"),o=0;o<s.length;++o){var n=Math.round(s[o]-8+this.i[o])%176-16,r=this.j+2*Math.PI/6*o;r=h[o]-4+Math.round(Math.sin(r)*e[o]);var l=4>this.i[o]%8?0:1;q(i,a,96,32+8*l,16,8,n,r)}for(0==this.h?(t(i,i.u("font"),"(C)2022 JANI NYK@NEN",i.width/2,i.height-9,0,0,1),30<=this.l&&t(i,i.u("fontYellow"),"PRESS ENTER",i.width/2,i.height/2+28,0,0,1)):this.g.s(i,0,40),h=[16,40],s=["DYING","DREAMS"],e=i.u("fontBig"),o=0;2>o;++o)for(a=i.width/2-18*(s[o].length+1)/2,r=0;r<s[o].length;++r)for(n=Math.round(4*Math.sin(this.j+2*Math.PI/s[o].length*r)),l=1;0<=l;--l)t(i,e,s[o].charAt(r),a+18*r+l,n+h[o]+l)}}window.onload=()=>Ba((t=>{for(var i=Array(64),h=0;64>h;++h){var s=h>>4,e=(12&h)>>2,a=3&h;i[3*h]=85*s,i[3*h+1]=85*e,i[3*h+2]=85*a}ma(t.m,"background",ua(t.m)),s=t.m,e=[170,255,0],(a=document.createElement("canvas")).width=512,a.height=512,(h=a.getContext("2d")).imageSmoothingEnabled=!1,h.font="bold 24px Arial",h.textAlign="center",h.fillStyle=ea(...e,1);for(var o=32,n=2;8>n;++n)for(var r=0;16>r;++r)h.fillText(64==o?"ä":String.fromCharCode(o),32*(r+.5),32*(n+.67)),++o;for(o=(h=a.getContext("2d")).getImageData(0,0,a.width,a.height),n=0;n<a.width*a.height;++n){for(r=0;3>r;++r)o.data[4*n+r]=e[r];o.data[4*n+3]=127>o.data[4*n+3]?0:255}h.putImageData(o,0,0),ja(a,64,256),ma(s,"fontBig",a),na(t.m,"base","b.png",i,sb),na(t.m,"font","f.png",i,Array(96).fill([-1,0,0,63])),na(t.m,"fontYellow","f.png",i,Array(96).fill([-1,0,0,60])),i=t.audio.G([[192,4],[144,8],[128,12]],.7,"square",2,.2),t.m.D.set("die",i),i=t.audio.G([[160,4]],.7,"square",0),t.m.D.set("climb",i),i=t.audio.G([[160,4],[192,12]],.7,"square",0,.35),t.m.D.set("toggle1",i),i=t.audio.G([[192,4],[160,12]],.7,"square",0,.35),t.m.D.set("toggle2",i),i=t.audio.G([[224,4],[160,4],[192,4],[160,4],[128,12]],.8,"sawtooth",1,.2),t.m.D.set("rumble",i),i=t.audio.G([[144,8]],1,"triangle",2,.2),t.m.D.set("boulder",i),i=t.audio.G([[128,12],[144,12],[160,12],[176,12],[192,12],[208,60]],.6,"sawtooth",0,.1),t.m.D.set("victory",i),i=t.audio.G([[160,6]],.7,"square",0),t.m.D.set("choose",i),i=t.audio.G([[192,10]],.7,"square",0,.3),t.m.D.set("select",i),i=t.audio.G([[128,4],[144,6]],.7,"square",2),t.m.D.set("pause",i),y(y(y(y(y(y(y(y(y(t.keyboard,"right","ArrowRight","KeyD"),"up","ArrowUp","KeyW"),"left","ArrowLeft","KeyA"),"down","ArrowDown","KeyS"),"undo","Backspace","KeyZ"),"restart","KeyR"),"start","Enter"),"pause","Enter"),"select","Space"),t.audio.ea=.5}))</script>