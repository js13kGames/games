<!doctype html><title>Edge Not Found</title><style>body,canvas,html{width:100%;height:100%;margin:0;overflow:hidden}</style><meta property=og:description content="A Sokoban-style puzzle game set on an infinitely repeating grid. Push the boxes to the targets in 20+ tricky puzzles. By Tom Hermans (@Auroriax) for js13k 2020."><body><noscript>Please enable Javascript to play this game!</noscript><canvas id=canvas width=500 height=500></canvas><script>function ca(t){var a=0;return function(){return a<t.length?{done:!1,value:t[a++]}:{done:!0}}}function da(t){var a="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return a?a.call(t):{next:ca(t)}}function ea(t){if(!(t instanceof Array)){t=da(t);for(var a,e=[];!(a=t.next()).done;)e.push(a.value);t=e}return t}var ha,fa="function"==typeof Object.create?Object.create:function(t){function a(){}return a.prototype=t,new a};if("function"==typeof Object.setPrototypeOf)ha=Object.setPrototypeOf;else{var ia;t:{var ja={ta:!0},ka={};try{ka.__proto__=ja,ia=ka.ta;break t}catch(t){}ia=!1}ha=ia?function(t,a){if(t.__proto__=a,t.__proto__!==a)throw new TypeError(t+" is not extensible");return t}:null}var la=ha;function ma(t,a){if(t.prototype=fa(a.prototype),t.prototype.constructor=t,la)la(t,a);else for(var e in a)if("prototype"!=e)if(Object.defineProperties){var n=Object.getOwnPropertyDescriptor(a,e);n&&Object.defineProperty(t,e,n)}else t[e]=a[e]}function na(){this.ma=new Date,this.ca=this.h=0}function oa(t,a){var e=pa,n=.1,r=this;a=void 0===a?null:a,n=void 0===n?0:n,this.c=0,this.F=[],this.D=[],this.da=void 0===e?null:e,this.A=this.R=0,this.j=!1,this.Na=n,this.Fa=n+.2,this.state=this.v=this.s=0,t&&t.forEach((function(t){window.addEventListener("keydown",(function(a){a.code!=t&&a.keyCode!=t||(a=qa(r.F,t)).ga&&(r.F=a.fa,ra(r))})),window.addEventListener("keyup",(function(a){a.code!=t&&a.keyCode!=t||(r.F=sa(r.F,t),ra(r))}))})),a&&a.forEach((function(t){window.addEventListener("keydown",(function(a){a.code!=t&&a.keyCode!=t||(a=qa(r.D,t)).ga&&(r.D=a.fa,ra(r))})),window.addEventListener("keyup",(function(a){a.code!=t&&a.keyCode!=t||(r.D=sa(r.D,t),ra(r))}))}))}function ra(t){var a=t.F.length-t.D.length;0<a&&1!=t.c?(t.c=1,t.A=0,t.v=0,t.s=0):0>a&&-1!=t.c?(t.c=-1,t.A=0,t.v=0,t.s=0):0!=t.c&&(t.c=0,t.A=0,t.v=0,t.s=0)}function qa(t,a){var e=!1;return-1===t.indexOf(a)&&(t.push(a),e=!0),{fa:t,ga:e}}function sa(t,a){var e=t.indexOf(a);return-1<e&&t.splice(e,1),t}na.prototype.update=function(t){t=void 0===t?null:t;var a=new Date;this.h=t||(a-this.ma)/1e3,this.ma=a,this.ca+=this.h},oa.prototype.update=function(){this.da&&0!=this.c?(this.A+=this.da.h,this.s+=this.da.h,0==this.R||1<this.v&&this.s>=this.Na||1>=this.v&&this.s>=this.Fa?(this.j=!0,this.v+=1,this.s=0):this.j=!1):this.j=!1,this.state=0==this.c?0!=this.R?3:0:0==this.R?1:2,this.R=this.A},oa.prototype.reset=function(){this.F=[],this.D=[],this.state=0,this.j=!1,this.s=this.v=this.A=this.c=0};var ta=function(){function t(t,e){this.canvas=t,this.va=this.canvas.getContext("2d"),this.J=new a(e)}function a(t){this.I={L:2,ba:1,N:1,stroke:"#000",strokeWidth:1,xa:0,wa:.95,X:9,fillStyle:"hachure",u:-1,ka:-41,la:-1,Ra:-1,Qa:-1,Wa:-1,b:0,Pa:!1,ia:!1,ya:!1},this.ha=t||{},this.ha.options&&(this.I=this.M(this.ha.options))}function e(t){this.b=t}function n(t){this.K=t}function r(){return i.apply(this,arguments)||this}function i(t){this.K=t}function o(t,a,e){if(t&&t.length){var n=(a=da(a)).next().value,r=a.next().value;e*=Math.PI/180;var i=Math.cos(e),o=Math.sin(e);t.forEach((function(t){var a=da(t),e=a.next().value;a=a.next().value,t[0]=(e-n)*i-(a-r)*o+n,t[1]=(e-n)*o+(a-r)*i+r}))}}function b(t){var a=t[0];return t=t[1],Math.sqrt(Math.pow(a[0]-t[0],2)+Math.pow(a[1]-t[1],2))}function h(t,a,e,n){var r=a[1]-t[1];a=t[0]-a[0],t=r*t[0]+a*t[1];var i=n[1]-e[1];n=e[0]-n[0],e=i*e[0]+n*e[1];var o=r*n-i*a;return o?[(n*t-a*e)/o,(r*e-i*t)/o]:null}function l(t,a,e){var n=t.length;if(3>n)return!1;var r=[Number.MAX_SAFE_INTEGER,e];a=[a,e];for(var i=e=0;i<n;i++){var o=t[i],b=t[(i+1)%n];if(c(o,b,a,r)){if(0===u(o,a,b))return s(o,a,b);e++}}return 1==e%2}function s(t,a,e){return a[0]<=Math.max(t[0],e[0])&&a[0]>=Math.min(t[0],e[0])&&a[1]<=Math.max(t[1],e[1])&&a[1]>=Math.min(t[1],e[1])}function u(t,a,e){return 0===(t=(a[1]-t[1])*(e[0]-a[0])-(a[0]-t[0])*(e[1]-a[1]))?0:0<t?1:2}function c(t,a,e,n){var r=u(t,a,e),i=u(t,a,n),o=u(e,n,t),b=u(e,n,a);return r!==i&&o!==b||!(0!==r||!s(t,e,a))||!(0!==i||!s(t,n,a))||!(0!==o||!s(e,t,n))||!(0!==b||!s(e,a,n))}function f(t,a){var e=[0,0],n=Math.round(a.ka+90);n&&o(t,e,n);var r,i,b,h=function(t,a){var e=[].concat(ea(t));e[0].join(",")!==e[e.length-1].join(",")&&e.push([e[0][0],e[0][1]]);var n=[];if(e&&2<e.length){var r=a.la;0>r&&(r=4*a.strokeWidth),r=Math.max(r,.1);for(var i=[],o=0;o<e.length-1;o++){var b=e[o],h=e[o+1];if(b[1]!==h[1]){var l=Math.min(b[1],h[1]);i.push({H:l,C:Math.max(b[1],h[1]),x:l===b[1]?b[0]:h[0],Ga:(h[0]-b[0])/(h[1]-b[1])})}}if(i.sort((function(t,a){return t.H<a.H?-1:t.H>a.H?1:t.x<a.x?-1:t.x>a.x?1:t.C===a.C?0:(t.C-a.C)/Math.abs(t.C-a.C)})),!i.length)return n;for(var s=[],u=i[0].H;s.length||i.length;){if(i.length){for(e=-1,o=0;o<i.length&&!(i[o].H>u);o++)e=o;i.splice(0,e+1).forEach((function(t){s.push({Ua:u,i:t})}))}if((s=s.filter((function(t){return!(t.i.C<=u)}))).sort((function(t,a){return t.i.x===a.i.x?0:(t.i.x-a.i.x)/Math.abs(t.i.x-a.i.x)})),1<s.length)for(e=0;e<s.length&&!((o=e+1)>=s.length);e+=2)n.push([[Math.round(s[e].i.x),u],[Math.round(s[o].i.x),u]]);u+=r,s.forEach((function(t){t.i.x+=r*t.i.Ga}))}}return n}(t,a);return n&&(o(t,e,-n),r=e,i=-n,b=[],h.forEach((function(t){return b.push.apply(b,ea(t))})),o(b,r,i)),h}function p(t,a,e){var n=2*Math.PI/Math.max(e.X,e.X/Math.sqrt(200)*Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(t/2,2)+Math.pow(a/2,2))/2)));t=Math.abs(t/2),a=Math.abs(a/2);var r=1-e.wa;return{Z:n,ra:t+=x(t*r,e),sa:a+=x(a*r,e)}}function d(t,a,e,n){var r=da(z(n.Z,t,a,n.ra,n.sa,1,n.Z*v(.1,v(.4,1,e),e),e)),i=r.next().value;return r=r.next().value,i=w(i,null,e),e.ia||(e=w(t=da(z(n.Z,t,a,n.ra,n.sa,1.5,0,e)).next().value,null,e),i=i.concat(e)),{Ba:r,aa:{type:"path",o:i}}}function y(t,a){var e=a.fillStyle||"hachure";if(!M[e])switch(e){case"zigzag":M[e]||(M[e]=new r(E));break;case"dots":M[e]||(M[e]=new n(E));break;default:M[e="hachure"]||(M[e]=new i(E))}return M[e].Y(t,a)}function g(t){return t.qa||(t.qa=new e(t.b||0)),t.qa.next()}function v(t,a,e,n){return e.ba*(void 0===n?1:n)*(g(e)*(a-t)+t)}function x(t,a,e){return v(-t,t,a,void 0===e?1:e)}function m(t,a,e,n,r,i){var o=void 0!==i&&i?r.ya:r.ia;return i=k(t,a,e,n,r,!0,!1),o?i:(t=k(t,a,e,n,r,!0,!0),i.concat(t))}function k(t,a,e,n,r,i,o){function b(){return x(u,r,1)}function h(){return x(c,r,1)}var l=Math.pow(t-e,2)+Math.pow(a-n,2),s=Math.sqrt(l),u=r.L||0;u*u*100>l&&(u=s/10);var c=u/2;l=.2+.2*g(r),s=r.N*r.L*(n-a)/200;var f=r.N*r.L*(t-e)/200;s=x(s,r,1),f=x(f,r,1);var p=[];return i&&(o?p.push({l:"move",data:[t+h(),a+h()]}):p.push({l:"move",data:[t+x(u,r,1),a+x(u,r,1)]})),o?p.push({l:"bcurveTo",data:[s+t+(e-t)*l+h(),f+a+(n-a)*l+h(),s+t+2*(e-t)*l+h(),f+a+2*(n-a)*l+h(),e+h(),n+h()]}):p.push({l:"bcurveTo",data:[s+t+(e-t)*l+b(),f+a+(n-a)*l+b(),s+t+2*(e-t)*l+b(),f+a+2*(n-a)*l+b(),e+b(),n+b()]}),p}function w(t,a,e){var n=t.length,r=[];if(3<n){var i=[],o=1-e.xa;r.push({l:"move",data:[t[1][0],t[1][1]]});for(var b=1;b+2<n;b++){var h=t[b];i[0]=[h[0],h[1]],i[1]=[h[0]+(o*t[b+1][0]-o*t[b-1][0])/6,h[1]+(o*t[b+1][1]-o*t[b-1][1])/6],i[2]=[t[b+1][0]+(o*t[b][0]-o*t[b+2][0])/6,t[b+1][1]+(o*t[b][1]-o*t[b+2][1])/6],i[3]=[t[b+1][0],t[b+1][1]],r.push({l:"bcurveTo",data:[i[1][0],i[1][1],i[2][0],i[2][1],i[3][0],i[3][1]]})}a&&2===a.length&&(t=e.L,r.push({l:"lineTo",data:[a[0]+x(t,e),a[1]+x(t,e)]}))}else 3===n?(r.push({l:"move",data:[t[1][0],t[1][1]]}),r.push({l:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):2===n&&r.push.apply(r,ea(m(t[0][0],t[0][1],t[1][0],t[1][1],e)));return r}function z(t,a,e,n,r,i,o,b){var h=[],l=[],s=x(.5,b)-Math.PI/2;l.push([x(i,b)+a+.9*n*Math.cos(s-t),x(i,b)+e+.9*r*Math.sin(s-t)]);for(var u=s;u<2*Math.PI+s-.01;u+=t){var c=[x(i,b)+a+n*Math.cos(u),x(i,b)+e+r*Math.sin(u)];h.push(c),l.push(c)}return l.push([x(i,b)+a+n*Math.cos(s+2*Math.PI+.5*o),x(i,b)+e+r*Math.sin(s+2*Math.PI+.5*o)]),l.push([x(i,b)+a+.98*n*Math.cos(s+o),x(i,b)+e+.98*r*Math.sin(s+o)]),l.push([x(i,b)+a+.9*n*Math.cos(s+.5*o),x(i,b)+e+.9*r*Math.sin(s+.5*o)]),[l,h]}i.prototype.Y=function(t,a){return this.ea(t,a)},i.prototype.ea=function(t,a,e){e=void 0!==e&&e;var n=f(t,a);return e&&(t=this.ua(t,n),n=n.concat(t)),{type:"fillSketch",o:this.Ia(n,a)}},i.prototype.Ia=function(t,a){for(var e=[],n=da(t),r=n.next();!r.done;r=n.next())r=r.value,e.push.apply(e,ea(this.K.Aa(r[0][0],r[0][1],r[1][0],r[1][1],a)));return e},i.prototype.ua=function(t,a){var e=[];if(1<a.length)for(var n=1;n<a.length;n++){var r=a[n-1];3>b(r)||3<b(r=[a[n][0],r[1]])&&(r=this.Ka(t,r),e.push.apply(e,ea(r)))}return e},i.prototype.$=function(t,a){return l(t,(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2)},i.prototype.Ka=function(t,a){for(var e=Math.max(5,.1*b(a)),n=[],r=0;r<t.length;r++){var i=t[r],o=t[(r+1)%t.length];if(c.apply(null,[i,o].concat(ea(a)))&&(i=h(i,o,a[0],a[1]))){o=b([i,a[0]]);var s=b([i,a[1]]);o>e&&s>e&&n.push({Ha:i,ja:o})}}if(1<n.length){if(e=n.sort((function(t,a){return t.ja-a.ja})).map((function(t){return t.Ha})),l.apply(null,[t].concat(ea(a[0])))||e.shift(),l.apply(null,[t].concat(ea(a[1])))||e.pop(),1>=e.length)return this.$(t,a)?[a]:[];for(e=[a[0]].concat(ea(e),[a[1]]),n=[],r=0;r<e.length-1;r+=2)i=[e[r],e[r+1]],this.$(t,i)&&n.push(i);return n}return this.$(t,a)?[a]:[]},ma(r,i),r.prototype.Y=function(t,a){return this.ea(t,a,!0)},n.prototype.Y=function(t,a){var e=f(t,a=Object.assign({},a,{X:4,ka:0,ba:1}));return this.za(e,a)},n.prototype.za=function(t,a){var e=[],n=a.la;0>n&&(n=4*a.strokeWidth),n=Math.max(n,.1);var r=a.u;0>r&&(r=a.strokeWidth/2);for(var i=n/4,o=da(t),h=o.next();!h.done;h=o.next()){var l=h.value,s=b(l);s-=(h=Math.ceil(s/n)-1)*n;var u=(l[0][0]+l[1][0])/2-n/4;l=Math.min(l[0][1],l[1][1]);for(var c=0;c<h;c++){var f=l+s+c*n,p=this.K.pa(u-i,u+i,a);f=this.K.pa(f-i,f+i,a),p=this.K.ellipse(p,f,r,r,a),e.push.apply(e,ea(p.o))}}return{type:"fillSketch",o:e}};var M={};e.prototype.next=function(){return this.b?(Math.pow(2,31)-1&(this.b=Math.imul(48271,this.b)))/Math.pow(2,31):Math.random()};var E={Ta:function(t,a){return x(t,a)},pa:function(t,a,e){return v(t,a,e)},ellipse:function(t,a,e,n,r){return d(t,a,r,e=p(e,n,r)).aa},Aa:function(t,a,e,n,r){return m(t,a,e,n,r,!0)}};return a.oa=function(){return Math.floor(Math.random()*Math.pow(2,31))},a.prototype.M=function(t){return t?Object.assign({},this.I,t):this.I},a.prototype.S=function(t,a,e){return{shape:t,Ja:a||[],options:e||this.I}},a.prototype.line=function(t,a,e,n,r){return r=this.M(r),this.S("line",[{type:"path",o:m(t,a,e,n,r)}],r)},a.prototype.f=function(t,a,e,n,r){r=this.M(r);var i=[],o=[[t,a],[t+e,a],[t+e,a+n],[t,a+n]],b=(o||[]).length;if(2<b){for(var h=[],l=0;l<b-1;l++)h.push.apply(h,ea(m(o[l][0],o[l][1],o[l+1][0],o[l+1][1],r)));h.push.apply(h,ea(m(o[b-1][0],o[b-1][1],o[0][0],o[0][1],r))),o={type:"path",o:h}}else o=2===b?{type:"path",o:m(o[0][0],o[0][1],o[1][0],o[1][1],r)}:{type:"path",o:[]};return r.fill&&(t=[[t,a],[t+e,a],[t+e,a+n],[t,a+n]],"solid"===r.fillStyle?i.push(function(t,a){var e=[];if(t.length){var n=a.L||0,r=t.length;if(2<r){e.push({l:"move",data:[t[0][0]+x(n,a),t[0][1]+x(n,a)]});for(var i=1;i<r;i++)e.push({l:"lineTo",data:[t[i][0]+x(n,a),t[i][1]+x(n,a)]})}}return{type:"fillPath",o:e}}(t,r)):i.push(y(t,r))),"none"!==r.stroke&&i.push(o),this.S("rectangle",i,r)},a.prototype.ellipse=function(t,a,e,n,r){var i=[];return e=d(t,a,r=this.M(r),n=p(e,n,r)),r.fill&&("solid"===r.fillStyle?((t=d(t,a,r,n).aa).type="fillPath",i.push(t)):i.push(y(e.Ba,r))),"none"!==r.stroke&&i.push(e.aa),this.S("ellipse",i,r)},a.prototype.W=function(t,a,e,n){return(t=this.ellipse(t,a,e,e,n)).shape="circle",t},t.prototype.O=function(t){for(var a=t.options||this.J.I,e=this.va,n=da(t.Ja||[]),r=n.next();!r.done;r=n.next())switch(r=r.value,r.type){case"path":e.save(),e.strokeStyle="none"===a.stroke?"transparent":a.stroke,e.lineWidth=a.strokeWidth,a.La&&e.setLineDash(a.La),a.Ma&&(e.lineDashOffset=a.Ma),this.T(e,r),e.restore();break;case"fillPath":e.save(),e.fillStyle=a.fill||"",this.T(e,r,"curve"===t.shape||"polygon"===t.shape?"evenodd":"nonzero"),e.restore();break;case"fillSketch":this.Ea(e,r,a)}},t.prototype.Ea=function(t,a,e){var n=e.u;0>n&&(n=e.strokeWidth/2),t.save(),e.Ca&&t.setLineDash(e.Ca),e.Da&&(t.lineDashOffset=e.Da),t.strokeStyle=e.fill||"",t.lineWidth=n,this.T(t,a),t.restore()},t.prototype.T=function(t,a,e){e=void 0===e?"nonzero":e,t.beginPath();for(var n=da(a.o),r=n.next();!r.done;r=n.next()){var i=(r=r.value).data;switch(r.l){case"move":t.moveTo(i[0],i[1]);break;case"bcurveTo":t.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5]);break;case"lineTo":t.lineTo(i[0],i[1])}}"fillPath"===a.type?t.fill(e):t.stroke()},t.prototype.line=function(t,a,e,n,r){return t=this.J.line(t,a,e,n,r),this.O(t),t},t.prototype.f=function(t,a,e,n,r){return t=this.J.f(t,a,e,n,r),this.O(t),t},t.prototype.ellipse=function(t,a,e,n,r){return t=this.J.ellipse(t,a,e,n,r),this.O(t),t},t.prototype.W=function(t,a,e,n){return t=this.J.W(t,a,e,n),this.O(t),t},{canvas:function(a,e){return new t(a,e)},Sa:function(t){return new a(t)},oa:function(){return a.oa()}}}();zzfxV=.15,zzfx=function(t,a,e,n,r,i,o,b,h,l,s,u,c,f,p,d,y,g,v,x){t=void 0===t?1:t,a=void 0===a?.05:a,e=void 0===e?220:e,o=void 0===o?0:o,b=void 0===b?1:b,h=void 0===h?0:h,f=void 0===f?0:f,p=void 0===p?0:p,d=void 0===d?0:d,g=void 0===g?1:g,x=void 0===x?0:x;var m=2*Math.PI,k=h*=500*m/Math.pow(zzfxR,2),w=(0<p?1:-1)*m/4;a=e*=(1+2*a*Math.random()-a)*m/zzfxR;var z,M=[],E=0,T=0,F=0,A=1,P=0,S=0,O=0;for(n=99+zzfxR*(void 0===n?0:n),v=(void 0===v?0:v)*zzfxR,r=(void 0===r?0:r)*zzfxR,i=(void 0===i?.1:i)*zzfxR,y=(void 0===y?0:y)*zzfxR,l=500*m/Math.pow(zzfxR,3)*(void 0===l?0:l),p*=m/zzfxR,s=m/zzfxR*(void 0===s?0:s),u=(void 0===u?0:u)*zzfxR,c=zzfxR*(void 0===c?0:c)|0,z=n+v+r+i+y|0;F<z;M[F++]=O){++S%(100*d|0)||(O=o?1<o?2<o?3<o?Math.sin(Math.pow(E%m,3)):Math.max(Math.min(Math.tan(E),1),-1):1-(2*E/m%2+2)%2:1-4*Math.abs(Math.round(E/m)-E/m):Math.sin(E),O=(c?1-x+x*Math.sin(2*Math.PI*F/c):1)*(0<O?1:-1)*Math.pow(Math.abs(O),b)*t*zzfxV*(F<n?F/n:F<n+v?1-(F-n)/v*(1-g):F<n+v+r?g:F<z-y?(z-F-y)/i*g:0),O=y?O/2+(y>F?0:(F<z-y?1:(z-F)/y)*M[F-y|0]/2):O);var V=(e+=h+=l)*Math.sin(T*p-w);E+=V-V*f*(1-1e9*(Math.sin(F)+1)%2),T+=V-V*f*(1-1e9*(Math.pow(Math.sin(F),2)+1)%2),A&&++A>u&&(e+=s,a+=s,A=0),!c||++P%c||(e=a,h=k,A=A||1)}return(t=zzfxX.createBuffer(1,z,zzfxR)).getChannelData(0).set(M),(e=zzfxX.createBufferSource()).buffer=t,e.connect(zzfxX.destination),e.start(),e},zzfxX=new(window.AudioContext||webkitAudioContext),zzfxR=44100;var y=[];y.push([{P:[6,1,3,6,11,14,14],na:[1,5,10,17],g:-2},"##########","gp.1g.111.g","##########","2.2.2.2.2.g","##########",".333.3333.g","##########","4.4.4.4g4g"]),y.push([{a:100,name:"A Wrapping World"},"#####.#","......#","...#..#","#.###.#",".b#t.p","..###.#"]),y.push([{a:101,name:"Infinite Inlet"},"..#","p.#",".tbt","#b.b",".tbt"]),y.push([{a:102,name:"Hallowed Hallway"},"##.##",".t.tp","bb#bb",".t.t","##.##"]),y.push([{a:103,name:"Girded Grid"},".#.#.#","t.b.t",".#.#.#","b.p.b",".#.#.#","t.b.t"]),y.push([{a:200,name:"Straight Spiral",g:2},"","####","","####","..b","####","t#.p","####"]),y.push([{a:201,name:"Crowned Conundrum",G:3},"pb...b","b#.#.#",".#ttt#"]),y.push([{a:202,name:"Twisted Terrace",G:3},"b..p",".##.##",".#.t.#","bbt#tb",".#.t.#",".##.##"]),y.push([{a:203,name:"Continuous Corridor",g:3},"######","tb..p","t....b","######","t#...b","tb...#"]),y.push([{a:204,name:"Grandiose Garden",g:3},"..bpb","..#.#",".#.t.#",".bt.tb",".#.t.#","..#.#"]),y.push([{a:300,name:"Sift & Shift"},"bt##|#","###p","####.#"]),y.push([{a:301,name:"Cornered Contraption",g:1},"p",".|","#####",".t#","###"]),y.push([{a:302,name:"Zealous Zigzag"},"#t#t#t",".-..-","###..#",".p####",".-"]),y.push([{a:303,name:"Irregular Infrastructure",g:2},"##.|",".#..p",".#..#",".#.#t","....#",""]),y.push([{a:304,name:"Enchanted Encagement"},"##.#.###.#.#","#..-..#....#","#..p..#.t.t","#..-..##","##.#.###.#.#"]),y.push([{a:305,name:"Riddle Raster",g:-1},"",".t","#|#",".t","#b#","pt","#|#"]),y.push([{a:306,name:"Locked Loungerooms",g:-2},"#########","####..###",".......##","####....#","####","....#...#","#....#","...||.###","##.p","tt#...###"]),y.push([{a:400,name:"Rubble Rundown"},"#tr.r.","#rrrr.","#pb...","#rrrrr","#r.-.r","#r#r#r","#r...r","#r.r.r"]),y.push([{a:401,name:"Quality Questions",g:-2},"rrrrrrr","#t|#|t#","#|t#t|#","rrrprrr","#######","rrrrrrr","#t#|#t#","#|#t#|#","rrrrrrr","#######"]),y.push([{a:402,name:"Swirling Stars"},"....#r+tr","b##..r.rb","b.##..r.b","..t...p","#ttt#rrr#"]),y.push([{a:403,name:"Box Breakout"},"b.#.#.b",".#rpr#","#rrtrr#","...+","#rrtrr#",".#r.r#.","b.#.#.b"]),y.push([{a:404,name:"Edge Not Found",U:-1},"#.##.#...#","#b##.#...#","#p##t#####","##..######","##..######"]);var z=Math,ua=70,ya=1,pa=new na,E=document.getElementById("canvas"),F=E.getContext("2d",{alpha:!1}),za=ta.canvas(E),Aa=document.createElement("canvas"),H=Aa.getContext("2d"),Ca=ta.canvas(Aa),Da=document.createElement("canvas"),Ea=Da.getContext("2d"),Fa=ta.canvas(Da),Ga=document.createElement("canvas"),Ha=Ga.getContext("2d"),Ia=ta.canvas(Ga),Ja=document.createElement("canvas"),Ka=Ja.getContext("2d"),Ma=ta.canvas(Ja),Na=document.createElement("canvas"),Oa=Na.getContext("2d"),Pa=ta.canvas(Na),Qa=document.createElement("canvas"),Ra=Qa.getContext("2d"),Sa=ta.canvas(Qa),Ta=document.createElement("canvas"),Ua=Ta.getContext("2d"),Va=ta.canvas(Ta),J=[],Wa=0,Xa=0,Ya="Edge Not Found ",Za="Press any key",bb="",cb=0,db=0,eb=0,fb=0,gb=0,hb=0;onkeydown=function(t){if("ArrowDown"!=t.key&&"ArrowUp"!=t.key&&" "!=t.key&&"Backspace"!=t.key||t.preventDefault(),!ib)if(jb)kb(0,!0),jb=!1;else{var a=t.key,e=t.code;lb=!0,"Escape"==a&&.1<=mb&&((nb=!nb)?kb(7,!0):kb(0,!0),pb.reset(),qb.reset(),rb.reset(),sb=mb=0),nb||("KeyR"==e?tb||(kb(6),J.push({B:L,V:O.slice(),G:cb,g:db}),pb.reset(),qb.reset(),rb.reset(),ub(P,!1)):t.shiftKey&&"n"==a||"N"==a?ub(z.min(P+1,y.length-1)):(t.shiftKey&&"b"==a||"B"==a)&&ub(z.max(P-1,0)))}},window.onbeforeunload=function(){if(0!=P)return"Quit?"};var vb=null,wb=!1;onload=function(){vb=document.querySelector('link[rel="icon"]')};var P=0,xb=y[P].length,yb=y[P][0].length;zb(ua);var L={x:0,y:0},Ab=[],O=[],Bb=[],T=[],Cb=[],Db=[],Eb="",Fb=0,Gb=0,Hb=1/3,Ib=Hb,Jb=4,Kb=Jb,Lb=0,Mb=0,Nb=.075,Ob=0,Pb=0,mb=.25,nb=!1,sb=0,jb=!0,qb=new oa(["KeyS","ArrowDown"],["KeyW","ArrowUp"]),pb=new oa(["KeyD","ArrowRight"],["KeyA","ArrowLeft"]),rb=new oa(["KeyZ","Backspace"],[]),Qb=new oa(["KeyX","Space","Enter"],[]),Rb=!1,V=[["Sketchbook","#ffffff","#000000","#808080","#ff0000"],["Scratchpad","#202020","#ffffff","#808080","#ffd700"],["Golden Ticket","#303030","#b29700","#8e7900","#efe7d6"],["Ikaniko","#1E2A26","#7CA49B","#267B75","#C8EEE5"],["BackFlipped","#223e32","#b3dd52","#04bf00","#A7C06D"]],Y=0,Sb=!0,tb=!0,ib=!1,Tb=0,lb=!0,Ub=0;window.onresize=function(){E.width=E.clientWidth,E.height=E.clientHeight,lb=!0},E.width=E.clientWidth,E.height=E.clientHeight;for(var Vb=[],Wb=0;Wb!=y.length;Wb+=1)Vb[Wb]=0;var Xb=0,Yb=window.localStorage,Zb=Yb.getItem("enf-l");if(null!=Zb)for(var $b=1;$b!=Vb.length;$b+=1)"t"==Zb[$b-1]?(Vb[$b]=2,Xb++):"f"==Zb[$b-1]&&(Vb[$b]=1);function ac(){try{if(pa.update(),pb.update(),qb.update(),rb.update(),Qb.update(),!ib&&!jb)if(nb){var t=5;if(0==P&&(t=4),qb.j&&1==qb.c)(sb+=1)>=t&&(sb=0);else if(qb.j&&-1==qb.c)0>--sb&&(sb=t-1);else if(Qb.j)switch(sb){case 0:nb=!nb,kb(0,!0);break;case 1:(Sb=!Sb)&&kb(7,!0),bc();break;case 2:Rb=!Rb,kb(2,!0),bc();break;case 3:.2<=Mb&&(Mb=0,++Y>=V.length&&(Y=0),lb=!0,wb=!1,kb(2,!0)),bc();break;case 4:ub(0),kb(8,!0),nb=!nb}}else{if(qb.j&&cc(0,qb.c),pb.j&&cc(pb.c,0),1==rb.j&&0!=J.length){if(kb(5),t=J.pop(),L=t.B,O=t.V,cb=t.G,db=t.g,Eb=Eb.slice(0,-1),tb=0==Eb.length||" "==Eb.slice(-1),0==P){var a=dc();ec(a,1)}Gb=.1,lb=!0}Qb.j&&1<=Lb&&(null!=(a=dc())&&(Tb=T[a].target,ib=!0,Kb=0,kb(0)))}if(null!=vb&&!wb){var e=document.createElement("canvas");e.width=64,e.height=64;var n=e.getContext("2d"),r=ta.canvas(e);n.fillStyle=V[Y][1],n.fillRect(0,0,E.width,E.height),r.f(8,8,48,48,{stroke:V[Y][2],fill:V[Y][2],strokeWidth:2,N:2,b:ya}),vb.href=e.toDataURL("image/png"),wb=!0}Gb=z.min(Gb+pa.h,.1),Ib=z.min(Ib+pa.h,Hb),Lb=z.min(Lb+pa.h,1),Kb=z.min(Kb+pa.h,Jb),Mb=z.min(Mb+pa.h,.2),Ob=z.min(Ob+pa.h,Nb),Pb=z.min(Pb+pa.h,.2),mb=z.min(mb+pa.h,.25),jb&&(Lb=.5),e=1,700>E.width||700>E.height?(ua=40,e=.6):1e3>E.width||900>E.height?(ua=55,e=.8):ua=70;var i=1,o=ua;1>Lb?(i=Lb/1,o=ua+20*e-20*e*fc(Lb/1)):Kb<Jb&&0!=P?(i=1-Kb/Jb,o=ua-50*e+50*e*(1-fc(Kb/Jb))):1>Kb&&0==P?(i=1-Kb/1,o=ua-20*e*fc(Kb/1)):(Kb>=Jb&&0!=P||1<=Kb&&0==P)&&ib&&(0==P?ub(Tb):(P==y.length-1&&(Ya="Victory! ",Za="Thank you for playing!",jb=!0,kb(9)),ub(0)),i=0),Rb&&(o=ua);var b=xb*o,h=yb*o;if(n=!1,(!Rb&&Ib>=Hb||o!=Ub||lb)&&(!Rb&&Ib>=Hb&&(ya+=1,Ib=0),n=!0,o!=Ub?zb(o):(Ka.clearRect(0,0,Ja.width,Ja.height),Ka.beginPath(),Ha.clearRect(0,0,Ga.width,Ga.height),Ha.beginPath(),Oa.clearRect(0,0,Na.width,Na.height),Oa.beginPath(),Ua.clearRect(0,0,Ta.width,Ta.height),Ua.beginPath(),Ra.clearRect(0,0,Qa.width,Qa.height),Ra.beginPath()),r=.8,Ma.W(.5*o,.5*o,o*r,{fill:V[Y][1],fillStyle:"solid",stroke:V[Y][2],strokeWidth:1,b:ya}),Ia.f(5,5,o,o,{stroke:"none",fill:V[Y][2],strokeWidth:1,b:ya}),r=.8,Pa.f(5+.5*(1-r)*o,5+.5*(1-r)*o,o*r,o*r,{stroke:V[Y][2],fill:V[Y][2],strokeWidth:2,b:ya}),r=1.1,Va.f(7.5+.5*(1-r)*o,7.5+.5*(1-r)*o,o*r,o*r,{stroke:"none",fill:V[Y][2],fillStyle:"dots",u:o/70,strokeWidth:2,b:ya}),r=.9,Sa.f(7.5+.5*(1-r)*o,7.5+.5*(1-r)*o,o*r,o*r,{fillStyle:"solid",fill:V[Y][1],stroke:V[Y][2],N:4,strokeWidth:1,u:.25,b:ya})),r=0!=Wa||0!=Xa,0<Wa?Wa=z.max(0,Wa-2):0>Wa&&(Wa=z.min(0,Wa+2)),0<Xa?Xa=z.max(0,Xa-2):0>Xa&&(Xa=z.min(0,Xa+2)),(n||Ib>=Hb||.2>=Gb||1!=i||r)&&(o!=Ub||lb?(Aa.width=h+20,Aa.height=b+20,Da.width=h+20,Da.height=b+20):(H.clearRect(0,0,Aa.width,Aa.height),H.beginPath(),Ea.clearRect(0,0,Da.width,Da.height),Ea.beginPath()),lb=!1,gc(o),n=!0),n||jb){n=function(t){for(var a=0;a<=c;a++)for(var e=0;e<=u;e++)F.globalAlpha=z.max(0,i-.1*z.abs(a)-z.abs(.1*e)),0<F.globalAlpha&&(F.drawImage(t,l+h*e+f*o*a,s+b*a+p*o*e),0!=e&&0!=a&&F.drawImage(t,l+h*-e+f*o*-a,s+b*-a+p*o*-e),0!=a&&F.drawImage(t,l+h*e+f*o*-a,s+b*-a+p*o*e),0!=e&&F.drawImage(t,l+h*-e+f*o*a,s+b*a+p*o*-e))},r=1,Rb&&(r=0);var l=z.round(.5*E.width-.5*h-10+.25*Wa*r),s=z.round(.5*E.height-.5*b-10+.25*Xa*r),u=z.ceil((E.width-h+10)/h*.5),c=z.ceil((E.height-b+10)/b*.5);0!=cb&&(u+=2),0!=db&&(c+=2);var f=cb-gb*(1-fc(z.min(Gb/.1,1))),p=db-hb*(1-fc(z.min(Gb/.1,1)));if(F.globalAlpha=1,F.fillStyle=V[Y][1],F.fillRect(0,0,E.width,E.height),Rb||n(Da),n(Aa),za.f(z.round(l-5+.5*Wa*r),z.round(s-5+.5*Xa*r),h+5+20,b+5+20,{stroke:V[Y][2],b:ya}),F.globalAlpha=1,(jb||nb)&&(F.globalAlpha=.4,F.fillStyle=V[Y][1],F.fillRect(-1,-1,E.width+2,E.height+2),F.globalAlpha=1),jb||(F.textAlign="left",F.font=40*e+"px sans-serif",F.globalAlpha=fc(Pb/.2),hc(F,bb,40,E.height-40),F.globalAlpha=1),F.font="22px sans-serif",F.fillStyle=V[Y][1],F.textAlign="center",F.textBaseline="middle",jb){F.font=z.round(1.2*ua)+"px sans-serif",F.textAlign="left",F.textBaseline="center",F.fillStyle="black";var d=Ya,g=F.measureText(d).width;d=d.repeat(z.ceil(E.width/g)+1),e=0,Rb||(e=pa.ca%5/5),hc(F,d,-e*g,.5*E.height),F.font=z.round(.5*ua)+"px sans-serif",F.textAlign="center",hc(F,Za,.5*E.width,.6*E.height)}else nb?(g=F.globalAlpha=1,Rb||(g=fc(mb/.25)),e=400*g,za.f(-5,-5,e+5,55+250*g,{fill:V[Y][2],u:4,stroke:"none",b:z.round(ya/2)}),n=50*g,F.globalAlpha=g,za.f(20,25+sb*n,e-40,n,{fillStyle:"none",stroke:V[Y][1],b:ya}),F.fillStyle=V[Y][1],F.textAlign="center",d="Audio: ",d=1==Sb?d+"ON":d+"OFF",F.fillText(d,.5*e,50+1*n),F.fillText("[Esc] Resume",.5*e,50),d="Reduce Motion: ",d=1==Rb?d+"ON":d+"OFF",F.fillText(d,.5*e,50+2*n),d="Theme: "+V[Y][0]+" ("+(Y+1)+"/"+V.length+")",F.fillText(d,.5*e,50+3*n),0!=P?F.fillText("Back to Level Select",.5*e,50+4*n):(F.font="16px sans-serif",F.fillText("Game by Tom Hermans for js13k 2020",.5*e,50+3.8*n),F.fillText("rough - Copyright (c) 2019 Preet Shihn",.5*e,50+4.2*n),F.fillText("ZzFX - Copyright (c) 2019 Frank Force",.5*e,50+4.6*n)),F.globalAlpha=1):ib||(za.f(-5,-5,85,85,{fill:V[Y][2],u:4,stroke:"none",b:z.round(ya/2)}),F.fillText("[Esc]",50,60),0!=P&&(F.globalAlpha=tb?.25:1,za.f(E.width-160,E.height-80,100,50,{fill:V[Y][2],u:4,stroke:"none",b:z.round(ya/2)}),F.fillText("[R] Retry",E.width-110,E.height-55),F.globalAlpha=0<J.length?1:.25,za.f(E.width-280,E.height-80,100,50,{fill:V[Y][2],u:4,stroke:"none",b:z.round(ya/2)+10}),F.fillText("[Z] Undo",E.width-230,E.height-55)))}Ub=o,window.requestAnimationFrame(ac)}catch(t){console.error("Whoops! The game crashed.",t)}}function gc(t){function a(a,e){if(e(0,0),!eb&&!fb){if(.5>=a.x){var n=(a.y+db+i)%i-a.y;e(r*t,n*t)}else a.x>=r-1.5&&(n=(a.y-db+i)%i-a.y,e(-r*t,n*t));.5>=a.y?e((n=(a.x+cb+r)%r-a.x)*t,i*t):a.y>=i-1.5&&e((n=(a.x-cb+r)%r-a.x)*t,-i*t)}}function e(t,a){var e=1-Math.max(0,Math.min(Gb/.1,1));if(0!=e){var n=z.round(t.x-a.x),o=z.round(t.y-a.y);return 0!=n&&0!=o?0!=Fb?(n-=z.sign(n)*r,o=0):(o-=z.sign(o)*i,n=0):1<z.abs(n)?n-=z.sign(n)*r:1<z.abs(o)&&(o-=z.sign(o)*i),e=fc(e),{x:t.x-n*e,y:t.y-o*e}}return{x:t.x,y:t.y}}var n,r=yb,i=xb,o=0<J.length?e(L,J[J.length-1].B):{x:L.x,y:L.y};if(0<J.length&&!Rb){var b=Math.max(1,Math.min(J.length,7));b=z.min(b,Eb.length-Eb.lastIndexOf(" "));for(var h=0;h<b;h+=1){var l=J.length-b+h;if(0>l||l>J.length||l>Eb.length)break;var s=1;l==J.length-1&&(s=Gb/.1);var u=ic(z.max(.01,(h+s)/b*.25-1/b*.25)),c={x:J[l].B.x,y:J[l].B.y},f=J[l].B.x,p=J[l].B.y;switch(Eb[l].toLowerCase()){case"u":c.y+=.2,p-=1.2*s;break;case"d":c.y-=.2,p+=1.2*s;break;case"l":c.x+=.2,f-=1.2*s;break;case"r":c.x+=.2,f+=1.2*s}a(c,(function(a,e){a=void 0===a?0:a,e=void 0===e?0:e,Fa.line(10+(c.x+.5)*t+a,10+(c.y+.5)*t+e,10+(f+.5)*t+a,10+(p+.5)*t+e,{strokeWidth:.4*t,stroke:u,b:ya+h,ba:.75})}))}}for(b=0;b!=Db.length;b++)H.drawImage(Ta,10+Db[b].x*t-7.5,10+Db[b].y*t-7.5);for(b=0;b!=Bb.length;b++)H.globalAlpha=jc(O,Bb[b].x,Bb[b].y)?1:.7,H.drawImage(Qa,10+Bb[b].x*t-7.5,10+Bb[b].y*t-7.5);for(H.globalAlpha=1,b=0;b!=Cb.length;b++)H.globalAlpha=Cb[b].target<=Xb?.2:1,H.drawImage(Na,10+Cb[b].x*t-5,10+Cb[b].y*t-5);for(H.globalAlpha=1,b=0;b!=Ab.length;b++)H.drawImage(Ga,10+Ab[b].x*t-5,10+Ab[b].y*t-5);for(b=0;b!=T.length;b++)H.globalAlpha=L.x==T[b].x&&L.y==T[b].y?1:.7,H.drawImage(Qa,10+T[b].x*t-7.5,10+T[b].y*t-7.5);for(H.globalAlpha=1,a(L,(function(a,e){H.drawImage(Ja,10+o.x*t+(void 0===a?0:a)+Wa,10+o.y*t+(void 0===e?0:e)+Xa)})),b={m:0};b.m!=O.length;(b={m:b.m}).m++){l=function(a){return function(e,n){e=void 0===e?0:e,n=void 0===n?0:n,H.drawImage(Na,10+d.x*t-5+e,10+d.y*t-5+n),1!=O[a.m].shift&&3!=O[a.m].shift||Ca.line(10+d.x*t+.2*t+e,10+d.y*t+.5*t+n,10+d.x*t+.8*t+e,10+d.y*t+.5*t+n,{stroke:V[Y][4],strokeWidth:t/7,b:ya}),2!=O[a.m].shift&&3!=O[a.m].shift||Ca.line(10+d.x*t+.5*t+e,10+d.y*t+.2*t+n,10+d.x*t+.5*t+e,10+d.y*t+.8*t+n,{stroke:V[Y][4],strokeWidth:t/7,b:ya})}}(b);var d=(n=b.m,0<J.length?e(O[n],J[J.length-1].V[n]):{x:O[n].x,y:O[n].y});a(O[b.m],l)}for(H.textAlign="center",H.textBaseline="middle",H.fillStyle=V[Y][2],H.globalAlpha=1,b=0;b!=T.length;b++)H.font=z.round(.5*t)+"px sans-serif",H.fillText(y[T[b].target][0].a.toString(),10+T[b].x*t+.5*Qa.width-7.5,10+T[b].y*t-7.5+.5*Qa.height),2==Vb[b+1]?(H.font=z.round(.4*t)+"px sans-serif",H.fillText("✓",10+T[b].x*t+.75*Qa.width-7.5,10+T[b].y*t-7.5+.75*Qa.height)):0==Vb[b+1]&&(H.font="bold "+z.round(.25*t)+"px sans-serif",H.fillText("!",10+T[b].x*t+.5*Qa.width-7.5,10+T[b].y*t-7.5+.775*Qa.height));for(H.font=z.round(.4*t)+"px sans-serif",H.textAlign="center",H.textBaseline="middle",H.fillStyle=V[Y][2],b=0;b!=Cb.length;b++)H.globalAlpha=Cb[b].target<=Xb?.2:1,hc(H,Xb+"/"+Cb[b].target,10+Cb[b].x*t+.5*Na.width-5,10+Cb[b].y*t-5+.5*Na.height);H.globalAlpha=1}function ub(t,a){function e(t,a,e){e!=Tb||i||(L={x:t,y:a},i=!0,bb=y[Tb][0].a+": "+y[Tb][0].name+" - [Space] to enter",Pb=0)}a=void 0===a||a,P=t;var n=y[t].slice(),r=n.shift();0==Vb[P]&&(Vb[P]=1),bc(),lb=!0,L={x:0,y:0},Ab.length=0,O.length=0,Bb.length=0,T.length=0,Db.length=0,Xa=Wa=Cb.length=0,tb=!0,ib=!1,ec(P),2==Vb[P]&&0!=P&&(bb+=" ✓"),cb=r.G?r.G:0,db=r.g?r.g:0,eb=r.U?r.U:0,fb=r.Oa?r.U:0;var i=!1,o=null;r.na&&(o=r.na.slice());var b=0;xb=n.length;for(var h=yb=0;h<xb;h++){yb=z.max(yb,n[h].length);for(var l=0;l<n[h].length;l++)switch(n[h].substring(l,l+1).toLowerCase()){case"p":i||(L={x:l,y:h});break;case"#":Ab.push({x:l,y:h});break;case"b":O.push({x:l,y:h,shift:0});break;case"-":O.push({x:l,y:h,shift:1});break;case"|":O.push({x:l,y:h,shift:2});break;case"+":O.push({x:l,y:h,shift:3});break;case"t":Bb.push({x:l,y:h});break;case"1":T.push({x:l,y:h,target:o[0]}),e(l,h,o[0]),o[0]++;break;case"2":if(Xb<r.P[2]){Bb.push({x:l,y:h});break}T.push({x:l,y:h,target:o[1]}),e(l,h,o[1]),o[1]++;break;case"3":if(Xb<r.P[3]){Bb.push({x:l,y:h});break}T.push({x:l,y:h,target:o[2]}),e(l,h,o[2]),o[2]++;break;case"4":if(Xb<r.P[4]){Bb.push({x:l,y:h});break}T.push({x:l,y:h,target:o[3]}),e(l,h,o[3]),o[3]++;break;case"r":Db.push({x:l,y:h});break;case"g":Cb.push({x:l,y:h,target:r.P[b]}),b++}}a?(J=[],Eb="",Lb=0,Kb=Jb):Eb+=" "}function kc(t,a){function e(){return t>=yb?(t-=yb,a-=db,!0):0>t&&(t+=yb,a+=db,!0)}var n=e(),r=a>=xb?(a-=xb,t-=cb,!0):0>a&&(a+=xb,t+=cb,!0);return n||e(),{x:t,y:a,Va:n||r}}function jc(t,a,e){for(var n=0;n!=t.length;n++)if(t[n].x==a&&t[n].y==e)return n;return null}function dc(){return jc(T,L.x,L.y)}function lc(t,a){var e=jc(Cb,t,a);return null!=Cb[e]&&Cb[e].target<=Xb?null:e}function fc(t){return t*(2-t)}function hc(t,a,e,n){t.miterLimit=2,t.strokeStyle=V[Y][2],t.lineWidth=8,t.strokeText(a,e,n),t.fillStyle=V[Y][1],t.fillText(a,e,n)}function cc(t,a){function e(t){0==db&&(gb=-t,Gb=0,(cb-=t)>.5*yb?cb-=yb:cb<.5*-yb&&(cb+=yb))}var n,r="";if(-1==t)r="l";else if(1==t)r="r";else if(1==a)r="d";else{if(-1!=a)return;r="u"}if(0!=t||0!=a){J.push({B:L,V:O.slice(),G:cb,g:db});var i=!1,o=!1;hb=gb=0;var b=kc(L.x+t,L.y+a),h=b.x;b=b.y;var l=jc(O,h,b);if(null!==l){var s=kc(h+t,b+a),u=s.x;s=s.y,null===jc(Ab,u,s)&&null===jc(O,u,s)&&null===jc(Db,u,s)&&(O[l]={x:u,y:s,shift:O[l].shift},L={x:h,y:b},o=i=!0,0!=O[l].shift&&(1!=O[l].shift&&3!=O[l].shift||e(t),2!=O[l].shift&&3!=O[l].shift||(n=a,0==cb&&(hb=-n,Gb=0,(db-=n)>=.5*xb?db-=xb:db<=.5*-xb&&(db+=xb)))))}else null===jc(Ab,h,b)&&null===lc(h,b)&&(L={x:h,y:b},i=!0)}if(i){if(Eb=o?Eb+r.toUpperCase():Eb+r,Gb=0,Fb=t,tb=!1,0==P&&ec(dc(),1),eb&&e(eb),r=!0,o&&0<Bb.length){for(i=0;i!=Bb.length;i++)if(null===jc(O,Bb[i].x,Bb[i].y)){r=!1;break}}else r=!1;r?(2!=Vb[P]&&(Vb[P]=2,Xb++),bc(),kb(4,!0),ib=!0,Kb=0):kb(o?0!=gb||0!=hb?3:10:2)}else 0==t&&0==a||(kb(1),J.pop()),Wa=12*t,Xa=12*a}function kb(t,a){if(a=void 0!==a&&a,Sb&&(Ob>=Nb||a))switch(a||(Ob=0),t){case 0:zzfx.apply(null,[,.3,176,.02,,.08,3,.4,-.7,-21,-127,.01,.05,,,,.38,,.03]);break;case 1:zzfx.apply(null,[,.3,220,.02,,.08,3,.4,-.7,-21,-127,.01,.05,,,,.38,,.03]);case 2:zzfx.apply(null,[.6,.1,176,.02,,.01,3,.4,-.7,-21,-127,.01,.05,,,,.1,,.02]);break;case 10:zzfx.apply(null,[.5,.1,220,.02,,.01,3,.4,-.7,-21,-127,.01,.05,,,,.1,,.02]);break;case 3:zzfx.apply(null,[.45,.1,250,.02,,.01,3,.4,-.7,-21,-127,.01,.05,,,.1,.1,,.02]);break;case 4:zzfx.apply(null,[.6,,934,.12,.38,.93,1,.27,,.4,-434,.08,.2,.1,,.1,.17,.55,1,.46]);break;case 5:zzfx.apply(null,[,,110,,,,1,1.82,,.1,,,,.1,,.1,.01,.7,.02,.15]);break;case 6:zzfx.apply(null,[,,283,.02,,.11,,.38,,,,,.07,,,.1,.08,.63,.02]);break;case 7:zzfx.apply(null,[,.02,1638,,.05,.17,1,,,,490,.09,,,,.1,.05,.5,.03]);break;case 8:zzfx.apply(null,[,,98,.08,.18,.02,2,2.47,36,.5,,,.04,.1,,.9,.44,,.04]);break;case 9:zzfx.apply(null,[,,525,.18,.28,.17,1,1.24,8.3,-9.7,-151,.03,.06,,,,,.93,.02,.14])}}function bc(){for(var t=window.localStorage,a="",e=1;e!=Vb.length;e+=1)a=2==Vb[e]?a+"t":1==Vb[e]?a+"f":a+"n";t.setItem("enf-l",a),t.setItem("enf-c",Y),t.setItem("enf-a",Sb),t.setItem("enf-r",Rb),t.setItem("enf-v",1),0!=Tb&&t.setItem("enf-t",Tb)}function ec(t,a){a=void 0===a?0:a;var e=bb;0==P||Vb.includes(2)?null!=t&&0!=t+a?(bb=y[t+a][0].a+": "+y[t+a][0].name,0==P&&(bb+=" - [Space] to enter")):bb=Vb.includes(2)?"":"WASD/Arrow Keys to move":bb="Push the box to the goal!",e!=bb&&(Pb=0)}function ic(t){var a=V[Y][3],e=da(V[Y][1].match(/\w\w/g).map((function(t){return parseInt(t,16)}))),n=e.next().value,r=e.next().value;e=e.next().value;var i=da(a.match(/\w\w/g).map((function(t){return parseInt(t,16)})));a=i.next().value;var o=i.next().value;return i=i.next().value,"#"+z.round(n+(a-n)*t).toString(16).padStart(2,"0")+z.round(r+(o-r)*t).toString(16).padStart(2,"0")+z.round(e+(i-e)*t).toString(16).padStart(2,"0")}function zb(t){Ja.width=t,Ja.height=t,Ga.width=t+10,Ga.height=t+10,Na.width=t+10,Na.height=t+10,Ta.width=t+15,Ta.height=t+15,Qa.width=t+15,Qa.height=t+15}0<=(Zb=parseInt(Yb.getItem("enf-c"),0))&&Zb<V.length&&(Y=Zb),0<=(Zb=parseInt(Yb.getItem("enf-t"),0))&&Zb<y.length&&(Tb=Zb),"false"==(Zb=Yb.getItem("enf-a"))&&(Sb=!1),Zb=Yb.getItem("enf-r"),Rb="true"==Zb,ub(P),window.requestAnimationFrame(ac)</script>