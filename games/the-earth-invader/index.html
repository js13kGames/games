<!DOCTYPE html><html lang="en"><head><title>Earth Invader</title><script>function distance(e,t,n,r){dX2=Math.pow(n-e,2);dY2=Math.pow(r-t,2);return Math.sqrt(dX2+dY2)}function collision(e,t){space=e.radius+t.radius;if(distance(e.x,e.y,t.x,t.y)<space){return true}else{return false}}function resize(){if(currentcanvas==="mm"){initMainMenu()}else if(currentcanvas==="ls"){initStars();initLevelSelect()}else if(currentcanvas==="gc"){starting=true;initStars();initGame()}}function initStars(){var e=document.getElementById("stars");var t=e.getContext("2d");var n=document.documentElement.clientWidth;var r=document.documentElement.clientHeight;e.width=n;e.height=r;var i=[];var s=["blue","white","red","yellow"];for(var o=0;o<r;o+=Math.round(Math.random()*100)+1){for(var u=0;u<n;u+=Math.round(Math.random()*100)+1){var a=s[Math.round(Math.random()*4)];var f=new Star(u,o,a);i.push(f)}}for(var u=0;u<n;u+=Math.round(Math.random()*100)+1){for(var o=0;o<r;o+=Math.round(Math.random()*100)+1){var a=s[Math.round(Math.random()*4)];var f=new Star(u,o,a);i.push(f)}}render=function(){i.forEach(function(e){e.draw(t)})};render()}function initMainMenu(){initStars();var e=document.getElementById("mainmenu");currentcanvas="mm";var t=e.getContext("2d");winwidth=document.documentElement.clientWidth;winheight=document.documentElement.clientHeight;e.width=winwidth;e.height=winheight;renderops.main=true;e.addEventListener("mousemove",function(t){var n=e.getBoundingClientRect();mouseX=t.clientX-n.left;mouseY=t.clientY-n.top},false);var n=[];n.push({color:"red",width:200,height:75,top:winheight/2+50,left:winwidth/2-100});e.addEventListener("click",function(r){var s=e.offsetLeft;var o=e.offsetTop;var u=r.pageX-s;var a=r.pageY-o;n.forEach(function(n){if(a>n.top&&a<n.top+n.height&&u>n.left&&u<n.left+n.width){t.clearRect(0,0,e.width,e.height);renderops.main=false;i();initLevelSelect();clicksound()}})},false);var r=function(){if(renderops.main){s();requestAnimationFrame(r)}};var i=function(){t.clearRect(0,0,e.width,e.height)};var s=function(){i();t.font="30pt Arial";t.fillStyle="white";t.textAlign="center";t.fillText("Earth Invader",winwidth/2,50);t.font="20pt Arial";t.fillText("WASD to move",winwidth/2,winheight-55);t.fillText("Click and hold to shoot",winwidth/2,winheight-30);t.fillText("P to pause",winwidth/2,winheight-5);n.forEach(function(e){t.fillStyle=e.color;t.fillRect(e.left,e.top,e.width,e.height)});t.fillStyle="black";t.fillText("Start",winwidth/2,winheight/2+100);var e="#";for(var r=0;r<3;r++){e+=(Math.floor(Math.random()*200)+55).toString(16)}t.fillStyle=e;t.fillRect(mouseX+1,mouseY+4,2,8);t.fillRect(mouseX+4,mouseY+1,8,2);t.fillRect(mouseX+1,mouseY-8,2,8);t.fillRect(mouseX-8,mouseY+1,8,2)};r()}function initLevelSelect(){var e=document.getElementById("levelselect");currentcanvas="ls";var t=e.getContext("2d");winwidth=document.documentElement.clientWidth;winheight=document.documentElement.clientHeight;e.width=winwidth;e.height=winheight;score=0;time=0;enemiesKilled=1;var n=false;var r="Normal";if(Options.resize){Options.resize=false;resize()}renderops.levelselect=true;var i="";e.addEventListener("click",function(i){var s=e.offsetLeft;var u=e.offsetTop;var a=i.pageX-s;var f=i.pageY-u;if(f>e.height-150&&f<e.height-150+75&&a>e.width/2-100&&a<e.width/2-100+200){t.clearRect(0,0,e.width,e.height);renderops.levelselect=false;o();clicksound();initGame()}if(f>50&&f<125&&a>e.width/4/2+100&&a<e.width/4/2+100+200){if(Options.difficulty===0){console.log("switching from normal");Options.difficulty=1;r="Hard"}else if(Options.difficulty===1){console.log("switching from hard");Options.difficulty=0;r="Normal"}clicksound()}else if(f>50&&f<125&&a>e.width/2+50+(e.width/2-250)-(e.width/4/2+100)&&a<e.width/2+50+(e.width/2-250)-(e.width/4/2+100)+200){highscore=0;n=true;clicksound()}else if(f>200&&f<275&&a>e.width/4/2+100&&a<e.width/4/2+100+200){Options.planType="fire";clicksound()}else if(f>200&&f<275&&a>e.width/2-250&&a<e.width/2-250+200){Options.planType="air";clicksound()}else if(f>200&&f<275&&a>e.width/2+50&&a<e.width/2+50+200){Options.planType="water";clicksound()}else if(f>200&&f<275&&a>e.width/2+50+(e.width/2-250)-(e.width/4/2+100)&&a<e.width/2+50+(e.width/2-250)-(e.width/4/2+100)+200){Options.planType="rock";clicksound()}else if(f>400&&f<475&&a>e.width/4/2+100&&a<e.width/4/2+100+200){Options.wepType="fire";clicksound()}else if(f>400&&f<475&&a>e.width/2-250&&a<e.width/2-250+200){Options.wepType="air";clicksound()}else if(f>400&&f<475&&a>e.width/2+50&&a<e.width/2+50+200){Options.wepType="water";clicksound()}else if(f>400&&f<475&&a>e.width/2+50+(e.width/2-250)-(e.width/4/2+100)&&a<e.width/2+50+(e.width/2-250)-(e.width/4/2+100)+200){Options.wepType="rock";clicksound()}},false);e.addEventListener("mousemove",function(t){var n=e.getBoundingClientRect();x=t.clientX-n.left;y=t.clientY-n.top;mouseX=t.clientX-n.left;mouseY=t.clientY-n.top;if(y>200&&y<275&&x>e.width/4/2+100&&x<e.width/4/2+100+200){i="Weak against Air, resistant to Water."}else if(y>200&&y<275&&x>e.width/2-250&&x<e.width/2-250+200){i="Weak against Rock, resistant to Fire."}else if(y>200&&y<275&&x>e.width/2+50&&x<e.width/2+50+200){i="Weak against Fire, resistant to Rock."}else if(y>200&&y<275&&x>e.width/2+50+(e.width/2-250)-(e.width/4/2+100)&&x<e.width/2+50+(e.width/2-250)-(e.width/4/2+100)+200){i="Weak against Water, resistant to Air."}else if(y>400&&y<475&&x>e.width/4/2+100&&x<e.width/4/2+100+200){i="Effective against Water, less effective against Air. High RoF, does burn damage over time."}else if(y>400&&y<475&&x>e.width/2-250&&x<e.width/2-250+200){i="Effective against Fire, less effective against Rock. Fires in a spread, pushes enemies back."}else if(y>400&&y<475&&x>e.width/2+50&&x<e.width/2+50+200){i="Effective against Rock, less effective against Fire. Slows down enemies, does splash damage."}else if(y>400&&y<475&&x>e.width/2+50+(e.width/2-250)-(e.width/4/2+100)&&x<e.width/2+50+(e.width/2-250)-(e.width/4/2+100)+200){i="Effective against Air, less effective against Water. High damage per shot, penetrates through enemies."}else{i="Planet type: "+Options.planType+". Weapon type: "+Options.wepType+". Difficulty: "+r+"."}});var s=function(){if(renderops.levelselect){u();requestAnimationFrame(s)}};var o=function(){t.clearRect(0,0,e.width,e.height)};var u=function(){o();t.font="30pt Arial";t.fillStyle="white";t.textAlign="center";t.fillText("Level Select",winwidth/2,50);t.fillStyle="green";t.fillRect(e.width/2-100,e.height-150,200,75);t.fillStyle="black";t.fillText("Play",winwidth/2,winheight-100);t.font="20pt Arial";if(Options.difficulty===0){t.fillStyle="green"}else if(Options.difficulty===1){t.fillStyle="red"}t.fillRect(e.width/4/2+100,50,200,75);t.fillStyle="black";if(Options.difficulty===0){t.fillText("Normal",e.width/4/2+200,100)}else if(Options.difficulty===1){t.fillText("Hard",e.width/4/2+200,100)}t.fillStyle="black";t.fillRect(e.width/2+50+(e.width/2-250)-(e.width/4/2+100),50,200,75);t.fillStyle="white";if(n){t.fillText("Reset!",e.width/2+50+(e.width/2-250)-(e.width/4/2+100)+100,100)}else{t.fillText("Reset Score",e.width/2+50+(e.width/2-250)-(e.width/4/2+100)+100,100)}t.font="20pt Arial";t.fillStyle="white";t.textAlign="center";t.fillText("Select a Planet Type",winwidth/2,150);t.fillStyle="red";t.fillRect(e.width/4/2+100,200,200,75);t.fillStyle="black";t.fillText("Fire",e.width/4/2+200,250);t.fillStyle="white";t.fillRect(e.width/2-250,200,200,75);t.fillStyle="black";t.fillText("Air",e.width/2-150,250);t.fillStyle="blue";t.fillRect(e.width/2+50,200,200,75);t.fillStyle="black";t.fillText("Water",e.width/2+150,250);t.fillStyle="brown";t.fillRect(e.width/2+50+(e.width/2-250)-(e.width/4/2+100),200,200,75);t.fillStyle="black";t.fillText("Rock",e.width/2+50+(e.width/2-250)-(e.width/4/2+100)+100,250);t.font="20pt Arial";t.fillStyle="white";t.textAlign="center";t.fillText("Select a Weapon Type",winwidth/2,350);t.fillStyle="red";t.fillRect(e.width/4/2+100,400,200,75);t.fillStyle="black";t.fillText("Fire",e.width/4/2+200,450);t.fillStyle="white";t.fillRect(e.width/2-250,400,200,75);t.fillStyle="black";t.fillText("Air",e.width/2-150,450);t.fillStyle="blue";t.fillRect(e.width/2+50,400,200,75);t.fillStyle="black";t.fillText("Water",e.width/2+150,450);t.fillStyle="brown";t.fillRect(e.width/2+50+(e.width/2-250)-(e.width/4/2+100),400,200,75);t.fillStyle="black";t.fillText("Rock",e.width/2+50+(e.width/2-250)-(e.width/4/2+100)+100,450);t.font="20pt Arial";t.fillStyle="white";t.textAlign="center";t.fillText(i,winwidth/2,525);var r="#";for(var s=0;s<3;s++){r+=(Math.floor(Math.random()*200)+55).toString(16)}t.fillStyle=r;t.fillRect(mouseX+1,mouseY+4,2,8);t.fillRect(mouseX+4,mouseY+1,8,2);t.fillRect(mouseX+1,mouseY-8,2,8);t.fillRect(mouseX-8,mouseY+1,8,2)};s()}function initGame(){var e=document.createElement("canvas");e.id="game";document.body.appendChild(e);var t=document.getElementById("game");var n=t.getContext("2d");currentcanvas="gc";var r=document.documentElement.clientWidth;var i=document.documentElement.clientHeight;t.width=r;t.height=i;var s=t.width/2;var o=t.height/2;var u=false;var a=false;scoremult=mults[Options.wepType][Options.planType+"score"];var f=false;var l=false;var c=0;var h=[];var p=[];var d=[];var v=[];var m=[];var g=[];var y=Math.round(Math.random()*30)+30;var b=Math.round(Math.random()*2)+1;var w=["air","fire","water","rock","health","invincibility"];var E=[["multishot",winheight-5,"white"],["fastshot",winheight-30,"red"],["splash",winheight-55,"blue"],["penetrate",winheight-80,"brown"],["invincibility",winheight-105,"gold"]];var S=w.indexOf(Options.wepType);w.splice(S,1);score=0;time=0;enemiesKilled=1;var x=new Planet(s,o,"Planet",planTraits[Options.planType].plancolor,planTraits[Options.planType].planstroke,h);var T=new Healthbar(r-310,10,x,false);var N=new Turret(s,45,[d,v],p,g);var C=new Healthbar(10,10,N,false);var k=[[40,40],[40,o],[40,i],[s,40],[s,i],[r-40,40],[r-40,o],[r-40,i-40]];var L=["fire","air","water","rock"];var A=1;var O=14;var M=function(e,t,n){var r=Math.round(Math.random()*20)+60;var i=new Enemy(e,t,10,10,r,n,h,p,false);i.assigntarget(N);i.assignorbit(N);d.push(i);if(A<7){setTimeout(function(){M(e,t,n)},1e3);A+=1}};var _=function(e,t,n){var r=Math.round(Math.random()*20)+60;var i=new Enemy(e,t,30,30,r,n,h,p,true);i.assigntarget(N);i.assignorbit(N);var s=new Healthbar(e,t,i,true);m.push(s);d.push(i)};var D=function(e,t,n){var r=Math.round(Math.random()*20)+80;var i=new Enemy(e,t,10,10,r,n,h,p,false);i.assigntarget(N);i.assignorbit(x);v.push(i);if(O>0){setTimeout(function(){D(e,t,n)},1e3);O-=1}};var P=function(){var e=Math.round(Math.random()*2)+1;for(var t=0;t<e;t++){var n=Math.floor(Math.random()*5);var r=new Powerup(Math.floor(Math.random()*winwidth-20)+10,Math.floor(Math.random()*winheight-20)+10,w[n],g);g.push(r)}W=Date.now();var i=Math.round(Math.random()*30)+30};t.addEventListener("mousedown",function(e){f=true},false);t.addEventListener("mouseup",function(e){f=false},false);t.addEventListener("mousemove",function(e){var n=t.getBoundingClientRect();mouseX=e.clientX-n.left;mouseY=e.clientY-n.top},false);window.addEventListener("keydown",function(e){keysDown[e.keyCode]=true},false);window.addEventListener("keyup",function(e){delete keysDown[e.keyCode];if(e.keyCode===80&&paused){paused=false}else if(e.keyCode===80&&!paused){paused=true}if(e.keyCode===77&&muted){muted=false}else if(e.keyCode===77&&!muted){muted=true}},false);timer=3;setTimeout(function(){timer=2;clicksound();setTimeout(function(){timer=1;clicksound();setTimeout(function(){starting=false;clicksound();M(s,o+100,Options.planType);D(r/2-40,i/2-40,Options.planType)},1e3)},1e3)},1e3);powerups.fastshot.nrof=wepTraits[Options.wepType].rof;var H=function(){var e=Date.now();var t=e-q;if(!u){B(t/1e3);F()}else if(u&&a){I(true)}else if(u&&!a){I(false)}q=e;requestAnimationFrame(H)};var B=function(e){if(!starting){if(!paused){if(powerups.fastshot.toggle){wepTraits[Options.wepType].rof=powerups.fastshot.frof}else{wepTraits[Options.wepType].rof=powerups.fastshot.nrof}if(f){c++;if(c%wepTraits[Options.wepType].rof==1){var n=mouseX-N.x;var s=mouseY-N.y;var o=Math.sqrt(Math.pow(n,2)+Math.pow(s,2));var l=Math.atan2(s,n);if(Options.wepType==="air"||powerups.multishot.toggle){for(var b=-2;b<=2;b++){var w=new Bullet(N.x,N.y,3,Math.cos(l+.3*b),Math.sin(l+.3*b),wepTraits[Options.wepType].speed,wepTraits[Options.wepType].damage,wepTraits[Options.wepType].color,Options.wepType,N,true);if(b!=2){h.push(w)}}}else{var w=new Bullet(N.x,N.y,3,Math.cos(l),Math.sin(l),wepTraits[Options.wepType].speed,wepTraits[Options.wepType].damage,wepTraits[Options.wepType].color,Options.wepType,N,true)}h.push(w)}}d.forEach(function(e){e.update(x,d)});v.forEach(function(e){e.update(x,v)});h.forEach(function(e){e.update(h)});p.forEach(function(e){e.update(p)});m.forEach(function(e){e.update()});g.forEach(function(e){e.update(t)});N.update(e,t);C.update();T.update();x.update();if((Date.now()-U)/1e3>15){U=Date.now();if(d.length<100){A=1;var S=Math.floor(Math.random()*8);M(k[S][0],k[S][1],L[Math.floor(Math.random()*4)])}if(v.length<14){O=14-v.length;D(r/2-40,i/2-40,Options.planType)}}if((Date.now()-z)/1e3>60){z=Date.now();var S=Math.floor(Math.random()*8);_(k[S][0],k[S][1],L[Math.floor(Math.random()*4)])}if((Date.now()-W)/1e3>y){P()}if(x.health<=0){u=true;a=true}else if(N.health<=0){N.alive=false;u=true}if(!u){time=Math.floor((Date.now()-R)/1e3);score=Math.round(enemiesKilled*x.totaldamage/time*10*scoremult)}for(b=0;b<E.length;b++){if(powerups[E[b][0]].timer>0&&powerups[E[b][0]].toggle){powerups[E[b][0]].timer-=1}else if(powerups[E[b][0]].timer<=0&&powerups[E[b][0]].toggle){powerups[E[b][0]].toggle=false;powerups[E[b][0]].timer=1e3}}}}};var j=function(){n.clearRect(0,0,t.width,t.height)};var F=function(){j();x.draw(n);d.forEach(function(e){e.draw(n,d)});v.forEach(function(e){e.draw(n,v)});m.forEach(function(e){e.draw(n)});g.forEach(function(e){e.draw(n)});C.draw(n);T.draw(n);n.font="20pt Arial";n.fillStyle="white";n.textAlign="center";n.fillText(time,winwidth/2,30);N.draw(n);h.forEach(function(e){e.draw(n)});p.forEach(function(e){e.draw(n)});var e="#";for(var t=0;t<3;t++){e+=(Math.floor(Math.random()*200)+55).toString(16)}n.fillStyle=e;n.fillRect(mouseX+1,mouseY+4,2,8);n.fillRect(mouseX+4,mouseY+1,8,2);n.fillRect(mouseX+1,mouseY-10,2,8);n.fillRect(mouseX-10,mouseY+1,8,2);n.font="100pt Impact";if(paused){n.fillStyle="green";n.textAlign="center";n.fillText("Paused",winwidth/2,winheight/2)}if(starting){n.fillStyle="white";n.textAlign="center";n.fillText(timer,winwidth/2,winheight/2)}n.font="20pt Impact";for(t=0;t<E.length;t++){if(powerups[E[t][0]].toggle){n.fillStyle=E[t][2];n.textAlign="left";n.fillText(E[t][0].toUpperCase(),5,E[t][1]);n.fillRect(160,E[t][1]-20,200*(powerups[E[t][0]].timer/1e3),20)}}};var I=function(e){j();if(score>highscore){highscore=score;localStorage.setItem("highscore",JSON.stringify(highscore))}n.font="100pt Impact";if(e){n.fillStyle="green";n.textAlign="center";n.fillText("You Win!",winwidth/2,winheight/2)}else if(!e){n.fillStyle="red";n.textAlign="center";n.fillText("Game Over!",winwidth/2,winheight/2)}n.font="75pt Impact";n.fillText("Score: "+score,winwidth/2,winheight/2+110);n.font="30pt Impact";n.fillText("Highscore: "+highscore,winwidth/2,winheight/2+150);n.fillText("Time: "+time+" seconds",winwidth/2,winheight/2+185);n.fillText("Enemies Killed: "+(enemiesKilled-1),winwidth/2,winheight/2+220);n.font="30pt Arial";n.fillStyle="green";n.fillRect(t.width/2-100,t.height-150,200,75);n.fillStyle="black";n.fillText("Replay",winwidth/2,winheight-100);var r="#";for(var i=0;i<3;i++){r+=(Math.floor(Math.random()*200)+55).toString(16)}n.fillStyle=r;n.fillRect(mouseX+1,mouseY+4,2,8);n.fillRect(mouseX+4,mouseY+1,8,2);n.fillRect(mouseX+1,mouseY-10,2,8);n.fillRect(mouseX-10,mouseY+1,8,2)};t.addEventListener("click",function(r){var i=t.offsetLeft;var s=t.offsetTop;var o=r.pageX-i;var f=r.pageY-s;if(f>t.height-150&&f<t.height-150+75&&o>t.width/2-100&&o<t.width/2-100+200&&u){n.clearRect(0,0,t.width,t.height);u=false;a=false;for(o in d){var l=d.indexOf(o);d.splice(l,1)}for(o in v){var l=v.indexOf(o);d.splice(l,1)}for(o in h){var l=h.indexOf(o);d.splice(l,1)}for(o in p){var l=p.indexOf(o);d.splice(l,1)}for(o in m){var l=m.indexOf(o);d.splice(l,1)}x.alive=false;N.alive=false;renderops.game=false;document.body.removeChild(e);starting=true;time=0;powerups.multishot.toggle=false;powerups.multishot.timer=1e3;powerups.fastshot.toggle=false;powerups.fastshot.timer=1e3;powerups.penetrate.toggle=false;powerups.penetrate.timer=1e3;powerups.splash.toggle=false;powerups.splash.timer=1e3;powerups.invincibility.toggle=false;powerups.invincibility.timer=1e3;Options.resize=true;initLevelSelect()}},false);var q=Date.now();var R=Date.now();var U=Date.now();var z=Date.now();var W=Date.now();H()}var currentcanvas;var keysDown={};var mouseX=0;var mouseY=0;var soundarray=[];var winheight=0;var winwidth=0;var score=0;var enemiesKilled=1;var time=0;var scoremult=1;var paused=false;var starting=true;var timer=3;var highscore=localStorage.getItem("highscore");var sprite_player=new Image;var sprite_fire=new Image;var sprite_rock=new Image;var sprite_water=new Image;var sprite_air=new Image;var boom_fire=new Image;var boom_rock=new Image;var boom_water=new Image;var boom_air=new Image;sprite_player.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAMAAADzN3VRAAAA+VBMVEUAAAAaGRZBQDsiIRoyMS0REAxUT0pKSUM+OzYsKiUpJx/oPxFmYFgWFhLrNgd3dHF3aGBXVVHUy0egiVNbUEfHnDtoQDGvSiyEPyqFKBXAMBHyPA7SNQ769tqBfnzW0G5oZV9+XlJtUkV9d0OYTDmSSC5FQiBPTR85NxwiIBDeNAiJg4CDc2+Tg2LKxFt0YFlfWVTAl1CwllCPe1DIoE3Gt0hwajhWPTLKSSdgXCCyPR2VOBx1bhuSihqoNRpUJhTgPxMCAgL8+vLx77/587OEaVqWbFmubkysXEpeXEB8Uj3KkzrToTLisy6fmCdsLxyvlhe8sxH0Iw3AHj8YAAAAAXRSTlMAQObYZgAAAR9JREFUKM+l0WlXglAQBmDvwr2XC7ggASqm7Eilpqm5ZNm+b///xxQWUVSffD/Oc2bOmZnCpin+U5ekE0n6o75/eavrpu/ZeTjYkyljEFba27+AMBEzSPulnR+jhjLFCAGRMSp/p61hf6UAgFDSpcnl6y+palARQDQNowhPljrxUhhDzAEK3FbrMeRPljkx14s1hA5QgKJ0pq3mmXp0XKvP58s4kdcHVUiiuN3Tpvpcq8eWZcXFj56AcwDAzah5vu7xzVl6ppFLMUdo0VVfQrFWnDlGKoVBj0AR8fEiELFe9+zDbJ9qOSGAuMiI07tIJKMKBCsBQ1ppl3Yz+CSEaQK5k94PyppGCJFTyHJ3ZRiG79jZqCwN6f2r+WJqhQ3zBgiwHGmiI+BQAAAAAElFTkSuQmCC";sprite_fire.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMBAMAAACkW0HUAAAAJ1BMVEUAAAD/kwD/fwD/nQD/xgD/vgD/0wD/hwD/6AD/swD/qAD/3AD/dwDjrSRSAAAAAXRSTlMAQObYZgAAAFhJREFUCNdjYGAwzWAAAkH1sB0MDOxKxlOzGxiYziiudNvAYHSo0HhKBoO6sqDVEm+GQ4LCUqFuDEZKhZJAilGwfOqUBAZ2ReGV3g1A7VIhO0DGWHkwMAAAMMMS9FP4uwAAAAAASUVORK5CYII=";sprite_rock.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMBAMAAACkW0HUAAAAG1BMVEUAAACDQBFvNw+WTBeKRBN2OxBiMQ6QSBVIJQ0e7G3aAAAAAXRSTlMAQObYZgAAAFRJREFUCB0FwUEKgCAQQNEPdgAVxf2ArhO7QBS0no7gIlwWdIbO3XtAawBtdRuYGjXMmCjiLIcvXRPPOb4cqDI+CSy+XDkxeelqMS6q3rCsLgG8O/zaXAvNfQ96oAAAAABJRU5ErkJggg==";sprite_water.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAM1BMVEUAAACE0vsJgsETicYKebIgkswIfrsLdKoRgbo0oNdCqd46pd0disBXt+cwnNN8zvdtxfMmMafIAAAAAnRSTlMAEoUqvHAAAABbSURBVAjXJY3JEcAwCAMdcxpf6b/aCLIv7YCggUdA+5mDeldfmUdQp67MDAlB5iVutYTM+52wzGp+7yZrJ/cNk6CcVNuJFKUjOAxVqzcwgH5aHBFxbsUTsur/B9V6As3dixo5AAAAAElFTkSuQmCC";sprite_air.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMBAMAAACkW0HUAAAAJFBMVEUAAADs7Ozo5+fv7u7a1tbo5+fj39/d2trSzs7Iw8O7tbWsqKgpHvYvAAAAA3RSTlMAOSIhkgiAAAAAWklEQVQI12NgEDQOUWRgYAw1NvUUYFBNdynNWMigbGya4tLAYGxsbOrRxWBs4u7iMZshLL28pGM1SDCsYjYDq7GxWcUsBtGwFBePRQyM6cVmngoMDELGZkwMADJcE8vDAZzpAAAAAElFTkSuQmCC";boom_fire.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAMAAAAolt3jAAAARVBMVEUAAAD/Og3/MQ7/dgP/kAP/agX/VQf/iAP/SQn/Owv/HRH/fgT/Swj/YQb/ZQX/hwD/Kw7/GRH/FBP/pwH/mwL/zAD/uQH8kbg4AAAAE3RSTlMABAr8/vv7/fn1E/7s+e4e8/EtiDeSTQAAAIJJREFUCB0FwYcBwzAMBLF7kupylZz9Rw0AuiS4pwEde54GMwN6DKzVpOpCrQqkw49ZkqUkoEsevt0DRM0Zj71iD3Fhp49Yv+8XnmQAp+/v+1bx1ABS2WutFV0XVtPwWCNK6RL5OO30neMYGWMCs6RWqLmDAa28dzLVbEjXna2/VQB/9KkFByfSWq4AAAAASUVORK5CYII=";boom_rock.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOBAMAAADtZjDiAAAAMFBMVEWLcw1+Zw6Cag9zXA6IcQ90XhB6Yw6ReQ1kTg9tVw9/aA9kThBnUQ+ZgA6Mcw+tkRcIyT11AAAADXRSTlMCCv4V/P39/fz69XzZbo3lQQAAAHJJREFUCNdjYGAQ4GIEkmILGZYwGDkycGgxqAMhA2PfgndsF4ASba6x6gxAYKkUe0+AgcHQSun9tam7Ge7evfv/ikoag2BH6/8nzMJAY/ruPgMZJOJaniooyMDgZFwgOpmRgSmRsUBgDjMDpwGzI+NURgDNzRvdY8ialAAAAABJRU5ErkJggg==";boom_water.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAMAAAAolt3jAAAAWlBMVEUAAAAwdcwxe84rgc4zdMwxh9A4jdMqe8w6ldYpd8tAoNocZsVIpt1DkdY5ktQxidE2kNQxf88veMw9itI3jNM4idEjbsg6jtNIoNo6mNdKs+AzjNJRvuREqtw2p81NAAAAGXRSTlMABw/7HP39/PPy/vIlFf3w9OmmUMGki2WIXxOO3gAAAIxJREFUCB0FwYUBwzAQALF7MIdTst3uv2YlEBfkkQUQRWJxYd8ElqzIFZ8rRwfP2cE/dq85iu71CYo+UuvzbbWs4O4vCzXYLywIR7AUbIwRb0UxC6HX73fEGexEWJr9xqgxWdkRtPU5e+xvREHalq40r213FF5bWrVMvfupsB5N8BKFJZ8CCiwlOKjIH6dABrw3FL34AAAAAElFTkSuQmCC";boom_air.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAMAAAAolt3jAAAAY1BMVEUAAADo4eHx7e3u5+fUy8vi2tra09PVysrv7Ozs5ubc09Pf2dnPxsbo4+PZ0tLw7u7CsrLi2dn08/PVzMzh29vn5OS/s7P+/Pzz8vLEtbXz8fHn4+PNwMDr5eXr4+P18vLd09OP7aMuAAAAHnRSTlMA/P7+Cf35+PTyR/X17u3bLxX15uO/hksf8eaglGdMQRepAAAAe0lEQVQIHQXBh0EDMRAAMJ3t7z2dBPzZf0okYNzuUJ7Ggld/w2tdvNfxUPpgn+Lp0y9j2Yds7zKs/XBta/r7nuBoI+ea4pxBeXRRa/1GB4+fuWuaFE1Oqbm6D0PUqLVmHNDWlM8zA0w1STmh4LcJtJcFzDGB2wUAhW3jH7FEBefzYq9lAAAAAElFTkSuQmCC";var renderops={main:false,levelselect:false,game:false};var Options={planType:"fire",wepType:"fire",volume:.1,difficulty:0,resize:false};var powerups={multishot:{toggle:false,timer:1e3},fastshot:{toggle:false,nrof:15,frof:12,timer:1e3},penetrate:{toggle:false,timer:1e3},splash:{toggle:false,timer:1e3},invincibility:{toggle:false,timer:1e3}};var planTraits={fire:{plancolor:"#F72A0A",planstroke:"#CF2308"},air:{plancolor:"#DEDEDE",planstroke:"#BFBFBF"},water:{plancolor:"#076DF2",planstroke:"#0658C4"},rock:{plancolor:"#6B4303",planstroke:"#593802"}};var wepTraits={fire:{color:"orange",rof:5,speed:15,damage:3},air:{color:"ghostwhite",rof:50,speed:15,damage:20},water:{color:"deepskyblue",rof:20,speed:20,damage:10},rock:{color:"saddlebrown",rof:30,speed:10,damage:25}};var enemyTraits={fire:{img:sprite_fire,boom:boom_fire,speed:4,rof:20,health:100,damage:10,bulletColor:"orange"},air:{img:sprite_air,boom:boom_air,speed:5,rof:100,health:50,damage:5,bulletColor:"ghostwhite"},water:{img:sprite_water,boom:boom_water,speed:3,rof:100,health:150,damage:15,bulletColor:"deepskyblue"},rock:{img:sprite_rock,boom:boom_rock,speed:2,rof:100,health:200,damage:20,bulletColor:"saddlebrown"}};var mults={fire:{waterdmg:1.5,waterscore:.5,airdmg:.5,airscore:1.5,firedmg:1,firescore:1,rockdmg:1,rockscore:1},air:{waterdmg:1,waterscore:1,airdmg:1,airscore:1,firedmg:1.5,firescore:.5,rockdmg:.5,rockscore:1.5},water:{waterdmg:1,waterscore:1,airdmg:1,airscore:1,firedmg:.5,firescore:1.5,rockdmg:1.5,rockscore:.5},rock:{waterdmg:.5,waterscore:1.5,airdmg:1.5,airscore:.5,firedmg:1,firescore:1,rockdmg:1,rockscore:1}};var clicksound=function(){var e=new Audio;e.src="assets/click.wav";e.volume=Options.volume;e.play()};Bullet=function(e,t,n,r,i,s,o,u,a,f,l){this.x=e;this.y=t;this.radius=n;this.dx=r;this.dy=i;this.speed=s;this.damage=o;this.color=u;this.alive=true;this.owner=f;this.playershot=l;this.rotation=0;this.penetratecount=0;this.currentenemy=0;this.penetrate=false;this.type=a;if((this.type==="rock"||powerups.penetrate.toggle)&&this.playershot){this.penetrate=true;this.radius=4}};Bullet.prototype.update=function(e){if(this.alive){if(this.x<0||this.x>winwidth||this.y<0||this.y>winheight||this.type==="fire"&&distance(this.x,this.y,this.owner.x,this.owner.y)>250&&this.playershot||this.penetratecount>3){this.kill(e)}else{this.x+=this.speed*this.dx;this.y+=this.speed*this.dy}}else{this.kill(e)}};Bullet.prototype.draw=function(e){if(this.alive){e.save();e.translate(this.x,this.y);e.beginPath();e.fillStyle=this.color;e.arc(0,0,this.radius,0,2*Math.PI);e.fill();e.restore()}};Bullet.prototype.kill=function(e){this.alive=false;var t=e.indexOf(this);e.splice(t,1)};Enemy=function(e,t,n,r,i,s,o,u,a){this.x=e;this.y=t;this.width=n;this.height=r;this.isboss=a;this.type=s;this.speed=enemyTraits[this.type].speed;this.orbit=i;this.health=enemyTraits[this.type].health;this.damage=enemyTraits[this.type].damage;this.damagemult=1;this.rof=enemyTraits[this.type].rof;this.count=0;this.trigger=Math.floor(Math.random()*this.rof);this.pBullets=o;this.eBullets=u;this.burncount=0;this.slowcount=0;this.dmgcount=0;this.splashcount=0;this.radius=this.width*1.2;this.alive=true;this.explode=false;this.shield=0;this.rotation=0;if(this.isboss){this.shield=this.health*2;this.health*=10;this.speed=3;this.damage*=3;this.dmgcount=0;this.maxshield=this.shield}this.slowspeed=this.speed/2;this.normspeed=this.speed;this.regen=false};Enemy.prototype.assigntarget=function(e){this.player=e};Enemy.prototype.assignorbit=function(e){this.orbitthis=e};Enemy.prototype.update=function(e,t){if(!(this.player===undefined)&&this.alive){this.count=(this.count+1)%this.rof;var n=n;var r=t;if(Options.difficulty===0){this.orbitcheck=this.orbitthis.name!=="Planet"}else{this.orbitcheck=true}this.playerX=this.player.x;this.playerY=this.player.y;var i=this.playerX-this.x;var s=this.playerY-this.y;var o=Math.sqrt(i*i+s*s);i=i/o;s=s/o;this.orbitX=this.orbitthis.x;this.orbitY=this.orbitthis.y;var u=this.orbitX-this.x;var a=this.orbitY-this.y;var f=Math.sqrt(u*u+a*a);u=u/o;a=a/o;this.rotation=Math.atan2(s,i);if(f>this.orbit+5||this.orbitthis.shield<=0){this.angle=Math.atan2(a,u)+Math.PI;this.x+=u*this.speed;this.y+=a*this.speed}else if(f<this.orbit-5){this.angle=Math.atan2(a,u)+Math.PI;this.x-=u*this.speed*2;this.y-=a*this.speed*2}else{this.angle-=.02;this.x=f*Math.cos(this.angle)+this.orbitthis.x;this.y=f*Math.sin(this.angle)+this.orbitthis.y}if(this.slowcount>0){this.slowcount--;this.speed=this.slowspeed}else{this.speed=this.normspeed}if(this.burncount>0){this.burncount--;this.health--}if(this.dmgcount>0){this.dmgcount--}if(this.splashcount>0){this.splashcount--}if(this.shield<this.maxshield&&this.shield>=0&&this.dmgcount==0){this.shield+=.25;this.regen=false}if(this.shield>0){this.radius=60}if(this.shield<=0){this.radius=this.width*1.2}if(this.shield<0){this.shield=0;this.dmgcount=300;this.regen=true}if(this.count==this.trigger&&this.orbitcheck){if(this.isboss){var l=new Bullet(this.x,this.y,6,i,s,8,this.damage,enemyTraits[this.type].bulletColor,this.type,this,false)}else{var l=new Bullet(this.x,this.y,3,i,s,8,this.damage,enemyTraits[this.type].bulletColor,this.type,this,false)}this.eBullets.push(l)}for(var c=0;c<this.pBullets.length;c++){this.damagemult=mults[Options.wepType][this.type+"dmg"];if(this.pBullets[c].alive&&collision(this,this.pBullets[c])&&this.shield>0){if(!this.pBullets[c].penetrate){this.pBullets[c].alive=false;this.shield-=wepTraits[Options.wepType].damage*this.damagemult}else if(this.pBullets[c].penetrate&&this!==this.pBullets[c].currentenemy){this.pBullets[c].currentenemy=this;this.pBullets[c].penetratecount+=1;this.shield-=wepTraits[Options.wepType].damage*this.damagemult}if(Options.wepType==="water"||powerups.splash.toggle){r.forEach(function(e){if(e!==this){if(distance(this.x,this.y,e.x,e.y)<=250){this.splashcount=10;e.slowcount=100;if(e.shield>0){e.shield-=wepTraits[Options.wepType].damage*this.damagemult}else{e.health-=wepTraits[Options.wepType].damage*this.damagemult}}}});this.slowcount=100}if(Options.wepType==="fire"){this.burncount=100}if(Options.wepType==="air"){this.angle=Math.atan2(s,i)+Math.PI;this.x-=i*this.speed*30;this.y-=s*this.speed*30}if(!this.regen){this.dmgcount=100}}if(this.pBullets[c].alive&&collision(this,this.pBullets[c])&&this.health>0){if(!this.pBullets[c].penetrate){this.pBullets[c].alive=false;this.health-=wepTraits[Options.wepType].damage*this.damagemult}else if(this.pBullets[c].penetrate&&this!==this.pBullets[c].currentenemy){this.pBullets[c].currentenemy=this;this.pBullets[c].penetratecount+=1;this.health-=wepTraits[Options.wepType].damage*this.damagemult}if(Options.wepType==="water"||powerups.splash.toggle){r.forEach(function(e){if(e!==this){if(distance(this.x,this.y,e.x,e.y)<=250){this.splashcount=10;e.slowcount=100;if(e.shield>0){e.shield-=wepTraits[Options.wepType].damage*this.damagemult}else{e.health-=wepTraits[Options.wepType].damage*this.damagemult}}}});this.slowcount=100}if(Options.wepType==="fire"){this.burncount=100}if(Options.wepType==="air"){this.angle=Math.atan2(s,i)+Math.PI;this.x-=i*this.speed*30;this.y-=s*this.speed*30}}else if(this.pBullets[c].alive&&collision(this,this.pBullets[c])){this.alive=false;enemiesKilled+=1;this.explode=1}}}};Enemy.prototype.draw=function(e,t){if(this.alive){e.save();e.translate(this.x,this.y);e.rotate(this.rotation);if(this.isboss){e.drawImage(enemyTraits[this.type].img,-18,-18,36,36);var n="#";for(var r=0;r<3;r++){n+=(Math.floor(Math.random()*200)+55).toString(16)}e.beginPath();e.arc(0,0,60,0,2*Math.PI,false);e.lineWidth=4;e.strokeStyle=n;if(this.shield>0){e.stroke()}e.closePath()}else{e.drawImage(enemyTraits[this.type].img,-6,-6)}if(this.burncount>0){e.globalAlpha=.75;if(this.isboss){e.drawImage(enemyTraits.fire.boom,-20,-20,40,40)}else{e.drawImage(enemyTraits.fire.boom,-10,-10,20,20)}e.globalAlpha=1}if(this.splashcount>0){e.globalAlpha=.75;e.drawImage(enemyTraits.water.boom,-30,-30,60,60);e.globalAlpha=1}e.restore()}else if(this.explode){e.save();e.translate(this.x,this.y);e.rotate(this.rotation);if(this.isboss){e.drawImage(enemyTraits[this.type].boom,-24,-24,48,48)}else{e.drawImage(enemyTraits[this.type].boom,-14,-14,28,28)}e.restore();this.explode=(this.explode+1)%7}else if(!this.alive&&!this.boom){var i=t.indexOf(this);t.splice(i,1)}};Healthbar=function(e,t,n,r){this.x=e;this.y=t;this.owner=n;this.maxhealth=n.health;this.health=n.health;this.healthpercent=1;this.name=n.name;this.ismini=r;this.alive=true;if(n.shield){this.maxshield=n.shield;this.shield=n.shield;this.shieldpercent=1}};Healthbar.prototype.update=function(){this.health=this.owner.health;this.healthpercent=this.health/this.maxhealth;this.alive=this.owner.alive;if(this.shield!==false&&this.owner.shield!==false){this.shield=this.owner.shield;this.shieldpercent=this.shield/this.maxshield}if(!this.alive){delete this}};Healthbar.prototype.draw=function(e){if(this.alive){e.beginPath();e.fillStyle="red";if(this.ismini){e.fillRect(this.owner.x-50,this.owner.y-45,100*this.healthpercent,5)}else{e.fillRect(this.x,this.y,300*this.healthpercent,20)}e.font="12pt Arial";e.fillStyle="white";e.textAlign="center";if(!this.ismini){e.fillText(this.name,this.x+150,this.y+15)}if(this.shield>0){e.fillStyle="blue";if(this.ismini){e.fillRect(this.owner.x-50,this.owner.y-35,100*this.shieldpercent,5)}else{e.fillRect(this.x,this.y+30,300*this.shieldpercent,20)}e.font="12pt Arial";e.fillStyle="white";e.textAlign="center";if(!this.ismini){e.fillText("Shields",this.x+150,this.y+45)}}else if(this.shield<=0){e.fillStyle="white";e.font="12pt Arial";e.textAlign="center";if(!this.ismini){e.fillText("Shields down!",this.x+150,this.y+45)}}e.closePath()}};Planet=function(e,t,n,r,i,s){this.x=e;this.y=t;this.health=1e4;this.shield=6e3;this.name=n;this.radius=100;this.color=r;this.bullets=s;this.stroke=i;this.alive=true;this.damagemult=1;this.totaldamage=1;this.dmgcount=0;this.regen=false};Planet.prototype.update=function(){for(var e=0;e<this.bullets.length;e++){this.damagemult=mults[Options.wepType][Options.planType+"dmg"];if(this.bullets[e].alive&&collision(this,this.bullets[e])&&this.shield>0){this.shield-=wepTraits[Options.wepType].damage*this.damagemult;this.totaldamage+=wepTraits[Options.wepType].damage*this.damagemult;if(!this.regen){this.dmgcount=180}this.bullets[e].alive=false}else if(this.bullets[e].alive&&collision(this,this.bullets[e])&&this.health>0){this.radius=70;this.health-=wepTraits[Options.wepType].damage*this.damagemult;this.totaldamage+=wepTraits[Options.wepType].damage*this.damagemult;this.bullets[e].alive=false}else if(this.bullets[e].alive&&collision(this,this.bullets[e])){this.bullets[e].alive=false;this.alive=false}}if(this.dmgcount>0){this.dmgcount--}if(this.shield<6e3&&this.shield>=0&&this.dmgcount==0){this.shield+=.25;this.regen=false}if(this.shield>0){this.radius=135}if(this.shield<=0){this.radius=70}if(this.shield<0){this.shield=0;this.dmgcount=1500;this.regen=true}if(this.health<=0){this.health=0;this.alive=true}};Planet.prototype.draw=function(e){if(this.alive){e.beginPath();e.arc(this.x,this.y,70,0,2*Math.PI,false);e.fillStyle=this.color;e.fill();e.lineWidth=5;e.strokeStyle=this.stroke;e.stroke();var t="#";for(var n=0;n<3;n++){t+=(Math.floor(Math.random()*200)+55).toString(16)}e.beginPath();e.arc(this.x,this.y,135,0,2*Math.PI,false);e.lineWidth=7;e.strokeStyle=t;if(this.shield>0){e.stroke()}e.closePath()}};Powerup=function(e,t,n,r){this.x=e;this.y=t;this.type=n;this.name="powerup";this.color="white";if(this.type==="air"){this.name="MULTISHOT";this.color="white"}else if(this.type==="fire"){this.name="FASTSHOT";this.color="red"}else if(this.type==="water"){this.name="SPLASHSHOT";this.color="blue"}else if(this.type==="rock"){this.name="PENETRATE";this.color="brown"}else if(this.type==="health"){this.name="HEALTH";this.color="maroon"}else if(this.type==="invincibility"){this.name="INVINCIBILITY";this.color="gold"}this.radius=5;this.alive=true;this.powerups=r;this.timer=500;this.vx=Math.floor(Math.random()*4)-2;this.vy=Math.floor(Math.random()*4)-2};Powerup.prototype.update=function(e){if(this.alive){this.x+=this.vx;this.y+=this.vy;if(this.vx===0){this.vx=Math.floor(Math.random()*4)-2}if(this.vy===0){this.vy=Math.floor(Math.random()*4)-2}if(this.x<0||this.x>e.width){this.vx*=-1}if(this.y<0||this.y>e.height){this.vy*=-1}if(this.timer>0){this.timer--}else{this.alive=false;var t=this.powerups.indexOf(this);this.powerups.splice(t,1)}}else{var t=this.powerups.indexOf(this);this.powerups.splice(t,1)}};Powerup.prototype.draw=function(e){if(this.alive){e.save();e.translate(this.x,this.y);e.beginPath();e.fillStyle=this.color;e.arc(0,0,this.radius,0,2*Math.PI);e.fill();e.restore();e.font="12pt Arial";e.textAlign="center";e.fillStyle=this.color;e.fillText(this.name,this.x,this.y-15)}};Star=function(e,t,n){this.x=e;this.y=t;this.color=n};Star.prototype.draw=function(e){e.beginPath();e.arc(this.x,this.y,1,0,2*Math.PI,false);e.fillStyle=this.color;e.fill()};Turret=function(e,t,n,r,i){this.x=e;this.y=t;this.speed=200;this.health=1e3;this.shield=400;this.direction=0;this.dmgcount=0;this.powerups=i;this.name="Player";this.radius=40;this.eArrays=n;this.eBullets=r;this.alive=true;this.regen=false};Turret.prototype.checkCollision=function(e,t,n){for(var r=0;r<e.length;r++){if(n&&collision(this,e[r])){if(e[r].type==="air"){if(!powerups.multishot.toggle){powerups.multishot.toggle=true}else{powerups.multishot.timer=1e3}}else if(e[r].type==="fire"){if(!powerups.fastshot.toggle){powerups.fastshot.toggle=true}else{powerups.fastshot.timer=1e3}}else if(e[r].type==="water"){if(!powerups.splash.toggle){powerups.splash.toggle=true}else{powerups.splash.timer=1e3}}else if(e[r].type==="rock"){if(!powerups.penetrate.toggle){powerups.penetrate.toggle=true}else{powerups.penetrate.timer=1e3}}else if(e[r].type==="health"){this.health=1e3;this.shield=400}else if(e[r].type==="invincibility"){if(!powerups.invincibility.toggle){powerups.invincibility.toggle=true}else{powerups.invincibility.timer=1e3}}e[r].alive=false}else{if(e[r].alive&&collision(this,e[r])){if(this.shield>0&&!powerups.invincibility.toggle){if(t){this.shield-=e[r].damage;e[r].alive=false}else{this.shield-=20}if(!this.regen){this.dmgcount=120}}else if(this.shield<=0&&this.health>0&&!powerups.invincibility.toggle){if(t){this.health-=20;e[r].alive=false}else{this.health-=e[r].damage}}}}}};Turret.prototype.update=function(e,t){if(65 in keysDown){if(this.x>0){this.x-=this.speed*e}else{this.x=t.width}}if(87 in keysDown){if(this.y>0){this.y-=this.speed*e}else{this.y=t.height}}if(68 in keysDown){if(this.x<t.width){this.x+=this.speed*e}else{this.x=0}}if(83 in keysDown){if(this.y<t.height){this.y+=this.speed*e}else{this.y=0}}var n=this.findDirection(mouseX,mouseY);for(var r=0;r<this.eArrays.length;r++){this.checkCollision(this.eArrays[r],false,false)}this.checkCollision(this.eBullets,true,false);this.checkCollision(this.powerups,false,true);if(this.dmgcount>0){this.dmgcount--}if(this.shield<400&&this.shield>=0&&this.dmgcount==0){this.shield+=.25;this.regen=false}if(this.shield>0){this.radius=40}if(this.shield<=0){this.radius=10}if(this.shield<0){this.shield=0;this.dmgcount=540;this.regen=true}if(this.health<0){this.health=0;this.alive=false}this.direction+=n};Turret.prototype.draw=function(e){if(this.alive){e.save();e.translate(this.x,this.y);e.rotate(this.direction);var t="#";for(var n=0;n<3;n++){t+=(Math.floor(Math.random()*200)+55).toString(16)}e.beginPath();e.arc(0,0,40,0,2*Math.PI,false);e.lineWidth=4;e.strokeStyle=t;if(this.shield>0){e.stroke()}e.closePath();e.drawImage(sprite_player,-12,-12);e.restore()}};Turret.prototype.findDirection=function(e,t){var n=this.x-e;var r=this.y-t;var i=Math.atan2(r,n);var s=i-this.direction;return s}</script><style>canvas{position: absolute;cursor: none;}</style></head><body onload="initMainMenu()" onresize="resize()" onorientationchange="resize()" style="margin: 0;padding: 0;background-color: black;overflow: hidden;"><canvas id="stars"></canvas><canvas id="mainmenu"></canvas><canvas id="levelselect"></canvas></body></html>