<head><title>Fateful Encounter - js13kGames 2025</title><style>.d-flex{display:flex}:root{background:lightgreen;height:100%;width:100%}.reverse{transform:scale(-1, 1)}.field{flex-flow:column;height:100%;width:100%}#eden{position:relative;height:calc(100% - 102px);width:calc(100% - 60px);&:hover{cursor:grab}}#cat *{position:absolute}#cat{height:60px;width:60px;position:absolute;&.adult{transform:scale(0.8)}&:not(.adult){transform:scale(0.6)}&:active{cursor:grabbing}}.head{height:50%;width:70%}.ear{height:50%;width:50%;background:linear-gradient(to right, var(--secondary) 50%, pink 50%);clip-path:polygon(0 100%, 50% 0, 100% 100%);&.l{left:-10%;transform:rotate(-40deg) scaleX(-1)}&.r{left:60%;transform:rotate(30deg)}}.face{top:20%;height:100%;width:100%;background:var(--primary);border-radius:50%}.eye{top:25%;height:8px;width:8px;border-radius:50%;border:1px solid white;&.l{background:var(--secondary);left:20%;}&.r{background:var(--third);left:60%;}}.mouse{top:60%;left:50%;height:4px;width:4px;border:1px solid;border-color:white white transparent transparent;transform:translateX(-50%) rotate(-45deg)}.body{top:50%;left:10%;height:40%;width:60%;background:var(--secondary);border-radius:50px 50px 20px 20px}.tail{top:60%;left:55%;height:10%;width:50%;background:var(--third);border-radius:0 10px 10px 0;transform:rotate(-45deg);}</style></head><body style=margin:0><div id=cat draggable=true><div class=tail></div><div class=body></div><div class=head><div class="ear l"></div><div class="ear r"></div><div class=face><div class="eye l"><div></div></div><div class="eye r"><div></div></div><div class=mouse></div></div></div></div><div class="d-flex field"><div>Month: <span id=month>0</span></div><div class=d-flex>Speed: <input id=speed type=range min=1 max=5 value=1></div><div id=eden></div></div><script>const e=(e,t,r)=>Math.min(Math.max(e,r),t),t=(e=0,l=0)=>{const{quotient:n,remainder:a}=(o=l,{quotient:Math.floor(o/12),remainder:o%12});var o;const s=r(e+n,a);return{id:"age",text:s,equal:e=>s===e.text,increment:()=>t(e+n,a+1)}},r=(e,t)=>t<2?`${e}y/o ${t}mo.`:`${e}y/o ${t}mos.`,l=e=>e?"XX":"XY",n=document,a=e=>n.querySelector(e),o=e=>Math.floor(Math.random()*e),s=(e,t)=>setTimeout(e,1e3*t),m=(e,t,r)=>e-r<=t&&e+r>=t,i=a("#month"),c=(()=>{const e=a("#cat");var t;return e&&(t=e,n.body.removeChild(t)),()=>(e=>e?.cloneNode(!0))(e)})(),d=["#000","darkslateblue","palevioletred","brown","darkgoldenrod"];let f,y=!0;const p=r=>{const l=c();return l.addEventListener("dragstart",()=>{y=!1}),l.addEventListener("dragend",t=>{clearTimeout(f),f=s(()=>{y=!0},5/Number(g.value));const r=t.target.parentElement,{offsetHeight:l,offsetWidth:n}=r??{offsetHeight:0,offsetWidth:0},a=e((t.y-72)/l*100,100,0);t.target.style.top=`${a}%`;const o=e((t.x-24)/n*100,100,0);t.target.style.left=`${o}%`}),l.style.setProperty("--primary",d[o(d.length)]),l.style.setProperty("--secondary",d[o(d.length)]),l.style.setProperty("--third",d[o(d.length)]),{age:t(),element:l,sex:r,coolTime:12,top:0,left:0}},u=t(1),h=t(10),g=a("#speed"),x=e=>{y&&e.forEach(e=>{e.age=e.age.increment(),u.equal(e.age)&&(e.element.className="adult"),e.coolTime&&e.coolTime--,e.element.style.top=`${o(100)}%`,e.element.style.left=`${o(100)}%`});const t=e.filter(e=>!h.equal(e.age)),{females:r,males:n}=t.filter(e=>!e.coolTime).reduce((e,t)=>{const{females:r,males:l}=e;return"XX"===t.sex?{females:r,males:[...l,t]}:{females:[...r,t],males:l}},{females:[],males:[]}),c=t.concat(n.flatMap(e=>{const t=r.find(t=>((e,t)=>{const r={x:parseInt(e.element.style.left,10),y:parseInt(e.element.style.top,10)},l={x:parseInt(t.element.style.left,10),y:parseInt(t.element.style.top,10)};return m(r.y,l.y,5)&&m(r.x,l.x,5)})(e,t));return 0===t?.coolTime?(t.coolTime=6,(e=>{const{start:t=0,step:r=1}={start:0,step:1},l=1/r;return Array.from({length:Math.ceil((e-t+r)/r)},(e,r)=>(t*l+r)/l)})(o(5)).map(()=>p(l(o(2)>1)))):[]}).filter(e=>e));((e,t)=>{const r=a("#eden");r&&((e=>{for(;e.firstChild;)e.removeChild(e.firstChild)})(r),((e,t)=>{t.forEach(t=>{e.appendChild(t)})})(r,t))})(0,c.map(e=>e.element)),i.innerHTML=String(Number(i.innerHTML)+1),s(()=>x(c),5/Number(g.value))};x([!0,!0,!1,!1].map(e=>p(l(e))))</script>