<title>Black Cat Detective Agency - js13kGames 2025</title><canvas id=c></canvas><canvas id=c2></canvas><script>function o(e,t,n){const o=n||function(e){const t={};return Object.keys(e).filter(r).forEach(function(e){t["a_"+e]=e}),t}(t),a={};return Object.keys(o).forEach(function(n){var r,l,d,f,h=o[n],u=t[h];u.value?a[n]={value:u.value}:(r=i(u,h),l=c(e,r),h=u.numComponents||r.numComponents||s(h),d=e,u=(f=r)instanceof Int8Array?d.BYTE:f instanceof Uint8Array?d.UNSIGNED_BYTE:f instanceof Int16Array?d.SHORT:f instanceof Uint16Array?d.UNSIGNED_SHORT:f instanceof Int32Array?d.INT:f instanceof Uint32Array?d.UNSIGNED_INT:f instanceof Float32Array?d.FLOAT:void 0,r=r instanceof Int8Array||r instanceof Uint8Array,a[n]={buffer:l,numComponents:h,type:u,normalize:r})}),a}function a(e,t,n,o,a){var r=[];for(let n=0;n<t.length;++n){var i=r,s=i.push,l=e,c=t[n],f=l.createShader(e[j[n]]);l.shaderSource(f,c),l.compileShader(f),l.getShaderParameter(f,l.COMPILE_STATUS),s.call(i,f)}{var h=e,u=r,m=o;o=(o=a)||d;const t=h.createProgram();return u.forEach(function(e){h.attachShader(t,e)}),n&&n.forEach(function(e,n){h.bindAttribLocation(t,m?m[n]:n,e)}),h.linkProgram(t),h.getProgramParameter(t,h.LINK_STATUS)?t:(o("Error in program linking:"+(u=h.getProgramInfoLog(t))),h.deleteProgram(t),null)}}function r(e){return"indices"!==e}function i(e,t){if(l(e))return e;if(e.data&&l(e.data))return e.data;(e=Array.isArray(e)?{data:e}:e).numComponents||(e.numComponents=s(t,e.length));var n=e.type;return n||"indices"===t&&(n=Uint16Array),t=e.numComponents,(n=function(e,t){let n=0;return e.push=function(){for(let o=0;o<arguments.length;++o){var t=arguments[o];if(t instanceof Array||t.buffer&&t.buffer instanceof ArrayBuffer)for(let o=0;o<t.length;++o)e[n++]=t[o];else e[n++]=t}},e.reset=function(e){n=e||0},e.numComponents=t,Object.defineProperty(e,"numElements",{get:function(){return this.length/this.numComponents|0}}),e}(new(n||Float32Array)(t*(e.data.length/e.numComponents|0)),t)).push(e.data),n}function s(e,t){if(0<t%(e=0<=e.indexOf("coord")?2:0<=e.indexOf("color")?4:3))throw"can not guess numComponents. You should specify it.";return e}function l(e){return e.buffer&&e.buffer instanceof ArrayBuffer}function d(e){topWindow.console&&console.error(e)}function c(e,t,n,o){n=n||e.ARRAY_BUFFER;var a=e.createBuffer();return e.bindBuffer(n,a),e.bufferData(n,t,o||e.STATIC_DRAW),a}function f(e,t){var n={},o=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<o;++i){var a=e.getActiveAttrib(t,i);if(!a)break;var r=e.getAttribLocation(t,a.name);n[a.name]=function(t){return function(n){if(n.value)switch(e.disableVertexAttribArray(t),n.value.length){case 4:e.vertexAttrib4fv(t,n.value);break;case 3:e.vertexAttrib3fv(t,n.value);break;case 2:e.vertexAttrib2fv(t,n.value);break;case 1:e.vertexAttrib1fv(t,n.value)}else e.bindBuffer(e.ARRAY_BUFFER,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,n.numComponents||n.size,n.type||e.FLOAT,n.normalize||!1,n.stride||0,n.offset||0)}}(r)}return n}function h(){W.resizeCanvasToDisplaySize(U.canvas,Math.min(devicePixelRatio||1,2)),U.viewport(0,0,U.canvas.width,U.canvas.height),q=G.perspective(V,U.canvas.width/U.canvas.height,.1,100)}function u(e){return`rgba(${255*e[0]}, ${255*e[1]}, ${255*e[2]}, ${e[3]||1})`}function m({view:e,world:t,tX:n,tY:o,tZ:a,sX:r,sY:i,sZ:s,color:l}){return W.setBuffersAndAttributes(U,H,K),t||(t=G.identity(),t=G.translate(t,n,o,a)),t=G.scale(t,r,i,s),n=G.transpose(G.inverse(t)),o=G.multiply(q,G.multiply(e,t)),W.setUniforms(H,{u_mvp:o,u_world:t,u_worldInverseTranspose:n,u_lightWorldPos:[-50,30,100],u_viewInverse:e,u_lightColor:[1,1,1,1],u_color:l}),W.drawBufferInfo(U,K),o}function p(e,t,n){return-1<=e&&e<=1&&-1<=t&&t<=1&&0<=n&&n<=1}function g(e,t){var[e,t,n]=G.transformPoint(e,t);return p(e,t,n)}function v(e,t,n,o){let a="Nothing of interest";var r,i,s=e.find(e=>e.isBad),l=[0,0,0],[d,,c]=G.transformPoint(s.mvp,l);let f=null,h=0,u=null;for(r of e){var[m,v,y]=G.transformPoint(r.mvp,l);p(m,v,y)&&((e=function(e,t,n,o){for(var a of n){var[r,i,s]=G.transformPoint(a.mvp,o);if(p(r,i,s)&&s<t&&Math.abs(r-e)<.3)return a}return null}(m,y,t,l))?(u=r.isBad?`that's the ${r.breedName}, but they're behind `+e.name:`that's ${r.dogName} the ${r.breedName} behind a ${e.name}...`,a=`A ${r.breedName} obstructed by `+e.name):-G.transformPoint(n,r.pos)[2]>1/Math.tan(.5*V)/.2?a=r.isBad?(u=`that's the ${r.breedName}, but they're too far away`,`${r.dogName} the ${r.breedName} in the distance`):(u='wow, this will look great in the "museum of stuff that\'s far away"',"Something far away"):h&&!(y<h)||!r.isBad&&s&&(e=Math.abs(d-m),c<y)&&e<.1||(r.isBad&&!Q&&"hotdog"!==r.badAction?(u=`that's the right ${r.breedName} but they aren't doing anything!`,a=`${r.dogName} the ${r.breedName} being a good dog`):Oe.mvp&&r.isBad&&"hotdog"===r.badAction&&(v=r,m=n,i=void 0,i=[Math.sin(v.direction),0,Math.cos(v.direction)],v=G.subtractVectors([m[12],m[13],m[14]],[v.pos[0],v.pos[1]+1.5*v.scale,v.pos[2]+2.75*v.scale]),i=G.normalize(i),v=G.normalize(v),(i=G.dot(i,v))<0)&&.5<Math.abs(i)?(u=`that's the right ${r.breedName}, but the hotdog isn't in the picture!`,a=`${r.dogName} the ${r.breedName} running off with my hotdog`):(f=r,h=y)))}if(f&&f.isBad?a=`${f.dogName}, a naughty ${f.breedName}!`:f&&(u=`that's ${f.dogName}, an innocent ${f.breedName}!`,a=f.dogName+", an innocent "+f.breedName),!u&&!f){for(var b of t)g(b.mvp,l)&&(u=`what am I supposed to do with a picture of ${b.name}?`,a=b.name);g(o,l)&&(u="MY EYES!!!!",a="A blinding light")}return{capturedDog:f&&f.isBad?f:null,missReason:u,description:a}}function y(e,t,n){Y.toBlob(o=>{if(Ie.push({blob:o,description:n}),U.finish(),Pe.classList.remove("hidden"),Pe.innerHTML="",Le=!1,X.classList.add("hidden"),e)Y.classList.add("hidden"),a=o,ge=!1,(pe=new Image).onload=function(){ge=!0,URL.revokeObjectURL(pe.src)},pe.src=URL.createObjectURL(a),document.exitPointerLock(),re=0,he=5,De=`you caught the culprit: ${e.dogName} the ${e.breedName}!`;else{F.classList.remove("hidden");const e=document.createElement("div"),n=(e.classList.add("text"),e.classList.add("right-text"),new Image);n.src=URL.createObjectURL(o),n.classList.add("screenshot"),n.onload=()=>{e.appendChild(n),Pe.appendChild(document.createTextNode(" ")),Pe.appendChild(e);var o=""+(t||"great. you took a picture of nothing."),a=document.createElement("div");a.classList.add("text"),a.classList.add("left-text"),a.textContent=o,Pe.appendChild(a),URL.revokeObjectURL(n.src)}}var a})}function b(e,t,n,o){var a=performance.now()/1e3,r=a-Se>(r="tailChase"===n?7:10)-1&&n&&a%r<5&&"speed"!==n||"speed"===n||"hotdog"===n?n:null,i=(o&&(Q=!!r),t),s=a,l=r,d=("tailChase"===l&&(i.direction+=.0873),"speed"===l&&(i.speed=80),"jump"===l?((null==i.velocity||i.pos[1]<=0)&&(i.velocity=i.pos[1]=.05),i.pos[1]+=i.velocity,i.velocity-=.01,i.pos[1]=.5<i.pos[1]?.5:i.pos[1]<=0?0:i.pos[1]):(i.pos[1]=0,i.velocity=null),s=Math.max(.001,.001*s-i.timeWalking),i.timeWalking+=s,s*=i.speed,"jump"!==l&&(i.pos[0]+=Math.sin(i.direction)*s,i.pos[2]+=Math.cos(i.direction)*s),s=i.bounds.x,i.bounds.z);((l=i.pos)[0]<s[0]||l[0]>s[1]||l[2]<d[0]||l[2]>d[1])&&(i.direction+=.7854,l[0]=l[0]<s[0]?s[0]+.1:l[0]>s[1]?s[1]-.1:l[0],l[2]=l[2]<d[0]?d[0]+.1:l[2]>d[1]?d[1]-.1:l[2]);for(const e of ze)if(e.dogName!==i.dogName){var c=i.scale*Re[0].scale[0],f=i.scale*Re[0].scale[2]+i.scale*Re[1].scale[2],h=e.scale*Re[0].scale[0],u=e.scale*Re[0].scale[2]+e.scale*Re[1].scale[2];if(s=Math.abs(l[0]-e.pos[0]),d=Math.abs(l[2]-e.pos[2]),s<(c+h)/2&&d<(f+u)/2){i.direction+=.7854,f=(f+u)/2,(s<(c=(c+h)/2)||"speed"===e.badAction)&&(l[0]=e.pos[0]+Math.sign(l[0]-e.pos[0])*(.5+c)),(d<f||"speed"===e.badAction)&&(l[2]=e.pos[2]+Math.sign(l[2]-e.pos[2])*(.5+f));break}}i=R(Xe,1,1,i),i=R(Ze,1,1,i),R(Fe,2,.6,i),o=Re.map(()=>G.identity());var p=Object.fromEntries(Re.map((e,t)=>[e.name,t]));let g;for(let i=0;i<Re.length;i++){var v=Re[i],y=null!=(y=v.parent?p[v.parent]:null)?G.copy(o[y]):G.identity();let s=v.offset||[0,0,0];if("hotdog"!==r||"tongue"!==v.name){var b=t.partColors&&t.partColors[v.name]?t.partColors[v.name]:"tongue"!==v.name&&"nose"!==v.name?t.wholeColor||v.color||J.default:v.color||J.default;"torso"===v.name&&(y=G.translate(y,t.pos[0],t.pos[1],t.pos[2]),y=G.yRotate(y,t.direction),y=G.scale(y,t.scale,t.scale,t.scale));let l=null,d=(!t.floppy||"earL"!==v.name&&"earR"!==v.name||(s=["earL"===v.name?-.69:.69,.5*t.scale,-.4*t.scale],l=[b[0]-15/255,b[1]-15/255,b[2]-15/255,1]),[]);t.modifications&&(0<t.modifications.torso&&"torso"===v.name&&(d=[v.scale[0],v.scale[1],v.scale[2]*t.modifications.torso]),t.modifications.torso&&"torso"===v.parent&&(s=[s[0],s[1],s[2]+.6*t.modifications.torso*("legLB"===v.name||"legRB"===v.name||"tail"===v.name?-1:1)]),t.modifications.tail&&"tail"===v.name&&(d=[v.scale[0],v.scale[1],t.modifications.tail],s=[s[0],s[1],s[2]+t.modifications.tail]),t.modifications.snout&&"snout"===v.name&&(d=[v.scale[0],v.scale[1],t.modifications.snout]),t.modifications.snout)&&"snout"===v.parent&&(s=[s[0],s[1],s[2]-.7*t.modifications.snout]),y=G.translate(y,s[0],s[1],s[2]),!v.anim||r&&"speed"!==r&&("jump"!==r||v.name.includes("leg"))&&"hotdog"!==n||(y=v.anim("speed"===r&&v.name.includes("leg")?4*a:a,y)),"tailChase"===r&&("tail"===v.name&&(y=G.yRotate(y,Math.PI/2),y=G.translate(y,0,0,.5)),"head"===v.name||"head"===v.parent||"snout"===v.parent)&&(y=G.yRotate(y,Math.PI/2)),o[i]=y,y=m({view:e,world:o[i],tX:s[0],tY:s[1],tZ:s[2],sX:d[0]||v.scale[0],sY:d[1]||v.scale[1],sZ:d[2]||v.scale[2],color:l||b}),"torso"===v.name&&(g=y)}}return g}function w(e){if(5===he)if(X.classList.add("hidden"),F.classList.add("hidden"),Z.classList.add("hidden"),Y.classList.add("hidden"),z.classList.remove("hidden"),setTimeout(()=>z.classList.remove("hide"),100),null===ce&&(ce=z.width,E(e)),0<(ce-=40))O.save(),O.translate(ce,0),A({textArr:[]}),O.restore();else if(Ce)x(),M();else{L(e,3);let t=[],n="let's get them!";A({time:e,textArr:t=$e<We.length-1?[{photo:pe,side:"right"},{text:De,side:"left"},{text:"I need you to catch another bad dog...",side:"left"},{text:We[$e+1].text,side:"left"}]:(n="see my album",[{photo:pe,side:"right"},{text:De,side:"left"},{text:"you got every bad dog in the park"},{text:"now you can look through your album of suspects",side:"left"}]),offset:0,hasPicture:!0}),ce=0,ue&&B([{text:n,onClick:function(){$e+1===We.length?(Ce=!0,ae=[]):(de=0,fe=!0,$e++,he=4,He.textContent=We[$e].text,Te=0,Ye=Ue=null,Se=performance.now()/1e3)},alignment:"right"}])}else ce=null;0===he?0<(de=null===de?0:de)?(O.save(),O.translate(de,0),k(),O.restore()):k():1===he?(L(e,we.length),A({time:e,textArr:we,offset:0}),ue&&B([{text:"yeah, it's me",onClick:T(2),alignment:"left"},{text:"who's asking?",onClick:T(2),alignment:"right"}])):2===he?(L(e,xe.length),A({time:e,textArr:[...we,...xe],offset:we.length-1}),ue&&B([{text:"i don't work for free",onClick:T(3),alignment:"left"},{text:"hisssssssss",onClick:T(3),alignment:"right"}])):3!==he&&4!==he||(L(e,ke.length),O.save(),O.translate(de,0),A({time:e,textArr:[...we,...xe,...ke],offset:we.length+xe.length-1}),ue&&B([{text:"let's find them",onClick:T(4),alignment:"right"}]),O.restore())}function x(){O.fillStyle=u(J.lightPurple);var e=z.width-50;O.fillRect(25,25,e,z.height-50),O.fillStyle=u(J.darkPurple),O.fillRect(25,25,e,50),O.fillStyle="white",O.font="20px monospace",O.textAlign="center",O.textBaseline="middle",O.fillText("Black Cat Detective Agency",200,50),O.fillStyle=u(J.lightPurple),O.fillRect(e-10,35,30,30),O.fillStyle=u(J.darkPurple),O.font="20px monospace",O.textAlign="center",O.textBaseline="middle",O.fillText("x",5+e,50)}function k(){{let e=!1;ee>se.x-50&&ee<se.x+50&&te>se.y-50&&te<se.y+50&&(N(void 0,.2,1e3,.02,void 0,.01,2,void 0,18,void 0,475,.01,.01),e=!0,le++),e&&(se.x=150<ee&&ee<z.width-150?ee:se.x,se.y=150<te&&te<z.height-150?te:se.y,se.angle=180*Math.atan2(te-200,ee-250)/Math.PI),O.save(),O.translate(se.x,se.y),O.rotate(se.angle*Math.PI/180),O.scale(2,2),O.fillStyle=u(J.mouseGray),O.beginPath(),O.moveTo(-20,0),O.lineTo(0,-40),O.lineTo(20,0),O.arc(0,0,20,50,Math.PI),O.closePath(),O.fill(),O.fillStyle=u(J.mouseGray),O.beginPath(),O.arc(-15,-15,10,0,2*Math.PI),O.fill(),O.beginPath(),O.arc(15,-15,10,0,2*Math.PI),O.fill(),O.fillStyle=u(J.furBlack),O.beginPath(),O.arc(0,-40,2,0,2*Math.PI),O.fill(),O.strokeStyle=u(J.mouseGray),O.lineWidth=3,O.beginPath(),O.moveTo(0,20),O.bezierCurveTo(10,40,-30,60,-10,80),O.stroke(),O.restore()}B([{text:"Start",fontSize:85,onClick:()=>fe=!0}])}function C(e,t,n,o,a,r){var i=e.width/e.height,s=t/n;let l=0,d=0,c=e.width,f=e.height;s<i?(c=f*s,l=(e.width-c)/2):i<s&&(f=c/s,d=(e.height-f)/2),O.drawImage(e,l,d,c,f,o,a,t,n),r&&(O.strokeStyle="white",O.lineWidth=5,O.strokeRect(o,a,t,n))}function A({time:e,textArr:t,offset:n,hasPicture:o}){if(x(),!o||ge){e-=me,n=Math.floor(e/1500)>=t.length-1?t.length-1:Math.floor(e/1500)+n,re===n&&(N(1.6,void 0,178,void 0,.15,.16,1,4.6,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,.63,void 0,.14),re=n+1);{o=t.slice(0,n+1);let e=!1;o.forEach(({text:t,photo:n,side:o},a)=>{var r=t?12*t.length:270,i=t?27:220,s="right"===o?z.width-r-75:75;a=100+50*a+(e?220:0),e=!(!e&&!n),O.fillStyle="white",O.strokeStyle="white",O.beginPath(),O.fillRect(s,a,r,i,10),O.fillStyle="white","right"===o?O.fillRect(s+r,a,7,7):O.fillRect(s-7,a,7,7),t&&(O.font="18px monospace",O.fillStyle=u(J.darkPurple),O.fillText(t,s+r/2,a+i/2)),n&&!ve&&C(n,250,200,10+s,a+10)})}}}function M(){var e,t,n,o,a=Ie[ie];be?(o=(e=z.width-100)-50,n=(t=z.height-160)-80,C(ye,o,n,50+(e-o)/2,80+(t-n-50)/2,!0)):(o=a.blob,be=!1,(ye=new Image).onload=function(){be=!0},ye.src=URL.createObjectURL(o)),O.font="22px monospace",O.textAlign="center",O.textBaseline="bottom",e=z.width/2,t=z.height-90,O.fillStyle="white",O.fillText(a.description,e,t),O.font="italic 12px monospace",a=z.width/2,e=z.height-70,O.fillStyle="white",O.fillText("(use arrow keys to navigate)",a,e)}function P(){ve=!1,W.resizeCanvasToDisplaySize(z),se={x:200,y:z.height-200,angle:45}}function E(e){ue=!1,me=e}function L(e,t){!ue&&null!==me&&e-me>1500*t+1e3?(ue=!0,me=null):ae=[]}function T(e){return function(){E(performance.now()),he=e}}function B(e){ae=e.map(e=>{{var[{text:e,onClick:t,alignment:n,fontSize:o=35}]=[e],a=o/1.5*e.length,r=1.5*o;let i=(z.width-a)/2,s=(z.height-r)/2;return"left"===n?(i=75,s=z.height-r-70):"right"===n&&(i=z.width-a-75,s=z.height-r-70),(n=new Path2D).rect(i,s,a,r),O.fillStyle=u(J.darkPurple),O.fill(n),O.fillStyle="white",O.textAlign="center",O.textBaseline="middle",O.font=o+"px monospace",O.fillText(e,i+a/2,s+r/2),O.strokeStyle="rgba(201, 207, 247, 1)",O.lineWidth=5,O.strokeRect(i,s,a,r),{path:n,x:i,y:s,width:a,height:r,onClick:t}}})}function R(e,t,n,o){for(const r of e){e=o.pos[0]-r.tX;var a=o.pos[2]-r.tZ;if(Math.abs(e)<t&&Math.abs(a)<n){o.direction+=Math.PI/180*100,Math.abs(e)<t&&(o.pos[0]=r.tX+Math.sign(e)*(t+.1)),Math.abs(a)<n&&(o.pos[2]=r.tZ+Math.sign(a)*(n+.1));break}}return o}function I(e,t,n){e=G.copy(e),e=G.translate(e,n[0],n[1],n[2]),n=m({view:t,world:e=G.scale(e,1.25,.25,.5),sX:1,sY:1,sZ:1,color:J.doughBrown});var o,a=G.copy(e);return a=G.translate(a,0,.1,0),a=G.scale(a,1.25,1,.5),e=G.copy(e),e=G.translate(e,0,.6,0),e=G.scale(e,1.1,.1,.1),a=[{world:a,color:J.redBrown},{world:e,color:[1,1,0,1]}],o={view:t},a.forEach(e=>m({...e,...o,sX:1,sY:1,sZ:1})),n}function S(e,t,n){e=Array.isArray(e)?e[Math.floor(Math.random()*e.length)]:e||Object.keys(Ne)[Math.floor(Math.random()*Object.keys(Ne).length)];var o={...Ne[e]};return o.wholeColor&&Array.isArray(o.wholeColor[0])&&(o.wholeColor=o.wholeColor[Math.floor(Math.random()*o.wholeColor.length)]),{..._e,...o,breed:e,pos:[40*Math.random()-20,0,n?20*Math.random()-10-10:40*Math.random()-20],direction:Math.random()*Math.PI*2,bounds:{x:[-36.5,36.5],z:[-36.5,36.5]},dogName:Ge[t]}}let _=new AudioContext,N=(e=1,t=.05,n=220,o=0,a=0,r=.1,i=0,s=1,l=0,d=0,c=0,f=0,h=0,u=0,m=0,p=0,g=0,v=1,y=0,b=0,w=0)=>{let x=Math,k=2*x.PI,C=l*=500*k/44100/44100,A=n*=(1-t+2*t*x.random(t=[]))*k/44100,M=0,P=0,E=0,L=1,T=0,B=0,R=0,I=w<0?-1:1;var S=k*I*w*2/44100,N=x.cos(S),X=x.sin,Z=-2*N/(S=1+(F=X(S)/4)),F=(1-F)/S,z=(1+I*N)/2/S;N=-(I+N)/S;let Y=0,U=0,O=0,D=0;for(d*=500*k/44100**3,m*=k/44100,c*=k/44100,f*=44100,h=44100*h|0,e*=.3,I=(o=44100*o+9)+(y*=44100)+(a*=44100)+(r*=44100)+(g*=44100)|0;E<I;t[E++]=R*e)++B%(100*p|0)||(R=i?1<i?2<i?3<i?X(M**3):x.max(x.min(x.tan(M),1),-1):1-(2*M/k%2+2)%2:1-4*x.abs(x.round(M/k)-M/k):X(M),R=(h?1-b+b*X(k*E/h):1)*(R<0?-1:1)*x.abs(R)**s*(E<o?E/o:E<o+y?1-(E-o)/y*(1-v):E<o+y+a?v:E<I-g?(I-E-g)/r*v:0),R=g?R/2+(g>E?0:(E<I-g?1:(I-E)/g)*t[E-g|0]/2/e):R,w&&(R=D=z*Y+N*(Y=U)+z*(U=R)-F*O-Z*(O=D))),M+=(S=(n+=l+=d)*x.cos(m*P++))+S*u*X(E**5),L&&++L>f&&(n+=c,A+=c,L=0),!h||++T%h||(n=A,l=C,L=L||1);(e=_.createBuffer(1,I,44100)).getChannelData(0).set(t),(n=_.createBufferSource()).buffer=e,n.connect(_.destination),n.start()};(t=document.createElement("div")).id="camera-ui",t.className="hidden",(e=document.createElement("div")).id="camera-border-large",t.appendChild(e),(e=document.createElement("div")).id="camera-border-small",t.appendChild(e),(e=document.createElement("div")).id="plus",e.textContent="+",t.appendChild(e),document.body.appendChild(t);{var e=document.createElement("div"),t=(e.id="instructions",e.className="hidden",document.createElement("div")),n=(t.className="instruction-block",document.createElement("div"));n.className="instruction-title",n.textContent="Instructions",t.appendChild(n);const Ve=document.createElement("ul");["click or use arrows to look around","spacebar: enter camera mode","z: zoom in","x: zoom out","c: take a picture"].forEach(e=>{var t=document.createElement("li");t.textContent=e,Ve.appendChild(t)}),t.appendChild(Ve),e.appendChild(t),document.body.appendChild(e)}(n=document.createElement("div")).id="text-messages",n.className="hidden",(t=document.createElement("div")).className="text left-text",t.id="mission-text",n.appendChild(t),(t=document.createElement("div")).id="album",n.appendChild(t),document.body.appendChild(n);const X=document.getElementById("camera-ui"),Z=document.getElementById("instructions"),F=document.getElementById("text-messages"),z=document.getElementById("c2"),Y=document.getElementById("c"),U=Y.getContext("webgl"),O=z.getContext("2d");let D=Float32Array,G={transformPoint:function(e,t,n){n=n||new D(3);var o=t[0],a=t[1],r=(t=t[2],o*e[3]+a*e[7]+t*e[11]+e[15]);return n[0]=(o*e[0]+a*e[4]+t*e[8]+e[12])/r,n[1]=(o*e[1]+a*e[5]+t*e[9]+e[13])/r,n[2]=(o*e[2]+a*e[6]+t*e[10]+e[14])/r,n},identity:function(e){return(e=e||new D(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},transpose:function(e,t){return(t=t||new D(16))[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t},multiply:function(e,t,n){n=n||new D(16);var o=t[0],a=t[1],r=t[2],i=t[3],s=t[4],l=t[5],d=t[6],c=t[7],f=t[8],h=t[9],u=t[10],m=t[11],p=t[12],g=t[13],v=t[14],y=(t=t[15],e[0]),b=e[1],w=e[2],x=e[3],k=e[4],C=e[5],A=e[6],M=e[7],P=e[8],E=e[9],L=e[10],T=e[11],B=e[12],R=e[13],I=e[14];return e=e[15],n[0]=o*y+a*k+r*P+i*B,n[1]=o*b+a*C+r*E+i*R,n[2]=o*w+a*A+r*L+i*I,n[3]=o*x+a*M+r*T+i*e,n[4]=s*y+l*k+d*P+c*B,n[5]=s*b+l*C+d*E+c*R,n[6]=s*w+l*A+d*L+c*I,n[7]=s*x+l*M+d*T+c*e,n[8]=f*y+h*k+u*P+m*B,n[9]=f*b+h*C+u*E+m*R,n[10]=f*w+h*A+u*L+m*I,n[11]=f*x+h*M+u*T+m*e,n[12]=p*y+g*k+v*P+t*B,n[13]=p*b+g*C+v*E+t*R,n[14]=p*w+g*A+v*L+t*I,n[15]=p*x+g*M+v*T+t*e,n},xRotate:function(e,t,n){n=n||new D(16);var o=e[4],a=e[5],r=e[6],i=e[7],s=e[8],l=e[9],d=e[10],c=e[11],f=Math.cos(t);return t=Math.sin(t),n[4]=f*o+t*s,n[5]=f*a+t*l,n[6]=f*r+t*d,n[7]=f*i+t*c,n[8]=f*s-t*o,n[9]=f*l-t*a,n[10]=f*d-t*r,n[11]=f*c-t*i,e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n},yRotate:function(e,t,n){n=n||new D(16);var o=e[0],a=e[1],r=e[2],i=e[3],s=e[8],l=e[9],d=e[10],c=e[11],f=Math.cos(t);return t=Math.sin(t),n[0]=f*o-t*s,n[1]=f*a-t*l,n[2]=f*r-t*d,n[3]=f*i-t*c,n[8]=f*s+t*o,n[9]=f*l+t*a,n[10]=f*d+t*r,n[11]=f*c+t*i,e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n},translate:function(e,t,n,o,a){a=a||new D(16);var r=e[0],i=e[1],s=e[2],l=e[3],d=e[4],c=e[5],f=e[6],h=e[7],u=e[8],m=e[9],p=e[10],g=e[11],v=e[12],y=e[13],b=e[14],w=e[15];return e!==a&&(a[0]=r,a[1]=i,a[2]=s,a[3]=l,a[4]=d,a[5]=c,a[6]=f,a[7]=h,a[8]=u,a[9]=m,a[10]=p,a[11]=g),a[12]=r*t+d*n+u*o+v,a[13]=i*t+c*n+m*o+y,a[14]=s*t+f*n+p*o+b,a[15]=l*t+h*n+g*o+w,a},perspective:function(e,t,n,o,a){a=a||new D(16),e=Math.tan(.5*Math.PI-.5*e);var r=1/(n-o);return a[0]=e/t,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=e,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(n+o)*r,a[11]=-1,a[12]=0,a[13]=0,a[14]=n*o*r*2,a[15]=0,a},scale:function(e,t,n,o,a){return(a=a||new D(16))[0]=t*e[0],a[1]=t*e[1],a[2]=t*e[2],a[3]=t*e[3],a[4]=n*e[4],a[5]=n*e[5],a[6]=n*e[6],a[7]=n*e[7],a[8]=o*e[8],a[9]=o*e[9],a[10]=o*e[10],a[11]=o*e[11],e!==a&&(a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]),a},inverse:function(e,t){t=t||new D(16);var n=e[0],o=e[1],a=e[2],r=e[3],i=e[4],s=e[5],l=e[6],d=e[7],c=e[8],f=e[9],h=e[10],u=e[11],m=e[12],p=e[13],g=e[14],v=h*(e=e[15]),y=g*u,b=l*e,w=g*d,x=l*u,k=h*d,C=a*e,A=g*r,M=a*u,P=h*r,E=a*d,L=l*r,T=c*p,B=m*f,R=i*p,I=m*s,S=i*f,_=c*s,N=n*p,X=m*o,Z=n*f,F=c*o,z=n*s,Y=i*o,U=v*s+w*f+x*p-(y*s+b*f+k*p),O=y*o+C*f+P*p-(v*o+A*f+M*p);return t[0]=(s=1/(n*U+i*O+c*(p=b*o+A*s+E*p-(w*o+C*s+L*p))+m*(o=k*o+M*s+L*f-(x*o+P*s+E*f))))*U,t[1]=s*O,t[2]=s*p,t[3]=s*o,t[4]=s*(y*i+b*c+k*m-(v*i+w*c+x*m)),t[5]=s*(v*n+A*c+M*m-(y*n+C*c+P*m)),t[6]=s*(w*n+C*i+L*m-(b*n+A*i+E*m)),t[7]=s*(x*n+P*i+E*c-(k*n+M*i+L*c)),t[8]=s*(T*d+I*u+S*e-(B*d+R*u+_*e)),t[9]=s*(B*r+N*u+F*e-(T*r+X*u+Z*e)),t[10]=s*(R*r+X*d+z*e-(I*r+N*d+Y*e)),t[11]=s*(_*r+Z*d+Y*u-(S*r+F*d+z*u)),t[12]=s*(R*h+_*g+B*l-(S*g+T*l+I*h)),t[13]=s*(Z*g+T*a+X*h-(N*h+F*g+B*a)),t[14]=s*(N*l+Y*g+I*a-(z*g+R*a+X*l)),t[15]=s*(z*h+S*a+F*l-(Z*l+Y*h+_*a)),t},copy:function(e,t){return(t=t||new D(16))[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},normalize:function(e,t){t=t||new D(3);var n=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return 1e-5<n&&(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n),t},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},subtractVectors:function(e,t,n){return(n=n||new D(3))[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n}};const $=["position","positions","a_position"],j=["VERTEX_SHADER","FRAGMENT_SHADER"],W={resizeCanvasToDisplaySize:function(e,t){var n=e.clientWidth*(t=t||1)|0;return t=e.clientHeight*t|0,(e.width!==n||e.height!==t)&&(e.width=n,e.height=t,!0)},createProgramInfo:function(e,t,n,o,r){return(t=a(e,t=t.map(function(e){var t=document.getElementById(e);return t?t.text:e}),n,o,r))?{program:t,uniformSetters:n=function(e,t){var n={},o=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<o;++r){var a=e.getActiveUniform(t,r);if(!a)break;let o=a.name;o.endsWith("[0]")&&(o=o.slice(0,-3));const i=e.getUniformLocation(t,a.name);switch(a.type){case e.FLOAT:n[o]=t=>e.uniform1f(i,t);break;case e.FLOAT_VEC2:n[o]=t=>e.uniform2fv(i,t);break;case e.FLOAT_VEC3:n[o]=t=>e.uniform3fv(i,t);break;case e.FLOAT_VEC4:n[o]=t=>e.uniform4fv(i,t);break;case e.FLOAT_MAT4:n[o]=t=>e.uniformMatrix4fv(i,!1,t)}}return n}(e,t),attribSetters:e=f(e,t)}:null},createBufferInfoFromArrays:function(e,t,n){n={attribs:o(e,t,n)};var a=t.indices;if(a)a=i(a,"indices"),n.indices=c(e,a,e.ELEMENT_ARRAY_BUFFER),n.numElements=a.length;else{for(const e of $)if(e in t){var r=e;break}e=((t=t[r=r||Object.keys(t)[0]]).length?t:t.data).length,r=t.numComponents||t.size||guessNumComponentsFromName(r,(t.length?t:t.data).length),n.numElements=e/r}return n},setBuffersAndAttributes:function(e,t,n){var o,a;o=t,a=n.attribs,o=o.attribSetters||o,Object.keys(a).forEach(function(e){var t=o[e];t&&t(a[e])}),n.indices&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.indices)},setUniforms:function(e,...t){e=e.uniformSetters||e;for(const n of t)Object.keys(n).forEach(function(t){var o=e[t];o&&o(n[t])})},drawBufferInfo:function(e,t,n,o,a){var r=t.indices;n=void 0===n?e.TRIANGLES:n,t=void 0===o?t.numElements:o,a=void 0===a?0:a,r?e.drawElements(n,t,e.UNSIGNED_SHORT,a):e.drawArrays(n,a,t)}},H=W.createProgramInfo(U,["\n  attribute vec3 a_position;\n  attribute vec3 a_normal;\n  uniform mat4 u_mvp;\n  uniform mat4 u_world;\n  uniform mat4 u_worldInverseTranspose;\n\n  varying vec3 v_normal;\n  varying vec3 v_surfaceToLight;\n  varying vec3 v_surfaceToView;\n\n  uniform vec3 u_lightWorldPos;\n  uniform mat4 u_viewInverse;\n\n  void main() {\n    // Multiply the position by the matrix.\n    gl_Position = u_mvp * vec4(a_position, 1.0);\n\n    // orient the normals and pass to the fragment shader\n    v_normal = mat3(u_worldInverseTranspose) * a_normal;\n\n    // compute the world position of the surface\n    vec3 surfaceWorldPos = (u_world * vec4(a_position, 1.0)).xyz;\n\n    // compute the vector of the surface to the light\n    // and pass it to the fragment shader\n    v_surfaceToLight = u_lightWorldPos - surfaceWorldPos;\n\n    // compute the vector of the surface to the view/camera\n    // and pass it to the fragment shader\n    v_surfaceToView = (u_viewInverse[3].xyz) - surfaceWorldPos;\n  }\n","\n  precision mediump float;\n  \n  // Passed in from the vertex shader.\n  varying vec3 v_normal;\n  // ...\n  varying vec3 v_surfaceToLight;\n  varying vec3 v_surfaceToView;\n  uniform vec4 u_color;\n  uniform vec4 u_lightColor;\n\n  void main() {\n    vec3 normal = normalize(v_normal);\n    vec3 surfaceToLight = normalize(v_surfaceToLight);\n\n    // Flat diffuse, softened\n    float diffuse = max(dot(normal, surfaceToLight), 0.0) * 0.8;\n    // Ambient term for base color\n    float ambient = 0.8;\n\n    vec3 color = u_color.rgb * (ambient + diffuse) * u_lightColor.rgb;\n    gl_FragColor = vec4(color, u_color.a);\n  }\n"]);U.useProgram(H.program);let V=60*Math.PI/180,q=null;addEventListener("resize",h),h();const J={slime:[.388,.804,.525,1],buttonSlime:[.482,.98,.651,1],brown:[.545,.271,.074,1],default:[.8,.6,.3,1],black:[0,0,0,1],darkGray:[.271,.271,.271,1],lightBrown:[.796,.655,.475,1],lightTan:[.992,.951,.892,1],golden:[.961,.8,.498,1],blue:[.267,.392,.624,1],redBrown:[.518,.161,.067,1],tawny:[.467,.267,.165,1],doughBrown:[.949,.737,.463,1],ivyGreen:[.294,.376,.239,1],red:[1,0,0,1],roseRed:[.745,.118,.176,1],rosePink:[1,.412,.706,1],woodBrown:[.396,.263,.129,1],clawGray:[.788,.749,.749,1],mouseGray:[.655,.616,.616,1],pawPink:[.992,.733,.863,1],furBlack:[.192,.184,.184,1],lightPurple:[.702,.737,.953,1],darkPurple:[.455,.427,.765,1]},K=W.createBufferInfoFromArrays(U,{position:{numComponents:3,data:[-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5]},normal:{numComponents:3,data:[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]},indices:{numComponents:3,data:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]}});let Q=!1;document.head.appendChild(document.createElement("style")).textContent="html,body{background-color:#fff!important}canvas,#c,#c2{width:100vw;height:100vh;position:absolute;}#c{display:block;}#c2{background:repeating-linear-gradient(19deg,#fff 0 25px,#dad7d7 25px 50px);background-size:50px 50px;animation:checker-scroll 2s linear infinite}@keyframes checker-scroll{0%{background-position:0 0}100%{background-position:50px 0}}html,body{margin:0;height:100%;font-family:'Courier New',monospace}ul{padding-inline-start:15px}#instructions,#text-messages{position:absolute;padding:10px;z-index:10;height:90vh}#instructions{top:10px;left:10px}#text-messages{top:10px;right:10px}.screenshot{width:285px;object-fit:cover;margin:5px;border:2px solid #fff}.hide{opacity:0;transition:opacity .5s ease}.hidden{display:none!important}#camera-ui{position:absolute;left:0;top:0;width:100vw;height:100vh;box-sizing:border-box;background:rgb(0 0 0/.25);pointer-events:none}#camera-border-small{position:absolute;left:50%;top:50%;width:300px;height:300px;transform:translate(-50%,-50%);background:linear-gradient(to right,#fff 4px,transparent 4px) 0 0,linear-gradient(to right,#fff 4px,transparent 4px) 0 100%,linear-gradient(to left,#fff 4px,transparent 4px) 100% 0,linear-gradient(to left,#fff 4px,transparent 4px) 100% 100%,linear-gradient(to bottom,#fff 4px,transparent 4px) 0 0,linear-gradient(to bottom,#fff 4px,transparent 4px) 100% 0,linear-gradient(to top,#fff 4px,transparent 4px) 0 100%,linear-gradient(to top,#fff 4px,transparent 4px) 100% 100%;background-repeat:no-repeat;background-size:20px 20px}#camera-border-large{position:absolute;left:0;top:0;width:calc(100vw - 100px);height:calc(100vh - 100px);margin:50px;background:linear-gradient(to right,#fff 4px,transparent 4px) 0 0,linear-gradient(to right,#fff 4px,transparent 4px) 0 100%,linear-gradient(to left,#fff 4px,transparent 4px) 100% 0,linear-gradient(to left,#fff 4px,transparent 4px) 100% 100%,linear-gradient(to bottom,#fff 4px,transparent 4px) 0 0,linear-gradient(to bottom,#fff 4px,transparent 4px) 100% 0,linear-gradient(to top,#fff 4px,transparent 4px) 0 100%,linear-gradient(to top,#fff 4px,transparent 4px) 100% 100%;background-repeat:no-repeat;background-size:75px 75px}#plus{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);font-size:100px;color:#fff}.text{color:#746dc3;width:300px;background:rgb(255 255 255/.95);padding:10px;margin-bottom:10px;font-size:22px}.left-text,.right-text{position:relative;width:300px}.left-text::before,.right-text::before{content:\"\";position:absolute;top:0;width:10px;height:10px;background:#fff}.left-text::before{left:-9px}.right-text::before{right:-10px}.instruction-block{padding:10px;margin-bottom:10px;font-size:22px;max-width:300px;background-color:#cfd5fd;color:#746dc3;border:5px solid rgb(201 207 247)}.instruction-title{background:#746dc3;color:#fff;padding:5px;font-weight:700;margin:-10px -10px 10px -10px}",X.classList.add("hidden"),Y.classList.add("hidden");let ee,te,ne=0,oe=null,ae=[],re=0,ie=0,se=(addEventListener("keydown",e=>{Ce&&(be=!1,"ArrowRight"===e.key?(ie=(ie+1)%Ie.length,M()):"ArrowLeft"===e.key&&(ie=(ie-1+Ie.length)%Ie.length,M()))}),{x:100,y:0,angle:45}),le=0,de=null,ce=null,fe=!1,he=0,ue=!0,me=null,pe=null,ge=!1,ve=!1,ye=null,be=!1,we=[{text:"Is this the Black Cat Detective agency?"},{text:"I need help catching some unruly dogs in the act!"}],xe=[{text:"ttghjikpp[[[[[ll;;;;;;;;;;,nb",side:"right"},{text:"thank you for confirming that i am talking to a cat."},{text:"are you up to the task?"}],ke=[{text:"ffffff vbbnmm,,,,",side:"right"},{text:"Ill take that as a yes.",side:"left"}],Ce=!1,Ae=(addEventListener("mousemove",function(e){var t=z.getBoundingClientRect();ee=z.width/t.width*(e.clientX-t.left),te=z.height/t.height*(e.clientY-t.top);let n=!1;ae.forEach(t=>{O.isPointInPath(t.path,e.offsetX,e.offsetY)&&(oe=t,n=!0)}),n||(ne=0,oe=null)}),addEventListener("resize",P),P(),requestAnimationFrame(function e(t){var n,o;/^((?!chrome|android|crios|fxios|edgios|edg|firefox|opera|opr|samsung|brave).)*safari/i.test(navigator.userAgent)&&(z.style.visibility="hidden",U&&U.finish&&U.finish(),z.width=z.width,W.resizeCanvasToDisplaySize(z),z.style.visibility="visible"),O.clearRect(0,0,z.width,z.height),fe&&(de+=40)>z.width&&(z.classList.add("hide"),setTimeout(()=>{z.classList.remove("hide"),ae=[],fe=!1,de=0,he=1,E(t)},500)),4===he&&(de+=40)>z.width&&(z.classList.add("hide"),setTimeout(()=>{z.classList.add("hidden")},500),setTimeout(()=>{Y.classList.remove("hide"),Y.classList.remove("hidden"),Le||(F.classList.remove("hidden"),Z.classList.remove("hidden"))},500)),w(t),oe&&(O.fillStyle=u(J.buttonSlime),O.fillRect(oe.x,oe.y+oe.height-Math.min(ne,oe.height),oe.width,Math.min(ne,oe.height)),(ne+=.01*oe.height)>=oe.height+25)&&(ne=0,oe.onClick(),oe=null,N(void 0,void 0,537,.02,.02,.22,1,1.59,-6.98,4.97)),Ce||(250<=le&&(O.fillStyle=u(J.clawGray),O.beginPath(),O.moveTo(ee-45,te- -80-60-100),O.lineTo(ee-45,te- -80-60-45),O.lineTo(ee-25,te- -80-60-45),O.closePath(),O.fill(),O.fillStyle=u(J.clawGray),O.beginPath(),O.moveTo(ee-95,te- -80-60-50),O.lineTo(ee-95,te- -80-37.5),O.lineTo(ee-75,te- -80-37.5),O.closePath(),O.fill(),O.fillStyle=u(J.clawGray),O.beginPath(),O.moveTo(ee+45,te- -80-60-100),O.lineTo(ee+45,te- -80-60-45),O.lineTo(ee+25,te- -80-60-45),O.closePath(),O.fill(),O.fillStyle=u(J.clawGray),O.beginPath(),O.moveTo(ee+95,te- -80-60-50),O.lineTo(ee+95,te- -80-37.5),O.lineTo(ee+75,te- -80-37.5),O.closePath(),O.fill()),O.fillStyle=u(J.furBlack),O.fillRect(ee-100,te- -80-60,200,z.height-(te- -80-60)),O.fillStyle=u(J.furBlack),O.fillRect(ee-70,te- -80-60-45,140,100),O.fillStyle=u(J.pawPink),n=ee-37.5,o=te- -80-37.5,O.fillRect(n,o-15,75,75),O.fillStyle=u(J.pawPink),O.fillRect(n-35-8,35+o-50,35,35),O.fillRect(75+n+8,35+o-50,35,35),O.fillRect(ee-45,te- -80-60-35,35,35),O.fillRect(ee+10,te- -80-60-35,35,35)),requestAnimationFrame(e)}),U.enable(U.DEPTH_TEST),U.depthFunc(U.LEQUAL),U.clearColor(179/255,188/255,243/255,1),Y.addEventListener("click",()=>Y.requestPointerLock()),document.addEventListener("pointerlockchange",()=>{document.body.style.cursor=document.pointerLockElement===Y?"none":"auto"}),0),Me=0;addEventListener("mousemove",e=>{document.pointerLockElement===Y&&(Ae-=.0025*e.movementX,Me-=.0025*e.movementY,e=Math.PI/2-.1,Me=Math.max(-e,Math.min(Me,e)))},{passive:!0});const Pe=document.getElementById("album");let Ee=!1,Le=!1,Te=0;addEventListener("keydown",e=>{if("Space"===e.code?(N(void 0,void 0,9220,.01,void 0,void 0,void 0,5,void 0,void 0,void 0,void 0,void 0,9),Le?(Le=!1,X.classList.add("hidden"),document.getElementById("text-messages").classList.remove("hidden"),Z.classList.remove("hidden")):(Le=!0,X.classList.remove("hidden"),document.getElementById("text-messages").classList.add("hidden"),Z.classList.add("hidden"))):"c"!==e.key&&"C"!==e.key||!Le||(N(void 0,void 0,539,0,.04,.29,1,1.92,void 0,void 0,567,.02,.02,void 0,void 0,void 0,.04),Ee=!0),"z"!==e.key.toLowerCase()&&"x"!==e.key.toLowerCase()||N(void 0,void 0,150,.05,void 0,.05,void 0,1.3,void 0,void 0,void 0,void 0,void 0,3),"z"===e.key.toLowerCase()){if(!Le)return;Te=Math.max(-1,Te-.1)}else if("x"===e.key.toLowerCase()){if(!Le||-.1<Te)return;Te+=.1}switch(e.key.toLowerCase()){case"arrowleft":case"a":Ae+=.025;break;case"arrowright":case"d":Ae-=.025;break;case"arrowup":case"w":Me+=.025;break;case"arrowdown":case"s":Me-=.025}e=Math.PI/2-.1,Me=Math.max(-e,Math.min(Me,e))});const Be=function(){var e=[];for(let t=0;t<1500;t++)e.push({tX:40*Math.random()-20,tZ:40*Math.random()-20,tY:.15*Math.random()+.1});return e}(),Re=[{name:"torso",parent:null,offset:[0,1,0],scale:[1.8,1.2,3]},{name:"head",parent:"torso",offset:[0,.9,1.7],scale:[1,1,1],anim:(e,t)=>(t=G.translate(t,0,.05*Math.sin(6*e),0),G.xRotate(t,.05*Math.sin(2*e)))},{name:"snout",parent:"head",offset:[0,0,.7],scale:[.6,.6,.8]},{name:"nose",parent:"snout",offset:[0,.15,.5],scale:[.2,.2,.2],color:[0,0,0,1]},{name:"tongue",parent:"snout",offset:[0,-.35,.35],scale:[.18,.35,.05],color:[.8,.2,.2,1]},{name:"earL",parent:"head",offset:[-.45,.6,-.1],scale:[.18,.5,.18]},{name:"earR",parent:"head",offset:[.45,.6,-.1],scale:[.18,.5,.18]},{name:"legLF",parent:"torso",offset:[-.5,-.5,1],scale:[.5,1,.5],anim:(e,t)=>G.xRotate(t,.6*Math.sin(6*e))},{name:"legRF",parent:"torso",offset:[.5,-.5,1],scale:[.5,1,.5],anim:(e,t)=>G.xRotate(t,.6*Math.sin(6*e+Math.PI))},{name:"legLB",parent:"torso",offset:[-.5,-.5,-1],scale:[.5,1,.5],anim:(e,t)=>G.xRotate(t,.6*Math.sin(6*e+Math.PI))},{name:"legRB",parent:"torso",offset:[.5,-.5,-1],scale:[.5,1,.5],anim:(e,t)=>G.xRotate(t,.6*Math.sin(6*e))},{name:"tail",parent:"torso",offset:[0,0,-2.2],scale:[.28,.28,1.4],anim:(e,t)=>G.yRotate(t,Math.sin(8*e))}];let Ie=[],Se=0;const _e={timeWalking:0,pos:[0,0,-6],direction:1,scale:.5,speed:15,velocity:null,bounds:{x:[-8,8],z:[-18,-2]},floppy:!1,partColors:{}},Ne={german:{breedName:"German Shepherd",partColors:{snout:J.tawny,earL:J.tawny,earR:J.tawny,tail:J.tawny}},westie:{breedName:"Westie",scale:.3,wholeColor:[1,1,1,1],modifications:{tail:.4}},lab:{breedName:"Lab",scale:.45,floppy:!0,wholeColor:[J.lightTan,J.tawny,J.darkGray]},golden:{breedName:"Golden Retriever",scale:.42,floppy:!0,wholeColor:J.golden},chihuahua:{breedName:"Chihuahua",wholeColor:J.lightBrown,scale:.15,modifications:{tail:.6}},chow:{breedName:"Chow",wholeColor:J.redBrown,scale:.4,partColors:{tongue:J.blue},modifications:{tail:.2}},jack:{breedName:"Jack Russell",wholeColor:[1,1,1,1],scale:.2,partColors:{body:J.tawny,earL:J.tawny,earR:J.tawny,tail:J.tawny,snout:J.tawny},modifications:{tail:.5}},dachshund:{breedName:"Dachshund",wholeColor:[J.darkGray,J.redBrown],scale:.2,floppy:!0,modifications:{torso:1.5}},pug:{breedName:"Pug",wholeColor:J.lightBrown,scale:.2,partColors:{earL:J.black,earR:J.black,snout:J.black},modifications:{snout:.3,tail:.5}}},Xe=[{tX:34.1,tZ:-3.5},{tX:21.8,tZ:8.2},{tX:34.7,tZ:22.7},{tX:7,tZ:25.2},{tX:1.9,tZ:15.9},{tX:-7,tZ:8.4},{tX:-23.1,tZ:21.3},{tX:-13.7,tZ:-.3},{tX:-12.9,tZ:-8.6},{tX:-21.8,tZ:-3.9},{tX:-17.5,tZ:-32.9},{tX:-7.1,tZ:-30.1},{tX:1.3,tZ:-29.1},{tX:23.7,tZ:-17.9},{tX:17.5,tZ:-7.4}],Ze=[{tX:-7.5,tZ:-17.5},{tX:6.8,tZ:-4.1},{tX:3,tZ:8.2},{tX:-3.9,tZ:15.7},{tX:4.3,tZ:-10.8},{tX:-7.5,tZ:-5.4}],Fe=[{tX:12,tZ:-13,rotation:-45*Math.PI/180},{tX:-15,tZ:-15,rotation:45*Math.PI/180}];let ze=[],Ye=null,Ue=null,Oe={mvp:null,pos:null},De="";const Ge="Fig;Sriracha;Bagel;Barkus;Bopsy;Plankley;Fizaac;Gwen;Soren;Ivan;Ugly Baby;Thermy;Dog Kevin;Taylina;Gwillex;Whivy;Boomer;Tallulah;Cholula;Flopina;Goopy;Sugar Pop;Waffles;Floss;Norman;Miss Beautiful;Fiona;Watson;Beau;Moop;Maple;Panini;Colleen;Aristotle;Fish;Eleanor;Beth;Gingerbread;Pickles;Avril;Garry;Mona;Pascal;Shirley;Tony;Thisbe;Spaghetti;Sonny;Ocean;Jocinda;Meadow;Clark;Bambina;McCleskey".split(";").slice().sort(()=>Math.random()-.5);let $e=0;const je=["tailChase","speed","jump"],We=[{badAction:"tailChase",otherDogCount:6,text:"Find the dog who is chasing its own tail. It's very distracting!",redHerringCount:0},{badAction:"speed",otherDogCount:10,text:"Find the dog running at full speed. It's making me nervous!",redHerringCount:1},{targetBreed:"golden german lab chow pug westie chihuahua jack".split(" "),badAction:"hotdog",otherDogCount:20,text:"Find the dog who STOLE my hotdog. Make sure to get their face!",redHerringCount:3},{badAction:"jump",otherDogCount:25,text:"Find the dog who is jumping every so often. I'm afraid they'll take off flying!",redHerringCount:2}],He=document.getElementById("mission-text");He.textContent=We[$e].text,requestAnimationFrame(function e(){ze=[];const t=We[$e];h(),U.clear(U.COLOR_BUFFER_BIT|U.DEPTH_BUFFER_BIT);let n=G.identity();n=G.xRotate(n,-Me),n=G.yRotate(n,-Ae),n=G.translate(n,0,-1,0),Le?(V=60*Math.PI/180,0===Te&&(Te=-.1),V=Math.min(Math.PI/2,Math.max(.1,V+Te))):(V=60*Math.PI/180,Te=0),o=n,a=new Float32Array([-40,0,-40,40,0,-40,-40,0,40,40,0,40]),i=new Float32Array([0,1,0,0,1,0,0,1,0,0,1,0]),a=W.createBufferInfoFromArrays(U,{position:{numComponents:3,data:a},normal:{numComponents:3,data:i}}),W.setBuffersAndAttributes(U,H,a),i=G.identity(),s=G.transpose(G.inverse(i)),r=G.multiply(q,G.multiply(o,i)),W.setUniforms(H,{u_mvp:r,u_world:i,u_worldInverseTranspose:s,u_lightWorldPos:[-50,30,100],u_viewInverse:o,u_lightColor:[1,1,1,1],u_color:J.slime}),W.drawBufferInfo(U,a,U.TRIANGLE_STRIP);var o,a,r=m({view:n,tX:0,tY:20,tZ:0,sX:4,sY:4,sZ:4,color:[1,1,0,1]}),i=(i=We[$e-1])?i.otherDogCount+1:0,s=(Ue=Ue??S(t.targetBreed,i,!0),b(n,Ue,t.badAction,!0));ze.push({mvp:s,...Ue,isBad:!0,badAction:t.badAction}),"hotdog"===t.badAction&&(s=G.identity(),s=G.translate(s,Ue.pos[0],Ue.pos[1],Ue.pos[2]),s=G.yRotate(s,Ue.direction),s=G.translate(s,0,1.5*Ue.scale,2.75*Ue.scale),s=G.scale(s,Ue.scale,Ue.scale,Ue.scale),s=G.translate(s,0,.05*Math.sin(performance.now()/1e3*6),0),s=I(G.xRotate(s,.05*Math.sin(performance.now()/1e3*2)),n,[0,0,0]),Oe.mvp||(Oe={mvp:s,pos:[Ue.pos[0],Ue.pos[1]+1.5*Ue.scale,Ue.pos[2]+2.75*Ue.scale]})),(Ye=Ye??function(e,t){var n=[];for(let a=0;a<e;a++){var o=S(null,t+a);n.push({...o})}return n}(t.otherDogCount,i+1)).forEach((e,o)=>{let a=null;t.redHerringCount&&o<t.redHerringCount&&(a=je[o%je.length]),o=b(n,e,a,!1),ze.push({mvp:o,...e,isBad:!1})}),Be.forEach(e=>{m({view:n,tX:e.tX,tY:0,tZ:e.tZ,sX:.01,sY:.3,sZ:.01,color:J.slime})});let l=[];Xe.forEach(e=>{var t=m({view:n,tX:e.tX,tY:.5,tZ:e.tZ,sX:1,sY:10,sZ:1,color:J.brown});m({view:n,tX:e.tX,tY:7,tZ:e.tZ,sX:6,sY:3,sZ:6,color:J.slime}),l.push({mvp:t,name:"a tree"})}),Ze.forEach((e,t)=>{var o=n,a=[e.tX,.5,e.tZ],r=(t=0==t%2?J.rosePink:J.roseRed,e=G.identity(),e=G.translate(e,a[0],a[1],a[2]),a=m({view:o,world:e=G.scale(e,1,1,1),tX:0,tY:0,tZ:0,sX:1,sY:1,sZ:1,color:J.ivyGreen}),[[0,-.1,.1],[.12,.1,0],[0,-.25,.25],[-.3,-.3,0],[0,.1,-.3],[.25,.4,0],[0,.4,-.2],[-.1,.3,0],[0,.3,.1],[-.15,.1,-0],[0,-.4,-.4],[.4,-.4,-0]]);for(let n=0;n<r.length;n++){let a=G.copy(e),i=.1,s=.1;0==n%2?i=1.1:s=1.1,a=G.translate(a,r[n][0],r[n][1],r[n][2]),m({view:o,world:G.scale(a,i,.1,s),tX:0,tY:0,tZ:0,sX:1,sY:1,sZ:1,color:t})}l.push({mvp:a,name:"a rose bush"})}),Fe.forEach(e=>{e=function(e,t,n){let o=G.identity();return o=G.translate(o,t[0],t[1]+.25+.1,t[2]),o=G.yRotate(o,n),o=G.scale(o,2,.2,.6),t=m({view:e,world:o,tX:0,tY:0,tZ:0,sX:1,sY:1,sZ:1,color:J.woodBrown}),[[-.9,-.225,-.3],[.9,-.225,-.3],[-.9,-.225,.3],[.9,-.225,.3]].forEach(t=>{var n=G.copy(o);n=G.translate(n,t[0]/2,t[1]/.2,t[2]/.6),n=G.scale(n,.1,1.25,.3333),m({view:e,world:n,tX:0,tY:0,tZ:0,sX:1,sY:1,sZ:1,color:J.woodBrown})}),n=G.copy(o),n=G.translate(n,0,2,-.375),n=G.scale(n,1,3,.25),m({view:e,world:n,tX:0,tY:0,tZ:0,sX:1,sY:1,sZ:1,color:[J.woodBrown[0]-5/255,J.woodBrown[1]-5/255,J.woodBrown[2]-5/255,1]}),t}(n,[e.tX,0,e.tZ],e.rotation),l.push({mvp:e,name:"a bench"})}),Ee&&(Ee=!1,({capturedDog:o,missReason:a,description:s}=v(ze,l,n,r)),y(o,a,s)),requestAnimationFrame(e)})</script>