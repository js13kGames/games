<!doctype html><title>Origin</title><style>*{margin:0;padding:0}#c,#i,#p,body,html{width:100%;height:100%;font-family:sans-serif}::selection{background:0 0}::-moz-selection{background:0 0}#c,#p{position:absolute;top:0;left:0}#p{display:table;letter-spacing:.1em;color:#fff;cursor:default}#i{display:table-cell;vertical-align:middle;text-align:center}#p h1{font-size:5em;text-shadow:0 0 10px #ff0028;font-family:Impact,sans-serif}#s{margin:1em auto;width:500px;color:#fff;border-collapse:collapse}#s th{font-size:2em}#s td{font-size:1.5em}#s tr{border-top:1px solid #fff}#s tr:first-child{border-top:0}#p a,#p span{display:block;text-decoration:none;font-weight:700;font-size:1.5em;line-height:1.5em;text-shadow:0 0 5px #ff0028}#p a{color:#ff0028;display:none}</style><canvas id=c></canvas><div id=p><div id=i><h1>GAME OVER</h1><table id=s></table><a id=tweet target=_blank href="https://twitter.com/intent/tweet?text=">TWEET THIS SCORE</a> <span>HIT SPACE TO PLAY AGAIN</span></div></div><script>!function(){function t(t){return Array.prototype.slice.call(arguments,1).forEach((function(e){if(e)for(var i in e)t[i]=e[i]})),t}function e(){}function i(){return"rgb("+h(0,255)+","+h(0,255)+","+h(0,255)+")"}function o(){var t=L.innerWidth,e=L.innerHeight;f=r(t,e),O.width=t,O.height=e,y=d(t/2),m=d(e/2)}!function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime(),o=Math.max(0,16-(i-t)),n=window.setTimeout((function(){e(i+o)}),o);return t=i+o,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();var n,a,r,s,l,d,h,u=function(){};u.extend=function(t){t||(t={});var e,i=this,o=t.initialize,n=function(){o?o.apply(this,arguments):i.apply(this,arguments)};for(e in i)"prototype"!=e&&(n[e]=i[e]);for(e in i.prototype)n.prototype[e]=i.prototype[e];for(e in t)n.prototype[e]=t[e];return n},function(t){n=function(){return t.abs.apply(t,arguments)},a=function(){return t.max.apply(t,arguments)},r=function(){return t.min.apply(t,arguments)},s=function(){return t.sin.apply(t,arguments)},l=function(){return t.cos.apply(t,arguments)},d=function(t){return t<<0},h=function(e,i){return null==e?t.random():d(t.random()*(i-e))+d(e)}}(Math);var c={get:function(t){return JSON.parse(localStorage.getItem(t))},set:function(t,e){return localStorage.setItem(t,JSON.stringify(e))}};t(CanvasRenderingContext2D.prototype,{outline:function(t){t.shadowBlur?(this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowBlur=t.shadowBlur,this.shadowColor=t.shadowColor):this.shadowBlur=0,t.fillColor&&(this.fillStyle=t.fillColor,this.beginPath(),t.path.call(this,this),this.fill()),t.outlineColor&&(this.strokeStyle=t.outlineColor,this.lineWidth=t.outlineWidth,this.beginPath(),t.path.call(this,this),this.stroke(),this.closePath())}}),window.AudioContext=window.AudioContext||window.webkitAudioContext;var p={muted:!0,isSupported:!!window.AudioContext};p.play=function(){var t,e={sine:0,square:1,sawtooth:2,triangle:3},i=[];return p.isSupported&&(t=new AudioContext),function(o){if(!p.muted)try{if("string"==typeof o){var n=i.filter((function(t){return 1==t.paused}))[0];return n||(n=new Audio,i.push(n)),n.volume=1,n.src=o,void n.play()}var a=t.createOscillator();a.connect(t.destination);var r=o.type||0,s=o.from||440,l=o.to||s,d=o.duration||100;"number"==typeof r?a.type=r:"string"==typeof r&&(a.type=e[r]),a.frequency.value=s,a.noteOn(0);var h=10*(l-s)/d,u=setInterval((function(){a.frequency.value+=h}),10);setTimeout((function(){isPlaying=!1,a.noteOff(0),a.disconnect(),clearInterval(u)}),d)}catch(t){}}}();var A,f,y,m,w=u.extend({initialize:function(){this.destroyed=!1},destroy:function(){this.destroyed=!0},update:e,draw:e}),g=u.extend({initialize:function(){this.entities=[],this.length=0},add:function(t){for(var e=0;e<this.length;e++)if(this.entities[e].destroyed)return void(this.entities[e]=t);this.entities.push(t),this.length++},empty:function(){this.entities.length=0,this.length=0},updateAll:function(t,e){for(var i=0;i<this.length;i++)this.entities[i].destroyed||(this.entities[i].update(t),this.entities[i].draw(e))}}),v="#121011",C="rgb(255,0,40)",V="#ffffff",T=.03,E=3e-6,x=100,B=.04,S=1.1,I=.001,b=2e-5,U="Impact, sans-serif",k=.3,D=.005,Q="transparent",z=C,R="#000000",W=.05,Y=.05,q="red",K=10,P=2*Math.PI,H=w.extend({initialize:function(){var e=this;w.prototype.initialize.apply(e,arguments),t(e,{health:1,holes:3,holePercentage:.5,radius:.25,direction:0,speed:.002,rotationSpeed:0,combo:0,bestCombo:0,points:0,isDead:!1}),addEventListener("keydown",(function(t){37===t.keyCode?e.rotationSpeed=-e.speed:39===t.keyCode&&(e.rotationSpeed=e.speed)})),addEventListener("keyup",(function(t){37===t.keyCode?e.rotationSpeed=a(0,e.rotationSpeed):39===t.keyCode&&(e.rotationSpeed=r(0,e.rotationSpeed))}))},dead:function(){this.isDead||(this.isDead=!0,function(t,e){j.push([t,e]),j.sort((function(t,e){return t[0]>e[0]?-1:1})),j.length=r(j.length,K),c.set("scores",j)}(this.points,this.bestCombo),setTimeout((function(){N.add(new X("GAME OVER","255, 0, 0"))}),1500),setTimeout((function(){_.set("gameover")}),3e3))},update:function(t){this.health<=0&&this.dead(),this.rotationSpeed&&(this.direction+=this.rotationSpeed*t)},draw:function(t){if(!(this.health<=0)){var e=P*(1-this.holePercentage)/this.holes,i=P*this.holePercentage/this.holes,o=this.radius*f;t.outline({outlineColor:"#373536",outlineWidth:2,path:function(){t.arc(y,m,d(o),0,P,!1)}});for(var r=0;r<this.holes;r++){var l=this.direction+r*(e+i),h=l+e;t.outline({outlineColor:V,outlineWidth:o/15,shadowColor:V,shadowBlur:o/10,path:function(t){t.arc(y,m,d(o),l,h,!1)}})}var u=a(s(Date.now()*I),0)*f*S*B,c=n(s(2*Date.now()*I))*f*S*B,p=a(u+c,B*f);t.outline({fillColor:C,shadowColor:C,shadowBlur:2*B*f,path:function(t){t.moveTo(y,m),t.arc(y,m,d(p),0,P*A.health,!1)}})}}}),F=w.extend({initialize:function(){w.prototype.initialize.apply(this,arguments),t(this,{direction:h()*P,distance:.75,orbit:0===h(0,x),speed:F.speed}),p.play({type:"sine",from:h(500,2e3),to:1,duration:300})},update:function(t){this.distance-=this.speed*t,this.orbit&&(this.direction=(this.direction-5e-4*t)%P);var e=!1;if(this.distance<0)A.health-=.05,e=!0,p.play("data:audio/mpeg;base64,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"),A.health>0&&N.add(new X("OUCH","255, 0, 0")),A.combo=0;else if(n(this.distance-A.radius)<T&&A.health>0){for(var i=this.direction+A.direction;0>i;)i+=P;(e=(i%=P/A.holes)>P*A.holePercentage/A.holes)&&(A.combo++,A.combo>A.bestCombo&&(A.bestCombo=A.combo),0==A.combo%3&&N.add(new X(A.combo+" COMBO","200, 0, 200")),p.play({type:3,from:200,to:1e3,duration:100}),p.play({type:0,from:1e3,to:200,duration:100}))}if(e){this.destroy();for(var o=(this.distance-T)*f,a=y+l(this.direction)*o,r=m-s(this.direction)*o,d=0;100>d;d++)N.add(new M({x:a,y:r,direction:this.direction+(h()-.5),speed:.05*h()+.1,age:500}));A.health>0&&A.points++}},draw:function(t){var e=T*f,o=y+l(this.direction)*this.distance*f,n=m-s(this.direction)*this.distance*f,a=i();t.outline({fillColor:a,shadowColor:a,shadowBlur:1.5*e,path:function(t){t.arc(d(o),d(n),d(e),0,P,!1)}})}}),M=w.extend({initialize:function(e){var o=this;w.prototype.initialize.apply(o,arguments),t(this,{x:e.x||0,y:e.y||0,direction:e.direction||h()*P,speed:e.speed||1,color:e.color||i(),age:e.age||1e3});var n=e.age||1e3;setTimeout((function(){o.destroy()}),n)},update:function(t){this.x+=l(this.direction)*this.speed*t,this.y-=s(this.direction)*this.speed*t},draw:function(t){var e=d(this.x),i=d(this.y);t.outline({fillColor:this.color,shadowColor:this.color,shadowBlur:10,path:function(t){t.arc(e,i,1,0,P,!1)}})}}),X=w.extend({initialize:function(e,i){var o=this;w.prototype.initialize.apply(o,arguments),t(this,{message:e,outlineColor:i||"255, 0, 0",alpha:0,fadeSpeed:.005,offset:0}),setTimeout((function(){o.fadeSpeed*=-1}),1e3),setTimeout((function(){o.destroy()}),2e3)},update:function(t){this.alpha=r(this.alpha+t*this.fadeSpeed,1),this.offset+=1e-4*t*f},draw:function(t){t.font=.1*f+"px "+U,t.fillStyle="rgba(255, 255, 255, "+this.alpha+")",t.textAlign="center",t.textBaseline="middle",t.shadowBlur=50,t.shadowColor="rgb("+this.outlineColor+")",t.strokeStyle="rgba("+this.outlineColor+", "+this.alpha+")",t.lineWidth=.01*f,t.strokeText(this.message,y,m-this.offset),t.fillText(this.message,y,m-this.offset)}}),N=new g,L=window,O=document.getElementById("c"),Z=O.getContext("2d"),J=document.getElementById("p"),G=document.getElementById("s");L.onresize=o,o();var j=c.get("scores");null==j&&(j=[]),function(t){document.documentElement.style.backgroundColor=t}(v);var $=new Date,_=function(){var t;return{get:function(){return t},set:function(e){t=e,"game"===e?(p.play({type:"sine",from:200,to:1500,duration:2e3}),N.empty(),A=new H,N.add(A),N.add(new X("PROTECT THE HEART!","0, 128, 255")),setTimeout((function(){N.add(new X("USE ARROW KEYS","0, 128, 255"))}),1200),F.speed=1e-4,J.style.display="none"):"gameover"===e?(function(){for(var t="<tr><th></th><th>SCORE</th><th>BEST COMBO</th></tr>",e=0;K>e;e++){var i=j[e]||["-","-"];t+="<tr>",t+="<td>"+(e+1)+"</td>",t+="<td>"+i[0]+"</td>",t+="<td>"+i[1]+"</td>",t+="</tr>"}G.innerHTML=t}(),J.style.display="table"):"menu"===e&&(J.style.display="none")}}}();_.set("menu"),addEventListener("keyup",(function(t){("menu"===_.get()||"gameover"===_.get())&&32===t.keyCode&&_.set("game")})),function t(e){Z.clearRect(0,0,O.width,O.height);var i=e-$;if($=e,"game"===_.get())1===h(1,x)&&A.health>0&&(N.add(new F),F.speed+=E,A.speed+=b),N.updateAll(i,Z);else{var o=a(s(e*I),0)*f*S*B,r=n(s(2*e*I))*f*S*B,l=a(o+r,B*f);Z.outline({fillColor:v,shadowColor:C,shadowBlur:2*W*f,path:function(t){t.arc(y,m,l,0,P,!1)}})}if("menu"===_.get()){var d="ORIGIN";Z.font=k*f+"px "+U,Z.fillStyle=Q,Z.textAlign="center",Z.textBaseline="middle",Z.shadowBlur=5*D*f,Z.shadowColor=R,Z.strokeStyle=z,Z.lineWidth=D*f,Z.fillText(d,y,m),Z.strokeText(d,y,m),Z.font=Y*f+"px "+U,Z.fillStyle=q,Z.textBaseline="top",Z.fillText("hit space",y,m+k*f/2)}requestAnimationFrame(t)}()}()</script>