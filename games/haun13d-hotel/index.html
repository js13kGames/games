<title>Haun13d Hotel</title><script src=/2024/webxr/babylon.js></script><style>body,html{width:100%;height:100%;margin:0;padding:0}#c{width:100%;height:100%;touch-action:none}#r{display:none;background-color:#000000A0;position:absolute;cursor:pointer;top:50%;transform:translateY(150px);text-shadow:#088 0 0 3px;color:#586069;font:bold 88px monospace;width:400px;text-align:center}#r:hover{background-color:#008080A0;color:#00f0f0}</style><div style=position:absolute;width:100%;height:100%;display:flex;justify-content:center;align-items:center><div id=r>RESTART</div></div><canvas id=c></canvas><script>var t=(t,e)=>(e-t)/e,s=class{i=!1;h=[];o;B(){this.i||(this.i=!0,this.o=new AudioContext,this.A(this.l),this.A(this.u),this.A(this.L),this.A(this.N))}A(t){let e=this.o.createBuffer(1,96e3,48e3);const s=e.getChannelData(0);for(let e=96e3;e--;)s[e]=t(e);this.h.push(e)}O(t){const e=this.o.createBufferSource();e.buffer=this.h[t],e.connect(this.o.destination),e.start()}l=e=>{if(e>2e4)return null;var s=t(e,2e4);return 33&Math.pow(5e5*e,.3)?s:-s};u=t=>2*(Math.random()-.5)*Math.exp(-t/5e3);L=e=>{var s=11e4;if(e>s)return null;var i=t(e,s);return Math.sin(.001*e*Math.sin(.009*e+Math.sin(e/200))+Math.sin(e/100))*i*i};N=e=>{var s=[0,0,4,0,12,7,4,12],i=35e3;if(e>i)return null;var h=s[s.length*e/i|0];if(void 0===h)return 0;var n=.8*Math.pow(2,h/12),a=t(e*s.length%i,i);return e*n&64?a:-a}},i=[.05,0,.2,.05,-1,.2,.8,-1,-.3,.8,0,-.3,.05,1,.2,.05,0,.2,.8,0,-.3,.8,0,-.3,.8,1,-.3,-.45,1,.2,-.45,0,.2,-.2,0,.2,-.2,1,.2,-.45,0,.2,-.45,-1,.2,-.2,-1,.2,-.45,0,.2,-.2,0,.2,-1.2,0,-.3,-1.2,-1,-.3,-.45,-1,.2,-.45,-1,.2,-.45,0,.2,-1.2,1,-.3,-1.2,0,-.3,-.45,0,.2,-.45,0,.2,-.45,1,.2,-.2,1,.2,-.2,0,.2,.05,0,.2,-.2,1,.2,.05,1,.2,-.2,0,.2,.05,-1,.2,-.2,0,.2,.05,-1,.2,.05,0,.2],e=[.581975,.995,.581975,.005,.335,.005,.335,.995,.248641,.995,.248641,.005,.001667,.005,.001667,.005,.001667,.995,.248641,.995,.248641,.005,.331666,.005,.331666,.995,.581975,.995,.581975,.005,.665,.005,.581975,.995,.665,.995,.335,.995,.335,.005,.581975,.005,.581975,.005,.581975,.995,.001666,.995,.001666,.005,.248641,.005,.248641,.005,.248641,.995,.331667,.995,.331667,.005,.248641,.005,.331667,.995,.248641,.995,.665,.995,.581975,.005,.665,.995,.581975,.005,.581975,.995],h=[0,1,2,0,2,3,4,5,6,4,7,8,9,10,11,9,11,12,13,14,15,16,15,17,18,19,20,18,21,22,23,24,25,23,26,27,28,29,30,31,30,32,33,15,34,35,36,37],n=[.1,.01,.8,.1,.43,.8,.1,.43,.1,.1,.1,.1,.1,.24,-.4,.1,.43,-.4,.07,.47,-.4,0,.47,-.4,0,.24,-.4,.07,.47,.8,0,.47,.8,0,.47,-.1,.07,.47,-.1,0,.2,-.25,.1,.2,-.25,.1,.24,-.4,.1,.24,-.4,0,.24,-.4,.1,.2,-.25,.1,.43,-.3,.1,.43,-.4,.1,.2,-.25,.1,.43,-.4,.1,.24,-.4,0,.01,.8,0,.47,.8,.07,.47,.8,.07,.47,.8,.1,.43,.8,.1,.43,.8,.1,.01,.8,0,.01,.8,.1,.01,.8,.1,.1,.1,0,.01,.8,.1,.1,.1,0,.1,.1,.05,-.02,-.1,.05,.07,-.2,.1,-.26,-.4,.1,-.3,-.2,.1,.2,-.25,0,.47,-.3,.07,.47,-.3,.05,.52,-.3,0,.52,-.3,0,-.3,-.2,.1,-.3,-.2,.1,-.26,-.4,.1,-.26,-.4,0,-.26,-.4,0,-.02,-.1,.05,-.02,-.1,.1,-.3,-.2,0,-.3,-.2,.05,.07,-.2,0,.07,-.2,0,-.26,-.4,.05,.07,-.2,0,-.26,-.4,.1,-.26,-.4,.05,.15,-.2,0,.15,-.2,0,.07,-.2,0,.07,-.2,.05,.07,-.2,0,.07,.05,.05,.07,.05,.05,-.02,-.1,0,-.02,-.1,.05,.07,.05,.05,.15,-.2,.05,.07,-.2,.05,.07,.05,.05,-.02,-.1,.1,.1,.1,.1,.2,-.25,.05,.15,-.2,.05,.07,.05,0,.1,.1,.1,.1,.1,0,.1,.1,.1,.2,-.25,0,.2,-.25,0,.15,-.2,0,.15,-.2,.05,.15,-.2,.07,.47,-.3,.07,.47,-.4,.1,.43,-.4,.07,.47,-.3,.1,.43,-.3,.07,.47,.8,.07,.47,-.1,.1,.43,.1,.1,.43,.1,.1,.43,.8,.07,.47,-.1,.07,.47,-.3,.1,.43,-.3,.07,.47,-.1,.1,.43,-.3,.1,.43,.1,.07,.47,-.3,0,.47,-.3,0,.47,-.4,0,.47,-.4,.07,.47,-.4,.05,.49,-.1,0,.49,-.1,0,.52,-.3,0,.52,-.3,.05,.52,-.3,.07,.47,-.3,.07,.47,-.1,.05,.49,-.1,.05,.49,-.1,.05,.52,-.3,.07,.47,-.1,0,.47,-.1,0,.49,-.1,0,.49,-.1,.05,.49,-.1,-.1,.01,.8,-.1,.1,.1,-.1,.43,.1,-.1,.43,.8,-.1,.24,-.4,-.08,.47,-.4,-.1,.43,-.4,-.08,.47,.8,-.08,.47,-.1,0,.24,-.4,-.1,.24,-.4,-.1,.24,-.4,-.1,.2,-.25,-.1,.2,-.25,-.1,.24,-.4,-.1,.43,-.4,-.1,.2,-.25,-.1,.43,-.4,-.1,.43,-.3,-.1,.01,.8,-.1,.43,.8,-.1,.43,.8,-.08,.47,.8,-.08,.47,.8,0,.47,.8,0,.01,.8,-.1,.1,.1,0,.01,.8,-.1,.1,.1,-.1,.01,.8,-.05,-.02,-.1,-.1,-.3,-.2,-.1,-.26,-.4,-.05,.07,-.2,-.1,.2,-.25,-.05,.52,-.3,-.08,.47,-.3,-.1,-.26,-.4,-.1,-.26,-.4,-.1,-.3,-.2,0,-.3,-.2,-.1,-.3,-.2,-.05,-.02,-.1,-.05,.07,-.2,-.1,-.26,-.4,0,-.26,-.4,-.05,.07,-.2,0,-.26,-.4,-.05,.15,-.2,-.05,.07,-.2,0,.07,-.2,0,.07,-.2,0,-.02,-.1,-.05,-.02,-.1,-.05,.07,.05,-.05,.07,.05,-.05,-.02,-.1,-.05,.07,-.2,-.05,.07,.05,-.05,.15,-.2,-.1,.1,.1,-.05,.07,.05,-.05,.15,-.2,-.1,.2,-.25,0,.1,.1,0,.1,.1,-.1,.1,.1,-.1,.2,-.25,-.05,.15,-.2,0,.15,-.2,0,.15,-.2,0,.2,-.25,-.08,.47,-.3,-.1,.43,-.3,-.1,.43,-.4,-.08,.47,-.3,-.08,.47,-.4,-.08,.47,.8,-.1,.43,.8,-.1,.43,.1,-.1,.43,.1,-.08,.47,-.1,-.08,.47,-.1,-.1,.43,.1,-.1,.43,-.3,-.08,.47,-.1,-.1,.43,-.3,-.08,.47,-.3,-.08,.47,-.3,-.08,.47,-.4,0,.47,-.4,0,.47,-.4,0,.47,-.3,-.05,.49,-.1,-.05,.52,-.3,0,.52,-.3,0,.52,-.3,-.08,.47,-.3,-.05,.52,-.3,-.05,.49,-.1,-.05,.49,-.1,-.08,.47,-.1,-.08,.47,-.1,-.05,.49,-.1,0,.49,-.1,0,.49,-.1,0,.47,-.1],a=[.99,.66,.99,.99,.43,.99,.43,.73,.62,.51,.46,.51,.43,.47,.43,.41,.62,.41,.99,.58,.99,.64,.22,.64,.22,.58,.85,.29,.85,.39,.99,.39,.99,.39,.99,.29,.14,.79,.09,.99,0,.99,.14,.79,0,.99,0,.83,.99,.43,.62,.43,.62,.49,.62,.49,.66,.53,.66,.53,.99,.53,0,0,0,.1,.56,.1,0,0,.56,.1,.56,0,.11,.49,.1,.36,.39,.33,.34,.5,.14,.79,.26,.72,.26,.72,.26,.72,.26,.72,.19,.72,.19,.72,.19,.72,.19,.72,.19,.72,.72,0,.72,.04,.94,.04,.94,0,.11,.7,.11,.67,.37,.67,.11,.7,.37,.67,.37,.7,.04,.7,.04,.67,.11,.67,.11,.67,.11,.7,.62,0,.62,.04,.72,.04,.72,0,0,.55,.03,.33,.1,.36,0,.55,.11,.49,.56,.36,.85,.36,.83,.3,.62,.3,.56,0,.56,.1,.56,0,0,.76,0,.67,.04,.67,.04,.67,.04,.7,.09,.2,0,.2,0,.16,.09,.2,.09,.16,.99,.2,.22,.2,.43,.16,.43,.16,.99,.16,.22,.2,.09,.2,.09,.16,.22,.2,.09,.16,.43,.16,.09,.59,.09,.65,0,.65,0,.65,0,.59,.22,.61,.22,.65,.09,.65,.09,.65,.09,.61,.09,.59,.22,.59,.22,.61,.22,.61,.09,.61,.26,.72,.26,.72,.26,.72,.26,.72,.26,.72,.99,.66,.43,.73,.43,.99,.99,.99,.62,.51,.43,.47,.46,.51,.99,.58,.22,.58,.99,.29,.99,.39,.99,.39,.85,.39,.14,.79,0,.83,0,.99,.14,.79,0,.99,.09,.99,.99,.53,.66,.53,.66,.53,.62,.49,.62,.49,.62,.43,0,0,.56,.1,0,0,.56,.1,0,.1,.11,.49,.34,.5,.39,.33,.1,.36,.14,.79,.26,.72,.26,.72,.19,.72,.19,.72,.19,.72,.94,0,.94,.04,.72,.04,.11,.7,.37,.7,.37,.67,.11,.7,.37,.67,.04,.7,.11,.7,.11,.67,.11,.67,.72,0,.72,.04,.62,.04,0,.55,.11,.49,.1,.36,0,.55,.03,.33,.56,.36,.62,.3,.83,.3,.85,.36,.56,0,.56,0,.56,.1,0,.76,.04,.7,.04,.67,.04,.67,0,.67,.09,.2,.09,.16,0,.16,.09,.2,0,.2,.99,.2,.99,.16,.43,.16,.43,.16,.22,.2,.22,.2,.43,.16,.09,.16,.22,.2,.09,.16,.09,.2,.09,.59,0,.59,0,.65,0,.65,.09,.65,.22,.61,.09,.61,.09,.65,.09,.65,.09,.59,.09,.61,.22,.61,.22,.61,.22,.59,.26,.72,.26,.72,.26,.72,.26,.72,.26,.72],r=[0,1,2,0,2,3,4,5,6,4,6,7,4,7,8,9,10,11,9,11,12,13,14,15,13,16,17,18,19,20,21,22,23,24,25,26,24,27,28,24,29,30,31,32,33,34,35,36,37,38,39,37,39,40,3,2,19,3,19,41,42,43,44,42,44,45,46,47,48,46,49,50,51,52,53,51,53,54,55,56,57,58,59,60,61,62,63,61,64,65,66,67,68,66,68,69,70,71,72,73,72,74,75,76,77,75,77,78,79,80,67,81,67,66,82,83,84,82,85,86,87,88,89,90,89,91,92,93,94,92,95,96,97,98,99,100,101,102,103,104,105,103,106,107,108,109,110,108,111,112,113,114,115,113,116,117,118,119,120,118,121,122,123,124,125,123,125,126,127,8,7,127,7,128,127,128,129,130,131,11,130,11,10,13,132,133,13,134,135,136,137,138,139,140,141,24,142,143,24,144,145,24,146,147,148,36,149,150,151,152,153,154,155,153,155,156,124,157,141,124,141,125,42,45,158,42,158,159,46,50,160,46,161,162,51,163,164,51,164,165,166,167,168,169,170,56,171,172,173,171,174,62,66,175,176,66,176,177,178,179,180,181,180,182,183,184,185,183,185,186,187,66,177,188,177,189,190,191,192,190,193,194,195,196,197,198,197,199,200,201,202,200,203,204,205,206,207,208,209,210,211,212,213,211,214,215,216,217,218,216,219,109,220,221,222,220,223,224,225,226,227,225,228,229],o={positions:[1.5,.5,-.5,1.5,1.5,-.5,1.5,1.5,-1.5,1.5,.5,-1.5,-.5,.5,-1.5,-.5,1.5,-1.5,-1.5,1.5,-1.5,-1.5,.5,-1.5,-1.5,.5,.5,-1.5,1.5,.5,-1.5,1.5,1.5,-1.5,.5,1.5,.9,1.2,1.5,.5,1.5,1.5,1.5,1.5,1.5,1.5,.5,1.5,-.5,-1.5,.5,-1.5,-1.5,.5,-1.5,-1.5,1.5,-.9,-1.5,1.5,.5,1.5,.5,1.5,1.5,.5,1.5,1.5,1.5,1.5,1.5,1.5,.5,1.5,1.5,.9,-1.5,1.5,.9,-.5,1.5,1.5,-.5,1.5,1.5,-1.5,1.5,-1.5,-1.5,.5,-1.5,-.5,.5,-1.5,-.5,1.5,-1.5,-1.5,.5,-1.5,-1.5,1.5,-.5,-1.5,-1.5,-.5,-.5,-1.5,-1.5,-.5,-1.5,-1.5,-1.5,-1.5,1.5,-1.5,-.5,1.5,-.5,-.5,1.5,-.5,-1.5,1.5,-1.5,-1.5,1.5,-.5,1.5,1.5,.5,1.5,1.5,.5,.5,1.5,-.5,1.5,1.5,-.5,.5,1.5,-1.5,1.5,1.5,-.5,1.5,1.5,-1.5,1.5,1.5,-1.5,.5,-1.5,-.5,-1.5,-1.5,.5,-1.5,-1.5,.5,-.5,-1.5,-.5,-1.5,-1.5,-.5,-.5,-1.5,-1.5,-1.5,-1.5,-.5,-1.5,-1.5,-1.5,-1.5,-1.5,-1.5,-.5,-1.5,-1.5,.5,.5,1.5,-1.5,1.5,1.5,-1.5,1.5,1.5,-.5,1.5,1.5,-.5,.5,1.5,-.5,1.5,1.5,-.5,-.5,-1.5,-1.5,-1.5,-1.5,-1.5,-1.5,-1.5,-.5,-.5,-1.5,-1.5,-1.5,-1.5,-.5,-.5,-1.5,-.5,-1.5,-1.5,-.5,-1.5,.5,-1.5,-1.5,1.5,-1.5,-1.5,1.5,-.5,-1.5,.5,-1.5,1.5,.5,1.5,1.5,1.5,1.5,1.5,1.5,.5,1.5,.5,1.5,1.5,1.5,.5,1.5,1.5,.5,1.5,-1.5,-.5,.5,-1.5,-.5,.5,-1.5,.5,1.5,-1.5,-.5,1.5,-1.5,.5,1.5,-1.5,-1.5,.5,-1.5,-1.5,1.5,-1.5,-1.5,1.5,-1.5,-.5,-.5,-1.5,-1.5,-1.5,1.5,-.5,-.5,1.5,-.5,-.5,1.5,.5,-1.5,1.5,-.5,-1.5,1.5,.5,-1.5,1.5,-1.5,-.5,1.5,-1.5,-1.5,1.5,-.5,-.5,1.5,-1.5,-.5,1.5,-1.5,1.5,-.5,-1.5,1.5,.5,-1.5,.5,.5,-1.5,1.5,-.5,-1.5,.5,-.5,-1.5,1.5,-1.5,-1.5,1.5,-.5,-1.5,.5,-1.5,-1.5,.5,-1.5,-1.5,.5,-1.5,-1.5,-1.5,-.5,1.5,-1.5,.5,1.5,-.9,1.2,1.5,-1.5,-.5,1.5,-.9,-.5,1.5,.9,1.2,1.5,.9,-.5,1.5,.9,-.5,1.6,.9,1.2,1.5,.9,1.2,1.6,-1.5,-1.5,1.5,-1.5,-.5,1.5,-.9,-1.5,1.5,.9,-.5,1.5,.9,-1.5,1.5,.9,-1.5,1.6,.9,-.5,1.5,-1.5,1.5,.5,-.5,1.5,1.5,-1.5,1.5,.5,-1.5,1.5,1.5,.5,1.5,1.5,.5,1.5,1.5,1.5,-1.5,.5,.9,-1.5,1.5,1.5,-1.5,.5,1.5,-1.5,1.5,-1.5,.5,1.5,-1.5,1.5,1.5,-.5,1.5,1.5,-1.5,.5,1.5,-.5,1.5,1.5,-.5,1.5,1.5,1.5,.5,-1.5,1.5,1.5,-1.5,.5,1.5,-1.5,1.5,.5,-1.5,.5,1.5,-1.5,.5,1.5,-1.5,.71,1.01,1.6,.71,-.5,1.6,.71,-.5,1.3,.71,1.01,1.3,.71,-1.5,1.6,.71,-1.5,1.3,-.9,-1.5,1.5,-.9,-.5,1.5,-.9,-.5,1.6,-.9,-1.5,1.6,-.72,-1.5,1.3,-.72,-.5,1.3,.71,-.5,1.3,.71,-.5,1.3,.71,-1.5,1.3,-.9,-.5,1.5,-.9,1.2,1.5,-.9,1.2,1.6,-.9,-.5,1.5,-.72,1.01,1.3,.71,1.01,1.3,.71,1.01,1.3,.71,-.5,1.3,.71,1.01,1.6,-.72,1.01,1.6,-.9,1.2,1.6,.71,1.01,1.6,-.9,1.2,1.6,.9,1.2,1.6,-.72,-.5,1.6,-.9,-.5,1.6,-.9,-.5,1.6,-.9,1.2,1.6,.71,-.5,1.6,.71,1.01,1.6,.9,1.2,1.6,.71,-.5,1.6,.9,1.2,1.6,.9,-.5,1.6,-.72,-1.5,1.6,-.9,-1.5,1.6,-.9,-1.5,1.6,-.9,-.5,1.6,.71,-1.5,1.6,.71,-.5,1.6,.9,-.5,1.6,.71,-1.5,1.6,.9,-.5,1.6,.9,-1.5,1.6,-.72,1.01,1.6,.71,1.01,1.6,.71,1.01,1.3,-.72,1.01,1.6,-.72,1.01,1.3,-.72,-1.5,1.6,-.72,-.5,1.6,-.72,-.5,1.3,-.72,-1.5,1.6,-.72,-.5,1.3,-.72,-1.5,1.3,-.72,-.5,1.6,-.72,1.01,1.6,-.72,1.01,1.3,-.72,-.5,1.6,-.72,-.5,1.3,.71,-1.5,1.6,-.72,-1.5,1.6,-.72,-1.5,1.3,.71,-1.5,1.3],uvs:[.41,.66,.41,.75,.5,.75,.5,.66,.16,.91,.16,1,.25,1,.25,.91,.58,.66,.58,.75,.5,.75,.5,.66,.8,.97,.83,1,.75,1,.75,.91,.41,.83,.5,.83,.5,.75,.45,.75,.58,.83,.5,.83,.5,.75,.5,.75,.58,.75,.8,.75,.8,.83,.75,.83,.75,.75,.58,.5,.58,.58,.5,.58,.58,.5,.5,.5,.16,.75,.16,.83,.25,.83,.25,.75,.41,.5,.41,.58,.5,.58,.5,.5,.25,.58,.25,.66,.33,.66,.25,.58,.33,.58,.25,.5,.25,.58,.25,.5,.33,.5,.75,.58,.75,.66,.66,.66,.75,.58,.66,.58,.75,.5,.75,.58,.75,.5,.66,.5,.58,.5,.58,1,.5,1,.5,.91,.5,.91,.58,.91,.5,.91,.41,1,.5,1,.5,.91,.41,1,.5,.91,.41,.91,.5,.91,.75,.66,.75,.75,.66,.75,.75,.66,.25,.66,.25,.75,.33,.75,.25,.66,.33,.75,.33,.75,.25,.91,.33,.91,.33,.83,.25,.91,.25,.83,.25,1,.33,1,.25,1,.25,.91,.41,1,.75,.91,.66,.91,.66,.83,.75,.91,.75,.83,.75,1,.66,1,.75,.91,.66,1,.66,1,0,.83,0,.91,.08,.91,0,.83,.08,.83,0,.75,0,.83,.08,.75,.08,.75,.08,.75,1,.83,1,.91,.95,.97,1,.83,.95,.83,.12,.73,.12,.59,.11,.59,.12,.73,.11,.73,1,.75,1,.83,.95,.75,.12,.59,.12,.51,.11,.51,.12,.59,.75,.83,.66,.75,.75,.83,.75,.75,.58,.75,.58,.75,.25,.83,.3,.75,.25,.83,.25,.75,1,.91,1,1,.91,1,1,.91,.91,1,.91,1,0,.91,0,1,.08,1,0,.91,.08,1,.08,1,.11,.72,.11,.59,.14,.59,.14,.72,.11,.51,.14,.51,.12,.51,.12,.59,.11,.59,.11,.51,.93,.75,.93,.83,.81,.83,.81,.83,.81,.75,.12,.59,.12,.73,.11,.73,.12,.59,.93,.95,.81,.95,.81,.95,.81,.83,.06,.72,.18,.72,.2,.73,.06,.72,.2,.73,.05,.73,.18,.59,.2,.59,.2,.59,.2,.73,.06,.59,.06,.72,.05,.73,.06,.59,.05,.73,.05,.59,.18,.51,.2,.51,.2,.51,.2,.59,.06,.51,.06,.59,.05,.59,.06,.51,.05,.59,.05,.51,.18,.62,.06,.62,.06,.64,.18,.62,.18,.64,.11,.51,.11,.59,.14,.59,.11,.51,.14,.59,.14,.51,.11,.59,.11,.72,.14,.72,.11,.59,.14,.59,.56,.86,.68,.86,.68,.88,.56,.88],indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,23,24,25,26,27,25,27,28,26,12,15,26,15,27,29,30,31,32,31,33,30,8,11,30,11,31,34,35,36,34,36,37,35,4,7,35,7,36,38,39,40,38,40,41,39,0,3,39,3,40,42,43,44,45,44,46,46,44,0,46,0,39,47,48,46,49,46,50,50,46,39,50,39,38,51,52,53,54,53,55,55,53,8,55,8,30,56,57,55,58,55,59,59,55,30,59,30,60,61,62,63,61,64,65,65,66,21,65,21,20,67,68,69,70,71,72,72,73,17,72,17,16,74,75,76,77,76,53,53,76,9,53,9,8,78,79,80,81,82,44,44,83,1,44,1,0,84,85,86,87,86,88,85,72,16,85,16,86,89,90,85,91,85,92,90,93,72,90,72,85,94,95,96,97,96,98,95,65,20,95,20,96,99,100,95,99,95,101,102,61,65,103,65,95,104,105,106,107,106,108,108,106,4,108,4,35,109,110,108,109,108,111,112,108,35,113,35,34,114,115,116,117,116,118,119,120,121,122,121,123,124,125,118,124,118,126,127,128,129,130,129,121,131,96,132,133,132,134,96,20,135,96,136,132,137,86,138,139,138,140,86,16,19,86,19,138,141,142,143,144,145,116,116,146,13,116,13,12,147,148,149,150,151,106,106,152,5,106,5,4,153,154,155,153,155,156,154,157,158,154,158,155,159,160,161,159,161,162,163,164,165,163,166,167,168,169,170,171,170,161,164,172,173,164,174,175,176,177,178,179,180,181,177,182,183,177,184,185,186,187,188,189,190,191,182,192,193,182,194,195,196,197,198,199,200,201,202,203,204,205,204,206,207,208,209,210,211,212,213,214,215,216,215,217,218,219,220,218,220,221]},B=[.9,1.39,1.5,.5,1.5,1.5,1.5,1.5,1.5,1.5,.5,1.5,.9,-1.5,1.5,.9,-.5,1.5,1.5,-.5,1.5,1.5,-1.5,1.5,-1.5,-.5,1.5,-1.5,.5,1.5,-.9,1.39,1.5,-.9,-.5,1.5,.9,1.39,1.5,.9,-.5,1.5,.9,-.5,1.6,.9,1.39,1.5,.9,1.39,1.6,-1.5,-1.5,1.5,-.9,-1.5,1.5,.9,-.5,1.5,.9,-1.5,1.5,.9,-1.5,1.6,.9,-.5,1.5,-1.5,1.5,1.5,-.5,1.5,1.5,.71,1.01,1.6,.71,-.5,1.6,.71,-.5,1.3,.71,1.01,1.3,.71,-1.5,1.6,.71,-1.5,1.3,-.9,-1.5,1.5,-.9,-.5,1.5,-.9,-.5,1.6,-.9,-1.5,1.5,-.9,-1.5,1.6,-.72,-1.5,1.3,-.72,-.5,1.3,.71,-.5,1.3,.71,-.5,1.3,.71,-1.5,1.3,-.9,-.5,1.5,-.9,1.39,1.5,-.9,1.39,1.6,-.9,-.5,1.5,-.72,1.01,1.3,.71,1.01,1.3,.71,1.01,1.3,.71,-.5,1.3,.71,1.01,1.6,-.72,1.01,1.6,-.9,1.39,1.6,.71,1.01,1.6,-.9,1.39,1.6,.9,1.39,1.6,-.72,1.01,1.6,-.72,-.5,1.6,-.9,-.5,1.6,-.72,1.01,1.6,-.9,-.5,1.6,-.9,1.39,1.6,.71,-.5,1.6,.71,1.01,1.6,.9,1.39,1.6,.71,-.5,1.6,.9,1.39,1.6,.9,-.5,1.6,-.72,-1.5,1.6,-.9,-1.5,1.6,-.9,-1.5,1.6,-.9,-.5,1.6,.71,-1.5,1.6,.71,-.5,1.6,.9,-.5,1.6,.71,-1.5,1.6,.9,-.5,1.6,.9,-1.5,1.6,.71,-1.5,1.6,-.72,-1.5,1.6,-.72,-1.5,1.3,-.72,-1.5,1.3,.71,-1.5,1.3,.71,1.01,1.6,.71,1.01,1.3,-.72,1.01,1.3,-.72,1.01,1.3,-.72,1.01,1.6,-.72,-.5,1.6,-.72,1.01,1.6,-.72,1.01,1.3,-.72,-.5,1.6,-.72,-.5,1.3,-.72,-1.5,1.6,-.72,-.5,1.6,-.72,-.5,1.3,-.72,-.5,1.3,-.72,-1.5,1.3],c=[.05,.99,.08,1,0,1,0,.91,.05,.75,.05,.83,0,.83,0,.75,.25,.83,.25,.91,.2,.99,.2,.83,.22,.48,.22,.34,.21,.34,.22,.48,.21,.48,.25,.75,.2,.75,.22,.34,.22,.26,.21,.26,.22,.34,.25,1,.16,1,.01,.46,.01,.33,.04,.33,.04,.46,.01,.25,.04,.25,.22,.26,.22,.34,.21,.34,.22,.26,.21,.26,.18,.25,.18,.32,.06,.32,.06,.32,.06,.25,.22,.34,.22,.48,.21,.48,.22,.34,.18,.45,.06,.45,.06,.45,.06,.32,.06,.46,.18,.46,.2,.5,.06,.46,.2,.5,.05,.5,.21,.47,.21,.34,.22,.34,.21,.47,.22,.34,.22,.48,.03,.34,.03,.47,.01,.48,.03,.34,.01,.48,.01,.34,.21,.26,.22,.26,.22,.26,.22,.34,.03,.26,.03,.34,.01,.34,.03,.26,.01,.34,.01,.26,.56,.86,.68,.86,.68,.88,.68,.88,.56,.88,.01,.41,.04,.41,.04,.29,.04,.29,.01,.29,.2,.35,.2,.47,.23,.47,.2,.35,.23,.35,.2,.27,.2,.35,.23,.35,.23,.35,.23,.27],A=[0,1,2,0,2,3,4,5,6,4,6,7,5,0,3,5,3,6,8,9,10,8,10,11,12,13,14,15,14,16,17,8,11,17,11,18,19,20,21,22,21,14,9,23,24,9,24,10,10,24,1,10,1,0,25,26,27,25,27,28,26,29,30,26,30,27,31,32,33,34,33,35,36,37,38,36,39,40,41,42,43,44,43,33,37,45,46,37,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,56,67,68,56,69,70,71,72,73,74,75,76,77,78,79,77,80,81,82,83,84,82,85,86,87,88,89,90,89,91,92,93,94,92,95,96],l="w",w="c",d=class{g;w=[];e=new Map;Y;_;p;M=[];m;v;constructor(t,e,s){this.Y=e,this._=s,this.p=t,this.g=this.k(s.width,s.height),this.m=new BABYLON.TransformNode("",this.Y),this.T(),this.T(14),this.j(),this.S()}F(t,e){const s=this.g[t][e];return s!==l&&"s"!==s&&"e"!==s&&t>3&&e>3}T(t=0){const e=this.M.push(new BABYLON.Mesh("",this.Y))-1,s=new BABYLON.VertexData;s.positions=o.positions,s.indices=o.indices,s.uvs=o.uvs,s.applyToMesh(this.M[e]),this.M[e].position.y=-500,this.v=new BABYLON.StandardMaterial(""+t,this.Y),this.v.diffuseTexture=this.p.textures.t[t],this.M[e].material=this.v}k(t,e){let s=[];for(let i=0;i<t;i++){let t=[];for(let s=0;s<e;s++)t.push(l);s.push(t)}return s}j(){const{width:t,height:e}=this._;this.I(0,0),this.g[0][0]="s",this.g[t-1][e-1]="e"}I(t,e){const s=[[0,1],[1,0],[0,-1],[-1,0]];this.C(s);for(const i of s){const s=t+2*i[0],h=e+2*i[1];this.P(s,h)&&this.g[s][h]===l&&(this.g[s][h]=w,this.g[t+i[0]][e+i[1]]=w,this.I(s,h))}}P(t,e){const{width:s,height:i}=this._;return t>=0&&t<s&&e>=0&&e<i}C(t){for(let e=t.length-1;e>0;e--){const s=Math.floor(Math.random()*(e+1));[t[e],t[s]]=[t[s],t[e]]}}S(){for(let t=0;t<this.g.length;t++)for(let e=0;e<this.g[t].length;e++)this.g[t][e]!==w&&"s"!==this.g[t][e]&&"e"!==this.g[t][e]||this.D(t*k,e*k),this.g[t][e]===l&&this.w.push(this.R(t*k,e*k));for(let t=0;t<this._.width;t++)this.R(t*k,-k),t!=this._.width-1&&this.R(t*k,this._.height*k);for(let t=0;t<this._.height;t++)this.R(-k,t*k),this.R(k*this._.width,t*k);const t=new BABYLON.Mesh("",this.Y),e=new BABYLON.VertexData;e.positions=B,e.indices=A,e.uvs=c,e.applyToMesh(t),t.material=this.v,t.checkCollisions=!0,t.position.set(k*(this._.width-1),1.5,this._.height*k),t.rotate(BABYLON.Axis.Y,Math.PI),t.parent=this.m,t.isPickable=!0}R(t,e){const s=this.M[Math.random()>.1?0:1].createInstance("");return s.checkCollisions=!0,s.position.set(t,1.5,e),s.rotate(BABYLON.Axis.Y,Math.PI*~~(4*Math.random())),s.parent=this.m,s.isPickable=!0,s}D(t,e){let s=this.M[0].createInstance("");s.checkCollisions=!0,s.position.set(t,-1.5,e),s.parent=this.m,s=this.M[0].createInstance(""),s.position.set(t,4.5,e),s.parent=this.m}},u=class{x=0;y=0};function L(t,e,s){return t*(1-s)+e*s}var N=class{update(t,e){}dispose(){}},O=class extends N{U;constructor(t){super(),this.U=t}dispose(){this.U.dispose()}},Y=class t extends N{X;G=0;V=new u;J=new u;H=0;K;W=()=>{};constructor(t,e,s,i){super(),this.G=~~(4*Math.random()),this.W=i,S.instance.Z.e.set(t,{x:e,y:s}),this.X=t,this.J.x=this.V.x=e,this.J.y=this.V.y=s}q=2;update(t,e){const s=S.instance.$;if(this.q+=t/1e3,this.q>=2)this.J.x=this.V.x,this.J.y=this.V.y,this.V=this.tt(s),S.instance.Z.e.set(this.X,this.V),this.q=0;else{const t=L(this.J.x,this.V.x,this.q/2),s=L(this.J.y,this.V.y,this.q/2);e.get(O).U.position.x=3*t,e.get(O).U.position.z=3*s,this.J.x===this.V.x&&this.J.y===this.V.y&&(this.q=2)}BABYLON.Vector2.Distance({x:e.get(O).U.position.x,y:e.get(O).U.position.z},{x:3*S.instance.$.x,y:3*S.instance.$.y})<=3&&this.W()}tt(e){switch(this.G){case 0:return this.st(e);case 1:return this.it(e);case 2:if(!this.K){const e=S.instance.et.match(t).map((e=>e.get(t))).filter((t=>0===t.G&&t.X!==this.X));this.K=e[~~(Math.random()*e.length)]?.X}return this.ht(e,S.instance.Z.e.get(this.K));case 3:return this.K=this.K??{x:Math.random()<.5?0:T,y:Math.random()<.5?0:j},this.nt(e,this.K)}}st(t){let e=0;if(this.J.x<t.x&&(e=1),this.J.x>t.x&&(e=-1),0!=e&&this.rt(e,0))return{x:this.J.x+e,y:this.J.y};let s=0;return this.J.y<t.y&&(s=1),this.J.y>t.y&&(s=-1),0!=s&&this.rt(0,s)?{x:this.J.x,y:this.J.y+s}:{x:this.J.x,y:this.J.y}}rt(t,e){const s=S.instance.Z;let i=(s.g[this.J.x+t]?.[this.J.y+e]??"")==w;for(const[h,n]of s.e.entries())h!==this.X&&n.x===this.J.x+t&&n.y===this.J.y+e&&(i=!1);return i}it(t){let e={x:t.x,y:t.y};switch(~~(4*Math.random())){case 0:e.y-=4;break;case 1:e.y+=4;break;case 2:e.x-=4;break;case 3:e.x+=4}return this.st(e)}ht(t,e){let s={x:t.x,y:t.y};return e&&(s.x=t.x+(t.x-e.x),s.y=t.y+(t.y-e.y)),this.st(s)}nt(t,e){let s=this.ot(t)<64?t:e;return this.st(s)}ot(t){return(t.x-this.J.x)**2+(t.y-this.J.y)**2}dispose(){S.instance.Z.e.delete(this.X)}},_=class extends N{Bt;ct=!1;constructor(t){super(),this.Bt=t}},g=class extends N{q=0;update(t,e){this.q+=t;let s=e.get(O).U;s.position.y=.1*Math.sin(this.q/1e3)+1.75,s.rotation.y+=Math.sin(this.q/100)/100}At(t){t.kill()}},p=class extends N{lt=!1;wt;constructor(t){super(),this.wt=t}update(t,e){const s=e.get(_).ct;if(s&&!this.lt){const t=S.instance.dt;this.wt(t.position,t.forward),this.lt=!0;const e=BABYLON.MeshBuilder.CreateBox("",{height:.1,width:.03,depth:30},S.instance.scene);e.parent=t,e.resetLocalMatrix(!0),e.position.z=15.3,e.position.y=.3;const s=new BABYLON.StandardMaterial("",S.instance.scene);s.emissiveColor=new BABYLON.Color3(0,1,1),e.material=s,setTimeout((()=>e.dispose()),25)}!s&&this.lt&&(this.lt=!1)}},M=class extends N{constructor(t,e,s){super(),this.ut=t,this.Lt=e,this.q=s,this.K=0}K;update(t,e){this.K+=t/1e3;const s=L(this.ut,this.Lt,this.K);e.get(O).U.scaling.set(s,s,s),s>=this.Lt&&e.kill()}},f=class{id;secs;constructor(t,e){this.id=t,this.secs=e}get(t){return this.secs.Nt[this.id][t.name]}add(t){var e=t.constructor.name;this.secs.Ot[e]||(this.secs.Ot[e]=[]),this.secs.Nt[this.id][e]=t,this.secs.Ot[e][this.id]=!0}kill(){const{id:t,secs:e}=this;delete e.Yt[t];const s=e.Nt[t];for(const t in s)s[t]?.dispose();delete e.Nt[t];for(const s in e.Ot)delete e.Ot[s][t]}},m=class{_t=0;Yt=[];Nt=[];Ot={};gt={};Mt(t){t.forEach((t=>{var e=t.constructor.name;this.gt[e]=t}))}ft(t){var e=this._t++,s=new f(e,this);return this.Yt[e]=s,this.Nt[e]={},t&&t.forEach((t=>{s.add(t)})),s}match(t){return Object.keys(this.Ot[t.name]||[]).map((t=>this.Yt[t]))}},b=(new m,class{bt=[];yt={};xt={};ct=!1;vt(t,e){this.bt&&this.bt.forEach((e=>{this.kt(t,e)}))}kt(t,e){var s=t.get(_);if(e.inputSource.handedness==s.Bt){var i=t.get(O).U;i.position.copyFrom(e.grip.position),i.rotationQuaternion=e.grip.rotationQuaternion,i.rotate(BABYLON.Vector3.Right(),Math.PI/4),1==e.inputSource.gamepad.buttons[0].value&&(s.ct=!0,this.ct=!0),e.inputSource.gamepad.buttons[0].value<.5&&(s.ct=!1,this.ct=!1)}}});ttt=(t,e=-1,s=0)=>t.filter(((t,s)=>e<0||s==e)).map((e=>{let i=0,h=document.createElement("canvas"),n=h.getContext("2d"),a=t=>"#"+(65536|t).toString(16).slice(-4),r=(t,e,s,i,...h)=>h.map(((h,r)=>{n.fillStyle=a(h),n.fillRect(t+[-1,1,0][r],e+[-1,1,0][r],s,i)})),o=h.width=e[i++],c=h.height=e[i++];for(r(0,0,o,c,0,0,e[i++]);i<e.length;){let h=[(t,e,s,i,h,n,a)=>{r(t,e,s,i,h,n,a)},(t,e,s,i,h,n,a,l,d)=>{for(let p=t;p<o;p+=h)for(let t=e;t<c;t+=n)r(p,t,s,i,a,l,d)},(t,e)=>{for(let s=0;s<o;s+=e)for(let i=0;i<c;i+=e)r(s,i,e,e,0,0,(65520&t)+Math.random()*(15&t))},(t,e,s,i,h,r)=>{n.fillStyle=a(s),n.font=h+"px "+["sans-",""][i]+"serif",n.fillText(r,t,e)},(e,i,h,a,r,o)=>{n.globalAlpha=o/15,e<t.length&&s<16&&n.drawImage(ttt(t,e,s+1)[0],i,h,a,r),n.globalAlpha=1}][e[i++]];h(...e.slice(i,i+=h.length))}return h}));var y=ttt,x="data:image/webp;base64,UklGRjoBAABXRUJQVlA4IC4BAACQBgCdASoYABgAPpE6mEiloyIhMBgIALASCWgAsR9W1MCNBCAaxAdnwSmnvXY5AJB8XT3eVC7NEo306FbAAP70lPcUnlTpuLadkfXRwbxMV2jE/sFruOEe4l8a4y+tjSEfmfc7BNAnX8w47dFCV9TS3P6gkokI7BaTGFyESH4rhqe18cbcSYvb10PUhjizwb/Q4kfWuB46tiRbZty3+Yh9E5tBjGAwqsm6XPyEcLQNiUljYwqfTQ0VbCTZ4FfjGRIrpi5ImB8yYtmqFXt24iLcFBzEkVP+w0MifD3iJ350b2V7tomZ6KgH3nQ4yDAdDMtj76W+WNw4jvxTZwVsribE4TcgM43AhOpkVVpDAAmombKKAjqFNVW7jITVKdPzwsin6vmO0OOQAqPoLGAAAA==",v=class{t=[];async load(t){return new Promise((e=>{const s=y([[96,96,43103,2,16914,1,0,0,88,96,8,56488,8,16927,4,7,0,87,960,9,6,0,-1,56,98,3,65528,8,16924,4,7,0,59,320,29,7],[96,96,47759,1,1,1,46,46,48,48,65522,2,47749,2,34357,1,4,7,0,0,960,960,8],[96,96,16671,2,43076,1.7,2,16664,1.3],[96,96,15,4,0,0,0,96,96,15,0,20,10,53,86,65528,8,16927,0,25,16,43,81,8,65528,52431,4,4,20,10,53,86,15,0,29,24,16,32,2,65521,5,0,49,24,16,32,2,65521,5],[96,96,16927,4,7,0,0,960,48,7,4,7,0,48,1200,48,7],[96,96,0,4,0,0,0,96,96,15,4,4,21,9,51,39,15,4,9,25,12,43,32,15],[96,96,13119,4,0,0,0,96,96,15,4,4,23,28,49,3,12,3,23,27,65535,0,12,"📕📘📙"],[96,96,15,2,4,2.6,2,52420,1.7],[96,96,26223,0,23,20,24,80,65528,8,30591,0,49,20,24,80,65528,8,30591,0,28,2,39,9,65528,8,30591,3,29,10,45071,0,10,"EXIT 13",4,7,0,0,96,2e3,4],[96,96,65535,2,15,1,0,0,0,96,61,0,0,590,0,0,61,96,48,0,0,14350,3,11,80,65535,0,27,"😱",3,53,80,65532,0,30,"👻",3,15,40,65535,0,45,"🌙"]]);this.Tt(s,t,!0),s.map(((e,s)=>(this.t.push(BABYLON.Texture.LoadFromDataString("t"+s,e.toDataURL(),t,!1,!1,!1,BABYLON.Texture.NEAREST_SAMPLINGMODE)),e))),this.t.push(BABYLON.Texture.LoadFromDataString("ghost","data:image/webp;base64,UklGRk4EAABXRUJQVlA4WAoAAAAQAAAAjwAALwAAQUxQSIMAAAABDzD/ERHCdSS7bYPSFRpDJ0YBDvhU4OA5ACAoNxDR/wkgXwGAslNKHUk1R1MItmjytgwXyJ/oJTavjWlXsgL0TQVcIAV6ia2gpbYCdSwlDkDawQBJAUf8Y10TANCUYodS2jOBtoK7ZxnuoSHIiGcjLGojWrQVKG7eFjFWTyMiMkdSIQBWUDggpAMAAPASAJ0BKpAAMAA+kTyXSCWjIiEuNA1QsBIJZwDLYKpKab+pw38j4S1onWu32XVps2gd4An51b74yyfe9OcUHP63EesQcieVtZkk1V8ov2qK2tv7/yLs1aYFgDkGJAjLERjp6nQx1hluIauL6IL3agfn3+fDBpT6KrXg/Tc/Sh5TPvgUdcZYnxC843Hgsq3nO/VDwPi+NEzV6EDLxOaniRAA/vytETeuMat0p+FG9jOfb012ltscBtuZeZBi+eKexbiJhZ9mdMvjAh99O5rLXEz8mm1jRoNZfr/qKPXWUY/NFD8RNe00t3dfASmJRSk+JNxrHS9IL4W2aNpKytmRvkX4i5hixTp1pAE4h+gtOgDuppTVJIiH6zb5jURJg98mW31IUtI+4axx414KTP0N8dKBcfN82huUPmVAFSMdT6OhfuDuVSoUn/1QnfKjcDD0leFcp0d6C24//0nehz3P0/miKTPkfxEj21JvwdFzIddydFsudGM3TD9Vny2Bdz7NM6nxBRxeKqn9ZFPt3L+6cOpIFqLEoINIA1f7gPdE/+OyfHMhj0zt3neMDqDd0R1vjf5IbgExbVyXepiyBRbgPzLbmUHiaesoyD0Q7WCrQweAVfcrzrwWMv5kYmHAWfm7YvGgNISAO6BHa8ggHH7OyKhHCGukAJULBf0uMLb2Zb8uEu6Ff4xrqBudAQ39kp/XgxasZGOe/EXO8hwa+5UZ0uY9BMTsNeM9MKLdc291Yg/uISstpWCwEXhMaxEdQGwtlW0jYBozM29+iwhnyXo/xrbZFf94eFoELfCokDG6hzmzmjiqgygjm/0QnnaesTiutlwFFNwxbNF0eosLDxCJkUroyppwzkcUb9aWYCAQET7P32pglujDrnyD3VXqEzJtwSMv1Hu7WMlX46a2UpVjzkJlNxhBg0GFiDsQvBJCBT/2BHSqU/+BApyp7rxM5eLKV0CxAweQI49wXxkRjbSuSFgK2z6khFvud1Yifr70xe8KguUMsrfBLd88Je+1owCjJI/njcORwG5tXuAzD1A3zXLb0j9lMGopXhzpFT7eN8clGc6qREUsn8u5a3fVQL9um06p0FHLA1zUjLUwdcJMRTdA7+MK7rN2FQ+Nqne3K6hvsFjTqD1ZsIBs7HwvTWS2B4iAtJNCjA2ZhBJnrgZiGgnqaCh16Mc7GbYldOLXzEtQaypMXKyGt0wlhb/sdHYoJ6mJU+o1pChdnORdaDOZIivflAAA",t,!1,!1,!0,BABYLON.Texture.NEAREST_SAMPLINGMODE)),this.t.push(BABYLON.Texture.LoadFromDataString("gun",x,t,!1,!1,!0,BABYLON.Texture.NEAREST_SAMPLINGMODE));const i=document.createElement("canvas"),h=i.getContext("2d"),n=new Image;n.src=x,n.onload=()=>{i.width=n.width,i.height=n.height,h.drawImage(n,0,0);let a=h.getImageData(0,0,i.width,i.height),r=a.data;for(let t=0;t<r.length;t+=4)r[t]=r[t+1]=r[t+2]=Math.max(2*r[t+2]-196,0);h.putImageData(a,0,0),this.t.push(BABYLON.Texture.LoadFromDataString("gunE",i.toDataURL(),t,!1,!1,!0,BABYLON.Texture.NEAREST_SAMPLINGMODE)),this.Tt(s,t,!1),e()}}))}Tt(t,e,s=!1){const i=document.createElement("canvas");i.width=i.height=384;const h=i.getContext("2d");t.forEach(((e,i)=>{const n=i%4*96,a=96*Math.floor(i/4);let r=e;!s||5!==i&&6!==i||(r=t[0]),h.drawImage(r,n,a,96,96)})),this.t.push(BABYLON.Texture.LoadFromDataString(s?"a1":"a2",i.toDataURL(),e,!1,!1,!0,BABYLON.Texture.NEAREST_SAMPLINGMODE))}},k=3,T=13,j=13,S=class t{static instance;scene;engine;textures;Z;$;et=new m;jt=new b;St=0;Et=[];c;Ft;dt;It=!1;Ct;Pt;Dt;Rt=0;Ut=0;Xt;Gt;Vt;Qt;zt;Jt;constructor(){this.Qt=document.getElementById("r"),this.Qt?.addEventListener("click",(()=>{window.location.reload()})),t.instance=this,this.Jt=new s,this.Jt.B(),this.Ht().then((()=>{this.Z=new d(this,this.scene,{width:T,height:j}),this.engine.runRenderLoop(this.Kt),window.addEventListener("resize",(()=>{this.engine.resize()})),this.Wt().catch((t=>{})),this.Gt=this.Zt("HAUN13D HOTEL","   Switch to VR to play",!1),this.Gt.setEnabled(!0),this.Vt=this.Zt("   GAME OV3R","",!1),this.zt=this.Zt("     YOU WON !","You escaped the Haun13d Hotel",!1),this.St=1}))}Kt=()=>{let t=this.engine.getDeltaTime();switch(this.et.match(_).map((e=>this.jt.vt(e,t))),this.et.match(g).map((e=>e.get(g).update(t,e))),this.et.match(p).map((e=>e.get(p).update(t,e))),this.et.match(M).map((e=>e.get(M).update(t,e))),this.St){case 0:break;case 2:if(this.It)break;this.$={x:~~((this.c.position.x+.5)/k),y:~~((this.c.position.z+.5)/k)},this.$.x==T-1&&this.$.y==T-1&&0===this.Et.length&&(this.St=5,this.Jt.O(3),this.Xt.input.dispose(),this.et.match(_).map((t=>t.kill()))),this.et.match(Y)?.map((e=>e.get(Y).update(t,e)));break;case 4:this.Ut=-2,setTimeout((async()=>{this.Ct?.dispose(),this.Xt.enterExitUI.overlay.remove(),this.c.rotation.setAll(0),this.c.position.set(0,1.7,0),await this.Xt.baseExperience.exitXRAsync(),this.Qt.style.display="block",this.Vt.setEnabled(!0)}),2e3);break;case 5:this.Ut=-1,setTimeout((async()=>{this.Ct?.dispose(),this.Xt.enterExitUI.overlay.remove(),this.c.rotation.setAll(0),this.c.position.set(0,1.7,0),await this.Xt.baseExperience.exitXRAsync(),this.Qt.style.display="block",this.zt.setEnabled(!0)}),3e3)}this.scene.render()};async Ht(){const t=document.getElementById("c");this.engine=new BABYLON.Engine(t,!0),this.scene=new BABYLON.Scene(this.engine),this.et.Mt([this.jt]),this.scene.clearColor=new BABYLON.Color4,this.scene.gravity=new BABYLON.Vector3(0,-9.81,0),this.textures=new v,await this.textures.load(this.scene),new BABYLON.FreeCamera("camera",new BABYLON.Vector3(0,1.7,0),this.scene),new BABYLON.SpotLight("",new BABYLON.Vector3((T-1)*k,5,(j-1)*k+1),new BABYLON.Vector3(0,-1,0),Math.PI/2,10)}async Wt(){this.Xt=await this.scene.createDefaultXRExperienceAsync({disableNearInteraction:!0,disablePointerSelection:!0,disableTeleportation:!0,disableHandTracking:!0,inputOptions:{doNotLoadControllerMeshes:!0}});const t=new BABYLON.TransformNode("xrRoot",this.scene);this.Xt.baseExperience.camera.parent=t,this.Xt.baseExperience.camera.applyGravity=!0,this.Xt.baseExperience.camera.checkCollisions=!0;const e=BABYLON.CreateCylinder("fl",{height:.15,diameterTop:.02,diameterBottom:.03});this.Ct=new BABYLON.SpotLight("fl",new BABYLON.Vector3(0,-.1,0),new BABYLON.Vector3(0,-1,0),Math.PI/2,10,this.scene),this.Ct.diffuse=new BABYLON.Color3(1,1,1),this.Ct.specular=new BABYLON.Color3(1,1,1),this.Ct.range=25,this.Ct.shadowEnabled=!0,this.Ct.parent=e,e.rotation.x=-Math.PI/2;const s=new BABYLON.TransformNode("d",this.scene);e.parent=s,this.et.ft([new _("left"),new O(s)]),this.dt=new BABYLON.Mesh("gun",this.scene),this.dt.scaling=new BABYLON.Vector3(.2,.2,.2);var i=new BABYLON.VertexData;i.positions=n,i.indices=r,i.uvs=a,i.applyToMesh(this.dt);const h=new BABYLON.StandardMaterial("gunmat",this.scene);h.diffuseTexture=this.textures.t[12],h.emissiveTexture=this.textures.t[13],h.specularColor=new BABYLON.Color3(0,0,0),this.dt.material=h,this.et.ft([new _("right"),new O(this.dt),new p(this.qt)]),this.Xt.baseExperience.featuresManager.enableFeature(BABYLON.WebXRFeatureName.MOVEMENT,"latest",{xrInput:this.Xt.input,movementSpeed:.1,rotationEnabled:!1}),this.Xt.baseExperience.onStateChangedObservable.add((t=>{switch(t){case BABYLON.WebXRState.IN_XR:this.Gt.setEnabled(!1),this.$t(),this.St=2,this.c=this.Xt.baseExperience.camera,this.Pt||(this.Pt=new BABYLON.TonemapPostProcess("",BABYLON.TonemappingOperator.Reinhard,0,this.Xt.baseExperience.camera.leftCamera),this.Dt=new BABYLON.TonemapPostProcess("",BABYLON.TonemappingOperator.Reinhard,0,this.Xt.baseExperience.camera.rightCamera)),this.Rt<1&&(this.Ut=1);break;case BABYLON.WebXRState.NOT_IN_XR:this.St=3;case BABYLON.WebXRState.EXITING_XR:case BABYLON.WebXRState.ENTERING_XR:}})),this.scene.onBeforeRenderObservable.add((()=>{this.Rt+=.01*this.Ut,this.Pt&&(this.Pt.exposureAdjustment=this.Rt),this.Dt&&(this.Dt.exposureAdjustment=this.Rt),(this.Rt>=1.5||this.Rt<0)&&(this.Ut=0)})),this.Xt.input.onControllerAddedObservable.add((t=>{this.jt.bt.push(t)}))}qt=(t,e)=>{const s=new BABYLON.Ray(t,e,25);let i,h;this.Jt.O(0);let n=-1;if(i=s.intersectsMeshes(this.Z.w,!1).reduce(((t,e)=>!t||e.distance<t.distance?e:t),null),this.Et.forEach(((t,e)=>{const i=s.intersectsMesh(t,!1);i.hit&&(!h||i.distance<h.distance)&&(h=i,n=e)})),h&&(!i||h.distance<i.distance)){h.pickedMesh.dispose();const t=this.et.match(g).find((t=>t.get(O).U===h?.pickedMesh));t&&(setTimeout((()=>this.Jt.O(1)),100),this.Et.splice(n,1),t.kill())}};ts=()=>{if(this.It)return;this.It=!0;const t=new BABYLON.Mesh("");t.parent=this.c,t.position.z=2,t.position.y=-.5;const e=new BABYLON.VertexData;e.positions=[0,.5,0,0,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0,-.5,-.5,0],e.indices=[0,1,2,0,2,3,4,5,1,4,1,0],e.uvs=[1,1,1,0,.83,0,.83,1,.83,1,.83,0],e.applyToMesh(t);const s=new BABYLON.StandardMaterial("");s.diffuseTexture=this.textures.t[11],s.emissiveColor=new BABYLON.Color3(.8,.8,.8),s.diffuseTexture.hasAlpha=!0,s.disableLighting=!0,t.material=s,t.renderingGroupId=2,this.et.ft([new M(.1,2,1),new O(t)]),this.Jt.O(2),setTimeout((()=>{this.Xt.input.dispose(),this.et.match(_).map((t=>t.kill())),this.St=4,this.et.match(g).map((t=>t.kill()))}),500),this.et.match(g).map((t=>t.get(g).dispose()))};$t(){const t=new BABYLON.Mesh("ghost",this.scene);t.position.y=-100;var s=new BABYLON.VertexData;s.positions=i,s.indices=h,s.uvs=e,s.applyToMesh(t);const n=new BABYLON.StandardMaterial("ghostmat",this.scene);n.diffuseTexture=this.textures.t[11],n.specularColor=new BABYLON.Color3(0,0,0),n.diffuseTexture.hasAlpha=!0,t.material=n;for(let e=0;e<13;e++){let s,i;do{s=~~(Math.random()*T),i=~~(Math.random()*j)}while(!this.Z.F(s,i));var a=t.createInstance(`g${e}`);a.position.x=s*k,a.position.z=i*k,a.position.y=1.5,a.billboardMode=BABYLON.Mesh.BILLBOARDMODE_Y,a.isPickable=!0,this.et.ft([new g,new O(a),new Y(e,s,i,this.ts)]),this.Et.push(a)}}ss(t,e,s,i,h){const n=new BABYLON.DynamicTexture(`dt${e}`,{width:1200,height:1200}),a=new BABYLON.StandardMaterial(`mat${e}`);n.updateSamplingMode(BABYLON.Texture.NEAREST_SAMPLINGMODE),a.diffuseTexture=n,a.emissiveTexture=n,a.specularColor=BABYLON.Color3.Black(),t.material=a;let r=i.split("\n");n.drawText(r[0],null,36,s,h,"rgba(0,0,0,0)",!0,!0),r[1]&&n.drawText(r[1],null,72,s,h,"rgba(0,0,0,0)",!0,!0),n.hasAlpha=!0}Zt(t,e,s){var i=new BABYLON.Node("titleParent"+t);const h=BABYLON.MeshBuilder.CreatePlane("PressTrigger"+t,{width:3,height:.75});h.parent=i,h.position=new BABYLON.Vector3(0,1.75,2);const n=new BABYLON.DynamicTexture("dynamic texture"+t,{width:1200,height:300}),a=n.getContext(),r=new BABYLON.StandardMaterial("Mat"+t);return r.diffuseTexture=n,r.emissiveTexture=n,r.specularColor=BABYLON.Color3.Black(),h.material=r,n.drawText(e,300,215,"bold 44px monospace","#7c8898","rgba(0,0,0,0)",!0,!0),n.hasAlpha=!0,a.font="100px 'Montserrat', Arial, sans-serif",a.strokeStyle="#222",a.lineWidth=16,a.strokeText(t,210,128),a.fillStyle="#4FF",a.fillText(t,215,123),a.shadowColor="#088",a.shadowBlur=2,a.shadowOffsetX=-4,a.shadowOffsetY=4,a.lineWidth=8,a.strokeStyle="#8FF",a.strokeText(t,215,123),n.update(),i.setEnabled(!1),i}};new S</script>