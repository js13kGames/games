Reverse emerald mine

You have to find enough gems to fulfill the gem target for each map. Then a door will open and you have to go in.
You can be killed in various ways, so be careful!
When you meet monsters, try killing them by let something fall on their heads. Some monsters carry gems with them.

Controls:
Arrow Keys: move 
R: Reverse tiles around player
M: Mute sounds

What tiles reverse to what tiles?
Bomb -> Ruby
Ruby -> Bomb
Emerald -> Stone
Stone -> Emerald
Grass -> Lava
Lava -> Grass

Features:
Normal Game (4 predefined levels)
Random Game (very random map generated, 4 different presets)
Load map (play a user generated map)
Map editor (create your own map)


Warning: 
Runs slowly on older machines (didn't have time to find the reason yet)