<!doctype html><title>Space Tribute</title><script src=jsfxr.js></script><style>body,html{height:100%}body{background-color:#000;margin:0}canvas{max-width:100%;max-height:100%;margin:0 auto;display:block}</style><script>function playMusic(){gainNode.gain.value=1,snd=!0}function stopMusic(){gainNode.gain.value=0,snd=!1}var g,canvas,ctx,rad=[],bonusList=[],imgs=[];bonusList[1]={letter:"X",name:"explosion"},bonusList[2]={letter:"P",name:"armor"},bonusList[3]={letter:"T",name:"armor"},EXPLOSION=function(t,e,i,o,a){this.x=t,this.y=e,this.color=i,this.size=o,this.opacity=1,this.pixels=[],this.gravity=a||0;for(t=0;t<34;t+=3)for(e=0;e<24;e+=3){var r={};r.x=this.x+t,r.y=this.y+e,r.tx=(t-17)*(Math.random()-.5),r.ty=(e-10)*(Math.random()-.5),r.r=Math.floor(256*Math.random()),r.g=Math.floor(256*Math.random()),r.b=Math.floor(256*Math.random()),this.pixels.push(r)}this.update=function(){if(this.opacity-=.01,this.opacity<=0)return!1;ctx.fillStyle="rgba("+this.color[0]+","+this.color[1]+","+this.color[2]+","+this.opacity+")";for(var t=0;t<this.pixels.length;t++){var e=this.pixels[t];ctx.fillStyle="rgba("+Math.floor(255-255*(1-this.opacity))+","+Math.floor(255-255*(1-this.opacity))+",255,"+this.opacity+")",e.ty+=this.gravity,e.x+=e.tx,e.y+=e.ty,ctx.fillRect(e.x,e.y,2*this.size,2*this.size)}return!0}},WEAPON_LASERPLAYER=function(){this.width=20,this.height=4,this.speed=40,this.fromPlayer=!0,this.draw=function(){ctx.beginPath(),ctx.lineWidth=4,ctx.moveTo(this.x,this.y),ctx.lineTo(this.x+Math.sin(this.angle)*this.width,this.y-Math.cos(this.angle)*this.width),ctx.strokeStyle="#00F",ctx.stroke()},WEAPON.apply(this,arguments)},WEAPON_FIREBALLPLAYER=function(){this.width=20,this.height=4,this.speed=40,this.fromPlayer=!0,this.draw=function(){ctx.beginPath(),ctx.arc(this.x+20,this.y,5,0,2*Math.PI,!1),ctx.fillStyle="#ED5615",ctx.fill()},WEAPON.apply(this,arguments)},WEAPON_LASER=function(){this.width=20,this.height=4,this.speed=10,this.aimToPlayer=!0,this.draw=function(){ctx.fillStyle="#F00",ctx.beginPath(),ctx.lineWidth=4,ctx.moveTo(this.x,this.y),ctx.lineTo(this.x+Math.sin(this.angle)*this.width,this.y-Math.cos(this.angle)*this.width),ctx.strokeStyle="#F00",ctx.stroke()},WEAPON.apply(this,arguments)},WEAPON_FIREBALL=function(){this.width=5,this.height=5,this.speed=15,this.aimToPlayer=!0,this.draw=function(){ctx.beginPath(),ctx.arc(this.x+20,this.y,5,0,2*Math.PI,!1),ctx.fillStyle="#EB1DEB",ctx.fill()},WEAPON.apply(this,arguments)},WEAPON_NUNCHUNK=function(){this.width=20,this.height=4,this.speed=15,this.aimToPlayer=!1,this.round=0,this.draw=function(){this.round-=.1,ctx.fillStyle="#FFF",ctx.beginPath(),ctx.lineWidth=4,ctx.moveTo(this.x+Math.sin(this.round)*-this.width,this.y-Math.cos(this.round)*-this.width),ctx.lineTo(this.x+Math.sin(this.round)*this.width,this.y-Math.cos(this.round)*this.width),ctx.strokeStyle="#FFF",ctx.stroke(),ctx.beginPath(),ctx.arc(this.x+Math.sin(this.round)*-this.width,this.y-Math.cos(this.round)*-this.width,5,0,2*Math.PI,!1),ctx.fillStyle="#EEE",ctx.fill(),ctx.beginPath(),ctx.arc(this.x+Math.sin(this.round)*this.width,this.y-Math.cos(this.round)*this.width,5,0,2*Math.PI,!1),ctx.fillStyle="#EEE",ctx.fill()},WEAPON.apply(this,arguments)},WEAPON_HARPOON=function(){this.width=20,this.height=10,this.speed=30,this.aimToPlayer=!0,this.draw=function(){this.round-=.1,ctx.fillStyle="#FFF",ctx.beginPath(),ctx.lineWidth=10,ctx.moveTo(this.x,this.y),ctx.lineTo(this.x+Math.sin(this.angle)*this.width,this.y-Math.cos(this.angle)*this.width),ctx.strokeStyle="#FFF",ctx.stroke()},WEAPON.apply(this,arguments)},WEAPON_BOSS=function(){this.width=20,this.height=4,this.speed=20,this.aimToPlayer=!1,this.homing=!0,this.draw=function(){ctx.fillStyle="#FF4F00",ctx.beginPath(),ctx.lineWidth=12,ctx.moveTo(this.x,this.y),ctx.lineTo(this.x+Math.sin(this.angle)*this.width,this.y-Math.cos(this.angle)*this.width),ctx.strokeStyle="#FF4F00",ctx.stroke()},WEAPON.apply(this,arguments)},WEAPON=function(t,e,i,o){this.x=t,this.y=e,this.type=o,this.angle=i,this.update=function(){if(this.homing){var t=bearing(GAME.player.x+50,GAME.player.y+30,this.x,this.y);this.angle>t?this.angle-t>.03&&(t=this.angle-.02):this.angle<t&&t-this.angle>.02&&(t=this.angle+.02),this.angle=t}if(this.x+=Math.sin(this.angle)*this.speed*GAME.speed,this.y-=Math.cos(this.angle)*this.speed*GAME.speed,this.x<-50)return!1;if(this.x>2e3)return!1;if(this.fromPlayer)for(var e=0;e<GAME.monsters.length;e++){var i=GAME.monsters[e];if(this.x>i.x&&this.x<i.x+i.trueWidth&&this.y>i.y&&this.y<i.y+i.trueHeight)return i.life--,i.life<=0?i.explode():(sound([3,,.1379,.4076,.35,.1342,,-.3958,,,,,,,,,.535,-.2877,1,,,,,.5]),GAME.addExplosion(i.x+50*Math.random(),i.y+70*Math.random(),[127+Math.floor(127*Math.random()),127+Math.floor(127*Math.random()),127+Math.floor(127*Math.random())],1)),!1}else if(GAME.player.armor){if(Math.hypot(this.x-(GAME.player.x+50),this.y-(GAME.player.y+30))<100)return sound([0,,.0967,.4264,.2902,.458,,-.3199,,,,.5693,.6278,,,,,,1,,,,,.5]),GAME.player.touch=10,GAME.player.armor-=20,!1}else if(this.x>GAME.player.x&&this.x<GAME.player.x+100&&this.y>GAME.player.y&&this.y<GAME.player.y+60)return GAME.player.life-=10,sound([3,,.2436,.5091,.252,.0334,,.2411,,,,,,,,,,,1,,,,,.5]),!1;return this.draw(),!0},this.init=function(){this.aimToPlayer&&(this.angle=bearing(GAME.player.x+50,GAME.player.y+30,this.x,this.y)),this.angle||(this.fromPlayer?this.angle=Math.PI/2:this.angle=-Math.PI/2)},this.init()},bearing=function(t,e,i,o){return Math.atan2(t-i,o-e)},monsters=[],monsters[1]={colors:[,"#EDED2D"],sprite:"11:011000001100001000100000111111100011011101101111111111111111111111011111111100101000101010011011001",factor:8,weapon:"FIREBALL",reloadingTime:80},monsters[2]={colors:[,"#EB1DEB"],sprite:"9:000111000001111100011111110011010110111111111111111111011111110001000100010000010001000100",factor:8,weapon:"FIREBALL",reloadingTime:80},monsters[3]={colors:[,"#30EDED"],sprite:"12:000011110000001111111100011111111110111001100111111111111111011111111110001111111100000110011000001001100100000100001000",factor:8,weapon:"FIREBALL",reloadingTime:80},monsters[4]={colors:[,"#FFF"],sprite:"20:0011000000000000110001100000000000000110011000000000000001101100000000000000001111000000000000000011110000011111100000111100001101101100001111000110011001100011111001001001001001111111110100001011111111111101000010111111111001001001001001111100011001100110001111000011011011000011110000011111100000111100000000000000001111000000000000000011011000000000000001100110000000000000011000110000000000001100",factor:3,weapon:"LASER",reloadingTime:80},monsters[5]={colors:[,"#FFA000"],sprite:"14:000001111000000001111111100000111111111100011111001111101111100001111011110000001110111101100011111111011000111111111000011111111111001111111111111111111111111111111111111111111111111101110011101110001100110001",factor:4,weapon:"LASER",reloadingTime:80},monsters[6]={colors:[,"#FF0"],sprite:"12:000111110000011111111100111111111110111111111110001111111111000001111111001111111111111111111110111111111110011111111100000111110000",factor:4,weapon:"NUNCHUNK",reloadingTime:80},monsters[7]={colors:[,"#0FF"],sprite:"4:1111",factor:30,weapon:"HARPOON",reloadingTime:80},monsters[8]={colors:[,"#FF0"],sprite:"2:1111",factor:30,weapon:"FIREBALL",reloadingTime:80},monsters[9]={colors:[,"#A0F"],sprite:"3:111010",factor:30,weapon:"FIREBALL",reloadingTime:80},monsters[10]={colors:[,"#FFA500"],sprite:"2:010111",factor:30,weapon:"FIREBALL",reloadingTime:80},monsters[11]={colors:[,"#F00"],sprite:"3:110011",factor:30,weapon:"FIREBALL",reloadingTime:80},monsters[12]={colors:[,"#444","#fac81b","#F00"],sprite:"30:000000001111100000000000000000000000112222211000000000000000000001222222222101100000000000000001222222222212100000000000000012211222222222100000000000000012211222222221000000000000333012211222222210000000000000333332222222222210000000000000033333222222222210000000000000033333322222222210000000000000033001222222222100000000000000000000122222222100000000000000000000012222221000000000000011000000012222222111000000000121000001122222222222110000001221000012222222222222221111112221000012222221112222222222222210000122222112221112212222222210000122221222222211121222222100000122221222222222221222222100000122221222222222221222221000000122221222222222212222221000000012222122222222122222210000000012222122222221222222100000000001122211111112222211000000000000011222222222211100000000000000000111111111100000000000",factor:2,weapon:"FIREBALL",reloadingTime:80},monsters[13]={colors:[,"#c84c0c","#444","#F4d4b4"],sprite:"16:00000011110000000000011111100000000011111111000000011111111110000011211111221100011132111231111001113222223111101111323132311111111133313331111111111111111111110111133333311110011113233331111000003322223330000022232332233000022222333333220002222220002222200022222000222200",factor:4,weapon:"FIREBALL",reloadingTime:80},monsters[14]={colors:[,"#FF0","#4040E0","#F0D0D0","#00B0B0"],sprite:"9:000111000011111110121212121000020000000020000000234440000034344000034330000022200000022230000022203003222000003222000000022000000003300",factor:4,weapon:"FIREBALL",reloadingTime:80},monsters[15]={colors:[,"#2c2b2c","#ea9783","#FFF"],sprite:"15:001110000000000012221000000000122222100000000132332210000000113132210000000113132210000000133322100000000012222100000000001122211100000012222222211110012222222222221001222221111221000111110000110",factor:4,weapon:"FIREBALL",reloadingTime:8},monsters[16]={weapon:"BOSS",reloadingTime:80,life:40},drawSpriteToImg=function(t){var e=monsters[t],i=e.sprite.split(":"),o=i[0],a=i[1],r=a.length/o,s=o*e.factor,n=r*e.factor,h=0,l=document.createElement("canvas");l.width=s,l.height=n;var d=l.getContext("2d");for(y=0;y<a.length/o;y++)for(x=0;x<o;x++)c=e.colors[a[h]],h++,d.fillStyle=c,c&&d.fillRect(x*e.factor,y*e.factor,e.factor,e.factor);imgs[t]=new Image,imgs[t].src=l.toDataURL("image/png")},PATH1={init:function(t){t.round=-Math.PI,t.tx=16==t.type?-2:-8*Math.random()-1},update:function(t){t.round+=.01*GAME.speed,t.x+=t.tx*GAME.speed,t.y+=Math.sin(t.round)*GAME.speed}},PATH2={init:function(t){t.round=-Math.PI},update:function(t){t.round+=.01,t.speed=2,t.x+=Math.cos(t.round)*t.speed*GAME.speed,t.y+=Math.sin(t.round)*t.speed*GAME.speed,t.x-=1*GAME.speed}},PATH3={init:function(t){t.round=-Math.PI,t.animStarted=!1,t.speed=2},update:function(t){t.x<800&&(t.animStarted=!0),t.animStarted?(t.speed=8,t.round+=t.speed/200*GAME.speed,t.round>=1*Math.PI&&(t.round=1*Math.PI),t.x+=Math.cos(t.round)*t.speed*GAME.speed,t.y+=Math.sin(t.round)*t.speed*GAME.speed,t.x-=1*GAME.speed):(t.speed=8,t.x-=t.speed*GAME.speed)}},PATH4={init:function(t){t.round=Math.PI,t.animStarted=!1,t.speed=2},update:function(t){t.x<800&&(t.animStarted=!0),t.animStarted?(t.speed=8,t.round-=t.speed/200*GAME.speed,t.round<=-Math.PI&&(t.round=-Math.PI),t.x+=Math.cos(t.round)*t.speed*GAME.speed,t.y+=Math.sin(t.round)*t.speed*GAME.speed,t.x-=1*GAME.speed):(t.speed=8,t.x-=t.speed*GAME.speed)}},PATH5={init:function(t){t.round=Math.PI,t.animStarted=!1,t.speed=2},update:function(t){t.x<800&&(t.animStarted=!0),t.animStarted?(t.x-=t.speed*GAME.speed,t.y+=t.speed*GAME.speed):(t.speed=8,t.x-=t.speed*GAME.speed)}},PATH6={init:function(t){t.round=Math.PI,t.animStarted=!1,t.speed=2},update:function(t){t.x<800&&(t.animStarted=!0),t.animStarted?(t.x-=t.speed*GAME.speed,t.y-=t.speed*GAME.speed):(t.speed=8,t.x-=t.speed*GAME.speed)}},PATH7={init:function(t){t.round=0,t.speed=2},update:function(t){t.round+=.05*GAME.speed,t.x-=t.speed*GAME.speed,t.y-=5*Math.sin(t.round)*GAME.speed}},MONSTER=function(t,e,o,a){if(this.x=t,this.y=e,this.type=o,this.weapon=monsters[o].weapon,this.reloadingTime=monsters[o].reloadingTime,this.life=monsters[o].life?monsters[o].life:1,this.path=window["PATH"+a],monsters[o].sprite){var r=monsters[o].sprite.split(":");this.width=r[0],this.pixels=r[1],this.colors=monsters[o].colors,this.height=this.pixels.length/this.width,this.factor=monsters[o].factor}else this.width=120,this.factor=1,this.height=150;this.trueWidth=this.width*this.factor,this.trueHeight=this.height*this.factor,this.glitchMode=16==this.type&&{x:500*Math.random()-250,y:500*Math.random()-250,active:0},this.reload=0,this.path.init(this),this.hit=function(t){return this.explode(),!1},this.explode=function(){score+=100,sound([3,,.3708,.5822,.3851,.0584,,-.0268,,,,-.0749,.7624,,,,,,1,,,,,.5]),GAME.addExplosion(this.x,this.y,[127+Math.floor(127*Math.random()),127+Math.floor(127*Math.random()),127+Math.floor(127*Math.random())],2);for(var t=0;t<GAME.monsters.length;t++)if(GAME.monsters[t]==this)return void GAME.monsters.splice(t,1)},this.update=function(){if(this.path.update(this),this.x<-50)return!1;if(GAME.player.armor){if(Math.hypot(this.x-(GAME.player.x+50),this.y-(GAME.player.y+30))<100||Math.hypot(this.x+this.trueWidth-(GAME.player.x+50),this.y+this.trueHeight-(GAME.player.y+30))<100)return sound([0,,.0967,.4264,.2902,.458,,-.3199,,,,.5693,.6278,,,,,,1,,,,,.5]),GAME.player.touch=10,GAME.player.armor-=20,this.explode(),!1}else if(this.x+this.trueWidth>GAME.player.x&&this.x<GAME.player.x+100&&this.y+this.trueHeight>GAME.player.y&&this.y<GAME.player.y+60)return GAME.player.life-=10,sound([3,,.2436,.5091,.252,.0334,,.2411,,,,,,,,,,,1,,,,,.5]),this.explode(),!1;if(this.glitchMode&&Math.random()>.95&&(this.glitchMode.active=1-this.glitchMode.active,this.glitchMode.active?(this.glitchMode={x:500*Math.random()-250,y:500*Math.random()-250,active:1},this.x+=this.glitchMode.x,this.y+=this.glitchMode.y):(this.x-=this.glitchMode.x,this.y-=this.glitchMode.y),this.x=Math.max(500,this.x),this.x=Math.min(1920,this.x),this.y=Math.max(0,this.y),this.y=Math.min(1e3,this.y)),ctx.drawImage(imgs[this.type],this.x,this.y),this.reload--,this.reload<1&&(this.reload=this.reloadingTime*Math.max(1,2/GAME.speed),GAME.player.life>0))if(16==this.type){var t=bearing(GAME.player.x+50,GAME.player.y+30,this.x,this.y),e=0;for(i=t-Math.PI/2;i<t+Math.PI/2;i+=.3)setTimeout(this.multipleShot.bind(this,i),100*e),e++}else GAME.addLaser(this.x,this.y+this.trueHeight/2,this.weapon);return!0},this.multipleShot=function(t){sound([3,,.1379,.4076,.35,.1342,,-.3958,,,,,,,,,.535,-.2877,1,,,,,.5]),GAME.addLaser(this.x,this.y+this.trueHeight/2,this.weapon,t)}},BONUS=function(t,e,i){this.x=t,this.y=e,this.type=i,this.time=bonusList[this.type].time?bonusList[this.type].time:0,this.round=0,this.update=function(){var i;if(this.x-=4,this.round+=.025,this.y+=2*Math.sin(this.round),this.x<0)return!1;if(i=GAME.player,this.x>i.x-30&&this.x<i.x+100&&this.y>i.y-30&&this.y<i.y+60){switch(this.type){case 2:sound([1,,.0854,,.78,.1,,.2148,,.1027,.2767,,,,,,,,1,,,,,.5]),GAME.player.armor=300;break;case 1:sound([1,,.01,,.6,.54,,.1799,.1999,.15,.02,-.0999,.52,,,.15,,,1,,,,,.5]),GAME.player.explodeAll={counter:50,x:i.x+50,y:i.y+30};break;case 3:sound([2,,.04,,.75,.43,.2,,.3999,.44,,-.7,.27,.7418,-.1559,.32,,-.02,.55,,,.1776,,.35]),GAME.player.weapon="triple",GAME.player.weaponTime=600}return!1}return t=this.x,e=this.y,(g=ctx.createLinearGradient(t,e,t,e+20)).addColorStop(0,"#466BA9"),g.addColorStop(.25,"#6FB5FF"),g.addColorStop(.5,"#6FB5FF"),g.addColorStop(.75,"#6FB5FF"),g.addColorStop(1,"#4772B8"),ctx.fillStyle=g,ctx.lineWidth=1,ctx.strokeStyle="rgba(37,60,99,0.5)",ctx.beginPath(),ctx.moveTo(t+6,e),ctx.lineTo(t+24,e),ctx.arcTo(t+30,e,t+30,e+6,6),ctx.lineTo(t+30,e+24),ctx.arcTo(t+30,e+30,t+24,e+30,6),ctx.lineTo(t+6,e+30),ctx.arcTo(t,e+30,t,e+24,6),ctx.lineTo(t,e+6),ctx.arcTo(t,e,t+6,e,6),ctx.stroke(),ctx.fill(),ctx.closePath(),drawText(t+10,e+6,bonusList[this.type].letter,.75,"#000"),!0}},drawStar=function(t,e,i,o){var a=(ctx=document.getElementById("bg").getContext("2d")).createRadialGradient(t,e,0,t,e,i);a.addColorStop(0,"rgba("+o[0]+","+o[1]+","+o[2]+",0.7)"),a.addColorStop(.1,"rgba("+o[0]+","+o[1]+","+o[2]+",0.7)"),a.addColorStop(.11,"rgba("+o[0]+","+o[1]+","+o[2]+",0.3)"),a.addColorStop(1,"rgba(127,127,127,0)"),ctx.fillStyle=a,ctx.fillRect(t-i,e-i,2*i,2*i)},drawStar2=function(t,e,i){ctx.drawImage(grd[i],t,e)},GAME={speed:.5,sprites:[],monsters:[],weapons:[],bonus:[],explodeAll:null,level:1,showLevel:120,monsterCount:0,player:{x:180,y:440,armor:null,touch:0,life:300,weapon:"laser",weaponTime:0,died:!1},addExplosion:function(t,e,i,o,a){this.sprites.push(new EXPLOSION(t,e,i,o,a))},addBonus:function(t,e,i){this.bonus.push(new BONUS(t,e,i))},addMonster:function(t,e,i,o){return!(this.monsterCount>=50||this.showLevel)&&(this.monsterCount++,void this.monsters.push(new MONSTER(t,e,i,o)))},addLaser:function(t,e,i,o){this.weapons.push(new window["WEAPON_"+i](t,e,o,i))}},frame=0,playeFireWait=0,fps=0,gameLoop=function(){if(auto){if(window.requestAnimationFrame(gameLoop),0==GAME.player.armor&&(sound([0,.09,.12,.3171,.61,.32,,-.12,,.23,.03,,,,,,,,1,,,,,.5]),GAME.player.armor=null),GAME.player.weaponTime-=.5,GAME.player.weaponTime<=0&&(GAME.player.weapon="laser",GAME.player.weaponTime=0),frame++%80==0){var t=Math.random();t=t>.66?7:t>.33?1:2,GAME.addMonster(1920,150+850*Math.random(),Math.floor(Math.random()*(monsters.length-2))+1,t)}if(50==GAME.monsterCount&&0==GAME.monsters.length&&(GAME.monsterCount=49,GAME.addMonster(1920,150+850*Math.random(),16,1),GAME.monsterCount=51),51==GAME.monsterCount&&0==GAME.monsters.length&&(GAME.level++,GAME.showLevel=120,GAME.monsterCount=0,GAME.speed*=1.1),frame%800==0)if(Math.random()>.5)for(Math.random()>.5?(y=600,t=3):(y=200,t=4),e=0;e<10;e++)GAME.addMonster(1920+100*e,y,1,t);else for(e=0;e<10;e++)GAME.addMonster(1920+200*e,200,2,5),GAME.addMonster(2020+200*e,600,2,6);frame,frame%500==0&&GAME.addBonus(1900,800*Math.random(),Math.floor(Math.random()*(bonusList.length-1))+1),ctx.clearRect(0,0,1920,1080);for(var e=0;e<stars.length*quality;e++)ctx.drawImage(grd[e],stars[e].x,stars[e].y),stars[e].x-=.01*stars[e].size*(velocity.x+15),stars[e].x<0&&(stars[e].x=2e3);for(ctx.lineWidth=1,ctx.fillStyle="rgba(255,255,255,0.5)",ctx.fillRect(0,980,1920,100),ctx.fillStyle="rgba(255,255,255,0.8)",ctx.rect(820,1005,280,50),ctx.stroke(),drawText(50,1020,"LIFE",1),drawText(1130,1020,"WEAPON",1),ctx.fillStyle="rgba(255,255,255,0.8)",ctx.strokeStyle="#000",ctx.rect(150,1016,600,30),ctx.fillStyle="rgba(255 ,255,255,0.8)",ctx.strokeStyle="#000",ctx.rect(1260,1016,600,30),ctx.fill(),ctx.lineWidth=0,ctx.fillStyle="rgba(55,55,255,0.8)",ctx.fillRect(152,1018,Math.max(GAME.player.life,0),26),ctx.lineWidth=0,ctx.fillStyle="#E5A96E",ctx.fillRect(152+Math.max(GAME.player.life,0),1018,GAME.player.armor,26),ctx.lineWidth=0,ctx.fillStyle="rgba(255,55,55,0.8)",ctx.fillRect(1262,1018,GAME.player.weaponTime,26),ctx.stroke(),drawText(862,1014,("0000000"+score).substring(score.toString().length),1.5),velocity.x-=10*velocity.x*delta,velocity.z-=10*velocity.z*delta,velocity.y-=10*velocity.y*delta,moveForward&&(velocity.y+=100*delta),moveBackward&&(velocity.y-=100*delta),moveLeft&&(velocity.x-=100*delta),moveRight&&(velocity.x+=100*delta),GAME.player.y+=velocity.y,GAME.player.x+=velocity.x,GAME.player.life&&(GAME.player.x=Math.max(GAME.player.x,0)),playeFireWait--,spaceKey&&playeFireWait<1&&("laser"==GAME.player.weapon?GAME.addLaser(GAME.player.x+30,GAME.player.y+(60-2*Math.abs(velocity.y))/2,"LASERPLAYER"):(GAME.addLaser(GAME.player.x+30,GAME.player.y+(60-2*Math.abs(velocity.y))/2,"FIREBALLPLAYER"),GAME.addLaser(GAME.player.x+30,GAME.player.y+(60-2*Math.abs(velocity.y))/2,"FIREBALLPLAYER",Math.PI/2-.25),GAME.addLaser(GAME.player.x+30,GAME.player.y+(60-2*Math.abs(velocity.y))/2,"FIREBALLPLAYER",Math.PI/2+.25)),playeFireWait=10,sound([0,,.1541,.0294,.3834,.6142,.2,-.2723,,,,,,.1888,.0421,,,,1,,,,,.5])),e=0;e<GAME.sprites.length;e++)GAME.sprites[e].update()||GAME.sprites.splice(e--,1);for(e=0;e<GAME.monsters.length;e++)GAME.monsters[e].update()||GAME.monsters.splice(e--,1);for(e=0;e<GAME.weapons.length;e++)GAME.weapons[e].update()||GAME.weapons.splice(e--,1);for(e=0;e<GAME.bonus.length;e++)GAME.bonus[e].update()||GAME.bonus.splice(e--,1);if(GAME.player.armor){x=GAME.player.x+35,y=GAME.player.y+30,size=100+10*Math.sin(frame/10);var i=ctx.createRadialGradient(x,y,0,x,y,size);GAME.player.touch--,GAME.player.touch>=0?(i.addColorStop(0,"rgba(255,255,255,0)"),i.addColorStop(.8,"rgba(63,112,255,0.4)"),i.addColorStop(.81,"rgba(63, 112, 255,0.4)"),i.addColorStop(.91,"rgba(191,243,255,0.7)"),i.addColorStop(.95,"rgba(127,187,255,1)"),i.addColorStop(1,"rgba(127,187,255,0)")):(i.addColorStop(0,"rgba(0,0,0,0)"),i.addColorStop(.8,"rgba(0,0,0,0)"),i.addColorStop(.81,"rgba(255, 0, 63,0)"),i.addColorStop(.91,"rgba(255,243,191,0.7)"),i.addColorStop(.95,"rgba(255,187,127,1)"),i.addColorStop(1,"rgba(255,187,127,0)")),ctx.fillStyle=i,ctx.fillRect(x-size,y-size,2*size,2*size)}if(GAME.player.explodeAll){var o=GAME.player.explodeAll;x=o.x,y=o.y,size=o.counter;i=ctx.createRadialGradient(x,y,0,x,y,size);for(o.counter*=1.1,i.addColorStop(0,"rgba(0,0,0,0)"),i.addColorStop(.8,"rgba(0,0,0,0)"),i.addColorStop(.81,"rgba(255, 0, 23,0)"),i.addColorStop(.91,"rgba(255,143,91,0.7)"),i.addColorStop(.95,"rgba(255,87,27,1)"),i.addColorStop(1,"rgba(255,87,27,0)"),ctx.fillStyle=i,ctx.fillRect(x-size,y-size,2*size,2*size),e=0;e<GAME.monsters.length;e++){var a=GAME.monsters[e];16!=a.type&&Math.hypot(a.x-(GAME.player.x+50),a.y-(GAME.player.y+30))<o.counter&&(a.hit(1)||e--)}o.counter>2e3&&(GAME.player.explodeAll=null)}GAME.player.life<=0&&(GAME.player.died||(GAME.addExplosion(GAME.player.x-10,GAME.player.y-10,[127+Math.floor(127*Math.random()),127+Math.floor(127*Math.random()),127+Math.floor(127*Math.random())],4),GAME.addExplosion(GAME.player.x,GAME.player.y,[127+Math.floor(127*Math.random()),127+Math.floor(127*Math.random()),127+Math.floor(127*Math.random())],2),GAME.addExplosion(GAME.player.x+10,GAME.player.y+10,[127+Math.floor(127*Math.random()),127+Math.floor(127*Math.random()),127+Math.floor(127*Math.random())],4),GAME.player.died=!0,sound([3,,.3076,.6408,.97,.0108,,.2293,,,,,,,,,,,1,,,,,.51])),drawText(600,400,"GAME OVER",4,"#FFF"),GAME.player.x=-1e3,GAME.monsterCount=0),GAME.showLevel&&(drawText(700,400,"LEVEL "+GAME.level,4,"#FFF"),GAME.level>1&&drawText(860,560,"SPEED += 1",1,"#FFF"),GAME.showLevel--),ctx.drawImage(player,GAME.player.x,GAME.player.y,100,60-2*Math.abs(velocity.y))}},auto=!0,stars=[],grd=[],velocity={x:0,y:0,z:0},delta=.01,moveForward=moveBackward=moveLeft=moveRight=spaceKey=!1,player=!1,score=0,font=[],font[0]="111101101101111",font[1]="010110010010111",font[2]="111001111100111",font[3]="111001111001111",font[4]="101101111001001",font[5]="111100111001111",font[6]="111100111101111",font[7]="111001010010010",font[8]="111101111101111",font[9]="111101111001111",font.A="111101111101101",font.B="110101110101110",font.C="111100100100111",font.D="110101101101110",font.E="111100111100111",font.F="111100111100100",font.G="111100101101111",font.H="101101111101101",font.I="111010010010111",font.J="011001001101010",font.K="101101110101101",font.L="100100100100111",font.M="101111111101101",font.N="101111111111101",font.O="010101101101010",font.P="110101110100100",font.R="110101111110101",font.S="111100111001111",font.T="111010010010010",font.U="101101101101111",font.V="101101101101010",font.W="101101111111010",font.X="101101010101101",font.Y="101101010010010",font["-"]="000000111000000",font[":"]="000010000010000",font["."]="000000000000010",font[","]="000000000010100",font["?"]="010101001010010",font["+"]="000010111010000",font["="]="000111000111000",sounds=[],drawText=function(t,e,i,o,a){ctx.fillStyle=a||"red",i=i.toString();for(var r=0;r<i.length;r++){var s=0;for(y=0;y<5;y++)for(x=0;x<3;x++)" "!=i[r]&&"1"==font[i[r]][s++]&&ctx.fillRect(t+5*x*o,e+5*y*o,4*o,4*o);t+=20*o}},initAudio=function(){var t=new CPlayer;for(t.init(song);t.generate()<1;);var e=t.createWave();context.decodeAudioData(e.buffer,(function(t){musicBuffer=t,music.buffer=musicBuffer,music.connect(gainNode),music.start(0),music.loopEnd=56,music.loopStart=16,music.loop=!0;for(var e=1;e<monsters.length;e++)monsters[e].sprite&&drawSpriteToImg(e);(player=new Image).src="life.png";for(e=0;e<500;e++){ctx.clearRect(0,0,1920,1080);var i=1920*Math.random(),o=1080*Math.random(),r=5+10*Math.random();a=127+Math.floor(60*Math.random());var s=[2*a,a,127+Math.floor(127*Math.random())];stars.push({x:i,y:o,size:r,color:s});var n=document.createElement("canvas");n.width=2*r,n.height=2*r;var h=n.getContext("2d"),l=h.createRadialGradient(r/2,r/2,0,r/2,r/2,r/2);l.addColorStop(0,"rgba("+s[0]+","+s[1]+","+s[2]+",0.7)"),l.addColorStop(.1,"rgba("+s[0]+","+s[1]+","+s[2]+",0.7)"),l.addColorStop(.11,"rgba("+s[0]+","+s[1]+","+s[2]+",0.3)"),l.addColorStop(1,"rgba(127,127,127,0)"),h.fillStyle=l,h.fillRect(0,0,2*r,2*r),grd[e]=new Image,grd[e].src=n.toDataURL("image/png")}gameLoop()}))},init=function(){canvas=document.getElementById("bg"),ctx=document.getElementById("bg").getContext("2d"),drawText(640,400,"LOADING",4,"#FFF"),setTimeout(initAudio,1),imgs[16]=new Image,imgs[16].src="boss.png"};var keys=[];document.onkeydown=function(t){switch(keys[t.keyCode]=!0,t.keyCode){case 38:moveBackward=!0;break;case 37:moveLeft=!0;break;case 40:moveForward=!0;break;case 39:moveRight=!0;break;case 32:spaceKey=!0}t.preventDefault()},document.onkeyup=function(t){switch(keys[t.keyCode]=!1,t.keyCode){case 83:(snd=!snd)?playMusic():stopMusic();break;case 38:moveBackward=!1;break;case 37:moveLeft=!1;break;case 40:moveForward=!1;break;case 39:moveRight=!1;break;case 32:spaceKey=!1}};var song={songData:[{i:[1,130,128,0,1,25,128,9,0,0,7,5,52,0,0,0,0,0,0,2,255,0,0,32,47,3,17,2],p:[1,2,1,2,1,2,1,2,1,2,1,2,1,2],c:[{n:[125,125,,125,125,,125,,125,125,,125,125,125,,,125,125,,125,125,,125,,125,125,,125,125,125,,,,,132,,,132,,132,,,132,,,,132,130,,,133,,,133,,133,,,133,,,,133,130,,,137,,,137,,137,,,137,,,,137,134,,,137,,,137,,137,,,137,,,,137,134],f:[]},{n:[123,123,,123,123,,123,,123,123,,123,123,123,,,120,120,,120,120,,120,,120,120,,120,120,120,,,,,130,,,130,,130,,,130,,,,130,125,,,127,,,127,,127,,,127,,,,127,127,,,135,,,135,,135,,,135,,,,135,130,,,132,,,132,,132,,,132,,,,132,132],f:[]}]},{i:[1,28,128,0,1,28,140,18,0,0,0,60,178,0,0,0,0,0,0,2,13,0,0,32,0,0,0,0],p:[,,1,2,1,2,1,2,1,2,1,2,1,2],c:[{n:[113,,,,,,,,,,,,,,,,113,,,,,,,,,,,,,,,,120,,,,,,,,,,,,,,,,121,,,,,,,,,,,,,,,,125,,,,,,,,,,,,,,,,125],f:[]},{n:[111,,,,,,,,,,,,,,,,108,,,,,,,,,,,,,,,,118,,,,,,,,,,,,,,,,115,,,,,,,,,,,,,,,,123,,,,,,,,,,,,,,,,120],f:[]}]},{i:[1,124,128,0,1,125,140,18,0,0,0,29,52,0,0,0,0,0,0,2,13,0,0,32,0,0,0,0],p:[,,,,1,2,1,2,1,2,1,2,1,2],c:[{n:[113,,,,113,,,,113,,,,113,,,,113,,,,113,,,,113,,,,113,,,,,120,,120,,120,,120,,120,,120,,120,,120,,121,,121,,121,,121,,121,,121,,121,,121,,,125,,,,125,,,,125,,,,125,,,,125,,,,125,,,,125,,,,125],f:[]},{n:[111,,,,111,,,,111,,,,111,,,,108,,,,108,,,,108,,,,108,,,,,118,,118,,118,,118,,118,,118,,118,,118,,115,,115,,115,,115,,115,,115,,115,,115,,,123,,,,123,,,,123,,,,123,,,,120,,,,120,,,,120,,,,120],f:[]}]},{i:[0,160,128,1,0,160,128,0,1,210,4,7,41,0,0,0,60,4,1,2,33,0,0,32,61,5,0,6],p:[,,,,2,2,2,2,2,2,2,2,2,2],c:[{n:[120,,,,,,120,,120,,,,,,,,120,,,,,,120,,120,,,,,,,,120,,,,,,120,,120,,,,,,,,120,,,,,,120,,120],f:[]},{n:[120,,,,120,,,,120,,,,120,,,,120,,,,120,,,,120,,,,120,,120,,120,,,,120,,,,120,,,,120,,,,120,,,,120,,,,120,,,,120,,120],f:[]}]},{i:[0,0,140,0,0,0,140,0,0,60,4,10,34,0,0,0,187,5,0,1,239,135,0,32,108,5,16,4],p:[,,1,1,2,2,2,2,2,2,2,2,2,2],c:[{n:[,,118,,,,118,,,,118,,,,118,,,,118,,,,118,,,,118,,,,118],f:[]},{n:[118,,118,,118,,118,,118,,118,,118,,118,,118,,118,,118,,118,,118,,118,,118,,118,,,118,,118,,118,,118,,118,,118,,118,,118,,118,,118,,118,,118,,118,,118,,118,,118],f:[]}]},{i:[0,160,128,1,0,160,128,0,1,210,4,7,41,0,0,0,60,4,1,2,255,0,0,32,61,0,0,0],p:[,,,2,1,1,1,1,1,1,1,1,1,1],c:[{n:[,,120,,,,120,,,,120,,,,120,120,,,120,,,,120,,,,120,,,,120,120],f:[]},{n:[,,,,,,,,,,,,,,,,120,,,,120,,,,120,,120,,120,,120,120],f:[]}]},{i:[1,192,128,0,1,191,116,9,0,0,6,22,40,0,0,0,69,3,1,1,0,167,0,32,77,6,25,6],p:[,,,1,6,7,2,3,2,3,4,5,4,5],c:[{n:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,149,151,152,154],f:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,53]},{n:[156,,,,,,,,,,,,149,151,152,154,157],f:[13,,,,,,,,,,,,13,,,,13,,,,,,,,,,,,,,,,130,,,,,,,,,,,,44,,,,130]},{n:[161,154,,156,159,,154,151,,151,152,,144,142,139,142,144,,,,147,,149,,151,,142,,149,151,152,154],f:[13,,,,,,,,,,,,,,,,13,,,,13,,,,,,,,13,,,,44,,,,,,,,,,,,,,,,81,,,,61,,,,,,,,44]},{n:[152,,149,,,149,,,149,,,,149,151,152,154,152,,149,,,149,,,149,,,,149,151,152,154],f:[]},{n:[151,,147,,,147,,,147,,,,149,151,152,154,151,,149,,,147,,,149,,,,151,151,152,154],f:[]},{n:[152,,156,,154,,151,,,,,152,156,,152,154,159,,161,,152,,152,,135,,137],f:[]},{n:[135,,,,135,,,,135,,,,135,,,,156,,,,159,,,,168,,,,171,,,,,142,,142,,142,,142,,142,,142,,142,,142,,,,,,,,,,,,,,,,,,,147,,,,147,,,,147,,,,147],f:[,,,,,,,,,,,,,,,,13,,,,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,158,,,,,,,,,,,,,,,40]}]},{i:[0,0,128,0,0,0,128,0,0,125,0,52,109,0,0,0,0,0,0,1,193,171,0,29,39,3,88,3],p:[1,1,1,1,1,1,1,1,1,1,1,1,1,1],c:[{n:[125,,,,,,,,,,,,,,,,125],f:[]}]}],rowLen:5513,patternLen:32,endPattern:15},CPlayer=function(){var t,e,i,o,a,r=function(t){return Math.sin(6.283184*t)},s=function(t){return.003959503758*Math.pow(2,(t-128)/12)},n=function(t,e,i){var o,a,r,n,l,d,c,p=h[t.i[0]],y=t.i[1],f=t.i[3],M=h[t.i[4]],x=t.i[5],u=t.i[8],m=t.i[9],E=t.i[10]*t.i[10]*4,A=t.i[11]*t.i[11]*4,g=t.i[12]*t.i[12]*4,G=1/g,w=t.i[13],v=i*Math.pow(2,2-t.i[14]),S=new Int32Array(E+A+g),F=0,b=0;for(o=0,a=0;o<E+A+g;o++,a++)a>=0&&(a-=v,d=s(e+(15&(w=w>>8|(255&w)<<4))+t.i[2]-128),c=s(e+(15&w)+t.i[6]-128)*(1+8e-4*t.i[7])),r=1,o<E?r=o/E:o>=E+A&&(r-=(o-E-A)*G),n=d,f&&(n*=r*r),l=p(F+=n)*y,n=c,u&&(n*=r*r),l+=M(b+=n)*x,m&&(l+=(2*Math.random()-1)*m),S[o]=80*l*r|0;return S},h=[r,function(t){return t%1<.5?1:-1},function(t){return t%1*2-1},function(t){var e=t%1*4;return e<2?e-1:3-e}];this.init=function(r){t=r,e=r.endPattern-2,i=0,o=r.rowLen*r.patternLen*(e+1)*2,a=new Int32Array(o)},this.generate=function(){var s,l,d,c,p,y,f,M,x,u,m,E,A,g,G=new Int32Array(o),w=t.songData[i],v=t.rowLen,S=t.patternLen,F=0,b=0,L=!1,P=[];for(d=0;d<=e;++d)for(f=w.p[d],c=0;c<S;++c){var T=f?w.c[f-1].f[c]:0;T&&(w.i[T-1]=w.c[f-1].f[c+S]||0,T<15&&(P=[]));var I=h[w.i[15]],R=w.i[16]/512,C=Math.pow(2,w.i[17]-9)/v,B=w.i[18],k=w.i[19],N=43.23529*w.i[20]*3.141592/44100,W=1-w.i[21]/255,O=1e-5*w.i[22],z=w.i[23]/32,D=w.i[24]/512,H=6.283184*Math.pow(2,w.i[25]-9)/v,U=w.i[26]/255,_=w.i[27]*v;for(m=(d*S+c)*v,p=0;p<4;++p)if(y=f?w.c[f-1].n[c+p*S]:0){P[y]||(P[y]=n(w,y,v));var K=P[y];for(l=0,s=2*m;l<K.length;l++,s+=2)G[s]+=K[l]}for(l=0;l<v;l++)(u=G[M=2*(m+l)])||L?(E=N,B&&(E*=I(C*M)*R+.5),b+=(E=1.5*Math.sin(E))*(A=W*(u-b)-(F+=E*b)),u=3==k?b:1==k?A:F,O&&(u=(u*=O)<1?u>-1?r(.25*u):-1:1,u/=O),L=(u*=z)*u>1e-5,g=u*(1-(x=Math.sin(H*M)*D+.5)),u*=x):g=0,M>=_&&(g+=G[M-_+1]*U,u+=G[M-_]*U),G[M]=0|g,G[M+1]=0|u,a[M]+=0|g,a[M+1]+=0|u}return++i/8},this.createWave=function(){var t=2*o-8,e=t-36,i=new Uint8Array(44+2*o);i.set([82,73,70,70,255&t,t>>8&255,t>>16&255,t>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,255&e,e>>8&255,e>>16&255,e>>24&255]);for(var r=0,s=44;r<o;++r){var n=a[r];n=n<-32767?-32767:n>32767?32767:n,i[s++]=255&n,i[s++]=n>>8&255}return i},this.getData=function(t,e){for(var i=2*Math.floor(44100*t),o=new Array(e),r=0;r<2*e;r+=1){var s=i+r;o[r]=t>0&&s<a.length?a[s]/32768:0}return o}};musicBuffer=!1;var context=new AudioContext,gainNode=context.createGain(),music=context.createBufferSource();gainNode.connect(context.destination);var player,quality=1,snd=!0;sound=function(t){snd&&playSound(t)}</script><body onload=init()><canvas height=1080 id=bg width=1920></canvas>