<html><head><script>function g(t){var i=new glMatrixArrayType(3);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i}function aa(){var t=n;t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}function r(t,i){var a=i[0],e=i[1];i=i[2],t[12]=t[0]*a+t[4]*e+t[8]*i+t[12],t[13]=t[1]*a+t[5]*e+t[9]*i+t[13],t[14]=t[2]*a+t[6]*e+t[10]*i+t[14],t[15]=t[3]*a+t[7]*e+t[11]*i+t[15]}function u(t){var i=n,a=t[0],e=t[1];t=t[2],i[0]*=a,i[1]*=a,i[2]*=a,i[3]*=a,i[4]*=e,i[5]*=e,i[6]*=e,i[7]*=e,i[8]*=t,i[9]*=t,i[10]*=t,i[11]*=t}function v(t,i,a){var e,s=a[0],h=a[1];if(a=a[2],c=Math.sqrt(s*s+h*h+a*a)){1!=c&&(s*=c=1/c,h*=c,a*=c);var n=Math.sin(i),r=Math.cos(i),o=1-r;i=t[0];var c=t[1],u=t[2],f=t[3],l=t[4],b=t[5],d=t[6],w=t[7],v=t[8],p=t[9],A=t[10],g=t[11],E=s*s*o+r,y=h*s*o+a*n,m=a*s*o-h*n,L=s*h*o-a*n,S=h*h*o+r,M=a*h*o+s*n,C=s*a*o+h*n;s=h*a*o-s*n,h=a*a*o+r;e?t!=e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]):e=t,e[0]=i*E+l*y+v*m,e[1]=c*E+b*y+p*m,e[2]=u*E+d*y+A*m,e[3]=f*E+w*y+g*m,e[4]=i*L+l*S+v*M,e[5]=c*L+b*S+p*M,e[6]=u*L+d*S+A*M,e[7]=f*L+w*S+g*M,e[8]=i*C+l*s+v*h,e[9]=c*C+b*s+p*h,e[10]=u*C+d*s+A*h,e[11]=f*C+w*s+g*h}}function ba(){var t,i=w.Aa/w.za,a=y,e=-(i=(t=.1*Math.tan(45*Math.PI/360))*i),s=-t;a||(a=new glMatrixArrayType(16));var h=i-e,n=t-s;a[0]=.2/h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=.2/n,a[6]=0,a[7]=0,a[8]=(i+e)/h,a[9]=(t+s)/n,a[10]=-100.1/99.9,a[11]=-1,a[12]=0,a[13]=0,a[14]=-20/99.9,a[15]=0}function ca(){var t=window.innerWidth,i=window.innerHeight,a=document.getElementById("canvas");a.width=t,a.height=i,a.style.width=t+"px",a.style.height=i+"px",w.Aa=a.width,w.za=a.height,(a=document.getElementById("radar")).width=t,a.height=i,a.style.width=t+"px",a.style.height=i+"px",da(0)}function ea(){var t=new glMatrixArrayType(16),i=n;t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],z.push(t)}function fa(){var t,i=new glMatrixArrayType(9),a=i,e=(t=n)[0],s=t[1],h=t[2],r=t[4],o=t[5],c=t[6],u=t[8],f=t[9],l=(t=t[10])*o-c*f,b=-t*r+c*u,d=f*r-o*u,v=e*l+s*b+h*d;v&&(v=1/v,a||(a=new glMatrixArrayType(9)),a[0]=l*v,a[1]=(-t*s+h*f)*v,a[2]=(c*s-h*o)*v,a[3]=b*v,a[4]=(t*e-h*u)*v,a[5]=(-c*e+h*r)*v,a[6]=d*v,a[7]=(-f*e+s*u)*v,a[8]=(o*e-s*r)*v),i&&i!=i?(i[0]=i[0],i[1]=i[3],i[2]=i[6],i[3]=i[1],i[4]=i[4],i[5]=i[7],i[6]=i[2],i[7]=i[5],i[8]=i[8]):(a=i[1],e=i[2],s=i[5],i[1]=i[3],i[2]=i[6],i[3]=a,i[5]=i[7],i[6]=e,i[7]=s),w.uniformMatrix3fv(A.rb,!1,i)}function ga(t,i,a,e){return Math.sqrt((a-t)*(a-t)+(e-i)*(e-i))}function ha(t,i){return t>i?i:t}function ia(t,i,a,e){return e?ha(t+i*a,e):t+i*a}glMatrixArrayType="undefined"!=typeof Float32Array?Float32Array:"undefined"!=typeof WebGLFloatArray?WebGLFloatArray:Array,quat4={create:function(t){var i=new glMatrixArrayType(4);return t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3]),i},set:function(t,i){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i},Eb:function(t,i){var a=t[0],e=t[1],s=t[2];return i&&t!=i?(i[0]=a,i[1]=e,i[2]=s,i[3]=-Math.sqrt(Math.abs(1-a*a-e*e-s*s)),i):(t[3]=-Math.sqrt(Math.abs(1-a*a-e*e-s*s)),t)},inverse:function(t,i){return i&&t!=i?(i[0]=-t[0],i[1]=-t[1],i[2]=-t[2],i[3]=t[3],i):(t[0]*=1,t[1]*=1,t[2]*=1,t)},length:function(t){var i=t[0],a=t[1],e=t[2];return t=t[3],Math.sqrt(i*i+a*a+e*e+t*t)},normalize:function(t,i){i||(i=t);var a=t[0],e=t[1],s=t[2],h=t[3],n=Math.sqrt(a*a+e*e+s*s+h*h);return 0==n?(i[0]=0,i[1]=0,i[2]=0,i[3]=0,i):(n=1/n,i[0]=a*n,i[1]=e*n,i[2]=s*n,i[3]=h*n,i)},multiply:function(t,i,a){a||(a=t);var e=t[0],s=t[1],h=t[2];t=t[3];var n=i[0],r=i[1],o=i[2];return i=i[3],a[0]=e*i+t*n+s*o-h*r,a[1]=s*i+t*r+h*n-e*o,a[2]=h*i+t*o+e*r-s*n,a[3]=t*i-e*n-s*r-h*o,a},Gb:function(t,i,a){a||(a=i);var e=i[0],s=i[1],h=i[2];i=t[0];var n=t[1],r=t[2],o=(t=t[3])*e+n*h-r*s,c=t*s+r*e-i*h,u=t*h+i*s-n*e;e=-i*e-n*s-r*h;return a[0]=o*t+e*-i+c*-r-u*-n,a[1]=c*t+e*-n+u*-i-o*-r,a[2]=u*t+e*-r+o*-n-c*-i,a},Mb:function(t,i){i||(i=new glMatrixArrayType(9));var a=t[0],e=t[1],s=(o=t[2])+o,h=a*(c=a+a),n=a*(u=e+e),r=(a=a*s,e*u),o=(e=e*s,o*s),c=(f=t[3])*c,u=f*u,f=f*s;return i[0]=1-(r+o),i[1]=n-f,i[2]=a+u,i[3]=n+f,i[4]=1-(h+o),i[5]=e-c,i[6]=a-u,i[7]=e+c,i[8]=1-(h+r),i},Nb:function(t,i){i||(i=new glMatrixArrayType(16));var a=t[0],e=t[1],s=(o=t[2])+o,h=a*(c=a+a),n=a*(u=e+e),r=(a=a*s,e*u),o=(e=e*s,o*s),c=(f=t[3])*c,u=f*u,f=f*s;return i[0]=1-(r+o),i[1]=n-f,i[2]=a+u,i[3]=0,i[4]=n+f,i[5]=1-(h+o),i[6]=e-c,i[7]=0,i[8]=a-u,i[9]=e+c,i[10]=1-(h+r),i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},Jb:function(t,i,a,e){e||(e=t);var s=a;return 0>t[0]*i[0]+t[1]*i[1]+t[2]*i[2]+t[3]*i[3]&&(s=-1*a),e[0]=1-a*t[0]+s*i[0],e[1]=1-a*t[1]+s*i[1],e[2]=1-a*t[2]+s*i[2],e[3]=1-a*t[3]+s*i[3],e},Lb:function(t){return"["+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+"]"}},augment=function(){var t,i=arguments[0];for(t=1;t<arguments.length;t++)for(var a in arguments[t])i[a]=arguments[t][a];return i},before=function(t,i,a){var e=t[i];t[i]=function(){a.apply(this,arguments),e.apply(this,arguments)}},after=function(t,i,a){var e=t[i];t[i]=function(){e.apply(this,arguments),a.apply(this,arguments)}},window.U=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};var B=Math.PI,ja=2*B;function ka(t){return t-ja*Math.floor((t+B)/ja)}abs=Math.abs,floor=Math.floor;var C=1;function D(){return C=(1664525*C+1013904223)%4294967295}function E(t){return~~(D()/4294967295*t)}function sa(t){function i(){var t=D()/4294967295*384-128,i=D()/4294967295*384-128,e=40+D()/4294967295*128,s=40+D()/4294967295*128;f.strokeStyle=o,a(t+2,i+2,e,s),f.strokeStyle=r,a(t,i,e,s)}function a(t,i,a,e){s(t,i,t+a,i),s(t,i,t,i+e),s(t+a,i,t+a,i+e),s(t,i+e,t+a,i+e)}function e(t){for(var i=20,a=6;0<a;){f.lineWidth="3",f.strokeStyle="#151520";var e=t,s=i;f.beginPath(),f.arc(e,s,6,0,2*Math.PI,!1),f.stroke(),f.lineWidth="2",f.strokeStyle="#404050",e=t,s=i,f.beginPath(),f.arc(e,s,3,0,2*Math.PI,!1),f.stroke(),f.lineWidth="2",f.strokeStyle="#606060",e=t,s=i,f.beginPath(),f.arc(e,s,9,2,5.5,!1),f.stroke(),f.lineWidth="2",f.strokeStyle="#101010",e=t,s=i,f.beginPath(),f.arc(e,s,9,5.5,2,!1),f.stroke(),a--,i+=42}}function s(t,i,a,e){f.beginPath(),f.moveTo(t,i),f.lineTo(a,e),f.stroke()}function h(){for(var t=0;256>t;t++)for(var i=0;256>i;i++){var a=Math.floor(D()/4294967295*256),e=Math.floor(D()/4294967295*256),s=Math.floor(D()/4294967295*256),h=t,n=i;f.fillStyle="#"+a.toString(16)+e.toString(16)+s.toString(16),f.fillRect(h,n,1,1)}}function n(t,i,a){var e,s=f.getImageData(0,0,256,256).data;for(e=0;e<s.length;e++)s[e]=s[e+1]=s[e+2]=Math.floor(D()/4294967295*128),s[e+3]=255;var h=0;e=Array(512);for(var n=0,r=0;r<s.length;r++)0!==r&&0!=r%512||(e[h]=[],n=h,h++),e[n].push(s[r]);for(s=0;s<e.length;s++)e[0][0]=0,e[s][0]=0,e[0][s]=0,e[e.length-1][s]=0,e[s][e.length-2]=0;var o,u,l,b,d,w,v,p;for(s=0;s<e.length;s++)for(h=0;h<e[s].length;h++)o=0<s-1&&0<h-1?e[s-1][h-1]:0,u=0<h-1?e[s][h-1]:0,l=s+1<e.length&&0<h-1?e[s+1][h-1]:0,b=0<s-1?e[s-1][h]:0,d=s+1<e.length?e[s+1][h]:0,w=0<s-1&&h+1<e.length?e[s-1][h+1]:0,v=s+1<e.length?e[s+1][h]:0,p=0<s-1&&h+1<e.length?e[s-1][h+1]:0,n=e[s][h],(n=parseInt((o+u+l+b+d+w+v+p+n)/9,10))<=t&&(n=0),n>i&&(n=i),e[s][h]=n;for(i=1;i<e.length-1;i++)for(o=1;o<e.length-1;o++)0===e[i-1][o]&&0===e[i+1][o]&&0===e[i][o-1]&&0===e[i][o+1]&&(e[i][o]=0),0===e[i-1][o]&&0===e[i+1][o]&&0===e[i][o-1]&&0===e[i][o+1]&&(e[i][o]=0);for(i=0;256>i;i++)for(o=0;256>o;o++)(2!=a||e[i][o]>t)&&(u=i,l=o,f.fillStyle="rgba("+(e[i][o]*c[0]+c[4])+","+(e[i][o]*c[1]+c[5])+","+(e[i][o]*c[2]+c[6])+","+c[3]+")",f.fillRect(u,l,1,1)),1==a&&e[i][o]<=t&&(u=i,l=o,f.fillStyle="rgb("+c[7]+","+c[8]+","+c[9]+")",f.fillRect(u,l,1,1))}var r,o,c=[128,128,128,0,0,255],u=document.createElement("canvas");u.width=256,u.height=256;var f=u.getContext("2d");switch(t){case 0:default:h();break;case 1:case 18:c=[3,2,0,1,60,60,-50],n(0,255,1);break;case 2:case 9:c=[.8,.6,.6,1,10,10,20],n(0,255,0),c=[.8,.2,.2,.3,0,0,0],n(44,100,2),c=[1.2,.3,.3,1,0,0,0],n(47,100,2),e(20),e(236);break;case 3:c=[1,1,1,1,0,0,-20],n(0,120,0);break;case 4:c=[1,1,1,1,100,100,100],n(0,255,0);break;case 5:c=[1.5,1.5,3,1,0,0,0],n(40,255,0);break;case 6:c=[1,1,2,1,0,0,0],n(0,255,0),f.strokeStyle="#202070",f.lineWidth="3",s(0,256/6,256,256/6),s(0,256/6*2,256,256/6*2),s(0,128,256,128),s(0,256/6*4,256,256/6*4),s(0,256/6*5,256,256/6*5),s(128,0,128,256/6),s(128,256/6*2,128,128),s(128,256/6*4,128,256/6*5),s(64,256/6,64,256/6*2),s(192,256/6,192,256/6*2),s(64,128,64,256/6*4),s(192,128,192,256/6*4),s(64,256/6*5,64,256),s(192,256/6*5,192,256);break;case 7:c=[.6,.6,.9,1,10,10,20],n(0,255,0),c=[.4,.3,.6,.9,0,0,0],n(47,100,2),e(20),e(236);break;case 8:c=[.6,.6,1,1,0,0,0],n(0,255,0),e(20),e(236);break;case 10:c=[.7,.5,.5,1,10,10,20],n(0,255,0),c=[.8,.2,.2,.3,0,0,0],n(44,100,2),c=[.9,.3,.3,1,0,0,0],n(48,100,2),e(20),e(236);break;case 11:for(c=[.7,.5,.5,1,10,10,20],n(0,255,0),c=[.8,.2,.2,.3,0,0,0],n(44,100,2),c=[.9,.3,.3,1,0,0,0],n(48,100,2),f.lineWidth="2",r="#000000",o="#404040",C=15,t=0;15>t;t++)i();e(20),e(236);break;case 12:for(c=[.6,.6,1,1,0,0,0],n(0,255,0),f.lineWidth="2",r="#000000",o="#404040",C=35,t=0;10>t;t++)i();break;case 13:c=[1.5,.6,.6,1,0,0,0],n(0,255,0),c=[.8,.4,.4,.7,0,0,0],n(33,255,0);break;case 14:c=[.8,.5,.6,1,60,40,40],n(0,255,0),c=[.8,.4,.4,.5,50,50,50],n(47,255,2);break;case 15:c=[.8,.7,.7,1,60,40,40],n(0,255,0);break;case 16:c=[1,1,1,1,55,60,50],n(32,255,1);break;case 17:c=[1,1,1,1,55,60,50],n(32,255,1),C=105,r="#202030",o="#FFA030",function(){for(var t=20,i=0;4>i;i++){for(var a=20,e=0;5>e;e++)0>D()/4294967295?f.fillStyle=o:f.fillStyle=r,f.fillRect(a,t,30,40),a+=45;t+=60}}();break;case 19:for(c=[3,1,.5,1,0,0,0],n(0,255,0),f.lineWidth="2",r="#000000",o="#404040",C=5832,t=0;15>t;t++)i();break;case 20:for(c=[1,3,.8,1,0,0,0],n(0,255,0),f.lineWidth="2",r="#000000",o="#404040",C=693,t=0;12>t;t++)i();break;case 21:for(c=[4,2.5,.5,1,0,0,0],n(0,255,0),f.lineWidth="2",r="#000000",o="#404040",C=81,t=0;10>t;t++)i();break;case 22:for(c=[2,2,2.5,1,0,0,0],n(0,255,0),f.lineWidth="2",r="#000000",o="#404040",C=176,t=0;15>t;t++)i()}return u=u.toDataURL("image/png"),(t=new Image).src=u,t}function ta(t){_resources++,t.Ka.onload=function(){_loaded++,w.pixelStorei(w.UNPACK_FLIP_Y_WEBGL,!0),w.bindTexture(w.TEXTURE_2D,t),w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,t.Ka),w.generateMipmap(w.TEXTURE_2D),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,w.LINEAR),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,w.LINEAR),w.bindTexture(w.TEXTURE_2D,null)}}function ua(){for(var t=0;25>t;t++){var i=w.createTexture();i.Ka=sa(t),material[t]=i,ta(i)}}function va(){var t=document.getElementById("canvas");w=t.getContext("webgl",{alpha:!1}),ca(),w.Aa=t.width,w.za=t.height}function La(t){for(var i,a=w,e="",s=(t=document.getElementById(t)).firstChild;s;)3==s.nodeType&&(e+=s.textContent),s=s.nextSibling;return"x-shader/x-fragment"==t.type?i=a.createShader(a.FRAGMENT_SHADER):"x-shader/x-vertex"==t.type&&(i=a.createShader(a.VERTEX_SHADER)),a.shaderSource(i,e),a.compileShader(i),a.getShaderParameter(i,a.COMPILE_STATUS)?i:(alert(a.getShaderInfoLog(i)),null)}function wa(){var t=La("shader-fs"),i=La("shader-vs");A=w.createProgram(),w.attachShader(A,i),w.attachShader(A,t),w.linkProgram(A),w.useProgram(A),A.Za=w.getAttribLocation(A,"aVertexPosition"),w.enableVertexAttribArray(A.Za),A.Ya=w.getAttribLocation(A,"aVertexNormal"),w.enableVertexAttribArray(A.Ya),A.Va=w.getAttribLocation(A,"aTextureCoord"),w.enableVertexAttribArray(A.Va),A.Cb=w.getUniformLocation(A,"uShading"),A.cb=w.getUniformLocation(A,"uAmbientLight"),A.F=w.getUniformLocation(A,"uDirLight"),A.ub=w.getUniformLocation(A,"uPMatrix"),A.Qa=w.getUniformLocation(A,"uMVMatrix"),A.rb=w.getUniformLocation(A,"uNMatrix"),A.yb=w.getUniformLocation(A,"uSampler")}document.addEventListener("DOMContentLoaded",function(){radarCanvas=document.getElementById("radar"),ctx=radarCanvas.getContext("2d"),va(),wa(),overlayData=!0,overlay=document.getElementById("overlay"),statusBar=document.getElementById("status"),messageBar=document.getElementById("message"),w.clearColor(.03,0,.1,1),w.enable(w.DEPTH_TEST),w.enable(w.BLEND),w.blendFunc(w.SRC_ALPHA,w.ONE_MINUS_SRC_ALPHA),window.onkeydown=xa,window.onkeyup=ya,window.oncontextmenu=za,window.addEventListener("resize",ca,!1),document.U=function(){"hidden"==document.visibilityState&&(env.pause=!0)},ua(),F.push(J(Aa,120)),F.push(J(Ba,200)),F.push(J(Ca,!1)),F.push(J(Da,!1)),F.push(J(Ea,!1)),F.push(J(Fa,!1)),F.push(J(Ca,!1)),F.push(J(Da,!1)),F.push(J(Da,!1)),F.push(J(Ga,220)),F.push(J(Aa,110)),F.push(J(Aa,220)),F.push(J(Ha,220)),Ia(),Ja=Date.now(),Ka()});var Ma=!0,Na=.7,F=[],K=2*Math.PI,L=new(window.AudioContext||window.webkitAudioContext),Oa=1/L.sampleRate;function Pa(t){return 2*Math.floor(t)-Math.floor(2*t)+.5}function Qa(t){return 2*Math.abs(2*(t-Math.floor(t+.5)))-1}function Ra(t,i,a,e,s,h,n){return t<i?t/i*a:t<i+e?s+(a-s)*(1-(t-i)/e):t<i+e+h?s:t<i+e+h+n?s*(1-(t-i-e-h)/n):0}function Fa(t){return.5>t?Ra(t,.05,.2,0,.2,.3,.1)*(2*Math.random()+Qa(t)):9}function Aa(t,i){return.4<t?9:Ra(t,.05,.6,.1,.4,.1,.1)*Pa(i*t+4*(1>t?.6+.4*(1-t/1):.6)*Math.sin(K*i/4*t)+Math.sin(K*i*2*t))*.05}function Ga(t,i){var a=Math.sin(K*i*t+1*Math.sin(i/16*K*t));.2>t&&(a*=t/.2);var e=t-1;if(0<e){if(1<=e)return 9;a*=1-e}return a}function Ca(t){var i=Ra(t,.3,.8,.3,.6,.5,2)*Pa(120*t+4*(1.7>t?.8*t/1.7:.8)*Math.sin(120*K/4*t)+Math.sin(240*K*t));if(0<(t-=2)){if(.2<t)return 9;i*=.2>t?1-t/.2:0}return.2*i}function Da(t){var i=Ra(t,.3,.8,.3,.6,.5,2)*Pa(120*t+32*(.7>t?.8*t/.7:.8)*Math.sin(120*K/4*t)+16*(1.5>t?0:1.7>t?(t-1.5)/.2*.8:.8)*Math.sin(120*K/4*t)+Math.sin(240*K*t));if(0<(t-=2)){if(.2<t)return 9;i*=.2>t?1-t/.2:0}return.2*i}function Ea(t){var i=Qa((1e3-2e3*t)*t);if(.1>t&&(i*=t/.1),0<(t-=.2)){if(.2<=t)return 9;i*=1-t/.2}return.5*i}function Ba(t,i){.2>t&&(i*=1.5);var a=.1*Pa(i*t)+.4*Qa(i*t)+.4*Math.sin(K*i*t);.1>t&&(a*=t/.1);var e=t-.3;if(0<e){if(.1<=e)return 9;a*=1-e/.1}return a}function Ha(t,i){var a;a=(a=(i+1e3-1800*t)*t)-Math.floor(a)-.5,.1>t&&(a*=t/.1);var e=t-.3;if(0<e){if(.1<=e)return 9;a*=1-e/.1}return a}function J(t,i){for(var a=0,e=0,s=[];9>a;)a=t(e,i),s.push(a),e+=Oa;s.pop();e=(a=L.createBuffer(1,s.length,L.sampleRate)).getChannelData(0);for(var h=0;h<a.length;h++)e[h]=s[h];return a}function M(t,i){var a=1;if(!Ma){var e=0;if(i&&O){var s=O.W(i);if(25<s)return;5<s&&(a*=1-(s-5)/20),1<s&&(e=-1>(e=O.eb(i)/B*2)?-e-1-1:1<e?1-(e-1):e)}(s=L.createBufferSource()).buffer=F[t];var h=L.createGain();h.gain.value=Na*a,L.createStereoPanner?(a=L.createStereoPanner(),s.connect(a),a.pan.value=e,a.connect(h)):s.connect(h),h.connect(L.destination),s.playbackRate=2,s.start(0)}}var w,P={};function xa(t){var i=t.which||t.keyCode;return P[i]=!0,8!=i&&9!=i&&80!=i&&(env.M=0),t.preventDefault(),t.stopPropagation(),!1}function ya(t){var i=t.which||t.keyCode;if(P[i]=!1,env.pause&&8!=i&&9!=i&&81!=i&&18!=i)return env.pause=!1;switch(i){case 27:Ia();break;case 79:case 112:Sa();break;case 113:env.ua=!env.ua,overlay.style.display="initial";break;case 115:Q(0);break;case 116:Q(1+E(4));break;case 123:O.Xa();break;case 81:R?R=!1:O&&1==O.type&&O.j&&(R=O);break;case 8:env.O||P[18]?S(-1):S(-1,O.c);break;case 9:env.O||P[18]?S():S(1,O.c);break;case 80:env.pause=!0}return t.preventDefault(),t.stopPropagation(),!1}function za(t){return t.preventDefault(),t.stopPropagation(),!1}function Ta(){this.Ua=!1,this.Ta=0,this.J=[1,1,1],this.F=[1,1,1],this.D=this.f=this.pitch=this.z=this.y=this.x=0,this.scale=[1,1,1],this.Ab=function(){for(var t=0;t<this.l.length;t+=3)this.l[t]+=-.5},this.Bb=function(){for(var t=2;t<this.l.length;t+=3)this.l[t]+=-.5},this.tb=function(){this.ca=[];for(var t=0,i=this.l;t<i.length-8;){var a=g([i[t]-i[t+3],i[t+1]-i[t+4],i[t+2]-i[t+5]]),e=g([i[t]-i[t+6],i[t+1]-i[t+7],i[t+2]-i[t+8]]),s=new glMatrixArrayType(3),h=a[0],n=a[1],r=(a=a[2],e[0]),o=e[1];e=e[2];s[0]=n*e-a*o,s[1]=a*r-h*e,s[2]=h*o-n*r,h=s,a=new glMatrixArrayType(3),e=h[0],s=h[1],h=h[2],(n=Math.sqrt(e*e+s*s+h*h))?1==n?(a[0]=e,a[1]=s,a[2]=h):(n=1/n,a[0]=e*n,a[1]=s*n,a[2]=h*n):(a[0]=0,a[1]=0,a[2]=0),(e=this.ca).push.apply(e,a),this.Ua?t+=3:((e=this.ca).push.apply(e,a),(e=this.ca).push.apply(e,a),t+=9)}},this.bind=function(){var t=this.l.length/3;this.L=w.createBuffer(),w.bindBuffer(w.ARRAY_BUFFER,this.L),w.bufferData(w.ARRAY_BUFFER,new Float32Array(this.l),w.STATIC_DRAW),this.L.oa=3,this.L.ta=t,this.P=w.createBuffer(),w.bindBuffer(w.ARRAY_BUFFER,this.P),w.bufferData(w.ARRAY_BUFFER,new Float32Array(this.va),w.STATIC_DRAW),this.P.oa=2,this.P.ta=t,this.tb(),this.Ra=w.createBuffer(),w.bindBuffer(w.ARRAY_BUFFER,this.Ra),w.bufferData(w.ARRAY_BUFFER,new Float32Array(this.ca),w.STATIC_DRAW)},this.hb=function(){w.bindBuffer(w.ARRAY_BUFFER,this.P),w.vertexAttribPointer(A.Va,this.P.oa,w.FLOAT,!1,0,0),w.bindBuffer(w.ARRAY_BUFFER,this.L),w.vertexAttribPointer(A.Za,this.L.oa,w.FLOAT,!1,0,0),w.bindBuffer(w.ARRAY_BUFFER,this.Ra),w.vertexAttribPointer(A.Ya,3,w.FLOAT,!1,0,0),this.Ua?w.drawArrays(w.TRIANGLE_STRIP,0,this.L.ta):w.drawArrays(w.TRIANGLES,0,this.L.ta)},this.u=function(){ea(),r(n,[-this.x,-this.y,-this.z]),this.scale&&u(this.scale),this.D&&v(n,this.D,[0,0,1]),this.pitch&&v(n,this.pitch,[1,0,0]),this.f&&v(n,this.f,[0,1,0]),w.uniformMatrix4fv(A.Qa,!1,n),fa(),w.uniform3fv(A.cb,this.J),w.uniform3fv(A.F,this.F),w.uniform1i(A.Cb,this.Ta),w.activeTexture(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,this.I),w.uniform1i(A.yb,0),this.hb(),n=z.pop()}}function T(t){this.l=[0,0,0,0,1,0,1,0,0,0,1,0,1,1,0,1,0,0,0,0,1,1,0,1,0,1,1,1,0,1,1,1,1,0,1,1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,0,0,1,0,0,0,0,1,0,1,0,0,1,1,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,1,0,0,1,0,0,0,1,0,1,1,1,0,0,1,1,0,1,0,1,1,0,1,1,1,0,1,1,1];for(var i=0;i<this.l.length;i++)this.l[i]-=.5;this.va=[1,0,1,1,0,0,1,1,0,1,0,0,1,0,0,0,1,1,0,0,0,1,1,1,1,0,0,0,1,1,0,0,0,1,1,1,1,0,0,1,1,1,0,1,1,0,0,0,1,0,0,0,1,1,1,1,0,0,0,1,1,0,1,1,0,0,0,0,1,1,0,1],this.I=t,this.A=function(t){this.f-=1*t,this.pitch-=.6*t}}function Ua(t,i,a,e,s){this.l=[0,0,-t,-a,0,0,0,e,0,0,0,-t,0,e,0,a,0,0,0,0,-t,0,-e,0,-a,0,0,0,0,-t,a,0,0,0,-e,0,0,0,i,0,e,0,-a,0,0,0,0,i,a,0,0,0,e,0,0,0,i,-a,0,0,0,-e,0,0,0,i,0,-e,0,a,0,0],this.va=[0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,.1,.1,.1,0,0,0,.1,.1,.1,0,0,0,.1,.1,.1,0,0,0,.1,.1,.1,0],this.I=s,this.A=function(t){this.f-=.4*t,this.pitch-=.05*t}}function Va(){this.type=1,this.ka=++Va.U,this.qa=1,this.name="Drone "+this.ka,this.Ja=this.c=0,this.h=!1,this.H=this.move=this.B=this.action=0,augment(this,_Actor),this.s=.3,this.scale=[.2,.2,.2],this.w=4,this.T=5,this.Ca=7,this.R=1,this.Fa=.8,this.Da=.9,this.$a=this.Ba=.5,this.S=100,this.ia=10,this.ja=.3,this.fa=1.5*-this.s,this.ga=this.s/2,this.ab=1.2*-this.s,this.ha=.1,this.Ea=20,this.Oa=1,this.g=this.speed=0,this.v=this.S,this.o=this.da=0,this.K=1,this.Ma=0,this.La=!1,this.Ha=function(t){this.c=t,this.action=this.Ja=0,this.target=!1,this.w*=2,this.Ga()},this.Xa=function(){if(20<this.qa)O==this&&V("Can't install more upgrades",3);else{this.qa++,this.Oa++;var t="";switch(E(5)){case 0:this.w*=1.2,t="Drone speed upgraded +20%";break;case 1:this.S*=1.3,t="Drone speed upgraded +30%";break;case 2:this.T*=1.2,t="Drone acceleration upgraded +20%";break;case 3:this.ja*=.9,t="Drone fire speed upgraded +10%";break;case 4:this.ia*=1.2,t="Laser power upgraded +20%"}O==this&&V(t,3)}},this.Ga=function(){switch(this.c){case 0:this.b.F=[.5,.5,.5],this.b.I=material[22];break;case 1:this.b.F=[.5,.5,1],this.b.I=material[20];break;case 2:this.b.F=[.5,.5,.5],this.b.I=material[19];break;case 3:this.b.F=[.5,.5,.5],this.b.I=material[12];break;case 4:this.b.F=[.5,.5,.5],this.b.I=material[21]}},this.i=function(t,i){switch(t){case 1:this.wa=!0,this.speed+=this.T*i,this.speed>this.w&&(this.speed=this.w);break;case 2:this.ya=!0,this.g+=this.Fa*i,this.g>this.R&&(this.g=this.R);break;case 3:this.ya=!0,this.g-=this.Fa*i,this.g<-this.R&&(this.g=-this.R);break;case 4:this.wa=!0,this.speed-=this.T*i,this.speed<-this.w&&(this.speed=-this.w);break;case 5:if(0>=this.da){var a=Wa(Xa,this.x,this.y+.05,this.z);a.join(this),0<this.speed&&(a.speed+=this.speed),this.da=this.ja,M(12,this)}}},this.sb=function(t){this.wa||(0<this.speed?(this.speed-=this.Ca*t,0>this.speed&&(this.speed=0)):0>this.speed&&(this.speed+=this.Ca*t,0<this.speed&&(this.speed=0))),this.ya||(0<this.g?(this.g-=this.Da*t,0>this.g&&(this.g=0)):0>this.g&&(this.g+=this.Da*t,0<this.g&&(this.g=0)))},this.mb=function(t){0<this.c||0==t.c||abs(this.speed)>abs(t.speed)||(this.Ha(t.c),stat.lb[t.c]++,t==R&&stat.vb[t.c]++,this.c==O.c&&V("New Lost Drone joined out team!",3),M(9,this))},this.$=function(t){switch(t.type){case 1:if(this.ka<t.ka){if(.5>env.Y-this.Ma&&this.La==t)break;this.Ma=env.Y,this.La=t,this.speed=-this.speed,0==this.speed&&(this.speed=(.5>D()/4294967295?-1:1)*this.w),t.speed=-t.speed,0==t.speed&&(t.speed=(.5>D()/4294967295?-1:1)*t.w),1!=t.action&&(t.action=1,t.B=1+E(2)),1!=this.action&&(this.action=1,this.B=1+E(2))}this.mb(t)}},this.zb=function(){var t=this,i=entities.filter(function(i){return i.j&&3>i.type&&i.c!=t.c&&20>i.W(t)});return 0<i.length?this.h=i[0]:this.h=!1,this.h},this.fb=function(){return this.h?ka(ka(this.f)-this.dir(this.h)):0},this.eb=function(t){return ka(ka(this.f)-this.dir(t))},this.Db=function(t){0>=this.H&&(this.move=1+E(3),this.H=1+E(5)),this.i(this.move,t)},this.jb=function(t){0>=this.B&&(this.action=0),0>this.H&&(this.move=1+E(3),this.H=5+E(10)),this.i(this.move,t)},this.kb=function(t){if(this.h&&this.h.j){var i=this.h.W(this);if(40<i)this.action=0,this.h=!1;else{var a=this.fb(),e=Math.abs(a);.03>e?1==this.h.type&&this.h.c!=this.c&&0!=this.h.c?(4>i?this.i(4,t):7<i&&this.i(1,t),this.i(5,t)):1==this.h.type&&0==this.h.c||2==this.h.type?this.i(1,t):(this.h=!1,this.action=0):2.5<e?this.i(2,t):0>a?(this.i(2,t),4>i?this.i(4,t):8<i&&this.i(1,t)):0<a&&(this.i(3,t),4>i?this.i(4,t):8<i&&this.i(1,t))}}else this.zb()||(this.action=3)},this.Pa=function(t){this.x+=Math.sin(this.f)*this.speed*t,this.z+=Math.cos(this.f)*this.speed*t},this.A=function(t){if(this.ya=this.wa=!1,this==R)P[38]||P[87]?this.i(1,t):(P[40]||P[83])&&this.i(4,t),P[37]||P[65]?this.i(2,t):(P[39]||P[68])&&this.i(3,t),(P[32]||P[16]||P[69])&&this.i(5);else switch(this.H-=t,this.B-=t,this.action){case 0:0==this.c?(this.action=2,this.B=0):(this.action=4,this.B=10+E(20));break;case 1:0>=this.B&&(this.action=0);break;case 2:this.Db(t);break;case 3:this.jb(t);break;case 4:this.kb(t)}this.sb(t),0==this.speed?(this.y>this.fa-this.ga?this.K=-1:this.y<this.fa+this.ga&&(this.K=1),this.o+=this.K*this.ha*t):0<this.speed?this.y<this.ab?(this.K=1,this.o+=this.K*this.ha*t):this.o=0:0>this.speed&&(this.y>this.fa-this.ga?(this.K=-1,this.o+=this.K*this.ha*t):this.o=0);var i=this.o,a=-this.Ea,e=this.Ea;this.o=i<a?a:i>e?e:i,this.da-=t,this.f+=this.g*t,this.Pa(t),this.y+=this.o*t,grid.ma(this.x,this.z,1.2*this.s)||(this.speed=-this.speed,this.H=this.move=0),this.y=ha(this.y,-this.s),0>=this.v&&this.G()},this.b=new Ua(4,.5,2,1,material[16]),this.b.z=-1.25,this.b.bind(),this.Ga(),this.u=function(){ea(),r(n,[-this.x,-this.y,-this.z]),u(this.scale),v(n,this.f+this.Ba*this.g,[0,1,0]),v(n,this.D+this.$a*this.g,[0,0,1]),v(n,this.pitch,[1,0,0]),this.b.u(),n=z.pop()},this.G=function(t){this.j=!1;for(var i=this.Oa+E(3),a=0;a<i;a++)Wa(Ya,this.x,this.y,this.z).ib();stat.pb[this.c]++,this==R&&(this.speed=-1,this.na=5,stat.xb[this.c]++),t&&(stat.ob[t.c]++,t==R&&stat.wb[t.c]++),M(2,this)},this.toString=function(){return this.name+" MK"+this.qa+" ["+this.c+"]"}}function Xa(){this.type=3,augment(this,_Actor),this.s=.01,this.scale=[.1,.1,.1],this.speed=12,this.Sa=10,this.pa=2.5,this.join=function(t){switch(this.source=t,this.Sa=t.ia,this.f=t.f+t.Ba*t.g,this.D=t.D,this.pitch=t.pitch,this.A(.07),t.c){case 0:this.b.J=[2,2,2];break;case 1:this.b.J=[2,2,0];break;case 2:this.b.J=[3,1,0];break;case 3:this.b.J=[2,.3,0];break;case 4:this.b.J=[.5,1.5,2]}},this.$=function(t){switch(t.type){case 1:case 2:this.source!=t&&(this.G(),t.v-=this.Sa,0>=t.v&&t.G(t.source))}},this.A=function(t){this.x+=Math.sin(this.f)*this.speed*t,this.z+=Math.cos(this.f)*this.speed*t,this.pa-=t,0>this.pa&&this.G()},this.b=new Ua(8,8,.3,.3,material[4]),this.b.Ta=1,this.J=[2,2,0],this.b.bind(),this.u=function(){ea(),r(n,[-this.x,-this.y,-this.z]),u(this.scale),v(n,this.f,[0,1,0]),v(n,this.D,[0,0,1]),v(n,this.pitch,[1,0,0]),this.b.u(),n=z.pop()},this.G=function(){this.j=!1}}function Ya(){switch(augment(this,_Actor),this.type=2,this.name="Pod",this.s=.2,this.speed=0,this.v=10+E(40),this.scale=[.3,.3,.3],this.bb=.5,this.ib=function(){this.f=D()/4294967295*ja-B,this.speed=1+E(3)},this.A=function(t){this.x+=Math.sin(this.f)*this.speed*t,this.z+=Math.cos(this.f)*this.speed*t;var i=(i=this.speed)-this.bb*t;this.speed=0>i?0:i,grid.ma(this.x,this.z,10*this.s)||(this.speed=-this.speed),this.b.A(t)},this.Wa=E(2),this.Wa){case 0:this.b=new Ua(1,1,1,1,material[18]),this.b.bind(),this.b.scale=[.6,.6,.6],this.b.A=function(t){this.f-=.8*t};break;case 1:this.b=new T(material[10]),this.b.scale=[1,1,1],this.b.bind()}this.$=function(t){if(1===t.type)switch(this.G(),this.Wa){case 0:t.v+=this.v,M(1,this),O==t&&V("Energy +"+this.v,2);break;case 1:t.Xa(),M(4,this)}},this.u=function(){ea(),r(n,[-this.x,-this.y,-this.z]),u(this.scale),v(n,this.f,[0,1,0]),v(n,this.D,[0,0,1]),v(n,this.pitch,[1,0,0]),this.b.u(),n=z.pop()}}function Za(){var t=env.level;function i(t,i,e,s,h){return!(0>s||s>=a.width||0>s||h>=a.width)&&(100>=a.C[s][h]||!(t+e>=s&&t-e<=s+1&&i+e>=h&&i-e<=h+1))}var a=this;C=2001*t,this.width=ia(20,t,2,40),this.m=floor(this.width/2)-1,this.C=[],this.a=[],this.a[0]=new Quad(material[16]),this.a[0].bind(),this.a[0].scale=[SCALE,SCALE,SCALE],this.a[1]=new Quad(material[3]),this.a[1].bind(),this.a[1].scale=[SCALE,SCALE,SCALE],this.a[2]=new Quad(material[5]),this.a[2].bind(),this.a[2].scale=[SCALE,SCALE,SCALE],this.a[101]=new T(material[17]),this.a[101].bind(),this.a[101].y=-SCALE/2,this.a[101].scale=[SCALE,SCALE,SCALE],this.a[102]=new T(material[11]),this.a[102].bind(),this.a[102].y=-SCALE/2,this.a[102].scale=[SCALE,SCALE,SCALE],this.a[103]=new T(material[8]),this.a[103].bind(),this.a[103].y=-SCALE/2,this.a[103].scale=[SCALE,SCALE,SCALE],this.a[104]=new T(material[12]),this.a[104].bind(),this.a[104].y=-SCALE/2,this.a[104].scale=[SCALE,SCALE,SCALE],this.a[105]=new T(material[9]),this.a[105].bind(),this.a[105].y=-SCALE/2,this.a[105].scale=[SCALE,SCALE,SCALE],this.a[106]=new T(material[7]),this.a[106].bind(),this.a[106].y=-SCALE/2,this.a[106].scale=[SCALE,SCALE,SCALE];t=101+E(6);for(var e=0;e<this.width;e++){this.C[e]=[];for(var s=0;s<this.width;s++)this.C[e][s]=0,0!=e&&e!=this.width-1||(this.C[e][s]=t),0!=s&&s!=this.width-1||(this.C[e][s]=t)}for(this.gb=function(t,i,a){2<t&&t<this.width-4&&2<i&&i<this.width-4&&(this.C[t][i]=a)},this.rect=function(t,i,a,e,s){for(var h=0;h<a;h++)for(var n=0;n<e;n++)this.gb(t+h,n+i,s)},this.block=function(){type=101+E(6);var t=1+E(3),i=1+E(3),a=2+E(this.width-4),e=2+E(this.width-4);this.rect(a,e,t,i,type)},this.la=function(){type=1+E(2);var t=1+E(3),i=1+E(3),a=2+E(this.width-4),e=2+E(this.width-4);this.rect(a,e,t,i,type)},t=0;t<this.width;t++)this.la(),this.la();for(t=0;t<this.width;t++)this.block(),this.la();this.Z=function(t){return(t=floor((t+HSC)/SCALE))>this.width?-1:t},this.ma=function(t,a,e){var s=(t+HSC)/SCALE,h=(a+HSC)/SCALE;return e/=SCALE,t=this.Z(t),a=this.Z(a),0>t||t>=this.width||0>a||a>=this.width||i(s,h,e,t,a)&&i(s,h,e,t-1,a)&&i(s,h,e,t+1,a)&&i(s,h,e,t,a-1)&&i(s,h,e,t,a+1)&&i(s,h,e,t-1,a+1)&&i(s,h,e,t-1,a-1)&&i(s,h,e,t+1,a+1)&&i(s,h,e,t+1,a-1)},this.sa=function(t){var i=floor(++t/this.width),a=t%this.width;return i>=this.width?this.sa(this.width):100>this.C[i][a]?[i*SCALE,a*SCALE]:this.sa(t)},this.Ia=function(t){var i=E(this.width*this.width),a=floor(i/this.width);i%=this.width;switch(t){case 1:a=1+E(this.m),i=1+E(this.m);break;case 2:a=this.m+E(this.m),i=E(this.m);break;case 3:a=E(this.m),i=this.m+E(this.m);break;case 4:a=this.m+E(this.m),i=this.m+E(this.m)}return 100>this.C[a][i]?[a*SCALE,i*SCALE]:this.sa(a*this.width+i)},this.V=function(t){this.ma(t.x,t.z,.1)||t.G()},this.u=function(){var t,i=floor((O.x+HSC)/SCALE);t=0>(t=(e=floor((O.z+HSC)/SCALE))-CULLING/SCALE)?0:t;var a=ha(i+CULLING/SCALE,this.width),e=ha(e+CULLING/SCALE,this.width);for(i=0>(i=i-CULLING/SCALE)?0:i;i<a;i++)for(var s=t;s<e;s++){var h=this.a[this.C[i][s]];h.x=i*SCALE,h.z=s*SCALE,h.u(),env.ra++}}}function $a(t){switch(t){case 1:return"Green";case 2:return"Red";case 3:return"Blue";case 4:return"Yellow";default:return"Lost"}}function ab(){if(stat.aa>=env.xa&&0==stat.units(0,1)||0==stat.X(1)||0==stat.X(2)||0==stat.X(3)||0==stat.X(4)){for(var t=0,i=0,a=1;5>a;a++){var e=stat.units(a,1);e>i&&(t=a,i=e)}return t}return 0}function bb(){env.xa=ia(30,env.level,10,200),env.qb=ia(100,env.level,10,250),stat={aa:0,lb:[0,0,0,0,0],vb:[0,0,0,0,0],ob:[0,0,0,0,0],wb:[0,0,0,0,0],pb:[0,0,0,0,0],xb:[0,0,0,0,0],units:function(t,i){var a=0;return 0>t?entities.forEach(function(t){t.type==i&&t.j&&a++}):entities.forEach(function(e){e.type==i&&e.c==t&&e.j&&a++}),a},X:function(t){var i=0;return entities.forEach(function(a){1==a.type&&a.c!=t&&0!=a.c&&a.j&&i++}),i}}}T.prototype=new Ta,Ua.prototype=new Ta,Quad=function(t){this.l=[0,0,1,1,0,1,0,0,0,1,0,1,1,0,0,0,0,0],this.Ab(),this.Bb(),this.va=[1,0,1,1,0,0,1,1,0,1,0,0],this.I=t,this.A=function(){}},Quad.prototype=new Ta,_Actor={j:!0,s:1,pitch:0,f:0,D:0,scale:[1,1,1],nb:function(t,i,a){this.x=t,this.y=i,this.z=a},W:function(t){return ga(this.x,this.z,t.x,t.z)},dir:function(t){return Math.atan2(t.x-this.x,t.z-this.z)},V:function(t){var i=g([this.x,this.y,this.z]),a=g([t.x,t.y,t.z]);new glMatrixArrayType(3);var e=new glMatrixArrayType(3);e&&i!=e?(e[0]=i[0]-a[0],e[1]=i[1]-a[1],e[2]=i[2]-a[2],i=e):(i[0]-=a[0],i[1]-=a[1],i[2]-=a[2]),a=i[0],e=i[1],i=i[2],Math.sqrt(a*a+e*e+i*i)<this.s+t.s&&this.$(t)},Kb:function(){},Ib:function(){},$:function(){},G:function(){this.j=!1},toString:function(){return this.name}},Va.U=0,SCALE=5,HSC=SCALE/2,CULLING=60,SPAWN_RATE=.5,ROLLING_DEMO_TIME=30,_loaded=_resources=0,material=[],textureSets=[],env={pause:!1,level:0,Y:0,Na:0,M:0,N:0,ua:!1,Hb:!1,status:"none",message:"",ba:0},entities=[],markers=[];var R=!1,O=!1,y=new glMatrixArrayType(16),n=new glMatrixArrayType(16),z=[];new glMatrixArrayType(16);var A,Ja=Date.now();function V(t,i){env.message=t,i||(i=3),env.ba=i}function Ia(){env.level++,entities=[],grid=new Za,bb(),Ma=!0,C=7181*env.level;for(var t=Q(1),i=ia(10,env.level,2,20),a=0;a<i;a++)for(var e=1;5>e;e++)Q(e);for(a=0;a<2*grid.width;a++)cb();Ma=!1,O=R=t,V("Zone "+env.level,7)}function db(t,a,e){if(0>e){for(e=a,a=-1,(!e||e>=entities.length)&&(e=entities.length-1);0<=e&&0>a;e--)t(entities[e])&&(a=e);if(0>a)for(i=entities.length-1;0<=i&&0>a;i--)t(entities[i])&&(a=i)}else{for(e=a,a=-1,(!e||0>e)&&(e=0),e=e||0;e<entities.length&&0>a;e++)t(entities[e])&&(a=e);if(0>a)for(i=0;i<entities.length&&0>a;i++)t(entities[i])&&(a=i)}return 0>(t=a)?null:entities[t]}function S(t,i){var a=entities.indexOf(O);t?a+=t:a++;var e;return(e=db(i?function(t){return!(!t.j||1!=t.type||t.c!=i)}:function(t){return!(!t.j||1!=t.type)},a,t))&&(O=e,R&&(R=O),env.ea=5+E(10)),e}function Wa(t,i,a,e){for((t=new t).nb(i,a,e),i=!1,a=0;a<entities.length;a++)if(!entities[a].j){entities[a]=t,i=!0;break}return i||entities.push(t),t}function Q(t){var i=grid.Ia(t),a=db(function(t){return 5>ga(t.x,t.z,i[0],i[1])&&3>t.type}),e=60;return O&&(e=floor(ga(O.x,O.y,i[0],i[1]))),!a&&(t||40<e)?((a=Wa(Va,i[0],-.5,i[1])).f=D()/4294967295*ja-B,t&&a.Ha(t),0==t&&stat.aa++,M(10),a):Q(t)}function cb(){var t=grid.Ia();db(function(i){return 2>ga(i.x,i.z,t[0],t[1])&&3>i.type})||Wa(Ya,t[0],-.5,t[1])}function Ka(){var t=Date.now(),i=(t-Ja)/1e3;window.U(Ka);try{for(da(i),.3<i&&(i=.3);.05<i;)eb(.05),i-=.05;eb(i)}catch(t){console.log(t)}Ja=t,env.Fb=Date.now()-t}function Sa(){env.O=!0,env.ea=7,R=!1,env.M=ROLLING_DEMO_TIME+1}function eb(t){if(!env.pause&&(env.Y+=t,env.Na+=t,env.M+=t,env.ba-=t,0<env.N&&(env.N-=t,0>=env.N&&Ia()),O||S(),O.j||(0<O.na?(O.na-=t,O.Pa(t)):null==S(1,O.c)&&(S(),Sa())),env.O?(env.ea-=t,0>env.ea&&S(),env.M<ROLLING_DEMO_TIME&&(env.O=!1,R=O)):env.M>ROLLING_DEMO_TIME&&Sa(),markers.map(function(i){i.A(t)}),entities.map(function(i){i.j&&i.A(t)}),entities.map(function(i){i.j&&i.V&&(grid.V(i,t),entities.map(function(a){i!=a&&a.j&&i.V(a,t)}))}),D()/4294967295<SPAWN_RATE*t&&stat.units(-1,1)<env.qb&&stat.aa<env.xa&&Q(0),0==env.N)){var i=ab();0<i&&(V("ZONE "+env.level+" COMPLETED<hr>"+$a(i)+" Team Wins!",7),env.N=8)}}function da(t){if(w.viewport(0,0,w.Aa,w.za),w.clear(w.COLOR_BUFFER_BIT|w.DEPTH_BUFFER_BIT),_loaded===_resources&&A){if(ba(),aa(),O){var i=O;v(y,.1,[1,0,0]),r(y,[0,-1,-2.5]),v(y,-i.pitch,[1,0,0]),v(y,-i.f,[0,1,0]),v(y,-i.D,[0,0,1]),r(y,[i.x,i.y,i.z])}else v(y,0,[1,0,0]),v(y,0,[0,1,0]),r(y,[0,0,0]);w.uniformMatrix4fv(A.ub,!1,y),w.uniformMatrix4fv(A.Qa,!1,n),fa(),env.ra=0,grid.u(),markers.map(function(t){env.ra++,t.u()}),entities.map(function(i){i.j&&Math.sqrt((O.x-i.x)*(O.x-i.x)+(O.z-i.z)*(O.z-i.z))<CULLING&&(env.ra++,i.u(t))}),aa(),0<env.ba?messageBar.innerHTML=env.message:messageBar.innerHTML="",O&&(statusBar.innerHTML='<font color="#A0A0D0">Lost: '+stat.units(0,1)+"/"+(env.xa-stat.aa)+'</font>&nbsp&nbsp<font color="#40FF20"> Green: '+stat.units(1,1)+'</font>&nbsp&nbsp<font color="#FF5020"> Red: '+stat.units(2,1)+'</font>&nbsp&nbsp<font color="#5020FF"> Blue: '+stat.units(3,1)+'</font>&nbsp&nbsp<font color="#FFD000"> Yellow: '+stat.units(4,1)+"</font>"+(env.pause?"<br>(GAME PAUSED) ":"")+(env.O?"<br>(DEMO MODE) ":"")),O&&env.ua?overlay.innerHTML=(R?"Controlling ":"")+O+" @"+grid.Z(O.x)+"x"+grid.Z(O.z)+"<br>"+floor(100*O.x)/100+" -- "+floor(100*O.z)/100+" -- "+floor(100*O.y)/100+"<br>Shield: "+O.v+"<br>Speed: "+floor(O.speed)+(R?"":"<hr>Goal: "+O.Ja+(O.h?"<br>Target: "+O.h+" @"+Math.round(O.W(O.h))+"m":"")+"<br>Action: "+O.action+"["+floor(O.B)+"]<br>Move: "+O.move+"["+floor(O.H)+"]")+"<br>Drones: "+stat.units(-1,1)+"<br>Status: "+env.status+"<hr>FPS: "+Math.round(1/t):O&&(overlay.innerHTML=O+"<br>Shield: "+O.v+"/"+O.S)}}
</script><script id="shader-vs" type="x-shader/x-vertex">
    attribute vec3 aVertexPosition;
    attribute vec3 aVertexNormal;
    attribute vec2 aTextureCoord;

    uniform int uShading;
    uniform vec3 uAmbientLight;
    uniform vec3 uDirLight;
    uniform mat4 uMVMatrix;
    uniform mat4 uPMatrix;
    uniform mat3 uNMatrix;

    varying vec2 vTextureCoord;
    varying highp vec3 vLighting;

    void main(void) {
        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
        vTextureCoord = aTextureCoord;
        
        highp vec3 ambientLight = uAmbientLight;

        if (uShading == 0) {
            highp vec3 directionalLightColor = uDirLight;
            highp vec3 directionalVector = normalize(vec3(-1, 1, -1));

            highp vec3 transformedNormal = uNMatrix * aVertexNormal;

            highp float directional = max(dot(transformedNormal, directionalVector), 0.0);
            vLighting = ambientLight + (directionalLightColor * directional);
        } else if (uShading == 1) {
            vLighting = ambientLight;
        }
    }
</script><script id="shader-fs" type="x-shader/x-fragment">
    precision mediump float;
    #define FOG_START 5.0
    #define FOG_MAX 45.0

    varying vec2 vTextureCoord;
    varying vec3 vLighting;

    uniform sampler2D uSampler;

    void main(void) {
        float z = gl_FragCoord.z / gl_FragCoord.w;
        const vec4 fogColor = vec4(0.02, 0.0, 0.05, 0.5);

        highp vec4 texelColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));
        highp vec4 texelLit = vec4(texelColor.rgb * vLighting, texelColor.a);

        if (z >= FOG_MAX) {
            gl_FragColor = fogColor;
        } else if (z >= FOG_START) {
            float fogFactor = (z - FOG_START) / (FOG_MAX - FOG_START);
            gl_FragColor = mix(texelLit, fogColor, fogFactor);
        } else {
            gl_FragColor = texelLit;
        }
    }
</script><style>
    * {
        margin: 0;
        padding: 0;
    }
    html, body {
        width: 100%;
        height: 100%;
        overflow: hidden;
    }
    canvas {
        border: 0px;
        position: absolute;
        display: block;
		z-index: 10;
    }
    .container {
        position: relative;
    }
    #radar {
        border: 0px;
		position: absolute;
		left: 0px;
		top: 0px;
		z-index: 20;
	}
    #overlay {
        position: absolute;
        text-align: right;
        right: 20px;
        bottom: 20px;
        z-index: 30;
        color: #40FF20;
        font-size: 24px;
        font-family: "Impact", sans-serif;
    }
    #message {
        position: fixed;
        text-align: center;
        top: 30%;
        width: 100%;
        z-index: 40;
        color: #FF7000;
        font-size: 32px;
        font-family: "Impact", sans-serif;
    }
    #status {
        position: absolute;
        text-align: center;
        width: 100%;
        top: 40px;
        z-index: 70;
        color: #A0FF00;
        font-size: 24px;
        font-family: "Impact", sans-serif;
        word-spacing: 20px;
    }
</style></head><body><canvas id="canvas" style="border:none;cursor:none;"/></canvas><canvas id="radar" style="border:none;cursor:none;"/></canvas><div id="overlay"></div><div id="status"></div><div id="message"></div></body></html>