<script>var aa=["2d"];aa.raw=["2d"];var ba=["2d"];ba.raw=["2d"];var ca=["2d"];ca.raw=["2d"];var da=["2d"];da.raw=["2d"];var ea=["2d"];ea.raw=["2d"];var fa=["2d"];fa.raw=["2d"];var ha=[""];ha.raw=[""];var ia=["#"];ia.raw=["#"];var ka="function"==typeof Object.defineProperties?Object.defineProperty:function(t,a,i){t!=Array.prototype&&t!=Object.prototype&&(t[a]=i.value)},b="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function la(){la=function(){},b.Symbol||(b.Symbol=ma)}var ma=function(){var t=0;return function(a){return"jscomp_symbol_"+(a||"")+t++}}();function m(){la();var t=b.Symbol.iterator;t||(t=b.Symbol.iterator=b.Symbol("iterator")),"function"!=typeof Array.prototype[t]&&ka(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return na(this)}}),m=function(){}}function na(t){var a=0;return oa((function(){return a<t.length?{done:!1,value:t[a++]}:{done:!0}}))}function oa(t){return m(),(t={next:t})[b.Symbol.iterator]=function(){return this},t}function pa(t){m(),la(),m();var a=t[Symbol.iterator];return a?a.call(t):na(t)}var ra,sa,p,ta,ua,va,r,wa,xa,u,w,x,y,ya,za,z,A,B,D,Aa,E,F,G,Ba,I,L,qa=[],H=[],Ca=[[0,-1],[1,0],[0,1],[-1,0]],Da=[1,2,4,8],J={M:1,r:function(t,a){var i=1e4*Math.sin(J.M++);return a=a||0,(i-Math.floor(i))*((t||1)-a)+a}};L||(L=Object.assign({},J));var Ea,Fa,M={ja:70,Ma:4,A:1024,xa:13312,D:0,W:0,l:4,J:3,a:32,b:17,c:-1,o:1,B:0,ya:1,za:1,Ba:100,Ca:200,ia:[],N:[],I:[],G:[],wa:[],P:0,ba:!1,sa:8,V:0,L:0,T:0,action:0,F:0,Ra:!1,la:0,pa:0,timeStamp:0,progress:0,paused:!1,ka:!1,Aa:!1},confirm={},Ga=[{name:"<Analog Data Quality> (Double Signal Value)",v:500,K:function(){M.W++,M.V++}},{name:"<Double Jump>",v:500,K:function(){M.D++,M.V++}},{name:"<Digital Data Quality> (Double Signal Value)",v:1e3,K:function(){M.W++,M.V++}},{name:"<Floating>",v:1e3,K:function(){M.D++,M.V++}},{name:"<Extreme Data Quality> (Double Signal Value)",v:3e3,K:function(){M.W++,M.V++}},{name:"- FULLY UPGRADED",v:1e13,K:function(){}}],Ha=[{},{name:"Throw Cactus",v:0,K:function(){0<x.s||(M.L--,x.visible=!0,x.x=A.x,x.y=A.y+30,x.S=50,x.O=50,x.u=2*Math.sign(A.w),x.s=80)}},{name:"Hybernate Dino",v:500,K:function(){z.H=M.I[M.B]=1800}},{name:"Remove 1 Spinner",v:200,K:function(){M.sa--}},{name:"Upgrade Wi-Fi",v:300,K:function(){M.N[M.B]++}}];function Ia(){return 0<M.L&&z.visible&&0==z.H?1:z.visible&&0<z.H?2:0<M.L&&z.visible&&0<z.H?4:D.visible?3:0}var O=[],Ja=100;function P(t,a,i,e,s){0<O.length&&t==O[0].t||O.push({text:t,s:a,start:a,Ea:i||!1,color:e||"#DDDDFF",font:s||"20px Arial Bold"})}function Q(t,a){0<O.length&&t==O[0].t||O.unshift({text:t,s:a,start:a,Ea:!1,color:"#DDDDFF",font:"20px Arial Bold"})}function Ka(){if(0==O.length)var t=["",0];else{t="";for(var a=0,i=255,e=0,s=O.length;e<s;e++){var r=O[e];(0==e||r.Ea)&&0<r.s&&(r.s-=M.progress,a<r.s&&(a=r.s),t+=r.text+"\n")}500>a&&(i=a/500*255),500>O[0].start-O[0].s&&(i=(O[0].start-O[0].s)/500*255),a=O[0].font,e=O[0].color,0>O[0].s&&O.shift(),t=[t,~~i,a,e]}i=("0"+t[1].toString(16)).slice(-2),ct.Sa=!1,ct.font=t[2],ct.lineWidth=2.5,ct.strokeStyle="#000000"+i,ct.fillStyle=t[3]+i,ct.strokeText(t[0],(640-ct.measureText(t[0]).width)/2,Ja),ct.fillText(t[0],(640-ct.measureText(t[0]).width)/2,Ja),ct.lineWidth=.5}function La(){ct.fillStyle="#FFF",ct.font="10px Arial";var t=0;if(0<=M.c){t=~~(100*M.la)/100,ct.fillText("SPACE: add/remove blocks",250,355);var a=Ia();M.action=Ia(),a&&(a="J: Action -  "+(a=Ha[Ia()]).name+" - COST: "+a.v,ct.fillText(a,250,370)),a="U: Upgrade "+(a=Ga[M.V]).name+" - COST: "+a.v,ct.fillText(a,250,385)}else-1==M.c&&(txt="J: Action - Throw Cactus",ct.fillText(txt,250,370));0<M.L&&(txt=9>M.L?"🌵".repeat(M.L):"🌵 x "+M.L,ct.fillText(txt,40,379)),0<M.T&&(txt=5>M.T?"⬜".repeat(M.T):"⬜ x 5 (MAX)",ct.fillText(txt,40,367)),0<M.P?ct.fillText("🗺️ "+Ma(M.P/1e3)+"   M: Switch on/off",40,391):M.ba=!1;var i=~~(100*((a=y.Ia())-t))/100;txt="   "+~~M.A+" bps   "+i+"     ⮝ "+a+"   ⮟ "+t,M.A+=i*M.progress/1e3,M.la+=M.progress/5e4,ct.fillText(txt,50,355),ct.drawImage(wa,40,344,25,25)}function Ma(t){return~~(t/60)+":"+("0"+~~(t%60)).slice(-2)}var Na=[{item:"New Game"},{item:"Custom Map"},{item:"Load Saved"}],R=0;function Oa(t,a){if(S[38]&&a&&0<R&&R--,S[40]&&a&&R<Na.length-1&&R++,S[32]||S[13]){switch(R){case 2:var i=JSON.parse(localStorage.getItem("gameObject"));if(!i)return;(M=i).F=F,M.pa=null,O=[],A.x=M.Ba,A.y=M.Ca;break;case 0:Pa();break;case 1:if(i=~~L.r(9999,1)+", "+~~L.r(9,3)+", "+~~L.r(9,2),i=window.prompt("Enter values: <mapseed: 0-9999>, <width: 3-9>, <height: 2-9>",i),M.timeStamp=performance.now(),S[13]=S[32]=0,!i||!/[0-9]{1,4} *, *[3-9] *, *[2-9] */g.test(i))return;i=i.split(","),M.ja=i[0],M.l=i[1],M.J=i[2],Pa()}T=A.controls,M.ka=!1,ttCt.text="",ttCt.clearRect(0,0,640,400),A.visible=!0}}function Qa(){for(var t=Na.length,a=0;a<t;a++){var i=Math.sin(6*M.Z*Math.PI/180);ttCt.fillStyle=R==a?"hsl(56,40%,"+(50+10*i)+"%)":"#DDE",ttCt.fillRect(350,150+40*a,170,30),ttCt.fillStyle=R==a?"hsl(56,40%,"+(70+10*i)+"%)":"#EEF",ttCt.fillRect(355,40*a+155,160,20),i=Na[a].item,ttCt.font="20px Arial",ttCt.fillStyle="#446",ttCt.fillText(i,355+(160-ttCt.measureText(i).width)/2,40*a+170)}}function U(t,a){l=23,t=t.split(ia);var e=a.split(ha).map((function(t){return t.charCodeAt(0)-32}));for(ret="",i=0;i<e.length;)c=e[i++],f=function(a){return'"#'+t[a]+'"'},ret=c?c<l?ret+"_CcSsQqTtAaZMmLlHhVvZz-"[c]:ret+(c-l+" "):ret+'"/> <path stroke='+f(e[i++]-l)+" fill="+f(e[i++]-l)+' d="';return el=document.createElement("img"),el.setAttribute("width","100px"),el.setAttribute("height","100px"),el.setAttribute("src","data:image/svg+xml;base64,"+btoa('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink= "http://www.w3.org/1999/xlink" viewBox="0 0 100 100" width="100px" height="100px"><g>'+ret.slice(4)+'"/></g></svg>')),el.Ta=t,spcont.appendChild(el),qa.push(el),el}function Ra(){qa.every((function(t){return t.complete&&0!==t.naturalHeight}))?(ct=a.getContext(fa),bgCt=bg.getContext(ea),mpCt=mp.getContext(da),tlCt=tl.getContext(ca),fxCt=fx.getContext(ba),ttCt=tt.getContext(aa),E=new Spr,grad=[],y=new Sp0(ct,wa,!1,200,270,0,0,40,40),ya=new Sp0(ct,ta,!1,0,70,.4,0,200,100),za=new Sp0(ct,ta,!1,50,50,.6,0),z=new Sp0(ct,va,!1,300,250,0,0,100,100),(u=new Sp0(ct,null,!1,200,200,0,0,100,100)).visible=!1,w=new Sp0(ct,null,!1,200,200,0,0,100,100),A=new Sp0(ct,ra,!0,100,250,0,0),(B=new Sp0(ct,ra,!0,100,250,0,0)).Na=!0,B.visible=!1,V(G,"intro"),Sa()):setTimeout(Ra,100)}function W(){}function V(t,a){M.F=t,M.F.name=a,M.F.ha()}function X(t,a){return-1==t?1e3:t+a*M.l}function Ta(){function t(t,a,i,e,s){var r=X(i,e),l=X(t,a);H[r].Da=H[r].Da||s,s=H[r].aa;var n=H[l].aa;t<i&&(s|=8,n|=2),t>i&&(s|=2,n|=8),a<e&&(s|=1,n|=4),a>e&&(s|=4,n|=1),H[r].aa=s,H[l].aa=n}function a(i,e,s){if(0!=s)for(var r=0;4>r;r++){var l=i+Ca[(r+M.ja)%4][0],n=e+Ca[(r+M.ja)%4][1];0>l||0>n||l>=M.l||n>=M.J||0!=H[X(l,n)].aa||(t(i,e,l,n,!1),a(l,n,s-1))}}J.M=M.ja;for(var i=[],e=0;e<M.l*M.J;e++)H[e]={aa:0,Da:!1};var s=e=1,r=1,l=2;targetY=M.ja%M.J,M.za=targetY,M.ya=M.l-1;do{switch(t(e,s,l,r,!0),~~J.r(3)){case 0:l<M.l-1&&(s=r,e=l,l++,i.push(l,r));break;case 1:0<r&&(l<M.l-1||r>targetY)&&(s=r,e=l,r--,i.push(l,r));break;case 2:r<M.J-1&&(l<M.l-1||r<targetY)&&(s=r,e=l,r++,i.push(l,r))}}while(l!=M.l-1||r!=targetY);for(t(e,s,l,r,!0),r=0;r<i.length;r+=2)a(e=i[r],s=i[r+1],M.Ma);t(0,1,1,1,!0)}function Y(t,a,i,e,s){for(var r=~~i;r<~~i+s;r++)for(var l=~~a;l<~~a+e;l++)M.ia[l+r*M.l*M.a]=t}function Ua(t,a,i,e){for(var s=X(t,a),r=~~L.r(M.b-5,8);r<M.b;r++)if("#"==Va(t,a,i,r)&&" "==Va(t,a,i,r-1)){M.G[s].push({x:i,y:r-1,type:e});break}}function Wa(t){do{var a=~~J.r(M.l),i=~~J.r(M.J)}while(a==M.c&&i==M.o);Ua(a,i,~~J.r(25,10),t)}function Va(t,a,i,e){return M.ia[i+t*M.a+(a*M.b+e)*M.l*M.a]}function Pa(){Ta(),Y("#",0,0,M.a*M.l,M.b*M.J);for(var t=0;t<M.J;t++)for(var a=0;a<M.l;a++){var i=a,e=t;Y(" ",i*M.a+1,e*M.b+1,M.a-2,M.b-2),type=H[X(i,e)].aa;for(var s=0;4>s;s++)Da[s]&type&&Y(" ",(Ca[s][0]+1)/2*M.a-3+i*M.a,[0,1.6,2,1.6][s]/2*M.b-3+e*M.b,6,6);s=0;for(var r=J.r(10,3);s<r;s++){var l=J.r(M.a-9,5),n=J.r(M.b-1,4);Y("#",i*M.a+l,e*M.b+n,J.r(10,4),8<J.r(10)?2:1)}for(s=2;s<M.b-2;s++)for(r=2;r<M.a-2;r++){for(l=0,n=-1;2>n;n++)for(var h=-1;2>h;h++)"#"==M.ia[r+h+i*M.a+(e*M.b+s+n)*M.l*M.a]&&l++;6<l&&Y(" ",i*M.a+r,e*M.b+s,J.r(3,2),J.r(2,1))}for(2>J.r(3)?(s=J.r(.7*M.a,.3*M.a),r=J.r(.7*M.b,.3*M.b),Y("W",i*M.a+s,e*M.b+r,1,1),Y(" ",i*M.a+s+1,e*M.b+r,3,1),Y("d",i*M.a+s+2,e*M.b+r,1,1),Y("#",i*M.a+s-2,e*M.b+r+1,J.r(8,4),J.r(4,1)/2),4&type?(Y("#",i*M.a+8,e*M.b+r+2,s-2-8,1),Y("#",i*M.a+8,e*M.b+r+2,1,M.b-r-2-4),Y("#",i*M.a+6,e*M.b+M.b-4,4,1)):Y("#",i*M.a+s-2-J.r(6),e*M.b+r+2,J.r(8,4),J.r(3,2))):(s=J.r(.7*M.a,.3*M.a),r=J.r(.7*M.b,.3*M.b),Y(J.r(2)?"S":"s",i*M.a+s,e*M.b+r,1,1),Y("#",i*M.a+s-2,e*M.b+r+1,J.r(6,4),J.r(4,2)/2),Y(J.r(2)?"G":"D",i*M.a+s-5,e*M.b+r-4,1,1),Y("#",i*M.a+s-8,e*M.b+r-4,J.r(6,4),1)),M.G[X(i,e)]=[],s=0,r=~~L.r(14,6);s<r;s++)Ua(i,e,l=~~L.r(.7*M.a,.3*M.a),0);for(s=~~L.r(4,1),r=0;2>r;r++)Ua(i,e,l=~~L.r(.7*M.a,.3*M.a),s),s=s%3+1;i==M.ya&&e==M.za&&Y("F",i*M.a+M.a-4,e*M.b+5,1,1)}}function Xa(t,a,i){if(i){i=[0,10,20,10][a%4],tlCt.fillStyle="hsl("+Ea+", "+Fa+"%, "+(20+i)+"%)",tlCt.beginPath(),tlCt.moveTo(20*t,20*a),tlCt.lineTo(20*t+20,20*a+20),tlCt.lineTo(20*t,20*a+20),tlCt.fill(),tlCt.fillStyle="hsl("+Ea+", "+Fa+"%, "+~~J.r(60+i,50+i)+"%)",tlCt.beginPath(),tlCt.moveTo(20*t,20*a),tlCt.lineTo(20*t+20,20*a),tlCt.lineTo(20*t+20,20*a+20),tlCt.fill(),tlCt.closePath(),tlCt.fillStyle="hsl("+Ea+", "+Fa+"%, "+~~J.r(40+i,35+i)+"%)",i=0;for(var e=~~J.r(5,3);i<e;i++)tlCt.beginPath(),tlCt.arc(20*t+[0,6,10,10,0][i]+J.r(4,2),20*a+[0,6,10,0,10][i]+J.r(4,2),J.r(3.5,1.5),0,2*Math.PI),tlCt.fill();tlCt.strokeRect(20*t,20*a,20,20),Y("#",t+M.c*M.a,a+M.o*M.b,1,1),E.m.push({id:1e3+t+a*M.a,C:"bl",d:[20*t,20*a,20*t+20,20*a+20]})}else tlCt.clearRect(20*t-1,20*a-1,22,22),Y(" ",t+M.c*M.a,a+M.o*M.b,1,1),E.U(1e3+t+a*M.a)}function Ya(t){E.U(t.id),t.oa=E.m.push({id:t.id,C:"bl",d:[]})-1}function Za(t){E.U(t.id),E.m.push({id:t.id,C:"bl",d:[]})}function Z(t,a){E.m[t.oa]={id:t.id,C:a||"bl",d:[t.x+t.X[0],t.y+t.X[1],t.x+t.X[2],t.y+t.X[3]]}}function $a(t){return E.m.filter((function(a){return a.id==t.id}))}function ab(t,a){var i=$a(t);return 0!=i&&((i=i[0].d)[0]<a[2]&&i[2]>a[0]&&i[1]<a[3]&&i[3]>a[1])}function T(){}W.prototype.ha=function(){},W.prototype.ea=function(){},(F=new W).ha=function(){B.visible=!1,M.c=1,M.la=2,M.o=1,M.T=2,u.visible=!1,w.visible=!1;for(var t=pa(["It must not be that far away."]),a=t.next();!a.done;a=t.next())P(a.value,5e3)},F.ea=function(){if(M.P-=M.progress,0>M.P&&(M.P=0),mpCt.clearRect(0,0,640,400),M.ba&&!(0>=M.P)){mpCt.globalAlpha=.7;for(var t=~~((640-M.a*M.l*2)/2),a=~~((400-M.b*M.J*2)/2),i=0;i<M.b*M.J;i++)for(var e=0;e<M.a*M.l;e++)M.wa[~~(e/M.a)+~~(i/M.b)*M.l]&&(c=M.ia[e+i*M.a*M.l],"#"==c&&(mpCt.fillStyle="#FFF",mpCt.fillRect(t+2*e,a+2*i,2,2),mpCt.fill(),mpCt.fillStyle="#AAA",mpCt.fillRect(t+2*e+1,a+2*i+1,2,2),mpCt.fill()),"F"==c&&(mpCt.fillStyle="yellow",mpCt.fillRect(t+2*e-4,a+2*i-4,8,8),mpCt.fill()));mpCt.fillStyle="#3D3",mpCt.fillRect(t+2*(M.c*M.a+A.x/640*M.a),a+2*(M.o*M.b+A.y/400*M.b),6,6),mpCt.fill()}La()},(G=new W).ha=function(){M.c=-2,M.va=0,A.visible=!1,w.visible=!1;for(var t=pa([["FLUFFLINE","#000",3e3,"100px Arial bold"],["<R> to skip intro, <SPACE> for quick readers.","#AAAACC"],["Just a few clicks, and Sonya's birthday gifts are on the way."],["My daughter is counting down the hours till tomorrow!"],["⛸️",,1e3],["🐻",,1e3],["🐰",,1e3],["🎻",,1e3],["🎁",,1e3],["Sending order. Spinning... Spinning..."],["It takes forever."],["What? No Internet?!"],["Sonya: I sleep one more, and I can play with my beautiful new toys!","#DD5566"],[" "],["It must be that Firewall again."],["I have to repair the Net before it's too late!"]]),a=t.next();!a.done;a=t.next())P((a=a.value)[0],a[2]||5e3,!1,a[1],a[3]);G.time=0,M.ka=!0,T=Oa},G.ea=function(){M.ka||(G.time+=M.progress/1e3,25<G.time&&(A.visible=!0),38<G.time&&43>G.time&&(B.visible=!0,B.x=100,B.u=.3,.2>3*G.time%1&&(B.j=-.2)),43<G.time&&48>G.time&&(B.w=-1,B.u=-.3,.2>3*G.time%1&&(B.j=-.2)),48<G.time&&49>G.time&&(A.visible=!0,B.visible=!1),54>G.time&&(70>A.x&&(A.x=70),300<A.x&&(A.x=300)),55<G.time&&(w.visible=!0,P("The firewall must be close! Let's go!",2e3)),-3==M.c&&(Q("I think I should go east!",5e3),A.x=100,M.c=-2),500<A.x&&(A.x=650,V(Ba,"zeroroom")))},(Ba=new W).ha=function(){B.visible=!1,O=[],u.visible=!1,w.visible=!1;for(var t=pa([["The Firewall is not here yet."],["The time is ticking..."],["I see a huge Stallosaurus! That's why my Net is not working!"],["Luckily a Cactus is here - the silver bullet of the Stallosaurus!"]]),a=t.next();!a.done;a=t.next())P((a=a.value)[0],2e3,!1,a[1]);M.G[1e3]=[],M.G[1e3].push({x:15,y:15,type:2}),A.u=0},Ba.ea=function(){20>A.x&&(A.x=20,Q("I haven't repaired the firewall yet.",2e3)),0==M.c&&(M.c=1,V(F,"gameon")),La()},wEnd=new W,wEnd.ha=function(){Ja=200,P("Press Enter to restart",3e3),0>=M.A?(ttCt.text="GAME OVER",A.visible=!1):ttCt.text="THE END"},wEnd.ea=function(){70>A.x&&(A.x=70),300<A.x&&(A.x=300),200>A.y&&(A.y=200),70>B.x&&(B.x=70)},Spr=function(){return this.R=[],this.m=[],this.ta=0,this.add=function(t){this.R.push(t),this.ta++},this.update=function(){for(i=0;i<this.ta;i++)this.R[i].visible&&this.R[i].update()},this.h=function(){for(i=0;i<this.ta;i++)this.R[i].f.save(),this.R[i].visible&&this.R[i].animate(),this.R[i].visible&&this.R[i].h(),this.R[i].f.restore()},this.U=function(t){for(var a=E.m,i=a.length-1;0<=i;i--)a[i]||(a[i]=0),a[i].id==t&&(a[i]=0)},this},Sp0=function(t,a,i,e,s,r,l,n,h){this.f=t,this.x=e||0,this.y=s||0,this.u=r||0,this.j=l||0,this.image=a,this.va=i?.05:0,!n&&a&&(n=a.width),!h&&a&&(h=a.height),this.S=n,this.O=h,this.r=0,this.ra=this.w=1,this.g=n/2,this.i=h/2,this.ua=this.$=1,this.visible=!0,this.da=0,this.X=[0,0,0,0],this.id=E.ta,this.Ga=1,E.add(this)},Sp0.prototype.update=function(){this.x+=this.u,this.y+=this.j,this.j+=this.va},Sp0.prototype.h=function(){this.f.save(),this.f.translate(this.x+this.g,this.y+this.i),this.f.rotate(this.r*Math.PI/180),this.f.scale(this.w,this.ra),this.f.drawImage(this.image,-this.g,-this.i,this.S,this.O),this.f.restore()},Sp0.prototype.animate=function(){};var S=[];function eb(){document.addEventListener("keyup",(function(t){t&&t.preventDefault(),S[t.keyCode]=!1,T(t,1)}),!1),document.addEventListener("keydown",(function(t){t&&t.preventDefault(),S[t.keyCode]=!0,T(t,1)}),!1)}function Sa(){function t(a){M.pa=M.pa?M.timeStamp:a,M.timeStamp=a,M.progress=a-M.pa,M.Z%=60,0>M.A&&V(wEnd,"gameover"),0==M.Z%10&&(t0=t1,t1=performance.now()),0==M.Z%3&&S.some((function(t){return t}))&&T(0,0),ct.clearRect(0,0,640,400),bgCt.Ja==M.c&&bgCt.Ka==M.o||bgCt.h(),E.update(),E.h(),M.paused||M.ka||(M.F.ea(),Ka()),""!=ttCt.text&&ttCt.h(),M.ka&&Qa(),M.paused||window.requestAnimationFrame(t),M.Z++}fxCt.h=function(){var t="🦊  🎁  ".repeat(100);fxCt.fillStyle="#fd7",fxCt.fillRect(0,0,640,400),fxCt.font="20px Arial",fxCt.fillStyle="#000";for(var a=0;20>a;a++)fxCt.fillText(t,a%2*14,20*a)},fxCt.h(),ttCt.x=0,ttCt.La=ttCt.createPattern(fx,""),ttCt.h=function(){ttCt.clearRect(0,0,640,400),this.font="normal normal 900 80px sans-serif";var t=(ttCt.x+M.progress/200)%80;ttCt.x=t,this.fillStyle=ttCt.La,this.strokeStyle="#da5",this.lineWidth=2,this.save(),this.scale(1,1.5),this.translate(-t,-t);var a=ttCt.text;M.paused&&(a="PAUSED"),this.fillText(a,(640-ttCt.measureText(a).width)/2+t,80+t),this.strokeText(a,(640-ttCt.measureText(a).width)/2+t,80+t),this.restore()},ttCt.text="FLUFFLINE",ttCt.h(),grad[0]=bgCt.createLinearGradient(0,340,0,400),grad[0].addColorStop(0,"#320"),grad[0].addColorStop(1,"#642"),grad[1]=bgCt.createLinearGradient(0,320,0,340),grad[1].addColorStop(0,"#495"),grad[1].addColorStop(1,"#030"),grad[2]=bgCt.createLinearGradient(0,0,0,320),grad[2].addColorStop(0,"#68d"),grad[2].addColorStop(1,"#bde"),u.h=function(){var t=J.M;J.M=30;for(var a=-42;42>a;a+=.3)bgCt.beginPath(),bgCt.moveTo(100+a,280),bgCt.strokeStyle="hsl(24,"+~~J.r(85,70)+"%,"+~~J.r(60,30)+"%)",bgCt.lineTo(100+a,~~J.r(325,322)),bgCt.stroke();for(a=-50;50>a;a+=.5)bgCt.beginPath(),bgCt.moveTo(~~J.r(102,98),~~J.r(232,228)),bgCt.strokeStyle="hsl(39,"+~~J.r(85,70)+"%,"+~~J.r(80,40)+"%)",bgCt.lineTo(J.r(101,99)+a,~~J.r(285,282)),bgCt.stroke();for(a=-20;20>a;a+=.3)bgCt.beginPath(),bgCt.moveTo(100+a,J.r(288,292)),bgCt.strokeStyle="hsl(39,"+~~J.r(85,70)+"%,"+~~J.r(20)+"%)",bgCt.lineTo(J.r(101,99)+a,~~J.r(325,322)),bgCt.stroke();J.M=t},w.h=function(){var t=J.M;J.M=30;for(var a=0;2>a;a++)for(var i=0;16>i;i++)ct.fillStyle="hsl(0,"+~~J.r(75,72)+"%,"+~~(J.r(50,27)+L.r(20))+"%)",ct.fillRect(550+30*a+i%2*15,67+16*i,29,15);for(J.M=t,ct.fillStyle="#000",ct.lineWidth=.5,t=5;0<t;t--)for(a=0,i=10-t;a<i+1;a++)ct.save(),ct.translate(585+L.r(2),320+L.r(2)),ct.rotate(180/i*-a*Math.PI/180),ct.beginPath(),ct.fillStyle="hsl("+(60-10*t)+","+~~L.r(62,57)+"%,"+~~L.r(100-10*t,96-10*t)+"%)",ct.moveTo(0,0),a?ct.quadraticCurveTo(8*t,5*t,16*t,0):ct.moveTo(16*t,0),a!=i&&ct.quadraticCurveTo(8*t,-5*t,0,0),ct.closePath(),ct.fill(),ct.restore()},z.h=function(){var t=this.f;0<z.H?(t.save(),t.translate(this.x+this.g,this.y+this.i+10),t.rotate(270*Math.PI/180),t.drawImage(va,-this.g,-this.i),t.drawImage(r,-this.g,2-this.i-4),t.drawImage(r,5-this.g,-this.Pa-4),Z(this,"bl"),t.restore(),t.fillText(Ma(this.H),this.x+8,this.y)):(z.H=0,t.translate(this.x+this.g,this.y+this.i),t.rotate(this.r*Math.PI/180),t.scale(this.w,this.ra),t.drawImage(va,-this.g,-this.i),t.drawImage(r,-this.g,-this.i+(this.Y/10+8)%5-4),t.drawImage(r,5-this.g,-this.i+this.Y/10%5-4),Z(this,"dn"))},z.da=200,D=new Sp0(ct,null,!1,200,200,0,0,100,100),(Aa=new Sp0(ct,null,!1,200,200,0,0,100,100)).Ha=function(){if(!(-1>M.c)){var t=X(M.c,M.o);Ya(this);for(var a=0,i=M.G[t].length;a<i;a++){var e=M.G[t][a];E.m.push({id:3e3+a,C:["signal","map","ca","ds"][e.type],d:[20*e.x+3,20*e.y+3,20*e.x+17,20*e.y+17]})}}},Aa.h=function(){if(!(-1>M.c))for(var t=X(M.c,M.o),a=0,i=M.G[t].length;a<i;a++){var e=M.G[t][a];this.f.fillStyle="#000",this.f.font="bold 12pt Calibri",this.f.fillText(["💠","🗺️","🌵","💾"][e.type],20*e.x+3,20*e.y+18)}},D.Va=6,D.qa=M.sa,D.Ga=.4,D.Fa=100,D.h=function(){if(!this.oa){this.oa=E.m.length;for(var t=0;t<M.sa;t++)E.m.push({id:4e3+t,C:"sp",d:[]})}this.qa=8,t=this.oa,this.f.strokeStyle="none";for(var a=0;a<M.sa;a++){var i=3*Math.sin(this.r/180*Math.PI)+7,e=this.x+this.Fa*Math.cos((360/this.qa*a+this.r)*Math.PI/180),s=this.y+this.Fa*Math.sin((360/this.qa*a+this.r)*Math.PI/180),r=14+10*Math.sin(this.r*Math.PI/180),l=Math.PI/r,n=Math.PI/2*3;if(this.f.fillStyle="hsl("+~~(360/this.qa*a)+", 99%, 50%)",this.da=50,this.Oa){this.da=200;var h=i+2,o=i-2;this.f.moveTo(e,s-h),this.f.beginPath();for(var f=0;f<r;f++)x1=e+Math.cos(n)*h,y1=s+Math.sin(n)*h,this.f.lineTo(x1,y1),n+=l,x1=e+Math.cos(n)*o,y1=s+Math.sin(n)*o,this.f.lineTo(x1,y1),n+=l;this.f.lineTo(e,s-h),this.f.closePath()}else this.f.beginPath(),this.f.ellipse(e,s,i,i,0,2*Math.PI,0);this.f.fill(),this.f.stroke(),E.m[t+a]={id:4e3+a,C:"sp",d:[e-.7*i,s-.7*i,e+.7*i,s+.7*i]}}},D.animate=y.animate=function(){this.r=(this.r+this.Ga)%360},y.g=10,y.i=10,z.g=20,z.i=20,za.animate=ya.animate=function(){640<this.x&&(this.x=-100)},y.h=function(){Sp0.prototype.h.call(this),this.f.restore(),ct.font="10px Arial";var t=M.N[X(M.c,M.o)];this.image=wa,0>=t||!t?(ct.fillStyle="#444",ct.fillText("offline "+(t?Math.pow(2,Math.abs(t)+M.W)+" bps":""),this.x-10,this.y-15)):(ct.fillStyle="#272",ct.fillText(Math.pow(2,t+M.W)+" bps",this.x-10,this.y-15))},y.Ia=function(){for(var t=M.N.length,a=0,i=0;i<t;i++){var e=M.N[i];e&&(0<M.I[i]?a+=Math.pow(2,e+M.W):M.N[i]=-Math.abs(e))}return a},bgCt.h=function(){bgCt.Ja=M.c,bgCt.Ka=M.o,M.B=X(M.c,M.o),J.M=M.B+20,E.m=[];var t=M.c,a=M.o,i=!0;(0>t||0>a)&&(i=!1);for(var e=[],s=0;s<M.b;s++)for(var r=0;r<M.a;r++)e[s*M.a+r]=i?M.ia[t*M.a+r+(s+a*M.b)*M.a*M.l]:" ";if(-1==t)for(e[15*M.a+24]="d",t=0;32>t;t++)e[16*M.a+t]="#";for(I=e,M.wa[M.B]||M.F!=F||(M.wa[M.B]=!0),this.fillStyle=grad[2],this.fillRect(0,0,640,320),this.fill(),tlCt.clearRect(0,0,640,400),w.visible=z.visible=y.visible=D.visible=!1,e=0;2>e;e++)for(t=200+50*e,this.fillStyle=["#CCE","#AAD"][e],this.moveTo(0,t),this.beginPath(),a=0;50>a;a++)y0=t,t+=J.r(15,-15),this.arcTo(13*a,t,13*(a+1),y0,15),this.lineTo(800,400),this.lineTo(0,400),this.fill();for(e=0;50>e;e++)this.drawImage(ua,20*e-70,220+J.r(20),130,130),this.drawImage(ua,20*e-70,222+J.r(20),200,200);for(this.strokeStyle="#000",this.beginPath(),this.fillStyle=grad[0],this.fillRect(0,340,640,60),this.fill(),this.strokeRect(0,340,640,60),this.fillStyle=grad[1],this.fillRect(0,320,640,20),this.fill(),this.strokeRect(0,320,640,20),J.M=M.B+20,Ea=~~J.r(360),Fa=~~J.r(40),e=E.m.length;e--;)900<E.m[e].id&&E.m.splice(e,1);for(0>M.c&&E.m.push({id:5e3,C:"bl",d:[0,320,640,400]}),e=0;e<I.length;e++)if(" "!=I[e])switch(t=~~(e/M.a),a=e%M.a,this.lineWidth=.5,I[e]){case"#":Xa(a,t,1);break;case"W":E.m.push({id:y.id,C:"wf",d:[20*a,20*t,20*a+20,20*t+20]}),y.x=20*a,y.y=20*t,y.visible=!0;break;case"s":case"S":D.x=20*a,D.y=20*t,D.Oa="S"==I[e],D.visible=!0;break;case"d":z.x=20*a-10,z.y=20*t-24,z.u=.4,z.w=1,z.visible=!0,z.H=M.I[X(M.c,M.o)]||0;break;case"F":w.x=20*a-10,w.y=20*t-24,w.visible=!0,E.m.push({id:997,C:"firewall",d:[20*a,20*t,20*a+50,20*t+230]})}Aa.Ha(),-2==M.c&&(u.h(),this.font="20px Arial",this.fillText("🐖",20,322),this.font="13px Arial",this.fillText("🌹🌹🌹🌹🌹",200,322),this.fillText("🌻🌻🌻🌻🌻🌻🌻",300,322),this.fillText("📫",160,325),this.fillText("⚽",50,336),M.Aa&&(this.fillText("🎁🎁🎁",150,330),this.fillText("🎁🎁",155,335)),this.fillStyle="#EEE",this.fillText("(c) 2018 Zoltan Szoke",70,380))},z.Y=0,z.X=[5,8,40,45],Ya(z),Za(z),A.g=0,A.i=50,A.Y=0,A.X=[-20,40,20,65],Ya(A),Za(A),(x=new Sp0(ct,xa,!1,100,250,0,0)).s=0,x.update=function(){0>=this.s?this.visible=!1:(x.S=50*(80-this.s)/50,x.O=50*(80-this.s)/50,this.s--,this.visible=!0,this.x+=this.u)},B.h=A.h=function(){var t=this.f;t.save(),t.font="20px Arial Bold",t.translate(this.x+this.g,this.y+this.i);var a=30;this.Na?(t.translate(0,20),t.fillStyle="#000",t.fillText("Sonya Fox",-30,-30),t.scale(.3*this.w,.3*this.ra),a=10):(-2==M.c&&(t.fillStyle="#000",t.fillText("Fluffy 'Daddy' Fox",-70,-30)),t.scale(.7*this.w,.7*this.ra)),t.rotate(this.r*Math.PI/180);for(var i=2==M.D?4:A.na/(M.D+1)*4,e=4;e--;){var s=12*e;t.beginPath(),t.fillStyle=i<=e?"grey":"#"+["DD4","44D","4D4","D44"][e],t.ellipse(22-this.g-s,50-this.i,12,15,0,2*Math.PI,0),t.fill(),t.beginPath(),t.fillStyle=i<=e?"#BBB":"#"+["FF7","77F","7F7","F77"][e],t.ellipse(25-this.g-s,50-this.i-3,8,11,0,2*Math.PI,0),t.fill()}t.drawImage(this.image,-this.g,-this.i,this.S,this.O),t.drawImage(p,-this.g-30,60-this.i+this.x%a/6,this.S,this.O),t.drawImage(p,-this.g-20,60-this.i+(this.x-15)%a/6,this.S,this.O),t.drawImage(p,-this.g,60-this.i+this.x%a/6,this.S,this.O),t.drawImage(p,10-this.g,60-this.i+(this.x-15)%a/6,this.S,this.O),t.rotate(10*this.j*Math.PI/180),t.drawImage(sa,-this.g-77,45-this.i,this.S,this.O),Z(this),t.restore(),M.F==F&&(ct.fillStyle="#FFFFFF80",A.fa=~~((A.x+2+30*Math.sign(A.w))/20),A.ga=~~((A.y+50)/20)+1*A.ma,ct.fillRect(20*A.fa,20*A.ga,20,20),ct.fillStyle="#D22",ct.fillText("+",20*A.fa+10,20*A.ga+14))},z.H=0,z.update=function(){for(var t=0,a=M.I.length;t<a;t++)M.I[t]&&(M.I[t]-=M.progress/1e3,0>M.I[t]&&(M.I[t]=0));t=X(M.c,M.o),0<x.s&&ab(this,[x.x-15,x.y-15,x.x+15,x.y+15])&&(x.s=0,O=[],P("This little dino went to bed...",2500),M.I[t]||(z.H=M.I[t]=120)),0<z.H?z.H-=M.progress/1e3:(this.x+=this.u,(a=$a(y)[0])&&ab(this,a.d)&&(M.N[t]=-Math.abs(M.N[t])),(" "==I[1+~~(this.x/20)+32*(3+~~(this.y/20))]||"#"==I[1+~~(this.x/20)+this.w+32*(2+~~(this.y/20))])&&(this.w=-this.w,this.u=-this.u))},B.animate=z.animate=A.animate=function(){this.Y=(this.Y+1)%360,this.r=5*Math.sin(this.Y*Math.PI/180)},A.na=2>M.D?M.D+1:9999,A.ca=!1,A.ma=!1,B.update=A.update=function(){250<B.y&&(B.y=250,B.j=0),2==M.D?(this.x+=this.u,this.y+=this.j,this.j*=this.ua):(this.x+=this.u,this.y+=this.j,this.j+=this.va),this.u*=this.$;var t=$a(this);if(0==t)var a=["","","",""];else{t=t[0].d;for(var i=0;i<E.m.length;i++){var e=E.m[i];if(e&&e.id!=this.id){var s=e.d,r=$a(this)[0].d,l=Math.max(r[0],s[0]),n=Math.max(r[1],s[1]),h=Math.min(r[2],s[2]);if((l=[l,n,h,s=Math.min(r[3],s[3]),h-l,s-n,0<h-l&&0<s-n])[6])if(l[4]/(e.d[2]-e.d[0])<l[5]/(e.d[3]-e.d[1])){if(t[0]==l[0]){var o=e.C,f=e.id;this.x+=e.d[2]-t[0],Z(this)}else if(e.d[0]==l[0]){var c=e.id,u=e.C;this.x-=t[2]-e.d[0],Z(this)}this.u=.5*-this.u}else{if(t[1]==l[1]){a=e.id;var d=e.C;this.y+=e.d[3]-t[1],Z(this)}else if(e.d[1]==l[1]){var b=e.id,p=e.C;this.y-=t[3]-e.d[1],Z(this)}this.j=0}}}a=[d,p,o,u,a,b,f,c]}for(b=0;4>b;b++)"sp"!=a[b]&&"dn"!=a[b]||(M.A-=(a[b]==D?D.da:z.da)*M.progress/1e3,O=[],"sp"==a[b]&&P("Yikes, that hurts!",2500,"#DAA"),"dn"==a[b]&&P("That Stallosaur just BIT me! I hope it's not rabid...",2500)),"wf"==a[b]&&(!(f=M.N[M.B])||0>f)&&(P("Wifi turned on... Sending signals...",2500),M.N[M.B]=Math.max(Math.abs(M.N[M.B])||0,1)),"signal"==a[b]&&(P("+"+(f=16*Math.pow(2,M.W))+" bits",1500),M.G[M.B][a[b+4]-3e3]={},E.U(a[b+4]),M.A+=f,Wa(0)),"map"==a[b]&&(0==M.P&&(O=[],P("A map of the rooms I have visited!",3e3),P("I will remember this for 30 seconds.",2500)),M.P=3e4,M.G[M.B][a[b+4]-3e3]={},E.U(a[b+4]),M.ba=!0,Wa(1)),"firewall"==a[b]&&(M.A<M.xa?Q("You need at least "+M.xa+" bps to repair the firewall!",3e3):(O=[],M.Aa=!0,ttCt.text="THE END",V(wEnd,"GAME WON"),M.c=-2,M.Qa=1,Ja=200,P("You returned home, and finished the order.",3e3),P("Sonya received her toys, and was really-really happy.",3e3),P("You are a good father.",3e3),P("The End.",3e3),B.visible=!0,B.x=100)),"ca"==a[b]&&(P(["Botanist's log: Three deadly cacti ordered.","+3 cactus","How did the Stallosaurus become extinct?"][~~L.r(3)],3e3),M.G[M.B][a[b+4]-3e3]={},E.U(a[b+4]),M.L+=3,Wa(2)),"ds"==a[b]&&(M.G[M.B][a[b+4]-3e3]={},E.U(a[b+4]),Wa(3),M.Ba=A.x,M.Ca=A.y,localStorage.setItem("gameObject",JSON.stringify(M)),Q("Game saved.",2500));"bl"!=a[1]&&"wf"!=a[1]&&"sp"!=a[1]||(this.na=2>M.D?M.D+1:9e8,this.ca=!0),(0>this.x||640<this.x||-50>this.y||282<this.y)&&(0>this.x?0<M.c||M.F!=F?(M.c--,this.x=600):this.x=0:640<this.x&&(M.c<M.l||M.F!=F?(M.c++,this.x=40):this.x=640),-50>this.y?0<M.o||M.F!=F?(M.o--,this.y=282):this.y=-50:282<this.y&&(M.o<M.J||M.F!=F?(M.o++,this.y=-50):this.y=282),Z(this))},A.controls=function(a,i){if(M.Ua=i,(S[37]||S[65])&&(0>A.w&&(A.u=-1),A.w=-1,A.$=.7,3>M.D&&A.ca&&(A.j=-.4,A.$=.7,A.ca=!1)),(S[39]||S[68])&&(M.pressed++,0<A.w&&(A.u=1),A.w=1,A.$=.7,3>M.D&&A.ca&&(A.j=-.4,A.$=.7,A.ca=!1)),(S[38]||S[87])&&i&&(2==M.D?(A.j=-1,A.ua=.9):0<A.na&&-.5<=A.j&&(A.j=-2.5,A.$=1,A.na--,A.ma=!1)),(S[40]||S[83])&&i&&(2==M.D?(A.j=1,A.ua=.9):A.j=1,A.ca&&(A.ma=!A.ma)),S[82]&&i){if(M.F!=G)return;O=[],M.L=3,A.visible=!0,A.x=50,A.y=250,V(F),bgCt.h()}if(S[77]&&i&&(M.ba=!M.ba,M.ba||mpCt.clearRect(0,0,640,400)),S[80]&&i&&(M.paused=!M.paused,ttCt.h(),M.paused||(M.timeStamp=performance.now(),window.requestAnimationFrame(t))),(S[74]||S[85]||S[67])&&i){if(S[67]){if(!confirm)return;var e=confirm}else e=S[74]?Ha[Ia()]:Ga[M.V];if(null==e.v)return;e.v>M.A?Q("Not enough Signals!",3e3):e.v>.3*M.A&&!S[67]?(Q("May be too expensive! Press C to confirm!",3e3),confirm=e):(e.K(),Q("Sold.",3e3),M.A-=e.v)}S[13]&&i&&M.F==wEnd&&location.reload(),S[32]&&i&&(0>M.c?O.length&&(G.time+=O[0].s/1e3,O.shift()):((e=" "==Va(M.c,M.o,A.fa,A.ga))&&0<M.T&&(M.T--,Xa(A.fa,A.ga,1)),!e&&5>M.T&&(M.T++,Xa(A.fa,A.ga,0))))},eb(),t1=0,frm=M.Z=0,window.requestAnimationFrame(t)}window.onload=function(){ra=U("#F90#FFF#000"," 78,kU.aS.SN.RK.H<.EE.8?.@Q.L^.[]+,KG*CC78787 79,MN*;;78787,XL*;;78787,Q].^].LW+ 7:,iR*9978787,OQ*9978787,YO*9978787"),sa=U("#F90#FEC"," 78,c7!aAZFRJ!EN9N7H!7E8A<>%BAP>+ 79,?B.CD.=D.@G.<G.>J%9N7H!7E8A;=%BAEA.?B+"),p=U("#F90"," 78,=A!@D@C@F!<F:F8D!8B8?=A+"),ta=U("#BBF#FFF"," 78,ZK*==78787,dK*==78787,lK*==78787,tK*==78787 79,RH*==78787,UF*==78787,[F*==78787,dB*==78787,iD*==78787,dG*==78787,lH*==78787,sF*==78787,yF*==78787"),ua=U("##8AA#8AA"," 89,UU1>3J16>+ 8:,XF/CM16O+ 8:,XC/BI16M+ 8:,X@/@E16I+"),wa=U("#000"," 78,:C.7=!769a69a=.^C!^;:;:C+,@O.=I!=A[A[I.XO!XG@G@O+,FZ.CU!COUOUU.RZ!RUFUF[+,K^*;;78787"),va=U("#000#FFF"," 78,_?.R?.PA.PK.IP.DP.<K.<U.F_.P_.XR.[R.[P.XP.XK.^K.^I.[I.[G.aG.aA+ 79,VA*8878787"),r=U("#000"," 78,G_.Gd.Kd.Kb.Ib.I_+"),xa=U("#000"," 78,I?.KA.K].I_.G_.E].EA.G?,?H.?O.CR.ER.EO.CO.CH,QF.QO.OR.KR.KP.MP.MO.MF"),setTimeout(Ra,100)}</script><body style=width:98%><div style="width:154vh;height:96vh;display:block;margin:0 auto;padding:0;top:0;image-rendering:-o-crisp-edges;image-rendering:pixelated;image-rendering:-moz-crisp-edges;-ms-interpolation-mode:nearest-neighbor;cursor:none"><canvas id=fx width=640px height=400px style="width:154vh;height:96vh;margin:0 auto;position:absolute;top:0"></canvas><canvas id=bg width=640px height=400px style="width:154vh;height:96vh;margin:0 auto;position:absolute;top:0"></canvas><canvas id=tl width=640px height=400px style="width:154vh;height:96vh;margin:0 auto;position:absolute;top:0"></canvas><canvas id=a width=640px height=400px style="width:154vh;height:96vh;margin:0 auto;position:absolute;top:0"></canvas><canvas id=mp width=640px height=400px style="width:154vh;height:96vh;margin:0 auto;position:absolute;top:0"></canvas><canvas id=tt width=640px height=400px style="width:154vh;height:96vh;margin:0 auto;position:absolute;top:0"></canvas></div><div id=spcont style=display:none>