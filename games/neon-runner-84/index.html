<!doctype html><title>Neon Runner '84</title><style>body{padding:0;margin:0;background:#160b29;overflow:hidden}#b{display:block;max-width:100vw;max-height:96vh;margin:2vh auto;height:100vh}@keyframes d{0%{color:#d51aac}50%{color:#fc1dcc}100%{color:#d51aac}}#c{position:absolute;bottom:5vh;left:50vw;width:70vh;margin-left:-35vh;box-sizing:border-box;padding:.5em;background:rgba(0,0,0,.75);border-radius:2vh;font-size:4.5vh;font-family:'Bauhaus 93','OCR A',monospace;color:#ff1fce;text-shadow:0 0 4px #d435ac;border:2px solid #d435ac;transition:all .1s;box-shadow:0 0 8px #ff1fce;animation-name:d;animation-duration:1s;animation-fill-mode:both;animation-iteration-count:infinite}@keyframes g{0%{color:#651052}50%{color:#ff1fce}100%{color:#651052}}.f{margin-left:.2em;animation-name:g;animation-duration:.3s;animation-fill-mode:both;animation-iteration-count:infinite}</style><canvas id=b></canvas><div id=c></div><div id=debug style="color:#fff;position:absolute;bottom:0;right:0;font:12pt monospace"></div><script>var e,t,r,n,o,a,i,c,u,s,l,g,m,f,d,p,h,v,y,x,b,T,w,_,E,z,A,C,R,F,S,P,k,U,L,D,I,B,N,q,G,O,M,V,X,H,Y,W,j,K,Q,J,Z,$,ee,te,re,ne,oe,ae,ie,ce,ue,se,le,ge,me,fe,de,pe,he,ve,ye,xe,be,Te,we,_e,Ee,ze,Ae,Ce,Re,Fe,Se,Pe,ke,Ue,Le,De,Ie,Be,Ne,qe,Ge,Oe,Me,Ve,Xe,He,Ye,We,je,Ke,Qe,Je,Ze,$e,et,tt;for(X=0,J=(Ae=["abs","sin","cos","min","max","PI","floor","random","pow","round","sign"]).length;X<J;X++)H=Ae[X],window[H]=Math[H];for(Array.prototype.nextLooped=function(e,t){var r;return null==(r=this.indexOf(e))&&(r=0),this[r=(r+t)%this.length]},Array.prototype.random=function(){return this[floor(random()*this.length*.99)]},Array.prototype.shuffle=function(){var e,t,r,n;for(e=t=1,r=this.length;1<=r?t<r:t>r;e=1<=r?++t:--t)random()>.5&&(n=[this[0],this[e]],this[e]=n[0],this[0]=n[1]);return this},Qe=512,ee=function(e,t,r){return e+(t-e)*r},m=function(e,t,r){return min(t,max(e,r))},et=function(e){return min(1,max(-1,e))},(g=document.getElementById("b")).width=g.height=Qe,q=g.getContext("webgl"),F=function(e){return new Float32Array(e)},f=function(e,t){var r;if(r=q.createShader(t),q.shaderSource(r,e),q.compileShader(r),!q.getShaderParameter(r,q.COMPILE_STATUS))throw"could not compile shader:"+q.getShaderInfoLog(r);return r},Ee=function(e,t){var r,n,o;return o=f(e,q.VERTEX_SHADER),r=f(t,q.FRAGMENT_SHADER),n=q.createProgram(),q.attachShader(n,o),q.attachShader(n,r),q.linkProgram(n),n},N=function(e){return Ee("uniform vec3 x; uniform vec3 m; attribute vec3 p; varying vec4 u; varying vec4 q; void main() { vec3 t=p*0.5+x*2.0; float div=t.z*0.6+0.4; gl_Position=vec4(t.xy-m.xy*div,t.z / 100.0,div); u.xy=p.xy; u.zw=p.xy+x.xy; q.xy=m.xy; q.zw=x.xy; }","precision mediump float; varying vec4 u; varying vec4 q; uniform float t; void main() { "+e+" }")},r=N("vec3 nrm = normalize(vec3(u.xy,1.0)); vec3 lig = normalize(vec3(u.zw,1.0)); float d=smoothstep(0.3, 0.95, dot(nrm,lig)); gl_FragColor.rgb=mix(vec3(0.96,0.8,0.38),vec3(0.54,0.08,0.5),d); gl_FragColor.w=min(1.0,smoothstep(0.85,0.84,length(u.xy))+smoothstep(1.0,0.85,length(u.xy))); gl_FragColor.rgb*=gl_FragColor.w; if(gl_FragColor.a <= 0.0) { discard; }"),G=N("vec3 nrm = normalize(vec3(u.xy,1.0)); vec3 lig = normalize(vec3(u.zw,1.0)); float d=smoothstep(0.3, 0.95, dot(nrm,lig)); gl_FragColor.rgb=mix(vec3(0.96,0.8,0.38),vec3(0.54,0.08,0.5),d); gl_FragColor.w=sin(smoothstep(0.5,1.0,length(u.xy))*3.14); gl_FragColor.rgb*=gl_FragColor.w; if(gl_FragColor.a <= 0.0) { discard; }"),Te=N("vec2 p=u.xy; float d=1.0-length(p.xy); p+=(-q.xy+q.zw)*(1.0-length(p.xy)); gl_FragColor.rgb=mix(vec3(1.2,0.3,0.5),vec3(0.54,0.08,0.5),pow(d,0.2)); gl_FragColor.w=smoothstep(-0.5,-0.2,sin(length(p.xy)*3.14*4.0+t*2.0)); gl_FragColor.w=min(1.0,gl_FragColor.w+smoothstep(0.75,0.76,1.0-d)); gl_FragColor.w*=smoothstep(1.0,0.95,length(p.xy)); gl_FragColor.rgb*=gl_FragColor.w; if(gl_FragColor.a <= 0.0) { discard; }"),Q=Ee("uniform vec3 x; uniform vec3 m; attribute vec3 p; varying vec2 u; void main() { vec3 t; t.xy=p.x*normalize(x.yx*vec2(1,-1))*0.2; t.z=p.z*3.0; t+=x*2.0; float div=t.z*0.6+0.4; gl_Position=vec4(t.xy-m.xy*div,t.z / 100.0,div); u=p.xz; }","precision mediump float; varying vec2 u; void main() { vec4 c; float f=cos(u.x*1.57); c.rgb=vec3(0.94,0.18,0.8)*smoothstep(0.0,0.4,f); c.rgb*=1.0+smoothstep(0.4,0.7,f); c.w=0.0; gl_FragColor=c; }"),we=Ee("attribute vec4 p; varying vec4 u; void main() { gl_Position=p; u.xy=p.xy*0.5+0.5; u.y=1.0-u.y; u.zw=p.xy; }","precision mediump float; uniform sampler2D s; uniform float t; varying vec4 u; void main() { gl_FragColor=texture2D(s,u.xy); gl_FragColor.rgb+=vec3(0.8,0.5,0.9)*smoothstep(0.98,1.0,sin(u.x-u.y*3.0-t*0.34)); gl_FragColor.rgb*=gl_FragColor.a; float d=length(max(vec2(0.0),abs(u.zw)-vec2(0.8)))/0.2; d=smoothstep(0.9,1.0,d); float v=smoothstep(1.0,0.5,length(u.zw))+1.0; gl_FragColor.rgb+=mix(vec3(0.1,0.0,0.05),vec3(0.11,0.10,0.18),u.z+u.w)*v; gl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.086,0.043,0.16),d); gl_FragColor.a+=d; }"),Ge=Ee("attribute vec4 p; varying vec2 u; void main(){gl_Position=vec4(p.xy,1.0,1.0);u=p.xy;}","precision mediump float; uniform float t; uniform vec3 m; varying vec2 u; void main() { vec2 s=u*2.0+m.xy*2.0;vec4 c;c.a=1.0;vec2 p=u+m.xy; float g=0.0; c.rgb=mix(vec3(0.8,0.22,0.6),vec3(0.96,0.8,0.38),s.y*0.5+0.5); float d=length(s); if(s.y<0.0){ c.a=smoothstep(-s.y,1.0,0.5+0.5*sin(s.y*60.0+t)); } p.y+=cos(p.x)*sign(p.y)*-0.05; g=pow(abs(sin(p.x/(-abs(p.y)*0.8-0.2)*20.0)),64.0); g+=pow(abs(sin(abs(p.y)*40.0-t*2.0)),64.0); g*=smoothstep(0.0,0.4,abs(p.y)); c.a*=smoothstep(1.0,0.96,d); c.rgb=mix( mix( mix(vec3(0.54,0.08,0.5),vec3(0.08,0.04,0.16),length(s)*0.7),vec3(0.54,0.08,0.49),g ), c.rgb, c.a); c.a=1.0; c.rgb+=vec3(0.94,0.38,0.7)*pow(smoothstep(1.0-abs(s.x)*0.3,0.0,abs(s.y)),32.0); gl_FragColor=c;}"),Be=Ee("attribute vec4 p; uniform vec3 m; uniform float t; varying vec2 u; void main(){ vec2 x; float a = t/5000.0 * p.z; x.x = sin(a) * p.x + cos(a) * p.y; x.y = cos(a) * p.x - sin(a) * p.y; gl_Position=vec4(x-m.xy,1.0,1.0); u=p.xy; gl_PointSize = p.z * max(0.0,x.y) * sin(t*0.05*p.z+p.z); }","precision mediump float; void main() { gl_FragColor=vec4(0.9,0.6,0.8,0.0)*pow(1.0-length(gl_PointCoord-0.5),8.0); }"),R=Ee("attribute vec4 p; uniform vec3 m, x; uniform vec2 t; varying vec4 u; void main(){ vec3 l; float a=t.y*7.28; l.x=sin(a)*p.x+cos(a)*p.y*0.5; l.y=cos(a)*p.x-sin(a)*p.y*0.5; l.z=(p.z+0.2)*-15.0*pow(t.x,1.6); float s=sin(p.z*3.14); float d=pow(t.x,0.6)*pow(s,2.0)*7.0; l.xy*=d; l+=x*2.0; float div=l.z*0.6+0.4; gl_Position=vec4(l.xy-m.xy*div,l.z / 100.0,div); u.xy=l.xz; u.z=t.x; u.w=mod(p.z+t.x*2.3, 1.0); gl_PointSize=(0.2+s*s*s)*100.0/div; }","precision mediump float; varying vec4 u; void main() { float a=smoothstep(0.1,0.2,u.y); vec2 x=gl_PointCoord.xy*2.0-1.0; if(u.w>0.5){x.y*=3.0+u.w-0.5;} else{x.x*=2.0+u.w;} float d=max(abs(x.x),abs(x.y)); a*=smoothstep(1.0,1.0-u.z,d); gl_FragColor.rgb=mix(vec3(0.96,0.8,0.38),vec3(0.54,0.08,0.49),smoothstep(0.4,0.6,u.w))*a; gl_FragColor.w=a; }"),c=function(e){var t;return t=q.createBuffer(),q.bindBuffer(q.ARRAY_BUFFER,t),q.bufferData(q.ARRAY_BUFFER,F(e),q.STATIC_DRAW),t.count=e.length/3,t},qe=c([-1,1,1,1,1,1,-1,-1,1,1,1,1,1,-1,1,-1,-1,1]),ze=c([-1,1,0,1,1,0,-1,-1,0,1,1,0,1,-1,0,-1,-1,0]),K=c([-1,0,0,1,0,0,-1,0,1,1,0,0,1,0,1,-1,0,1]),Ie=[],O=j=0;j<800;O=++j)e=random()*PI*2,v=pow(.24+1.8*random(),.5),Ie.push(cos(e)*v),Ie.push(sin(e)*v),Ie.push(2+10*random());for(Ie=c(Ie),A=[],O=te=0;te<100;O=++te)e=random()*PI*2,v=pow(.1+.9*random(),.5),A.push(cos(e)*v),A.push(sin(e)*v),A.push(random());for(A=c(A),Oe=0,ye=0,xe=1,be=.8,l=[0,0,0],w=function(e,t,r,n,o,a){var i;return q.bindBuffer(q.ARRAY_BUFFER,e),q.enableVertexAttribArray(0),q.vertexAttribPointer(0,3,q.FLOAT,!1,0,0),q.useProgram(t),i=q.getUniformLocation(t,"m"),q.uniform3fv(i,l),i=q.getUniformLocation(t,"t"),q.uniform1f(i,Oe),i=q.getUniformLocation(t,"x"),q.uniform3f(i,r,n,o),i=q.getUniformLocation(t,"s"),q.uniform1i(i,0),q.enable(q.BLEND),q.blendFunc(q.ONE,q.ONE_MINUS_SRC_ALPHA),a?q.drawArrays(q.POINTS,0,e.count):q.drawArrays(q.TRIANGLES,0,e.count)},E=function(e,t,r,n,o,a,i){var c;return q.bindBuffer(q.ARRAY_BUFFER,e),q.enableVertexAttribArray(0),q.vertexAttribPointer(0,3,q.FLOAT,!1,0,0),q.useProgram(t),c=q.getUniformLocation(t,"m"),q.uniform3fv(c,l),c=q.getUniformLocation(t,"t"),q.uniform2f(c,a,i),c=q.getUniformLocation(t,"x"),q.uniform3f(c,r,n,o),q.enable(q.BLEND),q.blendFunc(q.ONE,q.ONE_MINUS_SRC_ALPHA),q.drawArrays(q.POINTS,0,e.count)},s={up:!1,down:!1,left:!1,right:!1,fire:!1},i={fire:!1},je=!1,oe=!0,/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)&&(oe=!1),Y=function(e,t){switch(e.keyCode){case 38:return s.up=t;case 40:return s.down=t;case 37:return s.left=t;case 39:return s.right=t;case 32:return t&&!s.fire&&(i.fire=!0),s.fire=t;case 77:if(t)return oe=!oe;break;case 80:if(t)return je=!je}},document.onkeydown=function(e){return Y(e,!0)},document.onkeyup=function(e){return Y(e,!1)},(Ve=document.createElement("canvas")).width=Ve.height=Qe,Xe=Ve.getContext("2d"),We=q.createTexture(),q.activeTexture(q.TEXTURE0),q.bindTexture(q.TEXTURE_2D,We),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.NEAREST),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.NEAREST),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE),q.texImage2D(q.TEXTURE_2D,0,q.RGBA,q.RGBA,q.UNSIGNED_BYTE,Ve),Ye=floor(Qe/11),He=Xe.createLinearGradient(0,5,0,Ye),V=Xe.createLinearGradient(0,5,0,Ye),ae=0,Z=(Ce=[["#000853",.1],["#4a50b9",.3],["#cae2fa",.53],["#120d13",.55],["#241128",.6],["#612958",.75],["#ac28be",.85],["#cea8d4",1]]).length;ae<Z;ae++)Ue=Ce[ae],He.addColorStop(Ue[1],Ue[0]);for(me=0,$=(Re=[["#18161c",1],["#424281",.5],["#a2b2d6",0]]).length;me<$;me++)Ue=Re[me],V.addColorStop(Ue[1],Ue[0]);S=0,u=function(){var e,t;for(t=[],O=e=0;e<=20;O=++e)t.push({on:!1,x:0,y:0,z:0});return t}(),_e=function(e,t,r,n){return Xe.save(),Xe.translate(e,t),Xe.scale(1.1,.85),Xe.globalAlpha=r,Xe.textAlign="center",Xe.font=Ye+"px futura, 'Bauhaus 93', 'Trebuchet MS', Arial, sans-serif",Xe.textBaseline="top",Xe.strokeStyle="#a40690",Xe.lineWidth=floor(Ye/4),Xe.strokeText(n,0,0),Xe.strokeStyle=V,Xe.lineWidth=floor(Ye/8),Xe.strokeText(n,0,0),Xe.fillStyle=He,Xe.fillText(n,0,0),Xe.restore()},B=function(e,r){var n,o,a,i,c,u,s;for(n=e*t.sampleRate,i=(a=t.createBuffer(2,n,t.sampleRate)).getChannelData(0),c=a.getChannelData(1),O=u=0,s=n;0<=s?u<s:u>s;O=0<=s?++u:--u)i[O]=(2*random()-1)*pow(1-O/n,r),c[O]=(2*random()-1)*pow(1-O/n,r);return(o=t.createConvolver()).buffer=a,o},t=new(window.AudioContext||window.webkitAudioContext),(re=t.createGain()).connect(t.destination),re.gain.value=1,(d=t.createDynamicsCompressor()).threshold.value=-50,d.knee.value=20,d.ratio.value=12,d.reduction.value=-20,d.attack.value=.2,d.release.value=.9,d.connect(re),(L=t.createGain()).connect(d),L.gain.value=.06,(Se=t.createGain()).connect(d),Se.gain.value=.04,(Pe=B(6,40)).connect(Se),p=function(e,r,n,o){var a,i,c;return(c={}).gain=t.createGain(),c.gain.connect(Pe),c.gain.connect(L),c.gain.gain.value=0,c.osc=i=t.createOscillator(),i.type=e,i.frequency.value=500,i.detune=10*random(),i.start(t.currentTime+.01),i.connect(c.gain),c.lfogain=t.createGain(),c.lfogain.connect(i.frequency),c.lfogain.gain.value=n,c.lfo=a=t.createOscillator(),a.frequency.value=o,a.type=r,a.start(t.currentTime+.01),a.connect(c.lfogain),c},$e=function(){var e,r,n,o,a,i;for(e=2*t.sampleRate,o=(n=t.createBuffer(1,e,t.sampleRate)).getChannelData(0),O=a=0,i=e;0<=i?a<i:a>i;O=0<=i?++a:--a)o[O]=2*random()-1;return(r=t.createBufferSource()).buffer=n,r.loop=!0,r.start(),r},tt=p("sawtooth","triangle",10,5),z=p("sawtooth","triangle",100,80),Ze=function(){var e,t;for(t=[],O=e=0;e<=3;O=++e)(Je=p("sawtooth","triangle",O+2,2)).gcurve=F([.01,.1,.07,.05]),t.push(Je);return t}(),(W=p("sine","triangle",100,100)).fcurve=F([100,40,100,30,7]),W.gcurve=F([0,1,.1,.03,.02,.02,0]),(De=p("triangle","triangle",100,20)).fcurve=F([300,100,40,20,10,7]),De.gcurve=F([0,.5,.1,.03,.01,0]),(h=p("sine","sine",0,0)).fcurve=F([1]),h.gcurve=F([0,.3,.2,.1,.1,0,0,0,0,0]),h.noise=$e(),h.noise.connect(h.gain),ve=p("triangle","sawtooth",100,30),pe=F([1200,500,150,100,50]),he=F([.2,.1,.05,.02,1e-4]),(C=p("sawtooth","square",100,15)).fcurve=F([1e3,400,150,100,50,30]),C.gcurve=F([0,.55,.1,.03,.03,.03,.03,.01,0]),le=1e3,n=[],ge={a:440,"a#":466.16,b:493.88,c:523.25,"c#":554.37,d:587.33,"d#":622.25,e:659.25,f:698.46,"f#":739.99,g:783.99,"g#":830.61,".":null},se=["c","d","e","f","g","a","b"],M=["8675309, what are you doing there? That isn't your interface!","Hmm... there must have been an authorization GLITCH during the intrusion","Never mind, we've had a firewall breach and you're the only one in there","I need you to find the malicious software and neutralize it","This is not an optional job. I'm firing up calibration protocol 9"],o=[1,1,3,2,1,1,3,2,1,1,3,2,1,3,3,3],ce=0,ue=0,a=14,Me=[],D=(I={pressStart:0,intro:1,freePlay:2,tutorial:3}).pressStart,ie=!0,Ne={},Le=function(e){return ie=2,D=e,Ne={}},T=0,x=0,b=document.getElementById("c"),y=null,Fe=function(e){return y=e,T=0,x=0},ke=function(){var e;if(null!=y){if(null==(e=y[T]))return b.innerHTML="",!0;x<e.length?(x+=1,s.fire&&(x+=2),b.innerHTML=e.slice(0,+x+1||9e9)+"<span class='f'>█</span>"):i.fire&&(T+=1,x=0)}return!1},ne=function(){var e;return e=.05,s.right&&(ye+=e),s.left&&(ye-=e),s.up&&(xe+=e),s.down&&(xe-=e),ye=et(ye),xe=et(xe)},P=20,k=function(){var e,r,n;if(S>0&&(S-=1),s.fire&&S<=0){for(n=[],r=0,e=u.length;r<e;r++)if(!(O=u[r]).on){O.on=!0,O.x=ye,O.y=xe,O.z=be+.2,S=P;try{ve.osc.frequency.cancelScheduledValues(t.currentTime),ve.osc.frequency.setValueCurveAtTime(pe,t.currentTime,.5),ve.gain.gain.cancelScheduledValues(t.currentTime),ve.gain.gain.setValueCurveAtTime(he,t.currentTime,.5)}catch(e){}break}return n}},Ke=function(){var e,n,o,a,i,c,s,l,g;for(s=0,i=Me.length;s<i;s++)for(null==(g=Me[s]).time&&(g.time=0),g.time+=.016,null!=g.tick&&g.tick.call(g),n=g.px-g.x,o=g.py-g.y,a=g.pz-g.z,g.x+=.1*n,g.y+=.1*o,g.z+=.1*a,w(ze,r,g.x,g.y,g.z),l=0,c=u.length;l<c;l++)if(n=(e=u[l]).x-g.x,o=e.y-g.y,a=g.z-e.z,abs(n)<.25&&abs(o)<.25&&a>0&&a<=3){g.dead=!0,fe(g.x,g.y,g.z,.7,R),null!=g.die&&g.die.call(g);try{C.osc.frequency.cancelScheduledValues(t.currentTime),C.osc.frequency.setValueCurveAtTime(C.fcurve,t.currentTime,3),C.gain.gain.cancelScheduledValues(t.currentTime),C.gain.gain.setValueCurveAtTime(C.gcurve,t.currentTime,3)}catch(e){}break}return Me=function(){var e,t,r;for(t=[],r=0,e=Me.length;r<e;r++)(g=Me[r]).dead||t.push(g);return t}()},_=function(){var e,t;for(q.depthMask(!1),t=0,e=u.length;t<e;t++)(O=u[t]).on&&(O.z>10?O.on=!1:w(K,Q,O.x,O.y,O.z),O.z+=1);return q.depthMask(!0),w(ze,r,ye,xe,be)},de=[],fe=function(e,t,r,n,o){return de.push({duration:n,age:0,program:o,x:e,y:t,z:r,seed:random()})},(U=function(){var c,u,g,m,d,f,p,v,y,x,b,T,N,F,C,z,R,S,L,X,B,V,G,Q,Y,j;if(je)return re.gain.value=0,requestAnimationFrame(U);if(re.gain.value=oe?0:1,Oe+=.16,le>=o.length*a?(n=[["f","a","c","."],["d","c",".","e"],["d","c","e","d","c","e","d","c","e"],["a","g",".","f"],["g","e","c","b","d","e"],["d","c","e","a","c","a","d","c","e"],["d","c","g","a","g","a","d","g","e"]].random().shuffle(),le=0,ue=0,ce=0):le+=1,le===ce)if(ue+=1,ce+=a+round(random())*a,"."===(z=n[ue]))for(X=0,T=Ze.length;X<T;X++){O=Ze[X];try{O.gain.gain.linearRampToValueAtTime(.001,t.currentTime+.01,.1)}catch(e){}}else if(null!=z)for(Q=[],O=B=0;B<4;O=++B){if(b=Ze[O],C=ge[z],Q.push(z),null!=C){R=[4===n.length?.5:1,.25,.125,.0625][O];try{b.gain.gain.setValueCurveAtTime(b.gcurve,t.currentTime+.01,.1),b.osc.frequency.linearRampToValueAtTime(C*R,t.currentTime+.05)}catch(e){}}z=se.nextLooped(z[0],2*round(random()))}if(le%a==0&&(Y=floor(le/a),y=[null,W,De,h][o[Y%o.length]]))try{y.osc.frequency.setValueCurveAtTime(y.fcurve,t.currentTime+.01,.2),y.gain.gain.setValueCurveAtTime(y.gcurve,t.currentTime+.01,.2)}catch(e){}switch(l=[ye/3,xe/2,0],q.viewport(0,0,Qe,Qe),q.clearColor(.08,.04,.16,1),q.depthFunc(q.LEQUAL),q.disable(q.CULL_FACE),q.clear(q.COLOR_BUFFER_BIT|q.DEPTH_BUFFER_BIT),q.disable(q.DEPTH_TEST),w(qe,Ge,0,0,0),w(Ie,Be,0,0,0,!0),q.enable(q.DEPTH_TEST),Xe.clearRect(0,0,Qe,Qe),D){case I.pressStart:for(ie&&(Oe=0),ye=ee(ye,-.1,.1),xe=ee(xe,.6,.1),_e(Qe/2,Qe-2.2*Ye,min(1,2*pow(abs(sin(.32*Oe)),4)),"PRESS SPACE"),_e(Qe/2+20*sin(.06*Oe),.16*Qe+10*sin(.12*Oe),1,"NEON"),_e(Qe/2+20*sin(.06*Oe+.7),.16*Qe+.8*Ye+10*sin(.12*Oe+.5),1,"RUNNER '84"),i.fire&&Le(I.intro),O=j=0;j<=12;O=++j)w(ze,r,0+sin(.1*Oe+O),-1+abs(sin(.1*Oe+.5*O)),12.4-O),w(ze,r,0-sin(.1*Oe+O),-1,12.4-O);w(ze,r,0,.7,.4);break;case I.intro:ie&&Fe(M),ke()&&Le(I.tutorial),ye=ee(ye,0,.1),xe=ee(xe,-.3,.1);break;case I.tutorial:switch(ie&&(Ne.step=0,Ne.count=0,Ne.time=0,Fe(["use arrow keys"])),v=ke(),Ne.time+=1,Ne.step){case 0:v&&Ne.time>200&&(Ne.time=0,Fe(["use the damned arrow keys"])),(s.up||s.down||s.left||s.right)&&(Ne.count+=1,Ne.time=0,Ne.count>120&&(Ne.step=1,Ne.time=0,Fe(["very good"])));break;case 1:Ne.time>100&&(Fe(["now test bandwidth by moving to all extents"]),Ne.step=2,Ne.time=0,Ne.count=0);break;case 2:for(Ne.time>400&&(Fe(["move your avatar into the corners, 8675309"]),Ne.time=0),x=c=0,N=(V=[[-1,-1],[1,-1],[-1,1],[1,1]]).length;c<N;x=++c)p=V[x],abs(ye-p[0])+abs(xe-p[1])<.2&&(Ne.count|=1<<x,Ne.time=0);15===Ne.count&&(Fe(["hmm, a little tight. You'll manage"]),Ne.step=3,Ne.time=0,Ne.count=0);break;case 3:(v||Ne.time>300)&&(Fe(["now test your data stream with the spacebar"]),Ne.step=4,Ne.time=0);break;case 4:Ne.time>200&&(Fe(["hold the spacebar, genius"]),Ne.time=0),s.fire&&(Ne.count+=1,Ne.time=0,Ne.count>200&&(Fe(["you're kidding, right? You'll need to upgrade that if you're going to stand a chance","sigh","I'm going to inject some benign nodes. Synchronize with them"]),Ne.step=5));break;case 5:v&&(Me.push({x:-30,y:-10,z:30,px:0,py:.5,pz:4}),Ne.step=6);break;case 6:0===Me.length&&(Fe(["good. Keep going"]),Ne.step=7,Ne.count=0);break;case 7:if(0===Me.length)if(Ne.count>5)Fe(["fine, good enough","I'm plotting a course to a server that has the upgrades you'll need","synchronize with the jump port to engage"]),Ne.step=8;else for(Ne.count+=1,O=u=0,G=Ne.count;0<=G?u<G:u>G;O=0<=G?++u:--u)Me.push({x:-30,y:-10,z:30,px:2*random()-1,py:2*random()-1,pz:4});break;case 8:Le(I.freePlay)}ne(),Ne.step>=4&&k(),Ke(),_();break;case I.freePlay:if(ie&&(Ne.score=0,Ne.time=300,Ne.wave=0),v=ke(),Ne.time+=1,Ne.time>=300&&(Fe(["jam end, freeplay mode"]),Ne.time=0),0===Me.length)switch(Ne.wave+=1,!1){case!(Ne.wave<5):Me.push({x:-30,y:-10,z:30,px:0,py:.5,pz:4,die:function(){return Ne.score+=5}});break;case!(Ne.wave<15):for(O=g=0;g<3;O=++g)Me.push({x:-30,y:-10,z:30,px:0,py:0,pz:4,d:.3+.7*random(),a:3.14*random(),s:.5+2*random(),die:function(){return Ne.score+=10},tick:function(){return e=this.time*this.s+this.a,this.px=(sin(e)+cos(e))*this.d,this.py=(cos(e)-sin(e))*this.d}});break;case!(Ne.wave<25):for(P=10,O=m=0;m<3;O=++m)Me.push({x:-30,y:-10,z:30,px:0,py:0,pz:4,d:.3+.7*random(),a:3.14*random(),s:.5+2*random(),die:function(){return Ne.score+=10},tick:function(){return e=this.time*this.s+this.a,this.px=(sin(e)+cos(e))*this.d,this.py=sin(e)}});break;default:for(P=5,O=d=0;d<5;O=++d)Me.push({x:-30,y:-10,z:30,px:0,py:0,pz:4,d:.7+.3*random(),a:3.14*random(),s:1+3*random()*sign(random()-.5),q:random(),r:2*random()-1,h:random(),i:random(),die:function(){return Ne.score+=10},tick:function(){return e=this.time*this.s+this.a,this.px=(sin(e)*this.q+cos(e))*this.d,e*=this.h,this.py=(cos(e)-sin(e))*this.d*this.i,this.py=et(this.py+this.r)}})}ne(),k(),Ke(),_(),_e(Qe/2,.02*Qe,1,""+Ne.score)}for(q.depthMask(!1),f=0,F=de.length;f<F;f++)(L=de[f]).age+=.016,L.age>=L.duration?L.done=!0:E(A,L.program,L.x,L.y,L.z,L.age/L.duration,L.seed);for(H in de=function(){var e,t,r;for(r=[],e=0,t=de.length;e<t;e++)(S=de[e]).done||r.push(S);return r}(),q.depthMask(!0),q.disable(q.DEPTH_TEST),q.activeTexture(q.TEXTURE0),q.bindTexture(q.TEXTURE_2D,We),q.texImage2D(q.TEXTURE_2D,0,q.RGBA,q.RGBA,q.UNSIGNED_BYTE,Ve),w(qe,we),ie>0&&(ie-=1),i)i[H]=!1;return requestAnimationFrame(U)})()</script>