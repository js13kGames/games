<!doctype html><title>Roni and Kira - js13kGames 2025</title><meta name=viewport content="width=device-width,maximum-scale=1,user-scalable=no"><meta name=theme-color content=#503c6f><link rel=manifest href=m.json><link rel=icon type=image/png href=icon.png><style rel=stylesheet>*{margin:0;padding:0;--sg:13px;--g:conic-gradient(at 90% 40%,#0000 75%,var(--c1) 0)}body,html{overflow:hidden;overscroll-behavior:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-touch-callout:none;align-items:center;background:#503c6f;color:#fff;display:flex;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;height:100%;justify-content:center;position:fixed;-webkit-user-select:none;user-select:none;width:100%}.bri{--c1:#9a7bed;--c2:#5f4a95;background:var(--g),var(--g) var(--sg) var(--sg) var(--c2);background-size:calc(var(--sg)*2) calc(var(--sg)*2)}.df{display:flex}.jc{justify-content:center}.jcs{justify-content:space-around}.ai{align-items:center}.wi{width:100%}.he{height:100%}app-router{height:var(--bh);position:relative;width:var(--bw)}.cat{cursor:pointer;height:var(--si,70px);position:absolute;width:var(--si,70px);-webkit-tap-highlight-color:transparent;border:none;box-shadow:0 2px 4px #0006,0 7px 13px -3px #0000004d,inset 0 -3px #0003;--b-cat:#000;--o-cat:#f6ba00;--ey-cat:#ffff91;--p-cat:#ffa4e1;--w-cat:#fff;--y-cat:#ffe901;--left-eye:linear-gradient(var(--b-cat),var(--b-cat));--right-eye:linear-gradient(var(--b-cat),var(--b-cat));--eye-size:10% 25%;--eyelid-size:37% 0;--left-eye-position:15% 67%;--right-eye-position:85% 67%;--left-eyelid-position:0px 67%;--right-eyelid-position:100% 67%;--cat-face:linear-gradient(var(--o-cat),var(--o-cat)),linear-gradient(var(--o-cat),var(--o-cat)),linear-gradient(var(--y-cat),var(--y-cat)),var(--left-eye),linear-gradient(var(--ey-cat),var(--ey-cat)),var(--right-eye),linear-gradient(var(--ey-cat),var(--ey-cat)),linear-gradient(var(--p-cat),var(--p-cat)),linear-gradient(var(--w-cat),var(--w-cat));--cat-size:25% 25%,25% 25%,25% 25%,var(--eye-size),var(--eyelid-size),var(--eye-size),var(--eyelid-size),25% 17%,100% 50%;--cat-position:15% 15%,85% 15%,50% 55%,var(--left-eye-position),var(--left-eyelid-position),var(--right-eye-position),var(--right-eyelid-position),center 71%,0 100%;background-color:var(--y-cat);background-image:var(--cat-face);background-position:var(--cat-position);background-repeat:no-repeat;background-size:var(--cat-size)}.cat-black{--y-cat:#353333;--o-cat:#000}.button{background:#246ff9;border:5px solid #000101;box-shadow:0 2px 4px #0006,0 7px 13px -3px #0000004d,inset 0 -3px #0003;color:#fff;cursor:pointer;font-size:35px;font-weight:700;padding:20px 30px;text-shadow:1px 5px 1px #00000063}.pag{--sg:25px}.pag,.pag-c{flex-direction:column}.pag-c{background:#503c6f;box-shadow:inset -12px 9px 3.2px #00000026;height:calc(var(--bh) - 100px);width:calc(var(--bw) - 100px)}app-level-select,app-lobby{display:flex;height:100%;width:100%}.gg{--sg:calc(var(--si)/2);animation:scaleAndRotate .6s ease-out forwards;border:5px solid #000;position:relative}.tile{height:var(--si);pointer-events:none;position:absolute;width:var(--si)}.tile-0{--sg:calc(var(--si)/2);--c1:#c098ff;--c2:#9177e7;box-shadow:-12px 11px 5px #0006}.tile-1:after,.tile-1:before,.tile-3:after,.tile-3:before{animation:spin 3s linear infinite;background:#000;content:"";height:70%;left:15%;position:absolute;top:15%;width:70%}.tile-1:after,.tile-3:after{background:#f5c101;background-image:linear-gradient(#feec01,#feec01),linear-gradient(#fefeaa,#fefeaa),linear-gradient(#fefeaa,#fefeaa),linear-gradient(#feec01,#feec01),linear-gradient(#feec01,#feec01);background-position:0 0,25% 0,100% 0,0 75%,75% 100%;background-repeat:no-repeat;background-size:25% 75%,100% 25%,25% 100%,50% 25%,75% 25%;height:50%;left:25%;top:25%;width:50%}.tile-1:before,.tile-3:before{box-shadow:-12px 11px 5px #00000087}.tile-2{background-image:linear-gradient(#121125,#121125),linear-gradient(#aba9cf,#aba9cf),linear-gradient(#121125,#121125),linear-gradient(#aba9cf,#aba9cf),linear-gradient(#121125,#121125),linear-gradient(#aba9cf,#aba9cf),linear-gradient(#121125,#121125),linear-gradient(#aba9cf,#aba9cf);background-position:10% 10%,10% 20%,85% 10%,85% 20%,10% 80%,10% 90%,85% 80%,85% 90%;background-repeat:no-repeat;background-size:20% 10%}.tile-1.coin,.tile-3.coin{animation:coinPickup .5s ease-out forwards;animation-delay:var(--s,0)}.tile-3{filter:hue-rotate(145deg)}.tile-4{background:#242026;background-image:linear-gradient(#fffdff,#fffdff),linear-gradient(#242026,#242026),linear-gradient(#242026,#242026),linear-gradient(#242026,#242026),linear-gradient(#242026,#242026),linear-gradient(#009dff,#009dff),linear-gradient(#00cefb,#00cefb),linear-gradient(#0076ed,#0076ed),linear-gradient(#049dff,#049dff);background-position:85% 15%,50% 25%,50% 70%,32% 45%,68% 45%,24% 20%,78% 20%,24% 73%,78% 73%;background-repeat:no-repeat;background-size:15% 15%,40% 13%,40% 13%,13% 50%,13% 50%,35% 35%,35% 35%,35% 35%,35% 35%;box-shadow:-12px 11px 5px #0006}.tile-4.open{filter:hue-rotate(280deg)}.tile-5:after,.tile-5:before{background-color:#fee4c9;background-image:linear-gradient(#fec2b1,#fec2b1);background-position:0 100%;background-repeat:no-repeat;background-size:60% 60%;box-shadow:0 2px 4px #0006,0 7px 13px -3px #0000004d,inset 0 -3px #0003;content:"";height:80%;left:10%;position:absolute;top:10%;width:80%}.tile-5:after{background-color:#eaa0a2;background-image:linear-gradient(#b9687b,#b9687b),linear-gradient(#b9687b,#b9687b),linear-gradient(#b9687b,#b9687b);background-position:0 0,100% 0,100% 100%;background-size:25% 25%;box-shadow:none;height:55%;left:20%;top:20%;width:60%}.gg.normal .cat{--pos:translate(var(--x),var(--y));transform:var(--pos)}.gg.firefox .cat{left:var(--x);top:var(--y)}.gg.normal .cat.ani{transition:transform var(--s,.1s) ease-in-out}.gg.firefox .cat.ani{transition:left var(--s,.1s) ease-in-out,top var(--s,.1s) ease-in-out}.cat.explode,.tile-5.explode{animation:explode .3s forwards}@keyframes spin{0%{transform:rotateY(0)}to{transform:rotateY(1turn)}}@keyframes coinPickup{0%{opacity:1;scale:1;transform:translateY(0)}50%{opacity:.7;scale:1.1;transform:translateY(-20px)}to{opacity:0;scale:.8;transform:translateY(-50px)}}@keyframes explode{0%{filter:blur(0);opacity:1;transform:var(--pos,translate(0,0)) scale(1)}40%{filter:blur(4px);opacity:.9;transform:var(--pos,translate(0,0)) scale(1.3)}70%{filter:blur(8px);opacity:.5;transform:var(--pos,translate(0,0)) scale(.7)}to{filter:blur(15px);opacity:0;transform:var(--pos,translate(0,0)) scale(1.5)}}@keyframes scaleAndRotate{0%{opacity:0;transform:scale(1.2) rotate(10deg)}to{opacity:1;transform:scale(1) rotate(0)}}modal{left:0;position:absolute;top:0;z-index:100}modal.hide{pointer-events:none;transition:visibility .1s;visibility:hidden}modal.show{visibility:visible}.ms,.mw{left:0;position:absolute;top:0}.ms{background:#00000080}.mw{z-index:1}.mc{background:#fff;border-radius:5px;overflow:hidden;width:80%}.mc .txt{color:#8f9cb5;flex-direction:column;padding:20px}.mb button{background:#fc7169;border:none;color:#fff;cursor:pointer;font-weight:700;height:50px;text-transform:uppercase;width:100%}.mb button:nth-child(2){background:#b6bece}modal.show .mc{animation:fD .4s both}modal.hide .mc{animation:fUp .4s both}@keyframes fD{0%{opacity:0;transform:translate3d(0,-100%,0)}to{opacity:1;transform:translateZ(0)}}@keyframes fUp{0%{opacity:1}to{opacity:0;transform:translate3d(0,-100%,0)}}.btg{font-size:12px;left:20px;padding:10px;position:absolute;text-shadow:none;top:20px}#btn-restart{left:unset;right:20px}.p-le{background:#fff;border-radius:10px;box-shadow:0 2px 4px #0006,0 7px 13px -3px #0000004d,inset 0 -3px #0003;color:#000;font-size:13px;font-weight:700;padding:7px;position:absolute;text-align:center;top:27px;width:80px}.pag-s{align-content:flex-end;flex-flow:wrap;gap:10px;margin-top:60px;row-gap:15px}.pag-s .button{font-size:20px;height:20px;padding:20px;text-shadow:none;width:20px}.pag-s .button:disabled{opacity:.5}.pag-s .button.active{background:#ff5722}.lob-c .cat{position:relative}.lob-c h1{font-weight:700;line-height:50px;margin:30px 0;padding-top:20px;text-shadow:1px 6px 4px #000}.lob-c h1 span{display:block}.lob-c h1 span:first-child,.lob-c h1 span:last-child{font-size:60px}.lob-c h1,.lob-c p{text-align:center}.lob-c p{font-size:14px;font-weight:700;margin-top:10px;padding:20px}.lob-c .lob-l{font-size:12px;font-weight:700;margin-bottom:20px}.lob-c a,.lob-c a:visited{color:#fff}</style><body><script>var t=Object.defineProperty,e=(e,s,i)=>((e,s,i)=>s in e?t(e,s,{enumerable:1,configurable:1,writable:1,value:i}):e[s]=i)(e,"symbol"!=typeof s?s+"":s,i);!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)}).observe(document,{childList:1,subtree:1})}function e(t){if(t.t)return;t.t=1;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const s="grid-action",i="level",n="navigate",o="level",l="sounds",a="selected",r="lobby",c="level-select",h="game",d="app-router",u="app-game",p="grid-game",v="app-level-select",f="app-lobby",m="click";var b=(t=>(t.i="BLACK",t.o="YELLOW",t))(b||{}),y=(t=>(t[t.l=0]="BRICK",t[t.h=1]="COIN",t[t.u=2]="SPIKE",t[t.p=3]="KEYS",t[t.v=4]="GATES",t[t.m=5]="BOXES",t))(y||{}),g=(t=>(t[t.CLICK=0]="CLICK",t[t.$=1]="SWIPE",t[t.h=2]="COIN",t[t.k=3]="EXPLODE",t[t.L=4]="KEY",t[t.OPEN=5]="OPEN",t[t.C=6]="DESTROY",t[t.S=7]="SUCESS",t[t.O=8]="GAME_OVER",t))(g||{});const x=[{x:0,y:-1},{x:0,y:1},{x:-1,y:0},{x:1,y:0}],w=document.querySelector.bind(document),$=document.querySelectorAll.bind(document),E=(t,e="")=>t.querySelector(e),L=(t,e,s,i)=>t?.addEventListener(e,s,i),C=(t,e)=>{t&&(t.innerHTML=e)},k=(t,e="")=>{t&&e.split(" ").forEach(e=>{t.classList.add(e)})},M=(t,e="")=>{t&&e.split(" ").forEach(e=>t.classList.remove(e))},P=(t,e="")=>t.classList.contains(e),S=(t,e="",s="")=>t.style.setProperty(`--${e}`,s),j=(t,e)=>{if(t)for(const s in e)t.style[s]=e[s]},O=t=>new Promise(e=>setTimeout(e,t)),N="RONI_KIRA_JS13K",A=()=>{const t=localStorage.getItem(N)||"";return""!==t&&((t="")=>{try{return JSON.parse(t),1}catch(t){return 0}})(t)?JSON.parse(t):{}},T=(t,e)=>{const s=A();s[t]=e,(t=>{const e=JSON.stringify(t);localStorage.setItem(N,e)})(s)},H=(t="",e)=>A()[t]??e;let I,K,R;K=.3,I=(t=1,e=.05,s=220,i=0,n=0,o=.1,l=0,a=1,r=0,c=0,h=0,d=0,u=0,p=0,v=0,f=0,m=0,b=1,y=0,g=0,x=Math,w=44100,$=2*x.PI,E=(r*=500*$/w/w),L=(s*=(1-e+2*e*x.random(e=[]))*$/w),C=0,k=0,M=0,P=1,S=0,j=0,O=0,N,A)=>{for(c*=500*$/w**3,v*=$/w,h*=$/w,d*=w,u=w*u|0,A=(i=w*i+9)+(y*=w)+(n*=w)+(o*=w)+(m*=w)|0;M<A;e[M++]=O)++j%(100*f|0)||(O=l?1<l?2<l?3<l?x.sin((C%$)**3):x.max(x.min(x.tan(C),1),-1):1-(2*C/$%2+2)%2:1-4*x.abs(x.round(C/$)-C/$):x.sin(C),O=(u?1-g+g*x.sin($*M/u):1)*(0<O?1:-1)*x.abs(O)**a*.3*t*(M<i?M/i:M<i+y?1-(M-i)/y*(1-b):M<i+y+n?b:M<A-m?(A-M-m)/o*b:0),O=m?O/2+(m>M?0:(M<A-m?1:(A-M)/m)*e[M-m|0]/2):O),C+=(N=(s+=r+=c)*x.cos(v*k++))-N*p*(1-1e9*(x.sin(M)+1)%2),P&&++P>d&&(s+=h,L+=h,P=0),!u||++S%u||(s=L,r=E,P||(P=1));return(t=R.createBuffer(1,A,w)).getChannelData(0).set(e),(s=R.createBufferSource()).buffer=t,s.connect(R.destination),s.start(),s},R=new AudioContext;let z=H(l,1);const B=[[,,537,.02,.02,.22,1,1.59,-6.98,4.97],[,,150,.05,,.05,,1.3,,,,,,3],[,,1675,,.06,.24,1,1.82,,,837,.06],[,,448,.01,.1,.3,3,.39,-.5,,,,,,.2,.1,.08],[,,539,0,.04,.29,1,1.92,,,567,.02,.02,,,,.04],[,,20,.04,,.6,,1.31,,,-990,.06,.17,,,.04,.07],[,,418,0,.02,.2,4,1.15,-8.5,,,,,.7,,.1],[,,80,.3,.4,.7,2,.1,-.73,3.42,-430,.09,.17,,,,.19],[,,925,.04,.3,.6,1,.3,,6.27,-184,.09,.17]],J=t=>{z&&I(...B[t])},Y=()=>"Sound: "+(z?"ON":"OFF"),D=["7,7#2,2;4,2#1,2,4;1,4,4","7,7#2,4;4,5#1,5,2;1,3,4","8,7#6,4;5,5#0,3,4;0,5,4;0,3,5;1,5,2;1,2,3","8,7#2,2;5,2#1,4,3;1,3,4","8,7#6,5;4,5#0,2,3;0,3,3;1,3,2;1,6,3","8,7#6,5;2,5#0,1,1;0,4,3;1,4,2;1,3,3","8,7#4,3;4,5#1,3,2;1,5,3;1,2,4","8,7#3,4;1,5#0,5,4;1,2,2;1,4,3;1,6,3","8,7#3,5;5,5#0,1,1;0,1,4;0,1,5;0,3,3;1,3,2;1,1,3;1,6,4","8,7#3,4;5,2#0,1,1;0,2,1;0,3,1;0,5,1;0,5,5;1,4,1;1,3,3;1,2,4","8,7#2,2;5,2#0,2,3;1,3,4;1,5,4;2,4,3;2,4,4","8,7#2,1;5,5#0,2,2;0,5,3;1,3,1;1,3,4;2,4,1","8,7#1,5;4,5#0,5,2;0,2,4;1,2,2;1,3,4;2,4,2","8,7#4,2;3,5#0,2,3;0,3,3;0,4,3;0,4,5;1,3,2;1,5,2;2,1,1;2,6,1","8,7#5,2;2,5#0,1,1;0,1,2,0,1,3;0,5,3;1,3,2;1,4,3;2,4,2;2,3,4","8,8#2,5;6,2#0,3,2;0,4,6;1,2,3;1,5,5;2,3,1;2,5,3;2,5,4","8,8#3,2;6,3#0,4,1;0,3,4;1,4,2;1,3,3;1,5,5;2,1,3;2,2,3;2,3,5","8,8#3,4;6,2#0,2,1;1,2,3;1,4,2;1,5,5;2,2,2;2,5,3","8,8#2,1;2,4#0,5,1;0,5,3;0,4,5;0,4,6;0,5,6;0,6,6;1,2,2;1,3,3;1,2,5;2,2,3;2,2,6","8,8#3,5;4,2#0,5,1;0,6,1;0,6,2;0,1,3;0,6,5;1,1,2;1,4,3;1,5,5;2,2,2;2,4,6","8,7#4,4;2,3#0,4,1;0,4,2;0,6,2;1,6,1;3,2,2;4,5,2","8,7#5,5;1,5#0,1,1;0,5,1;0,1,4;0,3,4;0,3,5;1,5,2;1,5,4;3,2,1;4,2,4","8,7#2,2;4,5#0,6,2;1,3,2;1,5,4;3,1,3;4,5,2","8,7#1,1;2,4#0,4,1;0,1,3;0,4,3;0,6,3;0,6,4;1,1,2;1,6,2;2,4,2;3,4,4;4,5,3","8,7#5,5;6,5#0,5,1;0,4,3;0,5,3;0,6,3;1,6,1;1,2,2;2,3,1;2,5,4;3,2,1;3,3,4;4,5,2","8,8#2,3;3,6#0,1,1;0,2,1;0,3,3;1,1,4;1,4,4;2,3,4;2,1,5;3,5,3;3,1,6;4,1,3;4,4,3","8,8#2,3;4,6#0,5,2;0,6,2;0,1,3;0,5,4;1,3,4;1,6,6;2,1,1;2,3,3;2,5,5;2,5,6;3,3,2;3,1,4;4,5,3","8,8#2,3;1,6#0,6,1;0,2,4;0,4,4;0,4,5;0,5,5;0,6,5;1,5,4;1,6,6;2,1,1;2,5,3;3,4,2;3,2,5;4,4,6","8,8#6,5;5,1#0,1,2;0,2,2;0,1,5;0,2,5;1,1,1;1,1,6;2,6,1;2,1,3;3,4,3;3,1,4;4,2,1;4,2,6","8,8#4,6;2,6#0,2,4;0,5,4;0,6,1;1,3,4;1,4,4;2,5,1;2,5,3;3,2,1;3,5,5;4,3,3;4,4,3;4,3,5;4,4,5","7,7#4,2;3,3#2,1,1;2,5,1;2,1,5;2,5,5;1,1,3;1,4,4;5,5,1;5,5,2","7,7#1,3;4,5#0,5,1;1,5,2;1,3,3;2,3,2;2,5,5;5,1,1;5,5,4","7,7#5,1;2,2#0,1,1;0,5,2;0,4,4;1,1,3;2,3,3;2,1,4;2,1,5;5,4,1;5,2,5","7,7#1,2;3,5#0,1,5;2,1,1;2,3,1;2,1,4;1,2,3;5,2,4;5,5,2;5,5,3","7,7#5,1;2,5#0,1,1;0,5,2;0,2,3;0,5,5;1,5,3;2,1,5;2,5,4;3,1,3;4,4,2;4,4,5;5,2,1","8,7#1,2;6,5#0,4,1;0,5,1;0,6,1;0,6,2;0,6,3;0,6,4;1,4,4;2,3,1;2,1,3;2,5,4;3,1,4;4,4,2;5,2,1;5,5,2;5,2,5","8,7#6,1;1,5#0,1,1;0,5,4;0,5,5;1,1,2;1,6,5;2,1,3;3,3,2;4,2,2;4,6,4;5,4,2;5,1,3","8,7#6,1;1,5#0,1,1;0,6,3;1,6,5;2,5,2;2,1,3;2,6,4;3,4,3;3,1,4;4,4,4;4,4,5;5,2,1","8,8#6,1;1,6#0,6,3;0,3,4;0,5,4;0,6,4;0,6,5;0,6,6;1,2,3;2,4,2;2,5,2;2,3,6;3,2,5;4,2,2;4,3,2;4,1,4;5,5,3;5,5,5","8,8#6,1;2,6#0,4,1;0,5,4;0,6,4;0,6,5;0,6,6;1,3,2;2,1,1;2,1,6;3,2,4;4,4,3;4,4,4;4,5,5;5,5,1;5,5,6"],q=()=>D.length,G=(t=0)=>W(D[t]),X=t=>{const e=+("number"!=typeof(s=t)&&"string"!=typeof s||isNaN(s)?"0":t);var s;return e>=0&&e<=q()?e:0},_=()=>X(H(o,"0")),W=(t="")=>{const[e="",s="",i=""]=t.split("#"),[n,o]=e.split(","),[l,a]=s.split(";"),r=i.split(";"),c=Object.keys(y),h=[],d=l.split(","),u=a.split(",");h.push({color:b.i,position:{x:+d[0],y:+d[1]}},{color:b.o,position:{x:+u[0],y:+u[1]}});const p=r.map(t=>{const[e,s,i]=t.split(",");return{type:+c[+e],position:{x:+s,y:+i}}});return{width:+n,height:+o,N:h,M:F(+n,+o,p)}},F=(t=0,e=0,s)=>{const i=[];for(let n=0;n<e;n++)for(let o=t-1;o>=0;o--){const l=s.filter(t=>t.position.x===o&&t.position.y===n);if(0!==l.length)for(const t of l)i.push({type:t.type,position:{x:o,y:n}});else 0!==n&&n!==e-1&&0!==o&&o!==t-1||i.push({type:y.l,position:{x:o,y:n}})}return i},U=(t,e=0,s=0)=>{const{x:i,y:n}=t;return i>=0&&i<e&&n>=0&&n<s},V=(t,e)=>{const{x:s,y:i}=e;return t.filter(t=>t.position.x===s&&t.position.y===i)},Z=(t,e)=>{const{x:s,y:i}=e;return t.find(t=>t.position.x===s&&t.position.y===i)},Q=(t,e=0)=>({x:t.x*e+"px",y:t.y*e+"px"}),tt=(t,e)=>e.filter(e=>e.type===t),et=t=>t.total===t.j,st={interval:null,show({K:t="",icon:e="",R:s="yes",T:i="no",A:n,I:o=0}){var l;w("modal .txt").innerHTML=(e?`<p ${l={"font-size":"3rem"},Object.keys(l).length?`style='${Object.keys(l).map(t=>`${t}:${l[t]}`).join(";")}'`:""}>${e}</p>`:"")+t,j(w("modal #btn1"),{display:s?"block":"none"}),j(w("modal #btn2"),{display:i?"block":"none"}),w("modal #btn1").textContent=s,w("modal #btn2").textContent=i,M(w("modal"),"hide"),k(w("modal"),"show"),this.interval&&clearTimeout(this.interval),o&&(this.interval=setTimeout(()=>{this.hide()},o)),n&&(this.J=n)},hide(){M(w("modal"),"show"),k(w("modal"),"hide"),this.interval&&clearTimeout(this.interval)},P:()=>'<modal class="hide wi he"><div class="ms wi he"></div><div class="df mw wi he jc ai"><div class=mc><div class="df ai wh jc txt"></div><div class="df mb wi he jc"><button id=btn1></button><button id=btn2></button></div></div></div></modal>',events(){$("modal button").forEach(t=>L(t,m,t=>{this.hide(),this.J&&this.J("btn1"===t.target.id)}))}},it="#t-",nt="explode",ot="coin",lt="open";class at extends HTMLElement{constructor(){super(...arguments),e(this,"boardCoins",{total:0,j:0}),e(this,"boardKeys",{total:0,j:0}),e(this,"_cats",null),e(this,"level",null),e(this,"size",0),e(this,"totalCatMove",0),e(this,"collectAllKeys",0),e(this,"levelNumber",0),e(this,"isFirefox",0)}set B(t){this.level=t.level,this.H=t.H,this.P()}connectedCallback(){this.P()}P(){if(!this.level)return;this._=function(){if("undefined"==typeof navigator)return 0;const t=navigator.userAgent.toLowerCase();return t.includes("firefox")&&!t.includes("seamonkey")}(),this.size=Math.round(362/this.level.width),this.D={total:tt(y.h,this.level.M).length,j:0},this.G={total:tt(y.p,this.level.M).length,j:0},this.Y=0;const t=this.level.width*this.size,e=this.level.height*this.size;C(this,this.F(t,e)),this.W={[b.i]:E(this,".cat-black"),[b.o]:E(this,".cat-yellow")},[b.i,b.o].forEach(t=>{const e=this.W?.[t];e&&function(t,e){const s=e.threshold??30;let i=0,n=0,o=0;const l=(t,e)=>{i=t,n=e,o=1},a=(t,l)=>{if(!o)return;const a=t-i,r=l-n;let c=-1;Math.abs(a)>Math.abs(r)?Math.abs(a)>s&&(c=a>0?3:2):Math.abs(r)>s&&(c=r>0?1:0),c>=0&&e.U(c),o=0};L(t,"mousedown",t=>l(t.clientX,t.clientY)),L(window,"mouseup",t=>a(t.clientX,t.clientY)),L(t,"touchstart",t=>{const e=t.changedTouches[0];l(e.clientX,e.clientY)},{passive:1}),L(t,"touchend",t=>{const e=t.changedTouches[0];a(e.clientX,e.clientY)},{passive:1})}(e,{U:e=>this.V(t,e)})})}V(t,e){if(!this.level)return;const{X:s,Z:i}=((t,e,s,i)=>{const n=(o=t,JSON.parse(JSON.stringify(o)));var o;const{width:l,height:a,N:r,M:c}=n,h=x[s];let d=0;const u=r.findIndex(t=>t.color===e);if(u<0)return{X:n,Z:d};for(;;){const t=n.N[u],s={x:t.position.x+h.x,y:t.position.y+h.y};if(t?.destroy||!U(s,l,a))break;const o=V(c,s);if(Z(r,s))break;if(0!==o.length){const n=o[0].type,l=n===y.m,a=o[0]?.hide??0,r=o[0]?.open??0;if(2===o.length){const e=l?o[0]:o[1],i=l?o[1]:o[0];if(!e.hide&&0===d)break;if(!e.hide){e.hide=1;break}i.type===y.u&&(t.position=s,t.destroy=1,d++)}else{if(n===y.l)break;if(!a&&n===y.m){d>=1&&(o[0].hide=1);break}if(!r&&n===y.v){if(!et(i))break;o[0].open=1}a||n!==y.h||e!==b.o||(o[0].hide=1,o[0].delay=d+1),a||n!==y.p||e!==b.i||(o[0].hide=1,o[0].delay=d+1),a||n!==y.u||(t.destroy=1),t.position=s,d++}}else t.position=s,d++}return{X:n,Z:d}})(this.level,t,e,this.G);this.level=s,this.q=i,this.q>=1&&this.tt(t)}st(){this.level&&[...tt(y.h,this.level.M),...tt(y.p,this.level.M)].forEach(async t=>{const e=E(this,`${it}${t.position.x}-${t.position.y}`);if(t.hide&&!P(e,ot)){k(e,ot);const s=40*(t.delay||0);S(e,"s",`${s}ms`),t.type===y.h?this.D.j++:this.G.j++,await O(s),J(t.type===y.h?g.h:g.L)}})}et(){this.level&&tt(y.m,this.level.M).forEach(t=>{const e=E(this,`${it}${t.position.x}-${t.position.y}`);t.hide&&!P(e,nt)&&(k(e,nt),J(g.C))})}it(){this.level&&0!==this.G.total&&!this.Y&&(this.Y=et(this.G),this.Y&&(tt(y.v,this.level.M).forEach(t=>{const e=E(this,`${it}${t.position.x}-${t.position.y}`);P(e,lt)||k(e,lt)}),J(g.OPEN)))}async tt(t){const e=this.W?.[t];if(!this.level||!e)return;const s=this.level.N.find(e=>e.color===t);if(!s)return;J(g.$),this.ot(1),this.st(),k(e,"ani");const{x:i,y:n}=Q(s.position,this.size);S(e,"x",i),S(e,"y",n),S(e,"s",40*this.q+"ms");const o=e.getAnimations().map(t=>t.finished);await Promise.allSettled(o),M(e,"ani"),s.destroy&&!this.nt()?(k(e,nt),J(g.k),await O(300),this.showModal(1),J(g.O)):this.ot(0),this.ct(),this.et(),this.it()}async ct(){this.nt()&&(this.ot(1),((t=0)=>{const e=t+1,s=_();e>=0&&e<=q()&&e>s&&T(o,e)})(this.H),await O(200),this.showModal(),J(g.S))}showModal(t=0){const e={icon:t?"😿":"😺",K:t?"Ouch! Try again.":"Level Complete! Get ready for the next one.",T:"Home",R:t?"Restart":"Next Level"};st.show({...e,A:e=>{this.dispatchEvent(new CustomEvent(s,{detail:{lt:e,ht:t},bubbles:1,composed:1}))}})}nt(){return this.D.total===this.D.j}ot(t=0){this.level&&this.level.N.forEach(e=>{const s=this.W?.[e.color];s&&(s.disabled=t)})}F(t=0,e=0){return this.level?`<div class="gg bri ${this._?"firefox":"normal"}" style="--si:${this.size}px;width:${t}px;height:${e}px">${this.rt(this.level.M)}${this.dt(this.level.N)}</div>`:""}rt(t){return t.map(({type:t,position:e})=>{const{x:s,y:i}=Q(e,this.size);return`<div ${t!==y.l&&t!==y.u?`id="t-${e.x}-${e.y}"`:""} class="tile tile-${t} ${0===t?"bri":""}" style="--si:${this.size}px;left:${s};top:${i}"></div>`}).join("")}dt(t){return t.map(({color:t,position:e})=>{const{x:s,y:i}=Q(e,this.size);return`<button class="cat cat-${t.toLowerCase()}" style="--si:${this.size}px;--x:${s};--y:${i};"></button>`}).join("")}}customElements.define(p,at);const rt=(t=r,e)=>{const s={page:t,ut:e};J(g.CLICK),window.dispatchEvent(new CustomEvent(n,{detail:s}))};class ct{constructor(t="",s="",i=()=>{},n=""){e(this,"type",""),e(this,"id",""),e(this,"label",""),e(this,"style",""),e(this,"cb",()=>{}),this.type=t,this.label=s,this.style=n,this.A=i,this.id=`btn-${this.type.toLowerCase()}`}P(){return`<button id="${this.id}" class="btg button" ${this.style?`style="${this.style}"`:""}>${this.label}</button>`}event(){L(w(`#${this.id}`),m,()=>this.A())}}class ht{P(){return'<div class="p-le">Level <span></span></div>'}bt(t=0){const e=w(".p-le span");e&&C(e,`${t}`)}}const dt=q();class ut extends HTMLElement{constructor(){super(...arguments),e(this,"level",0),e(this,"gameSate",null)}static get vt(){return[i]}connectedCallback(){const t=this.getAttribute(i);this.level=t?parseInt(t,10):0,this.P()}P(){this.ft=G(this.level);const t=new ct("back","Back",()=>rt(c)),e=new ct("restart","Restart",()=>{n.B={level:this.ft,H:this.level},J(g.CLICK)}),i=new ht;C(this,`<div class="df jc ai wi he">${t.P()}${i.P()}${e.P()}<${p}></${p}>${st.P()}</div>`);const n=this.querySelector(p);st.events(),t.event(),e.event(),n&&(n.B={level:this.ft,H:this.level},i.bt(this.level+1)),this.addEventListener(s,t=>{const e=t,{lt:s,ht:o}=e.detail;if(s)if(o)n.B={level:this.ft,H:this.level};else{const t=this.level+1;t>=0&&t<dt?(this.level=t,this.ft=G(this.level),n.B={level:this.ft,H:this.level},i.bt(this.level+1),T(a,t)):rt()}else rt()})}}customElements.define(u,ut);const pt=q();class vt extends HTMLElement{constructor(){super(...arguments),e(this,"completedLevel",0),e(this,"selectedLevel",0)}connectedCallback(){this.innerHTML='<div class="df jc ai wi he bri pag"><div class="df jc pag-c"><div class="df jc pag-s"></div></div></div>',this.yt=_(),this.wt=X(H(a,"0"));const t=E(this,".pag-s"),e=E(this,".pag-c");C(t,this.xt()),((t,e="")=>this.querySelectorAll(e))(0,".button").forEach(t=>{const e=+t.textContent;e-1<=this.yt&&L(t,m,()=>{T(a,e-1),rt(h,{level:e-1})})});const s=new ct("back","Back",()=>rt(),"left: 175px;top: 71px;");e.insertAdjacentHTML("beforeend",s.P()),s.event()}xt(){return new Array(pt).fill(null).map((t,e)=>`<button class="button df jc ai ${this.wt===e?"active":""}" ${e>this.yt?"disabled":""}>${e+1}</button>`).join("")}}customElements.define(v,vt);const ft=q();class mt extends HTMLElement{connectedCallback(){this.innerHTML='<div class="df jc ai wi he bri lob pag"><div class="lob-c df jc ai pag-c"><h1><span>RONI</span><span>AND</span><span>KIRA</span></h1><div class="wi df ai jcs"><div class="cat cat-black"></div><div class="cat"></div></div><p>Swipe to move. Help Kira collect all coins, use Roni to help Kira collect coins that are out of reach!</p><div class="lob-l"><span></span> LEVELS COMPLETED</div><button class="button">PLAY</button><p>By <a href="https://bio.link/jorgerub" target="_blank">Jorge Rubiano</a> - <a href="https://js13kgames.com/2025/" target="_blank"> JS13k 2025</a></p></div></div>';const t=E(this,"button"),e=E(this,".lob-l span"),s=_();C(e,`${s}/${ft}`),L(t,m,()=>rt(c));const i=new ct("share","Share",()=>{return t={title:"😺 Roni and Kira",text:"Play Roni & Kira, A JS13k Game by Jorge Rubiano!",url:window.location.href},void("share"in navigator?navigator.share(t):window.open(`https://x.com/share?url=${encodeURIComponent(t.url||"")}`,"_blank"));var t},"top: 60px;left:60px;"),n=new ct("sound",Y(),()=>{var t;t=w("#btn-sound"),z=!z,T(l,z),t.textContent=Y(),J(g.CLICK)},"top: 60px;right: 60px;left:unset;"),o=E(this,".pag-c");o.insertAdjacentHTML("beforeend",n.P()),o.insertAdjacentHTML("beforeend",i.P()),n.event(),i.event()}}customElements.define(f,mt);class bt extends HTMLElement{constructor(){super(...arguments),e(this,"currentPage",null)}connectedCallback(){this.navigate(r),window.addEventListener(n,t=>{const e=t;this.navigate(e.detail.page,e.detail.ut)}),document.addEventListener("contextmenu",t=>t.preventDefault(),0),window.addEventListener("resize",()=>this.$t()),this.$t()}$t(){const t=window.innerWidth/412,e=window.innerHeight/732,s=Math.min(t,e);this.style.zoom=`${s}`}navigate(t,e={}){let s;switch(this.currentPage&&this.removeChild(this.currentPage),t){case r:s=document.createElement(f);break;case c:s=document.createElement(v);break;case h:s=document.createElement(u),e.level&&s.setAttribute(i,String(e.level));break;default:s=document.createElement(f)}this.appendChild(s),this.currentPage=s}}customElements.define(d,bt),S(document.documentElement,"bh","732px"),S(document.documentElement,"bw","412px"),document.body.innerHTML=`<${d} class='df jc ai'></${d}>`</script>