<!doctype html><title>Super Benji - js13kGames 2025</title><meta content="width=device-width" name=viewport><style>*{box-sizing:border-box}#c2d{image-rendering:pixelated;image-rendering:crisp-edges;margin:auto;display:block}body,html{margin:0;background:#050011;height:100%}</style><canvas height=512 id=c2d width=288></canvas><script>let t=[],e=[{aa:1,color:"#00FF66"},{aa:.75,color:"#00BFFF"},{aa:.5,color:"#FFA500"},{aa:.25,color:"#FF3333"},{aa:0,color:"rgba(255, 0, 0, 0)"}],i=[["blue",["#49b6ff","#184888"]],["green",["#49ff70","#1c8818"]],["purple",["#9e49ff","#4c1888"]],["pink",["#ff49a4","#881863"]],["orange",["#ffb049","#884e18"]],["red",["#ff5e49","#881c18"]]],a=[["grey","#202020 #404040 #606060 #808080 #A0A0A0 #C0C0C0 #00BFFF".split(" ")],["gold","#201400 #402800 #604000 #805800 #A07000 #d1960d #FF7F00".split(" ")],["green","#0D1A0D #163322 #1F4D31 #2A6B44 #3C8C5A #56B27D #7FE6AF".split(" ")],["purple","#1A1026 #2C1E4A #3C2F6B #4E3F8C #6757B0 #8A7ED6 #B5A6FF".split(" ")],["blue","#0A1A33 #122B57 #1B3C7A #25509E #3166C7 #4C82E6 #7FAFFF".split(" ")]],s="#0d0d0d #1a1a1a #2c2c2c #3f3f3f #5a2b00 #8c3b00 #9aacac #ff7b1c #ffb84d #ffd9a3".split(" "),h="#1A0D00 #331A00 #663311 #994422 #CC6633 #FF9966 #FFD9B3".split(" "),n="#1A1A00 #2B2B1A #555533 #777755 #999966 #BBBB88 #E0E0C0".split(" "),r="#1A0000 #330000 #661111 #992222 #CC3333 #FF6666 #FFD9D9".split(" "),o=[25,50,0],l=["Starfield Frontiers","Factured Expanse","Rift Horizon","Outer wilds"],c=[5,12,13],g="#0a0f0a #121a12 #1b261a #253424 #3d583e #4a5c46 #63755f #7f8f7c #a4b1a1 #d0d8ce".split(" "),d="#111821 #152236 #1b2e45 #2d4668 #22354f #3a567a #5a7ba3 #6f92b8 #90afcf #b0cde6".split(" "),u="#1a130f #2a1f18 #3b2c22 #544036 #6a5448 #7f6a5a #8e8e91 #a5a6a9 #c5c6c9 #e0e1e3".split(" ");function f(t,e){let i=c2d.getBoundingClientRect();return new DOMPoint(288/i.width*(t-i.left),512/i.height*(e-i.top))}function p(t){var e=window.visualViewport?.height||window.innerHeight,i=window.visualViewport?.width||window.innerWidth;.5625<i/e?e=.5625*(i=e):i=(e=i)/.5625,t.g.canvas.style.width=`${e}px`,t.g.canvas.style.height=`${i}px`,t.g.imageSmoothingEnabled=!1}function m(t,e,i,a=18){let s=t.createLinearGradient(0,e-a,0,e);return i.forEach(([t,e])=>s.addColorStop(t,e)),s}function y(t,e,i,a,s){t=t.g,S.save(),t.font=`900 ${i-2}px "Courier New", monospace`,t.strokeStyle="#0a0601",t.fillStyle="#0a0601",t.textAlign="center",t.strokeText(e,a,12<i?s+1:s),t.fillText(e,a,12<i?s+2:s),t.font=`900 ${i}px "Courier New", monospace`,t.fillStyle=m(t,s,[[0,"#fff4c1"],[.25,"#ffd84a"],[.5,"#6a2c00"],[.75,"#b65a00"],[1,"#ff9d00"]]),t.fillText(e,a,s),S.restore()}function v(t,e,i,a,s="#fff",h="center",n,r,o,l='"Courier New", monospace'){let c=S.g;c.save(),c.font=`${e}px ${l}`,c.textAlign=h,c.fillStyle=s,n&&(c.strokeStyle=n),r&&(c.lineWidth=r),o?(c.translate(i,a),c.rotate(o),n&&c.strokeText(t,0,0),c.fillText(t,0,0)):(n&&c.strokeText(t,i,a),c.fillText(t,i,a)),c.restore()}function w(t,e,i=400){var a=S;a.l+=e,.75<=a.l&&(a.l=0,a.B=!a.B),a.B&&(e=a.g,S.save(),e.font='900 24px "Courier New", monospace',e.textAlign="center",e.textBaseline="middle",e.strokeStyle="#161616",e.strokeText(t,e.canvas.width/2,i+1),e.fillStyle=m(e,i,[[0,"#fff"],[.45,"#eee"],[.6,"#777"],[.8,"#ccc"],[1,"#555"]],20),e.fillText(t,e.canvas.width/2,i),S.restore())}function x(t,e,i,a,s,h=6,n,r){t.beginPath(),t.moveTo(e+h,i),t.lineTo(e+a-h,i),t.quadraticCurveTo(e+a,i,e+a,i+h),t.lineTo(e+a,i+s-h),t.quadraticCurveTo(e+a,i+s,e+a-h,i+s),t.lineTo(e+h,i+s),t.quadraticCurveTo(e,i+s,e,i+s-h),t.lineTo(e,i+h),t.quadraticCurveTo(e,i,e+h,i),t.closePath(),n&&(t.fillStyle=n,t.fill()),r&&(t.strokeStyle=r,t.stroke())}function M(t,e,i,a,s,h,n,r){x(t,e,i,a,s,1,h),t.beginPath(),t.moveTo(e+1,i),t.lineTo(e+a-1,i),t.quadraticCurveTo(e+a,i,e+a,i+1),t.strokeStyle=n,t.lineWidth=2,t.stroke(),t.beginPath(),t.moveTo(e,i+s-1),t.lineTo(e,i+1),t.quadraticCurveTo(e,i,e+1,i),t.strokeStyle=n,t.stroke(),t.beginPath(),t.moveTo(e+a,i+1),t.lineTo(e+a,i+s-1),t.quadraticCurveTo(e+a,i+s,e+a-1,i+s),t.lineTo(e+1,i+s),t.strokeStyle=r,t.stroke()}function A(t,e=25){var i=S;let s=i.g,h=a.find(([t])=>"gold"===t)[1];S.save();let n=s.createRadialGradient(t.x-.3*e,t.y-.3*e,.3*e,t.x,t.y,e);n.addColorStop(0,h[5]),n.addColorStop(.5,h[4]),n.addColorStop(1,h[2]),s.beginPath(),s.arc(t.x,t.y,e,0,2*Math.PI),s.fillStyle=n,s.fill(),s.lineWidth=4,s.strokeStyle=h[5],s.stroke(),s.closePath(),s.clip(),S.restore(),y(i,"B",e,t.x,t.y+.2*e)}function b(){return S.g.canvas.width/2}let S=new class{constructor(){this.l=0,this.B=!0,this.g=c2d.getContext("2d"),this.m=new DOMPoint(0,0),c2d.addEventListener("mousemove",t=>{this.m=f(t.clientX,t.clientY)}),c2d.addEventListener("touchmove",t=>{t=t.touches[0],this.m=f(t.clientX,t.clientY)}),window.addEventListener("resize",()=>p(this)),p(this)}get i(){return this.g.canvas.width}get j(){return this.g.canvas.height}save(){this.g.save()}restore(){this.g.restore()}};function T(t){var e=C;C.active||e.start(1,0,.5,()=>{t(),C.start(0,1,.5)})}let C=new class{constructor(){this.e=this.a=0,this.d=1,this.ca=this.ma=this.f=0}start(t,e,i,a){this.ma=t,this.ca=e,this.a=t,this.d=i,this.e=0,this.f=1,this.c=a}update(t){this.f&&(this.e+=t,t=Math.min(this.e/this.d,1),this.a=this.ma+(this.ca-this.ma)*t,1<=t&&(this.f=0,this.c?.()))}H(t){!this.f&&0>=this.a||(t.fillStyle=`rgba(0,0,0,${.8*(1-this.a)})`,t.fillRect(0,0,S.i,S.j))}get active(){return 1===this.f}};function B(t,e=1){return{r:(t=parseInt(t.replace("#",""),16))>>16&255,ca:t>>8&255,b:255&t,alpha:e}}function F(t,e=1){let{r:i,ca:a,b:s}=B(t,e);return`rgba(${i}, ${a}, ${s}, ${e})`}let j,R="#06040f #4d592a #231952 #354652 #353550 #363692 #69416e".split(" ");function k(t,e,i,a){return e=function(t=.01,e=R){let i=document.createElement("canvas");i.width=256,i.height=256;let a=i.getContext("2d");a.imageSmoothingEnabled=!1;for(var s=0;s<Math.floor(65536*t);s++)a.fillStyle=e[Math.floor(Math.random()*e.length)],a.fillRect(Math.floor(256*Math.random()),Math.floor(256*Math.random()),1,1);for(let i=0;2>i;i++){t=a,s=256*Math.random();var h=256*Math.random(),n=128*Math.random()+256/3,r=e;for(let e=-256;256>=e;e+=256)for(let i=-256;256>=i;i+=256){let a=t.createRadialGradient(s+e,h+i,0,s+e,h+i,n);a.addColorStop(0,F(r[5],.1)),a.addColorStop(1,"rgba(0,0,0,0)"),t.globalCompositeOperation="screen",t.fillStyle=a,t.beginPath(),t.arc(s+e,h+i,n,0,2*Math.PI),t.fill(),t.globalCompositeOperation="source-over"}}return(e=new Image).src=i.toDataURL(),e}(e,t),{Ya:t,Z:e,offsetX:0,offsetY:0,bb:i,sa:a}}class I{constructor(t=75,e=1){this.g=[],this.time=0;let i=R.map(t=>{var e=t.replace("#","");t=parseInt(e.substring(0,2),16)/255;var i=parseInt(e.substring(2,4),16)/255;e=parseInt(e.substring(4,6),16)/255;var a=Math.max(t,i,e),s=Math.min(t,i,e),h=0,n=0;let r=(a+s)/2;if(a!==s){let o=a-s;switch(n=.5<r?o/(2-a-s):o/(a+s),a){case t:h=(i-e)/o+(i<e?6:0);break;case i:h=(e-t)/o+2;break;case e:h=(t-i)/o+4}h*=60}let{Aa:o,ma:l,Va:c}={Aa:h,ma:100*n,Va:100*r};return t=(o+200*(Math.random()-.5)+360)%360,a=Math.min(100,Math.max(0,c+0*(Math.random()-.5))),a/=100,e=(i=Math.min(100,Math.max(0,l+10*(Math.random()-.5)))/100*(1-Math.abs(2*a-1)))*(1-Math.abs(t/60%2-1)),a-=i/2,n=h=s=0,0<=t&&60>t?(s=i,h=e,n=0):60<=t&&120>t?(s=e,h=i,n=0):120<=t&&180>t?(s=0,h=i,n=e):180<=t&&240>t?(s=0,h=e,n=i):240<=t&&300>t?(s=e,h=0,n=i):300<=t&&360>t&&(s=i,h=0,n=e),`#${Math.round(255*(s+a)).toString(16).padStart(2,"0")}${Math.round(255*(h+a)).toString(16).padStart(2,"0")}${Math.round(255*(n+a)).toString(16).padStart(2,"0")}`});this.pa=Math.min(t,350),this.J=e,this.g.push(k(i,.001,.4*this.pa,.2)),this.g.push(k(i,.002,.6*this.pa,.3)),this.g.push(k(i,.003,this.pa,.4))}update(t,e={x:0,y:0}){this.time+=.1*t;for(let i of this.g)0!==i.Z.width&&0!==i.Z.height&&(i.offsetY=(i.offsetY+i.bb*t-.5*e.y*i.sa)%i.Z.height,0>i.offsetY&&(i.offsetY+=i.Z.height),i.offsetX=(i.offsetX-.4*e.x*i.sa)%i.Z.width)}H(t){let{width:e,height:i}=t.canvas;t.imageSmoothingEnabled=!1;var a=this.g[0];t.save(),t.fillStyle=a.Ya[0],t.fillRect(0,0,e,i);for(let h of this.g)if(h.Z.complete&&(a=t.createPattern(h.Z,"repeat"))){var s;t.save();t:{for(s=c.length-1;0<=s;s--)if(this.J>=c[s]){s=o[s];break t}s=0}t.translate(h.offsetX+20*Math.sin(this.time*s+2*h.sa)*h.sa,h.offsetY),t.fillStyle=a,t.fillRect(-h.Z.width/4,-h.Z.height,e+100,i+h.Z.height),t.restore()}t.restore()}}function E(t){var e=j;e.g.Ka?.(),e.g=t,e.g.qa?.()}function D(t,e=8,i=12){if(!t.L){t.na={x:0,y:0},t.L=!0;for(let a=0;a<e;a++){let e=400*(Math.random()-.5),a=Math.random()*Math.PI*2;t.j.push({x:t.x+t.width/2,y:t.y+t.height/2,gb:Math.cos(a)*e,hb:Math.sin(a)*e,Da:Math.random()*Math.PI*2,$a:8*(Math.random()-.5),alpha:1,size:i,cb:Math.floor(Math.random()*(t.F.width-i)),eb:Math.floor(Math.random()*(t.F.height-i))})}}}function P(t,e){for(let i of t.j)i.x+=i.gb*e,i.y+=i.hb*e,i.Da+=i.$a*e,i.alpha-=1.5*e;t.j=t.j.filter(t=>0<t.alpha)}function V(t,e){for(let i of t.j)e.save(),e.globalAlpha=i.alpha,e.translate(i.x,i.y),e.rotate(i.Da),e.drawImage(t.F,i.cb,i.eb,i.size,i.size,-i.size/2,-i.size/2,i.size,i.size),e.restore()}function q(t){return t.L&&0===t.j.length}class H{constructor(t,e,i,a=0,s=0){this.j=[],this.L=!1,this.na={x:0,y:0},this.F=t,this.x=e,this.y=i,this.width=a,this.height=s,this.active=!0}Ba(){return 0>this.x+this.width||this.x>S.i||0>this.y+this.height||this.y>S.j}}function G(t,e,i,a=t.g,s){if(t.active&&t.Ea){var h=t.Ea.get();h&&(s&&(h.F=Gt(t.B.V,s)),s=0>=a.y?t.y:t.y+t.height,h.A=e,h.speed=i,e=s,i=a.x,a=a.y,h.x=t.x+t.width/2+t.Fa,h.y=e,h.wa=i,h.xa=a,h.active=!0)}}function L(t,e,i,a){if(t.active)if("burst"===t.M)0<t.P?(t.G-=e,0>=t.G&&(G(t,i,a,t.g,t.W),t.P--,t.G=t.Pa),0>=t.P&&(t.i=Math.max(.05,t.v))):(t.i-=e,0>=t.i&&(t.P=t.Oa,t.G=0));else if(t.i-=e,0>=t.i){switch(t.M){case"single":G(t,i,a,t.g,t.W);break;case"spread":e=[-.3,0,.3];var s=Math.hypot(t.g.x,t.g.y),h=t.g.x/s;for(var n of(s=t.g.y/s,e)){e=Math.cos(n);var r=Math.sin(n);G(t,i,a,{x:h*e-s*r,y:h*r+s*e},t.W)}break;case"megaspread":for(s of(e=[-.6,-.3,0,.3,.6],n=Math.hypot(t.g.x,t.g.y),h=t.g.x/n,n=t.g.y/n,e))G(t,i,a,{x:h*(e=Math.cos(s))-n*(r=Math.sin(s)),y:h*r+n*e},t.W);break;case"boss":for(h of(e=[-.5,-.4,-.2,0,.2,.4,.5],s=Math.hypot(t.g.x,t.g.y),n=t.g.x/s,s=t.g.y/s,e))(e={x:n*(e=Math.cos(h))-s*(r=Math.sin(h)),y:n*r+s*e}).x+=.5*(Math.random()-.5),r=Math.hypot(e.x,e.y),e.x/=r,e.y/=r,G(t,i,a,e,t.W)}t.i=Math.max(.05,t.v)}}function J(t,e){let i=Math.max(-5,Math.min(5,4*t.na.x)),a=t.width/2;for(let s=0;s<t.width;s++)e.drawImage(t.F,s,0,1,t.height,t.x+s,t.y+Math.floor((s-a)/a*i),1,t.height)}class O extends H{constructor(t,e,i,a,s,h,n){super(e,a,s,h,n),this.va={x:0,y:0},this.Fa=0,this.active=!0,this.i=0,this.v=.1,this.g={x:0,y:-1},this.M="single",this.G=this.P=0,this.Pa=.1,this.Oa=3,this.W="red",this.B=t,this.F=e,this.Ea=i}}function W(t,e){t.o+e>t.C?t.o=t.C:t.o+=e}class U extends O{constructor(t,e,i){super(t,e,i,b()-e.width/2,.5*S.j,e.width,e.height),this.ea=9,this.Fa=-2,this.m="#00bfff",this.R=150,this.o=this.C=this.N=100,this.v=.6,this.A=10,this.D=200,this.l=this.S=this.K=0,this.M="single",this.W="blue",this.ra="grey",this.La=this.Ja=!1,this.F=e}update(t,i,a){if(this.L)P(this,t);else{0<this.S&&this.o<this.C&&(this.l+=t,this.l>=(this.La?2.5:5)&&(this.o+=Math.min(this.S,40),this.o>this.C&&(this.o=this.C),this.l=0)),i-=this.x+this.width/2,a=a-(this.y+this.height/2)-28;var s=Math.hypot(i,a);4<s&&(this.x+=i/s*Math.min(400,this.R)*t,this.y+=a/s*Math.min(400,this.N)*t),this.na={x:this.x-this.va.x,y:this.y-this.va.y},this.va={x:this.x,y:this.y};t:{i=this.o/this.C,i=Math.max(0,Math.min(1,i));for(var h=0;h<e.length-1;h++)if(s=e[h+1],i<=(a=e[h]).aa&&i>=s.aa){i=(i-s.aa)/(a.aa-s.aa),a=B(a.color);let t=B(s.color);s=a.alpha+(t.alpha-a.alpha)*(1-i),h=Math.round(a.ca+(t.ca-a.ca)*(1-i));var n=Math.round(a.b+(t.b-a.b)*(1-i));i=F(i="#"+Math.round(a.r+(t.r-a.r)*(1-i)).toString(16).padStart(2,"0")+h.toString(16).padStart(2,"0")+n.toString(16).padStart(2,"0"),s);break t}i=e[e.length-1].color}this.m=i,L(this,t,this.A,this.D),this.F=Lt(this.B.V,this.ra)}}H(t){if(this.L)V(this,t);else{if(t.save(),this.F){var e=document.createElement("canvas");e.width=this.width,e.height=this.height;var i=e.getContext("2d");i.drawImage(this.F,0,0,this.width,this.height),i.globalCompositeOperation="source-in",i.fillStyle=this.m,i.fillRect(0,0,this.width,this.height),t.save(),t.globalAlpha=.8,t.filter="blur(20px)",t.drawImage(e,this.x,this.y,this.width,this.height),t.restore()}e=this.x+this.width/2,i=this.y+this.height+-2;var a=t.createLinearGradient(e,i,e,i+20);a.addColorStop(0,"rgba(0, 180, 255, 0.9)"),a.addColorStop(.4,"rgba(255, 255, 255, 0.8)"),a.addColorStop(1,"rgba(255, 140, 0, 0)"),t.fillStyle=a,a=20+15*Math.random(),t.beginPath(),t.moveTo(e-1,i),t.lineTo(e,i+a),t.lineTo(e+1,i),t.closePath(),t.fill(),J(this,t),t.restore()}}ua(t){this.o-=t,0>=this.o&&!this.L&&(this.ea--,D(this,40),Ft(this.B.ba)),Rt((t=this.B.ba).g,"square",600,t.g.currentTime,.15,t.i,.6)}}class Y extends H{constructor(t){super(t,0,0),this.active=!1,this.speed=this.A=1,this.xa=this.wa=0,this.F=t}H(t){this.L?V(this,t):t.drawImage(this.F,this.x,this.y)}update(t){this.L?(P(this,t),q(this)&&(this.active=this.L=!1)):(this.x+=this.wa*this.speed*t,this.y+=this.xa*this.speed*t)}}class N extends O{constructor(t,e,i,a,s,h,n,r,o,l,c){if(super(t,e,i,r,o,e.width,e.height),this.Na="#ffb3007c",this.l=12,this.N=10,this.m=this.da=this.Ga=this.oa=0,this.Za=.5,this.v=3.2,this.g={x:0,y:1},this.T=0,this.W="red",this.o=this.C=a,(t=document.createElement("canvas")).width=this.F.width+4*this.l,t.height=this.F.height+4*this.l,!(e=t.getContext("2d")))throw Error();e.shadowColor=this.Na,e.shadowBlur=this.l,e.drawImage(this.F,2*this.l,2*this.l),this.Qa=t,this.m=60*(Math.random()-.5),this.A=s,this.D=n,this.ha=l,this.M=c,this.v=h+.4*(2*Math.random()-1),this.i=Math.random()*this.v}update(t){if(this.L)P(this,t);else{var e=this.x;switch("none"!==this.ha&&(this.da-=t,0>=this.da&&(this.da=.5+1.5*Math.random(),this.Ga=100*(Math.random()-.5)),this.oa+=(this.Ga-this.oa)*t*2,this.y+=Math.max(10,this.N+this.oa)*t),this.ha){case"sine":this.x+=1.5*Math.sin(this.y/20);break;case"zigzag":this.T-=t,0>=this.T&&(this.m=50*(.5>Math.random()?-1:1),this.T=.5),this.x+=this.m*t}0>this.x&&(this.x=0,this.m*=-1),this.x+this.width>S.i&&(this.x=S.i-this.width,this.m*=-1),this.na.x=(this.x-e)/t,L(this,t,this.A,this.D)}}H(t){this.L?V(this,t):(t.save(),t.drawImage(this.Qa,this.x-2*this.l,this.y-2*this.l),t.drawImage(this.F,this.x,this.y),J(this,t),t.restore())}ua(t){this.o-=t,0>=this.o&&(D(this),Ft(this.B.ba))}Ba(){return 0>this.x+this.width||this.x>S.i||this.y>S.j}}class z extends N{constructor(t,e,i,a,s,h,n){super(t,e,i,a,s,1.4,h,n,20,"none","boss"),this.g={x:0,y:1}}}function X(t,e){e=t.ya+1.6*(t.J-1)+1.6*e;for(let a=0;a<e;a++){var i=void 0;i=5>(i=t.J)?[.7,.25,.05]:10>i?[.5,.4,.1]:15>i?[.3,.5,.2]:[.2,.5,.3];let e=Math.random();i=e<i[0]?t.$[0]:e<i[0]+i[1]?t.$[1]:t.$[2],i=new N(t.g,i.F,t.g.ga,i.la*(1+.5*t.J),i.za*(1+.035*t.J),3.2,i.D*(1+.13*t.J),Math.random()*(S.i-i.F.width),-40-100*Math.random(),i.ha,i.M),t.g.X.push(i)}}function Z(t){if(t.j=0,t.g.background=new I(1.1*t.g.background.pa,t.J),t.l=4,t.g.X=[],12<=t.J&&0==(t.J-12)%3){var e=Math.floor((t.J-12)/3)+1,i=1500*Math.pow(1.75,e),a=10*Math.pow(1.75,e);e=80*Math.pow(1.75,e),t.m=!0,i=new z(t.g,t.g.V.Ia,t.g.ga,i,a,e,S.i/2-t.g.V.Ia.width/2),t.g.X.push(i)}else 0==t.J%6&&t.G++,t.j++,X(t,t.j)}function K(t){t.J++;var e=t.g.Y;c.includes(t.J)?(e.isActive=!0,e.g.paused=!0):(e.isActive=!1,e.g.paused=!1),t.g.Y.isActive||Z(t)}function Q(t){t.i.push({x:Math.random()*S.i,y:Math.random()*S.j*.4,ab:t.B})}class ${constructor(t){this.j=this.J=0,this.G=1,this.ya=2,this.l=0,this.m=!1,this.i=[],this.B=0,this.g=t,this.$=[{F:this.g.V.Sa,ha:"zigzag",M:"single",D:90,za:10,la:12},{F:this.g.V.Xa,ha:"sine",M:"burst",D:108,za:11,la:11},{F:this.g.V.Ra,ha:"zigzag",M:"spread",D:135,za:10,la:10}]}update(t){this.B+=t;let e=0===this.g.X.length,i=!this.g.ka.isActive&&!this.g.fa.isActive&&!this.g.Y.isActive;this.m&&function(t){var e=t.g.X[0];if(e){e.o<=.75*e.C&&0>=t.i.length&&Q(t),e.o<=.5*e.C&&1>=t.i.length&&Q(t),e.o<=.25*e.C&&2>=t.i.length&&Q(t);for(let n of t.i)if(.02>Math.random()){var i=n;let r=(e=t).g.ga.get();if(r){r.A=10,r.speed=108;var a=r,s=i.y,h=Math.cos(Math.random()*Math.PI*2);a.x=i.x,a.y=s,a.wa=h,a.xa=1,a.active=!0,r.F=Gt(e.g.V,"purple")}}}}(this),this.m&&e&&function(t){t.m=!1,t.i=[],T(()=>t.g.ka.start())}(this),e&&i&&(this.j<this.G?(this.j++,X(this,this.j)):T(()=>{this.g.ka.start()})),0<this.l&&(this.l-=t)}H(){if(this.m){var t=this.g.X[0];if(t){var e=S.g,i=S.i,a=(e.canvas.width-i)/2;t=t.o/t.C*i,e.fillStyle="#444",e.fillRect(a,5,i,10),e.fillStyle="#e33",e.fillRect(a,5,t,10),e.strokeStyle="#fff",e.lineWidth=2,e.strokeRect(a,5,i,10)}}for(var s of this.i){for(a=s.x,t=s.y,e=this.B-s.ab,i=S.g,S.save(),i.translate(a,t),a=0;5>a;a++){t=a/5*Math.PI*2;for(let a=0;15>a;a++){let s=a/15;var h=30*s;let n=t+2.5*s+.75*e,r=Math.cos(n)*h;h*=Math.sin(n),i.fillStyle=`rgba(150, 100, 255, ${1-s})`,i.beginPath(),i.arc(r,h,1.5,0,2*Math.PI),i.fill()}}S.restore()}if(0<this.l){s=Math.min(this.l/.5,1),S.g.save(),S.g.globalAlpha=s,s=this.J,e=l.length-1,i=Math.floor((s-1)/4);let{Ha:t,Ma:a}=i<e?{Ha:l[i],Ma:(s-1)%4+1}:{Ha:l[e],Ma:s-4*e};y(S,t,24,S.i/2,.2*S.j),y(S,`Zone ${a}`,32,S.i/2,.275*S.j),S.g.restore()}}}function _(t,e,i){for(let a=t.length-1;0<=a;a--){let s=t[a];if(s.active)for(let t=e.length-1;0<=t;t--){let a=e[t];if(a.active&&s&&a&&s.x<a.x+(a.width||0)&&s.x+(s.width||0)>a.x&&s.y<a.y+(a.height||0)&&s.y+(s.height||0)>a.y){i(s,a);break}}}}function tt(t,e){for(let i of t.ja)i.active&&(i.update(e),i.Ba()&&(i.active=!1))}function et(t,e){for(let i of t.ja)i.active&&i.H(e)}class it{constructor(t){this.ja=[];for(let e=0;100>e;e++){let e=t();e.active=!1,this.ja.push(e)}}get(){for(let t of this.ja)if(!t.active)return t.active=!0,t.L=!1,t;return null}}class at{constructor(t){this.i=[{u:"Common",name:"Cosmic Claw",description:"Damage +4, Proj Speed 15%",s:"Spread Shot",apply:async()=>{this.g.h.A+=4,this.g.h.D*=1.15,this.g.h.W="orange",this.g.h.M="spread"}},{u:"Common",name:"Starburst",description:"Damage +6, Fire Rate 10%",s:"Burst Shot",apply:async()=>{this.g.h.A+=6,this.g.h.v*=.9,this.g.h.M="burst"}},{u:"Rare",name:"Nebula Railcoil",description:"Damage +8, Proj Speed +30%",s:"Burst Shot",apply:()=>{this.g.h.A+=5,this.g.h.D*=1.3,this.g.h.W="purple",this.g.h.M="burst"}},{u:"Epic",name:"Iron Fang Torpedo",description:"Damage +6, Fire Rate +20%",s:"Spread Shot",apply:()=>{this.g.h.A+=6,this.g.h.v*=.8,this.g.h.W="orange",this.g.h.M="spread"}},{u:"Epic",name:"Modified Sprinkler",description:"Damage -6, Fire Rate +50%",s:"Mega Shot",apply:()=>{this.g.h.A-=6,this.g.h.v*=.5,this.g.h.W="pink",this.g.h.M="megaspread"}},{u:"Legendary",name:"Glass Cannon",description:"Damage +10 HP -20",s:"Mega Shot",apply:()=>{this.g.h.A+=10,this.g.h.o-=20,this.g.h.W="orange",this.g.h.M="megaspread"}},{u:"Common",name:"Mithril Plating",description:"HP +10, Regen +1",s:"Evasion +2%",apply:()=>{this.g.h.C+=10,this.g.h.o+=10,this.g.h.S+=1,this.g.h.K+=2,this.g.h.ra="purple"}},{u:"Common",name:"Adamite Panels",description:"HP +12, Regen +2",apply:()=>{this.g.h.C+=12,this.g.h.o+=12,this.g.h.S+=2,this.g.h.ra="green"}},{u:"Rare",name:"Torx’s Reinforced Shell",description:"HP +20, Regen +3",apply:()=>{this.g.h.C+=20,this.g.h.o+=20,this.g.h.S+=3}},{u:"Epic",name:"Aether Veil",description:"Evasion +15%",apply:()=>{this.g.h.K+=15}},{u:"Legendary",name:"Maggie's Cloak",description:"HP +25, Regen +4",s:"Evasion +10%",apply:()=>{this.g.h.C+=25,this.g.h.o+=25,this.g.h.S+=4,this.g.h.K+=10,this.g.h.ra="blue"}},{u:"Common",name:"Advanced Wings",description:"Move Speed +12%",s:"Fire Rate +3%",apply:()=>{this.g.h.R*=1.12,this.g.h.N*=1.12,this.g.h.v*=.97}},{u:"Rare",name:"Meteor Thrusters",description:"Move Speed +20%",s:"Evasion +5%",apply:()=>{this.g.h.R*=1.2,this.g.h.N*=1.2,this.g.h.K+=5}},{u:"Legendary",name:"Voidstep Drive",description:"Move Speed +35%",s:"Evasion +10%",apply:()=>{this.g.h.v*=.9,this.g.h.R*=1.35,this.g.h.N*=1.35,this.g.h.K+=10}},{u:"Common",name:"Hunter’s Instinct",description:"Damage +4, Evasion +2%",s:"Move Speed +3%",apply:()=>{this.g.h.A+=4,this.g.h.K+=2,this.g.h.R*=1.03,this.g.h.N*=1.03}},{u:"Common",name:"Lazer pointer addon",description:"Fire Rate +6%",s:"Evasion 3%",apply:()=>{this.g.h.v*=.94,this.g.h.K+=3}},{u:"Rare",name:"Astro Whiskers",description:"Fire Rate +15%",s:"Proj Speed +40%",apply:()=>{this.g.h.v*=.85,this.g.h.D*=1.4}},{u:"Rare",name:"Reverse Polarity",description:"Proj Speed +60%",s:"Move Speed -15%",apply:()=>{this.g.h.D*=1.6,this.g.h.R*=.85,this.g.h.N*=.85}},{u:"Epic",name:"Warp Core Fragment",description:"Fire Rate +40%",s:"Proj Speed -15%",apply:()=>{this.g.h.v*=.6,this.g.h.D*=.85}},{u:"Legendary",name:"Jackalbane Core",description:"Damage +7, HP +35",s:"Proj Speed 20%",apply:()=>{this.g.h.A+=7,this.g.h.C+=35,this.g.h.o+=35,this.g.h.D*=1.2}},{u:"Common",name:"Left-over Sushi",description:"Heal +20, Regen +2",apply:()=>{this.g.h.S+=2,W(this.g.h,20)}},{u:"Common",name:"Alien Catnip",description:"Heal +30 HP +4",s:"Damage +3",apply:()=>{this.g.h.A+=3,this.g.h.C+=4,W(this.g.h,30)}},{u:"Rare",name:"Iron Jackal Bru",description:"Heal +30, Regen +3",s:"Fire Rate +12%",apply:()=>{this.g.h.S+=3,W(this.g.h,30),this.g.h.v*=.88}},{u:"Legendary",name:"Schrodinger Sandwich",description:"Heal +80, Fire Rate +20%",apply:()=>{W(this.g.h,80),this.g.h.v*=.8}}],this.g=t}}function st(e,i){S.save();let a=i.canvas.width-20;t=[],e.l.forEach((s,h)=>{h=200+105*h,e.B(i,10,h,a,90,s),e.j&&function(e,i,a){t.push({x:10,y:e,w:i,Aa:90,Ta:a})}(h,a,()=>{e.T(s)})}),S.restore()}class ht{constructor(t){this.j=this.isActive=!1,this.l=[],this.g=t}start(){this.j=this.isActive=!0,this.l=this.G();var e=this.g.Y;e.m=e.G[Math.floor(Math.random()*e.G.length)],e.l=e.B[Math.floor(Math.random()*e.B.length)],t=[]}H(t){this.isActive&&(S.save(),t.fillStyle="#000000b3",t.fillRect(0,0,t.canvas.width,t.canvas.height),y(S,this.P(),24,b(),30),this.m(),st(this,t),S.restore())}}class nt extends ht{constructor(t){super(t),this.i=[],this.i=new at(t).i}P(){return"Zone Cleared!"}m(){ot(this.g.Y,"Torx")}G(){let t=[],e=e=>{let i=this.i.filter(i=>i.u===e&&!t.includes(i));return i.length||(i=this.i.filter(e=>"Common"===e.u&&!t.includes(e))),i.length||(i=this.i.filter(e=>!t.includes(e))),i[Math.floor(Math.random()*i.length)]};for(;3>t.length;){let i=100*Math.random();t.push(e(7>=i?"Legendary":19>=i?"Epic":37>=i?"Rare":"Common"))}return t}B(t,e,i,a,s,h){let n="#aaa",r="#1d1d1d";"Rare"===h.u?(n="#60a5fa",r="#132741"):"Epic"===h.u?(n="#c084fc",r="#2a1d38"):"Legendary"===h.u&&(n="#fb923c",r="#41250f"),M(t,e,i,a,s,"#333",n,r),i+=18,t.fillStyle=n,t.font='16px "Courier New", monospace',t.fillText(`[${h.u}]`,e+10,i),i+=18,t.font='900 16px "Courier New", monospace',t.fillStyle="#fff",t.fillText(h.name,e+10,i),t.font='16px "Courier New", monospace',i+=18,t.fillText(h.description,e+10,i),h.s&&t.fillText(h.s,e+10,i+18)}T(e){e.apply(),jt(this.g.ba),this.j=!1,this.i=this.i.filter(t=>"Common"===t.u||t!==e),T(()=>{t=[],this.isActive=!1,K(this.g.I)})}}let rt={0:[{O:"Maggie",text:"Benji, the Iron Jackal has stolen the Warp Core!"},{O:"Maggie",text:"Who knows what he plans to do with it, but it can't be good."},{O:"Torx",text:"That core could power a thousand fleets…"},{O:"Benji",text:"Then what are we waiting for? After him!"}],1:[{O:"Maggie",text:"The closer we get, the more concerning some of these readings are."},{O:"Torx",text:"It looks like space-time itself is... distorting..."},{O:"Jackal",text:"Hahaha, you should be running rather than chasing me!"},{O:"Benji",text:"You will regret stealing The Warp Core once we are done with you Jackal!"}],2:[{O:"Torx",text:"We're close, but I hope we're ready, this area looks very unstable."},{O:"Jackal",text:"Just in time for us to test the Mega Drive! Hahaha"},{O:"Maggie",text:"Watch out Benji! He's turned the Warp Core into a weapon!"},{O:"Benji",text:"This stops now Jackal! Feel my claws"}],4:[{O:"Maggie",text:"It's done. The Jackal is defeated, and The Core is safe."},{O:"Torx",text:"There's plenty of Iron Jackal's allies left to clean up."},{O:"Benji",text:"Let's see how far we can get!"}]};function ot(t,e){t.l&&t.m&&("Maggie"===e?t.l&&lt(t,"Maggie",t.l,120,65):lt(t,"Torx",t.m,120,65))}function lt(t,e,i,a,s){let h=S.g;var n=i.split(" ");let r={x:25,y:a-75,width:40,height:52.5};h.font='900 12px "Courier New", monospace';let o=S.i-20-10;i=[];let l="";for(let t of n)n=l+t+" ",h.measureText(n).width>o?(i.push(l.trim()),l=t+" "):l=n;l.trim()&&i.push(l.trim()),x(h,10,a,S.i-20,Math.max(s,16*i.length+20),4,"#1f1722","#ccc"),t=t.g.V,function(t,e,i,{x:a,y:s,width:h,height:n}){i&&(S.save(),t.fillStyle="#1f1722",t.fillRect(a,s,h,n-2),t.drawImage(i,a,s,h,n),t.strokeStyle="#fff",t.lineWidth=1,t.strokeRect(a,s,h,n-2),v(e,12,a+h/2,s+n+13,"#fff"),S.restore())}(h,e,"Maggie"===e?t.Wa:"Torx"===e?t.fb:"Jackal"===e?t.Ua:t.ia,r),e=a+5+12;for(let t of i)v(t,12,20,e,"#fff","left"),e+=16}class ct{constructor(t){this.isActive=!0,this.j=this.i=0,this.G=["Scrap secured. Upgrade time!","Zone clear. Let's bolt on something new.","Bolted on. Hope it stays put.","System update: paws-itively improved."],this.B=["Nine lives sound plenty, until you spend them like pocket change.","Each choice shaves another chance off your nine lives.","Benji, use your 9 lives wisely.","You're lucky that cats get 9 lives to gamble with."],this.l=this.m=null,this.g=t}start(){S.g.canvas.addEventListener("click",()=>this.isActive&&function(t){if(t.j<(rt[t.i]??[]).length-1)t.j++;else switch(t.isActive=!1,t.j=0,t.i){case 0:t.i=1,T(()=>{t.g.ta(),t.g.paused=!1});break;case 1:t.i=2,T(()=>{Z(t.g.I),t.g.paused=!1});break;case 2:t.i=4,T(()=>{Z(t.g.I),t.g.paused=!1});break;default:T(()=>{Z(t.g.I),t.g.paused=!1})}}(this))}H(){if(this.isActive){var t,e=rt[this.i]??[];0<=this.j&&this.j<e.length&&(t=e[this.j]),t&&lt(this,t.O,t.text,S.j-65,50)}}}class gt{constructor(t){this.i=[{U:3,description:"+ Enemy proj speed",s:"+ Benji move speed",apply:async()=>{this.g.I.$=this.g.I.$.map(t=>(t.D*=1.5,t)),this.g.h.N*=1.2,this.g.h.R*=1.2}},{U:8,description:"Warp to Rift Horizon",s:"(Danger!)",apply:async()=>{this.g.I.J=15,Z(this.g.I)}},{U:7,description:"Benji's movement speed",s:"also increases evasion",apply:async()=>{this.g.h.Ja=!0}},{U:6,description:"Benji's regen is",s:"increased at low health",apply:async()=>{this.g.h.La=!0}},{U:3,description:"+ Enemy health",s:"+ Benji Fire Rate",apply:async()=>{this.g.I.$=this.g.I.$.map(t=>(t.la*=1.5,t)),this.g.h.v*=.85}},{U:2,description:"+ Enemy count",s:"+ Benji Proj Speed",apply:async()=>{this.g.I.ya*=1.5,this.g.h.D*=1.2}},{U:1,description:"Changes Enemy attacks",s:"+ Benji Evasion",apply:async()=>{this.g.I.$=this.g.I.$.map(t=>(t.M="megaspread",t)),this.g.h.K+=5}},{U:5,description:"+ Benji damage",s:"- Benji health",apply:async()=>{this.g.h.C/=1.5,this.g.h.A*=1.5}},{U:0,description:"(Last Chance!)",s:"Megashot",apply:async()=>{this.g.h.M="megaspread"}}],this.g=t}}class dt extends ht{constructor(t){super(t),this.i=[],this.i=new gt(t).i}update(){if(q(this.g.h)&&0<this.g.h.ea){this.g.paused=!0,this.start();var t=this.g.h;t.o=t.C,t.L=!1,t.j=[],t.F=Lt(t.B.V)}}P(){return"Life Exchange"}m(){ot(this.g.Y,"Maggie"),y(S,this.g.h.ea.toString(),38,b(),92),A({x:b()+45,y:80})}G(){let t=this.g.h.ea,e=this.i.filter(t=>0===t.U),i=this.i.filter(e=>0<e.U&&e.U<t);for(let t=i.length-1;0<t;t--){let e=Math.floor(Math.random()*(t+1));[i[t],i[e]]=[i[e],i[t]]}return 1===t&&0<e.length?[e[0]]:i}B(t,e,i,a,s,h){M(t,e,i,a,s,"#201e31","#5d5d8f","#0f0f13"),i+=18,y(S,h.U.toString(),24,b()-13,i+10),A({x:b()+13,y:i+3},10),t.fillStyle="#fff",t.font='16px "Courier New", monospace',i+=36,t.fillText(h.description,e+10,i),h.s&&t.fillText(h.s,e+10,i+18)}T(e){e.apply(),this.g.h.ea-=e.U,jt(this.g.ba),this.j=!1,T(()=>{t=[],this.isActive=!1,this.g.paused=!1})}}class ut{constructor(t){this.X=[],this.paused=!0,this.V=t,this.background=new I,this.Y=new ct(this),this.ka=new nt(this),this.fa=new dt(this)}update(t,e){let{h:i,background:a,I:s}=this;if(a.update(t,i.na),this.fa.update(),!this.fa.isActive&&!this.ka.isActive&&(tt(this.g,t),tt(this.ga,t),!this.paused)){i.update(t,e.x,e.y);for(let e of this.X)e.update(t);this.X=this.X.filter(t=>!t.Ba()&&!q(t)),_(this.g.ja.filter(t=>t.active&&!t.L),this.X.filter(t=>!t.L),(t,e)=>{e.ua(t.A),D(t,6,2)}),_([this.h],this.X,(t,e)=>{t.ua(e.Za)}),_([this.h],this.ga.ja.filter(t=>t.active&&!t.L),(t,e)=>{D(e,6,2);let i=Math.min(t.K,66);t.Ja&&(i+=.05*t.R),100*Math.random()>i&&t.ua(e.A)}),s&&s.update(t)}}H(t){this.ka.isActive?this.ka.H(t):this.fa.isActive?this.fa.H(t):(this.background.H(t),this.X.forEach(e=>e.H(t)),this.h.H(t),this.I&&this.I.H(),et(this.g,t),et(this.ga,t),this.Y.isActive&&this.Y.H())}ta(){this.Y.isActive=!1,this.paused=!0,this.I=new $(this),"true"==localStorage.getItem("SUPER_BENJI_hasDied")&&this.fa.start(),K(this.I)}}class ft{constructor(t){this.g=t}qa(){localStorage.setItem("SUPER_BENJI_hasDied","true"),c2d.addEventListener("click",()=>{window.location.reload()})}Ca(t){y(S,"Game Over",48,b(),100),y(S,"You made it",32,b(),200),y(S,"to level",32,b(),230),y(S,this.g.toString(),48,b(),300),w("Back to Menu",t)}}let pt=440*Math.pow(Math.pow(2,1/12),-9),mt=/^[0-9.]+$/,yt=/\s+/,vt=/(\d+)/,wt={};"B#-C C#-Db D D#-Eb E-Fb E#-F F#-Gb G G#-Ab A A#-Bb B-Cb".split(" ").forEach((t,e)=>{t.split("-").forEach(t=>{wt[t]=e})});class xt{constructor(t){let[e,i]=t.split(yt);t=e.split(vt),this.frequency=pt*Math.pow(Math.pow(2,1/12),wt[t[0]])*Math.pow(2,(parseInt(t[1])||4)-4)||0,this.duration=function(t){return mt.test(t)?parseFloat(t):t.toLowerCase().split("").reduce((t,e)=>{switch(e){case"w":return t+4;case"h":return t+2;case"q":return t+1;case"e":return t+.5;case"s":return t+.25;default:return t}},0)}(i)||0}}function Mt(t,e,i){let a=60/174*(e=t.j[e]).duration,s=a*(1-(t.l||1e-10));return t.gain.gain.cancelScheduledValues(i),t.g.frequency.cancelScheduledValues(i),0<e.frequency?(t.g.frequency.setValueAtTime(e.frequency,i),t.gain.gain.setValueAtTime(1e-4,i),t.gain.gain.exponentialRampToValueAtTime(1,i+.01),t.gain.gain.setValueAtTime(1,i+Math.max(.01,s-.05)),t.gain.gain.exponentialRampToValueAtTime(1e-4,i+s)):(t.gain.gain.cancelScheduledValues(i),t.gain.gain.setValueAtTime(1e-4,i)),i+a}function At(t,e=t.i.currentTime){if(0!==t.j.length){t.createOscillator(),t.gain.gain.setValueAtTime(0,e),t.g.start(e);var i=e;for(e=0;e<t.j.length;e++)i=Mt(t,e,i);e=i+.02,t.gain.gain.setValueAtTime(0,i),t.g.stop(e),t.g.onended=()=>At(t,i)}}class bt{constructor(t,e){this.j=[],this.l=this.G=0,this.m="square",this.g=null,this.T=[],this.i=t,this.gain=this.i.createGain(),this.B=this.i.createGain(),this.P=this.i.createGain(),function(t){let e=t.gain;[["bass",100],["mid",1e3],["treble",2500]].forEach(([,i])=>{let a=t.i.createBiquadFilter();a.type="peaking",a.frequency.value=i,e.connect(a),e=a,t.T.push(a)}),e.connect(t.P),e.connect(t.B)}(this),e&&function(t,...e){e.forEach(e=>t.j.push(e instanceof xt?e:new xt(e)))}(this,...e)}connect(t){this.B.connect(t),this.P.connect(t)}createOscillator(){this.stop(),this.g=this.i.createOscillator(),this.g.type=this.m,this.g.connect(this.gain)}stop(){if(this.g){try{this.g.onended=null;let t=this.i.currentTime;this.gain.gain.cancelScheduledValues(t),this.gain.gain.setValueAtTime(this.gain.gain.value,t),this.gain.gain.linearRampToValueAtTime(0,t+.01),this.g.frequency.cancelScheduledValues(t),this.g.stop(t+.02)}catch{}this.g=null}}}function St(t,e=t.g.currentTime,i){let a=t.g.createOscillator(),s=t.g.createGain();a.type="sine",a.frequency.setValueAtTime(120,e),a.frequency.exponentialRampToValueAtTime(40,e+.08),s.gain.setValueAtTime(i??4,e),s.gain.exponentialRampToValueAtTime(.001,e+.09),a.connect(s).connect(t.i),a.start(e),a.stop(e+.09)}function Tt(t,e=t.g.currentTime,i){var a=t.g.createBuffer(1,.2*t.g.sampleRate,t.g.sampleRate),s=a.getChannelData(0);for(let t=0;t<s.length;t++)s[t]=2*Math.random()-1;(s=t.g.createBufferSource()).buffer=a,(a=t.g.createGain()).gain.setValueAtTime(i??4,e),a.gain.exponentialRampToValueAtTime(.001,e+.2),s.connect(a).connect(t.i),s.start(e),s.stop(e+.2)}function Ct(t,e=t.g.currentTime,i){var a=t.g.createBuffer(1,.05*t.g.sampleRate,t.g.sampleRate),s=a.getChannelData(0);for(let t=0;t<s.length;t++)s[t]=2*Math.random()-1;(s=t.g.createBufferSource()).buffer=a,(a=t.g.createGain()).gain.setValueAtTime(i??2.4,e),a.gain.exponentialRampToValueAtTime(.001,e+.05),s.connect(a).connect(t.i),s.start(e),s.stop(e+.05)}class Bt{constructor(t,e){this.g=t,this.i=e}}function Ft(t){let e=t.g,i=e.currentTime;for(var a=e.createBuffer(1,.3*e.sampleRate,e.sampleRate),s=a.getChannelData(0),h=0;h<s.length;h++)s[h]=2*Math.random()-1;(s=e.createBufferSource()).buffer=a,(a=e.createBiquadFilter()).type="bandpass",a.frequency.value=800,(h=e.createGain()).gain.setValueAtTime(3,i),h.gain.exponentialRampToValueAtTime(.001,i+.3),s.connect(a).connect(h).connect(t.i),s.start(i),s.stop(i+.3),Rt(e,"sine",100,i,.5,t.i,4),Rt(e,"sawtooth",55,i,.3,t.i,2)}function jt(t){[880,1174,1568].forEach((e,i)=>Rt(t.g,"sine",e,t.g.currentTime+.1*i,.6,t.i,.5))}function Rt(t,e,i,a,s,h,n){let r=t.createOscillator();r.type=e,r.frequency.setValueAtTime(i,a),(t=t.createGain()).gain.setValueAtTime(n,a),t.gain.exponentialRampToValueAtTime(.001,a+s),r.connect(t).connect(h),r.start(a),r.stop(a+s)}class kt{constructor(){this.volume=.1,this.j=0,this.T=null,this.P=!1,this.g=new AudioContext,this.B=this.g.createGain(),this.i=this.g.createDynamicsCompressor(),this.G=new Bt(this.g,this.i),this.B.connect(this.g.destination),this.B.gain.value=this.volume,this.i.ratio.value=4,this.i.threshold.value=-12,this.i.connect(this.B),this.m=new bt(this.g,"D4 q;A4 q;B3 q;- q;- q;- q;- q;- q;- f;D4 q;E4 q;B3 q;- q;- q;- q;- q;- q;- f".split(";")),this.m.l=.2,this.m.G=.2,this.m.m="sine",this.m.connect(this.i),this.l=new bt(this.g,"B1 h;- h;B1 h;- h;D2 h;- h;D2 h;- h".split(";")),this.l.l=0,this.l.G=0,this.l.m="triangle";let t=this.g.createGain();t.gain.value=1.5,this.l.connect(t),t.connect(this.i),this.da=60/174/4}stop(){this.m.stop(),this.l.stop(),this.P=!1,this.T&&clearTimeout(this.T),this.j=0}}function It(t,e,i,a,s,h,n,r){t.g.save(),t.g.imageSmoothingEnabled=!1,t.g.drawImage(e,s,h,n,r,i,a,2*n,2*r),t.g.restore()}class Et{constructor(t,e){this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=e,this.g=this.canvas.getContext("2d")}}function Dt(t,e){let i=document.createElement("canvas"),a=i.getContext("2d");i.width=t.width,i.height=t.height,a.drawImage(t,0,0);let s=(t=a.getImageData(0,0,t.width,t.height)).data;for(let t=0;t<s.length;t+=4){if(0===s[t+3])continue;let i=B(e[Math.min(e.length-1,Math.floor(s[t]/(256/e.length)))]||"#000000");s[t]=i.r,s[t+1]=i.ca,s[t+2]=i.b}return a.putImageData(t,0,0),(e=new Image).src=i.toDataURL(),e}async function Pt(t,e){let i=new Image;return i.src=t.canvas.toDataURL(),t=await function(t,e){return new Promise((i,a)=>{t.complete&&0!==t.naturalWidth?i(Dt(t,e)):(t.onload=()=>{i(Dt(t,e))},t.onerror=a)})}(i,e),await t.decode(),t}async function Vt(t,e,i,a,s,h){let n=new Et(2*i,2*a);return It(n,t.sheet,0,0,s,h,i,a),Pt(n,e)}async function qt(t,e,i,a,s){let h=new Et(2*i,42);return It(h,t.sheet,0,0,a,s,i,16),It(h,t.sheet,1,32,47,64,16,5),Pt(h,e)}class Ht{}function Gt(t,e="blue"){return t.g[e]??t.g.blue}function Lt(t,e="grey"){return t.i[e]??t.i.grey}async function Jt(t){for(let[e,i]of a)t.i[e]=await Vt(t.j,i,25,30,4,38)}async function Ot(t){for(let[e,a]of i)t.g[e]=await Vt(t.j,a,3,3,0,65)}async function Wt(){var t=new Ut;let e=new Ht;return t.j=await async function(t){let e=new Image;return e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABEBAMAAADD1i77AAAAHlBMVEUAAABcXFza2toUFBMzMzIhISFHR0cODg53d3eenp6oiQ8+AAAABHRSTlMA/vZm6v66FgAABMZJREFUSMedlM9z0kAUx79oSOBGNCx4U8cfV53RGY9BdxN6C2OWtDeim4XeqJMf9gbaMnirHW3Lf+tukkKtevEBk328T96+H7sP/xCfznfKj1tG6qI59QsYvNIbooJdoFku5ARTSjMYrFTPzJVrlgvAvAaoCEMYidZa80bsNpQPY2Gg5dZALkIOUW5xJxjOPMNV5KQ1rQFq0mkaBR4rI7AP+8xRBsN+lIgS8KgYJ5xTykq8f/iYelPAJFdOGkCJI6SUCafepMS9+MqhvloNzi8ilGHFiUdEFHqlZqTfyDOVuYXhlwuGUpyEqiAzt1SazBYinINg/8uJQImYST4UfloBZpBTV2VxeTU7f/ZEijJw4qU2C2vANWlguljK4eZHVzDAmptEekmSAUVdYRjAKsm/xFOPTtBlUFnQMEDD0Za6a4OsMZNByMXc66IxOn6aBcjSguqsgEDHYg2Ei4X0P3eL3N97mvH0WKQeSmvzIVpB1VIyHbEsD/u9LMqOolSUHexgpblSPH/I5GAURYzneRQy4CcaZxjjWozkA4+9UcEZD/MTVSCD4J4D6m6JjAjraLAcsSiXQnfZGZyTNJ5gK860MYtXgob0SOocyHBzQcn0xhF1G4IRLwrdz5lSY2l/ezSQcgd8n6AXj7osDI5XSiVMPnhEmXcD6MAioe8HaGkPCZL+MnTpDrhyAdJ3qCp1olQOY730cRMIFLAmTMXHyj4dEZFg9LuHeLkFTMjxVOJGmpuOPhGSAm0HWhIjyDHfAS39WmzrtztlewzgBLekMbN3tVVAgNviqs9/iqmvlAudAuf7fwGW2tYHcKx+D/7cu10Oi2yOVlWTPwDZjAAr9HBWqg8f3rIb89SfI6PM6oDzCHes28BZ6nOeMW8PXc45cGdrMaubipRrkQfI+Kei2AHtVg1MtX08UQArinTavgbubGogiy75cYEDnOqCyOOth6tr4OCIF5c4sM45T6OivQW+V89FwQseRa12+7HOAlvg8KJqzrxQ9ow3m+3HTzTQ3Fa4bq9pFUVU5IvG6VvlYo6za+Di5GN1EHihZDzHAVWAniy1nJy+q6IcKSIbqcXlp588SnfXqVexllFsNs8zBRCVJ986MJe9yoP5tXy8mSiEUh9bwOnxF2XJY93uu46LfVdpT7dAtwbM9H6Tv3/pu1V+zx5ux0Yvm5dBRqJvE68IgqoDH2pgZrOsDMKKsgd9kmT5GcyiyOWzGtjEYf6xBPjRoe0kWQGkdmxvo9wkvQrA6xlRw8G3YA2kbTv1jWuuvXFaAcZwyeOua8GQn2K7XwX5PR4OZU7lAsrxYBA53FdAUsTd3qKs/4rs7a3yUBA9kt/6/HPEFRCvbdvWW3QmQh4oIE1cdwLPGRMWJhqwa2B1ReVw5uRhd3TSQUgkER7DworH/siRClgvl2Q4EyknZLlASnurI8bh+15fynyogbVNYpuOQxL3O6pFvSJPAlinNKRTdqaBASHSFuErIUcKSG0mpwGa/ppKfhpUc2ZirDjHBOprRZRTrv43Pc55owaAU+ZWg+VutFfI7AXGA0nLQWHehZbuuxJQSnPKjwNgdhqqPN8Dj6piui+0s6pdHgtwt38iqaCj7ZEIdoMsp3qGbpbx+sF6P/gFd29b4XeVJzIAAAAASUVORK5CYII=",new Promise(i=>{e.onload=async()=>{t.sheet=e,i(t)}})}(e),await Promise.all([Jt(t),Ot(t),(async()=>t.Sa=await Vt(e,h,14,14,0,1))(),(async()=>t.Xa=await Vt(e,n,16,16,0,15))(),(async()=>t.Ra=await Vt(e,r,16,16,16,2))(),(async()=>t.ia=await qt(e,s,18,29,32))(),(async()=>t.fb=await qt(e,g,17,47,49))(),(async()=>t.Wa=await qt(e,d,17,47,32))(),(async()=>t.Ua=await Vt(e,u,16,20,31,48))(),(async()=>t.Ia=await Vt(e,u,32,31,32,0))()]),t}class Ut{constructor(){this.i={},this.g={}}}let Yt=new class{constructor(){this.i=S.g}async qa(){720>=window.innerWidth&&(document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen());let t=await Wt();this.ba=new kt,function(t){if(!t.P){t.P=!0;var e=t.g.currentTime;At(t.m,e+60/174*32),At(t.l,e);var i=()=>{let e=t.g.currentTime;for(;t.j*t.da<e+.1;){let e=t.j*t.da;256<=t.j&&([0,3,6,10,12,15].includes(t.j%16)&&Ct(t.G,e),[0,7].includes(t.j%16)&&St(t.G,e),[4,12].includes(t.j%16)&&Tt(t.G,e)),t.j++}t.T=window.setTimeout(i,25)};i()}}(this.ba),this.g=await async function(t,e){return t.ba=e,t.g=new it(()=>new Y(Gt(t.V))),t.ga=new it(()=>new Y(Gt(t.V,"red"))),t.h=new U(t,Lt(t.V),t.g),t.Y.start(),t}(new ut(t),this.ba),C.start(0,1,1)}Ca(t){this.g&&(this.g.update(t,S.m),this.g.H(this.i),function(t){(function(t){return 0>=t.ea&&t.L&&0===t.j.length})(t.g.h)&&T(()=>{E(new ft(t.g.I.J))})}(this))}Ka(){this.ba.stop()}};class Nt{constructor(){this.ia=null}ta(){E(Yt)}async qa(){this.ia=(await Wt()).ia,c2d.addEventListener("click",this.ta)}Ca(t){let{g:e}=S;S.save(),e.textAlign="center",e.font='900 56px "Courier New", monospace',e.lineJoin="round",e.lineCap="round",e.lineWidth=10,e.strokeStyle="#322d5a",e.strokeText("BENJI",b(),220),e.lineWidth=2,e.strokeStyle="#fe4d2c",e.strokeText("BENJI",b(),220);let i=e.createLinearGradient(0,0,200,0);i.addColorStop(0,"#c95f33"),i.addColorStop(1,"#fed266"),e.fillStyle=i,e.fillText("BENJI",b(),220),v("SUPER",24,b()-65,178,"#8e5439","center","#aa221b",2,Math.PI/-20,"Arial"),e.font='900 14px "Tahoma"',e.fillStyle="#f01b1b",e.fillText("JS13K 2025",55,S.j-10),v("by hseager",14,S.i-60,S.j-11,"#f0f0f0c7"),w("Start Game",t,.7*S.j),this.ia&&e.drawImage(this.ia,b(),113,64,72),S.restore()}Ka(){c2d.removeEventListener("click",this.ta)}}j=new class{constructor(...t){this.g=new Nt,this.g.qa?.(...t)}}(...[]);let zt=performance.now(),Xt=new I;var Zt;(Zt=S.g.canvas).addEventListener("click",e=>{let i=Zt.getBoundingClientRect(),a=Zt.width/i.width*(e.clientX-i.left);e=Zt.height/i.height*(e.clientY-i.top);for(let i of t)a>=i.x&&a<=i.x+i.w&&e>=i.y&&e<=i.y+i.Aa&&i.Ta()}),requestAnimationFrame(function t(e){let i=(e-zt)/1e3;zt=e,S.g.clearRect(0,0,S.i,S.j),Xt.update(i),Xt.H(S.g),j.g.Ca(i),C.update(i),C.H(S.g),requestAnimationFrame(t)})</script>