<!doctype html><title>SpacePi</title><style>*{margin:0;padding:0}body{background:#000;color:#aaa;font:100%/20px 'helvetica neue',helvetica,arial,sans-serif;text-align:center;text-shadow:0 -1px 0 #000}h2{color:#fff;font-size:20px;font-weight:400;margin:0 0 20px}a{color:#fff;font-weight:700;text-decoration:none}a:focus{outline:0}#game-wrap{background:#000;background:-webkit-radial-gradient(center center,circle contain,#111 0,#000 100%);background:-moz-radial-gradient(center center,circle contain,#111 0,#000 100%);background:-o-radial-gradient(center center,circle contain,#111 0,#000 100%);background:radial-gradient(center center,circle contain,#111 0,#000 100%);border:1px solid #222;height:600px;left:50%;margin:-301px 0 0 -481px;position:absolute;top:50%;width:960px}canvas{cursor:crosshair;display:block;left:0;position:absolute;top:0}h1{color:#2f2;font-size:30px;font-weight:400;line-height:30px;margin:0 0 10px}h1 strong{color:#fff}p.desc{color:#666;font-size:11px;margin:0 0 20px}p.desc a{color:#999}p.desc a:hover{color:#fff}.menu{background:#111;height:550px;left:0;padding:50px 50px 0;position:absolute;top:0;width:860px;z-index:2}#level-stats,#overall-stats,#pause,#retry-level,#upgrades-levels{display:none}#pause{background:rgba(20,20,20,.5)}#upgrades-levels{text-align:left}#upgrades-levels h2{text-align:left}#level-stats .divider,#overall-stats .divider{margin:0 auto 20px;width:350px}#guide{margin:0 auto;text-align:left;width:auto}#guide .left{float:left;width:440px}#guide h3{color:#2f2;font-size:18px;font-weight:400;margin:0 0 10px}#guide ul{font-size:11px;margin:0 0 20px}#guide li{list-style:none;margin:0 0 7px}#guide li strong{color:#fff}#guide .pwrup1,#guide .pwrup2,#guide .pwrup3,#guide .pwrup4{cursor:help;padding:0;position:relative}#guide .pwrup1:hover .tip,#guide .pwrup2:hover .tip,#guide .pwrup3:hover .tip,#guide .pwrup4:hover .tip{display:block;font-style:normal}#guide .pwrup1{color:#0094ff}#guide .pwrup2{color:red}#guide .pwrup3{color:#ff00fe}#guide .pwrup4{color:#feff00}#map{background:#000;border:1px solid #222;float:right;height:236px;margin:0 0 20px;position:relative;width:378px}#map div{background:#999;position:absolute}#map span{color:#999;font-size:10px;line-height:10px;position:absolute;width:100%}#map .completion{height:4px;left:10px;top:10px;width:70px}#map .completion span{left:0;top:8px}#map .power{height:4px;left:90px;top:10px;width:70px}#map .power span{left:0;top:8px}#map .score{height:4px;right:60px;top:10px;width:40px}#map .score span{left:0;top:8px}#map .profit{height:4px;right:10px;top:10px;width:40px}#map .profit span{left:0;top:8px}#map .base{background:#2f2;border-radius:100%;height:20px;left:50%;margin:-10px 0 0 -10px;top:50%;width:20px}#map .base span{left:0;top:24px}#map .base-goal{background:0;border:2px solid #131;border-radius:100%;height:76px;left:50%;margin:-40px 0 0 -40px;top:50%;width:76px}#map .base-goal span{left:100%;padding:0 0 0 6px;top:33px}#map .good-line{height:60px;left:115px;margin:-30px 0 0 0;top:50%;width:1px}#map .good-line span{left:-25px;text-align:center;top:64px;width:50px}#map .bad-line{background:#f22;height:1px;left:20px;top:50%;width:60px}#map .bad-line span{left:0;text-align:center;top:5px}#map .bad-line:after{border-left:5px solid #f22;border-bottom:5px solid transparent;border-top:5px solid transparent;content:'';display:block;margin:-5px 0 0 0;position:absolute;right:-5px;top:50%}.button{background:#171717;background:-webkit-linear-gradient(#222,#111);background:-moz-linear-gradient(#222,#111);background:-o-linear-gradient(#222,#111);background:linear-gradient(#222,#111);border:1px solid #000;border-radius:2px;box-shadow:0 1px 0 #222;display:block;height:30px;line-height:30px;margin:0 auto 10px;text-align:center;width:348px}.button span{border-radius:2px;box-shadow:inset 0 1px 0 #333;color:#ccc;display:block;font-size:11px;font-weight:700;padding:0 20px}.button:hover span{background:rgba(255,255,255,.05);color:#fff}.button:active span{background:#111;box-shadow:inset 0 0 10px #000;color:#999}.button.disabled{cursor:default;opacity:.25}.button.disabled span{color:#999}.button.disabled:hover span{background:0;color:#999;cursor:default}.button.max:hover span{background:0;color:#ccc;cursor:default}.button.disabled:active span,.button.max:active span{background:0;box-shadow:none;cursor:default}#funds{color:#fff;display:block;float:right;font-size:20px;line-height:20px;position:relative}#funds.not-enough{color:#f22;top:-10px}.up-list{margin:0 0 20px}.up-list .upgrade-group{float:left;margin:0 15px 0 0}.up-list .upgrade-group.last{margin-right:0}.up-list .button{height:auto;line-height:20px;margin:0 0 15px 0;position:relative;width:158px}.up-list .button:last-child{margin-bottom:0}.up-list .button span{padding:10px 18px}.up-list .button .cost{font-weight:400;margin:0 0 5px}.up-list .button i{font-size:11px;font-style:normal}.up-list .button .available{color:#2f2}.up-list .button .unavailable{color:#f22}.up-list .button .lev{background:#292929;background:-webkit-linear-gradient(#444,#111);background:-moz-linear-gradient(#444,#111);background:-o-linear-gradient(#444,#111);background:linear-gradient(#444,#111);border:1px solid #000;border-radius:50%;display:inline-block;height:7px;margin:0 4px;width:7px}.up-list .upg1 .lev.lev1,.up-list .upg2 .lev.lev1,.up-list .upg2 .lev.lev2,.up-list .upg3 .lev.lev1,.up-list .upg3 .lev.lev2,.up-list .upg3 .lev.lev3,.up-list .upg4 .lev.lev1,.up-list .upg4 .lev.lev2,.up-list .upg4 .lev.lev3,.up-list .upg4 .lev.lev4{background:#fff;background:-webkit-linear-gradient(#eee,#444);background:-moz-linear-gradient(#eee,#444);background:-o-linear-gradient(#eee,#444);background:linear-gradient(#eee,#444);box-shadow:inset 0 1px 0 #fff,0 0 14px rgba(255,255,255,.4)}.up-list .upg5 .lev.lev1,.up-list .upg5 .lev.lev2,.up-list .upg5 .lev.lev3,.up-list .upg5 .lev.lev4,.up-list .upg5 .lev.lev5{background:#4f4;background:-webkit-linear-gradient(#4f4,#050);background:-moz-linear-gradient(#4f4,#050);background:-o-linear-gradient(#4f4,#050);background:linear-gradient(#4f4,#050);box-shadow:inset 0 1px 0 rgba(255,255,255,.85),0 0 14px rgba(0,255,0,.4)}.up-list .value{color:#777;display:none}.up-list .upg0 .value.lev0,.up-list .upg1 .value.lev1,.up-list .upg2 .value.lev2,.up-list .upg3 .value.lev3,.up-list .upg4 .value.lev4,.up-list .upg5 .value.lev5{display:block}.tip{background:#111;background:-webkit-linear-gradient(#222,#000);background:-moz-linear-gradient(#222,#000);background:-o-linear-gradient(#222,#000);background:linear-gradient(#222,#000);border:1px solid #333;border-radius:2px;bottom:100%;box-shadow:0 0 10px 1px #000;color:#ccc;display:none;font-size:11px;font-weight:400;left:50%;line-height:16px;margin:0 0 16px -101px;padding:8px 20px;position:absolute;text-align:left;width:160px;z-index:2}.tip strong{color:#fff}.tip:after,.tip:before{border:1px solid transparent;content:'';height:0;left:50%;position:absolute;top:100%;width:0}.tip:before{border-top-color:#333;border-width:7px;margin-left:-7px;z-index:1}.tip:after{border-top-color:#000;border-width:5px;margin-left:-5px;z-index:2}.up-list .button:hover .tip{display:block}.up-list .button.disabled{cursor:default;opacity:1}.up-list .button.disabled span .availability{color:#f22}.up-list .button.disabled:hover span{background:0;color:#999;cursor:default}.up-list .button.max:hover span{background:0;color:#ccc;cursor:default}.up-list .button.disabled:active span,.up-list .button.max:active span{background:0;box-shadow:inset 0 1px 0 #333;cursor:default}.up-list .button:hover .value{color:#aaa}.up-list .button.max:hover .value{color:#777}#level-status{color:#aaa;display:block;float:right;font-size:11px;line-height:20px;position:relative;text-align:right}#level-status strong{color:#fff;font-weight:700}#level-status em{color:#181;font-style:normal}#level-status em strong{color:#2f2}.level-list{clear:both;margin:0 0 20px;position:relative}.level{clear:none;float:left;height:54px;margin:0 11px 0 0;position:relative;width:54px}.level:last-child{margin-right:0}.level span{font-size:14px;height:44px;line-height:18px;padding:10px 0 0 0;position:relative;text-align:center}.level span i{display:none}.level.perfect-level span i{background:#222;background:-webkit-linear-gradient(#333,#111);background:-moz-linear-gradient(#333,#111);background:-o-linear-gradient(#333,#111);background:linear-gradient(#333,#111);border:1px solid #000;border-radius:100%;box-shadow:0 0 3px rgba(0,0,0,.5);color:#999;display:block;font-style:normal;left:-6px;font-size:10px;height:16px;line-height:16px;position:absolute;text-align:center;top:-6px;width:16px}.level.perfect-level:hover span i{color:#2f2}.level.disabled .level-score{color:#444}.level .level-score{color:#999;bottom:12px;display:block;font-style:normal;font-weight:400;left:0;font-size:10px;width:54px}.level:hover .level-score{color:#fff}.level.disabled:hover .level-score{color:#444}.level-list .level.disabled span{color:#999}.level:first-child span{color:#ff7200}.level:nth-child(2) span{color:#ffe900}.level:nth-child(3) span{color:#9dff00}.level:nth-child(4) span{color:#2aff00}.level:nth-child(5) span{color:#00ff4c}.level:nth-child(6) span{color:#00ffc3}.level:nth-child(7) span{color:#00c7ff}.level:nth-child(8) span{color:#1962ff}.level:nth-child(9) span{color:#5132ff}.level:nth-child(10) span{color:#a319ff}.level:nth-child(11) span{color:#f0e}.level:nth-child(12) span{color:#ff0076}.level:nth-child(13) span{color:red}.level-list .button .tip{text-align:center}.level-list .button:hover .tip{display:block}.level-list .button.disabled:hover .tip{display:none}.level-notes{background:#222;border:1px solid #000;border-radius:100%;cursor:help;color:#ccc;display:inline-block;font-size:11px;font-weight:700;height:16px;line-height:16px;position:relative;text-align:center;vertical-align:middle;width:16px}.level-notes:hover{background:#333;color:#fff}.level-notes:hover .tip{display:block}.level-success{color:#2f2}.level-fail{color:#f22}.perfect{color:#2f2;font-weight:700;margin:0 0 0 5px}table{border-collapse:separate;border-radius:2px;border-spacing:0;box-shadow:0 1px 0 #222;margin:0 auto 20px;width:348px}th{background:#171717;background:-webkit-linear-gradient(#222,#111);background:-moz-linear-gradient(#222,#111);background:-o-linear-gradient(#222,#111);background:linear-gradient(#222,#111);border:1px solid #000;border-radius:2px 2px 0 0;box-shadow:inset 0 1px 0 #333;color:#fff;font-size:14px;padding:6px 16px}td{border-bottom:1px solid #000;border-right:1px solid #000;box-shadow:inset 0 1px 0 #333;color:#fff;font-size:11px;font-weight:700;padding:6px 16px;text-align:left;width:50%}td:first-child{border-left:1px solid #000;color:#ccc;font-weight:400;text-align:right}td .td-note{color:#ccc;font-style:italic;font-weight:400}td .td-note.na{color:#f22}td .best-score{color:#2f2;font-weight:700}tr{background:#222;background:-webkit-linear-gradient(#292929,#1a1a1a);background:-moz-linear-gradient(#292929,#1a1a1a);background:-o-linear-gradient(#292929,#1a1a1a);background:linear-gradient(#292929,#1a1a1a)}tr:last-child td:first-child{border-radius:0 0 0 2px}tr:last-child td:last-child{border-radius:0 0 2px 0}tr:hover td{background:#333;box-shadow:inset 0 1px 0 #444}.clearfix:after,.clearfix:before{content:'';display:table}.clearfix:after{clear:both}.clearfix{zoom:1}.divider{background:#000;border-bottom:1px solid #222;clear:both;height:1px;margin:0 0 20px}#funds,.button span,.level-notes,.level-score,.value,a,td{-webkit-transition:all .3s;-moz-transition:all .3s;-o-transition:all .3s;transition:all .3s}#no-can{display:none;margin:0 auto;width:500px}#no-can p{font-size:12px;text-align:center}#no-can a{color:#4f4}#no-can a:hover{color:#afa}</style><div id=game-wrap><div class=menu id=main><h1><strong>Space</strong>Pi</h1><p class=desc>Created by <a href=http://jackrugile.com target=_blank>Jack Rugile</a> for <a href=https://js13kgames.com/ target=_blank>js13kGames</a><div id=no-can><div class=divider></div><p>Your browser does not support canvas. To play the game, download the latest version of a browser that supports canvas, such as <a href=https://google.com/chrome target=_blank>Google Chrome</a> or <a href=http://mozilla.org/firefox target=_blank>Mozilla Firefox</a>.</div><div id=home-wrap><div class=clearfix id=guide><div class=divider></div><div class=left><h3>Overview</h3><ul><li><strong>Objective</strong> - Create lines to defend against enemy lines. Protect your base until it has grown to its target radius. Collect coins to purchase upgrades. Collect powerups to gain benefits: <span class=pwrup1>Slow Enemies<i class=tip>Enemy movement and spawning are slowed to half speed</i></span>, <span class=pwrup2>Unlimited Power<i class=tip>Unlimited line creation power</i></span>, <span class=pwrup3>Base Generation Boost<i class=tip>Base growth is doubled</i></span>, and <span class=pwrup4>Coin Scatter<i class=tip>Coins are scattered across the level</i></span>.<li><strong>Controls</strong> - Click and drag to create defensive lines, which is limited by your available power. Press the spacebar to pause.<li><strong>Saving</strong> - Game data is saved automatically at the end of levels and after upgrade purchases.<li><li><strong>Scoring</strong> - The lower the better. Beat the levels faster, create fewer lines, create shorter lines, and take less damage to get a better score.<li></ul></div><div id=map><div class=completion><span>Completion</span></div><div class=power><span>Power</span></div><div class=score><span>Score</span></div><div class=profit><span>Profit</span></div><div class=base><span>Base</span></div><div class=base-goal><span>Target Radius</span></div><div class=good-line><span>Defensive Line</span></div><div class=bad-line><span>Enemy Line</span></div></div><div class=divider></div></div><a href=# class=button id=play-game-button><span>Play Game</span></a><a href=# class=button id=overall-stats-button><span>Overall Stats</span></a><a href=# class=button id=reset-game-data-button><span>Reset Game Data</span></a></div></div><div class=menu id=pause><h2 id=paused-title>Paused</h2><a href=# class=button id=resume-level-button><span>Resume Level</span></a><a href=# class=button id=quit-level-button><span>Quit Level</span></a></div><div class=menu id=upgrades-levels><p id=funds>$100<h2>Upgrades</h2><div class="clearfix up-list"><div class=upgrade-group><a href=# class="button upgrade" data-parent=power data-specific=capacity><span class=clearfix><div class=title>Power Capacity</div><div class=cost></div><div class="lev lev1"></div><div class="lev lev2"></div><div class="lev lev3"></div><div class="lev lev4"></div><div class="lev lev5"></div><div class="value lev0">100px Total</div><div class="value lev1">200px Total</div><div class="value lev2">350px Total</div><div class="value lev3">500px Total</div><div class="value lev4">750px Total</div><div class="value lev5">1000px Total</div><p class=tip>Increases the capacity of your power, which is used to create defensive lines.</span></a><a href=# class="button upgrade" data-parent=power data-specific=generation><span class=clearfix><div class=title>Power Generation</div><div class=cost></div><div class="lev lev1"></div><div class="lev lev2"></div><div class="lev lev3"></div><div class="lev lev4"></div><div class="lev lev5"></div><div class="value lev0">30px/Second</div><div class="value lev1">60px/Second</div><div class="value lev2">90px/Second</div><div class="value lev3">120px/Second</div><div class="value lev4">150px/Second</div><div class="value lev5">180px/Second</div><p class=tip>Increases the generation of your power, which is used to create defensive lines.</span></a></div><div class=upgrade-group><a href=# class="button upgrade" data-parent=base data-specific=resistance><span class=clearfix><div class=title>Base Resistance</div><div class=cost></div><div class="lev lev1"></div><div class="lev lev2"></div><div class="lev lev3"></div><div class="lev lev4"></div><div class="lev lev5"></div><div class="value lev0">0 Damage</div><div class="value lev1">-1 Damage</div><div class="value lev2">-2 Damage</div><div class="value lev3">-3 Damage</div><div class="value lev4">-4 Damage</div><div class="value lev5">-5 Damage</div><p class=tip>Increases the resistance of your base, which decreases damage from enemy lines.</span></a><a href=# class="button upgrade" data-parent=base data-specific=generation><span class=clearfix><div class=title>Base Generation</div><div class=cost></div><div class="lev lev1"></div><div class="lev lev2"></div><div class="lev lev3"></div><div class="lev lev4"></div><div class="lev lev5"></div><div class="value lev0">1.2px/Second</div><div class="value lev1">1.8px/Second</div><div class="value lev2">2.4px/Second</div><div class="value lev3">3px/Second</div><div class="value lev4">3.6px/Second</div><div class="value lev5">4.2px/Second</div><p class=tip>Increases the generation of your base, allowing it to reach its target radius faster.</span></a></div><div class=upgrade-group><a href=# class="button upgrade" data-parent=powerups data-specific=chance><span class=clearfix><div class=title>Powerup Chance</div><div class=cost></div><div class="lev lev1"></div><div class="lev lev2"></div><div class="lev lev3"></div><div class="lev lev4"></div><div class="lev lev5"></div><div class="value lev0">2% Chance</div><div class="value lev1">3% Chance</div><div class="value lev2">4% Chance</div><div class="value lev3">5% Chance</div><div class="value lev4">6% Chance</div><div class="value lev5">7% Chance</div><p class=tip>Increases the chance of enemy lines dropping powerups.</span></a><a href=# class="button upgrade" data-parent=powerups data-specific=duration><span class=clearfix><div class=title>Powerup Duration</div><div class=cost></div><div class="lev lev1"></div><div class="lev lev2"></div><div class="lev lev3"></div><div class="lev lev4"></div><div class="lev lev5"></div><div class="value lev0">3 Seconds</div><div class="value lev1">3.5 Seconds</div><div class="value lev2">4 Seconds</div><div class="value lev3">4.5 Seconds</div><div class="value lev4">5 Seconds</div><div class="value lev5">5.5 Seconds</div><p class=tip>Increases the duration of powerups.</span></a></div><div class=upgrade-group><a href=# class="button upgrade" data-parent=magnet data-specific=range><span class=clearfix><div class=title>Magnet Range</div><div class=cost></div><div class="lev lev1"></div><div class="lev lev2"></div><div class="lev lev3"></div><div class="lev lev4"></div><div class="lev lev5"></div><div class="value lev0">50px Radius</div><div class="value lev1">100px Radius</div><div class="value lev2">150px Radius</div><div class="value lev3">200px Radius</div><div class="value lev4">300px Radius</div><div class="value lev5">400px Radius</div><p class=tip>Increases the range of your magnet, which collects coins and powerups.</span></a><a href=# class="button upgrade" data-parent=magnet data-specific=power><span class=clearfix><div class=title>Magnet Power</div><div class=cost></div><div class="lev lev1"></div><div class="lev lev2"></div><div class="lev lev3"></div><div class="lev lev4"></div><div class="lev lev5"></div><div class="value lev0">60px/Second</div><div class="value lev1">120px/Second</div><div class="value lev2">180px/Second</div><div class="value lev3">240px/Second</div><div class="value lev4">300px/Second</div><div class="value lev5">360px/Second</div><p class=tip>Increases the power of your magnet, which collects coins and powerups.</span></a></div><div class="upgrade-group last"><a href=# class="button upgrade" data-parent=coins data-specific=chance><span class=clearfix><div class=title>Coin Chance</div><div class=cost></div><div class="lev lev1"></div><div class="lev lev2"></div><div class="lev lev3"></div><div class="lev lev4"></div><div class="lev lev5"></div><div class="value lev0">50% Chance</div><div class="value lev1">55% Chance</div><div class="value lev2">60% Chance</div><div class="value lev3">65% Chance</div><div class="value lev4">70% Chance</div><div class="value lev5">75% Chance</div><p class=tip>Increases the chance of enemy lines dropping coins.</span></a><a href=# class="button upgrade" data-parent=coins data-specific=amount><span class=clearfix><div class=title>Coin Amount</div><div class=cost></div><div class="lev lev1"></div><div class="lev lev2"></div><div class="lev lev3"></div><div class="lev lev4"></div><div class="lev lev5"></div><div class="value lev0">1 Coin</div><div class="value lev1">1-2 Coins</div><div class="value lev2">1-3 Coins</div><div class="value lev3">1-4 Coins</div><div class="value lev4">1-5 Coins</div><div class="value lev5">1-6 Coins</div><p class=tip>Increases the amount of coins dropped by enemy lines.</span></a></div></div><div class=divider></div><p id=level-status><strong><span id=completed-levels></span>/13</strong> Completed - <em><strong><span id=perfect-levels></span>/13</strong> Perfect</em><h2>Levels <span class=level-notes>i<p class=tip>Best scores are shown for each level. <strong>Lower is better.</strong> Levels marked with a "P", for Perfect, were beaten without any base hits.</span></h2><div class="clearfix level-list"><a href=# class="button level" rel=0><span>1<i>P</i><small class=level-score></small></span><p class=tip>"Noobs Welcome"<br><strong>$5</strong>/Coin</p></a><a href=# class="button level" rel=1><span>2<i>P</i><small class=level-score></small></span><p class=tip>"No Sweat"<br><strong>$10</strong>/Coin</p></a><a href=# class="button level" rel=2><span>3<i>P</i><small class=level-score></small></span><p class=tip>"Yep, Still Easy"<br><strong>$15</strong>/Coin</p></a><a href=# class="button level" rel=3><span>4<i>P</i><small class=level-score></small></span><p class=tip>"Piece of js13cake"<br><strong>$20</strong>/Coin</p></a><a href=# class="button level" rel=4><span>5<i>P</i><small class=level-score></small></span><p class=tip>"You Got This"<br><strong>$25</strong>/Coin</p></a><a href=# class="button level" rel=5><span>6<i>P</i><small class=level-score></small></span><p class=tip>"Ok, Some Sweat"<br><strong>$30</strong>/Coin</p></a><a href=# class="button level" rel=6><span>7<i>P</i><small class=level-score></small></span><p class=tip>"Wait, Hold On"<br><strong>$35</strong>/Coin</p></a><a href=# class="button level" rel=7><span>8<i>P</i><small class=level-score></small></span><p class=tip>"Beware"<br><strong>$40</strong>/Coin</p></a><a href=# class="button level" rel=8><span>9<i>P</i><small class=level-score></small></span><p class=tip>"Lots of Sweat"<br><strong>$45</strong>/Coin</p></a><a href=# class="button level" rel=9><span>10<i>P</i><small class=level-score></small></span><p class=tip>"Clickfest"<br><strong>$50</strong>/Coin</p></a><a href=# class="button level" rel=10><span>11<i>P</i><small class=level-score></small></span><p class=tip>"Don't Break Your Mouse"<br><strong>$55</strong>/Coin</p></a><a href=# class="button level" rel=11><span>12<i>P</i><small class=level-score></small></span><p class=tip>"No Light at the End<br>of the Carpal Tunnel"<br><strong>$60</strong>/Coin</p></a><a href=# class="button level" rel=12><span>13<i>P</i><small class=level-score></small></span><p class=tip>"Hope You're Not as<br>Sensitive as Your Mouse"<br><strong>$65</strong>/Coin</p></a></div><div class=divider></div><a href=# class=button id=return-to-menu-button><span>Return to Menu</span></a></div><div class=menu id=level-stats><h2 id=stats-status></h2><table><tr><th colspan=2>Level Stats<tr><td>Duration:<td id=stats-duration><tr><td>Lines Created:<td id=stats-lines-created><tr><td>Total Line Length:<td id=stats-total-line-length><tr><td>Base Hits:<td id=stats-base-hits><tr><td>Powerups Collected:<td id=stats-powerups-collected><tr><td>Coins Collected:<td id=stats-coins-collected><tr><td>Profit:<td id=stats-profit><tr><td>Score:<td id=stats-score></table><div class=divider></div><a href=# class=button id=retry-level-button><span>Retry Level</span></a><a href=# class=button id=return-to-upgrades-levels-button><span>Return to Upgrades/Levels</span></a></div><div class=menu id=overall-stats><h1><strong>Space</strong>Pi</h1><p class=desc>Created by <a href=http://jackrugile.com target=_blank>Jack Rugile</a> for <a href=https://js13kgames.com/ target=_blank>js13kGames</a><div class=divider></div><table><tr><th colspan=2>Overall Stats<tr><td>Total Lines Created:<td id=overall-lines-created><tr><td>Total Line Length:<td id=overall-line-length><tr><td>Total Base Hits:<td id=overall-base-hits><tr><td>Total Levels Played:<td id=overall-levels-played><tr><td>Total Time Played:<td id=overall-time-played></table><div class=divider></div><a href=# class=button id=return-to-menu-button2><span>Return to Menu</span></a></div><canvas height=600 id=c width=960></canvas></div><script>var SpacePi=function(){var e=this,t=document;e.rand=function(e,t){return~~(Math.random()*(t-e+1)+e)},e.intersection=function(e,t,a,s){var l=(s.x-a.x)*(e.y-a.y)-(s.y-a.y)*(e.x-a.x),r=(t.x-e.x)*(e.y-a.y)-(t.y-e.y)*(e.x-a.x);return 0!=(a=(s.y-a.y)*(t.x-e.x)-(s.x-a.x)*(t.y-e.y))?(r/=a,e=0<=(l/=a)&&1>=l&&0<=r&&1>=r&&{x:e.x+l*(t.x-e.x),y:e.y+l*(t.y-e.y)}):e=!1,e},e.dToR=function(e){return e*(Math.PI/180)},e.arcInRect=function(e,t,a,s,l,r,i){return!(e+a<=s||e-a>=s+r||t+a<=l||t-a>=l+i)},e.pi2=2*Math.PI,e.updateAll=function(e){for(var t=e.length;t--;)e[t]&&e[t].update(t)},e.renderAll=function(e){for(var t=e.length;t--;)e[t]&&e[t].render(t)},e.destroyAll=function(e){for(var t=e.length;t--;)e[t]&&e[t].destroy(t)},e.clear=function(){e.ctx.clearRect(0,0,e.cw,e.ch)},e.commas=function(e){for(x=(e+"").split("."),x1=x[0],x2=1<x.length?"."+x[1]:"",e=/(\d+)(\d{3})/;e.test(x1);)x1=x1.replace(e,"$1,$2");return x1+x2},e.hasClass=function(e,t){return e.className.match(RegExp("(\\s|^)"+t+"(\\s|$)"))},e.addClass=function(t,a){e.hasClass(t,a)||(t.className+=" "+a)},e.rmvClass=function(t,a){e.hasClass(t,a)&&(t.className=t.className.replace(RegExp("(\\s|^)"+a+"(\\s|$)")," "))},e.get=function(e){return t.getElementById(e)},Storage.prototype.setObject=function(e,t){this.setItem(e,JSON.stringify(t))},Storage.prototype.getObject=function(e){return(e=this.getItem(e))&&JSON.parse(e)},Storage.prototype.removeObject=function(e){this.removeItem(e)},e.initGame=function(){e.gameWrap=e.get("game-wrap"),e.c=e.get("c"),t.onselectstart=function(){return!1},e.cw=c.width,e.ch=c.height,e.ctx=c.getContext("2d"),e.ctx.lineWidth=1.5,e.ctx.globalCompositeOperation="lighter",e.setupUser(),e.bindMenuEvents(),e.bindGameplayEvents(),e.initialDelay=140,e.menuMode=!0},e.setupUser=function(){e.user=localStorage.getObject("spacePiUser")||{highestLevelBeaten:0,levels:[{score:0,perfect:!1},{score:0,perfect:!1},{score:0,perfect:!1},{score:0,perfect:!1},{score:0,perfect:!1},{score:0,perfect:!1},{score:0,perfect:!1},{score:0,perfect:!1},{score:0,perfect:!1},{score:0,perfect:!1},{score:0,perfect:!1},{score:0,perfect:!1},{score:0,perfect:!1}],funds:0,upgrades:{power:{capacity:0,generation:0},base:{resistance:0,generation:0},magnet:{range:0,power:0},coins:{chance:0,amount:0},powerups:{chance:0,duration:0}},overall:{linesCreated:0,lineLength:0,baseHits:0,levelsPlayed:0,timePlayed:0}},e.syncDOM()},e.updateUser=function(){localStorage.setObject("spacePiUser",e.user),e.syncDOM()},e.clearUser=function(){localStorage.removeObject("spacePiUser"),e.setupUser(),e.syncDOM()},e.upgrades={power:{capacity:{value:[100,200,350,500,750,1e3],cost:[100,1e3,2e3,8e3,12e3]},generation:{value:[.5,1,1.5,2,2.5,3],cost:[100,1e3,2e3,8e3,12e3]}},base:{resistance:{value:[0,1,2,3,4,5],cost:[100,1e3,2e3,8e3,12e3]},generation:{value:[.02,.03,.04,.05,.06,.07],cost:[100,1e3,2e3,8e3,12e3]}},powerups:{chance:{value:[2,3,4,5,6,7],cost:[50,500,2e3,4e3,8e3]},duration:{value:[3,3.5,4,4.5,5,5.5],cost:[50,500,2e3,4e3,8e3]}},magnet:{range:{value:[50,100,150,200,300,400],cost:[50,500,2e3,4e3,8e3]},power:{value:[1,2,3,4,5,6],cost:[50,500,2e3,4e3,8e3]}},coins:{chance:{value:[50,55,60,65,70,75],cost:[50,500,2e3,4e3,8e3]},amount:{value:[1,2,3,4,5,6],cost:[50,500,2e3,4e3,8e3]}}},e.checkMaxUpgrades=function(){return 5===e.user.upgrades.power.capacity&&5===e.user.upgrades.power.generation&&5===e.user.upgrades.base.resistance&&5===e.user.upgrades.base.generation&&5===e.user.upgrades.powerups.chance&&5===e.user.upgrades.powerups.duration&&5===e.user.upgrades.magnet.range&&5===e.user.upgrades.magnet.power&&5===e.user.upgrades.coins.chance&&5===e.user.upgrades.coins.amount},e.powerupRef=[{name:"Slow Enemies",hue:205},{name:"Unlimited Power",hue:0},{name:"Base Generation Boost",hue:300},{name:"Coin Scatter",hue:60}],e.levels=[];for(var a=0;13>a;a++)e.levels.push({badTick:0,badTickMax:90-6*a,badSpeedMin:80+14*a,badSpeedMax:120+14*a,badLengthMin:142-8*a,badLengthMax:132-8*a,badDamage:7+a,goal:30+11*a});e.initLevel=function(t){e.level=t,e.levelPlaying=!0,e.menuMode=!1,e.mousedown=!1,e.mx=e.cw/2,e.my=e.ch/2,e.dt=0,e.oldTime=Date.now(),e.rumble=!1,e.rumbleLevel=0,e.tempPointLength=0,e.tempPointStart={x:0,y:0},e.tempPointEnd={x:0,y:0},e.goodLines=[],e.goodLines.length=0,e.badLines=[],e.badLines.length=0,e.coins=[],e.coins.length=0,e.powerups=[],e.powerups.length=0,e.blasts=[],e.blasts.length=0,e.debris=[],e.debris.length=0,e.stars=[],e.stars.length=0,e.orbs=[],e.orbs.length=0,e.base={x:e.cw/2,y:e.ch/2,radius:2.1,goal:e.levels[e.level].goal,goalPulseAngle:0,generation:e.upgrades.base.generation.value[e.user.upgrades.base.generation],flicker:0},e.ui={},e.power={capacity:e.upgrades.power.capacity.value[e.user.upgrades.power.capacity],current:e.upgrades.power.capacity.value[e.user.upgrades.power.capacity],rate:e.upgrades.power.generation.value[e.user.upgrades.power.generation]},e.pwrupTimer=0,e.pwrupTimerMax=0,e.pwrupActive=!1,e.upgradesMaxed=!!e.checkMaxUpgrades(),e.makeStarfield(),e.levelStats={startTime:Date.now(),endTime:0,pauseStartTime:0,pauseTimeTotal:0,goodLineTotal:0,goodLineLength:0,coinsCollected:0,profit:0,baseHits:0,powerupsCollected:0,score:0,ticks:0},e.coinPowerupTick=0,e.coinPowerupTickMax=8,e.levelHue=(e.level+1)*(360/13),e.levelEndStatus=[!1,!1],e.levelEndTick=0,e.levelEndTickMax=100,e.syncDOM(),e.loop()},e.updateDelta=function(){var t=Date.now();e.dt=(t-e.oldTime)/16,e.dt=10<e.dt?10:e.dt,e.oldTime=t},e.updateRumble=function(){(!e.levelEndStatus[0]||e.levelEndStatus[0]&&!e.levelEndStatus[1])&&0<e.rumbleLevel&&(e.rumbleLevel-=1*e.dt)},e.updateBase=function(){e.base.goalPulseAngle=360>e.base.goalPulseAngle?e.base.goalPulseAngle+e.base.radius/e.base.goal*10*e.dt:0,e.levelStats.ticks>e.initialDelay&&e.base.radius<e.base.goal&&!e.levelEndStatus[0]&&(e.base.radius+=(e.pwrupActive&&2===e.powerupType?e.base.generation+e.base.generation/2:e.base.generation)*e.dt);for(var t=e.badLines.length;t--;){var a=e.badLines[t],s=a.p1,l=e.base.x-s.x,r=e.base.y-s.y;Math.sqrt(l*l+r*r)<=e.base.radius&&!e.levelEndStatus[0]&&(e.base.radius-=a.damage,e.rumbleLevel=45,e.makeDebrisgroup(e.badLines[t].p1.x,e.badLines[t].p1.y,e.levelHue,50,1,15),e.makeDebrisgroup(e.badLines[t].p1.x,e.badLines[t].p1.y,e.pwrupActive&&0===e.powerupType?205:0,50,1,15),e.makeDebrisLine(e.badLines[t].p1.x,e.badLines[t].p1.y,e.pwrupActive&&0===e.powerupType?205:0,50,e.badLines[t].angle,e.badLines[t].length,30),e.makeBlastgroup(s.x,s.y),e.base.flicker=e.rand(5,12),e.levelStats.baseHits++,e.badLines.splice(t,1))}0===e.rand(0,2)&&e.orbs.push(new e.Orb),0<e.base.flicker&&(e.base.flicker-=1*e.dt),e.base.radius>=e.base.goal&&(e.levelEndStatus=[!0,!0]),2>=e.base.radius&&(e.levelEndStatus=[!0,!1])},e.renderBase=function(){var t=1<=e.base.flicker?e.base.x+e.rand(0,3)-1.5:e.base.x,a=1<=e.base.flicker?e.base.y+e.rand(0,3)-1.5:e.base.y;e.ctx.beginPath(),e.ctx.arc(t,a,0>e.base.radius?0:e.base.radius,0,e.pi2,!1),e.ctx.fillStyle=e.pwrupActive&&2===e.powerupType?"hsl("+e.levelStats.ticks%20/20*360+", "+(50+e.base.radius/e.base.goal*50)+"%, "+(50+Math.abs(180-e.base.goalPulseAngle)/180*20)+"%)":"hsl("+e.levelHue+", "+(50+e.base.radius/e.base.goal*50)+"%, "+(50+Math.abs(180-e.base.goalPulseAngle)/180*20)+"%)",e.ctx.fill(),e.ctx.save(),e.ctx.beginPath(),e.ctx.arc(t,a,0>e.base.radius?0:e.base.radius,0,e.pi2,!1),e.ctx.clip(),e.ctx.beginPath(),e.ctx.arc(t-e.base.radius/3,a-e.base.radius/3,0>e.base.radius?0:1.3*e.base.radius,0,e.pi2,!1);var s=e.ctx.createRadialGradient(t-e.base.radius/3,a-e.base.radius/3,0,t-e.base.radius/3,a-e.base.radius/2,0>e.base.radius?0:1.3*e.base.radius);s.addColorStop(0,"rgba(255,255,255,.3)"),s.addColorStop(1,"rgba(255,255,255,0)"),e.ctx.fillStyle=s,e.ctx.fill(),e.ctx.restore(),e.pwrupActive&&2===e.powerupType&&(s=0>=(s=e.base.radius*(e.base.goalPulseAngle/360))?.01:s,e.ctx.beginPath(),e.ctx.arc(e.base.x,e.base.y,0>s?0:s,0,e.pi2,!1),e.ctx.strokeStyle="rgba(255,255,255,.5)",e.ctx.stroke()),1<=e.base.flicker&&(e.ctx.beginPath(),e.ctx.arc(t,a,0>e.base.radius?0:e.base.radius,0,e.pi2,!1),e.ctx.fillStyle="hsla(0, 0%, 100%, "+e.rand(25,100)/100+")",e.ctx.fill(),e.ctx.fillStyle="hsla(0, 0%, 100%, "+e.rand(1,10)/100+")",e.ctx.fillRect(0,0,e.cw,e.ch))},e.renderBaseGoal=function(){var t=e.levelStats.ticks<=e.initialDelay?e.levelStats.ticks/e.initialDelay*e.base.goal:e.base.goal;e.ctx.beginPath(),e.ctx.arc(e.base.x,e.base.y,0>t?0:t,0,e.pi2,!1),e.ctx.strokeStyle="hsla("+e.levelHue+", 100%, 20%, .35)",e.ctx.stroke(),e.ctx.lineWidth=2,e.ctx.beginPath(),e.ctx.arc(e.base.x,e.base.y,0>t?0:t,e.dToR(e.base.goalPulseAngle),e.dToR(e.base.goalPulseAngle)+Math.PI/3,!1),e.ctx.strokeStyle="hsl("+e.levelHue+", 100%, "+(10+Math.abs(180-e.base.goalPulseAngle)/180*20)+"%)",e.ctx.stroke(),e.ctx.beginPath(),e.ctx.arc(e.base.x,e.base.y,0>t?0:t,e.dToR(e.base.goalPulseAngle+180),e.dToR(e.base.goalPulseAngle+180)+Math.PI/3,!1),e.ctx.stroke(),e.ctx.lineWidth=1.5},e.updatePower=function(){if(0>e.power.current&&(e.power.current=0),e.power.current<e.power.capacity&&(e.power.current+=e.power.rate*e.dt),e.power.current>e.power.capacity&&(e.power.current=e.power.capacity),e.pwrupActive&&1===e.powerupType&&(e.power.current=e.power.capacity),e.mousedown){var t=e.mx-e.tempPointStart.x,a=e.my-e.tempPointStart.y,s=Math.sqrt(t*t+a*a);s<=e.power.current||e.pwrupActive&&1===e.powerupType?(e.tempPointEnd={x:e.mx,y:e.my},e.tempPointLength=s):(t=Math.atan2(a,t),e.tempPointEnd={x:e.tempPointStart.x+Math.cos(t)*e.power.current,y:e.tempPointStart.y+Math.sin(t)*e.power.current},t=e.tempPointEnd.x-e.tempPointStart.x,a=e.tempPointEnd.y-e.tempPointStart.y,e.temptPointLength=Math.sqrt(t*t+a*a))}},e.renderTracer=function(){e.mousedown&&(e.ctx.beginPath(),e.ctx.moveTo(e.tempPointStart.x,e.tempPointStart.y),e.ctx.lineTo(e.mx,e.my),e.ctx.strokeStyle="#222",e.ctx.stroke(),e.ctx.beginPath(),e.ctx.moveTo(e.tempPointStart.x,e.tempPointStart.y),e.ctx.lineTo(e.tempPointEnd.x,e.tempPointEnd.y),e.ctx.strokeStyle="#fff",e.ctx.stroke())},e.goodLine=function(t,a){this.p1=t,this.p2=a;var s=t.x-a.x,l=t.y-a.y;this.length=Math.sqrt(s*s+l*l),this.angle=Math.atan2(l,s),this.pulse=100,this.pulseToggle=!1,this.pulseMin=70,this.pulseMax=100,e.levelStats.goodLineTotal++,e.levelStats.goodLineLength+=this.length},e.goodLine.prototype={update:function(t){this.pulseToggle?(this.pulse+=2,this.pulse>=this.pulseMax&&(this.pulseToggle=!1)):(this.pulse-=2,this.pulse<=this.pulseMin&&(this.pulseToggle=!0));for(var a=e.badLines.length;a--;){var s=e.intersection(this.p1,this.p2,e.badLines[a].p1,e.badLines[a].p2);s&&(e.rumbleLevel=20,e.makeBlastgroup(s.x,s.y),e.badLines[a].destroy(a,s.x,s.y),this.destroy(t,s.x,s.y))}},render:function(){e.ctx.beginPath(),e.ctx.moveTo(this.p1.x,this.p1.y),e.ctx.lineTo(this.p2.x,this.p2.y),e.ctx.strokeStyle="hsl(0, 0%, "+this.pulse+"%)",e.ctx.stroke()},destroy:function(t,a,s){a&&s&&e.makeDebrisgroup(a,s,0,100,1,15),e.makeDebrisLine(this.p1.x,this.p1.y,0,100,this.angle,this.length,30),e.goodLines.splice(t,1)}},e.badLine=function(){switch(e.rand(1,4)){case 1:this.p1={x:e.rand(0,e.cw),y:0};break;case 2:this.p1={x:e.cw,y:e.rand(0,e.ch)};break;case 3:this.p1={x:e.rand(0,e.cw),y:e.ch};break;case 4:this.p1={x:0,y:e.rand(0,e.ch)}}this.angle=Math.atan2(e.ch/2-this.p1.y,e.cw/2-this.p1.x),this.length=e.rand(e.levels[e.level].badLengthMin,e.levels[e.level].badLengthMax),this.p2={x:this.p1.x-Math.cos(this.angle)*this.length,y:this.p1.y-Math.sin(this.angle)*this.length},this.speed=e.rand(e.levels[e.level].badSpeedMin,e.levels[e.level].badSpeedMax)/100,this.damage=e.levels[e.level].badDamage-e.upgrades.base.resistance.value[e.user.upgrades.base.resistance],1>this.damage&&(this.damage=1),this.pulse=45,this.pulseToggle=!1,this.pulseMin=30,this.pulseMax=60},e.badLine.prototype={update:function(){var t=e.pwrupActive&&0===e.powerupType?this.speed/2:this.speed;this.p1.x+=Math.cos(this.angle)*t*e.dt,this.p2.x+=Math.cos(this.angle)*t*e.dt,this.p1.y+=Math.sin(this.angle)*t*e.dt,this.p2.y+=Math.sin(this.angle)*t*e.dt,this.speed+=e.base.radius/e.base.goal/100,this.pulseToggle?(this.pulse+=2,this.pulse>=this.pulseMax&&(this.pulseToggle=!1)):(this.pulse-=2,this.pulse<=this.pulseMin&&(this.pulseToggle=!0))},render:function(){e.ctx.beginPath(),e.ctx.moveTo(this.p1.x,this.p1.y),e.ctx.lineTo(this.p2.x,this.p2.y),e.ctx.strokeStyle=e.pwrupActive&&0===e.powerupType?"hsl("+e.powerupRef[e.powerupType].hue+", 100%, "+this.pulse+"%)":"hsl(0, 100%, "+this.pulse+"%)",e.ctx.stroke()},destroy:function(t,a,s){if(a&&s&&e.makeDebrisgroup(a,s,e.pwrupActive&&0===e.powerupType?205:0,50,1,15),e.makeDebrisLine(this.p1.x,this.p1.y,e.pwrupActive&&0===e.powerupType?205:0,50,this.angle,this.length,30),e.rand(1,100)<=e.upgrades.coins.chance.value[e.user.upgrades.coins.chance]&&!e.upgradesMaxed&&e.makeCoins(a||this.p1.x,s||this.p1.y,5*(e.level+1),e.rand(1,e.upgrades.coins.amount.value[e.user.upgrades.coins.amount])),a&&s&&e.rand(1,100)<=e.upgrades.powerups.chance.value[e.user.upgrades.powerups.chance]&&!e.pwrupActive){var l=e.upgradesMaxed?e.rand(0,2):e.rand(0,3);e.powerups.push(new e.Powerup(a,s,l))}e.badLines.splice(t,1)}},e.makebadLines=function(){e.levelStats.ticks>e.initialDelay&&(e.levels[e.level].badTick>=(e.pwrupActive&&0===e.powerupType?2*e.levels[e.level].badTickMax:e.levels[e.level].badTickMax)?(e.badLines.push(new e.badLine),e.levels[e.level].badTick=0):e.levels[e.level].badTick+=1*e.dt)},e.Coin=function(t,a,s){this.x=t,this.y=a,this.vx=(e.rand(0,100)-50)/100,this.vy=(e.rand(0,100)-50)/100,this.radius=4,this.value=s,this.magnetized=!1,this.xScale=1,this.xScaleGrow=!0,this.collected=!1},e.Coin.prototype={update:function(t){if(this.xScaleGrow&&1<=this.xScale?this.xScaleGrow=!1:!this.xScaleGrow&&.1>=this.xScale&&(this.xScaleGrow=!0),this.xScale=this.xScaleGrow?this.xScale+.05:this.xScale-.05,this.collected)a=e.cw+4-this.x,s=-4-this.y,Math.sqrt(a*a+s*s),s=Math.atan2(s,a),a=Math.cos(s),s=Math.sin(s),this.x+=40*a*e.dt,this.y+=40*s*e.dt;else{var a=e.mx-this.x,s=e.my-this.y,l=Math.sqrt(a*a+s*s);l<=e.upgrades.magnet.range.value[e.user.upgrades.magnet.range]?(this.magnetized=!0,s=Math.atan2(s,a),a=Math.cos(s),s=Math.sin(s),this.x+=a*e.upgrades.magnet.power.value[e.user.upgrades.magnet.power]*e.dt,this.y+=s*e.upgrades.magnet.power.value[e.user.upgrades.magnet.power]*e.dt):(this.magnetized=!1,this.x+=this.vx*e.dt,this.y+=this.vy*e.dt),15>=l&&(e.levelStats.coinsCollected++,e.levelStats.profit+=this.value,this.collected=!0,this.magnetized=!1)}e.arcInRect(this.x,this.y,this.radius,0,0,e.cw,e.ch)||e.coins.splice(t,1)},render:function(){e.ctx.save(),e.ctx.translate(this.x,this.y),e.ctx.scale(this.xScale,1),e.ctx.beginPath(),e.ctx.arc(0,0,0>this.radius?0:this.radius,0,e.pi2,!1),e.ctx.fillStyle=this.magnetized?"hsl(60, 0%, "+140*this.xScale+"%)":"hsl("+e.levelHue+", 100%, "+70*this.xScale+"%)",e.ctx.fill(),e.ctx.restore()}},e.makeCoins=function(t,a,s,l){for(;l--;)setTimeout((function(){e.coins.push(new e.Coin(t+e.rand(0,40)-20,a+e.rand(0,40)-20,s))}),10*l)},e.checkCoinPowerup=function(){e.pwrupActive&&3===e.powerupType&&!e.upgradesMaxed?e.coinPowerupTick<e.coinPowerupTickMax?e.coinPowerupTick+=1*e.dt:(e.coinPowerupTick=0,e.makeCoins(e.rand(0,e.cw),e.rand(0,e.ch),5*(e.level+1),1)):e.coinPowerupTick=0},e.Powerup=function(t,a,s){this.x=t,this.y=a,this.vx=(e.rand(0,100)-50)/50,this.vy=(e.rand(0,100)-50)/50,this.radius=12,this.type=s,this.magnetized=!1,this.angle=0},e.Powerup.prototype={update:function(t){this.angle=360>this.angle?this.angle+5:0;var a=e.mx-this.x,s=e.my-this.y,l=Math.sqrt(a*a+s*s);l<=e.upgrades.magnet.range.value[e.user.upgrades.magnet.range]?(this.magnetized=!0,s=Math.atan2(s,a),a=Math.cos(s),s=Math.sin(s),this.x+=a*e.upgrades.magnet.power.value[e.user.upgrades.magnet.power]/4*e.dt,this.y+=s*e.upgrades.magnet.power.value[e.user.upgrades.magnet.power]/4*e.dt):(this.magnetized=!1,this.x+=this.vx*e.dt,this.y+=this.vy*e.dt),15>=l&&(e.levelStats.powerupsCollected++,e.pwrupActive=!0,e.powerupType=this.type,e.pwrupTimer=60*e.upgrades.powerups.duration.value[e.user.upgrades.powerups.duration],e.pwrupTimerMax=60*e.upgrades.powerups.duration.value[e.user.upgrades.powerups.duration],e.powerups.length=0),e.arcInRect(this,this.y,this.radius,0,0,e.cw,e.ch)||e.powerups.splice(t,1)},render:function(){e.ctx.save(),e.ctx.translate(this.x,this.y),e.ctx.rotate(e.dToR(this.angle)),e.ctx.lineWidth=6;var t=50+Math.abs(180-this.angle)/180*15;e.ctx.strokeStyle="hsl("+e.powerupRef[this.type].hue+", 100%, "+t+"%)",e.ctx.beginPath(),e.ctx.arc(0,0,0>this.radius?0:this.radius,0,e.dToR(60),!1),e.ctx.stroke(),e.ctx.beginPath(),e.ctx.arc(0,0,0>this.radius?0:this.radius,e.dToR(120),e.dToR(180),!1),e.ctx.stroke(),e.ctx.beginPath(),e.ctx.arc(0,0,0>this.radius?0:this.radius,e.dToR(240),e.dToR(300),!1),e.ctx.stroke(),e.ctx.restore()}},e.updateActivePowerup=function(){e.pwrupActive&&(0<e.pwrupTimer?e.pwrupTimer-=1*e.dt:(e.pwrupTimer=0,e.pwrupTimerMax=0,e.pwrupActive=!1))},e.Blast=function(t,a){this.x=t,this.y=a,this.radius=e.rand(4,18)},e.Blast.prototype={update:function(t){this.radius-=.65*e.dt,0>=this.radius&&e.blasts.splice(t,1)},render:function(){var t=this.radius+e.rand(0,2)/3;e.ctx.beginPath(),e.ctx.arc(this.x+e.rand(0,2)-1,this.y+e.rand(0,2)-1,0>t?0:t,0,e.pi2,!1),e.ctx.fillStyle="hsla("+e.levelHue+", 100%, "+e.rand(50,80)+"%, "+e.rand(50,100)/100+")",e.ctx.fill()}},e.makeBlastgroup=function(t,a){e.blasts.push(new e.Blast(t,a)),e.blasts.push(new e.Blast(t+e.rand(0,10)-5,a+e.rand(0,10)-5)),e.blasts.push(new e.Blast(t+e.rand(0,10)-5,a+e.rand(0,10)-5))},e.Debris=function(t,a,s,l,r){this.x=t,this.y=a,this.size=e.rand(1,3)/2,this.speed=(e.rand(0,r)-r/2)/20,this.angle=e.rand(0,360),this.hue=s,this.saturation=100,this.lightness=l,this.alpha=e.rand(75,100)/100,this.decay=e.rand(50,100)/5e3},e.Debris.prototype={update:function(t){var a=e.dToR(this.angle),s=Math.cos(a)*this.speed*this.alpha;a=Math.sin(a)*this.speed*this.alpha;this.x+=s*e.dt,this.y+=a*e.dt,this.alpha-=this.decay*e.dt,0>=this.alpha&&e.debris.splice(t,1)},render:function(){e.ctx.fillStyle="hsla("+this.hue+", "+this.saturation+"%, "+this.lightness+"%, "+this.alpha+")",e.ctx.fillRect(this.x,this.y,this.size,this.size)}},e.makeDebrisgroup=function(t,a,s,l,r,i){for(;i--;){var n=Math.random()*r,o=Math.random()*e.pi2,u=t+Math.cos(o)*n;n=a+Math.sin(o)*n;e.debris.push(new e.Debris(u,n,s,l,100))}},e.makeDebrisLine=function(t,a,s,l,r,i,n){for(;n--;){var o=e.rand(0,i),u=t-Math.cos(r)*o;o=a-Math.sin(r)*o;e.debris.push(new e.Debris(u,o,s,l,20))}},e.Orb=function(){this.x=e.base.x,this.y=e.base.y,this.vx=(e.rand(0,100)-50)/2e4*e.base.radius,this.vy=(e.rand(0,100)-50)/2e4*e.base.radius,this.radius=e.rand(1,4)/4,this.alpha=0,this.alphaMax=e.rand(75,100)/100,this.alphaTrigger=!1,this.decay=e.rand(50,100)/4e3,this.growth=e.rand(50,100)/5e3},e.Orb.prototype={update:function(t){this.x+=this.vx*e.dt,this.y+=this.vy*e.dt,this.alphaTrigger?(this.alpha-=this.decay*e.dt,0>=this.alpha&&e.orbs.splice(t,1)):(this.alpha+=this.growth*e.dt,this.alpha>=this.alphaMax&&(this.alphaTrigger=!0))},render:function(){e.ctx.beginPath(),e.ctx.arc(this.x,this.y,0>this.radius?0:this.radius,0,e.pi2,!1),e.ctx.fillStyle="hsla("+e.levelHue+", "+(50+e.base.radius/e.base.goal*50)+"%, "+(50+Math.abs(180-e.base.goalPulseAngle)/180*20)+"%, "+this.alpha+")",e.ctx.fill()}},e.Star=function(e,t,a,s){this.x=e,this.y=t,this.speed=s/25,this.radius=a,this.saturation=30+5*this.radius,this.lightness=8+3*this.radius},e.Star.prototype={update:function(){this.y+=this.speed*e.dt,this.y-this.radius>=e.ch&&(this.x=e.rand(0,e.cw-this.radius),this.y=-this.radius)},render:function(){e.ctx.beginPath(),e.ctx.arc(this.x,this.y,0>this.radius?0:this.radius,0,e.pi2,!1);var t=0===e.rand(0,30)?e.rand(5,15):0;e.ctx.fillStyle="hsl("+e.levelHue+", "+this.saturation+"%, "+(this.lightness+t)+"%)",e.ctx.fill()}},e.makeStarfield=function(){for(var t=7;t--;){var a=1;e.stars.push(new e.Star(e.rand(0,e.cw-a),e.rand(0,e.ch-a),a,.75)),a+=.25,e.stars.push(new e.Star(e.rand(0,e.cw-a),e.rand(0,e.ch-a),a,2)),a+=.25,e.stars.push(new e.Star(e.rand(0,e.cw-a),e.rand(0,e.ch-a),a,3.25)),a+=.25,e.stars.push(new e.Star(e.rand(0,e.cw-a),e.rand(0,e.ch-a),a,4.5)),a+=.25,e.stars.push(new e.Star(e.rand(0,e.cw-a),e.rand(0,e.ch-a),a,5.75)),a+=.25,e.stars.push(new e.Star(e.rand(0,e.cw-a),e.rand(0,e.ch-a),a,7))}},e.updateUI=function(){var t=2<=e.base.radius?Math.round(e.base.radius):0;e.ui.ratioComplete=t+"/"+e.base.goal,e.ui.percentComplete=Math.round(t/e.base.goal*100)},e.renderUI=function(){if(e.levelStats.ticks<=e.initialDelay){e.ctx.save();var t=(e.initialDelay-e.levelStats.ticks)/100;e.ctx.globalAlpha=1<t?1:t,e.ctx.globalCompositeOperation="source-over",t=32+e.level,e.ctx.font="bold "+t+"px arial",e.ctx.textBaseline="middle",e.ctx.textAlign="center",e.ctx.beginPath(),e.ctx.arc(e.cw/2,e.ch/2,0>e.base.goal?0:e.base.goal,0,e.pi2,!1),e.ctx.fillStyle="#000",e.ctx.fill(),e.ctx.strokeStyle="#171717",e.ctx.stroke(),(t=e.ctx.createLinearGradient(e.cw/2,e.ch/2-t/2,e.cw/2,e.ch/2+t/2)).addColorStop(0,"hsla("+e.levelHue+", 100%, 70%, 1)"),t.addColorStop(1,"hsla("+e.levelHue+", 100%, 40%, 1)"),e.ctx.fillStyle=t,e.ctx.fillText(e.level+1,e.cw/2,e.ch/2),e.ctx.restore()}e.ctx.fillStyle="#aaa",e.ctx.textAlign="left",e.ctx.font="bold 10px arial",e.ctx.fillText("Completion: "+e.ui.ratioComplete+" ("+e.ui.percentComplete+"%)",12,20),e.ctx.fillText("Power: "+Math.round(e.power.current)+"/"+e.power.capacity+" ("+Math.round(e.power.current/e.power.capacity*100)+"%)",156,20);t=Date.now()-e.levelStats.startTime-e.levelStats.pauseTimeTotal;var a=Math.floor(t/1e3)%60;t="",t=(t=(t=0+100*a+100*e.levelStats.goodLineTotal)+e.levelStats.goodLineLength)+500*e.levelStats.baseHits,a=0;e.ctx.fillStyle="#aaa",e.ctx.textAlign="right",e.ctx.font="bold 10px arial",a=e.ctx.measureText("Profit"),e.ctx.fillText("Profit",e.cw-12,20),e.ctx.fillStyle="#fff",e.ctx.font="bold 12px arial";var s=e.ctx.measureText("$"+e.commas(e.levelStats.profit));e.ctx.fillText("$"+e.commas(e.levelStats.profit),e.cw-12,37),a=Math.max(a.width,s.width),e.ctx.fillStyle="#aaa",e.ctx.textAlign="right",e.ctx.font="bold 10px arial",e.ctx.fillText("Score",e.cw-a-36,20),e.ctx.fillStyle="#fff",e.ctx.font="bold 12px arial",e.ctx.fillText(e.commas(Math.round(t)),e.cw-a-36,37),e.ctx.fillStyle="#222",e.ctx.fillRect(12,30,120,8),e.ctx.fillStyle="hsl("+e.levelHue+", "+(50+e.base.radius/e.base.goal*50)+"%, "+(50+Math.abs(180-e.base.goalPulseAngle)/180*20)+"%)",e.ctx.fillRect(12,30,e.base.radius/e.base.goal*120,8),(t=e.ctx.createLinearGradient(12,30,12,34)).addColorStop(0,"rgba(255,255,255,0)"),t.addColorStop(1,"rgba(255,255,255,.2)"),e.ctx.fillStyle=t,e.ctx.fillRect(12,30,120,4),e.ctx.fillStyle="#222",e.ctx.fillRect(156,30,120,8),e.ctx.fillStyle="hsl(0, 0%, "+e.power.current/e.power.capacity*60+"%)",e.ctx.fillRect(156,30,e.power.current/e.power.capacity*120,8),(t=e.ctx.createLinearGradient(156,30,156,34)).addColorStop(0,"rgba(255,255,255,0)"),t.addColorStop(1,"rgba(255,255,255,.2)"),e.ctx.fillStyle=t,e.ctx.fillRect(156,30,120,4),e.pwrupActive&&(e.ctx.fillStyle="#aaa",e.ctx.textAlign="left",e.ctx.font="bold 10px arial",e.ctx.fillText(e.powerupRef[e.powerupType].name,300,20),e.ctx.fillStyle="#222",e.ctx.fillRect(300,30,120,8),e.ctx.fillStyle="hsl("+e.powerupRef[e.powerupType].hue+", 100%, "+(20+e.pwrupTimer/e.pwrupTimerMax*30)+"%)",e.ctx.fillRect(300,30,e.pwrupTimer/e.pwrupTimerMax*120,8),(t=e.ctx.createLinearGradient(300,30,300,34)).addColorStop(0,"rgba(255,255,255,0)"),t.addColorStop(1,"rgba(255,255,255,.2)"),e.ctx.fillStyle=t,e.ctx.fillRect(300,30,120,4))},e.levelEndCycle=function(){e.levelEndStatus[0]&&(e.levelEndTick>=e.levelEndTickMax?e.endLevel():e.levelEndTick+=1*e.dt,e.ctx.globalCompositeOperation="source-over",e.levelEndStatus[1]?(e.destroyAll(e.badLines),e.rumbleLevel+=.01*e.dt,e.ctx.fillStyle="rgba(255,255,255,"+e.levelEndTick/100+")"):(e.destroyAll(e.goodLines),e.ctx.fillStyle="rgba(70,0,0,"+e.levelEndTick/100+")"),e.ctx.fillRect(0,0,e.cw,e.ch),e.ctx.globalCompositeOperation="lighter")},e.endLevel=function(){clearTimeout(e.loopTimeout),e.levelPlaying=!1,e.levelStats.endTime=Date.now(),e.levelStatsCB(e.levelEndStatus[1]),e.level>=e.user.highestLevelBeaten&&e.levelEndStatus[1]&&(e.user.highestLevelBeaten=e.level+1),e.levelEndStatus[1]&&0===e.levelStats.baseHits&&(e.user.levels[e.level].perfect=!0),e.user.funds+=e.levelStats.profit,e.user.overall.linesCreated+=e.levelStats.goodLineTotal,e.user.overall.lineLength+=Math.round(e.levelStats.goodLineLength),e.user.overall.baseHits+=e.levelStats.baseHits,e.user.overall.levelsPlayed+=1,e.user.overall.timePlayed+=e.levelStats.endTime-e.levelStats.startTime-e.levelStats.pauseTimeTotal,e.updateUser()},e.mousedownCB=function(){e.mousedown=!0,e.menuMode||(e.tempPointStart={x:e.mx,y:e.my})},e.mouseupCB=function(){e.mousedown=!1,e.menuMode||e.tempPointStart.x==e.tempPointEnd.x&&e.tempPointStart.y==e.tempPointEnd.y||(e.goodLines.push(new e.goodLine(e.tempPointStart,e.tempPointEnd)),e.power.current-=e.tempPointLength)},e.mousemoveCB=function(t){e.mx=t.pageX-e.c.offsetLeft-e.gameWrap.offsetLeft,e.my=t.pageY-e.c.offsetTop-e.gameWrap.offsetTop},e.bindGameplayEvents=function(){t.addEventListener("mousedown",e.mousedownCB,!1),t.addEventListener("mouseup",e.mouseupCB,!1),t.addEventListener("mousemove",e.mousemoveCB,!1)},e.syncDOM=function(){e.fundsDisplay.innerHTML=e.checkMaxUpgrades()?"$ Maxed":"$"+e.commas(e.user.funds);for(var t=e.upgradeButtons.length;t--;){var a=e.upgradeButtons[t],s=a.getAttribute("data-parent"),l=a.getAttribute("data-specific"),r=e.user.upgrades[s][l];s=e.upgrades[s][l].cost[r]||!1;e.rmvClass(a,"upg0"),e.rmvClass(a,"upg1"),e.rmvClass(a,"upg2"),e.rmvClass(a,"upg3"),e.rmvClass(a,"upg4"),e.rmvClass(a,"upg5"),e.addClass(a,"upg"+r);r=a.querySelectorAll(".cost");var i=(l=!s||s<=e.user.funds)?'<i class="available">Available</i>':'<i class="unavailable">Unavailable</i>';r[0].innerHTML=s?"$"+e.commas(s)+" - "+i:"Maxed",l?e.rmvClass(a,"disabled"):e.addClass(a,"disabled"),s?e.rmvClass(a,"max"):e.addClass(a,"max")}for(t=e.levelButtons.length;t--;)t>e.user.highestLevelBeaten?e.addClass(e.levelButtons[t],"disabled"):e.rmvClass(e.levelButtons[t],"disabled"),e.user.levels[t].perfect?e.addClass(e.levelButtons[t],"perfect-level"):e.rmvClass(e.levelButtons[t],"perfect-level"),e.levelScores[t].innerHTML=0==e.user.levels[t].score?"&#8709;":e.commas(e.user.levels[t].score);for(a=0,s=e.user.levels.length,t=0;t<s;t++)e.user.levels[t].perfect&&a++;e.completedLevelsDisplay.innerHTML=e.user.highestLevelBeaten,e.perfectLevelsDisplay.innerHTML=a},e.menus=t.querySelectorAll(".menu"),e.mainMenu=e.get("main"),e.pauseMenu=e.get("pause"),e.upgradesLevelsMenu=e.get("upgrades-levels"),e.levelStatsMenu=e.get("level-stats"),e.overallStatsMenu=e.get("overall-stats"),e.statsStatus=e.get("stats-status"),e.statsDuration=e.get("stats-duration"),e.statsLinesCreated=e.get("stats-lines-created"),e.statsTotalLineLength=e.get("stats-total-line-length"),e.statsBaseHits=e.get("stats-base-hits"),e.statsPowerupsCollected=e.get("stats-powerups-collected"),e.statsCoinsCollected=e.get("stats-coins-collected"),e.statsProfit=e.get("stats-profit"),e.statsScore=e.get("stats-score"),e.overallStatsLinesCreated=e.get("overall-lines-created"),e.overallStatsLineLength=e.get("overall-line-length"),e.overallStatsLevelsPlayed=e.get("overall-levels-played"),e.overallStatsTimePlayed=e.get("overall-time-played"),e.overallStatsBaseHits=e.get("overall-base-hits"),e.playGameButton=e.get("play-game-button"),e.retryLevelButton=e.get("retry-level-button"),e.returnToMenuButton=e.get("return-to-menu-button"),e.returnToMenuButton2=e.get("return-to-menu-button2"),e.returnToUpgradesLevelsButton=e.get("return-to-upgrades-levels-button"),e.resumeLevelButton=e.get("resume-level-button"),e.quitLevelButton=e.get("quit-level-button"),e.resetGameDataButton=e.get("reset-game-data-button"),e.overallStatsButton=e.get("overall-stats-button"),e.upgradeButtons=t.querySelectorAll(".upgrade"),e.levelButtons=t.querySelectorAll(".level"),e.levelScores=t.querySelectorAll(".level-score"),e.completedLevelsDisplay=e.get("completed-levels"),e.perfectLevelsDisplay=e.get("perfect-levels"),e.fundsDisplay=e.get("funds"),e.pausedTitle=e.get("paused-title"),e.hideMenus=function(){for(var t=e.menus.length;t--;)e.menus[t].style.display="none"},e.playGameCB=function(t){t.preventDefault(),e.hideMenus(),e.upgradesLevelsMenu.style.display="block"},e.startLevelCB=function(t){t.preventDefault(),e.hasClass(this,"disabled")||(e.hideMenus(),t=parseInt(this.getAttribute("rel"),10),e.initLevel(t))},e.pauseLevelCB=function(t){"32"!=t.keyCode&&"click"!=t.type||!e.levelPlaying||(t.preventDefault(),e.menuMode?(e.hideMenus(),e.menuMode=!1,e.oldTime=Date.now(),e.loop(),e.levelStats.pauseTimeTotal+=Date.now()-e.levelStats.pauseStartTime):(e.pausedTitle.innerHTML="Level "+(e.level+1)+" Paused",e.levelStats.pauseStartTime=Date.now(),e.menuMode=!0,e.pauseMenu.style.display="block"))},e.retryLevelCB=function(t){t.preventDefault(),clearTimeout(e.loopTimeout),e.hideMenus(),e.initLevel(e.level)},e.returnToMenuCB=function(t){t.preventDefault(),clearTimeout(e.loopTimeout),e.hideMenus(),e.mainMenu.style.display="block"},e.returnToUpgradesLevelsCB=function(t){t.preventDefault(),clearTimeout(e.loopTimeout),e.hideMenus(),e.upgradesLevelsMenu.style.display="block"},e.quitLevelCB=function(t){t.preventDefault(),e.hideMenus(),e.menuMode=!1,e.base.radius=0,e.levelEndTick=e.levelEndTickMax,e.loop()},e.resetGameDataCB=function(t){t.preventDefault(),confirm("Are you sure you want to reset your game data? This cannot be undone.")&&e.clearUser()},e.upgradeButtonCB=function(t){if(t.preventDefault(),"tip"!=t.target.className&&(e.hasClass(this,"disabled")&&(e.addClass(e.fundsDisplay,"not-enough"),setTimeout((function(){e.rmvClass(e.fundsDisplay,"not-enough")}),300)),!e.hasClass(this,"disabled")&&!e.hasClass(this,"max"))){t=this.getAttribute("data-parent");var a=this.getAttribute("data-specific"),s=e.upgrades[t][a].cost[e.user.upgrades[t][a]]||!1;e.user.upgrades[t][a]++,e.user.funds-=s,e.updateUser(),e.syncDOM()}},e.levelStatsCB=function(t){e.menuMode=!0,e.hideMenus();var a=e.levelStats.endTime-e.levelStats.startTime-e.levelStats.pauseTimeTotal,s=Math.floor(a/1e3/60),l=(a=Math.floor(a/1e3)%60,"");e.levelStats.score=0,e.levelStats.score+=100*a,e.levelStats.score+=100*e.levelStats.goodLineTotal,e.levelStats.score+=e.levelStats.goodLineLength,e.levelStats.score+=500*e.levelStats.baseHits,a=10>a?"0"+a:a,t&&(0==e.user.levels[e.level].score||e.levelStats.score<e.user.levels[e.level].score)&&(e.user.levels[e.level].score=Math.round(e.levelStats.score),l='<br /><span class="best-score">New Best Score!</span>'),e.retryLevelButton.style.display=t?"none":"block",e.statsStatus.innerHTML=t?'<span class="level-success">Level '+(e.level+1)+" Completed Successfully":'<span class="level-fail">Level '+(e.level+1)+" Failed</span>",e.statsDuration.innerHTML=s+":"+a,e.statsLinesCreated.innerHTML=e.levelStats.goodLineTotal,e.statsTotalLineLength.innerHTML=1<=e.levelStats.goodLineTotal?Math.round(e.levelStats.goodLineLength)+'px <span class="td-note">('+Math.round(e.levelStats.goodLineLength/e.levelStats.goodLineTotal)+" Avg.)</span>":0,e.statsBaseHits.innerHTML=t&&0===e.levelStats.baseHits?e.levelStats.baseHits+' <span class="perfect">Perfect!</span>':e.levelStats.baseHits,e.statsPowerupsCollected.innerHTML=e.levelStats.powerupsCollected,e.statsCoinsCollected.innerHTML=e.levelStats.coinsCollected,e.statsProfit.innerHTML="$"+e.commas(e.levelStats.profit),e.statsScore.innerHTML=t?e.commas(Math.round(e.levelStats.score))+' <span class="td-note">(Lower is Better)</span>'+l:e.commas(Math.round(e.levelStats.score))+' <span class="td-note na">(Not Applied)</span>',e.levelStatsMenu.style.display="block"},e.overallStatsCB=function(t){t.preventDefault(),e.menuMode=!0,e.hideMenus();var a=e.user.overall.timePlayed;t=Math.floor(a/1e3/60),a=10>(a=Math.floor(a/1e3)%60)?"0"+a:a;e.overallStatsLinesCreated.innerHTML=e.commas(e.user.overall.linesCreated),e.overallStatsLineLength.innerHTML=e.commas(e.user.overall.lineLength)+' <em class="td-note">(pixels)</em><br /><em class="td-note">That\'s</em> '+(e.user.overall.lineLength/72/12).toFixed(1)+' <em class="td-note">feet at 72ppi</em>',e.overallStatsLevelsPlayed.innerHTML=e.commas(e.user.overall.levelsPlayed),e.overallStatsTimePlayed.innerHTML=t+":"+a+' <em class="td-note">(minutes:seconds)</em>',e.overallStatsBaseHits.innerHTML=e.commas(e.user.overall.baseHits),e.overallStatsMenu.style.display="block"},e.bindMenuEvents=function(){t.addEventListener("keydown",e.pauseLevelCB,!1),e.playGameButton.addEventListener("click",e.playGameCB,!1),e.retryLevelButton.addEventListener("click",e.retryLevelCB,!1),e.returnToMenuButton.addEventListener("click",e.returnToMenuCB,!1),e.returnToMenuButton2.addEventListener("click",e.returnToMenuCB,!1),e.returnToUpgradesLevelsButton.addEventListener("click",e.returnToUpgradesLevelsCB,!1),e.resumeLevelButton.addEventListener("click",e.pauseLevelCB,!1),e.quitLevelButton.addEventListener("click",e.quitLevelCB,!1),e.resetGameDataButton.addEventListener("click",e.resetGameDataCB,!1),e.overallStatsButton.addEventListener("click",e.overallStatsCB,!1);for(var a=e.upgradeButtons.length;a--;)e.upgradeButtons[a].addEventListener("click",e.upgradeButtonCB,!1);for(a=e.levelButtons.length;a--;)e.levelButtons[a].addEventListener("click",e.startLevelCB,!1)},e.loop=function(){e.updateDelta(),0<e.rumbleLevel&&(e.rumble=!0,e.ctx.save(),e.updateRumble(),e.ctx.translate(e.rand(0,e.rumbleLevel/4)-e.rumbleLevel/8,e.rand(0,e.rumbleLevel/4)-e.rumbleLevel/8)),e.clear(),e.updateAll(e.stars),e.renderAll(e.stars),e.renderBaseGoal(),e.updateAll(e.coins),e.renderAll(e.coins),e.checkCoinPowerup(),e.updateAll(e.powerups),e.renderAll(e.powerups),e.updateActivePowerup(),e.makebadLines(),e.updateAll(e.badLines),e.renderAll(e.badLines),e.updatePower(),e.updateAll(e.goodLines),e.renderAll(e.goodLines),e.updateBase(),e.renderBase(),e.updateAll(e.orbs),e.renderAll(e.orbs),e.updateAll(e.blasts),e.renderAll(e.blasts),e.updateAll(e.debris),e.renderAll(e.debris),e.renderTracer(),e.updateUI(),e.renderUI(),e.levelEndCycle(),e.rumble&&(e.ctx.restore(),e.rumble=!1),e.levelStats.ticks++,e.menuMode||(e.loopTimeout=setTimeout(e.loop,16))}},z=document.createElement("canvas");if(z.getContext&&z.getContext("2d")){var sp=new SpacePi;sp.initGame()}else{var homeWrap=document.getElementById("home-wrap"),noCanvas=document.getElementById("no-can");homeWrap.style.display="none",noCanvas.style.display="block"}</script>