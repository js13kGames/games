<!doctype html><meta content="width=device-width,height=device-height,maximum-scale=1,user-scalable=no" name=viewport><title>LOST & ANGRY</title><style>body{background:#111;margin:0}#canvas{display:inline-block;width:110vh;height:auto;background-color:#565656;margin:auto;display:block;z-index:1}#canvas_mobile{display:none;position:fixed;bottom:0;left:0;z-index:2;opacity:.4}#canvas_mobile_gira{display:none;background-color:#000;position:fixed;top:0;left:0;z-index:3;width:100vw;height:100vh}#controles_mobile{display:none;width:100%;height:100px;position:fixed;bottom:0;left:0;z-index:4}#izq_mobile{position:absolute;width:70px;height:80px;display:inline-block;left:10px;top:10px}#der_mobile{position:absolute;width:70px;height:80px;display:inline-block;left:105px;top:10px}#arr_mobile{position:absolute;width:70px;height:80px;display:inline-block;right:115px;top:10px}#accion_mobile{position:absolute;width:70px;height:80px;display:inline-block;right:15px;top:10px}.tecla_mobile{background-color:rgba(255,0,0,.2)}.tecla_mobile.pulsada{background-color:rgba(255,0,0,.4);box-shadow:0 0 2px 6px rgba(255,255,255,.2)}@media (max-width:767px) and (orientation:portrait){#canvas_mobile_gira{display:block!important}}@media (max-width:767px) and (orientation:landscape){#canvas_mobile_gira{display:none!important}}</style><div id=lost><canvas height=600 id=canvas width=840></canvas><canvas height=200 id=canvas_mobile width=100%></canvas><canvas height=100% id=canvas_mobile_gira width=100%></canvas><div id=controles_mobile><span class=tecla_mobile id=izq_mobile></span> <span class=tecla_mobile id=der_mobile></span> <span class=tecla_mobile id=arr_mobile></span> <span class=tecla_mobile id=accion_mobile></span></div></div><script>var t=function(t,i,h,s,a,e,r){this.x=t,this.y=i+r.a/2;var n=1,o=this.x+r.d+15;a||(n=-1,o=this.x-r.d+15),this.x=o,this.size=1,this.xv=35*n+h,this.yv=7*(Math.random()-.5)+s},i=function(t,i,h,s,a,e){this.x=t-e.d/4;var r=Math.floor(e.a/3);this.y=i+e.a/2+a.e(-r,r),this.size=1,this.h=90,this.xv=-1*(.5+Math.random())*5+h,this.yv=7*(Math.random()-.5)+s},h=function(t,i,h,a,e){this.j=[],this.k=25,h&&(this.k=this.k/100),a&&(this.k=this.k/2);for(var r=0;r<this.k;r++)this.j.push(new s(t,i,h,a,e))},s=function(t,i,h,s,a){this.e=function(t,i){return Math.floor(Math.random()*(i-t+1)+t)},this.l=3,this.m=15,this.o=2,this.q=15,s&&(this.l=3,this.m=30,this.o=200,this.q=1e3),this.r=this.e(0,155),this.g="0",this.b=this.e(0,55),h&&(this.r=this.e(0,255),this.g="0",this.b="0"),s&&(this.r=this.e(0,255),this.g=this.e(0,55),this.b=this.e(0,55),a&&(this.r=this.e(0,255),this.g=this.e(0,255),this.b=this.e(0,255))),this.x=t,this.y=i,this.xv=this.e(this.l,this.m),this.yv=this.e(this.l/2,this.m/2),this.xv>0?this.max_x=t+100*Math.random():this.max_x=t-100*Math.random(),this.yv>0?this.max_y=i+100*Math.random():this.max_y=i-100*Math.random(),this.opacidad=Math.random(),this.final=s,this.size=this.e(this.o,this.q)},e=function(t,i,s,e,r,n,o){this.s=0,this.h=0,this.t=4,this.x=i,this.y=s,this.a=12*this.t,this.d=6*this.t+5,this.dx=0,this.dy=0,this.u=7e12,this.v=500,this.shoot_back=1500,this.w=3e4,this.last_left=!1,this.z=800,this.A=t.B(),this.C=140,this.D=500,this.F=t.G+this.d,this.H=-this.d,this.I=0,this.J=Math.random()>.5,this.K=t.B(),this.L=t.B(),this.M=e,this.N=[],this.O=[],this.r=r,this.g=n,this.b=o,this.N[0]=[[,,,1,1,1],[,,1,1,1,1],[,1,1,1,1,1],[1,1,1,1,,,],[,1,1,1,1,1],[,1,1,1,1,1],[,1,1,1,,,],[,,1,1,,,],[1,,1,1,1,,],[1,1,1,1,1,,],[1,1,1,1,1,,],[,,,,,,]],this.O[0]=this.N[0].map((function(t){return t.slice()}));for(var d=0;d<this.O[0].length;d++)this.O[0][d].reverse();this.N[1]=[[1,,,1,,1],[1,1,1,1,,1],[1,1,1,1,1,1],[,1,1,1,,,],[,,1,1,1,1],[,,1,1,1,1],[,,1,1,,,],[,,1,1,,,],[1,,1,1,,1],[1,1,1,1,1,1],[1,1,1,1,1,1],[,,,,,,]],this.O[1]=this.N[1].map((function(t){return t.slice()}));for(d=0;d<this.O[1].length;d++)this.O[1][d].reverse();this.N[2]=[[1,,,,1,1],[1,1,,,1,1],[1,1,1,1,1,1],[,1,1,1,,,],[,,1,1,1,1],[,,1,1,1,1],[,,1,1,1,1],[1,,1,1,,1],[1,1,1,1,,1],[1,1,1,1,1,1],[,1,1,1,1,,],[,,,,,,]],this.O[2]=this.N[2].map((function(t){return t.slice()}));for(d=0;d<this.O[2].length;d++)this.O[2][d].reverse();this.N[3]=[[1,1,1,,,,],[1,1,1,1,1,1],[1,1,1,1,1,1],[,1,1,1,,,],[,,1,1,1,1],[,,1,1,1,1],[,,,1,1,,],[,1,1,1,1,,],[1,1,1,1,1,,],[1,1,1,1,1,,],[,1,1,1,1,,],[,,,,,,]],this.O[3]=this.N[3].map((function(t){return t.slice()}));for(d=0;d<this.O[3].length;d++)this.O[3][d].reverse();this.N[4]=[[,1,,1,,1],[1,1,1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,,,],[1,1,,1,1,1],[1,,,1,1,1],[,,,1,1,1],[,,1,1,1,,],[,1,1,1,1,,],[,1,1,1,1,,],[,1,1,1,1,,],[,,,,,,]],this.O[4]=this.N[4].map((function(t){return t.slice()}));for(d=0;d<this.O[4].length;d++)this.O[4][d].reverse();this.P=this.N[this.M],this.Q=this.O[this.M],this.update=function(i){if(!(t.S.R>t.B()||t.T>t.B()||t.U(this.V,this.W)>t.Y/2)){o<60&&a<t.G/2?(this.Z=!0,t.S.x<this.x?this.J=!0:this.J=!1):this.Z=!1,this.V=this.x+this.d/2,this.W=this.y+this.a/2,this.$=this.dx<0,this._=this.dx>0;var h=this.u*(this.falling?.2:1),s=this.v;this.ddx=0,this.ddy=this.z;var e=!1;if(!this.aa()||this.muerto||t.ba||(e=!0,t.S.ca--),!this.muerto&&!e){var r=Math.random()>.9;if(this.da()&&!this.ea){var n=Math.random(),d=n<.1;n>.8||t.ba||this.fa()&&r?this.jump=!0:d?(this.K=t.B()+1e3,this.jump=!1):this.jump=!1}else this.ga()&&r||this.fa()&&r?this.jump=!0:this.jump=!1;this.J&&t.B()>this.K?(this.ddx=this.ddx-s,this.last_left=!0):this.$&&(this.ddx=this.ddx+h),!this.J&&t.B()>this.K?(this.ddx=this.ddx+s,this.last_left=!1):this._&&(this.ddx=this.ddx-h),this.jump&&!this.ea&&this.A<t.B()&&(this.ddy=this.ddy-this.w,this.ea=!0,this.falling=!0,this.A=t.B()+1e3),this.accion&&(t.counter,this.I)}this.x=this.x+i*this.dx,this.y=this.y+i*this.dy;var l=this.C;this.ddx,this.Z||this.ea||(l=.5*this.C,this.ddx),this.muerto||e?(this.dx=0,this.dy=t.ha(this.dy+i*this.ddy,-this.D,this.D)):(this.dx=t.ha(this.dx+i*this.ddx,-l,l),this.dy=t.ha(this.dy+i*this.ddy,-this.D,this.D)),(this.$&&this.dx>0||this._&&this.dx<0)&&(this.dx=0);for(var c=(this.y+this.a)%t.ja.ia,f=this.y%t.ja.ia,b=!1,u=this.x+5;u<=this.x+this.d-5;u++)t.ka(u,this.y-2)&&(b=!0);for(var y=!1,x=this.x+5;x<=this.x+this.d-5;x++)t.ka(x,this.y+this.a)&&(y=!0);for(var m=!1,v=this.y+5;v<=this.y+this.a-5;v++)t.ka(this.x-6,v)&&(m=!0);for(var g=!1,p=this.y+5;p<=this.y+this.a-5;p++)t.ka(this.x+this.d+2,p)&&(g=!0);this.dy>=0?(this.y+this.a>t.Y&&(this.y=t.Y-this.a,this.dy=0,this.ea=!1,this.falling=!1),y&&(this.dy=0,this.ea=!1,this.falling=!1,c&&(this.y=20*Math.floor((this.y+this.a)/20)-this.a))):this.dy<0&&b&&f&&(this.dy=0),this.dx>0?this.x+this.d>=this.F?(this.x=10,this.dx=-this.dx):g&&(this.dx=0,this.J=!this.J):this.dx<0&&(this.x<=this.H?(this.x=t.G-this.d,this.dx=-this.dx):m&&(this.dx=0,this.J=!this.J))}},this.la=function(i,s,a){var e=this.x+this.dx*i,r=this.y+this.dy*i;if(t.S.x,t.S.dx,t.S.y,t.S.dy,this.aa()&&!this.muerto){t.S.ma=t.B()+2e3;var n=this.x+this.d/2,o=this.y+this.a/2;t.na.push(new h(n,o,!0))}var d=[];d[0]=[[,1,,,1,,]],d[1]=[[,,1,,1,,]],this.muerto?this.L>t.B()?this.last_left?this.h=this.h+1:this.h=this.h-1:this.last_left?this.h=90:this.h=-90:this.ea?(this.s=1,this.h=0):Math.abs(this.dx)>0?t.oa(a,40)<.5?(this.s=0,this.h=-2):(this.s=1,this.h=2):this.h=0,s.save(),s.translate(e,r),s.rotate(this.h*Math.PI/180);var l=this.P,c=0,f=0;this.last_left&&(l=this.Q,x_pistola=10-this.d);var b=1-t.U(this.V,this.W)/250,u="rgba("+this.r+", "+this.g+", "+this.b+", "+b+")";if(this.muerto)if(this.L>t.B()){var y=this.L-t.B();y=(410-y)/3,u="rgba(255, 255, 255, 1)";var x=10*(Math.random()-.5),m=10*(Math.random()-.5),v=10*(Math.random()-.5),g=Math.random()*y+this.a/2,p=Math.random()*y+this.a/2,M=Math.random()*y+this.a/2,S=Math.floor(155*Math.random())+100;s.beginPath(),s.fillStyle="rgba(155,155,"+S+",0.1)",s.arc(x,m,g,2*Math.PI,0,!1),s.closePath(),s.fill(),s.beginPath(),s.fillStyle="rgba(155,155,"+S+",0.2)",s.arc(m,v,p,2*Math.PI,0,!1),s.closePath(),s.fill(),s.beginPath(),s.fillStyle="rgba(155,155,"+S+",0.3)",s.arc(v,x,M,2*Math.PI,0,!1),s.closePath(),s.fill(),c=0,f=0}else this.last_left?(c=-50,f=20,u="rgba(200, 193, 255, "+b/4+")"):(c=-30,f=-50,u="rgba(200, 193, 255, "+b/4+")");t.pa(s,f,c,l,this.t,u),this.muerto||t.pa(s,0,this.a-this.t,d[this.s],this.t,u),s.restore()},this.qa=function(){for(var i=this.x;i<this.x+this.d;i++)for(var h=this.y-5;h<this.y+this.a;h++)if(t.ka(i,h))return!0;return!1},this.ra=function(){this.x=t.e(200,t.G-200),this.y=t.e(0,t.Y/2)},this.da=function(){var i=!1;return this.y+this.a>t.Y-15?i=!1:this.last_left?!t.ka(this.x-5,this.y+this.a+15)&&t.ka(this.x,this.y+this.a+15)&&(i=!0):!t.ka(this.x+this.d+5,this.y+this.a+15)&&t.ka(this.x+this.d,this.y+this.a+15)&&(i=!0),i},this.fa=function(){var i=!1;if(this.last_left)for(var h=this.y-2*this.a;h<=this.y+this.a/2;h++)t.ka(this.x+this.d+20,h)&&!t.ka(this.x+this.d,h)&&(i=!0);else for(h=this.y-2*this.a;h<=this.y+this.a/2;h++)t.ka(this.x-20,h)&&!t.ka(this.x,h)&&(i=!0);return i},this.ga=function(){var i=!1,h=!1,s=!1;if(this.last_left)for(var a=this.y-this.a;a<=this.y+this.a-5;a++)t.ka(this.x-5,a)&&(h=!0),t.ka(this.x-5,a)||(i=!0);else for(var e=this.y-this.a;e<=this.y+this.a-5;e++)t.ka(this.x+this.d+5,e)&&(s=!0),t.ka(this.x+this.d+5,e)||(i=!0);return i&&(h||s)},this.aa=function(){return t.sa(this.x,this.y,this.d,this.a,t.S.x,t.S.y,t.S.d,t.S.a)}},r=function(t,s,a,e,r){this.s=0,this.h=0,this.ta=30,this.x=s,this.y=a,this.a=12*this.ta,this.d=6*this.ta+5,this.dx=0,this.dy=0,this.u=7e12,this.v=500,this.shoot_back=1500,this.w=3e4,this.ua=!1,this.z=e,this.A=t.B(),this.C=140,this.D=500,this.F=t.G+this.d/2,this.H=.65*t.G,this.I=0,this.va=t.B(),this.muerto=!1,this.L=t.B(),this.wa=t.B(),this.xa=2500,this.ca=this.xa,this.ya=t.B(),this.za=function(s){if(!(t.T+1500>t.B())){if(this.ca<0&&!this.Aa)return this.ca=2e3,void t.Ba(!0);this.wa>t.B()&&--this.ca,this.V=this.x+this.d/2,this.W=this.y+this.a/2,this.$=this.dx<0,this._=this.dx>0;var a=this.u*(this.falling?.2:1),e=this.v;this.ddx=0,this.ddy=this.z,!this.aa()||this.muerto||t.ba||(t.S.ca--,t.na.push(new h(t.S.V,t.S.W,!0)),t.S.ma=t.B()+2e3),t.B()>this.va&&(this.Ca(),this.va=t.B()+5e3*Math.random()),this.Da?(this.ddx=this.ddx-e,this.ua=!0):this.$?this.ddx=this.ddx+a:this.Ea?(this.ddx=this.ddx+e,this.ua=!1):this._&&(this.ddx=this.ddx-a),this.Fa()&&!this.ea&&this.A<t.B()&&!t.ba&&(this.ddy=this.ddy-this.w,this.ea=!0,this.falling=!0,this.A=t.B()+300),this.Ga()&&!t.ba&&t.Ha.push(new i(this.x,this.y,0,0,t,this)),this.x=this.x+s*this.dx,this.y=this.y+s*this.dy,this.dx=t.ha(this.dx+s*this.ddx,-this.C,this.C),this.dy=t.ha(this.dy+s*this.ddy,-this.D,this.D),(this.$&&this.dx>0||this._&&this.dx<0)&&(this.dx=0),this.dy>=0&&this.y+this.a>t.Y&&(this.y=t.Y-this.a,this.dy=0,this.ea&&(this.ya=t.B()+t.Ia,t.Ja=t.B()+t.Ia),this.ea=!1,this.falling=!1),this.dx>0?this.x+this.d>=this.F&&(this.x=this.F-this.d):this.dx<0&&this.x<=this.H&&(this.x=this.H)}},this.Ka=function(i,h,s){t.T+3e3>t.B()?t.La=400:t.La=300,t.ba&&!t.Ma&&this.Na();var a=this.x+this.dx*i,e=this.y+this.dy*i,r="#000000";if(this.wa>t.B()){r="#fff000";var n=(this.wa-t.B())/2e3,o=1.2*this.d,d=this.ca/this.xa;h.fillStyle="rgba(11, 204, 0, "+n+")",d<.8&&(h.fillStyle="rgba(224, 239, 20, "+n+")"),d<.6&&(h.fillStyle="rgba(204, 199, 0, "+n+")"),d<.4&&(h.fillStyle="rgba(239, 92, 20, "+n+")"),d<.2&&(h.fillStyle="rgba(255, 0, 0, "+n+")"),h.fillRect(a-.2*this.d,e-40,d*o,20),h.strokeStyle="rgba(255,255,255,"+n+")",h.lineWidth=2,h.strokeRect(a-.2*this.d,e-40,o,20)}t.Ma&&(h.save(),h.translate(a+this.d/2,e+this.a/2),a=50,e=-200,h.rotate(90*Math.PI/180)),que_jugador=[[,,,,1],[1,1,1,1,1],[1,1,1,1,1],[,,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1,1],[,,,,,]],t.pa(h,a,e,que_jugador,this.ta,r,!0),t.pa(h,a-10,e-10,[[,,,,,],[,,,,,],[,,,,,],[,,,,,],[,,,,1],[,,,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[,1,1,1,1],[,,,,,],[,,,,,]],1.1*this.ta,"#ffcad6",!0),t.pa(h,a,e+this.a-this.ta,[[,1,,1,,,]],this.ta,r,!0),t.pa(h,a,e+this.a-this.ta-15,t.Oa,8,"#ffcad6",!0),t.pa(h,a+2*this.ta,e+this.a-this.ta-15,t.Oa,8,"#ffcad6",!0),t.Ma&&h.restore()},this.aa=function(){return t.sa(this.x,this.y,this.d,this.a,t.S.x,t.S.y,t.S.d,t.S.a)},this.Fa=function(){return Math.random()>.998},this.Ga=function(){return Math.random()>.965},this.Ca=function(){this.Da=!1,this.Ea=!1;var t=Math.random();t>.6?this.Da=!0:t>.3&&(this.Ea=!0)},this.Na=function(){var i=this.x-350,h=this.y-100;t.pa(t.ctx,i,h,[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,1,1,1,1,1,,1,1,1,1,,,1,1,1,1,,1,1,1,1,,,1,1,1,,,1,1,1,1,,1,1,1,,,1,1,,1,1,,1,1,,1],[1,,1,1,,,,,1,1,,1,,,,1,1,,,1,1,,1,,,1,1,,1,,1,1,,,,1,1,,1,,1,1,,1,1,,1,1,,1],[1,,1,1,,1,1,,1,1,,1,,,,1,1,,,1,1,,1,,,1,1,1,1,,1,1,1,,,1,1,,1,,1,1,,1,1,,1,1,,1],[1,,1,1,,,1,,1,1,,1,,,,1,1,,,1,1,,1,,,1,1,,1,,1,1,,,,1,1,,1,,,,,,,,,,,1],[1,,1,1,1,1,1,,1,1,1,1,,,,1,1,,,1,1,1,1,,,1,1,1,,,1,1,1,1,,1,1,1,,,1,1,,1,1,,1,1,,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,,,1],[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,,1],[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,1],[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1]],7,"#ffffff")}},n=function(i,h,s,a,e,r){this.s=0,this.h=0,this.Pa=4,this.x=h,this.y=s,this.a=12*this.Pa,this.d=6*this.Pa+5,this.V=this.x+this.d/2,this.W=this.y+this.a/2,this.dx=0,this.dy=0,this.u=850,this.v=850,this.Qa=2500,this.C=220,this.D=550,this.ua=!1,this.z=1e3,this.A=i.B(),this.ma=i.B(),this.w=4e4,this.F=i.G+this.d,this.H=-this.d,this.I=0,this.xa=r,this.ca=r,this.R=i.B(),this.Ra=i.B(),this.Sa=[[,1,,,,,],[,1,1,1,1,1],[,1,1,1,1,1],[,1,1,1,,,],[,1,1,1,1,1],[,1,1,1,1,1],[,1,1,1,1,1],[,1,1,1,1,1],[,1,1,1,1,1],[,1,1,1,1,1],[1,1,1,1,1,1],[,,,,,]],this.Ta=this.Sa.map((function(t){return t.slice()}));for(var n=0;n<this.Ta.length;n++)this.Ta[n].reverse();this.Ua=[[,,1,,,,1,1,,,,],[,1,1,1,1,1,1,1,1,1,1],[,,1,1,1,1,1,1,1,1,1],[,,,1,,,,,,,,],[,,,1,,,,,,,,],[,,1,1,,,,,,,,]],this.Va=this.Ua.map((function(t){return t.slice()}));for(n=0;n<this.Va.length;n++)this.Va[n].reverse();this.za=function(h){if(this.ca<0&&!this.Aa&&(this.ca=0,this.jump=!0,i.Ba(!1)),i.T>i.B())return i.Wa.x=30,i.Wa.y=i.Y-100,void(i.Xa=!1);if(!i.Xa){for(i.Ya(i.Wa);i.Za(i.Wa);)i.Ya(i.Wa);i.Xa=!0}if(!(this.R>i.B())){this.Ra>i.B()&&(this.ca=this.ca+1,this.ca>=i.xa&&(this.ca=this.xa)),i.$a||this._a()&&(i.ab=!0,this.R=i.B()+3e3,this.bb()),this.cb()&&this.Ra<i.B()&&(this.Ra=i.B()+2e3),this.V=this.x+this.d/2,this.W=this.y+this.a/2,this.$=this.dx<0,this._=this.dx>0;var s=this.u*(this.falling?.2:1),a=this.v;if(this.ddx=0,this.ddy=this.z,this.left?(this.ddx=this.ddx-a,this.ua=!0):this.$&&(this.ddx=this.ddx+s),this.right?(this.ddx=this.ddx+a,this.ua=!1):this._&&(this.ddx=this.ddx-s),this.jump&&!this.ea&&this.A<i.B()&&(!i.ba||i.Ma)&&(this.ddy=this.ddy-this.w,this.ea=!0,this.falling=!0,this.A=i.B()+300),this.accion&&i.counter>this.I&&!i.ba){this.db(),this.I=i.counter+3,i.Ja=i.B()+20;var e=!0,r=this.Qa;this.ea&&(r/=2),this.ua?(e=!1,this.ddx=this.ddx+r):this.ddx=this.ddx-r;var n=this;setTimeout((function(){i.eb.push(new t(n.x,n.y-10,-10,-3,e,i,n))}),h/3),setTimeout((function(){i.eb.push(new t(n.x,n.y+10,10,3,e,i,n))}),2*h/3),i.eb.push(new t(this.x,this.y,0,0,e,i,this))}var o=10*this.Qa,d=this.Qa;this.ma-i.B()>1900&&(this.ddx=this.ddx+o*(.5-Math.random()),this.ddy=this.ddy+d*(.5-Math.random())),i.ba&&(this.dx=2e3*h,this.ua=!1,i.Ma&&(this.jump=!0,this.dx=7e3*h)),this.x=this.x+h*this.dx,this.y=this.y+h*this.dy,this.dx=i.ha(this.dx+h*this.ddx,-this.C,this.C),this.dy=i.ha(this.dy+h*this.ddy,-this.D,this.D),(this.$&&this.dx>0||this._&&this.dx<0)&&(this.dx=0);for(var l=(this.y+this.a)%i.ja.ia,c=this.y%i.ja.ia,f=!1,b=this.x+5;b<=this.x+this.d-5;b++)i.ka(b,this.y-2)&&(f=!0);for(var u=!1,y=this.x+5;y<=this.x+this.d-5;y++)i.ka(y,this.y+this.a)&&(u=!0);for(var x=!1,m=this.y+5;m<=this.y+this.a-5;m++)i.ka(this.x-6,m)&&(x=!0);for(var v=!1,g=this.y+5;g<=this.y+this.a-5;g++)i.ka(this.x+this.d+2,g)&&(v=!0);this.dy>=0?(this.y+this.a>i.Y&&(this.y=i.Y-this.a,this.dy=0,this.ea=!1,this.falling=!1),u&&(this.dy=0,this.ea=!1,this.falling=!1,l&&(this.y=20*Math.floor((this.y+this.a)/20)-this.a))):this.dy<0&&f&&c&&(this.dy=0),this.dx>0?(this.x+this.d>=this.F&&(this.x=10),v&&!i.ba&&(this.dx=0)):this.dx<0&&(this.x<=this.H&&(this.x=i.G-this.d,this.y=this.y-20),x&&(this.dx=0))}},this.fb=function(t,h,s,a){i.T>i.B()&&(i.gb?this.hb():this.ib()),i.ba&&i.Ma&&this.jb();var e=this.x+this.dx*t,r=this.y+this.dy*t,n=[];n[0]=[[,,1,,,1]],n[1]=[[,,1,,1,,]],n[2]=[[1,,,1,,,]],n[3]=[[,1,,1,,,]],i.T>i.B()?(this.h*=-1.1,this.h+=-1,opacidad_jugador=300/(i.T-i.B()),opacidad_jugador>1&&(opacidad_jugador=1),this.h=1e3*(opacidad_jugador-1)):this.R>i.B()?(a?(a=-1*a*1.1,this.h=a+-1,h.globalAlpha-=.009):(this.h*=-1.1,this.h+=-1,h.globalAlpha-=.005),opacidad_jugador-=.01):(opacidad_jugador=1,this.ea?(this.s=1,this.h=0):this.left||this.right||i.ba?i.oa(s,30)<.5?(this.left?this.s=2:this.s=0,this.h=-2):this.left?(this.s=3,this.h=2):(this.s=1,this.h=2):this.h=0),h.save(),h.translate(e+this.d/2,r+this.a/2),radius=i.G/3,h.beginPath(),h.arc(0,0,300,0,2*Math.PI,!1);var o=h.createRadialGradient(0,0,.9*radius,this.d/2,this.a/2,0);if(this.ma-i.B()>1700){var d=Math.random()/2;o.addColorStop(0,"rgba(255, 11, 11, 0)"),o.addColorStop(1,"rgba(255, 11, 11, "+d+")")}else this.Ra>i.B()?(o.addColorStop(0,"rgba(122, 255, 122, 0)"),o.addColorStop(1,"rgba(122, 255, 122, 0.2)")):i.ba||(o.addColorStop(0,"rgba(251, 255, 243, 0)"),o.addColorStop(1,"rgba(251, 255, 243, 0.6)"));h.fillStyle=o,h.fill(),h.rotate(this.h*Math.PI/180);var l=this.Sa,c=this.Ua,f=-5;this.ua&&(l=this.Ta,c=this.Va,f=5-this.d),h.translate(-this.d/2,-this.a/2);var b="rgba(210,228,241,"+opacidad_jugador+")";i.pa(h,0,0,l,this.Pa,b),i.pa(h,0,this.a-this.Pa,n[this.s],this.Pa,b),this.kb=0;var u="rgba(143,172,192,"+opacidad_jugador+")";if(h.translate(this.d/2.5,this.a/2),h.rotate(this.h*Math.PI/180),i.ba||i.pa(h,f,0,c,3,u),h.restore(),this.ma>i.B()||this.Ra>i.B()){var y=this.ma;this.Ra>this.ma&&(y=this.Ra);var x=(y-i.B())/2e3,m=2*this.d,v=this.ca/i.xa;h.fillStyle="rgba(11, 204, 0, "+x+")",v<.8&&(h.fillStyle="rgba(224, 239, 20, "+x+")"),v<.6&&(h.fillStyle="rgba(204, 199, 0, "+x+")"),v<.4&&(h.fillStyle="rgba(239, 92, 20, "+x+")"),v<.2&&(h.fillStyle="rgba(255, 0, 0, "+x+")"),h.fillRect(e-this.d/2,r-10,v*m,5),h.strokeStyle="rgba(255,255,255,"+x+")",h.lineWidth=1,h.strokeRect(e-this.d/2,r-10,m,5)}return this.h},this.db=function(){window.disparo_audio.pause(),window.disparo_audio.currentTime=0,window.disparo_audio.play(),window.disparo_audio2.playbackRate=.5,window.disparo_audio2.pause(),window.disparo_audio2.currentTime=0,window.disparo_audio2.play()},this.bb=function(){window.levelup_audio2.pause(),window.disparo_audio.currentTime=0,window.levelup_audio2.play()},this.ib=function(){var t=this.x+this.d+20,h=this.y-60;i.pa(i.ctx,t,h,[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,1,1,,1,,1,1,1,1,,1,1,,,,1,,1,1,1,1,,,1,1,1,1,1,,,1],[1,,,1,1,,1,,1,1,,1,,1,1,1,,1,1,,1,1,,,,,1,,,1,1,,,1],[1,,,1,1,1,1,,1,1,,1,,1,1,,1,,1,,1,1,1,1,,,1,1,,1,1,,,1],[1,,,1,1,,1,,1,1,,1,,1,1,,,,1,,1,1,,,,,,,,,,,,1],[1,,,1,1,,1,,1,1,1,1,,1,1,,,,1,,1,1,1,1,,,,,,1,1,,,1],[1,,,1,1,,1,,1,1,1,1,,1,1,,,,1,,1,1,1,1,,,,,,1,1,,,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[1,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,]],3,"#ffffff")},this.hb=function(){var t=this.x+this.d+20,h=this.y-60;i.pa(i.ctx,t,h,[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,1,1,,,,1,,1,1,1,1,,1,1,,,,1,,1,1,,1,1,,,1],[1,,,1,1,1,,1,1,,1,1,,1,,1,1,1,,1,1,,1,1,,1,1,,,1],[1,,,1,1,,1,,1,,1,1,,1,,1,1,,1,,1,,1,1,,1,1,,,1],[1,,,1,1,,,,1,,1,1,,1,,1,1,,,,1,,1,1,,1,1,,,1],[1,,,1,1,,,,1,,1,1,1,1,,1,1,,,,1,,,,,,,,,1],[1,,,1,1,,,,1,,1,1,1,1,,1,1,,,,1,,1,1,,1,1,,,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,,1,,,,,,,,,,,,,,,,,,,,,,,,,,,],[1,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,]],3,"#ffffff")},this.jb=function(){var t=this.x+this.d+20,h=this.y-90;i.pa(i.ctx,t,h,[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,1,1,,,,1,,1,1,1,1,,1,1,,,,1,,,1,1,1,1,,1,1,,,,1,1,1,1,,1,1,1,1,,1,1,1,,,1,1,1,1,,1,1,,1,1,,1],[1,,,1,1,1,,1,1,,1,1,,1,,1,1,1,,1,1,,,1,1,,,,1,1,,,,1,1,,,,1,1,,,,1,1,,1,,1,1,,,,1,1,,1,1,,1],[1,,,1,1,,1,,1,,1,1,,1,,1,1,,1,,1,,,1,1,1,1,,1,1,,,,1,1,1,,,1,1,1,,,1,1,,1,,1,1,1,1,,1,1,,1,1,,1],[1,,,1,1,,,,1,,1,1,,1,,1,1,,,,1,,,1,1,1,1,,1,1,,,,1,1,1,,,1,1,1,,,1,1,1,,,1,1,1,1,,1,1,,1,1,,1],[1,,,1,1,,,,1,,1,1,1,1,,1,1,,,,1,,,,,,1,,1,1,,,,1,1,,,,1,1,,,,1,1,,,,,,,1,,1,1,,1,1,,1],[1,,,1,1,,,,1,,1,1,1,1,,1,1,,,,1,,,1,1,1,1,,1,1,1,1,,1,1,1,1,,1,1,1,1,,1,1,,,,1,1,1,1,,,,,,,,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,1,,1,1,,1],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1],[1,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[1,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,]],3,"#ffffff")},this._a=function(){var t=i.Wa.x+i.Wa.d/3,h=i.Wa.y+i.Wa.d/3,s=i.Wa.d/3,a=i.Wa.d/3;return i.sa(this.x,this.y,this.d,this.a,t,h,s,a)},this.cb=function(){if(!i.$a)return void 0!==i.lb.x&&i.sa(this.x,this.y,this.d,this.a,i.lb.x,i.lb.y,i.lb.d,i.lb.a)}},o={songData:[{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[1,2,3,4,5,6,7,8,7,9],c:[{n:[122,120,122,110,,110,,122,120,122,110,,122,120,122,110,,110,,122,120,122,110,,120,122,110,,122,120,122,110,,,,,,,,,,,,,,,,,,,,,,,,,,,,,125,124,125],f:[]},{n:[,110,,122,120,122,110,,122,120,122,110,,110,,122,120,122,110,,120,122,110,,120,122,120,110,,110,,110,,,,125,124,125,,,125,124,125,,,,,129,127,129,117,,132,134,122],f:[]},{n:[,110,,110,,110,110,110,120,122,120,110,,110,,110,117,116,115,113,119,118,117,116,120,122,120,110,,110,,110],f:[]},{n:[,110,,110,,110,110,110,120,122,120,110,,110,117,116,119,118,117,116,115,114,113,112,110,110,,110,122,,110,110],f:[]},{n:[,110,110,,,,,,110,110,,110,122,,117,116,119,118,121,120,123,124,126,127,110,110,,110,122,,110,110],f:[]},{n:[,110,110,,,,,,110,110,,110,122,,,117,119,113,,,116,111,,,112,112,,112,124,,,124],f:[]},{n:[,124,124,,122,124,125,122,124,,112,,124,,,124,,124,112,,120,119,117,110,,,110,,,,110,110],f:[]},{n:[,,110,,,,110,110,,,110,,,,110,110,,,110,,,,110,,112,,112,,124,,112,124],f:[]},{n:[,,110,,,,110,110,,,110,,,,110,110,,,110,,,,110],f:[]}]},{i:[0,160,128,1,0,160,128,0,1,210,4,7,41,0,0,0,60,4,1,2,255,0,0,32,61,5,32,6],p:[1,2,3,4,5,6,7,8,7,9,10],c:[{n:[134,132,134,122,,122,,134,132,134,122,,134,132,134,122,,122,,134,132,134,122,,132,134,122,,134,132,134,122],f:[]},{n:[,110,,122,120,122,110,,122,120,122,110,,110,,122,120,122,110,,120,122,110,,118,,,,142,,,118],f:[]},{n:[,,118,,142,,,118,118,,,,142,,,118,,,,,142,118,,,118,,,,142,,,118],f:[]},{n:[118,,,,142,,,118,118,118,,,142,,118,,118,,,118,142,,,,118,118,,,142,,118,118],f:[]},{n:[,118,118,,142,,,,118,118,,118,142,,,,142,118,,,142,118,,,118,118,,118,142,,118,118],f:[]},{n:[,118,118,,142,,,,118,118,,118,142,,,118,142,118,,,142,118,,,118,118,,118,142,,,118],f:[]},{n:[,118,118,,142,,118,,118,,,,142,,118,,118,118,,,142,118,118,118,,,118,,142,,118,118],f:[]},{n:[,,118,,142,,118,118,,,118,,142,,118,118,,,118,,142,,118,,118,,118,,142,,118,118],f:[]},{n:[,,118,,142,,118,118,,,118,,142,,118,118,,,118,,142,,118,118,,,,,118],f:[]},{n:[118,,,,118,,,,154],f:[]}]},{i:[0,0,140,0,0,0,140,0,0,60,4,10,34,0,0,0,187,5,0,1,239,135,0,32,108,5,16,4],p:[,2,1,1,1,1,1,1,1,1],c:[{n:[154,,154,,154,,154,,154,,154,,154,,154,,154,,154,,154,,154],f:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,154,,154,,154,,154],f:[]}]},{i:[0,255,128,0,0,154,128,9,0,0,7,5,52,0,0,0,61,0,0,2,255,0,0,32,47,3,163,4],p:[,2,3,4,5,6,7,8,9,10],c:[{n:[],f:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,156,,,155,,,153],f:[]},{n:[,,,,,,151,153,149,,,,,,,,151,,,,,,,,149,,,148,,,146],f:[]},{n:[,,,,,,144,146,143,,,,,,,,139,,,,137,,,,141,,,,,,140],f:[]},{n:[,,,,137,,,,,,140,137,136,,141,140,143,142,145,144,147,148,150,151,141,,,,,,140],f:[]},{n:[,,,,141,,143,,,,144,,,,146,,,,148,149,152,,,,148,,,146,,,144],f:[]},{n:[143,,,,,,141,143,144,,,,,146,144,143,,,,,,,,144,,,,,,,,143],f:[]},{n:[,,143,,,,141,,,,141,,,,,137,141,137,136,,,,,,153,,,149,,,148],f:[]},{n:[148,,,,,,146,148,149,,,,,153,149,148,,,,,,,,134,,,,,137,,,128],f:[]},{n:[,,,,137,,,127,,,,,137,,,125,,,,,124,,,123],f:[]}]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,131,7],p:[,,,,,,,,,1,2],c:[{n:[,,,,,,,,,,,,,,,,,,,,,,,111,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,130,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,123],f:[]},{n:[,,,,,,,,110,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,117,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,122],f:[]}]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]}],rowLen:5513,patternLen:32,endPattern:12},d={songData:[{i:[0,160,128,1,0,160,128,3,1,0,148,31,41,106,5,0,60,4,1,2,255,117,0,32,61,5,57,4],p:[1],c:[{n:[154],f:[]}]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]}],rowLen:3308,patternLen:32,endPattern:2},l={songData:[{i:[3,170,128,0,3,156,128,0,1,218,4,24,59,0,0,1,55,4,1,2,67,115,124,190,67,6,127,6],p:[1],c:[{n:[128],f:[]}]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]}],rowLen:3308,patternLen:32,endPattern:2},c=function(){var t,i,h,s,a,e=function(t){return Math.sin(6.283184*t)},r=function(t){return.003959503758*Math.pow(2,(t-128)/12)},n=function(t,i,h){var s,a,e,n,d,l,c,f=o[t.i[0]],b=t.i[1],u=t.i[3],y=o[t.i[4]],x=t.i[5],m=t.i[8],v=t.i[9],g=t.i[10]*t.i[10]*4,p=t.i[11]*t.i[11]*4,M=t.i[12]*t.i[12]*4,S=1/M,_=t.i[13],w=h*Math.pow(2,2-t.i[14]),B=new Int32Array(g+p+M),P=0,k=0;for(s=0,a=0;s<g+p+M;s++,a++)a>=0&&(a-=w,l=r(i+(15&(_=_>>8|(255&_)<<4))+t.i[2]-128),c=r(i+(15&_)+t.i[6]-128)*(1+8e-4*t.i[7])),e=1,s<g?e=s/g:s>=g+p&&(e-=(s-g-p)*S),n=l,u&&(n*=e*e),d=f(P+=n)*b,n=c,m&&(n*=e*e),d+=y(k+=n)*x,v&&(d+=(2*Math.random()-1)*v),B[s]=80*d*e|0;return B},o=[e,function(t){return t%1<.5?1:-1},function(t){return t%1*2-1},function(t){var i=t%1*4;return i<2?i-1:3-i}];this.init=function(e){t=e,i=e.endPattern-2,h=0,s=e.rowLen*e.patternLen*(i+1)*2,a=new Int32Array(s)},this.generate=function(){var r,d,l,c,f,b,u,y,x,m,v,g,p,M,S=new Int32Array(s),_=t.songData[h],w=t.rowLen,B=t.patternLen,P=0,k=0,I=!1,j=[];for(l=0;l<=i;++l)for(u=_.p[l],c=0;c<B;++c){var L=u?_.c[u-1].f[c]:0;L&&(_.i[L-1]=_.c[u-1].f[c+B]||0,L<15&&(j=[]));var W=o[_.i[15]],E=_.i[16]/512,R=Math.pow(2,_.i[17]-9)/w,G=_.i[18],Y=_.i[19],D=43.23529*_.i[20]*3.141592/44100,C=1-_.i[21]/255,z=1e-5*_.i[22],O=_.i[23]/32,N=_.i[24]/512,A=6.283184*Math.pow(2,_.i[25]-9)/w,T=_.i[26]/255,q=_.i[27]*w;for(v=(l*B+c)*w,f=0;f<4;++f)if(b=u?_.c[u-1].n[c+f*B]:0){j[b]||(j[b]=n(_,b,w));var V=j[b];for(d=0,r=2*v;d<V.length;d++,r+=2)S[r]+=V[d]}for(d=0;d<w;d++)(m=S[y=2*(v+d)])||I?(g=D,G&&(g*=W(R*y)*E+.5),k+=(g=1.5*Math.sin(g))*(p=C*(m-k)-(P+=g*k)),m=3==Y?k:1==Y?p:P,z&&(m=(m*=z)<1?m>-1?e(.25*m):-1:1,m/=z),I=(m*=O)*m>1e-5,M=m*(1-(x=Math.sin(A*y)*N+.5)),m*=x):M=0,y>=q&&(M+=S[y-q+1]*T,m+=S[y-q]*T),S[y]=0|M,S[y+1]=0|m,a[y]+=0|M,a[y+1]+=0|m}return++h/8},this.createWave=function(){var t=2*s-8,i=t-36,h=new Uint8Array(44+2*s);h.set([82,73,70,70,255&t,t>>8&255,t>>16&255,t>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,255&i,i>>8&255,i>>16&255,i>>24&255]);for(var e=0,r=44;e<s;++e){var n=a[e];n=n<-32767?-32767:n>32767?32767:n,h[r++]=255&n,h[r++]=n>>8&255}return h},this.getData=function(t,i){for(var h=2*Math.floor(44100*t),s=new Array(i),e=0;e<2*i;e+=1){var r=h+e;s[e]=t>0&&r<a.length?a[r]/32768:0}return s}},f=function(){this.B=function(){return(new Date).getTime()},this.e=function(t,i){return Math.floor(Math.random()*(i-t+1)+t)},this.mb=function(t){var i=Math.floor(10*Math.random())+60;t&&(i*=3);var h=[],s=4,a=3,e=!1,r=0,n=0,o=15,d=42;t&&(d=25,o=1);for(var l=0;l<30;l++)for(var c=0;c<42;c++){var f=Math.random();if(c>d);else if(i>0&&l>=s&&c>=n&&f>.3||e){if(r<=a){h.push(1),e=!0,r++;continue}e=!1,r=0,i--,n=(c+5)%d,s=l+3}else e=!1,r=0,a=Math.floor(Math.random()*o)+5;h.push(0)}var b=Math.floor(10*Math.random())+1;t&&(b*=3);var u=3,y=42,x=!1,m=0;for(c=41;c>=0;c--)for(l=29;l>=0;l--){f=Math.random();var v=c+42*l;if(b>0&&(c<y&&f>.4&&1===h[v]||x)){if(m<=u){h[v]=1,x=!0,m++;continue}x=!1,m=0,b--,y=c-(Math.floor(10*Math.random())+4)}else x=!1,m=0,u=Math.floor(5*Math.random())+2}for(l=0;l<6;l++)for(c=25;c<30;c++){h[v=l+42*c]=0}return h},this.nb=!1,this.ob=!1,this.ba=!1,this.T=!1,this.La=220,this.ja={},this.ja.datos,this.ja.pb=20,this.ja.ia=42,this.ja.qb=30,this.rb=0,this.sb=[],this.G=840,this.Y=600,this.tb=840/this.ja.pb,this.ub=600/this.ja.pb,this.vb=800,this.KEY={ENTER:13,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,X:88},this.wb=60,this.fps_interval=1e3/this.wb,this.xb=1/60,this.yb=document.getElementById("canvas"),this.ctx=this.yb.getContext("2d"),this.yb.width=this.G,this.yb.height=this.Y,this.na=[],this.eb=[],this.Ha=[],this.zb=this.B(),this.Ja=this.B(),this.ab=!1,this.Ab=0,this.xa=250,this.Bb=this.xa,this.Cb=this.B(),this.Db=0,this.Ia=2500,this.Oa=[[,,,,,,,],[,,,,,,,],[,,,1,1,,,],[,1,1,1,1,,,],[1,1,1,1,1,,,],[1,1,1,1,1,1,1,1],[,,,,,,,],[,,,,,,,]],this.Eb=function(){return"ontouchstart"in document.documentElement},this.Fb=function(t,i,h){switch(i){case this.KEY.LEFT:return t.preventDefault(),this.S.left=h,!1;case this.KEY.RIGHT:return t.preventDefault(),this.S.right=h,!1;case this.KEY.UP:return t.preventDefault(),this.S.jump=h,!1;case this.KEY.DOWN:return t.preventDefault(),this.S.down=h,!1;case this.KEY.ENTER:case this.KEY.X:return t.preventDefault(),this.S.accion=h,!1}},this.ha=function(t,i,h){return Math.max(i,Math.min(h,t))},this.sa=function(t,i,h,s,a,e,r,n){return!(t+h-1<a||a+r-1<t||i+s-1<e||e+n-1<i)},this.Gb=function(t,i,h,s,a){return(t-h)*(t-h)+(i-s)*(i-s)<=a*a},this.oa=function(t,i){var h=i/2,s=t%i;return s<h?s/h:1-(s-h)/h},this.Hb=function(t,i){return this.ja.datos[t+i*this.ja.ia]},this.Ib=function(t){return t*this.ja.ia},this.Jb=function(t){return Math.floor(t/this.ja.pb)},this.ka=function(t,i){return this.Hb(this.Jb(t),this.Jb(i))},this.Kb=function(t){var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null},this.pa=function(t,i,h,s,a,e,r){if(t.fillStyle=e||"#ffffff",r)var n=this.Kb(e);for(var o=i,d=h,l=0,c=0;c<s.length;c++){for(var f=s[c],b=0;b<f.length;b++)if(f[b])if(r){var u,y,x;y=Math.abs(o+b*a-this.S.V),x=Math.abs(d-this.S.W);var m=1-(u=Math.sqrt(y*y+x*x))/(2.5*this.La);if(u>2.5*this.La)continue;t.fillStyle="rgba("+n.r+","+n.g+","+n.b+","+m+")",t.fillRect(o+b*a,d,a,a)}else t.fillRect(o+b*a,d,1.1*a,1.1*a);l=Math.max(l,f.length*a),d+=a}o+=a+l},this.Lb=function(t,i){this.rb=0,this.sb=[],this.na=[],this.$a=t,this.ja.datos=this.mb(this.$a),this.ctx.globalAlpha=1;var h=1500;if(i&&(h=i),this.T=this.B()+h,this.S=new n(this,40,this.Y-100,1e3,3e4,this.Bb),this.$a)this.gb=new r(this,this.G/1.5,240,800,3e4,1);else{for(this.Db++,this.Wa={},this.Wa.d=this.S.a,this.Wa.a=this.S.a,this.Ya(this.Wa);this.Za(this.Wa);)this.Ya(this.Wa);if(this.lb={},Math.random()>.6)for(this.lb.d=this.S.a/2,this.lb.a=this.S.a/2,this.Mb(this.lb);this.Nb(this.lb);)this.Mb(this.lb);var s=1+2*this.Db,a=5+2*this.Db;this.rb=this.e(s,a);for(var o=this.e(0,4),d=this.e(150,215),l=this.e(90,195),c=this.e(90,195),f=0;f<this.rb;f++){for(var b=this.e(200,this.G-200),u=this.e(0,this.Y/2),y=new e(this,b,u,o,d,l,c);y.qa();)y.ra();this.sb.push(y)}}},this.Za=function(t){for(var i=t.x;i<t.x+t.d;i++)for(var h=t.y-5;h<t.y+t.a;h++)if(this.ka(i,h))return!0;return!1},this.Ya=function(t){t.x=this.e(this.S.d,this.G-this.S.d),t.y=this.e(0,this.Y/1.5)},this.Nb=function(t){for(var i=t.x;i<t.x+t.d;i++)for(var h=t.y-5;h<t.y+t.a;h++)if(this.ka(i,h))return!0;return!1},this.Mb=function(t){t.x=this.e(this.S.d,this.G-this.S.d),t.y=this.e(0,this.Y/1.5)},this.Ob=function(){var t;t=this.Ma?[[1,1,,1,1,,1,1,1,1,,1,1,,1,,,,1,1,,1,,1,,1,1,,1,1,,,1,,,1,,1,,1],[,1,1,1,,,1,1,,1,,1,1,,1,,,,1,1,,1,,1,,,,,1,1,,,1,,,1,,1,,1],[,1,1,1,,,1,1,,1,,1,1,,1,,,,1,1,,1,,1,,1,1,,1,1,1,,1,,,1,,1,,1],[,1,1,1,,,1,1,,1,,1,1,,1,,,,,1,,1,,1,,1,1,,1,1,,1,1,,,,,,,,],[,1,1,1,,,1,1,1,1,,1,1,1,1,,,,,,1,,1,,,1,1,,1,1,,,1,,,1,,1,,1]]:[[1,1,1,1,,1,1,1,1,,1,1,,1,,1,1,1,1,,,,1,1,1,1,,1,1,,1,,1,1,1,1,,1,1,1,1],[1,1,,,,1,1,,1,,1,1,1,1,,1,1,,,,,,1,1,,1,,1,1,,1,,1,1,,,,1,1,,1],[1,1,,,,1,1,1,1,,1,1,,1,,1,1,1,,,,,1,1,,1,,1,1,,1,,1,1,1,1,,1,1,1,1],[1,1,,1,,1,1,,1,,1,1,,1,,1,1,,,,,,1,1,,1,,,1,,1,,1,1,,,,1,1,1],[1,1,1,1,,1,1,,1,,1,1,,1,,1,1,1,1,,,,1,1,1,1,,,,1,,,1,1,1,1,,1,1,,1]],this.pa(this.ctx,this.G/2-330,260,t,16,"rgba(255,255,255,1)")},this.Ba=function(t){this.na.push(new h(this.G/2,this.Y/2,!0,!0,t)),this.Aa=!0,this.Ma?window.audio.playbackRate=3:window.audio.playbackRate=.5;var i=this;window.setTimeout((function(h){if(i.Aa=!1,i.ba=!0,i.Ma=t,t)for(var s=0;s<20;s++){for(var a=i.e(200,i.G-200),r=i.e(0,i.Y/2),n=i.e(0,4),o=i.e(120,215),d=i.e(90,195),l=i.e(90,195),c=new e(i,a,r,n,o,d,l);c.qa();)c.ra();i.sb.push(c)}}),2e3)},this.za=function(t){if(this.Bb=this.S.ca,this.ab&&this.S.R<this.B()){this.ab=!1,this.ctx.globalAlpha=1,this.Ab++;var i=!1;this.Ab>5&&Math.random()>.7&&(i=!0),this.Lb(i)}if(this.S.za(t),this.$a&&this.gb.za(t),!this.$a||this.ba)for(var h=0;h<this.sb.length;h++)this.sb[h].update(t)},this.Pb=function(t,i,h){if(t.clearRect(0,0,this.G,this.Y),this.ba)return this.La=this.G,this.Qb(t,h),this.Rb(t,h),this.Sb(t),this.Tb(t,h),t.fillStyle="rgba(50,50,50,0.5)",t.fillRect(0,0,this.G,this.Y),void this.Ob(t);this.Sb(t),this.Tb(t,h),this.Qb(t,h),this.$a||(this.Ub(t),this.Vb(t)),this.Wb(t,h,!0),this.Xb(t),this.Yb(t),this.$a&&this.Zb(t),this.Rb(t,h)},this.$b=function(){if(this.Ja>this.B()){var t=4;this.zb>this.B()&&(t*=10),this.ctx.save(),this.dx_shacke||this.dy_shacke?(this.zb>this.B()&&(this.dx_shacke=(Math.random()-.5)*t,this.dy_shacke=(Math.random()-.5)*t),this.gb?this.gb.ya>this.B()&&(this.dx_shacke=(Math.random()-.5)*t*2,this.dy_shacke=(Math.random()-.5)*t*2):(this.dy_shacke=-.9*this.dy_shacke,this.dx_shacke=-.9*this.dx_shacke)):(this.dx_shacke=(Math.random()-.5)*t,this.dy_shacke=(Math.random()-.5)*t),this.ctx.translate(this.dx_shacke,this.dy_shacke)}else this.dx_shacke=0,this.dy_shacke=0},this._b=function(){this.ctx.restore()},this.Wb=function(t,i,h){var s,a,e=0;this.S.W-this.La>0&&(e=Math.floor((this.S.W-this.La)/this.ja.pb));var r=Math.floor(this.Y/this.ja.pb);this.S.W+this.La<this.Y&&(r=Math.floor((this.S.W+this.La)/this.ja.pb));var n=0;this.S.V-this.La>0&&(n=Math.floor((this.S.V-this.La)/this.ja.pb));var o=Math.floor(this.G/this.ja.pb);this.S.V+this.La<this.G&&(o=Math.floor((this.S.V+this.La)/this.ja.pb));var d=0,l=0,c=0;for(a=e;a<=r;a++)for(s=n;s<=o;s++)this.Hb(s,a)&&(l=Math.abs(s-Math.floor(this.S.V/this.ja.pb)),c=Math.abs(a-Math.floor(this.S.W/this.ja.pb)),d=Math.sqrt(l*l+c*c),opacidad=1/d*2.5,h||(opacidad/=2),t.fillStyle="rgba(250,250,250,"+opacidad+")",t.fillRect(s*this.ja.pb,a*this.ja.pb,this.ja.pb,this.ja.pb))},this.U=function(t,i){var h,s;return h=Math.abs(t-this.S.V),s=Math.abs(i-this.S.W),Math.sqrt(h*h+s*s)},this.Ub=function(t){radius=this.Wa.d;var i=this.Wa.x+this.Wa.d/2,h=this.Wa.y+this.Wa.a/2;if(distancia_centro=this.U(i,h),!(distancia_centro>this.La)){var s=t.createRadialGradient(i,h,0,i,h,radius);t.fillStyle=s;for(var a=-2;a<2;a++){var e=i+(.5-Math.random())*a*15,r=h+(.5-Math.random())*a*15,n=this.e(110,255);t.beginPath(),t.arc(e,r,radius,0,2*Math.PI,!1),s.addColorStop(0,"rgba("+Math.floor(n/1.2)+", "+n+", "+n+", 0)"),s.addColorStop(.6,"rgba("+Math.floor(n/1.2)+", "+n+", "+n+", 0)"),s.addColorStop(.8,"rgba("+Math.floor(n/1.2)+", "+n+", "+n+", 0.2)"),s.addColorStop(1,"rgba("+Math.floor(n/1.2)+", "+n+", "+n+", 0.3)"),t.fill()}t.beginPath(),t.arc(i,h,1.2*radius,0,2*Math.PI,!1),(s=t.createRadialGradient(i,h,0,i,h,1.2*radius)).addColorStop(0,"rgba(209,127,140, 0.2)"),s.addColorStop(.8,"rgba(209,127,140, 0.1)"),s.addColorStop(1,"rgba(209,127,140, 0)"),t.fillStyle=s,t.fill()}},this.Vb=function(t){var i=this.lb.x+this.lb.d/2,h=this.lb.y+this.lb.a/2;distancia_centro=this.U(i,h);var s=this.S.Ra-this.B();if(s<0){if(s=1,!(distancia_centro>this.La)){var a=this.oa(this.counter,80),e=5*a+2,r=10*this.oa(this.counter,60);t.fillStyle="rgba(255,110,110,"+((1-a)/2+.5*s/2)+")";var n=this.lb.x,o=this.lb.y+this.lb.a/3;t.fillRect(n,o,this.lb.d,this.lb.a/3);var d=this.lb.x+this.lb.a/3,l=this.lb.y;t.fillRect(d,l,this.lb.d/3,this.lb.a),t.strokeStyle="rgba(255,255,155,"+(a/7+.1*s/2)+")",t.lineWidth=8,t.strokeRect(this.lb.x-e,this.lb.y-e,this.lb.a+2*e,this.lb.a+2*e),t.strokeStyle="rgba(133,200,133,"+(a/7+.1*s/2)+")",t.lineWidth=15,t.strokeRect(this.lb.x-r,this.lb.y-r,this.lb.a+2*r,this.lb.a+2*r)}}else(s/=1e3)<.5?this.lb={}:(t.strokeStyle="#ffffff",t.lineWidth=20*s+10,lejos_quitar=50*(1-s),t.strokeRect(this.lb.x-lejos_quitar,this.lb.y-lejos_quitar,this.lb.a+2*lejos_quitar,this.lb.a+2*lejos_quitar))},this.ac=0,this.Zb=function(t){if(this.gb.ya>this.B()){var i=this.gb.ya-this.B(),s=Math.floor(i/this.Ia*40);s=40-s,this.ac=s%20,this.ac>10&&(this.ac=20-this.ac);var a=9*this.ac,e=this.G/40*2,r=this.G/40*s,n=t.createLinearGradient(0,this.Y-100,0,this.Y);n.addColorStop(0,"rgba(186,186,186,0.3)"),n.addColorStop(1,"rgba(0,0,0,1)"),t.fillStyle=n;var o=(Math.random(),10*(Math.random()-.5)),d=10*(Math.random()-.5),l=r;t.fillRect(this.gb.x-r+o,this.Y-a+15+10*(Math.random()-.5),e,a+10*(Math.random()-.5));for(var c=-2;c<=2;c++)r=this.G/40*(s-2*c),alto_ola_n=.7*a+10*(Math.random()-.5),t.fillRect(this.gb.x-r+10*(Math.random()-.5),this.Y-alto_ola_n+15+o,e,alto_ola_n+10*(Math.random()-.5));if(x_empieza_terremoto=this.gb.x-l+o,x_final_terremoto=this.gb.x-r+d,this.S.V<x_empieza_terremoto&&this.S.V>x_final_terremoto&&this.S.W>this.Y-100){this.S.ca=this.S.ca-5;for(c=0;c<10;c++)this.na.push(new h(this.S.V,this.S.W,!0));this.S.ma=this.B()+2200}}},this.Rb=function(t,i){this.S.fb(i,t,this.counter)},this.Tb=function(t,i){for(var h=0;h<this.sb.length;h++)this.U(this.sb[h].x,this.sb[h].y)<this.La&&this.sb[h].la(i,t,this.counter)},this.Qb=function(t,i){this.$a&&this.gb.Ka(i,t,this.counter)},this.Sb=function(t){if(0!==this.na.length)for(var i=0;i<this.na.length;i++){var h=this.na[i],s=h.j;if(0===s.length)return void this.na.splice(i,1);for(var a=s.slice(),e=0;e<s.length;e++){var r,n,o,d=s[e];if(n=Math.abs(d.x-this.S.V),o=Math.abs(d.y-this.S.W),r=Math.sqrt(n*n+o*o),this.ba&&d.final)a.splice(e,1);else if(!(r>300)){var l=(1-r/150)*d.opacidad,c=!1;d.xv>0?d.max_x-d.x<0&&(c=!0):d.x-d.max_x<0&&(c=!0),d.yv>0?d.max_y-d.y<0&&(c=!0):d.y-d.max_y<0&&(c=!0),c||(l*=20),t.beginPath(),t.arc(d.x,d.y,d.size,2*Math.PI,0,!1),t.fillStyle="rgba("+d.r+","+d.g+","+d.b+","+l+")",t.fill(),d.size<=2||c||(d.x+=d.xv,d.y+=d.yv,d.size-=.1)}}h.j=a}},this.Xb=function(t){for(var i=0;i<this.eb.length;i++){var s,a,e,r=this.eb[i],n=8*r.size;if(a=Math.abs(r.x-this.S.V),e=Math.abs(r.y-this.S.W),(s=Math.sqrt(a*a+e*e))<1.2*this.La){if(this.$a){if(this.sa(this.gb.x,this.gb.y,this.gb.d,this.gb.a,r.x-n/2,r.y-n/2,n,n)){var o=10*(Math.random()-.5),d=10*(Math.random()-.5),l=10*(Math.random()-.5),c=45*Math.random(),f=45*Math.random(),b=45*Math.random(),u=Math.floor(155*Math.random())+100;t.beginPath(),t.fillStyle="rgba(255,255,"+u+",1)",t.arc(r.x+o,r.y+d,c,2*Math.PI,0,!1),t.closePath(),t.fill(),t.beginPath(),t.fillStyle="rgba(255,255,"+u+",1)",t.arc(r.x+d,r.y+l,f,2*Math.PI,0,!1),t.closePath(),t.fill(),t.beginPath(),t.fillStyle="rgba(255,255,"+u+",1)",t.arc(r.x+l,r.y+o,b,2*Math.PI,0,!1),t.closePath(),t.fill(),this.eb.splice(i,1),this.gb.wa=this.B()+400;continue}}else for(var y=0;y<this.rb;y++)if(!this.sb[y].muerto&&this.B()>this.sb[y].L&&this.sa(this.sb[y].x,this.sb[y].y,this.sb[y].d,this.sb[y].a,r.x-n/2,r.y-n/2,n,n)){this.zb=this.B()+200;o=10*(Math.random()-.5),d=10*(Math.random()-.5),l=10*(Math.random()-.5),c=45*Math.random(),f=45*Math.random(),b=45*Math.random(),u=Math.floor(155*Math.random())+100;t.beginPath(),t.fillStyle="rgba(255,255,"+u+",1)",t.arc(r.x+o,r.y+d,c,2*Math.PI,0,!1),t.closePath(),t.fill(),t.beginPath(),t.fillStyle="rgba(255,255,"+u+",1)",t.arc(r.x+d,r.y+l,f,2*Math.PI,0,!1),t.closePath(),t.fill(),t.beginPath(),t.fillStyle="rgba(255,255,"+u+",1)",t.arc(r.x+l,r.y+o,b,2*Math.PI,0,!1),t.closePath(),t.fill();var x=this.sb[y].x+this.sb[y].d/2,m=this.sb[y].y+this.sb[y].a/2;this.na.push(new h(x,m,!1)),this.eb.splice(i,1),this.sb[y].L=this.B()+400,this.sb[y].muerto=!0}if(this.ka(r.x,r.y)||this.ka(r.x-5,r.y)||this.ka(r.x+5,r.y)||this.ka(r.x-10,r.y)||this.ka(r.x+10,r.y)||this.ka(r.x-15,r.y)||this.ka(r.x+15,r.y)){o=10*(Math.random()-.5),d=10*(Math.random()-.5),l=10*(Math.random()-.5),c=45*Math.random(),f=45*Math.random(),b=45*Math.random(),u=Math.floor(255*Math.random());t.beginPath(),t.fillStyle="rgba(255,"+u+",0,0.1)",t.arc(r.x+o,r.y+d,c,2*Math.PI,0,!1),t.closePath(),t.fill(),t.beginPath(),t.fillStyle="rgba(255,255,"+u+",0.1)",t.arc(r.x+d,r.y+l,f,2*Math.PI,0,!1),t.closePath(),t.fill(),t.beginPath(),t.fillStyle="rgba(255,255,"+u+",0.1)",t.arc(r.x+l,r.y+o,b,2*Math.PI,0,!1),t.closePath(),t.fill(),this.eb.splice(i,1);continue}1===r.size&&(t.beginPath(),t.fillStyle="rgba(255,255,255,0.4)",t.arc(r.x,r.y,5*n,2*Math.PI,0,!1),t.closePath(),t.fill());var v=1-s/(1.2*this.La),g=1.14*n;t.beginPath();var p=1;r.xv<0&&(p=-1),t.fillStyle="rgba(255,255,0,"+v/24+")",t.arc(r.x,r.y,.8*g,2*Math.PI,0,!1),t.fillStyle="rgba(255,255,20,"+v/20+")",t.arc(r.x+2*p,r.y,.85*g,2*Math.PI,0,!1),t.fillStyle="rgba(255,255,40,"+v/16+")",t.arc(r.x+4*p,r.y,.9*g,2*Math.PI,0,!1),t.fillStyle="rgba(255,255,60,"+v/12+")",t.arc(r.x+6*p,r.y,.92*g,2*Math.PI,0,!1),t.fillStyle="rgba(255,255,80,"+v/8+")",t.arc(r.x+8*p,r.y,.94*g,2*Math.PI,0,!1),t.fillStyle="rgba(255,255,100,"+v/4+")",t.arc(r.x+10*p,r.y,.96*g,2*Math.PI,0,!1),t.fillStyle="rgba(255,255,120,"+v+")",t.arc(r.x+12*p,r.y,.98*g,2*Math.PI,0,!1),t.closePath(),t.fill(),t.beginPath(),t.fillStyle="rgba(250,250,250,"+v/2+")",t.arc(r.x+12*p,r.y,g,2*Math.PI,0,!1),t.arc(r.x+14*p,r.y,g,2*Math.PI,0,!1),t.closePath(),t.fill()}r.x>this.G||r.x<0?this.eb.splice(i,1):(r.x+=r.xv,r.y+=r.yv,r.size-=.004)}},this.Yb=function(t){for(var i=0;i<this.Ha.length;i++){var s=this.Ha[i],a=100*s.size;s.xv;var e=!0;if(s.L>this.B()){var r=10*(Math.random()-.5),n=10*(Math.random()-.5),o=(Math.random(),80*Math.random());if(this.Gb(this.S.V,this.S.W,s.x,s.y,o)&&!s.bc){this.S.ca-=5;for(i=0;i<10;i++)this.na.push(new h(this.S.V,this.S.W,!0));this.S.ma=this.B()+2e3}var d=Math.floor(255*Math.random());t.beginPath(),t.fillStyle="rgba(0,0,"+d+",0,0.1)",t.arc(s.x+r+a/2,s.y+n+a/2,o,2*Math.PI,0,!1),t.closePath(),t.fill(),e=!1}else s.cc&&(s.bc=!0);if(s.bc)this.Ha.splice(i,1);else{(this.ka(s.x,s.y)||this.ka(s.x-5,s.y)||this.ka(s.x-10,s.y)||this.ka(s.x,s.y-5)||this.ka(s.x,s.y-10)||this.ka(s.x,s.y+5)||this.ka(s.x,s.y+10)||this.ka(s.x,s.y+20)||this.ka(s.x,s.y+30)||this.ka(s.x,s.y+40)||this.ka(s.x,s.y+50)||this.sa(this.S.x,this.S.y,this.S.d,this.S.a,s.x-a/2,s.y-a/2,a,a))&&!s.cc&&(s.L=this.B()+500,s.cc=!0),t.beginPath(),t.fillStyle="rgba(250,0,0,0.01)",t.arc(s.x,s.y,a,2*Math.PI,0,!1),t.closePath(),t.fill();var l=s.x+8*this.Oa[0].length/2,c=s.y+8*this.Oa[0].length/2;s.x,this.Oa[0].length,s.y,this.Oa[0].length,t.save(),t.translate(l,c),t.rotate(s.h*Math.PI/180);var f=-8*this.Oa[0].length/2;t.arc(0,0,70,0,2*Math.PI,!1);var b=t.createRadialGradient(0,0,70,0,0,0);b.addColorStop(0,"rgba(151, 110, 143, 0)"),b.addColorStop(1,"rgba(151, 110, 143, 0.6)"),t.fillStyle=b,t.fill();var u="rgba(251, 110, 143, 0.7)";e||(u="rgba(251, 110, 143, "+(s.L-this.B())/2500+")"),this.pa(t,f,f,this.Oa,8,u),t.restore(),s.x>this.G||s.x<0?this.Ha.splice(i,1):e&&(s.x+=s.xv,s.y+=s.yv,s.h+=s.xv)}}},this.dc=function(t){var i=[[1,1,,,,1,1,1,1,,1,1,1,1,,1,1,1,1,,,,1,1,1,1,,1,1,,,1,,1,1,1,,,,,1,1,1,1,,1,1,,,1,,1,1,1,1,,,1,1,1,1,,,1,1,,,1,1],[1,1,,,,1,1,,1,,1,1,,,,,1,1,,,,,1,1,,1,,1,1,,,1,,1,1,,1,,,,1,1,,1,,1,1,,,1,,1,1,,,,,1,1,,1,,,,1,1,1,1,,],[1,1,,,,1,1,,1,,1,1,1,1,,,1,1,,,,,1,1,,1,,1,1,1,,1,,1,1,,1,,,,1,1,,1,,1,1,1,,1,,1,1,,1,1,,1,1,1,,,,,,1,1,,,],[1,1,,,,1,1,,1,,,,1,1,,,1,1,,,,,1,1,1,1,,1,1,,1,1,,1,1,,1,,,,1,1,1,1,,1,1,,1,1,,1,1,,,1,,1,1,,1,,,,,1,1,,,],[1,1,1,1,,1,1,1,1,,1,1,1,1,,,1,1,,,,,1,1,,1,,1,1,,,1,,1,1,1,,,,,1,1,,1,,1,1,,,1,,1,1,1,1,1,,1,1,,,1,,,,1,1,,,]],h=this.G/2-8*i[0].length/2;this.pa(t,h,180,i,8,"#ffffff");for(var s=-2;s<2;s++){var a=h+(.5-Math.random())*s*15,e=180+(.5-Math.random())*s*15;this.pa(t,a,e,i,8,"rgba("+this.e(222,255)+","+this.e(222,255)+","+this.e(222,255)+",0.1)")}if(!this.Eb()){var r=[[1,1,1,1,,1,1,1,1,,,1,1,1,1,,,1,1,1,1,,1,1,,1,,1,,1,1,1,1,,,1,1,1,1,,1,1,1,1,,,1,1,,,,1,,1,1,1,1,,1,1,,1,,1,1,1,1,,,,,,,1,,,,1,,,1,1,1,1,,1,1,1,1,,,1,1,1,1,,1,1,,1,,1,1,1,1,,1,1,1,1,,1,1,1,1],[1,1,,1,,1,1,,1,,,1,1,,1,,,1,1,,1,,1,1,,1,,1,,1,1,,,,,,1,1,,,1,1,,1,,,1,1,1,,1,1,,1,1,,1,,1,1,,1,,1,1,,,,,,,,,,1,,1,,,,,1,1,,,1,1,,1,,,1,1,,,,1,1,,1,,1,1,,1,,1,1,,1,,,1,1],[1,1,,1,,1,1,1,1,,,1,1,1,1,,,1,1,,1,,1,1,,1,,1,,1,1,1,1,,,,1,1,,,1,1,,1,,,1,1,,1,,1,,1,1,,1,,1,1,,1,,1,1,1,,,,1,1,,,,,1,,,,,,1,1,,,1,1,,1,,,1,1,1,1,,1,1,1,1,,1,1,,1,,1,1,,1,,,1,1],[1,1,1,1,,1,1,,1,,,1,1,,1,,,1,1,,1,,,1,1,1,1,,,,,,1,,,,1,1,,,1,1,,1,,,1,1,,,,1,,1,1,,1,,,1,,1,,1,1,,,,,,,,,,1,,1,,,,,1,1,,,1,1,,1,,,,,,1,,1,1,,1,,1,1,,1,,1,1,,1,,,1,1],[1,1,,1,,1,1,,,1,,1,1,,,1,,1,1,1,1,,,,1,1,,,,1,1,1,1,,,,1,1,,,1,1,1,1,,,1,1,,,,1,,1,1,1,1,,,,1,,,1,1,1,1,,,,,,,1,,,,1,,,,1,1,,,1,1,1,1,,,1,1,1,1,,1,1,,1,,1,1,1,1,,1,1,1,1,,,1,1]],n=this.G/2-2.5*r[0].length/2;this.pa(t,n,550,r,2.5)}},this.ec=0,this.fc=this.B()+5e3,this.gc=this.B(),this.hc=!1,this.ic=function(t,i){if(this.gc<this.B()&&this.hc)return this.Lb(!1,1800),window.audio.play(),void(this.nb=!0);this.hc||(this.jc=this.G/2-200+2*this.counter),this.S=new n(this,this.jc,this.Y/2+100,1e3,3e4,this.Bb),this.Wa={},this.Wa.d=this.S.a,this.Wa.a=this.S.a,this.Wa.x=this.G/2+150,this.Wa.y=this.Y/2+100,this.S.right=!0,this.S.x>=this.Wa.x+10&&!this.hc&&(this.hc=!0,this.gc=this.B()+3e3),this.S.x>=this.Wa.x+10&&(this.S.R=this.B()+3e3),this.Ub(t),this.S.ib(),this.ec=this.S.fb(i,t,this.counter,this.ec)},this.kc=function(){document.getElementById("controles_mobile").style.display="none",document.getElementById("canvas_mobile").style.display="none";var t=window.innerWidth,i=window.innerHeight;canvas_mobile_gira=document.getElementById("canvas_mobile_gira"),canvas_mobile_gira.style.display="block",ctx_mobile_gira=canvas_mobile_gira.getContext("2d"),canvas_mobile_gira.width=t,canvas_mobile_gira.height=i;var h=[[,,,1,1,1,1,,,,],[,,1,,,,,1,,,],[,1,,,,,,,1,,1],[,1,,,,,,,,1,1],[1,1,1,,,,,,1,1,1],[,,,,,,,,,,],[,,,,,,,,,,],[1,1,1,1,1,1,1,1,1,1,1],[1,,,,,,,,1,1,1],[1,,,,,,,,1,1,1],[1,,,,,,,,1,,1],[1,,,,,,,,1,1,1],[1,,,,,,,,1,1,1],[1,1,1,1,1,1,1,1,1,1,1]],s=t/2-12*h[0].length/2;this.pa(ctx_mobile_gira,s,200,h,12)},this.lc=function(){document.getElementById("canvas_mobile_gira").style.display="none",t=document.getElementById("canvas_mobile"),i=t.getContext("2d"),t.style.display="block";var h=window.innerWidth;t.width=this.G,t.height=100;this.pa(i,20,20,[[,,1],[,1,1],[1,1,1,1],[,1,1],[,,1]],12),this.pa(i,120,20,[[,1,,],[,1,1],[1,1,1,1],[,1,1],[,1,,]],12),this.pa(i,h-180,20,[[,,1,,],[,1,1,1],[1,1,1,1,1],[,1,1,1],[,1,1,1]],12),this.pa(i,h-80,20,[[1,,1,,1],[,1,1,1],[1,1,1,1,1],[,1,1,1],[1,,1,,1]],12),document.getElementById("controles_mobile").style.display="block";var s=this;document.getElementById("der_mobile").addEventListener("touchstart",(function(t){s.S.right=!0,this.className="tecla_mobile pulsada",t.preventDefault()})),document.getElementById("izq_mobile").addEventListener("touchstart",(function(t){s.S.left=!0,this.className="tecla_mobile pulsada",t.preventDefault()})),document.getElementById("arr_mobile").addEventListener("touchstart",(function(t){s.S.jump=!0,this.className="tecla_mobile pulsada",t.preventDefault()})),document.getElementById("accion_mobile").addEventListener("touchstart",(function(t){s.S.accion=!0,this.className="tecla_mobile pulsada",t.preventDefault()})),document.getElementById("lost").addEventListener("touchmove",(function(t){var i=document.elementFromPoint(t.touches[0].pageX,t.touches[0].pageY);t.preventDefault(),"der_mobile"===i.id?(s.S.right=!0,document.getElementById("der_mobile").className="tecla_mobile pulsada"):(s.S.right=!1,document.getElementById("der_mobile").className="tecla_mobile"),"izq_mobile"===i.id?(s.S.left=!0,document.getElementById("izq_mobile").className="tecla_mobile pulsada"):(s.S.left=!1,document.getElementById("izq_mobile").className="tecla_mobile")})),document.getElementById("der_mobile").addEventListener("touchend",(function(t){s.S.right=!1,this.className="tecla_mobile",t.preventDefault()})),document.getElementById("izq_mobile").addEventListener("touchend",(function(t){s.S.left=!1,this.className="tecla_mobile",t.preventDefault()})),document.getElementById("arr_mobile").addEventListener("touchend",(function(t){s.S.jump=!1,this.className="tecla_mobile",t.preventDefault()})),document.getElementById("accion_mobile").addEventListener("touchend",(function(t){s.S.accion=!1,this.className="tecla_mobile",t.preventDefault()}))};var t,i,s=this;this.mc=function(){this.Eb()&&(window.innerHeight>window.innerWidth?(s.kc(),s.ob=!0):(s.lc(),s.ob=!1),window.addEventListener("orientationchange",(function(t){window.setTimeout((function(){window.innerHeight>window.innerWidth?(s.kc(),juego.ob=!0):(s.lc(),s.ob=!1)}),300)})))}};!function(){var t=new f;t.mc(),t.counter=0;var i,h=0,s=t.B(),a=50,e=t.B();document.addEventListener("keydown",(function(i){return t.Fb(i,i.keyCode,!0)}),!1),document.addEventListener("keyup",(function(i){return t.Fb(i,i.keyCode,!1)}),!1),document.addEventListener("visibilitychange",(function(){document.hidden?t.ob=!0:(t.ob=!1,t.mc())}),!1);var r=new c,n=!1;r.init(o);var b=new c;b.init(l);var u=!1;window.disparo_audio,window.disparo_audio2;var y=new c;y.init(d);var x=!1;window.levelup_audio2;var m=!1;!function r(){if(t.ob)requestAnimationFrame(r,canvas);else{if(!t.nb)return t.counter++,t.ctx.clearRect(0,0,t.G,t.Y),t.dc(t.ctx),t.ic(t.ctx,h),void requestAnimationFrame(r,canvas);for(i=t.B(),h+=Math.min(1,(i-s)/1e3);h>t.xb;)h-=t.xb,t.Aa||t.za(t.xb);if(t.Aa){var n=i-e;n>a&&(t.$b(),t.Pb(t.ctx,t.counter,h),t._b(),t.za(t.xb),e=i-n%a)}else t.$b(),t.Pb(t.ctx,t.counter,h),t._b();s=i,t.counter++,requestAnimationFrame(r,canvas)}}();var v=setInterval((function(){if(m)return t.mc(),void clearInterval(v);if(!n){var i=r.generate();t.music_percent=i,i>=1&&(n=!0)}if(x||y.generate()>=1&&(x=!0),u||b.generate()>=1&&(u=!0),m=n&&u){var h=r.createWave();window.audio=document.createElement("audio"),window.audio.src=URL.createObjectURL(new Blob([h],{type:"audio/wav"})),window.audio.loop=!0,window.audio.volume=.3;var s=y.createWave();window.levelup_audio2=document.createElement("audio"),window.levelup_audio2.src=URL.createObjectURL(new Blob([s],{type:"audio/wav"})),window.levelup_audio2.volume=1;var a=b.createWave();window.disparo_audio2=document.createElement("audio"),window.disparo_audio=document.createElement("audio"),window.disparo_audio.src=URL.createObjectURL(new Blob([a],{type:"audio/wav"})),window.disparo_audio.volume=.6,window.disparo_audio2.src=URL.createObjectURL(new Blob([a],{type:"audio/wav"})),window.disparo_audio2.volume=.3}}),50)}()</script>