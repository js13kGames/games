<!doctype html><meta content="width=device-width" name=viewport><style>body,html{font-family:Comic Sans MS,sans-serif;margin:0;width:100%}#game{background-color:green;display:block;margin:auto auto 10px}#game,.score{max-width:800px;width:100%}.score{font-size:80px;margin:auto auto 15px;text-align:center}.control{display:flex;justify-content:space-between;margin:auto auto 35px}.control,.message{max-width:800px;width:100%}.message{font-size:50px;margin:auto;text-align:center}</style><div class=score><span id=player1-points>0</span> - <span id=player2-points>0</span></div><canvas id=game></canvas><div class=control><div>W, S, A, D</div><div>Up, Down, Left, Right</div></div><div class=message>Score 3 and win!</div><script>!function(t){var i={};function e(s){if(i[s])return i[s].exports;var o=i[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var o in t)e.d(s,o,function(i){return t[i]}.bind(null,o));return s},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=3)}([function(t,e){kontra={init(t){var i=this.canvas=document.getElementById(t)||t||document.querySelector("canvas");if(!i)throw Error("You must provide a canvas element for the game");this.context=i.getContext("2d")},_noop:new Function,_tick:new Function},kontra.gameLoop=function(t){if(!(t=t||{}).update||!t.render)throw Error("You must provide update() and render() functions");let i,e,s,o,n=t.fps||60,r=0,h=1e3/n,a=1/n,c=!1===t.clearCanvas?kontra._noop:function(){kontra.context.clearRect(0,0,kontra.canvas.width,kontra.canvas.height)};function d(){if(e=requestAnimationFrame(d),s=performance.now(),o=s-i,i=s,!(o>1e3)){for(kontra._tick(),r+=o;r>=h;)u.update(a),r-=h;c(),u.render()}}let u={update:t.update,render:t.render,isStopped:!0,start(){i=performance.now(),this.isStopped=!1,requestAnimationFrame(d)},stop(){this.isStopped=!0,cancelAnimationFrame(e)},_frame:d,set _last(t){i=t}};return u},function(){let t={},e={},s={13:"enter",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down"};for(let t=0;t<26;t++)s[65+t]=(10+t).toString(36);for(i=0;i<10;i++)s[48+i]=""+i;addEventListener("keydown",(function(i){let o=s[i.which];e[o]=!0,t[o]&&t[o](i)})),addEventListener("keyup",(function(t){e[s[t.which]]=!1})),addEventListener("blur",(function(t){e={}})),kontra.keys={bind(i,e){[].concat(i).map((function(i){t[i]=e}))},unbind(i,e){[].concat(i).map((function(i){t[i]=e}))},pressed:t=>!!e[t]}}(),function(){class t{constructor(t,i){this._x=t||0,this._y=i||0}add(t,i){this.x+=(t.x||0)*(i||1),this.y+=(t.y||0)*(i||1)}clamp(t,i,e,s){this._c=!0,this._a=t,this._b=i,this._d=e,this._e=s}get x(){return this._x}get y(){return this._y}set x(t){this._x=this._c?Math.min(Math.max(this._a,t),this._d):t}set y(t){this._y=this._c?Math.min(Math.max(this._b,t),this._e):t}}kontra.vector=(i,e)=>new t(i,e),kontra.vector.prototype=t.prototype;class i{init(t,i,e,s){for(i in t=t||{},this.position=kontra.vector(t.x,t.y),this.velocity=kontra.vector(t.dx,t.dy),this.acceleration=kontra.vector(t.ddx,t.ddy),this.width=this.height=0,this.context=kontra.context,t)this[i]=t[i];if(e=t.image)this.image=e,this.width=e.width,this.height=e.height;else if(e=t.animations){for(i in e)this.animations[i]=e[i].clone(),s=s||e[i];this._ca=s,this.width=s.width,this.height=s.height}return this}get x(){return this.position.x}get y(){return this.position.y}get dx(){return this.velocity.x}get dy(){return this.velocity.y}get ddx(){return this.acceleration.x}get ddy(){return this.acceleration.y}set x(t){this.position.x=t}set y(t){this.position.y=t}set dx(t){this.velocity.x=t}set dy(t){this.velocity.y=t}set ddx(t){this.acceleration.x=t}set ddy(t){this.acceleration.y=t}isAlive(){return this.ttl>0}collidesWith(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}update(t){this.advance(t)}render(){this.draw()}playAnimation(t){this._ca=this.animations[t],this._ca.loop||this._ca.reset()}advance(t){this.velocity.add(this.acceleration,t),this.position.add(this.velocity,t),this.ttl--,this._ca&&this._ca.update(t)}draw(){this.image?this.context.drawImage(this.image,this.x,this.y):this._ca?this._ca.render(this):(this.context.fillStyle=this.color,this.context.fillRect(this.x,this.y,this.width,this.height))}}kontra.sprite=t=>(new i).init(t),kontra.sprite.prototype=i.prototype}()},function(t,i,e){},,function(t,i,e){"use strict";e.r(i),e(0);class s{constructor(t,i){this.x=t,this.y=i}getXY(){return{x:this.x,y:this.y}}setXY(t,i){this.x=t,this.y=i}}function o({position1:t,radius1:i,position2:e,radius2:s}){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))<i+s}class n{constructor({startingPosition:t,color:i,speed:e,keys:o,radius:n}){this.radius=n,this.startingPosition=t,this.sprite=kontra.sprite({x:t.x,y:t.y,color:i,radius:this.radius,render:function(){this.context.fillStyle=this.color,this.context.beginPath(),this.context.arc(this.x,this.y,this.radius,0,2*Math.PI),this.context.fill()}}),this.speed=e,this.keys=o,this.velocityVector=new s(0,0),this.points=0}getPosition(){return{x:this.sprite.x,y:this.sprite.y}}setPosition(t){this.sprite.x=t.x,this.sprite.y=t.y}getVelocityVector(){return this.velocityVector.getXY()}handleControl(t,i){this.velocityVector.setXY(0,0),kontra.keys.pressed(this.keys.up)&&this.checkIfCanMove("up",t,i)&&(this.moveUp(this.sprite),this.velocityVector.y=-this.speed),kontra.keys.pressed(this.keys.down)&&this.checkIfCanMove("down",t,i)&&(this.moveDown(this.sprite),this.velocityVector.y=this.speed),kontra.keys.pressed(this.keys.right)&&this.checkIfCanMove("right",t,i)&&(this.moveRight(this.sprite),this.velocityVector.x=this.speed),kontra.keys.pressed(this.keys.left)&&this.checkIfCanMove("left",t,i)&&(this.moveLeft(this.sprite),this.velocityVector.x=-this.speed)}checkIfCanMove(t,i,e){return!(this.checkPlayersCollision(t,i)||this.checkBoardCollision(t,e))}checkBoardCollision(t,i){const e=this.getPosition();switch(t){case"up":return e.y<=this.radius;case"down":return e.y>=i.height-this.radius;case"right":return e.x>=i.width-this.radius;case"left":return e.x<=this.radius}}checkPlayersCollision(t,i){let e=this.getPosition();switch(t){case"up":e=this.moveUp(e);break;case"down":e=this.moveDown(e);break;case"right":e=this.moveRight(e);break;case"left":e=this.moveLeft(e)}return i.some((t=>o({position1:t,radius1:this.radius,position2:e,radius2:this.radius})))}moveUp(t){return t.y-=this.speed,t}moveDown(t){return t.y+=this.speed,t}moveRight(t){return t.x+=this.speed,t}moveLeft(t){return t.x-=this.speed,t}update(){this.sprite.update()}render(){this.sprite.render()}}class r{constructor({position:t,height:i,width:e,color:s}){this.sprite=kontra.sprite({x:t.x,y:t.y,color:s,width:e,height:i})}update(){this.sprite.update()}render(){this.sprite.render()}}const h={width:800,height:400},a=10,c=150;new class{constructor({width:t,height:i}){this.width=t,this.height=i}init(t){this.element=document.getElementById(t),this.element.height=this.height,this.element.width=this.width}}(h).init("game");const d=document.getElementById("player1-points"),u=document.getElementById("player2-points");kontra.init("game");const l=new n({startingPosition:{x:100,y:h.height/2-a},color:"blue",speed:2,keys:{up:"w",down:"s",left:"a",right:"d"},radius:20}),p=new n({startingPosition:{x:h.width-100,y:h.height/2-a},color:"red",speed:2,keys:{up:"up",down:"down",left:"left",right:"right"},radius:20}),y=new class{constructor({startingPosition:t,speed:i,radius:e}){this.velocityVector=new s(0,0),this.radius=e,this.speed=i,this.startingPosition=t,this.sprite=kontra.sprite({x:t.x,y:t.y,color:"white",radius:this.radius,render:function(){this.context.fillStyle=this.color,this.context.beginPath(),this.context.arc(this.x,this.y,this.radius,0,2*Math.PI),this.context.fill()}})}getVelocityVector(){return this.velocityVector}stop(){this.velocityVector.x=0,this.velocityVector.y=0}getPosition(){return{x:this.sprite.x,y:this.sprite.y}}setPosition(t){this.sprite.x=t.x,this.sprite.y=t.y}handleMotion(){this.sprite.x=this.sprite.x+this.velocityVector.x,this.sprite.y=this.sprite.y+this.velocityVector.y}handlePlayersCollision(t){t.forEach((t=>{o({position1:t.getPosition(),radius1:t.radius,position2:this.getPosition(),radius2:this.radius})&&(this.velocityVector=function(t,i){const e=t.radius,o=i.radius,n=t.getPosition().x,r=t.getPosition().y,h=i.getPosition().x,a=i.getPosition().y,c=t.getVelocityVector().x,d=t.getVelocityVector().y,u=i.getVelocityVector().x,l=i.getVelocityVector().y,p=u-2*e/(e+o)*((u-c)*(h-n)+(l-d)*(a-r))/((h-n)*(h-n)+(a-r)*(a-r))*(h-n),y=l-2*e/(e+o)*((u-c)*(h-n)+(l-d)*(a-r))/((h-n)*(h-n)+(a-r)*(a-r))*(a-r);return{v1:new s(c-2*o/(e+o)*((c-u)*(n-h)+(d-l)*(r-a))/((n-h)*(n-h)+(r-a)*(r-a))*(n-h),d-2*o/(e+o)*((c-u)*(n-h)+(d-l)*(r-a))/((n-h)*(n-h)+(r-a)*(r-a))*(r-a)),v2:new s(p,y)}}(t,this).v2)}))}handleBoardCollision(t){const i=this.getPosition();(i.x<=0+this.radius||i.x>=t.width-this.radius)&&(this.velocityVector.x=-this.velocityVector.x),(i.y<=0+this.radius||i.y>=t.height-this.radius)&&(this.velocityVector.y=-this.velocityVector.y)}update(){this.sprite.update()}render(){this.sprite.render()}}({startingPosition:{x:h.width/2-a,y:h.height/2-a},radius:a}),g=[new r({position:{x:0,y:h.height/2-75},width:3,height:c,color:"blue"}),new r({position:{x:h.width-3,y:h.height/2-75},width:3,height:c,color:"red"}),l,p,y];function x(){d.textContent=l.points,u.textContent=p.points}function f(){l.points=0,p.points=0,d.textContent=l.points,u.textContent=p.points}function v(t){t.forEach((t=>t.setPosition(t.startingPosition)))}kontra.gameLoop({update:()=>{l.handleControl([p.getPosition()],h),p.handleControl([l.getPosition()],h),y.handlePlayersCollision([l,p]),y.handleBoardCollision(h),y.handleMotion();const t=y.getPosition();(function(t){return t.x>=h.width-a&&t.y<=h.height/2+75&&t.y>=h.height/2-75})(t)&&(l.points+=1,v([l,p,y]),x(),y.stop(),l.points>=3&&f()),function(t){return t.x<=a&&t.y<=h.height/2+75&&t.y>=h.height/2-75}(t)&&(p.points+=1,v([l,p,y]),x(),y.stop(),p.points>=3&&f()),g.forEach((t=>t.update()))},render:()=>{g.forEach((t=>t.render()))}}).start(),e(1)}])</script>