<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,user-scalable=0"/>
<title>Musa's Quest</title>
<style>
html{
background:#000;
}
body{
margin:0;padding:0;
font:bold min(3vw,3vh) sans-serif;color:#fff;
line-height:150%;
overflow:hidden;
-webkit-tap-highlight-color:rgba(0,0,0,0);
-webkit-touch-callout:none;
-webkit-user-select:none;
-khtml-user-select:none;
-moz-user-select:none;
-ms-user-select:none;
-ms-touch-action:none;
user-select:none;
}
svg{
display:none;
}

#B {
position:fixed;
padding:.5em .75em;
max-width:90vw;
background:#fff;color:#111;
border-radius:.25em;
display:none;
}

#BP {
position:absolute;
left:calc(50% - 1em);bottom:-.9em;
width:0;height:0;
border-left:.5em solid transparent;
border-right:.5em solid transparent;
border-top:1em solid #fff;
}
ol{
margin:0;padding:0 0 0 1em;
}
a{
color:#111;
}

#I, #M {
content:'&npsp;';
position:fixed;
left:0;right:0;
bottom:0;
text-align:center;
}

#I {
background:rgba(0,0,0,.5);
padding:.25em;
}

#M {
display:none;
background:#000;
top:0;
padding:45vh 0 0;
}
</style>
</head>
<body>
<svg id="S">
<g id="Throne">
<rect width="300" height="300" style="fill:#3b7fff" y="-100" x="-100"/>
<rect width="300" height="162" style="fill:#ba8b40" y="38" x="-100"/>
<path style="fill:#6c4a17" d="M-100 45 L62 41 L200 41 L200 37 L-100 38 L-100 45 Z"/>
<path style="fill:#a77d38" d="M32 52 L67 52 L93 77 L6 77 L32 52 Z"/>
<path style="fill:#6b4a17" d="M3 22 L7 21 L14 22 L28 48 L9 51 L-11 48 L3 22 Z"/>
<path style="fill:#966e2b" d="M9 51 L7 21 L14 22 L28 48 L9 51 Z"/>
<path style="fill:#e0d1b3" d="M72 34 C72 34 74 28 74 28 L77 34 L81 34 C81 34 83 30 83 30 L85 34 L93 34 C93 34 95 30 95 30 L97 34 L101 34 L104 29 L106 35 L108 43 L100 44 L69 42 L72 34 Z"/>
</g>
<g id="Market">
<rect width="300" height="300" style="fill:#3b7fff" y="-100" x="-100"/>
<rect width="300" height="170" style="fill:#ba8b40" y="30" x="-100"/>
<path style="fill:#6d4a17" d="M-100 49 L58 44 L200 48 L200 26 L58 27 L-100 24 L-100 49 Z"/>
<path style="fill:#d0b474" d="M58 61 L58 36 L105 36 L105 61 C105 66 66 69 58 61 Z"/>
<path style="fill:#dfd2b3" d="M82 20 L58 36 L105 36 L82 20 Z"/>
<path style="fill:#a77d38" d="M68 65 L68 40 L82 40 L82 66 L68 65 Z"/>
<path style="fill:#d0b474" d="M-9 57 L-9 35 L32 35 L32 57 C21 62 -9 62 -9 57 Z"/>
<path style="fill:#dfd2b3" d="M12 20 L-9 35 L32 35 L12 20 Z"/>
<path style="fill:#a77d38" d="M12 61 L12 38 L22 38 L22 60 L12 61 Z"/>
<path style="fill:#48310e" d="M69 65 L69 41 L81 41 L81 66 L69 65 Z"/>
<path style="fill:#48310e" d="M13 61 L13 39 L21 39 L21 60 L13 61 Z"/>
<path id="OutOfTown" style="fill:#a87e38" d="M13 61 L33 77 L-100 153 L-100 190 L51 94 L200 200 L200 154 L71 79 L81 66 L69 65 L48 70 L21 60 L13 61 Z"/>
<circle style="fill:#f8e31c" cx="76" cy="7" r="3"/>
<path style="fill:#a87e38" d="M36 57 L34 32 L37 33 L38 57 L36 57 Z"/>
<path style="fill:#a87e38" d="M53 60 L54 36 L56 35 L55 60 L53 60 Z"/>
<path style="fill:#dfd2b3" d="M57 35 C57 40 33 35 33 32 L45 29 L57 35 Z"/>
</g>
<g id="RedFruits">
<path style="fill:#48310e" d="M45 47 L56 48 L57 49 L43 48 L45 47 Z"/>
<circle style="fill:#c70908" cx="46" cy="48" r="1"/>
<circle style="fill:#c70908" cx="48" cy="48" r="1"/>
<circle style="fill:#c70908" cx="51" cy="48" r="1"/>
<circle style="fill:#c70908" cy="49" cx="54" r="1"/>
<circle style="fill:#c70908" cx="52" cy="48" r="1"/>
<circle style="fill:#c70908" cx="47" cy="47" r="1"/>
<path style="fill:#a87e38" d="M43 48 L57 49 L56 55 L43 53 L43 48 Z"/>
</g>
<g id="YellowFruits">
<path style="fill:#48310e" d="M47 48 L52 47 L54 49 L46 49 L47 48 Z"/>
<circle style="fill:#f8e41b" cx="49" cy="48" r="1"/>
<circle style="fill:#f8e41b" cx="50" cy="49" r="1"/>
<circle style="fill:#f8e41b" cx="48" cy="49" r="1"/>
<circle style="fill:#f8e41b" cx="52" cy="49" r="1"/>
<path style="fill:#a87e38" d="M46 49 L54 49 L53 53 L47 53 L46 49 Z"/>
</g>
<g id="GreenFruits">
<path style="fill:#48310e" d="M47 49 L51 47 L53 49 L47 49 Z"/>
<circle style="fill:#08c74e" cx="51" cy="49" r="1"/>
<circle style="fill:#08c74e" cx="49" cy="49" r="1"/>
<circle style="fill:#08c74e" cx="50" cy="48" r="1"/>
<path style="fill:#a87e38" d="M47 49 L53 49 L52 53 L48 53 L47 49 Z"/>
</g>
<g id="CampNight">
<rect width="300" height="300" style="fill:#0e2141" y="-100" x="-100"/>
<path style="fill:#081326" d="M-100 45 L16 26 L41 35 L91 30 L200 44 L200 200 L-100 200 L-100 45 Z"/>
<rect width="300" height="153" style="fill:#775926" y="47" x="-100"/>
<circle style="fill:#ffffff" cx="88" cy="14" r="6"/>
<circle style="fill:#0e2141" cx="85" cy="16" r="6"/>
</g>
<g id="CampDay">
<rect width="300" height="300" style="fill:#3b7fff" y="-100" x="-100"/>
<path style="fill:#244e9b" d="M-100 45 L16 26 L41 35 L91 30 L200 44 L200 200 L-100 200 L-100 45 Z"/>
<rect width="300" height="153" style="fill:#b98b40" y="47" x="-100"/>
</g>
<g id="TempleEntry">
<rect width="300" height="300" style="fill:#3b7fff" y="-100" x="-100"/>
<circle style="fill:#f8e31c" cx="79" cy="6" r="4"/>
<path style="fill:#244e9b" d="M-100 55 L15 38 L44 52 L91 47 L200 70 L200 200 L-100 200 L-100 55 Z"/>
<path style="fill:#b98b40" d="M-100 47 C-39 32 82 88 200 65 L200 200 L-100 200 L-100 47 Z"/>
</g>
<g id="Temple">
<rect width="300" height="300" style="fill:#48310e" y="-100" x="-100"/>
<path style="fill:#a97e38" d="M-100 79 L8 65 L2 4 L7 3 L15 64 L30 62 L69 69 L75 8 L80 7 L73 70 L87 76 L200 61 L200 200 L-100 200 L-100 79 Z"/>
<path style="fill:#cfc017" d="M-1 83 L52 71 L111 83 L70 84 L58 88 L35 84 L-6 90 L-1 83 Z"/>
<path style="fill:#e5d419" d="M-1 78 L33 66 L47 64 L65 66 L111 83 L65 81 L57 84 L33 79 L-6 85 L-1 78 Z"/>
<path style="fill:none;stroke:#c70908" d="M43 5 L43 24 L46 41 L46 57"/>
</g>
<g id="Bagdad">
<rect width="300" height="300" style="fill:#244e9b" y="-100" x="-100"/>
<path style="fill:#0e2141" d="M-100 45 L-10 39 L9 22 L21 30 L32 19 L52 45 L200 47 L200 200 L-100 200 L-100 45 Z"/>
<rect width="300" height="153" style="fill:#ba8b40" y="47" x="-100"/>
<path style="fill:#9aabce" d="M68 49 L87 7 L46 -100 L129 -100 L91 20 L106 50 L68 49 Z"/>
<path style="fill:#c70908" d="M68 49 L76 37 L81 43 L83 35 L88 44 L92 29 L96 45 L100 37 L106 50 L68 49 Z"/>
<path style="fill:#f9e51a" d="M68 49 L76 40 L82 44 L83 40 L88 46 L93 38 L95 47 L100 42 L106 50 L68 49 Z"/>
<path style="fill:#48310e" d="M69 30 L68 29 L70 26 L72 29 L71 30 L71 43 L76 41 L85 43 L87 38 L86 36 L89 33 L92 36 L91 38 L93 43 L103 44 L103 33 L104 30 L105 33 L106 50 L91 51 L90 49 L89 49 L88 51 L81 51 L68 49 L69 30 Z"/>
<path style="fill:#a97e38" d="M73 64 L93 56 L88 51 L89 49 L90 49 L91 51 L97 56 L84 65 L69 200 L-87 200 L73 64 Z"/>
</g>
<g id="Byzantium">
<rect width="300" height="300" style="fill:#3b7fff" y="-100" x="-100"/>
<path style="fill:#48310e" d="M-100 50 L-8 33 L89 29 L200 46 L200 200 L-100 200 L-100 50 Z"/>
<rect width="300" height="147" style="fill:#ba8b40" y="53" x="-100"/>
<path style="fill:#244e9b" d="M-100 51 L200 50 L200 78 L-100 60 L-100 51 Z"/>
<path id="Enter" style="fill:#4f5869" d="M56 53 L64 53 L64 39 L56 39 L56 53 Z"/>
<path style="fill:#9aabce" d="M36 20 L39 20 L39 22 L41 22 L41 20 L43 20 L43 22 L45 22 L45 20 L47 20 L47 22 L49 22 L49 20 L52 20 L51 36 L69 35 L68 20 L71 20 L71 22 L73 22 L73 20 L75 20 L75 22 L77 22 L77 20 L79 20 L79 22 L81 22 L81 20 L84 20 L83 35 L200 42 L200 50 L64 54 L63 44 L60 40 L57 44 L56 54 L-100 51 L-100 31 L37 36 L36 20 Z"/>
<path style="fill:#dfd2b3" d="M200 78 L41 66 L-100 60 L200 78 Z"/>
<path style="fill:#76849b" d="M56 53 L64 53 L69 74 L63 76 L51 73 L56 53 Z"/>
<path style="fill:#4f5869" d="M56 53 L51 68 L51 73 L56 53 Z"/>
<path style="fill:#4f5869" d="M69 69 L64 53 L69 74 L69 69 Z"/>
<path style="fill:#9aabce" d="M51 68 L56 53 L53 53 L47 68 L47 73 L51 73 L51 68 Z"/>
<path style="fill:#9aabce" d="M73 69 L67 53 L64 53 L69 69 L69 74 L73 74 L73 69 Z"/>
</g>
<g id="ByzantiumMarket">
<rect width="300" height="300" style="fill:#3b7fff" y="-100" x="-100"/>
<rect width="300" height="152" style="fill:#4f5a68" y="48" x="-100"/>
<path style="fill:#9aabce" d="M-100 4 L200 23 L200 48 L-100 48 L-100 4 Z"/>
<path style="fill:#76859b"  d="M-100 60 L200 70 L200 100 L-100 79 L-100 60 Z"/>
<path style="fill:#4f5a68" d="M-100 4 L200 23 L200 20 L-100 1 L-100 4 Z"/>
</g>
<g id="ColumnDistant">
<path style="fill:#704c16" d="M41 64 L38 32 L71 27 L74 61 L64 64 L57 70 L48 70 L41 64 Z"/>
<path style="fill:#6f4b16" d="M47 46 L69 42 L78 29 L78 23 L27 21 L27 27 L32 40 L47 46 Z"/>
<path style="fill:#9a7229" d="M47 40 L69 36 L78 23 L72 11 L57 7 L37 10 L27 21 L32 34 L47 40 Z"/>
</g>
<g id="Column">
<path style="fill:#9b7329" d="M86 60 L58 50 L30 56 L11 75 L26 91 L59 90 L84 78 L86 60 Z"/>
<path style="fill:#462f0f" d="M41 64 L30 77 L40 83 L58 80 L74 61 L41 64 Z"/>
<path style="fill:#714d15" d="M41 64 L30 77 L41 72 L41 64 Z"/>
<path style="fill:#462f0f" d="M41 64 L38 32 L44 35 L48 70 L41 64 Z"/>
<path style="fill:#462f0f" d="M47 46 L69 42 L72 37 L72 40 L69 45 L47 49 L45 48 L45 45 L47 46 Z"/>
<path style="fill:#704c16" d="M41 64 L38 32 L71 27 L74 61 L64 64 L57 70 L48 70 L41 64 Z"/>
<path style="fill:#6f4b16" d="M47 46 L69 42 L78 29 L78 23 L27 21 L27 27 L32 40 L47 46 Z"/>
<path style="fill:#9a7229" d="M47 40 L69 36 L78 23 L72 11 L57 7 L37 10 L27 21 L32 34 L47 40 Z"/>
<path style="fill:#462f0f" d="M83 70 L81 68 L84 67 L88 71 L83 70 Z"/>
<path style="fill:#714d15" d="M88 71 L84 67 L81 68 L85 64 L90 68 L88 71 Z"/>
<path style="fill:#462f0f" d="M58 93 L51 89 L58 88 L58 93 Z"/>
<path style="fill:#714d15" d="M58 93 L58 88 L51 89 L60 86 L63 90 L58 93 Z"/>
</g>
<g id="Tent">
<path style="fill:#724e15" d="M36 50 L36 39 L37 40 L36 50 Z"/>
<path style="fill:#d0b474" d="M49 52 L76 54 L62 38 L49 52 Z"/>
<path style="fill:#724e15" d="M59 57 L60 36 L62 35 L61 57 L59 57 Z"/>
<path style="fill:#dfd2b3" d="M26 52 L36 41 C41 44 49 40 62 38 L45 58 L26 52 Z"/>
</g>
<g id="M1">
<path style="fill:#48310e" d="M38 65 L38 32 L35 33 L38 65 Z"/>
<path style="fill:#48310e" d="M63 66 L66 34 L63 33 L63 66 Z"/>
<path style="fill:#dfe4ef" d="M43 29 L58 28 L66 34 L35 33 L43 29 Z"/>
<path style="fill:#22478d" d="M50 48 L54 46 L59 48 L61 61 L48 61 L51 51 L47 57 L45 57 L50 48 Z"/>
<path style="fill:#48310e" d="M38 56 L63 56 L64 61 L37 61 L38 56 Z"/>
<path style="fill:#98702a" d="M36 60 L65 60 L63 72 L38 72 L36 60 Z"/>
<path style="fill:#dfe4ef" d="M54 56 L60 56 C60 60 54 60 54 56 Z"/>
<ellipse style="fill:#76869b" cx="57" cy="56" rx="3" ry="1"/>
<path style="fill:#dfe4ef" d="M47 56 L53 56 C53 60 47 60 47 56 Z"/>
<ellipse style="fill:#76869b" cx="50" cy="56" rx="3" ry="1"/>
<path style="fill:#dfe4ef" d="M41 55 L45 55 C45 60 41 60 41 55 Z"/>
<ellipse style="fill:#76869b" cx="43" cy="55" rx="2" ry="1"/>
<path style="fill:#6f4b16" d="M54 47 L53 45 L54 41 L57 42 L58 46 L54 47 Z"/>
<path style="fill:#48310e" d="M57 49 L56 49 L54 47 L56 46 L58 46 L57 49 Z"/>
<path style="fill:#dfd2b3" d="M57 40 L54 39 L51 42 L53 45 L54 41 L57 42 L57 40 Z"/>
</g>
<g id="M2">
<path style="fill:#48310e" d="M40 65 L44 33 L41 34 L40 65 Z"/>
<path style="fill:#48310e" d="M61 66 L61 35 L58 34 L61 66 Z"/>
<path style="fill:#dfe4ef" d="M47 30 L55 31 L61 35 L41 34 L47 30 Z"/>
<path style="fill:#970705" d="M45 49 L49 45 L52 45 L55 50 L56 62 L42 62 L45 49 Z"/>
<path style="fill:#6f4b16" d="M49 46 L48 43 L49 41 L52 41 L53 43 L52 46 L49 46 Z"/>
<path style="fill:#48310e" d="M41 55 L60 56 L61 60 L40 59 L41 55 Z"/>
<path style="fill:#99712a" d="M39 59 L62 60 L61 71 L40 70 L39 59 Z"/>
<path style="fill:#2c955f" d="M46 52 L49 50 L48 58 L44 57 L46 52 Z"/>
<path style="fill:#1d623e" d="M51 53 L49 50 L48 58 L51 57 L51 53 Z"/>
<path style="fill:#2c955f" d="M53 55 L54 54 L55 58 L53 57 L53 55 Z"/>
<path style="fill:#1d633e" d="M56 55 L54 54 L55 58 L57 57 L56 55 Z"/>
<path style="fill:#c70908" d="M49 41 L48 38 L53 38 L52 41 L49 41 Z"/>
<path style="fill:#48310e" d="M51 49 L49 46 L52 46 L51 49 Z"/>
</g>
<g id="M3">
<path style="fill:#48310e" d="M36 64 L39 32 L37 32 L36 64 Z"/>
<path style="fill:#48310e" d="M64 63 L66 37 L63 36 L64 63 Z"/>
<path style="fill:#48310e" d="M57 40 L58 45 L53 57 L51 45 L53 41 L57 40 Z"/>
<path style="fill:#76869b" d="M50 50 L53 47 L55 47 L58 50 L59 64 L48 62 L50 50 Z"/>
<path style="fill:#6f4b16" d="M54 48 L53 47 L53 44 L55 42 L56 43 L56 45 L55 47 L54 48 Z"/>
<path style="fill:#48310e" d="M37 54 L64 55 L65 59 L36 58 L37 54 Z"/>
<path style="fill:#22478d" d="M45 55 L61 56 L58 59 L41 57 L45 55 Z"/>
<path style="fill:#9a7229" d="M35 57 L66 59 L62 72 L36 70 L35 57 Z"/>
<path style="fill:#c70908" d="M39 47 L42 30 L43 47 L41 44 L39 47 Z"/>
<path style="fill:#22478d" d="M46 47 L48 30 L49 45 L48 43 L46 47 Z"/>
<path style="fill:#dfd2b3" d="M59 47 L60 33 L62 45 L61 44 L59 47 Z"/>
<path style="fill:#f8e41b" d="M41 43 L43 31 L45 45 L43 40 L41 43 Z"/>
<path style="fill:#dfe4ef" d="M44 29 L61 33 L66 37 L37 32 L44 29 Z"/>
<path style="fill:#c70908" d="M40 54 L48 54 L52 57 L38 56 L40 54 Z"/>
</g>
<g id="King">
<path style="fill:#6c4a17" d="M17 87 L83 87 L87 93 L13 93 L17 87 Z"/>
<path style="fill:#970606" d="M21 69 L79 69 L83 75 L17 75 L21 69 Z"/>
<path style="fill:#976f2a" d="M17 75 L83 75 L81 90 L19 90 L17 75 Z"/>
<path style="fill:#98702a" d="M14 97 L86 97 L87 93 L13 93 L14 97 Z"/>
<path style="fill:#b00909" d="M21 60 C25 59 75 59 79 60 C81 63 81 69 81 69 L19 69 C19 69 19 63 21 60 Z"/>
<ellipse style="fill:#c70908" cx="17" rx="4" ry="8" cy="69"/>
<ellipse style="fill:#c70908" cx="83" rx="4" ry="8" cy="69"/>
<path style="fill:#dfd2b3" d="M51 45 L46 36 L36 40 L32 60 L40 63 L29 66 C25 66 25 71 31 73 L44 77 L50 73 L56 77 L69 73 C75 71 75 66 71 66 L61 63 L69 60 L64 40 L54 36 L51 45 Z"/>
<path style="fill:#48310e" d="M44 27 L41 21 C41 5 59 5 59 21 L56 27 L44 27 Z"/>
<path style="fill:#6e4a17" d="M46 31 L46 36 L51 45 L54 36 L54 31 L46 31 Z"/>
<path style="fill:#48310e" d="M54 71 L46 73 C46 73 44 80 44 80 L50 75 L56 76 L54 71 Z"/>
<path style="fill:#6e4a17" d="M45 71 L54 75 L52 85 L48 77 L44 76 L45 71 Z"/>
<path style="fill:#6f4b16" d="M44 30 L43 22 C48 15 57 18 57 22 L56 30 L44 30 Z"/>
<path style="fill:#48310e" d="M44 30 L50 38 L56 30 C56 26 44 26 44 30 Z"/>
<path style="fill:#f8e31c" d="M41 21 L38 7 L45 14 L50 3 L55 14 L62 7 L59 21 C59 15 41 15 41 21 Z"/>
<path style="fill:#704c16" d="M32 60 L43 67 L52 69 L52 67 L50 67 L50 66 L46 66 L38 58 L32 60 Z"/>
<path style="fill:#704c16" d="M69 60 L58 67 L49 69 L49 67 L51 67 L51 66 L55 66 L63 58 L69 60 Z"/>
</g>
<g id="MusaBack">
<path style="fill:#724e15" d="M59 83 L60 91 L64 92 L61 97 L57 97 L54 84 L59 83 Z"/>
<path style="fill:#724e15" d="M39 86 L38 92 L34 93 L37 98 L41 98 L44 85 L39 86 Z"/>
<path style="fill:#714d15" d="M63 30 L67 50 L62 65 L59 73 L59 66 L57 68 L60 63 L62 51 L59 42 L63 30 Z"/>
<path style="fill:#714d15" d="M38 30 L33 48 L37 64 L40 72 L40 66 L42 67 L39 63 L38 49 L41 41 L38 30 Z"/>
<path style="fill:#dfd2b3" d="M52 3 L58 8 L60 18 L56 25 L63 30 L60 40 L58 53 L60 84 L38 87 L42 54 L40 39 L38 30 L44 25 L42 17 L45 7 L52 3 Z"/>
</g>
<g id="Musa">
<path style="fill:#724e15" d="M41 81 L39 94 L34 98 L38 99 L43 95 L46 82 L41 81 Z"/>
<path style="fill:#724e15" d="M61 84 L63 94 L68 98 L64 99 L59 95 L56 83 L61 84 Z"/>
<path style="fill:#dfd2b3" d="M48 1 L42 6 L40 16 L44 23 L37 28 L40 38 L42 51 L40 82 L62 85 L58 52 L60 37 L62 28 L56 23 L58 15 L55 5 L48 1 Z"/>
<path style="fill:#704c16" d="M45 6 L43 11 L46 20 L49 22 L53 20 L55 11 L52 7 L45 6 Z"/>
<path style="fill:#714d15" d="M37 28 L33 48 L36 64 L39 72 L39 65 L41 67 L38 62 L38 49 L41 40 L37 28 Z"/>
<path style="fill:#714d15" d="M62 28 L67 46 L64 62 L61 70 L61 64 L59 65 L62 61 L62 47 L59 39 L62 28 Z"/>
</g>
<g id="MusaBound">
<path style="fill:#724e15" d="M26 65 L39 81 L34 85 L38 86 L43 82 L34 66 L26 65 Z"/>
<path style="fill:#724e15" d="M75 66 L60 81 L65 85 L61 86 L56 82 L66 67 L75 66 Z"/>
<path style="fill:#dfd2b3" d="M47 15 L41 20 L39 30 L43 37 L36 42 L39 52 L41 65 L29 60 L26 65 L35 77 L44 78 L49 77 L56 78 L64 78 L75 66 L71 61 L57 66 L59 51 L61 42 L55 37 L57 29 L54 19 L47 15 Z"/>
<path style="fill:#704c16" d="M44 20 L42 25 L45 34 L48 36 L52 34 L54 25 L51 21 L44 20 Z"/>
<path style="fill:#714d15" d="M36 42 L34 61 L45 72 L48 80 L48 73 L50 75 L47 70 L40 60 L40 54 L36 42 Z"/>
<path style="fill:#714d15" d="M61 42 L63 61 L57 76 L54 84 L54 78 L52 79 L55 75 L58 62 L58 53 L61 42 Z"/>
</g>
<g id="HelmetOnBamidele">
<path style="fill:#656565" d="M52 54 L42 54 L43 50 L47 47 L51 50 L52 54 Z"/>
</g>
<g id="Bamidele">
<path style="fill:#724e15" d="M37 81 L38 93 L33 97 L37 98 L42 94 L42 82 L37 81 Z"/>
<path style="fill:#724e15" d="M57 81 L58 94 L63 98 L59 99 L54 95 L52 83 L57 81 Z"/>
<path style="fill:#21478d" d="M27 44 L39 51 L35 87 L45 88 L47 84 L51 89 L60 87 L55 51 L68 47 L63 35 L32 34 L27 44 Z"/>
<path style="fill:#c70908" d="M31 34 L37 51 L37 59 L34 79 L43 82 L47 63 L52 84 L61 81 L57 59 L57 51 L64 35 L54 26 L40 25 L31 34 Z"/>
<path style="fill:#714d15" d="M28 44 L28 49 L30 66 L33 74 L33 68 L35 69 L32 64 L32 51 L34 48 L28 44 Z"/>
<path style="fill:#c70908" d="M38 10 L41 16 L53 16 L57 11 L55 7 L47 4 L40 6 L38 10 Z"/>
<path style="fill:#dfd2b3" d="M39 25 L41 13 L46 11 L53 13 L55 26 L59 30 L47 27 L35 30 L39 25 Z"/>
<path style="fill:#704c16" d="M47 16 L43 15 L42 21 L47 19 L52 21 L51 15 L47 16 Z"/>
<path style="fill:#48310e" d="M37 52 L48 54 L57 52 L57 58 L48 59 L37 57 L37 52 Z"/>
<path style="fill:#d8d8d8" d="M53 58 L71 90 L74 92 L74 88 L55 57 L60 54 C60 54 59 53 59 53 L47 59 L48 60 L53 58 Z"/>
<path style="fill:#48310e" d="M52 57 L48 50 L50 49 L55 56 L52 57 Z"/>
<path style="fill:#714d15" d="M67 47 L67 50 L65 67 L62 75 L62 69 L60 70 L63 65 L63 52 L61 49 L67 47 Z"/>
</g>
<g id="Helmet">
<path style="fill:#656565" d="M83 71 L17 71 L24 45 L50 24 L76 45 L83 71 Z"/>
<ellipse style="fill:#454545" cx="50" cy="71" rx="33" ry="5"/>
</g>
<g id="BamideleTurban">
<path style="fill:#c70908" d="M41 52 L46 57 L57 53 L59 47 L55 44 L47 44 L41 48 L41 52 Z"/>
</g>
<g id="TurbanRope">
<path style="fill:#c70908" d="M70 25 L75 38 L34 51 L21 67 L39 79 L87 88 L86 74 L45 66 L90 50 L84 17 L60 12 L10 17 L23 29 L70 25 Z"/>
</g>
<g id="BamideleDead">
<path style="fill:#724e15" d="M76 68 L84 77 L82 83 L85 82 L88 75 L80 66 L76 68 Z"/>
<path style="fill:#724e15" d="M80 50 L92 53 L98 50 L97 54 L92 57 L80 55 L80 50 Z"/>
<path style="fill:#48310e" d="M59 71 L54 76 L55 78 L61 73 L59 71 Z"/>
<path style="fill:#d8d8d8" d="M60 70 L84 47 L87 47 L87 50 L62 72 L65 75 L63 76 L56 68 L58 67 L60 70 Z"/>
<path style="fill:#21478d" d="M35 66 L43 58 L79 73 L83 66 L74 57 L84 57 L89 50 L50 42 L50 32 L38 30 L27 58 L35 66 Z"/>
<path style="fill:#c70908" d="M26 58 L45 59 L52 62 L70 71 L76 68 L63 50 L76 51 L75 46 L59 43 L51 40 L38 29 L28 34 L32 42 L27 50 L26 58 Z"/>
<path style="fill:#714d15" d="M41 60 L42 65 L50 78 L52 77 L51 79 L54 81 L52 83 L48 79 L38 68 L36 65 L41 60 Z"/>
<path style="fill:#48310e" d="M46 60 L51 54 L55 41 L59 43 L57 55 L50 61 L46 60 Z"/>
<path style="fill:#714d15" d="M50 33 L53 33 L70 33 L76 38 L71 36 L71 39 L67 34 L54 38 L50 39 L50 33 Z"/>
<path style="fill:#dfd2b3" d="M8 50 L6 38 L10 34 L17 33 L23 45 L20 52 L16 49 L13 56 L8 50 Z"/>
<path style="fill:#704c16" d="M12 38 L8 39 L9 45 L13 41 L19 41 L16 36 L12 38 Z"/>
</g>
<g id="Seer">
<path style="fill:#724e15" d="M53 33 L62 36 L61 44 L57 56 L69 50 L72 55 L61 69 L65 73 L61 75 L56 70 L58 67 L43 67 L44 70 L38 73 L33 71 L39 69 L28 54 L32 49 L45 56 L40 43 L38 36 L47 33 L47 31 L45 24 L45 21 L55 20 L55 24 L53 31 L53 33 Z"/>
<path style="fill:#dfd2b3" d="M45 21 L45 14 L55 13 L55 20 L45 21 Z"/>
<path style="fill:#dfd2b3" d="M57 56 L45 56 L32 49 L28 54 L39 69 L43 67 L58 67 L61 69 L72 55 L69 50 L57 56 Z"/>
<path style="fill:#714d15" d="M36 47 L41 43 L38 36 L29 48 L44 57 L46 61 L47 58 L45 54 L36 47 Z"/>
<path style="fill:#714d15" d="M65 47 L60 44 L62 36 L72 48 L55 58 L52 61 L51 58 L55 54 L65 47 Z"/>
<ellipse style="fill:#99712a" cx="50" cy="82" rx="14" ry="6"/>
<ellipse style="fill:#6d4a17" cx="50" cy="81" rx="11" ry="4"/>
</g>
<g id="Scorpion">
<path style="fill:#48310e" d="M26 44 L35 46 L46 43 L40 47 L46 48 L59 44 L50 49 L54 50 L69 48 L59 52 L66 57 L81 55 L83 72 C83 72 75 62 75 61 C75 60 64 61 64 61 L59 66 L63 75 L76 76 L58 81 L55 68 L48 63 L39 77 L43 60 L40 58 L32 71 L36 56 L32 53 L24 63 L29 51 L20 45 L18 31 L35 20 L59 36 L32 31 L24 34 L26 44 Z"/>
</g>
<g id="Robber">
<path style="fill:#724e15" d="M32 59 L28 91 L21 95 L27 96 L34 93 L35 79 L39 66 L44 78 L45 92 L52 94 L56 92 L50 89 L50 78 L47 57 L32 59 Z"/>
<path style="fill:#462f0f" d="M38 4 L32 14 L34 23 L27 29 L31 55 L28 81 L50 70 L49 54 L52 29 L47 25 L50 15 L47 6 L38 4 Z"/>
<path style="fill:#704c16" d="M43 10 L35 14 L37 22 L44 24 L47 14 L43 10 Z"/>
<path style="fill:#714d15" d="M27 29 L22 50 L25 66 L28 74 L28 67 L30 69 L27 64 L27 51 L30 42 L27 29 Z"/>
<path style="fill:#d8d8d8" d="M70 50 L80 20 L77 15 L74 18 L67 49 L62 45 C62 45 62 48 62 48 L68 52 L75 53 L76 51 L70 50 Z"/>
<path style="fill:#462f0f" d="M63 60 L66 51 L69 52 L65 61 L63 60 Z"/>
<path style="fill:#714d15" d="M52 29 L56 47 L66 52 L67 54 L66 55 L65 54 L64 57 L62 54 L51 51 L50 42 L52 29 Z"/>
<path style="fill:#724e15" d="M64 57 L67 53 L69 54 L67 58 L64 57 Z"/>
</g>
<g id="RobberDead">
<path style="fill:#724e15" d="M26 45 L43 40 L33 33 L22 36 L8 35 L1 40 L1 42 L8 39 L23 41 L9 44 L4 51 L7 52 L12 47 L26 45 Z"/>
<path style="fill:#462f0f" d="M97 30 L88 27 L79 30 L70 28 L42 30 L24 33 L36 44 L50 42 L71 43 L79 41 L90 41 L98 36 L97 30 Z"/>
<path style="fill:#714d15" d="M69 32 L57 38 L48 50 L42 54 L43 58 L47 53 L47 56 L49 53 L60 43 L74 40 L69 32 Z"/>
</g>
<g id="Lamp">
<path style="fill:#f8e31c" d="M63 54 L62 51 C72 47 69 52 63 54 Z M51 58 L49 61 L58 61 L56 58 L62 56 C74 52 74 45 62 49 L61 47 L53 40 L46 47 L44 51 L30 46 L32 48 L46 56 L51 58 Z"/>
</g>
<g id="Jinn">
<path style="fill:#22478d" d="M53 71 L43 50 L42 36 L36 41 L36 52 L38 56 L35 54 L33 60 L31 51 L32 38 L41 27 L49 23 L52 17 L52 9 L59 5 L65 10 L63 19 L64 27 L73 32 L76 47 L72 60 L67 67 L67 62 L63 63 L67 59 L69 46 L66 39 L58 56 L53 71 Z"/>
</g>
<g id="TempleFront">
<path style="fill:#bb8b40" d="M200 200 L-100 200 L-100 -100 L200 -100 L200 200 Z M90 92 L102 47 L92 16 L80 90 L90 92 Z M25 94 L69 91 L72 88 L83 14 L72 10 L52 14 L29 5 L25 8 L22 91 L25 94 Z M5 89 L10 94 L13 91 L16 8 L13 5 L3 8 L-7 47 L5 89 Z"/>
</g>
<g id="Mongol">
<path style="fill:#734f15" d="M72 46 L65 46 L62 37 L69 35 L72 46 Z"/>
<path style="fill:#724e15" d="M41 80 L43 66 L52 68 L48 80 L49 81 L48 93 L38 94 L42 89 L39 81 L41 80 Z"/>
<path style="fill:#724e15" d="M59 80 L54 69 L62 66 L66 80 L68 81 L64 89 L68 95 L58 93 L58 81 L59 80 Z"/>
<path style="fill:#4d3310" d="M25 61 L23 52 L20 53 L22 50 L25 49 L28 50 L25 51 L27 60 L25 61 Z"/>
<path style="fill:#734f15" d="M27 52 L34 46 L37 36 L44 37 L40 49 L28 55 L26 57 L25 54 L23 55 L23 53 L27 52 Z"/>
<path style="fill:#4d3310" d="M38 29 L48 21 L56 21 L67 28 L72 36 L63 39 L62 52 L68 73 L56 76 L53 70 L51 76 L39 72 L43 53 L43 39 L33 38 L38 29 Z"/>
<path style="fill:#4d3310" d="M44 19 L46 10 L52 4 L58 10 L60 19 L52 24 L44 19 Z"/>
<path style="fill:#f1864c" d="M48 21 L48 11 L56 11 L56 21 L52 24 L48 21 Z"/>
<path style="fill:#d8d8d8" d="M22 50 L15 13 L17 6 L25 49 L22 50 Z"/>
<circle style="fill:#d8d8d8" cx="70" cy="56" r="16"/>
<circle style="fill:#656565" cx="70" cy="56" r="7"/>
<path style="fill:#745014" d="M24 59 L22 55 L25 54 L26 58 L24 59 Z"/>
</g>
<g id="Crusader">
<path style="fill:#656565" d="M42 78 L43 28 L45 26 L58 25 L59 28 L61 78 L61 89 L67 95 L56 93 L55 76 L52 70 L49 77 L50 94 L39 96 L45 90 L42 78 Z"/>
<path style="fill:#efefef" d="M39 30 L41 38 L42 56 L41 79 L51 82 L53 63 L54 83 L63 80 L60 55 L62 37 L64 29 L59 27 L52 31 L43 27 L39 30 Z"/>
<path style="fill:#d8d8d8" d="M45 26 L43 9 L50 5 L59 10 L58 26 L52 27 L45 26 Z"/>
<path style="fill:#3c3c3c" d="M48 16 L45 14 L57 14 L54 16 L48 16 Z"/>
<path style="fill:#efefef" d="M26 55 L26 92 L28 95 L30 92 L29 55 L34 57 C34 57 34 53 34 53 L21 53 L21 57 L26 55 Z"/>
<path style="fill:#3c3c3c" d="M26 53 L26 44 L29 44 L29 53 L26 53 Z"/>
<path style="fill:#656565" d="M34 44 L35 36 L39 30 L42 39 L39 47 L31 52 L29 53 L29 49 L26 48 L29 47 L31 48 L34 44 Z"/>
<path style="fill:#c70908" d="M51 50 L50 44 L45 44 L45 41 L50 40 L50 34 L53 34 L53 40 L58 41 L58 43 L53 44 L54 50 L51 50 Z"/>
<path style="fill:#d8d8d8" d="M58 73 L58 55 L77 50 L80 71 L71 95 L58 73 Z"/>
<path style="fill:#3c3c3c" d="M42 57 L42 54 L60 52 L60 56 L42 57 Z"/>
<path style="fill:#656565" d="M70 52 L68 35 L64 29 L61 38 L64 49 L56 53 L54 58 L56 62 L58 57 L70 52 Z"/>
<path style="fill:#c70908" d="M69 83 L68 68 L62 68 L62 65 L68 64 L67 57 L71 56 L71 63 L76 62 L76 65 L72 67 L71 83 L69 83 Z"/>
<path style="fill:#656565" d="M25 53 L25 49 L28 49 L29 53 L25 53 Z"/>
</g>
<g id="Chains">
<path style="fill:#48310e" d="M31 31 L12 50 L24 61 L39 46 L31 31 Z"/>
<path style="fill:#48310e" d="M88 54 L65 46 L61 65 L80 69 L88 54 Z"/>
<circle style="fill:none;stroke:#48310e;stroke-width:4px" cx="42" cy="42" r="4"/>
<circle style="fill:none;stroke:#48310e;stroke-width:4px" cx="58" cy="54" r="4"/>
<circle style="fill:none;stroke:#48310e;stroke-width:4px" cx="54" cy="42" r="4"/>
</g>
<g id="Carpet">
<path style="fill:#970705" d="M16 66 C16 45 48 46 65 22 C68 17 86 27 84 31 C61 62 37 52 32 80 C29 82 15 70 16 66 Z"/>
<path style="fill:#c70908" d="M16 65 C17 45 49 45 65 23 C68 19 84 28 82 32 C62 61 36 52 31 78 C28 80 15 69 16 65 Z"/>
</g>
<g id="Sword">
<path style="fill:#d8d8d8" d="M48 73 L67 16 L61 7 L56 12 L42 71 L33 63 C33 63 33 69 33 69 L44 76 L58 78 L59 74 L48 73 Z"/>
<path style="fill:#462f0f" d="M37 92 L42 74 L47 76 L41 93 L37 92 Z"/>
</g>
<g id="A1">
<path style="fill:#dfd2b3" d="M73 31 L84 20 L89 22 L83 29 L73 31 Z"/>
<path style="fill:#6f4b16" d="M84 20 L15 88 L12 86 L81 18 L84 20 Z"/>
<path style="fill:#dfd2b3" d="M81 18 L70 29 L73 19 L79 13 L81 18 Z"/>
</g>
<g id="A2">
<path style="fill:#dfd2b3" d="M73 31 L84 20 L89 22 L83 29 L73 31 Z"/>
<path style="fill:#6f4b16" d="M84 20 L15 88 L12 86 L81 18 L84 20 Z"/>
<path style="fill:#dfd2b3" d="M81 18 L70 29 L73 19 L79 13 L81 18 Z"/>
</g>
<g id="A3">
<path style="fill:#dfd2b3" d="M73 31 L84 20 L89 22 L83 29 L73 31 Z"/>
<path style="fill:#6f4b16" d="M84 20 L15 88 L12 86 L81 18 L84 20 Z"/>
<path style="fill:#dfd2b3" d="M81 18 L70 29 L73 19 L79 13 L81 18 Z"/>
</g>
<g id="Cross">
<path style="fill:#4d3310" d="M74 44 L27 44 L28 37 L73 37 L74 44 Z"/>
<path style="fill:#6f4b16" d="M57 85 L50 79 L46 16 L53 16 L57 85 Z"/>
<path style="fill:#dfd2b3" d="M56 37 L48 46 L46 44 L54 35 L56 37 Z"/>
<path style="fill:#dfd2b3" d="M55 46 L46 37 L47 35 L57 44 L55 46 Z"/>
</g>
<g id="Grass">
<path style="fill:#dfd2b3" d="M35 15 C49 43 31 71 39 85 C47 69 46 28 35 15 Z"/>
<path style="fill:#dfd2b3" d="M65 9 C47 26 36 77 46 91 C59 73 46 48 65 9 Z"/>
</g>
<g id="Silk">
<path style="fill:#078c36" d="M27 83 C27 83 33 39 50 18 C61 16 61 27 74 29 C69 46 68 69 71 81 C49 86 43 67 27 83 Z"/>
<path style="fill:#0cc74f" d="M31 63 C31 63 34 50 40 35 C53 29 52 48 70 51 C69 57 69 61 69 69 C47 74 47 47 31 63 Z"/>
</g>
</svg>
<div id="B"><div id="BM"></div><div id="BP"></div></div>
<div id="I"></div>
<div id="M"></div>
</body>
<script>"use strict";const state={scene:"Intro",inventory:[]},scenes={Intro:function(){set(Throne),set(King,function(){say([King,"Hello my son!",King,"I sent for you because I have a quest for you!",King,"I need a special gift for your mother, something that does not exist in my kingdom, something precious.",King,"So you will travel strange new lands, and find your mother a gift that will make her proud of you.",King,"Bamidele will go with you, for your protection, and to keep you company.",Bamidele,"I will!",King,"Now go and ask the seer for advice."],function(){show("Market")})},0,-10,.4,0,"The king"),set(MusaBack,null,25,18,.5),set(Bamidele,null,-26,5,.5,0,"Bamidele, the kings guard"),set(HelmetOnBamidele,null,-26,-18,.5,0,"Bamidele, the kings guard")},Market:function(){set(Market),set(Musa,null,20,15,.55,0),set(RedFruits,function(){say([Musa,"These are tasty! I like them!"])},-4,5,0,0,"Red fruits"),set(YellowFruits,function(){say([Musa,"Urgh, the yellow ones make me sick."])},-13,7,0,0,"Yellow fruits"),set(GreenFruits,function(){say([Musa,"The green ones are too sour!"])},3,10,0,0,"Green fruits");const a=function(){state.seer?shade("A few days later",function(){show("CampNight")}):say([Musa,"I should ask the seer first"])};set(Seer,function(){state.seer>1?say([Musa,"Where…",Seer,"Bagdad, you should go now or your fate will happen without you.",Musa,"Oh!"],a):state.seer==1?say([Musa,"Where can I find this silk cloth, again?",Seer,"Bagdad, a city in the north east",Musa,"Bagdad! Right!"],function(){++state.seer}):say([Musa,"Tell me where I can find something very special, something that doesn't exist around here, for my mother. ",Seer,"Let me have a look into your future…",Seer,"Hmmm, in a land far, far away, there exists a cloth, far thinner and smoother than everything we have ever seen. It's called silk, and it's sold in the streets of Bagdad, a city far away north east, hmmm…",Seer,"On your journey the gods will test you many times. Once, twice, but the 13th…",Musa,"Yes?",Seer,"…the 13th cannot be a Vikin…, ah sorry, wrong prophecy, happens, you know, no, no, you get the silk and you're fine!",Musa,"Okay!",Seer,"And, one last thing: to fullfill your fate, you should not kill unless you have no other choice.",Musa,"Good to know."],function(){state.seer=1})},-37,14,.5,0,"Talk to the seer"),setHotspot(OutOfTown,"Let's go!",a),set(Bamidele,function(){say([Bamidele,"Hurry up!"])},45,20,.55,0,"Bamidele"),set(HelmetOnBamidele,null,45,-5,.55,0,"Bamidele")},CampNight:function(){set(CampNight),set(Tent,function(){state.scorpion?shade("But the night brought other visitors…",function(){show("CampDay")}):say([Musa,"We should deal with this scorpion before we get to sleep!",Bamidele,"I will kill the beast!",Musa,"The seer said we should not kill unless necessary"])},0,0,1,0,"Go to sleep"),state.scorpion||set(Scorpion,function(){say([Musa,"Better keep my distance"])},-10,35,.1,0,"A scorpion"),set(Bamidele,function(){state.scorpion?say([Musa,"Let's go to sleep then",Bamidele,"You sleep. I take the first watch",Bamidele,"And the second"]):say([Musa,"Any idea how to catch it?",Bamidele,"I would just kill it",Musa,"The seer said we should not kill unless necessary"])},-31,5,.55,0,"Talk to my Bamidele"),state.inventory.includes(Helmet)||set(HelmetOnBamidele,function(){say([Musa,"Give me your helmet"],function(){say([Bamidele,"Why?",Musa,"Because I want to catch it!",Bamidele,"Fine, have it"],function(){remove(HelmetOnBamidele),addToInventory(Helmet,function(){state.scorpion?state.scene=="CampDay"?say([currentMusa(),"Want a helmet?",Robber,"Give me everything you have!",currentMusa(),"Take it"],function(){removeFromInventory(Helmet),shade("Aaaahhh!",function(){show("CampDead")})}):say([currentMusa(),"A scorpion in a helmet"]):(remove(Scorpion),state.scorpion=1,say([currentMusa(),"Got you!",Bamidele,"You can keep the helmet"]))})})})},-31,-21,.55,0,"Bamidele's helmet"),set(Musa,null,35,14,.5,0)},CampDay:function(){set(CampDay),set(Tent),set(Robber,function(){say([MusaBound,"Excuse me…",Robber,"Silence! I will sell you for a lot of money!",Robber,"Ha ha ha!"])},-32,-10,.4,0,"Robber"),set(BamideleDead,null,-5,25,.5,0,"Dead Bamidele"),set(BamideleTurban,null,-25,16,.5,0,"Dead Bamidele"),set(MusaBound,null,36,14,.5,0),set(Chains,null,36,24,.13,0),state.morning||(state.morning=1,say([Robber,"Good morning, slave!",MusaBound,"Poor Bamidele…",Robber,"He's ventured too far! Ha ha ha!"]))},CampDead:function(){set(CampDay),set(Tent),set(BamideleDead,null,-5,25,.5,0,"Dead Bamidele"),state.inventory.includes(TurbanRope)||set(BamideleTurban,function(){state.lookForRope&&(say([Musa,"That will do!"]),remove(BamideleTurban),addToInventory(TurbanRope,function(){state.scene=="TempleEntry"?(removeFromInventory(TurbanRope),show("Temple")):noUse()}))},-25,16,.5,0,state.lookForRope?"Turban":"Dead Bamidele"),set(RobberDead,null,-50,14,.4,0,"Dead robber"),set(Helmet,function(){say([currentMusa(),"Won't touch the thing!"])},-37,14,.05,-22,"Helmet"),state.inventory.includes(Sword)||set(Sword,function(){addToInventory(Sword,function(){state.silk?(removeFromInventory(Sword),addToInventory(Silk),say([M3,"Nice trading with you",currentMusa(),"Finally I got the silk!",currentMusa(),"Time to go home!"])):state.unchained?noUse():(state.unchained=1,shade("Clang!",function(){show("CampDead"),say([Musa,"Free again!"])}))})},-40,19,.2,100,"Sword"),state.unchained?(set(Musa,null,36,14,.5,0),state.inventory.includes(Chains)||set(Chains,function(){addToInventory(Chains)},36,44,.13,0,"Chains")):(set(MusaBound,null,36,13,.5,0),set(Chains,null,36,23,.13,0)),set(ColumnDistant,function(){state.unchained?show("TempleEntry"):say([MusaBound,"Have to free myself first"])},-40,-3,.06,0,"Something in the distance")},TempleEntry:function(){set(TempleEntry),set(Column,function(){state.inventory.includes(TurbanRope)?(removeFromInventory(TurbanRope),show("Temple")):(state.lookForRope=1,say([Musa,"I need a rope to get down there"]))},26,22,.4,0,"An opening to a buried temple"),set(Tent,function(){show("CampDead")},-43,6,.2,0,"Back to the camp"),set(Musa,null,-20,12,.5,0)},Temple:function(){set(Temple),set(TempleFront),set(Lamp,function(){set(Jinn,function(){say([Musa,[{text:()=>state.wishes?null:"My three wishes are…",action:()=>{say([Jinn,"Sorry, no wishes today, kid"]),state.wishes=1}},{text:()=>state.inventory.includes(Carpet)?"How do I use the carpet?":"How do I get to Bagdad?",action:()=>{state.inventory.includes(Carpet)?(say([Jinn,"The carpet only flies when noone is looking",Musa,"Hmmm"]),state.howToSteer=1):say([Jinn,"I would take the flying carpet here",Musa,"Oh!"])}},{text:()=>state.howToSteer?"And how do I steer the carpet?":null,action:()=>{say([Jinn,"Just tell it where to go",Musa,"Bagdad!",Jinn,"Someone is still looking…"],function(){remove(Jinn),window.onblur=function(){state.inventory.includes(Carpet)&&(fly("Bagdad"),state.carpetUsed=1,window.onblur=null)}})}}]])},11,0,.5,0,"Talk to the Jinn"),state.jinn?say([Jinn,"How can I help you?"]):(state.jinn=1,say([Jinn,"Hello my friend!",Musa,"Whoaa!"]))},12,14,.2,0,"A golden lamp"),set(Carpet,function(){addToInventory(Carpet,function(){state.carpetUsed?say([currentMusa(),[{text:()=>state.scene!="Bagdad"?"Bagdad":null,action:()=>{fly("Bagdad")}},{text:()=>state.byzantine&&!state.scene.startsWith("Byzantium")?"Byzantium":null,action:()=>{fly("Byzantium")}},{text:()=>"Home",action:()=>{state.inventory.includes(Silk)?fly("Home"):say([currentMusa(),"I can't go home without the silk"])}}]]):say([currentMusa(),state.howToSteer?"Someone is still looking…":"I don't know how"])}),say([Musa,"Got a carpet, need a house!"])},10,28,.3,20,"A carpet"),set(Musa,null,-12,20,.4,0)},Bagdad:function(){set(Bagdad),set(Mongol,function(){state.byzantine?say([Mongol,"I said we meet in Byzantium or should I chop your ugly head off right now?!",MusaBack,"Better wait until Byzantium if you don't mind"]):state.bagdad?(say([MusaBack,"But where can I find silk now?",Mongol,"Try Byzantium, ha ha ha!",Mongol,"I will meet you there…"]),state.byzantine=1):(say([MusaBack,"Is this Bagdad?",Mongol,"Bagdad, and everything in it, belongs to us Mongols now!"]),state.bagdad=1)},0,0,.45,0,"Mongol"),set(MusaBack,null,-26,17,.5,0);const a=function(b){state.arrow?say([MusaBack,"I already have an arrow"]):(addToInventory(b,buildCross),state.arrow=1)};state.inventory.includes(A1)||set(A1,()=>a(A1),20,18,.2,-35,"Broken Arrow"),state.inventory.includes(A2)||set(A2,()=>a(A2),-5,32,.2,-55,"Broken Arrow"),state.inventory.includes(A3)||set(A3,()=>a(A3),40,28,.2,-15,"Broken Arrow")},Byzantium:function(){set(Byzantium),set(Crusader,function(){state.inventory.includes(Cross)?say([Crusader,"You may pass"]):say([Crusader,"Are you Christian?",MusaBack,"No",Crusader,"Thought so. Then you can't enter. Only Christians today."])},-21,11,.5,0,"A crusader"),set(MusaBack,null,34,18,.5,0),setHotspot(Enter,"Enter Byzantium",function(){state.inventory.includes(Cross)?show("ByzantiumMarket"):say([Crusader,"Not so fast!"])}),state.inventory.includes(Grass)||set(Grass,function(){addToInventory(Grass,buildCross)},46,16,.13,0,"Some grass")},ByzantiumMarket:function(){set(ByzantiumMarket),set(M1,function(){say([M1,"Want to buy some porcelain?",MusaBack,"No, not my cup of tea"])},-29,-13,1,0,"Porcelain"),set(M2,function(){say([M2,"Want to buy some jade?",MusaBack,"No, thanks"])},0,-11,1,0,"Jade"),set(M3,function(){state.inventory.includes(Silk)?say([M3,"Want to buy some more silk?",MusaBack,"No, thanks, that's enough"]):(state.silk=1,say([M3,"Want to buy some silk?",MusaBack,"Very much!",M3,"Do you have something to trade?"]))},28,-10,1,0,"Silk"),set(MusaBack,null,11,9,.5,0)},Home:function(){state.inventory.length=0,updateInventory(),set(Throne),set(King,null,0,-10,.4),set(MusaBack,null,25,18,.5),say([MusaBack,"I'm home! And I have the gift you asked for!",King,"Wonderful! But the gift is having you back, and as the man that you need to be to follow me.",King,"Now, you saw the world, and will be a wise king one day.",MusaBack,"I will be."],function(){M.onclick=null,M.innerHTML="The End",M.style.display="block"})}};let centerX,centerY,hasTouch;function shade(a,b){M.innerHTML=a,M.style.display="block",M.onclick=function(){clearTimeout(c),M.style.display="none",b&&b()};const c=setTimeout(M.onclick,1e3+200*a.split(" ").length)}function fly(a){shade("Woooooooosh!",function(){show(a)})}function currentMusa(){return[Musa,MusaBack,MusaBound].find(a=>a.style.visibility=="visible")}function newZone(a){const b=document.createElementNS("http://www.w3.org/2000/svg","circle");return b.setAttributeNS(null,"cx",50),b.setAttributeNS(null,"cy",50),b.setAttributeNS(null,"r",5*a),b.setAttributeNS(null,"fill","rgba(0,0,0,0)"),b}function removeZone(a){a.zone&&(S.removeChild(a.zone),a.zone=null)}function addZone(a,b){(!a.zone||a.zone.size!=b)&&(a.zone&&removeZone(a),a.zone=newZone(1/b),a.zone.size=b,S.appendChild(a.zone));const c=a.zone;c.style.transformOrigin=a.style.transformOrigin,c.style.transform=a.style.transform,c.style.display="block",c.style.visibility="visible",c.onclick=a.onclick,c.hoverMessage=a.hoverMessage}function noUse(){say([currentMusa(),"This has no use here"])}function updateInventory(){let a=0;state.inventory.forEach(b=>{b.style.transformOrigin="0 0",b.style.transform=`translate(${a}px, 0px) scale(.1)`,b.style.visibility="visible",b.onclick=function(){if(B.talking)return;b.use?b.use():noUse()},hasTouch&&addZone(b,.1),a+=10})}function remove(a){a.style.visibility="hidden";const b=a.children;for(let c=b.length;c--;){const d=b[c];d.onclick=null}a.onclick=null,removeZone(a)}function removeFromInventory(a){a.style.visibility="hidden",removeZone(a),state.inventory=state.inventory.filter(b=>b!=a),updateInventory()}function addToInventory(a,b){state.inventory.includes(a)||(remove(a),a.style.visibility="hidden",a.use=b,state.inventory.push(a),updateInventory())}function buildCross(){state.arrow&&state.inventory.includes(Grass)?(removeFromInventory(A1),removeFromInventory(A2),removeFromInventory(A3),removeFromInventory(Grass),addToInventory(Cross,function(){state.silk?say([M3,"Hm, there a too many around here"]):state.scene=="Byzantium"?say([currentMusa(),"See, I'm Christian!",Crusader,"Very well! You may pass"]):noUse()}),say([currentMusa(),"Now I can pass the crusader"])):noUse()}function clear(){clearTimeout(B.tid),B.time=Date.now(),B.style.display="none"}function skip(){B.next&&Date.now()-B.time>300&&(clear(),B.next())}function say(a,b,c){if(!c&&B.talking)return;clear();const d=a.shift(),e=a.shift();B.style.left="0px",B.style.top="0px",B.style.display="block";if(Array.isArray(e)){BM.innerText="";const n=document.createElement("ol");e.map(function(o){const p=o.text();if(p){const q=document.createElement("li"),k=document.createElement("a");k.href="javascript:void(0)",k.onclick=o.action,k.innerHTML=p,q.appendChild(k),n.appendChild(q)}}),BM.appendChild(n),B.next=null}else BM.innerHTML=e,B.talking=a.length>0||b!=null?1:0,B.time=Date.now(),B.next=function(){a.length>0?say(a,b,1):(clear(),B.next=null,B.talking=0,b&&b())},B.tid=setTimeout(B.next,1e3+200*e.split(" ").length);const f=d.getBoundingClientRect(),g=f.width/2|0,h=B.getBoundingClientRect(),r=h.width/2|0,j=parseFloat(getComputedStyle(B).fontSize)|0,l=window.innerWidth,m=(f.x||f.left)+g|0;let i=m-r;i<0?i=j:i+j+h.width>=l&&(i=l-j-h.width),B.style.left=i+"px",B.style.top=(f.y||f.top)-h.height-j*1.5+"px",BP.style.left=m-j/2-i+"px"}function info(a){I.innerHTML=typeof a=="string"?a:"&nbsp;"}function setHotspot(a,b,c){if(hasTouch){const d=a.children;for(let e=d.length;e--;)d[e].hoverMessage=b;a.hoverMessage=b}else a.onmousemove=b?function(d){info(b),d.stopPropagation()}:null;c&&(a.onclick=c)}function set(a,b,c,d,e,f,g){e=e||1,a.style.transformOrigin="50px 50px",a.style.transform=`translate(${centerX-50+(c||0)}px, ${centerY-50+(d||0)}px) rotateZ(${f||0}deg) scale(${e})`,a.style.visibility="visible",setHotspot(a,g),b&&(a.onclick=function(h){B.talking||b(),h.stopPropagation()},hasTouch&&addZone(a,e))}function show(a){info(),clear();for(const b of S.getElementsByTagName("g"))b.style.visibility="hidden",b.onclick=null,removeZone(b);state.scene=a,scenes[a](),updateInventory()}function resize(){const a=window.innerWidth,b=window.innerHeight,c=Math.min(a,b),d=c/100,e=a/d,f=b/d;centerX=e>>1,centerY=f>>1;const g=S.style;g.width=e+"px",g.height=f+"px",g.transformOrigin="top left",g.transform=`scale(${d})`,g.display="block",show(state.scene)}window.onload=function(){document.onclick=skip,document.onkeyup=skip,(hasTouch="ontouchstart"in document)?(document.addEventListener("gesturestart",function(a){a.preventDefault()},!1),document.addEventListener("gesturechange",function(a){a.preventDefault()},!1),document.addEventListener("gestureend",function(a){a.preventDefault()},!1),document.ontouchstart=document.ontouchmove=function(a){const b=a.touches;if(b&&b.length>0){const c=b[0],d=document.elementFromPoint(c.pageX,c.pageY);info(d&&d.hoverMessage?d.hoverMessage:null)}},document.ontouchend=document.ontouchcancel=info):document.onmousemove=info,window.onresize=resize,resize()};
</script></html>
