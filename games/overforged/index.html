<!doctype html><title>Overforged - js13kGames 2023</title><style>:root{--border-color:#3c2013}body,html{margin:0;background-color:#000;height:100%;position:relative}#canvas{position:relative;image-rendering:pixelated;background-color:#111}.game{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}</style><div class=game><canvas height=400 id=canvas width=610></canvas></div><script>function c(a,t){a.$.Qb?.(),a.$=t,a.$.ib?.()}let d;function l(a,t,e,s,i,h,r,o){return t=Math.max(0,Math.min(t+s,h+o)-Math.max(t,h)),0<Math.max(0,Math.min(a+e,i+r)-Math.max(a,i))&&0<t}let b=new class{constructor(){this.eb=this.ab=this.$a=this.Za=this.bb=this.la=!1,this.da=this.ca=0,this.Ja=this.ma=!1,this.$=new Map,this.ba={Za:this.Za,$a:this.$a,ab:this.ab,eb:this.eb,la:this.la,bb:this.bb,Ja:this.Ja},document.addEventListener("keydown",a=>{this.$.set(a.code,!0)}),document.addEventListener("keyup",a=>{this.$.set(a.code,!1)}),this.ga=new DOMPoint}};function $(s,i){if(!(i<=1)){let t,e=s;for(let a=2;a<i;a++)t=e+s,e=s,s=t}return s}function u(a,t){t?(a.day=0,a.ba=3,a.ca=1):(a.day=1,a.ba=5,a.ca=2),a.Sa=1,a.Ta=1,a.Qa=1,a.Pa=0,a.ra=0,a.xa=10,a.Wa=0,a.pb=!1,a.gb=!1,a.La=!1,a.$=!1}class t{constructor(){this.Ib=!1,this.currentTime=this.day=0,this.Fb=this.Db=this.Gb=1,this.Pa=0,this.ba=1,this.ma=0,this.ra=400,this.ca=2,this.Wa=this.ga=this.da=0,this.La=this.gb=this.pb=!1,this.Jb=100,this.Kb=this.Lb=1}set $(a){this.Ib=a}get $(){return this.Ib}set Ta(a){this.Gb=a,this.Lb=+this.Ta/5+1}get Ta(){return this.Gb}set Qa(a){this.Db=a,this.Jb=100+100*this.Qa/10}get Qa(){return this.Db}set Sa(a){this.Fb=a,this.Kb=+this.Sa/10+1}get Sa(){return this.Fb}set xa(a){this.ga=a,10<=this.ga&&(this.ga=10)}get xa(){return this.ga}}let i=new t,T={" ":0,"!":1,'"':2,"#":3,"(":4,")":5,"*":6,"+":7,",":8,"-":9,".":10,"/":11,"[":12,"\\":13,"]":14,"^":15,0:16,1:17,2:18,3:19,4:20,5:21,6:22,7:23,8:24,9:25,":":26,";":27,"<":28,"=":29,">":30,"?":31,"@":32,A:33,B:34,C:35,D:36,E:37,F:38,G:39,H:40,I:41,J:42,K:43,L:44,M:45,N:46,O:47,P:48,Q:49,R:50,S:51,T:52,U:53,V:54,W:55,X:56,Y:57,Z:58,"{":59,"|":60,"}":61,"~":62,"&":63,"`":64,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,_:91},P=!1;function f(a,t,e,s,i,h){a.$.strokeStyle=h.color||"#fff",h.fill?(a.$.fillStyle=h.Eb||h.color||"#fff",a.$.fillRect(Math.floor(t),Math.floor(e),s,i)):(a.$.lineWidth=h.lineWidth||2,a.$.strokeRect(Math.floor(t),Math.floor(e),s,i))}function w(a,t,e,s,i,h,r,o,n,l={}){a.$.save();var{ta:c=0,Bb:d=0}=l;a.$.translate(Math.floor(h)+Math.floor(o/2),Math.floor(r)+Math.floor(n/2)),h=l?.rotate??0,(l=l?.flipX)&&a.$.scale(l,1),a.$.rotate(h),a.$.drawImage(a.ba,t,e,s,i,-Math.floor(o/2)+c,-Math.floor(n/2)+d,o,n),a.$.restore()}function p(t,e,s,i,h){var r=e.split(""),o=(e=Math.floor(h.za?5*-e.length/2:0),void 0!==h.opacity&&(t.$.globalAlpha=h.opacity),document.createElement("canvas")),n=(o.width=5,o.height=6,o.getContext("2d",{willReadFrequently:!0}));for(let a=0;a<r.length;a++){var l=r[a],c=($=T[l])%16,d=Math.floor($/16),b=h.size||1,$=5*b,u=(b*=6,"i"===l?1:0);if(h.color){n?.drawImage(t.ca,5*c,6*d,5,6,0,0,5,6),c=(l=n?.getImageData(0,0,5,6))?.data,d=h.color;for(let a=0;a<c.length;a+=4)0<c[a+3]&&(c[a]=d.r,c[a+1]=d.Ba,c[a+2]=d.b);n?.putImageData(l,0,0),t.$.drawImage(o,0,0,5,6,s+a*$+u+e,i,$,b),n?.clearRect(0,0,5,6)}else t.$.drawImage(t.ca,5*c,6*d,5,6,s+a*$+u+e,i,$,b)}t.$.globalAlpha=1}function m(a){a.$.fillStyle="#3d453d",a.$.fillRect(0,0,a.ua,a.Ea),f(a,160,70,200,200,{color:"#232323",fill:!0})}class a{constructor(){var i,h,a=document.querySelector("#canvas");this.$=a.getContext("2d"),this.$.imageSmoothingEnabled=!1,P||(this.$.scale(2,2),P=!0),h=b,(i=a).addEventListener("mousemove",a=>{var t,e=i.getBoundingClientRect(),s=i.parentElement;s&&(t=window.getComputedStyle(s).transform||"none",s=1,"none"!==t&&(s=parseFloat(t.split("(")[1].split(")")[0].split(",")[0])),t=(a.clientY-e.top)/s/2,h.ca=(a.clientX-e.left)/s/2,h.da=t)}),i.addEventListener("mousedown",a=>{0===a.button&&(h.ma=!0)}),i.addEventListener("mouseup",a=>{0===a.button&&(h.ma=!1)}),this.ca=new Image,this.ca.src="f.png",this.ba=new Image,this.ba.src="a.png"}get ua(){return this.$.canvas.width}get Ea(){return this.$.canvas.height}}function g(a,t,e){a.ba=!0,a.da=t,a.ga=50,a.direction=1,e&&(a.direction=-1,a.$=50)}class e{constructor(a){this.ca=a,this.ba=!1,this.$=0,this.ga=1e3,this.direction=1,this.da=()=>{}}update(){var a=this.$/this.ga;f(this.ca,0,0,this.ca.ua/2*(a<.5?2*a*a:1-Math.pow(-2*a+2,2)/2),this.ca.Ea,{fill:!0,color:"#111"}),this.ba&&(this.$+=this.direction,0<this.direction&&this.$>this.ga&&(this.ba=!1,this.$=0,this.da()),this.direction<0)&&this.$<=0&&(this.ba=!1,this.$=0,this.da())}}class s{constructor(a){this.type=a}}function v(t,a){a.forEach(a=>{t.aa[a.type]=a}),t.Mb=!0}function h(t,a){return a.every(a=>!!t.aa[a])}class y{constructor(){this.aa={},this.Mb=!1;let t="";for(let a=0;a<16;a++)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));this.id=t}}function o(a,t){if(!t)throw Error("ID IS UNDEFINED");if(a=a.mb.find(a=>a.id===t))return a;throw Error(`Entity ${t} not found`)}class r{constructor(a){this.Cb=[],this.ha=[],this.mb=[],this.ia=new t,this.qb=[],this.hb=[],this.Cb=a}}function n(a){for(let t of a.ca){var e=a.$.filter(a=>h(a,t.Cb));t.mb=a.$,t.ha=e}}function F(a,t){a.$.push(...t),a.ba&&n(a)}class q{constructor(a){this.ba=!1,this.$=[],this.ca=[],this.ga=[],this.da=[],this.ma=a}start(){this.ba=!0,n(this)}Ga(){for(var a of this.ca)null!==a.Ga&&a.Ga?.()}update(a){if(this.ba){for(var t of this.ca)t.update(a),this.ga.push(...t.qb),this.da.push(...t.hb),t.hb=[],t.qb=[];0<this.da.length&&(F(this,this.da),this.da=[]),0<this.ga.length&&(e=this.ga,this.$=this.$.filter(a=>!e.includes(a.id)),this.ba&&n(this),this.ga=[]),0<this.$.filter(a=>a.Mb).length&&n(this)}var e}}class x extends s{constructor(a,t){super(2),this.y=this.x=0,this.x=a,this.y=t}}class S extends s{constructor(a,t,e,s){super(4),this.Bb=this.ta=this.ja=this.ea=this.oa=this.na=this.qa=this.pa=0,this.kb=-1,this.rotate=0,this.flipX=1,this.Aa=0,this.visible=!0,this.pa=a,this.qa=t,this.na=e,this.oa=s,this.ea=e,this.ja=s}}function z(a,t){switch(a){case"Steel":t.pa=25,t.qa=8,t.na=7,t.oa=7,t.ea=7,t.ja=7,t.ta=-8;break;case"Coal":t.ta=-7;break;case"Sharpened Axe":t.pa=58,t.qa=10,t.na=10,t.oa=9,t.ea=10,t.ja=9,t.ta=7;break;case"Axe":t.pa=48,t.qa=10,t.na=10,t.oa=9,t.ea=10,t.ja=9,t.ta=7;break;case"Sharpened Sword":t.pa=80,t.qa=0,t.na=10,t.oa=10,t.ea=10,t.ja=10,t.ta=7;break;case"Forged Blade":t.pa=50,t.qa=0,t.na=10,t.oa=10,t.ea=10,t.ja=10,t.ta=7;break;case"Heated Blade":t.pa=60,t.qa=0,t.na=10,t.oa=10,t.ea=10,t.ja=10,t.ta=7;break;case"Sword":t.pa=70,t.qa=0,t.na=10,t.oa=10,t.ea=10,t.ja=10,t.ta=7;break;case"Hot Steel":t.pa=27,t.qa=0,t.na=7,t.oa=7,t.ea=7,t.ja=7,t.ta=-8;break;case"Horse Shoe":t.pa=20,t.qa=2,t.na=7,t.oa=6,t.ea=7,t.ja=6}}function M(a,t,e,s,i){var h=new S(0,0,0,0);z(e,h),f(i,(e=a.x)+Math.floor(t.ea/2)-1-h.ea/2,a.y-h.ja-5-5,h.ea+4,h.ja+6,{fill:!0,color:"#000"}),f(i,e+Math.floor(t.ea/2)-2-h.ea/2,a.y-h.ja-4-5,h.ea+6,h.ja+4,{fill:!0,color:"#000"}),f(i,e+Math.floor(t.ea/2)-h.ea/2,a.y-h.ja-4-5,h.ea+2,h.ja+4,{fill:!0,color:s}),f(i,e+Math.floor(t.ea/2)-1-h.ea/2,a.y-h.ja-3-5,h.ea+4,h.ja+2,{fill:!0,color:s}),w(i,h.pa,h.qa,h.na,h.oa,e+Math.floor(t.ea/2)+1-h.ea/2,a.y-h.ja-2-5,h.ea,h.ja)}function k(a,t,e,s,i,h=!1){let r,o=0,n=5*t.length+16;h?(f(a.$,e,s+o,n,14,{color:"rgba(255, 255, 255, 0.6)",lineWidth:1}),p(a.$,t,e+8,s+4+o,{opacity:.6})):(h="#888",l(e,s,n,14,b.ca,b.da,1,1)&&(h="#fff"),l(e,s,n,14,(r=b).ca,r.da,1,1)&&r.Ja&&!r.ba.Ja&&i(),l(e,s,n,14,(i=b).ca,i.da,1,1)&&i.Ja&&(o=1),f(a.$,e,s+o,n,14,{color:h,lineWidth:1}),p(a.$,t,e+8,s+4+o,{}))}function A(a,t){var e;return a.Ab.includes(t)?(e=a.sa[t]??0)<(a=a.Ab.filter(a=>t===a).length)?0===e?"#ac3232":"#df7126":"#97f3a7":"#ddd"}class E{constructor(a,t){this.ca=196,this.da=132,this.La=!1,this.ga=0,this.ma=1,this.sa={},this.Ab=[],this.$=a,this.ba=t}Ga(){var t,a,e,s,i,h,r,o,n,l,c;this.ya&&p(this.$,this.ya,Math.floor(this.$.ua/4-5*this.ya.length/2),160,{size:1}),this.La&&(p(this.$,"1",this.ca-14,this.da,{size:1}),p(this.$,"2",+this.ca,this.da-5,{size:1}),p(this.$,"3",this.ca+14,this.da,{size:1}),w(this.$,20,2,7,6,this.ca-16,this.da+9,7,6),w(this.$,58,10,10,9,this.ca-2,this.da+5,10,9),w(this.$,80,0,10,10,this.ca+10,this.da+9,10,10)),c=(c=10-(l=r=this).ba.xa)<=3.3?0:c<=6.6?1:2,p(l.$,"Lord mood: ",50,57,{}),w(l.$,24+10*c,41,10,10,101,54,10,10,{}),p((l=r).$,"Stored items:",130,57,{}),z("Horse Shoe",c=new S(0,0,0,0)),o=new x(200,69),n=l.sa["Horse Shoe"]??0,M(o,c,"Horse Shoe",A(l,"Horse Shoe"),l.$),p(l.$,":"+n,213,57,{}),z("Sharpened Axe",c),o.x=235,o.y=71,n=l.sa["Sharpened Axe"]??0,M(o,c,"Sharpened Axe",A(l,"Sharpened Axe"),l.$),p(l.$,":"+n,251,57,{}),z("Sharpened Sword",c),o.x=274,o.y=71,n=l.sa["Sharpened Sword"]??0,M(o,c,"Sharpened Sword",A(l,"Sharpened Sword"),l.$),p(l.$,":"+n,291,57,{}),r.ba.gb&&(0===r.ma&&(r.ma=1),r.ga+=.01*r.ma,1<=r.ga&&(r.ma=0,r.ga=1,setTimeout(()=>{r.ma=-1},1e3)),r.ga<=0&&0!==r.ma&&(r.ga=0,r.ba.gb=!1,(o=r.ba).$=!0,10<=o.xa&&(o.xa=10),o.xa<=0?o.La=!0:o.pb=!0),n=(l=(c=r).ga)<0?0:1<l?"f":Math.floor(15*l).toString(16).toUpperCase(),f(c.$,7,74,103,26,{color:"#fff"+n,fill:!1,lineWidth:1}),f(c.$,8,75,101,24,{color:"#000"+n,fill:!0}),p(c.$,"And that was all",12,79,{size:1,opacity:l}),p(c.$,"villagers this day.",12,89,{size:1,opacity:l})),this.ba.pb&&(0===(t=this).ba.day?(f(t.$,53,38,204,115,{color:"#3c2013",fill:!0}),f(t.$,51,40,208,111,{color:"#3c2013",fill:!0}),f(t.$,55,40,200,111,{color:"#222",fill:!0}),f(t.$,53,42,204,107,{color:"#222",fill:!0}),p(t.$,"Congratulations, Smith!",72,50,{size:1.5}),p(t.$,"You have completed your day of training.",157,75,{size:1,za:!0}),p(t.$,"The lessons are over, and now the",157,84,{size:1,za:!0}),p(t.$,"true test begins. Prepare yourself.",157,93,{size:1,za:!0}),p(t.$,"The villagers and the Lord await your",157,102,{size:1,za:!0}),p(t.$,"craftsmanship.",157,111,{size:1,za:!0}),k(t,"Take me to forge already!",85,129,()=>{u(t.ba,!1)})):(f(t.$,53,8,204,185,{color:"#3c2013",fill:!0}),f(t.$,51,10,208,181,{color:"#3c2013",fill:!0}),f(t.$,55,10,200,181,{color:"#222",fill:!0}),f(t.$,53,12,204,177,{color:"#222",fill:!0}),p(t.$,`Day ${t.ba.day} summary: `,102,20,{size:1.5}),p(t.$,`You have served ${t.ba.Wa} villagers`,64,37,{size:1}),[o,n]=(o=t.ba.xa)<=1?["most infuriated",{r:199,Ba:85,b:85}]:o<=3?["somewhat displeased",{r:177,Ba:102,b:85}]:o<=5?["without strong feelings",{r:154,Ba:120,b:86}]:o<=7?["in good spirits",{r:130,Ba:139,b:87}]:o<=9?["quite pleased",{r:109,Ba:155,b:87}]:["most pleased",{r:89,Ba:170,b:87}],{Sa:o,Ta:n,Qa:c,Pa:l}=(p(t.$,`The Lord is ${o}!`,64,47,{size:1,color:n}),p(t.$,`Available upgrades: (${t.ba.ra}c available)`,64,57,{size:1}),t.ba),a=t.ba.ra,i=(e=$(15,o))<=a,w(t.$,27,15,5,6,63,82,5,6),w(t.$,0,0,13,20,60,70,13,20),k(t,`Buy level ${o+1} (${e}c)`,80,74,()=>{t.ba.ra-=e,t.ba.Sa+=1},!i),p(t.$,"Increase heating speed",195,77,{size:.5}),p(t.$,"of the furnace.",195,82,{size:.5}),i=(s=$(15,n+1))<=a,w(t.$,13,0,7,8,63,100,7,8,{}),k(t,`Buy level ${n+1} (${s}c)`,80,97,()=>{t.ba.ra-=s,t.ba.Ta+=1},!i),p(t.$,"Reduce sharping time",195,100,{size:.5}),p(t.$,"of the grind wheel.",195,105,{size:.5}),i=(h=$(10,c+1))<=a,w(t.$,18,8,6,5,64,125,6,5,{}),k(t,`Buy level ${c+1} (${h}c)`,80,120,()=>{t.ba.ra-=h,t.ba.Qa+=1},!i),p(t.$,"Increase efficency",195,123,{size:.5}),p(t.$,"of the coal.",195,128,{size:.5}),a=200<=a&&!l,w(t.$,68,10,22,11,60,144,22,11,{}),k(t,t.ba.Pa?"Already bought":"Buy for 200c",100,143,()=>{t.ba.ra-=200,t.ba.Pa=1},!a),p(t.$,"Make your customers",195,147,{size:.5}),p(t.$,"feel more comfy.",195,152,{size:.5}),k(t,"Start next day",110,169,()=>{var a=t.ba;a.$=!1,a.day+=1,a.ba=5+$(2,a.day),a.ca+=.5,a.pb=!1,a.currentTime=0,a.ma=0})))}}class X extends s{constructor(){super(0)}}class N extends s{constructor(){super(1),this.sa=[]}removeItem(t){var a=this.sa.findIndex(a=>t===a);this.sa.splice(a,1)}}class I extends s{constructor(a,t){super(12),this.fb=[],this.name="",this.Ka=void 0,this.Na=!1,this.fb=a,this.name=t}}class R extends s{constructor(){super(13),this.Ra=this.Ya=this.wa=0,this.wb=!1}}class H extends s{constructor(a,t){super(6),this.Ca=!1,this.vb=!0,this.priority=a,this.box=t}}class K extends s{constructor(){super(3),this.Ua=this.Xa=void 0,this.Ma=!1,this.va=void 0}}class B extends s{constructor(){super(10),this.sb=this.fa=this.nb=this.Oa=0,this.tb=!1}}class G extends s{constructor(){super(5),this.yb=this.xb=!1}}class U extends s{constructor(){super(16),this.lb=0}}class O extends s{constructor(a){super(11),this.Hb=a}}let W={"Heated Blade":"Sword"},Y={Steel:"Hot Steel","Forged Blade":"Heated Blade"},J={Sword:"Sharpened Sword",Axe:"Sharpened Axe"};class C extends s{constructor(a){super(15),this.definition=a}transform(a){if(this.definition[a])return this.definition[a];throw Error("TransformerComponent doesn`t have ")}}class Q extends r{constructor(a){super([0,6,12,2]),this.$=a}update(){this.ha.map(a=>{var t,e,s=a.aa[12];a.aa[6].Ca&&s.Ka&&("Hot Steel"===(t=(s=o(this,s.Ka)).aa[8]).item?(s=s.aa[8],e=a.aa[2],a=this.$,t=e.x+4,e=e.y-36,a.La=!0,a.ca=t,a.da=e,this.$.ya="Press <NUMBER> to forge weapon",b.Za&&!b.ba.Za?(s.item="Horse Shoe",s.Fa=!0):b.$a&&!b.ba.$a?(s.item="Axe",s.Fa=!0):b.ab&&!b.ba.ab&&(s.item="Forged Blade")):(this.$.ya="Forge the sword!",b.la&&!b.ba.la&&"Heated Blade"===t.item&&(t.item="Sword")))})}}class V extends r{constructor(){super([2,4,5,10])}update(){let a=this.ha[0],t=a.aa[2],e=a.aa[10],s=a.aa[5];var i,h;a=a.aa[4],-1<e.fa&&e.fa<1&&(a.rotate=e.fa=0),s.ka?(i=this.mb.find(({id:a})=>a===s.ka))&&(s.xb=!0,s.jb=i.id):(s.xb=!1,s.jb=void 0),0!==a.Aa&&(a.flipX+=.3*a.Aa,a.flipX<-1&&(a.Aa=0,a.flipX=-1),1<a.flipX)&&(a.Aa=0,a.flipX=1),s.yb?(e.fa=0,e.Oa=0,a.pa=45,a.qa=26,a.na=11):(i=t,(h=e).Oa=1.5*b.ga.x,h.fa+=h.Oa,2<h.fa&&(h.fa=2),h.fa<-2&&(h.fa=-2),i.x+=h.fa,i.x<139&&(i.x=139),288<=i.x&&(i.x=288),0!==h.fa&&(h.fa*=.8),a.pa=32,a.qa=26,a.na=12),a.oa=14}}let Z=function*(){(yield).sa=[]}();class _ extends r{constructor(a){super([1,12,2,3,6]),this.$=a}update(){var a,t,e,s=this.ha[0];s&&(a=s.aa[1],t=s.aa[6],s=s.aa[12],0!==this.ia.day&&Z.next(a),e={},a.sa.forEach(a=>{e[a]||(e[a]=0),e[a]+=1}),this.$.sa=e,t.Ca)&&s.Ka&&b.la&&!b.ba.la&&(t=o(this,s.Ka).aa[8],a.sa.push(t.item))}}class aa extends r{update(){}constructor(a){super([2,4]),this.$=a}Ga(){this.ha.map(a=>{var t=a.aa[2];(a=a.aa[4]).visible&&(a.color?f(this.$,t.x,t.y,a.ea,a.ja,{color:a.color}):w(this.$,a.pa,a.qa,a.na,a.oa,t.x,t.y,a.ea,a.ja,{rotate:a.rotate,flipX:a.flipX,ta:a.ta,Bb:a.Bb}))})}}function j(a){a.aa[4].visible=!1,a.aa[8].cb=!1,a.aa[6].vb=!1}function ta(a){a.aa[4].visible=!0,a.aa[8].cb=!0,a.aa[6].vb=!0}class ea extends r{constructor(a){super([12,6,3]),this.$=a}update(){let s=this.$.aa[5];this.ha.map(a=>{var t=a.aa[12],e=a.aa[3];e.Ua=void 0,e.Xa=void 0,!t.Na&&a.aa[6].Ca&&(t=!!t.Ka,b.la)&&!b.ba.la&&(e.Ma?(a=o(this,e.va),s.ka?t&&((t=o(this,s.ka)).aa[8].Fa?(j(t),s.ka=void 0):(ta(a),j(t),s.ka=a.id,e.va=t.id,e.Xa=a.id,e.Ua=e.va)):(s.ka=e.va,e.Xa=e.va,e.Ma=!1,e.va=void 0,ta(a))):t&&s.ka&&((a=o(this,s.ka)).aa[8].Fa?(j(a),s.ka=void 0):(e.Ua=s.ka,e.Ma=!0,e.va=s.ka,s.ka=void 0,j(a))))})}}class sa extends s{constructor(){var a=[oa()];super(18),this.Va=a,this.ub=!1,this.Da=0,this.Ia=!1}}let ia={50:"Horse Shoe",35:"Sharpened Axe",15:"Sharpened Sword"},L=[()=>new S(69,25,11,15),()=>new S(57,23,11,17),()=>new S(81,22,16,20)],ha=function*(){yield L[0](),yield L[1](),yield L[2]()}(),ra=function*(){yield"Horse Shoe",yield"Sharpened Axe",yield"Sharpened Sword"}(),oa=()=>{if(0===i.day)return ra.next().value;let t=100*Math.random(),e=0,s=Object.keys(ia).sort((a,t)=>Number(t)-Number(a));for(let a=0;a<s.length;a++)if(t<(e+=Number(s[a])))return ia[s[a]];return"Horse Shoe"};class na extends r{constructor(){super([20])}update(){this.ha.forEach(a=>{var t,e;this.ia&&0!==this.ia?.ba&&((a=a.aa[20]).currentTime<=0&&this.ia.da<this.ia.ca?(t=new y,e=0===i.day?ha.next().value:L[Math.floor(3*Math.random())](),v(t,[new x(-20,120-e.ja),new sa,new B,e]),this.hb.push(t),a.currentTime=Math.random()*(a.Pb-2)+2,this.ia.da+=1,--this.ia.ba,this.ia.ma+=1):a.count())})}}class la extends r{constructor(a){super([12,6]),this.$=a}update(){let e=this.$.aa[5];this.ha.map(a=>{var t=a.aa[12];a=a.aa[6],t.Ka=void 0,!t.Na&&a.Ca&&e.ka&&(a=o(this,e.ka),t.fb.includes(a.aa[8].item))&&(t.Ka=a.id)})}}class ca extends s{constructor(){super(14),this.zb=!1,this.ob=0}}class da extends r{constructor(a){super([2,13,12,3,15]),this.$=a}Ga(){this.ha.map(a=>{var t=a.aa[2],e=a.aa[13],s=a.aa[3],i=(w(this.$,44,8,4,15,t.x+16,t.y-8,4,15),Math.floor(e.wa/7));f(this.$,t.x+17,t.y-7,2,13-i,{fill:!0,color:"#3d453d"}),i=e.wa/34,w(this.$,27,15,5,6,t.x+3,t.y+14-i,5,6),s.Ma&&(i="#ddd",e.wb&&(i="#97f3a7"),M(t,a=a.aa[4],o(this,s.va).aa[8].item,i,this.$))})}update(){this.ha.map(a=>{var t=a.aa[13],e=a.aa[12];a=a.aa[3],0<t.Ya&&0===t.Ra&&(--t.Ya,t.Ra=this.ia.Jb),0<t.Ra&&(t.Ra-=.5,t.wa+=.1,100<=t.wa)&&(t.wa=100),0===t.Ya&&0===t.Ra&&(t.wa-=.1,t.wa<=25)&&(t.wa=25),a.Ma&&(a=o(this,a.va))&&((a=a.aa[14]).zb||(a.ob+=t.wa*this.ia.Kb,3e3<=a.ob&&(e.Na=!(t.wb=a.zb=!0))))})}}class ba extends r{constructor(a){super([12,13,6,15,3]),this.$=a}update(){let r=this.$.aa[5];this.ha.map(a=>{var t=a.aa[3],e=a.aa[12],s=a.aa[13],i=a.aa[15];if(a.aa[6].Ca){if(b.la&&!b.ba.la&&r.jb){var h=o(this,t.Ua||r.jb);if("Coal"===h.aa[8].item)return i=h,(s=a.aa[13]).Ya+=1,this.qb.push(i.id),void(r.ka=void 0)}if(b.la&&!b.ba.la&&(t.Ua&&((a=o(this,t.Ua).aa[14]).ob=0,a.zb=!1,e.Na=!0),t.Xa)){if(a=o(this,t.Xa),s.wb=!1,s=a.aa[8],!(i=i.definition[s.item]))throw Error("INVALID TRANSFORMER DEFINITION");s.item=i}}})}}class $a extends r{constructor(a){super([2,4,17]),this.$=a}update(){this.ha.forEach(a=>{var t=a.aa[2],e=a.aa[4];a=a.aa[17],!e.visible||a.Nb>=a.Ob||(e=t.x-Math.floor(e.ea/2),t=t.y-10,f(this.$,1+e,1+t,a.Nb/a.Ob*11,2,{fill:!0,color:"#f00"}),w(this.$,11,26,13,4,e,t,13,4))})}}class ua extends r{constructor(){super([8,4])}update(){this.ha.forEach(a=>{z(a.aa[8].item,a.aa[4])})}}class fa extends r{constructor(a){super([6,4,2]),this.$=a}update(){let e=this.$.aa[2],s=this.$.aa[4];this.ha.map(a=>{var t=a.aa[2];(a=a.aa[6]).Ca=a.vb&&l(e.x,e.y,s.na,s.oa,t.x+a.box.x,t.y+a.box.y,a.box.w,a.box.Ha)})}}class wa extends r{constructor(){super([2,10])}update(){this.ha.forEach(a=>{var t=a.aa[2],e=a.aa[10];h(a,[5])||h(a,[8])&&a.aa[8].cb||(116<=t.y?(e.sb=0,e.nb=0):(e.tb&&(e.nb+=.2),e.fa+=e.Oa,e.sb+=e.nb,t.x+=e.fa,t.y+=e.sb,0!==e.fa&&(e.Oa*=.85)))})}}class pa extends r{constructor(a){super([6,2,8]),this.$=a}update(){let i=this.$.aa[2],h=this.$.aa[4];this.ha.map(a=>{var t=a.aa[2],e=a.aa[4],{x:a,y:s}=a="Coal"===(a=a.aa[8].item)?{x:-0,y:-12}:"Steel"!==a&&"Hot Steel"!==a&&(["Forged Blade","Heated Blade","Sword","Sharpened Sword"].includes(a)||["Axe","Sharpened Axe"].includes(a))?{x:-4,y:-12}:{x:0,y:-12};t.x=Math.floor(i.x+e.ea/2)+a,t.y=120+s,e.flipX=h.flipX})}}class ma extends r{constructor(a,t,e){super([12,6,16,15,2]),this.ba=a,this.$=t,this.ca=e}update(){let r=this.ba.aa[5];this.ha.forEach(a=>{var t=a.aa[2],e=a.aa[12],s=a.aa[16],i=a.aa[15];if(a=a.aa[6],r.ka){var h=o(this,r.ka);if(e.fb.includes(h.aa[8].item)){if(a.Ca)if((a=(e=o(this,h.id)).aa[4]).visible=!0,b.la){if(r.yb=!0,s.lb+=this.ia.Lb,f(this.$,t.x,t.y-9,11*s.lb/100,2,{color:"#ddd",lineWidth:1,fill:!0}),w(this.$,11,26,13,4,t.x-1,t.y-10,13,4),!(t=100<s.lb&&!(s.lb=0)))return void(a.visible=!1);(t=e.aa[8]).item=i.transform(t.item),t.Fa=!0}else this.ca.ya="Press <SPACE> to sharpen item";r.yb=!1}}})}}class ga extends s{constructor(a,t=!1){super(8),this.cb=!1,this.item="Coal",this.Fa=!1,this.item=a,this.Fa=t}}class va extends r{constructor(a,t){super([6,11,2]),this.$=a,this.ba=t}update(){this.ha.forEach(a=>{if(a.aa[6].Ca){var t=this.$.aa[5];if(a=a.aa[11],!t.xb&&(this.ba.ya=`Pick up the ${a.Hb}.`,b.la)&&!b.ba.la)switch(a.Hb){case"Coal":a=new y;var e=new x(-100,115),s=new S(18,8,6,5),i=new H(2,{x:0,y:0,w:8,Ha:4}),h=new ga("Coal",!0);(r=new B).tb=!0,h.cb=!0,v(a,[e,s,i,h,r]),this.hb.push(a),t.ka=a.id;break;case"Steel":a=new y;var e=new x(-100,113),s=new S(25,8,7,7),i=new H(2,{x:0,y:0,w:2,Ha:8}),h=new ga("Steel"),r=new ca,o=new B;o.tb=!0,h.cb=!0,v(a,[e,s,i,h,r,o]),this.hb.push(a),t.ka=a.id}}})}}class ya extends s{constructor(){super(20),this.Pb=15,this.currentTime=20}count(){this.currentTime-=.1}}class xa extends r{constructor(a,t){super([2,18,4]),this.$=a,this.ba=t}update(){}Ga(){var a=this.ha.map(a=>(a=a.aa[18]).Ia?null:a.Va).filter(Boolean).flat();this.ba.Ab=a,this.ha.forEach(a=>{var t=a.aa[18],e=a.aa[2];if(a=a.aa[4],0!==t.Va.length&&!t.Ia){var s=t.Va[0],i=(z(s,new S(0,0,0,0)),t=t.Da,[221,221,221]),h=[172,50,50],r=[0,0,0];for(let a=0;a<3;a++)r[a]=Math.floor(i[a]+t/100*(h[a]-i[a]));M(e,a,s,`rgb(${r.join(", ")})`,this.$)}})}}class Sa extends r{constructor(){super([18,2,4,10])}update(){var a=this.mb.find(a=>h(a,[1]));if(!a)throw Error("Desk is undefined!");let r=this.ha.filter(a=>!1===a.aa[18].Ia).map(a=>({x:a.aa[2].x,w:a.aa[4].ea,id:a.id})).sort((a,t)=>a.x-t.x),o=a.aa[2],n=a.aa[1];this.ha.forEach(t=>{var a,e=t.aa[2],s=t.aa[18],i=t.aa[10],h=t.aa[4];s.Ia||((a=r.findIndex(a=>a.id===t.id))!==r.length-1&&1!==r.length&&(i.fa=.4,e.x+h.ea+15>=r[a+1].x)?i.fa=0:o.x-5<=e.x+h.ea?(i.fa=0,n.sa.includes(s.Va[0])&&(n.removeItem(s.Va[0]),s.ub=!0,s.Ia=!0,this.ia.Wa+=1)):i.fa=.4)})}}let za={"Horse Shoe":2,"Sharpened Axe":3,"Sharpened Sword":5},Ma={"Horse Shoe":1,"Sharpened Axe":1.5,"Sharpened Sword":2.5};class ka extends r{constructor(){super([18,2])}update(){this.ha.forEach(a=>{var t,e=a.aa[18];a.aa[2].x<=-20&&e.Ia&&(t=e.Va[0],e.ub?(this.ia.xa+=.2*Ma[t],this.ia.ra+=za[t]):this.ia.xa+=-1,this.qb.push(a.id),--this.ia.da)})}}class Aa extends r{constructor(a,t){super([2,4,12]),this.$=a,this.ba=t}update(){let i=this.$.aa[5];this.ha.map(a=>{var t,e,s;i.jb&&(t=a.aa[2],e=a.aa[4],a=a.aa[12],s=o(this,i.jb).aa[8],a.Na&&!s.Fa||!a.fb.includes(s.item)||w(this.ba,37,12,7,11,t.x+e.ea/2-3,130,7,11))})}}class Ea extends r{constructor(a,t){super([12,6,3]),this.ba=a,this.$=t}update(){let s=this.ba.aa[5];this.ha.map(a=>{if(a.aa[6].Ca){var t=a.aa[12];if(!(a=a.aa[3]).Ma||t.Na||s.ka){try{var e=o(this,s.ka)}catch(a){return}e=e.aa[8],t.fb.includes(e.item)&&(e.Fa||!a.Ma?this.$.ya=`Place ${e.item} in ${t.name}.`:(a=o(this,a.va).aa[8],t.Na||(this.$.ya=`Switch ${e.item} with `+a.item)))}else a=o(this,a.va).aa[8],this.$.ya=`Take ${a.item} from ${t.name}.`}})}}class Ia extends r{constructor(){super([4,10])}update(){this.ha.forEach(a=>{var t=a.aa[10];0!==(a=a.aa[4]).Aa&&(a.flipX+=.3*a.Aa,a.flipX<-1&&(a.Aa=0,a.flipX=-1),1<a.flipX)&&(a.Aa=0,a.flipX=1),0<t.fa?a.Aa=-1:t.fa<0&&(a.Aa=1),0!==t.fa&&(a.rotate+=a.kb*Math.abs(t.fa/50),.09<a.rotate&&(a.kb*=-1),a.rotate<-.09)&&(a.kb*=-1),0===t.fa&&(a.rotate=0)})}}class Ha extends r{constructor(){super([18,10])}update(){this.ha.forEach(a=>{var t=a.aa[18];if(a=a.aa[10],t.Ia&&(a.fa=-.8),0!==this.ia.day){if(0===a.fa){let a=.1*(1+i.day/8);this.ia.Pa&&(a=.07*(1+i.day/8)),t.Da+=a}0<a.fa&&(t.Da-=.1,t.Da<=0)&&(t.Da=0),100<=t.Da&&(t.Ia=!0),t.ub&&(t.Da=0)}})}}class Ba{constructor(){this.ba=0,this.$=new a,this.da=new e(this.$),this.ca=new E(this.$,i)}ib(){g(this.da,()=>{},!0)}rb(){var a,t,e;m(this.$),f(this.$,0,0,this.$.ua,this.$.Ea,{color:"#182424",fill:!0}),0===this.ba?(p((t=this).$,"How to play?",135,8,{size:1.5,za:!0}),w(t.$,32,26,12,14,12,24,12,14),p(t.$,"- ",30,29,{size:1}),p(t.$,"  this is your character.Use arrows or <A> <D> keys",30,25,{size:1}),p(t.$,"  to move. Use <Space> to interact with forge tools.",30,33,{size:1}),w(t.$,27,15,5,6,15,64,5,6),w(t.$,0,0,13,20,12,53,13,20),p(t.$,"- ",30,62,{size:1}),p(t.$,"  Furnace, a hearth of the forge. Heats the steel.",30,50,{size:1}),p(t.$,"  Remember to keep the temperature high! Furnace",30,58,{size:1}),p(t.$,"  will inform you when item is heated when tooltip",30,66,{size:1}),p(t.$,"  above it will turn green!",30,74,{size:1}),k(t.ca,"Next page",230,180,()=>{t.ba=1}),w(t.$,0,20,11,8,14,90,11,8),p(t.$,"- ",30,92,{size:1}),p(t.$,"  Box of infinite steel.",30,92,{size:1}),w(t.$,13,19,14,7,13,111,14,7),p(t.$,"- ",30,112,{size:1}),p(t.$,"  Pile of coal, your furnace fuel.",31,112,{size:1}),f(t.$,10,138,t.$.ua/2-20,30,{fill:!0,color:"#3d453d"}),p(t.$,"! ",17,147,{size:2}),p(t.$,"  Tip: it is better to switch heated item in furnace",18,146,{size:1}),p(t.$,"  with non heated to save some time!",18,154,{size:1})):1===this.ba?(p((e=this).$,"How to play?",135,8,{size:1.5,za:!0}),w(e.$,13,13,12,6,12,32,12,6),p(e.$,"- ",30,33,{size:1}),p(e.$,"  Anvil, takes hot steel and forges it into a weapon",30,25,{size:1}),p(e.$,"  or tool. Use 1, 2, 3 numbers to select what you want",30,33,{size:1}),p(e.$,"  to make.",30,41,{size:1}),w(e.$,13,0,7,8,14,60,8,12),p(e.$,"- ",30,64,{size:1}),p(e.$,"  Grind wheel, some of the forged weapons needs to",30,60,{size:1}),p(e.$,"  be sharpened before selling them.",30,68,{size:1}),k(e.ca,"Prev page",15,180,()=>{e.ba=0}),w(e.$,34,0,16,8,11,90,16,8),p(e.$,"- ",30,92,{size:1}),p(e.$,"  Counter, leave ready items there so your",30,88,{size:1}),p(e.$,"  customers will be able to buy them!",30,96,{size:1}),k(e.ca,"Prev page",15,180,()=>{e.ba=0}),k(e.ca,"Next page",230,180,()=>{e.ba=2}),p(e.$," Items tree: ",10,112,{size:1}),w(e.$,25,8,7,7,4,135,14,14),w(e.$,0,41,10,1,22,142,25,2),w(e.$,27,0,7,7,48,135,14,14),w(e.$,0,32,23,19,64,124,46,38),w(e.$,20,2,7,6,112,119,14,12),w(e.$,48,10,10,9,112,134,20,18),w(e.$,0,41,10,1,135,142,25,2),w(e.$,58,10,10,9,162,134,20,18),w(e.$,50,0,10,10,112,152,20,20),w(e.$,0,41,10,1,135,160,25,2),w(e.$,60,0,10,10,162,152,20,20),w(e.$,0,41,10,1,185,160,25,2),w(e.$,70,0,10,10,213,152,20,20),w(e.$,0,41,10,1,236,160,25,2),w(e.$,80,0,10,10,265,152,20,20)):2===this.ba&&(p((a=this).$,"How to play?",135,8,{size:1.5,za:!0}),p(a.$,"Your mission is to keep both the villagers and the Lord",15,50,{size:1}),p(a.$,"well-pleased with your craftsmanship. Displeased Lord",15,58,{size:1}),p(a.$,"will bring the end for your time at the forge. Craft",15,66,{size:1}),p(a.$,"wisely and manage your resources to earn favor and",15,74,{size:1}),p(a.$,"continue your service to the village.",15,82,{size:1}),k(a.ca,"Start simple",108,125,()=>{g(a.da,()=>{u(i,!0),c(d,new D)})}),k(a.ca,"Take me to the forge!",85,145,()=>{g(a.da,()=>{u(i,!1),c(d,new D)})}),k(a.ca,"Prev page",15,180,()=>{a.ba=1})),this.da.update()}}let Ca="Even the finest smiths endure setbacks.{Failure is the anvil on which success is forged.{The forge grows cold, but your spirit need not.{In each loss, the seeds of a new victory are sown.{Mistakes are the sparks that can ignite greater skill.{Your anvil awaits; it's never too late to start anew.".split("{"),ja=new class{constructor(){this.$=new a,this.ba=new e(this.$),this.ca=new E(this.$,i),this.text=Ca[Math.floor(3*Math.random())]}ib(){g(this.ba,()=>{},!0)}rb(){m(this.$),f(this.$,0,0,this.$.ua,this.$.Ea,{color:"#181818",fill:!0}),p(this.$,"Game over",85,20,{size:3}),p(this.$,"Alas, the Lord is most infuriated!",68,55,{size:1}),p(this.$,"The villagers murmur in discontent,",66,65,{size:1}),p(this.$,"and you have lost their trust. Your",65,75,{size:1}),p(this.$,"service to the village is at an end.",64,85,{size:1}),p(this.$,`You managed to keep the forge burning for ${i.day} days,`,33,110,{size:1}),p(this.$,`crafting wares for a total of ${i.Wa} villagers.`,46,120,{size:1}),k(this.ca,"Refine Your Skills",97,140,()=>{g(this.ba,()=>{c(d,new Ba)})}),k(this.ca,"Another Round!",107,160,()=>{g(this.ba,()=>{u(i,!1),c(d,new D)})}),p(this.$,`"${this.text}"`,151,this.$.Ea/2-10,{size:1,color:{r:200,Ba:200,b:200},za:!0}),this.ba.update()}};class D{constructor(){this.ba=i,this.da=new q(this.ba),this.$=new a,this.ca=new E(this.$,this.ba),this.ga=new e(this.$)}ib(){var a,t,e,s,i,h,r,o,n;v(e=new y,[new x(145,106),new S(32,26,12,14),new G,new B]),v(s=new y,[new x(245,100),new S(0,0,13,20),new H(1,{x:2,y:2,w:9,Ha:14}),new I(["Coal","Steel","Forged Blade"],"furnace"),new R,new C(Y),new K]),v(i=new y,[new x(192,114),new S(13,13,12,6),new H(1,{x:0,y:0,w:12,Ha:7}),new I(["Hot Steel","Heated Blade"],"Anvil"),new X,new C(W)]),v(h=new y,[new x(275,113),new S(13,19,14,7),new H(1,{x:-1,y:0,w:16,Ha:16}),new O("Coal")]),v(r=new y,[new x(223,112),new S(0,20,11,8),new H(1,{x:1,y:0,w:9,Ha:10}),new O("Steel")]),v(o=new y,[new x(175,112),new S(13,0,7,8),new H(1,{x:0,y:0,w:7,Ha:9}),new C(J),new I(["Sword","Axe"],"sharpener"),new U]),v(n=new y,[new x(130,112),new S(34,0,16,8),new H(1,{x:0,y:0,w:16,Ha:12}),new I(["Horse Shoe","Sharpened Sword","Sharpened Axe"],"desk"),new N,new K]),v(a=new y,[new ya]),F(this.da,[s,i,h,r,o,n,a,e]),t=this.da,s=[new V,new la(e),new ea(e),new fa(e),new da(this.$),new ma(e,this.$,this.ca),new ba(e),new Q(this.ca),new _(this.ca),new pa(e),new ua,new wa,new aa(this.$),new va(e,this.ca),new na,new ka,new $a(this.$),new xa(this.$,this.ca),new Sa,new Ha,new Aa(e,this.$),new Ea(e,this.ca),new Ia],t.ca.push(...s),t.ca.forEach(a=>{a.ia=t.ma}),this.ba.$=!0,this.da.start(),this.da.update(1),g(this.ga,()=>{this.ba.$=!1},!0)}rb(a){m(this.$),(i=this.ca).La=!1,i.ya=void 0,this.da.ba=!this.ba.$;var t=this.$;f(t,105,0,t.ua,74,{color:"#000",fill:!0}),f(t,0,0,t.ua,70,{color:"#000",fill:!0});for(let a=105;a<300;a+=5)t.$.drawImage(t.ba,3,25,5,3,a,70,5,3);var e=this.$,s=[215,232,253],i=[179,219,224],s=`rgb(${(s=[Math.round(.5*s[0]+.5*i[0]),Math.round(.5*s[1]+.5*i[1]),Math.round(.5*s[2]+.5*i[2])])[0]}, ${s[1]}, ${s[2]})`;for(f(e,0,70,106,80,{color:"#000",fill:!0}),f(e,0,70,105,80,{color:s,fill:!0}),f(e,105,74,5,26,{color:"#000",fill:!0}),s=74;s<96;s+=5)w(e,13,8,5,4,106,s,5,4,{rotate:Math.PI/2});var h=this.$;f(h,299,70,h.ua,500,{color:"#000",fill:!0});for(let a=70;a<h.Ea;a+=5)h.$.drawImage(h.ba,8,8,5,5,300,a,5,5);var r=this.$;f(r,0,120,r.ua,600,{color:"#000",fill:!0});for(var o=103;o<302;o+=5)r.$.drawImage(r.ba,13,8,5,5,o+2,120,5,5);for(o=0;o<103;o+=6)r.$.drawImage(r.ba,27,21,6,3,o-3,121,6,3);f(r,105,120,1,600,{color:"#000",fill:!0}),i=this.$,n=!!this.ba.Pa,w(i,20,2,7,6,220,84,7,6),w(i,20,2,7,6,228,86,7,6),w(i,20,2,7,6,234,82,7,6),w(i,80,0,10,10,274,78,10,10,{rotate:Math.PI}),w(i,80,0,10,10,272,78,10,10,{rotate:Math.PI/2}),w(i,90,0,14,21,105,99,14,21,{}),n&&w(i,68,10,22,11,75,109,22,11,{}),this.da.update(a),this.da.Ga();var n,l=this.$;f(l,158,74,5,26,{color:"#000",fill:!0});for(let a=74;a<96;a+=5)w(l,13,8,5,4,159,a,5,4,{rotate:Math.PI/2});(i=(n=this.$).$.createLinearGradient(40,0,0,0)).addColorStop(0,"rgba(0, 0, 0, 0)"),i.addColorStop(.9,"rgba(0, 0, 0, 1)"),f(n,0,70,40,60,{fill:!0,Eb:i}),n.$.save(),n.$.translate(10,10),n.$.scale(.25,.25),n.$.restore(),0===this.ba.da&&0===this.ba.ba&&(this.ba.gb=!0),this.ba.La&&g(this.ga,()=>{c(d,ja)}),this.ca.Ga(),this.ga.update()}}let La="* The forge waits for no one.;* Each strike shapes your destiny.;* A displeased Lord is bad for business.;* Quality over quantity, always.;* The echo of the hammer writes history.;* In every strike, a spark of possibility.".split(";");var Da=new class{constructor(){this.$=new a,this.ba=new e(this.$),this.ca=new E(this.$,i),this.text=La[Math.floor(3*Math.random())],g(this.ba,()=>{},!0)}ib(){}rb(){m(this.$),f(this.$,0,0,this.$.ua,this.$.Ea,{color:"#182424",fill:!0}),w(this.$,80,0,10,10,156,43,40,40,{rotate:Math.PI}),w(this.$,80,0,10,10,146,43,40,40,{rotate:Math.PI/2}),p(this.$,"O er",74,29,{size:4}),p(this.$,"forged",110,55,{size:4}),p(this.$,"Anvil, Hammer, Legacy",145,89,{size:1,za:!0,color:{r:200,Ba:200,b:200}}),p(this.$,this.text,10,this.$.Ea/2-15,{size:1,color:{r:200,Ba:200,b:200}}),w(this.$,20,2,7,6,92,32,21,18,{rotate:Math.PI}),k(this.ca,"Learn the craft!",99,115,()=>{g(this.ba,()=>{c(d,new Ba)})}),k(this.ca,"Take me to the forge!",86,135,()=>{g(this.ba,()=>{u(i,!1),c(d,new D)})}),this.ba.update()}};d=new class{constructor(...a){this.$=Da,this.$.ib?.(...a)}};let Ta=0;function Pa(){var a=document.querySelector(".game"),t=document.getElementById("canvas");a&&t&&(t=window.innerHeight-64,a.style.transform=`translate(-50%, -50%) scale(${(a=t<(a=window.innerWidth-64)/1.525?1.525*t:a)/610})`)}!function a(t){var e,s,i,h,r=t-Ta;1e3/60<=r&&(Ta=t-r%(1e3/60),(t=b).ba.la=t.la,t.ba.bb=t.bb,t.ba.eb=t.eb,t.ba.Ja=t.Ja,e=t.$.get("KeyA")||t.$.get("ArrowLeft")||t.$.get("KeyH")?-1:0,s=t.$.get("KeyD")||t.$.get("ArrowRight")||t.$.get("KeyL")?1:0,i=t.$.get("KeyW")||t.$.get("ArrowUp")?-1:0,h=t.$.get("KeyS")||t.$.get("ArrowDown")?1:0,t.ga.x=e+s,t.ga.y=i+h,t.la=!!t.$.get("Space"),t.bb=!!t.$.get("Escape"),t.Za=!!t.$.get("Digit1"),t.$a=!!t.$.get("Digit2"),t.ab=!!t.$.get("Digit3"),t.eb=!!t.$.get("KeyX"),t.Ja=t.ma,d.$.rb(r)),requestAnimationFrame(a)}(0),window.addEventListener("resize",Pa,!1),Pa()</script>