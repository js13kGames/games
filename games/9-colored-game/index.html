<!doctype html><title>9 Colored Game - js13kGames 2012</title><link type=image/x-icon rel=icon href=""><style>*{padding:0;margin:0}canvas{display:block}#favico{display:none}</style><canvas id=game></canvas><canvas id=favico width=16 height=16></canvas><script>var r=document.getElementById("game");r.width=document.documentElement.clientWidth,r.height=innerHeight;var j,C=r.getContext("2d"),I=r.width,M=r.height,A=0,E=10;function t(e,r){for(var t=Math.floor(Math.random()*(r-e+1))+e;t<e;)t=Math.floor(Math.random()*(r-e+1))+e;return t}function V(e){switch(e){case 0:return C.fillStyle="transparent";case 1:return C.fillStyle="#87dcec";case 2:return C.fillStyle="#72d856";case 3:return C.fillStyle="#f7e818";case 4:return C.fillStyle="#f75149";case 5:return C.fillStyle="#303030";case 6:return C.fillStyle="#fff1da";case 7:return C.fillStyle="#75430a";case 8:C.fillStyle=t(0,4)?"#0e7259":"#217017"}}function s(){switch(this.x=t(0,1)?0:I,this.hit=0,this.species=t(0,2),this.species){case 0:this.species="zombie",this.life=2,this.speed=t(1,4);break;case 1:this.species="blob",this.life=0,this.speed=t(1,3);break;case 2:this.species="muzz",this.life=0,this.speed=t(3,5)}"muzz"!=this.species?this.y=M-(8*sprites.enemy[this.species].left.length+16):this.y=t(20,M-(8*sprites.enemy.zombie.left.length+40)),this.dx=hero.x}function q(){this.x="left"==hero.dir?hero.x:hero.x+80,this.y=hero.crouch?hero.y+56:hero.y+48,this.state=1,this.dir=0}function i(){this.x=t(0,1)?8*-sprites.cloud.length:I,this.y=t(0,200),0<this.x?this.dir="left":this.dir="right",this.speed=t(1,2)}enemys=[],bullets=[],clouds=[],sprites={hero:{left:[[0,0,0,4,4,4,4,0,0,0],[0,0,4,4,4,4,4,4,4,0],[0,0,6,5,6,6,6,6,0,0],[0,0,6,6,6,6,6,6,0,0],[0,0,4,4,6,6,6,6,0,0],[0,0,0,7,7,7,7,0,0,0],[3,3,0,5,5,5,5,7,0,7],[0,6,5,5,5,5,5,0,7,0],[0,0,0,5,5,5,5,0,0,0],[0,0,0,5,5,5,5,0,0,0],[0,0,0,5,5,5,5,0,0,0],[0,0,0,5,0,0,5,0,0,0],[0,0,4,4,0,4,4,0,0,0]],right:[[0,0,0,4,4,4,4,0,0,0],[0,4,4,4,4,4,4,4,0,0],[0,0,6,6,6,6,5,6,0,0],[0,0,6,6,6,6,6,6,0,0],[0,0,6,6,6,6,4,4,0,0],[0,7,0,7,7,7,7,0,0,0],[7,0,7,5,5,5,5,0,3,3],[0,0,0,5,5,5,5,5,6,0],[0,0,0,5,5,5,5,0,0,0],[0,0,0,5,5,5,5,0,0,0],[0,0,0,5,5,5,5,0,0,0],[0,0,0,5,0,0,5,0,0,0],[0,0,0,4,4,0,4,4,0,0]],jump:{left:[],right:[]},crouch:{left:[[0,0,0,4,4,4,4,0,0,0],[0,0,4,4,4,4,4,4,4,0],[0,0,6,5,6,6,6,6,0,0],[0,0,6,6,6,6,6,6,0,7],[0,0,4,6,6,6,6,7,7,0],[0,0,0,7,7,7,7,0,0,0],[0,6,5,5,5,5,5,0,0,0],[3,3,0,5,5,5,5,0,0,0],[0,0,0,5,0,0,5,0,0,0],[0,0,4,4,0,4,4,0,0,0]],right:[[0,0,0,4,4,4,4,0,0,0],[0,4,4,4,4,4,4,4,0,0],[0,0,6,6,6,6,5,6,0,0],[7,0,6,6,6,6,6,6,0,0],[0,7,7,6,6,6,6,4,0,0],[0,0,0,7,7,7,7,0,0,0],[0,0,0,5,5,5,5,5,6,0],[0,0,0,5,5,5,5,0,3,3],[0,0,0,5,0,0,5,0,0,0],[0,0,0,4,4,0,4,4,0,0]]}},enemy:{zombie:{left:[[0,0,0,0,8,8,8,8,0],[0,0,0,8,8,8,8,8,8],[0,0,0,8,5,8,8,8,8],[0,0,0,8,8,8,8,8,8],[0,0,0,4,8,8,8,8,8],[0,8,0,0,8,8,8,8,0],[8,8,7,7,7,7,7,7,0],[0,0,0,0,7,7,7,7,0],[0,0,0,0,7,7,7,7,0],[0,0,0,0,7,7,7,7,0],[0,0,0,0,7,0,0,7,0],[0,0,0,8,8,0,8,8,0]],right:[[0,8,8,8,8,0,0,0,0],[8,8,8,8,8,8,0,0,0],[8,8,8,8,5,8,0,0,0],[8,8,8,8,8,8,0,0,0],[8,8,8,8,8,4,0,0,0],[0,8,8,8,8,0,0,8,0],[0,7,7,7,7,7,7,8,8],[0,7,7,7,7,0,0,0,0],[0,7,7,7,7,0,0,0,0],[0,7,7,7,7,0,0,0,0],[0,7,0,0,7,0,0,0,0],[0,8,8,0,8,8,0,0,0]]},blob:{left:[[0,0,0,8,8,8,8,0,0,0],[0,0,8,8,8,8,8,8,0,0],[0,5,5,8,8,8,8,8,0,0],[0,8,8,8,8,8,8,8,8,0],[0,8,8,8,8,8,8,8,8,0],[8,8,8,8,8,8,8,8,8,8]],right:[[0,0,0,8,8,8,8,0,0,0],[0,0,8,8,8,8,8,8,0,0],[0,8,8,8,8,8,5,5,0,0],[0,8,8,8,8,8,8,8,8,0],[8,8,8,8,8,8,8,8,8,0],[8,8,8,8,8,8,8,8,8,8]]},muzz:[[0,8,0,0,5,5,8,5,5,0,0,8,0],[8,7,8,0,5,4,8,4,5,0,8,7,8],[0,0,7,8,8,8,5,8,8,8,7,0,0],[0,0,0,7,8,5,8,5,8,7,0,0,0],[0,0,0,0,8,5,8,5,8,0,0,0,0]]},bullet:{bullet:["3","3"],explode:{left:[],right:[]}},cloud:[[0,0,6,6,6,6,6,6,6,0,0],[0,6,6,6,6,6,6,6,6,6,0],[6,6,6,6,6,6,6,6,6,6,6],[0,6,6,6,6,6,6,6,6,6,0],[0,0,6,6,6,6,6,6,6,0,0]]},hero={x:I/2-8*sprites.hero.left[0].length/2,y:M-(8*sprites.hero.left.length+16),life:5,jump:0,height:0,speed:0,dir:t(0,1)?"right":"left",hit:0,crouch:0},enemys.push(new s,new s,new s),clouds.push(new i),setInterval(function(){t(0,E)||enemys.push(new s),!t(0,E)&&clouds.length<21&&clouds.push(new i)},1e3);var l,h=document.querySelector("link"),o=document.getElementById("favico"),n=o.getContext("2d"),c=0;function f(e){switch(e){case 0:return n.fillStyle="transparent";case 1:return n.fillStyle="#87dcec";case 2:return n.fillStyle="#72d856";case 3:return n.fillStyle="#f7e818";case 4:return n.fillStyle="#f75149";case 5:return n.fillStyle="#303030";case 6:return n.fillStyle="#fff1da";case 7:return n.fillStyle="#75430a";case 8:n.fillStyle=t(0,4)?"#0e7259":"#217017"}}setInterval(function(){if(n.clearRect(0,0,16,16),c){for(l=5,e=0;e<sprites.hero.crouch.right.length;e++)for(r=0;r<sprites.hero.crouch.right[e].length;r++)f(sprites.hero.crouch.right[e][r]),n.fillRect(r+3,e+l,1,1);c=0}else{l=2;for(var e=0;e<sprites.hero.right.length;e++)for(var r=0;r<sprites.hero.right[e].length;r++)f(sprites.hero.right[e][r]),n.fillRect(r+3,e+l,1,1);c=1}h.href=o.toDataURL()},750),function r(){for(var t in C.clearRect(0,0,I,M),V(1),C.fillRect(0,0,I,M),V(2),C.fillRect(0,M-16,I,M),document.onkeydown=function(e){switch(e.keyCode){case 38:case 87:hero.jump=1,e.preventDefault();break;case 32:e.preventDefault();break;case 40:case 83:hero.crouch=1,hero.y>=M-(8*sprites.hero.left.length+16)&&(hero.y=M-(8*sprites.hero.crouch.left.length+16)),e.preventDefault();break;case 37:case 65:hero.speed=hero.x<=0?0:-8,e.preventDefault();break;case 39:case 68:hero.speed=hero.x>=I-8*(sprites.hero.left.length-1)?0:8,e.preventDefault()}},document.onkeyup=function(e){switch(e.keyCode){case 38:case 87:hero.jump=0,e.preventDefault();break;case 32:bullets.length<11&&bullets.push(new q);break;case 40:case 83:hero.crouch=0,hero.y=M-(8*sprites.hero.left.length+16),e.preventDefault();break;case 37:case 65:case 39:case 68:hero.speed=0,e.preventDefault()}},bullets){for(var s=bullets[t],i=0;i<sprites.bullet.bullet.length;i++)V(5),C.fillRect(8*i+s.x,s.y,8,8);s.dir||("right"==hero.dir?s.x<I?(s.x=s.x+16,s.dir=hero.dir):bullets.splice(t,1):"left"==hero.dir&&(0<s.x?(s.x=s.x-16,s.dir=hero.dir):bullets.splice(t,1))),"right"==s.dir?s.x<I?s.x=s.x+16:bullets.splice(t,1):"left"==s.dir&&(0<s.x?s.x=s.x-16:bullets.splice(t,1))}for(var l in 0!=hero.speed&&(hero.dir=0<hero.speed?"right":"left",hero.x=0<hero.speed?hero.x+8:hero.x-8),0!=hero.jump?(hero.y=hero.y-32,hero.jump=0):!hero.jump&&hero.y<M-(8*sprites.hero.left.length+16)&&(hero.y=hero.y+8),enemys){var h=enemys[l];hero.y<=h.y&&hero.y>=h.y-96&&(h.x>hero.x&&h.x<hero.x+80||h.x+72>hero.x&&h.x+72<hero.x+8*sprites.hero[hero.dir][0].length)&&(hero.life--,hero.hit=1,enemys.splice(l,1),E++)}if(0<hero.life)if(hero.crouch)for(o=0;o<sprites.hero.crouch[hero.dir].length;o++)for(n=0;n<sprites.hero.crouch[hero.dir][o].length;n++)V(hero.hit?sprites.hero.crouch[hero.dir][o][n]?4:0:sprites.hero.crouch[hero.dir][o][n]),C.fillRect(8*n+hero.x,8*o+hero.y,8,8);else for(var o=0;o<sprites.hero[hero.dir].length;o++)for(var n=0;n<sprites.hero[hero.dir][o].length;n++)V(hero.hit?sprites.hero[hero.dir][o][n]?4:0:sprites.hero[hero.dir][o][n]),C.fillRect(8*n+hero.x,8*o+hero.y,8,8);else{var c,f="You are dead!".split(" "),u=30,p=30,a=10;for(c in f)C.font=u+"px Visitor",C.textAlign="center",C.fillStyle="rgb(255, 255, 255)",C.fillText(f[c],I/2,(M-50)/2+a),u+=5,a+=p,p+=10}for(var d in hero.hit&&(hero.hit=0),clouds){var y=clouds[d];"left"==y.dir?(y.x<0&&clouds.splice(d,1),y.x=y.x-y.speed):(y.x>I+8*sprites.cloud.length&&clouds.splice(d,1),y.x=y.x+y.speed);for(var x=0;x<sprites.cloud.length;x++)for(var g=0;g<sprites.cloud[x].length;g++)V(sprites.cloud[x][g]),C.fillRect(8*g+y.x,8*x+y.y,8,8)}for(var m,b,v=5,S=0;S<hero.life;S++){for(var z=0;z<sprites.hero.right.length;z++)for(var k=0;k<sprites.hero.right[z].length;k++)V(sprites.hero.right[z][k]),C.fillRect(2*k+v,2*z+5,2,2);v+=2.5*sprites.hero.left[0].length}for(m in C.font="30px Visitor",C.textAlign="right",C.fillStyle="rgb(255, 255, 255)",C.fillText("You've killed "+A+" enemies",I-5,28),C.font="25px Visitor",enemys){if(e=enemys[m],j=e.x<e.dx?"right":"left",e.dx=hero.x,e.x<e.dx?e.x=e.x+e.speed:e.dx<e.x&&(e.x=e.x-e.speed),"muzz"!=e.species){for(var w in bullets)(b=bullets[w]).x<e.x+72&&b.x>e.x&&b.y<e.y+8*sprites.enemy[e.species][j].length&&b.y>e.y&&(bullets.splice(w,1),e.hit=1,0<e.life?e.life--:(enemys.splice(m,1),A++,0<E&&E--));for(var R=0;R<sprites.enemy[e.species][j].length;R++)for(var D=0;D<sprites.enemy[e.species][j][R].length;D++)V(e.hit?sprites.enemy[e.species][j][R][D]?4:0:sprites.enemy[e.species][j][R][D]),C.fillRect(8*D+e.x,8*R+e.y,8,8)}else{for(var w in bullets)(b=bullets[w]).x<e.x+72&&b.x>e.x&&b.y<e.y+8*sprites.enemy[e.species].length&&b.y>e.y&&(bullets.splice(w,1),e.hit=1,0<e.life?e.life--:(enemys.splice(m,1),A++,0<E&&E--));for(hero.y<e.y?e.y--:e.y++,R=0;R<sprites.enemy.muzz.length;R++)for(D=0;D<sprites.enemy.muzz[R].length;D++)V(e.hit?sprites.enemy.muzz[R][D]?4:0:sprites.enemy.muzz[R][D]),C.fillRect(8*D+e.x,8*R+e.y,8,8)}e.hit&&(e.hit=0)}requestAnimationFrame(r)}()</script>