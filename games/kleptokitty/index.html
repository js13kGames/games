<body><title>Kleptokitty - js13kGames 2025</title><script>let t=Math.PI;function i(t){return Math.abs(t)}function s(t,i=1){return(t%i+i)%i}function e(t,i=0,s=1){return t<i?i:s<t?s:t}function h(t,i,s){return(s-=i)?e((t-i)/s):0}function a(t,s,e,h=c()){return 2*i(t.x-e.x)<s.x+h.x&&2*i(t.y-e.y)<s.y+h.y}function n(t=1,i=0){return i+Math.random()*(t-i)}function r(i=1){return d(new x,n(2*t),i)}function o(t=1){return 0<t?r(t*n(0/t,1)**.5):new x}function l(t=new m,i=new m(0,0,0,1),s=!1){return s?t.Qa(i,n()):new m(n(t.r,i.r),n(t.l,i.l),n(t.b,i.b),n(t.a,i.a))}class u{constructor(t){this.seed=t}float(t=1,i=0){return this.seed^=this.seed<<13,this.seed^=this.seed>>>17,this.seed^=this.seed<<5,i+(this.seed>>>0)/2**32*(t-i)}sign(){return.5<this.float()?1:-1}}function c(t=0,i){return"number"==typeof t?new x(t,null==i?t:i):new x(t.x,t.y)}function d(t,i=0,s=1){return t.x=s*Math.sin(i),t.y=s*Math.cos(i),t}function g(t){return t.x**2+t.y**2}function f(t){var i=t.length();return 1<i?t.scale(1/i):t}function y(t,i){return 0<=t.x&&0<=t.y&&t.x<i.x&&t.y<i.y}class x{constructor(t=0,i=0){this.x=t,this.y=i}set(t=0,i=0){return this.x=t,this.y=i,this}v(){return new x(this.x,this.y)}add(t){return new x(this.x+t.x,this.y+t.y)}A(t){return new x(this.x-t.x,this.y-t.y)}multiply(t){return new x(this.x*t.x,this.y*t.y)}qa(t){return new x(this.x/t.x,this.y/t.y)}scale(t){return new x(this.x*t,this.y*t)}length(){return g(this)**.5}K(t){return((this.x-t.x)**2+(this.y-t.y)**2)**.5}normalize(t=1){var i=this.length();return i?this.scale(t/i):new x(0,t)}angle(){return Math.atan2(this.x,this.y)}rotate(t){var i=Math.cos(-t);return t=Math.sin(-t),new x(this.x*i-this.y*t,this.x*t+this.y*i)}setDirection(t,i=1){return c((t=s(t,4))%2?t-1?-i:i:0,t%2?0:t?-i:i)}direction(){return i(this.x)>i(this.y)?this.x<0?3:1:this.y<0?2:0}floor(){return new x(Math.floor(this.x),Math.floor(this.y))}Qa(t,i){return this.add(t.A(this).scale(e(i)))}toString(){}}function p(t){return(255*e(t.r)|0)+(255*e(t.l)<<8)+(255*e(t.b)<<16)+(255*e(t.a)<<24)}class m{constructor(t=1,i=1,s=1,e=1){this.r=t,this.l=i,this.b=s,this.a=e}set(t=1,i=1,s=1,e=1){return this.r=t,this.l=i,this.b=s,this.a=e,this}v(){return new m(this.r,this.l,this.b,this.a)}add(t){return new m(this.r+t.r,this.l+t.l,this.b+t.b,this.a+t.a)}A(t){return new m(this.r-t.r,this.l-t.l,this.b-t.b,this.a-t.a)}multiply(t){return new m(this.r*t.r,this.l*t.l,this.b*t.b,this.a*t.a)}qa(t){return new m(this.r/t.r,this.l/t.l,this.b/t.b,this.a/t.a)}scale(t,i=t){return new m(this.r*t,this.l*t,this.b*t,this.a*i)}Qa(t,i){return this.add(t.A(this).scale(e(i)))}toString(t=!0){var i=t=>((t=255*e(t)|0)<16?"0":"")+t.toString(16);return"#"+i(this.r)+i(this.l)+i(this.b)+(t?i(this.a):"")}}let L=new m,v=new m(0,0,0),w=new m(1,0,0),b=new m(1,.5,0),M=new m(1,1,0),S=c(),A=32,z=c(1920,1080),D=c(),C=c(16),E=0,T=1;function k(t){var i,s,e=t.parent;for(s of(e&&(i=e.j?-1:1,t.g=t.tb.multiply(c(i,1)).rotate(e.angle).add(e.g),t.angle=i*t.sb+e.angle),t.children))k(s)}function P(t){if(!t.J)for(var i of(t.J=1,t.parent&&t.parent.removeChild(t),t.children))P(i,i.parent=0)}function O(t,i=!0,s=!0,e=!0,h=!0){t.pa=i,t.ja=s,t.P=e,t.Ia=h}class j{constructor(t=c(),i=c(1),s,e=0,h=new m,a=0){this.g=t.v(),this.size=i,this.ob=void 0,this.C=s,this.angle=e,this.color=h,this.eb=void 0,this.j=!1,this.i=1,this.T=T,this.ba=1,this.L=0,this.ta=.8,this.ga=1,this.$=a,this.h=c(),this.oa=0,this.Ya=Rt,this.children=[],this.Ha=!0,this.parent=void 0,this.tb=c(),this.sb=0,this.Ia=this.ja=this.pa=this.P=!1,Ht.push(this)}update(){var t;if(!this.parent&&(this.Ha?(this.h.x=e(this.h.x,-1,1),this.h.y=e(this.h.y,-1,1)):1<(t=g(this.h))&&(this.h.x*=t=1/t**.5,this.h.y*=t),t=this.g.v(),this.h.x*=this.T,this.h.y*=this.T,this.i&&(this.h.y+=0*this.ga),this.g.x+=this.h.x,this.g.y+=this.h.y,this.angle+=this.oa*=this.ba,this.i)){var s,h,n,o,l,u,d=this.h.y<0;if(this.M&&(u=this.M.h?this.M.h.x:0,this.h.x=u+(this.h.x-u)*this.ta,this.M=0),this.pa)for(var f of Wt)!this.ja&&!f.ja||f.J||f.parent||f==this||a(this.g,this.size,f.g,f.size)&&(u=this.da(f),s=f.da(this),u)&&s&&(a(t,this.size,f.g,f.size)?(u=(s=(u=t.A(f.g)).length())<.01?r(.001):u.scale(.001/s),this.h=this.h.add(u),f.i&&(f.h=f.h.A(u))):(s=this.size.add(f.size),h=2*(t.y-f.g.y)>s.y+0,n=2*i(t.y-f.g.y)<s.y,o=2*i(t.x-f.g.x)<s.x,u=Math.max(this.L,f.L),!h&&!o&&n||(this.g.y=f.g.y+(s.y/2+.001)*Math.sign(t.y-f.g.y),f.M&&d||!f.i?(d&&(this.M=f),this.h.y*=-u):f.i&&(o=(this.i*this.h.y+f.i*f.h.y)/(this.i+f.i),l=f.h.y*(f.i-this.i)/(this.i+f.i)+2*this.h.y*this.i/(this.i+f.i),this.h.y=o+e(u)*(this.h.y*(this.i-f.i)/(this.i+f.i)+2*f.h.y*f.i/(this.i+f.i)-o),f.h.y=o+e(u)*(l-o))),!h&&n&&(this.g.x=f.g.x+(s.x/2+.001)*Math.sign(t.x-f.g.x),f.i?(s=(this.i*this.h.x+f.i*f.h.x)/(this.i+f.i),h=f.h.x*(f.i-this.i)/(this.i+f.i)+2*this.h.x*this.i/(this.i+f.i),this.h.x=s+e(u)*(this.h.x*(this.i-f.i)/(this.i+f.i)+2*f.h.x*f.i/(this.i+f.i)-s),f.h.x=s+e(u)*(h-s)):this.h.x*=-u)));this.P&&Mt(this.g,this.size,this)&&!Mt(t,this.size,this)&&(f=Mt(c(t.x,this.g.y),this.size,this),u=Mt(c(this.g.x,t.y),this.size,this),!f&&u||(this.h.y*=-this.L,(this.M=d)?this.g.y=(t.y-this.size.y/2|0)+this.size.y/2+1e-4:this.g.y=t.y),u)&&(this.g.x=t.x,this.h.x*=-this.L)}}m(){V(this.g,this.ob||this.size,this.C,this.color,this.angle,this.j,this.eb)}Ja(t){return 0<t}da(){return!0}removeChild(t){t.parent==this&&this.children.includes(t),this.children.splice(this.children.indexOf(t),1),t.parent=0}toString(){}}let K,I,F,H,W=c(),B=[];function R(t=c(),i=C,s=0,e=0){"number"==typeof i&&(i=c(i));var h=B[s],a=i.add(c(2*e));return"number"==typeof t&&(t=0<(h=h.size.x/a.x|0)?c(t%h,t/h|0):c()),t=c(t.x*a.x+e,t.y*a.y+e),new N(t,i,s,e)}class N{constructor(t=c(),i=C,s=0,e=0){this.g=t.v(),this.size=i.v(),this.Ca=s,this.padding=e}offset(t){return new N(this.g.add(t),this.size,this.Ca)}frame(t){return this.offset(c(t*(this.size.x+2*this.padding),0))}}class G{constructor(t){this.image=t,this.size=c(t.width,t.height);var i=ut.createTexture();ut.bindTexture(3553,i),t&&t.width?ut.texImage2D(3553,0,6408,6408,5121,t):(t=new Uint8Array([255,255,255,255]),ut.texImage2D(3553,0,6408,1,1,0,6408,5121,t)),ut.texParameteri(3553,10241,9728),ut.texParameteri(3553,10240,9728),this.Oa=i}}function U(t){return new x((t.x-S.x)*A+W.x/2-.5,(t.y-S.y)*-A+W.y/2-.5)}function V(t,i=c(1),s,e=new m,h=0,a,n=new m(0,0,0,0),r=!0){let o=s&&B[s.Ca];var l,u,d,g;r?o?(g=c(1).qa(o.size),r=s.g.x*g.x,l=s.g.y*g.y,u=s.size.x*g.x,d=s.size.y*g.y,g=g.scale(E),function(t){t!=dt&&(jt(),ut.bindTexture(3553,dt=t))}(o.Oa),It(t.x,t.y,a?-i.x:i.x,i.y,h,r+g.x,l+g.y,r-g.x+u,l-g.y+d,p(e),p(n))):It(t.x,t.y,i.x,i.y,h,0,0,0,0,0,p(e)):function(t,i,s,e,h){var a=I;t=U(t),i=i.scale(A),a.save(),a.translate(t.x+.5,t.y+.5),a.rotate(s),a.scale(e?-i.x:i.x,-i.y),h(a),a.restore()}(t,i=c(i.x,-i.y),h,a,t=>{var i,h,a,n;o?(i=s.g.x+E,h=s.g.y+E,a=s.size.x-2*E,n=s.size.y-2*E,t.globalAlpha=e.a,t.drawImage(o.image,i,h,a,n,-.5,-.5,1,1),t.globalAlpha=1):(t.fillStyle=e,t.fillRect(-.5,-.5,1,1))})}function J(t,i,s,e,h){V(t,i,void 0,s,e,!1,void 0,h)}function Y(t,i,s=.1,e){i=c((i.x-t.x)/2,(i.y-t.y)/2),s=c(s,2*i.length()),J(t.add(i),s,e,i.angle())}function X(t,i=1,s=1,e=new m,h=0,a=new m(0,0,0),n,r=I){n||(t=U(t),i*=A,s*=A,h*=A),r.fillStyle=e.toString(),r.beginPath(),r.ellipse(t.x,t.y,i,s,0,0,9),r.fill(),h&&(r.strokeStyle=a.toString(),r.lineWidth=h,r.stroke())}function $(t,i=1,s=new m){X(t,i,i,s,0,new m(0,0,0),void 0,I)}function Z(t){return _[0]&&!!(2&_[0][t])}let q=!1;function Q(t,i=0){return function(t,i=0){return _[i]&&!!(1&_[i][t])}(t,i+1)}let _=[[]];function tt(){for(var t of _)for(var i in t)t[i]&=1}function it(t){var i;return K?(i=K.getBoundingClientRect(),c(K.width,K.height).multiply(c(h(t.x,i.left,i.right),h(t.y,i.top,i.bottom)))):c()}let st=[];function et(){var t,i;if(navigator&&navigator.getGamepads&&document.hasFocus()){var s=navigator.getGamepads();for(let u=s.length;u--;){var e=s[u],a=_[u+1]||(_[u+1]=[]),n=st[u]||(st[u]=[]);if(e){for(var r=0;r<e.axes.length-1;r+=2)n[r>>1]=(t=c(e.axes[r],e.axes[r+1]),f(c((i=t=>.3<t?h(t,.3,.8):t<-.3?-h(-t,.3,.8):0)(t.x),i(-t.y))));for(r=e.buttons.length;r--;){var o=e.buttons[r],l=Q(r,u);a[r]=o.pressed?l?1:3:l?4:0,q||=!u&&o.pressed}g(e=c((Q(15,u)&&1)-(Q(14,u)&&1),(Q(12,u)&&1)-(Q(13,u)&&1)))&&(n[0]=f(e))}}}}let ht,at=void 0!==window.ontouchstart,nt=new AudioContext;class rt{constructor(t){this.range=40,this.Lb=.7,this.la=0,t&&(this.la=null!=t[1]?t[1]:.05,t[1]=0,this.Wa=[ot(...t)],this.sampleRate=44100)}play(t,i=1,s=1,a=1,r=!1){if(this.Wa){var o;if(t){if(o=this.range){var l=(S.x-t.x)**2+(S.y-t.y)**2;if(o*o<l)return;i*=h(l**.5,o,o*this.Lb)}o=2*U(t).x/K.width-1}return t=s+s*this.la*a*n(-1,1),this.qb=nt.createGain(),this.source=function(t,i=1,s=1,h=0,a=!1,n=44100,r){let o=nt.createBuffer(t.length,t[0].length,n),l=nt.createBufferSource();return t.forEach((t,i)=>o.getChannelData(i).set(t)),l.buffer=o,l.playbackRate.value=s,l.loop=a,(r=r||nt.createGain()).gain.value=i,r.connect(ht),t=new StereoPannerNode(nt,{pan:e(h,-1,1)}),l.connect(t).connect(r),"running"!=nt.state?nt.resume().then(()=>l.start()):l.start(),l}(this.Wa,i,t,o,r,this.sampleRate,this.qb)}}stop(){this.source&&this.source.stop(),this.source=void 0}}function ot(s=1,h=.05,a=220,r=0,o=0,l=.1,u=0,c=1,d=0,g=0,f=0,y=0,x=0,p=0,m=0,L=0,v=0,w=1,b=0,M=0,S=0){var A=2*t,z=d*=500*A/44100/44100;h=a*=n(1+h,1-h)*A/44100;let D=[],C=0,E=0,T=0,k=1,P=0,O=0,j=0,K=A*i(S)*2/44100,I=Math.cos(K),F=Math.sin(K)/2/2,H=1+F,W=(K=-2*I/H,F=(1-F)/H,(1+Math.sign(S)*I)/2/H),B=-(Math.sign(S)+I)/H,R=0,N=0,G=0,U=0;for(g*=500*A/44100**3,m*=A/44100,f*=A/44100,y*=44100,x=44100*x|0,H=(r=44100*r+9)+(b*=44100)+(o*=44100)+(l*=44100)+(v*=44100)|0;T<H;D[T++]=j*s)++O%(100*L|0)||(j=u?1<u?2<u?3<u?Math.sin(C**3):e(Math.tan(C),1,-1):1-(2*C/A%2+2)%2:1-4*i(Math.round(C/A)-C/A):Math.sin(C),j=(x?1-M+M*Math.sin(A*T/x):1)*Math.sign(j)*i(j)**c*(T<r?T/r:T<r+b?1-(T-r)/b*(1-w):T<r+b+o?w:T<H-v?(H-T-v)/l*w:0),j=v?j/2+(v>T?0:(T<H-v?1:(H-T)/v)*D[T-v|0]/2/s):j,S&&(j=U=W*R+B*(R=N)+W*(N=j)-F*G-K*(G=U))),I=(a+=d+=g)*Math.cos(m*E++),C+=I+I*p*Math.sin(T**5),k&&++k>y&&(a+=f,h+=f,k=0),!x||++P%x||(a=h,d=z,k=k||1);return D}let lt,ut,ct,dt,gt,ft,yt,xt,pt,mt,Lt,vt=[],wt=c();function bt(t){return y(t,wt)?vt[(0|t.y)*wt.x+t.x|0]:0}function Mt(t,i=c(),s){var e=Math.max(t.x-i.x/2|0,0),h=Math.max(t.y-i.y/2|0,0),a=Math.min(t.x+i.x/2,wt.x);for(t=Math.min(t.y+i.y/2,wt.y);h<t;++h)for(i=e;i<a;++i){var n=vt[h*wt.x+i];if(n&&(!s||s.Ja(n)))return!0}return!1}function St(t,s){var e=(s=s.A(t)).length(),h=c(i(1/(h=s.normalize()).x),i(1/h.y));let a=t.floor(),n=h.x*(s.x<0?t.x-a.x:a.x-t.x+1);for(t=h.y*(s.y<0?t.y-a.y:a.y-t.y+1);;){if(bt(a))return a.add(c(.5));if(n>e&&e<t)break;n>t?(a.y+=Math.sign(s.y),t+=h.y):(a.x+=Math.sign(s.x),n+=h.x)}}class At{constructor(t,i=0,s=!1,e=new m){this.Da=t,this.direction=i,this.j=s,this.color=e}clear(){this.Da=this.direction=0,this.j=!1,this.color=new m}}function zt(i,s,e=!0){var h=i.C.size;e&&(e=s.multiply(h),i.context.clearRect(e.x,i.canvas.height-e.y,h.x,-h.y)),null!=(e=i.getData(s)).Da&&(s=s.add(c(.5)),i=R(e.Da,h,i.C.Ca,i.C.padding),V(s,c(1),i,e.color,e.direction*t/2,e.j))}function Dt(t){t.Cb=[K,I,W,S,A],K=t.canvas,I=t.context,W=t.size.multiply(t.C.size),S=t.size.scale(.5),A=t.C.size.x,K.width=W.x,K.height=W.y,t.context.imageSmoothingEnabled=!1,Pt();for(let i=t.size.x;i--;)for(let s=t.size.y;s--;)zt(t,c(i,s),!1);Kt(!0),[K,I,W,S,A]=t.Cb}class Ct extends j{constructor(t,s=wt,e=R(),h=c(1)){for(super(t,s,e,0,void 0,0),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.scale=h,this.rb=!1,this.data=[],t=i((t=this.size).x*t.y);t--;)this.data.push(new At)}setData(t,i,s=!1){y(t,this.size)&&(this.data[(0|t.y)*this.size.x+t.x|0]=i,s)&&zt(this,t)}getData(t){return y(t,this.size)&&this.data[(0|t.y)*this.size.x+t.x|0]}update(){}m(){var t=U(this.g.add(c(0,this.size.y*this.scale.y)));t.x|=0,t.y|=0,(this.rb?H:I).drawImage(this.canvas,t.x,t.y,A*this.size.x*this.scale.x,A*this.size.y*this.scale.y)}}function Et(t){var i="number"==typeof t.ra?o(t.ra/2):c(n(-.5,.5),n(-.5,.5)).multiply(t.ra).rotate(t.angle);let s=n(t.Ta,-t.Ta),e=(t.xa||(i=t.g.add(i),s+=t.angle),t.la),h=t=>t+t*n(e,-e);var a=h(t.zb),r=h(t.Aa),u=h(t.Gb),g=h(t.speed),f=(h=h(t.fb)*(2*Math.floor(n(2,0))-1),n(t.La,-t.La)),y=l(t.kb,t.lb,t.Va),x=l(t.ib,t.jb,t.Va);f=t.xa?f:t.angle+f,(i=new kt(i,t.C,s,y,x,a,r,u,t.V,t.aa,t.na,t.xa&&t,t.yb)).h=d(c(),f,g),i.oa=h,i.V=t.V,i.T=t.T,i.ba=t.ba,i.L=t.L,i.ta=t.ta,i.ga=t.ga,i.P=t.P,i.$=t.$,i.j=!!Math.floor(n(2,0))}class Tt extends j{constructor(i,s,e=0,h=0,a=100,n=t,r,o=new m,l=new m,u=new m(1,1,1,0),d=new m(1,1,1,0),g=.5,f=.1,y=1,x=.1,p=.05,L=1,v=1,w=0,b=t,M=.1,S=.2,A=!1,z=!1,D=!0,C=(z?1e9:0),E=!1){super(i,c(),r,s,void 0,C),this.ra=e,this.Na=h,this.Ma=a,this.La=n,this.kb=o,this.lb=l,this.ib=u,this.jb=d,this.Va=D,this.zb=g,this.Aa=f,this.Gb=y,this.speed=x,this.fb=p,this.T=L,this.ba=v,this.ga=w,this.Ta=b,this.V=M,this.la=S,this.P=A,this.aa=z,this.xa=E,this.na=0,this.yb=void 0,this.U=0}update(){if(this.parent&&super.update(),!this.Na||Rt-this.Ya<=this.Na){if(+this.Ma){var t=1/this.Ma;for(this.U+=Ft;0<this.U;this.U-=t)Et(this)}}else P(this)}m(){}}class kt extends j{constructor(t,i,s,e,h,a,n,r,o,l,u,d,g){super(t,c(),i,s),this.fa=e,this.ea=h.A(e),this.Ra=a,this.Aa=n,this.Hb=r-n,this.V=o,this.aa=l,this.na=u,this.N=d,this.Ka=g,this.Ha=!1}m(){var t=0<this.Ra?Math.min((Rt-this.Ya)/this.Ra,1):1,i=c(this.Aa+t*this.Hb),s=this.V/2;s=new m(this.fa.r+t*this.ea.r,this.fa.l+t*this.ea.l,this.fa.b+t*this.ea.b,(this.fa.a+t*this.ea.a)*(t<s?t/s:1-s<t?(1-t)/s:1)),this.aa&&(mt=!0);let e=this.g;var h,a,n=this.angle;this.N&&(e=this.N.g.add(e.rotate(-this.N.angle)),n+=this.N.angle),this.na?(h=this.h,(n=(h=this.N?h.rotate(-this.N.angle):h).length())&&(h=h.scale(1/n),a=n*this.na,i.y=Math.max(i.x,a),n=h.angle(),V(e.add(h.multiply(c(0,-a/2))),i,this.C,s,n,this.j))):V(e,i,this.C,s,n,this.j),this.aa&&(mt=void 0),1==t&&(this.color=s,this.size=i,this.Ka&&this.Ka(this),this.J=1)}}function Pt(){ut.viewport(0,0,lt.width=K.width,lt.height=K.height),ut.clear(16384),ut.useProgram(ct),ut.activeTexture(33984),B[0]&&ut.bindTexture(3553,dt=B[0].Oa);let t=mt=Lt=0,i=(i,s,e,h)=>{i=ut.getAttribLocation(ct,i);var a=e&&44,n=e&&1,r=1==e;ut.enableVertexAttribArray(i),ut.vertexAttribPointer(i,h,s,r,a,t),ut.vertexAttribDivisor(i,n),t+=h*e};ut.bindBuffer(34962,ft),i("g",5126,0,2),ut.bindBuffer(34962,gt),ut.bufferData(34962,44e4,35048),i("p",5126,4,4),i("u",5126,4,4),i("c",5121,1,4),i("a",5121,1,4),i("r",5126,4,1),i=c(2*A).qa(W);var s=c(-1).A(S.multiply(i));ut.uniformMatrix4fv(ut.getUniformLocation(ct,"m"),!1,[i.x,0,0,0,0,i.y,0,0,1,1,1,1,s.x,s.y,0,0])}function Ot(t,i){return i=ut.createShader(i),ut.shaderSource(i,t),ut.compileShader(i),i}function jt(){var t;pt&&(t=Lt?1:771,ut.blendFuncSeparate(770,t,1,t),ut.enable(3042),ut.bufferSubData(34962,0,yt),ut.drawArraysInstanced(5,0,4,pt),pt=0,Lt=mt)}function Kt(t=!1){var i=I;(pt||t)&&(jt(),t)&&i.drawImage(lt,0,0)}function It(t,i,s,e,h,a,n,r,o,l,u=0){(1e4<=pt||Lt!=mt)&&jt();var c=11*pt++;yt[c++]=t,yt[c++]=i,yt[c++]=s,yt[c++]=e,yt[c++]=a,yt[c++]=n,yt[c++]=r,yt[c++]=o,xt[c++]=l,xt[c++]=u,yt[+c]=h}let Ft=1/60,Ht=[],Wt=[],Bt=0,Rt=0,Nt=0,Gt=0,Ut=[],Vt=[];function Jt(){for(var t of(Wt=Ht.filter(t=>t.pa),Ht))t.parent||(function t(i){if(!i.J)for(var s of(i.update(),i.children))t(s)}(t),k(t));Ht=Ht.filter(t=>!t.J)}function Yt(t,i){var s,e=[];for(s of h=Ht){if(h=s.Ia)t:{var h=t,a=i,n=s.size,r=(n=(r=s.g.A(n.scale(.5))).add(n),a=a.A(h),h.A(r));n=h.A(n),h=[-a.x,a.x,-a.y,a.y],r=[r.x,-n.x,r.y,-n.y],n=0,a=1;for(let t=4;t--;)if(h[t]){var o=r[t]/h[t];if(h[t]<0){if(a<o){h=!1;break t}n=Math.max(o,n)}else{if(o<n){h=!1;break t}a=Math.min(o,a)}}else if(r[t]<0){h=!1;break t}h=!0}h&&e.push(s)}return e}(()=>{function t(t){var i;t.pb||(t.pb=!0,i={},t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?i.credentials="include":"anonymous"===t.crossOrigin?i.credentials="omit":i.credentials="same-origin",fetch(t.href,i))}var i=document.createElement("link").relList;if(!(i&&i.supports&&i.supports("modulepreload"))){for(var s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(i=>{for(var s of i)if("childList"===s.type)for(var e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}})();let Xt={title:"KleptoKitty",width:270,height:480,Mb:["t.gif"],ab:8,o:{click:[1,.5],Fb:[,0,960,,1,.01,,.8,-.01,,-190,.5,,.05,,,1],Ab:[,,491,.01,.06,.07,1,2.7,,,419,.09,,,,,,.65,.02,,257],ua:[2.4,,51,.02,.1,.12,2,1.6,,,,,.01,2,,.2,.11,.74,.08,.28],key:[.8,,444,.09,.24,.35,,3.7,,,81,.09,.03,,,,,.54,.23,.29,211],open:[1.1,,250,.07,.24,.26,,2,,164,211,.07,.08,,,.1,,.75,.12,.09,115],Ib:[,.1,75,.03,.08,.17,1,1.88,7.83,,,,,.4]}};class $t extends j{constructor(t,i,s=0,e={}){super(t.add(c(.5)),i,R(s,8)),O(this),this.I=this.g.v(),Object.assign(this,e)}update(){super.update(),this.ma=bt(this.g.add(c(0,-1)))}m(){var t;this.ma||(t=this.size.x/2,X(this.I.add(c(0,-.5)),t,.2,SHADOW)),super.m()}}class Zt{constructor(){if(qt)return qt;qt=this,document.addEventListener("touchstart",this.start),document.addEventListener("touchmove",this.move),document.addEventListener("touchend",this.end),this.clear()}start=t=>{t=t.touches[0],this.Za=this.ya=t.clientX,this.$a=this.za=t.clientY};move=t=>{t=t.touches[0],this.ya=t.clientX,this.za=t.clientY};end=()=>{var t=this.Za-this.ya,i=this.$a-this.za,s=Math.abs(t),e=Math.abs(i);this.dir=Math.max(s,e)<20?null:e<s?0<t?"left":"right":0<i?"up":"down"};clear(){this.Za=this.$a=this.ya=this.za=this.dir=null}}var qt;class Qt extends $t{constructor(t,i){super(t,c(.5),4,i),this.name="cat",this.speed=.5,this.dir=c(0,0),this.X=this.Y=this.K=0,this.H=!1,this.Kb=new Zt,this.$=10}update(){var i,s,h,a,r;this.u||(i=this.h.x+this.h.y!==0,s=this.Kb.dir,h=this.dir.v(),i||this.dir.x&&this.dir.y||(Z("ArrowRight")||"right"==s?this.dir=c(1,0):Z("ArrowLeft")||"left"==s?this.dir=c(-1,0):Z("ArrowUp")||"up"==s?this.dir=c(0,1):!Z("ArrowDown")&&"down"!=s||(this.dir=c(0,-1))),h.x===this.dir.x&&h.y===this.dir.y||(this.Y+=1),this.K=i?this.K+1:0,this.h=this.H?c():this.dir.scale(this.speed),!i||~~(1e3*Rt)%100||(this.o.click.play(),s=this.g.add(c(0,-.25)),new Tt(s,0,0,.1,.7*n(15,30),t/2,R(7,8),new m(1,1,1,.15),new m(.5,.5,.5,.15),new m(1,1,1,.15),new m(1,1,1,.15),.4,.55,.1,5e-4,.1,.8,.9,-.2,t,.5,1,!1,!at,!0,0)),this.j=this.h.x<0,super.update(),this.Nb&&!i&&(this.g.x=this.g.x-~~this.g.x!=.5?.5+~~this.g.x:this.g.x),s=Xt.width/A/2,h=Xt.height/A/2,a=this.ka.x-s,r=this.ka.y-h,this.ka.y<Xt.height/A&&(r=h=(h+r)/2),this.ka.x<Xt.width/A&&(a=s=(s+a)/2),S=c(e(this.g.x,s,a),e(this.g.y,h,r)),this.Nb=i)}m(){var t,i;this.H||(this.u?V(this.g,c(1.2),R(2,8),v,Math.PI/2):((t=this.h.x+this.h.y!==0)&&(i=0!==this.h.y?c(.3,0):c(0,.3),Y(this.g,this.g.add(this.h.scale(.4*-this.K)),.2,SHADOW),Y(this.g.add(i),this.g.add(this.h.scale(.2*-this.K)).add(i),.2,SHADOW)),bt(this.g.add(c(0,-1)))||$(this.g.add(c(0,-.35)),.45,SHADOW),t=!this.u&&t&&0<Math.sin(50*Rt)?1:0,J(this.g.add(c(this.j?-.2:.2,.2)),c(.6,.2),L),V(this.g.add(c(0,.2)),c(1),R(t,8),void 0,0,this.j),this.Sa&&function(t,i=I){!function(t,i=new m,s=new m(0,0,0),e="center",h="arial",a=H){var n=+A,r=.3*A;a.fillStyle=i.toString(),a.lineWidth=r,a.strokeStyle=s.toString(),a.textAlign=e,a.font=n+"px "+h,a.textBaseline="middle",a.lineJoin="round",(t=t.v()).y-=((i=["LOCKED"]).length-1)*n/2,i.forEach(i=>{r&&a.strokeText(i,t.x,t.y,void 0),a.fillText(i,t.x,t.y,void 0),t.y+=n})}(U(t),w,void 0,void 0,void 0,i)}(t=S.add(c(0,2)),H),this.Sa=!1))}da(i){var s=i.name;return!(this.u||("key"!==s||this.W?"loot"===s?(function(i,s=M){new Tt(i,0,0,.2,30,1,R(6,8),s,s,s.scale(1,0),s.scale(1,0),1,.3,.6,.1,.005,1,1,.05,t,0,0,0,0)}(i.g,i.color),this.cb(10),this.X+=1,P(i),this.o.Ab.play(this.g),1):"baddie"===s?(i.speed=0,this.o.ua.play(this.g),this.o.Fb.play(this.g),this.u="Caught",0):("spike"===s&&i.active&&(this.u="Spiked",this.o.ua.play(this.g)),"exit"!==s||this.H||(this.W?(this.H=!0,this.o.open.play(this.g),window.setTimeout(()=>{this.wb()},250)):this.Sa=!0),1):(this.W=!0,i.W=!0,this.o.key.play(this.g),0)))}}class _t extends $t{constructor(t){super(t,c(1),3),this.name="key",O(this,!0,!1,!1,!1),this.ja=!1,this.I=this.g.v(),this.bb=50}update(){super.update(),this.W?(this.ma=!0,this.h=c(.5,.4),--this.bb,this.bb<=0&&P(this)):this.g.y+=.005*Math.sin(3*Rt)}}class ti extends j{constructor(t){super(t.add(c(.5)),c(1)),this.name="exit",O(this),setTimeout(()=>{this.O=Ht.find(t=>"cat"===t.name)},10),this.hb=new m(.6,.4,.1)}m(){var t=this.O&&this.O.W;J(this.g,this.size,v),J(this.g,this.size.scale(.8),t?M:this.hb),t?J(this.g,this.size.scale(Math.abs(Math.sin(2*Rt))).scale(.8),b):J(this.g.add(c(-.2,0)),c(.2),v)}}class ii extends j{constructor(t,i,s,e){super(t,i,s),this.D=this.Ea=!1,this.name="baddie",this.F=t.v(),this.xb=e,O(this),this.f=0}update(){this.ma=bt(this.g.add(c(0,-1))),super.update(),this.Ea=!1,this.f+=1}Ja(){if(this.D)return this.j=this.h.x<=0,!0;this.Ea||(this.dir*=-1,this.j=!this.j,this.Ea=!0)}}class si extends ii{constructor(t,i){super(t.add(c(0,.5)),c(.9),R(13,8),{o:i}),this.dir=1,this.speed=.1}update(){if(!this.D||!this.D.H){var t;if(this.h=c(this.speed*this.dir,0),this.speed&&(this.C.g.x=0<Math.sin(30*Rt)?8:16),this.D?.g&&(this.color=w,t=this.D.g,this.h.x=t.x>=this.g.x?this.speed:-this.speed,this.h.y=t.y>=this.g.y?this.speed:-this.speed,this.j=this.g.x>=t.x),!(this.D||this.f<5))for(var i of(this.nb=8*(this.j?-1:1),this.F=this.g.add(c(this.nb,0)),this.F=(this.Eb=St(this.g,this.F))||this.F,t=Yt(this.g,this.F)))if("cat"===i.name){this.xb.o.Ib.play(),this.D=i;break}super.update()}}m(){var t,i;this.ma||$(this.g.add(c(0,-.5)),.5,SHADOW),J(this.g.add(c(this.j?-.2:.2,.1)),c(.6,.3),this.D?v:w),this.D||!this.F||this.f<5||(t=new m(.9,.8,.4,.5),i=this.j?-1:1,Y(this.g,this.F.add(c(this.j?.5:-.5,0)),.5,t),V(this.F,c(i),R(7,8),t)),super.m()}da(t){if("loot"===t.name)return!1}}class ei extends j{constructor(t){super(t.add(c(.5,.2)),c(1),R(5,8)),this.name="spike",O(this),this.I=this.g.v(),setTimeout(()=>{this.O=Ht.find(t=>"cat"===t.name)},10)}update(){this.O&&this.O.u||(this.Fa=Math.sin(Rt),this.active=.5<this.Fa,this.size=c(1,this.Fa),this.g.y=this.I.y+this.Fa/2,super.update())}m(){var t=new m(1,1,1,.5);this.active?super.m():(X(this.I.add(c(-.25,0)),.25,.1,t),X(this.I.add(c(.25,0)),.25,.1,t))}}class hi extends $t{constructor(t){super(t,c(.8),12),this.name="camera",this.rotationAngle=0,this.Bb=.01}update(){super.update(),this.length=6,this.rotationAngle+=this.Bb;var t,i=Math.cos(this.rotationAngle),s=Math.sin(this.rotationAngle),e=(this.ha=St(this.g,c(this.g.x+i*this.length,this.g.y+s*this.length)),this.length);for(t of(this.ha&&(e=this.g.K(this.ha),e=Math.max(0,e-.2)),this.sa=c(this.g.x+i*e,this.g.y+s*e),this.ha,Yt(this.g,this.sa)))if("cat"===t.name&&!t.u){t.u="zapped";break}}m(){Y(this.g,this.sa,.2,w),this.ha&&$(this.sa,.3,w),super.m()}}class ai extends $t{constructor(t){super(t,c(.9,.7),11),this.name="loot",this.color=function(t=0){var i=new m,h=(t=s(t,1),e(1)),a=e(.6),n=(t,i,e)=>6*(e=s(e,1))<1?t+6*(i-t)*e:2*e<1?i:3*e<2?t+(i-t)*(4-6*e):t;return i.r=n(a=2*a-(h=a<.5?a*(1+h):a+h-a*h),h,t+1/3),i.l=n(a,h,t),i.b=n(a,h,t-1/3),i.a=1,i}((t=[.75,0,.1,.8,.2,.3,.5])[~~(Math.random()*t.length)]),this.I=this.g.v(),this.Z=c(.2),this.Pa=2}update(){var t=Math.sin(Rt*this.Pa);0<Math.cos(Rt*this.Pa)?this.Z=e(.5*t,-.2,.2):this.Z=-1,super.update()}m(){var t;super.m(),Y(this.g.add(c(-.5,0)),this.g.add(c(.3,0)),.1,new m(1,1,1,.4)),0<=this.Z&&(J(t=this.g.add(c(this.Z)),c(.2),L),.2<=this.Z)&&(Y(t.add(c(-.3,0)),t.add(c(.3,0)),.1,L),Y(t.add(c(0,-.3)),t.add(c(0,.3)),.1,L))}}function ni(t,i,s,h=1,a="#fff"){var n=(h*=e(F.width/40,10,20))/5;H.textAlign="center",H.textBaseline="middle",H.font=h+"px monospace",H.lineWidth=h/5,H.globalAlpha=.2,H.fillStyle="#000",H.strokeStyle="rgba(0,0,0,.5)",H.strokeText(t,i+n,s+n),H.fillText(t,i+n,s+n),H.globalAlpha=1,H.fillStyle=a,H.strokeStyle="rgba(0,0,0,.5)",H.strokeText(t,i,s),H.fillText(t,i,s)}class ri extends j{constructor(t,i=2){super(),this.g=c(160,280),this.text=t,this.duration=200,this.size=i}update(){this.duration-=Rt,this.duration<=0&&(this.g=this.g.add(c(0,-5))),this.g.y<-50&&P(this)}m(){ni(this.text,this.g.x,this.g.y,this.size)}}var oi=[3,4.5],li=[[0,3,7,10],[5,8,12,15],[0,4,7,11],[2,5,9,12]],ui={Pb:[0,2,3,5,7,9,10],gb:[0,2,4,5,7,9,10,11]};let ci=[[.5,0,55,.02,.6,.4,,.7],[15,0,120,.005,,.01,,.95,-30,40],[.6,0,300,,,.15,2,1.2,-3,,,,,3.5],[.5,0,200,,.4,.8,1,.3,,,,,,,,.08],[1.5,,250,,,.3,1,.2,,.8,,,,1.8],[.5,0,150,,.3,.9,3,.5,,,,,,,,.1]];function di(t,i,s=null){t=t.currentScale;let e=Math.floor(i.float(t.length,0));return null!=s&&i.float()<.7&&-1!==(s=t.indexOf((s-36)%12))&&(i=i.float()<.5?-1:1,e=Math.max(0,Math.min(t.length-1,s+i))),36+t[e]}let gi=new class{constructor(){this.Ua=[[]],this.ia=[],this.Xa=0,this.va=-1,this.startTime=0,this.Ba=8,this.currentScale=ui.gb}};class fi extends j{constructor(t){super(),Object.assign(this,t),this.startTime=Rt,this.s=[],this.w=1,this.ub=~~(t.X/t.wa*100)}update(){6<Rt-this.startTime&&!this.complete&&(this.Jb(),P(this))}m(){var t=Rt-this.startTime,i=(this.w+=5*t,J(this.g,c(this.w).scale(2),b,t/2),J(this.g,c(this.w),this.complete?w:M,t),t=>{this.s.length<t&&(this.s.push(t),this.o.ua.play())}),s=W.x/2;.5<t&&(i(1),ni(this.complete?"VICTORY!":"LEVEL COMPLETE",s,50,2.7)),2<t&&(i(2),ni(`TIME:  ${~~this.t}s`,s,200,2.25)),3<t&&(i(3),ni(`LOOT:  ${this.ub}%`,s,250,2.25)),4<t&&(i(4),ni("MOVES: "+this.Y,s,300,2.25)),6<t&&this.complete&&(ni("SCORE: "+this.Db,s,375,3),ni("DEATHS: "+this.mb,s,425,2.25))}}document.title=Xt.title,E=.5;let yi="1111111111111111-1LLLLLL1LLLLLLL1-1000000000000001-1000100001000001-100010P001000001-1000100001000001-10001000E1000001-1000111111000001-1000000000000001-1000000000000001-1000000000000001-1111000000000001-1111000000000111-1111000000000111-11110D0000000111-1000000000000111-1000000000000001-1000000000000001-1K00000000100001-1111111111111111 11111111111111111111-1000000000P000000001-10000000000000000001-100000000100000000L1-100000000111000000L1-10L000000100000000L1-111000000100000000L1-100000011100000000L1-100000000100000000L1-10000000011100000001-10000000010000000001-100D0000000000000001-10000000000000D00001-10L01000000000000001-11111111111100000001-1K000000100000000001-1000000000000LLLLL01-10000000000000000011-10000000001111111111-100D0000000010000001-10000000000000000001-11111110000000000001-10010000000000000001-10000000000000000011-10000000000000000001-10111100000000000001-10000000000E10000101-11111111111111111111 1111111111111111111111111111111111111111-10P0000000110001L00000LLLL000000000000E1-100000000010C000L00000000010000000000001-1000000000100000L00000000010000000000001-100000D000100000L00000000110000000000001-11111111SS100010L00000000010000000000001-1000000000111111L00000000011000011000001-1000000000000S01L00000000010000011100001-1000000000000S01111111SS1110000011000001-1000000000000S00001000000000000011000001-1000000000000S0000000000000000001100D001-1010000000000S00000000000000000011000001-1111111111111110000000000000000011000011-1LLL111000000C10000000000000000011000001-1L00000000000000000000000000000111000001-1L00000000000010000000100000000011000011-1L0K000000011111111111111000000000000001-1L00000000000000100000000000000000000001-1LLLLLLLLLLL0000000000000000000000000001-1111111111111111111111111111111111111111 11111111111111111111-1000001L000K10000001-10000010000010000001-100000100C0010000001-1L000010000010000001-10000011000010000001-1000000S000010000001-1L00000S000000000001-10000001000000000001-10000111111111000001-10000011000010000001-1L0000100P0E10000001-10000010000010000001-10000010000010000001-10000010000000000001-1L000010000000000011-10000010000000000011-10000000000000000001-1L0000L000L000L00001-11111111111111111111 111111111111111111111111111111-1P0001000000001000000000000001-100001000000000000000000000001-100000000000000000000000000001-100000000000000000000000000001-111111000000000000000000000011-1E0000000000000L00000000000001-100000000000000L00000000000001-1SSSSS000000000L00000000000001-100000000000000L00000000000001-1L0000000000000L00000000000001-1L0000000000000L00000000000001-1L0000000000000L00000000000001-100000000000000L00000000000001-100100000000000L00000000000001-100100000000000L00000000000001-100100000000000L00000000000001-100100000000000L00000000000001-101100000000000L00000000000001-10L100000000000L00000000000001-10L100000000000L00000000000001-10L100000000000L00000000000001-10L100000000000L00000000000001-100100000000000L00000000000001-110100000000000L00000000000001-1L0100000000000L00000000000001-1L0100000000000L00000000000001-1L0100000000000L00000000000001-100100000000000L00001111111111-100100000000000L00001000000001-101100010000000000001000000001-100100010000000000000000000001-100100010000000100000000000001-100100010000000000001000000001-100111110000000000001000000001-10000010000000000C001000000001-100000100000000000001000000001-1C0000100000000000001000000001-100010100000000000001000000001-1000101000000000000010D0000001-100010100000000000001000000001-100010100000000000001111110001-111110100000000000000000010001-1LLLLL100000000000000000010001-1L0D00100000000000000000010001-1L000K100000000000000000010001-1L0000111111111111111111110001-1L00000001000S0000000000000001-1L00000000000S0000100000000001-111111111111111111111111111111 111111111111111111111111111111-1E00001LLLLL00P00LLLLL00000001-100000100000011100000010000001-100000100000000000000000000001-1000D010000000C000000000000001-100000100000000000000110000001-100000100000000000000010000001-100000000000000000000010D00001-1SSS00000000000000000010000001-101111111111111111111111111101-10000LLLLLLLLLLLLLLLLLL01000L1-1000000000000000000000000000L1-1100000000000000000000000100L1-100010000000000000000000010001-100000000000000000000000010001-100000011111111111000000010011-100000010000000000000000010001-100000010000000000000000110C01-100000010000000000000000010001-10000001000000D000100000011001-100000010000000000000000010001-100000010000000000000000010011-100000010000000000000000010C01-10000001000D000000100000010001-100000010000000000000000010011-100000010000000000000000010001-100000011111111110000000010001-100000000000000000000000010001-1000000000000010000000000000K1-111111111111111111111111111111 1111111111-10LLLLLL01-1000000001-1K00000001-1000000001-1000000011-1000000001-1100000001-1000000001-1000000001-1000000011-10D0000001-1000000001-1100000001-1000000001-1000000011-1100000001-1000000001-1001111001-1000000001-100L000001-100L000001-1C0L0000C1-100L000001-100L000001-101L110001-1010000001-10010P0101-1001000101-1010000001-1010110011-1000000001-1000000001-1C000000C1-1000000001-1000000001-1000000001-1000000001-1000000001-100L000001-100L000001-100L000011-100L000001-100L000001-110L000001-100L000001-100L000001-100L000001-1LLLLLLLE1-1111111111".split(" "),xi=(document.head.innerHTML+="<style>body{transition:opacity.5s}body.out{opacity:0}body.in{opacity:1}</style>",{});for(let t in Xt.o)xi[t]=new rt(Xt.o[t]);let pi,mi,Li,vi=0,wi=parseInt(location.search.split("=").pop(),10)-1||0,bi=0,Mi=0,Si=0,Ai=!1,zi=(t=10)=>vi+=t,Di=t=>{Si=t,bi+=1},Ci=()=>{var t=(wi+=1)>=yi.length,i=pi.Y,s=pi.X,e=pi.g,h=pi.wa,a=(Ht.forEach(t=>P(t)),Rt-Li);Li=Rt,new fi({g:e,cb:zi,complete:t,Db:vi,level:wi,Jb:Ei,o:xi,Y:i,X:s,wa:h,t:a,mb:bi})},Ei=()=>{document.body.className="out",setTimeout(()=>{Ht.forEach(t=>P(t)),document.body.className="in",Si=0,Ai=!0,pi=function(){var t=yi[wi],s={Rb:Di,cb:zi,wb:Ci,o:xi,level:wi},e=c((t=t.split("-"))[0].length,t.length),h=c(),a=new Ct(c(),e.scale(.5),new N(c(),c(8)),c(2)),r=new Ct(c(),e,new N(c(),c(8)));wt=e;for(var o=(vt=[]).length=i(wt.x*wt.y);o--;)vt[o]=0;s.ka=e,o=PAL["GBSRBGRB"[s.level]];var l=new At(10,0,!1,o[0]),u=new At(3<s.level?9:8,0,!1,o[1]);let d,g=0;for(h.x=e.x;h.x--;)for(h.y=e.y;h.y--;){var f=t[h.y][h.x];a.setData(h,new At(10,0,!1,o[2].scale(1,n(.75,1)))),"1"!==f?"K"===f?new _t(h):"D"===f?new si(h,s.o):"L"===f?(new ai(h),g++):"P"===f?d=new Qt(h,s):"E"===f?new ti(h):"S"===f?new ei(h):"C"===f&&new hi(h):(r.setData(h,l),y(h,wt)&&(vt[(0|h.y)*wt.x+h.x|0]=1),t[h.y-1]&&"1"!=t[h.y-1][h.x]&&r.setData(h.add(c(0,-1)),u))}return Dt(a),Dt(r),d.wa=g,d}(),Li=Rt,0===wi?(new ri(at?"Swipe to move":"ARROWS TO MOVE"),setTimeout(()=>new ri("Find the Key"),2500),setTimeout(()=>new ri("Grab loot"),4e3),setTimeout(()=>new ri("Escape"),6e3)):new ri("Level "+wi,3),function(t=1){let i=gi,s=new u(376176+9999*t);i.Ba=s.float(...oi),t=(t=Object.keys(ui))[Math.floor(s.float(t.length,0))],i.currentScale=ui[t],i.ia=ci.map(t=>t.map(t=>"number"==typeof t?t*s.float(.8,1.2):t));for(var e=function(t){var i=[[0,1,2,1],[0,2,1,0],[2,1,0,1]];return i[Math.floor(t.float(i.length,0))].flatMap(t=>li[t])}(s),h=(t=[3,0],null),a=function(t){return Array.from({length:16},(i,s)=>(i=s%2?.8:.4,t.float()<i?1:0))}(s),n=0;n<16;n++)a[n]?(h=di(i,s,h),t.push(h)):t.push(void 0);for(a=function(t,i){var s=[0,-.1];let e=12;for(let n=0;n<4;n++){var h=i[4*n]||0,a=12+h;for(let r=0;r<4;r++)e=0===r?a:e+((i[4*(n+1)%i.length]||h)>h?1:-1)*(t.float()<.6?1:2),s.push(e)}return s}(s,e),n=[5,0],h=0;h<16;h++)h%4!=0&&s.float()<.3?n.push(24+(e[4*Math.floor(h/4)]||0)):n.push(void 0);e=function(t){var i=[4,.2],s=[1,0],e=[2,.1];for(let n=0;n<32;n++){var h=n%3==2,a=(i.push(n%2==0||h&&t.float()<.7?60:void 0),h=n%8==0?.9:.1,s.push(t.float()<h?36:void 0),h=n%8==4,12<n%16&&t.float()<.3);e.push(h||a?40:void 0)}return[i,s,e]}(s),i.Ua=[[t,a,n,...e]],i.Xa=Math.max(t.length,a.length)-2}(wi),gi.startTime=Rt,gi.va=-1,gi.ia=gi.ia.map(t=>new rt(t))},500)};((t,i,s,e,h=[],a=document.body)=>{function n(h=0){var a,o=h-Nt;for(Nt=h,Gt+=o,Gt=Math.min(Gt,50),r(),h=0,Gt<0&&-9<Gt&&(h=Gt,Gt=0);0<=Gt;Gt-=1e3/60)Rt=Bt++/60,at||document.hasFocus()||(_=[[]]),et(),t(),Ut.forEach(t=>t()),Jt(),i(),tt();for(a of(Gt+=h,W=c(K.width,K.height),H.imageSmoothingEnabled=I.imageSmoothingEnabled=!1,Pt(),s(),Ht.sort((t,i)=>t.$-i.$),Ht))a.J||a.m();e(),Vt.forEach(t=>t()),Kt(),requestAnimationFrame(n)}function r(){var t,i;D.x?(K.width=D.x,K.height=D.y,t=innerWidth/innerHeight,i=K.width/K.height,(lt||K).style.width=K.style.width=F.style.width=t<i?"100%":"",(lt||K).style.height=K.style.height=F.style.height=t<i?"":"100%"):(K.width=Math.min(innerWidth,z.x),K.height=Math.min(innerHeight,z.y)),F.width=K.width,F.height=K.height,W=c(K.width,K.height)}a.style.cssText="margin:0;overflow:hidden;width:100vw;height:100vh;display:flex;align-items:center;justify-content:center;background:#000;image-rendering:pixelated;user-select:none;-webkit-user-select:none;touch-action:none;-webkit-touch-callout:none",a.appendChild(K=document.createElement("canvas")),I=K.getContext("2d"),function(){function t(t){return"KeyW"==t?"ArrowUp":"KeyS"==t?"ArrowDown":"KeyA"==t?"ArrowLeft":"KeyD"==t?"ArrowRight":t}onkeydown=i=>{i.repeat||(q=!1,_[0][i.code]=3,_[0][t(i.code)]=3)},onkeyup=i=>{_[0][i.code]=4,_[0][t(i.code)]=4},onmousedown=t=>{nt&&"running"!=nt.state&&nt.resume(),q=!1,_[0][t.button]=3,it(t),t.button&&t.preventDefault()},onmouseup=t=>_[0][t.button]=2&_[0][t.button]|4,onmousemove=t=>it(t),onwheel=t=>t.ctrlKey?0:Math.sign(t.deltaY),oncontextmenu=()=>!1,onblur=()=>{_=[[]]},at&&function(){function t(t){nt&&"running"!=nt.state&&nt.resume();var s=t.touches.length;return s?(it(c(t.touches[0].clientX,t.touches[0].clientY)),i?q=!1:_[0][0]=3):i&&(_[0][0]=2&_[0][0]|4),i=s,document.hasFocus()&&t.preventDefault(),!0}let i;document.addEventListener("touchstart",i=>t(i),{passive:!1}),document.addEventListener("touchmove",i=>t(i),{passive:!1}),document.addEventListener("touchend",i=>t(i),{passive:!1}),onmousedown=onmouseup=()=>0}()}(),(ht=nt.createGain()).connect(nt.destination),ht.gain.value=.3,function(){lt=document.createElement("canvas"),ut=lt.getContext("webgl2",{antialias:!0}),K.parentElement.appendChild(lt);var t=ut.createProgram();ut.attachShader(t,Ot("#version 300 es\nprecision highp float;uniform mat4 m;in vec2 g;in vec4 p,u,c,a;in float r;out vec2 v;out vec4 d,e;void main(){vec2 s=(g-.5)*p.zw;gl_Position=m*vec4(p.xy+s*cos(r)-vec2(-s.y,s)*sin(r),1,1);v=mix(u.xw,u.zy,g);d=c;e=a;}",35633)),ut.attachShader(t,Ot("#version 300 es\nprecision highp float;uniform sampler2D s;in vec2 v;in vec4 d,e;out vec4 c;void main(){c=texture(s,v)*d+e;}",35632)),ut.linkProgram(t),ct=t,t=new ArrayBuffer(44e4),yt=new Float32Array(t),xt=new Uint32Array(t),gt=ut.createBuffer(),ft=ut.createBuffer(),t=new Float32Array([pt=0,0,1,0,0,1,1,1]),ut.bindBuffer(34962,ft),ut.bufferData(34962,t,35044)}(),a.appendChild(F=document.createElement("canvas")),H=F.getContext("2d"),K.style.cssText=F.style.cssText="position:absolute",lt&&(lt.style.cssText="position:absolute"),r(),a=h.map((t,i)=>new Promise(s=>{let e=new Image;e.crossOrigin="anonymous",e.onerror=e.onload=()=>{B[i]=new G(e),s()},e.src=t})),h.length||a.push(new Promise(t=>{B[0]=new G(new Image),t()})),Promise.all(a).then(function(){new Promise(t=>t((()=>{(window.Ob=Xt).size=c(Xt.width/Xt.ab,Xt.height/Xt.ab),Xt.ca=c(Xt.size.x/2,Xt.size.y/2),Xt.Ga=F,document.body.style.backgroundColor="#333",function(){let t=document.createElement("canvas"),i=(t.width=8,t.height=8,t.getContext("2d")),s=new Image;s.onload=()=>{i.drawImage(s,0,0,8,8,0,0,8,8);var e=document.createElement("link");e.rel="icon",e.href=t.toDataURL(),document.head.appendChild(e)},s.src="t.gif"}();var t=c(Xt.width,Xt.height);z=D=t,S=Xt.ca,A=20,T=.7})())).then(n)})})(function(){if(mi=Z("ArrowUp")||Z(0),Z("KeyM")&&(Mi=!Mi),!Ai&&mi&&(Ai=!0,Ei()),!Mi&&pi&&!pi.H&&!pi.u){var t=pi,i=Rt-gi.startTime,s=Math.floor(i*gi.Ba)%gi.Xa;if(!(s%2==1&&i*gi.Ba%1<.67-.5)&&s!==gi.va)for(var e of(gi.va=s,t?.Qb?.(s),gi.Ua[0]))t=gi.ia[e[0]],i=e[1],null!=(e=e[s%(e.length-2)+2])&&t.play(c(S.x+i,S.y),.25,2**((e-12)/12),0)}pi?.u&&!Si&&(Si=Rt,bi+=1),Si&&mi&&Rt>Si+1&&Ei()},function(){},function(){var t,i=0<Math.sin(5*Rt),s=Xt.Ga.width/2,e=Xt.Ga.height,h=new m(0,.2,.3);Ai||(t=8*Math.sin(.2*Rt),J(c(Xt.ca),c(20,30),h,0,!1),$(Xt.ca.add(c(t,0)),4,L),V(c(Xt.ca).add(c(0,-3)),c(4),R(2,8),h),ni(Xt.title,s,.15*e,3),i&&ni(at?"TAP ME":"PRESS ↑ or W",s,e-50,2,M)),!pi||pi.H||pi.u||((e=30-~~(Rt-Li))<0&&(Si||(pi.u="time up",Si=void 0,bi+=1),e=0),ni(e,2*s-50,30,3,"#fff")),Si&&i&&ni(pi.u,F.width/2,F.height/2,3,L)},function(){Si&&J(S,c(24),new m(1,0,0,e(-.5*(Si-Rt),0,.5)))},Xt.Mb),SHADOW=new m(0,0,0,.2),PAL={R:[new m(.9,.6,.2),new m(.9,.4,.1),new m(.4,.2,.1)],G:[new m(.3,.7,.2),new m(.2,.5,.1),new m(.2,.3,.2)],B:[new m(.7,.86,.9),new m(.2,.6,.9),new m(0,.3,.5)],S:[new m(.9,.9,.8),new m(.6,.6,.5),new m(.3,.3,.2)]}</script>