<!doctype html><meta content="width=device-width,initial-scale=1" name=viewport><title>Star Jaws</title><body><style>body{overflow:hidden;background:#0f0f0f;text-align:center;padding:0;margin:0;width:100%;height:100%}.hide{position:absolute!important;display:block!important;overflow:hidden!important;clip:rect(0,0,0,0)!important;padding:0!important;margin:-1px!important;height:1px!important;width:1px!important;top:0!important;left:-999em!important}#canvas-wrapper{position:fixed;overflow:hidden;margin:-300px auto 0;width:800px;height:600px;filter:sepia(100%);top:50%;left:0;right:0}#canvas{position:absolute;background:#000;width:100%;top:0;left:0}#canvas table{background:#000;border-collapse:collapse;color:#fff;font:bold 1em/1.2em Helvetica;letter-spacing:1px;margin:16px auto}#canvas caption,#canvas td,#canvas th{background:#000;border:1px solid #fff;padding:1em}#canvas td{padding:.5em 1em}</style><noscript>Please enable JavaScript to play this game</noscript><main id=canvas-wrapper><canvas height=1200 id=canvas width=1600><table><caption>Sorry, your browser does not meet the minimum requirements for this game<thead><tr><th>Browser<th>Oldest Supported Version<tbody><tr><td>Internet Explorer<td>9.0<tr><td>Firefox<td>3.6<tr><td>Chrome<td>4.0<tr><td>Safari<td>4.0<tr><td>Opera<td>10.1</table></canvas></main><script>!function(){var e=document.getElementById("canvas").getContext("2d");e.lineWidth=2,e.strokeStyle="#FFF",e.fillStyle="#FFF";const t=e.canvas.width,o=e.canvas.height,r=2*Math.PI;zzfxV=.1,zzfx=(e=1,t=.05,o=220,r=0,s=0,i=.1,n=0,a=1,l=0,f=0,c=0,p=0,h=0,m=0,u=0,d=0,w=0,v=1,x=0,g=0)=>{let A,b,T=Math,k=44100,S=2*T.PI,y=l*=500*S/k/k,M=o*=(1-t+2*t*T.random(t=[]))*S/k,E=0,F=0,R=0,W=1,H=0,P=0,I=0;for(f*=500*S/k**3,u*=S/k,c*=S/k,p*=k,h=k*h|0,b=(r=k*r+9)+(x*=k)+(s*=k)+(i*=k)+(w*=k)|0;R<b;t[R++]=I)++P%(100*d|0)||(I=n?1<n?2<n?3<n?T.sin((E%S)**3):T.max(T.min(T.tan(E),1),-1):1-(2*E/S%2+2)%2:1-4*T.abs(T.round(E/S)-E/S):T.sin(E),I=(h?1-g+g*T.sin(S*R/h):1)*(0<I?1:-1)*T.abs(I)**a*e*.1*(R<r?R/r:R<r+x?1-(R-r)/x*(1-v):R<r+x+s?v:R<b-w?(b-R-w)/i*v:0),I=w?I/2+(w>R?0:(R<b-w?1:(b-R)/w)*t[R-w|0]/2):I),A=(o+=l+=f)*T.cos(u*F++),E+=A-A*m*(1-1e9*(T.sin(R)+1)%2),W&&++W>p&&(o+=c,M+=c,W=0),!h||++H%h||(o=M,l=y,W=W||1);return(e=zzfxX.createBuffer(1,b,k)).getChannelData(0).set(t),(o=zzfxX.createBufferSource()).buffer=e,o.connect(zzfxX.destination),o.start(),o},zzfxX=new(window.AudioContext||webkitAudioContext);const s=.2*o,i=.8*o,n=o/2,a=1280,l=19200,f=new Int32Array([-10,-10,20,5,-10,20,2,5,-10,-10]);function c(e,t,o){for(var r=Math.sin(o),s=Math.cos(o),i=e.length,n=new Float32Array(i),a=0;a<i;a+=2)n[a]=t[0]+s*e[a]+r*e[a+1],n[a+1]=t[1]+r*e[a]-s*e[a+1];return n}var p=!1,h={showHelp:!1,highscore:0};function m(){try{window.localStorage.setItem("space-deliver",JSON.stringify(h))}catch(e){console.error("Error saving paper boy data: ",e)}}!function(){try{var e=window.localStorage.getItem("space-deliver");e?((h=JSON.parse(e)).showHelp?p=h.showHelp:h.showHelp=!1,h.highscore||(h.highscore=0),m()):m()}catch(e){console.error("Error loading paper boy data: ",e)}}();var u="title",d=!1,w=0,v=[32,1*n,0,0],x=5,g=a,A=!1,b=[0,0],T={left:!1,right:!1,up:!1,down:!1,fire:!1,paperUp:!1,paperDown:!1},k={lives:0,papers:0,enemies:0,time:0,total:0},S={lives:0,papers:0,enemies:0,time:0,total:0};const y=.75*t;var M=[t+128,o/2+0,-1,0],E=1600,F=20,R=320,W=5120,H="entrance",P=!1;function I(){return String.fromCharCode(65+(25*Math.random()>>0))}var z=function(){for(var e=new Array(44),t=0;t<44;t++)e[t]=I();return e.join("")}();function X(e){return"firing laser"===H&&e[0]<M[0]-128&&e[1]>M[1]-10&&e[1]<M[1]+10}function D(){e.font="128px monospace",e.fillText("🦈",M[0],M[1]),e.closePath(),e.stroke(),e.font="40px monospace";var t=0;switch(H){case"charging laser":t=W>60?16*(1-(W-60)/300):16;break;case"firing laser":t=16,e.font="40px monospace",e.strokeRect(0,o/2-12,M[1]-128,24),e.fillText(z,0,o/2+12),fe%4<2&&(z=z.slice(1)+I());break;case"fired laser":t=W>60?(W-60)/300*16:0}t&&(e.beginPath(),e.arc(M[0]-136,M[1],t,0,r),e.stroke(),e.closePath())}function _(e,t){return this.pos=[e,t],this.char=I(),this.alive=!0,this}_.MAX=256,_.SIZE=11,_.prototype.collidesWithPoint=function(e){return e[0]>this.pos[0]-_.SIZE&&e[0]<this.pos[0]+_.SIZE&&e[1]>this.pos[1]-_.SIZE&&e[1]<this.pos[1]+_.SIZE},_.prototype.render=function(){e.fillText(this.char,this.pos[0],this.pos[1]+10)};var V=new Array(_.MAX),L=0,Y=0,q=!1,B=0;function O(){return-1}var C=new Int32Array(64).map(O),U=new Float32Array(512).map(O),Z=new Float32Array(2048).map(O),J=16,j=new Float32Array(18).map(O);function K(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}function N(e,t,o,r){return e[0]>t-r&&e[0]<t+r&&e[1]>o-r&&e[1]<o+r}function G(e,t){return e.l<t.r&&e.r>t.l&&e.t<t.b&&e.b>t.t}function Q(e,t){return this.pos=[e,t?0:o-Q.H],this}Q.W=96,Q.H=56,Q.areAllServed=function(){for(var e=0;e<8;e++)if(!$[e].served)return!1;return!0},Q.prototype.served=!1,Q.prototype.show=!0,Q.prototype.isVisible=function(){return this.show&&w>this.pos[0]-t&&w<this.pos[0]+Q.W},Q.prototype.render=function(t){var o="#"+(t+1).toString(),r=this.pos[0]-w,s=this.pos[1];e.beginPath(),e.moveTo(r,s+Q.H/4),e.lineTo(r,s+Q.H),e.lineTo(r+Q.W,s+Q.H),e.lineTo(r+Q.W,s+Q.H/4),e.moveTo(r,s+Q.H/4),e.lineTo(r+Q.W,s+Q.H/4),e.stroke(),e.closePath(),this.served&&(e.beginPath(),e.moveTo(r+.3*Q.W,s+.55*Q.H),e.lineTo(r+Q.W/2,s+.75*Q.H),e.lineTo(r+.7*Q.W,s+.3*Q.H),e.stroke(),e.closePath()),e.fillText(o,r-96,s+32)};var $=[new Q(l/9,!0),new Q(38400/9,!1),new Q(6400,!0),new Q(76800/9,!1),new Q(96e3/9,!0),new Q(12800,!1),new Q(134400/9,!1),new Q(153600/9,!0)];function ee(e,t){return this.pos=[e,t],this.dir=2*(2*Math.random()>>0)-1,this}ee.MAX=12,ee.W=24,ee.H=40,ee.FRAMES=320,ee.ORBIT_DIST=256,ee.ORBIT_DIST_SQ=ee.ORBIT_DIST*ee.ORBIT_DIST,ee.FIRE_DELAY=600,ee.prototype.frames=ee.FRAMES,ee.prototype.countdown=ee.FIRE_DELAY,ee.prototype.isVisible=function(){return this.pos[0]-ee.W/2<t},ee.prototype.collidesWithPoint=function(e){return e[0]>this.pos[0]-ee.W/2&&e[0]<this.pos[0]+ee.W/2&&e[1]>this.pos[1]-ee.H/2&&e[1]<this.pos[1]+ee.H/2},ee.prototype.collidesWithRect=function(e){return this.pos[0]-ee.W/2<e.r&&this.pos[0]+ee.W/2>e.l&&this.pos[1]-ee.H/2<e.b&&this.pos[1]+ee.H/2>e.t},ee.prototype.respawn=function(){this.pos[0]=ee.MAX*l/(ee.MAX+1),this.pos[1]=Math.random()*(i-s-ee.H)+s,this.frames=ee.FRAMES,this.countdown=ee.FIRE_DELAY,this.dir=2*(2*Math.random()>>0)-1},ee.prototype.render=function(){var t=this.pos[0],o=this.pos[1];e.font="64px monospace",e.fillText("🛸",t,o)};var te=[new ee(t/2,o/2),new ee(2*t,o/2),new ee(3*t,o/2),new ee(4*t,o/2),new ee(5*t,o/2),new ee(6*t,o/2),new ee(7*t,o/2),new ee(8*t,o/2),new ee(9*t,o/2),new ee(10*t,o/2),new ee(11*t,o/2),new ee(12*t,o/2)];function oe(e,o){this.pos=[e,o];var r=Math.random()*(Math.PI/4)+.75*Math.PI;return this.vel=[2*Math.cos(r),2*Math.sin(r)],this.xTarget=t/2+Math.random()*(t/4),this}oe.MAX=6,oe.W=32,oe.H=40,oe.FRAMES=320,oe.FIRE_DELAY=480,oe.prototype.frames=oe.FRAMES,oe.prototype.countdown=oe.FIRE_DELAY,oe.prototype.isVisible=function(){return this.pos[0]-oe.W/2<t},oe.prototype.collidesWithPoint=function(e){return e[0]>this.pos[0]-oe.W/2&&e[0]<this.pos[0]+oe.W/2&&e[1]>this.pos[1]-oe.H/2&&e[1]<this.pos[1]+oe.H/2},oe.prototype.collidesWithRect=function(e){return this.pos[0]-oe.W/2<e.r&&this.pos[0]+oe.W/2>e.l&&this.pos[1]-oe.H/2<e.b&&this.pos[1]+oe.H/2>e.t},oe.prototype.respawn=function(){this.pos[0]=oe.MAX*l/(oe.MAX+1),this.pos[1]=Math.random()*(i-s-oe.H)+s,this.frame=oe.FRAMES,this.countdown=oe.FIRE_DELAY},oe.prototype.render=function(){var t=this.pos[0],o=this.pos[1];e.font="42px monospace",e.fillText("👾",t,o)};var re=[new oe(l/7,.25*o),new oe(38400/7,.75*o),new oe(57600/7,.25*o),new oe(76800/7,.75*o),new oe(96e3/7,.25*o),new oe(115200/7,.75*o)];function se(){b[0]=0,T.left&&b[0]--,T.right&&b[0]++,b[1]=0,T.up&&b[1]--,T.down&&b[1]++}document.addEventListener("keydown",(function(t){if(t.altKey||t.ctrlKey||t.metaKey||t.preventDefault(),!t.repeat){switch(t.key){case"ArrowLeft":T.left=!0;break;case"ArrowRight":T.right=!0;break;case"ArrowUp":T.up=!0;break;case"ArrowDown":T.down=!0;break;case"w":case"W":T.paperUp=!0;break;case"s":case"S":T.paperDown=!0;break;case"f":case"F":T.fullScreen=!0;break;case" ":"title"===u?(u="game",e.font="32px monospace",w=0,p=!1):T.fire=!0;break;case"h":case"H":"title"===u&&(p=!p);break;case"p":case"P":d=!d}se()}})),document.addEventListener("keyup",(function(e){switch(e.key){case"ArrowLeft":T.left=!1;break;case"ArrowRight":T.right=!1;break;case"ArrowUp":T.up=!1;break;case"ArrowDown":T.down=!1;break;case" ":T.fire=!1;break;case"w":case"W":T.paperUp=!1;break;case"s":case"S":T.paperDown=!1;break;case"f":case"F":T.fullScreen=!1}se()}));var ie=5,ne=0,ae=18e4,le=!1,fe=0;window.requestAnimationFrame((function I(z){e.clearRect(0,0,t,o),e.beginPath(),e.moveTo(0,s-50),e.lineTo(t,s-50),e.moveTo(0,i+50),e.lineTo(t,i+50),e.stroke(),e.strokeStyle="grey";for(var O=1-w%96;O<t;O+=96)e.fillText("_",O+40,o-300),e.fillText("_",O+40,300);switch(e.stroke(),e.closePath(),e.strokeStyle="white",ie+=z-ne,ne=z,u){case"title":for(;ie>=5;)(w+=2)>l&&(w-=l),ie-=5;e.font="128px Georgia",e.fillText("Star Jaws",64,s+120),e.font="64px monospace",e.fillText("Space shooter",64,s+208),e.font="40px monospace",p?(e.fillText("Star Jaws, a horrifying space shark has risen from the dead",40,o/2+80),e.fillText("Warn the local planets about the horror, thus save them from the terror",40,o/2+128),e.fillText("You can not let man-kind down.The people are counting on you. ",40,o/2+176),e.fillText("You must warn all of the peoplebut if they don't listen,",40,o/2+224),e.fillText("I'm afraid you will have to fight star jaws off.",40,o/2+272),e.fillText("Arrow keys to move; W and S to launch help signal up and down",40,i),e.fillText("Spacebar to fire lasers at enemies; p to pause / unpause;",40,i+96),e.fillText("f for fullscreen; Avoid hitting enemies and their projectiles",40,i+144),e.fillText("Serve one signal to every compartment on the solarsystem to win!",40,i+192)):(e.fillText('Press "h" for help',40,o/2+80),e.fillText("Press [space] to start",40,o/2+128));break;case"game":if(d){for(;ie>=5;)ie-=5;e.fillStyle="#000",e.fillRect(t/2-96,o/2-40,192,80),e.strokeRect(t/2-96,o/2-40,192,80),e.fillStyle="#FFF",e.textAlign="center",e.fillText("paused",t/2,o/2+8),e.textAlign="left"}else{for(;ie>=5;){P||(ae-=5)<=0&&(zzfx(...[3.4,,623,.01,.14,.33,1,3.48,.6,.8,,,,.2,,.6,.23,.62]),le=!0),(w+=2)>l&&(w-=l);var se=!A&&(g===a||g<640);if(se&&(0===b[0]?v[2]*=.9:(v[2]+=b[0],v[2]>4&&(v[2]=4),v[2]<-4&&(v[2]=-4)),0===b[1]?v[3]*=.9:(v[3]+=b[1],v[3]>4&&(v[3]=4),v[3]<-4&&(v[3]=-4)),v[0]+=v[2],v[0]>t?v[0]=t:v[0]<0&&(v[0]=0),v[1]+=v[3],v[1]>i?v[1]=i:v[1]<s&&(v[1]=s)),!A&&g<a){var ce=g>640;g-=5,ce&&g<640&&(x>=0?(v[0]=32,v[1]=n):(zzfx(...[3.4,,623,.01,.14,.33,1,3.48,.6,.8,,,,.2,,.6,.23,.62]),A=!0)),g<0&&(g=a)}for(var pe=0,he=0,me=0,ue=0,de=0;de<ee.MAX;de++)if(te[de].frames===ee.FRAMES){if(le)te[de].isVisible()&&(te[de].pos[0]++,te[de].pos[1]+=te[de].dir);else{pe=K(te[de].pos,v);var we=v[0]-te[de].pos[0],ve=v[1]-te[de].pos[1];he=Math.atan2(ve,we);var xe=Math.sin(he),ge=Math.cos(he);if(pe>ee.ORBIT_DIST_SQ?(me=1.5*ge,ue=1.5*xe):1===te[de].dir?(me=4*xe/2,ue=4*-ge/2):(me=4*-xe/2,ue=4*ge/2),te[de].pos[0]+=me,te[de].pos[1]+=ue,te[de].pos[1]<s+ee.H/2?te[de].pos[1]=s+ee.H/2:te[de].pos[1]>i-ee.H/2&&(te[de].pos[1]=i-ee.H/2),te[de].countdown-=5,te[de].countdown<0&&(te[de].countdown=0),!le&&0===te[de].countdown&&te[de].pos[0]<t){for(var Ae=0;Ae<128;Ae++)if(-1===U[4*Ae]){U[4*Ae]=te[de].pos[0],U[4*Ae+1]=te[de].pos[1],U[4*Ae+2]=2*ge,U[4*Ae+3]=2*xe;break}te[de].countdown=ee.FIRE_DELAY}}g===a&&te[de].collidesWithPoint(v)&&(g--,x--)}else te[de].frames>0?(te[de].frames-=5,te[de].frames<0&&(te[de].frames=0)):P||te[de].respawn();for(de=0;de<oe.MAX;de++)if(re[de].frames===oe.FRAMES){if(le)re[de].isVisible()&&(re[de].vel[0]<=0&&(re[de].vel[0]=1,re[de].vel[1]=2*(Math.random()>>0)-1),re[de].pos[0]+=re[de].vel[0],re[de].pos[1]+=re[de].vel[1]);else if(re[de].pos[0]+=re[de].vel[0],re[de].pos[1]+=re[de].vel[1],re[de].pos[0]<re[de].xTarget&&(re[de].pos[0]=re[de].xTarget,re[de].vel[0]=0,re[de].vel[1]=2*(Math.random()>>0)-1),re[de].pos[1]<s+oe.H/2?(re[de].pos[1]=s+oe.H/2,re[de].vel[1]*=-1):re[de].pos[1]>i-oe.H/2&&(re[de].pos[1]=i-oe.H/2,re[de].vel[1]*=-1),0===re[de].vel[0]&&(re[de].countdown-=5,re[de].countdown<0&&(re[de].countdown=0),0===re[de].countdown)){for(var be=0,Te=0;Te<512;Te++)if(-1===Z[4*Te]){switch(me=0===be?-2:-1.8,be){case 0:ue=0;break;case 1:ue=-.8;break;case 2:ue=.8}if(Z[4*Te]=re[de].pos[0],Z[4*Te+1]=re[de].pos[1],Z[4*Te+2]=me,Z[4*Te+3]=ue,3==++be)break}re[de].countdown=oe.FIRE_DELAY}g===a&&re[de].collidesWithPoint(v)&&(g--,x--)}else re[de].frames>0?(re[de].frames-=5,re[de].frames<0&&(re[de].frames=0)):P||re[de].respawn();if(P){if(M[0]+=M[2],M[1]+=M[3],M[1]<s+144?(M[1]=s+144,M[3]*=-1):M[1]>i-144&&(M[1]=i-144,M[3]*=-1),g===a&&((ze=v)[0]>M[0]-128&&ze[0]<M[0]+128&&ze[1]>M[1]-128&&ze[1]<M[1]+128||X(v))&&(g--,x--),"entrance"===H)M[0]<y&&(M[0]=y,M[2]=0,M[3]=2*(Math.random()>>0)-1,H="letters");else if(W>0){if("letters"===(W-=5,H))if((R-=5)<=0){R+=320;var ke=-104;for(de=0;de<_.MAX;de++)if(!V[de]||!V[de].alive){if(V[de]=new _(M[0]-104,M[1]+ke),-104!==ke)break;ke=104}}}else switch(H){case"letters":(ve=M[1]-o/2)>-2&&ve<2&&(H="charge",M[3]=0,M[1]=o/2,W=240);break;case"charge":M[2]=-16,H="recoil";break;case"recoil":M[2]<0&&M[0]<160&&(M[2]=6),M[2]>0&&M[0]>=y&&(M[2]=0,M[0]=y,H="charging laser",W=360);break;case"charging laser":H="firing laser",W=1024;break;case"firing laser":H="fired laser",W=360;break;case"fired laser":H="letters",M[3]=2*(Math.random()>>0)-1,W=5120}for(de=0;de<_.MAX;de++)V[de]&&V[de].alive&&(V[de].pos[0]-=5,V[de].pos[0]<0?V[de].alive=!1:V[de].collidesWithPoint(v)&&(V[de].alive=!1,g--,x--))}if((L-=5)<0&&(L=0),(Y-=5)<0&&(Y=0),(B-=5)<0&&(B=0),se){if(0===L&&T.fire)for(de=0;de<32;de++)if(zzfx(...[16,,67,,,.07,3,1.62,,,,,.05,,-195,,.08,.15,.03,.84]),-1===C[2*de]){C[2*de]=v[0],C[2*de+1]=v[1],L=240;break}if(T.fullScreen&&0===B&&(B=480,0==q&&(document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.webkitRequestFullscreen?document.documentElement.webkitRequestFullscreen():document.documentElement.msRequestFullscreen&&document.documentElement.msRequestFullscreen()),1==q&&(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()),q=!q),J>0&&0===Y&&(T.paperUp||T.paperDown))for(de=0;de<6;de++)if(zzfx(...[1.01,,227,.04,,.02,1,.59,,,,,,,,,,.43]),-1===j[3*de]){j[3*de]=v[0],j[3*de+1]=v[1],j[3*de+2]=4*(T.paperDown?1.5:-1.5),Y=360,J--;break}}for(de=0;de<32;de++)if(-1!==C[2*de])if(C[2*de]+=8,C[2*de]>t)C[2*de]=-1;else{for(var Se={l:C[2*de]-2,r:C[2*de]+2,t:C[2*de+1]-2,b:C[2*de+1]+2},ye=0;ye<ee.MAX;ye++)if(te[ye].frames===ee.FRAMES&&te[ye].collidesWithRect(Se)){k.enemies++,te[ye].frames--,C[2*de]=-1;break}if(-1!==C[2*de])for(var Me=0;Me<oe.MAX;Me++)if(re[Me].frames===oe.FRAMES&&re[Me].collidesWithRect(Se)){k.enemies++,re[Me].frames--,C[2*de]=-1;break}P&&-1!==C[2*de]&&(Ie=Se).l>M[0]-128&&Ie.r<M[0]+128&&Ie.t>M[1]-128&&Ie.b<M[1]+128&&(F--,C[2*de]=-1,0===F&&(u="victory",k.lives=10*x,k.papers=5*J,k.time=.001*ae>>0,k.total=k.lives+k.enemies+k.papers+k.time,h.highscore<k.total&&(h.highscore=k.total,m())))}for(de=0;de<6;de++)if(-1!==j[3*de])if(j[3*de+1]+=j[3*de+2],j[3*de+1]<0||j[3*de+1]>o)j[3*de]=-1;else{var Ee={l:j[3*de],r:j[3*de]+6,t:j[3*de+1],b:j[3*de+1]+12};if(!P){for(var Fe=0;Fe<8;Fe++)if(w>$[Fe].pos[0]-t&&w<$[Fe].pos[0]+Q.W&&!$[Fe].served&&G(Ee,{l:$[Fe].pos[0]-w,r:$[Fe].pos[0]-w+Q.W,t:$[Fe].pos[1],b:$[Fe].pos[1]+Q.H})){if($[Fe].served=!0,j[3*de]=-1,Q.areAllServed()){for(P=!0,ye=0;ye<ee.MAX;ye++)te[ye].frames!==ee.FRAMES||te[ye].isVisible()||(te[ye].frames=0);for(Me=0;Me<oe.MAX;Me++)re[Me].frames!==oe.FRAMES||re[Me].isVisible()||(re[Me].frames=0)}break}if(P)for(Fe=0;Fe<8;Fe++)$[Fe].isVisible()||($[Fe].show=!1)}if(-1===j[3*de])continue;for(ye=0;ye<ee.MAX;ye++)te[ye].isVisible()&&te[ye].collidesWithRect(Ee)&&(k.enemies++,te[ye].frames--);for(Me=0;Me<oe.MAX;Me++)re[Me].isVisible()&&re[Me].collidesWithRect(Ee)&&(k.enemies++,re[Me].frames--)}for(de=0;de<128;de++)-1!==U[4*de]&&(U[4*de]+=U[4*de+2],U[4*de+1]+=U[4*de+3],U[4*de]<0||U[4*de]>t||U[4*de+1]<0||U[4*de+1]>o?U[4*de]=-1:g===a&&N(v,U[4*de],U[4*de+1],6)&&(U[4*de]=-1,g--,x--,zzfx(...[,,537,.02,.02,.22,1,1.59,-6.98,4.97])));for(de=0;de<512;de++)-1!==Z[4*de]&&(Z[4*de]+=Z[4*de+2],Z[4*de+1]+=Z[4*de+3],Z[4*de]<0||Z[4*de]>t||Z[4*de+1]<0||Z[4*de+1]>o?Z[4*de]=-1:g===a&&N(v,Z[4*de],Z[4*de+1],3)&&(Z[4*de]=-1,g--,x--,zzfx(...[,,537,.02,.02,.22,1,1.59,-6.98,4.97])));ie-=5}for(de=0;de<8;de++)$[de].isVisible()?$[de].render(de):P&&$[de].show&&($[de].show=!1);for(de=0;de<ee.MAX;de++)te[de].isVisible()&&(te[de].frames===ee.FRAMES?te[de].render():te[de].frames>0&&(e.beginPath(),e.arc(te[de].pos[0],te[de].pos[1],32*(ee.FRAMES-te[de].frames)/ee.FRAMES,0,r),e.stroke(),e.closePath()));for(de=0;de<oe.MAX;de++)re[de].isVisible()&&(re[de].frames===oe.FRAMES?re[de].render():re[de].frames>0&&(e.beginPath(),e.arc(re[de].pos[0]+16,re[de].pos[1]+16,32*(oe.FRAMES-re[de].frames)/oe.FRAMES,0,r),e.stroke(),e.closePath()));if(!A)if(g===a||g<640&&fe%16<8){he=.1*v[3];var Re=c(f,v,he);for(e.beginPath(),e.moveTo(Re[0],Re[1]),e.strokeStyle="seagreen",e.fillStyle="seagreen",de=2;de<Re.length;de+=2)e.lineTo(Re[de],Re[de+1]);e.fill(),e.closePath(),e.stroke(),e.strokeStyle="white",e.fillStyle="white"}else g>320&&(e.beginPath(),e.arc(v[0],v[1],32*(a-g)/a,0,r),e.stroke(),e.closePath());for(de=0;de<32;de++)-1!==C[2*de]&&e.strokeRect(C[2*de]-2,C[2*de+1]-2,4,4);for(de=0;de<6;de++)-1!==j[3*de]&&e.strokeRect(j[3*de],j[3*de+1],6,12);for(de=0;de<128;de++)-1!==U[4*de]&&e.strokeRect(U[4*de]-6,U[4*de+1]-6,12,12);for(de=0;de<512;de++)-1!==Z[4*de]&&e.strokeRect(Z[4*de]-3,Z[4*de+1]-3,6,6);M[0]-64<t&&D(),e.textAlign="center",V.forEach((function(e){e&&e.alive&&e.render()})),e.textAlign="left"}for(e.font="32px monospace",e.fillText("signals: "+J,32,32),O=t/4,ke=40,de=0;de<x;de++)e.fillText("❤️",O,ke),O+=40;if(ae>0){var We=(ae/6e4>>0).toString();We<10&&(We="0"+We);var He=((ae/1e3>>0)%60).toString();He<10&&(He="0"+He);var Pe=(ae%1e3).toString();Pe<10?Pe="00"+Pe:Pe<100&&(Pe="0"+Pe),e.fillText("Time remaining "+We+":"+He+";"+Pe,t-512,32)}else e.fillText("Time remaining 00:00;000",t-512,32);A?(e.font="96px monospace",e.textAlign="center",e.fillText("Game Over",t/2,o/2-16),e.font="32px monospace",e.fillText("No more lives!",t/2,o/2+32),e.textAlign="left"):le&&(e.font="96px monospace",e.textAlign="center",e.fillText("You ran out of time!",t/2,o/2),e.font="32px monospace",e.textAlign="left");break;case"victory":for(;ie>=5;)(w+=2)>l&&(w-=l),E>0&&(E-=5),v[0]<t+112&&(v[0]+=6),ie-=5;for(S.lives<k.lives?(S.lives++,S.lives>k.lives&&(S.lives=k.lives)):S.enemies<k.enemies?(S.enemies++,S.enemies>k.enemies&&(S.enemies=k.enemies)):S.papers<k.papers?(S.papers++,S.papers>k.papers&&(S.papers=k.papers)):S.time<k.time?(S.time+=16,S.time>k.time&&(S.time=k.time)):S.total<k.total&&(S.total+=24,S.total>k.total&&(S.total=k.total)),E>800&&D(),E>0&&(e.beginPath(),e.arc(M[0],M[1],128*(1-E/1600),0,r),e.stroke(),e.closePath()),e.beginPath(),Re=c(f,v,he),de=2;de<Re.length;de+=2)e.lineTo(Re[de],Re[de+1]);e.closePath(),e.stroke(),e.font="128px Shrikhand, monospace",e.textAlign="center",e.fillText("You win!",t/2,s+120),e.font="64px Audiowide, monospace",e.fillText("Well done for saving the world!",t/2,s+208),e.font="40px monospace",e.textAlign="left",e.fillText("Lives:",t/2-180,o/2+64),e.fillText("Enemies:",t/2-180,o/2+120),e.fillText("Signals:",t/2-180,o/2+176),e.fillText("Time:",t/2-180,o/2+232),e.fillText("Total:",t/2-180,o/2+302),e.textAlign="right",e.fillText(S.lives,t/2+180,o/2+64),e.fillText(S.enemies,t/2+180,o/2+120),e.fillText(S.papers,t/2+180,o/2+176),e.fillText(S.time,t/2+180,o/2+232),e.fillText(S.total,t/2+180,o/2+302);break;case"options":for(;ie>=5;)ie-=5}var Ie,ze;if(p||(e.font="32px monospace",e.fillText("High Score: "+h.highscore,32,o-32)),fe++,!Xe)var Xe=z;z-Xe<2e3&&window.requestAnimationFrame(I)}))}()</script>