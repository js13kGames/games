<!DOCTYPE html><meta charset=utf8><meta name=viewport content="width=device-width, user-scalable=no"><meta name=monetization content=$ilp.uphold.com/QgQz4P8FygUZ><title>ROAR</title><style>body,html{overflow:hidden;margin:0}canvas,main{position:absolute;width:100vw;height:100vh;user-select:none;font:italic 700 10vmin Arial;color:#fc0}[onclick]{cursor:pointer;padding:1vmin}img{display:none}</style><canvas></canvas><main></main><img src=data:image/webp;base64,UklGRkwAAABXRUJQVlA4TEAAAAAvB8ABEDUQZNv4S78aXwSaSFKj57ScCEos0IEHutSJjlgLKIEYrqWg1dyxV7QaCYUiYkg+7htJ/cOzlMYlTvQT id=fire><img src=data:image/webp;base64,UklGRlgAAABXRUJQVlA4TEsAAAAvD8ADAA5GbSNJYjNYluRiPbvntwRaUUogQISIUKyVQIB4EuJQq/5PwFntghZL9PqkIEGMxnygykb2FAptVDRJlNaWQxmGYVCG/wEA id=building1><img src=data:image/webp;base64,UklGRmoAAABXRUJQVlA4TF4AAAAvD8ADAA4HbSNJ0qJZLEfysH7VvcOhVEoRZNvMYxAjPusJsm3GNJAZnvX9n4D3tt66ygWWz98uihbioxVoES9FswJtD8bwKmMSik2emB65MiaMCcaWGj9zj0xlTBgD id=building2><img src="data:image/webp;base64,UklGRmwAAABXRUJQVlA4TF8AAAAvD8ADADUohCTJsTmKVz2zd8n3UWCHMNtoAvMf2ZncnzDbaADb6/wZT6H/Ctu2QdqO4ZDkA+0GIsJegama/67hoACIcDgv1isatfaPrJacMoKfc5S36HuGaG6ZYsX3NgA=" id=building3><img src="data:image/webp;base64,UklGRlQAAABXRUJQVlA4TEcAAAAvD8ADAIVCAEAQm1iSjPU/AbFgMn/RCPqFBCkmmey/wrZtGymr8xAiCZ+M/wWYCOPWWC0JP60KkbYZVxl8hNXWLNa4tr5vEwA=" id=building4><img src="data:image/webp;base64,UklGRjwAAABXRUJQVlA4TC8AAAAvB8ABAFUgaiQ1bhCONIzwg9bBhAgJCCfstlYXCBACxNly3f+IzQI+ABpOOTcAAAA=" id=police><img src="data:image/webp;base64,UklGRjwAAABXRUJQVlA4TDAAAAAvD8ADAIWato2gwit/CEek0/13u0AgSWJ/vDWEBAnJ777u/wQIF7j/8MZbp3njRRo=" id=missile><img src="data:image/webp;base64,UklGRiYAAABXRUJQVlA4TBkAAAAvB8ABAAVhtpE/xFj7uxxCRP8TQGYOARAAAA==" id=noise><img src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4TBgAAAAvD8ADEA8wPJM0K/Mf8Pj2f0T/433/KR4=" id=cage><script>!function(){function n(n,t){let i=n.createTexture();return n.bindTexture(3553,i),n.texImage2D(3553,0,6408,6408,5121,t),n.generateMipmap(3553),n.texParameteri(3553,10241,9986),n.texParameteri(3553,10240,9728),i}function t(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n}function i(n,t,i){return n[0]=t[0]+i[0],n[1]=t[1]+i[1],n[2]=t[2]+i[2],n}function e(n,t,i){return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],n}function o(n,t,i){return n[0]=t[0]*i,n[1]=t[1]*i,n[2]=t[2]*i,n}function l(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n}function r(n,t){let i=t[0],e=t[1],o=t[2],l=i*i+e*e+o*o;return l>0&&(l=1/Math.sqrt(l)),n[0]=t[0]*l,n[1]=t[1]*l,n[2]=t[2]*l,n}function a(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function s(n,t,i){let e=t[0],o=t[1],l=t[2],r=i[0],a=i[1],s=i[2];return n[0]=o*s-l*a,n[1]=l*r-e*s,n[2]=e*a-o*r,n}function u(n,t,i){let e=t[0],o=t[1],l=t[2],r=i[3]*e+i[7]*o+i[11]*l+i[15];return r=r||1,n[0]=(i[0]*e+i[4]*o+i[8]*l+i[12])/r,n[1]=(i[1]*e+i[5]*o+i[9]*l+i[13])/r,n[2]=(i[2]*e+i[6]*o+i[10]*l+i[14])/r,n}function f(n,t,i){return e(n,u([0,0,0],t,i),g([0,0,0],i))}function c(n){return Math.hypot(n[0],n[1],n[2])}function h(n,t){let i=t[0],e=t[1],o=t[2],l=t[3],r=t[4],a=t[5],s=t[6],u=t[7],f=t[8],c=t[9],h=t[10],d=t[11],v=t[12],g=t[13],m=t[14],T=t[15],U=i*a-e*r,M=i*s-o*r,y=i*u-l*r,C=e*s-o*a,S=e*u-l*a,R=o*u-l*s,b=f*g-c*v,w=f*m-h*v,x=f*T-d*v,p=c*m-h*g,F=c*T-d*g,D=h*T-d*m,A=U*D-M*F+y*p+C*x-S*w+R*b;return A?(A=1/A,n[0]=(a*D-s*F+u*p)*A,n[1]=(o*F-e*D-l*p)*A,n[2]=(g*R-m*S+T*C)*A,n[3]=(h*S-c*R-d*C)*A,n[4]=(s*x-r*D-u*w)*A,n[5]=(i*D-o*x+l*w)*A,n[6]=(m*y-v*R-T*M)*A,n[7]=(f*R-h*y+d*M)*A,n[8]=(r*F-a*x+u*b)*A,n[9]=(e*x-i*F-l*b)*A,n[10]=(v*S-g*y+T*U)*A,n[11]=(c*y-f*S-d*U)*A,n[12]=(a*w-r*p-s*b)*A,n[13]=(i*p-e*w+o*b)*A,n[14]=(g*M-v*C-m*U)*A,n[15]=(f*C-c*M+h*U)*A,n):null}function d(n,t,i){let e=t[0],o=t[1],l=t[2],r=t[3],a=t[4],s=t[5],u=t[6],f=t[7],c=t[8],h=t[9],d=t[10],v=t[11],g=t[12],m=t[13],T=t[14],U=t[15],M=i[0],y=i[1],C=i[2],S=i[3];return n[0]=M*e+y*a+C*c+S*g,n[1]=M*o+y*s+C*h+S*m,n[2]=M*l+y*u+C*d+S*T,n[3]=M*r+y*f+C*v+S*U,M=i[4],y=i[5],C=i[6],S=i[7],n[4]=M*e+y*a+C*c+S*g,n[5]=M*o+y*s+C*h+S*m,n[6]=M*l+y*u+C*d+S*T,n[7]=M*r+y*f+C*v+S*U,M=i[8],y=i[9],C=i[10],S=i[11],n[8]=M*e+y*a+C*c+S*g,n[9]=M*o+y*s+C*h+S*m,n[10]=M*l+y*u+C*d+S*T,n[11]=M*r+y*f+C*v+S*U,M=i[12],y=i[13],C=i[14],S=i[15],n[12]=M*e+y*a+C*c+S*g,n[13]=M*o+y*s+C*h+S*m,n[14]=M*l+y*u+C*d+S*T,n[15]=M*r+y*f+C*v+S*U,n}function v(n,t){return n[0]=t[8],n[1]=t[9],n[2]=t[10],r(n,n)}function g(n,t){return n[0]=t[12],n[1]=t[13],n[2]=t[14],n}function m(n,t){let i=function(n,t){let i=t[4],e=t[5],o=t[6],l=t[8],r=t[9],a=t[10];return n[0]=Math.hypot(t[0],t[1],t[2]),n[1]=Math.hypot(i,e,o),n[2]=Math.hypot(l,r,a),n}([0,0,0],t),e=1/i[0],o=1/i[1],l=1/i[2],r=t[0]*e,a=t[1]*o,s=t[2]*l,u=t[4]*e,f=t[5]*o,c=t[6]*l,h=t[8]*e,d=t[9]*o,v=t[10]*l,g=r+f+v,m=0;return g>0?(m=2*Math.sqrt(g+1),n[3]=.25*m,n[0]=(c-d)/m,n[1]=(h-s)/m,n[2]=(a-u)/m):r>f&&r>v?(m=2*Math.sqrt(1+r-f-v),n[3]=(c-d)/m,n[0]=.25*m,n[1]=(a+u)/m,n[2]=(h+s)/m):f>v?(m=2*Math.sqrt(1+f-r-v),n[3]=(h-s)/m,n[0]=(a+u)/m,n[1]=.25*m,n[2]=(c+d)/m):(m=2*Math.sqrt(1+v-r-f),n[3]=(a-u)/m,n[0]=(h+s)/m,n[1]=(c+d)/m,n[2]=.25*m),n}function T(n,t,i){let e=t[0],o=t[1],l=t[2],r=t[3],a=i[0],s=i[1],u=i[2],f=i[3];return n[0]=e*f+r*a+o*u-l*s,n[1]=o*f+r*s+l*a-e*u,n[2]=l*f+r*u+e*s-o*a,n[3]=r*f-e*a-o*s-l*u,n}function U(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=t[3],n}function M(n,t,i){let e=i/2;return n[0]=Math.sin(e)*t[0],n[1]=Math.sin(e)*t[1],n[2]=Math.sin(e)*t[2],n[3]=Math.cos(e),n}function y(n,t,i,e){let o,l,r,a,s,u=t[0],f=t[1],c=t[2],h=t[3],d=i[0],v=i[1],g=i[2],m=i[3];return l=u*d+f*v+c*g+h*m,l<0&&(l=-l,d=-d,v=-v,g=-g,m=-m),1-l>1e-6?(o=Math.acos(l),r=Math.sin(o),a=Math.sin((1-e)*o)/r,s=Math.sin(e*o)/r):(a=1-e,s=e),n[0]=a*u+s*d,n[1]=a*f+s*v,n[2]=a*c+s*g,n[3]=a*h+s*m,n}function C(n,t){return(i,e)=>{i.i.t[e]|=4,i.i.o[e]={l:n?i.Audio.createPanner():void 0,s:t,u:0}}}function S(n,t,i,e=!1){return(o,l)=>{o.i.t[l]|=2048,o.i.h[l]={v:n,g:t,m:i,T:e,U:[],M:0}}}function R(n,t){return(i,e)=>{i.i.t[e]|=4096,i.i.v[e]={C:n,S:t}}}function b(n,t,i,e,o){return(l,r)=>{let a=l.R.createBuffer();l.R.bindBuffer(34962,a),l.R.bufferData(34962,6400,35048),l.i.t[r]|=65536,l.i.p[r]={F:l.D,A:a,N:n,P:t,L:e,k:[i,o],I:2304}}}function w(n,t){return(i,e)=>{i.i.t[e]|=262144,i.i.B[e]={V:n,K:t}}}function x(n=0,t=1){return~~(Math.random()*(t-n+1)+n)}function p(n=0,t=1){return Math.random()*(t-n)+n}function F(){return{O:[12,"lowpass",p(5,8),4,!1,!1,0,0,[[!1,13,0,0,p(5,8)]]],$:77,q:9}}function D(n,t){return{G:[R(1),C(!0,t?F():void 0)],W:[{Y:[-.707,0,0,.707],G:[w(1/0,.5),S(1,.1,1,!0),b(n._.fire,[0,0,0,.5],50,[1,1,1,0],100)]}]}}function A(n=[1,1,1],t=1){return(i,e)=>{i.i.t[e]|=8192,i.i.H[e]={j:1,X:n,J:t**2}}}function N(n,t,i){return(e,o)=>{e.i.t[o]|=524288,e.i.Z[o]={nn:n,g:t,M:t,tn:!i}}}function P(n){return{G:[C(!0,F()),R(1),A([1,1,1],3),N(8192,.1,!0)],W:[{Y:[-.707,0,0,.707],G:[w(1/0,.5),S(1,0,.2,!0),b(n._.fire,[1,1,1,.5],100,[1,1,1,0],10),A([1,.5,0],3),N(8192,.3,!0)]}]}}function L(n){return(t,i)=>{t.i.t[i]|=32768,t.i.in[i]={en:n}}}function*k(n,t){for(let i=0;i<n.t.length;i++)32768&n.t[i]&&n.in[i].en===t&&(yield i)}function E(n,t){for(let i of k(n,t))return i;return-2}function*I(n,t,i){n.t[t]&i&&(yield t);for(let e of n.on[t].W)yield*I(n,e,i)}function z(n){function t(e,o){let l=(e-i)/1e3;i=e,o?(n.ln=o,tt=n.ln.session.requestAnimationFrame(t)):(n.ln=void 0,tt=requestAnimationFrame(t)),n.rn(l),n.an()}let i=performance.now();tt=n.sn?n.sn.requestAnimationFrame(t):requestAnimationFrame(t)}function B(n){n.sn?n.sn.cancelAnimationFrame(tt):cancelAnimationFrame(tt)}function V(n,{un:t,Y:i,fn:e,G:o=[],cn:l=0,W:r=[]}){let a=function(n){for(let t=0;t<1e4;t++){if(t===n.t.length)return n.t.push(0),t;if(0===n.t[t])return t}return-1}(n.i);!function(n=[0,0,0],t=[0,0,0,1],i=[1,1,1]){return(e,o)=>{e.i.t[o]|=1048576,e.i.on[o]={i:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],hn:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],un:n,Y:t,fn:i,W:[],dn:!0}}}(t,i,e)(n,a);for(let t of o)t(n,a);l&&(n.i.t[a]&=~l);let s=n.i.on[a];for(let t of r){let i=V(n,t);n.i.on[i].vn=a,s.W.push(i)}return a}function K(n,t,i=!0){if(1048576&n.t[t])for(let e of n.on[t].W)i?K(n,e,i):n.on[e].vn=void 0;n.t[t]=0}function O(n,t,i,e=[1,1,1]){return(o,l)=>{o.i.t[l]|=16,o.i.gn[l]={Entity:l,mn:!0,Tn:n,Un:t,t:i,k:e,Mn:[0,0,0],yn:[0,0,0],Cn:[0,0,0],Sn:[0,0,0],Rn:[]}}}function $(n){return(t,i)=>{t.i.t[i]|=131072,t.i.bn[i]={j:n,wn:[0,0,0],xn:[0,0,0],pn:[0,0,0]}}}function q(n){return(t,i)=>{t.i.t[i]|=2097152,t.i.T[i]={S:n}}}function G(n){return(t,i)=>{t.i.t[i]|=1024,t.i.Fn[i]={nn:n}}}function W(n,t,i,e=[1,1,1,1],o=2304,l=-.3){return(r,a)=>{if(!it.has(t)){let i=r.R.createVertexArray();r.R.bindVertexArray(i),r.R.bindBuffer(34962,t.Dn),r.R.enableVertexAttribArray(n.Nn.An),r.R.vertexAttribPointer(n.Nn.An,3,5126,!1,0,0),r.R.bindBuffer(34962,t.Pn),r.R.enableVertexAttribArray(n.Nn.Ln),r.R.vertexAttribPointer(n.Nn.Ln,2,5126,!1,0,0),r.R.bindBuffer(34962,t.kn),r.R.enableVertexAttribArray(n.Nn.En),r.R.vertexAttribPointer(n.Nn.En,3,5126,!1,0,0),r.R.bindBuffer(34963,t.In),r.R.bindVertexArray(null),it.set(t,i)}r.i.t[a]|=65536,r.i.p[a]={F:n,zn:t,I:o,Bn:it.get(t),X:e,Vn:l,N:i}}}function Y(n){return{Y:[-.64,.067,.056,.763],fn:[.5,.5,.5],G:[(n,t)=>{n.i.t[t]|=32,n.i.Kn[t]={T:!1,V:20,C:0}},w(1/0,.5),S(5,.05,1,!0),b(n._.fire,[1,.5,0,.2],50,[1,0,0,0],10),G(329728)]}}function _(n,t,i){var e;let o={G:[L(6),O(!0,16,53),$(1),W(n.On,n.$n,n._["building"+t]),R(30+Math.random(),8),G(65536)],cn:135184,W:[Y(n)]};return i&&(null===(e=o.W)||void 0===e||e.push(function(n,t){switch(t){case 1:return{un:[0,.5,0],fn:[.75,1,.75],G:[W(n.On,n.$n,n._["building"+t]),G(65536)]};case 2:return{un:[-.125,.5,-.125],fn:[.5,.5,.5],G:[W(n.On,n.$n,n._["building"+t]),G(65536)]};default:return{un:[0,.125,0],fn:[.75,1,.75],G:[W(n.On,n.$n,n._["building"+t]),G(65536)]}}}(n,t))),o}function H(n){return{G:[L(6),O(!0,16,53),$(1),W(n.On,n.$n,n._.building2),R(30+Math.random(),8),G(65536)],cn:135184,W:[{un:[0,-.1,0],Y:[0,.383,0,.924],G:[W(n.On,n.$n,n._.building2),G(65536)]},Y(n)]}}function Q(n,t){void 0===t&&(t=Math.max(x(0,3),x(0,4)));let i=[];if(p()>.2){let e=x(1,4);for(let o=1;o<=t;o++)i.push({..._(n,e,o===t),un:[0,o-.5,0]})}else for(let e=1;e<=t;e++)i.push({...H(n),un:[0,e-.5,0]});return{G:[L(5),O(!1,8,51,[1,2*t,1]),$(0),q(4)],W:i}}function j(n){return{O:[8,"lowpass",7,2,!1,"sine",8,7,[["sine",8,7,8,11,7,!0,!1,0,0,0]]],$:n?79:50,q:6}}function X(n,t){return{W:[{fn:[.05,.15,.15],G:[W(n.On,n.$n,n._.noise,[.1,.15,.2,1],t),G(65536)]},{un:[-.06,.09,.05],Y:[-.099,-.892,-.239,.37],fn:[.03,.03,.03],G:[W(n.On,n.qn,n._.noise,[1,1,0,1],t),G(65536)]},{un:[-.025,.07,-.13],Y:[.126,.257,-.034,.958],W:[{fn:[.04,.04,.07],G:[W(n.On,n.$n,n._.noise,[.1,.15,.2,1],t),G(65536)]},{un:[-.03,0,-.09],Y:[-.683,-.683,.183,.183],fn:[.03,.03,.03],G:[W(n.On,n.qn,n._.noise,[1,1,0,1],t),G(65536)]}]},{un:[-.025,.07,-.13],Y:[.126,.257,-.034,.958],W:[{fn:[.04,.04,.07],G:[W(n.On,n.$n,n._.noise,[.1,.15,.2,1],t),G(65536)]},{un:[-.03,0,-.09],Y:[-.683,-.683,.183,.183],fn:[.03,.03,.03],G:[W(n.On,n.qn,n._.noise,[1,1,0,1],t),G(65536)]}]},{un:[-.025,0,-.14],Y:[0,.259,0,.966],W:[{fn:[.04,.04,.07],G:[W(n.On,n.$n,n._.noise,[.1,.15,.2,1],t),G(65536)]},{un:[-.03,0,-.09],Y:[-.683,-.683,.183,.183],fn:[.03,.03,.03],G:[W(n.On,n.qn,n._.noise,[1,1,0,1],t),G(65536)]}]},{un:[-.025,-.07,-.13],Y:[-.126,.257,.034,.958],W:[{fn:[.04,.04,.07],G:[W(n.On,n.$n,n._.noise,[.1,.15,.2,1],t),G(65536)]},{un:[-.03,0,-.09],Y:[-.683,-.683,.183,.183],fn:[.03,.03,.03],G:[W(n.On,n.qn,n._.noise,[1,1,0,1],t),G(65536)]}]}]}}function J(n){return{fn:[.5,.5,.5],G:[O(!1,64,2,[.5,.5,.5]),q(9),C(!0,j(!0))],W:[{G:[w(1/0,.02),N(262144,1,!1)],W:[{G:[W(n.On,n.$n,n._.cage)]},{G:[W(n.On,n.$n,n._.cage,[1,1,1,1],2305,-2)]},{...X(n,2305),un:[.2,.1,.35],Y:[0,1,0,0],fn:[-1,1,1]},{...X(n,2304),un:[-.2,-.1,.35],Y:[0,1,0,0]}]}]}}function Z(n){return(t,i)=>{t.i.t[i]|=1,t.i.Gn[i]={Wn:n}}}function nn(n,t){return(i,e)=>{i.i.t[e]|=64,i.i.Yn[e]={_n:n,Y:t}}}function tn(n,t){return(i,e)=>{i.i.t[e]|=16384,i.i.Hn[e]={Qn:n,jn:t,Xn:[],Jn:[],Zn:[]}}}function en(n){return{fn:[.03,.03,.03],G:[nn([0,0,1],null),Z(E(n.i,1)),tn(p(2,4),p(1,3)),O(!0,128,0,[.5,.5,.5]),$(0),C(!0,et),R(8)],W:[{un:[0,-3,3],G:[A([1,1,1],2)]},{fn:[2,3,4],G:[W(n.On,n.$n,n._.police)]},{un:[0,2,0],fn:[8,.1,1],G:[nn(null,[0,1,0,0]),tn(0,20),W(n.On,n.$n,n._.noise,[.1,.1,.1,1])]},{un:[0,0,-4],Y:[.087,0,0,.996],fn:[1,1.5,4],G:[W(n.On,n.$n,n._.police)]}]}}function on(n){return{G:[nn([0,0,1],null),tn(30,0),R(8),A([1,.5,0],100)]}}function ln(n){return{G:[nn([0,0,1],null),O(!0,32,21),q(5),Z(E(n.i,1)),tn(p(8,12),3),R(9),C(!0,ot)],W:[{Y:[.707,0,0,.707],fn:[.1,1,.1],G:[nn(null,[0,0,1,0]),tn(0,5),W(n.On,n.$n,n._.missile)]},{un:[0,0,-1],G:[A([1,.5,0],1)],W:[{Y:[0,1,0,0],G:[w(1/0,.02),S(1,.01,10,!0),b(n._.fire,[1,.5,0,.3],50,[1,1,0,0],10)]}]}]}}function rn(){return{Y:[0,-.924,0,.383],G:[nn(null,[0,1,0,0]),tn(0,.01)],W:[{un:[0,10,-10],G:[A([1,1,1],14)]}]}}function an(n){return{fn:[.03,.03,.03],G:[nn([0,0,1],null),Z(E(n.i,0)),tn(p(1,3),p(2,4)),O(!0,128,0,[.5,.5,.5]),$(0),C(!0,{O:[6,"lowpass",8,0,!1,"square",3,p(2.5,3.5),[["square",8,5,18,10,7,!0,!1,0,0,0]]],$:x(65,76),q:9}),R(8)],W:[{un:[-.5,2,0],G:[W(n.On,n.$n,n._.noise,[99,99,0,1]),A([1,0,0],2),N(73728,.5,!0)]},{un:[.5,2,0],G:[W(n.On,n.$n,n._.noise,[0,99,99,1]),A([0,0,1],2),N(73728,.5,!1)]},{un:[0,.5,0],fn:[2,1,5],G:[W(n.On,n.$n,n._.police,[1,1,1,1],2304,-2)]},{un:[0,1.25,0],Y:[.7071,0,0,.7071],fn:[2,2,.5],G:[W(n.On,n.$n,n._.police,[1,1,1,1],2304,-2)]}]}}function sn(n){return(t,i)=>{t.i.t[i]|=128,t.i.nt[i]={j:n}}}function un(n,t){return(i,e)=>{i.i.t[e]|=256,i.i.tt[e]={it:n,g:t,M:0}}}function fn(n){return(t,i)=>{t.i.t[i]|=512,t.i.et[i]={j:n}}}function cn(n){return{G:[nn([0,0,1],null),tn(10,0),O(!0,0,184,[.1,.1,.1]),q(7),R(1)]}}function hn(){return{O:[5,"bandpass",10,3,!0,"sine",8,13,[["triangle",8,4,5,8,8,!1,!1,8,8,8]]],$:x(48,60),q:p(1,3),ot:hn}}function dn(n){n.i=new lt,n.lt=void 0,n.rt=!0,n.R.clearColor(0,.1,.2,1),V(n,{W:[{Y:[0,1,0,0],G:[(n,t)=>{n.i.t[t]|=8,n.i.lt[t]={j:0,at:1,st:.1,ut:75,ft:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ct:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ht:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],dt:[0,0,0],vt:25,gt:25}}]}],un:[-2,.1,2],Y:[-.079,.787,.104,.604]}),V(n,{un:[0,-.5,0],fn:[99,1,99],G:[L(4),C(!1,hn()),O(!1,4,0,[99,1,99]),$(0),W(n.On,n.$n,n._.noise,[1,1,1,1],2304,-.3)]}),V(n,{...Q(n),un:[0,0,0]}),V(n,{...Q(n),un:[1.1,0,0]});let t=V(n,{...Q(n),un:[2.2,0,0]});for(let i of I(n.i,t,32))n.i.t[i]&=-33;V(n,{...X(n,2305),G:[L(1)],un:[3,2,1],Y:[0,.966,-.259,0],fn:[-5,5,5]}),V(n,{un:[0,.25,2],G:[L(7),nn([0,.5,1],null),tn(.5,0)],cn:16384,W:[{...J(n),Y:[0,-.707,0,.707]},{...en(n),un:[-1,.5,.1],cn:20480}]}),V(n,rn()),V(n,{G:[L(0),nn(null,[0,1,0,0]),tn(0,1)],W:[{un:[0,0,-4],G:[un(an,11),nn(null,[0,1,0,0]),tn(0,5)]}]})}async function vn(n){let t=await navigator.xr.requestSession("immersive-vr",{requiredFeatures:["local-floor"]});n.Tt=await t.requestReferenceSpace("local-floor"),t.updateRenderState({baseLayer:new XRWebGLLayer(t,n.R),depthFar:25}),B(n),n.sn=t,z(n),n.sn.addEventListener("end",()=>{B(n),n.sn=void 0,n.Tt=void 0,n.ln=void 0,n.rt=!0,z(n)})}function gn(n,t,i){switch(t){case 1:{n.Ut=1;let t=E(n.i,7);n.i.t[t]|=16384,setTimeout(()=>{n.Ut=2,function(n){n.i=new lt,n.lt=void 0,n.rt=!0,n.R.clearColor(0,.1,.2,1),V(n,{G:[nn(null,[0,1,0,0]),tn(0,.02)],W:[{W:[{Y:[0,1,0,0],G:[(n,t)=>{n.i.t[t]|=8,n.i.lt[t]={j:0,at:1,st:.1,ut:75,ft:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ct:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ht:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],dt:[0,0,0],vt:25,gt:25}}]}],un:[0,10,15],Y:[0,.954,-.301,0]}]}),V(n,function(n,t){return{fn:[3,3,3],G:[fn(0),tn(2,0),L(0)],W:[{W:[{G:[(n,t)=>{n.i.t[t]|=8,n.i.lt[t]={j:1,Mt:{},vt:9,gt:3}}]},{un:[0,2,0],G:[sn(0),L(1),O(!0,1,0,[.1,.1,.1])],W:[{Y:[0,1,0,0],G:[(n,t)=>{n.i.t[t]|=2}]},{un:[0,-.2,0],Y:[0,1,0,0],G:[L(3),fn(1),C(!1),un(cn,.3)],cn:256,W:[{G:[w(1/0,.05),S(1,.01,15),b(n._.fire,[.8,.4,0,.2],150,[1,0,0,0],200)]},{G:[w(1/0,.1),S(1.5,.01,13),b(n._.fire,[.8,.4,0,.2],150,[1,0,0,0],200)]}]},{un:[0,0,-1],G:[L(2)]}]},{un:[-.5,2,0],G:[sn(1),fn(2),O(!0,1,0,[.1,.1,.1]),$(2)],W:[{...X(n,2305),fn:[-1,1,1]},{un:[.1,0,0],G:[O(!0,2,208,[.1,.1,.1])]},{fn:[1/3,1/3,1/3]}]},{un:[.5,2,0],G:[sn(2),fn(3),O(!0,1,0,[.1,.1,.1]),$(2)],W:[{...X(n,2304),fn:[1,1,1]},{un:[-.1,0,0],G:[O(!0,2,208,[.1,.1,.1])]},{fn:[1/3,1/3,1/3]}]}]}]}}(n)),V(n,rn()),V(n,{un:[0,-.5,0],fn:[99,1,99],G:[L(4),C(!1,hn()),O(!1,4,0,[99,1,99]),$(0),W(n.On,n.$n,n._.noise,[1,1,1,1],2304,-.5)]});let t=[];for(let i=Math.trunc(-4.5);i<4.5;i++)for(let e=Math.trunc(-4.5);e<4.5;e++){let o=Math.max(x(0,3),x(0,4)),l=[1.5*e+Math.trunc(e/3),o-.75,1.5*i+Math.trunc(i/2)];V(n,{...Q(n,o),un:[l[0],0,l[2]]}),o>0&&Math.abs(e)>2&&Math.abs(i)>2&&t.push(l)}var i;V(n,{...J(n),un:(i=t,i[x(0,i.length-1)])}),V(n,{G:[nn(null,[0,1,0,0]),tn(0,1)],W:[{un:[0,0,-4],G:[un(an,14),nn(null,[0,1,0,0]),tn(0,5)]}]}),V(n,{un:[0,6,0],G:[nn(null,[0,1,0,0]),tn(0,.5)],W:[{un:[0,0,-10],G:[un(en,22)]}]}),V(n,{G:[nn(null,[0,1,0,0]),tn(0,4)],W:[{un:[0,1,-50],Y:[-.707,0,0,.707],G:[un(ln,13)]},{un:[0,1,-50],Y:[-.707,0,0,.707],G:[un(on,13)]}]})}(n),n.yt&&vn(n)},5e3);break}case 2:n.yt&&vn(n);break;case 0:setTimeout(()=>dn(n));case 3:n.ln&&n.ln.session.end();break;case 4:{let[t]=i,l=n.i.on[t];for(let i of n.i.on[t].W){let t=n.i.on[i];t.un[0]=l.un[0],t.un[2]=l.un[2],(e=t.Y)[0]=(o=l.Y)[0],e[1]=o[1],e[2]=o[2],e[3]=o[3],n.i.t[i]|=135184}setTimeout(()=>K(n.i,t,!1));break}case 5:{let[t,e]=i,o=n.i.gn[e];if(16&o.Un)setTimeout(()=>K(n.i,e));else if(1&o.Un){let t=E(n.i,4);n.i.t[t]&=-17;for(let t of k(n.i,5))n.i.bn[t].j=1;2===n.Ut&&(n.Ut=4,setTimeout(()=>{gn(n,0,void 0)},1e3))}}case 6:{let[t,e]=i,o=[0,0,0];g(o,n.i.on[t].i),V(n,{un:o,...P(n)}),setTimeout(()=>K(n.i,t));break}case 7:{let[t,e]=i;if(160&n.i.gn[e].Un)gn(n,6,[e]);else for(let t of I(n.i,e,32)){n.i.Kn[t].T=!0;break}setTimeout(()=>K(n.i,t));break}case 8:{let t=[0,0,0];g(t,n.i.on[i].i),V(n,{un:t,...D(n,!1)});break}case 9:{let[t]=i;if(n.i.on[t].vn){n.i.t[t]&=-2097153,n.i.gn[t].Tn=!0;let i=E(n.i,3);n.i.o[i].T=j(!1);for(let t of k(n.i,6))n.i.t[t]|=4096,n.i.v[t].C=2*Math.random();2===n.Ut&&(n.Ut=3,setTimeout(()=>{gn(n,0,void 0)},5e3))}break}}var e,o}function mn(n,t,i){let e=n.createProgram();return n.attachShader(e,Tn(n,35633,t)),n.attachShader(e,Tn(n,35632,i)),n.linkProgram(e),e}function Tn(n,t,i){let e=n.createShader(t);return n.shaderSource(e,i),n.compileShader(e),e}function Un(n,t){let i=n.i.Gn[t];if(void 0!==i.Wn){let e=n.i.on[t],o=n.i.Hn[t];g(mt,n.i.on[i.Wn].i),u(mt,mt,e.hn),r(mt,mt);let l=[0,0,0,0];nt(l,vt,mt),o.Zn.push(l)}}function Mn(n,t){let i=n.i.on[t];var e,o;g(Tt,i.i),v(Ut,i.i),(e=Mt)[0]=(o=i.i)[4],e[1]=o[5],e[2]=o[6],r(e,e);let l=n.Audio.listener;l.positionX?(l.positionX.value=Tt[0],l.positionY.value=Tt[1],l.positionZ.value=Tt[2],l.forwardX.value=Ut[0],l.forwardY.value=Ut[1],l.forwardZ.value=Ut[2],l.upX.value=Mt[0],l.upY.value=Mt[1],l.upZ.value=Mt[2]):(l.setPosition(...Tt),l.setOrientation(...Ut,...Mt))}function yn(n){if(!gt){gt=n.createBuffer(1,2*n.sampleRate,n.sampleRate);let t=gt.getChannelData(0);for(let n=0;n<t.length;n++)t[n]=2*Math.random()-1}return gt}function Cn(n,t,i){var e;let o=n.i.o[t],l=!o.Ct||o.u>o.Ct.q;if(o.l){let i=n.i.on[t];g(yt,i.i),v(Ct,i.i),o.l.positionX.value=yt[0],o.l.positionY.value=yt[1],o.l.positionZ.value=yt[2],o.l.orientationX.value=Ct[0],o.l.orientationY.value=Ct[1],o.l.orientationZ.value=Ct[2]}o.T&&l?(function(n,t,i,e){let o,l,r=n.currentTime,a=0,s=n.createGain();if(s.gain.value=(i[0]/9)**3,i[5]&&(l=n.createOscillator(),l.type=i[5],l.frequency.value=(i[7]/3)**3,o=n.createGain(),o.gain.value=(i[6]+3)**3,l.connect(o)),i[1]){let e=n.createBiquadFilter();e.type=i[1],e.frequency.value=2**i[2],e.Q.value=i[3]**1.5,o&&i[4]&&o.connect(e.detune),s.connect(e),t?e.connect(t).connect(n.destination):e.connect(n.destination)}else t?s.connect(t).connect(n.destination):s.connect(n.destination);for(let t of i[8]){let i=n.createGain();i.connect(s);let l=(t[1]/9)**3,u=(t[2]/9)**3,f=(t[3]/9)**3,c=u+f+(t[4]/6)**3;if(i.gain.setValueAtTime(0,r),i.gain.linearRampToValueAtTime(l,r+u),i.gain.setValueAtTime(l,r+u+f),i.gain.exponentialRampToValueAtTime(1e-5,r+c),t[0]){let l=n.createOscillator();l.type=t[0],l.connect(i),l.detune.value=3*(t[5]-7.5)**3,o&&t[6]&&o.connect(l.detune);let a=440*2**((e-69)/12);if(t[7]){let n=(t[8]/9)**3,i=(t[9]/9)**3,e=(t[10]/6)**3;l.frequency.linearRampToValueAtTime(0,r),l.frequency.linearRampToValueAtTime(a,r+n),l.frequency.setValueAtTime(a,r+n+i),l.frequency.exponentialRampToValueAtTime(1e-5,r+n+i+e)}else l.frequency.setValueAtTime(a,r);l.start(r),l.stop(r+c)}else{let t=n.createBufferSource();t.buffer=yn(n),t.loop=!0,t.connect(i),t.start(r),t.stop(r+c)}c>a&&(a=c)}l&&(l.start(r),l.stop(r+a))}(n.Audio,o.l,o.T.O,o.T.$),o.Ct=o.T,o.u=0):o.u+=i,o.T=(null===(e=o.s)||void 0===e?void 0:e.ot)?o.s.ot():o.s}function Sn(n,t,i){let e=n.i.on[t];if(n.lt=i,n.rt){let t=n.St/n.Rt;!function(n,t,i,e,o){let l,r=1/Math.tan(t/2);n[0]=r/i,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=r,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,null!=o&&o!==1/0?(l=1/(e-o),n[10]=(o+e)*l,n[14]=2*o*e*l):(n[10]=-1,n[14]=-2*e)}(i.ct,t>1?i.at:i.at/t,t,i.st,i.ut)}i.ft=e.hn.slice(),d(i.ht,i.ct,e.hn),g(i.dt,e.i)}function Rn(n,t,i){n.lt=i;let e=n.i.on[t],o=n.ln.getViewerPose(n.Tt);for(let n of o.views){i.Mt[n.eye]||(i.Mt[n.eye]={bt:n,ft:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ht:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],dt:[0,0,0],vt:i.vt});let t=i.Mt[n.eye];t.bt=n,d(t.ft,e.i,n.transform.matrix),g(t.dt,t.ft),h(t.ft,t.ft),d(t.ht,n.projectionMatrix,t.ft)}}function bn(n,t){g(t.Cn,n),o(t.Sn,t.k,.5),e(t.Mn,t.Cn,t.Sn),i(t.yn,t.Cn,t.Sn)}function wn(n,t){let i=n.Cn[0]-t.Cn[0],e=n.Sn[0]+t.Sn[0]-Math.abs(i),o=n.Cn[1]-t.Cn[1],l=n.Sn[1]+t.Sn[1]-Math.abs(o),r=n.Cn[2]-t.Cn[2],a=n.Sn[2]+t.Sn[2]-Math.abs(r);return e<l&&e<a?[e*Math.sign(i),0,0]:l<a?[0,l*Math.sign(o),0]:[0,0,a*Math.sign(r)]}function xn(n,t,i){for(let r=0;r<i;r++){let i=t[r],a=n.t&i.Un,s=i.t&n.Un;if((a||s)&&(e=n).Mn[0]<(o=i).yn[0]&&e.yn[0]>o.Mn[0]&&e.Mn[1]<o.yn[1]&&e.yn[1]>o.Mn[1]&&e.Mn[2]<o.yn[2]&&e.yn[2]>o.Mn[2]){let t=wn(n,i);a&&n.Rn.push({wt:i.Entity,xt:t}),s&&i.Rn.push({wt:n.Entity,xt:l([0,0,0],t)})}}var e,o}function pn(n,t,i){let e=n.i.Kn[t];if(e.T&&(n.i.t[t]|=1048576,e.C=e.V,e.T=!1),e.C>0){n.i.h[t].g=(o=1.1-e.C/e.V)*o,e.C-=i;let l=n.i.on[t];l.vn&&4096&n.i.t[l.vn]&&(n.i.v[l.vn].C-=i)}else n.i.t[t]&=-1048577;var o}function Fn(n,t){let i=n.i.Yn[t],e=n.i.Hn[t];i._n&&e.Xn.push(i._n.slice()),i.Y&&e.Jn.push(i.Y.slice())}function Dn(n,t){let i=n.i.on[t],e=n.i.nt[t];if(0===e.j){let t=n.ln.getViewerPose(n.Tt);return i.i=t.transform.matrix,void(i.dn=!0)}if(1!==e.j)if(2!==e.j);else{let t=n.pt.right;if(t){let e=n.ln.getPose(t.gripSpace,n.Tt);e&&(i.i=e.transform.matrix,i.dn=!0)}}else{let t=n.pt.left;if(t){let e=n.ln.getPose(t.gripSpace,n.Tt);e&&(i.i=e.transform.matrix,i.dn=!0)}}}function An(n,t,i){let e=n.i.tt[t];if(e.M+=i,e.M>e.g){e.M=0;let i=n.i.on[t],o=[0,0,0];g(o,i.i);let l=[0,0,0,1];m(l,i.i),V(n,{...e.it(n),un:o,Y:l})}}function Nn(n,t,i,e,o){return(n-t)/(i-t)*(o-e)+e}function Pn(n,i){let e=n.i.on[i],o=n.i.et[i];if(0===o.j){let t=n.i.Hn[i],o=n.i.on[n.i.on[e.W[0]].W[1]],l=n.pt.left;if(null==l?void 0:l.gamepad){let n=l.gamepad.axes[2];if(n){let i=[n,0,0];f(i,i,o.i),i[1]=0,t.Xn.push(i)}let i=l.gamepad.axes[3];if(i){let n=[0,0,i];f(n,n,o.i),n[1]=0,t.Xn.push(n)}}let r=n.pt.right;if(null==r?void 0:r.gamepad){let n=r.gamepad.axes[2];if(n){let i=[n,0,0];f(i,i,o.i),i[1]=0,t.Xn.push(i)}let i=r.gamepad.axes[3];if(i){let n=[0,0,i];f(n,n,o.i),n[1]=0,t.Xn.push(n)}}if(t.Xn.length>0){let n=.03,t=5;e.un[1]=(Math.sin(t*e.un[0])+Math.sin(t*e.un[2]))*n,e.dn=!0}}if(1!==o.j)if(2!==o.j)if(3!==o.j);else{let i=n.pt.right;if(i&&i.gamepad){let o=i.gamepad.buttons[1];if(o){let[i,l,r]=e.W,a=n.i.on[i];a.fn[2]=Nn(o.value,0,1,1,.5),M(a.Y,Rt,o.value),a.dn=!0;let s=n.i.on[r];if(o.pressed){if(!s.W[0]){let t=n.i.gn[l];if(t.Rn.length>0){let i=t.Rn[0].wt,e=n.i.on[i];e.vn&&n.i.on[e.vn].W.pop(),s.W[0]=i,e.vn=r,g(e.un,e.i),u(e.un,e.un,s.hn);let o=[0,0,0,0];if(m(o,s.i),U(o,o),m(e.Y,e.i),T(e.Y,o,e.Y),e.dn=!0,131072&n.i.t[i]){let t=n.i.bn[i];t.j=2,g(t.pn,e.i),n.i.t[i]&=-4097}16384&n.i.t[i]&&(n.i.t[i]&=-16385)}}}else if(s.W[0]){let i=s.W[0],e=n.i.on[i];if(s.W.pop(),e.vn=void 0,g(e.un,e.i),m(e.Y,e.i),e.dn=!0,131072&n.i.t[i]){let e=n.i.bn[i];e.j=1,t(e.xn,e.wn),n.i.t[i]|=4096,n.i.v[i].C=30}}}}}else{let i=n.pt.left;if(i&&i.gamepad){let o=i.gamepad.buttons[1];if(o){let[i,l,r]=e.W,a=n.i.on[i];a.fn[2]=Nn(o.value,0,1,1,.5),M(a.Y,Rt,-o.value),a.dn=!0;let s=n.i.on[r];if(o.pressed){if(!s.W[0]){let t=n.i.gn[l];if(t.Rn.length>0){let i=t.Rn[0].wt,e=n.i.on[i];e.vn&&n.i.on[e.vn].W.pop(),s.W[0]=i,e.vn=r,g(e.un,e.i),u(e.un,e.un,s.hn);let o=[0,0,0,0];if(m(o,s.i),U(o,o),m(e.Y,e.i),T(e.Y,o,e.Y),e.dn=!0,131072&n.i.t[i]){let t=n.i.bn[i];t.j=2,g(t.pn,e.i),n.i.t[i]&=-4097}16384&n.i.t[i]&&(n.i.t[i]&=-16385)}}}else if(s.W[0]){let i=s.W[0],e=n.i.on[i];if(s.W.pop(),e.vn=void 0,g(e.un,e.i),m(e.Y,e.i),e.dn=!0,131072&n.i.t[i]){let e=n.i.bn[i];e.j=1,t(e.xn,e.wn),n.i.t[i]|=4096,n.i.v[i].C=30}}}}}else{n.i.t[i]&=-257;for(let t of I(n.i,i,2048))n.i.h[t].T=!1;{let t=n.pt.left;if(null==t?void 0:t.gamepad){let e=t.gamepad.buttons[0];if(null==e?void 0:e.pressed){n.i.t[i]|=256,n.i.o[i].T=St;for(let t of I(n.i,i,2048))n.i.h[t].T=!0}}}{let t=n.pt.right;if(null==t?void 0:t.gamepad){let e=t.gamepad.buttons[0];if(null==e?void 0:e.pressed){n.i.t[i]|=256,n.i.o[i].T=St;for(let t of I(n.i,i,2048))n.i.h[t].T=!0}}}}}function Ln(n,t){let i=n.i.Fn[t];g(bt,n.i.on[t].i);let e=n.lt;1===e.j?(u(wt,bt,e.Mt.left.ht),u(xt,bt,e.Mt.left.ft)):(u(wt,bt,e.ht),u(xt,bt,e.ft)),Math.abs(wt[0])>1.1||Math.abs(wt[1])>1.1||Math.abs(xt[2])>e.gt?n.i.t[t]&=~i.nn:n.i.t[t]|=i.nn}function kn(n,t,i){let e=n.i.v[t];e.C-=i,e.C<0&&(setTimeout(()=>K(n.i,t)),e.S&&gn(n,e.S,t))}function En(n,t,i){let e=n.i.H[t];g(pt,n.i.on[t].i),n.Ft[4*i+0]=pt[0],n.Ft[4*i+1]=pt[1],n.Ft[4*i+2]=pt[2],n.Ft[4*i+3]=e.j,n.Dt[4*i+0]=e.X[0],n.Dt[4*i+1]=e.X[1],n.Dt[4*i+2]=e.X[2],n.Dt[4*i+3]=e.J}function In(n,t,e){let l=n.i.on[t],a=n.i.Hn[t];if(a.Xn.length){let t=a.Xn.reduce(zn),s=Math.min(1,c(t));f(t,t,l.i),void 0!==l.vn&&f(t,t,n.i.on[l.vn].hn),r(t,t),o(t,t,s*a.Qn*e),i(l.un,l.un,t),l.dn=!0,a.Xn=[]}if(a.Jn.length){let n=a.Jn.reduce(Bn);y(n,Ft,n,Math.min(1,a.jn/Math.PI*e)),T(l.Y,n,l.Y),l.dn=!0,a.Jn=[]}if(a.Zn.length){let n=a.Zn.reduce(Bn);y(n,Ft,n,Math.min(1,a.jn/Math.PI*e)),T(l.Y,l.Y,n),l.dn=!0,a.Zn=[]}}function zn(n,t){return i(n,n,t)}function Bn(n,t){return T(n,n,t)}function Vn(n,t,i){let e=n.i.h[t],o=n.i.on[t];e.M+=i,e.T&&e.M>e.g&&(e.M=0,g(At,o.i),v(Nt,o.i),e.U.push(...At,0),e.U.push(...Nt,Math.random()));for(let n=0;n<e.U.length;)e.U[n+3]+=i,e.U[n+3]>e.v?e.U.splice(n,8):n+=8}function Kn(n,t){let i=n.i.gn[t],e=n.i.bn[t];if(1===e.j)for(let o=0;o<i.Rn.length;o++){let l=i.Rn[o];if(131072&n.i.t[l.wt]){let i=n.i.bn[l.wt];if(2===i.j)continue;let o=a(Pt,e.wn)+a(Pt,i.wn);o>1&&(n.i.v[t].C-=Math.max(1,Math.min(10,o)),setTimeout(()=>V(n,D(n,!0))))}}}function On(n,e,l){let r=n.i.on[e],a=n.i.bn[e];if(1===a.j){t(a.wn,a.xn),a.wn[1]+=-9.81*l;let n=[0,0,0];o(n,a.wn,l),i(r.un,r.un,n),r.dn=!0}}function $n(n,i,l){let r=n.i.bn[i];if(2===r.j){let a=[0,0,0];g(a,n.i.on[i].i);let s=[0,0,0];e(s,a,r.pn),o(r.wn,s,1/l),t(r.pn,a)}}function qn(n,e){let l=n.i.on[e],r=n.i.gn[e],a=n.i.bn[e];if(1===a.j){let e=!1;for(let s=0;s<r.Rn.length;s++){let u=r.Rn[s];if(131072&n.i.t[u.wt]){e=!0,i(l.un,l.un,u.xt),l.dn=!0;let r=n.i.bn[u.wt];switch(r.j){case 0:a.xn[1]*=-1;break;case 1:case 2:t(a.xn,r.wn)}o(a.xn,a.xn,.8),u.xt[1]>0&&a.xn[1]<1&&(a.xn[1]=0)}}e||t(a.xn,a.wn)}}function Gn(n,t){let i=n.On;n.R.useProgram(i.At),n.R.uniformMatrix4fv(i.Nn.ht,!1,t.ht),n.R.uniform3fv(i.Nn.Nt,t.dt),n.R.uniform1f(i.Nn.vt,t.vt),n.R.uniform4fv(i.Nn.Ft,n.Ft),n.R.uniform4fv(i.Nn.Dt,n.Dt);let e=null;for(let t=0;t<n.i.t.length;t++)if(1114112==(1114112&n.i.t[t])){let o=n.i.on[t],l=n.i.p[t];l.I!==e&&(e=l.I,n.R.frontFace(l.I)),l.F===i&&Yn(n,o,l)}}function Wn(n,t){let i=n.D;n.R.disable(2929),n.R.enable(3042),n.R.frontFace(2304),n.R.useProgram(i.At),n.R.uniformMatrix4fv(i.Nn.ht,!1,t.ht);for(let t=0;t<n.i.t.length;t++)if(1114112==(1114112&n.i.t[t])){let e=n.i.p[t];if(e.F===i){let i=n.i.h[t];i.U.length>0&&_n(n,e,i)}}n.R.disable(3042),n.R.enable(2929)}function Yn(n,t,i){n.R.uniformMatrix4fv(i.F.Nn.i,!1,t.i),n.R.uniformMatrix4fv(i.F.Nn.hn,!1,t.hn),n.R.activeTexture(33984),n.R.bindTexture(3553,i.N),n.R.uniform1i(i.F.Nn.Pt,0),n.R.uniform4fv(i.F.Nn.X,i.X),n.R.uniform1f(i.F.Nn.Vn,i.Vn),n.R.bindVertexArray(i.Bn),n.R.drawElements(i.F.Lt,i.zn.kt,5123,0),n.R.bindVertexArray(null)}function _n(n,t,i){n.R.uniform4fv(t.F.Nn.P,t.P),n.R.uniform4fv(t.F.Nn.L,t.L),n.R.activeTexture(33984),n.R.bindTexture(3553,t.N),n.R.uniform1i(t.F.Nn.Pt,0),n.R.uniform4f(t.F.Nn.Et,i.v,i.m,...t.k);let e=Float32Array.from(i.U);n.R.bindBuffer(34962,t.A),n.R.bufferSubData(34962,0,e),n.R.enableVertexAttribArray(t.F.Nn.It),n.R.vertexAttribPointer(t.F.Nn.It,4,5126,!1,32,0),n.R.enableVertexAttribArray(t.F.Nn.zt),n.R.vertexAttribPointer(t.F.Nn.zt,4,5126,!1,32,16),n.R.drawArrays(t.F.Lt,0,i.U.length/8)}function Hn(n,t,i){let e=n.i.B[t];if(e.V>0){e.V-=i;let l=n.i.on[t];l.un=[2*Math.random()-1,2*Math.random()-1,2*Math.random()-1],o(l.un,l.un,e.K),l.dn=!0,e.V<=0&&(e.V=0,l.un=[0,0,0])}}function Qn(n,t,i){let e=n.i.Z[t];e.M+=i,e.M>e.g&&(e.M=0,e.tn?(e.tn=!1,n.i.t[t]&=~e.nn):(e.tn=!0,n.i.t[t]|=e.nn))}function jn(n,t){for(let t=0;t<n.i.t.length;t++)1048576==(1048576&n.i.t[t])&&Xn(n,t)}function Xn(n,t){let i=n.i.on[t];i.dn&&(i.dn=!1,function n(t,i){for(let e of i.W){let i=t.on[e];i.dn=!0,n(t,i)}}(n.i,i),n.ln&&128&n.i.t[t]||function(n,t,i,e){let o=t[0],l=t[1],r=t[2],a=t[3],s=o+o,u=l+l,f=r+r,c=o*s,h=o*u,d=o*f,v=l*u,g=l*f,m=r*f,T=a*s,U=a*u,M=a*f,y=e[0],C=e[1],S=e[2];n[0]=(1-(v+m))*y,n[1]=(h+M)*y,n[2]=(d-U)*y,n[3]=0,n[4]=(h-M)*C,n[5]=(1-(c+m))*C,n[6]=(g+T)*C,n[7]=0,n[8]=(d+U)*S,n[9]=(g-T)*S,n[10]=(1-(c+v))*S,n[11]=0,n[12]=i[0],n[13]=i[1],n[14]=i[2],n[15]=1}(i.i,i.Y,i.un,i.fn),void 0!==i.vn&&d(i.i,n.i.on[i.vn].i,i.i),h(i.hn,i.i))}function Jn(n,t){let i=n.i.gn[t],e=n.i.T[t];for(let o of i.Rn)gn(n,e.S,[t,o.wt])}function Zn(n,...t){return n.reduce((n,i)=>n+function(n){let t=n.shift();return"boolean"==typeof t||null==t?"":Array.isArray(t)?t.join(""):t}(t)+i)}const nt=function(){let n=[0,0,0],t=[1,0,0],i=[0,1,0];return function(e,o,l){let u=a(o,l);return u<-.999999?(s(n,t,o),c(n)<1e-6&&s(n,i,o),r(n,n),M(e,n,Math.PI),e):u>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(s(n,o,l),e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=1+u,function(n,t){let i=t[0],e=t[1],o=t[2],l=t[3],r=i*i+e*e+o*o+l*l;return r>0&&(r=1/Math.sqrt(r)),n[0]=i*r,n[1]=e*r,n[2]=o*r,n[3]=l*r,n}(e,e))}}();let tt=0,it=new WeakMap,et={O:[6,"lowpass",8,4,!0,"sine",8,8,[[!1,8,5,18,10]]],$:77,q:99},ot={O:[8,"lowpass",9,8,!1,!1,8,1,[[!1,8,5,0,9]]],$:77,q:.1};class lt{constructor(){this.t=[],this.Gn=[],this.o=[],this.lt=[],this.gn=[],this.Kn=[],this.Yn=[],this.nt=[],this.tt=[],this.et=[],this.Fn=[],this.h=[],this.v=[],this.H=[],this.Hn=[],this.in=[],this.p=[],this.bn=[],this.B=[],this.Z=[],this.on=[],this.T=[]}}let rt=Float32Array.from([0,0,1,-1,1,-1,0,-1,-1,0,-1,-1,1,1,-1,0,0,1,1,1,-1,-1,1,-1,0,0,1,0,-1,-1,-1,1,-1,1,1,-1]),at=Float32Array.from([-.8729,-.4364,.2182,-.8729,-.4364,.2182,-.8729,-.4364,.2182,.8729,-.4364,.2182,.8729,-.4364,.2182,.8729,-.4364,.2182,0,.8944,.4472,0,.8944,.4472,0,.8944,.4472,0,0,-1,0,0,-1,0,0,-1]),st=Float32Array.from([0,1,1,0,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,1,0]),ut=Uint16Array.from([11,10,9,8,7,6,5,4,3,2,1,0]),ft=Float32Array.from([-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5]),ct=Float32Array.from([-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,1,0,0,1,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0]),ht=Float32Array.from([.5,.5,.5,1,0,1,0,.5,.5,.5,.5,1,0,1,0,.5,.5,.5,.5,1,0,1,0,.5,1,.5,1,1,.5,1,.5,.5,.5,0,1,0,1,.5,.5,.5,.5,0,.5,.5,0,.5,0,0]),dt=Uint16Array.from([23,22,20,22,21,20,19,18,16,18,17,16,15,14,12,14,13,12,11,10,8,10,9,8,7,6,4,6,5,4,3,2,0,2,1,0]);const vt=[0,0,1];let gt,mt=[0,0,0],Tt=[0,0,0],Ut=[0,0,0],Mt=[0,0,0],yt=[0,0,0],Ct=[0,0,0],St={O:[12,"lowpass",7,0,!1,!1,0,0,[[!1,15,5,2,6]]],$:77,q:.05};const Rt=[0,1,0];let bt=[0,0,0],wt=[0,0,0],xt=[0,0,0],pt=[0,0,0];const Ft=[0,0,0,1];let Dt,At=[0,0,0],Nt=[0,0,0],Pt=[1,1,1],Lt=new class{constructor(){this.i=new lt,this.St=0,this.Rt=0,this.rt=!1,this.Bt=document.querySelector("main"),this.Vt=document.querySelector("canvas"),this.R=this.Vt.getContext("webgl2",{xrCompatible:!0}),this.Audio=new AudioContext,this.yt=!1,this.pt={},this.On=function(n){let t=mn(n,"#version 300 es\n\nuniform mat4 K,L,M;\n\nin vec3 A,B;\nin vec2 C;\nout vec4 D;\nout vec3 E;\nout vec2 F;\n\nvoid main(){\nD=L*vec4(A,1.);\nE=(vec4(B,1.)*M).xyz;\nF=C;\ngl_Position=K*D;\n}\n","#version 300 es\n\nprecision mediump float;\n\nuniform vec4 N;\nuniform vec3 O;\nuniform float P,Q;\nuniform sampler2D R;\n\nuniform vec4 S[8],T[8];\n\nin vec4 D;\nin vec3 E;\nin vec2 F;\nout vec4 G;\n\nvoid main() {\nvec3 a=normalize(E);\n\n\nvec3 b=N.rgb*.2;\n\nfor(int i=0;i<8;i++){\nif(S[i].w==0.)break;\nfloat c=T[i].a;\n\nvec3 d=S[i].xyz-D.xyz;\nfloat e=length(d);\nvec3 f=d/e;\n\nc/=(e*e);\n\nfloat g=dot(a,f);\nif(g>0.){\n\nb+=N.xyz*T[i].xyz*(floor(g*c*4.)/4.);\n}\n}\n\nvec4 h=texture(R,F);\nif(h.a==0.)discard;\n\nG=vec4(b,N.a)*h;\nG=mix(G,vec4(0.,.1,.2,1.),smoothstep(2.,0.,D.y-Q));\nG=mix(G,vec4(0.,.1,.2,1.),smoothstep(0.0, 1.0, clamp(0.,1.,length(O-D.xyz)/P)));\n}\n");return{Lt:4,At:t,Nn:{ht:n.getUniformLocation(t,"K"),i:n.getUniformLocation(t,"L"),hn:n.getUniformLocation(t,"M"),X:n.getUniformLocation(t,"N"),Nt:n.getUniformLocation(t,"O"),vt:n.getUniformLocation(t,"P"),Vn:n.getUniformLocation(t,"Q"),Pt:n.getUniformLocation(t,"R"),Ft:n.getUniformLocation(t,"S"),Dt:n.getUniformLocation(t,"T"),An:n.getAttribLocation(t,"A"),Ln:n.getAttribLocation(t,"C"),En:n.getAttribLocation(t,"B")}}}(this.R),this.D=function(n){let t=mn(n,"#version 300 es\n\nuniform mat4 K;\nuniform vec4 L,M,N;\n\nin vec4 A,B;\nout vec4 C;\nout float D;\n\nvoid main(){\n\ngl_Position=K*vec4(A.xyz+B.xyz*N.y*A.w,1.);\n\n\nfloat t=A.w/N.x;\ngl_PointSize=mix(N.z,N.w,t);\nC=mix(L,M,t);\n\n\nD=A.w*B.w*9.;\n}\n","#version 300 es\n\nprecision mediump float;\n\nuniform sampler2D O;\n\nin vec4 C;\nin float D;\nout vec4 E;\n\nvoid main(){\n\nE=C*texture(O,(gl_PointCoord+round(vec2(cos(D),sin(D))))/2.);\n}\n");return{Lt:0,At:t,Nn:{ht:n.getUniformLocation(t,"K"),P:n.getUniformLocation(t,"L"),L:n.getUniformLocation(t,"M"),Et:n.getUniformLocation(t,"N"),Pt:n.getUniformLocation(t,"O"),It:n.getAttribLocation(t,"A"),zt:n.getAttribLocation(t,"B")}}}(this.R),this.$n=function(n){let t=n.createBuffer();n.bindBuffer(34962,t),n.bufferData(34962,ft,35044);let i=n.createBuffer();n.bindBuffer(34962,i),n.bufferData(34962,ct,35044);let e=n.createBuffer();n.bindBuffer(34962,e),n.bufferData(34962,ht,35044);let o=n.createBuffer();return n.bindBuffer(34963,o),n.bufferData(34963,dt,35044),{Dn:t,Kt:ft,kn:i,Pn:e,In:o,Ot:dt,kt:dt.length}}(this.R),this.qn=function(n){let t=n.createBuffer();n.bindBuffer(34962,t),n.bufferData(34962,rt,35044);let i=n.createBuffer();n.bindBuffer(34962,i),n.bufferData(34962,at,35044);let e=n.createBuffer();n.bindBuffer(34962,e),n.bufferData(34962,st,35044);let o=n.createBuffer();return n.bindBuffer(34963,o),n.bufferData(34963,ut,35044),{Dn:t,Kt:rt,kn:i,Pn:e,In:o,Ot:ut,kt:ut.length}}(this.R),this._={},this.Ft=new Float32Array(32),this.Dt=new Float32Array(32),this.Ut=0,document.addEventListener("visibilitychange",()=>document.hidden?B(this):z(this)),this.R.enable(2929),this.R.enable(2884),this.R.blendFunc(770,1),navigator.xr&&async function(n){n.yt=await navigator.xr.isSessionSupported("immersive-vr")}(this)}an(){this.rt=!1}rn(n){!function(n,t){for(let i=0;i<n.i.t.length;i++)1052672==(1052672&n.i.t[i])&&kn(n,i,t)}(this,n),function(n,t){if(n.ln){n.pt={};for(let t of n.ln.session.inputSources)t.gripSpace&&(n.pt[t.handedness]=t);for(let t=0;t<n.i.t.length;t++)1049088==(1049088&n.i.t[t])&&Pn(n,t)}}(this),function(n,t){for(let i=0;i<n.i.t.length;i++)32==(32&n.i.t[i])&&pn(n,i,t)}(this,n),function(n,t){for(let t=0;t<n.i.t.length;t++)1065024==(1065024&n.i.t[t])&&Fn(n,t)}(this),function(n,t){for(let i=0;i<n.i.t.length;i++)1048832==(1048832&n.i.t[i])&&An(n,i,t)}(this,n),function(n,t){for(let t=0;t<n.i.t.length;t++)1064961==(1064961&n.i.t[t])&&Un(n,t)}(this),function(n,t){for(let i=0;i<n.i.t.length;i++)1064960==(1064960&n.i.t[i])&&In(n,i,t)}(this,n),function(n,t){for(let i=0;i<n.i.t.length;i++)1310720==(1310720&n.i.t[i])&&Hn(n,i,t)}(this,n),function(n,t){for(let i=0;i<n.i.t.length;i++)1050624==(1050624&n.i.t[i])&&Vn(n,i,t)}(this,n),function(n,t){for(let i=0;i<n.i.t.length;i++)524288==(524288&n.i.t[i])&&Qn(n,i,t)}(this,n),function(n,t){if(n.ln)for(let t=0;t<n.i.t.length;t++)1048704==(1048704&n.i.t[t])&&Dn(n,t)}(this),function(n,t){for(let i=0;i<n.i.t.length;i++)1179648==(1179648&n.i.t[i])&&On(n,i,t)}(this,n),jn(this),function(n,t){for(let i=0;i<n.i.t.length;i++)1179648==(1179648&n.i.t[i])&&$n(n,i,t)}(this,n),function(n,t){let i=[],e=[];for(let t=0;t<n.i.t.length;t++)if(1048592==(1048592&n.i.t[t])){let o=n.i.on[t],l=n.i.gn[t];l.Rn=[],l.mn?(l.mn=!1,bn(o.i,l)):l.Tn?(bn(o.i,l),e.push(l)):i.push(l)}for(let n=0;n<e.length;n++)xn(e[n],i,i.length),xn(e[n],e,n)}(this),function(n,t){for(let t=0;t<n.i.t.length;t++)1179664==(1179664&n.i.t[t])&&qn(n,t)}(this),function(n,t){for(let t=0;t<n.i.t.length;t++)135184==(135184&n.i.t[t])&&Kn(n,t)}(this),function(n,t){for(let t=0;t<n.i.t.length;t++)3145744==(3145744&n.i.t[t])&&Jn(n,t)}(this),jn(this),function(n,t){for(let t=0;t<n.i.t.length;t++)1048578==(1048578&n.i.t[t])&&Mn(n,t)}(this),function(n,t){for(let i=0;i<n.i.t.length;i++)4==(4&n.i.t[i])&&Cn(n,i,t)}(this,n),function(n,t){n.St==window.innerWidth&&n.Rt==window.innerHeight||(n.St=n.Vt.width=window.innerWidth,n.Rt=n.Vt.height=window.innerHeight,n.rt=!0),n.lt=void 0;for(let t=0;t<n.i.t.length;t++)if(1048584==(1048584&n.i.t[t])){let i=n.i.lt[t];if(1===i.j&&n.ln)return void Rn(n,t,i);if(1!==i.j&&!n.ln)return void Sn(n,t,i)}}(this),function(n,t){for(let t=0;t<n.i.t.length;t++)1049600==(1049600&n.i.t[t])&&Ln(n,t)}(this),function(n,t){n.Ft.fill(0),n.Dt.fill(0);let i=0;for(let t=0;t<n.i.t.length;t++)1056768==(1056768&n.i.t[t])&&En(n,t,i++)}(this),function(n,t){let i=n.lt;1===i.j?function(n,t){let i=n.ln.session.renderState.baseLayer;n.R.bindFramebuffer(36160,i.framebuffer),n.R.clear(16640);for(let e in t.Mt){let o=t.Mt[e],l=i.getViewport(o.bt);n.R.viewport(l.x,l.y,l.width,l.height),Gn(n,o),Wn(n,o)}}(n,i):function(n,t){n.R.bindFramebuffer(36160,null),n.R.clear(16640),n.rt&&n.R.viewport(0,0,n.St,n.Rt),Gn(n,t),Wn(n,t)}(n,i)}(this),function(n,t){let i=function(n){switch(n.Ut){case 2:return function(n){return Zn`
<div
style="
position: absolute;
bottom: 1vmin;
right: 1vmin;
background: #000;
color: #fff;
font: 5vmin Arial;
"
>
${n.ln?Zn` <div onclick="$(${3})">Exit VR</div> `:n.yt?Zn` <div onclick="$(${2})">Enter VR</div> `:'<div style="padding: 1vmin">WebXR not supported</div>'}
</div>
`}(n);case 1:return"";case 0:return Zn`
<div
style="
position: absolute;
top: 20vmin;
left: 10vmin;
"
>
<div style="font-size: 20vmin">ROAR!</div>
Baby-zilla has been taken away!
</div>
<div
style="
position: absolute;
bottom: 10vmin;
right: 10vmin;
"
>
<div onclick="$(${1})">Play now</div>
</div>
`;case 3:return Zn`
<div
style="
position: absolute;
top: 20vmin;
left: 10vmin;
"
>
<div style="font-size: 20vmin">YOU WIN!</div>
You've found it!
</div>
<div
style="
position: absolute;
bottom: 10vmin;
right: 10vmin;
"
>
<div onclick="$(${1})">Play again</div>
</div>
`;case 4:return Zn`
<div
style="
position: absolute;
top: 20vmin;
left: 10vmin;
"
>
<div style="font-size: 20vmin">YOU LOSE!</div>
A missile has killed you!
</div>
<div
style="
position: absolute;
bottom: 10vmin;
right: 10vmin;
"
>
<div onclick="$(${1})">Play again</div>
</div>
`}}(n);i!==Dt&&(n.Bt.innerHTML=Dt=i)}(this)}};window.$=gn.bind(null,Lt);for(let t of document.querySelectorAll("img"))Lt._[t.id]=n(Lt.R,t);dn(Lt),z(Lt)}();
</script>
