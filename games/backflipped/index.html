<!doctype html><meta name=viewport content="width=device-width"><title>BackFlipped - js13kGames 2019</title><style>body{margin:0;font-family:"Courier New",Courier,monospace;overflow:hidden}body,html{width:100%;height:100%}.zdog-canvas{display:block;width:100%;height:100%}.title{position:absolute;pointer-events:none;text-align:center;-webkit-text-stroke-width:2px;font-weight:800;top:50%;left:50%}.top{font-size:70px;color:#223e32;-webkit-text-stroke-color:#fff;transform:translate(-125%,-190%) skewY(-10deg);text-shadow:-2px -5px #223e32}.bottom{font-size:90px;color:#a7c06d;-webkit-text-stroke-color:#000;transform:skewY(10deg) translate(-40%,-65%);text-shadow:2px -5px #a7c06d}.start{font-size:30px;width:250px;color:#fff;-webkit-text-stroke-width:0;text-shadow:3px -3px #000;transform:translate(-50%,300%);animation:gamestart-start 1s ease-in-out infinite alternate}.notification{position:absolute;top:10px;right:10px;font-size:16px;padding:5px;padding-top:10px;padding-bottom:10px;color:#fff;pointer-events:none}.notification::before{content:"";position:absolute;top:0;bottom:0;left:0;right:0;transform:skewY(3deg);border:#fff solid 2px;pointer-events:none}.int{color:#fff;position:absolute;pointer-events:none;text-align:center;font-weight:800;top:0;left:50%;visibility:hidden}.remaining{font-size:30px;transform:translate(-50%,-50%);width:250px}.jackpot{font-size:20px;transform:translate(0,100%) rotate(-10deg);width:200px;color:#000;background-color:#fff;mix-blend-mode:screen}.score{font-size:20px;transform:translate(-110%,50%);width:80px;border:2px dotted #fff}.colorselect,.levelselect{color:#000;position:absolute;pointer-events:none;text-align:center;font-weight:800;top:50%;left:50%;visibility:hidden;font-size:20px;background-color:#ffffffaa;width:180px;padding:5px}.levelselect{transform:translate(-50%,-140%);height:50px}.colorselect{transform:translate(-50%,0);height:150px}@keyframes gamestart-top{from{transform:translate(-125%,-190%) skewY(-10deg) scale(1,1);opacity:1}to{transform:translate(-125%,-190%) skewY(-10deg) scale(-1.5,1.5) rotate(20deg);opacity:0}}@keyframes gamestart-bottom{from{transform:skewY(10deg) translate(-40%,-65%) scale(1,1);opacity:1}to{transform:skewY(10deg) translate(-40%,-65%) scale(1.5,-1.5) rotate(-20deg);opacity:0}}@keyframes gamestart-start{from{transform:translate(-50%,250%)}to{transform:translate(-50%,200%)}}@keyframes jackpot-gain-1{from{transform:translate(0,80%) rotate(-10deg)}to{transform:translate(0,100%) rotate(-10deg)}}@keyframes jackpot-gain-2{from{transform:translate(0,80%) rotate(-10deg)}to{transform:translate(0,100%) rotate(-10deg)}}@keyframes jackpot-claim-1{0%{transform:translate(0,100%) rotate(-10deg)}50%{transform:translate(0,100%) rotate(-190deg)}100%{transform:translate(0,100%) rotate(-370deg)}}@keyframes jackpot-claim-2{0%{transform:translate(0,100%) rotate(-10deg)}50%{transform:translate(0,100%) rotate(-190deg)}100%{transform:translate(0,100%) rotate(-370deg)}}@media only screen and (max-width:600px){.top{font-size:50px}.bottom{font-size:60px}.start{font-size:20px}.notification{font-size:12px}}@media only screen and (max-width:359px){.top{font-size:30px}.bottom{font-size:40px}.start{font-size:15px}.notification{font-size:10px}}</style><link rel="shortcut icon" href=favicon16.png type=image/png><meta name=monetization content=$coil.xrptipbot.com/3mQNkjRsTVid5VZd6XJv4g><canvas class=zdog-canvas id=game></canvas><script>!function(t,e){t.Zdog=function(){var t={};t.TAU=2*Math.PI,t.extend=function(t,e){for(var i in e)t[i]=e[i];return t},t.lerp=function(t,e,i){return(e-t)*i+t},t.modulo=function(t,e){return(t%e+e)%e};var e={2:function(t){return t*t},3:function(t){return t*t*t},4:function(t){return t*t*t*t},5:function(t){return t*t*t*t*t}};return t.easeInOut=function(t,i){if(1==i)return t;var n=(t=Math.max(0,Math.min(1,t)))<.5,r=n?t:1-t,o=(e[i]||e[2])(r/=.5);return o/=2,n?o:1-o},t}()}(this),function(t,e){var i;t.Zdog.CanvasRenderer=((i={isCanvas:!0,begin:function(t){t.beginPath()},move:function(t,e,i){t.moveTo(i.x,i.y)},line:function(t,e,i){t.lineTo(i.x,i.y)},bezier:function(t,e,i,n,r){t.bezierCurveTo(i.x,i.y,n.x,n.y,r.x,r.y)},closePath:function(t){t.closePath()},setPath:function(){}}).renderPath=function(t,e,n,r){this.begin(t,e),n.forEach((function(n){n.render(t,e,i)})),r&&this.closePath(t,e)},i.stroke=function(t,e,i,n,r){i&&(t.strokeStyle=n,t.lineWidth=r,t.stroke())},i.fill=function(t,e,i,n){i&&(t.fillStyle=n,t.fill())},i.end=function(){},i)}(this),function(t,e){var i=t.Zdog;i.Vector=function(t){function e(t){this.set(t)}var i=t.TAU;function n(t,e,n,r){if(e&&e%i!=0){var o=Math.cos(e),s=Math.sin(e),h=t[n],a=t[r];t[n]=h*o-a*s,t[r]=a*o+h*s}}function r(t){return Math.abs(t-1)<1e-8?1:Math.sqrt(t)}return e.prototype.set=function(t){return this.x=t&&t.x||0,this.y=t&&t.y||0,this.z=t&&t.z||0,this},e.prototype.write=function(t){return t?(this.x=null!=t.x?t.x:this.x,this.y=null!=t.y?t.y:this.y,this.z=null!=t.z?t.z:this.z,this):this},e.prototype.rotate=function(t){if(t)return this.rotateZ(t.z),this.rotateY(t.y),this.rotateX(t.x),this},e.prototype.rotateZ=function(t){n(this,t,"x","y")},e.prototype.rotateX=function(t){n(this,t,"y","z")},e.prototype.rotateY=function(t){n(this,t,"x","z")},e.prototype.isSame=function(t){return!!t&&this.x===t.x&&this.y===t.y&&this.z===t.z},e.prototype.add=function(t){return t?(this.x+=t.x||0,this.y+=t.y||0,this.z+=t.z||0,this):this},e.prototype.subtract=function(t){return t?(this.x-=t.x||0,this.y-=t.y||0,this.z-=t.z||0,this):this},e.prototype.multiply=function(t){return null==t||("number"==typeof t?(this.x*=t,this.y*=t,this.z*=t):(this.x*=null!=t.x?t.x:1,this.y*=null!=t.y?t.y:1,this.z*=null!=t.z?t.z:1)),this},e.prototype.transform=function(t,e,i){return this.multiply(i),this.rotate(e),this.add(t),this},e.prototype.lerp=function(e,i){return this.x=t.lerp(this.x,e.x||0,i),this.y=t.lerp(this.y,e.y||0,i),this.z=t.lerp(this.z,e.z||0,i),this},e.prototype.magnitude=function(){return r(this.x*this.x+this.y*this.y+this.z*this.z)},e.prototype.magnitude2d=function(){return r(this.x*this.x+this.y*this.y)},e.prototype.copy=function(){return new e(this)},e}(i)}(this),function(t,e){var i=t.Zdog;i.Anchor=function(t,e,i,n){var r=t.TAU,o={x:1,y:1,z:1};function s(t){this.create(t||{})}return s.prototype.create=function(i){this.children=[],t.extend(this,this.constructor.defaults),this.setOptions(i),this.translate=new e(i.translate),this.rotate=new e(i.rotate),this.scale=new e(o).multiply(this.scale),this.origin=new e,this.renderOrigin=new e,this.addTo&&this.addTo.addChild(this)},s.defaults={},s.optionKeys=Object.keys(s.defaults).concat(["rotate","translate","scale","addTo"]),s.prototype.setOptions=function(t){var e=this.constructor.optionKeys;for(var i in t)-1!=e.indexOf(i)&&(this[i]=t[i])},s.prototype.addChild=function(t){-1==this.children.indexOf(t)&&(t.remove(),t.addTo=this,this.children.push(t))},s.prototype.removeChild=function(t){var e=this.children.indexOf(t);-1!=e&&this.children.splice(e,1)},s.prototype.remove=function(){this.addTo&&this.addTo.removeChild(this)},s.prototype.update=function(){0!=this.visible&&(this.reset(),this.children.forEach((function(t){t.update()})),this.transform(this.translate,this.rotate,this.scale))},s.prototype.reset=function(){this.renderOrigin.set(this.origin)},s.prototype.transform=function(t,e,i){this.renderOrigin.transform(t,e,i),this.children.forEach((function(n){n.transform(t,e,i)}))},s.prototype.updateGraph=function(){this.update(),this.updateFlatGraph(),this.flatGraph.forEach((function(t){t.updateSortValue()})),this.flatGraph.sort(s.shapeSorter)},s.shapeSorter=function(t,e){return t.sortValue-e.sortValue},Object.defineProperty(s.prototype,"flatGraph",{get:function(){return this._flatGraph||this.updateFlatGraph(),this._flatGraph},set:function(t){this._flatGraph=t}}),s.prototype.updateFlatGraph=function(){this.flatGraph=this.getFlatGraph()},s.prototype.getFlatGraph=function(){var t=[this];return this.addChildFlatGraph(t)},s.prototype.addChildFlatGraph=function(t){return this.children.forEach((function(e){var i=e.getFlatGraph();Array.prototype.push.apply(t,i)})),t},s.prototype.updateSortValue=function(){this.sortValue=this.renderOrigin.z},s.prototype.render=function(){},s.prototype.renderGraphCanvas=function(t){this.flatGraph.forEach((function(e){e.render(t,i)}))},s.prototype.renderGraphSvg=function(t){this.flatGraph.forEach((function(e){e.render(t,n)}))},s.prototype.copy=function(e){var i={};return this.constructor.optionKeys.forEach((function(t){i[t]=this[t]}),this),t.extend(i,e),new(0,this.constructor)(i)},s.prototype.copyGraph=function(t){var e=this.copy(t);return this.children.forEach((function(t){t.copyGraph({addTo:e})})),e},s.prototype.normalizeRotate=function(){this.rotate.x=t.modulo(this.rotate.x,r),this.rotate.y=t.modulo(this.rotate.y,r),this.rotate.z=t.modulo(this.rotate.z,r)},s.subclass=function e(i){return function(n){function r(t){this.create(t||{})}return r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.defaults=t.extend({},i.defaults),t.extend(r.defaults,n),r.optionKeys=i.optionKeys.slice(0),Object.keys(r.defaults).forEach((function(t){1!=!r.optionKeys.indexOf(t)&&r.optionKeys.push(t)})),r.subclass=e(r),r}}(s),s}(i,i.Vector,i.CanvasRenderer,i.SvgRenderer)}(this),function(t,e){t.Zdog.Dragger=function(t){function e(t){this.create(t||{})}return e.prototype.create=function(t){},e.prototype.getQueryElement=function(t){return"string"==typeof t&&(t=document.querySelector(t)),t},e}()}(this),function(t,e){var i=t.Zdog;i.Illustration=function(t,e,i){function n(){}t.TAU;var r=e.subclass({element:void 0,centered:!0,zoom:1,dragRotate:!1,resize:!1,onPrerender:n,onDragStart:n,onDragMove:n,onDragEnd:n,onResize:n});return t.extend(r.prototype,i.prototype),r.prototype.create=function(t){e.prototype.create.call(this,t),i.prototype.create.call(this,t),this.setElement(this.element),this.setDragRotate(this.dragRotate),this.setResize(this.resize)},r.prototype.setElement=function(t){var e=(t=this.getQueryElement(t)).nodeName.toLowerCase();"canvas"==e?this.setCanvas(t):"svg"==e&&this.setSvg(t)},r.prototype.setSize=function(t,e){t=Math.round(t),e=Math.round(e),this.isCanvas?this.setSizeCanvas(t,e):this.isSvg&&this.setSizeSvg(t,e)},r.prototype.setResize=function(t){this.resize=t,this.resizeListener||(this.resizeListener=this.onWindowResize.bind(this)),t?(window.addEventListener("resize",this.resizeListener),this.onWindowResize()):window.removeEventListener("resize",this.resizeListener)},r.prototype.onWindowResize=function(){this.setMeasuredSize(),this.onResize(this.width,this.height)},r.prototype.setMeasuredSize=function(){var t,e;if("fullscreen"==this.resize)t=window.innerWidth,e=window.innerHeight;else{var i=this.element.getBoundingClientRect();t=i.width,e=i.height}this.setSize(t,e)},r.prototype.renderGraph=function(t){this.isCanvas?this.renderGraphCanvas(t):this.isSvg&&this.renderGraphSvg(t)},r.prototype.updateRenderGraph=function(t){this.updateGraph(),this.renderGraph(t)},r.prototype.setCanvas=function(t){this.element=t,this.isCanvas=!0,this.ctx=this.element.getContext("2d"),this.setSizeCanvas(t.width,t.height)},r.prototype.setSizeCanvas=function(t,e){this.width=t,this.height=e;var i=this.pixelRatio=window.devicePixelRatio||1;this.element.width=this.canvasWidth=t*i,this.element.height=this.canvasHeight=e*i,i>1&&!this.resize&&(this.element.style.width=t+"px",this.element.style.height=e+"px")},r.prototype.renderGraphCanvas=function(t){t=t||this,this.prerenderCanvas(),e.prototype.renderGraphCanvas.call(t,this.ctx),this.postrenderCanvas()},r.prototype.prerenderCanvas=function(){var t=this.ctx;if(t.lineCap="round",t.lineJoin="round",t.clearRect(0,0,this.canvasWidth,this.canvasHeight),t.save(),this.centered){var e=this.width/2*this.pixelRatio,i=this.height/2*this.pixelRatio;t.translate(e,i)}var n=this.pixelRatio*this.zoom;t.scale(n,n),this.onPrerender(t)},r.prototype.postrenderCanvas=function(){this.ctx.restore()},r.prototype.setDragRotate=function(t){t&&(!0===t&&(t=this),this.dragRotate=t,this.bindDrag(this.element))},r}(i,i.Anchor,i.Dragger)}(this),function(t,e){var i=t.Zdog;i.PathCommand=function(t){function e(t,e,r){this.method=t,this.points=e.map(i),this.renderPoints=e.map(n),this.previousPoint=r,this.endRenderPoint=this.renderPoints[this.renderPoints.length-1]}function i(e){return e instanceof t?e:new t(e)}function n(e){return new t(e)}return e.prototype.reset=function(){var t=this.points;this.renderPoints.forEach((function(e,i){var n=t[i];e.set(n)}))},e.prototype.transform=function(t,e,i){this.renderPoints.forEach((function(n){n.transform(t,e,i)}))},e.prototype.render=function(t,e,i){return this[this.method](t,e,i)},e.prototype.move=function(t,e,i){return i.move(t,e,this.renderPoints[0])},e.prototype.line=function(t,e,i){return i.line(t,e,this.renderPoints[0])},e}(i.Vector)}(this),function(t,e){var i=t.Zdog;i.Shape=function(t,e,i,n){var r=n.subclass({stroke:1,fill:!1,color:"#333",closed:!0,visible:!0,path:[{}],front:{z:1},backface:!0});r.prototype.create=function(t){n.prototype.create.call(this,t),this.updatePath(),this.front=new e(t.front||this.front),this.renderFront=new e(this.front),this.renderNormal=new e};var o=["move","line"];r.prototype.updatePath=function(){this.setPath(),this.updatePathCommands()},r.prototype.setPath=function(){},r.prototype.updatePathCommands=function(){var t;this.pathCommands=this.path.map((function(e,n){var r=Object.keys(e),s=r[0],h=e[s];1==r.length&&-1!=o.indexOf(s)||(s="line",h=e);var a="line"==s||"move"==s,p=Array.isArray(h);a&&!p&&(h=[h]);var c=new i(s=0===n?"move":s,h,t);return t=c.endRenderPoint,c}))},r.prototype.reset=function(){this.renderOrigin.set(this.origin),this.renderFront.set(this.front),this.pathCommands.forEach((function(t){t.reset()}))},r.prototype.transform=function(t,e,i){this.renderOrigin.transform(t,e,i),this.renderFront.transform(t,e,i),this.renderNormal.set(this.renderOrigin).subtract(this.renderFront),this.pathCommands.forEach((function(n){n.transform(t,e,i)})),this.children.forEach((function(n){n.transform(t,e,i)}))},r.prototype.updateSortValue=function(){var t=this.pathCommands.length,e=this.pathCommands[0].endRenderPoint,i=this.pathCommands[t-1].endRenderPoint;t>2&&e.isSame(i)&&(t-=1);for(var n=0,r=0;r<t;r++)n+=this.pathCommands[r].endRenderPoint.z;this.sortValue=n/t},r.prototype.render=function(t,e){var i=this.pathCommands.length;if(this.visible&&i&&(this.isFacingBack=this.renderNormal.z>0,this.backface||!this.isFacingBack)){var n=1==i;e.isCanvas&&n?this.renderCanvasDot(t,e):this.renderPath(t,e)}};var s=t.TAU;return r.prototype.renderCanvasDot=function(t){var e=this.getLineWidth();if(e){t.fillStyle=this.getRenderColor();var i=this.pathCommands[0].endRenderPoint;t.beginPath();var n=e/2;t.arc(i.x,i.y,n,0,s),t.fill()}},r.prototype.getLineWidth=function(){return this.stroke?1==this.stroke?1:this.stroke:0},r.prototype.getRenderColor=function(){return"string"==typeof this.backface&&this.isFacingBack?this.backface:this.color},r.prototype.renderPath=function(t,e){var i=this.getRenderElement(t,e),n=!(2==this.pathCommands.length&&"line"==this.pathCommands[1].method)&&this.closed,r=this.getRenderColor();e.renderPath(t,i,this.pathCommands,n),e.stroke(t,i,this.stroke,r,this.getLineWidth()),e.fill(t,i,this.fill,r),e.end(t,i)},r.prototype.getRenderElement=function(t,e){if(e.isSvg)return this.svgElement},r}(i,i.Vector,i.PathCommand,i.Anchor)}(this),function(t,e){var i,n,r=t.Zdog;r.Group=((n=(i=r.Anchor).subclass({updateSort:!1,visible:!0})).prototype.updateSortValue=function(){var t=0;this.flatGraph.forEach((function(e){e.updateSortValue(),t+=e.sortValue})),this.sortValue=t/this.flatGraph.length,this.updateSort&&this.flatGraph.sort(i.shapeSorter)},n.prototype.render=function(t,e){this.visible&&this.flatGraph.forEach((function(i){i.render(t,e)}))},n.prototype.updateFlatGraph=function(){this.flatGraph=this.addChildFlatGraph([])},n.prototype.getFlatGraph=function(){return[this]},n)}(this),function(t,e){var i,n=t.Zdog;n.Rect=((i=n.Shape.subclass({width:1,height:1})).prototype.setPath=function(){var t=this.width/2,e=this.height/2;this.path=[{x:-t,y:-e},{x:t,y:-e},{x:t,y:e},{x:-t,y:e}]},i)}(this),function(t,e){var i=t.Zdog;i.Box=function(t,e,i,n){var r=n.subclass();r.prototype.copyGraph=function(){};var o=t.TAU,s=["frontFace","rearFace","leftFace","rightFace","topFace","bottomFace"],h=t.extend({},i.defaults);delete h.path,s.forEach((function(t){h[t]=!0})),t.extend(h,{width:1,height:1,depth:1,fill:!0});var a=e.subclass(h);return a.prototype.create=function(t){e.prototype.create.call(this,t),this.updatePath(),this.fill=this.fill},a.prototype.updatePath=function(){s.forEach((function(t){this[t]=this[t]}),this)},s.forEach((function(t){var e="_"+t;Object.defineProperty(a.prototype,t,{get:function(){return this[e]},set:function(i){this[e]=i,this.setFace(t,i)}})})),a.prototype.setFace=function(t,e){var i=t+"Rect",n=this[i];if(e){var o=this.getFaceOptions(t);o.color="string"==typeof e?e:this.color,n?n.setOptions(o):n=this[i]=new r(o),n.updatePath(),this.addChild(n)}else this.removeChild(n)},a.prototype.getFaceOptions=function(t){return{frontFace:{width:this.width,height:this.height,translate:{z:this.depth/2}},rearFace:{width:this.width,height:this.height,translate:{z:-this.depth/2},rotate:{y:o/2}},leftFace:{width:this.depth,height:this.height,translate:{x:-this.width/2},rotate:{y:-o/4}},rightFace:{width:this.depth,height:this.height,translate:{x:this.width/2},rotate:{y:o/4}},topFace:{width:this.width,height:this.depth,translate:{y:-this.height/2},rotate:{x:-o/4}},bottomFace:{width:this.width,height:this.depth,translate:{y:this.height/2},rotate:{x:o/4}}}[t]},["color","stroke","fill","backface","front","visible"].forEach((function(t){var e="_"+t;Object.defineProperty(a.prototype,t,{get:function(){return this[e]},set:function(i){this[e]=i,s.forEach((function(e){var n=this[e+"Rect"],r="string"==typeof this[e];n&&("color"!=t||!r)&&(n[t]=i)}),this)}})})),a}(i,i.Anchor,i.Shape,i.Rect)}(this)</script><script>function SfxrParams(){this.setSettings=function(r){for(var a=0;a<24;a++)this[String.fromCharCode(97+a)]=r[a]||0;this.c<.01&&(this.c=.01);var t=this.b+this.c+this.e;if(t<.18){var e=.18/t;this.b*=e,this.c*=e,this.e*=e}}}function SfxrSynth(){var r,a,t,e,s,n,i,h,f,c,o,v;this._params=new SfxrParams,this.reset=function(){var r=this._params;e=100/(r.f*r.f+.001),s=100/(r.g*r.g+.001),n=1-r.h*r.h*r.h*.01,i=-r.i*r.i*r.i*1e-6,r.a||(o=.5-r.n/2,v=5e-5*-r.o),h=1+r.l*r.l*(r.l>0?-.9:10),f=0,c=1==r.m?0:(1-r.m)*(1-r.m)*2e4+32},this.totalReset=function(){this.reset();var e=this._params;return r=e.b*e.b*1e5,a=e.c*e.c*1e5,t=e.e*e.e*1e5+12,3*((r+a+t)/3|0)},this.synthWave=function(u,b){var w=this._params,m=1!=w.s||w.v,y=w.v*w.v*.1,g=1+3e-4*w.w,k=w.s*w.s*w.s*.1,S=1+1e-4*w.t,l=1!=w.s,p=w.x*w.x,d=w.g,x=w.q||w.r,A=w.r*w.r*w.r*.2,q=w.q*w.q*(w.q<0?-1020:1020),M=w.p?32+((1-w.p)*(1-w.p)*2e4|0):0,_=w.d,U=w.j/2,j=w.k*w.k*.01,C=w.a,P=r,R=1/r,W=1/a,z=1/t,B=5/(1+w.u*w.u*20)*(.01+k);B>.8&&(B=.8),B=1-B;for(var D,E,F,G,H,I,J=!1,K=0,L=0,N=0,O=0,Q=0,T=0,V=0,X=0,Y=0,Z=0,$=new Array(1024),rr=new Array(32),ar=$.length;ar--;)$[ar]=0;for(ar=rr.length;ar--;)rr[ar]=2*Math.random()-1;for(ar=0;ar<b;ar++){if(J)return ar;if(M&&++Y>=M&&(Y=0,this.reset()),c&&++f>=c&&(c=0,e*=h),(e*=n+=i)>s&&(e=s,d>0&&(J=!0)),E=e,U>0&&(Z+=j,E*=1+Math.sin(Z)*U),(E|=0)<8&&(E=8),C||((o+=v)<0?o=0:o>.5&&(o=.5)),++L>P)switch(L=0,++K){case 1:P=a;break;case 2:P=t}switch(K){case 0:N=L*R;break;case 1:N=1+2*(1-L*W)*_;break;case 2:N=1-L*z;break;case 3:N=0,J=!0}x&&((F=0|(q+=A))<0?F=-F:F>1023&&(F=1023)),m&&g&&((y*=g)<1e-5?y=1e-5:y>.1&&(y=.1)),I=0;for(var tr=8;tr--;){if(++V>=E&&(V%=E,3==C))for(var er=rr.length;er--;)rr[er]=2*Math.random()-1;switch(C){case 0:H=V/E<o?.5:-.5;break;case 1:H=1-V/E*2;break;case 2:H=.225*(((H=1.27323954*(G=6.28318531*((G=V/E)>.5?G-1:G))+.405284735*G*G*(G<0?1:-1))<0?-1:1)*H*H-H)+H;break;case 3:H=rr[Math.abs(32*V/E|0)]}m&&(D=T,(k*=S)<0?k=0:k>.1&&(k=.1),l?(Q+=(H-T)*k,Q*=B):(T=H,Q=0),O+=(T+=Q)-D,H=O*=1-y),x&&($[X%1024]=H,H+=$[(X-F+1024)%1024],X++),I+=H}I*=.125*N*p,u[ar]=I>=1?32767:I<=-1?-32768:32767*I|0}return b}}var synth=new SfxrSynth;window.jsfxr=function(r){synth._params.setSettings(r);var a=synth.totalReset(),t=new Uint8Array(4*((a+1)/2|0)+44),e=2*synth.synthWave(new Uint16Array(t.buffer,44),a),s=new Uint32Array(t.buffer,0,44);s[0]=1179011410,s[1]=e+36,s[2]=1163280727,s[3]=544501094,s[4]=16,s[5]=65537,s[6]=44100,s[7]=88200,s[8]=1048578,s[9]=1635017060,s[10]=e,e+=44;for(var n=0,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="data:audio/wav;base64,";n<e;n+=3){var f=t[n]<<16|t[n+1]<<8|t[n+2];h+=i[f>>18]+i[f>>12&63]+i[f>>6&63]+i[63&f]}return h}</script><script>x=game.getContext`2d`;const M=Math,V="visible",H="hidden",TAU=Zdog.TAU,c_startverticalspeed=1,c_addverticalspeed=1;c_fallspeed=3,c_dropspeed=5;const limit=M.tan(.375*M.PI),c_adddropspeed=.025,c_jumpspeed=5,c_addjumpspeed=.1,c_starttime=60,c_startjackpot=5,c_timegainperblock=.2,c_horborder=200,c_yflipmargin=100;inputbuffer="",inputtime=0,state=0,paused=!1,canstartgame=!1,playermovex=0,playermovey=1,flipped=1,flipvisual=1,flipy=9e3,fliptop=0,flipbottom=0,cameray=0,shakex=0,shakey=0,shakeduration=0,obstacle=[],visobstacle=[],dots=[],timeleft=c_starttime,timejackpot=c_startjackpot,score=0,hiscore=0,activated=0,activategoal=0,level=5,seed=200,palette=0,palletename="",c=[],c[0]="#223e32",c[1]="#A7C06D",c[2]="#b3dd52",c[3]="#015d00",c[4]="#04bf00",c[5]="#ffffff",palettename="Default Colors",bgcolor=c[0],document.addEventListener("DOMContentLoaded",HtmlLoaded),initGame(),switchPalette(palette),setInterval((e=>{step(!1)}),1/60*1e3),onkeydown=e=>{"ArrowDown"!=e.key&&"ArrowUp"!=e.key&&" "!=e.key&&"Backspace"!=e.key||e.preventDefault(),input(e.key)};let pageWidth=window.innerWidth||document.body.clientWidth,treshold=10,touchstartX=0,touchstartY=0,touchendX=0,touchendY=0;function initGame(){illo=new Zdog.Illustration({element:".zdog-canvas",dragRotate:!1,zoom:2,resize:!0,rotate:{x:-TAU/16,y:TAU/16},onPrerender:function(e){e.beginPath(),e.rect(-1080,-1080,2160,2160),e.fillStyle=bgcolor,e.fill()}}),player=new Zdog.Group({addTo:illo,transform:{z:25}}),head=new Zdog.Shape({addTo:player,stroke:24,color:c[4]}),eyes=new Zdog.Shape({addTo:player,stroke:5,color:"#fff",translate:{z:5},path:[{x:-6,y:-10},{x:-6,y:0},{move:{x:6,y:-10}},{x:6,y:0}]}),legs=new Zdog.Shape({addTo:player,stroke:5,color:c[4],translate:{y:16,z:5},path:[{x:-6,y:-10},{x:-6,y:0},{x:-10,y:0},{move:{x:6,y:-10}},{x:6,y:0},{x:10,y:0}]}),border=new Zdog.Shape({addTo:illo,stroke:8,color:c[1],path:[{x:-c_horborder-10,y:-700},{x:-c_horborder-10,y:700},{move:{x:c_horborder+10,y:-700}},{x:c_horborder+10,y:700}]}),flipline=new Zdog.Shape({addTo:illo,stroke:8,color:c[1],translate:{z:25},path:[{x:1*-c_horborder},{x:.9*-c_horborder},{move:{x:.8*-c_horborder}},{x:.7*-c_horborder},{move:{x:.6*-c_horborder}},{x:.5*-c_horborder},{move:{x:.4*-c_horborder}},{x:.3*-c_horborder},{move:{x:.2*-c_horborder}},{x:.1*-c_horborder},{move:{x:0}},{x:.1*c_horborder},{move:{x:.2*c_horborder}},{x:.3*c_horborder},{move:{x:.4*c_horborder}},{x:.5*c_horborder},{move:{x:.6*c_horborder}},{x:.7*c_horborder},{move:{x:.8*c_horborder}},{x:.9*c_horborder},{move:{x:c_horborder}},{x:1.1*c_horborder}]}),dotanchor=new Zdog.Group({addTo:border});for(var e=0;100!=e;e+=1){var t=M.round(10*random())/10,a="bb";t>4&&(a="88"),t>7&&(a="44"),dots[e]=new Zdog.Shape({addTo:dotanchor,translate:{x:2e3*random()-1e3,y:1e3*random(),z:1e3*random()},stroke:10*t,color:c[4]+a})}trail=new Zdog.Shape({addTo:illo,stroke:15,color:c[5]+"44",closed:!1,translate:{z:-200}}),checkCookie(),resizeScreen(),loadLevel(),draw()}function loadLevel(){if(obstacle.length>1)for(var e=0;e!=obstacle.length;e++)obstacle[e].remove(),obstacle[e]=void 0;0==state||2==state?(player.visible=!1,trail.visible=!1):(player.visible=!0,trail.visible=!0,vis(i1,V),vis(i2,V),vis(i3,V)),border.color=c[1],flipline.color=c[1],trail.translate.z=-200,11==level?seed=1e6*M.random()+1e4:seed=1e3*level,c_fallspeed=3,c_dropspeed=5,obstacle.length=0,visobstacle.length=0,trail.path.length=0,flipped=1,flipvisual=1,bgcolor=c[0],player.translate.x=0,player.translate.y=-100,playermovex=0,1==state?playermovey=c_fallspeed:playermovey=c_fallspeed/2;var t=0;11==level?(timeleft=c_starttime,timejackpot=c_startjackpot,score=0,t=10):(t=1+4*level,timeleft=12+8.5*level),illo.rotate={x:-TAU/16,y:TAU/16},flipy=generateObstacles(t,100,flipped)+c_yflipmargin,11!=level&&(activated=0,activategoal=M.round(obstacle.length*(1.6+.08*level))),flipline.translate.y=flipy,fliptop=0,flipbottom=flipy}function generateObstacles(e,t,a){for(var o=t,l=0;l!=e;l++){var r=M.round(10*random());-1==r&&(r=M.round(10*random()));var i=0,s=0,c=0,n=0,d=random()>=.1;switch(-1==flipped&&(d=!d),r){case 0:s=40+M.round(10*random())/10*100,c=.5*(M.round(10*random())/10*(c_horborder- -c_horborder)-c_horborder),n=o,obstacle[obstacle.length]=addObstacle(c+.5*c_horborder,n,40,s,d),obstacle[obstacle.length]=addObstacle(-c-.5*c_horborder,n,40,s,d);break;case 1:s=40+M.round(10*random())/10*100,c=.7*(M.round(10*random())/10*(c_horborder- -c_horborder)-c_horborder),n=o,obstacle[obstacle.length]=addObstacle(c,n,40,s,d),n+=50*a,obstacle[obstacle.length]=addObstacle(-c,n,40,s,d),o+=50*a;break;case 2:c=.8*(M.round(10*random())/10*(c_horborder- -c_horborder)-c_horborder),n=o,s=30,obstacle[obstacle.length]=addObstacle(c,n,64,s,d),n+=50*a,obstacle[obstacle.length]=addObstacle(c,n,24,s,d),o+=80*a;break;case 3:s=80,c=.25*(M.round(10*random())/10*(c_horborder- -c_horborder)-c_horborder),n=o,obstacle[obstacle.length]=addObstacle(c-.4*c_horborder,n,24,s,d),obstacle[obstacle.length]=addObstacle(c,n,24,s,d),obstacle[obstacle.length]=addObstacle(c+.4*c_horborder,n,24,s,d),o+=50*a;break;case 4:s=40+M.round(10*random())/10*100,c=.25*(M.round(10*random())/10*(c_horborder- -c_horborder)-c_horborder),n=o,obstacle[obstacle.length]=addObstacle(c-.35*c_horborder,n,40,s,d),n+=50*a,obstacle[obstacle.length]=addObstacle(c,n,40,s,d),n+=50*a,obstacle[obstacle.length]=addObstacle(c+.35*c_horborder,n,40,s,d),o+=150*a;break;case 5:i=s=80+M.round(10*random())/10*40,c=.25*(M.round(10*random())/10*(c_horborder- -c_horborder)-c_horborder),n=o,obstacle[obstacle.length]=addObstacle(c,n,.75*i,8,d),n+=s/2*a,obstacle[obstacle.length]=addObstacle(c-.35*c_horborder,n,16,s,d),obstacle[obstacle.length]=addObstacle(c+.35*c_horborder,n,16,s,d),n+=s/2*a,obstacle[obstacle.length]=addObstacle(c,n,.9*i,8,d),o+=100*a;break;case 6:c=.1*(M.round(10*random())/10*(c_horborder- -c_horborder)-c_horborder),n=o+40*a,s=16,obstacle[obstacle.length]=addObstacle(c,n,1.5*c_horborder,s,d),o+=80*a;break;default:s=40+M.round(10*random())/10*100,c=.8*(M.round(10*random())/10*(c_horborder- -c_horborder)-c_horborder),n=o,obstacle[obstacle.length]=addObstacle(c,n,40,s,d)}o+=(40+s)*a}return o}function addObstacle(e,t,a,o,l){var r=c[3];1==l&&(r=c[2]);var i=new Zdog.Box({addTo:illo,width:a,height:o,frontFace:!1,backFace:!1,depth:16,stroke:8,cornerRadius:20,color:r,visible:!1,translate:{x:e,y:t,z:50*l-25}});return i.zspeed=0,i}function step(e){if(inputtime>=2&&""!=inputbuffer&&(inputtime-=1,input(inputbuffer),1==inputtime&&(inputtime=0,inputbuffer="")),1==state&&0==paused&&(timeleft-=1/60,timeleft<=0&&gameOver()),1==state)if(i1.innerHTML="Time: "+timeleft.toFixed(2).toString(),timeleft<10?i1.style.color="#F08080":i1.style.color="white",11==level){i2.innerHTML="All clear: +"+timejackpot.toString();var t=(player.translate.y-(fliptop-c_yflipmargin))/(flipbottom+c_yflipmargin-(fliptop-c_yflipmargin))*9.25;-1==flipped&&(t=9.45-t),t=M.max(0,t),i3.innerHTML="Flips: "+score.toString()+"."+t.toFixed(0).toString()}else i2.innerHTML=activated.toString()+" of "+activategoal.toString(),i3.innerHTML="Level:\n"+level.toString();if(!paused||0!=e){if(shakeduration>0?(illo.translate={x:0+shakex,y:cameray+shakey},shakeduration-=1,shakeduration<=0&&(shakex="",shakey="")):illo.translate={x:0,y:cameray},0!=playermovex&&(playermovex+=c_addverticalspeed*M.sign(playermovex)),(playermovey<=-c_dropspeed&&-1==flipped||playermovey>=c_dropspeed&&1==flipped)&&1==state&&0==playermovex?playermovey+=c_adddropspeed*M.sign(playermovey):(1==flipped&&playermovey<1||-1==flipped&&playermovey>-1)&&0==playermovex&&(playermovey+=c_addjumpspeed*flipped),flipvisual!=flipped&&(-1==flipped?(illo.rotate.x+=TAU/64,flipvisual-=1/16):(illo.rotate.x+=TAU/64,flipvisual+=1/16)),1==flipped&&player.translate.y>flipy||-1==flipped&&player.translate.y<flipy){player.translate.y=flipy,flipped=-flipped;var a=player.translate.y;player.translate.y=0;for(var o=0;o!=obstacle.length;o+=1)obstacle[o].translate.y-=a;for(o=0;o!=trail.path.length;o+=1)trail.path[o].y-=a;if(fliptop-=a,flipbottom-=a,dotanchor.translate.y-=a,11==level&&(c_dropspeed+=.1,c_fallspeed+=.1),playermovey=flipped*c_fallspeed,0!=state&&2!=state||(playermovey=flipped*c_fallspeed*.5),11==level){score+=1;var l=!0;if(1==flipped){for(o=0;o!=obstacle.length;o+=1)if(25!=obstacle[o].translate.z){l=!1;break}flipbottom=generateObstacles(1,flipbottom-50,flipped),flipy=flipbottom+c_yflipmargin}else{for(o=0;o!=obstacle.length;o+=1)if(-25!=obstacle[o].translate.z){l=!1;break}fliptop=generateObstacles(1,fliptop+50,flipped),flipy=fliptop-c_yflipmargin}l&&("jackpot-claim-2"!=i2.style.animationName?i2.style.animation="jackpot-claim-2 1s ease-in-out":i2.style.animation="jackpot-claim-1 1s ease-in-out",timeleft+=timejackpot,sound([0,,.07,.57,.24,.75,,,,,,,,,,,,,1,,,,,.2]))}else 1==flipped?flipy=flipbottom+c_yflipmargin:flipy=fliptop-c_yflipmargin;flipline.translate.y=flipy,timejackpot=c_startjackpot,1==state&&sound([0,,,,.39,.39,,.13,,,,,,.57,,.44,,,1,,,,,.15]),-1==flipped?(bgcolor=c[1],border.color=c[0],flipline.color=c[0],trail.translate.z=200):(bgcolor=c[0],border.color=c[1],flipline.color=c[1],trail.translate.z=-200)}for(visobstacle.length=0,o=0;o!=obstacle.length;o++)0!=obstacle[o].zspeed&&(obstacle[o].translate.z>=35?(obstacle[o].translate.z=25,obstacle[o].zspeed=0):obstacle[o].translate.z<=-35?(obstacle[o].translate.z=-25,obstacle[o].zspeed=0):obstacle[o].translate.z+=5*M.sign(obstacle[o].zspeed)),obstacle[o].translate.y>player.translate.y-700&&obstacle[o].translate.y<player.translate.y+1e3?(obstacle[o].visible=!0,visobstacle[visobstacle.length]=obstacle[o]):1==obstacle[o].visible&&(obstacle[o].visible=!1);for(var r=0;4!=r;r+=1)if(player.translate.x+=playermovex/4,player.translate.x>c_horborder&&(player.translate.x=c_horborder,playermovex=0,playermovey=1*flipped),player.translate.x<-c_horborder&&(player.translate.x=-c_horborder,playermovex=0,playermovey=1*flipped),player.translate.y+=playermovey/4,1==state)for(o=0;o!=visobstacle.length;o++)if(xx=visobstacle[o].translate.x-10*flipped,yy=visobstacle[o].translate.y+6,zz=visobstacle[o].translate.z,w=visobstacle[o].width,aw=1.2*visobstacle[o].width,h=visobstacle[o].height-3,(1==flipped&&25==zz||-1==flipped&&-25==zz)&&player.translate.x>xx-aw&&player.translate.x<xx+aw&&player.translate.y>yy-h&&player.translate.y<yy+h){var i=!1;0==playermovex?player.translate.x>xx-w&&player.translate.x<xx+w?(playermovey=c_dropspeed*flipped,shakey=2,shakeduration=2,shakex=0,shakey=10,shakeduration=3,i=!0):i=!0:player.translate.x>xx-w&&player.translate.x<xx+w&&(playermovex>0?shakex=5:playermovex<0?shakex=-5:shakex=0,playermovex=0,playermovey=c_dropspeed*flipped,shakey=0,shakeduration=2,i=!0),i&&(pushObstacleToFlipside(visobstacle[o]),sound([0,,.035,,.15+.5*random(),.49,,-.53,,,,,,.03,,,,,1,,,,,.15]))}draw()}}function pushObstacleToFlipside(e){25==e.translate.z?(e.zspeed=-10,e.translate.z+=e.zspeed,e.color=c[3]):(e.zspeed=10,e.translate.z+=e.zspeed,e.color=c[2]),11==level?timeleft+=c_timegainperblock:("jackpot-gain-2"!=i2.style.animationName?i2.style.animation="jackpot-gain-2 1s":i2.style.animation="jackpot-gain-1 1s",activated+=1,activated>=activategoal&&gameWin())}function handleGesture(e){let t=touchendX-touchstartX,a=touchendY-touchstartY,o=M.abs(t/a),l=M.abs(a/t);M.abs(t)>treshold||M.abs(a)>treshold?(l<=limit&&input(t<0?"ArrowLeft":"ArrowRight"),o<=limit&&input(a<0?"ArrowUp":"ArrowDown")):input(" ")}function input(e){if(e!=inputbuffer&&(inputbuffer=""),0==state){if(" "==e&&canstartgame)return l1.style.animation="gamestart-top 1s ease-in",l2.style.animation="gamestart-bottom 1s ease-in",vis(not,H),sound([1,,.08,,.5,.26,,.43,,,,,,,,.68,,,1,,,,,.15]),setTimeout((function(){vis(l1,H),vis(l2,H)}),975),void(0==hiscore?(state=1,level=1,loadLevel(level),vis(l3,H)):(state=2,level,M.min(hiscore,11),switchPalette(palette),updateLevelSelect()))}else if(2==state)"ArrowLeft"==e||"a"==e||"q"==e?(level-=1,0==level&&(level=1),updateLevelSelect()):"ArrowRight"==e||"d"==e?(level+=1,level==hiscore+2&&(level=hiscore+1),level>11&&(level=11),updateLevelSelect()):"ArrowUp"==e||"w"==e||"z"==e?(palette-=1,-1==palette&&(palette=6),switchPalette(palette),updateLevelSelect()):"ArrowDown"==e||"s"==e?(palette+=1,7==palette&&(palette=0),switchPalette(palette),updateLevelSelect()):" "==e&&(state=1,loadLevel(level),sound([3,,.22,.49,.4,.15,,-.39,,,,-.68,.69,,,,,,1,,,,,.25]),vis(d,H),vis(d3,H),vis(d4,H),vis(k,H),vis(l3,H));else if(1==state){if("Escape"==e)return void pause(-1);if(paused&&"Backspace"==e&&(l3.style.visibility==H?(vis(l3,V),l3.innerHTML="Confirm with [Backspace]"):(vis(l3,H),pause(-1),gameOver()))," "==e)return void pause(!1);if(paused)return"f"==e?void step(!0):void 0;var t=0;if("ArrowLeft"!=e&&"a"!=e&&"q"!=e||(t=-1),"ArrowRight"!=e&&"d"!=e||(t=1),!(0==t||0!=playermovex||t<0&&player.translate.x==-c_horborder||t>0&&player.translate.x==c_horborder))return playermovex=c_startverticalspeed*t,playermovey=0,void sound([1,,.22,.26,.11,.41+.3*random(),.21,-.3,,.06,.02,,,.43,.19,,,,1,-.04,,.18,.01,.15]);if(!("ArrowUp"!=e&&"w"!=e&&"z"!=e||M.sign(playermovey)!=flipped&&0!=M.sign(playermovey)))return playermovex=0,playermovey=-c_jumpspeed*flipped,void sound([0,,.05,,.18,.38+.3*random(),.02,.24,.04,,.05,,,.31,.07,.06,,.08,.9,-.03,.02,.15,.03,.15]);if(("ArrowDown"==e||" "==e||"s"==e)&&(playermovey<c_dropspeed&&1==flipped||playermovey>-c_dropspeed&&-1==flipped))return playermovex=0,playermovey=c_dropspeed*flipped,void sound([1,,.25,.01,,.43+.2*random(),.27,-.25,,,,,,.79,-.66,,.2,-.18,1,,,,,.15]);0!=inputtime&&e==inputbuffer||(inputbuffer=e,inputtime=10)}}function draw(){var e=TAU/4*(1-flipvisual);-1==flipped&&(e=TAU/4*flipvisual+TAU/4*3),player.rotate={y:.08*-playermovex,x:-.15*playermovey*flipvisual+e},dotanchor.translate.y=-(player.translate.y/20+500+playermovey),border.translate.y=player.translate.y,player.visible&&trail.visible&&(trail.path[trail.path.length]={x:player.translate.x-5+10*random()-80*flipped,y:player.translate.y-2.5+5*random()+80*flipped},trail.path.length>250&&trail.path.shift(),trail.updatePath()),cameray=-flipvisual*player.translate.y*.925-100,illo.updateRenderGraph()}function gameWin(){0!=state&&2!=state&&(l1.innerHTML="Goal!",l2.innerHTML="You win",l3.innerHTML="Space/Tap for next level",level-1==hiscore&&11!=level&&(hiscore=level,level=hiscore+1,vis(not,V),10!=hiscore?(not.innerHTML="You unlocked level "+(hiscore+1).toString()+"!<br>Progress saved.",setCookie("backflipped_level",hiscore)):(not.innerHTML="You unlocked Endless mode!<br>Thanks for playing the game!",setCookie("backflipped_level",hiscore))),sound([0,,.3,,.5,.3,,.1,,.23,.4,,,.1,,,,,1,,,,,.26]),gameEnd())}function gameOver(){0!=state&&2!=state&&(l1.innerHTML="Time up",l2.innerHTML="You lose",l3.innerHTML="Space or Tap to try again",11==level&&score>hiscore&&hiscore>0&&(vis(not,V),not.innerHTML="Congrats!<br>You broke the old highscore of<br>"+hiscore.toString()+" with a new score of <b>"+score.toString()+"</b>!",hiscore=score,setCookie("backflipped_level",hiscore)),sound([3,,.18,.23,.18,.15,,-.23,,,,,,,,.58,,,1,,,,,.26]),gameEnd())}function gameEnd(){state=0,player.visible=!1,playermovey=.5*flipped,canstartgame=!1,vis(i1,H),vis(i2,H),vis(i3,H),l1.style.animation="",l2.style.animation="",vis(l1,V),vis(l2,V),l1.style.color=c[0],l2.style.textShadow="-2px -5px "+c[0],l2.style.color=c[1],l2.style.textShadow="-2px -5px "+c[1],sound([0,,.021,,.28,.38,,-.4,,,,,,.12,,,,,1,,,,,.16]),setTimeout((function(){canstartgame=!0,vis(l3,V)}),1e3)}function updateLevelSelect(){vis(d,V),vis(k,V),level<=10?d2.innerHTML=level.toString()+"/10":d2.innerHTML="∞ Endless",1==level?vis(d3,H):vis(d3,V),level==hiscore+1||11==level?vis(d4,H):vis(d4,V),k1.innerHTML="Colors ("+(palette+1).toString()+"/7)",k2.innerHTML=palettename}function random(){var e=1e4*M.sin(seed++);return e-M.floor(e)}function resizeScreen(){document.getElementById("game"),window.innerWidth>850&&window.innerHeight>600?illo.zoom=2:window.innerWidth>600&&window.innerHeight>400?illo.zoom=1.5:window.innerWidth>400&&window.innerHeight>300?illo.zoom=1:window.innerWidth>350&&window.innerHeight>250?illo.zoom=.9:window.innerWidth>300&&window.innerHeight>200?illo.zoom=.8:illo.zoom=.7,draw()}function sound(e){var t=jsfxr(e),a=new Audio;a.src=t,a.play()}function pause(e){if(0!=state&&2!=state){if(-1==e)paused=!paused;else{if(paused==e)return;paused=e}paused?(vis(not,V),vis(i1,H),vis(i2,H),vis(i3,H),n.innerHTML="PAUSED, [Space] or [Tap] to resume<br>[Backspace] to give up"):(vis(not,H),vis(i1,V),vis(i2,V),vis(i3,V),vis(l3,H))}}function HtmlLoaded(){l1=id("l1"),l2=id("l2"),l3=id("l3"),i1=id("i1"),i2=id("i2"),i3=id("i3"),d=id("d"),d1=id("d1"),d2=id("d2"),d3=id("d3"),d4=id("d4"),k=id("k"),k1=id("k1"),k2=id("k2"),k3=id("k3"),k4=id("k4"),n=id("not"),canstartgame=!0,id("game").focus(),M.tan(.375*M.PI);const e=id("game");e.addEventListener("touchstart",(function(e){touchstartX=e.changedTouches[0].screenX,touchstartY=e.changedTouches[0].screenY}),!1),e.addEventListener("touchend",(function(e){touchendX=e.changedTouches[0].screenX,touchendY=e.changedTouches[0].screenY,handleGesture(e)}),!1)}function id(e){return document.getElementById(e)}function vis(e,t){e.style.visibility=t}function isOdd(e){return e%2}function switchPalette(e){if(1==e&&hiscore<3)palettename="⚿ (Beat level 3 to unlock)";else if(2==e&&hiscore<5)palettename="⚿ (Beat level 5 to unlock)";else if(3==e&&hiscore<10)palettename="⚿ (Beat level 10 to unlock)";else if(4==e&&hiscore<15)palettename="⚿ (Reach 15 flips in Endless mode)";else if(5!=e||document.monetization&&"started"===document.monetization.state)if(6!=e||document.monetization&&"started"===document.monetization.state){switch(palette){case 0:c[0]="#223e32",c[1]="#A7C06D",c[2]="#b3dd52",c[3]="#015d00",c[4]="#04bf00",c[5]="#ffffff",palettename="Default Colors";break;case 1:c[0]="#A5836A",c[1]="#FD3633",c[2]="#D33826",c[3]="#E8BD32",c[4]="#668D2E",c[5]="#ffffff",palettename="Strawberry Patch";break;case 2:c[0]="#22393F",c[1]="#00B8B5",c[2]="#50DADC",c[3]="#0087BD",c[4]="#14A9FF",c[5]="#ffffff",palettename="Blueberry Juice";break;case 3:c[0]="#71009F",c[1]="#FE9BCC",c[2]="#FEAED6",c[3]="#AF00F5",c[4]="#ffffff",c[5]="#000000",palettename="Bright & Light";break;case 4:c[0]="#dddddd",c[1]="#222222",c[2]="#444444",c[3]="#bbbbbb",c[4]="#888888",c[5]="#ffffff",palettename="Stylish Monochrome";break;case 5:c[0]="#0F5FA4",c[1]="#9CC6EC",c[2]="#BBD6E7",c[3]="#4087C9",c[4]="#ffffff",c[5]="#000000",palettename="Coil Exclusive: Beau Blueprint";break;case 6:c[0]="#FE875C",c[1]="#8A320A",c[2]="#522313",c[3]="#955857",c[4]="#F7FF57",c[5]="#444444",palettename="Coil Exclusive: Dawnbreak"}1==flipped?(bgcolor=c[0],border.color=c[1],flipline.color=c[1]):(bgcolor=c[1],border.color=c[0],flipline.color=c[0]);for(var t=0;t!=obstacle.length;t++)25==obstacle[t].translate.z?obstacle[t].color=c[2]:obstacle[t].color=c[3];for(t=0;t!=dots.length;t++)dots[t].color=c[4];head.color=c[4],legs.color=c[4],eyes.color=c[5],trail.color=c[5]+"44"}else palettename="⚿ (Exclusive for Coil subscribers)";else palettename="⚿ (Exclusive for Coil subscribers)"}function setCookie(e,t){localStorage.setItem(e,t)}function getCookie(e){var t=localStorage.getItem(e);return null==t?"noone":parseInt(t)}function checkCookie(){var e=getCookie("backflipped_level");"noone"!=e?(hiscore=e,level=M.min(11,hiscore+1)):setCookie("backflipped_level",0)}window.addEventListener("resize",(function(){resizeScreen()})),document.addEventListener("visibilitychange",(function(){pause(!0)}))</script><p class="title top" id=l1>Back<p class="title bottom" id=l2>Flipped<p class="title start" id=l3>Press Space or Tap Screen<p class="int remaining" id=i1>Time: ?<p class="int jackpot" id=i2>+? sec<p class="int score" id=i3>Flips: ?<div id=d class=levelselect><div class="lvl label" id=d1>Level:</div><span class="lvl arrowleft" id=d3>← </span><b><span class="lvl number" id=d2>1</span></b><span class="lvl arrowright" id=d4> →</span></div><div id=k class=colorselect><div class="clr label" id=k1>Color Pallete:</div><div class="clr arrowup" id=k3>↑</div><b><div class="clr number" id=k2>Default colors</div></b><div class="clr arrowdown" id=k4>↓</div></div><div class=notification id=not>Game by <b>Tom Hermans (@Auroriax)</b><br><br><b>How to play (Keyboard/Swipe):</b><br>🡸 Left 🡺 Right: Kick<br>🡹 Up: Jump<br>🡻 Down: Rush<br>Touched platforms give points<br>and move to background.<br>Reach bottom of level to<br><b>flip to the backside!</b><br>You lose when time runs out...</div>