<!doctype html><style>@keyframes frames{0%{text-shadow:0 0 10px #f88}33%{text-shadow:0 0 10px #8f8}66%{text-shadow:0 0 10px #88f}100%{text-shadow:0 0 10px #f8f}}body{background:#000;color:#aaa;font-family:sans-serif}button{font-size:200%;display:none;margin:.5em;padding:0 1em;background:#000;color:#89a;border:none;border-bottom:3px solid #456}button:hover{color:#fff;text-shadow:0 0 12px #fff}#title{font-size:12pt}#logo{color:#111;font-size:400%;animation:frames 5s ease-in-out infinite}#load{display:block}#loud{display:none}</style><title>GAMUT SHIFT</title><center><div id=title><p id=logo>GAMUT SHIFT</p><button id=cont>Continue</button> <button id=play>Start new game</button><p id=loud>(loud audio ahead)</div><p id=load>Loading...</p><canvas id=c width=800 height=600></canvas></center><script>(()=>{"use strict";const n=document.getElementById("c"),t=n.getContext("webgl2"),e=n.width,r=n.height,o=`#version 300 es\nprecision highp float;precision highp sampler2D;precision highp sampler2DArray;const vec2 res = vec2(${e},${r});`,i="\nvec4 tm(vec4 col) {\n    vec3 m = 1. - exp(-col.rgb * vec3(1.5));\n\treturn vec4(clamp(m, 0., 1.), 1.);\n}\n",a={t:`${o}\nlayout(location=0) in vec2 vp;\nlayout(location=1) in vec2 tc;\nout vec2 uv;\n\nvoid main() {\n\tuv = tc;\n\tgl_Position = vec4((vp / res) * 2. - 1., 0., 1.);\n}\n`,o:`${o}\nlayout(location=0) in vec2 vp;\nlayout(location=1) in vec2 tc;\nout vec2 uv;\n\nvoid main() {\n\tuv = tc;\n\tvec2 p = (vp / res) * 2. - 1.;\n\tgl_Position = vec4(p * vec2(1., -1.), 0., 1.);\n}\n`,i:`${o}\nout vec4 col;\nin vec2 uv;\nuniform sampler2D tex;\n${i}\n\nvoid main() {\n\tcol = tm(texture(tex, uv));\n}\n`,l:`${o}\nout vec4 col;\nin vec2 uv;\nuniform sampler2D tex;\n\nvoid main() {\n\tcol = texture(tex, uv).aaaa;\n}\n`,u:`${o}\nlayout(location=0) in vec2 vp;\nlayout(location=1) in vec2 tc;\nlayout(location=2) in vec3 tile;\nout vec3 uv;\nuniform vec2 scroll;\n\nvoid main() {\n\tuv = vec3(tc, tile.z);\n\tvec2 p = ((vp + tile.xy - scroll) / res) * 2. - 1.;\n\tgl_Position = vec4(p, 0., 1.);\n}\n`,v:`${o}\nlayout(location=1) out vec4 norm;\nlayout(location=0) out vec4 col;\nin vec3 uv;\nuniform sampler2DArray tex, normals;\n\nvoid main() {\n\tcol = texture(tex, uv);\n\tnorm = vec4(texture(normals, uv).rgb, step(.7, col.a));\n}\n`,h:`${o}\nlayout(location=0) in vec2 vp;\nlayout(location=1) in vec4 lpos;\nlayout(location=2) in vec4 col;\nflat out vec4 pos;\nflat out vec3 lc;\nout vec2 uv;\nuniform vec2 scroll;\n\nvoid main() {\n\tlc = col.rgb * col.a;\n\tpos = vec4(lpos.xy - scroll, lpos.zw);\n\n\tvec2 p = ((vp * pos.w + pos.xy) / res) * 2. - 1.;\n \tuv = p * .5 + .5;\n\n\tgl_Position = vec4(p, 0., 1.);\n}\n`,m:`${o}\nout vec4 col;\nin vec2 uv;\nflat in vec4 pos;\nflat in vec3 lc;\nuniform sampler2D tex, normals;\n\nvec3 light(vec3 t, vec3 normal, float se) {\n\tvec3 ld = vec3(pos.xy - gl_FragCoord.xy, pos.z);\n\tfloat dn = max(dot(normal, normalize(ld)), 0.);\n\n\tfloat a = max(0., 1. - (length(ld) / pos.w));\n\ta *= a;\n\n\tvec3 d = lc * dn * a;\n\tvec3 s = lc * pow(dn, .5 + se * 128.) * a;\n\n\treturn t * d + s;\n}\n\nvoid main() {\n\tvec4 t = texture(tex, uv);\n\tvec4 n = texture(normals, uv);\n\tn.xy = n.xy * 2. - 1.;\n\tvec3 normal = normalize(vec3(n.xy, sqrt(1. - dot(n.xy, n.xy))));\n\tcol = vec4(light(t.rgb, normal, n.z), 1.);\n}\n`,p:`${o}\nout vec4 col;\nin vec2 uv;\nuniform sampler2D tex;\nuniform vec2 dir;\n\nvoid main() {\n\tcol = .114 * (texture(tex, uv) +\n\t\ttexture(tex, vec2(uv - 4. * dir)) +\n\t\ttexture(tex, vec2(uv - 3. * dir)) +\n\t\ttexture(tex, vec2(uv - 2. * dir)) +\n\t\ttexture(tex, vec2(uv - 1. * dir)) +\n\t\ttexture(tex, vec2(uv + 1. * dir)) +\n\t\ttexture(tex, vec2(uv + 2. * dir)) +\n\t\ttexture(tex, vec2(uv + 3. * dir)) +\n\t\ttexture(tex, vec2(uv + 4. * dir)));\n}`,g:`${o}\nout vec4 col;\nin vec2 uv;\nuniform sampler2D bg, fg, ao;\n\nvoid main() {\n\tvec4 f = texture(fg, uv);\n\tvec3 a = texture(bg, uv).rgb * (1. - texture(ao, uv).r * vec3(1. ,.9, .8));\n\tcol = vec4(mix(a, f.rgb, f.a), 1.);\n}\n`,$:`${o}\nout vec4 col;\nin vec2 uv;\nuniform sampler2D tex, normals;\n\nvoid main() {\n\tvec4 t = texture(tex, uv);\n\tvec4 n = texture(normals, uv);\n\tn.xy = n.xy * 2. - 1.;\n\tvec3 normal = normalize(vec3(n.xy, sqrt(1. - dot(n.xy, n.xy))));\n\tcol = vec4(vec3(.2, .175, .15) * t.rgb * max(dot(normal, vec3(.5, -.5, .7)), 0.), t.a);\n}\n`,M:`${o}\nlayout(location=0) in vec2 vp;\nlayout(location=1) in vec2 tc;\nout vec4 uv;\nflat out vec2 offs;\nuniform vec2 pos, scroll;\n\nvoid main() {\n\tuv = vec4(tc, 20., 19.);\n\toffs = fract(pos * .012);\n\tvec2 p = ((vp + (pos - scroll)) / res) * 2. - 1.;\n\tgl_Position = vec4(p, 0., 1.);\n}\n`,P:`${o}\nout vec4 col;\nin vec4 uv;\nflat in vec2 offs;\nuniform sampler2DArray tex;\n\nvoid main() {\n\tvec2 p = uv.xy * 2. - 1.;\n\tfloat r = dot(p, p);\n\tfloat f = (1. - sqrt(1. - r)) / r;\n\tfloat a = texture(tex, uv.xyw).a;\n\tcol = vec4(texture(tex, vec3(p * f - offs, uv.z)).rgb * a, a);\n}\n`,A:`${o}\nout vec4 col;\nin vec2 uv;\nuniform sampler2D tex;\n${i}\nuniform vec3 pos;\n\nvoid main() {\n\tfloat d = distance(pos.xy, gl_FragCoord.xy);\n\tif(d > pos.z)\n\t\tdiscard;\n\tvec4 p = texture(tex, uv);\n\td /= pos.z;\n\td *= d;\n\tfloat dist = 1. + (cos(d * 5.) * .5 + .5) * d * .05;\n\tfloat aber = pow(d, 8.) * .05;\n\tfloat r = texture(tex, uv * dist + vec2(aber)).r;\n\tfloat g = texture(tex, uv * dist).g;\n\tfloat b = texture(tex, uv * dist - vec2(aber)).b;\n\tvec4 t = clamp(vec4(r, g, b, 1. - d) * (1. + 400. * aber), 0., 1.);\n\tcol = tm(mix(p, t, d));\n}\n`,G:`${o}\nout vec4 col;\nin vec2 uv;\nuniform sampler2D tex;\n${i}\nuniform vec3 pos;\n\nvoid main() {\n\tfloat d = abs(length(gl_FragCoord.xy - pos.xy) - pos.z - 30.);\n\td = abs(clamp(d, -60., 60.) / 60.);\n\tvec4 p = texture(tex, uv);\n\tfloat dist = 1. + (cos(d * 5.) * .5 + .5) * d * .25;\n\tvec4 t = texture(tex, uv * dist) * 2.;\n\tcol = tm(mix(t, p, d));\n}\n`,B:`${o}\nout vec4 col;\nin vec2 uv;\nuniform sampler2D tex;\n${i}\nuniform float time;\n\nvoid main() {\n\tfloat t = 1. - abs(cos(time * 3.141));\n\tvec2 d = vec2(uv.x + t * .15 * cos(time * 8. + uv.y * 8.), uv.y);\n\tcol = tm(texture(tex, d)) + vec4(t);\n}\n`},c=class{constructor(n,e,r,o){this.R=t.createVertexArray(),t.bindVertexArray(this.R),this.k=r,this.F=0,this.D=o.length;const i=e*r+o.byteLength;this.data=new Float32Array(i/4),this.data.set(o,0),this.buffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),n.forEach(((n,e)=>{t.enableVertexAttribArray(e),t.vertexAttribPointer(e,n[0],t.FLOAT,!1,n[1],n[2]),t.vertexAttribDivisor(e,n[3]||0)})),t.bufferData(t.ARRAY_BUFFER,i,t.DYNAMIC_DRAW),t.bufferSubData(t.ARRAY_BUFFER,0,this.data,0),t.bindVertexArray(null)}clear(){this.F=0}bind(){t.bindVertexArray(this.R),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferSubData(t.ARRAY_BUFFER,0,this.data,0)}C(n){this.data.set(n,this.D+this.F*(this.k/4)),this.F+=n.byteLength/this.k}release(){t.deleteBuffer(this.buffer),t.deleteVertexArray(this.R)}},s=[[2,16,0],[2,16,8],[3,0,64,1]],f=new Float32Array(3),l=class extends c{constructor(n,t,e=64){super(s,n*t,12,new Float32Array([0,0,0,0,0,e,0,1,e,e,1,1,e,0,1,0]))}L(...n){f.set(n),this.C(f)}},u=[[2,8,0],[4,32,240,1],[4,32,256,1]],d=new Float32Array(8),v=class extends c{constructor(n=64){const t=2*Math.PI,e=[0,0];for(let n=0;n<29;++n)e.push(Math.sin(n/28*t)),e.push(Math.cos(n/28*t));super(u,n,32,new Float32Array(e))}X(...n){d.set(n),this.C(d)}},m=.5;t.disable(t.DEPTH_TEST),t.enable(t.BLEND);const h=n=>{const e=n.map(((n,e)=>t["COLOR_ATTACHMENT"+e])),r=t.createFramebuffer();return{S:n,bind:()=>{t.bindFramebuffer(t.DRAW_FRAMEBUFFER,r);for(let r=0;r<n.length;++r)t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,e[r],t.TEXTURE_2D,n[r],0);t.drawBuffers(e)}}},x=(n,e)=>((n,e)=>{const r=t.createVertexArray();return t.bindVertexArray(r),t.bindBuffer(t.ARRAY_BUFFER,t.createBuffer()),[[2,16,0],[2,16,8]].forEach(((n,e)=>{t.enableVertexAttribArray(e),t.vertexAttribPointer(e,n[0],t.FLOAT,!1,n[1],n[2]),t.vertexAttribDivisor(e,n[3]||0)})),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.bindVertexArray(null),()=>{t.bindVertexArray(r),t.drawArrays(t.TRIANGLE_FAN,0,4)}})(0,new Float32Array([0,0,0,0,0,e,0,1,n,e,1,1,n,0,1,0])),p=(n,e,r=t.RGBA8,o=t.REPEAT)=>{const i=t.createTexture();return t.bindTexture(t.TEXTURE_2D,i),t.texStorage2D(t.TEXTURE_2D,1,r,n,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,o),i},y=n=>{const e=t.createTexture();return t.bindTexture(t.TEXTURE_2D_ARRAY,e),t.texStorage3D(t.TEXTURE_2D_ARRAY,1,t.RGBA8,n[0].width,n[0].height,n.length),t.texParameteri(t.TEXTURE_2D_ARRAY,t.TEXTURE_MIN_FILTER,t.LINEAR),n.forEach(((n,e)=>t.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,e,n.width,n.height,1,t.RGBA,t.UNSIGNED_BYTE,n.data))),e},g=(n,e)=>{const r=t.createProgram();return[[n,t.VERTEX_SHADER],[e,t.FRAGMENT_SHADER]].forEach((n=>{const e=t.createShader(n[1]);t.shaderSource(e,n[0]),t.compileShader(e),t.attachShader(r,e)})),t.linkProgram(r),r},R=h([p(e,r),p(e,r)]),b=h([p(e,r),R.S[1]]),E=h([b.S[0]]),T=h([p(e*m,r*m,t.R8,t.CLAMP_TO_EDGE)]),A=h([p(e*m,r*m,t.R8,t.CLAMP_TO_EDGE)]),D=h([p(e,r)]),w=h([p(e,r)]);let _,U,$,B,L,X;const F=x(e,r),P=x(64,64),I={reset:n=>{$&&($.release(),B.release()),$=new l(n.width,n.height),B=new l(n.width,n.height),X||(X={_:g(a.t,a.l),I:g(a.u,a.v),blur:g(a.t,a.p),T:g(a.t,a.g),q:g(a.t,a.$),W:g(a.h,a.m),screen:g(a.o,a.i),O:g(a.M,a.P),transition:g(a.o,a.A),V:g(a.o,a.G),K:g(a.o,a.B)},L=new v)},N:(n,t)=>{_=y(n),U=y(t)},U:(n,o,i,a)=>{switch(t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.viewport(0,0,e,r),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),(n=>{$.clear(),B.clear(),L.clear();for(let t=0;t<n.map.length;++t){const e=n.map[t],r=t%n.width*64,o=64*(t/n.width>>>0);if(0==e.j.Y?$.L(r,o,e.H):(B.L(e.J,e.Z,e.H),$.L(r,o,n.nn)),e.j.W){const[n,t,r,o,i,a]=e.j.W;L.X(e.J+32,e.Z+32,n,a,t,r,o,i)}}const t=n.O;B.L(t.J,t.Z,t.H);const[e,r,o,i,a,c]=t.j.W;L.X(t.J+32,t.Z+32,e,c,r,o,i,a);for(let t=0;t<n.tn.length;++t){const[e,r]=n.tn[t];L.X(e,r,32,128,1,.8,.7,1)}})(n),t.useProgram(X.I),t.uniform2f(t.getUniformLocation(X.I,"scroll"),o.x(),o.y()),t.uniform1i(t.getUniformLocation(X.I,"tex"),0),t.uniform1i(t.getUniformLocation(X.I,"normals"),1),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D_ARRAY,_),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D_ARRAY,U),b.bind(),t.clear(t.COLOR_BUFFER_BIT),R.bind(),t.clear(t.COLOR_BUFFER_BIT),$.bind(),t.drawArraysInstanced(t.TRIANGLE_FAN,0,4,$.F),b.bind(),B.bind(),t.drawArraysInstanced(t.TRIANGLE_FAN,0,4,B.F),E.bind(),t.useProgram(X.O),t.uniform2f(t.getUniformLocation(X.O,"scroll"),o.x(),o.y()),t.uniform2f(t.getUniformLocation(X.O,"pos"),n.O.J,n.O.Z),t.uniform1i(t.getUniformLocation(X.O,"tex"),0),P(),(()=>{t.disable(t.BLEND),t.viewport(0,0,e*m,r*m),A.bind(),t.clearColor(255,0,0,255),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.SCISSOR_TEST),t.scissor(2,2,e*m-4,r*m-4),t.useProgram(X._),t.uniform1i(t.getUniformLocation(X._,"tex"),0),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,b.S[0]),F(),t.disable(t.SCISSOR_TEST),t.useProgram(X.blur);for(let n=0;n<3;++n)T.bind(),t.uniform1i(t.getUniformLocation(X.blur,"tex"),0),t.uniform2f(t.getUniformLocation(X.blur,"dir"),0,3/r),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,A.S[0]),F(),A.bind(),t.uniform2f(t.getUniformLocation(X.blur,"dir"),3/e,0),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,T.S[0]),F();t.enable(t.BLEND),t.viewport(0,0,e,r)})(),D.bind(),t.useProgram(X.T),t.uniform1i(t.getUniformLocation(X.T,"bg"),0),t.uniform1i(t.getUniformLocation(X.T,"fg"),1),t.uniform1i(t.getUniformLocation(X.T,"ao"),2),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,R.S[0]),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,b.S[0]),t.activeTexture(t.TEXTURE2),t.bindTexture(t.TEXTURE_2D,A.S[0]),F(),w.bind(),t.clear(t.COLOR_BUFFER_BIT),t.useProgram(X.q),t.uniform1i(t.getUniformLocation(X.q,"tex"),0),t.uniform1i(t.getUniformLocation(X.q,"normals"),1),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,D.S[0]),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,R.S[1]),F(),t.blendFunc(t.ONE,t.ONE),t.useProgram(X.W),t.uniform1i(t.getUniformLocation(X.W,"tex"),0),t.uniform1i(t.getUniformLocation(X.W,"normals"),1),t.uniform2f(t.getUniformLocation(X.W,"scroll"),o.x(),o.y()),L.bind(),t.drawArraysInstanced(t.TRIANGLE_FAN,0,30,L.F),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.drawBuffers([]),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),i){case"screen":t.useProgram(X.screen),t.uniform1i(t.getUniformLocation(X.screen,"tex"),0);break;case"transition":t.useProgram(X.transition),t.uniform1i(t.getUniformLocation(X.transition,"tex"),0),t.uniform3f(t.getUniformLocation(X.transition,"pos"),n.O.J-o.x()+32,r-(n.O.Z-o.y()+32),a.time*e);break;case"ripple":t.useProgram(X.V),t.uniform1i(t.getUniformLocation(X.V,"tex"),0),t.uniform3f(t.getUniformLocation(X.V,"pos"),a.x-o.x()+32,r-(a.y-o.y()+32),a.time*e);break;case"rewind":t.useProgram(X.K),t.uniform1i(t.getUniformLocation(X.K,"tex"),0),t.uniform1f(t.getUniformLocation(X.K,"time"),a.time)}t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,w.S[0]),F()}},M=(n,t,e)=>n+Math.sign(t-n)*Math.min(Math.abs(t-n),e),S=[],O=[0,5,6,8,7,10,9,11],G=()=>!0,C=()=>!1,k=(n,t)=>n.color==t.color,N=(n,t)=>0!=n.color&&0!=t.color&&0==(n.color&t.color),z=n=>n,Y=(n,t)=>S[O[n.color|t.color]],W=()=>S[0],H=(n,t,e,r,o,i,a,c)=>({color:n,Y:t,H:e,W:r,en:o,push:i,rn:a,on:c});S.push(H(0,0,[7,21,22,37,32,33,35],null,G,C,G,z),H(0,1,[26,27,8,28,23,30,31,34],null,C,C,C,z),H(0,0,[9],null,C,C,C,z),H(0,1,[24,17,25,29,36],null,C,G,C,z),H(0,0,[18],[16,.6,1,1,3,128],G,C,C,z),H(1,1,[0],[96,1,.2,.2,1,256],C,G,N,Y),H(2,1,[1],[96,.5,1,.2,1,256],C,G,N,Y),H(4,1,[2],[96,.2,.2,1,1,256],C,G,N,Y),H(3,1,[3],[96,1,1,.2,1,256],C,G,N,Y),H(6,1,[4],[96,.2,1,1,1,256],C,G,N,Y),H(5,1,[5],[96,1,.2,1,1,256],C,G,N,Y),H(7,1,[6],[96,1,1,1,1,256],C,G,N,Y),H(1,0,[10],[60,1,.3,.3,1,160],C,C,k,W),H(2,0,[11],[60,.3,1,.3,1,160],C,C,k,W),H(4,0,[12],[60,.3,.3,1,1,160],C,C,k,W),H(3,0,[13],[60,1,1,.3,1,160],C,C,k,W),H(6,0,[14],[60,.3,1,1,1,160],C,C,k,W),H(5,0,[15],[60,1,.3,1,1,160],C,C,k,W),H(7,0,[16],[60,1,1,1,1,160],C,C,k,W),H(0,1,[19],[96,1,.8,.4,1,256],C,C,C,z));const K=S,j=["\n#####################\n#         ^         #\n#< ***** *  * **** >#\n#    *   *  * * R   #\n#    *   **** ***   #\n#    * X *  * *     #\n# W  *   *  * ****  #\n#<        P        >#\n#   **** ***  *** G #\n#   *    *  * *  *  #\n#   ***  * W* *  *  #\n#   *    *  * *  *  #\n#   **** *  * *** W #\n#<      B          >#\n#  W      v         #\n#####################\n","\n.#####\n.# X #\n###g##\n# # ##\n# ^*^#\n#    #\n#    #\n## * #\n.#<G>#\n.# P #\n.#####\n","\n#####\n# ^ #\n# R #\n#g *#\n#<*>#\n#*  ######\n# *  * ^ ###\n# Gb B*P*rX#\n#    * v ###\n##########\n","\n##################\n# ^  #<  *># *^  #\n#*RPR    * r * B*#\n#    #<b *># *v  #\n#######r##########\n......#X#\n......###\n","\n########\n######P#\n#  ^* >#\n# B*## #\n#<   R>#\n#*  ## #####\n# * vb r X>#\n############\n","\n#########\n#   * P #\n# B R * #\n# R * * #\n##b##*m##\n#       #\n#  # #  #\n# ByGcG #\n#  # #  #\n#### ####\n...#X#\n...###\n","\n########\n#Xm # >#\n##  bR #\n## ##  #\n#<  #  #\n# B P >#\n#*###  #\n# B * *#\n#<    >#\n########\n","\n#####\n#   ###########\n# B ^  #<    >#\n# P* R   ***G*#\n#########<    #\n#<X m b g   B>#\n###############\n","\n##################\n#    #^  ^#^ *  ^#\n#<RB r P  *  R*G #\n#*   #v  v#v *  v#\n# *  #######b# ###\n#<   ####Xy * >#\n############  ##\n...........#####\n","\n##################\n# b  B ^r  * ^ * #\n#<R **  #  G  *B*#\n#  * P#####     >#\n##*############c##\n#   #     * ##   #\n#<X g >###<*    >#\n#   # *b G B>#   #\n#   #  # # * #####\n# v #    #   #\n##############\n","\n......#######\n......#<*  >#\n#######  G* #####\n#< R g      B  >#\n## #####*##### ##\n#<      P      >#\n##############m##\n#    ^     ^    #\n#<             >#\n#***##***####** #\n#<R #  G ## B  >#\n## ##  * ## #** #\n#<*         *  >#\n########w########\n.....#^   ^#\n.....#  X  #\n.....#######\n","\n############\n####  ## ###\n#^c  *^*  >#\n#X#  r * B #\n###### * v #####\n###    *#### P #\n### G#* gR * G #\n###< #   v  ***#\n###  * #####v###\n################\n","\n###########\n# *  *  # #\n#<R  *  G>#\n# #  *****#\n#****Pv   #\n# #   ##w##\n#<B   #  >#\n#     # X #\n###########\n","\n....############\n....#   #X#    #\n....#< R b G  >#\n....#          #\n########*#*#####\n# *^ #  r#g    #\n#*B* #      #R*#\n#    #<    >#  #\n#  * y   P  #  #\n###### v   v# *#\n.....#### ###G #\n.....# *  *   *#\n.....#v *  * *v#\n.....###########\n","\n##################\n#   * *    * #   #\n#<R *B  **** m X>#\n#*  *   >#   #   #\n######## #########\n#      # #   # ^ #\n#< P   * * **g B #\n#  * * # #   * B #\n#####**#w# G>#####\n#   #<      ** R #\n#<R b*  *    r G>#\n#   #<  *    #   #\n##################\n","\n.#########\n.#       #\n.#<M # Y>#\n.#   #   #\n##**#X#**##\n#   # # * #\n# # #c# # #\n#<       >##\n# *##*##*  #\n#   ^  ^   #\n##y## ##m###\n# G # # B #\n# v  P  v #\n###########\n"],V=[0,32,64,32,32,0,32,64],q=K[4],J=K[19];class Z{constructor(n,t,e,r){this.x=e,this.y=r,this.J=64*e,this.Z=64*r,this.j=t,this.offsetX=0,this.offsetY=0,this.dx=0,this.dy=0,this.H=n,this.sn=!0}move(n,t,e){e.get(this.x+n,this.y+t)&&(this.dx=n,this.dy=t,this.sn=n*n+t*t<.001)}update(n,t){this.sn||(this.offsetX=Math.min(1,this.offsetX+3*n),this.offsetY=Math.min(1,this.offsetY+3*n),this.J=64*(this.x+this.dx*this.offsetX),this.Z=64*(this.y+this.dy*this.offsetY),(this.offsetX>=1||this.offsetY>=1)&&(this.an(t),this.sn=!0,this.offsetX=this.offsetY=0,this.dx=this.dy=0))}an(n){n.set(this.x,this.y,new Z(n.nn,K[0],this.x,this.y)),this.x+=this.dx,this.y+=this.dy;const t=n.get(this.x,this.y).j,e=t.on(this.j,t),r=e!=this.j?new Z(e.H[n.level%e.H.length],e,this.x,this.y):this;r!=this&&n.cn(this.J,this.Z),n.set(this.x,this.y,r)}}class Q extends Z{an(n){this.x+=this.dx,this.y+=this.dy,n.get(this.x,this.y).j==q&&n.ln()}}const nn=[[0,0],[0,1],[0,-1],[1,0],[-1,0]],tn={level:1,time:0,fn:null,un:null,vn:I,hn:{},dn:{mn:!1,pn:!1,right:!1,left:!1},state:null,xn:(n,...t)=>{n.start(...t),tn.state=n},start:()=>{try{tn.level=parseInt(window.localStorage.getItem("GamutShift-save")||1)}catch(n){}tn.yn(),tn.hn.wn()},yn:(n=tn.level)=>{tn.gn=[],tn.level=n,tn.fn=((n,t,e,r)=>{const o=[],i=[],a=[],c={map:o,tn:i,level:n,ln:t,cn:e,bn:r,gn:a,$n:()=>{a.push({map:o.map((n=>[n.H,n.j,n.x,n.y])),x:c.O.x,y:c.O.y})},K:()=>{const n=c.gn.pop();n.map.forEach(((n,t)=>o[t]=new Z(...n))),c.O=new Q(J.H[0],J,n.x,n.y)},update:n=>{for(let t=0;t<o.length;++t)c.map[t].update(n,c);c.O.update(n,c)},get:(n,t)=>o[t*c.width+n],set:(n,t,e)=>o[t*c.width+n]=e,Mn:(n,t)=>{const e=c.get(c.O.x+n,c.O.y+t);if(e.j.en())c.O.move(n,t,c);else if(e.j.push()){const r=c.get(e.x+n,e.y+t);r&&r.j.rn(e.j,r.j)&&(c.$n(),c.O.move(n,t,c),e.move(n,t,c))}}},s=j[n].split(/\n/).filter((n=>n.length>0));return c.height=s.length,c.width=s.reduce(((n,t)=>Math.max(n,t.length)),0),s.forEach(((t,e)=>{for(let r=0;r<c.width;++r){let o=t.charAt(r)||".",a=2*"<>^v".indexOf(o);a>=0&&(i.push([64*r+V[a],64*e+V[a+1]]),o=" "),"P"==o&&(c.O=new Q(J.H[0],J,r,e),o=" ");const s=K[" #.*XRGBYCMWrgbycmwP".indexOf(o)],f=new Z(s.H[n%s.H.length],s,r,e);c.set(r,e,f)}})),c.nn=K[0].H[n%K[0].H.length],c})(n,tn.ln,tn.cn,tn.bn),tn.un=(n=>{const t=.5*e,o=.5*r,i=64*n.width,a=64*n.height,c=-Math.max(0,t-.5*i),s=-Math.max(0,o-.5*a),f=i-e,l=a-r,u=()=>[Math.max(c,Math.min(f,32+n.O.J-t)),Math.max(s,Math.min(l,32+n.O.Z-o))];let[d,v]=u(),m=d,h=v;return{x:()=>Math.ceil(d),y:()=>Math.ceil(v),update:n=>{[m,h]=u();const t=m-d,e=h-v,r=Math.floor(1.75**Math.log(t*t+e*e));r>6&&(d=M(d,m,r*n),v=M(v,h,r*n))}}})(tn.fn),tn.vn.reset(tn.fn),tn.xn(tn.An.Pn);try{window.localStorage.setItem("GamutShift-save",n)}catch(n){}},Gn:()=>tn.yn((tn.level+1)%j.length),ln:()=>tn.xn(tn.An.Bn),cn:(n,t)=>tn.xn(tn.An.rn,n,t),bn:()=>0,K:()=>{0!=tn.fn.gn.length&&tn.state==tn.An.play?tn.xn(tn.An.K):tn.hn.Rn()},kn:n=>{const t=tn.dn.mn?1:tn.dn.pn?2:tn.dn.right?3:tn.dn.left?4:0;tn.fn.O.sn&&tn.fn.Mn(nn[t][0],nn[t][1])},An:{Pn:(()=>{let n=0;return{start:()=>{n=0,tn.hn.Pn()},step:t=>{n=Math.min(1,n+.75*t),tn.fn.update(t),I.U(tn.fn,tn.un,"transition",{time:n}),n>=1&&tn.xn(tn.An.play)}}})(),Bn:(()=>{let n=1;return{start:()=>{n=1,tn.hn.Fn()},step:t=>{n=Math.max(0,n-t),tn.fn.update(t),I.U(tn.fn,tn.un,"transition",{time:n}),n<=0&&tn.Gn()}}})(),play:{start:()=>0,step:n=>{tn.kn(n),tn.fn.update(n),tn.un.update(n),I.U(tn.fn,tn.un,"screen")}},rn:(()=>{let n,t,e=0;return{start:(r,o)=>{n=r,t=o,e=0,tn.hn.rn()},step:r=>{e=Math.min(1,e+r*(1+e)*.5),tn.kn(r),tn.fn.update(r),tn.un.update(r),I.U(tn.fn,tn.un,"ripple",{x:n,y:t,time:e}),e>=1&&tn.xn(tn.An.play)}}})(),K:(()=>{let n=0,t=!1;return{start:()=>{n=0,t=!1,tn.hn.K()},step:e=>{n=Math.min(1,n+1.5*e),!t&&n>=.5&&(t=!0,tn.fn.K()),tn.un.update(e),I.U(tn.fn,tn.un,"rewind",{time:n}),n>=1&&tn.xn(tn.An.play)}}})()}},en=tn,rn=n=>`<svg width="64" height="64" xmlns="http://www.w3.org/2000/svg">${n}</svg>`,on=(n,t=1,e=1,r=1,o="fractalNoise")=>`<filter id="n"><feTurbulence type="${o}" baseFrequency="${n}" numOctaves="${e}" seed="${r}" stitchTiles="stitch" xresult="n"/><feColorMatrix type="matrix" values="${t} 0 0 0 0 ${t} 0 0 0 0 ${t} 0 0 0 0 0 0 0 0 1" in="n"/><feComposite operator="in" in2="SourceGraphic" result="m"/><feBlend in="SourceGraphic" in2="m" mode="multiply"/></filter>`,an=(n,t,e,r,o,i="")=>`<rect x="${n}" y="${t}" width="${e}" height="${r}" fill="${o}" ${i}/>`,cn=(n,t,e,r,o,i=1)=>`<line x1="${n}" y1="${t}" x2="${e}" y2="${r}" stroke="${o}" stroke-width="${i}"/>`,sn=(n,t,e,r,o="")=>`<circle cx="${n}" cy="${t}" r="${e}" fill="${r}" ${o}/>`,fn=(n=30,t="04")=>{let e="";for(let r=0;r<n;++r)e+=!1&r?cn(64*Math.random(),0,64*Math.random(),64,"#000000"+t):cn(0,64*Math.random(),64,64*Math.random(),"#000000"+t);return e},ln=(n,t)=>{let e=an(0,0,64,64,n);for(let n=0;n<64;n+=8)for(let r=n%16;r<64;r+=16)e+=an(r,n,8,8,t);return e},un=(n,t)=>{let e='<g filter="url(#b)">'+an(0,0,64,64,"#999");for(let n=t+1;n>0;--n){const r=Math.round(255*Math.cos(.8*n/t));e+=sn(32,32,n,`rgb(${r},${r},${r})`)}return[rn(sn(32,32,t,n)),rn('<filter id="b"><feGaussianBlur stdDeviation="2" /></filter>'+e+"</g>"),5,255]},dn=(n,t,e,r,o,i,a,c,s,f,l,u=20,d=1)=>{let v='<g id="c">',m='<g id="h">';for(let t=f/2;t<64+c+f;t+=c+f)v+=an(t,f/2,c,s,n,`rx="${r}" ry="${o}"`),m+=an(t,f/2,c,s,e,`rx="${r}" ry="${o}"`);v+="</g>",m+="</g>";let h=-l;for(let n=s+f;n<64;n+=s+f)v+=`<use href="#c" x="${h}" y="${n}" />`,m+=`<use href="#h" x="${h}" y="${n}" />`,h=-(h+l)%c;return[rn(an(0,0,64,64,t)+v),rn(on(i,a,5)+an(0,0,64,64,"#fff",'filter="url(#n)"')+m),d,u]},vn=(n,t)=>[rn(an(0,0,64,64,n)+sn(32,32,t,"#0006",'stroke="#000" stroke-width="1"')),rn('<defs><radialGradient id="g"><stop offset="0%" stop-color="#ccc"/><stop offset="70%" stop-color="#888"/><stop offset="100%" stop-color="#222"/></radialGradient></defs>'+an(0,0,64,64,"#333")+an(1,1,62,62,"#222")+an(2,2,60,60,"#111")+sn(32,32,t,"url(#g)",'stroke="#0008" stroke-width="3"')+sn(8,8,2,"#333")+sn(56,8,2,"#333")+sn(8,56,2,"#333")+sn(56,56,2,"#333")),2,128],mn=(n,t)=>[rn(on(.1,.6,2,64,"turbulence")+an(4,4,56,56,n,'filter="url(#n)"')+an(4,4,56,56,n+"6")+an(12,12,40,40,"#ffe3")+(t>0?cn(13,13,51,51,"#0004",7):"")+(t>1?cn(51,13,13,51,"#0004",7):"")),rn(an(3,3,57,57,"#666")+an(5,5,53,53,"#777")+an(12,12,40,40,"#666")+cn(21,13,21,51,"#555")+cn(33,13,33,51,"#555")+cn(45,13,45,51,"#555")+(t>0?cn(13,13,51,51,"#777",7):"")+(t>1?cn(51,13,13,51,"#777",7):"")),2,10],hn=(n,t,e)=>{let r="";for(let n=8;n<64;n+=24)r+=sn(n,8,2,"#0004")+sn(n,56,2,"#0004")+sn(8,n,2,"#0004")+sn(56,n,2,"#0004");let o="";if(e)for(let n=8;n<=56;n+=4)o+=cn(n,8,n,56,t);else for(let n=8;n<=56;n+=4)o+=cn(8,n,56,n,t);return[rn(on(.05,1,1,28)+an(0,0,64,64,"#000")+an(1,1,62,62,n,'filter="url(#n)"')+r),rn(on(.05,.1,6,28)+an(0,0,64,64,"#000")+an(1,1,62,62,"#fff",'filter="url(#n)"')+r+o+fn(50,"0c")),1,30]},xn=n=>{const t=new Image;return t.src=URL.createObjectURL(new Blob([n],{type:"image/svg+xml"})),new Promise((n=>{t.onload=()=>{const e=document.createElement("canvas").getContext("2d");e.drawImage(t,0,0),n(e)}}))},pn=[un("#f44",26),un("#4f4",26),un("#44f",26),un("#ff4",26),un("#4ff",26),un("#f4f",26),un("#fff",26),dn("#fff","#fff","#888",3,3,0,0,63.5,63.5,.5,0,255),dn("#a55","#aaa","#fff8",3,3,.8,.5,30,14,2,16,40,1),[rn(""),rn("")],vn("#f44",22),vn("#4f4",22),vn("#44f",22),vn("#ff4",22),vn("#4ff",22),vn("#f4f",22),vn("#fff",22),mn("#320",0),(n=>[rn(ln("#777","#fff")+sn(32,32,n,"#222")),rn(an(0,0,64,64,"#fff")+an(1,1,62,62,"#aaa")+sn(32,32,n,"#888")),1,50])(26),un("#fff",30),((n,t)=>[rn(ln(n,t)),rn("")])("#fc3","#421"),dn("#bbd","#eee","#fff3",0,0,0,0,31,31,1,0,200),(n=>[rn(on(.12,.15,1,32,"turbulence")+an(0,0,64,64,"#fff",'filter="url(#n)"')+an(0,0,64,64,n+"8")),rn(an(0,0,64,64,"#222")+cn(0,0,64,0,"#111")+cn(0,16,64,16,"#111")+cn(0,32,64,32,"#111")+cn(0,48,64,48,"#111")+fn(30,"10")),1,50])("#fed"),dn("#333","#444","#fff3",0,0,.7,.01,30,14,2,16,8),mn("#d72",1),((n,t)=>[rn(on(.05,1,4,48,"turbulence")+an(4,4,56,56,n,`rx="${t}" ry="${t}" filter="url(#n)"`)),rn(an(4,4,56,56,"#ccc",`rx="${t}" ry="${t}"`)+an(5,5,54,54,"#ddd",`rx="${t}" ry="${t}"`)+an(6,6,52,52,"#eee",`rx="${t}" ry="${t}"`)+an(7,7,50,50,"#fff",`rx="${t}" ry="${t}"`)),2,255])("#fff",8),[rn(an(0,0,64,64,"#421")),rn(on(.1,.04,3,4,"turbulence")+an(0,0,64,64,"#999",'filter="url(#n)"')),1,5],hn("#8ac","#0000",!0),hn("#46b","#0007",!0),mn("#820",2),dn("#fa7","#e97","#fff3",4,4,.07,.2,30,30,2,16,200,2),dn("#563","#888","#fff4",3,3,.9,.025,14,14,2,7,20,2),dn("#ccc","#777","#fff2",0,0,.07,.1,60,60,2,0,20),dn("#ccf","#ccf","#fffb",0,0,.47,.1,64,64,0,0,20),hn("#a64","#fff3",!1),dn("#5df","#567","#aaa2",0,0,0,0,3,3,1,2,30,.5),(()=>{let n=an(0,0,64,64,"#888");for(let t=56;t>46;--t){const e=255-2*t;n+=an(60-t,60-t,t-(56-t),t-(56-t),`rgb(${e},${e},${e})`,'rx="6" ry="6"')}return[rn(on(.2,.5,3,56)+an(4,4,56,56,"#fff",'rx="6" ry="6" filter="url(#n)"')+an(4,4,56,56,"#acf9",'rx="6" ry="6"')+cn(20,20,44,44,"#888",5)+cn(20,44,44,20,"#888",5)),rn(n+an(16,16,32,32,"#999")+cn(20,20,44,44,"#888",5)+cn(20,44,44,20,"#888",5)+fn(10,"02")),6,255]})(),[rn(an(0,0,64,64,"#bdf")+an(2,2,60,60,"#fff",'rx="8" ry="8"')+sn(8,8,2,"#bdf")+sn(8,56,2,"#bdf")+sn(56,8,2,"#bdf")+sn(56,56,2,"#bdf")),rn(an(0,0,64,64,"#888")+an(2,2,60,60,"#aaa",'rx="8" ry="8"')+an(3,3,58,58,"#bbb",'rx="8" ry="8"')+sn(8,8,2,"#999")+sn(8,56,2,"#999")+sn(56,8,2,"#999")+sn(56,56,2,"#999")+sn(0,0,3,"#666")+sn(0,64,3,"#666")+sn(64,0,3,"#666")+sn(64,64,3,"#666")+fn()),1,255]],yn=function(n){var t=function(n){return Math.sin(6.283184*n)},e=function(n){return.003959503758*2**((n-128)/12)},r=function(n,t,r){var i,a,c,s,f,l,u=o[n.Dn[0]],d=n.Dn[1],v=n.Dn[3]/32,m=o[n.Dn[4]],h=n.Dn[5],x=n.Dn[8]/32,p=n.Dn[9],y=n.Dn[10]*n.Dn[10]*4,g=n.Dn[11]*n.Dn[11]*4,R=n.Dn[12]*n.Dn[12]*4,b=1/R,E=-n.Dn[13]/16,T=n.Dn[14],A=r*2**(2-n.Dn[15]),D=new Int32Array(y+g+R),w=0,_=0;for(i=0,a=0;i<y+g+R;i++,a++)a>=0&&(a-=A,f=e(t+(15&(T=T>>8|(255&T)<<4))+n.Dn[2]-128),l=e(t+(15&T)+n.Dn[6]-128)*(1+8e-4*n.Dn[7])),c=1,i<y?c=i/y:i>=y+g&&(c=(1-(c=(i-y-g)*b))*3**(E*c)),s=u(w+=f*c**v)*d,s+=m(_+=l*c**x)*h,p&&(s+=(2*Math.random()-1)*p),D[i]=80*s*c|0;return D},o=[t,function(n){return n%1<.5?1:-1},function(n){return n%1*2-1},function(n){var t=n%1*4;return t<2?t-1:3-t}],i=n.Cn,a=0,c=n.Ln*n.Xn*(i+1)*2,s=new Int32Array(c);this.Sn=function(){var e,f,l,u,d,v,m,h,x,p,y,g,R,b,E=new Int32Array(c),T=n._n[a],A=n.Ln,D=n.Xn,w=0,_=0,U=!1,$=[];for(l=0;l<=i;++l)for(m=T.zn[l],u=0;u<D;++u){var B=m?T.c[m-1].f[u]:0;B&&(T.Dn[B-1]=T.c[m-1].f[u+D]||0,B<17&&($=[]));var L=o[T.Dn[16]],X=T.Dn[17]/512,F=2**(T.Dn[18]-9)/A,P=T.Dn[19],I=T.Dn[20],M=43.23529*T.Dn[21]*3.141592/44100,S=1-T.Dn[22]/255,O=1e-5*T.Dn[23],G=T.Dn[24]/32,C=T.Dn[25]/512,k=6.283184*2**(T.Dn[26]-9)/A,N=T.Dn[27]/255,z=T.Dn[28]*A&-2;for(y=(l*D+u)*A,d=0;d<4;++d)if(v=m?T.c[m-1].n[u+d*D]:0){$[v]||($[v]=r(T,v,A));var Y=$[v];for(f=0,e=2*y;f<Y.length;f++,e+=2)E[e]+=Y[f]}for(f=0;f<A;f++)(p=E[h=2*(y+f)])||U?(g=M,P&&(g*=L(F*h)*X+.5),_+=(g=1.5*Math.sin(g))*(R=S*(p-_)-(w+=g*_)),p=3==I?_:1==I?R:w,O&&(p=(p*=O)<1?p>-1?t(.25*p):-1:1,p/=O),U=(p*=G)*p>1e-5,b=p*(1-(x=Math.sin(k*h)*C+.5)),p*=x):b=0,h>=z&&(b+=E[h-z+1]*N,p+=E[h-z]*N),E[h]=0|b,E[h+1]=0|p,s[h]+=0|b,s[h+1]+=0|p}return++a/n.In},this.Tn=function(n){for(var t=n.createBuffer(2,c/2,44100),e=0;e<2;e++)for(var r=t.getChannelData(e),o=e;o<c;o+=2)r[o>>1]=s[o]/65536;return t}},gn={wn:{_n:[{Dn:[2,60,128,0,2,87,128,12,0,0,234,16,224,0,0,0,0,138,3,1,2,18,78,0,39,97,6,121,6],zn:[4,,1,,3,,5,,4,,1,,3,,5,,4,,1,,3,,5,,4,,1,,3,,5,,4,,1,,3,,5,,6,,1,,3,,5,,6,,1,,3,,5,,4,,1,,3,,5,,4,,1,,3,,5,,4,,1,,3,,5],c:[{n:[125,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,130,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,137],f:[]},{n:[],f:[]},{n:[125,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,132,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,137],f:[]},{n:[123,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,130,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,135],f:[22,24,18,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,133,17,194]},{n:[123,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,128,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,135],f:[]},{n:[123,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,130,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,135],f:[22,24,18,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,18,,138]}]},{Dn:[2,88,128,0,2,183,128,0,0,0,5,6,58,0,0,0,0,0,0,0,3,135,0,0,32,147,6,121,6],zn:[,,,,,,,,3,3,1,1,2,2,4,4,3,3,1,1,2,2,4,4,3,3,1,1,2,2,4,4,3,3,1,1,2,2,4,4,,,,,,,,,3,3,1,1,2,2,4,4,3,3,1,1,2,2,4,4,3,3,1,1,2,2,4,4,3,3,1,1,2,2,4,4],c:[{n:[137,,130,,133,,130,,137,,130,,133,,130,,137,,130,,133,,130,,137,,130,,133,,138],f:[]},{n:[137,,128,,132,,128,,137,,128,,132,,128,,137,,128,,132,,128,,137,,128,,132,,138],f:[]},{n:[135,,126,,130,,126,,135,,126,,130,,126,,135,,126,,130,,126,,135,,126,,130,,131],f:[]},{n:[135,,128,,131,,128,,135,,128,,131,,128,,135,,128,,131,,128,,135,,128,,131,,136],f:[]}]},{Dn:[2,83,128,0,3,155,128,0,0,0,127,6,52,0,0,0,0,195,5,1,2,62,0,0,36,0,0,121,6],zn:[,,,,,,,,,,,,,,,,1,2,3,4,5,6,7,8],c:[{n:[149,,,,,,,,,,,,,,,,150],f:[]},{n:[147,,,,,,,,,,,,,,,,142],f:[]},{n:[144,,,,,,,,,,,,,,,,145],f:[]},{n:[137],f:[]},{n:[140,,,,,,,,,,,,,,,,139],f:[]},{n:[149,,,,,,,,,,,,,,,,144],f:[]},{n:[147],f:[]},{n:[135],f:[]}]},{Dn:[0,187,116,85,0,183,116,0,37,9,4,6,73,99,0,0,0,0,0,0,2,99,0,0,77,0,0,0,0],zn:[,,,,,,,,,,,,,,,,,,,,,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],c:[{n:[144,,,,144,,,,144,,,,144,,,,144,,,,144,,,,144,,,,144],f:[]}]},{Dn:[0,187,128,64,1,147,128,0,64,255,4,6,73,119,0,0,0,0,0,0,3,52,56,25,108,20,0,20,6],zn:[,,,,,,,,,,,,,,,,,,,,,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],c:[{n:[,,,,125,,,,,,,,125,,,,,,,,125,,,,,,,,125,,,125],f:[]}]},{Dn:[2,40,140,64,0,0,140,0,0,255,5,0,67,132,0,0,0,0,0,0,1,209,192,0,71,0,0,52,1],zn:[,,,,,,,,,,,,,,,,,,,,,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],c:[{n:[149,,149,,149,,149,,149,,149,,149,,149,,149,,149,,149,,149,,149,,149,,149,,149,149],f:[]}]},{Dn:[0,0,128,0,0,0,128,0,0,130,0,1,59,0,0,0,0,0,0,0,1,255,171,0,40,39,3,88,3],zn:[,,,,,,,,,,,,,,,,,,,,,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],c:[{n:[,,137,,,,137,,,,137,,,,137,,,,137,,,,137,,,,137,,,,137],f:[]}]},{Dn:[0,0,128,0,0,0,128,0,0,255,194,24,58,0,0,0,0,195,1,1,3,60,0,31,41,215,2,121,6],zn:[,,,,,,,,,,,,,,,,,,,,,,,1,,,,,,,,1,,,,,,,,1,,,,,,,,,,,,,,,,1],c:[{n:[,,,,137],f:[]}]},{Dn:[2,0,129,250,3,0,128,0,0,255,0,31,218,210,0,0,3,195,6,0,1,35,116,0,32,0,0,121,6],zn:[,,,,,,,,,,,,,,,,,,,,,,,,1,,,,,,,,1,,,,,,,,1,,,,,,,,,,,,,,,,1,,,,,,,,1,,,,,,,,1],c:[{n:[149],f:[]}]},{Dn:[1,160,128,0,2,174,128,0,0,16,0,0,60,64,0,0,0,0,0,0,2,6,148,131,255,33,4,84,6],zn:[,,,,,,,,,,,,,,,,,,,,,,,,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4,1,1,2,2,3,3,4,4],c:[{n:[111,,,111,,,111,,111,,,111,,,123,,111,,,111,,,111,,111,,,111,,,114],f:[]},{n:[106,,,106,,,106,,106,,,106,,,118,,106,,,106,,,106,,106,,,106,,,114],f:[]},{n:[113,,,113,,,113,,113,,,113,,,125,,113,,,113,,,113,,113,,,113,,,120],f:[]},{n:[116,,,116,,,116,,116,,,116,,,128,,116,,,116,,,116,,116,,,116,,,123],f:[]}]}],Ln:5513,Xn:32,Cn:79,In:10},Pn:{_n:[{Dn:[3,135,128,121,3,201,128,0,127,255,63,6,87,0,41,6,1,195,6,1,2,96,43,24,119,147,5,64,4],zn:[1],c:[{n:[135],f:[]}]}],Ln:5513,Xn:12,Cn:0,In:1},Fn:{_n:[{Dn:[3,65,125,132,1,57,118,127,218,91,109,0,58,113,57,6,1,195,11,1,1,26,94,46,140,147,6,163,2],zn:[1],c:[{n:[147],f:[]}]}],Ln:3308,Xn:32,Cn:0,In:1},rn:{_n:[{Dn:[1,255,104,192,3,255,98,177,23,120,11,0,178,138,108,3,1,204,3,1,2,155,118,44,218,0,0,66,2],zn:[1],c:[{n:[149],f:[]}]}],Ln:16538,Xn:5,Cn:0,In:1},K:{_n:[{Dn:[1,136,92,56,1,154,128,9,0,255,64,5,52,0,37,5,1,116,10,1,2,21,63,55,212,47,3,113,1],zn:[1],c:[{n:[149],f:[]}]}],Ln:3308,Xn:12,Cn:0,In:1},Rn:{_n:[{Dn:[1,100,108,0,1,201,109,46,0,0,0,31,0,0,70,7,1,255,14,1,2,14,76,0,32,0,0,135,1],zn:[1],c:[{n:[125,,125],f:[]}]}],Ln:3891,Xn:4,Cn:0,In:1}};let Rn=!0;const bn=n=>{const t=.001*Math.min(1e3/30,n-en.time);en.time=n,en.state.step(t),Rn&&requestAnimationFrame(bn)};new Promise((n=>{const t=[],e=[],r=pn.map(((n,r)=>new Promise((o=>{Promise.all([xn(n[0]).then((n=>t[r]=n)),xn(n[1]).then((n=>e[r]=n))]).then(o)}))));Promise.all(r).then((()=>{n([t.map((n=>n.getImageData(0,0,64,64))),e.map(((n,t)=>((n,t,e)=>{const r=new Uint8ClampedArray(n.data.length),o=(t,e)=>n.data[256*(63&e)+4*(63&t)]/255;for(let n=0;n<64;++n)for(let i=0;i<64;++i){const a=t*-(o(i+1,n-1)-o(i-1,n-1)+2*(o(i+1,n)-o(i-1,n))+o(i+1,n+1)-o(i-1,n+1)),c=t*-(o(i-1,n+1)-o(i-1,n-1)+2*(o(i,n+1)-o(i,n-1))+o(i+1,n+1)-o(i+1,n-1)),s=Math.sqrt(a*a+c*c+1);let f=256*n+4*i;r[f++]=Math.round(255*(.5+a/s*.5)),r[f++]=Math.round(255*(.5+c/s*.5)),r[f++]=e}return new ImageData(r,64)})(n.getImageData(0,0,64,64),pn[t][2],pn[t][3])))])}))})).then((([n,t])=>{var e;en.vn.N(n,t),(e=en.hn,new Promise((n=>{const t=new AudioContext,r=Object.keys(gn);let o,i=0;const a=setInterval((()=>{if(o=o||new yn(gn[r[i]]),o.Sn()<1)return;const c=o.Tn(t);o=0,e[r[i]]=()=>{"suspended"==t.state&&t.resume();const n=new AudioBufferSourceNode(t,{buffer:c,loop:c.duration>100});return n.connect(t.destination),n.start(),n},++i==r.length&&(clearInterval(a),n(t))}),0)}))).then((()=>{let n=!1;try{n=window.localStorage.getItem("GamutShift-save")>1}catch(n){}const t=document.getElementById("load"),e=document.getElementById("play"),r=document.getElementById("cont");document.getElementById("loud").style.display="block",t.style.display="none",e.style.display="block",r.style.display=n?"block":"none";const o=()=>{document.getElementById("title").style.display="none",t.style.display="block",t.innerText="Move with ARROW keys - SPACE rewinds - R restarts level",en.start(),(()=>{const n={mn:{keys:["ArrowDown","KeyS"],mn:()=>en.dn.mn=!0,pn:()=>en.dn.mn=!1},pn:{keys:["ArrowUp","KeyW"],mn:()=>en.dn.pn=!0,pn:()=>en.dn.pn=!1},left:{keys:["ArrowLeft","KeyA"],mn:()=>en.dn.left=!0,pn:()=>en.dn.left=!1},right:{keys:["ArrowRight","KeyD"],mn:()=>en.dn.right=!0,pn:()=>en.dn.right=!1},K:{keys:["Space"],mn:()=>en.K(),pn:()=>0},reset:{keys:["r"],mn:()=>en.yn(),pn:()=>0},next:{keys:["n"],mn:()=>en.Gn(),pn:()=>0}};window.addEventListener("blur",(n=>{Rn=!1})),window.addEventListener("focus",(n=>{Rn||requestAnimationFrame(bn),Rn=!0}));const t=(n,t,e)=>{if(-1!=e.keys.indexOf(n))return t||e.mn(),!0},e=(n,t)=>{if(-1!=t.keys.indexOf(n))return t.pn(),!0};document.addEventListener("keydown",(e=>{(t(e.code,e.repeat,n.mn)||t(e.code,e.repeat,n.pn)||t(e.code,e.repeat,n.left)||t(e.code,e.repeat,n.right)||t(e.code,!1,n.K)||t(e.key,e.repeat,n.reset)||window.lemmecheat&&t(e.key,e.repeat,n.next))&&e.preventDefault()})),document.addEventListener("keyup",(t=>{(e(t.code,n.mn)||e(t.code,n.pn)||e(t.code,n.left)||e(t.code,n.right))&&t.preventDefault()}))})(),requestAnimationFrame(bn)};r.onclick=o,e.onclick=()=>{try{window.localStorage.setItem("GamutShift-save",1)}catch(n){}o()}}))}))})()</script>