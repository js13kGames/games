<canvas id=C0 width=1024 height=768></canvas><canvas id=C1 width=512 height=384></canvas><style onload="g=C0.getContext`webgl`;c=C1.getContext`2d`;for(let l in c)c[l[0]+[l[6]]]=l;for(let l in g)g[l[1]+l[6]+[l[15]]]=g[l];let e,v,f,t,d,m,o,a,l=1,x=0,n=-1,i=0,y=0,r=466.16,h=523.25,u=587.33,s=698.46,z=783.99,X=[349.24,349.24,392,392,392,392,392,392,392,392,392,392,392,392,392,392],_=[329.64,329.64,349.24,349.24,349.24,349.24,349.24,349.24,349.24,349.24,349.24,349.24,554.4,h,r,440],p=[0,0,u,s,z,s,z,s,0,0,0,0,0,0,0,0,0,0,u,s,z,s,z,s,2*r,0,0,0,0,0,0,0,0,0,u,s,z,s,z,s,0,0,0,0,0,0,0,0,0,0,u,s,z,s,z,s,z,s,2*r,2*h,2*u,0,2*h,2*u,2*s,2*z,u,s,z,s,z,s,0,0,0,0,0,0,0,0,0,0,u,s,z,s,z,s,2*r,0,0,0,0,0,0,0,0,0,u,s,z,s,z,s,0,0,0,0,0,0,0,0,0,0,u,s,z,s,z,s,z,s,2*r,2*h,2*u,0,2*h,2*u,2*s,2*z,u,s,z,s,z,s,0,0,0,0,0,0,0,0,0,0,u,s,z,s,z,s,2*r,0,0,0,0,0,0,0,0,0,u,s,z,s,z,s,0,0,0,0,0,0,0,0,0,0,u,s,z,s,z,s,z,s,2*r,2*h,2*u,0,2*h,2*u,2*s,2*z,u,s,z,s,z,s,0,0,u,s,z,s,z,s,z,s,2*r,2*h,2*u,0,2*h,2*u,2*s,2*z,u,s,z,s,z,s,0,0,u,s,z,s,z,s,0,0,u,s,z,s,z,s,2*z,2*s,2*u,2*s,2*u,2*h,2*r,2*h,2*s,2*u,2*h,2*u,2*h,2*r,z,2*r],w=new Float32Array(1024),S=new Float32Array(1024),b=new Float32Array(1024),D=new Float32Array(1024),M=new Float32Array(1024),T=new Float32Array(1024),F=new Float32Array(1024),A=new Float32Array(1024),B=new Float32Array(1024),R=()=>{let e=0,v=0,f=0,t=0,d=0,m=0,o=0,a=0;return(l,x,n)=>{let i=2*Math.PI*l/22050,y=Math.sin(i),r=Math.cos(i),h=y*Math.sinh(Math.log(2)*i/y),u=1-r,s=1+h;d=u/2/s,m=u/s,o=-2*r/s,a=(1-h)/s,n[0]=d*x[0]+m*e+d*v-o*f-a*t,n[1]=d*x[1]+m*x[0]+d*e-o*n[0]-a*f;for(let e=2;e<1024;++e)n[e]=d*x[e]+m*x[e-1]+d*x[e-2]-o*n[e-1]-a*n[e-2];e=x[1024-1],v=x[1024-2],f=n[1024-1],t=n[1024-2]}},C=e=>0>e?0:e>1?1:e,q=(e,v,f)=>(f=C((f-e)/(v-e)))*f*(3-2*f),E=e=>1-e%(2*Math.PI)/(2*Math.PI)*2,O=e=>1-2*Math.abs(1-e%(2*Math.PI)/(2*Math.PI)*2),k=e=>E(e)>.5?1:-1,P=(e,v,f,t)=>f*(1-2*Math.random())*Math.exp(e%v*-t),G=(e,v)=>.6*C(400*(e%=v))*(1-q(.4,.5,e))*Math.sin(220*Math.pow(e,.65)),W=(e,v,f)=>{let t=0;for(;f>=v;v+=2)t+=4/Math.PI/v*Math.sin(v*e);return t},L=(v,f,t)=>(t=((v/f/16|0)%4==3?_:X)[v/f%16|0]*(64>e%128?1:1.335),.4*C(400*(v%=f))*(1-q(.1,.2,v))*(O(t*v)+.2*E(t*v))),H=(e,v,f)=>(f=p[e/v%256|0],.4*C(100*(e%=v))*(1-q(.1,.3,e))*.1*k(f*e)),I=(e,v,f,t,d)=>{for(let m=0;m<1024;++m){let o=(n+m)/22050;v[m]+=e(o,f,t,d)}},Y=(e,v)=>{for(let f=0;f<1024;++f){let t=(v+f)/22050;.1>t?e[f]+=2*b[f]*Math.exp(-120*t):.5>t&&(e[f]+=2*b[f]*Math.exp(-240*(t-.1)))}},N=(e,v)=>{for(let f=0;f<1024;++f){let t=(v+f)/22050,d=120*Math.PI*t%(2*Math.PI)/(2*Math.PI);e[f]+=.5*W(d+.01*(1-(2*d-1)*(2*d-1)),1,5)*Math.exp(-3*t)}},Z=R(),K=R(),U=R(),J=R();for(let e=0;e<1024;++e)S[e]=1-2*Math.random();J(4e3,S,b);let Q,V,j,$,ee,ve,fe,te,ce,de,me,oe,ae,le,xe,ne=e=>l=e,ie=()=>{v=n,o=n},ye=()=>f=n,re=e=>{m=n,a=e},he=()=>{let r=new(window.AudioContext||window.webkitAudioContext)({sampleRate:22050}),h=r.createScriptProcessor(1024,0,1);h.connect(r.destination),h.onaudioprocess=r=>(r=>{if(0>n)return void(n=0);l&&x>0&&(x=Math.max(0,x-.05)),!l&&1>x&&(x=Math.min(1,x+.05)),e=n/22050/0.45;for(let e=0;e<1024;++e)w[e]=D[e]=0;I(L,D,.25*0.45);let h=e%64>=32,u=n/22050%(0.45*(h?2:1))*1;Z((h?200:100)+1500*u,D,M),I(G,w,0.45),I(P,w,.5*0.45,.05,30),I(P,w,2*0.45,.25,15),128>e%256||I(H,w,.5*0.45);for(let e=0;e<1024;++e)A[e]=.2*x*k(i+=.02*y);U(300,A,B);for(let e=0;e<1024;++e)T[e]=w[e]+M[e]+.8*B[e];K(200,T,F);for(let e=0;e<1024;++e)r[e]=-1>(s=.5*(x*T[e]+(1-x)*F[e]))?-1:s>1?1:s;var s;5e4>n&&(Y(r,n),N(r,n)),v&&5e4>n-v&&N(r,n-v),f&&5e4>n-f&&Y(r,n-f),m&&1e4>n-m&&((e,v)=>{for(let f=0;f<1024;++f){let t=(v+f)/22050+.05,d=a?t>.3?1800:t>.2?1200:t>.1?1600:1200:t>.3?2400:t>.2?1800:t>.1?1600:1200,m=C(100*(t-.05)),o=1-q(.1,.4,t);e[f]+=.3*m*o*O(2*Math.PI*d*t)}})(r,n-m),d&&1e4>n-d&&(e=>{let v=t&&t!=d,f=n-(v?t:d);for(let t=0;t<1024;++t){let d=(f+t)/22050,m=C(10*d),o=1-q(.1,.2,d);v&&(o*=1-t/1024),e[t]+=.5*m*o*O(300*Math.sqrt(d))}v&&(t=d)})(r),o&&1e5>n-o&&((e,v)=>{for(let f=0;f<1024;++f){let t=(v+f)/22050,d=t>1.5;t-=d?1.5:.5;let m=C(200*t),o=1-q(.2,.45,t);e[f]+=d?.05*m*o*(O(10630*Math.PI*t)+O(6978*Math.PI*t)+O(3486*Math.PI*t)+O(1746*Math.PI*t)+O(870*Math.PI*t)):.05*m*o*(O(5310*Math.PI*t)+O(3486*Math.PI*t)+O(1746*Math.PI*t)+O(870*Math.PI*t))}})(r,n-o),n+=1024})(r.outputBuffer.getChannelData(0)),he=()=>{}},ue=0,se={},ze=0,Xe=0,ge=[],_e=1,pe=0,we=-1,Se=0,be=1,De=0,Me=0,Te=0,Fe=()=>{g.ix(3553,ae[Se]);let e=oe.slice(we,we+16);g.eg(3553,0,6408,4,1,0,6408,5126,e)},Ae=e=>{if(!e)return void(we=-1);let v=new Float32Array(Uint8Array.from(atob(e).split('').map(e=>e.charCodeAt(0))).buffer);oe=new Float32Array(2*v.length-32);for(let e=0;oe.length/2>e;e+=16)for(let f=0;16>f;++f)oe[2*e+f]=v[e+f],oe[16+2*e+f]=.5*(v[e+f]+v[16+e+f]);we=0,Fe(),Se=1-Se,Fe()},Be=()=>{let e=1.2*-be;j=0,V=Q,me=[],we>0&&(we=0,Fe(),Se=1-Se,Fe()),te.map(([v,f])=>{g.ia(36160,v),g.ix(3553,f),g.eg(3553,0,6408,19,1,0,6408,5126,Float32Array.of(0,0,1,0,0,0,0,0,0,0,0,0,0,10,0,0,0,10,e,0,0,0,0,0,0,0,0,0,1.6,10,0,0,1.6,10,e,0,0,0,0,0,0,0,0,0,1.6,10,2,0,1.6,10,2+e,0,0,0,0,0,0,0,0,0,0,10,2,0,0,10,2+e,0,0,0,0,0,0,0,0,0)),g.texParameteri(3553,10241,9728),g.texParameteri(3553,10242,33071),g.texParameteri(3553,10243,33071),g.ruu(36160,36064,3553,f,0)})},Re=e=>{let v=e/30,f=v%60|0,t=100*v%100|0;return(v/60|0)+':'+(f>9?'':'0')+f+':'+(t>9?'':'0')+t},Ce=(e,v,f,t,d,m,o)=>{c[c.ld]=o||1,c[c.fy]=d,c.font='bold '+t+'px monospace',c[c.fx](e,v,f),0!==o&&(c[c.sS]=m,c[c.sT](e,v,f))},qe=()=>{let e=Re(j);if(c[c.ce](0,0,512,384),be&&!De){let e=-50,v=205,f=-5;[[40,'#b00'],[20,'#500']].map(([t,d])=>{c[c.sS]=d,c[c.ld]=t,c[c.ba](),c[c.m](e+185,f+250),c[c.l](e+185,f+200),c[c.l](e+125,f+200),c[c.l](e+205,f+100),c[c.l](e+205,f+150),c.stroke(),c[c.ba](),c[c.m](e+250,f+100),c[c.l](e+250,f+230),c[c.l](e+310,f+230),c[c.l](e+310,f+100),c[c.l](e+250,f+100),c[c.l](e+250,f+230),c.stroke(),c[c.ba](),c[c.m](e+v+185,f+250),c[c.l](e+v+185,f+200),c[c.l](e+v+125,f+200),c[c.l](e+v+205,f+100),c[c.l](e+v+205,f+150),c.stroke()}),c[c.fy]='#b00',C1.style.letterSpacing='-2px',c.font='bold 64px monospace',c[c.fx]('kph',e+410,250),C1.style.letterSpacing='0px',Ce('ARROWS DRIVE  SPACE DRIFTS',135,290,16,'#bb0','',0),Ce('R RESTARTS  ESC QUITS',155,305,16,'#bb0','',0),Ce('G FOLLOWS GHOST',185,320,16,'#bb0','',0),Q/0.45%1>.25&&Ce('PRESS ENTER',178,350,24,'#0bb','#06b')}else if(1==De)Ce('FINISH!',135,100,56,'#0f0','#080',3),Ce(e,175,140,36,'#0f6','#083',2),Ce('RETRY',218,215,24,0==Te?'#bbb':'#0bb',0==Te?'#666':'#06b'),Ce('NEXT TRACK',183,240,24,1==Te?'#bbb':'#0bb',1==Te?'#666':'#06b'),Ce('SELECT TRACK',168,265,24,2==Te?'#bbb':'#0bb',2==Te?'#666':'#06b'),Ce('EXPORT GHOST TO CLIPBOARD',75,290,24,3==Te?'#bbb':'#0bb',3==Te?'#666':'#06b');else if(2==De){Ce('SELECT TRACK',80,80,48,'#f00','#800',3);for(let e=0;8>e;++e)Ce('TRACK '+(e+1)+'   '+Re(de[e][0]),135,127+25*e,24,Me==e?'#bbb':'#0bb',Me==e?'#666':'#06b');Ce('PASTE TO IMPORT GHOST FROM CLIPBOARD',40,340,20,'#b60','',0)}else{let v=Q-V-.5,f=15*(1-v%1)|0,t=(f>>1).toString(16);f=f.toString(16),v>0&&1>v&&Ce('READY',185,200,48,'#'+f+'00','#'+t+'00',3),v>1&&2>v&&Ce('GO!',205,200,64,'#0'+f+'0','#0'+t+'0',4),xe&&Ce('REPLAY',395,50,24,'#0b0','#060'),5==_e&&ce[14]>40&&(Ce('PRESS SPACE',145,70,32,'#0f0','#080',3),Ce('TO DRIFT',175,100,32,'#0f0','#080',3)),Ce(e,375,350,24,'#0bb','#06b'),Ce((100*ce[1]|0)+' kph',35,350,24,'#b2d','#906')}g.ix(3553,ee),g.texParameteri(3553,10241,9729),g.texParameteri(3553,10242,33071),g.texParameteri(3553,10243,33071),g.eg(3553,0,6408,6408,5121,C1)},Ee=e=>{g.if(34962,$);let v=g.ero(e,'x11');g.nVr(v),g.eAn(v,2,5120,!1,0,0),g.rr(4,0,3)},Oe=()=>{requestAnimationFrame(Oe);let e,v=performance.now()/1e3,f=v-Q>1?1:v-Q;if(Q=v,V){for(ue+=1e3*f;ue>=33.3;)ue-=33.3,g.sg(ge[_e][1]),g.ia(36160,te[1-pe][0]),g.ir(0,0,19,1),g.cT(33984),g.ix(3553,te[pe][1]),pe=1-pe,v>V+1.5?g.uniform4f(g.efi(ge[_e][1],'x10'),~~se[38],se[32]?-1:se[40]?1:0,~~se[37],~~se[39]):g.uniform4f(g.efi(ge[_e][1],'x10'),0,0,0,0),g.uniform1i(g.efi(ge[_e][1],'x6'),1),g.uniform1i(g.efi(ge[_e][1],'x9'),be?2:De?1:0),g.uniform1i(g.efi(ge[_e][1],'x0'),0),g.uniform1i(g.efi(ge[_e][1],'x8'),xe),Ee(ge[_e][1]),e=ce,ce=new Float32Array(4*19),e=e||ce,g.ex(0,0,19,1,6408,5126,ce),y=ce[1],qe(),v>V+1.5&&(0>we||(Se=1-Se,Fe(),oe.length-16>we?we+=16:1==xe&&(xe=2,j+=4)),De||(2!=xe&&++j%2&&!xe&&me.push(ce[12],ce[13],ce[14],ce[0],ce[28],ce[29],ce[30],ce[40],ce[44],ce[45],ce[46],ce[56],ce[60],ce[61],ce[62],ce[72]),(2==ce[4]&&2!=e[4]||2==ce[5]&&2!=e[5]||2==ce[6]&&2!=e[6]||2==ce[8]&&2!=e[8])&&(ce[4]+ce[5]+ce[6]+ce[8]>7?(De=1,Te=1,re(0),ne(1),le=btoa([...new Uint8Array(Float32Array.from(me).buffer)].map(e=>String.fromCharCode(e)).join('')),de[_e-2][0]&&j>=de[_e-2][0]||(de[_e-2][0]=j,de[_e-2][1]=le,localStorage['404kph']=JSON.stringify(de),localStorage['OS13kTrophy,🏎️,404kph,Track '+(_e-1)]=Re(j),Ae(le))):re(1)),(ce[26]&&!e[26]||ce[42]&&!e[42]||ce[58]&&!e[58]||ce[74]&&!e[74])&&(t||(t=n),d=n)),ce[9]&&!De&&(Be(),ie()),be&&v>V+8&&Be());g.sg(ge[_e][0]),g.ia(36160,ve[0]),g.ir(0,0,512,384),g.cT(33984),g.ix(3553,te[pe][1]),g.cT(33985),g.ix(3553,te[1-pe][1]),g.uniform1i(g.efi(ge[_e][0],'x6'),0),g.uniform1i(g.efi(ge[_e][0],'x9'),be?2:De?1:0),g.uniform1f(g.efi(ge[_e][0],'x4'),v-V),g.uniform1i(g.efi(ge[_e][0],'x0'),0),g.uniform1i(g.efi(ge[_e][0],'x1'),1),g.uniform1f(g.efi(ge[_e][0],'x5'),ue/33.3),g.uniform1i(g.efi(ge[_e][0],'x7'),0>we?0:1),g.uniform1i(g.efi(ge[_e][0],'x8'),xe),0>we||(g.cT(33986),g.ix(3553,ae[Se]),g.cT(33987),g.ix(3553,ae[1-Se]),g.uniform1i(g.efi(ge[_e][0],'x2'),2),g.uniform1i(g.efi(ge[_e][0],'x3'),3)),Ee(ge[_e][0])}g.sg(ge[0][0]),g.ia(36160,fe[0]),g.ir(0,0,512,384),g.cT(33984),g.ix(3553,ve[1]),g.cT(33985),g.ix(3553,ee),g.uniform4f(g.efi(ge[0][0],'x4'),ze,v,V,Xe),g.uniform1i(g.efi(ge[0][0],'x12'),0),g.uniform1i(g.efi(ge[0][0],'x13'),1),g.uniform2f(g.efi(ge[0][0],'x14'),be&&!De?.3:1,De?0:1),Ee(ge[0][0]),g.sg(ge[0][1]),g.ia(36160,null),g.ir(0,0,1024,768),g.cT(33984),g.ix(3553,fe[1]),g.uniform4f(g.efi(ge[0][1],'x4'),ze,v,V,Xe),g.uniform1i(g.efi(ge[0][1],'x12'),0),Ee(ge[0][1])},ke=()=>{De=0,be=0,Be(),Ae(_e>1?de[_e-2][1]:0),ne(0),ie(),ye()};C0.onclick=()=>{1>Xe||(C0.onclick=0,ze=V=Q,he(),document.onpaste=e=>{if(2==De){let v=e.clipboardData.getData('text').trim();_e=parseInt(v.substr(0,1)),ke(),Ae(v.substr(1))}},document.onkeyup=e=>delete se[e.keyCode],document.onkeydown=e=>{e.repeat||(se[e.keyCode]=1,82!=e.keyCode||be||(xe=0,De=0,ne(0),Be(),ie()),2==De?(40==e.keyCode&&7>Me&&(Me++,ye()),38==e.keyCode&&Me>0&&(Me--,ye()),13==e.keyCode&&(_e=Me+2,ke()),27==e.keyCode&&(De=0,be||(be=1,Ae(),Be(),_e=1),ye())):be||(27==e.keyCode&&(xe=0,De=2,ne(1),ye()),71!=e.keyCode||0>we||(xe=1,De=0,ne(0),Be(),ie()),1==De&&(40==e.keyCode&&3>Te&&(Te++,ye()),38==e.keyCode&&Te>0&&(Te--,ye()),13==e.keyCode&&(0==Te&&(De=0,ne(0),Be(),ie()),1==Te&&(9>_e&&_e++,ke()),2==Te&&(De=2),3==Te&&navigator.clipboard.writeText(_e+le).then(re),ye()))),be&&!De&&13==e.keyCode&&(De=2,ye()))})},g.ee('OES_texture_float'),g.ee('OES_texture_float_linear'),$=g.rB(),g.if(34962,$),g.uD(34962,Uint8Array.of(1,1,1,128,128,1),35044),ve=[g.rFe(),g.rT()],fe=[g.rFe(),g.rT()],g.ia(36160,ve[0]),g.ix(3553,ve[1]),g.eg(3553,0,6408,512,384,0,6408,5126,null),g.texParameteri(3553,10241,9729),g.texParameteri(3553,10242,33071),g.texParameteri(3553,10243,33071),g.ruu(36160,36064,3553,ve[1],0),g.ia(36160,fe[0]),g.ix(3553,fe[1]),g.eg(3553,0,6408,512,384,0,6408,5121,null),g.texParameteri(3553,10241,9729),g.texParameteri(3553,10242,33071),g.texParameteri(3553,10243,33071),g.ruu(36160,36064,3553,fe[1],0),te=[[g.rFe(),g.rT()],[g.rFe(),g.rT()]],ee=g.rT(),ae=[g.rT(),g.rT()],g.ix(3553,ae[0]),g.eg(3553,0,6408,4,1,0,6408,5126,null),g.texParameteri(3553,10241,9729),g.texParameteri(3553,10242,33071),g.texParameteri(3553,10243,33071),g.ix(3553,ae[1]),g.eg(3553,0,6408,4,1,0,6408,5126,null),g.texParameteri(3553,10241,9729),g.texParameteri(3553,10242,33071),g.texParameteri(3553,10243,33071),Be(),V=0;{let e,v,f,t,d=0,m=0,o=()=>{if(0==m&&(v=g.rS(35633),f=g.rS(35632),t=g.rP(),g.hS(v,'attribute vec4 x11;void main(){gl_Position=x11;}'),g.oe(v)),1==m&&(e=d%2?['XA']:[],d>1&&e.push('T0'+(d-2>>1)),g.hS(f,e.map(e=>'#define '+e).join('\n')+'\nprecision highp float;'+(2>d?'uniform sampler2D x12,x13;uniform vec4 x4;uniform vec2 x14;\n#ifdef XA\nvoid main(){vec2 v=gl_FragCoord.xy/vec2(1024,768);v=(v-.5)*2.;v*=1.1;v.x*=1.+pow(abs(v.y)/5.,2.);v.y*=1.+pow(abs(v.x)/4.,2.);v=v/2.+.5;v=v*.92+.04;vec3 m;float d=sin(.3*x4.y+v.y*21.)*sin(.7*x4.y+v.y*29.)*sin(.3+.33*x4.y+v.y*31.)*.0017;m.x=texture2D(x12,vec2(d+v.x+.001,v.y+.001)).x+.05;m.y=texture2D(x12,vec2(d+v.x,v.y-.002)).y+.05;m.z=texture2D(x12,vec2(d+v.x-.002,v.y)).z+.05;m.x+=.08*texture2D(x12,.75*vec2(d+.025,-.027)+vec2(v.x+.001,v.y+.001)).x;m.y+=.05*texture2D(x12,.75*vec2(d+-.022,-.02)+vec2(v.x,v.y-.002)).y;m.z+=.08*texture2D(x12,.75*vec2(d+-.02,-.018)+vec2(v.x-.002,v.y)).z;m=clamp(m*.6+.4*m*m,0.,1.);float f=16.*v.x*v.y*(1.-v.x)*(1.-v.y);m*=vec3(pow(f,.3));m*=vec3(.95,1.05,.95);m*=2.8;float x=clamp(.35+.35*sin(3.5*x4.y+v.y*768.*1.1),0.,1.),X=pow(x,1.7);m=m*vec3(.4+.7*X);m*=1.+.01*sin(110.*x4.y);if(v.x<0.||v.x>1.)m*=0.;if(v.y<0.||v.y>1.)m*=0.;m*=1.-.65*vec3(clamp((mod(gl_FragCoord.x,2.)-1.)*2.,0.,1.));gl_FragColor=vec4(m,1.);}\n#else\nfloat m(vec2 m,vec2 v){vec2 d=abs(m)-v;return length(max(d,0.))+min(max(d.x,d.y),0.);}vec3 f(float v,vec3 m){v+=.02;float f=v<.5?pow(.5+.5*sin(200.*v*v),5.):0.;return mix(mix(vec3(1,0,1),vec3(1),2.*v),v*m,f);}void main(){if(x4.x==0.){vec2 v=(gl_FragCoord.xy-.5*vec2(512.,384.))/384.;vec3 d=vec3(0,.05,.05);float u=x4.w==1.?3.*x4.y:0.;v*=.98+.02*cos(u);float l=m(v,vec2(.5,.05)),X=m(v,vec2(.49,.04)),y=m(v,vec2(.48*x4.w,.03));if(l<0.&&X>0.||y<0.)d=vec3(.5);if(x4.w==1.)d*=.5+.5*vec3(.5+.5*vec2(sin(u),cos(u)),1.);gl_FragColor=vec4(d,1);return;}vec2 v=1./vec2(512.,384.),d=gl_FragCoord.xy*v;float y=x4.y-x4.x-.1,l=4.*(x4.y-x4.z);if(y>1.&&l<1.)d.x+=(1.-l*l)*.3*sin(15.*(d.y+l*l));bool i;float x,z;{vec4 u=texture2D(x12,d+v*vec2(0,0)),X=texture2D(x12,d+v*vec2(0,1)),t=texture2D(x12,d+v*vec2(1,0)),e=texture2D(x12,d+v*vec2(1,1)),a=abs(vec4(u.w,X.w,t.w,e.w));i=u.w<0.||X.w<0.||t.w<0.||e.w<0.;z=max(a.x,max(a.y,max(a.z,a.w)));vec3 w=u.xyz-e.xyz,c=t.xyz-X.xyz;float s=a.x-a.w,o=a.z-a.y;x=.1+.9*max(sqrt(dot(w,w)+dot(c,c))>.9?1.:0.,sqrt(s*s+o*o)>.1?1.:0.);}vec3 c=vec3(.1*z);if(z>=1.&&z<2.)c=x*vec3(1,0,1)*mod(z,.5)/.4;else if(z>=15.)c=x*vec3(0,1,0);else if(z>=10.)c=.7*x*vec3(1,1,0);else if(z>=7.)c=x*vec3(1,0,0);else if(z>=6.)c=x*vec3(1,1,0);else if(z>=5.)c=x*vec3(0,1,0);else if(z>=4.)c=x*vec3(1,0,0);else if(z>=3.)c=x*vec3(0,.5,1);else if(z>=2.)c=x*vec3(0,0,1);else if(z<1.){if(z<.5)c=f(z/.5,vec3(.5,0,1));else c=(z-.5)/.5*vec3(.5,0,1);}if(i)c*=.4;vec3 u=texture2D(x13,vec2(d.x+(d.y>x14.x?.23-.5*d.y:0.),1.-d.y)).xyz;vec4 X=vec4((1.-.5*length(c)*max(u.x,max(u.y,u.z)))*min(1.,.3+x14.y+length(d-.5))*c+u.xyz,0);if(y<1.2){y-=.2;vec4 t=X;X=vec4(0,.05,.05,1);vec2 a=d-.5;if(y<.25){y=4.*y;y=1.-y;y=1.-y*y*y;if(m(a,vec2(.5*y,.01*y))<0.)X=vec4(1);}else if(y<1.){y=1.3*(y-.25);y=1.-y;y=1.-y*y*y;if(m(a,vec2(10.,y))<0.)X=mix(vec4(1),t,y);}}else if(l<1.)X=mix(length(X)*vec4(0,1,0,1),X,l),X+=(1.-l)*vec4(.5);gl_FragColor=X;}\n#endif\n':'uniform sampler2D x0,x1,x2,x3;uniform float x4,x5;uniform bool x6,x7,x8;uniform int x9;uniform vec4 x10;vec3 v[19],m,x;mat3 f,y,z,X;vec4 u,i,r,e,d;mat3 n(vec4 d){return mat3(1.-2.*d.y*d.y-2.*d.z*d.z,2.*d.y*d.x+2.*d.w*d.z,2.*d.z*d.x-2.*d.w*d.y,2.*d.y*d.x-2.*d.w*d.z,1.-2.*d.x*d.x-2.*d.z*d.z,2.*d.z*d.y+2.*d.w*d.x,2.*d.z*d.x+2.*d.w*d.y,2.*d.z*d.y-2.*d.w*d.x,1.-2.*d.x*d.x-2.*d.y*d.y);}mat2 t(float m){float v=sin(m),d=cos(m);return mat2(d,v,-v,d);}vec2 n(vec2 d,vec2 y){return d.x<y.x?d:y;}vec2 n(vec2 d,vec2 x,float f){return-d.x>x.x?vec2(-d.x,f+fract(d.y)):x;}float t(vec3 m,vec3 v){vec3 d=abs(m)-v;return length(max(d,0.))+min(max(d.x,max(d.y,d.z)),0.);}float h(vec2 m,vec2 v){vec2 d=abs(m)-v;return length(max(d,0.))+min(max(d.x,d.y),0.);}vec2 h(vec2 d,vec2 m,float x){float v=clamp(.5+.5*(m.x-d.x)/x,0.,1.);return vec2(mix(m.x,d.x,v)-x*v*(1.-v),d.x<m.x?d.y:m.y);}vec2 h(vec3 d,float m,float f,float v,float x,float y,float z,float X,float u,float i,float e){d=n(vec4(m,f,v,x))*(d-vec3(y,z,X));d.z-=e;vec3 l=floor(.25*d+.01);return vec2(t(d,vec3(u,i,e)),2.+.5*mod(l.x+l.y+l.z,2.));}float t(vec3 d,float v,float y){return d.z-=clamp(d.z,-v,v),length(d)-y;}vec2 h(vec3 d,float m,float v,float f,float x,float y,float z,float X,float u,float e,float i,float D,float T){d=n(vec4(m,v,f,x))*(d-vec3(y,z,X));d.z-=e;if(abs(i)>1.)d.xy=t(1./i*(d.z+e))*d.xy;vec3 l=floor(.25*d+.01);vec2 c=vec2(t(d,vec3(u,.5,e)),D+.5*mod(l.x+l.y+l.z,2.));return T>0.?n(c,vec2(t(vec3(abs(d.x),d.yz)-vec3(u,0,0),e,1.),3.+.5*mod(l.x+l.y+l.z,2.))):c;}vec2 h(vec2 d,float m,float v,float f,float y){d=t(v)*d;vec3 u=floor(vec3(d.xy,f)/4.+.01);vec2 x=vec2(h(d,vec2(m,.5)),2.+.5*mod(u.x+u.y+u.z,2.));return y>0.?n(x,vec2(length(vec2(abs(d.x)-m,d.y))-1.,3.+.5*mod(u.x+u.y+u.z,2.))):x;}vec2 n(vec3 d,float v,float x,float f,float X){float y=atan(d.z,d.x)*x,m=length(d.xz);vec2 z=vec2(m-x,d.y);return h(z,v,f,y,X);}vec2 t(vec3 d,float v,float x,float f,float X){d.x-=x;vec2 m=h(d.xy,v,f,0.,X),y=vec2(m.x,abs(d.z));return vec2(min(max(y.x,y.y),0.)+length(max(y,0.)),m.y);}vec2 n(vec3 d,float m,float v,float f,float x,float y,float z,float X,float u,float i,float e,float D,float T){d=n(vec4(m,v,f,x))*(d-vec3(y,z,X));if(i<0.)i*=-1.,d.x*=-1.;d.x+=i;vec2 l=d.x>0.&&d.z>0.?n(d,u,i,e,D):vec2(10000.,0.),c=t(d,u,i,e,D),r=t(d.zyx,u,i,e,D),s=n(l,n(c,r));if(s.y<3.)s.y+=T-2.;return s;}float h(vec3 x,vec3 y,vec3 v,float X){vec3 d=x-y,m=v-y;float z=clamp(dot(d,m)/dot(m,m),0.,1.);return length(d-m*z)-X;}float n(vec2 d,float x,float m,float v){vec2 u=vec2(m,v),f=vec2(m-x,2.*v),y=vec2(max(0.,d.x-(d.y<0.?x:m)),abs(d.y)-v),z=d-u+f*clamp(dot(u-d,f)/dot(f,f),0.,1.);float X=z.x<0.&&y.y<0.?-1.:1.;return X*sqrt(min(dot(y,y),dot(z,z)));}float t(vec3 d,float v,float f,float X){float m=n(d.xz,v,f,X);vec2 x=vec2(m,abs(d.y)-.5);return min(max(x.x,x.y),0.)+length(max(x,0.));}vec2 h(vec3 d,float m,float v,float f,float x,float y,float z,float X,float u,float e,float i,float T){d=n(vec4(m,v,f,x))*(d-vec3(y,z,X));d.z-=e;vec3 l=floor(.25*d+.01);d.x=abs(d.x);vec2 c=vec2(t(d,u,i,e),2.+.5*mod(l.x+l.y+l.z,2.));return T>0.?n(c,vec2(h(d,vec3(u,0,-e),vec3(i,0,e),1.),3.+.5*mod(l.x+l.y+l.z,2.))):c;}vec2 h(vec3 d,float m,float v,float f,float x,float y,float z,float X,float e,float u){d=n(vec4(m,v,f,x))*(d-vec3(y,z,X));d.z-=e;vec3 l=floor(.25*d+.01);return vec2(t(d,e,u),3.+.5*mod(l.x+l.y+l.z,2.));}vec2 s(vec3 d,vec3 x,vec4 m,float v){d-=x;d=n(m)*d;d.xy*=t(x4);vec3 u=floor(.5*d);vec2 i=abs(d.xy);i-=2.*min(dot(vec2(-.866,.5),i),0.)*vec2(-.866,.5);i-=vec2(clamp(i.x,-2.31,2.31),4);vec2 f=vec2(length(i),abs(d.z))-.4;float y=min(max(f.x,f.y),0.)+length(max(f,0.));return vec2(y,(v==2.?5.:4.)+.5*mod(u.x+u.y+u.z,2.));}void h(vec3 d,vec3 i,inout float v,inout float x,float y,float m,float f,float z,float X,float u,float e,float D,float l,float t,float T){mat3 c=n(vec4(m,f,z,X));d=c*(d-vec3(u,e,D));i=c*i;vec3 r=vec3(l,t,T);d.z-=r.z-.5;r.z+=.5;if(length(step(-r,d)-step(r,d))>1.5)x+=y,v=0.;else{i=1./i;float p,w,s=-10000.,a=10000.,o=r.x,h=d.x;p=(-o-h)*i.x;w=(o-h)*i.x;s=max(s,min(p,w));a=min(a,max(p,w));o=r.y,h=d.y;p=(-o-h)*i.y;w=(o-h)*i.y;s=max(s,min(p,w));a=min(a,max(p,w));o=r.z,h=d.z;p=(-o-h)*i.z;w=(o-h)*i.z;s=max(s,min(p,w));a=min(a,max(p,w));if(a>=s&&s>=0.){x+=y;if(s<v)v=s;}}}\n#ifdef T00\nconst vec3 Xc0 = vec3(0,-10,0),Xc1 = vec3(0,-10,0),Xc2 = vec3(0,-10,0),Xc3 = vec3(0,-10,0);const vec4 Xf0 = vec4(0,0,0,1),Xf1 = vec4(0,0,0,1),Xf2 = vec4(0,0,0,1),Xf3 = vec4(0,0,0,1),Xp0 = vec4(0,0,0,0),Xp1 = vec4(0);vec2 Xm(vec3 m){vec2 v=vec2(10000,0);if(mod(d.x/64.,2.)>=1.)v=n(v,h(m,0.,0.,0.,1.,.5,5.65,87.7,4.,20.505,0.,2.,1.));if(mod(d.x/128.,2.)>=1.)v=n(v,n(m,0.,0.,-.707,.707,.5,5.65,128.61,4.,-20.,-1.57,1.,2.));if(mod(d.x/256.,2.)>=1.)v=n(v,h(m,-.178,-.507,-.71,.455,-67.8,-9.6,65.9,18.917,18.917,18.917));if(mod(d.x/512.,2.)>=1.){vec2 f=h(h(m,-.061,0.,0.,.998,.5,11.5,-31.6,4.,50.,0.,2.,1.),h(m,.383,0.,0.,.924,.5,-1.42,64.2,2.29,.5,3.109),2.);v=n(v,f);}return v;}float Xt(vec3 m,vec3 v,float f){return h(m,v,f,d.x,64.,0.,0.,0.,1.,.5,5.65,87.7,5.,1.5,21.505),h(m,v,f,d.x,128.,0.,0.,-.707,.707,.5,13.15,128.61,13.5,6.,13.5),h(m,v,f,d.x,256.,-.178,-.507,-.71,.455,-67.8,-9.6,65.9,18.917,18.917,18.917),h(m,v,f,d.x,512.,0.,0.,0.,1.,0.,0.,-130.8,7.5,25.,102.5),f<10000.?f:-1.;}\n#endif\n#ifdef T01\nconst vec3 Xc0 = vec3(0.6,9.42,53.7),Xc1 = vec3(-117.1,34,169.28),Xc2 = vec3(-68.2,23.38,169.28),Xc3 = vec3(-7.1,21.79,152.5);const vec4 Xf0 = vec4(0,0,0,1),Xf1 = vec4(0,-0.707,0,0.707),Xf2 = vec4(0,-0.707,0,0.707),Xf3 = vec4(0,-0.925,0,0.379),Xp0 = vec4(63.9,24.3,8.7,50.67),Xp1 = vec4(0);vec2 Xm(vec3 m){vec2 v=vec2(10000,0);if(mod(d.x/64.,2.)>=1.)v=n(v,n(m,.087,0.,0.,.996,.5,16.006,129.024,10.,40.,-.5,1.,2.));if(mod(d.x/128.,2.)>=1.)v=n(v,h(m,.087,0.,0.,.996,.5,9.07,89.63,10.,20.,-80.,2.,1.));if(mod(d.x/256.,2.)>=1.)v=n(v,h(m,0.,0.,0.,1.,.5,9.07,-10.24,10.,50.,0.,2.,1.));if(mod(d.x/512.,2.)>=1.){vec2 f=h(h(m,-.18,-.684,.18,.684,-89.05,26.4,168.47,10.,4.11,59.5,2.,1.),h(m,0.,-.707,0.,.707,-84.17,22.95,168.47,10.,22.5,66.5,2.,1.),2.);v=n(v,f);}return v;}float Xt(vec3 m,vec3 v,float f){return h(m,v,f,d.x,64.,.087,0.,0.,.996,-14.,16.006,129.024,26.5,12.,26.5),h(m,v,f,d.x,128.,.087,0.,0.,.996,.5,9.07,89.63,11.,11.,21.),h(m,v,f,d.x,256.,0.,0.,0.,1.,.5,9.07,-10.24,11.,1.5,51.),h(m,v,f,d.x,512.,0.,-.707,0.,.707,-91.68,22.95,168.47,14.7,15.21,30.45),f<10000.?f:-1.;}\n#endif\n#ifdef T02\nconst vec3 Xc0 = vec3(0,8.7,24),Xc1 = vec3(0,2.78,92.7),Xc2 = vec3(349.3,42.2,172.6),Xc3 = vec3(230.4,17.82,172.4);const vec4 Xf0 = vec4(0,0,0,1),Xf1 = vec4(0,0,0,1),Xf2 = vec4(0,-0.707,0,0.707),Xf3 = vec4(0,-0.707,0,0.707),Xp0 = vec4(-33.6,77.3,206.5,40),Xp1 = vec4(0);vec2 Xm(vec3 m){vec2 v=vec2(10000,0);if(mod(d.x/64.,2.)>=1.)v=n(v,h(m,0.,-.707,0.,.707,189.6,17.8,172.6,3.5,40.,0.,6.,0.));if(mod(d.x/128.,2.)>=1.)v=n(v,h(m,0.,0.,0.,1.,.5,2.9,72.6,10.,10.,5.,2.));if(mod(d.x/256.,2.)>=1.)v=n(v,n(m,0.,0.,0.,1.,.5,2.9,132.6,5.,-40.,-.5,1.,2.));if(mod(d.x/512.,2.)>=1.)v=n(v,h(m,0.,-.707,0.,.707,139.6,17.8,172.6,7.,25.,0.,2.,1.));if(mod(d.y,2.)>=1.)v=n(v,h(m,0.,0.,0.,1.,.5,2.9,92.6,5.,20.,80.,2.,1.));if(mod(d.y/2.,2.)>=1.)v=n(v,h(m,0.,.707,0.,.707,80.5,2.9,172.6,5.,20.,-80.,2.,1.));if(mod(d.y/4.,2.)>=1.)v=n(v,h(m,0.,0.,0.,1.,.5,2.9,92.6,.5,.5,80.,2.,0.));if(mod(d.y/8.,2.)>=1.)v=n(v,h(m,0.,0.,0.,1.,.5,9.,-6.1,10.,14.545,0.,2.,1.));if(mod(d.y/16.,2.)>=1.){vec2 f=n(h(m,0.,0.,0.,1.,.72,3.94,58.3,4.,5.,5.),h(m,0.,0.,0.,1.,.5,2.9,2.6,10.,35.,0.,2.,1.),6.);v=n(v,f);}if(mod(d.y/32.,2.)>=1.){vec2 f=h(h(m,0.,-.707,0.,.707,269.6,17.8,172.6,7.,20.,0.,2.,1.),h(m,.221,-.672,-.221,.672,304.5,15.8,172.6,3.,.5,5.093),2.);v=n(v,f);}if(mod(d.y/64.,2.)>=1.){vec2 f=h(h(m,0.,-.707,0.,.707,80.5,2.9,172.6,5.,10.,0.,2.,1.),h(m,.221,-.672,-.221,.672,94.84,.9,172.6,4.,.5,5.093),2.);v=n(v,f);}return v;}float Xt(vec3 m,vec3 v,float f){return h(m,v,f,d.x,64.,0.,-.707,0.,.707,189.6,17.8,172.6,4.5,1.5,41.),h(m,v,f,d.x,128.,0.,0.,0.,1.,.5,2.9,72.6,11.,1.5,11.),h(m,v,f,d.x,256.,0.,0.,0.,1.,17.5,2.9,132.6,24.,7.,24.),h(m,v,f,d.x,512.,0.,-.707,0.,.707,139.6,17.8,172.6,8.,1.5,26.),h(m,v,f,d.y,1.,0.,0.,0.,1.,.5,2.9,92.6,6.,6.,21.),h(m,v,f,d.y,2.,0.,.707,0.,.707,80.5,2.9,172.6,6.,6.,21.),h(m,v,f,d.y,4.,0.,0.,0.,1.,.5,2.9,92.6,1.5,1.5,1.5),h(m,v,f,d.y,8.,0.,0.,0.,1.,.5,9.,-6.1,11.,1.5,15.545),h(m,v,f,d.y,16.,0.,0.,0.,1.,.5,2.9,2.6,11.,3.,37.8),h(m,v,f,d.y,32.,0.,-.707,0.,.707,269.6,17.8,172.6,10.,5.,22.5),h(m,v,f,d.y,64.,0.,-.707,0.,.707,80.5,2.9,172.6,6.,5.,12.5),f<10000.?f:-1.;}\n#endif\n#ifdef T03\nconst vec3 Xc0 = vec3(-120.51,20.33,239.8),Xc1 = vec3(-113.7,78.54,452.5),Xc2 = vec3(-192.95,17.99,341.16),Xc3 = vec3(-46.51,6.94,177.52);const vec4 Xf0 = vec4(0,0.361,0,0.932),Xf1 = vec4(-0.707,0,0,0.707),Xf2 = vec4(0,0,0,1),Xf3 = vec4(0,0.423,0,0.906),Xp0 = vec4(-140.3,65,425.3,50),Xp1 = vec4(0);vec2 Xm(vec3 m){vec2 v=vec2(10000,0);if(mod(d.x/64.,2.)>=1.)v=n(v,n(m,-.271,-.271,-.653,.653,-148.684,17.3,418.106,10.,-50.,1.57,1.,2.));if(mod(d.x/128.,2.)>=1.)v=n(v,n(m,0.,.383,0.,.924,-169.826,17.3,283.826,7.5,-80.,0.,0.,6.));if(mod(d.x/256.,2.)>=1.)v=n(v,h(m,0.,.383,0.,.924,-127.4,17.3,241.4,10.,30.,0.,2.,1.));if(mod(d.x/512.,2.)>=1.)v=n(v,h(m,0.,-.383,0.,.924,-169.968,17.3,396.822,10.,15.,0.,2.,1.));if(mod(d.y,2.)>=1.)v=n(v,h(m,.707,.405,.018,.58,-21.8,4.9,147.,5.,2.5));if(mod(d.y/2.,2.)>=1.)v=n(v,h(m,0.,0.,0.,1.,.5,9.,25.,10.,25.,-80.,2.,0.));if(mod(d.y/4.,2.)>=1.)v=n(v,h(m,0.,0.,0.,1.,.5,9.,-5.,10.,15.,0.,2.,1.));if(mod(d.y/8.,2.)>=1.)v=n(v,h(m,.684,.319,-.145,.64,-1.77,6.64,124.77,5.,5.));if(mod(d.y/16.,2.)>=1.){vec2 f=n(h(m,.698,.468,.029,.541,-33.1,7.5,189.7,6.889,10.),n(m,0.,0.,0.,1.,.5,9.,75.,10.,150.,-.63,0.,2.),6.);v=n(v,f);}return v;}float Xt(vec3 m,vec3 v,float f){return h(m,v,f,d.x,64.,-.271,-.271,-.653,.653,-148.684,36.8,418.106,31.5,12.,31.5),h(m,v,f,d.x,128.,0.,.383,0.,.924,-144.547,17.3,309.106,45.25,9.5,45.25),h(m,v,f,d.x,256.,0.,.383,0.,.924,-127.4,17.3,241.4,11.,1.5,31.),h(m,v,f,d.x,512.,0.,-.383,0.,.924,-169.968,17.3,396.822,11.,1.5,16.),h(m,v,f,d.y,1.,.707,.405,.018,.58,-21.8,4.9,147.,5.,5.,7.5),h(m,v,f,d.y,2.,0.,0.,0.,1.,.5,9.,25.,11.,11.,26.),h(m,v,f,d.y,4.,0.,0.,0.,1.,.5,9.,-5.,11.,1.5,16.),h(m,v,f,d.y,8.,.684,.319,-.145,.64,-1.77,6.64,124.77,10.,10.,10.),h(m,v,f,d.y,16.,0.,0.,0.,1.,.5,9.,75.,160.,20.,100.),f<10000.?f:-1.;}\n#endif\n#ifdef T04\nconst vec3 Xc0 = vec3(143.8,9.52,-165.5),Xc1 = vec3(-3.11,34.47,-175.77),Xc2 = vec3(5.32,8.8,-87.93),Xc3 = vec3(0,8.8,84.9);const vec4 Xf0 = vec4(0,0,0,1),Xf1 = vec4(-0.707,0,0,0.707),Xf2 = vec4(0,0.383,0,0.924),Xf3 = vec4(0,-0.707,0,0.707),Xp0 = vec4(12.5,29.5,-131.4,40),Xp1 = vec4(0);vec2 Xm(vec3 m){vec2 v=vec2(10000,0);if(mod(d.x/64.,2.)>=1.)v=n(v,n(m,.5,.5,-.5,.5,15.,9.,-165.5,20.,-20.,-1.57,0.,2.));if(mod(d.x/128.,2.)>=1.)v=n(v,n(m,-.5,.5,.5,.5,15.06,49.,-145.5,20.,-20.,-1.57,0.,2.));if(mod(d.x/256.,2.)>=1.)v=n(v,n(m,-.5,-.5,-.5,.5,15.,9.,-105.5,20.,-20.,-1.57,0.,2.));if(mod(d.x/512.,2.)>=1.)v=n(v,n(m,0.,-.707,-.707,0.,35.,29.,-125.5,20.,-20.,-1.57,0.,2.));if(mod(d.y,2.)>=1.)v=n(v,h(m,0.,-1.,0.,0.,0.,9.,-5.,15.,25.,0.,6.,1.));if(mod(d.y/2.,2.)>=1.)v=n(v,h(m,0.,-1.,0.,0.,0.,9.,-55.,15.,25.,0.,2.,0.));if(mod(d.y/4.,2.)>=1.){vec2 f=n(h(m,0.,0.,0.,1.,0.,9.,55.2,5.,5.,10.),h(m,0.,0.,0.,1.,0.,9.,-5.,15.,50.,0.,2.,1.),6.);v=n(v,f);}if(mod(d.y/8.,2.)>=1.){vec2 f=h(h(m,-.5,-.5,.5,.5,94.84,10.9,-165.5,10.,10.),h(m,0.,-.707,0.,.707,15.,9.,-165.5,20.,70.,0.,2.,1.),2.);v=n(v,f);}return v;}float Xt(vec3 m,vec3 v,float f){return h(m,v,f,d.x,64.,.5,.5,-.5,.5,15.,8.5,-165.5,21.5,22.,21.5),h(m,v,f,d.x,128.,-.5,.5,.5,.5,15.06,49.5,-145.5,21.5,22.,21.5),h(m,v,f,d.x,256.,-.5,-.5,-.5,.5,15.,8.5,-105.5,21.5,22.,21.5),h(m,v,f,d.x,512.,0.,-.707,-.707,0.,35.5,29.,-125.5,21.5,22.,21.5),h(m,v,f,d.y,1.,0.,-1.,0.,0.,0.,9.,-5.,16.,1.5,26.),h(m,v,f,d.y,2.,0.,-1.,0.,0.,0.,9.,-55.,16.,1.5,26.),h(m,v,f,d.y,4.,0.,0.,0.,1.,0.,9.,-5.,20.,1.,51.),h(m,v,f,d.y,8.,0.,-.707,0.,.707,15.,9.,-165.5,25.,25.,76.),f<10000.?f:-1.;}\n#endif\n#ifdef T05\nconst vec3 Xc0 = vec3(124.9,34,130.5),Xc1 = vec3(137.98,10.02,219.71),Xc2 = vec3(-95.81,9.97,133.71),Xc3 = vec3(45.5,34.74,185.03);const vec4 Xf0 = vec4(0,-0.707,0,0.707),Xf1 = vec4(0,0,0,1),Xf2 = vec4(0,0,0,1),Xf3 = vec4(0,-0.707,0,0.707),Xp0 = vec4(71.1,31.3,149.9,90),Xp1 = vec4(0);vec2 Xm(vec3 m){vec2 v=vec2(10000,0);if(mod(d.x/64.,2.)>=1.)v=n(v,h(m,0.,0.,0.,1.,0.,9.,-20.,15.,30.,7.5,1.));if(mod(d.x/128.,2.)>=1.)v=n(v,h(m,0.,0.,0.,1.,138.2,9.,157.5,30.,30.,4.,1.));if(mod(d.x/256.,2.)>=1.)v=n(v,n(m,-.707,-.707,0.,0.,122.5,9.,157.5,50.,-30.,-1.57,0.,2.));if(mod(d.x/512.,2.)>=1.)v=n(v,n(m,0.,.707,0.,.707,-80.,9.,120.,7.5,-15.,0.,1.,2.));if(mod(d.y,2.)>=1.)v=n(v,h(m,0.,-.707,0.,.707,-30.,9.,150.,7.5,25.,0.,6.,0.));if(mod(d.y/2.,2.)>=1.)v=n(v,n(m,0.,0.,0.,1.,-95.,9.,135.,7.5,-15.,0.,1.,2.));if(mod(d.y/4.,2.)>=1.)v=n(v,h(m,0.,-.707,0.,.707,-80.,9.,150.,7.5,25.,0.,6.,0.));if(mod(d.y/8.,2.)>=1.)v=n(v,n(m,0.,0.,0.,1.,0.,9.,40.,7.5,80.,0.,1.,2.));if(mod(d.y/16.,2.)>=1.)v=n(v,n(m,0.,0.,-.707,.707,42.5,9.,157.5,60.,-30.,-1.57,0.,2.));return v;}float Xt(vec3 m,vec3 v,float f){return h(m,v,f,d.x,64.,0.,0.,0.,1.,0.,9.,-20.,16.,1.5,31.),h(m,v,f,d.x,128.,0.,0.,0.,1.,138.2,9.,157.5,31.,1.5,31.),h(m,v,f,d.x,256.,-.707,-.707,0.,0.,122.5,-1.5,157.5,41.5,52.,41.5),h(m,v,f,d.x,512.,0.,.707,0.,.707,-80.,9.,123.25,12.75,9.5,12.75),h(m,v,f,d.y,1.,0.,-.707,0.,.707,-30.,9.,150.,8.5,1.5,26.),h(m,v,f,d.y,2.,0.,0.,0.,1.,-91.75,9.,135.,12.75,9.5,12.75),h(m,v,f,d.y,4.,0.,-.707,0.,.707,-80.,9.,150.,8.5,1.5,26.),h(m,v,f,d.y,8.,0.,0.,0.,1.,-35.75,9.,40.,45.25,9.5,45.25),h(m,v,f,d.y,16.,0.,0.,-.707,.707,42.5,-6.5,157.5,46.5,62.,46.5),f<10000.?f:-1.;}\n#endif\n#ifdef T06\nconst vec3 Xc0 = vec3(0.44,36.98,104.33),Xc1 = vec3(-55.43,46.6,191.46),Xc2 = vec3(-9,61.2,154.5),Xc3 = vec3(77.61,29.42,154.8);const vec4 Xf0 = vec4(0,0,0,1),Xf1 = vec4(0,-0.707,0,0.707),Xf2 = vec4(0,-0.707,0,0.707),Xf3 = vec4(0,0,0,1),Xp0 = vec4(43.6,34.5,155.6,40),Xp1 = vec4(-55.6,50.6,155.6,40);vec2 Xm(vec3 m){vec2 v=vec2(10000,0);if(mod(d.x/64.,2.)>=1.)v=n(v,h(m,0.,0.,0.,1.,0.,9.,-10.,7.5,30.,0.,6.,1.));if(mod(d.x/128.,2.)>=1.){vec2 f=n(h(m,-.707,0.,0.,.707,43.6,123.1,155.6,40.,40.),h(m,-.707,0.,0.,.707,43.6,34.3,155.6,50.,50.,50.),2.);v=n(v,f);}if(mod(d.x/256.,2.)>=1.){vec2 f=h(h(m,.344,0.,0.,.939,0.,6.75,57.54,7.5,10.,0.,6.,1.),h(m,0.,0.,0.,1.,0.,9.,50.,7.5,10.,0.,6.,1.),5.);v=n(v,f);}if(mod(d.x/512.,2.)>=1.){vec2 f=n(h(m,-.707,0.,0.,.707,-55.6,139.4,155.6,40.,40.),h(m,-.707,0.,0.,.707,-55.6,50.6,155.6,50.,50.,50.),2.);v=n(v,f);}return v;}float Xt(vec3 m,vec3 v,float f){return h(m,v,f,d.x,64.,0.,0.,0.,1.,0.,9.,-10.,8.5,1.5,31.),h(m,v,f,d.x,128.,0.,0.,0.,1.,43.6,6.7,96.1,75.,75.,75.),h(m,v,f,d.x,256.,0.,0.,0.,1.,0.,9.,50.,12.25,14.25,15.75),h(m,v,f,d.x,512.,0.,0.,0.,1.,-55.6,23.,96.1,75.,75.,75.),f<10000.?f:-1.;}\n#endif\n#ifdef T07\nconst vec3 Xc0 = vec3(-35.1,60.3,150.9),Xc1 = vec3(126.2,23.53,200.1),Xc2 = vec3(323.25,82.07,259.96),Xc3 = vec3(393.47,25.95,319.14);const vec4 Xf0 = vec4(0,0,0,1),Xf1 = vec4(0,-0.69,0,0.723),Xf2 = vec4(0,0,0,1),Xf3 = vec4(0,-0.707,0,0.707),Xp0 = vec4(-29.4,43.1,150.9,72.7),Xp1 = vec4(324.7,50.2,260.1,39.1);vec2 Xm(vec3 m){vec2 v=vec2(10000,0);if(mod(d.x/64.,2.)>=1.)v=n(v,n(m,0.,-.707,0.,.707,301.1,24.,200.,7.5,15.,0.,0.,2.));if(mod(d.x/128.,2.)>=1.)v=n(v,h(m,0.,0.,0.,1.,0.,9.,-12.3,15.,25.,7.5,1.));if(mod(d.x/256.,2.)>=1.)v=n(v,h(m,.5,-.5,-.5,.5,-37.5,39.,100.,30.,.5,1.));if(mod(d.x/512.,2.)>=1.)v=n(v,h(m,.5,-.5,-.5,.5,-38.,39.,200.,30.,.5,1.));if(mod(d.y,2.)>=1.)v=n(v,h(m,0.,-.707,0.,.707,196.1,24.,200.,7.5,.5,52.5));if(mod(d.y/2.,2.)>=1.)v=n(v,n(m,.5,.5,-.5,.5,-7.5,9.,100.,30.,-30.,-1.57,0.,6.));if(mod(d.y/4.,2.)>=1.)v=n(v,h(m,0.,-.707,0.,.707,-8.,9.,200.,30.,22.9,0.,2.,1.));if(mod(d.y/8.,2.)>=1.)v=n(v,n(m,-.707,-.707,0.,0.,331.1,24.,260.,7.5,-30.,-1.57,0.,2.));if(mod(d.y/16.,2.)>=1.)v=n(v,n(m,.5,.5,-.5,.5,-8.,9.,200.,30.,-30.,-1.57,0.,6.));if(mod(d.y/32.,2.)>=1.)v=n(v,h(m,0.,-.707,0.,.707,37.8,9.,200.,30.,24.25,7.5,1.));if(mod(d.y/64.,2.)>=1.)v=n(v,h(m,0.,0.,0.,1.,316.1,24.,215.,7.5,22.5,0.,6.,0.));if(mod(d.y/128.,2.)>=1.)v=n(v,n(m,-.707,.707,0.,0.,323.6,84.,260.,15.,-30.,-1.57,0.,2.));if(mod(d.y/256.,2.)>=1.)v=n(v,n(m,0.,0.,.707,.707,323.6,84.,260.,15.,-30.,-1.57,0.,2.));if(mod(d.y/512.,2.)>=1.)v=n(v,n(m,0.,0.,-.707,.707,316.1,24.,260.,7.5,-30.,-1.57,0.,2.));if(mod(d.z,2.)>=1.)v=n(v,h(m,0.,0.,0.,1.,0.,9.,37.7,7.5,46.25,0.,2.,0.));if(mod(d.z/2.,2.)>=1.)v=n(v,n(m,0.,0.,0.,1.,331.1,24.,260.,7.5,-60.,0.,0.,2.));if(mod(d.z/4.,2.)>=1.){vec2 f=h(h(m,.183,-.683,-.183,.683,93.84,6.75,200.,7.5,10.,0.,2.,1.),h(m,0.,-.707,0.,.707,86.3,9.,200.,7.5,10.,0.,2.,1.),5.);v=n(v,f);}return v;}float Xt(vec3 m,vec3 v,float f){return h(m,v,f,d.x,64.,0.,-.707,0.,.707,301.1,24.,203.25,12.75,9.5,12.75),h(m,v,f,d.x,128.,0.,0.,0.,1.,0.,9.,-12.3,16.,1.5,26.),h(m,v,f,d.x,256.,.5,-.5,-.5,.5,-37.5,39.,100.,30.,.5,1.),h(m,v,f,d.x,512.,.5,-.5,-.5,.5,-38.,39.,200.,30.,.5,1.),h(m,v,f,d.y,1.,0.,-.707,0.,.707,196.1,24.,200.,7.5,.5,52.5),h(m,v,f,d.y,2.,.5,.5,-.5,.5,-7.5,8.5,100.,31.5,32.,31.5),h(m,v,f,d.y,4.,0.,-.707,0.,.707,-8.,9.,200.,31.,1.5,23.9),h(m,v,f,d.y,8.,-.707,-.707,0.,0.,331.1,34.75,260.,20.25,9.5,20.25),h(m,v,f,d.y,16.,.5,.5,-.5,.5,-8.,8.5,200.,31.5,32.,31.5),h(m,v,f,d.y,32.,0.,-.707,0.,.707,37.8,9.,200.,31.,1.5,25.25),h(m,v,f,d.y,64.,0.,0.,0.,1.,316.1,24.,215.,8.5,1.5,23.5),h(m,v,f,d.y,128.,-.707,.707,0.,0.,323.6,77.,260.,24.,17.,24.),h(m,v,f,d.y,256.,0.,0.,.707,.707,323.6,77.,260.,24.,17.,24.),h(m,v,f,d.y,512.,0.,0.,-.707,.707,316.1,34.75,260.,20.25,9.5,20.25),h(m,v,f,d.z,1.,0.,0.,0.,1.,0.,9.,37.7,8.5,1.5,47.25),h(m,v,f,d.z,2.,0.,0.,0.,1.,356.85,24.,260.,35.25,9.5,35.25),h(m,v,f,d.z,4.,0.,-.707,0.,.707,86.3,9.,200.,12.25,11.5,15.75),f<10000.?f:-1.;}\n#endif\n#ifdef T08\nconst vec3 Xc0 = vec3(99,118.44,115.8),Xc1 = vec3(11.2,69.66,207.11),Xc2 = vec3(87.87,71.45,200.5),Xc3 = vec3(47.43,13.97,165.39);const vec4 Xf0 = vec4(0,-0.707,0,0.707),Xf1 = vec4(0,0,0,1),Xf2 = vec4(-0.492,-0.012,0.022,0.87),Xf3 = vec4(0,-0.707,0,0.707),Xp0 = vec4(39.1,29.5,573.5,500),Xp1 = vec4(600,29.5,80.7,100);vec2 Xm(vec3 m){vec2 v=vec2(10000,0);if(mod(d.x/64.,2.)>=1.)v=n(v,n(m,0.,0.,0.,1.,19.5,12.4,247.,7.5,-40.,-1.,0.,6.));if(mod(d.x/128.,2.)>=1.)v=n(v,h(m,0.,.707,0.,.707,137.8,12.4,287.,7.5,20.,0.,2.,0.));if(mod(d.x/256.,2.)>=1.)v=n(v,h(m,.259,0.,0.,.966,0.,16.75,167.16,7.5,15.,19.,2.,0.));if(mod(d.x/512.,2.)>=1.)v=n(v,h(m,0.,0.,0.,1.,0.,9.,-12.3,15.,25.,7.5,1.));if(mod(d.y,2.)>=1.)v=n(v,n(m,-.707,-.707,0.,0.,90.3,95.,142.6,7.5,-30.,-1.57,0.,2.));if(mod(d.y/2.,2.)>=1.)v=n(v,n(m,.707,-.707,0.,0.,12.,72.4,207.,15.,-30.,-1.57,0.,2.));if(mod(d.y/4.,2.)>=1.)v=n(v,n(m,.259,0.,0.,.966,0.,31.74,193.14,7.5,-30.,1.57,0.,2.));if(mod(d.y/8.,2.)>=1.)v=n(v,h(m,0.,-1.,0.,0.,90.3,95.,187.6,7.5,22.5,0.,2.,0.));if(mod(d.y/16.,2.)>=1.)v=n(v,n(m,-.001,-.487,.873,-.019,90.187,70.137,202.487,7.5,-30.,1.57,0.,2.));if(mod(d.y/32.,2.)>=1.)v=n(v,n(m,-.707,-.707,0.,0.,19.5,12.4,207.,7.5,-30.,-1.57,0.,2.));if(mod(d.y/64.,2.)>=1.)v=n(v,n(m,-.707,-.707,0.,0.,117.8,12.4,225.5,20.,-115.,-1.57,0.,2.));if(mod(d.y/128.,2.)>=1.)v=n(v,n(m,0.,0.,.707,.707,12.,72.4,207.,15.,-30.,-1.57,0.,2.));if(mod(d.y/256.,2.)>=1.)v=n(v,n(m,0.,-1.,0.,0.,4.5,12.4,207.,7.5,40.,0.,0.,2.));if(mod(d.y/512.,2.)>=1.)v=n(v,h(m,0.,.707,0.,.707,99.5,12.4,287.,7.5,20.,-40.,2.,0.));if(mod(d.z,2.)>=1.)v=n(v,h(m,0.,0.,0.,1.,19.5,12.4,207.,7.5,20.,40.,2.,0.));if(mod(d.z/2.,2.)>=1.)v=n(v,h(m,.619,.605,.352,.357,90.232,69.665,202.828,7.5,15.,-19.,2.,0.));if(mod(d.z/4.,2.)>=1.)v=n(v,n(m,0.,0.,.707,-.707,4.5,12.4,207.,7.5,-30.,-1.57,0.,2.));if(mod(d.z/8.,2.)>=1.)v=n(v,h(m,0.,0.,0.,1.,117.8,12.4,225.5,20.,.5,27.25));if(mod(d.z/16.,2.)>=1.)v=n(v,h(m,.617,-.358,.618,.331,29.612,46.725,219.271,7.5,15.,-19.,2.,0.));if(mod(d.z/32.,2.)>=1.)v=n(v,h(m,0.,0.,0.,1.,0.,9.,37.7,7.5,52.3,0.,6.,0.));if(mod(d.z/64.,2.)>=1.){vec2 f=h(h(m,.259,0.,0.,.966,0.,6.75,149.84,7.5,10.,0.,2.,0.),h(m,0.,0.,0.,1.,0.,9.,142.3,7.5,10.,0.,2.,0.),5.);v=n(v,f);}return v;}float Xt(vec3 m,vec3 v,float f){return h(m,v,f,d.x,64.,0.,0.,0.,1.,35.25,12.4,247.,25.25,9.5,25.25),h(m,v,f,d.x,128.,0.,.707,0.,.707,137.8,12.4,287.,8.5,1.5,21.),h(m,v,f,d.x,256.,.259,0.,0.,.966,0.,16.75,167.16,8.5,8.5,16.),h(m,v,f,d.x,512.,0.,0.,0.,1.,0.,9.,-12.3,16.,1.5,26.),h(m,v,f,d.y,1.,-.707,-.707,0.,0.,90.3,105.75,142.6,20.25,9.5,20.25),h(m,v,f,d.y,2.,.707,-.707,0.,0.,12.,65.4,207.,24.,17.,24.),h(m,v,f,d.y,4.,.259,0.,0.,.966,10.75,31.74,193.14,20.25,9.5,20.25),h(m,v,f,d.y,8.,0.,-1.,0.,0.,90.3,95.,187.6,8.5,1.5,23.5),h(m,v,f,d.y,16.,-.001,-.487,.873,-.019,79.445,70.513,202.668,20.25,9.5,20.25),h(m,v,f,d.y,32.,-.707,-.707,0.,0.,19.5,23.15,207.,20.25,9.5,20.25),h(m,v,f,d.y,64.,-.707,-.707,0.,0.,117.8,59.4,225.5,69.,22.,69.),h(m,v,f,d.y,128.,0.,0.,.707,.707,12.,65.4,207.,24.,17.,24.),h(m,v,f,d.y,256.,0.,-1.,0.,0.,20.25,12.4,207.,25.25,9.5,25.25),h(m,v,f,d.y,512.,0.,.707,0.,.707,99.5,12.4,287.,8.5,8.5,21.),h(m,v,f,d.z,1.,0.,0.,0.,1.,19.5,12.4,207.,8.5,8.5,21.),h(m,v,f,d.z,2.,.619,.605,.352,.357,90.232,69.665,202.828,8.5,8.5,16.),h(m,v,f,d.z,4.,0.,0.,.707,-.707,4.5,23.15,207.,20.25,9.5,20.25),h(m,v,f,d.z,8.,0.,0.,0.,1.,117.8,12.4,225.5,20.,.5,27.25),h(m,v,f,d.z,16.,.617,-.358,.618,.331,29.612,46.725,219.271,8.5,8.5,16.),h(m,v,f,d.z,32.,0.,0.,0.,1.,0.,9.,37.7,8.5,1.5,53.3),h(m,v,f,d.z,64.,0.,0.,0.,1.,0.,9.,142.3,7.5,11.5,15.75),f<10000.?f:-1.;}\n#endif\nmat3 h(mat3 v){return mat3(v[0][0],v[1][0],v[2][0],v[0][1],v[1][1],v[2][1],v[0][2],v[1][2],v[2][2]);}float s(vec3 v,vec3 m,vec3 f){vec3 d=v-m,y=f-m;float x=clamp(dot(d,y)/dot(y,y),0.,1.);return length(d-y*x)-.08;}float s(vec3 m,vec3 v){float d=length(m/v);return d*(d-1.)/length(m/(v*v));}vec2 D(float v,vec3 m,float d){vec2 u=t(d)*m.yz,f=abs(vec2(length(m.yz),m.x))-vec2(.3,.1);float y=abs(atan(u.x/u.y)),X=length(m.yz)<.3?15.:y<.392699||y>1.1781?15.5:16.;return vec2(min(max(f.x,f.y),0.)+length(max(f,0.))-.1,X-v);}vec2 D(float v,vec3 d){d.z*=-1.;vec2 m=vec2(d.z<1.2?s(d-vec3(0,0,-.05),vec3(.3,.25,1.5)):1000.,16.5);m=n(m,vec2(s(d-vec3(0,0,.4),vec3(.3,.4,.6)),17.));vec3 f=d-vec3(0,0,-.25);vec2 x=vec2(abs(f.x),f.z);float u=dot(x,vec2(.2,.9798));vec2 y=vec2(u<0.?length(x)-.35:u>.9798?length(x-vec2(0,1))-.55:dot(x,vec2(.9798,-.2))-.35,abs(f.y)-.15);m=n(m,vec2(min(max(y.x,y.y),0.)+length(max(y,0.)),17.5));m=n(m,vec2(t(d-vec3(0,0,1),vec3(.45,.15,.25)),17.5));m.y-=v;return m;}vec2 D(vec3 l){vec2 t=Xm(l);if(x6)return t=n(t,vec2(l.y,1)),t;if(mod(d.x/4.,2.)>=1.)t=n(t,s(l,Xc0,Xf0,v[1].x));if(mod(d.x/8.,2.)>=1.)t=n(t,s(l,Xc1,Xf1,v[1].y));if(mod(d.x/16.,2.)>=1.)t=n(t,s(l,Xc2,Xf2,v[1].z));if(mod(d.x/32.,2.)>=1.)t=n(t,s(l,Xc3,Xf3,v[2].x));if(!x8&&mod(d.x,2.)>=1.)t=n(t,D(0.,f*(l-m))),t=n(t,D(0.,f*(l-v[3]),v[6].x)),t=n(t,D(0.,f*(l-v[7]),v[10].x)),t=n(t,D(0.,y*(l-v[11]),v[14].x)),t=n(t,D(0.,y*(l-v[15]),v[18].x)),t=n(t,vec2(s(l,v[11],v[15]),18.)),t=n(t,vec2(s(l,v[3],v[7]),18.));if(x7&&mod(d.x/2.,2.)>=1.)t=n(t,D(5.,z*(l-x))),t=n(t,D(5.,z*(l-u.xyz),i.w)),t=n(t,D(5.,z*(l-i.xyz),i.w)),t=n(t,D(5.,X*(l-r.xyz),r.w)),t=n(t,D(5.,X*(l-e.xyz),e.w)),t=n(t,vec2(s(l,r.xyz,e.xyz),13.)),t=n(t,vec2(s(l,u.xyz,i.xyz),13.));return t;}vec3 s(vec3 m){vec2 d=vec2(.001,0);return normalize(vec3(D(m+d.xyy).x-D(m-d.xyy).x,D(m+d.yxy).x-D(m-d.yxy).x,D(m+d.yyx).x-D(m-d.yyx).x));}void D(vec3 m,vec3 v,vec3 f,vec3 d,float x,int y,inout float z,out vec3 i,out vec3 X,out vec3 e,out vec3 u,out mat3 r,out mat3 T){u=.25*(m+v+f+d);i=normalize(normalize(cross(m-d,f-d))-normalize(cross(m-v,f-v)));vec3 w=normalize(f-v)+normalize(d-m);if(y==1&&(length(u-Xp0.xyz)>Xp0.w&&length(u-Xp1.xyz)>Xp1.w||D(u-z*i*.6).x<0.))y=2;if(y==2)z=i.y>0.?-1.:1.;i*=z;vec3 l=normalize(cross(i,w));X=cross(l,i);mat3 c=mat3(l,i,X);r=h(c);e=vec3(0,0,1);e.xz*=t(x);e=c*e;T=h(mat3(cross(i,e),i,e));}\n#ifdef XA\nvoid p(inout vec3 v,inout vec3 m,float d){vec3 f=v-m,X=.5*(d-length(f))*normalize(f);v+=X;m-=X;}void main(){d=vec4(1023.);for(int m=0;m<19;++m)v[m]=texture2D(x0,vec2((float(m)+.5)/19.)).xyz;if(!x8){vec3 m,f,x;{mat3 y,X;vec3 z;D(v[3],v[7],v[11],v[15],v[0].x,1,v[0].z,z,f,x,m,y,X);}vec3 X=(v[4]+v[8]+v[12]+v[16])/4.,y=m-X;v[0].y=length(y);float i=sign(dot(y,f)),u=0.,z=mix(.02,.01,.5*min(v[0].y,2.)),t=mix(.15,.03,.5*min(v[0].y,2.));if(x9>0)v[0].x=0.;else if(x10.z>0.)v[0].x+=min(z,t-v[0].x);else if(x10.w>0.)v[0].x-=min(z,t+v[0].x);else v[0].x=0.;if(length(m-Xc0)<5.&&v[1].x<2.){float e=sign(dot(m-Xc0,h(n(Xf0))*vec3(0,0,1)));v[1].x=e!=v[1].x?2.:e;}if(length(m-Xc1)<5.&&v[1].y<2.){float e=sign(dot(m-Xc1,h(n(Xf1))*vec3(0,0,1)));v[1].y=e!=v[1].y?2.:e;}if(length(m-Xc2)<5.&&v[1].z<2.){float e=sign(dot(m-Xc2,h(n(Xf2))*vec3(0,0,1)));v[1].z=e!=v[1].z?2.:e;}if(length(m-Xc3)<5.&&v[2].x<2.){float e=sign(dot(m-Xc3,h(n(Xf3))*vec3(0,0,1)));v[2].x=e!=v[2].x?2.:e;}for(int l=0;l<4;++l){vec3 e=v[3+l*4]-v[4+l*4]+(v[5+l*4]-vec3(0,20,0))/900.;v[4+l*4]=v[3+l*4];v[3+l*4]+=e;v[5+l*4]=vec3(0);vec2 r=D(v[3+l*4]);vec3 c=s(v[4+l*4]);if(r.x<.4){if(r.y<2.)v[2].y=1.;v[3+l*4]+=(.4-r.x)*c;float T=.1;if(x9==0&&x10.y<0.)T=l<2?.8:.6;vec3 a=v[3+l*4]-v[4+l*4],w=normalize(cross(c,l<2?f:x)),o=cross(c,w);v[4+l*4]=v[3+l*4]+.2*dot(a,c)*c-.995*dot(a,o)*o-T*dot(a,w)*w;if(l>1&&x9==0&&(x10.x>0.||x10.y>0.)){u++;v[5+l*4]=((r.y<6.||r.y>=8.?20.:r.y<7.?40.:0.)+max(0.,10.-20.*v[0].y))*normalize(cross(cross(c,x),c))*(x10.x>0.?1.:i>0.?-1.5:-.5);}v[6+l*4].y=v[0].y*.4*i;v[6+l*4].z=min(v[6+l*4].z+1.,3.);}else v[6+l*4].z=max(v[6+l*4].z-1.,0.);if(x9!=0||!(x10.y<0.&&l<2))v[6+l*4].x+=v[6+l*4].y;}if(u<2.)for(int l=0;l<4;++l)v[5+l*4]=vec3(0);p(v[3],v[7],1.6);p(v[3],v[11],sqrt(6.56));p(v[3],v[15],2.);p(v[7],v[11],2.);p(v[7],v[15],sqrt(6.56));p(v[11],v[15],1.6);}for(int m=0;m<19;++m){if(gl_FragCoord.x<float(m+1)){gl_FragColor=vec4(v[m],0);return;}}}\n#else\nfloat p(vec3 f,vec3 y){float z=10000.;vec3 X=min(v[3],min(v[7],min(v[11],v[15])))-.8,t=max(v[3],max(v[7],max(v[11],v[15])))+.8,l=.5*(t-X);h(f,y,z,d.x,1.,0.,0.,0.,1.,m.x,m.y,m.z-.5*l.z,l.x,l.y,l.z);if(x7&&(x8||length(x-m)>.1))X=min(u.xyz,min(i.xyz,min(r.xyz,e.xyz)))-.8,t=max(u.xyz,max(i.xyz,max(r.xyz,e.xyz)))+.8,l=.5*(t-X),h(f,y,z,d.x,2.,0.,0.,0.,1.,x.x,x.y,x.z-.5*l.z,l.x,l.y,l.z);h(f,y,z,d.x,4.,Xf0.x,Xf0.y,Xf0.z,Xf0.w,Xc0.x,Xc0.y,Xc0.z,5.,5.,.5);h(f,y,z,d.x,8.,Xf1.x,Xf1.y,Xf1.z,Xf1.w,Xc1.x,Xc1.y,Xc1.z,5.,5.,.5);h(f,y,z,d.x,16.,Xf2.x,Xf2.y,Xf2.z,Xf2.w,Xc2.x,Xc2.y,Xc2.z,5.,5.,.5);h(f,y,z,d.x,32.,Xf3.x,Xf3.y,Xf3.z,Xf3.w,Xc3.x,Xc3.y,Xc3.z,5.,5.,.5);return z;}void main(){for(int l=0;l<19;++l)v[l]=mix(texture2D(x1,vec2((float(l)+.5)/19.)),texture2D(x0,vec2((float(l)+.5)/19.)),x5).xyz;float t=v[0].z>0.?1.:-1.;vec3 l,c,w;D(v[3],v[7],v[11],v[15],v[0].x,0,t,l,c,w,m,f,y);vec3 a,o,h=vec3(0,1,0);if(x9==2)a=vec3(10,10,80),o=m+vec3(0,1,0);else if(length(m-Xp0.xyz)<Xp0.w||length(m-Xp1.xyz)<Xp1.w)h=-l,a=m-l*.6-c*.4,o=a+c;else a=m+vec3(0,2,0)-7.*normalize(vec3(c.x,0,c.z)),o=m+vec3(0,1,0);if(x7){u=mix(texture2D(x3,vec2(.125,.5)),texture2D(x2,vec2(.125,.5)),x5);i=mix(texture2D(x3,vec2(.375,.5)),texture2D(x2,vec2(.375,.5)),x5);r=mix(texture2D(x3,vec2(.625,.5)),texture2D(x2,vec2(.625,.5)),x5);e=mix(texture2D(x3,vec2(.875,.5)),texture2D(x2,vec2(.875,.5)),x5);vec3 T,n,k;float b;D(u.xyz,i.xyz,r.xyz,e.xyz,0.,2,b,T,n,k,x,z,X);if(x8)a=x+vec3(0,2,0)-7.*normalize(vec3(n.x,0,n.z)),o=x+vec3(0,1,0);}d=vec4(0);vec2 T=(gl_FragCoord.xy-.5*vec2(512.,384.))/384.;vec3 n=a,k=normalize(o-a),b=normalize(cross(h,k)),g=a+k+T.x*b+T.y*cross(k,b),M=normalize(g-a),G=vec3(0);float S=-n.y/M.y,F=0.,C=Xt(a,M,p(a,M));if(C<200.){if(M.y<0.&&S<C)a=n+S*M,G=vec3(0,1,0),F=1.;else if(C>=0.){a+=M*C;vec2 q;float A=C;for(int Z=0;Z<100;++Z){q=D(a);if(q.x<.01||A>=200.||a.y<0.)break;A+=q.x;a+=M*q.x;}if(a.y<0.||q.x>=.01&&M.y<0.)a=n+S*M,G=vec3(0,1,0),F=1.;else if(q.x<.01)d=vec4(1023.),G=s(a),F=q.y;}else if(M.y<0.)a=n+S*M,G=vec3(0,1,0),F=1.;}else if(M.y<0.)a=n+S*M,G=vec3(0,1,0),F=1.;if(F==1.){vec3 q=floor(a/4.+.01);F+=.5*mod(q.x+q.y+q.z,2.);float A=exp(-.01*length(a-n));F+=.4*A;}if(F==0.){float q=dot(M,normalize(vec3(-.5,.3,1)));if(q>.97)F=M.y;else F=.5+.5*M.y;}if(F>1.){d=vec4(0);M=normalize(vec3(-.5,.3,1));float q,A=.1,Z=Xt(a,M,p(a,M));if(Z>=0.){for(int Y=0;Y<50;++Y){if(A>=30.)break;q=D(a+M*A).x;if(q<.01){F*=-1.;break;}A+=max(.1,q);}}}gl_FragColor=vec4(G,F);}\n#endif\n')),g.oe(f)),2==m&&(g.tS(t,v),g.tS(t,f),g.io(t)),3==m&&(g.ia(36160,te[0][0]),g.ir(0,0,1,1),g.sg(t),Ee(t),d%2?ge[d/2|0].push(t):ge[d/2|0]=[t],m=-1,1==d&&Oe(),++d>19))return C0.style.cursor='pointer',void(Xe=1);m++,Xe=(d+m/4)/20,setTimeout(o,30)};o()}(()=>{let e=localStorage['404kph'];de=e?JSON.parse(e):[[0],[0],[0],[0],[0],[0],[0],[0]]})();">html,body,canvas{background:#000;margin:0}#C1{display:none}canvas{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)