<!doctype html><html><head><title>The Soldier - js13kGames 2025</title><style>body{color:#eee;user-select:none;background:#111;flex-direction:column;justify-content:center;align-items:center;height:100vh;margin:0;padding:0;font-family:sans-serif;font-size:1vw;display:flex;overflow:hidden;& *{box-sizing:border-box;margin:0;padding:0}}body>header{z-index:3;background:#333;border-radius:0 0 2em 2em;padding:2.5em 3em 1em;font-size:.8rem;transition:all 1s;position:absolute;top:0;left:50vw;transform:translate(-50%);box-shadow:0 .5em 1em #000;&.hide{top:-10em}& h2{text-align:center;background:#611;border-radius:.5em;padding:.2em 2em;position:absolute;top:-1.2em;left:50%;transform:translate(-50%)}& ol{xgap:3em;display:flex;&>li{background:#111;border-radius:1em;padding:0 3em 1em;position:relative}}& ul{gap:3em;margin-top:1em;display:flex}& li{white-space:nowrap;list-style:none;&.me{margin-left:2em;transition:all 1s;&.hide{margin-left:200em;font-size:0}}}}#canvas-box{cursor:cell;z-index:2;background:#444;width:100vw;height:40vw;position:relative;overflow:hidden;.sOut &>*{transition:all 1s 1s;transform:translateY(-100vh);& *,& :before{transition:all 2s;transform:translateY(-50vh)}}.sIn &>*{transition:all 2s;& *,& :before{transition:all 1s 1s}}}:where(#canvas){position:absolute;& *{margin:0;padding:0;display:block;position:absolute;bottom:0;left:0}&>:not(o){filter:drop-shadow(0 0 .3em #000c)}}#canvas>o{z-index:8000;background:#111;border-radius:50%;width:.4em;height:.4em;margin:0 0 -.2em -.2em;bottom:9999em}#canvas-box:has(#player.s){cursor:none;& #target{opacity:.8;z-index:9000;pointer-events:none;background:#000;width:.2em;height:4em;margin:0 0 -2em -.1em;position:absolute;bottom:0;left:0;.news &{display:none}&:before{content:"";background:#000;width:4em;height:.2em;position:absolute;bottom:1.9em;left:-1.9em}&:after{content:"";background:#ffffff4d;border:.4em solid #000;border-radius:2em;width:2em;height:2em;position:absolute;bottom:.6em;left:-1.3em}}}.speak{color:#111;white-space:pre;z-index:8000;background:#fff;min-width:5em;padding:.5em 1em;transition:all .1s;display:block;.news &{display:none}&>p{font-size:var(--s);display:block;position:static}&>i{width:0;height:0;left:var(--x);border:.6em solid #0000;border-top:2em solid #fff;transition:all .4s;position:absolute;bottom:-2.3em;&.offR{bottom:0;left:100%}&.offL{bottom:.5em;left:-1.5em}}}.news{color:#433;z-index:10;background:#c8c0b0;width:32vw;max-height:90vh;padding:2em;font-family:serif;transition:all 1s;position:absolute;top:5vh;left:10vw;overflow:hidden;transform:rotate(-15deg);box-shadow:.5em .5em 2em #000c;&.n2{left:43vw;transform:rotate(-7deg)}&.new{top:-99vh}&:after{content:"";background:linear-gradient(#ccc0,#c8c0b0);height:3em;display:block;position:absolute;bottom:0;left:0;right:0}& h2{margin:0;font-size:2.2em}&>header{height:15em;margin:1em 0;&>header{filter:sepia(.5);background-color:#888;width:calc(60vw - 4em);height:30em;position:relative;overflow:hidden;transform:scale(.5)translate(-28em,-15em)}}& p{white-space:pre-wrap;text-align:justify;font-size:1.2em}}.person{--tu1:#ddd;--tu2:#555;--skin:hsl(from #dcaa96 h s calc(l*(var(--rnd0) + .2)));--cloth:hsl(calc(var(--rnd1)*210deg + 175deg)70% calc((var(--rnd2) + .5)/2*100%));background:#9007;border-radius:1em;width:3em;height:5em;&.s.we{--cloth:#050}&.rnd1-1{--cloth:hsl(60 90 calc((var(--rnd2) + .8)/2*100%))}&.they{--cloth:hsl(calc(var(--rnd1)*80deg)70% calc((var(--rnd2) + .5)/2*100%))}&.c{transform:scale(.5)}& h{background:var(--skin);width:3em;height:3em;top:0;&:before{content:"";width:.6em;height:.6em;animation:calc(4s + 2s*var(--rnd3))calc(4s*var(--rnd3))linear infinite blink;background:#111;border-radius:.3em;position:absolute;top:1.2em;left:2.2em}.news &:before{animation:none}.c &:before{height:.9em;bottom:1em}:is(.rnd0-1,.rnd0-2,.rnd0-3) &:before{background:hsl(30 90 calc(5% + var(--rnd0)/4*100%))}.rnd0-4 &:before{background:hsl(calc(120deg + var(--rnd3)*90deg)90 40)}}& w{background:rgb(calc(16 + pow(var(--rnd0),2)*(var(--rnd4) + var(--rnd5))*150),calc(16 + pow(var(--rnd0),2)*min(var(--rnd4),var(--rnd5))*260),calc(16 + pow(var(--rnd0),2)*min(var(--rnd4),var(--rnd5))*150));width:1.5em;height:2em;top:0;.fem &{width:2em;height:4em}}&.rnd2-5:not(.c) w{background:hsl(0 0 calc(5% + pow(var(--rnd7),2)*90%))}& w:before{content:"";background:inherit;width:3em;height:1em;position:absolute;top:0}&.they:not(.fem) w:before{background:linear-gradient(calc((var(--rnd6) - .5)*16deg),var(--tu1)40%,var(--tu2)50%,var(--tu1)55%);border-bottom:2px solid #333}&.they.fem:not(.c) w:after{content:"";opacity:.55;background-color:#0000;background-image:linear-gradient(45deg,#0000,#000,#0000,#000,#0000),linear-gradient(-45deg,#0000,#000,#0000,#000,#0000);background-position:0 0,0 0;background-repeat:repeat,repeat;background-size:15% 15%;background-attachment:scroll,scroll;background-origin:padding-box,padding-box;background-clip:border-box,border-box;width:3em;height:3.5em;position:absolute;top:0}& b{background:var(--cloth);width:3em;height:2em;bottom:0;.fem:not(.c)>&:before{content:"";background:inherit;border-radius:.4em;width:.8em;height:.8em;position:absolute;top:.1em;right:-.4em}}&>a{background:var(--skin);width:.8em;height:1.6em;bottom:.2em;left:1.2em}&>f{background:hsl(from var(--cloth)h calc(s/2)calc(l*(var(--rnd6)/2 + .3)));width:1.2em;height:.5em;top:5em;left:.3em;&:before{content:"";background:inherit;width:1.2em;height:.5em;position:absolute;left:1.2em}}&:not(.die).walk{&>a{animation:.8s linear infinite arm-walk}&>f{animation:.4s linear infinite leg-walk}& f:before{animation:.4s linear .2s infinite leg-walk}.news &{&>a{animation:9999s linear infinite arm-walk}&>f,&>f:before{animation:none}}}& bl{opacity:0;background:#a00;border-radius:1.2em;width:2.4em;height:2.4em;margin-bottom:-1.2em;left:.3em;transform:scale(.3)}&.die{& h:before{height:.2em;animation:none}& bl{opacity:1;transition:transform 15s;transform:scale(1)}}}.person.we.s{& h,& w{border-radius:1em 1em 0 0}& w:before{background:#050;border-radius:.9em .9em 0 0;width:3.4em;height:1.3em;top:-.2em;left:-.2em}& b{background-image:radial-gradient(at .3em .4em,#040 .5em,transparent .5em),radial-gradient(at 2.5em .5em,#040 .3em,transparent .3em),radial-gradient(at .5em calc(1em + var(--rnd1)*.5em),#040 .5em,transparent .5em),radial-gradient(at 2.2em calc(1em + var(--rnd2)*.5em),#040 .5em,transparent .5em);background-size:5em 2em}&>f{background:#030}}.person.they.s:not(.fem){--tu1:#333;--tu2:#222;& w:before{width:3.4em;height:1.3em;top:-.2em;left:-.2em}& h{width:3em;height:2em}& b{background:#333 linear-gradient(#333,#222 33%,#333 33%);width:3em;height:3em}&>f{background:#222}}.person.s{&>a{display:none}& g{width:10em;height:3em;bottom:1em;left:-3.5em;& *{bottom:auto;left:auto}& f{background:#f40;border-radius:1em;width:1.4em;height:1.4em;top:.75em;right:0}& g1{background:#111;width:4em;height:.5em;top:1.2em;right:1em}& g2{background:#111;width:3em;height:1em;top:1.1em;right:2em}& g3{background:#111;width:1em;height:1.2em;top:2em;right:3em}& a{background:var(--skin);width:1.8em;height:.8em;top:2em;right:3.5em}}}@keyframes blink{0%{transform:scale(1)}94%{transform:scale(1)}96%{transform:scaleY(.3)}to{transform:scale(1)}}@keyframes arm-walk{0%{transform:translate(.5em)rotate(-20deg)}50%{transform:translate(-.5em)rotate(20deg)}to{transform:translate(.5em)rotate(-20deg)}}@keyframes leg-walk{0%{height:.5em}50%{height:0}to{height:.5em}}wall{height:12em;opacity:var(--o);background:#ddd;border-top:1em solid #333;transition:all 1s;&.v{background:#333;border-bottom:11em solid #555}&.bric{--d:1;--g:conic-gradient(at 90% calc(40% - var(--d)*1%),#0000 75%,#643 0,#ca7);background:var(--g)0 .1em,var(--g)calc(1em/var(--d))1.1em #433;background-size:calc(2em/var(--d))2em;&.d{--d:3}}&.tree{background-color:#0000;background-image:radial-gradient(1em at 0 0,#270 99%,#0000 101%),radial-gradient(1em at 0 100%,#270 99%,#0000 101%),radial-gradient(1em at 100% 0,#270 99%,#0000 101%),radial-gradient(1em at 100% 100%,#270 99%,#0000 101%),linear-gradient(90deg,#0000 33%,#321 33%,#531 66%,#0000 66%);background-position:2.2em 1em,.2em 1em,1.2em 1em,-.3em 1em,0 0;background-repeat:repeat,repeat,repeat,repeat,repeat;background-size:3.5em 2.5em;background-attachment:scroll,scroll,scroll,scroll,scroll;background-origin:padding-box,padding-box,padding-box,padding-box,padding-box;background-clip:border-box,border-box,border-box,border-box,border-box;border:none}}box{background:#bbb;& div{background:#666;width:100%}}rv{background:linear-gradient(90deg,#222 46%,#ddd 47% 53%,#222 54%);width:10em}gr{background-color:#140;background-image:radial-gradient(at 0 2em,#140 .2em,#360 .5em,#0000 .5em),radial-gradient(at 1em 2em,#140 .2em,#360 .5em,#0000 .5em),radial-gradient(at .5em 1em,#140 .2em,#360 .5em,#0000 .5em),none;background-position:0 0,0 0,0 0,0 0;background-repeat:repeat,repeat,repeat,repeat;background-size:1em 2em;background-attachment:scroll,scroll,scroll,scroll;background-origin:padding-box,padding-box,padding-box,padding-box;background-clip:border-box,border-box,border-box,border-box}.prologue{&>rv{height:60em;bottom:-20em;left:-60em;transform:skew(-45deg)}&>gr{width:200em;height:120em;bottom:-40em;left:-70em}}.want{&>rv{width:15em;height:150em;bottom:-50em;left:-70em}&>gr{width:400em;height:150em;bottom:-50em;left:-150em}&>fl{background:#999;width:150em;height:35em;bottom:-20em;left:-50em}}.first{&>gr{width:1200em;height:600em;bottom:-300em;left:-300em}}</style></head><body class=sOut><header class=hide><ol><li><h2>Total Deaths</h2><ul><li><h3>From We</h3><p>...</p></li><li><h3>From They</h3><p>...</p></li></ul></li><li class="hide me"><h2>By myself</h2><ul><li><h3>From We</h3><p>...</p></li><li><h3>From They</h3><p>...</p></li></ul></li></ol></header><script>const e=globalThis;function t(t,n,a){if(!e.document)return;const o=Object.assign(document.createElement(t),n);return o.textContent=n.txt,a&&a.appendChild(o),o}const n=e=>e+String(Math.random()).split(".")[1],a=e=>Math.round(2e3-10*e);let o=!1;const s=6.283,r=e.document?.body,c={},l=()=>Object.values(c),i=(e,t)=>{delete c[e.id],t&&e.remove()},m={},d=()=>Object.values(m),y=e=>{e.remove(),delete m[e.id]},u=[{m:0,f:0,c:0,s:0},{m:0,f:0,c:0,s:0},{m:0,f:0,c:0,s:0},{m:0,f:0,c:0,s:0}],x=document.querySelectorAll("header li p");function f(t,n){const a=n.s?"s":n.c?"c":n.fem?"f":"m";u[n.we?0:1][a]++,document.querySelector("header").className="",t.p==e.p&&(u[n.we?2:3][a]++,document.querySelector("header li.me").className="me");for(let e=0;e<4;e++)x[e].textContent=`soldiers:${u[e].s} man:${u[e].m} woman:${u[e].f} children:${u[e].c}`}const h=e=>Object.values(u[e]).reduce((e,t)=>e+t),v=(e,t)=>Math.abs(e-t);Array.prototype.rnd=function(){return this[~~(Math.random()*this.length)]},e.camX=0,e.camY=0;let w=99,g=0,p=0,b=0;const M=t("div",{id:"canvas-box"},r),$=t("div",{id:"canvas"},M);e.camTo={x:0,y:0};const k=t("div",{id:"target"},$);function A(){w=p/em-50+e.camX,g=-(b-q-B)/em-18+e.camY,k.style.left=w+"em",k.style.bottom=g+"em"}function T(){return{x:w,y:g}}function N(e){const n=t("o",{},$);n.t=Date.now(),n.id=e.id+n.t,n.p=e,n.vx=Math.cos(e.gun.a),n.vy=-Math.sin(e.gun.a),n.x=e.x+e.w/2+3*n.vx,n.y=e.y+e.h/2+3*n.vy,m[n.id]=n}function I(t,n){r.className="sOut",setTimeout(()=>{$.className="",l().filter(t=>t!=e.p).forEach(i);for(let t of[...$.childNodes])t!=e.p&&t!=k&&t.remove();t(),setTimeout(L,500,n)},2e3)}function L(e=v){r.className="sIn",setTimeout(()=>{r.className="",e()},2e3)}function O(n,a,o={}){const s=t("b",{className:"speak",style:`--s:${o.s||1.5}rem`},$),r=(t("p",{txt:a},s),t("i",{style:`--x:${n.w/2+1.5}em`},s)),c=()=>(n.x-2)*e.em;return s.style.bottom="999em",setInterval(()=>{const t=(100+e.camX)*e.em-s.clientWidth-51*e.em,a=-t+c();if(s.style.left=c()+"px",s.style.bottom=n.y+n.h+1+"em",r.style.transform="",r.className="",a>0){const e=s.clientWidth;s.style.left=t+"px";const o=a+(n.w+1)*em>e;r.style.transform=o?"rotate(-90deg)":`translateX(${a}px)`,o&&(r.className="offR")}else{const t=(e.camX-50+1)*e.em,a=t-c();if(a>0){s.style.left=t+"px";const o=a>n.w*e.em;r.style.transform=o?"rotate(90deg)":`translateX(${-a}px)`,o&&(r.className="offL")}}},60),Object.assign(s,{rm(){}})}function C(e,n,a,o={}){const s=t("div",{className:"news new "+o.c},r);s.show=()=>(setTimeout(()=>s.classList.remove("new"),50),s),t("h2",{txt:n},s);const c=t("header",{},t("header",{},s)),l=$.cloneNode(!0);l.style.left=1.4*-e.x+26+"em",l.style.bottom=1.4*-e.y+13+"em",c.appendChild(l),a=a.trim().split("\n").map(e=>e.trim()).join("\n");for(let e=0;e<2;e++){a+="\n\nBla";for(let t=0;t<30+10*e;t++)Math.random()<.7&&(a+=Math.random()<.2?[". Bla","! Bla",", "].rnd():" "),a+="bla";a+="."}return t("p",{txt:a},s),s}function E(o,s,r,l={}){const i=s-o;l.id??=n("w");const m=t("wall",{update(){m.style.setProperty("--o",e.p.y>r?.4:1)},className:"h "+l.c,style:`left:${o}em;bottom:${r}em;width:${i}em;z-index:${a(r)}`,...l,x1:o,x2:s,y:r,wall:1,h:1},$);c[m.id]=m}function D(e,o,s,r={}){r.d??=s-o,r.w??=1,r.id??=n("w");const l=t("wall",{update(){},className:"v "+r.c,style:`left:${e}em;bottom:${o}em;width:${r.w}em;height:${r.d+12}em;z-index:${a(o)}`,...r,x:e,y1:o,y2:s,wall:1,v:1},$);c[l.id]=l}function X(e,o,s,r,l={}){const i=e<s?-1:1,m=v(e,s);l.id??=n("w");const d=t("wall",{update(){},className:"d "+l.c,style:`left:${-1==i?e:s}em;bottom:${(o+r)/2}em;width:${m}em;z-index:${a(r)};transform:skewY(${i*Math.atan((r-o)/m)}rad)`,...l,x1:e,y1:o,x2:s,y2:r,skew:i,wall:1,dg:1},$);c[d.id]=d}function Y(e,a,o,s,r,l={}){l.id??=n("b");const i=t("box",{style:`left:${e}em;bottom:${a}em;width:${o}em;height:${s+r}em`,update(){},...l},$);return t("div",{style:`height:${r}em`},i),c[i.id]=i}function j(s,r,l={}){l.rnd??=[],l.rndC??=[],l.id??=n("p");const m=t("p",{id:l.id,className:`person ${l.s&&"s"} ${l.we?"we":"they"} ${l.fem&&"fem"} ${l.c&&"c"} `+Array(9).fill(0).map((e,t)=>`rnd${t}-`+(l.rndC[t]??Math.floor(6*Math.random()))).join(" "),style:Array(9).fill(0).map((e,t)=>`--rnd${t}:`+(l.rnd[t]??Math.random())).join(";")},$);t("b",0,m);const d=t("h",0,m);t("w",0,d),t("a",0,m),t("f",0,m);const y=t("bl",{},m),u=t("g",{},m);u.a=.5,u.l=0,u.f=t("f",{},u),t("g1",{},u),t("g2",{},u),t("g3",{},u),t("a",{},u);const x=Object.assign(m,{p:1,w:l.c?2:3,h:l.c?2.5:5,d:1,x:s,y:r,vx:0,vy:0,v:0,a:0,turn:1,gun:u,update(){let t;if(x.x+=x.vx,x.y+=x.vy,x!=e.p&&(x.turn=Math.abs(x.a)>1.6?-1:1),!x.bless&&(t=P(x))){if(y.style.bottom=(t.y-x.y+x.h/2)/2+"em",x==U)return e.pDeadCb();i(x),f(t,x),x.die=1,x.gun.t=0,x.gun.a=x.turn>0?x.gun.a>0?1.8:-1.8:x.gun.a>0?1.3:-1.3,x.classList.add("die"),m.style.transition="cubic-bezier(0, 0, 1, .6) 1s"}const n=H(x);x.x+=n.x,x.y+=n.y,x.die||o&&x==e.p||(x.act?x.act(x):W(x)),x.s&&function(e){const t=-1==e.turn?-1*e.gun.a+Math.PI:e.gun.a;e.gun.style.transform=`scale(${e.c?.9:1},${e.c?1.2:1}) rotate(${t}rad)`;const n=e.we?200:300;e.gun.t&&e.gun.l<Date.now()-n?(e.gun.l=Date.now(),e.gun.f.style.opacity=1,N(e)):e.gun.f.style.opacity=0}(x),x.vx||x.vy?x.classList.add("walk"):x.classList.remove("walk"),m.style.left=x.x+"em",m.style.bottom=x.y+"em",m.style.transform=(l.c?`translate(-.6em,1.2em)scale(${x.die?".5,.66":".66,.5"})`:"")+(x.die?`translate(${-x.turn*x.h/3}em,${x.h/4}em)rotate(${-90*x.turn}deg)`:"")+`scaleX(${x.turn})`,m.style.zIndex=a(x.y)},get isOld(){return 5==l.rndC[2]&&l.rnd[7]>.6}},l);return c[x.id]=x,x}function W(e){if(e.dest){if(v(e.dest.x,e.x)<.3&&v(e.dest.y,e.y)<.3)return e.vx=e.vy=0;e.a=Math.atan2(e.y-e.dest.y,e.dest.x-e.x)}e.panic&&(e.v=.4,e.a+=2*Math.random()-1),e.vx=Math.cos(e.a)*e.v,e.vy=-Math.sin(e.a)*e.v,e.s&&function(e){if(c[e.targ?.id]||(e.targ=null),e.targ||(e.targ=l().filter(t=>t.p&&!t.bless&&t.we!=e.we&&function(e,t){return Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2)}(e,t)<100).rnd()),e.targ){const t=e.y+e.h/2;let n=Math.atan2(t-e.targ.y,e.targ.x-e.x);v(n+s,e.gun.a)<v(n,e.gun.a)&&(n+=s),v(n-s,e.gun.a)<v(n,e.gun.a)&&(n-=s),e.gun.a=(8*e.gun.a+n)/9,(e.gun.a-n)**2<.1&&(e.gun.t=1)}else e.gun.t=0,e.gun.a=1==e.turn?(8*e.gun.a+1)/9:(8*e.gun.a-4)/9;e.turn=e.gun.a>1.57||e.gun.a<-1.57?-1:1}(e)}function H(e){const t={x:0,y:0};for(const n of l())if(n!==e){const a=z(e,n);a&&(n.p&&(a.x/=2,a.y/=2),t.x+=a.x,t.y+=a.y)}return t}function z(e,t){let n=null;if(t.wall){if(t.dg){const a=e.x+e.w;if(1==t.skew&&(e.x>t.x1||a<t.x2)||-1==t.skew&&(e.x<t.x1||e.x>t.x2)||e.y<t.y1||e.y>t.y2)return n;const o=v(t.x1,t.x2),s=t.y2-t.y1,r=o*(e.y-t.y1)/s,c=-1==t.skew?t.x1+r:t.x1-r-e.w;(1==t.skew&&c<e.x||-1==t.skew&&c>e.x)&&(n={x:c-e.x,y:0})}if(t.v){if(e.y+e.d<t.y1||e.y>t.y2+.5)return n;const a=e.x+e.w,o=t.x+t.w;e.x<o&&e.x>t.x&&(n={y:0,x:o-e.x}),a>t.x&&a<o&&(n={y:0,x:t.x-a})}if(t.h){if(e.x+e.w<t.x1||e.x>t.x2)return n;const a=e.y+.2,o=e.y-.8,s=t.y+1;o<s&&o>t.y&&(n={x:0,y:s-o}),a>t.y&&a<s&&(n={x:0,y:t.y-a})}return n}const a=e.x,o=e.x+e.w,s=e.y,r=e.y+e.d,c=t.x,l=t.x+t.w,i=t.y,m=t.y+t.d,d=a>=c&&a<l,y=o<=l&&o>c,u=a<=c&&o>=l,x=c<=a&&l>=o,f=s>=i&&s<m;if(d||y||u||x){if(s<=i&&r>=m||i<=s&&m>=r)return d?{x:l-a,y:0}:{x:c-o,y:0};if(f||r<=m&&r>i)return n={x:0},n.y=f?m-s:i-r,u||x||(n.x=y?c-o:l-a),n}}function P(e){for(const t of d())if(t.x>e.x&&t.x<e.x+e.w&&t.y>e.y&&t.y<e.y+e.h)return y(t),t}let S,F,q,B;r?.addEventListener("pointermove",e=>{p=e.pageX,b=e.pageY,A()});const G=t("code",{style:"position:absolute; bottom:.5em"},r);function R(){S=r.clientWidth,F=r.clientHeight,B=.4*S,q=(F-B)/2,e.em=S/100}e.addEventListener("resize",R),R();const U=e.p=j(0,0,{id:"player",we:1,s:0,rnd:[.8,.85,.35,0,0,0],rndC:Array(9).fill(0)});let V=0,J=0,K=0,Q=0,Z=0,_=Date.now();function ee(e,t){"arrowleft"!=(e=e.toLowerCase())&&"a"!=e||(V=t),"arrowright"!=e&&"d"!=e||(J=t),"arrowup"!=e&&"w"!=e||(K=t),"arrowdown"!=e&&"s"!=e||(Q=t)}function te(){let n,a,s=0,c=0;const l=()=>c||i();function i(){if(s++,console.log("Want to fight:",s),1==s&&(a.remove(),a=O(n,"Good.\nMove to the next room.\n\nUse W S A D or arrow keys.\n\nThere you will receive your\nuniform and weapon.")),2==s){a.remove(),c=o=1;const e=setInterval(()=>{U.x>-24&&(clearInterval(e),i())},50)}3==s&&(U.act=null,U.s=1,U.className+=" s",a=O(U,"Wow!\nMagick?"),setTimeout(i,2e3)),4==s&&(c=0,a.remove(),a=O(n,"Now, you point and click.\n\nCaution! You can kill a brother.")),5==s&&(c=1,setTimeout(()=>a.remove(),1e3),setTimeout(i,4e3)),6==s&&(c=0,a=O(n,"Ok. We are sending you with a retaliation group.")),7==s&&(r.removeEventListener("click",l),setTimeout(ne,1e3))}I(function(){$.className="want",t("gr",{},$),t("rv",{},$),t("fl",{},$),E(-50,200,30,{c:"tree"}),E(-50,200,-35,{c:"tree"}),D(-50,-20,15),D(-25,-20,-10),D(-25,5,15),D(100,-20,15),E(-50,100,15),E(-50,100,-20),Y(-40,-5,5,10,3),e.camTo=U,U.v=U.vx=0,U.x=-45,U.dest=null,a=O(U,"I want to fight."),n=j(-30,-5,{we:1,s:1,a:2,bless:1})},()=>r.addEventListener("click",l))}function ne(){let n,a=0;function o(){n=setTimeout(o,1100-U.x),l().filter(e=>e.p).length>30||j(Math.min(U.x+100,990),300*Math.random()-150,{we:0,s:Math.random()<.5,a:2,v:.1,dist:U})}I(function(){$.className="first",t("gr",{},$),E(-200,800,-200,{c:"tree"}),E(-200,800,200,{c:"tree"}),D(-200,-200,200,{c:"tree"}),D(800,-200,200,{c:"tree"});for(let e=-200;e<700;e+=100)for(let t=-195;t<195;t+=15)E(e+30*Math.random()+t%2*50,e+100-30*Math.random()+t%2*50,t+5*Math.random(),{c:"tree"});e.camTo=U,U.vx=U.vy=0,U.x=-100,U.y=0,j(-100,-10,{we:1,s:1,a:2,vx:.1}),j(-100,10,{we:1,s:1,a:2,vx:.1})},function(){a++,console.log("First fight:",a),1==a&&(U.bless=0,o())})}setInterval(()=>{Z++,Z%10==0&&(G.textContent="FPS: "+(1e4/(Date.now()-_)).toFixed(1),_=Date.now());for(const e of d())e.x+=2*e.vx,e.y+=2*e.vy,e.style.left=e.x+"em",e.style.bottom=e.y+"em",Date.now()-e.t>3e3&&y(e);o&&(U.turn=T().x<U.x+1.5?-1:1,function(){const e=T(),t=U.y+U.h/2;let n=Math.atan2(t-e.y,e.x-U.x);U.gun.a=n}(),U.vx=.5*(V?-1:J?1:0),U.vy=.5*(Q?-1:K?1:0),U.vx&&U.vy&&(U.vx*=.707,U.vy*=.707));for(const e of l())e.update();!function(t){if(t==e.p){const e=w-t.x,n=g-(t.y+t.h/2),a=(e>0?Math.min(e,30):Math.max(e,-30))/2,o=(n>0?Math.min(n,20):Math.max(n,-20))/3;t={x:t.x+a,y:t.y+o}}!function(t,n){e.camX=t,e.camY=n,$.style.left=50-e.camX+"em",$.style.bottom=18-e.camY+"em",A()}((10*e.camX+t.x)/11,(10*e.camY+t.y)/11)}(e.camTo)},20),r.addEventListener("keydown",e=>ee(e.key,1)),r.addEventListener("keyup",e=>ee(e.key,0)),M.addEventListener("pointerdown",e=>{0==e.button&&(U.gun.t=1)}),r.addEventListener("pointerup",e=>{0==e.button&&(U.gun.t=0)}),e.pDeadCb=()=>{e.pDeadCb=v,U.classList.add("die"),U.act=v,U.v=U.vx=U.vy=0,o=0,setTimeout(()=>{C(U,"A Hero Dies","Maybe he was not that great...").show()},1500)},function(){$.className="prologue",t("gr",{},$),t("r",{},$),X(-70,-20,-35,15,{c:"bric"});for(let e=-35;e<100;e+=20)E(e,e+13,15,{c:"bric"}),E(e+13,e+20,15,{c:"tree"});const n=e=>{Z%33==0&&(e.a=0),W(e)},a=e=>{Z%33==0&&(e.a=2),W(e)};e.p.bless=1,e.p.v=.2,e.p.dest={x:0,y:0},e.p.act=n;const o=j(4,0,{we:1,fem:1,rnd:[.6,.6,.4,.1,.1,.1,.9],rndC:[1,0,1],v:.2,dest:{x:4,y:0},act:a});for(let e=.3;e<s;e+=1)j(25*Math.cos(e),15*Math.sin(e),{we:1,v:.1,dest:{x:25*Math.cos(e),y:15*Math.sin(e)},act:n}),j(25*Math.cos(e)+4,15*Math.sin(e),{we:1,fem:1,v:.1,dest:{x:25*Math.cos(e)+4,y:15*Math.sin(e)},act:a});const c=[],i={x:-30,y:8};for(let e=0;e<s;e+=.3)c.push(j(5*Math.cos(e)+i.x,5*Math.sin(e)+i.y,{we:1,fem:Math.random()<.5,v:.1,dest:i,act(e){e.a+=Math.random()-.5,Z%222==0&&W(e)}}));let m=["ð‡€","ð… ","ð…¡","ð…¢","ð…£","ð„¢","ð„ž","ðŸŽµ","ðŸŽ¶","ðŸŽ¼"],d=O(c.rnd(),m.rnd());const y=setInterval(()=>{d.remove(),d=O(c.rnd(),m.rnd(),{s:3})},1e3),x=()=>({x:60*Math.random()-30,y:30*Math.random()-18}),f=[];for(let e=0;e<12;e++)f.push(j(x().x,x().y,{we:1,c:1,fem:Math.random()<.5,v:.2,dest:x(),act(e){e.a+=Math.random()-.5,Z%222==0&&W(e)}}));f.n=0,setInterval(()=>{f.n++,f[f.n%12].dest=x()},100),setTimeout(L,500);let w,g,p,b,M=O(o,"Hey Honey,\nYou will not believe..."),k=0,A=0;function T(){if(k++,console.log("Prologue:",k),1==k&&(M.remove(),M=O(e.p,"Tell me!")),2==k&&(M.remove(),M=O(o,"The most cuuuute thing\nI ever saw!"),g=C({x:-5,y:3},"Valentine's Day at Ourland Park","The lovers, friens and families are having a great day!").show()),3==k&&(g.remove(),M.remove(),M=O(e.p,"Oh! I think I already know...")),4==k&&(M.remove(),M=O(o,"A black kitten was\non my window today.")),5==k&&(M.remove(),M=O(e.p,"oOOOooowwww...")),6==k&&(A=1,M.remove(),w=[e.camTo=j(70,0,{we:0,s:1,a:2,vx:-.2,act:e=>{e.x<35&&(w[0].vx=w[1].vx=w[2].vx=0,w[0].act=w[1].act=w[2].act=v,T())}}),j(73,7,{we:0,s:1,a:2,vx:-.2,act:v}),j(73,-7,{we:0,s:1,a:2,vx:-.2,act:v})],w[0].gun.a=w[1].gun.a=w[2].gun.a=2),7==k&&(A=0,M=O(e.p,"WTF?"),e.camTo=e.p,w[0].targ=w[1].targ=w[2].targ=o,g=C({x:30,y:0},"Terrorists from They are invading","We don't know why, but they are here with guns threatening our people.")),8==k){M.remove(),clearInterval(y),d.remove(),w[0].act=w[1].act=w[2].act=null,A=1,l().forEach(t=>{t==e.p||t==o||t.s||(t.panic=1,t.act=t.dest=null)});const t=setInterval(()=>{h(0)>15&&(clearInterval(t),T())},100)}if(9==k){M=O(e.p,"Honey?");const t=setInterval(()=>{for(let e=0;e<3;e++)j(10*e-55+10*Math.random(),-30,{we:1,s:1,vy:.5-.1*e,act(t){t.y>0-2*e&&(t.vy=0,t.act=null)}});w.find(e=>!e.die)||(clearInterval(t),T())},1500)}10==k&&(A=0,M.remove(),M=O(e.p,"HONEY??"),p=C({x:-10,y:0},"Massive killing on Ourland Park",`${h(0)} inocent people, particularly ${u[0].c} children are dead. For now, the threat has been contained by our soldiers.`,{c:"n2"})),11==k&&(M.remove(),M=O(e.p,"HONEY????",{s:3})),12==k&&(M.remove(),M=O(e.p,"AAAAAAAAAAA\nAAAAAAAAA!!!",{s:4}),e.camTo={x:-1,y:0},b=setInterval(()=>{e.camTo.x=e.camTo.x<0?1.5:-1.5},60)),13==k&&(g.show(),p.show()),14==k&&(clearInterval(b),r.removeEventListener("click",N),g.remove(),p.remove(),te())}const N=()=>A||T();r.addEventListener("click",N)}()</script></body></html>
