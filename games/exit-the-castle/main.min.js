let t,e,a=[];a.push({map:[[9,9],[0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0],[4,1]],t:[[64,24]],i:[64,80]}),a.push({map:[[9,9],a[0].map[1],[4,1]],t:[[16,24],[112,24]],i:[64,112]}),a.push({map:[[19,9],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[16,1]],t:[[32,24],[32,42],[256,112],[256,96],[272,80]],i:[32,112]}),a.push({map:[[19,9],a[2].map[1],[2,1]],t:[[128,56],[256,24],[256,42],[32,112],[32,96],[16,80]],i:[256,112]}),a.push({map:[[13,17],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[6,1]],t:[[80,32],[96,32],[112,32],[16,240],[32,240],[176,240],[160,240]],i:[96,240]}),a.push({map:[[17,14],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,1,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1]],t:[[208,152],[240,152],[240,96],[96,32],[80,32],[64,88],[80,88],[16,32],[16,48],[96,192],[64,192]],i:[224,192]}),a.push({map:[[13,13],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[6,1]],t:[[16,24],[176,24],[16,176],[32,176],[16,160],[176,176],[160,176],[176,160]],i:[96,176]}),a.push({map:[[17,14],a[5].map[1].slice().reverse(),[2,1]],t:[[160,32],[160,64],[192,64],[192,32],[240,48],[240,96],[240,128],[192,128],[192,192],[16,192],[16,128],[16,64],[48,64]],i:[240,192]}),a.push({map:[[13,17],a[4].map[1].slice().reverse(),[6,1]],t:[[16,24],[32,24],[48,24],[64,24],[128,24],[144,24],[160,24],[176,24],[80,192],[112,192],[80,96],[112,96]],i:[96,240]}),a.push({map:[[13,13],a[6].map[1],[6,1]],t:[[16,24],[32,24],[16,42],[176,24],[160,24],[176,42],[16,176],[32,176],[16,160],[176,176],[160,176],[176,160]],i:[96,176]}),a.push({map:[[14,14],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[3,1]],t:[[16,136],[80,136],[80,192],[16,192],[128,136],[192,136],[192,192],[128,192],[128,24],[192,24],[192,80],[128,80],[16,24],[80,24],[80,80],[16,80]],i:[48,192]}),a.push({map:[[13,14],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,1,0,0,1,1,1,0,0,1,1,1,0,0,1,0,0,1,1,1,0,0,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,1,0,0,1,0,0,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[6,1]],t:[[16,32],[32,32],[48,32],[16,192],[32,192],[48,192],[144,192],[160,192],[176,192],[144,32],[160,32],[176,32],[96,32],[96,48],[96,64]],i:[96,128]}),a.push({map:[[28,12],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,1,1,1,1,1,1,0,0,1,1,0,0,1,1,1,1,1,1,0,0,1,1,1,1,1,1,0,0,1,1,1,1,1,1,0,0,1,1,0,0,1,1,1,1,1,1,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,0,0,1,1,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,1,1,0,0,1,1,0,0,1,1,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,1,1,0,0,1,1,1,1,1,1,0,0,1,1,1,1,1,1,0,0,1,1,0,0,1,1,1,1,1,1,0,0,1,1,1,1,1,1,0,0,1,1,1,1,1,1,0,0,1,1,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[26,1]],t:[[16,120],[32,120],[96,160],[112,96],[128,96],[16,32],[32,32],[96,32],[80,32],[144,160],[160,160],[224,32],[208,32],[240,96],[256,96],[272,160],[288,160],[272,32],[288,32],[336,96],[352,96],[336,160],[352,160],[336,32],[352,32],[368,160],[384,160],[368,32],[384,32]],i:[224,160]});let o=[];const n=document.createElement("canvas");n.setAttribute("width",320),n.setAttribute("height",180);const s=n.getContext("2d"),h=320,f=180,r={},l={x:0,y:0},y={x:0,y:0};key={x:0,y:0,o:128,h:31,l:0};const u={u:[,,150,.05,,.05,,1.3,,,,,,3],m:[.2,0,267,.1,.06,,,1.49,4.3,-.8,,,,2,,.3,.15,.52,.05],M:[.3,0,260,,.1,.07,4,4.7,,,,,,.4,,.4,.12,.3,.02,.01],g:[.5,,499,,.15,.04,,1.47,4.5,-6.8,,,.17,.5,,.3,.13,.73,.04,.12],p:[.2,0,415,.01,.4,.35,1,.7,,6.27,-50,.04,.11,,,,,.5],escape:[1.01,,749,.1,.09,.14,1,1.03,,,100,.03,-.02,,,,.11,.7,.07],P:[1.1,,146,,.02,.12,1,.6,-8.6,-6.3,,,,,,,,.8,.02,.15],v:[.5,0,471,,.03,.43,4,1.06,-5.5,,,,,.9,61,.1,,.5,.02],key:[,,1675,,.06,.24,1,1.82,,,837,.06]};let c,z=0,m=null,x=new Image,M=0,d=1,g=0,p=0,w=0,P=0,v=0;const k=new OffscreenCanvas(320,180),R=k.getContext("2d"),E=new OffscreenCanvas(160,96),C=E.getContext("2d");let S=[];class b{constructor(t,e){this.x=t,this.y=e,this.k=T.x>this.x?1:-1}k=0;R=1;C=0;S=0;speed=.75;T=0;A=100;frame=0;D=0;p=0}const T={x:100,y:100,k:1,R:0,D:0,A:100,frame:0,angle:0,X:[],Y:18,accuracy:19,G:1,key:0,O:100,l:function(){R.save(),-1==this.k&&(R.translate(320,0),R.scale(-1,1)),this.A<=0?(0==this.A&&(zzfx(...u.p),this.A=-1),R.drawImage(E,128,64,16,16,152,82,16,16)):this.D>0?(2==this.D&&zzfx(...u.g),R.drawImage(E,144,64,16,16,152,82,16,16),this.D-=1):R.drawImage(E,16*Math.floor(T.frame),64,16,16,152,82,16,16),R.restore(),R.fillStyle="rgb(0, 0, 0)",R.fillRect(T.x-y.x-1,T.y-y.y+4+16-1,18,3),R.fillStyle="rgb(255, 0, 0)",R.fillRect(T.x-y.x,T.y-y.y+4+16,Math.round(T.A/this.O*100*.16),1)}};function A(t="",e=100,i=0,a="rgb(255,255,255)",o=2,n=0,s=0){t=String(t).toUpperCase();const h=(o*=5)/5,f=[...Array(33),29,,,,,,12,,,,"ᇄ",3,"ႄ",1,1118480,"縿",31,"庽","嚿","炟","皷","纷","䈟","线","皿",17,,,"⥊",,"䊼",,"㹏","纮","縱","縮","纵","纐","񴚦","粟","䟱","丿",1020241,"簡",33059359,1024159,"縿","纜","񼙯","繍","皷","䏰","簿",25363672,32541759,18157905,"惸",18470705,,,,,"С"];let r=0,l=[];r=[...t].reduce(((t,o)=>{const n=f[o.charCodeAt()]||"",r=((n>0?n:n.codePointAt())||0).toString(2),y=31==n?3:Math.ceil(r.length/5),u=t+h;return r.padStart(5*y,0).match(new RegExp(".{5}","g")).map(((t,o)=>[...t].map(((t,n)=>{1==t&&l.push({fill:a,q:e+u+o*h,F:i+n*h,H:h})})))),t+(y+1)*h+s}),0);const y=n?Math.floor(r/2):0;return l.forEach((t=>{R.fillStyle=t.fill,R.fillRect(t.q-y,t.F,h,h)})),r}function D(t,e,i,a,o,n,s,h){return t<o+s&&t+i>o&&e<n+h&&a+e>n}function X(){R.imageSmoothingEnabled=!1,R.fillStyle="#000",R.fillRect(0,0,h,f),t.l(E,R,y.x,y.y,h,f),S.sort(((t,e)=>t.y>e.y?1:-1)),S.forEach((t=>{if(t.A<=0)return R.save(),-1==t.k&&(R.translate(2*(t.x-y.x)+16,0),R.scale(-1,1)),0==t.A&&(t.A=-1),R.globalAlpha=(100- -1*t.A)/100,R.drawImage(E,128,80,16,16,t.x-y.x,t.y-y.y,16,16),void R.restore();R.save(),T.x<t.x&&(R.translate(2*(t.x-y.x)+16,0),R.scale(-1,1)),t.D?(2==t.D&&zzfx(...u.M),R.drawImage(E,144,80,16,16,t.x-y.x,t.y-y.y,16,16),t.D-=1):t.C?R.drawImage(E,112+16*Math.floor(t.frame),48,16,16,t.x-y.x,t.y-y.y,16,16):R.drawImage(E,16*Math.floor(t.frame),80,16,16,t.x-y.x,t.y-y.y,16,16),R.restore()})),T.l(),key.l&&R.drawImage(E,key.o,key.h,16,16,key.x-y.x,key.y-y.y,16,16),T.X.forEach((t=>{let e=t.x-y.x,i=t.y-y.y;e<0||e>319||i<0||i>179||(R.save(),R.translate(e,i),R.rotate(t.angle),R.translate(-e,-i),R.drawImage(E,128,0,19,19,e-10,i-10,19,19),R.restore())}))}function Y(){const t=Math.floor(window.innerWidth/h),e=Math.floor(window.innerHeight/f);c=Math.min(t,e)||1,n.setAttribute("width",h*c),n.setAttribute("height",f*c)}function G(n){let x=n-M,v=1e3/60;v=Math.min(v,25),x>Math.floor(v)&&(M=n,g?function(){let t=l.x<205&&l.x>120&&l.y>78&&l.y<123?"#fd0":"#fff";R.fillStyle="#000",R.fillRect(0,0,h,f),A("Exit the Castle",161,19,"#dd0a1e",3,1),z?(A("You didn't escape this time",160,45,"#fff",1,1),A("You made it to level "+(P+1),160,55,"#fff",1,1),A("Try again to see if you can make it out",160,65,"#fff",1,1)):(A("You are trapped in the Sheriff of Nottingham's castle",160,50,"#fff",1,1),A("Survive against his knights to escape",160,60,"#fff",1,1)),A("Play",160,90,t,4,1),R.strokeStyle=t,R.lineWidth=4,R.strokeRect(122,80,80,40),A("WASD/arrows to move, mouse to aim, click to shoot",160,140,"#eee",1,1)}():d?function(t){R.fillStyle="#4b0e9a",R.fillRect(0,0,h,f);var e=R.createRadialGradient(h,f,400,180,0,110);e.addColorStop(1,"#423a9c"),e.addColorStop(.7,"#72394a"),e.addColorStop(0,"#f17640"),R.fillStyle=e,R.fillRect(0,0,h,f),A("13",80,22,"#773f10",10,0,8),A("13",75,17,"#773f10",10,0,8),A("13",70,12,"#e1ae00",10,0,8),A("th",179,51,"#773f10",3,0,4),A("th",177,49,"#773f10",3,0,4),A("th",175,47,"#e1ae00",3,0,4),R.fillStyle="#773f10",R.fillRect(87,68,130,6),R.fillStyle="#e1ae00",R.fillRect(85,66,130,6),R.fillStyle="#773f10",R.fillRect(92,76,120,3),R.fillStyle="#e1ae00",R.fillRect(90,74,120,3),A("century",101,83,"#773f10",3,0,3),A("century",99,81,"#773f10",3,0,3),A("century",97,79,"#e1ae00",3,0,3),R.fillStyle="#773f10",R.fillRect(92,98,120,5),R.fillStyle="#e1ae00",R.fillRect(90,96,120,5),A("badger",100,107,"#773f10",4,0,1),A("badger",98,105,"#773f10",4,0,1),A("badger",96,103,"#e1ae00",4,0,1),R.fillStyle="#773f10",R.fillRect(92,128,120,3),R.fillStyle="#e1ae00",R.fillRect(90,125,120,3),R.fillStyle="#773f10",R.fillRect(98,131,110,33),R.fillStyle="#e1ae00",R.fillRect(95,131,110,30)}():p?function(){for(R.fillStyle="#000",R.fillRect(0,0,h,f),A("Level up!",160,20,"#dd0a1e",3,1),A("How far can you get?",160,50,"#fff",1,1),A("Choose an upgrade to start level "+(P+2),160,65,"#fff",1,1),e=["Extra health"],P>0&&(19==T.accuracy&&e.push("Eagle eye"),13==T.accuracy&&e.push("Eagle eye master"),7==T.accuracy&&e.push("Eagle eye legend")),P>2&&(18==T.Y&&e.push("Extra damage"),20==T.Y&&e.push("Damage master"),25==T.Y&&e.push("Damage legend")),P>4&&1==T.G&&e.push("Twin shot"),P>7&&2==T.G&&e.push("Triple shot"),i=0;i<e.length;i++){let t=80+20*i,a=l.y>t&&l.y<t+11?"#fd0":"#fff";A(e[i],160,t,a,2,1),o[i]=[t,t+11]}}():w?function(){let t=l.x<199&&l.x>124&&l.y>120&&l.y<136?"#fd0":"#fff";R.fillStyle="#000",R.fillRect(0,0,h,f),A("Congratulations!",160,18,"#fff",3,1,1),A("Congratulations!",160,20,"#666",3,1,1),A("Congratulations!",161,19,"#fd0",3,1,1),A("You made your way out",160,50,"#fff",2,1),A("Escaping from the Sheriff of Nottingham once",160,80,"#fff",1,1),A("again, you go on to write your name into legend",160,95,"#fff",1,1),R.fillStyle=t,R.fillRect(124,120,74,15),R.fillStyle="#000",R.fillRect(125,121,72,13),A("back to the start",160,125,t,1,1)}():(function(e){if(T.A>0){if(T.R=0,r.w||r.ArrowUp){let e=Math.floor(T.x/16),i=Math.floor((T.y-T.speed+8)/16),o=Math.floor((T.x+16)/16),n=Math.floor((T.y-T.speed+8)/16);1==T.key&&(e==t.N[0]&&i==t.N[1]||o==t.N[0]&&n==t.N[1])&&(P+1==a.length?(zzfx(...u.escape),w=1):p=1)}(r.w||r.ArrowUp)&&t.V(T.x,T.y-T.speed)&&t.V(T.x+16-1,T.y-T.speed)&&(T.y-=T.speed,T.R=1),(r.a||r.ArrowLeft)&&t.V(T.x-T.speed,T.y)&&t.V(T.x-T.speed,T.y+16-1)&&(T.x-=T.speed,T.R=1),(r.s||r.ArrowDown)&&t.V(T.x,T.y+T.speed+16-1)&&t.V(T.x+16-1,T.y+T.speed+16-1)&&(T.y+=T.speed,T.R=1),(r.d||r.ArrowRight)&&t.V(T.x+T.speed+16-1,T.y)&&t.V(T.x+T.speed+16-1,T.y+16-1)&&(T.x+=T.speed,T.R=1),T.frame=T.frame<7&&1==T.R?T.frame+=.25:0}else null==m&&(m=setTimeout((()=>{q(0),g=1,z=1}),2e3));key.l&&D(T.x,T.y,16,16,key.x,key.y,16,16)&&(key.l=0,T.key=1,zzfx(...u.key)),y.x=T.x-160+8,y.y=T.y-90+8;for(let e=0;e<S.length;e++){let i=S[e],a=0,o=0;if(i.A<=0)continue;if(i.C?(i.frame=i.frame<2?i.frame+=.3:0,i.frame>2&&(i.C=0)):i.frame=i.frame<7&&1==i.R?i.frame+=.25:0,i.T+=i.speed,!(i.T>1))continue;i.T-=1,T.x>i.x&&t.V(i.x+i.speed+16-1,i.y)&&t.V(i.x+i.speed+16-1,i.y+16-1)&&(a=i.speed),T.y>i.y&&t.V(i.x,i.y+i.speed+16-1)&&t.V(i.x+16-1,i.y+i.speed+16-1)&&(o=i.speed),T.x<i.x&&t.V(i.x-i.speed,i.y)&&t.V(i.x-i.speed,i.y+16-1)&&(a=-i.speed),T.y<i.y&&t.V(i.x,i.y-i.speed)&&t.V(i.x+16-1,i.y-i.speed)&&(o=-i.speed);let n=0,s=0;for(let t=0;t<S.length;t++)e==t||S[t].A<=0||(D(i.x+a,i.y,16,8,S[t].x,S[t].y,16,8)&&(n=1),D(i.x,i.y+o,16,8,S[t].x,S[t].y,16,8)&&(s=1));D(i.x-1,i.y-1,18,18,T.x,T.y,16,16)||(n||(i.x+=a),s||(i.y+=o)),i.S>0&&(i.S-=1),D(i.x-1,i.y-1,18,18,T.x,T.y,16,16)&&0==i.S&&T.A>0&&(i.C=1,T.A-=10,T.D=2,i.frame=0,i.S=10)}T.X.forEach((e=>{T.X=T.X.filter((t=>!0!==t.remove)),e.x+=e.j,e.y+=e.I,t.V(e.x,e.y)||(e.remove=!0),S.forEach((t=>{t.A<=0||0==e.remove&&D(t.x,t.y,16,16,e.x,e.y,1,1)&&(e.remove=!0,t.A-=T.Y,t.S=10,t.C=0,t.D=2,t.A<=0&&(T.x<t.x?t.k=-1:t.k=1))}))})),S.forEach((t=>{if(t.A<=0&&!t.p){t.p=1,zzfx(...u.v);let e=0;for(let t=0;t<S.length;t++)1!=S[t].p&&1!=S[t].remove&&(e+=1);0==e&&(key.x=t.x,key.y=t.y,key.l=1)}t.A<=0&&(t.A-=1),t.A<=-100&&(t.remove=!0)})),S=S.filter((t=>!0!==t.remove))}(),X()),R.drawImage(E,0,16,5,5,l.x-3,l.y-3,5,5),function(t=k,e=s){e.imageSmoothingEnabled=!1,e.drawImage(t,0,0,h,f,0,0,h*c,f*c)}()),requestAnimationFrame(G)}var O=function(t,e){e=-e*(Math.PI/180);var i=Math.cos(e),a=Math.sin(e);return new Array(Math.round(1e4*(t[0]*i-t[1]*a))/1e4,Math.round(1e4*(t[0]*a+t[1]*i))/1e4)};function q(e){0==e&&(T.Y=18,T.accuracy=19,T.G=1,T.O=100),e=a[e],m=null,T.A<=0&&(T.A=100),T.R=0,T.D=0,T.speed=1,T.frame=0,T.angle=0,T.X=[],T.key=0,S=[],T.x=e.i[0],T.y=e.i[1],t=new F(e.map[1],e.map[0][0],e.map[0][1],e.map[2]);for(let t=0;t<e.t.length;t++)S.push(new b(e.t[t][0],e.t[t][1]))}window.addEventListener("load",(()=>{window.addEventListener("resize",(t=>{Y(),X()})),document.addEventListener("keydown",(t=>{r[t.key]=!0})),document.addEventListener("keyup",(t=>{r[t.key]=!1})),document.addEventListener("mousemove",(t=>{l.x=Math.round((t.clientX-n.getBoundingClientRect().left)/c),l.y=Math.round((t.clientY-n.getBoundingClientRect().top)/c),T.A<=0||(T.k=l.x<160?-1:1)})),document.addEventListener("mousedown",(t=>{if(p){for(i=0;i<o.length;i++)l.y>o[i][0]&&l.y<o[i][1]&&(p=0,q(++P),"Extra health"==e[i]&&(T.A+=20,T.A>T.O&&(T.O=T.A)),"Eagle eye"==e[i]&&(T.accuracy=13),"Eagle eye master"==e[i]&&(T.accuracy=7),"Eagle eye legend"==e[i]&&(T.accuracy=1),"Extra damage"==e[i]&&(T.Y=20),"Damage master"==e[i]&&(T.Y=25),"Damage legend"==e[i]&&(T.Y=35),"Twin shot"==e[i]&&(T.G=2),"Triple shot"==e[i]&&(T.G=3));return}if(d)return void(v||(v=1,function(){const t=zzfxM(...H);zzfxP(...t).onended=function(){d=0,g=1,v=0}}(),setTimeout((()=>{1==v&&(v=0,d=0,g=1)}),9e3)));if(g)return void(l.x<205&&l.x>120&&l.y>78&&l.y<123&&(g=0,P=0));if(w&&l.x<199&&l.x>124&&l.y>120&&l.y<136&&location.reload(),w)return;if(T.A<=0)return;let a=l.x-(T.x-y.x)+8-16,n=l.y-(T.y-y.y)+8-16,s=Math.sqrt(a*a+n*n);a/=s,n/=s,T.angle=Math.atan2(n,a),T.angle<0&&(T.angle=Math.PI+(Math.PI+T.angle));let h=2==T.G?-5:0,f=O([a,n],(r=-T.accuracy,c=T.accuracy,Math.floor(r+Math.random()*(c-r+1))+h));var r,c;let z={x:T.x+8+Math.floor(10*a),y:T.y+8+Math.floor(10*n),j:3*f[0],I:3*f[1],angle:T.angle,remove:!1};if(T.X.push(z),T.G>1){let t=2==T.G?O([a,n],5):O([a,n],10);z={x:T.x+8+Math.floor(10*a),y:T.y+8+Math.floor(10*n),j:3*t[0],I:3*t[1],angle:T.angle,remove:!1},T.X.push(z)}3==T.G&&(multi=O([a,n],-10),z={x:T.x+8+Math.floor(10*a),y:T.y+8+Math.floor(10*n),j:3*multi[0],I:3*multi[1],angle:T.angle,remove:!1},T.X.push(z)),zzfx(...u.u)})),document.body.appendChild(n),Y(),x.onload=async function(){C.imageSmoothingEnabled=!1,C.drawImage(x,0,0,160,96,0,0,160,96);const t=C.getImageData(0,0,160,96);for(let e=0;e<t.data.length;e+=4)t.data[e]<5&&t.data[e+1]<5&&t.data[e+2]>250&&(t.data[e+3]=0);C.clearRect(0,0,160,96),C.putImageData(t,0,0),q(P),requestAnimationFrame(G)},x.src="Sprite-0001.png"}));class F{cols=32;rows=35;L=16;W=7;B=[];N=[];constructor(t,e,i,a){this.B=t,this.rows=i,this.cols=e,this.N=a;for(let t=0;t<this.B.length;t++){let e=t%this.cols,i=Math.floor(t/this.cols);if(0==this.B[t]){let a=0;Math.abs(this.J(e,i-1)-2.5)<2.5&&(a+=1),Math.abs(this.J(e,i+1)-2.5)<2.5&&(a+=8),Math.abs(this.J(e-1,i)-2.5)<2.5&&(a+=2),Math.abs(this.J(e+1,i)-2.5)<2.5&&(a+=4),0==a&&(Math.abs(this.J(e-1,i+1)-2.5)<2.5&&(a=64),Math.abs(this.J(e+1,i+1)-2.5)<2.5&&(a=128)),a>0&&(this.B[t]=a+this.W)}else 1==this.B[t]&&(this.B[t]=Math.floor(4*Math.random())+1)}for(let t=0;t<this.B.length;t++){if(this.B[t]>4)continue;let e=t%this.cols,i=Math.floor(t/this.cols);this.J(e,i-1)==8+this.W&&(this.B[t]=5),this.J(e,i-1)==10+this.W&&(this.B[t]=6),this.J(e,i-1)==12+this.W&&(this.B[t]=7)}}J(t,e){return this.B[e*this.cols+t]}V(t,e){let i=0;return i=this.J(Math.floor(t/this.L),Math.floor((e+this.L/2)/this.L)),!(-1==i||i>4&&i<8||(i=this.J(Math.floor(t/this.L),Math.floor(e/this.L)),0==i||i>this.W))}K(t){return-1==t?{x:112,y:32}:-2==t?{x:112,y:16}:t>0&&t<5?{x:t*this.L,y:2*this.L}:5==t?{x:80,y:16}:6==t?{x:96,y:48}:7==t?{x:96,y:16}:t==4+this.W?{x:0,y:48}:t==2+this.W?{x:32,y:48}:t==1+this.W?{x:16,y:48}:t==8+this.W?{x:80,y:0}:t==3+this.W?{x:80,y:32}:t==5+this.W?{x:0,y:32}:t==12+this.W?{x:96,y:0}:t==10+this.W?{x:96,y:32}:void 0}l(t,e,i,a,o,n){let s=Math.floor(i/this.L),h=s+o/this.L,f=Math.floor(a/this.L),r=f+n/this.L,l=-i+s*this.L,y=-a+f*this.L;for(let i=s;i<=h;i++)for(let a=f;a<=r;a++){let o=this.J(i,a),n=this.K(o),h=16*(i-s)+l,r=16*(a-f)+y;void 0!==n&&o&&i>=0&&i<this.cols&&a>=0&&a<this.rows&&(e.drawImage(t,n.x,n.y,this.L,this.L,h,r,this.L,this.L),i==this.N[0]&&a==this.N[1]&&e.drawImage(t,112,32,this.L,this.L,h,r,this.L,this.L))}}}const H=[[[.7,0,51,,.1,.2,3,4,,,3,.9,.05],[.7,0,58,,.25,.2,3,4,,,3,.9,.05]],[[[1,0,11,0,15,0,18,0,20,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,15,0,14,0,13,0,15,15.3,15.6,,,],[1,0,11,0,15,0,18,0,20,,,,,0,0,0,0,13,0,16,0,20,0,23,,,,,0,0,0,0,13,0,16,0,19,0,23,,,,,0,0,18,0,15,0,16,0,18,18.3,18.6,,,],[0,0,,,,,,,,,1,0,1,1,1,,,-1,0,0,0,0,0,0,0,1,0,1,1,1,,,13,0,16,0,19,0,23,,,,,-1,,,,,,,,2,2.3,2.6,,,],[0,0,,,,,,,,,4,0,4,4,4,,,-1,0,0,0,0,0,0,0,4,0,4,4,6,,,,,,,,,,,,,,,,,,,,,,3,3.3,3.6,,,],[0,0,,,,,,,,,8,0,8,8,8,,,-1,0,0,0,0,0,0,0,7,0,7,7,10,,,,,-1,,,,,,,,,,,,,,,,,6,6.3,6.6,,,]]],[0],102];zzfx=(...t)=>zzfxP(zzfxG(...t)),zzfxP=(...t)=>{let e=zzfxX.createBufferSource(),i=zzfxX.createBuffer(t.length,t[0].length,zzfxR);return t.map(((t,e)=>i.getChannelData(e).set(t))),e.buffer=i,e.connect(zzfxX.destination),e.start(),e},zzfxG=(t=1,e=.05,i=220,a=0,o=0,n=.1,s=0,h=1,f=0,r=0,l=0,y=0,u=0,c=0,z=0,m=0,x=0,M=1,d=0,g=0)=>{let p,w,P=2*Math.PI,v=f*=500*P/zzfxR**2,k=(0<z?1:-1)*P/4,R=i*=(1+2*e*Math.random()-e)*P/zzfxR,E=[],C=0,S=0,b=0,T=1,A=0,D=0,X=0;for(a=99+zzfxR*a,d*=zzfxR,o*=zzfxR,n*=zzfxR,x*=zzfxR,r*=500*P/zzfxR**3,z*=P/zzfxR,l*=P/zzfxR,y*=zzfxR,u=zzfxR*u|0,w=a+d+o+n+x|0;b<w;E[b++]=X)++D%(100*m|0)||(X=s?1<s?2<s?3<s?Math.sin((C%P)**3):Math.max(Math.min(Math.tan(C),1),-1):1-(2*C/P%2+2)%2:1-4*Math.abs(Math.round(C/P)-C/P):Math.sin(C),X=(u?1-g+g*Math.sin(2*Math.PI*b/u):1)*(0<X?1:-1)*Math.abs(X)**h*t*zzfxV*(b<a?b/a:b<a+d?1-(b-a)/d*(1-M):b<a+d+o?M:b<w-x?(w-b-x)/n*M:0),X=x?X/2+(x>b?0:(b<w-x?1:(w-b)/x)*E[b-x|0]/2):X),p=(i+=f+=r)*Math.sin(S*z-k),C+=p-p*c*(1-1e9*(Math.sin(b)+1)%2),S+=p-p*c*(1-1e9*(Math.sin(b)**2+1)%2),T&&++T>y&&(i+=l,R+=l,T=0),!u||++A%u||(i=R,f=v,T=T||1);return E},zzfxV=.3,zzfxR=44100,zzfxX=new(window.AudioContext||webkitAudioContext),
//! ZzFXM (v2.0.3) | (C) Keith Clark | MIT | https://github.com/keithclark/ZzFXM
zzfxM=(t,e,i,a=125)=>{let o,n,s,h,f,r,l,y,u,c,z,m,x,M,d,g=0,p=[],w=[],P=[],v=0,k=0,R=1,E={},C=zzfxR/a*60>>2;for(;R;v++)p=[R=y=z=x=0],i.map(((a,z)=>{for(l=e[a][v]||[0,0,0],R|=!!e[a][v],d=x+(e[a][0].length-2-!y)*C,M=z==i.length-1,n=2,h=x;n<l.length+M;y=++n){for(f=l[n],u=n==l.length+M-1&&M||c!=(l[0]||0)|f|0,s=0;s<C&&y;s++>C-99&&u?m+=(m<1)/99:0)r=(1-m)*p[g++]/2||0,w[h]=(w[h]||0)-r*k+r,P[h]=(P[h++]||0)+r*k+r;f&&(m=f%1,k=l[1]||0,(f|=0)&&(p=E[[c=l[g=0]||0,f]]=E[[c,f]]||(o=[...t[c]],o[2]*=2**((f-12)/12),f>0?zzfxG(...o):[])))}x=d}));return[w,P]};