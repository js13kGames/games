<!doctype html><meta charset=utf-8><meta content="width=device-width,shrink-to-fit=no" name=viewport><title>TRISKBALL - js13kGames 2025</title><body style=font-family:Arial;font-size:12px;width:100%;height:100%;overflow:visible;padding:0;margin:0;background-color:#000><div style="position:relative;margin:0 auto;width:100%;height:100%;overflow:hidden;background-color:#000" id=mainDIV><div style="position:absolute;width:100%;pointer-events:none;transition:2s opacity;display:none;top:250px;left:0;font-size:26px;z-index:100" id=gameStartMSG><div style="pointer-events:none;text-align:center;margin:0 auto;width:80%;max-width:61.5vh;font-weight:500;color:#c9af00">Find the black cat</div></div><div style="position:absolute;text-align:center;top:0;left:0;font-size:30px;color:#fff;margin:0 auto;width:100%;height:100%;overflow:hidden;background-color:#000;z-index:99999999" id=startDiv onclick='start(),this.style.display="none"'><div style=position:relative;clear:both;height:200px></div>start game</div><div style="position:relative;margin:0 auto;width:61.5vh;height:calc(100% - 90px);max-height:140vw;max-width:100vw;overflow:visible"><div style="position:absolute;top:50px;left:5%;width:84%;transition:.8s opacity;opacity:1;text-align:center;color:orange;border-radius:20px;font-size:12px;padding:3%;background-color:rgba(0,0,0,.5);z-index:1000" id=gameMSG><br><br><font style=font-size:25px;color:#ff0>TRISKBALL</font><br><font style=font-size:25px;color:#0f0>Find the black cat!</font><br><br><div style="display:inline-block;text-align:center;padding:6px 20px 6px 20px;font-size:20px;color:#d3fc6f;font-weight:500;box-shadow:0 0 10px 5px #86a145;border-radius:10px;border:3px solid #d3fc6f;background-color:rgba(0,0,0,.5)" onclick=play() class=blink_me>Start Game</div><br><br><br></div><div style=position:relative;height:100%;overflow:hidden;background-color:#000 id=canvasDIV><canvas id=mycanvas></canvas><div style=position:absolute;top:10px;left:10px;display:block id=canvasDIVSprites><canvas id=cSprites></canvas></div></div></div></div><script>var cursorLEFT=!1,cursorRIGHT=!1,cursorUP=!1,cursorDOWN=!1;document.onkeydown=function(t){65!=t.keyCode&&37!=t.keyCode||(t.preventDefault(),cursorLEFT=!0),68!=t.keyCode&&39!=t.keyCode||(t.preventDefault(),cursorRIGHT=!0),87!=t.keyCode&&38!=t.keyCode||(t.preventDefault(),cursorUP=!0),83!=t.keyCode&&40!=t.keyCode||(t.preventDefault(),cursorDOWN=!0)},document.onkeyup=function(t){65!=t.keyCode&&37!=t.keyCode||(t.preventDefault(),cursorLEFT=!1),68!=t.keyCode&&39!=t.keyCode||(t.preventDefault(),cursorRIGHT=!1),87!=t.keyCode&&38!=t.keyCode||(t.preventDefault(),cursorUP=!1),83!=t.keyCode&&40!=t.keyCode||(t.preventDefault(),cursorDOWN=!1)};var patternSuelo,patternLuces,patternLava1,patternLava2,patternLava3,canvas=document.getElementById("mycanvas"),context=canvas.getContext("2d"),cSprites=document.getElementById("cSprites"),Sctx=cSprites.getContext("2d");cSprites.width=60,cSprites.height=60;var cWidth=1e3,cHeight=1400;canvas.width=cWidth,canvas.height=cHeight;var elapsed,CanvasSize,fps=60,mainCounter=0,game_running=!1;function resize(){context.setTransform(1,0,0,1,0,0),CanvasSize=document.getElementById("canvasDIV").clientWidth/cWidth,context.scale(CanvasSize,CanvasSize)}document.body.onresize=function(){resize()};var bx=500,by=700,bz=0,bw=100,bh=100,Life=100,velx=0,vely=0,posX=0,posY=0,OldposX=0,OldposY=0,posZ=0,tileW=70,tileH=70,offsetX=0,offsetY=0,holeID=-2,distX=0,distY=0,dist=0,dir=0,verde=0,limite=0,level=1;null!==localStorage.getItem("localStorageJs13kbbola")&&(level=parseInt(localStorage.getItem("localStorageJs13kbbola")));var Levels=["624|365_590_2","1336|1176_1029_2-1122_911_0-1056_1027_0","1458|299_1126_2-678_1095_4-602_526_4","1255|575_517_100-827_664_100-505_693_100-681_817_100-755_513_100-655_307_0-648_198_2-775_246_0-533_256_0-530_123_100-737_117_100","1865|146_974_2-339_1072_300-331_949_200-322_826_300-208_957_300-273_890_0-265_1028_0-139_862_100-141_1078_100","766|551_221_2-380_324_0-445_302_0-512_333_0-583_330_0-538_469_0-487_529_0-422_541_0-351_519_0-296_472_0-252_400_0-235_319_0-256_247_0-307_185_0-376_160_0-445_148_0-618_464_0-731_411_6","1581|277_406_2-633_485_6-474_699_6-449_504_7-993_964_6","1581|591_1416_2-793_1434_7-360_1280_200-501_1165_200-689_1114_200-740_1285_200-749_1488_200-693_1249_4-668_1294_5-476_1270_6","1581|591_1416_2-793_1434_7-360_1280_200-501_1165_200-689_1114_200-740_1285_200-749_1488_200-693_1249_4-668_1294_5-476_1270_6","1581|1590_785_2-1078_1330_100-1498_798_100-1481_897_100-1452_996_100-1405_1089_100-1343_1177_100-1269_1244_100-1179_1297_100-1525_695_100-1211_1464_8","1581|693_1364_2-1090_781_100-1241_597_100-1058_1116_100-974_557_100-644_855_100-437_1121_100-711_543_100-399_676_100-1054_361_100-1347_981_100-771_1228_100-316_888_100-816_324_100-486_431_100-906_996_100-525_578_300-848_648_300-670_692_300-642_396_300-838_454_300-481_795_300-1161_441_300-1089_630_300-966_843_300-723_945_300-1232_776_300-1132_955_300-164_879_300-556_1198_300-897_1143_300-533_989_300-677_1102_100-568_191_300-941_219_300-202_676_300-341_515_300-1394_1116_300-1472_989_300-1228_1116_300-1044_1280_300-849_1334_300-585_1493_4-145_1022_300-285_1153_100","1581|507_858_2-510_562_9-23_768_9-42_966_9-534_1149_9-667_971_8-662_786_8-60_1989_8-0_1_8","1581|516_752_0-519_814_0-466_850_0-463_779_2-402_713_0-463_716_0-405_855_0-340_716_0-347_857_0-246_712_100-261_862_100-176_705_0-193_912_0-418_799_10","1214|655_1029_0-720_1025_0-224_758_0-260_807_0-376_855_0-438_877_0-1095_777_0-1122_718_0-539_765_0-600_793_0-739_793_0-789_754_0-925_835_0-695_1133_2-980_799_0-800_823_4-567_837_5-1158_777_6-215_818_7-989_875_8-403_916_9-708_1087_10","1540|326_542_2-273_482_0-251_558_0-300_620_0-373_602_0-402_531_0-346_467_0-932_828_4","1255|661_176_2-605_132_0-602_198_0-725_201_0-720_133_0-662_98_0-711_1166_10-565_258_100-748_259_100-651_309_200","1255|309_1006_2-411_929_10-432_664_9-722_938_9-967_512_10-700_460_9-928_739_9","1255|1047_1040_2-764_761_4-784_781_4-804_801_4-824_821_4-844_841_4-864_861_4-884_881_4-904_901_4-924_921_4-944_941_4-964_961_4-984_981_4-1455_1475_4-1475_1495_4-1495_1515_4-1515_1535_4-1535_1555_4-1555_1575_4-1575_1595_4","1255|1046_297_2-473_611_100-843_782_100-1033_860_100-1168_767_100-499_291_100-433_153_100-995_655_100-620_153_100-1094_425_100-849_368_100-604_441_100-693_306_100-964_486_100-751_513_100-806_583_100-551_775_100-433_445_100-682_837_100-944_211_100-791_150_100-1177_593_100-848_546_7","5000|425_3770_2-424_3697_0-486_3706_0-2514_2493_5-2612_2629_4-490_3818_0-518_3759_0","563|340_253_4-323_79_2","1540|694_433_300-816_433_300-1154_353_300-466_377_300-575_429_300-1053_419_300-935_427_300-1233_263_300-372_296_300-857_379_10-813_85_2","1000|685_483_100-694_580_100-387_491_100-469_400_200-593_397_200-480_656_200-603_653_200-390_590_100-140_564_2-758_548_8-361_559_8","1000|685_483_100-694_580_100-387_491_100-469_400_200-593_397_200-480_656_200-603_653_200-390_590_100-975_527_2-758_548_8-363_553_8-542_315_100-562_762_100","4104|1648_1354_200-1539_1405_200-1423_1372_200-1339_1280_200-1326_1165_200-1376_1060_200-1603_1033_200-1487_1005_200-1705_1247_200-1692_1121_200-1494_1182_10-1546_1227_2","3209|2442_2321_0-2380_2348_0-2333_2386_0-2277_2420_0-2241_2473_0-2121_2615_0-2098_2672_0-2198_2519_0-2156_2567_0-2990_3289_4-3010_3309_4-3030_3329_4-3050_3349_4-3070_3369_4-3110_3409_4-3130_3429_4-3150_3449_4-3050_3237_4-3070_3257_4-3090_3277_4-3110_3297_4-3130_3317_4-3150_3337_4-3170_3357_4-3190_3377_4-3210_3397_4-3023_3258_4-3043_3278_4-3063_3298_4-3083_3318_4-3103_3338_4-3123_3358_4-3143_3378_4-3163_3398_4-3183_3418_4-2041_2798_0-2504_2292_0-2067_2727_0-2568_2280_0-2881_2242_0-1967_2966_0-2821_2242_0-2761_2251_0-1987_2909_0-2012_2853_0-2696_2258_0-2632_2267_0-2585_2840_2-2008_2437_0-2009_2378_0-2034_2325_0-2076_2279_0-2119_2238_0-2165_2200_0-2452_2138_0-2390_2131_0-2328_2139_0-2218_2172_0-2271_2144_0","1825|733_1253_100-971_1241_100-762_1169_100-1019_1169_100-770_1080_100-769_1485_100-897_1407_100-705_1338_100-930_1326_100-791_1385_2-821_1278_0-907_1177_0-1030_841_9","1499|373_1238_2-335_927_300-658_1087_300-245_1029_300-546_1033_300-466_1323_300-162_1114_300-250_1216_300-337_1117_300-435_1205_300-347_1299_300-544_1159_300-599_1265_300-716_1191_300-424_1024_300-423_1407_0-244_1133_0-513_1238_0-342_1021_0-459_1119_0-214_896_300-125_985_300-712_1324_300-496_924_300-574_1384_300-652_969_300","1499|772_595_2-903_599_10-664_612_10-674_672_10-905_657_10-726_694_10-776_697_10-825_695_10-866_691_10","1499|955_865_0-654_873_0-929_802_0-890_753_0-847_697_0-791_685_0-733_700_0-689_745_0-666_802_0-777_590_2-637_842_8-995_832_8-955_766_8-692_708_8-649_766_8-909_708_8-921_924_0-691_932_0-993_940_8-654_944_8-870_954_0-751_963_0-939_1000_8-724_1010_8","400|320_181_100-338_271_100-276_340_100-167_196_100-240_144_100-404_214_2","1499|334_1200_2-580_1358_200-729_1101_200-186_778_200-488_802_200-450_1059_200-362_915_100-594_1210_100-619_972_100-256_1051_0-458_1307_0-923_1000_4-627_728_4-992_894_4-735_647_4-953_749_4-861_651_4","1703|976_789_0-1036_805_0-767_811_0-828_792_0-798_776_9-1027_768_9-997_613_0-931_609_0-840_613_0-780_613_0-821_583_9-981_580_9-864_206_2-876_407_0-1051_339_0-990_338_0-672_348_0-733_344_0-710_315_9-1030_312_9-572_232_0-1156_229_0-1365_1204_0-1320_1244_0-601_1279_0-548_1241_0-569_1308_9-1388_1277_9","726|406_248_2-327_245_0-494_242_0-382_206_4-457_205_5-420_166_6-370_157_7-471_158_8-390_110_9-442_110_10","5000|1887_1451_100-2622_951_100-3187_1381_100-2787_1271_100-2352_1256_100-2112_1366_100-2472_1411_100-2957_1491_100-3192_1646_100-3452_1786_100-3117_936_100-3242_1846_100-2902_1666_100-2717_1471_100-2292_1521_100-2042_1636_100-3172_2061_100-2992_1876_100-2712_1711_100-2967_1321_100-2517_1901_100-1902_626_100-2632_2331_100-2747_1116_100-2487_1666_100-2112_1896_100-2277_1756_100-2922_2091_100-2752_1961_100-2307_1976_100-2487_846_100-2507_2156_100-2752_2166_100-3367_2026_100-1758_715_100-1448_745_100-2918_755_100-1623_825_100-2863_990_100-1938_1010_100-1708_1015_100-3403_1555_100-3038_1165_100-2413_1070_100-2578_1220_100-1918_1200_100-2133_1135_100-1637_491_100-1857_406_100-2072_346_100-1987_511_100-3482_1276_100-2652_551_100-3087_796_100-2727_746_100-2347_761_100-2057_676_100-1877_841_100-1467_981_100-2562_721_100-2217_926_100-1672_1256_100-3332_1091_100-3577_1446_100-3645_890_100-2695_365_100-2915_405_100-3145_500_100-3325_535_100-3420_790_100-3835_790_100-3525_1050_100-3850_1130_100-2520_310_100-2280_505_100-2435_570_100-2825_555_100-3025_655_100-3515_500_100-3250_780_100-3785_1420_100-3190_1125_100-3365_320_100-3595_375_100-3875_550_100-3710_580_100-3525_695_100-3665_1160_100-3305_1275_100-2710_150_100-3180_295_100-2285_295_100-2205_170_100-1750_280_100-2425_165_100-1985_210_100-3985_695_100-3850_975_100-2985_240_2","1214|662_538_7-672_1087_2-665_861_0-638_974_0-703_972_0-688_1030_10-750_1062_100-587_1067_100-523_1126_100-824_1118_100","1214|663_434_7-626_224_2-494_106_0-617_468_0-682_466_0-688_1030_10-498_235_100-754_229_100-690_288_100-572_291_100-768_110_0","1000|160_672_2-429_511_0-348_452_0-405_714_0-319_550_0-519_682_0-430_605_0-251_652_0-227_559_0-341_644_0-251_471_0-106_432_0-137_583_0-166_494_0-229_847_0-219_752_0-317_748_0-384_809_0-201_397_0-140_339_0-289_392_0-317_873_0-485_774_0-480_439_100-614_655_100-664_548_100-604_449_100","1296|689_514_300-570_519_300-810_509_300-745_409_300-629_414_300-568_311_300-509_414_300-747_206_300-628_201_300-810_306_300-688_307_300-392_202_300-513_205_300-447_306_300-873_404_300-989_194_300-866_197_300-930_293_300-696_95_2-473_711_10-981_697_10-714_941_10","5000|4862_2556_2-4175_1855_4-3950_3325_5-5820_3250_6-5875_1985_7-4910_1215_8-4400_4710_9-4420_4730_10-2685_4360_4-9445_4685_5-9280_1095_6-9250_2660_7-9270_2680_8-8310_3670_9-8330_3690_10-8155_1950_4-6950_1310_5-7090_4765_6-7110_4785_7-2520_2280_8-2835_2530_9-2260_2540_10-465_5545_4-400_580_5-2560_2865_6-2405_240_7"];function changelevel(t){(level+=t)<1&&(level=1),level>=Levels.length&&(level=Levels.length),localStorage.setItem("localStorageJs13kbbola",level)}function enemies(){var t=Levels[level-1];for(t=t.split("|"),limite=parseInt(t[0]),t=t[1].split("-"),i=0;i<t.length;i++){var e=t[i].split("_"),_=60;switch(parseInt(e[2])){case 0:case 2:_=60;break;case 4:case 5:case 6:case 7:case 8:case 9:case 10:_=65;break;case 100:_=90;break;case 200:case 300:_=120}newBuj(2*parseInt(e[0])-(limite+95)+bx,2*parseInt(e[1])-(limite+95)+by,_,0,0,parseInt(e[2]))}for(i=0;i<Buj.length;i++)2==Buj[i].st&&(verde=i)}var Buj=[],ch=[],bom=[];function newBuj(t,e,_,o,n,a){var l={x:t,y:e,r:_,vx:o,vy:n,st:a,l:0};a>=4&&a<100?Buj.push(l):Buj.unshift(l)}let zzfxX,zzfxR;enemies();let zzfxV=.2,zzfx=(t=1,e=.05,_=220,o=0,n=0,a=.1,l=0,c=1,s=0,r=0,i=0,x=0,h=0,u=0,p=0,b=0,d=0,f=1,y=0,g=0,B=0)=>{let v=Math,m=2*v.PI,M=44100,j=s*=500*m/M/M,S=_*=(1-e+2*e*v.random(e=[]))*m/M,z=0,P=0,I=0,w=1,X=0,Y=0,C=0,A=B<0?-1:1,k=m*A*B*2/M,O=v.cos(k),T=v.sin,L=T(k)/4,D=1+L,E=-2*O/D,G=(1-L)/D,R=(1+A*O)/2/D,W=-(A+O)/D,H=R,F=0,q=0,N=0,Z=0;for(r*=500*m/M**3,p*=m/M,i*=m/M,x*=M,h=M*h|0,t*=zzfxV,A=(o=M*o+9)+(y*=M)+(n*=M)+(a*=M)+(d*=M)|0;I<A;e[I++]=C*t)++Y%(100*b|0)||(C=l?1<l?2<l?3<l?T(z**3):v.max(v.min(v.tan(z),1),-1):1-(2*z/m%2+2)%2:1-4*v.abs(v.round(z/m)-z/m):T(z),C=(h?1-g+g*T(m*I/h):1)*(C<0?-1:1)*v.abs(C)**c*(I<o?I/o:I<o+y?1-(I-o)/y*(1-f):I<o+y+n?f:I<A-d?(A-I-d)/a*f:0),C=d?C/2+(d>I?0:(I<A-d?1:(A-I)/d)*e[I-d|0]/2/t):C,B&&(C=Z=H*F+W*(F=q)+R*(q=C)-G*N-E*(N=Z))),k=(_+=s+=r)*v.cos(p*P++),z+=k+k*u*T(I**5),w&&++w>x&&(_+=i,S+=i,w=0),!h||++X%h||(_=S,s=j,w=w||1);(t=zzfxX.createBuffer(1,A,M)).getChannelData(0).set(e),(_=zzfxX.createBufferSource()).buffer=t,_.connect(zzfxX.destination),_.start()};zzfxP=(...t)=>{let e=zzfxX.createBufferSource(),_=zzfxX.createBuffer(t.length,t[0].length,zzfxR);return t.map((t,e)=>_.getChannelData(e).set(t)),e.buffer=_,e.connect(zzfxX.destination),e.start(),e},zzfxG=(t=1,e=.05,_=220,o=0,n=0,a=.1,l=0,c=1,s=0,r=0,i=0,x=0,h=0,u=0,p=0,b=0,d=0,f=1,y=0,g=0)=>{let B,v,m=2*Math.PI,M=s*=500*m/zzfxR**2,j=(0<p?1:-1)*m/4,S=_*=(1+2*e*Math.random()-e)*m/zzfxR,z=[],P=0,I=0,w=0,X=1,Y=0,C=0,A=0;for(r*=500*m/zzfxR**3,p*=m/zzfxR,i*=m/zzfxR,x*=zzfxR,h=zzfxR*h|0,v=(o=99+zzfxR*o)+(y*=zzfxR)+(n*=zzfxR)+(a*=zzfxR)+(d*=zzfxR)|0;w<v;z[w++]=A)++C%(100*b|0)||(A=l?1<l?2<l?3<l?Math.sin((P%m)**3):Math.max(Math.min(Math.tan(P),1),-1):1-(2*P/m%2+2)%2:1-4*Math.abs(Math.round(P/m)-P/m):Math.sin(P),A=(h?1-g+g*Math.sin(2*Math.PI*w/h):1)*(0<A?1:-1)*Math.abs(A)**c*t*zzfxV*(w<o?w/o:w<o+y?1-(w-o)/y*(1-f):w<o+y+n?f:w<v-d?(v-w-d)/a*f:0),A=d?A/2+(d>w?0:(w<v-d?1:(v-w)/d)*z[w-d|0]/2):A),B=(_+=s+=r)*Math.sin(I*p-j),P+=B-B*u*(1-1e9*(Math.sin(w)+1)%2),I+=B-B*u*(1-1e9*(Math.sin(w)**2+1)%2),X&&++X>x&&(_+=i,S+=i,X=0),!h||++Y%h||(_=S,s=M,X=X||1);return z},zzfxR=44100;const song1=[[[.2,0,72,,,.2,,4,-2,6,50,.15,,6],[,0,655,,,.09,3,1.65,,,,,.02,3.8,-.1,,.2],[1.2,0,23,,,.2,3,4,,,3,.9,.05],[1.5,0,740,,,.15,2,.2,-.1,-.15,9,.02,,.1,.12,,.06]],[[[3,-1,13,13,13,8,13,,,,,,,,,,,,11,11,11,6,11,,,,,,,,,,,,10,10,10,6,10,,,,,,,,,6,8,10,8,8,8,5,13,,8,8,8,5,13,,,,,,],[,1,25,,25,,,,,,,,,,,,,25,25,,25,,,,,,,25,,,25,,25,25,25,,25,,,,,,,,,,,25,25,25,25,,25,,,,,,,,,,,,,,],[2,-1,13,,25,,13,13,25,13,,13,25,13,13,13,25,,13,,25,,13,13,25,13,,13,25,13,13,13,,,13,,25,,13,13,25,13,,13,25,13,13,13,25,,13,,25,,13,13,25,13,,13,25,13,13,13,25,,]],[[3,-1,13,13,13,8,13,,,,,,,,,,,,11,11,11,6,11,,,,,,,,,,,,10,10,10,6,10,,,,,,,,,6,8,10,8,8,8,5,13,,8,8,8,5,13,8,8,8,5,13],[2,-1,13,,25,,13,13,25,13,,13,25,13,13,13,25,27,11,,23,,11,11,23,11,,11,23,11,11,11,23,22,18,,30,,18,18,30,18,,18,30,18,18,18,30,22,13,,25,,13,13,25,13,,13,25,13,13,13,25,,],[,1,25,,25,,,,,,,,,,,,,25,25,,25,,,,,,,,,,,,,,25,,25,,,,,,,,,,,25,25,25,25,,25,,,,,,,,,,,,,,],[1,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13,13,13,13,13,13,13,13]],[[3,-1,13,13,13,8,13,,13,15,17,17,15,13,20,20,18,17,18,,,,17,,15,,,,17,,18,,22,22,22,,18,,,,25,25,25,,22,,,18,20,22,20,,,,,,,,,,,,,,,,],[2,-1,13,,25,,13,13,25,13,,13,25,13,13,13,25,27,11,,23,,11,11,23,11,,11,23,11,11,11,23,22,18,,30,,18,18,30,18,,18,30,18,18,18,30,22,13,,25,,13,13,25,13,,13,25,13,13,13,25,,],[,1,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,],[1,1,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,13,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,13,,13]],[[3,-1,13,,25,,13,13,25,13,,13,25,13,13,13,25,,11,,23,,11,11,23,11,,11,23,11,11,11,23,,10,,22,,10,10,22,10,,10,22,10,10,6,8,10,20,25,20,20,25,20,,20,25,20,20,20,25,,20,,],[2,-1,13,,25,,13,13,25,13,,13,25,13,13,13,25,,13,,25,,13,13,25,13,,13,25,13,13,13,25,,13,,25,,13,13,25,13,,13,25,13,13,13,25,,13,,25,,13,13,25,13,,13,25,13,13,13,25,,],[,1,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,],[1,1,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,13,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,13,,13]],[[3,-1,13,,,,,,8,,17,15,13,,17,15,13,,15,,,,10,13,15,10,13,15,10,13,15,10,13,15,12,,,,,,8,15,,,,,17,15,13,8,13,,,,,,10,8,,20,20,20,20,20,20,20],[2,-1,13,,25,,13,13,25,13,,13,25,13,13,13,25,,15,,27,,15,15,27,15,,15,27,15,15,15,27,32,20,,32,,20,20,32,20,,20,32,20,20,20,32,,13,,25,,13,13,25,20,,20,32,20,20,20,32,,],[,1,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,],[1,1,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,13,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,13,,13]],[[3,-1,13,,,,,,8,,17,,,,18,17,15,,18,,,,13,,,,10,,,,6,,,,8,12,15,12,20,,8,12,15,12,20,,22,20,15,,13,,,,,,10,,8,,,,,8,20,8],[2,-1,13,,25,25,13,,25,25,13,,25,25,13,,25,25,15,,27,27,15,,27,27,15,,27,27,15,,27,27,20,,32,32,20,,32,32,20,,32,32,20,,32,32,13,,25,25,13,,25,25,20,,32,32,20,,32,34],[,1,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,],[1,1,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,13,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,13,,13]],[[3,-1,13,,,,,,8,,17,,,,18,17,15,,18,,,,13,,,,10,,,,6,,,,8,12,15,12,20,,8,12,15,12,20,,22,20,15,,13,,,,,,10,,8,,,,,8,20,8],[,1,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,],[1,1,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,13,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,13,,13]],[[,1,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,25,,,,25,,,25,,,,25,25,25,25,25],[1,1,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,13,,,,,,13,,,,,,,,13,,,,,,,,13,13,,13,,13,13,13,13,13,13,13]]],[0,1,2,2,3,3,2,2,4,4,5,6,6,7,2,2,3]];let currentNode=null,currentSong=null,currentBuffer=null;const renderSong=t=>new Promise(e=>requestIdleCallback(()=>e(zzfxM(...t)))),playSong=async t=>{currentNode&&currentNode.stop(),currentBuffer||(currentBuffer=await renderSong(song1)),currentNode=zzfxP(...currentBuffer),currentNode.loop=!0,zzfxX.suspend()},stopSong=async()=>{currentNode&&currentNode.stop(),await stopSong()};function play(){zzfxX=new AudioContext,zzfx(...[.2,,465,.01,.01,.06,4,2.63,2.6,-2,,,.03,1.2,18,.5,.16,.42,.04,.23]),zzfxM=(t,e,_,o=125)=>{let n,a,l,c,s,r,i,x,h,u,p,b,d,f,y,g=0,B=[],v=[],m=[],M=0,j=0,S=1,z={},P=zzfxR/o*60>>2;for(;S;M++)B=[S=x=p=d=0],_.map((o,p)=>{for(i=e[o][M]||[0,0,0],S|=!!e[o][M],y=d+(e[o][0].length-2-!x)*P,f=p==_.length-1,a=2,c=d;a<i.length+f;x=++a){for(s=i[a],h=a==i.length+f-1&&f||u!=(i[0]||0)|s|0,l=0;l<P&&x;l++>P-99&&h?b+=(b<1)/99:0)r=(1-b)*B[g++]/2||0,v[c]=(v[c]||0)-r*j+r,m[c]=(m[c++]||0)+r*j+r;s&&(b=s%1,j=i[1]||0,(s|=0)&&(B=z[[u=i[g=0]||0,s]]=z[[u,s]]||(n=[...t[u]],n[2]*=2**((s-12)/12),s>0?zzfxG(...n):[])))}d=y});return[v,m]},playSong(),setTimeout(function(){zzfxX.resume()},100),setTimeout(function(){game_running=!0},500),velx=0,vely=0,Ox=0,Oy=0,Life=100,document.getElementById("gameStartMSG").style.opacity="0",document.getElementById("gameStartMSG").style.display="block",setTimeout(function(){document.getElementById("gameStartMSG").style.opacity="1"},10),setTimeout(function(){document.getElementById("gameStartMSG").style.opacity="0"},2e3),setTimeout(function(){document.getElementById("gameStartMSG").style.display="none"},4e3),document.getElementById("gameMSG").style.opacity=0,setTimeout(function(){document.getElementById("gameMSG").style.display="none"},1e3),mainCounter=0}function pierde(){zzfx(...[1.5,,32,,.34,1.86,,0,9,,,,,.8,8,.1,,.44,.42,.32]),document.getElementById("gameMSG").style.display="block",document.getElementById("gameMSG").style.opacity=1,document.getElementById("gameMSG").innerHTML="<br><font style='font-size:30px; color:orange;'>Game Over<br><font style='font-size:35px; color:silver;'>"+parseInt(dist/100)+" mtrs<br></font><br><div class='blink_me' onclick='reset();' style='display:inline-block; text-align:center; padding:6px 20px 6px 20px; font-size:20px; color:#d3fc6f; font-weight:500; box-shadow: 0px 0px 10px 5px #86a145; border-radius:10px; border:3px solid #d3fc6f; background-color:rgba(0,0,0,0.5);'>try again</div><br><br>"}function reset(t){99==t&&(level=1,localStorage.setItem("localStorageJs13kbbola",level),changelevel(-1)),Buj=[],enemies(),Ox=0,Oy=0,Oz=0,OxIni=null,OyIni=null,OxIni=null,bx=500,by=700,bz=0,bw=100,bh=100,Life=100,velx=0,vely=0,posX=0,posY=0,OldposX=0,OldposY=0,posZ=0,tileW=70,tileH=70,offsetX=0,offsetY=0,holeID=-2,distX=0,distY=0,dist=0,dir=0,mainCounter=0,game_running=!0,document.getElementById("gameMSG").style.opacity=0,setTimeout(function(){document.getElementById("gameMSG").style.display="none"},1e3),document.getElementById("gameStartMSG").style.display="none",context.fillStyle="#000000",context.fillRect(0,0,CanvasSize,CanvasSize)}var oldvel=0;!function(t,e){var _;_=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame,t.requestAnimationFrame=_,function(){var t,e,o;t=1e3/fps,o=Date.now(),function n(){_(n),e=Date.now(),(elapsed=e-o)>t&&(o=e-elapsed%t,game_running&&g())}()}();var o=context.createLinearGradient(0,cHeight-150,0,cHeight);o.addColorStop(0,"transparent"),o.addColorStop(1,"black");var n=context.createLinearGradient(bx,by-bh/2,bx,by+bh/2);n.addColorStop(0,"rgb(120,120,120)"),n.addColorStop(.7,"rgb(50,50,50)"),n.addColorStop(1,"rgb(20,20,20)");var l=context.createLinearGradient(bx,by-bh/2,bx,by+5);l.addColorStop(0,"rgba(220,220,220,1)"),l.addColorStop(1,"rgba(220,220,220,0.1)");var s=context.createLinearGradient(0,-50,0,30);s.addColorStop(0,"rgba(220,220,220,.7)"),s.addColorStop(.5,"rgba(220,220,220,0)"),s.addColorStop(1,"rgba(220,220,220,.3)");var r=context.createLinearGradient(0,-60,0,60);r.addColorStop(0,"rgba(0,0,0,.6)"),r.addColorStop(1,"rgba(225,225,225,.6)");var i=context.createLinearGradient(0,-60,0,60);i.addColorStop(0,"rgba(225,225,225,.6)"),i.addColorStop(1,"rgba(0,0,0,.6)");var x=context.createLinearGradient(0,-45,0,45);x.addColorStop(0,"rgba(0,0,0,.3)"),x.addColorStop(1,"rgba(225,225,225,.3)");var h=[],u=[];for(a=1;a<7;a+=1){var p=(a>>>0).toString(2).padStart(3,"0"),b=140*p[2],d=140*p[1],f=140*p[0];h[a]=context.createLinearGradient(0,0,0,20),h[a].addColorStop(0,"rgb("+b+","+d+","+f+")"),h[a].addColorStop(.5,"rgb("+(b-40)+","+(d-40)+","+(f-40)+")"),h[a].addColorStop(1,"rgb("+(b-70)+","+(d-70)+","+(f-70)+")"),b=70*p[2],d=70*p[1],f=70*p[0],u[a]="rgb("+b+","+d+","+f+")",6==a&&(h[a+1]="black",u[a+1]="black")}var y=context.createLinearGradient(0,-30,0,20);function g(){if(mainCounter++,holeID>-2){if(offsetX=0,offsetY=0,velx=0,vely=0,holeID>-1&&2==Buj[holeID].st){if(mainCounter%20==1&&(bom.push({x:Buj[holeID].x,y:Buj[holeID].y,w:15,opa:.3,type:3}),bom.push({x:bx-posX,y:by-posY,w:5,opa:.3,type:3})),mainCounter%30==1){var t=Math.ceil(15*Math.random()*30),_=Math.ceil(Math.random()*cWidth)-bx,a=Math.ceil(Math.random()*(cHeight/2))-by;for(c=0;c<t;c++)ch.push({x:_,y:a,ancho:Math.ceil(10*Math.random())+10,dir:Math.floor(360*Math.random())+1,vel:Math.ceil(5*Math.random()*2),maxsteps:Math.ceil(5*Math.random())+60,steps:-1})}}else if(bw>1){if(holeID>-1&&Buj[holeID].st<3){var p=Buj[holeID].x-bx+posX,b=Buj[holeID].y-by+posY,d=Math.atan2(b,p);velx=.9*-Math.cos(d),vely=.9*-Math.sin(d)}else for(mainCounter%10==1&&bom.push({x:bx-posX,y:by-posY,w:5,opa:.3,type:1}),mainCounter%17==1&&bom.push({x:bx-posX,y:by-posY,w:5,opa:.3,type:2}),t=Math.ceil(15*Math.random()*5),c=0;c<t;c++)_=Math.ceil(Math.random()*bw-bw/2),a=Math.ceil(Math.random()*bw-bw/2),ch.push({x:_,y:a,ancho:Math.ceil(10*Math.random())+0,dir:Math.floor(360*Math.random())+1,vel:Math.ceil(5*Math.random())*(bw/30),maxsteps:Math.ceil(5*Math.random())+20,steps:5});bh-=.8,((bw-=.8)<1||bh<1)&&(bw=1,bh=1)}}else velx+=-Ox/30,vely+=-Oy/30,cursorLEFT&&(velx+=.53),cursorRIGHT&&(velx-=.53),cursorUP&&(vely+=.53),cursorDOWN&&(vely-=.53);vely+=-.05*Math.sign(vely),velx+=-.05*Math.sign(velx),Math.abs(velx)>30&&(velx=30*Math.sign(velx)),posX+=velx,Math.abs(vely)>30&&(vely=30*Math.sign(vely)),offsetX=posX%200-400,offsetY=(posY+=vely)%200-400,distX=-posX+bx-Buj[verde].x,distY=-posY+by-Buj[verde].y,-2==holeID&&Math.sqrt(posX*posX+posY*posY)>limite-15&&(holeID=-1,pierde()),dist=Math.sqrt(distX*distX+distY*distY),p=-distX,b=-distY;var f=Math.atan2(b,p);if((f=90+180*f/Math.PI)<0&&(f+=2*Math.PI),-2==holeID)for(var g=0;g<Buj.length;g++){if(Buj[g].st>=3&&Buj[g].st<100){var B=-posX+bx-Buj[g].x,v=-posY+by-Buj[g].y,m=Math.abs(B)+Math.abs(v),M=50-1.66*level;M<20&&(M=20),Buj[g].x+=100*B/m/M*Buj[g].vx,Buj[g].y+=100*v/m/M*Buj[g].vy,Buj[g].vx>2&&(Buj[g].vx-=.3),Buj[g].vx<2&&(Buj[g].vx+=.3),Buj[g].vy>2&&(Buj[g].vy-=.3),Buj[g].vy<2&&(Buj[g].vy+=.3)}var j;if(p=Buj[g].x-bx+posX,b=Buj[g].y-by+posY,0==Buj[g].st&&(j=Buj[g].r),2==Buj[g].st&&(j=Buj[g].r+bw/2),Buj[g].st>=3&&(j=Buj[g].r+bw/6),100==Buj[g].st&&(j=Buj[g].r+bw/2),Buj[g].st>=200&&(j=Buj[g].r+bw/2),p*p+b*b<j*j){if(Buj[g].st>=3){d=Math.atan2(b,p);var S=j-Math.sqrt(p*p+b*b)+(1.2*Buj[g].st-1);if(Buj[g].vx+=-Math.abs(S*Math.cos(d)/2),Buj[g].vy+=-Math.abs(S*Math.sin(d)/2),Buj[g].st<100&&(velx+=S*Math.cos(d),vely+=S*Math.sin(d)),100==Buj[g].st&&(velx+=S*Math.cos(d)/7,vely+=S*Math.sin(d)/7),Buj[g].st>=200&&(Buj[g].l>0?(Buj[g].l-=1,Buj[g].l<5&&(S=4*-S,setTimeout(function(){zzfx(...[1,,192,,.04,.02,4,.8,,,,,,.2,,.1,.2,.88,.04]),zzfx(1,.05,82,0,0,.21,4,0,0,0,0,0,0,0,0,0,0,1,0,0,0)},100),bom.push({x:p-bw/3*Math.cos(d)+bx-posX,y:b-bw/3*Math.sin(d)+by-posY,w:5,opa:.2,type:1}),bom.push({x:p-bw/3*Math.cos(d)+bx-posX,y:b-bw/3*Math.sin(d)+by-posY,w:5,opa:.2,type:2}))):(Buj[g].l=255,zzfx(...[1,,514,.76,.35,1.84,1,2.3,5,,,,,,29,,,.77,.21,,351])),200==Buj[g].st&&(velx-=S*Math.cos(d)/200,vely-=S*Math.sin(d)/200),300==Buj[g].st&&(velx+=S*Math.cos(d)/1e3,vely+=S*Math.sin(d)/1e3)),Buj[g].st<200){var z=S/10;for(z<.3&&(z=.3),z>2.5&&(z=2.5),100==Buj[g].st&&(z=1.7),100==Buj[g].st&&(Buj[g].l=255),bom.push({x:p-bw/3*Math.cos(d)+bx-posX,y:b-bw/3*Math.sin(d)+by-posY,w:1,opa:.2,type:1}),bom.push({x:p-bw/3*Math.cos(d)+bx-posX,y:b-bw/3*Math.sin(d)+by-posY,w:1,opa:.2,type:2}),t=Math.ceil(15*Math.random()*(S/2)),c=0;c<t;c++)ch.push({x:p-bw/3*Math.cos(d),y:b-bw/3*Math.sin(d),ancho:Math.ceil(10*Math.random())+1,dir:Math.floor(360*Math.random())+1,vel:Math.ceil(5*Math.random()*(S*S))/(3*S),maxsteps:Math.ceil(5*Math.random())+S,steps:0});setTimeout(function(){zzfx(...[z,,4e3,,.05,1,,.6,.2,,-250,.04,,.1,,,,.1,.26]),zzfx(z+1,.05,82,0,0,.21,4,0,0,0,0,0,0,0,0,0,0,1,0,0,0)},100)}}if(0==Buj[g].st&&(holeID=g,pierde()),2==Buj[g].st){zzfx(...[2.5,,202,.08,.91,1.89,1,2.7,-9,-14.8,150,.15,.07,.3,16,,,.54,.66]),changelevel(1),localStorage.setItem("localStorageJs13kbbola",level),e.getElementById("gameMSG").style.display="block",e.getElementById("gameMSG").style.opacity=1;var P="Next level: "+level,I="Continue",w="";level>=Levels.length&&(P="last level passed!",I="Start over",w="99"),e.getElementById("gameMSG").innerHTML="<br><font style='font-size:30px; color:lime;'>Congratulations!<br><font style='font-size:25px; color:white;'>"+P+"<br></font><br><div class='blink_me' onclick='reset("+w+");' style='display:inline-block; text-align:center; padding:6px 20px 6px 20px; font-size:20px; color:#d3fc6f; font-weight:500; box-shadow: 0px 0px 10px 5px #86a145; border-radius:10px; border:3px solid #d3fc6f; background-color:rgba(0,0,0,0.5);'>"+I+"</div><br><br>",holeID=g}}for(var X=g;X<Buj.length;X++)if(X!=g){var Y=Buj[g].x-Buj[X].x,C=Buj[g].y-Buj[X].y;if(Buj[g].st>=3&&Buj[g].st<100)var A=1.2*Buj[g].r;else A=1.4*Buj[g].r;if(Y*Y+C*C<A*A){var k=Math.atan2(C,Y),O=A-Math.sqrt(Y*Y+C*C);Buj[g].vx+=O*Math.cos(k)/18,Buj[X].x-=O*Math.cos(k)/1,Buj[g].vy+=O*Math.sin(k)/18,Buj[X].y-=O*Math.sin(k)/1}}}context.shadowBlur=0,context.fillStyle="#151515",context.fillRect(0,0,1,cHeight),context.globalAlpha=1,context.beginPath(),context.save(),context.fillStyle=patternSuelo,context.translate(posX,posY),context.fillRect(0-posX,0-posY,cWidth,cHeight,0,0,2*Math.PI),context.fill(),context.restore(),context.globalAlpha=1,context.globalAlpha=.18,context.strokeStyle="white",context.lineWidth=30,context.beginPath(),context.arc(posX+bx,posY+by,120,0,2*Math.PI),context.stroke(),context.fillStyle="white",context.textAlign="center",context.font="bold 60pt Arial",context.fillText("Level "+level,posX+bx,posY+by+210),context.globalAlpha=1,context.globalCompositeOperation="source-over",context.beginPath();var T=limite+150,L=limite;for(context.arc(posX+bx,posY+by,T,0,2*Math.PI),context.arc(posX+bx,posY+by,L,0,2*Math.PI,!0),context.save(),context.translate(posX+bx,posY+by),context.shadowColor="orange",context.shadowBlur=10,context.fillStyle=patternLava1,context.fill(),context.globalAlpha=Math.abs(Math.cos(mainCounter/25%360)),context.fillStyle=patternLava2,context.fill(),context.globalAlpha=Math.abs(Math.cos(mainCounter/30%360)),context.fillStyle=patternLava3,context.fill(),context.globalAlpha=1,context.restore(),g=0;g<Buj.length;g++)0==Buj[g].st&&(context.beginPath(),context.fillStyle="rgb(0,0,0)",context.ellipse(posX+Buj[g].x,posY+Buj[g].y,Buj[g].r,Buj[g].r,0,0,2*Math.PI),context.shadowColor="black",context.shadowBlur=20,context.shadowOffsetX=0,context.shadowOffsetY=0,context.fill(),context.beginPath(),context.shadowColor="white",context.shadowBlur=10,context.strokeStyle="rgb(50,50,50)",context.lineWidth=4,context.arc(posX+Buj[g].x,posY+Buj[g].y,60,Math.PI,0),context.stroke());for(g=0;g<Buj.length;g++)if(2==Buj[g].st){context.beginPath(),context.shadowColor="lime",context.shadowBlur=10*Math.abs(Math.cos(mainCounter/10%360))+5,context.fillStyle="green",context.ellipse(posX+Buj[g].x,posY+Buj[g].y,Buj[g].r,Buj[g].r,0,0,2*Math.PI),context.fill(),context.shadowBlur=2;var D=18,E=-10;context.beginPath(),context.fillStyle="black",context.fillRect(posX+Buj[g].x-27,posY+Buj[g].y-36+E,54,72,0,0,2*Math.PI),context.fill(),context.beginPath(),context.fillStyle="green",context.ellipse(posX+Buj[g].x,posY+Buj[g].y-28.8+E,1.45*D,19.8,0,0,2*Math.PI),context.fill(),context.beginPath(),context.fillStyle="black",context.ellipse(posX+Buj[g].x,posY+Buj[g].y+39.6+E,27,.6*D,0,0,2*Math.PI),context.fill(),context.lineWidth=3.6,context.strokeStyle="black",context.beginPath(),context.moveTo(posX+Buj[g].x-45,posY+Buj[g].y+28.8+E),context.lineTo(posX+Buj[g].x+45,posY+Buj[g].y+28.8+E),context.stroke(),context.beginPath(),context.moveTo(posX+Buj[g].x-45,posY+Buj[g].y+41.4+E),context.lineTo(posX+Buj[g].x,posY+Buj[g].y+28.8+E),context.stroke(),context.beginPath(),context.moveTo(posX+Buj[g].x+45,posY+Buj[g].y+41.4+E),context.lineTo(posX+Buj[g].x,posY+Buj[g].y+28.8+E),context.stroke(),context.beginPath(),context.fillStyle="rgb(177,42,52)",context.fillRect(posX+Buj[g].x-27,posY+Buj[g].y-7.2+E,54,1.9*D,0,0,2*Math.PI),context.fill(),context.beginPath(),context.fillStyle="silver",context.ellipse(posX+Buj[g].x-14.4,posY+Buj[g].y+14.4+E,.6*D,.6*D,0,0,2*Math.PI),context.fill(),context.beginPath(),context.fillStyle="silver",context.ellipse(posX+Buj[g].x+14.4,posY+Buj[g].y+14.4+E,.6*D,.6*D,0,0,2*Math.PI),context.fill(),context.beginPath(),context.fillStyle="black",context.ellipse(posX+Buj[g].x-14.4,posY+Buj[g].y+14.4+E,.15*D,.6*D,0,0,2*Math.PI),context.fill(),context.fillStyle="black",context.ellipse(posX+Buj[g].x+14.4,posY+Buj[g].y+14.4+E,.15*D,.6*D,0,0,2*Math.PI),context.fill(),context.beginPath(),context.fillStyle="silver",context.ellipse(posX+Buj[g].x,posY+Buj[g].y+27+E,.3*D,.3*D,0,0,2*Math.PI),context.fill(),context.shadowBlur=0,context.beginPath(),context.save(),context.translate(posX+Buj[g].x,posY+Buj[g].y),context.fillStyle=x,context.ellipse(0,0,Buj[g].r,Buj[g].r,0,0,2*Math.PI),context.fill(),context.restore()}for(context.beginPath(),context.shadowColor="black",context.shadowBlur=5,context.shadowOffsetX=0,context.shadowOffsetY=10,context.fillStyle="rgb(0,0,0)",context.ellipse(bx,by,bw/2,bh/2,0,0,2*Math.PI),context.fill(),context.shadowColor="none",context.shadowBlur=0,context.shadowOffsetX=0,context.shadowOffsetY=0,context.globalAlpha=1,g=0;g<Buj.length;g++)Buj[g].st>=3&&Buj[g].st<100&&(context.shadowColor="black",context.shadowBlur=5,context.shadowOffsetX=0,context.shadowOffsetY=10,context.save(),context.beginPath(),context.translate(posX+Buj[g].x,posY+Buj[g].y),context.fillStyle="red",context.ellipse(0,0,Buj[g].r/2,Buj[g].r/2,0,0,2*Math.PI),context.fill(),context.restore(),context.shadowColor="none",context.shadowBlur=0,context.shadowOffsetX=0,context.shadowOffsetY=0),100==Buj[g].st&&(context.shadowColor="rgba(0,0,0,.35)",context.shadowBlur=5,context.shadowOffsetX=0,context.shadowOffsetY=10,context.beginPath(),context.save(),context.translate(posX+Buj[g].x,posY+Buj[g].y),context.fillStyle="none",context.ellipse(0,0,Buj[g].r,Buj[g].r,0,0,2*Math.PI),context.fill(),context.restore(),context.globalAlpha=1,context.shadowColor="none",context.shadowBlur=0,context.shadowOffsetX=0,context.shadowOffsetY=0);for(g=0;g<Buj.length;g++){if(Buj[g].st>=3&&Buj[g].st<100){context.beginPath(),context.save(),context.translate(posX+Buj[g].x,posY+Buj[g].y),context.fillStyle=h[Buj[g].st-3],context.ellipse(0,0,Buj[g].r/2,Buj[g].r/2,0,0,2*Math.PI),context.fill(),context.restore();var G=Math.abs(Math.cos(mainCounter/10%360));context.globalAlpha=G,context.fillStyle=u[Buj[g].st-3],context.ellipse(posX+Buj[g].x,posY+Buj[g].y,Buj[g].r/2,Buj[g].r/2,0,0,2*Math.PI),context.fill(),context.globalAlpha=.7,context.beginPath(),context.save(),context.fillStyle=patternSuelo,context.translate(posX,posY),context.ellipse(Buj[g].x,Buj[g].y+15,Buj[g].r-33,Buj[g].r-48,0,0,2*Math.PI),context.fill(),context.restore(),context.globalAlpha=1,context.save(),context.beginPath(),context.translate(posX+Buj[g].x,posY+Buj[g].y),context.fillStyle=y,context.ellipse(0,-12,Buj[g].r-43,Buj[g].r-48,0,0,2*Math.PI),context.fill(),context.restore(),context.save(),context.beginPath(),context.fillStyle=patternLuces,context.translate(posX+Buj[g].x/20*19,posY+Buj[g].y/20*19-10),context.ellipse(Buj[g].x/20,Buj[g].y/20-5,Buj[g].r-42,Buj[g].r-45,0,0,2*Math.PI),context.fill(),context.restore()}var R;if(200==Buj[g].st&&((R=Buj[g].r-2*mainCounter%Buj[g].r)<1&&(R=1),context.save(),context.translate(posX+Buj[g].x,posY+Buj[g].y),context.strokeStyle="rgba(225,0,0,"+((120-(R-20))/150/2.2-.05)+")",context.lineWidth=10,context.beginPath(),context.arc(0,0,R,R,0,2*Math.PI),context.stroke(),context.globalAlpha=.15,context.beginPath(),context.fillStyle=r,context.ellipse(0,0,Buj[g].r,Buj[g].r,0,0,2*Math.PI),context.fill(),context.restore(),context.globalAlpha=1),300==Buj[g].st&&((R=2*mainCounter%Buj[g].r)>120&&(R=120),context.save(),context.translate(posX+Buj[g].x,posY+Buj[g].y),context.strokeStyle="rgba(0,255,0,"+((120-(R-20))/150/2.2-.08)+")",context.lineWidth=10,context.beginPath(),context.arc(0,0,R,R,0,2*Math.PI),context.stroke(),context.globalAlpha=.2,context.beginPath(),context.fillStyle=i,context.ellipse(0,0,Buj[g].r,Buj[g].r,0,0,2*Math.PI),context.fill(),context.restore(),context.globalAlpha=1),100==Buj[g].st){function W(t,e,_,o,n){context.save(),context.beginPath(),context.translate(t,e),context.moveTo(0,0-_);for(var a=0;a<o;a++)context.rotate(Math.PI/o),context.lineTo(0,0-_*n),context.rotate(Math.PI/o),context.lineTo(0,0-_);context.closePath(),context.fill(),context.restore()}context.shadowBlur=0,context.beginPath(),context.fillStyle="rgb("+Buj[g].l+",0,0)",Buj[g].l>0&&(Buj[g].l-=2.5),context.ellipse(posX+Buj[g].x,posY+Buj[g].y,Buj[g].r,Buj[g].r,0,0,2*Math.PI),context.fill(),context.beginPath(),context.fillStyle="rgb(150,150,120)",context.ellipse(posX+Buj[g].x,posY+Buj[g].y,Buj[g].r-16,Buj[g].r-16,0,0,2*Math.PI),context.fill(),context.fillStyle="rgb(100,20,20)",W(posX+Buj[g].x,posY+Buj[g].y,49,11,1.3),context.beginPath(),context.fillStyle="rgb(150,150,120)",context.ellipse(posX+Buj[g].x,posY+Buj[g].y,Buj[g].r-50,Buj[g].r-50,0,0,2*Math.PI),context.fill(),context.beginPath(),context.fillStyle="rgb(60,60,100)",context.ellipse(posX+Buj[g].x,posY+Buj[g].y,Buj[g].r-66,Buj[g].r-66,0,0,2*Math.PI),context.fill(),context.save(),context.beginPath(),context.translate(posX+Buj[g].x,posY+Buj[g].y),context.fillStyle=s,context.ellipse(0,0,65,65,0,0,2*Math.PI),context.fill(),context.restore(),context.beginPath(),context.shadowColor="white",context.shadowBlur=3,context.lineWidth=2,context.strokeStyle="rgba(255,255,255,0.2)",context.beginPath(),context.arc(posX+Buj[g].x,posY+Buj[g].y,64,0,Math.PI),context.stroke(),context.shadowColor="black",context.shadowBlur=0}}for(context.globalAlpha=bw/100,context.fillStyle=n,context.beginPath(),context.ellipse(bx,by,bw/2,bh/2,0,0,2*Math.PI),context.fill(),bw>20&&bh>70&&(context.beginPath(),context.save(),context.fillStyle=patternSuelo,context.translate(posX,posY+5),context.ellipse(bx-posX-0,by-posY+15,bw/2-10,bh/2-25,0,0,2*Math.PI),context.fill(),context.restore(),context.fillStyle=l,context.beginPath(),context.ellipse(bx,by-14,bw/2-17,bh/2-20,0,0,2*Math.PI),context.fill(),context.beginPath(),context.save(),context.fillStyle=patternLuces,context.translate(posX/30,posY/30-10),context.ellipse(bx-posX/30,by-posY/30-10,bw/2-16,bh/2-25,0,0,2*Math.PI),context.fill(),context.restore()),context.globalAlpha=1,context.fillStyle=o,context.fillRect(0,cHeight-150,cWidth+1,cHeight),g=0;g<bom.length;g++)bom[g]&&(bom[g].opa>=0?(context.globalAlpha=bom[g].opa,context.beginPath(),context.save(),context.translate(posX,posY),1==bom[g].type&&(context.strokeStyle="orange",context.lineWidth=20,bom[g].opa-=.015,bom[g].w+=15),2==bom[g].type&&(context.strokeStyle="cyan",context.lineWidth=60,bom[g].opa-=.02,bom[g].w+=5),3==bom[g].type&&(context.strokeStyle="lime",context.lineWidth=100,bom[g].opa-=.02,bom[g].w+=5),context.arc(bom[g].x,bom[g].y,bom[g].w,0,2*Math.PI),context.stroke(),context.restore()):bom.splice(g,1));for(context.globalAlpha=.7,context.lineWidth=5,g=0;g<ch.length;g++)if(ch[g]){context.beginPath(),context.strokeStyle="rgba(255,"+(255-8*ch[g].steps)+",0,"+(255-ch[g].maxsteps/100)+")";var H=ch[g].steps/50*20;context.moveTo(ch[g].x+bx,ch[g].y+by),context.lineTo(bx+ch[g].x+Math.cos(ch[g].dir*Math.PI/180)*ch[g].ancho,by+ch[g].y+Math.sin(ch[g].dir*Math.PI/180)*ch[g].ancho+H),context.stroke(),ch[g].x+=ch[g].vel*Math.cos(ch[g].dir*Math.PI/180),ch[g].y+=ch[g].vel*Math.sin(ch[g].dir*Math.PI/180)+H,ch[g].steps++,ch[g].steps>=ch[g].maxsteps&&ch.splice(g,1)}context.globalAlpha=1,context.fillStyle="silver",context.textAlign="center",context.font="bold 40pt Arial",context.fillText(parseInt(dist/100)+" mtrs",500,1400),context.globalAlpha=1,dist>700&&(context.fillStyle="lime",context.save(),context.translate(bx,by),context.rotate(f*Math.PI/180),context.translate(-20,-450),G=Math.abs(Math.tan(mainCounter/10%360)),context.globalAlpha=G/5+.1,context.beginPath(),context.moveTo(16,0),context.lineTo(0,40),context.lineTo(32,40),context.closePath(),context.fill(),context.translate(0,45),G=Math.abs(Math.cos(mainCounter/10%360)),context.globalAlpha=G/5+.2,context.beginPath(),context.moveTo(16,0),context.lineTo(0,40),context.lineTo(32,40),context.closePath(),context.fill(),context.translate(0,45),G=Math.abs(Math.sin(mainCounter/10%360)),context.globalAlpha=G/5+.1,context.beginPath(),context.moveTo(16,0),context.lineTo(0,40),context.lineTo(32,40),context.closePath(),context.fill(),context.restore()),context.globalAlpha=1}y.addColorStop(0,"rgba(220,220,220,.7)"),y.addColorStop(1,"rgba(220,220,220,.1)");var B=new Image;B.src="sprites.png?v="+Date(),B.onload=function(){var t=e.createElement("canvas"),_=t.getContext("2d");PattenSize=60,t.width=PattenSize,t.height=PattenSize,_.drawImage(B,0,0,18,18,0,0,PattenSize,PattenSize),patternSuelo=context.createPattern(t,"repeat"),PattenSize=60,t.width=PattenSize,t.height=PattenSize,_.clearRect(0,0,canvas.width,canvas.height),_.globalAlpha=.1,_.shadowColor="white",_.shadowBlur=30,_.shadowOffsetX=0,_.shadowOffsetY=0;for(var o=0;o<4;o++)_.beginPath(),_.fillStyle="rgb(255,255,255)",_.ellipse(20,20,5,5,0,0,2*Math.PI),_.fill();patternLuces=context.createPattern(t,"repeat"),_.globalAlpha=1,PattenSize=100,t.width=PattenSize,t.height=PattenSize,_.drawImage(B,19,0,19,19,0,0,PattenSize,PattenSize),patternLava1=context.createPattern(t,"repeat"),_.drawImage(B,38,0,19,19,30,30,PattenSize,PattenSize),patternLava2=context.createPattern(t,"repeat"),_.drawImage(B,57,0,19,19,60,60,PattenSize,PattenSize),patternLava3=context.createPattern(t,"repeat"),g()}}(this,this.document),resize();var Ay,Az,AcelX,AcelY,AcelZ,Ox=0,Oy=0,OxIni=null,OyIni=null,OzIni=null,MAX_AcelX=0,MAX_AcelY=0,MAX_AcelZ=0;function resetXYZ(){Ox=0,Oy=0,Oz=0,OxIni=null,OyIni=null,OzIni=null,velX=0,velY=0}for(var Ax=0;Ax<=360;Ax++){var opa=0,tramo=80,resto=Ax%tramo;opa=resto<tramo/2?100/(tramo/2)*resto:100-(100/(tramo/2)*resto-100);var recalc=Math.sin(opa).toFixed(2)}window.addEventListener("devicemotion",handleMotionEvent);try{function handleMotionEvent(t){AcelX=t.acceleration.x.toFixed(2),AcelY=t.acceleration.y.toFixed(2),AcelZ=t.acceleration.z.toFixed(2),Math.abs(AcelX)>Math.abs(MAX_AcelX)&&(MAX_AcelX=AcelX),Math.abs(AcelY)>Math.abs(MAX_AcelY)&&(MAX_AcelY=AcelY),Math.abs(AcelZ)>Math.abs(MAX_AcelZ)&&(MAX_AcelZ=AcelZ)}}catch(t){}function handleOrientation(t){null!=t.gamma&&(OxIni||(OxIni=t.gamma),Ox=t.gamma-OxIni,Ax=Ox.toFixed(2)),null!=t.beta&&(OyIni||(OyIni=t.beta),Oy=t.beta-OyIni,Ay=Oy.toFixed(2)),null!=t.alpha&&(OzIni||(OzIni=t.alpha),Oz=t.alpha-OzIni,Az=Oz.toFixed(2))}function start(){"function"==typeof DeviceMotionEvent.requestPermission&&DeviceMotionEvent.requestPermission().then(t=>{"granted"===t?window.addEventListener("deviceorientation",handleOrientation):alert("Request to access the orientation was rejected")}).catch(console.error)}"function"!=typeof DeviceMotionEvent.requestPermission&&(window.addEventListener("deviceorientation",handleOrientation),document.getElementById("startDiv").style.display="none")</script>