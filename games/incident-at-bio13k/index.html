<meta name="monetization" content="$twitter.xrptipbot.com/remvst"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1.01"><title>Incident at BIO13K</title><style>*{margin:0;width:100%;height:100%;position:relative;touch-action:none;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}body{background:#000}#t{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}#g{display:block}</style><div id="t"><canvas id="g"></canvas></div><script>let p,$,aI,_f,C,_,m,screen,ac,_e,au,fW,cB,w=window,X=0,cD=0,cC={x:0,y:0},_m=navigator.userAgent.match(/andro|ipho|ipa|ipo/i)?1:0;aH=((t,i,e)=>i<t?t:i>e?e:i),_r=((t,i,e)=>t<=i&&i<=e||t>=i&&i>=e),A=((t,i)=>random()*(i-t)+t),_F=((t,i,e,s)=>sqrt((t-e)**2+(i-s)**2)),W=((t,i)=>_F(t.x,t.y,i.x,i.y)),_l=(t=>gk(t,PI)),_b=((t,i)=>atan2(i.y-t.y,i.x-t.x)),gj=((t,i)=>round(t/i)*i),ar=(t=>t[~~(random()*t.length)]),gk=((t,i)=>((t%=2*i)>i&&(t-=2*i),t<-i&&(t+=2*i),t));let ee=Math;Object.getOwnPropertyNames(ee).forEach(t=>w[t]=w[t]||ee[t]),ab=2*PI,gi=((t,i)=>{if(!p)return;let e=p.getBoundingClientRect();i.x=(t.pageX-e.left)/e.width*800,i.y=(t.pageY-e.top)/e.height*600}),onmousemove=(t=>{_m=0,gi(t,cC)}),onmousedown=(()=>{_m=0,fW=document.hasFocus()}),onmouseup=(()=>fW=0);let bR,_S={},aq={};ontouchstart=(t=>{t.preventDefault(),_m=1,bR=1,aq.x=_S.x=t.touches[0].pageX,aq.y=_S.y=t.touches[0].pageY}),ontouchmove=(t=>{t.preventDefault(),_S.x=t.touches[0].pageX,_S.y=t.touches[0].pageY}),ontouchend=(t=>{t.preventDefault(),bR=0});let cA={};onkeydown=(t=>{if(cA[t.keyCode]=1,!(screen instanceof bQ)){if(27!==t.keyCode&&80!==t.keyCode||(_e=!_e),84===t.keyCode&&screen instanceof cz){gh((cD?"I helped K-31 escape the lab by ":"I caused K-31 to be contained by ")+cw(X))}if(73===t.keyCode&&screen instanceof bd&&!_e){if(!ec())return void alert("This feature is only available to coil subscribers");screen=new bQ,au=!au,setTimeout(()=>{screen=new bd},1e3)}}}),onkeyup=(t=>cA[t.keyCode]=0),gg=(()=>{ac=cA[70],fW&&(_e=1),m&&(m.o.x=cC.x+C.x,m.o.y=cC.y+C.y,m.aG=fW?1:.25)}),gf=(()=>{if(ac=0,m)if(bR){_e=1;let t=_b(aq,_S),i=W(aq,_S)/150;i<.2&&(i=0),m.o.x=m.head.position.x+100*cos(t),m.o.y=m.head.position.y+100*sin(t),m.aG=i}else m.o.x=m.head.position.x,m.o.y=m.head.position.y}),ge=(()=>{for(let t of navigator.getGamepads())if(t){let i=atan2(t.axes[1],t.axes[0]),e=1*_F(0,0,t.axes[0],t.axes[1])/4;e<.2?e=0:t.buttons[0]&&t.buttons[0].pressed&&(e=1),m&&(m.o.x=m.head.position.x+100*cos(i),m.o.y=m.head.position.y+100*sin(i),m.aG=e),_e=_e||t.buttons[0]&&t.buttons[0].pressed,ac=t.buttons[3]&&t.buttons[3].pressed}}),gd=(()=>{if(cB=0,navigator.getGamepads)for(let t of navigator.getGamepads())if(t){if(cB=1,2===_m)return;for(let i of t.buttons)if(i.pressed)return void(_m=2);for(let i of t.axes)if(abs(i)>.5)return void(_m=2)}}),gc=(()=>{gd(),bP(gg,gf,ge)()}),oncontextmenu=(t=>{fW=0,t.preventDefault()}),bP=((t,i,e)=>{switch(_m){case 0:return t;case 1:return i;case 2:return e}});class bO{g$(){return new Promise((t,i)=>{this.resolve=t,this.reject=i})}}eb=(async t=>{fW=0,screen=t,await timeout(3),screen._k=[],await timeout(1)}),bN=(t=>eb(new ea(t))),O=(t=>(X+=120,bN([cw(X),t]))),_j=(async(t,i)=>{fW=0,screen=_,_.bc=t,_.bb=i,m.bM(),await screen.g$(),screen.bb=(()=>0),screen.bc=0}),fZ=(async()=>{try{_._q(1),m.head.position.x=_._R.fY,m.head.position.y=_._R.fX,await bN(["Endless Mode","(Coil subscribers only)"]),await bN(["Absorb as many humans as you can"]);let t=0;for(;;){t++;for(let i of _.fU()){i.D(_a,~~A(1,3));let e=aH(0,t-.4,4);i.D(_E,~~A(0,e));let s=aH(0,t-.8,4);i.D(_E,~~A(0,s))}let i=_.add(_._R.a_);await _j(0,()=>!_._p([i]))}}catch(t){console.error(t),await O("K-31 is contained"),await O("Absorbed humans: "+m.cu)}}),fQ=(async()=>{try{await bN(["August 13th 2022","BIO13K research lab"]),await O("Specimen K-31 is held in containment"),await _j(0===_m?"Use mouse to move":1===_m?"Touch screen to move":"Use left joystick to move",()=>m.e_>500),await timeout(2);{_._q(2);let t=_.add(_.e$.a_);await O("K-31 escapes containment cell"),await _j(0,()=>!_._p([t])),_._q(3),await timeout(2)}{let t=_.ct.D(fO,2);await O(`Janitorial team #${1+~~(10*random())} encounters specimen`),await _j("Move towards humans to interact with them",()=>!_._p(t)),await timeout(2),await O("K-31 shows significant increase in body mass")}await O("K-31 starts moving faster"),await _j(0===_m?"Hold [CLICK] to dash":1===_m?"Drag joystick further to dash":"Hold [A] to dash",()=>m.dZ>500),await timeout(2);{let t=_.ct.D(_a,2),i=t[0].ap+" and "+t[1].ap.slice(7);await O(i+" notice the incident"),await _j(0,()=>!_._p(t)),await timeout(2),await O(i+" are removed from payroll")}{_._q(4);let t=_.add(_.dX.a_);await O("K-31 escapes initial containment lab"),await _j(0,()=>!_._p([t])),_._q(5),_.b_.D(_a,2),_.fM.D(_a,2),_.fL.D(_a,2),_.fK.D(_a,2)}{let t=_.add(_.dW.a_);await _j(0,()=>!_._p([t]))}{_._q(6);let t=_.dV.D(_E,3);await O("Initial security team is dispatched"),await _j(0,()=>!_._p(t)),await timeout(2),await O("Security team is terminated by K-31"),await O("Shooting K-31 seems to decrease its body mass")}{_._q(7),_.fF.D(_a,1),_.fE.D(_a,1),_.bK.D(_E,3),_.dU.D(_E,4),_._Q.D(_E,3),_._Q.D(_a,4);let t=_.add(_.dT.a_);await _j(0,()=>!_._p([t])),_._q(8)}{let t=_.bJ.D(b$,5);_.bJ.D(_a,4),await O("Emergency response team is dispatched"),await _j("Eliminate emergency response team",()=>!_._p(t)),await timeout(2),await O("Emergency response team terminated"),_._q(9)}{let t=_.add(_.dS.a_);await O("K-31 continues to progress through the building"),await _j(0,()=>!_._p([t])),_._q(10)}{_.cq.D(_a,4),_.bI.D(b$,2),_.bI.D(_E,2),_.dR.D(_a,3),_.bH.D(_a,3),_.bH.D(_E,3),_.bH.D(b$,4),_.cp.D(_E,2),_.cp.D(_a,2),_.ao.D(_a,5),_.ao.D(b$,6);let t=_.add(_.dQ.a_);await _j(0,()=>!_._p([t])),await O("K-31 reaches the top floor"),_._q(11)}{_.dP.D(_a,5),_.bG.D(b$,5),_.bG.D(_E,5),_.bG.D(_a,6);let t=_.add(_.fB.a_);await _j(0,()=>!_._p([t])),cD=1}let t=parseFloat(localStorage.bt)||Number.MAX_SAFE_INTEGER;localStorage.bt=min(t,X),await O("K-31 location lost")}catch(t){console.error(t),await O("K-31 is contained")}await O("Human casualties: "+m.cu),await O("BIO13K CEO Andre Matur announces new round of hiring"),_e=0,await eb(new cz)}),fA=(async()=>{for(;;)screen=new bQ,await new Promise(t=>setTimeout(t,2e3)),X=23040,aF=[],cD=0,(_=new fz)._q(1),(m=new fw).head.resolve(),m.head.aY(),_.add(m),C.G(10),_e=0,screen=new bd,await timeout(1),au?await fZ():await fQ()}),fv=(t=>Array(t).fill(0)),cw=(t=>{let i=dO(t);return`${aE(i.bE,2)}:${aE(i.bD,2)}`}),dO=(()=>{let t=X,i=~~(t/3600),e=~~((t-=3600*i)/60),s=~~(t-=60*e);return{bE:i,bD:e,co:s,dN:t-=s}}),gh=(t=>{open("//twitter.com/intent/tweet?hashtags=js13k&url="+location+"&text="+encodeURIComponent(t))}),onresize=(()=>{let i,e,s=innerWidth,h=innerHeight,a=s/h,o=800/600,l=t.style;a<=o?e=(i=s)/o:i=(e=h)*o,l.width=i+"px",l.height=e+"px"}),ft=(t=>t),gz=(t=>t*(2-t)),gy=(t=>1+--t*t*t*t*t),gx=(t=>t*t*t*t*t),gw=(t=>t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1),bA=((t,i,e,s,h,a,o,l)=>{let n=0,r={G:f=>{let d=aH(0,((n+=f)-(a||0))/h,1);t[i]=(o||ft)(d)*(s-e)+e,d>=1&&(_._u(r),l&&l())},N:()=>{}};_.elements.push(r)}),aE=((t,i)=>{for(t=t.toString();t.length<i;)t="0"+t;return t}),aF=[],timeout=(t=>new Promise(i=>{aF.push({resolve:i,X:X+t}),aF.sort((t,i)=>t.X-i.X)})),fn=(()=>{for(;aF.length&&aF[0].X<X;){aF.shift().resolve()}}),CanvasRenderingContext2D.prototype.F=function(t){this.save(),t(),this.restore()};let aX=(t,i,e)=>{let s=document.createElement("canvas");return s.width=t,s.height=i,e(s.getContext("2d"),s)||s};bz=((t,i,e)=>{let s=aX(t,i,e),h=s.getContext("2d").createPattern(s,"repeat");return h.width=t,h.height=i,h}),fm=bz(50,50,t=>{t.fillStyle="#333",t.fillRect(0,0,50,50),t.fillStyle="#222",t.fillRect(1,1,48,48)}),fl=bz(1,2,t=>{t.globalAlpha=.2,t.fillStyle="#fff",t.fillRect(0,0,1,1),t.fillStyle="#000",t.fillRect(0,1,1,1)});class cl{constructor({x:t,y:i,aD:e=1,_i:s="#f00",_v:h=[5,5],a$:a=[1,-1],dD:o}){this._i=s,this._v=h,bA(this,"x",t[0],t[0]+t[1],e),bA(this,"y",i[0],i[0]+i[1],e),bA(this,"a$",a[0],a[0]+a[1],e),bA(this,"_v",h[0],h[0]+(h[1]||0),e,0,0,()=>{_._u(this),o&&o()})}G(){}N(){$.globalAlpha=this.a$,$.fillStyle=this._i,$.fillRect(this.x-this._v/2,this.y-this._v/2,this._v,this._v)}}dC=bz(400,400,t=>{t.fillStyle="#fff";for(let i=0;i<50;i++){t.globalAlpha=random();let i=A(20,50);t.fillRect(random()*(400-i),400*random(),i,2)}}),ck=aX(600,600,(t,i)=>{let e=t.createRadialGradient(i.width/2,i.height/2,0,i.width/2,i.height/2,i.width);e.addColorStop(0,"rgba(0, 0, 0, 0)"),e.addColorStop(.5,"rgba(0, 0, 0, 0)"),e.addColorStop(1,"rgba(0, 0, 0, 0.8)"),t.fillStyle=e,t.fillRect(0,0,i.width,i.height)}),fk=(()=>{Date.now()%1e3<500&&$.translate(0,A(-1,1)),ac&&$.translate(0,A(-3,3))}),dB=(()=>{if($.globalAlpha=1,Date.now()%6e3<200)for(let t=0;t<800;t+=20)$.drawImage(p,0,t,800,10,40,t,800,10)}),fj=(()=>{let t=~~(Date.now()/20);$.F(()=>{$.fillStyle=fl,$.fillRect(0,0,800,600),$.globalAlpha=.2,$.fillStyle="#fff",$.globalAlpha=.03,$.fillRect(0,Date.now()%1e4/1e4*750-150,800,150),Date.now()%6e3<200&&dB()});let i=~~(400*sin(t)),e=~~(400*cos(t));$.F(()=>{$.translate(i,e),$.globalAlpha=.1,$.fillStyle=dC,$.fillRect(-i,-e,800,600)}),cj(0),$.drawImage(ck,0,0,ck.width,ck.height,0,0,800,600)}),cj=(t=>{$.F(()=>{$.globalAlpha=.2;for(let i=0;i<2;i++)for(let e=0;e<25;e++){let e=400*random(),s=400*random();$.F(()=>{$.translate(e,s+i),$.fillStyle=dC,$.fillRect(-e,t-s,800,4)})}})});class ea extends bO{constructor(t){super(),this._k=t}G(){}N(){$.fillStyle="#000",$.fillRect(0,0,800,600),$.F(()=>{$.font="18pt Courier",$.textAlign="center",$.textBaseline="middle",$.fillStyle="#fff";let t=300-this._k.length/2*30;for(let i of this._k)$.fillText(i,400,t),t+=30})}}class cz extends ea{constructor(){super(["Thanks for playing"])}}class bd extends bO{constructor(){super(),this.fh=Date.now()}G(){}N(){let t=(Date.now()-this.fh)/1e3,i=min(1,t/.3);i>0&&($.translate(0,600*sin(t*ab*10)*(1-i)),dB()),$.fillStyle=au?"#008000":"#0018b0",$.fillRect(0,0,800,600),$.F(()=>{$.font="bold 48pt Courier",$.textAlign="center",$.textBaseline="middle";let t=au?["INFINITE MODE","BONUS TAPE"]:["INCIDENT","AT BIO13K"],i=au?"Confidential - for Coil subscribers only":"A confidential 13KB tape by @remvst",e=300-t.length/2*50;for(let i of t)$.fillStyle="#000",$.fillText(i,400,e+8),$.fillStyle="#fff",$.fillText(i,400,e),e+=50;$.font="12pt Courier",$.fillStyle="#000",$.fillText(i,400,e+2),$.fillStyle="#fff",$.fillText(i,400,e)}),$.F(()=>{let t=parseFloat(localStorage.bt);$.font="8pt Courier",$.textAlign="left",$.textBaseline="bottom",$.fillStyle="#fff",$.shadowColor="#000",$.shadowOffsetY=2,$.fillText("Fastest escape: "+(isNaN(t)?"none yet":cw(t)),10,590),$.textAlign="right",$.fillText(cB?"Gamepad detected":"No gamepad detected",790,590)})}}fg=bz(100,100,t=>{t.fillStyle="#000",t.fillRect(0,0,100,100),t.fillStyle="#fff";for(let i=0;i<100;i++)for(let e=0;e<100;e++)t.globalAlpha=random(),t.fillRect(i,e,1,1)});class bQ extends bO{constructor(){super()}G(){}N(){$.fillStyle="#0018b0",$.fillRect(0,0,800,600),$.fillStyle=fg;$.F(()=>{let t=~~(100*random()),i=~~(100*random());$.scale(4,4),$.translate(t,i),$.fillRect(-t,-i,200,150)})}}let ff=1;class Node{constructor(t){this.id=`n[${ff++}]`,this.position={x:0,y:0},this.bx={x:0,y:0},this.Z={x:0,y:0},this.M=25,this.Y=35,this._t=Node.aW,this.V=-Math.PI/4,this.U=Math.PI/4,this.dw=(()=>0),this.children=[],t&&(this.parent=t,this.parent.children.push(this)),this.am=t?dv("#fff"):()=>{}}static aW(t){return t[~~(t.length/2)]}static aC(t){return t[0]}static gv(t){return t[t.length-1]}get g(){return this.parent?_l(_b(this.position,this.parent.position)):0}fe(){if(!this.parent)return 0;let t=W(this.position,this.parent.position);return!_r(this.M,t,this.Y)}fd(){if(!this.parent)return 0;let t=this.parent.g;if(0===t)return 0;let i=_l(this.g-t);return _r(_l(this.V),i,_l(this.U))?void 0:1}fc(){}fb(){let t=_b(this.position,this.parent.position),i=(this.M+this.Y)/2,e=this.parent.position.x-i*Math.cos(t),s=this.parent.position.y-i*Math.sin(t);this.position.x=e,this.position.y=s,this.children.forEach(t=>t.fc())}fa(){let t=W(this.position,this.parent.position),i=this.parent.g,e=(this.V+this.U)/2,s=_l(i+e),h=_l(i+this.V),a=_l(i+this.U),o={x:this.parent.position.x+Math.cos(h+Math.PI)*t,y:this.parent.position.y+Math.sin(h+Math.PI)*t},l={x:this.parent.position.x+Math.cos(a+Math.PI)*t,y:this.parent.position.y+Math.sin(a+Math.PI)*t},n={x:this.parent.position.x+Math.cos(s+Math.PI)*t,y:this.parent.position.y+Math.sin(s+Math.PI)*t},r=_l(this.g-i),_=[o,l,n].sort((t,e)=>{let s=_l(_b(t,this.parent.position)-i)-r,h=_l(_b(e,this.parent.position)-i)-r;return Math.abs(s)-Math.abs(h)}),f=this._t(_);this.position.x=f.x,this.position.y=f.y}eV(){if(this.eU)return;let{x:t,y:i}=this.position,e=_.eT(t,i,15);e&&(this.eS&&_._B(e.x,e.y)?(this.position.x=this.bx.x,this.position.y=this.bx.y):(this.position.x=e.x,this.position.y=e.y),this.dw())}resolve(){this.fe()&&this.fb(),this.fd()&&this.fa(),this.eV()}aY(){this.Z.x=this.position.x,this.Z.y=this.position.y;for(let t of this.children)t.aY()}G(t){let i=_b(this.Z,this.position),e=.2*W(this.Z,this.position);this.Z.x+=e*Math.cos(i),this.Z.y+=e*Math.sin(i),this.resolve(),this.bx.x=this.position.x,this.bx.y=this.position.y;for(let i of this.children)i.G(t)}N(){for(let t of this.children)$.F(()=>t.N());$.F(()=>this.am(this))}bv(){for(let t of this.children)$.F(()=>t.bv());$.F(()=>this.am(this,"#000",2,2))}gu(){$.F(()=>{$.translate(this.position.x,this.position.y),$.fillStyle="#fff",this.parent&&($.lineWidth=2,$.strokeStyle="#fff",$.beginPath(),$.moveTo(0,0),$.lineTo(this.parent.position.x-this.position.x,this.parent.position.y-this.position.y),$.stroke());let{g:t}=this;if(t){let t=30;$.lineWidth=2,$.strokeStyle="#f00",$.beginPath(),$.moveTo(0,0),$.lineTo(cos(this.g)*t,sin(this.g)*t),$.stroke(),$.F(()=>{if(!this.parent||!this.parent.parent)return;this.parent.g;$.lineWidth=2,$.strokeStyle="#0f0",$.beginPath(),$.moveTo(0,0),$.lineTo(Math.cos(this.U+this.parent.g)*t,Math.sin(this.U+this.parent.g)*t),$.moveTo(0,0),$.lineTo(Math.cos(this.V+this.parent.g)*t,Math.sin(this.V+this.parent.g)*t),$.stroke()})}$.fillStyle="#fff",$.font="12pt Arial",$.textAlign="left",$.textBaseline="bottom",$.fillText(this.id,0,-10)})}*_X(){yield this;for(let t of this.children)for(let i of t._X())yield i}get bu(){return this.parent?this.parent.bu+1:0}}function dv(t,i=5,e="round"){return(s,h,a=0,o=0)=>{let l=_r(C.x,s.Z.x,C.x+800)||_r(C.x,s.parent.Z.x,C.x+800),n=_r(C.y,s.Z.y,C.y+600)||_r(C.y,s.parent.Z.y,C.y+600);l&&n&&($.strokeStyle=h||t,$.lineWidth=i,$.lineCap=e,$.beginPath(),$.moveTo(s.parent.Z.x+a,s.parent.Z.y+o),$.lineTo(s.Z.x+a,s.Z.y+o),$.stroke())}}function eR(t,i){return(e,s,h=0,a=0)=>{let o=_r(C.x-i,e.Z.x,C.x+i+800),l=_r(C.y-i,e.Z.y,C.y+i+600);o&&l&&($.fillStyle=s||t,$.beginPath(),$.arc(e.Z.x+h,e.Z.y+a,i,0,2*Math.PI),$.fill())}}class fz extends bO{constructor(){super(),this.elements=[],this.cc=new Set,C=new eQ,_=this,this.bb=(()=>0)}gt(t,i){for(;this._B(t,i);)t+=50,i+=50;return{x:t,y:i}}dn(t,i){this.cc.add(`${t},${i}`)}eP(t,i){this.cc.delete(`${t},${i}`)}ak(t,i){return!this.cc.has(`${t},${i}`)}_B(t,i){return this.ak(Math.floor(i/50),Math.floor(t/50),0)}eT(t,i,e){let s=t-e,h=t+e,a=i-e,o=i+e,l=this._B(t,i),n=this._B(s,i),r=this._B(h,i),_=this._B(t,a),f=this._B(t,o);if(!(l||n||r||_||f))return 0;let d=floor(i/50),c=floor(t/50),p={x:t,y:i};return n&&(p.x=50*c+e),r&&(p.x=50*(c+1)-e),_&&(p.y=50*d+e),f&&(p.y=50*(d+1)-e),p}add(t){return this.elements.push(t),t}eN(t){return t.forEach(t=>this.di(t)),t}di(t){this.elements.unshift(t)}_u(t){let i=this.elements.indexOf(t);i>=0&&this.elements.splice(i,1)}G(t){for(let i of this.elements)i.G(t);C.G(t),this.bb()&&this.resolve()}N(){$.F(()=>{$.translate(-C.x,-C.y),$.fillStyle=fm,$.fillRect(C.x,C.y,800,600);for(let t of this.elements)t instanceof bs&&$.F(()=>t.bv());for(let t of this.elements)$.F(()=>t.N());$.fillStyle="#111";for(let[t,i]of this.cb())this.dh(t,i);$.fillStyle="rgba(0, 0, 0, 0)",$.lineWidth=1,$.strokeStyle="#666";for(let[t,i]of this.cb())this.dh(t,i);$.fillStyle="#000",$.strokeStyle="rgba(255,255,255, 0.1)",$.strokeStyle="rgba(255,255,255, 0)";for(let[t,i]of this.cb())this.eM(t,i);$.F(()=>m.eL())}),$.F(()=>{$.fillStyle="#fff",$.globalAlpha=1,$.font="24pt Courier",$.textAlign="right",$.textBaseline="bottom";let t=dO(X);$.fillText(`${aE(t.bE,2)}:${aE(t.bD,2)}:${aE(t.co,2)}.${aE(~~(1e3*t.dN),3)}`,765,565),$.textAlign="left",$.textBaseline="top",$.fillText("REC",35,35),X%4>1&&$.F(()=>{$.fillStyle="#900",$.beginPath(),$.arc(35+$.measureText("REC").width+15,50,10,0,ab),$.fill()}),$.fillRect(20,20,50,4),$.fillRect(20,20,4,50),$.fillRect(20,580,50,-4),$.fillRect(20,580,4,-50),$.fillRect(780,20,-50,4),$.fillRect(780,20,-4,50),$.fillRect(780,580,-50,-4),$.fillRect(780,580,-4,-50),this.bc&&_e&&($.textAlign="center",$.textBaseline="top",$.font="12pt Courier",$.fillText(this.bc.toUpperCase(),400,500));for(let t of this.elements)if(t instanceof bs){if(!_r(C.x,t.head.position.x,C.x+800)||!_r(C.y,t.head.position.y,C.y+600))continue;$.F(()=>{$.translate(-C.x,-C.y),t.eK(),$.translate(t.S.br-10,t.S.aS-10),$.strokeStyle=$.fillStyle=t instanceof bq?"#f00":"#fff",$.globalAlpha=t instanceof bq?1:.2,$.strokeRect(0,0,20+t.S.ca-t.S.br,20+t.S.bp-t.S.aS),$.textAlign="left",$.textBaseline="top",$.font="8pt Courier",$.fillText(t.ap,0,25+t.S.bp-t.S.aS)})}})}*cb(){for(let t=-1;t<13;t++)for(let i=-1;i<17;i++){let e=C.eJ+t,s=C.eI+i;this.ak(e,s)&&(yield[e,s])}}dh(t,i){let e=50*i,s=e+50,h=50*t,a=h+50,o=C.__;!this.ak(t-1,i)&&h>o.y&&this.aR(e,h,0,s,h,0,s,h,50,e,h,50),!this.ak(t+1,i)&&a<o.y&&this.aR(e,a,0,s,a,0,s,a,50,e,a,50),!this.ak(t,i-1)&&e>o.x&&this.aR(e,h,0,e,a,0,e,a,50,e,h,50),!this.ak(t,i+1)&&s<o.x&&this.aR(s,h,0,s,a,0,s,a,50,s,h,50)}eM(t,i){let e=50*i,s=e+50,h=50*t,a=h+50;this.aR(e,h,50,s,h,50,s,a,50,e,a,50)}aR(...t){$.beginPath();for(let i=0;i<t.length;i+=3){let e=t[i+0],s=t[i+1],h=t[i+2],a=this.eH(e,s,h);$[i?"lineTo":"moveTo"](a.x,a.y)}$.closePath(),$.fill(),$.stroke()}eH(t,i,e){let s=atan2(i-C.__.y,t-C.__.x),h=_F(C.__.x,C.__.y,t,i);return{x:t+Math.cos(s)*h*e*.002,y:i+Math.sin(s)*h*e*.002}}gs(t){eG(t).forEach((t,i)=>{t.forEach((t,e)=>{t||this.dn(i,e)})})}fU(){let t=ar(["q","_V","_O"]);this.c_("q");let i=[];for(let e=0;e<3;e++)i.push(this.c_(t));return i.push(this.c_("q")),i}c_(t){let i=this._R=this._R[t](-1,~~A(3,10),~~A(3,10)),e="q"===t?this._R.v-1:this._R.B-1,s="q"===t?4:1,h="q"===t?1:4,a=~~A(0,e);return this._R=this._R[t](a,~~A(1,s),~~A(1,h)),i}_q(t){let i=[()=>{this.eA=new aQ(-2,-2,5,5)},()=>{this.e$=this.eA.q(2,1,1)},()=>{this.ct=this.e$.q(-5,10,10)},()=>{this.dX=this.ct.q(5,2,1)},()=>{this.b_=this.dX.q(-1,15,10),this.fM=this.b_._n(8,2,1)._n(-1,5,5),this.fK=this.b_._V(1,1,2)._V(0,8,8),this.fL=this.b_.q(6,2,1).q(-3,6,6)._V(2,1,1)._V(-2,3,6),this.dW=this.b_._O(2,1,2)._O(-3,3,20).q(1,1,1)},()=>{this.dV=this.dW.q(-2,14,14)._A(3,3,2,2)},()=>{this.bK=this.dV._O(6,1,2)._O(-3,12,12)._A(4,2,4,1),this.fF=this.bK.q(5,2,1).q(-2,6,4),this.fE=this.bK._n(5,2,1)._n(-2,6,4),this.dU=this.bK._O(5,1,2)._O(-3,5,20).J(2,2,1,7).J(2,11,1,7),this._Q=this.dU.q(1,3,1).q(-20,25,3),this._Q._n(2,2,1)._n(-1,4,3),this._Q._n(7,2,1)._n(-1,4,3),this._Q._n(12,2,1)._n(-1,4,3),this._Q.q(2,2,1).q(-1,4,3),this._Q.q(7,2,1).q(-1,4,3),this._Q.q(12,2,1).q(-1,4,3),this.dT=this._Q._V(1,1,1)},()=>{this.bJ=this.dT._V(-5,19,19),this.bJ._A(2,2,3,1)._A(2,2,1,3)._A(2,7,1,5)._A(3,9,2,1)._A(7,9,5,1)},()=>{this.dS=this.bJ.q(2,2,1)},()=>{this.cq=this.dS.q(-3,8,12).J(2,2,1,8).J(5,2,1,8),this.bI=this.cq.q(3,2,1).q(-3,15,8).J(2,2,1,1).J(2,5,1,1).J(7,2,1,1).J(7,5,1,1).J(12,2,1,1).J(12,5,1,1),this.dR=this.cq._O(5,1,2)._O(-1,3,8),this.dR.q(1,1,1),this.bH=this.bI.q(2,2,1).q(-3,12,12)._A(4,2,4,1),this.ao=this.bH.q(5,2,1).q(-1,20,4),this.ao.q(2,2,1).q(-1,4,3),this.ao.q(7,2,1).q(-1,4,3),this.ao.q(12,2,1).q(-1,4,3),this.ao.q(17,2,1).q(-1,4,3),this.cp=this.bI.q(13,1,1).q(-1,3,12),this.cp.q(1,1,1),this.dQ=this.ao._n(17,2,1)},()=>{this.dP=this.dQ._n(-1,5,5)._O(0,5,15),this.ez=this.dP.q(1,3,1),this.bG=this.ez.q(-20,24,16)._A(2,2,3,1)._A(2,2,1,3).J(7,3,3,1).J(10,10,3,1).J(13,4,1,2).J(17,8,1,3).J(15,14,1,2).J(8,14,1,2).J(6,8,1,2),this.fB=this.bG._V(7,3,2)._V(0,2,2)}];for(let e=0;e<Math.min(t,i.length);e++)i[e]()}_p(t){for(let i of t)if(this.elements.indexOf(i)>=0)return 1}}class aQ{constructor(t,i,e,s){e<0&&(t+=e,e*=-1),s<0&&(i+=s,s*=-1),this.k=t,this.j=i,this.v=e,this.B=s,this.fY=50*(this.j+this.B/2),this.fX=50*(this.k+this.v/2);for(let h=0;h<e;h++)for(let e=0;e<s;e++)_.dn(t+h,i+e);this.a_=new ey(t,i,e,s),_._R=this}bo(){let t=[];for(let i=0;i<this.v;i++)for(let e=0;e<this.B;e++)_.ak(this.k+i,this.j+e)||t.push([this.k+i,this.j+e]);return t}J(t,i,e,s){e<0&&(t+=e,e*=-1),s<0&&(i+=s,s*=-1);for(let h=0;h<e;h++)for(let e=0;e<s;e++)_.eP(this.k+t+h,this.j+i+e);return this}_A(t,i,e,s){return this.J(t,i,e,s).J(t,this.B-i,e,-s).J(i,t,s,e).J(this.v-t,this.B-i,-e,-s).J(this.B-i,this.v-t,-s,-e).J(this.v-t,i,-e,s).J(i,this.v-t,s,-e)}_n(t,i,e){return new aQ(this.k+t,this.j-e,i,e)}q(t,i,e){return new aQ(this.k+t,this.j+this.B,i,e)}_V(t,i,e){return new aQ(this.k-i,this.j+t,i,e)}_O(t,i,e){return new aQ(this.k+this.v,this.j+t,i,e)}D(t,i){let e=this.bo();if(!e.length)throw new Error("No eE fG spawn at");return _.eN(fv(i).map(()=>{let[i,s]=ar(e),h=new t;return h.head.position.x=50*(s+.5),h.head.position.y=50*(i+.5),h.head.G(0),h.head.aY(),h}))}}eG=(t=>{let i=[],e=t.getContext("2d").getImageData(0,0,t.width,t.height);for(let s=0;s<t.height;s++){i.push([]);for(let h=0;h<t.width;h++)i[s][h]=e.data[s*t.width*4+4*h]>128}return i}),gr=((t,i)=>aX(t+20,i+20,(e,s)=>{e.fillStyle="#fff",e.fillRect(0,0,t+20,i+20),e.fillStyle="#000",e.fillRect(10,10,t,i)})),gq=(t=>{aX()}),gn=(()=>aX(50,50,(t,i)=>{t.fillStyle="#fff",gm=((e,s,h,a)=>{let o=_F(e,s,h,a);t.strokeStyle="#000",t.lineWidth=3;let l=e,n=s;for(let r=0;r<=o;r+=5){let _=r/o,f=aH(0,e+(h-e)*_+A(-.1,.1)*o,i.width),d=aH(0,s+(a-s)*_+A(-.1,.1)*o,i.height);t.beginPath(),t.moveTo(l,n),t.lineTo(f,d),t.stroke(),l=f,n=d}}),t.fillRect(0,0,i.width,i.height),t.fillStyle="#000",t.fillRect(4,4,3,3);for(let e=1;e<i.width;e+=10)for(let s=1;s<i.height;s+=10)w=A(4,9),h=A(4,9),t.fillRect(e,s,w,h),t.fillRect(e,~~A(s,s+h-2),12,2),t.fillRect(~~A(e,e+w-2),s,2,12);t.fillStyle="#fff";t.fillRect(0,0,i.width,3),t.fillRect(0,0,3,i.height),t.fillRect(0,i.height-3,i.width,3),t.fillRect(i.width-3,0,3,i.height)})),d_=((t,i,e,s)=>{let h,a=ev(t,i,e,s),o=eu(t,i,e,s);return a?o?_z=_F(t,i,a.x,a.y)<_F(t,i,o.x,o.y)?a:o:h=a:h=o,_F(t,i,_z.x,_z.y)>s&&(_z={x:t+cos(e)*s,y:i+sin(e)*s}),_z}),ev=((t,i,e,s)=>{let h=sin(e)>0,a=50*~~(i/50)+(h?50:-.01),o=t+(a-i)/tan(e),l=h?50:-50,n=l/tan(e);return cZ(o,a,n,l,s)}),eu=((t,i,e,s)=>{let h=cos(e)>0,a=50*~~(t/50)+(h?50:-.01),o=i+(a-t)*tan(e),l=h?50:-50,n=l*tan(e);return cZ(a,o,l,n,s)}),cZ=((t,i,e,s,h)=>{let a=t,o=i;for(;_F(a,o,t,i)<h;){if(_._B(a,o))return{x:a,y:o};a+=e,o+=s}return{x:a,y:o}});class ey{constructor(t,i,e,s){this.x=50*i,this.y=50*t,this.w=50*s,this.h=50*e}G(){_r(this.x,m.head.position.x,this.x+this.w)&&_r(this.y,m.head.position.y,this.y+this.h)&&_._u(this)}N(){$.fillStyle="#fff",$.globalAlpha=.25*Math.sin(Date.now()/1e3*ab)+.5,$.fillRect(this.x,this.y,this.w,this.h)}}class cX{constructor(t,i,e,s){this.x=t,this.y=i,this.g=e,this.bn=s}G(t){this.x+=t*Math.cos(this.g)*600,this.y+=t*Math.sin(this.g)*600,_._B(this.x,this.y)&&_._u(this);for(let t of m.head._X())if(W(t.position,this)<20)return m._N(.5,this),void _._u(this)}N(){$.fillStyle=ar(["#f00","#fff"]),$.fillRect(this.x-4,this.y-4,8,8)}}class cW{constructor(t,i,e){this.x=t,this.y=i,this.g=e}G(t){this.x+=t*Math.cos(this.g)*400,this.y+=t*Math.sin(this.g)*400,_._B(this.x,this.y)&&_._u(this),this.et();for(let t of m.head._X())if(W(t.position,this)<20)return m.es(),void _._u(this)}et(){_.add(new cl({x:[this.x,A(-40,40)],y:[this.y,A(-40,40)],aD:A(.3,.4),_i:ar(["#ff0","#f00","#000"]),_v:[A(5,10),5],a$:[1,0]}))}N(){}}class bs{constructor(){this.o={x:0,y:0,H:25},this.head=new Node,this.head.eS=1,this.head.position.x=-50,this.head.position.y=0,this.head.aY(),this._x=1,this.ah=200,this.bZ="#900",this.S={br:0,ca:0,aS:0,bp:0},this.bM()}eK(){this.S.br=Number.MAX_SAFE_INTEGER,this.S.aS=Number.MAX_SAFE_INTEGER,this.S.ca=Number.MIN_SAFE_INTEGER,this.S.bp=Number.MIN_SAFE_INTEGER;for(let t of this.head._X())this.S.br=Math.min(this.S.br,t.position.x),this.S.aS=Math.min(this.S.aS,t.position.y),this.S.ca=Math.max(this.S.ca,t.position.x),this.S.bp=Math.max(this.S.bp,t.position.y)}bM(){this.e_=0}_N(t,i){this._x-=t;for(let t=0;t<5;t++)this.cV(this.bZ,i);for(let t=0;t<3;t++)this.bm(i)}cV(t,i){let e=random()*ab,s=50*random(),h=new er(i.x+cos(e)*s,i.y+sin(e)*s,t);timeout(0).then(()=>_.di(h)),timeout(60).then(()=>_._u(h))}bm(t){_.add(new cl({x:[t.x+A(-5,5),A(-60,60)],y:[t.y+A(-5,5),A(-60,60)],aD:A(.2,.4),_i:this.bZ,_v:[A(5,10),5],a$:[1,0]}))}G(t){let i=W(this.head.position,this.o);if(i>=this.o.H){let e=_b(this.head.position,this.o),s=Math.min(t*this.ah,i);this.head.position.x+=Math.cos(e)*s,this.head.position.y+=Math.sin(e)*s,this.e_+=s}this.head.G(t),this.head.resolve()}N(){this.head.N()}bv(){this.head.bv()}eq(t){let i=_b(t,this.head.position);this.head.children.forEach(t=>{let e=W(t.position,this.head.position);t.position.x=this.head.position.x+Math.cos(i)*e,t.position.y=this.head.position.y+Math.sin(i)*e})}}class fw extends bs{constructor(){super(),this.bZ="#fffb23",this.ap="K-31",this._w=this.head,this.aG=0,this.cu=0,this._$=new Node(this.head),this._$.M=1,this._$.Y=2,this._$._M=100,this._$._t=Node.aC,this._w=this._$,this.bX=0,this.gl=0,this.aN=[],this.extend(),this.extend(),this._L=new Node(this._$),this._L.M=10,this._L.Y=15,this._L._M=100,this._L.V=PI-PI/5+PI/8,this._L.U=PI-PI/5-PI/8,this._L._t=Node.aC;let t=new Node(this._L);t.M=10,t.Y=15,t._M=100,t.V=t.U=PI/2,t._t=Node.aC,this._K=new Node(this._$),this._K.M=10,this._K.Y=15,this._K._M=100,this._K.V=PI+PI/5+PI/8,this._K.U=PI+PI/5-PI/8,this._K._t=Node.aC;let i=new Node(this._K);i.M=10,i.Y=15,i._M=100,i.V=i.U=-PI/2,i._t=Node.aC}bM(){super.bM(),this.dZ=0}G(t){let{x:i,y:e}=this.head.position;if(this._L.V=PI-PI/5+PI/8+Math.sin(X*PI*2*4)*PI/3,this._L.U=PI-PI/5-PI/8+Math.sin(X*PI*2*4)*PI/3,this._K.V=PI+PI/5+PI/8-sin(X*PI*2*4)*PI/3,this._K.U=PI+PI/5-PI/8-sin(X*PI*2*4)*PI/3,this.ah=400*this.aG,this.cR>=0){this.cR-=t;let i=ar(Array.from(this.head._X()));_.add(new cl({x:[i.position.x,A(-40,40)],y:[i.position.y,A(-40,40)],aD:A(.3,.4),_i:ar(["#ff0","#f00","#000"]),_v:[A(5,10),5],a$:[1,0]})),this.bX-=t,this.bX<=0&&(this.bX=1,this._N(1,this.head.position))}super.G(t),this.aG>.25&&(this.dZ+=_F(this.head.position.x,this.head.position.y,i,e)),this.cQ=0;for(let i of _.elements)i instanceof aZ&&(W(this.o,i.head.position)<50&&(this.o.x=i.head.position.x,this.o.y=i.head.position.y),W(this.head.position,i.head.position)<30*(this.cQ?3:1)&&(i._N(t*(2*this.aG+2),this.head.position),i._x<=0&&this.ep(i),this.cQ=1));for(let i=this.aN.length-1;i>=0;i--){let e=this.aN[i];e.G(t),e.cP<=0&&this.aN.splice(i,1)}}extend(t){this._x+=1;let i=new Node(this._w);if(i.M=A(5,15),i.Y=i.M+10,i._M=100,i._t=Node.aC,t){let t=new Node(i);t.V=PI/2+PI/3,t.U=PI/2-PI/3,t.M=A(5,30),t.Y=t.M+10,t._M=200,t._t=Node.aW;let e=new Node(i);if(e.V=3*PI/2+PI/3,e.U=3*PI/2-PI/3,e.M=A(5,30),e.Y=e.M+10,e._M=200,e._t=Node.aW,i.bu%4==0){t.M*=3,e.Y*=3;let i=new Node(t);i.V=PI/2+PI/4,i.U=PI/2-PI/4,i.M=A(15,25),i.Y=i.M+20,i._M=200,i._t=Node.aW;let s=new Node(e);s.V=3*PI/2+PI/4,s.U=3*PI/2-PI/4,s.M=A(15,25),s.Y=s.M+20,s._M=200,s._t=Node.aW}}this._w=i;for(let t of this._w._X())t.resolve();this.head.aY(),this._x++}N(){if(super.N(),0!==_m)return;$.strokeStyle="#fff",$.lineWidth=2,$.globalAlpha=.1,$.beginPath(),$.arc(this.o.x,this.o.y,10,0,ab),$.stroke();let t=atan2(this.o.y-this.head.position.y,this.o.x-this.head.position.x),i=W(this.o,this.head.position)-10;$.beginPath(),$.moveTo(this.head.position.x,this.head.position.y),$.lineTo(this.head.position.x+cos(t)*i,this.head.position.y+sin(t)*i),$.stroke()}eL(){for(let t of this.aN)t.N()}ep(t){_._u(t),this.cu++;let i=.2,e=Array.from(t.head._X());for(let t of e){t.children=[],t.eU=1;let e=Array.from(this._$.children[0]._X()).sort((t,i)=>t.bu-i.bu);e.length>1&&e.splice(0,.5*e.length);let s=ar(e);timeout(i).then(()=>{s.children.push(t),t.parent=s}),i+=.2}timeout(.2).then(()=>this.extend(1));for(let t=0;t<3;t+=.2)timeout(t).then(()=>this.cV("#900",this.head.position))}es(){this.cR=1}_N(t,i){super._N(t,i),this.aN.push(new em(i.bn?i.bn.head.position:i));for(let t=0;t<10;t++)this.bm(i);if(this._w.parent===this._$){this._x=0,_._u(this);for(let t=0;t<100;t++)this.bm(i);timeout(2).then(()=>_.reject(new Error))}else{this._x=1;let t=this._w.parent.children.indexOf(this._w);t>=0&&this._w.parent.children.splice(t,1),this._w=this._w.parent}}}class em{constructor(t){this.source=t,this.cP=1,this.cM=0}G(t){this.cP-=t,this.cM+=t}N(){$.F(()=>{let t=m.head.position;$.translate(t.x,t.y),$.rotate(_b(t,this.source)),$.fillStyle=$.strokeStyle="#f00",$.lineWidth=10,$.beginPath();let i=min(1,this.cM/.1);$.globalAlpha=i;for(let t=-PI/6;t<PI/6;t+=PI/16){let e=A(100,110)*i;$.lineTo(cos(t)*e,sin(t)*e)}$.stroke()})}}class aZ extends bs{constructor(t,i="#daab79"){super();let e=new Node(this.head);e.U=Math.PI/8,e.V=-Math.PI/8,e.M=0,e.Y=5;let s=new Node(e);s.M=15,s.Y=25,s.V=Math.PI/2-Math.PI/8+Math.PI/8,s.U=Math.PI/2+Math.PI/8+Math.PI/8;let h=new Node(e);h.M=15,h.Y=25,h.V=-Math.PI/2-Math.PI/8-Math.PI/8,h.U=-Math.PI/2+Math.PI/8-Math.PI/8;let a=new Node(s);a.M=5,a.Y=15,a.V=Math.PI/2-Math.PI/8,a.U=Math.PI/2+Math.PI/8;let o=new Node(h);o.M=5,o.Y=15,o.V=-Math.PI/2-Math.PI/8,o.U=-Math.PI/2+Math.PI/8,h.am=s.am=a.am=o.am=dv(t,10),e.am=eR(i,10),this.head.dw=(()=>this.bh()),this.cL=0,this.aK=150,this.bg=PI/2}_N(t,i){if(super._N(t,i),this._x<=0)for(let t=0;t<20;t++)this.bm(i)}bh(){let t=_b(this.head.position,this.o),i=gj(t,PI/2)+ar([-1,1])*PI/2;this.o.x=this.head.position.x+200*Math.cos(i),this.o.y=this.head.position.y+200*Math.sin(i)}G(t){(W(this.head.position,this.o)<=this.o.H||(this.cL-=t)<0)&&(this.cL=1,this.bh()),super.G(t)}_G(){if(!this.ek())return;let t=_l(_b(this.head.position,m.head.position)),i=_l(_b(this.head.position,this.o));return Math.abs(_l(t-i))<this.bg/2}ek(){let t=W(this.head.position,m.head.position);if(t>this.aK)return;let i=_b(this.head.position,m.head.position),e=d_(this.head.position.x,this.head.position.y,i,t);return!e||W(e,this.head.position)>=t}N(){super.N()}}class fO extends aZ{constructor(){super("#00f"),this.ap="Janitor #"+~~(300*random())}G(t){this.ah=50*this._x,super.G(t)}}class _a extends aZ{constructor(){super(ar(["#080","#00f","#8f0","#808"])),this.ap="Intern #"+~~(300*random())}G(t){this.ah=100*this._x,super.G(t)}}class bq extends aZ{constructor(t){super(t),this.bf=0}bh(){super.bh(),this._T=max(this._T,2)}_N(t,i){super._N(t,i),this._T=2}G(t){let i=this._G();this.ah=i?0:100*this._x,this.aK=i?400:250,super.G(t),i&&(this.o.x=m.head.position.x,this.o.y=m.head.position.y,this.eq(m.head.position)),this._T-=t,(this._T-=t)<=0&&i&&this.cJ()}N(){let t=_F(0,0,800,600)/2+this.aK;W(this.head.position,C.__)>t||($.F(()=>{let t=this._G(),i=_l(_b(this.head.position,this.o));$.fillStyle=t?"#f00":"#fff",$.globalAlpha=.05,$.translate(this.head.position.x,this.head.position.y),$.beginPath(),$.moveTo(0,0);for(let t=i-this.bg/2;t<i+this.bg/2;t+=this.bg/10){let i=d_(this.head.position.x,this.head.position.y,t,this.aK),e=i?W(this.head.position,i):this.aK;$.lineTo(cos(t)*e,sin(t)*e)}$.fill()}),super.N())}}class _E extends bq{constructor(){super("#000"),this._T=0,this.ap="Security #"+~~(300*random()),this.ei=cX}cJ(){this._T=this.bf%3?.8:3;let t=_b(this.head.position,m.head.position);_.add(new cX(this.head.position.x,this.head.position.y,t,this)),this.bf++}}class b$ extends bq{constructor(){super("#f80"),this._T=0,this.ap="Security #"+~~(300*random()),this.ei=cW}cJ(){this._T=this.bf%10?.2:3;let t=_b(this.head.position,m.head.position);_.add(new cW(this.head.position.x,this.head.position.y,t)),this.bf++}}class er{constructor(t,i,e){this.x=t,this.y=i,this.H=A(2,5),this.a$=A(.5,1),this._i=e}G(t){W(this,m.head.position)>1600&&_._u(this)}N(){$.globalAlpha=this.a$,$.fillStyle=this._i,$.beginPath(),$.arc(this.x,this.y,this.H,0,ab),$.fill()}}class eQ{constructor(){this.x=0,this.y=0,this.__={x:0,y:0}}get eJ(){return~~(this.y/50)}get eI(){return~~(this.x/50)}G(t){let i=m?{x:m.head.position.x-400,y:m.head.position.y-300}:{x:0,y:0},e=W(i,this),s=max(1,e/.2),h=atan2(i.y-this.y,i.x-this.x),a=min(s*t,e);this.x+=cos(h)*a,this.y+=sin(h)*a,this.__.x=C.x+400,this.__.y=C.y+300}}ec=(()=>{if(location.href.indexOf("iswearihavecoil")>0)return 1;document.monetization&&document.monetization.state}),onload=(()=>{(p=document.querySelector("canvas")).width=800,p.height=600,$=p.getContext("2d"),1===_m&&(aI=document.createElement("canvas"),_f=aI.getContext("2d"),document.body.appendChild(aI)),onresize(),fA(),frame()}),onblur=(()=>{_e=0});let cH=performance.now();frame=(()=>{let t=performance.now(),i=(t-cH)/1e3;cH=t,gc(),ac&&(_e=1);let e=i;ac&&(e*=4),_e&&(X+=e),fn(),_e&&screen.G(e),$.F(()=>{fk(),$.F(()=>screen.N()),screen instanceof bQ?$.F(()=>{$.font="18pt Arial",$.textAlign="left",$.textBaseline="middle",$.shadowColor="#000",$.shadowOffsetX=0,$.shadowOffsetY=4,$.fillStyle="#fff",$.fillText("NO INPUT",20,33)}):ac?$.F(()=>{$.translate(720,50),$.shadowColor="#000",$.shadowOffsetX=0,$.shadowOffsetY=4,$.fillStyle="#fff",$.beginPath(),$.moveTo(0,0),$.lineTo(0,25),$.lineTo(20,12),$.fill(),$.beginPath(),$.moveTo(20,0),$.lineTo(20,25),$.lineTo(40,12),$.fill()}):_e?screen instanceof bd&&$.F(()=>{$.translate(20,20),$.shadowColor="#000",$.shadowOffsetX=0,$.shadowOffsetY=4,$.fillStyle="#fff",$.beginPath(),$.moveTo(0,0),$.lineTo(0,25),$.lineTo(20,12),$.fill()}):($.F(()=>{$.font="18pt Arial",$.textAlign="left",$.textBaseline="middle",$.shadowColor="#000",$.shadowOffsetX=0,$.shadowOffsetY=4,$.fillStyle="#fff",$.fillRect(20,20,5,25),$.fillRect(30,20,5,25),$.fillText("PAUSED",50,33)}),$.F(()=>{$.font="12pt Courier",$.textAlign="left",$.textBaseline="bottom",$.fillStyle="#fff",$.shadowColor="#000",$.shadowOffsetX=0,$.shadowOffsetY=2;let t=[[bP("[CLICK]","[TAP]","[A]"),"PLAY THE TAPE"],[bP("[F]","N/A","[Y]"),"FAST FORWARD"]];if(screen instanceof bd){let i=[bP("[I]","N/A","[I]"),au?"STORY MODE":"INFINITE MODE (COIL ONLY)"];t.push(i),i.a$=ec()?1:.5}screen instanceof cz&&t.push(["[T]","TWEET YOUR RESULTS"]);let i=t.reduce((t,i)=>max(t,$.measureText(i.slice(0,2).join(" ")).width),0),e=t.reduce((t,[i])=>max(t,$.measureText(i).width),0),s=400;for(let h of t){let t=(800-i)/2;$.fillStyle=h._i||"#fff",$.globalAlpha=h.a$||1,$.textAlign="center",$.fillText(h[0],t,s),$.textAlign="left",$.fillText(h[1],t+e,s),s+=20}})),ac&&(cj(200),cj(400)),fj()}),aI&&(aI.width=innerWidth,aI.height=innerHeight,bR&&_f.F(()=>{let t=aH(0,(W(aq,_S)-50)/100,1),i=50*(1-t);_f.globalAlpha=.5*(1-t),_f.strokeStyle="#fff",_f.lineWidth=2,_f.fillStyle="rgba(0,0,0,0.5)",_f.beginPath(),_f.arc(aq.x,aq.y,i,0,ab),_f.fill(),_f.stroke(),_f.globalAlpha=.5,_f.fillStyle="#fff",_f.beginPath(),_f.arc(_S.x,_S.y,30,0,ab),_f.fill()})),requestAnimationFrame(frame)});</script>