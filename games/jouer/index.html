<title>Jouer</title><script src=/2019/webxr/aframe.js></script><meta content=$coil.xrptipbot.com/c64cd7aa-7a03-44e5-ae53-029c72c84e2f name=monetization><script>Score=0,level=0,AFRAME.registerComponent("x-button-listener",{init:function(){this.el.addEventListener("xbuttondown",(function(t){x=document.getElementById("cam").getAttribute("position").x,y=document.getElementById("cam").getAttribute("position").y,z=document.getElementById("cam").getAttribute("position").z,document.getElementById("cam").setAttribute("position",x+" "+y+" "+(z+.05))})),this.el.addEventListener("ybuttondown",(function(t){x=document.getElementById("cam").getAttribute("position").x,y=document.getElementById("cam").getAttribute("position").y,z=document.getElementById("cam").getAttribute("position").z,document.getElementById("cam").setAttribute("position",x+" "+y+" "+(z-.05))})),this.el.addEventListener("bbuttondown",(function(t){x=document.getElementById("cam").getAttribute("position").x,y=document.getElementById("cam").getAttribute("position").y,z=document.getElementById("cam").getAttribute("position").z,document.getElementById("cam").setAttribute("position",x+.02+" "+y+" "+z)})),this.el.addEventListener("gripdown",(function(t){shoot()})),this.el.addEventListener("abuttondown",(function(t){x=document.getElementById("cam").getAttribute("position").x,y=document.getElementById("cam").getAttribute("position").y,z=document.getElementById("cam").getAttribute("position").z,document.getElementById("cam").setAttribute("position",x-.02+" "+y+" "+z)}))}}),AFRAME.registerComponent("anim-complete",{init:function(){var t=this.el;t.addEventListener("animationcomplete",(function(e){t.setAttribute("visible","false")}))}}),AFRAME.registerComponent("rotation-reader",{tick:function(){console.log(this.el.object3D.rotation.x),0==this.el.object3D.rotation.x&&0==this.el.object3D.rotation.y&&0==this.el.object3D.rotation.z&&document.setAttribute("rotation","-60 0 0")}}),AFRAME.registerComponent("collider-check",{dependencies:["raycaster"],init:function(){var t=this.el;t.addEventListener("raycaster-intersection",(function(e){if(t.setAttribute("visible","false"),0==monkey){level+=2,monkey=level;for(var n=0;n<monkey;n++)spawnMonkey()}else monkey-=1;Score+=10,document.getElementById("score").setAttribute("value","Score: "+Score)}))}})</script><body onclick=clickBody()><a-scene background="color: #77b5fe"id=sc light="defaultLightsEnabled: false"><a-entity light="type: ambient; intensity: 0.9;"></a-entity><a-entity light="type: directional; castShadow: true; intensity: 0.4;"position="-5 3 1.5"></a-entity><a-entity position="20 30 20"camera id=cam look-controls rotation="-60 0 0"wasd-controls><a-cursor></a-cursor><a-text id=score position="0.5 0.7 -1"scale="0.7 0.7 0.7"value="Score: 0"></a-text><a-text id=time position="-1.3 0.7 -1"scale="0.7 0.7 0.7"value="Time Left: 0"></a-text></a-entity><a-box color=#6d4a3b depth=200 height=4 position="0 -3 0"roughness=1 width=400></a-box></a-scene><script>function shoot(){document.getElementById("sc").insertAdjacentHTML("afterbegin",'<a-entity rotation="'+document.getElementById("cam").getAttribute("rotation").x+" "+document.getElementById("cam").getAttribute("rotation").y+" "+document.getElementById("cam").getAttribute("rotation").z+' " position="'+document.getElementById("cam").getAttribute("position").x+" "+document.getElementById("cam").getAttribute("position").y+" "+document.getElementById("cam").getAttribute("position").z+' "><a-box anim-complete animation="property:position; to: 0 0 -30; dur: 3000; easing: easeOutQuad;" material="color: red" visible=true  class="\tshot" ></a-box>\t</a-entity>')}function clickBody(){shoot()}function spawnMonkey(){for(x=[0,-3,3,-3,-1,3],y=[4,-1,-1,-3,-3,-3],i=0;i<list.length;i++)index=Math.floor(6*Math.random()+0),console.log(list[i]),console.log(list[i].x+x[index],1,list[i].y+y[index]),placeMonkey(list[i].x-x[index],1,list[i].y-y[index])}function placeMonkey(t,e,o){speed=1e3*Math.floor(10*Math.random()+6),document.getElementById("sc").insertAdjacentHTML("afterbegin",'<a-entity scale="0.5 0.5 0.5" position="'+t+" "+e+" "+o+'"><a-entity animation="property:position; to: 0 30 0; dur: '+speed+';  easing: easeInQuad" collider-check raycaster="objects: .shot"><a-cylinder rotation="10 3 0" color="#3F51B5" height="3" radius="0.8"><a-tetrahedron color="#3F51B5" radius="3" position="0 2 0"  rotation="225 0 45" width="256"></a-tetrahedron>\t</a-cylinder><a-box color="#FF9800" position="0 -2 0" scale="4 3.5 2"></a-box>\t<a-box color="#FF5722" rotation="0 0 45" position="-3 -2 0" scale="3 0.5 0.5"></a-box>\t<a-box color="#FF5722" rotation="0 0 -45" position="3 -2 0" scale="3 0.5 0.5"></a-box></a-entity></a-entity>')}function placeTree(t,e,o,n){var i=document.createElement("a-entity");i.setAttribute("position",t+" "+e+" "+o),i.setAttribute("rotation","0 "+n+" 0"),saver={x:t,z:e,y:o},list.length<6&&list.push(saver),i.insertAdjacentHTML("afterbegin",'<a-cylinder color="#8B4513" height="3" radius="1" position="0 -3 0"></a-cylinder>'),rand=Math.floor(3*Math.random()+1);for(var a=0;a<4+rand;a++)i.insertAdjacentHTML("afterbegin",'<a-tetrahedron color="rgb(144,'+(200+10*a)+',144)" radius="'+(5-a/7)+'" position="0 '+3*a+' 0"  rotation="225 '+0*n+' 45" width="512"></a-tetrahedron>');document.getElementById("sc").appendChild(i)}function timer(){seconds=10;var t=setInterval((function(){seconds-=1,score<100?0==seconds&&(alert("Times Up! You Loose"),window.location.reload()):0==seconds&&(document.getElementById("time").setAttribute("value","You Win"),clearInterval(t)),document.getElementById("time").setAttribute("value","Time Left: "+seconds)}),1e3)}document.addEventListener("keydown",(function(t){69==t.which&&shoot()})),function(){list=[];for(var t=0;t<20;t++)rot=15*Math.floor(12*Math.random()+1),posX=4*Math.floor(20*Math.random()-5),posY=4*Math.floor(20*Math.random()-5),placeTree(posX,2,posY,rot);level=4,monkey=level;for(t=0;t<monkey;t++)spawnMonkey();timer()}()</script>