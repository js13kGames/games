<!doctype html><title>70 Seconds of Terror - js13kGames 2012</title><style>body,html{height:400px;overflow:hidden;width:900px}html{border:7px solid #333;margin:50px auto;background-color:#000}body{background-image:linear-gradient(#080d11,#162432);color:#fff;margin:0;padding:0;cursor:default;font-family:'Open Sans','Helvetica Neue',Arial;font-size:16px;user-select:none;transform:translateZ(0)}body::after{content:url(parachute_btn.svg) url(shield_btn.svg) url(separation_btn.svg) url(parachute.svg) url(capsule.svg) url(shield.svg) url(skycrane_hd.svg) url(friction.svg);display:none}.h{display:none}#DOMgame,#canvasGame,#main,#panel,.stars{bottom:0;left:0;position:absolute;right:0;top:0}#main{background:transparent url(surface.svg) left bottom repeat-x;text-align:center}.stars{background-image:url(stars.svg);pointer-events:none;bottom:25%}h1{font-size:3.5em;font-weight:400;margin-bottom:.25em}h2{font-size:1em;font-weight:400}button{background-color:#f5f5f5;border:0;border-bottom:1px solid #bbb;border-radius:.5em;box-shadow:0 .5em 0 #c5c5c5;color:#333;cursor:pointer;font-size:1em;height:4.5em;margin:1em 0;width:5em}button.parachute_stg{background-image:url(parachute_btn.svg)}button.shield_stg{background-image:url(shield_btn.svg)}button.separation_stg{background-image:url(separation_btn.svg)}button.parachute_stg,button.separation_stg,button.shield_stg{background-position:center;background-repeat:no-repeat;background-size:2.5em}#main img{width:60px;height:40px;vertical-align:bottom;margin-right:10px}#time{font-size:3em;line-height:1em;position:absolute;right:.3em;top:.2em}#time::before{content:'time';display:inline-block;font-size:.34em;left:-1.75em;line-height:1em;position:absolute;text-align:center;top:1.1em;transform:rotate(-90deg)}#action{bottom:.5em;height:3.9em;position:absolute;right:1em;width:4.25em}#message{bottom:.5em;left:0;position:absolute;right:0;text-align:center}#DOMgame{animation-timing-function:ease-in-out;animation-iteration-count:infinite;animation-direction:alternate;height:150%;left:-25%;top:-25%;transform:rotate(6deg);width:150%}#spacecraft{transition:all 1.5s ease;left:50%;top:50%;width:160px;margin-left:-80px;height:104px;margin-top:-52px}#parachute{background:transparent url(parachute.svg) bottom center no-repeat;top:5px;transform:scaleY(0);width:498px;height:1554px;left:-173px}#capsule{background:transparent url(capsule.svg) bottom center no-repeat;height:70%;top:0;width:100%}#shield{background:transparent url(shield.svg) top center no-repeat;bottom:0;height:30%;width:100%}#curiosity{background-image:url(skycrane_hd.svg);width:118px;height:58px;left:21px;top:23px}#capsule,#curiosity,#friction,#parachute,#shield,#spacecraft{background-size:100%;position:absolute}@keyframes entry-tremor{0%{transform:translate(-.2%,-1%)}33%{transform:translate(.2%,.1%)}66%{transform:translate(.1%,-.3%)}100%{transform:translate(-.2%,.3%)}}.entry_stg{animation-name:entry-tremor;animation-duration:.1s;background-image:linear-gradient(transparent 50%,#e8835e)}.entry_stg #spacecraft{transform:rotate(-62deg)}@keyframes resistance{0%{opacity:0}30%{opacity:.6}80%{opacity:.6}100%{opacity:0}}.entry_stg #friction{animation:resistance 21s ease-in-out;background-image:url(friction.svg);bottom:0;display:block;height:90%;left:-9%;opacity:0;width:118%}@keyframes parachute-tremor{0%{transform:translate(-.05%,-.1%) rotate(-1deg)}33%{transform:translate(.1%,.1%)}66%{transform:translate(.05%,-.05%)}100%{transform:translate(-.05%,.05%) rotate(1deg)}}#DOMgame.parachute_stg{animation-name:parachute-tremor;animation-duration:.1s;background-image:linear-gradient(transparent 45%,#e8835e)}.parachute_stg #spacecraft{transform:rotate(-50deg) scale(.25)}@keyframes parachute-deploy{0%{transform:translateY(-50%) scaleY(0)}75%{transform:translateY(-100%) scaleY(1)}}.parachute_stg #parachute{animation:parachute-deploy .2s ease-out;transform:translateY(-100%) scaleY(1)}@keyframes shield-tremor{0%{transform:translate(-.1%,-.1%)}33%{transform:translate(.02%,.1%)}66%{transform:translate(.05%,-.2%)}100%{transform:translate(-.04%,.02%)}}#DOMgame.shield_stg{animation-name:shield-tremor;animation-duration:.2s;background-image:linear-gradient(transparent 40%,#e8835e)}.shield_stg #spacecraft{transform:rotate(-30deg)}.shield_stg #shield{transform:translateY(5000%) rotate(-100deg);transition:all 2s ease-in .2s}.separation_stg #capsule{transform:translateY(-5000%);transition:all 2s ease-in 250ms}.separation_stg #parachute{transform:translateY(-335%);transition:all 2s ease-in 250ms}.separation_stg #spacecraft{transform:rotate(-20deg)}#canvasGame{background:transparent url(surface.svg) left 85% repeat-x}#canvas{background-image:linear-gradient(transparent 85%,#ec865d 85%)}#landing{border:.16em dashed #fff;border-radius:.5em;height:35px;left:720px;position:absolute;top:260px;width:60px}#landing::before{content:'Hold onto this area by 5 seconds';display:inline-block;height:100%;position:absolute;right:0;text-align:right;top:-100%;width:1000%}#landing.holding{background-color:rgba(255,255,255,.4)}</style><div id=main><div class=stars></div><h1 id=reason>70 seconds of terror</h1><h2>Landing a spacecraft on the surface of Mars</h2><button id=play class=h>Play</button><p><img src=keys.svg>Use the arrows keys to final landing</div><div id=DOMgame class=h><div class=stars></div><div id=spacecraft><div id=curiosity></div><div id=parachute></div><div id=capsule></div><div id=shield></div><div id=friction></div></div></div><div id=canvasGame class=h><div class=stars></div><canvas id=canvas width=900 height=400></canvas><div id=landing></div></div><div id=panel class=h><time id=time></time><p id=message></p><button id=action class=h></button></div><script>function e(e){A(E.main),u=E.time.textContent=e,d=g.setInterval(function(){--u,E.time.textContent=9<u?u:"0"+u,m.tick(),u||I("Time's up")},1e3),q(E.panel)}function t(e){var t=new g.Image;return t.src=e,t}function n(e){E.message.textContent=e||""}function a(e,t){switch(e){case 38:R.yRocket=t;break;case 37:R.xRocket=t?-M:0;break;case 39:R.xRocket=t?M:0}}function i(e){a(e.keyCode,!0)}function o(e){a(e.keyCode,!1)}function s(){O.removeEventListener("keydown",i),O.removeEventListener("keyup",o)}function F(){s(),R.xRocket=R.yRocket=R.xSpeed=R.ySpeed=0,x=!1,G(E.landing,"holding"),_.x=R.x+_.relativeX,_.y=R.y}function c(e){x=!(k=!1),s(),I(e)}function r(){E.canvasGame.classList.contains("h")||(v.clearRect(0,0,900,400),x?(R.x+=R.xSpeed+=R.xRocket*S,R.y+=R.ySpeed+=R.yRocket?-S:S,(R.y>w||900<R.x||R.x<-R.width)&&c("You've crashed"),R.x>L.left&&R.x+R.width<L.right&&R.y>L.top&&R.y+R.height<L.bottom?k||(p=g.setTimeout(F,4e3),k=!0,b(E.landing,"holding")):k&&(g.clearTimeout(p),k=!1,G(E.landing,"holding"))):(g.clearInterval(d),_.y+_.height<w?_.y+=.5:(900<R.x&&c("Mission accomplished"),R.x+=R.xSpeed+=C,R.y+=R.ySpeed-=C),v.drawImage(_.image,_.x,_.y,_.width,_.height)),!R.xRocket&&!R.yRocket&&x||v.drawImage(D.image,R.x,R.y+R.height,D.width,D.height),v.drawImage(R.image,R.x,R.y,R.width,R.height),T(r))}var g,h,m,d,u,l,y,f,p,v,x,k,w,R,D,_,L,M,S,C,E,T,I,O=(g=this).document,b=function(e,t){e.classList.add(t)},G=function(e,t){e.classList.remove(t)},q=function(e){G(e,"h")},A=function(e){b(e,"h")},N=!0,X=[];["main","reason","play","DOMgame","curiosity","canvasGame","canvas","landing","panel","time","message","action"].forEach(function(e){X[e]=O.getElementById(e)}),E=X,T=g.requestAnimationFrame||g.webkitRequestAnimationFrame||g.mozRequestAnimationFrame||g.msRequestAnimationFrame,I=function(e){g.clearInterval(d),E.DOMgame.className="h",A(E.panel),A(E.canvasGame),E.reason.textContent=e,q(E.main)},v=E.canvas.getContext("2d"),k=!(x=!0),w=360,R={image:new t("skycrane_sd.svg"),width:40,height:20},D={image:new t("rockets.svg"),width:40,height:12},_={image:new t("rover.svg"),width:29,height:17,relativeX:5},L={height:35,width:60,left:720,top:260,right:780,bottom:295},M=1,S=.01,C=.06,h=function(){A(E.DOMgame),n("Use the arrows keys to land."),R.x=96,R.y=-R.height,R.xSpeed=1,R.ySpeed=.1,R.xRocket=R.yRocket=0,O.addEventListener("keydown",i),O.addEventListener("keyup",o),q(E.canvasGame),N=!1,r()},l={entry_stg:{go:function(){n("Descending through the Martian atmosphere. Get ready for instructions."),b(E.DOMgame,"entry_stg")}},parachute_stg:{msg:"Deploy the supersonic parachute.",go:function(){G(E.DOMgame,"entry_stg")}},shield_stg:{msg:"Separate the heat shield.",go:function(){q(E.curiosity)}},separation_stg:{msg:"Drop out of the bottom of the aeroshell.",go:function(){n("Get ready to take manual controls."),g.setTimeout(h,7e3)}}},y={49:"parachute_stg",38:"shield_stg",29:"separation_stg"},f=[],E.action.addEventListener("click",function(){n(),A(E.action);var e=f.shift();b(E.DOMgame,e),l[e].go()}),m={init:function(){A(E.curiosity),E.play.textContent="Replay",e(70),E.DOMgame.className="",l.entry_stg.go()},tick:function(){var e;E.DOMgame.classList.contains("h")||((e=y[u])&&f.push(e),0<f.length&&(n(l[f[0]].msg),E.action.className=f[0]))}},g.onload=function(){E.play.addEventListener("click",function(){N?m.init():(e(20),h())}),q(E.play)}</script>