<!doctype html><title>Edgar’s Mission - js13kGames 2025</title><meta name=viewport content="width=device-width"><link rel=icon href=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAAXNSR0IArs4c6QAAAUdQTFRFAAAAAAUAAwUEAABEAAkABggIAAwAAA4ACAsLABEACw8PAhMDEREABBUFDhISBhgIERcXCRwNFBsbDSESHh4AFh4eESQXGSEhGiMjEycZGyQkFCkbFyseHikpKioAGS8iIi0tHDEmJDExHjUpITcsKDU1IzkvKjg4JTwxLDs7Jj4zKD81Lj09KkI4MEBALEU7REQAM0REL0c+NEZGMElAMUpBNklJM0xEOEpKOUxMOk5ONlFJPFBQOVNMPVJSOlVOO1ZPPFdQQFZWWFgAPVlSQ1lZQFtVRFtbQl5YRl5eRGFbRmJdSWJiS2RkSGZhTWdnS2lkTWpmbGwAT2pqTmxob28AUm1tUG9rUnBuVHJwXHp3hoYAf5aVp6cAiqCflqmpubkAu7sArLy8rb28rb69rr6+r7+/r8C/sMDAsMHAsMHBscLCssPDGySlzQAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB+kIHw8ENmUf+0IAAACaSURBVDjL7dChDsJAEEXRS9NAhi8AT4JAoEgFAotAkuBIEIC5/68RW9oS2CKqSHhmxZyd3Tz8Ev5gKIB+AEnkQAEXyIMC6hW0C9/TPpEdt2CWmScAMgjcOPQD+PjNDmiKPaqeukWKrlIv7tOVnVc3Uj572LvVJehZ1SoM71Mq6yYjIgLS+cyccqElrH0dNJmMIiIYR2RAm58AD+a3/aYhBlNuAAAAAElFTkSuQmCC><style>body,html{margin:0;padding:0;background:#000;color:#fff;font:22px sans-serif}#s p{line-height:1.8;text-align:center}canvas{display:block;margin:auto}button{border:none;background:0 0;font:inherit;color:inherit;cursor:pointer;transition:all .2s}button:focus,button:hover{transform:scale(1.2)}#i{cursor:pointer}label{position:fixed;top:0;right:0;cursor:pointer}#a,#a:checked~.off,#a:not(:checked)~.on{display:none}</style><div id=s><p>I’m Edgar the cat.<br>It’s already getting dark and my owner is not here.<br>He must have been kidnapped!<br>Will you help me on my mission to find him?</p><canvas id=i moz-opaque></canvas><p><button id=p>Continue previous game</button><p><button id=n>Start new game</button></div><div id=g hidden><canvas id=c moz-opaque></canvas><label><input type=checkbox id=a><svg title="Turn sound off [m]" class=on width=40 height=40 viewBox="0 0 30 30"><path fill=#fff d="M15 8v8.55c-.94-.54-2.1-.75-3.33-.32-1.34.48-2.37 1.67-2.61 3.07a4.007 4.007 0 0 0 4.59 4.65c1.96-.31 3.35-2.11 3.35-4.1V10h2c1.1 0 2-.9 2-2s-.9-2-2-2h-2c-1.1 0-2 .9-2 2z"/></svg><svg title="Turn sound on [m]" class=off width=40 height=40 viewBox="0 0 30 30"><path fill=#fff d="M17 12.61V10h2c1.1 0 2-.9 2-2s-.9-2-2-2h-2c-1.1 0-2 .9-2 2v3.61l2 2zM8.12 6.56a.996.996 0 1 0-1.41 1.41l8.29 8.3v.28c-.94-.54-2.1-.75-3.33-.32-1.34.48-2.37 1.67-2.61 3.07a4.007 4.007 0 0 0 4.59 4.65c1.96-.31 3.35-2.11 3.35-4.1v-1.58l5.02 5.02a.996.996 0 1 0 1.41-1.41L8.12 6.56z"/></svg></label></div><script>var t,i,e,n,s,h,x,a,o,y,c,r;t={get:function(t){try{return JSON.parse(localStorage.getItem("schnark-js13k2025")||"x")}catch(i){return t}},set:function(t){try{localStorage.setItem("schnark-js13k2025",JSON.stringify(t))}catch(t){}}},i=function(){function t(t,i){var e,n;for(i=i||"sine",e=0;e<c.length;e++)if(c[e].osc.type===i&&c[e].t<t)return e;return e=h.createOscillator(),n=h.createGain(),e.type=i,n.gain.value=0,e.connect(n),n.connect(h.destination),e.start(),c.push({osc:e,gain:n}),c.length-1}function i(){var t,i;if(y=!1,h){for(i=h.currentTime+.1,t=0;t<c.length;t++)c[t].osc.frequency.cancelScheduledValues(i),c[t].gain.gain.cancelScheduledValues(i),c[t].gain.gain.setValueAtTime(0,i),c[t].t=i;for(t=0;t<x.length;t++)x[t].time=-1,x[t].pos=0}}function e(t){return t.split(" ").map(function(t){var i;return t=t.split(/([\^_]?[a-zA-Z][',]*)/),i=Number(t.pop()||1),[t.filter(function(t){return t}),i]})}function n(i,e,n,x,a,o){var y;h||(h=new s),n=(y=h.currentTime+.01)+n*x/1e3,o=t(y,["square","sawtooth","triangle","sine"][o||0]),c[o].osc.frequency.setValueAtTime(i,y),c[o].osc.frequency.linearRampToValueAtTime(i+e*x,n),c[o].gain.gain.setValueAtTime(a,y),c[o].gain.gain.linearRampToValueAtTime(0,n),c[o].t=n}var s,h,x,a,o=2,y=!1,c=[],r=.4;return s=window.AudioContext||window.webkitAudioContext,function(){var t,i,n={"^C":220*Math.pow(2,-8/12),D:220*Math.pow(2,-7/12),E:220*Math.pow(2,-5/12),"^F":220*Math.pow(2,-.25),G:220*Math.pow(2,-2/12),A:220,B:220*Math.pow(2,2/12),c:220*Math.pow(2,.25),d:220*Math.pow(2,5/12)},s=["D G B2 G D ^C2 D G B d c3","B G A B A ^F G A G E ^F G4 z","B d c B A c B A G B A ^F4 G z2"],h=[];for(h.push(s[0],s[1],s[0],s[2],s[0]),t=0;t<10;t++)i=s[Math.max(0,Math.floor(4*Math.random())-1)],Math.random()<.3&&(i=i.split(" ").reverse().join(" ")),h.push(i);for(n=[[h.join(" "),n,.2]],x=[],s=0;s<n.length;s++)h=e(n[s][0]),x.push({time:-1,pos:0,notes:h,key:n[s][1],volume:n[s][2]})}(),{setMode:function(t){t!==o&&(2===o&&y&&(i(),y=!0),o=t)},start:function(){y=!0},stop:i,tick:s?function(i){var e,n,l;if(y&&2===o)for(h||(h=new s),e=h.currentTime,a&&(l=e-a,i?i=i*l/20:(i=.4-r,i=Math.max(i,-l/20),i=Math.min(i,l/20)),r+=i,r=Math.max(r,.15),r=Math.min(r,.65)),a=e,e=0;e<x.length;e++){-1===x[e].time&&(n||(n=h.currentTime+.1),x[e].time=n),l=x[e];for(var u=void 0;l.time-h.currentTime<.3;){if("z"===(u=l.notes[l.pos])[0][0])l.time+=u[1]*r;else{i=l;var m=u[0],w=l.time,v=l.key,f=l.volume,d=void 0;for(u=w+u[1]*r,d=0;d<m.length;d++){var p=w,g=u,T=v[m[d]],M=f,b=t(p);c[b].osc.frequency.setValueAtTime(T,p),c[b].gain.gain.setValueAtTime(.001,p),c[b].gain.gain.exponentialRampToValueAtTime(M,p+.05),c[b].gain.gain.linearRampToValueAtTime(M,g-.05),c[b].gain.gain.exponentialRampToValueAtTime(.001,g),c[b].gain.gain.setValueAtTime(0,g+.01),c[b].t=g+.01}i.time=u}l.pos=(l.pos+1)%l.notes.length}}}:function(){},sound:s?function(t){if(0!==o)switch(t){case"cat0":n(150,30,10,20,.15);break;case"cat1":n(100,-10,15,15,.7,2);break;case"end1":n(100,-10,10,25,.5),n(125,-5,20,45,.1,1),n(40,2,20,20,1,2),n(200,-4,10,100,.25,2);break;case"end2":n(750,-30,5,20,.25),setTimeout(function(){n(150,30,5,20,.25)},100);break;case"end3":n(440,-15,35,15,.3,2);break;case"end-1":n(510,0,15,20,.1),setTimeout(function(){n(2600,1,10,50,.2)},80)}}:function(){}}}(),e=function(){function t(t,i,e,n){this.canvas=t,this.ctx=t.getContext("2d",{alpha:!1}),this.height=i,this.minWidth=e,this.maxWidth=n,this.sky=this.ctx.createRadialGradient(100,100,50,100,100,.4*i),this.sky.addColorStop(0,"#006"),this.sky.addColorStop(1,"#004"),this.hills=this.ctx.createLinearGradient(0,0,0,i),this.hills.addColorStop(0,"#abb"),this.hills.addColorStop(1,"#466"),this.s=1,this.resize(),window.addEventListener("resize",this.resize.bind(this))}return t.prototype.resize=function(){var t,i,e;1!==this.s&&this.ctx.restore(),window.innerHeight<this.height?e=(i=window.innerHeight)/this.height:(i=this.height,e=1),(t=Math.min(window.innerWidth,this.maxWidth*e))<this.minWidth*e&&(i=(e=t/this.minWidth)*this.height),this.canvas.width=t,this.canvas.height=i,this.w=t/e,this.h=i/e,this.s=e,1!==e&&(this.ctx.save(),this.ctx.scale(e,e))},t.prototype.fade=function(t){this.ctx.fillStyle="rgba(0,0,0,"+t+")",this.ctx.fillRect(0,0,this.w,this.h)},t.prototype.blockPaths=function(t,i,e,n){var s;for(s=0;s<t.length;s++)t[s].min>e||t[s].max<i||t[s].path(this.ctx,n)},t.prototype.setText=function(t){this.text=t},t.prototype.showText=function(){this.text&&(this.ctx.fillStyle="#fff",this.ctx.textAlign="center",this.ctx.textBaseline="top",this.ctx.font="30px sans-serif",this.ctx.fillText(this.text,this.w/2,15,this.w-80/this.s))},t}(),n=function(){function t(t){var i;for(t[0].xc=t[0].x,t[0].yc=t[0].y,i=1;i<t.length;i++)void 0===t[i].xc?(t[i].xc=(t[i-1].x+t[i].x)/2,t[i].yc=(t[i-1].y+t[i].y)/2):void 0===t[i].yc&&(t[i].yc=t[i-1].y+(t[i-1].y-t[i-1].yc)*(t[i].xc-t[i-1].x)/(t[i-1].x-t[i-1].xc));this.points=t,this.min=t[0].x,this.max=t[t.length-1].x}return t.prototype.y=function(t){for(var i=0;this.points[i+1].x<t;)i++;var e,n=this.points[i].x,s=this.points[i].y,h=this.points[i+1].xc,x=this.points[i+1].yc,a=this.points[i+1].x;return i=this.points[i+1].y,(1-(t=0==(e=n+a-2*h)?(t-n)/(a-n):(n-h+Math.sqrt(h*h-n*a+e*t))/e))*(1-t)*s+2*t*(1-t)*x+t*t*i},t.prototype.path=function(t){var i;for(i=0;i<this.points.length;i++)t.quadraticCurveTo(this.points[i].xc,this.points[i].yc,this.points[i].x,this.points[i].y)},t.prototype.pathBottom=function(t){var i;for(i=this.points.length,t.moveTo(this.points[i-1].x,this.points[i-1].y-30),i-=2;i>=0;i--)t.quadraticCurveTo(this.points[i+1].xc,this.points[i+1].yc-30,this.points[i].x,this.points[i].y-30)},t.prototype.grass=function(t,i,e,n){var s,h;if(!((i=Math.max(this.min,i-2))+2>=(e=Math.min(this.max,e+2))-2))for(i+=2;i<e-2;i+=5)h=5*Math.floor(i/5),h+=2*Math.sin(h),s=this.y(h),t.moveTo(h,s+5),t.quadraticCurveTo(h,s-10,h+1+3*Math.sin(n/300+h/200),s-13+3*Math.cos(h/100)),t.quadraticCurveTo(h,s-10,h+1.5,s+5),t.closePath()},t}(),s=function(){function t(t,i,e){this.top=t,this.bottom=i,this.type=e,this.min=t.min,this.max=t.max}return t.prototype.inside=function(t,i){var e,n;return!(t<=this.min||t>=this.max)&&(e=this.top.y(t),n=this.bottom.y(t),i>e&&i<n&&{l:t-this.min,r:this.max-t,t:i-e,b:n-i,block:this})},t.prototype.path=function(t,i){2===this.type?this.thornyPath(t,i):(this.bottom.pathBottom(t),this.top.path(t),t.closePath(),3===this.type&&this.waterPath(t,i))},t.prototype.thornyPath=function(t,i){var e,n,s,h,x=!0,a=!0;for(e=this.min,n=this.top.y(e),t.moveTo(e,n),h=this.max-this.min-20,h/=2*Math.round(h/10)+2;e<this.max-10-1.5*h;)e+=x?10+h:h,n=this.top.y(e),a=!a,t.lineTo(e+2*Math.sin(e/30+i/1e3),n+(a?-1:10)),x=!1;for(e=this.max,n=this.top.y(e),t.lineTo(e,n),x=a=!0,h=(s=this.bottom.y(e))-n-20,h/=2*Math.round(h/10)+2;n<s-10-1.5*h;)n+=x?10+h:h,a=!a,t.lineTo(e+(a?1:-10),n+2*Math.sin(n/30+i/1e3)),x=!1;for(t.lineTo(e,s),x=a=!0,h=this.max-this.min-20,h/=2*Math.round(h/10)+2;e>this.min+10+1.5*h;)e-=x?10+h:h,n=this.bottom.y(e),a=!a,t.lineTo(e+2*Math.cos(e/30+i/1e3),n+(a?1:-10)),x=!1;for(e=this.min,n=this.bottom.y(e),t.lineTo(e,n),x=a=!0,h=n-(s=this.top.y(e))-20,h/=2*Math.round(h/10)+2;n>s+10+1.5*h;)n-=x?10+h:h,a=!a,t.lineTo(e+(a?-1:10),n+2*Math.cos(n/30+i/1e3)),x=!1;t.closePath()},t.prototype.waterPath=function(t,i){function e(i){t.moveTo(i-s,n.y(i-s)+2),t.quadraticCurveTo(i,n.y(i)-5,i+s,n.y(i+s)+2)}var n=this.top,s=(this.max-this.min)/5;e(this.min+s+(this.max-this.min-2*s)*(1+Math.sin(i/700))/2),e(this.min+s+(this.max-this.min-2*s)*(1+Math.sin(i/600))/2),e(this.min+s+(this.max-this.min-2*s)*(1+Math.sin(i/500))/2),t.closePath()},t.prototype.y=function(t){return this.top.y(t)},t}(),h=function(){function t(t,i,e){this.min=t,this.max=i,this.v=e,this.x=t}return t.prototype.move=function(t){this.x+=this.v*t,this.x>this.max?(this.x=2*this.max-this.x,this.v*=-1):this.x<this.min&&(this.x=2*this.min-this.x,this.v*=-1)},t.prototype.draw=function(t,i){var e=this.x%1<.5;t.fillStyle="#aaa",t.strokeStyle="#888",t.lineWidth=2,t.beginPath(),t.rect(this.x-40,i+15,80,25),t.moveTo(this.x-30,i+15),t.quadraticCurveTo(this.x,i+5,this.x+30,i+15),t.fill(),t.beginPath(),t.moveTo(this.x-40,i+15),t.lineTo(this.x-50,i),t.lineTo(this.x-30,i+15),t.moveTo(this.x+40,i+15),t.lineTo(this.x+50,i),t.lineTo(this.x+30,i+15),t.moveTo(this.x-50,i),t.lineTo(this.x-(e?40:60),i),t.moveTo(this.x+50,i),t.lineTo(this.x+(e?40:60),i),t.stroke(),t.lineWidth=1,t.beginPath(),t.moveTo(this.x-50,i),t.lineTo(this.x-(e?60:40),i),t.moveTo(this.x+50,i),t.lineTo(this.x+(e?60:40),i),t.stroke()},t}(),x=function(){function t(t,i,e,s){var h,x=[];for(this.ground=t,this.blocks=[[],[],[],[]],h=0;h<i.length;h++)this.blocks[i[h].type].push(i[h]);for(this.droneData=e||[],this.shadows=s||[],this.min=t.min,this.max=t.max,t=this.min,i=100+50*Math.random(),x.push({x:t,y:i});t<this.max;)t+=100+100*Math.random(),i=100+50*Math.random(),x.push({x:t,y:i});this.hills=new n(x)}function e(t,i,n){var s;i<2||(s=i/4,t.rect(-s/2,-i,s,i),t.save(),t.translate(.2*-s,5-i),t.rotate(-.3+n),e(t,.6*i,n),t.restore(),t.save(),t.translate(.2*s,5-i),t.rotate(.4+n),e(t,.7*i,n),t.restore())}return t.prototype.run=function(t,e,n){function s(t){var i;for(i=0;i<l.drones.length;i++)l.drones[i].move(t);r=x.move(y.left,y.right,y.jump,t)}var x,a,c,r,l=this,u=window.requestAnimationFrame||window.mozRequestAnimationFrame;this.animationTime=this.endTime=this.startTime=0,this.drones=this.droneData.map(function(t){return new h(t[0],t[1],t[2]||.1)}),c=!0,x=new o(l),u(function h(o){var m,w,v=0;if(l.intro||(m=c||r?0:Math.abs(x.vx)>.1||Math.abs(x.vy)>.15?-1:1,i.tick(m)),a)if(v=o-a,c||r)(c||-1===r)&&x.move(!1,!1,!1,v);else{t:{for(m=v;m>50;)if(m-=50,s(50),r)break t;m&&s(m)}r&&e(r)}c?c=!l.drawStart(t,x,v):r?w=l.drawEnd(t,x,v,r):l.draw(t,x,v),!c&&!r&&(y.left||y.right||y.jump)&&t.setText(),t.showText(),a=o,l.intro&&l.stop&&(w=!0),w?n(r):u(h)})},t.prototype.insideBlock=function(t,i){var e,n;for(e=0;e<this.blocks[0].length;e++)if(n=this.blocks[0][e].inside(t,i))return n;for(e=0;e<this.blocks[1].length;e++)if(n=this.blocks[1][e].inside(t,i))return n},t.prototype.getEnd=function(t,i){var e;for(e=0;e<this.blocks[2].length;e++)if(this.blocks[2][e].inside(t,i))return 2;for(e=0;e<this.blocks[3].length;e++)if(this.blocks[3][e].inside(t,i))return 3;if(t>=this.max-140)return-1},t.prototype.getDroneEnd=function(t,i){var e;for(e=0;e<this.shadows.length;e++)if(Math.abs(this.shadows[e]-t)<60&&this.ground.y(t)-i<40)return;for(e=0;e<this.drones.length;e++)if(Math.abs(this.drones[e].x-t)<10)return 1},t.prototype.draw=function(t,i,n,s){var h,x,a;for(h=(i.x0+i.x1)/2-t.w/2,h=Math.min(this.max-t.w,h),h=Math.max(0,h),x=(i.y0+i.y1)/2-t.h/3,x=Math.min(0,x),this.animationTime+=n,t.ctx.fillStyle=t.sky,t.ctx.fillRect(0,0,t.w,t.h),t.ctx.fillStyle="#aa8",t.ctx.beginPath(),t.ctx.arc(100,100,55,0,2*Math.PI),t.ctx.fill(),t.ctx.save(),t.ctx.translate(-h/2,-.25*x),t.ctx.fillStyle=t.hills,t.ctx.beginPath(),t.ctx.moveTo(this.min,t.h),this.hills.path(t.ctx),t.ctx.lineTo(this.max,t.h),t.ctx.closePath(),t.ctx.fill(),t.ctx.translate(-h/2,-.75*x),h>this.max-t.w-200&&(n=this.ground.y(this.max-140),t.ctx.fillStyle="#100",t.ctx.beginPath(),t.ctx.rect(this.max-150,n-200,20,220),t.ctx.moveTo(this.max-190,n-170),t.ctx.lineTo(this.max-95,n-170),t.ctx.lineTo(this.max-80,n-155),t.ctx.lineTo(this.max-95,n-140),t.ctx.lineTo(this.max-190,n-140),t.ctx.closePath(),t.ctx.fill(),t.ctx.fillStyle="#aa8",t.ctx.font="20px sans-serif",t.ctx.textAlign="left",t.ctx.textBaseline="alphabetic",t.ctx.fillText(this.next,this.max-160,n-150)),a=0;a<this.drones.length;a++)this.drones[a].draw(t.ctx,10+x);for(t.ctx.fillStyle="#111",t.ctx.beginPath(),a=0;a<this.shadows.length;a++)(x=this.shadows[a])-110>h+t.w||x+110<h||(n=this.ground.y(x),t.ctx.moveTo(x-110,this.ground.y(x-110)+30),t.ctx.bezierCurveTo(x-90,n-140,x+90,n-140,x+110,this.ground.y(x+110)+30),t.ctx.closePath());for(t.ctx.fill(),t.ctx.fillStyle="#100",t.ctx.beginPath(),a=0;a<this.shadows.length;a++)(x=this.shadows[a])-110>h+t.w||x+110<h||(n=this.ground.y(x),t.ctx.save(),t.ctx.translate(x-50,n+10),e(t.ctx,100,.05*Math.sin(this.animationTime/1500)),t.ctx.restore());for(t.ctx.fill(),t.ctx.fillStyle="#001a00",t.ctx.beginPath(),t.ctx.moveTo(this.min,t.h),this.ground.path(t.ctx),t.ctx.lineTo(this.max,t.h),t.ctx.closePath(),t.blockPaths(this.blocks[0],h,h+t.w,this.animationTime),t.ctx.fill(),s||i.draw(t.ctx),t.ctx.fillStyle="#001a00",t.ctx.beginPath(),this.ground.grass(t.ctx,h,h+t.w,this.animationTime),a=0;a<this.blocks[0].length;a++)this.blocks[0][a].top.grass(t.ctx,h,h+t.w,this.animationTime);t.ctx.fill(),t.ctx.fillStyle="#100",t.ctx.beginPath(),t.blockPaths(this.blocks[1],h,h+t.w,this.animationTime),t.ctx.fill(),t.ctx.fillStyle="#200",t.ctx.beginPath(),t.blockPaths(this.blocks[2],h,h+t.w,this.animationTime),t.ctx.fill(),t.ctx.fillStyle="#002",t.ctx.beginPath(),t.blockPaths(this.blocks[3],h,h+t.w,this.animationTime),t.ctx.fill(),s||t.ctx.restore()},t.prototype.drawStart=function(t,i,e){if(this.draw(t,i,e),!this.intro)return this.startTime+=e,t.fade(1-this.startTime/500),this.startTime>500},t.prototype.drawEnd=function(t,i,e,n){var s;switch(this.endTime+=e,this.draw(t,i,e,-1!==n),e=(i.x0+i.x1)/2,s=(i.y0+i.y1)/2,n){case 1:t.ctx.strokeStyle="#f00",t.ctx.lineWidth=2,t.ctx.beginPath(),t.ctx.moveTo(e,s),t.ctx.lineTo(e,50+Math.min(0,s-t.h/3)),t.ctx.stroke();case 2:for(t.ctx.translate(e,s+this.endTime*this.endTime/3e3),t.ctx.fillStyle="#000",i=0;i<100;i++)t.ctx.beginPath(),t.ctx.arc(0,(i+1)*this.endTime/180,4,0,2*Math.PI),t.ctx.fill(),t.ctx.rotate(2.4);t.ctx.restore();break;case 3:t.ctx.fillStyle="#002",t.ctx.beginPath(),t.ctx.arc(e,s,this.endTime,0,2*Math.PI),t.ctx.fill(),i.draw(t.ctx),t.ctx.restore()}return t.fade(this.endTime/1500),this.endTime>1500},t}(),a=function(){function t(t,e,n,s,h,x){t.save(),t.beginPath(),t.rect(0,-80,2*e,100),t.clip(),t.save(),t.scale(-1,1),t.translate(-x*e,0),i(t,e,n,s-x,h),t.restore(),t.translate(-x*e,0),i(t,e,n,s-x,h),t.restore()}function i(i,e,n,s,h,x){function a(t,i,e){return t+(i-t)*(1+Math.sin(2*Math.PI*e))/2}var o,y,c,r,l,u,m,w,v,f,d,p,g,T,M,b,k,P,C,S,A,E,q,j,B,R;x?t(i,e,n,s,h,x):(x=22+17*Math.sin(n),y=5+(o=e-22+17*Math.sin(n)),c=x-5,r=(x+o)/2+e/10,l=2*Math.sin(2*Math.PI*h)-39.5+Math.min(0,e-100),u=(o+y)/2+2+Math.sin(6*h),m=r-e/5,w=l+23,v=(c+x)/2-2-Math.sin(6*h),g=(g=(l- -38)/(r-x))*(p=x-20)+l-g*r,T=10+(f=1.5*Math.sin(7*h)),M=(d=Math.sin(6*h)-12)-10,b=a(0,c+5,s),k=Math.min(0,a(-5,5,s+.75)),P=a(0,c+5,s+.5),C=Math.min(0,a(-5,5,s+.25)),S=a(y-5,e,s+.25),A=Math.min(0,a(-5,5,s)),E=a(y-5,e,s+.75),q=Math.min(0,a(-5,5,s+.5)),j=a(.7*c,c+10,s),B=a(.7*c,c+10,s+.5),R=a(y,.3*y+.7*e,s+.25),e=a(y,.3*y+.7*e,s+.75),i.save(),i.fillStyle="#000",i.strokeStyle="#000",i.lineWidth=7,i.lineCap="round",i.lineJoin="round",i.beginPath(),i.moveTo(x,-38),i.quadraticCurveTo(r,l,o,-41),i.quadraticCurveTo(u,-29,y,-17),i.quadraticCurveTo(m,w,c,-16),i.quadraticCurveTo(v,-27,x,-38),i.fill(),i.stroke(),i.beginPath(),i.moveTo(x,-38),i.bezierCurveTo(p,g,T,M,f,d),i.moveTo(c,-16),i.quadraticCurveTo(j,-8,b,k),i.lineTo(b+2,k),i.moveTo(c+4,-16),i.quadraticCurveTo(j,-8,b,k),i.moveTo(c,-16),i.quadraticCurveTo(B,-8,P,C),i.lineTo(P+3,C),i.moveTo(c+4,-16),i.quadraticCurveTo(B,-8,P,C),i.moveTo(y,-17),i.quadraticCurveTo(R,-8,S,A),i.lineTo(S+2,A),i.moveTo(y-4,-17),i.quadraticCurveTo(R,-8,S,A),i.moveTo(y,-17),i.quadraticCurveTo(e,-8,E,q),i.lineTo(E+3,q),i.moveTo(y-4,-17),i.quadraticCurveTo(e,-8,E,q),i.stroke(),i.translate(o-5,-31),i.rotate(.2*Math.sin(h)-.4*Math.sin(n)),i.beginPath(),i.moveTo(-5,-12),i.bezierCurveTo(10,-12,5,-26,15,-26),i.bezierCurveTo(25,-26,28,-18,28,-15),i.bezierCurveTo(28,-8,10,-10,5,10),i.moveTo(9,-20),i.lineTo(15+2*Math.sin(1.5*h),-30),i.lineTo(22,-20),i.fill(),i.fillStyle="#ff0",i.beginPath(),i.arc(20,-17,2,0,2*Math.PI),i.fill(),i.restore())}return i}(),o=function(){function t(t){this.level=t,this.curve0=t.ground,this.x0=140+e,this.y0=t.ground.y(this.x0),this.curve1=t.ground,this.x1=140,this.y1=t.ground.y(this.x1),this.noRotTime=this.walkPos=this.variationTime=this.jumpTime=this.turning=this.vy=this.vx=0}var e=100;return t.prototype.draw=function(t){var i,e,n;i=this.x0-this.x1,e=this.y0-this.y1,t.save(),t.translate(this.x1,this.y1),n=Math.atan2(e,i),t.rotate(n),i<0&&t.scale(1,-1),a(t,Math.sqrt(i*i+e*e),-n,this.walkPos/100,this.variationTime/1e3,this.turning/200),t.restore()},t.prototype.followCurve=function(t,i,e){var n,s,h=t+e,x=!1,a=!1;return h<this.level.min?(h=this.level.min,x=!0):h>this.level.max&&(h=this.level.max,x=!0),h<i.min?(h=i.min,x=!1,a=!0):h>i.max&&(h=i.max,x=!1,a=!0),n=i.y(h),(s=this.level.insideBlock(h,n))&&(n=s.block,e>0?n.y(n.min)>=i.y(n.min)?h>(i=n).max?(h=i.max,i.y(h),x=!1,a=!0):i.y(h):(h-=s.l,x=!0,a=!1):n.y(n.max)>=i.y(n.max)?h<(i=s.block).min?(h=i.min,i.y(h),x=!1,a=!0):i.y(h):(h+=s.r,x=!0,a=!1),n=i.y(h)),{x:h,y:n,curve:a?null:i,remaining:x||a?1-Math.abs((t-h)/e):0,stop:x}},t.prototype.catchCurve=function(t,i,e,n,s){i+=n;var h=null,x=!1,a=!1;return(t+=e)<this.level.min?(t=this.level.min,x=!0):t>this.level.max&&(t=this.level.max,x=!0),(n=this.level.insideBlock(t,i))&&(e=e<0?n.r:n.l,n.block!==s&&(e=Math.min(e,n.b)),(e=Math.min(e,n.t))===n.l?(t-=n.l,x=!0):e===n.r?(t+=n.r,x=!0):e===n.b?(i+=n.b,a=!0):(i-=n.t,a=!0,h=n.block),x&&n.block===s&&(a=!0,i=(h=n.block).y(t))),i>=this.level.ground.y(t)&&(x=!1,a=!0,i=(h=this.level.ground).y(t)),{x:t,y:i,curve:h,hitSide:x,hitCurve:a}},t.prototype.swap=function(){var t,i,e;t=this.x0,i=this.y0,e=this.curve0,this.x0=this.x1,this.y0=this.y1,this.curve0=this.curve1,this.x1=t,this.y1=i,this.curve1=e},t.prototype.move=function(t,i,e,n){if(this.variationTime+=n,this.jumpTime=Math.max(0,this.jumpTime-n),this.noRotTime=Math.max(0,this.noRotTime-n),this.turning>0){if(this.turning-=n,this.turning>=0)return;n=-this.turning,this.turning=0}return this.curve0&&this.curve1?this.walk(t,i,e,n):this.curve0||this.curve1?this.slide(t,i,e,n):this.fly(t,i,e,n),this.level.getEnd(this.x0,this.y0)||this.level.getEnd(this.x1,this.y1)||this.level.getDroneEnd((this.x0+this.x1)/2,(this.y0+this.y1)/2)},t.prototype.walk=function(t,n,s,h){var x,a,o,y;if(t===n)this.vx=0;else{if(t&&this.x0>this.x1||n&&this.x0<this.x1)return this.turning=200,this.swap(),void(this.vx=0);t?(this.vx-=2e-4*h,this.vx=Math.max(this.vx,-.2)):(this.vx+=2e-4*h,this.vx=Math.min(this.vx,.2))}this.vy=Math.min(0,this.vx*(this.y1-this.y0)/(this.x1-this.x0)),this.jumpTime=0,s?(i.sound("cat0"),this.curve1=this.curve0=null,this.jumpTime=200,this.noRotTime=Math.max(50,2*Math.abs(this.vy)/.3*200),this.fly(t,n,s,h)):(x=this.vx*h,a=this.x0>this.x1?this.x0-this.x1+x-e:this.x0-this.x1+x+e,x>0?(a=Math.min(a,1.5*x),a=Math.max(a,.5*x)):(a=Math.max(a,1.5*x),a=Math.min(a,.5*x)),o=this.followCurve(this.x0,this.curve0,x),y=this.followCurve(this.x1,this.curve1,a),(o.remaining||y.remaining)&&(o.remaining<y.remaining?o=this.followCurve(this.x0,this.curve0,x*(1-y.remaining)):y=this.followCurve(this.x1,this.curve1,a*(1-o.remaining))),this.walkPos+=Math.abs(o.x-this.x0),this.x0=o.x,this.y0=o.y,this.curve0=o.curve,this.x1=y.x,this.y1=y.y,this.curve1=y.curve,o.stop||y.stop?this.vx=0:o.remaining&&(this.jumpTime=200,this.curve0||this.curve1?this.slide(t,n,s,h*o.remaining):this.fly(t,n,s,h*o.remaining)))},t.prototype.slide=function(t,i,n,s){var h;n&&(this.jumpTime=Math.max(this.jumpTime,100),this.vy-=.3*Math.min(s,this.jumpTime)/200,this.vy=Math.max(this.vy,.3*-1.5),this.walkPos+=s*Math.abs(this.vy)),this.vy+=2e-4*s,this.vy=Math.min(this.vy,.2),t===i||t&&this.vx>0||i&&this.vx<0?this.vx=0:t?(this.vx-=2e-4*s,this.vx=Math.max(this.vx,this.x0>this.x1?-.1:-.2)):i&&(this.vx+=2e-4*s,this.vx=Math.min(this.vx,this.x0>this.x1?.2:.1)),this.vy<0?(this.curve1=this.curve0=null,this.fly(!1,!1,!1,s)):(Math.abs(this.y0-this.y1)>.75*e&&(this.vx=0),this.curve0||(h=!0,this.swap()),t=this.vx*s,i=this.vy*s,i=Math.min(i,Math.max(0,this.y0-this.y1+e)),i=Math.max(i,Math.min(0,this.y0-this.y1-e)),(t=this.catchCurve(this.x1,this.y1,t,i,this.curve0)).x===this.x0&&(this.x1>this.x0?t.x+=.01:t.x-=.01),this.x1=t.x,this.y1=t.y,t.hitSide&&(this.vx=0),t.hitCurve&&(this.vy=0),t.curve?this.curve1=t.curve:(t=Math.abs(this.y0-this.y1)<=e?this.x1-this.x0+(this.x0>this.x1?1:-1)*Math.sqrt(e*e-(this.y0-this.y1)*(this.y0-this.y1)):this.x1-this.x0,(t=this.followCurve(this.x0,this.curve0,t)).x===this.x1&&(this.x1>this.x0?this.x1+=.01:this.x1-=.01,this.vx=(t.x-this.x1)/s),this.walkPos+=Math.abs(t.x-this.x0),this.x0=t.x,this.y0=t.y,this.curve0=t.curve,t.stop&&(this.vx=0,t=this.x0>this.x1?this.x0-this.x1-e:this.x0-this.x1+e,(t=this.catchCurve(this.x1,this.y1,t,0,this.curve0)).x===this.x0&&(this.x1>this.x0?t.x+=.01:t.x-=.01),this.x1=t.x,this.y1=t.y,t.hitSide&&(this.vx=0),t.hitCurve&&(this.vy=0),t.curve&&(this.curve1=t.curve))),h&&this.swap())},t.prototype.fly=function(t,n,s,h){var x,a,o,y,c;x=.2,0===this.jumpTime&&(x/=10),(t&&this.x0>this.x1||n&&this.x0<this.x1)&&(x/=2),x=Math.max(Math.abs(this.vx),x),t?(this.vx-=2e-4*h,this.vx=Math.max(this.vx,-x)):n&&(this.vx+=2e-4*h,this.vx=Math.min(this.vx,x)),s&&(this.vy-=.3*Math.min(h,this.jumpTime)/200,this.vy=Math.max(this.vy,.3*-1.5)),this.vy+=2e-4*h,this.vy=Math.min(this.vy,.2),t=this.vx*h,n=this.vy*h,x=Math.atan2(this.y0-this.y1,Math.abs(this.x0-this.x1)),a=(Math.atan2(n,Math.abs(t))-x)%(2*Math.PI),this.x0<this.x1&&(a=-a),a=Math.min(Math.abs(n)/e,7e-4*Math.max(0,h-this.noRotTime),a),a=Math.max(-Math.abs(n)/e,7e-4*-Math.max(0,h-this.noRotTime),a),x=Math.sin(a),a=Math.cos(a)-1,o=(this.x0+this.x1)/2,y=(this.y0+this.y1)/2,c=this.catchCurve(this.x0,this.y0,t+(this.x0-o)*a-(this.y0-y)*x,n+(this.x0-o)*x+(this.y0-y)*a),this.x0=c.x,this.y0=c.y,s||this.noRotTime||(this.curve0=c.curve),c.hitSide&&(this.jumpTime=Math.max(this.jumpTime,100),this.vx=0,this.walkPos+=h*Math.abs(this.vy)),c.hitCurve&&!this.noRotTime&&(this.vy=0),(c=this.catchCurve(this.x1,this.y1,t+(this.x1-o)*a-(this.y1-y)*x,n+(this.x1-o)*x+(this.y1-y)*a)).x===this.x0&&(this.x1>this.x0?c.x+=.01:c.x-=.01),this.x1=c.x,this.y1=c.y,s||this.noRotTime||(this.curve1=c.curve),c.hitSide&&(this.jumpTime=Math.max(this.jumpTime,100),this.vx=0),c.hitCurve&&!this.noRotTime&&(this.vy=0),this.curve0&&this.curve1&&(this.vx=0),(this.curve0||this.curve1)&&i.sound("cat1")},t}(),y=function(){function t(t){var n=function(t){if(!t.ctrlKey&&!t.altKey&&!t.shiftKey)switch(t.key&&"Unidentified"!==t.key?{Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight"}[t.key]||t.key:{37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight"}[t.which]){case"a":case"q":case"ArrowLeft":return"left";case"d":case"ArrowRight":return"right";case"w":case"z":case" ":case"ArrowUp":return"jump";case"m":return"audio"}}(t);"audio"===n?"keydown"===t.type&&(i.checked=!i.checked,i.dispatchEvent(new Event("change")),t.preventDefault()):n&&(e[n]="keydown"===t.type,t.preventDefault())}var i,e={left:!1,right:!1,jump:!1};return i=document.getElementById("a"),document.addEventListener("keydown",t),document.addEventListener("keyup",t),document.addEventListener("blur",function(){e.left=!1,e.right=!1,e.jump=!1}),e}(),c=[[new x(new n([{x:0,y:600},{x:200,y:630,xc:100,yc:630},{x:400,y:600,xc:300},{x:800,y:580,xc:500},{x:1200,y:500,xc:900},{x:1500,y:400,xc:1400},{x:1600,y:600,xc:1510},{x:1800,y:600,xc:1700},{x:2700,y:600}]),[new s(new n([{x:1500,y:400},{x:1900,y:400}]),new n([{x:1500,y:480},{x:1900,y:480}]),1),new s(new n([{x:1800,y:430},{x:1830,y:430}]),new n([{x:1800,y:630},{x:1830,y:630}]),1),new s(new n([{x:1615,y:630},{x:1785,y:630}]),new n([{x:1615,y:670},{x:1785,y:670,xc:1697,yc:850}]),3)],[],[600]),"Use ←/→ or A/D to move."],[new x(new n([{x:0,y:600},{x:200,y:630,xc:50,yc:600},{x:400,y:620,xc:350},{x:800,y:580,xc:450},{x:1250,y:500},{x:1400,y:550,xc:1300,yc:480},{x:3300,y:600,xc:1600}]),[new s(new n([{x:800,y:550},{x:950,y:550}]),new n([{x:800,y:620},{x:950,y:620}]),1),new s(new n([{x:1400,y:380},{x:1850,y:360,xc:1600,yc:350}]),new n([{x:1400,y:450},{x:1850,y:450}]),0),new s(new n([{x:2e3,y:230},{x:2500,y:230}]),new n([{x:2e3,y:290},{x:2500,y:290}]),1),new s(new n([{x:2050,y:240},{x:2070,y:240}]),new n([{x:2050,y:730},{x:2070,y:730}]),1),new s(new n([{x:2430,y:240},{x:2450,y:240}]),new n([{x:2430,y:730},{x:2450,y:730}]),1),new s(new n([{x:2600,y:430},{x:2800,y:430}]),new n([{x:2600,y:490},{x:2800,y:490}]),1)]),"Use ↑ or W or Space to jump."],[new x(new n([{x:0,y:600},{x:200,y:640},{x:400,y:610,xc:300,yc:620},{x:800,y:580,xc:600},{x:1200,y:500,xc:1e3},{x:1400,y:600,xc:1250},{x:1401,y:650},{x:1499,y:650},{x:1500,y:600},{x:2e3,y:600},{x:2001,y:620},{x:2999,y:620},{x:3e3,y:600},{x:3600,y:590}]),[new s(new n([{x:600,y:570},{x:800,y:570,xc:750,yc:520}]),new n([{x:600,y:620},{x:800,y:620,xc:700,yc:650}]),2),new s(new n([{x:1400,y:600},{x:1500,y:600}]),new n([{x:1400,y:700},{x:1500,y:700,xc:1450,yc:800}]),3),new s(new n([{x:2e3,y:600},{x:3e3,y:600}]),new n([{x:2e3,y:650},{x:3e3,y:650,xc:2500,yc:700}]),3),new s(new n([{x:2200,y:400},{x:2700,y:400,xc:2450,yc:350}]),new n([{x:2200,y:480},{x:2700,y:480,xc:2450,yc:500}]),0),new s(new n([{x:2400,y:370},{x:2500,y:370,xc:2450,yc:320}]),new n([{x:2400,y:420},{x:2500,y:420}]),2)]),"Be careful!",[2,3]],[new x(new n([{x:0,y:550},{x:200,y:600,xc:100,yc:580},{x:400,y:570,xc:250},{x:1e3,y:600,xc:600},{x:1700,y:600,xc:1400}]),[new s(new n([{x:700,y:250},{x:900,y:250,xc:800,yc:200}]),new n([{x:700,y:630},{x:900,y:630}]),1)]),"To climb a wall jump against it, then jump again."],[new x(new n([{x:0,y:600},{x:3600,y:600,xc:1800,yc:400}]),[],[[900,1700,.08],[1800,3e3,.12]],[1100,2800]),"Watch out for drones!",[1]],[new x(new n([{x:0,y:600},{x:3600,y:600,xc:1800,yc:495}]),[new s(new n([{x:600,y:550},{x:3e3,y:550}]),new n([{x:600,y:650},{x:3e3,y:650}]),2),new s(new n([{x:0,y:350},{x:300,y:400}]),new n([{x:0,y:450},{x:300,y:500}]),0),new s(new n([{x:600,y:200},{x:1600,y:200}]),new n([{x:600,y:280},{x:1600,y:280}]),1),new s(new n([{x:2e3,y:200},{x:3e3,y:200}]),new n([{x:2e3,y:280},{x:3e3,y:280}]),1)])],[new x(new n([{x:0,y:600},{x:1e3,y:600,xc:500,yc:650},{x:2e3,y:600,xc:1500},{x:3e3,y:600,xc:2500}]),[new s(new n([{x:600,y:600},{x:700,y:600,xc:650,yc:580}]),new n([{x:600,y:650},{x:700,y:650}]),2),new s(new n([{x:1e3,y:570},{x:1100,y:570,xc:1050,yc:550}]),new n([{x:1e3,y:620},{x:1100,y:620}]),2),new s(new n([{x:1400,y:560},{x:1500,y:560,xc:1450,yc:540}]),new n([{x:1400,y:610},{x:1500,y:610}]),2),new s(new n([{x:1800,y:570},{x:1900,y:570,xc:1850,yc:550}]),new n([{x:1800,y:620},{x:1900,y:620}]),2),new s(new n([{x:2200,y:600},{x:2300,y:600,xc:2250,yc:580}]),new n([{x:2200,y:650},{x:2300,y:650}]),2),new s(new n([{x:2600,y:600},{x:2700,y:600,xc:2650,yc:580}]),new n([{x:2600,y:650},{x:2700,y:650}]),2)],[[500,1200],[1600,2500],[1750,2650]],[850,2050])],[new x(new n([{x:0,y:600},{x:300,y:600},{x:301,y:620},{x:2999,y:620},{x:3e3,y:600},{x:3500,y:600}]),[new s(new n([{x:300,y:600},{x:3e3,y:600}]),new n([{x:300,y:650},{x:3e3,y:650,xc:1650,yc:700}]),3),new s(new n([{x:400,y:500},{x:700,y:500}]),new n([{x:400,y:550},{x:700,y:550,xc:550,yc:600}]),0),new s(new n([{x:900,y:350},{x:1150,y:350}]),new n([{x:900,y:450},{x:1150,y:450}]),1),new s(new n([{x:1400,y:200},{x:1600,y:200,xc:1500,yc:180}]),new n([{x:1400,y:300},{x:1600,y:300,xc:1500,yc:350}]),0),new s(new n([{x:1750,y:150},{x:1850,y:150,xc:1800,yc:100}]),new n([{x:1750,y:180},{x:1850,y:180,xc:1800,yc:230}]),2),new s(new n([{x:1750,y:0},{x:1850,y:0,xc:1800,yc:-50}]),new n([{x:1750,y:30},{x:1850,y:30,xc:1800,yc:80}]),2),new s(new n([{x:1850,y:500},{x:2e3,y:500}]),new n([{x:1850,y:600},{x:2e3,y:600}]),1),new s(new n([{x:2100,y:250},{x:2400,y:200,xc:2300,yc:200}]),new n([{x:2100,y:450},{x:2400,y:450}]),0)])],[new x(new n([{x:0,y:600},{x:260,y:600},{x:261,y:620},{x:799,y:620},{x:800,y:600},{x:1300,y:600},{x:1301,y:620},{x:1799,y:620},{x:1800,y:600},{x:2300,y:600},{x:2301,y:620},{x:2839,y:620},{x:2840,y:600},{x:3300,y:600}]),[new s(new n([{x:260,y:600},{x:800,y:600}]),new n([{x:260,y:650},{x:800,y:650,xc:530,yc:700}]),3),new s(new n([{x:1300,y:600},{x:1800,y:600}]),new n([{x:1300,y:650},{x:1800,y:650,xc:1550,yc:700}]),3),new s(new n([{x:2300,y:600},{x:2840,y:600}]),new n([{x:2300,y:650},{x:2840,y:650,xc:2570,yc:700}]),3)],[[1100,2e3]],[1100,2e3])],[new x(new n([{x:0,y:600},{x:1e3,y:600,xc:500,yc:650},{x:1800,y:600,xc:1500},{x:2e3,y:600},{x:2001,y:630},{x:2199,y:630},{x:2200,y:600},{x:2350,y:600},{x:2351,y:630},{x:2499,y:630},{x:2500,y:600},{x:3e3,y:600}]),[new s(new n([{x:850,y:500},{x:1050,y:500,xc:950,yc:450}]),new n([{x:850,y:630},{x:1050,y:630}]),2),new s(new n([{x:850,y:200},{x:1050,y:200}]),new n([{x:850,y:350},{x:1050,y:350,xc:950,yc:300}]),2),new s(new n([{x:1450,y:400},{x:1500,y:400}]),new n([{x:1450,y:600},{x:1500,y:600}]),2),new s(new n([{x:1450,y:120},{x:1500,y:120}]),new n([{x:1450,y:270},{x:1500,y:270}]),2),new s(new n([{x:2e3,y:600},{x:2200,y:600}]),new n([{x:2e3,y:670},{x:2200,y:670,xc:2100,yc:690}]),3),new s(new n([{x:2350,y:600},{x:2500,y:600}]),new n([{x:2350,y:670},{x:2500,y:670,xc:2425,yc:690}]),3),new s(new n([{x:2050,y:300},{x:2450,y:300,xc:2250,yc:280}]),new n([{x:2050,y:400},{x:2450,y:400,xc:2250,yc:420}]),2)])],[new x(new n([{x:0,y:600},{x:3600,y:600,xc:1800,yc:500}]),[],[[-500,500,.05],[300,1e3],[600,1300,.12],[900,2400],[1400,2800],[1600,3e3,.12],[2200,3400,.09],[3e3,3700,.2]],[800,2e3,2800])],[new x(new n([{x:0,y:600},{x:1e3,y:600,xc:500,yc:550},{x:2e3,y:600,xc:1500},{x:3e3,y:600,xc:2500},{x:4e3,y:600,xc:3500},{x:5e3,y:600,xc:4500}]),[new s(new n([{x:350,y:450},{x:550,y:450,xc:450,yc:430}]),new n([{x:350,y:520},{x:550,y:520,xc:450,yc:550}]),0),new s(new n([{x:750,y:250},{x:950,y:250,xc:850,yc:230}]),new n([{x:750,y:320},{x:950,y:320,xc:850,yc:350}]),0),new s(new n([{x:1250,y:150},{x:1450,y:150,xc:1350,yc:130}]),new n([{x:1250,y:220},{x:1450,y:220,xc:1350,yc:250}]),0),new s(new n([{x:1750,y:150},{x:1950,y:150,xc:1850,yc:130}]),new n([{x:1750,y:220},{x:1950,y:220,xc:1850,yc:250}]),0),new s(new n([{x:2350,y:150},{x:2550,y:150,xc:2450,yc:130}]),new n([{x:2350,y:220},{x:2550,y:220,xc:2450,yc:250}]),0),new s(new n([{x:2850,y:150},{x:3e3,y:150,xc:2925,yc:130}]),new n([{x:2850,y:220},{x:3e3,y:220,xc:2925,yc:250}]),0),new s(new n([{x:3350,y:150},{x:3500,y:150,xc:3425,yc:130}]),new n([{x:3350,y:220},{x:3500,y:220,xc:3425,yc:250}]),0),new s(new n([{x:3600,y:200},{x:3700,y:200}]),new n([{x:3600,y:650},{x:3700,y:650}]),2)])],[new x(new n([{x:0,y:600},{x:1e3,y:600,xc:500,yc:550},{x:2e3,y:600,xc:1500},{x:3e3,y:600,xc:2500},{x:4e3,y:600,xc:3500},{x:5e3,y:600,xc:4500}]),[new s(new n([{x:600,y:450},{x:650,y:450}]),new n([{x:600,y:650},{x:650,y:650}]),1),new s(new n([{x:1150,y:590},{x:1330,y:600}]),new n([{x:1150,y:640},{x:1330,y:650}]),2),new s(new n([{x:1900,y:450},{x:2e3,y:450}]),new n([{x:1900,y:650},{x:2e3,y:650}]),1),new s(new n([{x:2500,y:550},{x:2700,y:550}]),new n([{x:2500,y:600},{x:2700,y:600}]),2),new s(new n([{x:3500,y:450},{x:3550,y:450}]),new n([{x:3500,y:670},{x:3550,y:670}]),1),new s(new n([{x:4100,y:560},{x:4300,y:550}]),new n([{x:4100,y:610},{x:4300,y:600}]),2)],[[-400,5e3,.195]]),"RUN!"]],r=function(){var t=new e(document.getElementById("i"),250,450,450),i=new x(new n([{x:0,y:210},{x:500,y:240,xc:250,yc:190}]),[]);return i.intro=!0,{setLabel:function(t){i.next=t},start:function(){i.run(t,null,function(){})},stop:function(){i.stop=!0}}}(),function(){function n(t){var e=!1;if(-1===l.hints.indexOf(t)&&(l.hints.push(t),e=!0),m.indexOf(t)>-1&&(e=!0),e){if(-1===t){var n=Math.round(l.time/1e3);for((e=[]).unshift(n%60),n=Math.floor(n/60),e.unshift(n%60),(n=Math.floor(n/60))&&e.unshift(n),n=1;n<e.length;n++)e[n]<10&&(e[n]="0"+e[n]);switch(e=e.join(":"),l.deaths){case 0:e="You win without ever dying after "+e+"!";break;case 1:e="You win (after having died once) after "+e+"!";break;default:e="You win (after having died "+l.deaths+" times) after "+e+"!"}u[t]=e}y.setText(u[t])}i.sound("end"+t)}function s(i,e){var s,h=c[i];m=h[2]||[],i===c.length-1&&m.push(-1),y.setText(h[1]),l.level=i,s=Date.now(),h[0].run(y,n,function i(x){l.time+=Date.now()-s,-1!==x?(l.deaths++,t.set(l),s=Date.now(),h[0].run(y,n,i)):(l.level++,t.set(l),e())})}function h(t,i){t===c.length?i():s(t,function(){h(t+1,i)})}function x(e){e&&(l.level=0,l.deaths=0,l.time=0),r.stop(),document.getElementById("s").hidden=!0,document.getElementById("g").hidden=!1,i.start(),h(l.level,function(){l.level=0,l.deaths=0,l.time=0,t.set(l),y.ctx.fillText("Finally! I found my owner!",y.w/2,200,y.w),y.ctx.fillText("Now where is my dinner?",y.w/2,250,y.w)})}var a,o,y,l,u,m,w;for(o=c.length,a=0;a<o-1;a++)c[a][0].next=a+2+"/"+o;c[o-1][0].next="End",y=new e(document.getElementById("c"),700,900,1400),l=t.get({level:0,deaths:0,time:0,hints:[-1],audio:!0}),u=["","As a black cat, you can hide from drones in the shadows below trees.","Keep away from thorns.","Keep away from water."],w=document.getElementById("a"),a=document.getElementById("p"),o=document.getElementById("n"),w.checked=l.audio,i.setMode(l.audio?2:0),w.addEventListener("change",function(){l.audio=w.checked,i.setMode(l.audio?2:0),t.set(l)}),0===l.level?(a.style.display="none",o.textContent="Start game"):(o.addEventListener("mouseenter",function(){r.setLabel("1/"+c.length)}),o.addEventListener("mouseleave",function(){r.setLabel(l.level+1+"/"+c.length)}),o.addEventListener("focus",function(){r.setLabel("1/"+c.length)}),o.addEventListener("blur",function(){r.setLabel(l.level+1+"/"+c.length)})),r.setLabel(l.level+1+"/"+c.length),r.start(),a.addEventListener("click",function(){x()}),o.addEventListener("click",function(){x(!0)}),document.getElementById("i").addEventListener("click",function(){x()})}()</script>