<!doctype html><meta content="width=device-width" name=viewport><title>Perditus</title><style>*{margin:0;padding:5px}.hidden{display:none;background-color:#3c543d}.grid{display:grid;grid-template-columns:1fr auto auto auto 1fr;grid-template-rows:auto auto auto;grid-template-areas:". . title . ." ". stats content log ." ". . dialogs . ."}#page{height:100%;background-color:#3c543d}.title{grid-area:title;text-align:center;color:#a88b30;align-self:center}.stats{grid-area:stats;background-color:#f7f8f4;width:150px;padding:12px;font-size:14px;float:left}.stat-value{float:right}.update-positive{color:green}.update-negative{color:red}.content{grid-area:content;align-self:center;width:320px;padding:15px;padding-top:60px;background-color:#9eaf77}#trees{width:95%;image-rendering:pixelated}#lost{position:relative;bottom:47px;left:0}.dialogs{grid-area:dialogs;align-self:center;background-color:#f7f8f4;float:relative;padding-bottom:20px;margin-bottom:300px}.log{grid-area:log;align-self:center;background-color:#f7f8f4;width:300px;height:160px;font-size:12px;overflow-y:scroll}</style><div class=grid id=page><div class=title id=title><h1>Perditus</h1><p>Latin (adj): broke, debilitated, lost, done for, ruined<p>- Oxford Latin Dictionary, 1982</div><div class=stats id=stats><div class=stat>Strength <span class=stat-value id=stat-strength></span></div><div class=stat>Health <span class=stat-value id=stat-health></span></div><div class=stat>Energy <span class=stat-value id=stat-energy></span></div><div class=stat>Food <span class=stat-value id=stat-food></span></div></div><div class=content id=display><img id=trees src=trees.png> <img id=lost src=player.png></div><div class=dialogs id=dialogs><div class=hidden id=attack><div id=attack-description></div><button id=fight>Fight</button> <button id=run>Run away</button></div></div><div class=log id=log></div></div><script>var Amissa=Amissa||{};Amissa.Event={},Amissa.Event.eventTypes=[{type:"STAT-CHANGE",notification:"positive",stat:"strength",value:2,text:"Thoughts of your family cause you to push on. Strength: +"},{type:"STAT-CHANGE",notification:"negative",stat:"food",value:-2,text:"Some of your food has gone bad. Food: -"},{type:"STAT-CHANGE",notification:"negative",stat:"health",value:-15,text:"Fell down a hill. Health: -"},{type:"STAT-CHANGE",notification:"negative",stat:"strength",value:-2,text:"You trip and twist your ankle. Strength: -"},{type:"STAT-CHANGE",notification:"negative",stat:"energy",value:-5,text:"You see something in the distance, panic, and begin sprinting. Energy: -"},{type:"STAT-CHANGE",notification:"negative",stat:"health",value:-15,text:"Sickness sets in. Health: -"},{type:"STAT-CHANGE",notification:"positive",stat:"food",value:3,text:"Found some berries. Food: +"},{type:"STAT-CHANGE",notification:"negative",stat:"food",value:-2,text:"You crossed the river, but lost some food along the way. Food: -"},{type:"NEUTRAL",notification:"neutral",text:"I just want to go home."},{type:"NEUTRAL",notification:"neutral",text:"You spot an odd formation of rocks, am I alone?"},{type:"NEUTRAL",notification:"neutral",text:"You crossed a small river successfully."},{type:"NEUTRAL",notification:"neutral",text:"My head hurts. What happened?"},{type:"NEUTRAL",notification:"neutral",text:"I just want to sleep"},{type:"NEUTRAL",notification:"neutral",text:"Is that someone in the distance?"},{type:"ATTACK",notification:"negative",text:"A bear appears from behind a tree"},{type:"ATTACK",notification:"negative",text:"A pack of wolves surrounds you"},{type:"ATTACK",notification:"negative",text:"A large cougar locks eyes with you"}],Amissa.Event.generateEvent=function(){var t=Math.floor(Math.random()*this.eventTypes.length),e=this.eventTypes[t];"STAT-CHANGE"==e.type?this.stateChangeEvent(e):"ATTACK"==e.type?(this.game.pause(),this.ui.notify(e.text,e.notification),this.attackEvent(e)):"NEUTRAL"==e.type&&this.ui.notify(e.text,e.notification)},Amissa.Event.stateChangeEvent=function(t){t.value+this.lost[t.stat]>=0&&(this.lost[t.stat]+=t.value,this.ui.notify(t.text+Math.abs(t.value),t.notification))},Amissa.Event.attackEvent=function(t){var e=Math.round((.5+.55*Math.random())*Amissa.ENEMY_STRENGTH_AVG),i=Math.round(.5+1.1*Math.random());this.ui.showAttack(e,i)},Amissa.Lost={},Amissa.Lost.init=function(t){this.day=t.day,this.health=t.health,this.strength=t.strength,this.food=t.food,this.energy=t.energy,this.distance=0},Amissa.Lost.consumeFood=function(){this.food-=Amissa.FOOD_RATE,this.food<0&&(this.food=0)},Amissa.Lost.updateDistance=function(){if(this.health>74)var t=1.15*Amissa.SPEED;else t=this.health>39?Amissa.SPEED:.75*Amissa.SPEED;this.distance+=t},Amissa.UI={},Amissa.UI.notify=function(t,e){document.getElementById("log").innerHTML='<div class="update-'+e+'"> Day '+Math.ceil(this.lost.day)+": "+t+"</div>"+document.getElementById("log").innerHTML},Amissa.UI.refreshStats=function(){document.getElementById("stat-health").innerHTML=this.lost.health,document.getElementById("stat-food").innerHTML=Math.ceil(this.lost.food),document.getElementById("stat-energy").innerHTML=this.lost.energy,document.getElementById("stat-strength").innerHTML=this.lost.strength,document.getElementById("lost").style.left=380*this.lost.distance/Amissa.FINAL_DISTANCE+"px"},Amissa.UI.showAttack=function(t,e){document.getElementById("attack").classList.remove("hidden"),this.power=t,this.food=e,document.getElementById("attack-description").innerHTML="Strength: "+t,this.attackInitiated||(document.getElementById("fight").addEventListener("click",this.fight.bind(this)),document.getElementById("run").addEventListener("click",this.run.bind(this)),this.attackInitiated=!0)},Amissa.UI.fight=function(){var t=Math.ceil(Math.max(0,2*this.power*Math.random()-this.lost.strength));t>this.lost.strength?(this.lost.health-=t,this.notify("You took "+t+" damage","negative")):(this.lost.food+=this.food,this.notify("You win this battle. You've gained "+this.food+" food","positive")),this.lost.energy-=35,document.getElementById("attack").classList.add("hidden"),this.game.resume()},Amissa.UI.run=function(){var t=Math.ceil(Math.max(0,this.power*Math.random()/2));t<this.lost.strength?(this.lost.health-=t,this.notify("You took "+t+" damage running away","negative")):(this.lost.health=0,this.notify("You died running away","negative")),document.getElementById("attack").classList.add("hidden"),this.game.resume()},Amissa.GAME_SPEED=800,Amissa.DAY_PER_STEP=.25,Amissa.EVENT_PROB=.25,Amissa.FOOD_RATE=.1,Amissa.FINAL_DISTANCE=1e3,Amissa.ENEMY_STRENGTH_AVG=6,Amissa.SPEED=5,Amissa.Game={},Amissa.Game.init=function(){this.ui=Amissa.UI,this.eventManager=Amissa.Event,this.lost=Amissa.Lost,this.lost.init({day:0,health:100,strength:4,food:10,energy:75,distance:0}),this.lost.ui=this.ui,this.lost.eventManager=this.eventManager,this.ui.game=this,this.ui.lost=this.lost,this.ui.eventManager=this.eventManager,this.eventManager.game=this,this.eventManager.lost=this.lost,this.eventManager.ui=this.ui,this.start()},Amissa.Game.start=function(){this.gameActive=!0,this.previousTime=null,this.ui.notify("You awaken. You appear Lost in the cold woods.","neutral"),this.step()},Amissa.Game.step=function(t){this.previousTime||(this.previousTime=t,this.updateGame()),t-this.previousTime>=Amissa.GAME_SPEED&&(this.previousTime=t,this.updateGame()),this.gameActive&&window.requestAnimationFrame(this.step.bind(this))},Amissa.Game.updateGame=function(){return this.lost.day+=Amissa.DAY_PER_STEP,this.lost.consumeFood(),this.lost.food<=0?(this.lost.food=0,this.ui.notify("You're starving.","negative"),this.lost.energy-=2,this.lost.energy<0&&(this.lost.energy=0)):this.lost.food>=0&&(this.lost.food-=Amissa.FOOD_RATE,this.lost.energy+=5,this.lost.energy>100&&(this.lost.energy=100)),this.lost.energy>0?(this.lost.health+=2,this.lost.health>100&&(this.lost.health=100)):(this.lost.energy=0,this.lost.health-=2),this.lost.updateDistance(),this.ui.refreshStats(),this.lost.distance>=Amissa.FINAL_DISTANCE?(this.ui.notify("You have made it home safely.","positive"),void(this.gameActive=!1)):this.health<=0?(this.health=0,this.ui.notify("You have died.","negative"),void(this.gameActive=!1)):void(Math.random()<=Amissa.EVENT_PROB&&this.eventManager.generateEvent())},Amissa.Game.pause=function(){this.gameActive=!1},Amissa.Game.resume=function(){this.gameActive=!0,this.step()},Amissa.Game.init()</script>