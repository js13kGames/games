<title>Operation Cleanaholeic - js13kgames 2021</title><meta content="width=device-width,maximum-scale=1,minimum-scale=1,user-scalable=no" name=viewport><script src=/socket.io.js></script><script>"use strict";let h,p;h=(t=1,e=.05,o=220,n=0,i=0,a=.1,s=0,r=1,h=0,l=0,d=0,g=0,c=0,f=0,u=1,m=0,y=0)=>{let w,v,x=Math,b=2*x.PI,I=h*=500*b/44100/44100,A=o*=(1-e+2*e*x.random(e=[]))*b/44100,M=0,B=0,E=0,T=1,k=0,j=0,L=0;var C=500*b/44100**3*0,S=b/44100*0;for(l*=b/44100,d*=44100,g=44100*g|0,v=(n=44100*n+9)+(m*=44100)+(i*=44100)+(a*=44100)+(f*=44100)|0;E<v;e[E++]=L)++j%(100*c|0)||(L=s?1<s?2<s?3<s?x.sin((M%b)**3):x.max(x.min(x.tan(M),1),-1):1-(2*M/b%2+2)%2:1-4*x.abs(x.round(M/b)-M/b):x.sin(M),L=(g?1-y+y*x.sin(b*E/g):1)*(0<L?1:-1)*x.abs(L)**r*t*.3*(E<n?E/n:E<n+m?1-(E-n)/m*(1-u):E<n+m+i?u:E<v-f?(v-E-f)/a*u:0),L=f?L/2+(f>E?0:(E<v-f?1:(v-E)/f)*e[E-f|0]/2):L),w=(o+=h+=C)*x.cos(S*B++),M+=w-0*w*(1-1e9*(x.sin(E)+1)%2),T&&++T>d&&(o+=l,A+=l,T=0),!g||++k%g||(o=A,h=I,T=T||1);(t=p.createBuffer(1,v,44100)).getChannelData(0).set(e),(o=p.createBufferSource()).buffer=t,o.connect(p.destination),o.start()},p=new(window.AudioContext||webkitAudioContext);var aa=[["üåë",5,0,!1,10],["üöÄ",5,.125,!0,20],["üõ∞Ô∏è",5,.125,!0,10],["x",30,0,!1,0,40],["d",5,.5,!0,0,0,!0],["üåç",5,0,!1,10],["üéÉ",5,0,!0,0,0,!0],["üõ∏",5,0,!1,0,0,!0],["üëΩ",5,0,!1,0,0,!0],["‚≠ê",5,.25,!0,10],["üåü",5,.25,!0,15],["‚ú®",5,0,!0,20],["ü™ê",5,0,!0,25],["üóø",5,0,!0,0,0,!0],["üöó",5,.5,!0,50],["üåÄ",5,0,!0,50]],ba=[[[[3,60,25,0,0,1e10],[0,20,15,0,0,1e3]],2,0,0,2,10,"Let's start with that rock, try to fling it into the black hole."],[[[3,50,25,0,0,1e10],[0,10,35,0,0,1e3],[0,90,20,0,0,1e3]],1,0,0,2,20,"The yellow bar shows the force you can use, the purple one shows the progress of the black hole."],[[[3,10,25,0,0,1e10],[1,75,25,-.1,-.03,1e3],[9,70,10,0,0,1e3],[2,60,35,0,0,1e3]],1,0,0,2,30,"On some levels you don't need to clear all objects to complete (notice the brighter part of the bar above).<br/><br/>If you want perfect score though, you need to plan the order of clearing them."],[[[3,5,25,0,0,1e10],[0,60,23,0,-.005,1e11],[1,80,23,0,.5,1e9]],.5,0,0,2,20,"Objects can also orbit around one another if the conditions are right."],[[[3,80,25,0,0,1e10],[0,20,23,0,-.005,1e11],[2,40,23,0,.5,1e9],[1,80,40,-.08,0,1e9]],.5,0,0,2,40],[[[3,20,20,0,0,1e10],[0,90,23,0,0,1e7],[2,90,29,-.011,0,100],[2,90,9.49,.0048,0,100],[1,80,35,-.08,.03,1e3],[8,20,75,-.02,-.04,1e3]],1,0,0,1.76,50,"There are some friendly things that you should not let fall into the black hole.<br/><br/>Their tracks are marked in red."],[[[3,70,30,0,0,1e10],[0,20,20,0,0,1e11],[1,20,40,.5,0,1e9],[2,20,50,.5,0,1e9]],1,0,5,1.5,30,""],[[[3,5,25,0,0,1e10],[5,60,20,0,-.005,1e9],[2,70,20,0,.065,1e3],[1,60,60,.02,-.05,100]],.5,0,0,2,30,"Be careful with planets having radars, they are constantly checking for their satellites."],[[[3,90,50,0,0,1e10],[3,30,30,0,0,1e10],[10,76,9,-.095,-.018,1e3],[0,120,15,0,0,1e3],[4,110,90,0,-.18,1e3]],1,0,5,1.25,25,""],[[[3,70,30,0,0,1e10],[0,30,20,0,0,1e8],[1,70,10,.16,0,1e3],[1,70,54,-.075,0,1e3],[9,20,0,.11,0,1e3]],1,0,5,1.5,60,""],[[[3,48,25,0,0,1e10]],1,0,5,2,42,"Well, this is how far I got with the game.<br/><br/>This is not really a level, just a way to say good bye.<br/><br/>Thanks for playing, I really appreciate it!<br/><br/>Gabor Heja, 2021"]];function q(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function ca(t,e){return(Math.atan2(e.y-t.y,e.x-t.x)/(2*Math.PI)+1)%1}function da(t){return t[Math.floor(Math.random()*t.length)]}function u(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}function v(t,e){t.x=e.x,t.y=e.y}function ea(t){var e=Math.abs(t.x)+Math.abs(t.y);t.x/=e,t.y/=e}function fa(){this.g=document.getElementById("c2"),this.g.width=512,this.g.height=512,this.h=this.g.getContext("2d")}function ha(t,e){var o,n,i,a,s=document.createElement("canvas");s.width=512,s.height=512;var r=s.getContext("2d"),h=[];for(o=0;512>=o;o++)for(h[o]=[],n=0;512>=n;n++)h[o][n]=0;var l=512;for(i=1;0<l;){for(n=0;512>n;n+=l)for(o=l;512>o;o+=2*l)h[o][n]=(h[o-l][n]+h[o+l][n])/2+(Math.random()-.5)*i*2;for(o=0;512>o;o+=l)for(n=l;512>n;n+=2*l)h[o][n]=(h[o][n-l]+h[o][n+l])/2+(Math.random()-.5)*i*2;l=Math.floor(l/2),i/=2}var d=1;for(o=a=0;512>o;o++)for(n=0;512>n;n++)d=Math.min(d,h[o][n]),a=Math.max(a,h[o][n]);for(l=r.getImageData(0,0,512,512),o=0;512>o;o++)for(n=0;512>n;n++){i=Math.pow(1/(a-d)*(h[o][n]-d),t);var g=Math.floor(255*Math.pow(i,15));l.data[4*(512*n+o)]=Math.min(Math.max(e[0]+g,0),255),l.data[4*(512*n+o)+1]=Math.min(Math.max(e[1]+g,0),255),l.data[4*(512*n+o)+2]=Math.min(Math.max(e[2]+g,0),255),l.data[4*(512*n+o)+3]=Math.floor(255*i)}return r.putImageData(l,0,0),s}function y(t){return t*A.i*A.h}function B(t){return(t+A.o.x+A.j.x)*A.i*A.h*A.m}function G(t){return(t+A.o.y+A.j.y)*A.i*A.h*A.m}function ia(t){return(t+A.o.x+A.j.x)*A.h*A.m}function la(t){return(t+A.o.y+A.j.y)*A.h*A.m}function H(t){return t*A.i*A.h*A.m}function ma(){this.l=document.getElementById("c1"),this.g=this.l.getContext("2d"),this.o=new u(0,0),this.I=[],na(this),this.j=new u(0,0),this.m=1}function oa(){var t=A;t.h=Math.min(window.innerWidth/190,window.innerHeight/90),t.i=(window.devicePixelRatio||1)/(t.g.W||t.g.T||t.g.U||t.g.V||t.g.S||1),t.l.width=Math.floor(window.innerWidth*t.i),t.l.height=Math.floor(window.innerHeight*t.i),t.l.style.width=window.innerWidth,t.l.style.height=window.innerHeight;var e=t.g.createLinearGradient(0,0,t.l.width,0);e.addColorStop(0,"#f0f"),e.addColorStop(.5,"#03f"),e.addColorStop(1,"#d61"),t.u=e,(e=t.g.createLinearGradient(0,0,t.l.width,0)).addColorStop(0,"#f00"),e.addColorStop(.5,"#f50"),e.addColorStop(1,"#f00"),t.v=e}function pa(t,e,o,n,i,a){null==a&&(a=o),t.g.setTransform(1,0,0,1,y(e),y(4)),t.g.lineCap="round",t.g.strokeStyle="#eee",t.g.lineWidth=y(4),t.g.beginPath(),t.g.moveTo(0,0),t.g.lineTo(y(40),0),t.g.stroke(),t.g.strokeStyle="#777",t.g.lineWidth=y(3),t.g.beginPath(),t.g.moveTo(0,0),t.g.lineTo(y(40),0),t.g.stroke(),t.g.strokeStyle="#444",t.g.lineWidth=y(3),t.g.beginPath(),t.g.moveTo(0,0),t.g.lineTo(y((a-0)/(o-0)*40),0),t.g.stroke(),0<n&&(t.g.strokeStyle=i,t.g.lineWidth=y(2.25),t.g.beginPath(),t.g.moveTo(0,0),t.g.lineTo(y((n-0)/(o-0)*40),0),t.g.stroke())}function na(t){function e(t,e){t.I[e]?o=t.I[e]:((o=document.createElement("canvas")).width=800,o.height=800,t.I[e]=o),n=o.getContext("2d")}var o,n;e(t,"x"),n.setTransform(1,0,0,1,400,400);for(var i=360,a=0,s="#c073 #c076 #e08d #f44 #f81 #fc5 #fff #000 #111 #000".split(" ");a<s.length;a++){var r=s[a];n.fillStyle=r,n.beginPath(),n.arc(0,0,i,0,2*Math.PI),n.fill(),i*=.96}e(t,"d"),n.font="760px twemoji",n.textAlign="center",n.textBaseline="middle",n.fillText("üêï",400,560),n.globalAlpha=.4,n.font="384px twemoji",n.fillText("‚ö™",192,320)}function qa(t,e){for(var o,n=0,i=I.g.g;n<i.length;n++)if((o=i[n]).g==e){t.g.setTransform(1,0,0,1,B(o.position.x),G(o.position.y)),t.g.rotate(o.rotation*Math.PI*2);var a=t,s=o.icon,r=o.u;if(!a.I[s]){var h=document.createElement("canvas");h.width=800,h.height=800,(o=h.getContext("2d")).font="760px twemoji",o.textAlign="center",o.textBaseline="middle",o.fillText(s,400,560),a.I[s]=h}a.g.drawImage(a.I[s],-H(r)/2,-H(r)/2,H(r),H(r))}t.g.setTransform(1,0,0,1,0,0)}function ra(t,e,o,n){this.position=new u,this.A=new u,this.i=new u,v(this.position,t),v(this.A,e),this.L=o,this.u=n,this.H=this.g=this.h=!1,this.l=0}function sa(){this.g=[],this.h=.1}function ta(t){for(var e=new u,o=0,n=t.g;o<n.length;o++){var i=n[o];v(i.i,i.A)}n=0;for(var a=t.g;n<a.length;n++)if(!(i=a[n]).h)for(var s=0,r=t.g;s<r.length;s++)if(i!=(o=r[s])&&!o.h&&!i.g){e.x=o.position.x-i.position.x,e.y=o.position.y-i.position.y,ea(e);var h=q(i.position,o.position),l=i.L*o.L/Math.pow(h,2)*66743e-15;0!=o.l&&(l*=Math.max(0,1-Math.pow(h/o.l,5))),o=l/i.L,i.i.x+=o*e.x*t.h,i.i.y+=o*e.y*t.h}for(e=0,n=t.g;e<n.length;e++)if(!(i=n[e]).h)for(o=i,a=t.h,v(o.A,o.i),o.position.x+=o.A.x*a,o.position.y+=o.A.y*a,a=0,s=t.g;a<s.length;a++)i!=(o=s[a])&&o.g&&!i.g&&q(i.position,o.position)<o.u/2-1.5*i.u&&(i.h=!0)}function ua(t){t.g=t.g.filter((function(t){return!t.h}))}function J(t,e,o,n,i,a,s){ra.call(this,n,i,a,s),this.name=e,this.icon=t,this.D=!0,this.v=!1,this.J=this.rotation=0,this.B=this.K=!1,this.m=0,this.M=22,this.P=this.o=400,this.R=140}function L(){this.g=new sa,this.j=new sa,this.G=this.m=this.i=this.F=!1,va(""),this.C=performance.now(),"undefined"!=typeof io?this.socket=io({path:location.pathname+"io",upgrade:!1,transports:["websocket"]}):this.socket={emit:function(){},on:function(){}},this.socket.on("connect",this.P.bind(this)),this.socket.on("disconnect",this.R.bind(this)),this.socket.on("d",this.O.bind(this))}function wa(t){t.o=null,t.G?(document.getElementById("l1").innerHTML="Refreshing...",window.setTimeout(t.socket.emit.bind(t.socket,"c"),300)):document.getElementById("l1").innerHTML="Leaderboard is not available."}function va(t){var e=document.getElementById("s2");t?(e.innerHTML=t,e.className="shown"):e.className=""}function xa(t){t.i=!1,t.m=!1,document.getElementById("tip").classList.add("ok"),document.getElementById("overlay").style.display="none"}function ya(){var t=O,e=(t=Math.floor(t/10))%6+"0";return e=(t=Math.floor(t/6))%24+":"+e,(t=Math.floor(t/24))+" days, "+e}function za(t,e){t.l=e;var o=ba[e];Aa=P=0,Q=o[5],R=S=T=O=0,t.B=1,t.g.g=[],t.g.h=ba[e][1],t.u=0,t.J=200,t.K=!1,t.o=null,A.j.x=o[2],A.j.y=o[3],A.m=o[4];for(var n=0,i=o[0];n<i.length;n++){var a=i[n],s=aa[a[0]],r=new J(s[0],"dummy","#fff",new u(a[1],a[2]),new u(a[3],a[4]),a[5],s[1]);s[5]&&(r.D=!1,r.g=!0,r.l=s[5]),5==a[0]&&(r.B=!0),r.F=a[0],r.j=s[4],r.J=s[2],r.K=s[3],r.C=s[6],Aa+=s[4],t.g.g.push(r)}document.getElementById("next").style.display="none",oa(),(r=Ba).h.clearRect(0,0,512,512),r.h.globalCompositeOperation="screen",a=da([[[120,0,120],[0,128,255],[255,120,0]],[[255,30,20],[0,128,255],[255,120,0]],[[0,180,140],[0,128,255],[255,180,0]]]),r.h.drawImage(ha(3,a[0]),0,0),r.h.drawImage(ha(2,a[1]),0,0),r.h.drawImage(ha(3,a[2]),0,0),xa(t),t.M!=e&&(o[6]?(o=o[6],document.getElementById("tip").style.display="block",document.getElementById("tip").classList.remove("ok"),document.getElementById("tiptext").innerHTML=o,t.i=!0):document.getElementById("tip").style.display="none",t.M=e,document.getElementById("overlay").style.display="none")}function Ca(){window.localStorage.getItem("hg:dog",!1)&&(document.getElementById("dog").style.display="block")}function Da(t,e){t.H=e,window.localStorage.setItem("hg:n",e),document.getElementById("p1").innerHTML=t.H,t.socket.emit("a",e),wa(t)}function Ea(t,e){e.A.x+=t.D.x,e.A.y+=t.D.y}u.prototype.add=function(t){this.x+=t.x,this.y+=t.y},(this&&this.g||function(t,e){function o(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)})(J,ra),J.prototype.N=function(){if(this.B){null==this.O&&(this.O=performance.now()),this.o--,this.m=(this.m+.006)%1;for(var t=0,e=I.g.g;t<e.length;t++){var o=e[t];o!=this&&2==o.F&&.1>Math.abs(ca(this.position,o.position)-this.m)&&22>=q(this.position,o.position)&&(this.o=this.P)}if(140==this.o)K(ia(this.position.x),la(this.position.y),"üòÆ",!1,!0);else if(0==this.o){for(K(ia(this.position.x),la(this.position.y),"üò°",!1,!0),this.B=!1,o=0,t=I.g.g;o<t.length;o++){var n=t[o];if(n.g){var i=n;break}}o=aa[15],ea(i=new u(i.position.x+10*(Math.random()-.5)-this.position.x,i.position.y+10*(Math.random()-.5)-this.position.y)),(n=new J(o[0],"dummy","#fff",new u(this.position.x+5*i.x,this.position.y+5*i.y),new u(i.x/2,i.y/2),n.L/50,o[1])).D=!1,n.C=!0,n.j=0,I.g.g.push(n)}}},L.prototype.P=function(){this.G=!0},L.prototype.R=function(){this.G=!1},L.prototype.O=function(t){for(var e=0,o="",n=0;n<t.length;n++){var i=t[n];if(i[0]==this.l){var a="#"+ ++e+": "+i[5]+" pts - "+i[6];if(this.socket.id==i[7]?(this.o||(this.o=e),o+="<span>"+a+"</span>"):o+=a,o+="<br/>",5==e)break}}for(;5>e;)o+="#"+ ++e+" (no score yet)<br/>";document.getElementById("l1").innerHTML=o},L.prototype.N=function(){O++;for(var t=0,e=this.g.g;t<e.length;t++){var o=e[t];o.N()}for(ta(this.g),t=0,e=this.g.g;t<e.length;t++)(o=e[t]).h&&(P+=o.j,0<o.j&&(K(ia(o.position.x),la(o.position.y),"+"+o.j),K((80+A.o.x+A.j.x)*A.h,(5+A.o.y+A.j.y)*A.h,P,!0)),h(1.24,.15,132,.1,0,.4,4,2.5,0,0,0,0,1,.24,.37,0,0),o.C&&(this.K=!0));if(ua(this.g),this.u=Math.min(this.u+3,this.J),1==this.B)if(P>=Q){for(document.getElementById("overlay").style.display="block",document.getElementById("w1").style.display="block",document.getElementById("w2").style.display="none",document.getElementById("next").style.display="",this.i=!0,this.B=2,h(1,0,300,.1,.3,.1,0,1.61,0,286,.06,.18,0,0,.4,.1,.09),document.getElementById("d1").style.display="none",t=0,e=this.g.g;t<e.length;t++)4==(o=e[t]).F&&(document.getElementById("d1").style.display="block",window.localStorage.setItem("hg:dog",1),Ca());R=100*P-Math.floor(S)-Math.floor(O/10),document.getElementById("d3").innerHTML=P+"<br/>"+Math.floor(S)+"f<br/>"+ya()+"<br/>",document.getElementById("d4").innerHTML="+"+100*P+"<br/>-"+Math.floor(S)+"<br/>-"+Math.floor(O/10)+"<br/><i>Final score: "+R+"</i>",this.socket.emit("b",[this.l,P,T,Math.floor(S),O,R,this.H]),wa(this)}else this.K&&(document.getElementById("overlay").style.display="block",document.getElementById("w1").style.display="none",document.getElementById("w2").style.display="block",document.getElementById("next").style.display="none",this.i=!0,this.B=3)};var P=0,Q=0,Aa=0,O=0,T=0,S=0,R=0;function Fa(){}function Ga(t){h(1,0,440*Math.pow(1.059463094,128+4*t-128),.01,.02,.09,1,.5,-.1,0,0,0,0,.12,.5,.02,0)}Fa.prototype.start=function(){};var A,Ba,I,V,W,Ha,U=!1;function Ia(t){t.parentNode.removeChild(t)}function K(t,e,o,n,i){var a=document.createElement("div");a.className="pop",a.style.left=t,a.style.top=e,a.innerHTML=o,n&&(a.className+=" popr"),i&&(a.className+=" popt"),document.body.appendChild(a),window.setTimeout(Ia.bind(null,a),2500)}function Qa(){oa();var t=Ba,e=512*Math.max(window.innerWidth/512,window.innerHeight/512);t.g.style.width=e,t.g.style.height=e}function Ra(){var t=I,e=performance.now();if(!t.F&&U){t.h=null;for(var o=0,n=t.g.g;o<n.length;o++){var i=n[o];i.v=!1}for(o=0,n=t.g.g;o<n.length;o++)if((i=n[o]).D&&50>q(new u(B(i.position.x)/A.i,G(i.position.y)/A.i),V)){i.v=!0,t.h=i;break}t.h&&(V.x=(t.h.position.x+A.o.x+A.j.x)*A.h*A.m,V.y=(t.h.position.y+A.o.y+A.j.y)*A.h*A.m,Ga(0)),t.m=!0}if(t.D=t.h?new u((V.x-W.x)/A.h*.002,(V.y-W.y)/A.h*.002):new u(0,0),t.v=1e3*q(new u(0,0),t.D),t.F&&!U&&(t.h&&(Ea(t,t.h),t.h.v=!1,T++,S+=t.v,t.u-=t.v,Ga(1)),t.h=null,t.v=0,t.m=!1),t.F=U,t.i||t.m)t.C=e;else for(;t.C<e;)t.N(),t.C+=1e3/60;for(e="Level "+(t.l+1)+" &nbsp;&#8901;&nbsp; "+T+" corrections ("+Math.floor(S)+"f)  &nbsp;&#8901;&nbsp; "+P+" / "+Q+" &nbsp;&#8901;&nbsp; "+ya(),(i=document.getElementById("s1")).dataset.s!=e&&(i.innerHTML=e,i.dataset.s=e),e=[],U&&t.h&&(0<t.h.j&&e.push(t.h.j+" points"),e.push("Correction cost: "+Math.floor(t.v)+"f")),2==t.B&&e.push("Finished"),t.i?e.push("Paused"):t.m&&e.push("Autopaused"),va(e.join(" &nbsp;&#8901;&nbsp; ")),i=0,o=t.g.g;i<o.length;i++)(e=o[i]).K&&(e.rotation=e.J+ca(new u(0,0),e.A));for(t.j.g=[],t.j.h=t.g.h,o=0,n=t.g.g;o<n.length;o++)(i=new ra(new u((e=n[o]).position.x,e.position.y),new u(e.A.x,e.A.y),e.L,e.u)).g=e.g,i.l=e.l,e.v&&Ea(t,i),t.j.g.push(i);for(i=0,o=t.g.g;i<o.length;i++)(e=o[i]).G=[];for(e=0;600>e;e++)for(ta(t.j),i=0;i<t.g.g.length;i++)t.g.g[i].G.push(new u(t.j.g[i].position.x,t.j.g[i].position.y));for(i=0;i<t.g.g.length;i++)t.g.g[i].H=t.j.g[i].h;for((t=A).g.setTransform(1,0,0,1,0,0),t.g.clearRect(0,0,t.l.width,t.l.height),t.g.textAlign="center",t.g.textBaseline="middle",t.g.lineCap="butt",o=0,n=I.g.g;o<n.length;o++)(e=n[o]).B&&(i=t.g.createRadialGradient(0,0,0,0,0,H(e.M)),e.o>e.R?(i.addColorStop(0,"#ff0d"),i.addColorStop(1,"#ff02")):(i.addColorStop(0,"#f50d"),i.addColorStop(1,"#f502")),t.g.setTransform(1,0,0,1,B(e.position.x),G(e.position.y)),t.g.fillStyle=i,t.g.beginPath(),t.g.moveTo(0,0),t.g.arc(0,0,H(e.M),(e.m-.1)*Math.PI*2,(e.m+.1)*Math.PI*2),t.g.closePath(),t.g.fill());for(qa(t,!0),t.g.lineWidth=H(.3),t.g.setLineDash([]),i=0,o=I.g.g;i<o.length;i++){e=o[i],t.g.strokeStyle=e.C?t.v:t.u,t.g.beginPath(),t.g.moveTo(B(e.position.x),G(e.position.y)),n=0;for(var a=e.G;n<a.length;n++){var s=a[n];t.g.lineTo(B(s.x),G(s.y))}t.g.stroke(),e.H&&500>performance.now()%1e3&&(t.g.font=H(3)+"px twemoji",t.g.fillText("‚ö†Ô∏è",B(s.x),G(s.y)))}I.h&&(t.g.strokeStyle="#eb0",t.g.lineWidth=H(.3),t.g.beginPath(),t.g.moveTo(V.x*A.i,V.y*A.i),t.g.lineTo(W.x*A.i,W.y*A.i),t.g.stroke()),qa(t,!1),pa(t,2,I.J,I.u-I.v,"#eb0"),pa(t,48,Aa,P,"#c07",Q),window.requestAnimationFrame(Ra)}function Sa(t){U=!0,X(t),v(V,W)}function Ta(t){U=!1,X(t)}function X(t){try{t instanceof TouchEvent?(W.x=t.touches[0].clientX,W.y=t.touches[0].clientY):(W.x=t.clientX,W.y=t.clientY)}catch(t){}"dog"!=t.target.id&&"button"!=t.target.tagName.toLowerCase()&&t.preventDefault()}function Ua(){}function Va(){if(!document.fonts.check("1em twemoji")&&1e4>performance.now())window.setTimeout(Va,100);else{A=new ma,Ba=new fa,Ha=new Fa,W=new u,V=new u,window.addEventListener("resize",Qa),window.addEventListener("mousemove",X),window.addEventListener("touchstart",Sa,{passive:!1}),window.addEventListener("touchmove",X,{passive:!1}),window.addEventListener("touchend",Ta),window.addEventListener("mousedown",Sa),window.addEventListener("mouseup",Ta),window.addEventListener("click",Ua),za(I=new L,0),Ca();var t=I,e=window.localStorage.getItem("hg:n");Da(t,e||"Player"+Math.round(8999999*Math.random()+1e6)),Qa(),Ra(),document.getElementById("intro").classList.add("loaded")}}function Wa(t){t.classList.add("shown")}window.addEventListener("load",(function(){for(var t=500,e=0,o=document.querySelectorAll("#intro > div > p");e<o.length;e++){var n=o[e];window.setTimeout(Wa.bind(null,n),t),t+=1e3}Va()})),window.b1=function(t){if(1==t)document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen();else if(2==t)I.i=!I.i;else if(7==t)za(t=I,t.l+1);else if(8==t)xa(I);else if(9==t)za(t=I,t.l);else if(10==t)xa(I);else if(11==t)Ha.start(),document.getElementById("intro").style.display="none";else if(12==t)t=document.getElementById("dog").getClientRects(),.3>Math.random()&&(document.getElementById("dogtweet").style.display="block",K(t[0].left+30*Math.random(),t[0].top-5,da(["‚ù§Ô∏è","üòá","‚ò∫Ô∏è"]),!1,!0)),K(W.x,W.y+10,"ü§ö",!0,!0);else if(13==t){var e;t=I,(e=window.prompt("New name:",t.H))&&(e=e.trim().substring(0,20).trim())&&Da(t,e)}else 14==t?((t=I).o?e="%20and%20I%20am%20now%20at%20"+(1==(e=t.o)?"1st":2==e?"2nd":3==e?"3rd":e+"th")+"%20place%20on%20the%20leaderboard.":e=".",window.open("https://twitter.com/intent/tweet?text=I%20just%20finished%20level%20"+(t.l+1)+"%20scoring%20"+R+"%20points"+e+"%0A%0APlay%20Operation%20Cleanaholeic%20%23js13k%20game%20by%20%40gheja_%20here:%20js13kgames.com%2Fentries%2Foperation-cleanaholeic")):15==t&&window.open("https://twitter.com/intent/tweet?text=I%20just%20petted%20Space%20Dog,%20he%20is%20definitely%20a%20good%20boy!%0A%0A%20Can%20you%20find%20him?%0A%0APlay%20Operation%20Cleanaholeic%20%23js13k%20game%20by%20%40gheja_%20here:%20js13kgames.com%2Fentries%2Foperation-cleanaholeic")}</script><style>html{font-family:Arial;font-size:1.5vw;background:#112;user-select:none}body{overscroll-behavior:none}#c1,#c2{position:fixed;left:0;top:0}#s1{position:fixed;top:.5em;right:.5em;color:#fffa}#s2{position:fixed;bottom:-10vh;right:20vw;left:20vw;background:#fffc;color:#333;text-align:center;font-size:1rem;padding:.2em;border-radius:.2em;transition:bottom .25s}#s2.shown{bottom:4rem}#s3{position:fixed;left:.5rem;bottom:.5rem}#debug{position:fixed;left:0;bottom:0;right:0;font-size:1rem;height:100px;background:#0008;color:#fff;z-index:5001}@font-face{font-family:twemoji;src:url('https://raw.githubusercontent.com/gheja/misc/master/js13k/twemoji.ttf')}#overlay{-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);position:fixed;top:0;right:0;bottom:0;left:0;display:none}#w1,#w2{margin:10vh auto;width:30em;max-width:90vw;padding:1em;background:#fffa;border-radius:2em;text-align:center;color:#555}button{font-size:1.2em;border:none;padding:.5em 1em;background:#456;border-radius:.5em;color:#fff;text-decoration:none;cursor:pointer}button:hover{background:#567}#r1{position:fixed;right:1rem;bottom:1rem;font-family:twemoji;font-size:10rem;animation:r1 4s infinite;opacity:0}@keyframes r1{0%{opacity:0;transform:rotate(0)}10%{opacity:1;transform:rotate(0)}35%{opacity:1;transform:rotate(-90deg)}45%{opacity:0;transform:rotate(-90deg)}50%{opacity:0;transform:rotate(0)}60%{opacity:1;transform:rotate(0)}85%{opacity:1;transform:rotate(90deg)}95%{opacity:0;transform:rotate(90deg)}}@media (min-aspect-ratio:1/1){#r1{display:none}}#d2,#d3,#d4{float:left;text-align:right;width:29%}#d3,#d4{font-weight:700}#l1{text-align:left}#w1 span{color:#000;font-weight:700}.h{float:none;clear:both;color:#000;padding:.5em 0;font-weight:700}#tip{position:fixed;top:10vh;left:10vw;right:10vw;padding:.5em;background:#fffa;border-radius:2em;text-align:center;display:none}#tiptext{margin:.5em}#tip.ok{background:#0000;color:#fff8}#tip.ok button{display:none}#intro{background:#112f;position:fixed;top:0;left:0;right:0;bottom:0;transition:background 3s;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}#intro.loaded{background:#112a}#intro div{width:80vw;margin:10vh auto;color:#fff}#intro button,#intro div p{opacity:0;transition:opacity 1s}#intro div p.shown,#intro.loaded button{opacity:1}.pop{position:fixed;color:#fff;text-shadow:.05em .05em .2em #000;font-weight:700;font-size:1.5rem;animation:r2 2s forwards}.popr{animation:r3 2s forwards}.popt{font-family:twemoji;font-size:2em}@keyframes r2{0%{opacity:0;margin-top:0}3%{opacity:1}80%{opacity:1}100%{opacity:0;margin-top:-1em}}@keyframes r3{0%{opacity:0;margin-top:0}3%{opacity:1}80%{opacity:1}100%{opacity:0;margin-top:1em}}#dog{font-family:twemoji;font-size:10rem;position:fixed;right:-.5em;bottom:-.8em;transition:bottom .5s;cursor:pointer;display:none}#d1{background:#ff06;color:#000;margin:0 0 .5em 0;font-weight:700;padding:.5em}#dog:hover{bottom:-.5em}#dogtweet{position:fixed;right:0;bottom:8rem;display:none}#e1{font-family:twemoji;opacity:0}</style><canvas id=c2></canvas><canvas id=c1></canvas><div id=s1></div><div id=s2></div><div id=s3><button onclick=b1(1)>‚§ß</button> <button onclick=b1(2)>||</button> <button onclick=b1(9)>‚ü≤</button> <button onclick=b1(7) id=next>Next level ¬ª</button></div><div id=tip><div id=tiptext>.</div><button onclick=b1(10)>OK</button></div><div id=overlay><div id=w1><div class=h>- Summary -</div><div id=d2>Points:<br>Force used:<br>Time needed:</div><div id=d3>...</div><div id=d4>...</div><div class=h>- Leaderboard -</div><div id=l1>...</div>Your name is <span id=p1>...</span> <button onclick=b1(13)>‚úèÔ∏è</button><br><br><div id=d1>You saved Space Dog and he joined you!<br>Check the bottom right corner :)</div><button onclick=b1(8)>Stay here</button> <button onclick=b1(9)>Retry</button> <button onclick=b1(14)>Tweet</button> <button onclick=b1(7)>Next level ¬ª</button></div><div id=w2>Uh-oh... it was so close but you failed to complete the level.<br><br><button onclick=b1(9)>Retry</button></div><button onclick=b1(15) id=dogtweet>Tweet!</button></div><div id=intro><div><p>The year is... way too many.<p>Humanity and the others out there have littered everything with their technology and their junk in general. Now even space is clogged.<p>One day the universe decided it has had enough of it and wants to build something new.<p>But for that it needs space. More space in space. Which is a bit weird...<p>Anyway...<p>The universe asked you, personally, for help. It scattered black holes here and there, they already cleaned up a good chunk of the mess but they need a hand with the rest.</p><button onclick=b1(11)>Start</button><div id=e1>üì±</div></div></div><div id=r1>üì±</div><div id=dog onclick=b1(12)>üêï</div>