<title>Sword Art Offline - js13kGames 2018</title><script src=/2018/webxr/aframe.js></script><script>let state=0;AFRAME.registerPrimitive("a-p",{defaultComponents:{p:{}}}),AFRAME.registerComponent("p",{init:function(){let t=this.el;t.innerHTML='<a-octahedron id="o" color="#FF926B" radius="5" scale="0.5 0.5 0.5" position="0 0 -10">\n            <a-animation attribute="rotation" dur="5000" fill="forwards" to="0 360 0" easing="ease-in-out" direction="alternate" repeat="indefinite"></a-animation>\n            <a-animation attribute="position" dur="5000" fill="forwards" to="0 2 -10" easing="ease-in-out" direction="alternate" repeat="indefinite"></a-animation>\n          </a-octahedron>',t.addEventListener("mouseenter",(function(){t.parentNode.removeChild(t),state-=1,change1()}))}}),AFRAME.registerPrimitive("a-f",{defaultComponents:{f:{}}}),AFRAME.registerComponent("f",{init:function(){this.el.innerHTML='  <a-box color="#CCC" depth="0.1" height="4" width="0.2" position="0 1.5 -2" rotation="0 0 45" scale="0.5 0.5 0.5">\n              <a-box color="#CCC" depth="0.1" height="0.141" width="0.141" position="0 2 0" rotation="0 0 45"></a-box>\n              <a-box color="#CCC" depth="0.3" height="0.141" width="1" position="0 -1.4 0"></a-box>\n              <a-animation attribute="rotation" dur="1000" fill="forwards" from="135 0 45" to="0 0 -45" repeat="indefinite" direction="alternate" easing="ease-in-out-back"></a-animation>\n\n            </a-box>\n\n            <a-box color="#CCC" depth="0.1" height="4" width="0.2" position="0 1.5 -2" rotation="0 0 -45" scale="0.5 0.5 0.5">\n              <a-box color="#CCC" depth="0.1" height="0.141" width="0.141" position="0 2 0" rotation="0 0 45"></a-box>\n              <a-box color="#CCC" depth="0.3" height="0.141" width="1" position="0 -1.4 0"></a-box>\n              <a-animation attribute="rotation" dur="1000" fill="forwards" from="135 0 -45" to="0 0 45" repeat="indefinite" direction="alternate" easing="ease-in-out-back"></a-animation>\n\n            </a-box>\n            <a-text value="Congrats" position="-0.55 0 -3" scale="3 3 3"></a-text>\n\n\n            '}})</script><body><a-scene light="defaultLightsEnabled: false"><a-text id=score position="-3 0 -3" value="Alive : "></a-text><a-entity id=c position="0 1.6 0" camera look-controls wasd-controls><a-cursor></a-cursor><a-entity id=light light="type:point;color:rgb(19, 41, 198);" position="0 0 -2"></a-entity><a-box color=#CCC depth=0.1 height=4 position="0 0 -1" width=0.2 rotation="-45 -45 0" scale="0.4 0.4 0.4"><a-box color=#CCC depth=0.1 height=0.141 position="0 2 0" width=0.141 rotation="0 0 45"></a-box><a-box color=#CCC depth=0.3 height=0.141 position="0 -1.4 0" width=1></a-box></a-box></a-entity><a-entity id=light1 light="type:point;color:rgb(19, 41, 198);"></a-entity><a-plane color=#CCC height=40 position="0 0 -20" width=40></a-plane><a-plane color=#CCC height=40 position="20 0 0" width=40 rotation="0 -90 0"></a-plane><a-plane color=#CCC height=40 position="-20 0 0" width=40 rotation="0 90 0"></a-plane><a-plane color=#CCC height=40 position="0 0 20" width=40 rotation="0 180 0"></a-plane><a-plane color=#CCC height=40 position="0 20 0" width=40 rotation="90 0 0"></a-plane><a-plane color=#CCC height=40 position="0 -20 0" width=40 rotation="-90 90 90"></a-plane><a-sky color=#29292d></a-sky></a-scene><script>let light=document.getElementById("light"),light1=document.getElementById("light");function getRandomInt(t){return Math.floor(Math.random()*Math.floor(t))}function change(){let t="rgb("+getRandomInt(256)+", "+getRandomInt(256)+", "+getRandomInt(256)+")",e="rgb("+getRandomInt(256)+", "+getRandomInt(256)+", "+getRandomInt(256)+")";light.setAttribute("light",{color:t}),light1.setAttribute("light",{color:e}),document.getElementById("score").setAttribute("value",`Alive : ${state}`);setTimeout(change,1e3)}function change1(){if(document.getElementById("score").setAttribute("value",`Alive : ${state}`),0!=state)setTimeout(change1,100);else{c.setAttribute("visible",!1);let t=document.querySelector("a-scene"),e=document.createElement("a-f");t.appendChild(e)}}function add(){let t=document.querySelector("a-scene"),e=document.createElement("a-p");var n=10*Math.random()-5,o=20*Math.random()-10,i=20*Math.random()-10;e.setAttribute("position",{x:Math.round(n),y:Math.round(o),z:Math.round(i)}),t.appendChild(e),state+=1}change(),document.addEventListener("keydown",(function(t){81==t.which&&document.getElementById("c").setAttribute("position",{y:document.getElementById("c").getAttribute("position").y-1}),69==t.which&&document.getElementById("c").setAttribute("position",{y:document.getElementById("c").getAttribute("position").y+1})}));for(var i=0;i<30;i++)add()</script>