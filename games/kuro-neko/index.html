<!doctype html><meta name=viewport content="width=device-width"><title>Kuro Neko - js13kGames 2025</title><link rel=icon type=image/x-icon href=neko.png><style>*{margin:0;padding:0;box-sizing:border-box}body{background:linear-gradient(135deg,#1a1a2e,#16213e);font-family:'Courier New',monospace;color:#fff;display:flex;justify-content:center;align-items:center;min-height:100vh;overflow:hidden}.game-container{text-align:center;padding:20px;background:rgba(0,0,0,.3);border-radius:15px;border:2px solid #444}h1{margin-bottom:10px;font-size:2em;text-shadow:0 0 10px #ff6b6b;color:#ff6b6b}.subtitle{margin-bottom:20px;opacity:.8;font-size:.9em}canvas{border:3px solid #666;border-radius:10px;background:#0a0a0a;box-shadow:0 0 20px rgba(255,107,107,.3)}.hud{display:flex;justify-content:space-between;margin-top:15px;font-size:1.2em;font-weight:700}.score{color:#4ecdc4}.lives{color:#ff6b6b}.controls{margin-top:15px;font-size:.8em;opacity:.7;line-height:1.4}.game-over{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,.9);padding:30px;border-radius:15px;border:2px solid #ff6b6b;display:none;text-align:center}.restart-btn{background:#ff6b6b;color:#fff;border:none;padding:10px 20px;margin-top:15px;border-radius:5px;cursor:pointer;font-family:inherit;font-size:1em;transition:background .3s}.restart-btn:hover{background:#ff5252}.start-screen{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,.9);padding:30px;border-radius:15px;border:2px solid #4ecdc4;text-align:center;z-index:1000}.start-btn{background:#4ecdc4;color:#fff;border:none;padding:10px 20px;margin-top:15px;border-radius:5px;cursor:pointer;font-family:inherit;font-size:1em;transition:background .3s}.start-btn:hover{background:#45b6b0}.instructions{margin:15px 0;color:#ccc;font-size:.9em}</style><div class=game-container><h1>Kuro Neko</h1><p class=subtitle>Protect your owner from approaching dangers!</p><canvas id=gameCanvas width=800 height=600></canvas><div class=hud><div class=score>Score: <span id=scoreValue>0</span></div><div class=highscore>High Score: <span id=highScoreValue>0</span></div><div class=lives>Lives: <span id=livesValue>9</span></div></div><div class=controls>Use WASD or Arrow Keys to move the cat â€¢ Protect your owner from ghost enemies</div></div><div class=game-over id=gameOver><h2>Game Over!</h2><p>Your owner is now possessed!<p>Final Score: <span id=finalScore>0</span></p><button class=restart-btn onclick=restartGame()>Play Again</button></div><div class=start-screen id=startScreen><h2>Welcome to Kuro Neko</h2><p>Protect your owner from the ghosts!<p class=instructions>Use WASD or Arrow Keys to move</p><button class=start-btn onclick=startGame()>Start Game</button></div><script>null===localStorage.getItem("KuroNeko_HighScore")&&localStorage.setItem("KuroNeko_HighScore","0");const canvas=document.getElementById("gameCanvas"),ctx=canvas.getContext("2d"),scoreElement=document.getElementById("scoreValue"),highScoreElement=document.getElementById("highScoreValue"),livesElement=document.getElementById("livesValue"),gameOverElement=document.getElementById("gameOver"),startScreenElement=document.getElementById("startScreen"),finalScoreElement=document.getElementById("finalScore"),catSprite=new Image,ghostSprite=new Image,redGhostSprite=new Image,playerSprite=new Image,grassSprite=new Image;ghostSprite.src="ghost.png",redGhostSprite.src="red.png",catSprite.src="neko.png",playerSprite.src="player.png",grassSprite.src="grass.jpg";let lastRedGhostTime=0;const RED_GHOST_INTERVAL=7e3,WORLD_WIDTH=2400,WORLD_HEIGHT=2400,CANVAS_WIDTH=800,CANVAS_HEIGHT=600,GRID_SIZE=150,MAX_REGULAR_GHOSTS=9,MAX_RED_GHOSTS=2;let gameRunning=!1,score=0,highScore=parseInt(localStorage.getItem("KuroNeko_HighScore")),lives=9,camera={x:0,y:0};highScoreElement.textContent=highScore;let cat={x:1200,y:1200,radius:15,speed:3.5,facingLeft:!1},owner={x:1300,y:1300,radius:12,speed:.8,direction:Math.random()*Math.PI*2,changeDirectionTimer:0,facingLeft:!1},enemies=[],obstacles=[];const keys={};function createObstacles(){obstacles=[];for(let e=0;e<20;e++)obstacles.push({x:2300*Math.random(),y:2300*Math.random(),width:40+60*Math.random(),height:40+60*Math.random()})}function circleCollision(e,t){const a=e.x-t.x,n=e.y-t.y;return Math.sqrt(a*a+n*n)<e.radius+t.radius}function circleRectCollision(e,t){const a=Math.max(t.x,Math.min(e.x,t.x+t.width)),n=Math.max(t.y,Math.min(e.y,t.y+t.height)),r=e.x-a,o=e.y-n;return r*r+o*o<e.radius*e.radius}function isValidPosition(e,t,a){const n={...e,x:t,y:a};for(let e of obstacles)if(circleRectCollision(n,e))return!1;return t>=e.radius&&t<=2400-e.radius&&a>=e.radius&&a<=2400-e.radius}function updateCat(){let e=cat.x,t=cat.y;(keys.w||keys.ArrowUp)&&(t-=cat.speed),(keys.s||keys.ArrowDown)&&(t+=cat.speed),(keys.a||keys.ArrowLeft)&&(e-=cat.speed,cat.facingLeft=!0),(keys.d||keys.ArrowRight)&&(e+=cat.speed,cat.facingLeft=!1),isValidPosition(cat,e,cat.y)&&(cat.x=e),isValidPosition(cat,cat.x,t)&&(cat.y=t)}function updateOwner(){owner.changeDirectionTimer++,owner.changeDirectionTimer>120+240*Math.random()&&(owner.direction=Math.random()*Math.PI*2,owner.changeDirectionTimer=0);const e=Math.cos(owner.direction)*owner.speed,t=owner.x+e,a=owner.y+Math.sin(owner.direction)*owner.speed;isValidPosition(owner,t,a)?(owner.x=t,owner.y=a,0!==e&&(owner.facingLeft=e<0)):owner.direction=Math.random()*Math.PI*2}function spawnEnemy(e=!1){let t=!1;const a=enemies.filter(e=>!e.isRed).length,n=enemies.filter(e=>e.isRed).length;if(e?n<2&&(t=!0):Math.random()<.02&&a<9&&(t=!0),t){let t,a;switch(Math.floor(4*Math.random())){case 0:t=2400*Math.random(),a=0;break;case 1:t=2400,a=2400*Math.random();break;case 2:t=2400*Math.random(),a=2400;break;case 3:t=0,a=2400*Math.random()}const n=1.2+.8*Math.random();enemies.push({x:t,y:a,radius:10,speed:e?1.5*n:n,facingRight:!1,isRed:e})}}function cleanupDistantEnemies(){for(let e=enemies.length-1;e>=0;e--){const t=enemies[e],a=owner.x-t.x,n=owner.y-t.y;Math.sqrt(a*a+n*n)>1920&&enemies.splice(e,1)}}function updateEnemies(){for(let e=enemies.length-1;e>=0;e--){const t=enemies[e],a=owner.x-t.x,n=owner.y-t.y,r=Math.sqrt(a*a+n*n);if(r>0){const e=a/r*t.speed;t.x+=e,t.y+=n/r*t.speed,t.facingRight=e>0}circleCollision(t,cat)?(enemies.splice(e,1),score+=1,scoreElement.textContent=score,score>highScore&&(highScore=score,localStorage.setItem("KuroNeko_HighScore",highScore),highScoreElement.textContent=highScore)):circleCollision(t,owner)?(enemies.splice(e,1),lives--,livesElement.textContent=lives,lives<=0&&(gameRunning=!1,gameOverElement.style.display="block",finalScoreElement.textContent=score)):r>2400&&enemies.splice(e,1)}}function updateCamera(){camera.x=owner.x-400,camera.y=owner.y-300,camera.x=Math.max(0,Math.min(camera.x,1600)),camera.y=Math.max(0,Math.min(camera.y,1800))}function drawGrid(){if(grassSprite&&grassSprite.complete){const e=150*Math.floor(camera.x/150),t=150*Math.floor(camera.y/150),a=e+800+150,n=t+600+150;for(let r=t;r<n;r+=150)for(let t=e;t<a;t+=150)ctx.drawImage(grassSprite,t-camera.x,r-camera.y,150,150)}}function draw(){ctx.fillStyle="#0a0a0a",ctx.fillRect(0,0,800,600),drawGrid(),ctx.fillStyle="#444";for(let e of obstacles){const t=e.x-camera.x,a=e.y-camera.y;t+e.width>=0&&t<=800&&a+e.height>=0&&a<=600&&ctx.fillRect(t,a,e.width,e.height)}for(let e of enemies){const t=e.x-camera.x,a=e.y-camera.y;if(t>=-e.radius&&t<=800+e.radius&&a>=-e.radius&&a<=600+e.radius){const n=e.isRed?redGhostSprite:ghostSprite;if(n&&n.complete){const r=3*e.radius;ctx.save(),e.facingRight?(ctx.scale(-1,1),ctx.drawImage(n,-t-r/2,a-r/2,r,r)):ctx.drawImage(n,t-r/2,a-r/2,r,r),ctx.restore()}ctx.shadowColor="#ffffff44",ctx.shadowBlur=15,ctx.shadowBlur=0}}const e=owner.x-camera.x,t=owner.y-camera.y;if(playerSprite&&playerSprite.complete){const a=8*owner.radius;ctx.save(),owner.facingLeft?(ctx.scale(-1,1),ctx.drawImage(playerSprite,-e-a/2,t-a/2,a,a)):ctx.drawImage(playerSprite,e-a/2,t-a/2,a,a),ctx.restore()}const a=cat.x-camera.x,n=cat.y-camera.y;if(catSprite&&catSprite.complete){const e=3*cat.radius;ctx.save(),cat.facingLeft?(ctx.scale(-1,1),ctx.drawImage(catSprite,-a-e/2,n-e/2,e,e)):ctx.drawImage(catSprite,a-e/2,n-e/2,e,e),ctx.restore()}}function gameLoop(){if(!gameRunning)return;const e=Date.now();e-lastRedGhostTime>=7e3&&(spawnEnemy(!0),lastRedGhostTime=e),updateCat(),updateOwner(),spawnEnemy(!1),updateEnemies(),cleanupDistantEnemies(),updateCamera(),draw(),requestAnimationFrame(gameLoop)}function restartGame(){gameRunning=!0,score=0,lives=9,enemies=[],lastRedGhostTime=Date.now(),startScreenElement.style.display="none",scoreElement.textContent=score,highScoreElement.textContent=highScore,cat.x=1200,cat.y=1200,owner.x=1300,owner.y=1300,owner.direction=Math.random()*Math.PI*2,owner.changeDirectionTimer=0,scoreElement.textContent=score,livesElement.textContent=lives,gameOverElement.style.display="none",createObstacles(),gameLoop()}function startGame(){gameRunning=!0,lastRedGhostTime=Date.now(),startScreenElement.style.display="none",createObstacles(),gameLoop()}document.addEventListener("keydown",e=>{keys[e.key.toLowerCase()]=!0,keys[e.code]=!0}),document.addEventListener("keyup",e=>{keys[e.key.toLowerCase()]=!1,keys[e.code]=!1}),draw()</script>