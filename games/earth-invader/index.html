<meta name=viewport content="width=device-width"><link rel=icon href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ‘½</text></svg>"><title>Earth Invader</title><style>@keyframes orbit{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes orbit-ad{0%{transform:rotate(var(--orbit-from)) translateY(calc(var(--item-limit) *-1))}to{transform:rotate(calc(var(--orbit-from) + 360deg)) translateY(calc(var(--item-limit) *-1))}}@keyframes grow{0%{transform:scale(0)}to{transform:scale(1)}}@keyframes fly{0%{transform:translateY(0)}to{transform:translateY(calc(var(--item-limit) *-1))}}@keyframes vanish{0%{transform:translateY(0);opacity:1}to{transform:translateY(-40px);opacity:0}}@keyframes fly-away{0%{transform:translateY(calc(var(--item-limit) *-1));opacity:1}to{transform:translateY(-9999px);opacity:0}}@keyframes rainbow{0%{color:#fff}12.5%{color:pink}25%{color:purple}35.5%{color:#00f}50%{color:#0ff}62.5%{color:green}75%{color:#ff0}87.5%{color:orange}to{color:red}}@keyframes float{0%,to{transform:translateY(0)}50%{transform:translateY(-20px)}}@keyframes blink{0%,49%,to{opacity:1}60%,99%{opacity:0}}@keyframes flicker{75%,77%,78%,80%,90.5%{background-color:#fff}76%,79%,90%{background-color:#00a2ff}}@keyframes shake{10%,90%{transform:translate3d(-1px,-1px,-1px)}20%,80%{transform:translate3d(2px,2px,2px)}30%,50%,70%{transform:translate3d(-4px,-4px,-4px)}40%,60%{transform:translate3d(4px,4px,4px)}}html{font-size:16px}body{background:#02061e;--planet-size:200px;--ufo-width:80px;--ufo-height:40px;--ad-support-size:32px;--ad-support-border-width:4px;--ad-support-after-width:197px;--ad-support-after-height:93px;--ad-support-after-left:-90px;--ad-support-after-bottom:40px;--ad-support-before-height:100px;--ad-support-before-left:9px;--ad-support-before-bottom:28px;--ad-hidden-right:-79px;--ad-hidden-height:calc(var(--ad-support-after-height)/ 3);--ad-hidden-base-bottom:calc(var(--ad-support-after-bottom) + var(--ad-support-border-width));--item-limit:400px;--item-width:60px;--item-height:100px;--human-animation-duration:15s;--rocket-animation-duration:12s;--orbit-ad-duration:60s;padding:0;margin:0;overflow:hidden;font-family:Consolas,monaco,monospace;color:#eee;-webkit-tap-highlight-color:transparent}*{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.center{position:absolute;top:0;left:0;right:0;bottom:0;margin:auto;display:block}.planet{width:var(--planet-size);height:var(--planet-size);font-size:var(--planet-size);line-height:var(--planet-size)}.ad-support{--orbit-from:0deg;width:var(--ad-support-size);height:var(--ad-support-size);animation:orbit-ad var(--orbit-ad-duration) linear infinite reverse}.ad-support::after,.h{width:var(--ad-support-after-width);position:absolute}.ad-support::after{content:'';height:var(--ad-support-after-height);display:block;left:var(--ad-support-after-left);bottom:var(--ad-support-after-bottom);border:var(--ad-support-border-width) solid #fff;background-color:#fff;background-size:cover;background-image:url(./assets/ads.min.png);animation:flicker linear infinite 2s}.h{height:var(--ad-hidden-height);right:var(--ad-hidden-right);bottom:var(--ad-hidden-base-bottom);background:#000;z-index:1;transition:width .5s ease-in;display:none}.h+.h{bottom:calc(var(--ad-hidden-base-bottom) + var(--ad-hidden-height))}.h+.h+.h{bottom:calc(var(--ad-hidden-base-bottom) + var(--ad-hidden-height) *2)}.ad-support.on>.h{display:block}.ad-support.on.level1>.h:last-of-type,.ad-support.on.level2>.h:nth-of-type(2),.ad-support.on.level3>.h:first-of-type{width:0}.ad-support::before{content:'';width:var(--ad-support-border-width);height:var(--ad-support-before-height);display:block;position:absolute;left:var(--ad-support-before-left);bottom:var(--ad-support-before-bottom);background-color:#fff}.ad-support.on::after{background-position-y:calc(var(--ad-support-after-height) *-1);animation:none}.ad-support+.ad-support.on::after{background-position-y:calc(var(--ad-support-after-height) *-2)}.ad-support+.ad-support+.ad-support.on::after{background-position-y:calc(var(--ad-support-after-height) *-3)}.ad-support+.ad-support{--orbit-from:120deg}.ad-support+.ad-support+.ad-support{--orbit-from:240deg}.ufo{--orbit-from:0deg;--orbit-to:360deg;width:var(--ufo-width);height:var(--ufo-height);font-size:var(--ufo-height);line-height:var(--ufo-height);animation:orbit 6s linear infinite}.ufo-emoji{transform:rotate(90deg);display:block}.ufo-translate{transform:translateX(calc(var(--planet-size)/ 2 + var(--ufo-width)/ 2));display:block;transition:transform 1s ease-in-out}.limit{width:calc(var(--item-limit) *2);height:calc(var(--item-limit) *2);border-radius:50%;border:1px solid currentColor;animation:rainbow 120s linear infinite}#background{background:#02061e;width:100%;height:auto}.item-scale{display:block;width:var(--item-width);height:var(--item-height);text-align:center;transform:scale(0);animation:grow calc(var(--human-animation-duration)/ 2) linear 1 forwards}.item-scale.rocket{animation:grow calc(var(--rocket-animation-duration)/ 2) linear 1 forwards}.item-translate{transform:translateY(0);animation:fly var(--human-animation-duration) ease-in 1 forwards}.item-scale.rocket,.item-translate.rocket{animation-duration:var(--rocket-animation-duration)}.rocket-image{transform:rotate(-45deg);filter:drop-shadow(1px 0 10px red)}.money{animation:float 5s ease-in-out infinite}.money .transform{transition:all .3s}.money.absorbed .transform{transform:scale(0) translateY(-80px);opacity:0}#t,.st{font-size:2rem}#t{left:0;top:0;right:0;bottom:0;text-transform:uppercase;display:flex;justify-content:center;align-items:center;text-align:center;flex-direction:column;transition:transform 1s}.started #t{transform:translateX(-100vw)}.st{animation:blink 1.2s infinite}.st .m{display:none}@media (pointer:coarse){.st .d{display:none}.st .m{display:block}}#c,#lc,#sc,#t{position:fixed}#c{visibility:hidden;left:0;top:0;right:0;bottom:0;transform:translateX(100vw);transition:transform 1s}.started #c{visibility:visible;transform:translateX(0)}.end #c{visibility:visible;transform:translateY(-200vh)}#lc,#sc{left:20px;font-size:2rem;word-spacing:-10px;text-align:left;z-index:3}#sc{top:20px;transform:translateX(-100vw)}#lc{transition:transform 333ms ease-in}.started #lc,.started #sc{transform:translateX(0)}#lc,.end #lc{transform:translateX(-100vw)}#sc{width:0;height:0;white-space:nowrap;display:flex;transition:all 333ms ease-in-out;transition-delay:font-size 0.1s}.end #sc{height:100%;top:0;font-size:2.5rem;justify-content:center;align-items:center}#lc{top:auto;bottom:20px}.score-delta{font-size:1.4rem;position:fixed;z-index:2;animation:vanish 1s ease-out forwards}#go,#gor,#gost,.end #sc{width:100%;text-align:center;left:0}#go,#gor,#gost{position:fixed;right:0;transition:all 333ms ease-in-out;z-index:4}#go{transform:translateY(-100vh);font-size:4rem;top:20vh;text-transform:uppercase}#gor,#gost{transform:translateY(100vh)}#gor{font-size:2.5rem;top:33vh}#gost{bottom:20vh}.end #go,.end #gor,.end #gost{transform:translateY(0)}#dc{position:fixed;left:0;right:0;margin-left:auto;margin-right:auto;top:30vh;padding:0 16px;max-width:40vw;background:rgba(0,0,0,.8);font-size:1.2rem;display:flex;align-items:center;border:2px solid #eee;transform-origin:center;transition:transform .3s;transform:scale(0);z-index:9}#di{flex-shrink:0;background:#e3e3e3;margin-right:16px;border-radius:50%;padding:4px}@media (max-width:800px),(max-height:800px){html{font-size:10px}body{--planet-size:100px;--ufo-width:40px;--ufo-height:20px;--item-limit:200px;--item-width:30px;--item-height:50px;--ad-support-size:16px;--ad-support-border-width:2px;--ad-support-after-width:98.5px;--ad-support-after-height:46.5px;--ad-support-after-left:-45px;--ad-support-after-bottom:20px;--ad-support-before-height:50px;--ad-support-before-left:4.5px;--ad-support-before-bottom:14px;--ad-hidden-right:-39.5px}}</style><canvas id=background></canvas><div id=t><h1>Earth Invader</h1><h2 class=st><span class=d>Press space</span> <span class=m>Touch screen</span></h2></div><h2 id=go>Game Over</h2><h3 id=gor></h3><h2 id=gost class=st><span class=d>Press space</span> <span class=m>Touch screen</span></h2><div id=c unselectable=on><div id=l class="limit center"><div class="center ad-support"><span class=h></span><span class=h></span><span class=h></span>ðŸŒ‘</div><div class="center ad-support"><span class=h></span><span class=h></span><span class=h></span>ðŸŒ‘</div><div class="center ad-support"><span class=h></span><span class=h></span><span class=h></span>ðŸŒ‘</div></div><div id=p class="planet center"><img id=pi></div><div id=u class="ufo center"><span id=ut class=ufo-translate><span class=ufo-emoji><img id=ui></span></span></div></div><div id=sc><div>Score: <span id=s>0</span></div></div><div id=lc>Lives: <span id=lives>ðŸ‘½ðŸ‘½ðŸ‘½</span></div><div id=dc><div id=di></div><p id=dt></div><script>var sceneWidth=1e3,smallScreenSize=800,isSmallScreen=()=>!!window.matchMedia(`(max-width: ${smallScreenSize}px),(max-height: ${smallScreenSize}px)`).matches,ifSmallScreen=(e,t)=>isSmallScreen()?e:t,allItems=[],r=(e,t=1)=>Math.floor(Math.random()*(e-t+1))+t,i=e=>`./assets/${e}.svg`,humanColors=["#ffc83d","#bb9167","#613d30","#8e562e","#d8b094","#f7d7c4"],getItemSize=()=>ifSmallScreen(35,70),getUfoSize=()=>ifSmallScreen(30,60),isPressed=!1,globalScale=1,gameIsRunning=!1,score=0,scoreMultiplier=10,totaLives=3,mainLoopClock=null,gameOver=!1,gameOverReadyToLeave=!1,totalHumansKilled=0,totalHumansToKillBeforeNextLevel=6,getCenter=e=>{var t=e.getBoundingClientRect();return{x:t.x+t.width/2,y:t.y+t.height/2}},END_REASONS={AD:"Humans have invaded space with their ads!",KILL:"Your spaceship has been destroyed!"},end=e=>{window.clearInterval(mainLoopClock),gameIsRunning=!1,gameOver=!0,allItems.forEach((e=>e.remove())),document.body.classList.add("end"),gor.innerHTML=e,window.setTimeout((()=>{gameOverReadyToLeave=!0}),2e3)},reloadGame=()=>{gameOverReadyToLeave&&window.location.reload()},dialogs=[{who:"ðŸ¤‘",text:"Displaying ads in space? What a good opportunity to be richer!"},{who:"ðŸ‘½",text:"We can't let humans pollute space with their ads... Help us to kill them all!"},{who:"ðŸ˜ ",text:"We are under attack! Launch some rockets to counterattack!"}],currentDialogIndex=0,showNextDialog=e=>{var{who:t,text:a}=dialogs[currentDialogIndex];di.innerHTML=t,dt.innerHTML=a,dc.style.transform="scale(1)",currentDialogIndex++,window.setTimeout((()=>{hideDialog(),e&&e()}),5500)},hideDialog=()=>{dc.style.removeProperty("transform")},initBg=()=>{background.width=innerWidth,background.height=innerHeight;for(var e=background.getContext("2d"),t=[0,60,240],a=0;a<600;a++){var n=Math.random()*background.offsetWidth;y=Math.random()*background.offsetHeight,radius=1.2*Math.random(),hue=t[r(t.length)-1],sat=r(100,50),e.beginPath(),e.arc(n,y,radius,0,360),e.fillStyle="hsl("+hue+", "+sat+"%, 88%)",e.fill()}};initBg(),window.onresize=()=>{initBg()};class Score{constructor(e,t,a){var n=document.createElement("div");n.innerHTML="+"+a*scoreMultiplier,n.className="score-delta";var o=ifSmallScreen(18,35),l=e-o,s=t-o;n.style.left=`${l}px`,n.style.top=`${s}px`,n.onanimationend=()=>n.remove(),c.appendChild(n),score+=10}}class Item{constructor(e,t){this.type=e,this.angle=r(360),this.nodeScale=document.createElement("div"),this.nodeScale.className=`item-scale center ${e}`,this.nodeRotate=document.createElement("div"),this.nodeRotate.className="item-rotate",this.nodeRotate.style.transform=`rotate(${this.angle+45}deg)`,this.nodeTranslate=document.createElement("div"),this.nodeTranslate.className=`item-translate ${e}`,this.nodeTranslate.innerHTML=t,this.nodeRotate.appendChild(this.nodeTranslate),this.nodeScale.appendChild(this.nodeRotate),c.appendChild(this.nodeScale),this.nodeTranslate.onanimationend=()=>{this.destroy(!1)},allItems.push(this)}getCircle(){var{nodeTranslate:e,nodeScale:t}=this,a=getComputedStyle(t).transform.match(/matrix\((-?\d*\.?\d+),\s*0,\s*0,\s*(-?\d*\.?\d+),\s*0,\s*0\)/);if(null===a)return null;var[,n]=a,{x:o,y:l}=getCenter(e);return{x:o,y:l,r:n*getItemSize()/2}}destroy(e){allItems=allItems.filter((e=>e!==this));var{nodeTranslate:t,nodeScale:a}=this;e&&(t.innerHTML=`<img src="${i("explosion")}" />`,a.style.textShadow="none",setTimeout((()=>{this.remove()}),100))}remove(){this.nodeScale.remove()}}class Human extends Item{constructor(){super("human",`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36" style="color: ${humanColors[r(humanColors.length)-1]};"><path fill="currentColor" d="M14 22c0 .5-.4 1-1 1s-1-.4-1-1v-8c0-.5.4-1 1-1s1 .4 1 1v8zm10 0c0 .5-.4 1-1 1-.5 0-1-.4-1-1v-8c0-.5.4-1 1-1 .5 0 1 .4 1 1v8z"/><path fill="#66757F" d="M19 19h-5l1 11h3v-7 7h3l1-11z"/><path fill="#546170" d="M18 23c-.5 0-1 7-1 7 0 .5.4 0 1 0 .5 0 1 .5 1 0 0 0-.4-7-1-7z"/><path fill="#292F33" d="M22 11h-8c-1.1 0-2 .8-2 2v8h2v1h2l2-1 2 1h2v-1h2v-8c0-1.1-.8-2-2-2zm-5.3 18.4c1.1 0 1.3.1 1.3.5.0 1.3-1.7 3.4-3.1 2.9-.8-.3-.4-1.9.1-2.9.2-.4.9-.5 1.6-.5z"/><path fill="#292F33" d="M19.3 29.4c-1.1 0-1.3.1-1.3.5-.0 1.3 1.7 3.4 3.1 2.9.8-.3.4-1.9-.1-2.9-.2-.4-.9-.5-1.6-.5z"/><path fill="currentColor" d="M16.7 10h2.4v1.5h-2.4zm-1.4-3.1c0 .5-.3 1.0-.6 1.0-.3 0-.6-.4-.6-1.0 0-.5.3-1.0.6-1.0.3-.0.6.4.6 1.0zm6.6 0c0 .5-.3 1.0-.6 1.0-.3 0-.6-.4-.6-1.0 0-.5.3-1.0.6-1.0.3-.0.6.4.6 1.0z"/><path fill="currentColor" d="M18 10.9c-1.9 0-3.4-1.8-3.4-4.1S16.0 2.6 18 2.6s3.4 1.8 3.4 4.1-1.5 4.1-3.4 4.1"/><path fill="#C1694F" d="M19.3 9.0c-.0-.0-.0-.0-.0-.0h-2.4c-.0 0-.0.0-.0.0-.0.0-.0.0-.0.0.0.0.3.7 1.3.7.9 0 1.2-.6 1.3-.7.0-.0.0-.0-.0-.0zm-1.2-1.1c-.2 0-.4-.0-.6-.1.0.1.2.4.6.4.4 0 .5-.2.6-.4-.1.0-.3.1-.6.1z"/><path fill="#292F33" d="M14.8 6.3c.0-.2.1-.5.2-.7h-.7c.1.8.4 1.0.5.7zm6.3-.1c.2.4.4.1.5-.7h-.9l.3.7z"/><path fill="#546170" d="M19.8 13.2l1.2-1.2-.4-1H19.8z"/><path fill="#66757F" d="M17.9 18l3.0-5.0-1.2-1.3z"/><path fill="#546170" d="M16.2 13.2L14.9 12l.4-1h.7z"/><path fill="#66757F" d="M18 18l-3.0-5.0 1.2-1.3z"/><path fill="#E1E8ED" d="M18 18l-2-7 2 1 2-1z"/><path fill="#55ACEE" d="M19 12l-1-.4L17 12l.8.8-.7 1.9L18 18l.9-3.2-.7-1.9z"/><path fill="#F5F8FA" d="M16.5 10.5L18 11.5l-.9.9L16 11zm2.8 0L18 11.5l.9.9L20 11z"/><path fill="#292F33" d="M20.3 3.9c.6-.1 1.0-.4 1.0-.4s-.1-.5-.2-.9c-.4-1.1-1.1-1.7-1.8-1.5-1.0.2-1.4.1-2.7-.0-1.2-.1-1.7 1.6-1.9 2.5 0 0 .3.2.9.4.0.0.0.0.0.0-2.0.0-2.7.3-2.7.8 0 .6 2.3 1.3 5.2 1.3 2.8 0 5.2-.6 5.2-1.3-.0-.5-.7-.7-2.9-.8z"/><path fill="#66757F" d="M21.5 4.2c-.0-.0-.0-.1-.0-.2-.0-.2-.1-.4-.1-.4s-1.1.4-3.4.4-3.4-.4-3.4-.4-.0.2-.1.4c-.0.0-.0.1-.0.2-.0.2.0.4.9.6.6.1 1.5.2 2.6.2 1.0.0 2.0-.0 2.6-.2.8-.1 1.0-.3.9-.6z"/><path fill="#292F33" d="M21.4 5.8l-.9.3c-.3-.0-1.0-.0-1.7.0-.1.0-.2.0-.7.0-.4 0-.5-.0-.7-.0-.7-.0-1.4-.0-1.7-.0l-.9-.3c-.0-.0-.1.0-.2.1s.0.1.1.2l.8.2c.0.0.2.1.2.2.0.1.1.8.3 1.0.2.2 1.1.1 1.3.0.3-.1.4-.8.5-1.0.0-.1.2-.1.2-.1s.2 0 .2.1c.0.2.1.9.5 1.0.1.0 1.0.1 1.3-.0.2-.1.3-.9.3-1.0.0-.1.1-.1.2-.2l.8-.2c.0-.0.1-.1.1-.2-.0-.0-.1-.1-.2-.1z"/></svg>`)}destroy(e){super.destroy(e);var{nodeTranslate:t,nodeScale:a,angle:n}=this;if(a.classList.remove("human"),t.classList.remove("human"),e){var{x:o,y:l}=this.getCircle();new Score(o,l,10),++totalHumansKilled===totalHumansToKillBeforeNextLevel&&(new Rocket,showNextDialog())}else t.innerHTML=`\n          <div class="money">\n            <div class="transform">\n                <img style="transform: rotate(-${n+45}deg);" src="${i("money")}" />\n            </div>\n          </div>`}}class Rocket extends Item{constructor(){super("rocket",`<img class="rocket-image" src="${i("rocket")}" />`)}destroy(e){super.destroy(e);var{nodeTranslate:t}=this;e?(totaLives--,document.body.style.removeProperty("animation"),window.requestAnimationFrame((()=>document.body.style.animation="shake 0.8s ease-in-out both"))):(t.style.animationName="fly-away",t.onanimationend=()=>{this.remove()})}}function up(){var e=ifSmallScreen(175,350);ut.style.transform=`translateX(${e}px)`}function down(){ut.style.removeProperty("transform")}pi.src=i("planet"),ui.src=i("ufo"),document.onkeydown=e=>{" "===e.key&&(gameOver?reloadGame():gameIsRunning?isPressed||(isPressed=!0,e.preventDefault(),up()):start())},document.onkeyup=e=>{!gameOver&&gameIsRunning&&" "===e.key&&isPressed&&(isPressed=!1,e.preventDefault(),down())},document.body.ontouchstart=()=>{gameOver?reloadGame():isPressed||(gameIsRunning?(isPressed=!0,up()):start())},document.body.ontouchend=e=>{!gameOver&&gameIsRunning&&isPressed&&(isPressed=!1,e.preventDefault(),down())},onselectstart=()=>!1,oncontextmenu=()=>!1;var generateItem=()=>{new Human;var e=25*Math.floor(totalHumansKilled/totalHumansToKillBeforeNextLevel);for(let t=0,a=Math.floor(e/100);t<a;t++)new Rocket;r(100)<=e%100&&new Rocket},collision=(e,t)=>!((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)>(e.r+t.r)*(e.r+t.r)),mainLoop=()=>{score+=.1;var e=ui.getBoundingClientRect(),t=getUfoSize()*globalScale,a={x:e.x+e.width/2,y:e.y+e.height/2,r:t/2};allItems.forEach((e=>{var t=e.getCircle();if(!t)return;collision(a,t)&&e.destroy(!0);const n=document.querySelectorAll(".money:not(.absorbed)");if(0===n.length)return;const o=document.querySelectorAll(".ad-support:not(.level3)");for(let e of o){var{x:l,y:s}=getCenter(e),r={x:l,y:s,r:ifSmallScreen(8,16)};for(let t of n){var{x:l,y:s}=getCenter(t),i={x:l,y:s,r:ifSmallScreen(15,30)};collision(r,i)&&(t.classList.add("absorbed"),t.ontransitionend=()=>t.closest(".item-scale").remove(),e.classList.contains("on")?e.classList.contains("level2")?(e.classList.add("level3"),3===document.querySelectorAll(".ad-support.level3").length&&window.setTimeout((()=>{gameOver||end(END_REASONS.AD)}),500)):e.classList.add("level2"):(e.classList.add("on"),window.setTimeout((()=>e.classList.add("level1")))))}}})),totaLives>0?(lives.innerHTML="ðŸ‘½".repeat(totaLives),s.innerHTML=parseInt(score,10)*scoreMultiplier):end(END_REASONS.KILL)},start=()=>{gameIsRunning=!0,document.body.classList.add("started"),window.setTimeout((()=>{var e=()=>{gameIsRunning&&(generateItem(),setTimeout(e,3e3))};showNextDialog((()=>{window.setTimeout((()=>{e(),showNextDialog((()=>{mainLoopClock=setInterval(mainLoop,33)}))}),500)}))}),1e3)}</script>