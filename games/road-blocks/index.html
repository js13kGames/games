<!doctype html><title>ROADBLOCKS</title><meta name=viewport content="width=device-width,maximum-scale=1,user-scalable=no"><style>#tt,#tt img,.close{display:block}#b,#s,#tt,.attr,.close{position:absolute}#b a,.close{text-align:center}#b,#p,#tl{z-index:5}body,html{margin:0;padding:0;background:#191f27;overflow:hidden;font-family:'Trebuchet MS',Chalkboard,ChalkboardSE-Regular,sans-serif}*{-webkit-transition:opacity .15s,left .15s,transform .15s,top .15s;transition:opacity .15s,left .15s,transform .15s,top .15s}#tt,#tt-inner,.close{border:3px solid #4aadff;border-radius:8px;color:#2c70a8}#b a,.attr,.attr a{color:#fff}#tt{top:30px;bottom:60px;left:30px;right:50px;padding:20px;z-index:10;border-radius:10px;font-size:2em;-webkit-transform:scale(0);transform:scale(0);background:rgba(74,173,255,.6);box-shadow:0 0 1em #000}#tt-inner{background:rgba(255,255,255,.8);padding:10px 30px}#tt-inner.scroll{overflow:auto;font-size:25px!important;max-height:85%}.attr{right:10px;bottom:10px;font-size:8px;opacity:.2}#s.active,.attr:focus,.attr:hover{opacity:1}.close{bottom:20px;right:20px;background:#cce7fe;font-weight:700;font-size:24px;line-height:45px;cursor:pointer;padding:0 2em}#s,#tl{right:0}.close:hover{transform:scale(1.05)}#tt.active{-webkit-transform:scale(1);transform:scale(1)}#s{opacity:0;z-index:9;left:0;top:0;bottom:0;background:rgba(0,0,0,.5)}#tt img{margin:0 auto;padding-bottom:20px;max-width:200px}#b{bottom:10px;left:-10em;background:#5bf;border:1px solid #fff;border-left-style:none;padding:10px;font-size:40px}#b a,#menu>div{cursor:pointer;border-radius:2px}.ingame #b,.rumble{left:0}#b a{display:inline-block;width:1.5em;line-height:1.5em}#p,body.menu #menu{display:block;font-weight:700;position:absolute}#p{top:-3em;right:10px;margin-left:20px;font-size:30px;color:#5bf;text-align:right;text-shadow:-1px -1px 0 #fff,1px -1px 0 #fff,-1px 1px 0 #fff,1px 1px 0 #fff}.ingame #p{top:10px}@-webkit-keyframes rubberBand{100%,from{-webkit-transform:scale3d(1,1,1);transform:scale3d(1,1,1)}30%{-webkit-transform:scale3d(1.25,.75,1);transform:scale3d(1.25,.75,1)}40%{-webkit-transform:scale3d(.75,1.25,1);transform:scale3d(.75,1.25,1)}50%{-webkit-transform:scale3d(1.15,.85,1);transform:scale3d(1.15,.85,1)}65%{-webkit-transform:scale3d(.95,1.05,1);transform:scale3d(.95,1.05,1)}75%{-webkit-transform:scale3d(1.05,.95,1);transform:scale3d(1.05,.95,1)}}.rubberBand{-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-name:rubberBand;animation-name:rubberBand;-webkit-animation-delay:.2s;animation-delay:.2s}h1{font-size:1.2em;font-weight:700}.rumble{-webkit-animation-name:rumble;-webkit-animation-duration:.25s;-webkit-animation-iteration-count:2;animation-name:rumble;animation-duration:.25s;animation-iteration-count:20}@-webkit-keyframes rumble{0%{-webkit-transform:rotate(0)}25%{-webkit-transform:translate(4px,4px)}50%{-webkit-transform:translate(0,-4px)}75%{-webkit-transform:translate(-4px,0)}100%{-webkit-transform:translate(0,2px)}}@keyframes rumble{0%{transform:rotate(0)}25%{transform:translate(4px,4px)}50%{transform:translate(0,-4px)}75%{transform:translate(-4px,0)}100%{transform:translate(0,2px)}}#menu{-webkit-transform:scale(0);transform:scale(0);height:0}body.menu #menu{left:0;right:0;bottom:20px;text-align:center;color:#fff;-webkit-transform:scale(1);transform:scale(1);height:auto}#menu>div{padding:10px 20px;margin:10px 15px;display:inline-block}#tl img,.pill{display:block;border-radius:5px;cursor:pointer}#b a:hover,#menu>div:hover,.pill.active:hover{background:#5bf;transform:scale(1.1)}#menu img{display:block;margin:0 0 10px;padding:0}.pill{color:#ddd;background:#acb2b7;padding:.5em;margin:.5em 0}.pill.active{background:#3184c7;color:#fff}#tl{position:absolute;top:0;bottom:0;width:15%;max-width:8pc;background:#5bf;border-left:1px solid #fff;transform:translateX(110%);overflow-y:auto}#tl.active{transform:translateX(0)}#tl img.active,#tl img:hover{transform:scale(1.1)}#tl img{width:90%;margin:0 5%}#tl img.active{background:#fff}@media(min-width:800px){#tt{left:20%;right:20%;top:75pt;bottom:75pt}#tt-inner{padding:30px 50px}#b a:hover,#menu>div:hover,.pill.active:hover{background:#5bf;transform:scale(1.01)}}@media(max-height:768px){#tt{top:0;left:0;bottom:0;right:0;border-radius:0;border:none}#tt img{max-height:200px}}@media(max-height:490px) and (orientation:landscape){#tt{padding-left:150px}#tt img{position:absolute;left:20px;top:50px}}@media(max-width:800px){#b{font-size:20px}}</style><meta name=theme-color content=#000><canvas></canvas><div id=tt></div><div id=s style=display:none></div><div class=chrome><div id=p></div><div id=b><a data-action=menu>üè†</a> <a data-action=ss>üì∑</a> <a data-action=restart>‚ôª</a></div></div><div id=menu></div><div id=tl></div><script>!function e(t,n,r){function a(i,s){if(!n[i]){if(!t[i]){var c="function"==typeof require&&require;if(!s&&c)return c(i,!0);if(o)return o(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[i]={exports:{}};t[i][0].call(l.exports,function(e){return a(t[i][1][e]||e)},l,l.exports,e,t,n,r)}return n[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)a(r[i]);return a}({1:[function(e,t){function n(e,t,n,r,a,o,i,s,c,u,l){e.beginPath(),e.moveTo(t,n),e.lineTo(r,a),e.lineTo(o,i),e.lineTo(s,c),e.closePath(),e.fillStyle=u,e.strokeStyle=l,e.stroke(),e.fill()}var r=e("./shadecolor");t.exports=function(e,t,a,o,i,s,c,u){e.globalAlpha=u||1,e.lineWidth=1,n(e,t,a,t-o,a-.5*o,t-o,a-s-.5*o,t,a-1*s,c,r(c,-5)),n(e,t,a,t+i,a-.5*i,t+i,a-s-.5*i,t,a-1*s,r(c,10),r(c,25)),n(e,t,a-s,t-o,a-s-.5*o,t-o+i,a-s-(.5*o+.5*i),t+i,a-s-.5*i,r(c,20),r(c,30)),e.globalAlpha=1}},{"./shadecolor":9}],2:[function(e,t){function n(e,t,n,r){var a,o,i;for(o=0;t>o;o++)for(e[o]||(e[o]=[]),i=0;n>i;i++)(a=r(o,i,e[o][i]))&&(e[o][i]=a);return e}var r=e("./drawCube"),a=e("./sprites.js"),o=a.sprites,i=a.tileLogic,s={},c=e("./sfx"),u=JSON.stringify,l=e("./touchlist"),f=(u=JSON.stringify,e("./modal")),h="#55bbff",p="ingame",m=e("./getisometricpos");t.exports=function(e){function t(){e.renderOnly||(H.width=w.innerWidth,H.height=w.innerHeight),U=((H.width+H.height)/2-30)/(e.wMod||e.w),X=U/2,Q.width=R(0)+U,Q.height=X+2,Object.keys(ee).map(function(e){P(e)})}function v(t){touchStartTime=le,t.preventDefault();var n=l(t);Se=1,te=n.is&&e.offsetTouch?40:0,Ae=n,Ce=n.clientX+n.clientY,be=0;var r=q(n,0);return Me=z(n),ze=q(n),qe=m(Me[0],Me[1],U),r||(xe=0,ke&&(ke(),ke=0)),xe?void((1===Te&&"helipad"===r||0===Te&&y(n))&&(xe=!1,Te=0)):!K&&y(n)?(xe=se[0],c("select"),void(Te=0)):("helipad"===r&&ce.length&&(xe=ce[ce.length-1],c("select"),Te=1),"water"===r&&(c("bloop"),x(z(n),h)),void(xe||(ye=setTimeout(function(){var t=n.clientX+n.clientY;if(10>be&&Ce>t-15&&t+15>Ce){te=0;var r=z(n),a=q(n),o=e.predef.filter(function(t){return t[2]!==e.base&&(r[0]===t[0]&&r[1]===t[1]||void 0)});a&&a!==e.base&&!o.length&&(T(n,e.base),c("boom"),x(r,"#aaaaaa"),S(),pe-=15,D(r,-15),F())}},400))))}function g(e){if(K||Se){e.preventDefault(),be++;var t=l(e);!xe&&Se&&(oe[0]+=t.clientX-Ae.clientX,oe[1]+=t.clientY-Ae.clientY),Ae=t,Me=z(t),ze=q(t),qe=m(Me[0],Me[1],U)}}function b(){if(Se=0,clearTimeout(ye),xe){if(y(Ae)||1===Te&&"helipad"===ze)return;"helipad"===ze?(c("place"),1!=Te&&(ce.push(xe),se.shift(),$=le,k(z(Ae)))):K||M(xe,Me)?(o[xe+"-base"]&&(xe+="-base"),T(Ae,xe)&&(c("place"),k(z(Ae)),0===Te?($=le,se.shift()):ce.pop(),Te=0)):(c("error"),c("error",.15)),F(),nextTile=i[se[0]],nextTile&&nextTile.firstrun&&!s[se[0]]&&(C(nextTile.firstrun,nextTile.title,se[[0]]),s[se[0]]=!0)}K||(xe=!1,Te=0,re&&(re.forEach(function(e){j(e)}),he=0,n(we,e.w,e.h,function(e,t,n){!n[2]&&n[0]?(D([e,t],0-n[0]),n[0]=0):n[1]&&D([e,t],n[0]),n[1]=0,n[2]=0,he+=n[0],E()})))}function y(e){return e.clientY<X&&e.clientX>me&&e.clientX<me+X}function x(e,t){for(var n=0;8>n;n++)De.push([le,e[0]-.5,e[1]-.5,2*Math.random()-1,2*Math.random()-1,1.5,te?800:500,t,-1,1,U/30])}function k(e){for(var t=["#aaaaaa","#cccccc",h],n=0;10>n;n++){var r=Math.random()-.5,a=Math.random()-.5;De.push([le,e[0]-Math.random(),e[1]-Math.random(),r/4,a/4,0-Math.random()/2,500,t[Math.round(2*Math.random())],-.5,.8,U/50])}}function M(t,n){if(e.strict&&0===t.indexOf("road"))try{var r=ve[n[0]][n[1]],a=O();ve[n[0]][n[1]]=t;var o=O();if(ve[n[0]][n[1]]=r,o.win)return!0;if(a.lose.length===o.lose.length)return!1}catch(e){return!1}for(var s=0;2>s;s++)if(u(n)===u(e.predef[s].slice(0,2)))return!1;return ve[n[0]]?i[t].p(ve[n[0]][n[1]]):void 0}function z(e,t){var n=function(e,t,n){return[(e/(n/2)+t/(n/4))/2,(t/(n/4)-e/(n/2))/2]}(e.clientX-oe[0],e.clientY-oe[1]-(0!==t?te:0),U);return[Math.ceil(n[0]),Math.ceil(n[1])]}function q(e,t){var n=z(e,t);try{return ve[n[0]][n[1]]}catch(e){}}function T(e,t){var n=z(e);try{ve[n[0]][n[1]]=t}catch(e){return 0}return 1}function S(){d.body.className=p+" rumble",setTimeout(function(){d.body.className=p},500)}function C(e,t,n,r){var a=ee[n].c,o=document.createElement("canvas");o.width=a.width,o.height=a.height/1.5,o.getContext("2d").drawImage(a,0,0-a.height/3),f.show(e,t,n?o.toDataURL():0,1,r)}function A(e){var t=Math.pow(1.02,Math.max(0,(le-this.start)/3))/200*H.height;e[1]+=t}function j(e){Ee.forEach(function(t){var n=[e[0]+t[1][0],e[1]+t[1][1]];try{var r=ve[n[0]][n[1]];if(i[r]){var a=i[r].points||0;we[n[0]][n[1]]=[a,we[n[0]][n[1]][0]!==a,1]}else we[n[0]][n[1]]=[0,0!==we[n[0]][n[1]][0],1]}catch(e){}})}function D(e,t){return t&&Ne.push([le,t,m(e[0],e[1],U),t>1]),E(),t}function E(){document.querySelector("#p").innerText=he+pe}function N(e,t,n,r){if(K)return[];if(r||(r=[e]),e[0]===t[0]&&e[1]===t[1])return{win:r};var a,o=ve[e[0]][e[1]],s=i[o],c=n[0]>1?-2+n[0]:n[0]+2;if(s.c[n[0]])a=n;else{var u=Ee.filter(function(e){return!(!s.c[e[0]]||e[0]===c)||void 0});if(!u.length)return{lose:r};a=u[0]}var l,f,d=[e[0]+a[1][0],e[1]+a[1][1]];try{l=ve[d[0]][d[1]],f=i[l]}catch(e){return{lose:r}}var h=a[0]>1?-2+a[0]:a[0]+2;return f&&f.c&&f.c[h]?(r.push(d),N(d,t,a,r)):{lose:r}}function O(){return N(e.predef[0],e.predef[1],Ee[1])}function F(){if(!K){var t=O();if(re=t.win||t.lose,t&&t.win){var r=function(e,t){le>this.start&&le<this.end&&(e[1]+=0-20*Math.sin((le-this.start)/125),this.s||(this.s=1,j(t)))};t.win.forEach(function(e,t){setTimeout(function(){c("ping"),D(e,10),pe+=10},100*t),ge[e[0]][e[1]]={fn:r,start:100*t+le,end:100*t+le+350}}),c("win",t.win.length/10+.1),c("win",t.win.length/10+.2),setTimeout(function(){e.outro?C(e.outro[0],e.outro[1],e.outro[2],function(){e.onwin&&e.onwin.call(_)}):e.onwin&&e.onwin.call(_)},100*t.win.length+2e3)}else{var a=!0;0!==se.length&&n(ve,e.w,e.h,function(t,n,r){r===e.base&&(a=!1)}),a&&e.onlose&&e.onlose.call(_)}}}function L(e){"function"==typeof e&&(e=e());var t=m(e[1],e[2],U);r(ne,0-t[0],0-t[1]-e[0]*X,e[3]*X,e[4]*X,e[5]*X,e[6],e[7])}function I(e){if(4===e.length){var t=m(e[2],e[3],U);ne.translate(0-t[0]-e[1],0-t[1]);var n=o[e[0]];"function"==typeof n&&(n=n(t)),n.forEach(L),ne.translate(t[0]-e[1],t[1])}else L(e)}function P(e,t,n){if(t){if(t.lastRender===le)return t;(ne=t.x).clearRect(0,0,t.c.width,t.c.height)}else(t={c:d.createElement("canvas"),seed:n}).c.width=U+1,t.c.height=2*U,ne=t.c.getContext("2d"),t.x=ne;return t.lastRender=le,function(e,t){ne.translate(U/2,1.5*U),"function"==typeof e&&(e=e(t)),e.forEach(I),ne.translate(0-U/2,0-1.5*U)}(o[e],t.seed),ee[e]=t,t}function B(e,t,n){var r=ee[n],o=m(e,t,U);o[1]<0-oe[1]-U||o[0]<0-oe[0]-U||o[1]>0-oe[1]+H.height+X||o[0]>0-oe[0]+H.width+X||(r?a.animated[n]&&P(n,r):r=P(n),ge[e][t]&&ge[e][t].fn.call(ge[e][t],o,[e,t]),"water"===n&&1e3/de>30?W.drawImage(r.c,o[0]-U/2,o[1]-1.5*U-2*Math.sin(e+t+le/200)):W.drawImage(r.c,o[0]-U/2,o[1]-1.5*U),"helipad"===n&&function(e){ce.forEach(function(t,n){1===Te&&n===ce.length-1?Se||W.drawImage(ee[t].c,e[0]-U/2,e[1]-1.5*U-X/10*(n+1)-5*Math.abs(Math.sin(le/200))):W.drawImage(ee[t].c,e[0]-U/2,e[1]-1.5*U-X/10*(n+1))})}(o))}function R(e){return 0-X/2+(V-e-1)*(X+G)}function Y(t){if(J){if(de=.9*de+.1*(Date.now()-le),le=Date.now(),W.fillStyle="#191F27",e.renderOnly||W.fillRect(0,0,H.width,H.height),W.translate(oe[0],oe[1]),n(ve,e.w,e.h,B),W.translate(0-oe[0],0-oe[1]),!e.renderOnly){if(function(){if(ie&&fe){$&&(Oe=(1-(le-$)/200)*(R(1)-R(0)),le>$+200&&($=0,Oe=0));for(var e=1;e>-1;e--)Z.fillStyle=0===e?h:"#fff",Z.fillRect(0+e,1-e,Math.round(R(0)+U/2+10),Math.round(X+2*e));for(e=0;V>e;e++){var t=se[e];void 0!==t&&(xe&&0===Te&&0===e||Z.drawImage(ee[t].c,R(e)+Oe,0-.75*X-(0!==e||xe?1:5*Math.max(0,Math.sin(le/200))),X,U))}Z.globalAlpha=.5,Z.fillStyle="#fff",Z.fillRect(0,1,R(0)-X/2,X-1),Z.globalAlpha=1,W.drawImage(Q,0,10)}}(),ie)if(K&&xe&&qe)W.drawImage(ee.ok.c,qe[0]-U/2+oe[0],qe[1]-1.5*U+oe[1]);else if(xe)if(Se){if(W.drawImage(ee[xe].c,Ae.clientX-U/2,Ae.clientY-1.25*U-te),qe&&ve[Me[0]]&&ve[Me[0]][Me[1]]){var a="helipad"===ze||M(xe,Me)?"ok":"notok";W.drawImage(ee[a].c,qe[0]-U/2+oe[0],qe[1]-1.5*U+oe[1])}}else 0===Te&&W.drawImage(ee[xe].c,R(0),0-U);W.font="bold 25px serif",W.strokeStyle="#fff",W.lineWidth=5,Ne.length&&(Ne=Ne.filter(function(e){var t=le-e[0];if(1e3>t){var n=[e[1],e[2][0]+oe[0],e[2][1]+oe[1]-t/1e3*X-X];W.globalAlpha=1-t/1e3,W.fillStyle=e[3]?h:"#FF5566",W.strokeText.apply(W,n),W.fillText.apply(W,n)}else if(t>1e3)return!1;return!0}),W.globalAlpha=1)}De.length&&1e3/de>30&&(De=De.filter(function(e){var t=(le-e[0])/e[6];if(t>=1)return!1;var n=e[1]+e[3]*t,a=e[2]+e[4]*t,o=e[5]*X*t*e[8]*t*t,i=m(n,a,U);return r(W,i[0]+oe[0],i[1]+oe[1]-o,e[10],e[10],e[10],e[7],t>.5?Math.max(0,e[9]*(1-t)):e[9]),1})),!1!==t&&requestAnimationFrame(Y)}}var U,X,_=this,H=e.canvas,W=H.getContext("2d"),J=!0,K="Free"===e.gameType,V=4,G=15,Q=d.createElement("canvas"),Z=Q.getContext("2d"),$=0,ee={ok:1,notok:1,dump:1,forest:1};K&&a.placeable.map(function(e){ee[e]=1}),t();var te,ne,re,ae=e.h*X/4,oe=[H.width/2,H.height/2-ae+X/4],ie=1,se=[],ce=[],ue=a.placeable,le=Date.now(),fe=1,de=0,he=0,pe=0;E(),e.dist?se=e.dist.map(function(t){return P(ue[t],void 0,e.seed++),ue[t]}):0===e.dist&&(fe=0);var me=R(0),ve=n([],e.w,e.h,function(){return e.base}),ge=n([],e.w,e.h,function(){return 0}),we=n([],e.w,e.h,function(){return[0,0]});e.predef.forEach(function(e){ve[e[0]][e[1]]=e[2]});var be,ye,xe,ke,Me,ze,qe,Te,Se,Ce,Ae=!1,je=[["resize",t,window],["touchstart",v],["touchmove",g],["touchend",b],["mousedown",v],["mousemove",g],["mouseup",b]];e.renderOnly||(d.body.className=p,je.forEach(function(e){(e[2]||H).addEventListener(e[0],e[1],!0)}));var De=[];_.setTile=function(e,t){xe=e,ke=t},_.destroy=function(t){function r(){J=!1,je.forEach(function(e){(e[2]||H).removeEventListener(e[0],e[1],!0)}),d.body.className="",t&&t()}t?(ge=n([],e.w,e.h,function(){var e=le+100*Math.random();return{fn:A,start:e,end:e+500}}),setTimeout(r,1e3),setTimeout(S,50),c("boom")):r()},this.ss=function(){ie=0,Y();var e=d.createElement("a");e.setAttribute("target","_blank"),e.setAttribute("download","screenshot.png"),e.href=H.toDataURL("image/png"),e.click(),ie=1,Y()};var Ee=[[0,[-1,0]],[1,[0,-1]],[2,[1,0]],[3,[0,1]]],Ne=[],Oe=0;Y(!e.renderOnly),e.renderOnly||e.intro&&C.apply(this,e.intro)}},{"./drawCube":1,"./getisometricpos":3,"./modal":7,"./sfx":8,"./sprites.js":10,"./touchlist":11}],3:[function(e,t){t.exports=function(e,t,n){return[n/2*(e-t),(e+t)*(n/4)]}},{}],4:[function(e){function t(){y.setTile("",0),s.className="",s=0}function n(e,t){var n=d.createElement("canvas");return n.width=t,n.height=t,new o({tileSize:t,w:1,h:1,wMod:1.3,canvas:n,base:e,predef:[],dist:[],renderOnly:!0}),n.toDataURL("image/png")}function r(e,t){d.body.className="",b=e,t=Number(t),g=t;var n=u[e][t];return n?(n.canvas=i,n.gameType=e,n.offsetTouch="Free"!==e,n.onwin=function(){y.destroy(),r(e,t+1),w.location.hash=e+"-"+(t+1),m.set(e+(t+1),1)},n.onlose=function(){y.destroy(function(){p.show("Looks like you got stuck. Tap to try again.","Level failed",null,1,function(){r(e,t)})})},void(y=new o(n))):void(y?p.show("Congratulations, you've finished all the levels. Be sure to share this game with your friends!","You won!",0,0,a):a())}function a(){v.className="",f(i,c,0,1),d.querySelector("#menu").innerHTML=[["Puzzle","roadx-base"],["Free map","dump"]].map(function(e){var t=' data-action="'+e[0]+'"';return"<div"+t+"><img"+t+' src="'+n(e[1],Math.min(i.width,i.height)/4)+'">'+e[0]+"</div>"}).join(""),d.body.className="menu",h("dialog")}var o=e("./game");window.d=document,window.w=window;var i=d.querySelector("canvas");i.width=innerWidth,i.height=innerHeight;var s,c=i.getContext("2d"),u=e("./l"),l=e("./sprites"),f=e("./logo"),h=e("./sfx"),p=e("./modal"),m={set:function(e,t){localStorage[e]=t},state:localStorage},v=d.querySelector("#tl");d.onkeydown=function(e){if(27==(e=e||window.event).keyCode)if(s)t();else if(p.visible)p.hide();else if(y);else try{window.close()}catch(e){}},d.body.onclick=function(e){var t=e.target.dataset;return x[t.action]?(x[t.action](t),!1):y[t.action]?(y[t.action](t),!1):void 0};var g,b,y=0,x={restart:function(){y.destroy(function(){r(b,g)})},menu:function(){y&&(y.destroy(function(){a()}),y=0)},Puzzle:function(){p.show(u.Puzzle.map(function(e,t){var n=!t||m.state["Puzzle"+t];return'<a class="pill '+(n?"active":"")+'" data-action="'+(n?"l":"")+'" data-l="'+t+'">'+(t+1)+". "+e.name+"</a>"}).join(""),"Puzzle play",null,0,0,"Back")},"Free map":function(){m.state.Puzzle5?(v.innerHTML=l.placeable.map(function(e){return'<img id="t'+e+'" src="'+n(e,128)+'" data-action="p" data-s="'+e+'">'}).join(""),v.className="active",r("Free",0)):p.show("Unlock this mode by completing more puzzles.","Mode locked")},Exit:function(){window.close()},l:function(e){p.hide(function(){r("Puzzle",e.l)})},p:function(e){var n=s;n&&(n.className=""),n===(s=d.querySelector("#t"+e.s))?t():(s.className="active",y.setTile(e.s,function(){t()}))}};window.AudioContext||window.webkitAudioContext?a():p.show('This browser is too old to run Road Blocks.<a class="pill active" href="http://spacekidgames.com/road-blocks/system-requirements">Find out more</a>',"Unsupported",null,1)},{"./game":2,"./l":5,"./logo":6,"./modal":7,"./sfx":8,"./sprites":10}],5:[function(e,t){function n(e){return Number(e)}function r(e){return!!e&&e.match(/.{8}|.+/g).map(function(e){return String(parseInt(e,36)).substr(1)}).join("")}var a=Object.keys(e("./sprites").sprites),o={Puzzle:[["Roads 101","i76c67-255s-1knunumjd",["Connect from left to right by dragging tiles from the top.","Left to right","roady-base"]],["Town planning","i76c67-65184-1p97t4hl2u15",["Now you've got the hang of it, give it a go with all the tiles.","Your turn","roadx"]],["Reverse the flow","azbmn-1q0ank-1g2hikr6f",["Use the helipad to reverse the order of your tiles.","Stack tiles for later","helipad"]],["The Block Forest","1v2s8v-1qj324h32y-1q6ak2ac1xh4cznx3p",["Building road past special tiles like forests or the helipad gives you extra points.","Bonus points","forest"]],["‚òÖ Bulldozer Beach","i7b1xa-1q2p0rg4a-1gzj2ngl1pkgajre1jbq4o181xumsg041xxuxo8u1uup921p1l2ks6zg1ouj8oml2bh9tx",["Long press to bulldoze a tile you no longer need.","Bulldoze","dump"],["Congratulations. You've unlocked <b>Free Map</b> mode from the main menu.","Free Map","dump"]],["Palm Island","1vo7ux-gq8p29-1gzk9imq1sdea13u1kz9p2ka1ou7c1b81yeb9toa1tc4t3m1qvtx"],["Loopy Lagoon","juufym-23tbv4l816u-1gzkuybk1kz2judm1jbq4o181xumsg041xxuxo8u1uuph0c55kucn4l"],["Mini Monaco","lj1jeg-1bhgx297at7-1ztkxtp01f53i2vw1dpysny21opahvwp1xhbz7hg1v6adci81l9iuyio1b1oewh41ntzxghi34o8"],["Dual Carriageway","n5zga6-o04u8y-22kz99uk1hatzygi1l5e01zw1k8szvjg1plhv9je1tiqqs261l67rhqd1fgoxwyr"],["Little condo by the sea","1wed7t-1ahr1tavxbe5-1r3foqhe1sde83nn1kzfn8fs22lx2t6o1f3q5hvo1sywaee81l1l2z8n1fo32lgc281qh6l61vv32wmm1l2qqjt01tfxkw0o1a1sx1ai1tpd1b821l8p2xtc1sqlgat51mfusy7k2ppd"]],Free:[[null,"6exf2-a-"]]};Object.keys(o).map(function(e){o[e]=o[e].map(function(e){var t=e[1].split("-").map(r),o=[];t[2]&&(o=t[2].match(/.{4}/g).map(function(e){return[(e=e.match(/(.)(.)(.+)/).map(n))[1],e[2],a[e[3]]]}));var i=t[0].match(/(.+)(.)(.)(.)(..)(.)$/);return{seed:n(t[1]),w:i[2],h:i[3],wMod:i[4],base:a[i[5]],strict:!!i[6],dist:"0"===t[1]?0:t[1].split("").map(n),predef:o,intro:e[2],outro:e[3],name:e[0]}})}),t.exports=o},{"./sprites":10}],6:[function(e,t){var n=[[1,1,1,,,1,1,,,,1,,,1,1,,,1,1,1,,1,,,,1,1,,,,1,1,,1,,1,,,1,1],[1,,1,,1,,,1,,1,,1,,1,,1,,1,,1,,1,,,1,,,1,,1,,,,1,,1,,1,,],[1,1,,,1,,,1,,1,1,1,,1,,1,,1,1,,,1,,,1,,,1,,1,,,,1,1,,,,1],[1,,1,,1,,,1,,1,,1,,1,,1,,1,,1,,1,,,1,,,1,,1,,,,1,,1,,,,1],[1,,1,,,1,1,,,1,,1,,1,1,,,1,1,1,,1,1,1,,1,1,,,,1,1,,1,,1,,1,1,1]],r=e("./drawCube"),a=e("./getisometricpos"),o=e("./shadecolor"),i=e("./sfx");t.exports=function(e,t,s,c){var u=e.width/6.5,l=e.height/8,f=e.width/50,d=Date.now();c&&(d-=5e3),function c(){var m=Date.now()-1e3;if(t.clearRect(0,0,e.width,e.height),n.map(function(e,n){e.map(function(e,i){var s=a(i,n,f),c=(m+10*i-d)/500,h=Math.max(0,screen.height*(1-c));0===h&&p++,1==e&&(r(t,u+2*s[0],l+2*s[1]-h,f,f,.75*f,o("#888888",0-i)),r(t,u+2*s[0],l+2*s[1]-.75*f-h,f,f,.25*f,o("#55bbff",0-i)))})}),p&&!h){h=1;for(var v=0;4>v;v++)i("thud",v/9)}1e3>=m-d?requestAnimationFrame(c):s&&s()}();var h=0,p=0}},{"./drawCube":1,"./getisometricpos":3,"./sfx":8,"./shadecolor":9}],7:[function(e,t){function n(e){return parseInt(w.getComputedStyle(e,null).getPropertyValue("height"))}var r=e("./sfx"),a=document.querySelector("#tt"),o=document.querySelector("#s");t.exports={visible:!1,show:function(e,i,s,c,u,l){i=i?"<h1>"+i+"</h1>":"",s=s?'<img class="rubberBand" src="'+s+'">':"",a.innerHTML='<div id="tt-inner"><a class="close">'+(l||"OK")+"</a> "+i+e+s+"</div>",a.style.display="block",o.style.display="block",t.exports.visible=!0,setTimeout(function(){function e(e){e.preventDefault(),r("select"),t.exports.hide(u)}a.className="active",o.className="active";var i=n(a),s=d.querySelector("#tt-inner");if(d.querySelector("#tt-inner img"),c){s.className="";for(var l=35;l>10&&(s.style.fontSize=l+"px",!(n(s)<i-100));l--);}else s.className="scroll";document.querySelector(".close").onclick=e,o.onclick=e,a.ontouchstart=a.onclick,setTimeout(function(){r("dialog")},10)},1)},hide:function(e){a.className="",o.className="",t.exports.visible=!0,setTimeout(function(){a.style.display="none",o.style.display="none",e&&e()},150)}}},{"./sfx":8}],8:[function(e,t){function n(){this.set=function(e){for(var t=0;24>t;t++)this[String.fromCharCode(97+t)]=e[t]||0;this.c<.01&&(this.c=.01);var n=this.b+this.c+this.e;if(.18>n){var r=.18/n;this.b*=r,this.c*=r,this.e*=r}}}var r=new function(){var e,t,r,a,o,i,s,c,u,l,f,d,h=this;this._params=new n,h.r=function(){var e=h._params;a=100/(e.f*e.f+.001),o=100/(e.g*e.g+.001),i=1-e.h*e.h*e.h*.01,s=-e.i*e.i*e.i*1e-6,e.a||(f=.5-e.n/2,d=5e-5*-e.o),c=1+e.l*e.l*(e.l>0?-.9:10),u=0,l=1==e.m?0:(1-e.m)*(1-e.m)*2e4+32},h.tr=function(){h.r();var n=h._params;return e=n.b*n.b*1e5,t=n.c*n.c*1e5,r=n.e*n.e*1e5+12,3*((e+t+r)/3|0)},h.s=function(n,p){var m=h._params,v=1!=m.s||m.v,g=m.v*m.v*.1,w=1+3e-4*m.w,b=m.s*m.s*m.s*.1,y=1+1e-4*m.t,x=1!=m.s,k=m.x*m.x,M=m.g,z=m.q||m.r,q=m.r*m.r*m.r*.2,T=m.q*m.q*(m.q<0?-1020:1020),S=m.p?32+((1-m.p)*(1-m.p)*2e4|0):0,C=m.d,A=m.j/2,j=m.k*m.k*.01,D=m.a,E=e,N=1/e,O=1/t,F=1/r,L=5/(1+m.u*m.u*20)*(.01+b);L>.8&&(L=.8),L=1-L;for(var I,P,B,R,Y,U,X=!1,_=0,H=0,W=0,J=0,K=0,V=0,G=0,Q=0,Z=0,$=0,ee=new Array(1024),te=new Array(32),ne=ee.length;ne--;)ee[ne]=0;for(ne=te.length;ne--;)te[ne]=2*Math.random()-1;for(ne=0;p>ne;ne++){if(X)return ne;if(S&&++Z>=S&&(Z=0,h.r()),l&&++u>=l&&(l=0,a*=c),(a*=i+=s)>o&&(a=o,M>0&&(X=!0)),P=a,A>0&&($+=j,P*=1+Math.sin($)*A),8>(P|=0)&&(P=8),D||(0>(f+=d)?f=0:f>.5&&(f=.5)),++H>E)switch(H=0,++_){case 1:E=t;break;case 2:E=r}switch(_){case 0:W=H*N;break;case 1:W=1+2*(1-H*O)*C;break;case 2:W=1-H*F;break;case 3:W=0,X=!0}z&&(0>(B=0|(T+=q))?B=-B:B>1023&&(B=1023)),v&&w&&(1e-5>(g*=w)?g=1e-5:g>.1&&(g=.1)),U=0;for(var re=8;re--;){if(++G>=P&&(G%=P,3==D))for(var ae=te.length;ae--;)te[ae]=2*Math.random()-1;switch(D){case 0:Y=f>G/P?.5:-.5;break;case 1:Y=1-G/P*2;break;case 2:Y=.225*((0>(Y=1.27323954*(R=6.28318531*((R=G/P)>.5?R-1:R))+.405284735*R*R*(0>R?1:-1))?-1:1)*Y*Y-Y)+Y;break;case 3:Y=te[Math.abs(32*G/P|0)]}v&&(I=V,0>(b*=y)?b=0:b>.1&&(b=.1),x?(K+=(Y-V)*b,K*=L):(V=Y,K=0),J+=(V+=K)-I,Y=J*=1-g),z&&(ee[Q%1024]=Y,Y+=ee[(Q-B+1024)%1024],Q++),U+=Y}U*=.125*W*k,n[ne]=U>=1?32767:-1>=U?-32768:32767*U|0}return p}},a=window.AudioContext||window.webkitAudioContext;if(a){var o=new a,i={};[["select",[2,,.11,.4,.13,.25,,0,,0,,0,,0,,0,,0,1,,0,.1,,1]],["place",[3,,.3,.25,,.08,,-.3,,0,,0,,0,,0,,0,1,,0,,0,.35]],["ping",[2,,.1,.4,.09,.44,,0,,0,,0,,0,,0,,0,1,,0,.1,,.5]],["dialog",[2,,.04,.4,.28,.35,,.2,,.15,.25,,0,.33,,.62,,0,1,,0,,0,.5]],["win",[2,,.14,.4,.5,.56,,0,,0,,0,,.08,,0,,0,1,,0,.1,,.35]],["boom",[3,,.39,.73,.38,.06,,.14,,0,,0,,0,,0,,0,1,,0,,0,.3]],["error",[1,,.15,,,.1,,,,,,,,,,,,,1,,,.1,,.4]],["thud",[3,,.11,.47,.15,.09,,-.3,,0,,0,,0,,0,,0,1,,0,,0,.35]],["bloop",[2,,.25,.4,.15,.2,,.24,,.04,.3,,0,,0,,0,,1,,0,,0,.5]]].forEach(function(e){o.decodeAudioData(function(e){for(var t=atob(e.substr(e.indexOf(",")+1)),n=t.length,r=new Uint8Array(n),a=0;n>a;a++)r[a]=t.charCodeAt(a);return r.buffer}(function(e){r._params.set(e);var t=r.tr(),n=new Uint8Array(4*((t+1)/2|0)+44),a=2*r.s(new Uint16Array(n.buffer,44),t),o=new Uint32Array(n.buffer,0,44);o[0]=1179011410,o[1]=a+36,o[2]=1163280727,o[3]=544501094,o[4]=16,o[5]=65537,o[6]=44100,o[7]=88200,o[8]=1048578,o[9]=1635017060,o[10]=a,a+=44;for(var i=0,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c="data:audio/wav;base64,";a>i;i+=3){var u=n[i]<<16|n[i+1]<<8|n[i+2];c+=s[u>>18]+s[u>>12&63]+s[u>>6&63]+s[63&u]}return c}(e[1])),function(t){i[e[0]]=t})}),t.exports=function(e,t){if(i[e]){var n=o.createBufferSource();n.buffer=i[e],n.connect(o.destination),t=o.currentTime+(t||0),n.start(t)}}}else t.exports=function(){}},{}],9:[function(e,t){t.exports=function(e,t){e=e.substr(1);var n=parseInt(e,16),r=Math.round(2.55*t),a=(n>>16)+r,o=(n>>8&255)+r,i=(255&n)+r;return"#"+(16777216+65536*(255>a?1>a?0:a:255)+256*(255>o?1>o?0:o:255)+(255>i?1>i?0:i:255)).toString(16).slice(1)}},{}],10:[function(e,t){function n(e){return-1!==["grass","sand"].indexOf(e)}var r=innerWidth<800?2:1,a="#444444",o="#AE907A",i="#aaaaaa",s="#DC6969",c="#D4ECF1",u="#FAB41D",l="#000000",f="#66aa66",d="#9EC8A0",h="#C8AF9E",p={roady:[[-.25,.9,0,.1,1,.25,i],[-.25,.1,0,.8,1,.2,a],[-.25,0,0,.1,1,.25,i]],roadx:[[-.25,0,.9,1,.1,.25,i],[-.25,0,.1,1,.8,.2,a],[-.25,0,0,1,.1,.25,i]],roadxy:[[-.25,.9,.9,.1,.1,.25,i],["r1",0,0,0],[-.25,.9,0,.1,.1,.25,i],["r2",0,0,0],["rc",0,0,0],["r3",0,0,0],[-.25,0,.9,.1,.1,.25,i],["r4",0,0,0],[-.25,0,0,.1,.1,.25,i]],roadx2yl:[[-.25,.1,.9,.9,.1,.25,i],["r1",0,0,0],[-.25,.9,0,.1,.1,.25,i],[-.25,0,.9,.1,.1,.25,i],["rc",0,0,0],["r3",0,0,0],[-.25,0,0,.1,.9,.25,i]],roadx2yr:[[-.25,.9,.9,.1,.1,.25,i],["r2",0,0,0],["r1",0,0,0],["rc",0,0,0],[-.25,.1,0,.9,.1,.25,i],[-.25,0,.1,.1,.9,.25,i],[-.25,0,0,.1,.1,.25,i]],roady2xl:[[-.25,.9,.9,.1,.1,.25,i],[-.25,0,.9,.9,.1,.25,i],[-.25,.9,0,.1,.9,.25,i],["rc",0,0,0],["r3",0,0,0],["r4",0,0,0],[-.25,0,0,.1,.1,.25,i]],roady2xr:[[-.25,.9,.1,.1,.9,.25,i],["r2",0,0,0],["rc",0,0,0],[-.25,.9,0,.1,.1,.25,i],[-.25,0,.9,.1,.1,.25,i],["r4",0,0,0],[-.25,0,0,.9,.1,.25,i]],forest:[["ground",0,0,0],["grassSurface",0,0,0],["tree",0,.3,.8],["tree",0,.6,.5],["tree",0,.4,.2],["elk",0,.1,.1]],broadx:[["water",0,0,0],["roadx",0,0,0],[0,0,0,1,0,.1,i],[0,0,1,1,0,.1,i]],broady:[["water",0,0,0],["roady",0,0,0],[0,0,0,0,1,.1,i],[0,1,0,0,1,.1,i]],r1:[[-.25,.9,.1,.1,.8,.2,a]],r2:[[-.25,.1,.9,.8,.1,.2,a]],r3:[[-.25,.1,0,.8,.1,.2,a]],r4:[[-.25,0,.1,.1,.8,.2,a]],rc:[[-.25,.1,.1,.8,.8,.2,a]],ground:[[-1,0,0,1,1,.75,"#ae907a"]],grassSurface:[[-.25,0,0,1,1,.25,f]],sandSurface:[[-.25,0,0,1,1,.25,"#D6D38C"]],c:[],grass:[["ground",0,0,0],["grassSurface",0,0,0]],sand:[["ground",0,0,0],["sandSurface",0,0,0]],palm:[["ground",0,0,0],["sandSurface",0,0,0],["treePalm",0,.8,.8],["treePalm",0,.4,.4]],building:[["ground",0,0,0],["grassSurface",0,0,0],[0,.2,.4,.8,.6,.8,h],[0,.3,0,.7,.4,.4,h],[0,.3,.05,0,.3,.35,i],[.05,.2,.75,0,.2,.28,c],[.4,.2,.75,0,.2,.28,c],[0,.2,.5,0,.2,.68,c]],test2:[],water:[[-1,0,0,1,1,.1,"#ffff99"],[-.25,0,0,1,1,0,"#55bbff",.3]],helipad:[["ground",0,0,0],[-.25,0,0,1,1,.25,i],[0,.95,.95,.05,.05,.1,s],[0,.05,.05,.9,.9,.05,i],[.05,.2,.2,.6,.1,0,s],[.05,.2,.7,.6,.1,0,s],[.05,.45,.3,.1,.4,0,s],[0,0,0,.05,.05,.1,s],[0,.95,0,.05,.05,.1,f],[0,0,.95,.05,.05,.1,f]],dump:[["ground",0,0,0],[-.25,0,0,1,1,.25,h],["bulldozer",0,.5,.5],[0,.1,.2,.1,.1,.1,h],[0,.35,.25,.1,.1,.1,h],[0,.3,.4,.1,.1,.1,h]],ok:[[0,0,0,1,1,0,"#00ff00",.5]],notok:[[0,0,0,1,1,0,s,.5]],tree:function(){for(var e=Math.sin(new Date/300),t=Math.sin(new Date/150),n=[[0,-.05,-.05,.1,.1,.2,h]],r=5;r>0;r--)n.push([.6-r/11+t*(5-r)/500,e*(5-r)/300-.15,-.15-e*(5-r)/300,r/25,r/25,.05,d]);return n},treePalm:function(){for(var e,t,n=Math.sin(new Date/300)/150,a=[],o=0;6>o;o++)a.push([t=5*o/50,e=0-n*o*r,0,.03,.03,.1,h]);return a.push([t,.05+e,0,.02,.15,.02,d]),a.push([t,0+e,0,.2,.08,.05,d]),a.push([t-.05,-.2+e,0,.2,.05,.05,d]),a.push([t,0+e,0,.05,.25,.02,d]),a.push([t,0+e,-.2,.05,.2,.02,d]),a.push([t,-.05+e,-.15,.02,.15,.02,d]),a},elk:function(){var e=Math.sin(new Date/1e3)>0?.05:.15;return[[.15,.09,0,.02,.02,.05,o],[0,-.05,-.05,.02,.02,.1,o],[0,-.05,.03,.02,.02,.1,o],[0,.05,-.05,.02,.02,.1,o],[.1,-.08,-.05,.16,.1,.1,o],[e,-.08,.02,.04,.04,.04,o],[e+.04,-.08,0,.01,.01,.1,o],[e+.09,-.08,-.04,.01,.02,.02,o],[e+.1,-.08,-.04,.01,.01,.05,o],[e+.09,-.08,.06,.01,.02,.02,o],[e+.1,-.08,.08,.01,.01,.05,o],[e+.04,-.08,.04,.01,.01,.1,o]]},bulldozer:function(){var e=Math.sin(new Date/500),t=0-.1*Math.min(0,e);return[[0,0,.1,.3,.3,.1,i],[.02,0,.12,0,.06,.06,l],[.02,0,.22,0,.06,.06,l],[.02,0,.32,0,.06,.06,l],[.04,0,.1,0,.3,.02,u],[.04,0,.1,.3,0,.02,l],[.12,0,.1,.3,.3,.25,"#FAB41D"],[.15,0,.12,0,.1,.2,c],[.2,0,.25,0,.13,.15,c],[.2,.03,.1,.25,0,.15,c],[t,0,.07,.3,.01,.1,i],[t,.29,0,.01,.08,.1,i],[t,0,0,.3,.08,.01,i],[t,0,0,.01,.08,.1,u],[t/2+.01,.05,.1,0,.1,.05,u],[t/4+.025,.05,.2,0,.1,.05,u]]},forest2:[["ground",0,0,0],["grassSurface",0,0,0],["tree",0,.3,.8],["tree",0,.6,.5],["tree",0,.4,.2]]};Object.keys(p).map(function(e){0===e.indexOf("road")&&(p[e+"-base"]=p.ground.concat(p[e]))});var m={roady:{c:[0,1,0,1],p:n},roadx:{c:[1,0,1,0],p:n},roadxy:{c:[1,1,1,1],p:n,firstrun:"Cars will travel through intersections without making turns. You can double back over road you've already placed.",title:"Intersection"},roadx2yl:{c:[1,0,0,1],p:n},roadx2yr:{c:[1,1,0,0],p:n},roady2xl:{c:[0,0,1,1],p:n},roady2xr:{c:[0,1,1,0],p:n},forest:{p:function(e){return"water"!==e||void 0},points:50},building:{p:n,points:100},dump:1,helipad:1,water:1,sand:1,palm:1,broadx:1,broady:1,forest2:1},v=Object.keys(m);v.map(function(e){0===e.indexOf("road")&&(m[e+"-base"]=m[e],m["b"+e]=m[e])}),m.helipad={points:500},t.exports={sprites:p,placeable:v,tileLogic:m,animated:{forest:1,forest2:1,sand:1,helipad:1,tree:1,elk:1,palm:1,dump:1}}},{}],11:[function(e,t){t.exports=function(e){var t=e.touches||[e];return{clientX:t[0].clientX,clientY:t[0].clientY,is:e.touches}}},{}]},{},[4])</script>