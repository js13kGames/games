<!doctype html><head><title>PUZZLEggs</title><meta content="width=device-width" name=viewport><body style=overflow:hidden;background-color:#000;cursor:none;color:#fff><script>"use strict";class aa{constructor(t,i,s){this.a=t,this.i=i,this.l=s}bind(t){t.bindTexture(t.TEXTURE_2D,this.a)}}function m(t){for(let i=0;3>i;++i)for(let s=0;3>s;++s)t.o[3*i+s]=i==s?1:0}function ba(t,i,s){m(t),t.o[0]=2/(i-0),t.o[2]=-(i+0)/(i-0),t.o[4]=2/(0-s),t.o[5]=-(0+s)/(0-s),t.o[8]=1}function ca(t){let i=new r;for(let s=0;3>s;++s)for(let e=0;3>e;++e)i.o[3*e+s]=t.o[3*s+e];return i}class r{constructor(){this.o=new Float32Array(9),m(this)}multiply(t){let i=new r;for(var s=0;3>s;++s)for(var e=0;3>e;++e)i.o[3*s+e]=0;for(s=0;3>s;++s)for(e=0;3>e;++e)for(let h=0;3>h;++h)i.o[3*s+e]+=this.o[3*s+h]*t.o[3*h+e];return i}translate(t,i){m(this),this.o[2]=t,this.o[5]=i}scale(t,i){m(this),this.o[0]=t,this.o[4]=i}rotate(t){let i=Math.cos(t);t=Math.sin(t),m(this),this.o[0]=i,this.o[1]=-t,this.o[3]=t,this.o[4]=i}clone(){let t=new r;for(let i=0;9>i;++i)t.o[i]=this.o[i];return t}}function u(t,i,s,e,h){let a=t.m;a.uniform2f(t.s,i,s),a.uniform2f(t.w,e,h)}function da(t){var i=t.m;i.useProgram(t.a),i.uniform1i(t.C,0),u(t,0,0,1,1),(i=t.m).uniform2f(t.b,0,0),i.uniform2f(t.c,1,1),i=new r,t.m.uniformMatrix3fv(t.h,!1,ca(i).o)}class ea{constructor(t,i,s){this.m=t,this.a=null;{let t=this.m;if(i=this.createShader(i,t.VERTEX_SHADER),s=this.createShader(s,t.FRAGMENT_SHADER),this.a=t.createProgram(),t.attachShader(this.a,i),t.attachShader(this.a,s),(s=this.m).bindAttribLocation(this.a,0,"v"),s.bindAttribLocation(this.a,1,"uvp"),t.linkProgram(this.a),!t.getProgramParameter(this.a,t.LINK_STATUS))throw"Shader error: "+t.getProgramInfoLog(this.a)}this.h=t.getUniformLocation(this.a,"transform"),this.j=t.getUniformLocation(this.a,"color"),this.C=t.getUniformLocation(this.a,"t0"),this.s=t.getUniformLocation(this.a,"pos"),this.w=t.getUniformLocation(this.a,"size"),this.b=t.getUniformLocation(this.a,"texPos"),this.c=t.getUniformLocation(this.a,"texSize")}createShader(t,i){let s=this.m;if(i=s.createShader(i),s.shaderSource(i,t),s.compileShader(i),!s.getShaderParameter(i,s.COMPILE_STATUS))throw"Shader error:\n"+s.getShaderInfoLog(i);return i}g(t,i,s,e){this.m.uniform4f(this.j,t,i,s,e)}}class w{constructor(t,i){this.x=null==t?0:t,this.y=null==i?0:i}clone(){return new w(this.x,this.y)}}function x(t,i,s,e){1<=i/s?(i=i/s*e,ba(t.C,i,e),t.viewport.x=i,t.viewport.y=e):(i=s/i*e,ba(t.C,e,i),t.viewport.x=e,t.viewport.y=i),t.h=!1}function y(t){m(t.c),t.h=!1}function z(t){if(null!=t.b){t.h||(t.L=t.C.multiply(t.c),t.h=!0);var i=t.b;i.m.uniformMatrix3fv(i.h,!1,ca(t.L).o)}}class fa{constructor(){this.C=new r,this.c=new r,this.L=new r,this.j=new r,this.viewport=new w,this.h=!1,this.b=null,this.w=[]}translate(t,i){this.j.translate(t,i),this.c=this.c.multiply(this.j),this.h=!1}scale(t,i){this.j.scale(t,i),this.c=this.c.multiply(this.j),this.h=!1}rotate(t){this.j.rotate(t),this.c=this.c.multiply(this.j),this.h=!1}push(){if(this.w.push(this.c.clone()),64<=this.w.length)throw"Stack overflow!"}pop(){this.c=this.w.pop().clone(),this.h=!1,z(this)}}class A{constructor(t,i,s,e){this.h=e.length,this.c=t.createBuffer(),this.b=t.createBuffer(),this.a=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.c),t.bufferData(t.ARRAY_BUFFER,new Float32Array(i),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.a),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(e),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.b),t.bufferData(t.ARRAY_BUFFER,new Float32Array(s),t.STATIC_DRAW)}bind(t){t.bindBuffer(t.ARRAY_BUFFER,this.c),t.vertexAttribPointer(0,2,t.FLOAT,t.ca,0,0),t.bindBuffer(t.ARRAY_BUFFER,this.b),t.vertexAttribPointer(1,2,t.FLOAT,t.ca,0,0),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.a)}u(t){t.drawElements(t.TRIANGLES,this.h,t.UNSIGNED_SHORT,0)}}function C(t,i,s,e,h,a){s=null!=s?Math.min(s,i):i;let n,r=2*Math.PI/i;i=[];let l=[],o=0,u=!1,c=1;for(let t=0;t<s;++t)e&&++o>=e&&(c=(u=!u)?1+h:1,o-=e),n=r*t,a?(i.push(a*Math.cos(n),a*Math.sin(n),Math.cos(n)*c,Math.sin(n)*c,Math.cos(n+r)*c,Math.sin(n+r)*c),i.push(a*Math.cos(n),a*Math.sin(n),a*Math.cos(n+r),a*Math.sin(n+r),Math.cos(n+r)*c,Math.sin(n+r)*c)):i.push(0,0,Math.cos(n)*c,Math.sin(n)*c,Math.cos(n+r)*c,Math.sin(n+r)*c);for(s*=3,a&&(s*=2),a=0;a<s;++a)l.push(a);return new A(t.m,i,i,l)}function ha(t,i){var s;null==s&&(s=2*Math.PI);let e=s/24;s=[];let h,a,n=[];for(let t=0;24>t;++t)h=i(e*t),a=i(e*(t+1)),s.push(h[0],h[1],a[0],a[1],0,0);for(i=0;72>i;++i)n.push(i);return new A(t.m,s,s,n)}function ia(t){var i=10,s=2*Math.PI/i;let e,h,a=[],n=[];for(let t=0;t<i;++t)e=0==t%2?1:2,h=0==t%2?2:1,a.push(Math.cos(s*t)*e,Math.sin(s*t)*e,Math.cos(s*(t+1))*h,Math.sin(s*(t+1))*h,0,0);for(i*=3,s=0;s<i;++s)n.push(s);return new A(t.m,a,a,n)}class ja{constructor(t){this.m=t}}function ka(t,i){return 0>t?i- -t%i:t%i}function la(t){let i=new ja(t.m);t.s=[new A(i.m,[0,0,1,0,1,1,0,1],[0,0,1,0,1,1,0,1],[0,1,2,2,3,0]),new A(i.m,[0,0,1,1,0,1],[0,0,1,1,0,1],[0,1,2]),new A(i.m,[0,-1,.71,.71,-.71,.71],[0,0,1,1,0,1],[0,1,2]),C(i,32),C(i,32,null,2,.25,.33),ha(i,(t=>[Math.cos(1.25*(t-Math.PI)/4)*Math.sin(t-Math.PI),Math.cos(t-Math.PI)])),ia(i),C(i,32,16),C(i,6)]}function ma(t){var i=window.innerWidth,s=window.innerHeight;t.a.width=i,t.a.height=s,t.m.viewport(0,0,i,s),t.i=t.a.width,t.l=t.a.height,t.top=-1,t.left=-t.i/t.l}function na(t,i,s,e,h,a,n){let r=t.m;null!=e&&u(t.b,e,h,a,n),t.N!=i&&(i.bind(r),t.N=i),null!=s&&s.bind(r),i.u(r)}function D(t,i,s,e,h,a){0>h&&(s-=h),0>a&&(e-=a),na(t,t.s[Math.max(0,Math.min(0|i,t.s.length-1))],null,s,e,h,a)}function F(t,i,s,e,h,a,n,r,l,o){u(t.b,n,r,l,o),n=t.b,h/=i.i,a/=i.l,(r=n.m).uniform2f(n.b,s/i.i,e/i.l),r.uniform2f(n.c,h,a),na(t,t.s[0],i)}function G(t,i,s,e,h,a,n,r,l,o,u,c,f,p){let g,d,v=t.M.i/16,b=a/64,w=n/64;r&&(s-=i.length*(v+h)*b/2),r=0;var m=c?1:0;null==c&&(c=0);for(let y=m;0<=y;--y){m=s,g=e,0==y&&p?t.g(...p):1==y&&t.g(0,0,0,f);for(let e=0;e<i.length;++e)d=i.charCodeAt(e),10==d?(m=s,g+=(v+0)*w):(null!=l&&(r=Math.sin(u+e*l)*o),F(t,t.M,d%16*v,(d/16|0)*v,v,v,m+c*y,g+c*y+r,a,n),m+=(v+h)*b)}}function H(t,i){let s=t.b==t.H;return t.b=i?t.H:t.S,da(t.b),t.g(1,1,1,1),z(t),s}function I(t,i){t.K=Math.max(0,Math.min(i,1))}class oa extends fa{constructor(){super();var t=document.createElement("div");if(t.setAttribute("style","position: absolute; top: 0; left: 0; z-index: -1"),this.a=document.createElement("canvas"),this.a.width=window.innerWidth,this.a.height=window.innerHeight,this.a.setAttribute("style","position: absolute; top: 0; left: 0; z-index: -1"),this.a.hidden=!0,t.appendChild(this.a),document.body.appendChild(t),this.m=null,null===(t=this.m=this.a.getContext("webgl",{alpha:!1})))throw"Failed to initialize WebGL.";t.activeTexture(t.TEXTURE0),t.disable(t.DEPTH_TEST),t.enable(t.BLEND),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA),t.enableVertexAttribArray(0),t.enableVertexAttribArray(1),this.s=null,la(this),this.S=new ea(this.m,"\nattribute vec2 v;\nattribute vec2 uvp;\n   \nuniform mat3 transform;\n\nuniform vec2 pos;\nuniform vec2 size;\n\nvarying vec2 uv;\n   \nvoid main() {\n\n    vec3 op = transform * vec3(v * size + pos, 1);\n    gl_Position = vec4(op, 1);\n    uv = uvp;\n}","\nprecision mediump float;\n \nuniform sampler2D t0;\nuniform vec4 color;\n\nuniform vec2 texPos;\nuniform vec2 texSize;\n\nvarying vec2 uv;\n\nvoid main() {\n\n    gl_FragColor = color;\n}\n"),this.b=this.H=new ea(this.m,"\nattribute vec2 v;\nattribute vec2 uvp;\n   \nuniform mat3 transform;\n\nuniform vec2 pos;\nuniform vec2 size;\n\nvarying vec2 uv;\n   \nvoid main() {\n\n    vec3 op = transform * vec3(v * size + pos, 1);\n    gl_Position = vec4(op, 1);\n    uv = uvp;\n}","\nprecision mediump float;\n \nuniform sampler2D t0;\nuniform vec4 color;\n\nuniform vec2 texPos;\nuniform vec2 texSize;\n\nvarying vec2 uv;\n\nvoid main() {\n      \n    const float DELTA = 0.001;\n    vec2 tex = uv;    \n    tex.x *= texSize.x;\n    tex.y *= texSize.y;\n    tex += texPos;\n    vec4 res = color * texture2D(t0, tex);\n    if(res.a <= DELTA) {\n        discard;\n    }\n    gl_FragColor = res;\n}\n"),da(this.b);{(t=document.createElement("canvas")).width=1024,t.height=1024;var i=t.getContext("2d");let h,a;i.font="bold 56px sans-serif",i.textAlign="center";for(let t=33;123>t;++t){var s=t%16;h=t/16|0,i.fillStyle="#000000",a=String.fromCharCode(t),35==t?a=String.fromCharCode(228):36==t&&(a=String.fromCharCode(169));for(var e=-3;3>=e;++e)for(let t=-3;3>=t;++t)if(!(3>Math.abs(e)&&3>Math.abs(t)))for(let n=-1;1>=n;++n)i.fillText(a,64*s+32+n+e,64*h+48+t);for(i.fillStyle="#FFFFFF",e=-1;1>=e;++e)i.fillText(a,64*s+32+e,64*h+48)}s=(i=this.m).createTexture(),i.bindTexture(i.TEXTURE_2D,s),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,t),t.remove(),this.M=new aa(s,1024,1024)}this.N=null,ma(this),this.K=1}clear(t,i,s){let e=this.m;e.clearColor(t,i,s,1),e.clear(e.COLOR_BUFFER_BIT)}g(t,i,s,e){null==t&&(t=1),null==i&&(i=1),null==s&&(s=1),null==e&&(e=1),this.b.g(t,i,s,e*this.K)}}class pa{constructor(t){this.keys={},window.addEventListener("keydown",(i=>{i.preventDefault();var s=i.keyCode;1!=this.keys[s]&&(this.keys[s]=2),70==i.keyCode&&(document.webkitIsFullScreen||document.mozFullScreen?document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.exitFullscreen&&document.exitFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen&&t.mozRequestFullScreen())})),window.addEventListener("keyup",(t=>{t.preventDefault(),t=t.keyCode,0!=this.keys[t]&&(this.keys[t]=3)})),window.addEventListener("mousemove",(()=>{window.focus()})),window.addEventListener("contextmenu",(t=>{t.preventDefault()}))}update(){for(let t in this.keys)2==this.keys[t]?this.keys[t]=1:3==this.keys[t]&&(this.keys[t]=0)}getKey(t){return 0|this.keys[t]}}function J(t,i,s,e,h,a,n,r){t.P=i,t.speed=s,t.b.r=e,t.b.ba=h,t.b.V=a,t.a=60,null!=n&&(t.W=n),t.h=r||0,t.c=t.h,t.active=!0}function M(t){let i=t.a/60;return t.P&&(i=1-i),i}function qa(t){if(.001>=t.h)return 0;let i=t.c/t.h;return t.P&&(i=1-i),i}class ra{constructor(){this.a=0,this.W=()=>{},this.b={r:0,ba:0,V:0},this.active=!1,this.speed=1,this.P=!1,this.c=0,this.h=1}update(t){this.active&&!(0<(this.c-=1*t.step))&&0>=(this.a-=this.speed*t.step)&&(0==(this.P=!this.P)?(this.W(t),this.a+=60):(this.active=!1,this.a=0))}u(t){if(this.active&&!(0<this.c)){y(t),z(t);var i=H(t,!1);t.g(this.b.r,this.b.ba,this.b.V,M(this)),D(t,0,0,0,t.viewport.x,t.viewport.y),i&&H(t,!0)}}}function sa(t,i){t.j+=i-t.s;let s=0|Math.floor(t.j/t.target),e=0<s;for(5<s&&(t.j=5*t.target,s=5);0<s--;)null!=t.a&&null!=t.a.update&&t.a.update(t.b),t.b.input.update(),t.b.D.update(t.b),t.j-=t.target;e&&(null!=t.a&&null!=t.a.u&&t.a.u(t.c),t.b.D.u(t.c)),t.s=i,window.requestAnimationFrame((i=>sa(t,i)))}class ta{constructor(){this.h=[],this.a=null,this.s=this.j=0,this.frameRate=30,this.target=0,this.w=document.createTextNode("Initializing..."),document.body.style.color="rgb(255, 255, 170)",document.body.appendChild(this.w),this.c=new oa(128,96),this.b={R:(t,i)=>{this.R(t,i)},input:new pa(this.c.a),D:new ra},window.addEventListener("resize",(()=>ma(this.c)))}R(t,i){null!=this.h[t]&&(this.a=this.h[t]),null!=this.a.$&&this.a.$(i)}}const ua=[{i:7,l:7,data:[0,0,3,0,3,3,0,1,1,0,1,0,0,0,0,0,3,0,1,0,2,1,0,0,3]},{i:7,l:7,data:[3,7,0,0,3,0,1,3,1,4,5,0,0,0,0,3,1,1,4,3,0,7,2,0,0]},{i:7,l:7,data:[3,9,0,7,11,6,8,5,3,0,9,1,8,1,6,3,0,10,1,0,2,0,0,8,3]},{i:7,l:7,data:[3,11,13,0,0,0,4,9,1,10,8,1,0,0,3,3,1,2,0,0,0,8,15,0,3]},{i:7,l:7,data:[0,3,8,11,3,8,9,0,0,9,3,2,5,0,0,4,0,6,14,12,10,15,0,1,3]},{i:7,l:7,data:[3,11,15,0,3,9,0,10,1,0,14,8,6,14,4,0,8,7,9,0,3,5,8,3,2]},{i:7,l:7,data:[3,8,3,17,6,11,8,0,15,0,3,9,0,4,3,9,2,1,8,8,15,0,16,0,10]},{i:7,l:7,data:[17,10,5,8,3,0,15,0,1,9,8,8,4,7,12,3,8,9,13,0,11,16,0,8,2]},{i:7,l:7,data:[3,16,8,10,3,8,9,7,1,16,6,17,0,11,9,0,13,0,8,17,10,4,2,7,3]},{i:7,l:7,data:[17,10,8,5,3,6,8,8,0,7,3,19,0,7,4,0,18,12,16,0,2,0,0,7,3]},{i:7,l:7,data:[17,7,18,7,3,3,11,8,4,0,4,19,2,5,14,10,6,5,8,9,3,16,8,18,3]},{i:8,l:8,data:[11,7,19,0,5,3,3,4,5,17,7,18,16,0,13,9,8,9,8,9,15,1,8,3,8,8,10,0,6,0,3,5,0,12,0,2]},{i:8,l:8,data:[3,20,0,20,19,20,20,8,3,6,8,18,3,5,9,3,7,20,9,11,20,9,3,0,4,8,10,6,8,20,2,5,9,3,20,3]}];function N(t,i,s,e,h,a){for(s=(s+.5)*t.i,t=(e+.5)*t.l+8,h||(i.g(0,0,0,.25),i.push(),i.translate(s+2,t),i.rotate(Math.PI/12),z(i),D(i,3,0,0,26,18),i.pop()),i.g(0,0,0),e=1;0<=e;--e)0==e&&(h?i.g(...a[0]):i.g(...a[1])),D(i,3,s,t,20+3*e,10+3*e),h||(D(i,0,s-20-3*e,t-16-3*e,2*(20+3*e),16+6*e),0==e&&i.g(...a[2]),D(i,3,s,t-16,20+3*e,10+3*e))}function va(t,i,s,e,h,a){for(t.push(),t.translate(i,s),t.rotate(-Math.PI/6),t.scale(e,h),z(t),i=1;i>=(a?1:0);--i){for(a?t.g(...a):1==i?t.g(0,0,0):t.g(1,.9,.2),D(t,3,0,-12,14+3*i,10+3*i),D(t,0,-5-3*i,-8-3*i,10+6*i,32+6*i),s=0;2>s;++s)D(t,0,5+3*i,6-3*i+12*s,10,6+6*i);0==i&&(t.g(0,0,0),D(t,3,0,-12,7,5))}t.pop()}function wa(t,i,s,e,h,a){null==h&&(h=1),null==a&&(a=1),e=4+2*Math.sin(e),va(t,i,s,h,a,[0,0,0,.25]),va(t,i-e,s-e,h,a)}class xa{constructor(t,i){this.i=t,this.l=i}}const ya=[[.9,.95,1],[.6,.8,1],[.05,.25,.6],[.15,.45,.8],[.33,.67,1]],za=[[1,.9,.95],[1,.6,.8],[.6,.05,.25],[.8,.15,.45],[1,.33,.67]],Aa=[[.95,.95,.95],[.8,.8,.8],[.3,.3,.3],[.46,.46,.46],[.67,.67,.67]],Ba=[[.8,.15,.45],[.6,.05,.25],[1,.33,.67]],Ca=[[.33,1,.33],[0,.67,0],[.67,1,.67]];function O(t,i,s){return 0>i||0>s||i>=t.i||s>=t.l?1:t.data[s*t.i+i]}function Q(t,i,s,e,h,a){let n=t.J[s*t.i+i];return t=O(t,i,s),!!(null!=e&&4<=t&&7>=t&&e==t-4||h&&0>n)||!(null!=a&&0<a&&16==t)&&0<n}function T(t,i,s,e){let h=!1;return 2==e&&16==O(t,i,s)&&(t.data[s*t.i+i]=0,h=!0),t.J[s*t.i+i]=e,h}function Da(t,i,s,e,h,a){let n=[O(t,s-1,e)!=h,O(t,s,e-1)!=h,O(t,s+1,e)!=h,O(t,s,e+1)!=h];i.g(...a[4]),D(i,0,64*s,64*e,64,64),n[2]&&(i.g(...a[2]),D(i,0,64*s+51.2,64*e,12.8,64)),n[3]&&(i.g(...a[3]),D(i,0,64*s,64*e+51.2,64,12.8),n[2]&&(i.g(...a[2]),D(i,1,64*s+51.2,64*e+51.2,-12.8,-12.8))),n[0]&&(i.g(...a[0]),D(i,0,64*s,64*e,12.8,64),n[3]&&(i.g(...a[3]),D(i,1,64*s,64*e+51.2,-12.8,12.8))),n[1]&&(i.g(...a[1]),D(i,0,64*s,64*e,64,12.8),n[0]&&(i.g(...a[0]),D(i,1,64*s,64*e,12.8,12.8)),n[2]&&(i.g(...a[2]),D(i,1,64*s+51.2,64*e,-12.8,12.8)));const r=[0,1,1,0],l=[0,0,1,1],o=[-1,-1,1,1],u=[-1,1,1,-1];let c,f;for(let p=0;4>p;++p)c=r[p],f=l[p],n[p]||n[(p+1)%4]||O(t,s-1+2*c,e-1+2*f)==h||(i.g(...a[p]),D(i,1,64*s+51.2*c,64*e+51.2*f,12.8*o[p],12.8*u[p]),i.g(...a[(p+1)%4]),D(i,1,64*s+51.2*c,64*e+51.2*f,-12.8*o[p],-12.8*u[p]))}function Ea(t,i,s,e,h){let a;s=64*(s+.5),e=64*(e+.5),i.g(.75,0,1),D(i,0,s-32*h,e-32*h,64*h,64*h);for(let n=0;4>n;++n)a=1-(.25*n+.25*t.j)%1,i.g(.75*a,0,a),D(i,0,s-64*a/2*h,e-64*a/2*h,64*a*h,64*a*h)}class Fa{constructor(t,i){var s=ua[t-1];for(this.id=t,this.data=Array(s.i*s.l),this.data.fill(1),t=0;t<s.l-2;++t)for(var e=0;e<s.i-2;++e)this.data[(t+1)*s.i+(e+1)]=s.data[t*(s.i-2)+e];for(this.i=s.i,this.l=s.l,this.J=Array(s.i*s.l),this.J.fill(0),this.j=0,this.a=30,this.c=new w,this.h=this.U=0,this.b=new xa(64,64),s=0;s<this.l;++s)for(t=0;t<this.i;++t)switch(e=O(this,t,s),e){case 1:case 8:case 16:T(this,t,s,1);break;case 2:null==i.G&&(i.G=new Ga(t,s)),this.c.x=64*(t+.5),this.c.y=64*(s+.5);break;case 3:T(this,t,s,-1),(e=i).h.push(new Ha(t,s)),++e.X;break;case 12:case 13:case 14:case 15:case 20:T(this,t,s,2),i.Y.push(new Ia(t,s,Math.min(e-12,4)))}}update(t,i){t&&(0<this.a&&(this.a-=1*i.step,this.a=Math.max(0,this.a)),this.j=(this.j+.025*i.step)%1),this.U=(this.U+i.step)%60,this.h=(this.h+.05*i.step)%(2*Math.PI)}}function Ja(t,i){return!t.F||!!t.O&&(0>=(t.T-=1*i.step)&&(t.O=!1,t.F=!1),!0)}function Ka(t,i){t.B&&(null==t.v&&(t.I-=i.step),0>=t.I&&(t.I=0,t.B=!1,t.f=t.target.clone()),i=t.I/30,t.A.x=64*(t.f.x*i+(1-i)*t.target.x),t.A.y=64*(t.f.y*i+(1-i)*t.target.y))}class La{constructor(t,i){this.f=new w(0|t,0|i),this.A=new w(64*t,64*i),this.I=this.depth=0,this.target=this.f.clone(),this.B=!1,this.F=!0,this.v=null,this.T=0,this.O=!1}finish(t,i){return!!U(i)&&(!(!this.O&&this.F)||!(null!=this.v&&this.v.F||2!=O(t,this.f.x,this.f.y))&&(T(t,this.f.x,this.f.y,0),this.T=30,this.O=!0,V(i,this.A.x+32,this.A.y+32,6,10,this.depth,[1,1,1]),!0))}}class Ha extends La{constructor(t,i){super(t,i),this.a=0,this.depth=this.A.y+32+16}update(t,i){Ja(this,i)||(null!=this.v&&(this.v.O?this.B||(this.f=this.target.clone(),this.target=this.v.target.clone(),this.B=!0,T(t,this.f.x,this.f.y,0)):!this.v.B||this.B||this.f.x==this.v.f.x&&this.f.y==this.v.f.y||2==t.J[this.v.f.y*t.i+this.v.f.x]||(this.target=this.v.f.clone(),this.B=!0,T(t,this.f.x,this.f.y,0),this.v.O||T(t,this.target.x,this.target.y,2)),this.B?(this.I=this.v.O?this.v.T:this.v.I,this.a=(1-this.I/30)*(this.f.x%2==this.f.y%2==0?1:-1)):T(t,this.f.x,this.f.y,2)),Ka(this,i),this.depth=this.A.y+32+16)}u(t,i,s,e,h,a,n){const r=[6,3,0],l=[0,0,-2,-6],o=[0,0,-2,-6];var u=[[0,0,0],[.5,.45,.4],[.85,.8,.75],[1,1,1]];const c=[[0,0,0],[.8,.25,.15],[1,.5,.4],[1,.8,.8]];if(this.F&&!(h&&.01>h)){var f=this.A.x+(a?0:32);for(e=this.A.y+(a?0:32)+(e?0:-8),u=this.v?u:c,null==s&&(s=0),null==h&&(h=1),this.O&&I(t,this.T/30),i||(t.g(0,0,0,.25),D(t,3,f,e+24,24,8)),t.push(),t.translate(f,e),t.rotate(s+Math.sin(this.a*Math.PI)*Math.PI/6),t.scale(h,h),z(t),i=n?1:0;3>i;++i)t.g(...u[i]),D(t,5,l[i],o[i],22+r[i],22+r[i]);t.g(...u[3]),D(t,3,l[3],o[3],10,10),t.pop(),I(t,1)}}}class Ma{constructor(){this.a=this.h=this.b=this.c=0,this.j=300}update(t){this.h=(this.h+.025)%(2*Math.PI),1!=this.a&&(145>this.c?0>=(this.b-=t.step)&&(this.b+=5,++this.c):!t.D.active&&(0>=(this.j-=t.step)||2==t.input.getKey(13))&&J(t.D,!0,1,0,0,0,(()=>{++this.a})))}u(t){const i=[48,96][this.a],s=[-24,-20][this.a],e=2*Math.PI/[8,4][this.a];0==this.a?t.clear(1,1,1):t.clear(0,0,0),y(t),x(t,t.i,t.l,720),z(t);let h=t.viewport.x/2,a=t.viewport.y/2-i/2;0==this.a&&(h-=27*(i+s)/2,a-=8*i/2);let n=0==this.a?"Congratulations!\n      \nYou managed to save\nall your precious\neggs - the children\nunborn! Now you can\ngo back home...\n      \n...and eat 'em all!\n".substr(0,this.c):"The End";t.g(1,1,.5),G(t,n,h,a,s,i,i,1==this.a,e,3,this.h)}}function Na(t,i){let s=0|t.f.x,e=0|t.f.y;return Q(i,s-1,e,1,null,t.b)&&Q(i,s+1,e,3,null,t.b)&&Q(i,s,e-1,2,null,t.b)&&Q(i,s,e+1,0,null,t.b)}function Oa(t,i,s,e,h){let a=0|t.f.x,n=0|t.f.y;if(!t.B){t.j=!1;t:{var r=null,l=O(i,t.f.x,t.f.y);if(4<=l&&7>=l){if((r=new w(t.f.x,t.f.y)).x+=[0,1,0,-1][l-4],r.y+=[-1,0,1,0][l-4],Q(i,r.x,r.y)){l=null;break t}}else{if(10==l||18==l){for(18==l&&(i.U=(i.U+60)%60),r=0;r<i.i*i.l;++r)i.data[r]==l||i.data[r]==l+1?i.data[r]=i.data[r]==l?l+1:l:10!=l||2==i.J[r]||8!=i.data[r]&&9!=i.data[r]?18==l&&4<=i.data[r]&&7>=i.data[r]&&(i.data[r]=4+(i.data[r]-4+2)%4):(i.data[r]=8==i.data[r]?9:8,i.J[r]=!i.J[r]);l=null;break t}null!=e&&17==l&&(i.data[t.f.y*i.i+t.f.x]=0,++t.b,V(e,t.A.x+32,t.A.y+32,4,12,1,[1,1,.5]))}l=r}r=null,null!=l||h?null!=l&&(a=l.x,n=l.y,t.j=!0):1==s.input.getKey(37)?(--a,r=1):1==s.input.getKey(39)?(++a,r=3):1==s.input.getKey(38)?(--n,r=2):1==s.input.getKey(40)&&(++n,r=0),Q(i,a,n,r,null,t.b)||a==(0|t.f.x)&&n==(0|t.f.y)||(t.B=!0,t.I=30,t.target.x=a,t.target.y=n,T(i,t.f.x,t.f.y,0),T(i,a,n,2)&&(--t.b,V(e,64*(a+.5),64*(n+.5),5,10,1,[1,1,1])))}}class Ga extends La{constructor(t,i){super(t,i),this.b=this.c=this.X=this.a=this.h=0,this.j=!1}update(t,i,s){Ja(this,s)||(Oa(this,t,s,i),Ka(this,s),t=2*Math.PI/30,this.B&&!this.j?(this.a+=t*s.step,this.c+=t*s.step,this.a%=2*Math.PI,this.c%=2*Math.PI,this.h=0):(this.c=this.a=0,this.h+=.05*s.step,this.a%=2*Math.PI),this.depth=this.A.y+32+18)}u(t,i){const s=Math.PI/16,e=[.67,.4,.1],h=[[1,.7,0],[.8,.4,0]];if(this.F){var a=i?0:this.A.x+32,n=i?0:this.A.y+32;this.O&&I(t,this.T/30),i||(t.g(0,0,0,.25),D(t,3,a,n+-2+10+12,24,7));var r=n+-12+10,l=4*Math.sin(this.c);for(let s=-1;1>=s;s+=2)i||(t.g(0,0,0),D(t,2,a+10*s-1+1,r+l*s,20,-12)),t.g(...e),D(t,2,a+10*s,r+l*s,16,-10);for(t.push(),t.translate(a,n+-12+2*Math.sin(this.h)),t.rotate(Math.sin(this.a)*s),z(t),i||(t.g(0,0,0),D(t,0,-27,-23,54,46)),t.g(.9,.9,.9),D(t,0,-24,-20,48,40),i=-1;1>=i;i+=2)t.g(0,0,0),D(t,3,12*i,-6,10,10),t.g(),D(t,3,12*i+2,-8,3,3);for(i=0;2>i;++i)t.g(...h[i]),D(t,1,-16*(1-i),0,32*i-16,16);t.pop(),I(t,1)}}}class Pa{constructor(){this.f=new w,this.speed=new w,this.a=this.angle=0,this.c=1,this.b=[1,1,1],this.scale=32,this.depth=0,this.F=!1}update(t){this.F&&(this.speed.y+=.2*t.step,this.speed.y=Math.min(4,this.speed.y),this.angle+=this.speed.x/8*.25*t.step,0>=(this.a-=this.c*t.step)&&(this.F=!1),this.f.x+=this.speed.x*t.step,this.f.y+=this.speed.y*t.step)}u(t){this.F&&(t.push(),t.translate(this.f.x,this.f.y),t.rotate(this.angle),z(t),t.g(...this.b,this.a/60),D(t,6,0,0,this.scale,this.scale),t.pop())}}function Qa(t,i,s,e,h){var a=Math.PI/16;const n=[-2,-2,2,2][t.a],r=[2,-2,-2,2][t.a];var l=t.B?t.I/30:0;for(a+=Math.abs(l-.5)/.5*(Math.PI/4-a),l=Math.sin(l*Math.PI)*Math.PI/6,t.f.x%2==t.f.y%2&&(l*=-1),i.push(),i.translate(t.A.x+32+s,t.A.y+32+e),i.rotate(l+Math.PI/2*(t.a-1)),i.scale(-1,1),z(i),h&&i.g(...h),t=1;0<=t;--t)for(h||(0==t?i.g(.8,.67,1):i.g(0,0,0)),s=0;2>s;++s)i.push(),i.rotate(a*(1-2*s)),z(i),1==t&&D(i,0,-27,-3*(1-s),54,3),D(i,7,-24*s-3*t*s,-24*s-3*t*s,24-48*s+3*t*(1-2*s),24-48*s+3*t*(1-2*s)),i.pop();if(!h)for(h=0;2>h;++h)i.g(0,0,0),D(i,3,-12,10*(2*h-1),7,7),i.g(),D(i,3,-12+n,10*(2*h-1)+r,2.5,2.5);i.pop()}class Ia extends La{constructor(t,i,s){super(t,i),this.a=s,this.v=1}update(t,i,s){if(this.B&&Q(i,this.target.x,this.target.y)&&(this.B=!1,this.target=this.f.clone()),this.I=t.I,Ka(this,s),!this.B&&(T(i,this.f.x,this.f.y,2),t.B))t:{s=[0,1,0,-1];const e=[-1,0,1,0],h=[2,3,0,1];let a=this.f.x,n=this.f.y;if(4>this.a?(a+=s[this.a],n+=e[this.a]):(a-=t.target.x-t.f.x,n-=t.target.y-t.f.y),Q(i,a,n,null,!0)){if(4==this.a)break t;if(t=h[this.a],a=this.f.x+s[t],n=this.f.y+e[t],Q(i,a,n,null,!0))break t;this.a=t}this.target.x=a,this.target.y=n,this.B=!0,T(i,this.f.x,this.f.y,0)}}u(t){if(4>this.a)Qa(this,t,0,0,[0,0,0,.25]),Qa(this,t,-2,-2);else{var i=this.B?this.I/30:0;for(t.push(),t.translate(this.A.x+32,this.A.y+32),t.rotate(i*Math.PI/2*(this.f.x-this.target.x+(this.f.y-this.target.y))),z(t),i=-2;2>=i;++i)for(let s=-2;2>=s;++s)2>Math.abs(s)&&2>Math.abs(i)||(t.g(0,0,0),D(t,4,s,i,24,24));t.g(.75,.75,.75),D(t,4,0,0,24,24),t.pop()}}}function V(t,i,s,e,h,a,n){let r=Math.random()*Math.PI*2,l=2*Math.PI/e;for(let b=0;b<e;++b){{let e;var o=t,u=i,c=s,f=4*Math.cos(r),p=4*Math.sin(r)-4,g=h,d=n,v=a;for(let t=0;t<o.a.length;++t)if(!(e=o.a[t]).F){(o=e).f=new w(u,c),o.speed=new w(f,p),o.angle=Math.random()*Math.PI*2,o.a=60,o.c=1,o.b=null==d?[1,1,1]:d,o.scale=g,o.depth=v,o.F=!0;break}}r+=l}}function U(t){return t.G.X==t.X}function Ra(t){t.b=[],t.b.push(t.G);for(var i=0;i<t.h.length;++i)t.b.push(t.h[i]);for(i=0;i<t.a.length;++i)t.a[i].F&&t.b.push(t.a[i]);t.b.sort(((t,i)=>t.depth-i.depth))}class Sa{constructor(){this.G=null,this.h=[],this.Y=[],this.c=[],this.a=Array(16);for(let t=0;t<this.a.length;++t)this.a[t]=new Pa;this.b=[],this.X=0}update(t,i,s){null!=this.G&&this.G.update(t,this,s);for(let i=0;i<this.h.length;++i){var e=this.h[i],h=this.G,a=this.c,n=t;null==e.v&&e.F&&h.f.x==e.f.x&&h.f.y==e.f.y&&(0!=a.length&&(a[a.length-1].v=e),e.v=h,a.push(e),++h.X,V(this,e.A.x+32,e.A.y+32,5,10,e.depth,[1,.25,.2]),T(n,e.f.x,e.f.y,2))}for(e=this.c.length-1;0<=e;--e)this.c[e].update(t,s);for(e=0;e<this.Y.length;++e)this.Y[e].update(this.G,t,s);if((e=null==this.G||U(this)&&this.G.finish(t,this))||(e=!(e=!((e=this.G).B||!Na(e,t)||(Oa(e,t,null,null,!0),!Na(e,t))))),e){for(i=this.c.length-1;0<=i;--i)this.c[i].finish(t,this);for(t=0;t<this.a.length;++t)this.a[t].update(s)}else W(i,1)}u(t){Ra(this);for(var i=0;i<this.Y.length;++i)this.Y[i].u(t);for(i=0;i<this.b.length;++i)this.b[i].u(t)}}class X{constructor(t,i){this.text=t,this.W=i}}class Ta{constructor(){this.buttons=[],this.c=this.a=0}b(t){for(let t=0;t<arguments.length;++t)this.buttons.push(arguments[t]),arguments[t].text.length>this.c&&(this.c=arguments[t].text.length)}update(t){let i=0;2==t.input.getKey(38)?--i:2==t.input.getKey(40)&&++i,this.a=ka(this.a+i,this.buttons.length),2==t.input.getKey(13)&&(t=this.buttons[this.a].W,null!=(t=this.buttons[this.a].W)&&t())}u(t,i,s){var e=i/8;const h=e/2;var a=2*e;const n=[[1,1,1],[1,1,0]];let r=this.buttons.length;e=i+e;let l,o,u=t.viewport.y/2-r*e/2,c=t.viewport.x/2;if(s){var f=(this.c+2)*(i+-20)+2*a;o=r*e+2*a,a=c-f/2,l=t.viewport.y/2-o/2,H(t,!1),t.g(...s),D(t,0,a,l,f,o),H(t,!0)}for(a=0;a<r;++a)a==this.a?(s=1.1*i,f=n[1]):(s=i,f=n[0]),G(t,this.buttons[a].text,c,u+a*e,-20,s,s,!0,null,null,null,h,.25,f)}}function Ua(t,i){var s=Number(i.substr(0,2));let e=Number(i.substr(2,2));return i=Number(i.substr(4,1)),(s=50>=s?1+2*((50-s)/t.a|0):2*((s-50)/t.a|0))!=e/t.V|0||7*s%10!=i?-1:s}class Va{constructor(t,i){this.a=null==t?5:t,this.V=null==i?7:i}}const Y=[.33,.67,1];function W(t,i,s){2==i&&(++t.id,t.id>ua.length)?J(s.D,!0,.5,1,1,1,(()=>{s.R("ending")})):(J(t.a,!0,i?3-i:2,...Y,(()=>{Wa(t)}),30*i),t.c=i)}function Wa(t,i){null!=i&&0<i&&(t.id=i);{var s=t.Z;let e=50+((i=t.id)/2|0)*s.a*(1-i%2*2);s=i*s.V,i=(10>e?"0":"")+String(e)+(10>s?"0":"")+String(s)+String(7*i%10)}t.S=i,t.h=new Sa,t.w=new Fa(t.id,t.h)}function Z(t,i,s,e,h){t.push(),t.translate(i+16,s+8),t.rotate(h),z(t),t.g(0,0,0,.25),D(t,4,0,0,e,e),t.pop(),t.push(),t.translate(i,s),t.rotate(h),z(t),t.g(.5,.5,.5),D(t,4,0,0,e,e),t.g(.75,.75,.75),D(t,4,0,0,e-8,e-8),t.pop()}class Xa{constructor(t){this.id=1,this.Z=new Va,this.S="",this.w=this.h=null,Wa(this),this.N=this.s=0,this.a=new ra,J(this.a,!1,1,...Y),this.j=this.H=this.L=this.M=this.c=0,this.K=new Ta,this.C=!1,this.K.b(new X("Resume",(()=>{this.C=!1})),new X("Restart",(()=>{this.C=!1,W(this)})),new X("Quit",(()=>{J(t.D,!0,2,...Y,(()=>{t.R("title",1)}))}))),this.b=120}update(t){var i=Math.PI/2/30;if(0<=this.b&&(this.b-=t.step),!t.D.active)if(this.N+=.05*t.step,this.C)this.K.update(t);else{var s=this.h;s.G.B||s.G.O||!s.G.F||this.a.active?this.s=ka(this.s+i*(this.a.active?-1:1)*t.step,Math.PI/2):this.s=0,60<=this.b||(this.a.active?(0<this.c&&(this.M=(this.M+.025*t.step)%(2*Math.PI)),this.a.update(t)):(this.b=-1,2==t.input.getKey(13)?(this.C=!0,this.K.a=0):(0!=this.j&&0>=(this.H-=t.step)&&(this.H=this.j=0),this.w.update(U(this.h),t),this.h.update(this.w,this,t),0<(i=this.h).c.length&&!i.c[0].F?W(this,2,t):2==t.input.getKey(82)&&W(this))))}}u(t){var i=Math.PI/3;t.clear(...Y),H(t,!1);var s=1,e=1,h=null,a=null,n=null;this.a.active&&(2==this.c&&this.a.P&&(h=this.w.c.x,a=this.w.c.y,e=8,n=-i*M(this.a)),s=1+(s=M(this.a))*e*.25*(this.a.P?1:-1)),i=this.w,x(t,t.i,t.l,64*i.l),e=64*i.i/2;var r=64*i.l/2,l=0,o=0;for(1<=t.i/t.l?l=t.viewport.x/2-e:o=t.viewport.y/2-r,null!=h&&(e=h),null!=a&&(r=a),t.translate(l,o),t.translate(e,r),null!=n&&t.rotate(n*(0==i.id%2?-1:1)),t.scale(s,s),t.translate(-e,-r),z(t),i=this.w,s=U(this.h),h=0;h<i.l;++h)for(n=0;n<i.i;++n)switch(a=O(i,n,h),a){case 1:Da(i,t,n,h,1,ya);break;case 8:Da(i,t,n,h,8,za);break;case 16:e=64*(n+.5),r=64*(h+.5),Da(i,a=t,n,h,-1,Aa),a.g(0,0,0),D(a,3,e,r+-8,8,8),D(a,2,e,r+4,12,16);break;default:if(e=t,(r=n)%2==(l=h)%2?e.g(.9,.75,.5):e.g(.8,.55,.3),D(e,0,64*r,64*l,64,64),2==a)o=i.a/30,s&&0>=o?Ea(i,t,n,h,1):(!s||0<o)&&(r=n,l=h,(e=t).push(),e.translate(64*(r+.5),64*(l+.5)),e.rotate(Math.PI/4),z(e),e.g(.67,0,0),D(e,0,-25.6,-8,51.2,16),D(e,0,-8,-25.6,16,51.2),e.pop(),Ea(i,t,n,h,1-o));else if(4<=a&&7>=a){l=i,o=n;var u=h,c=a-4;for(r=[[.67,1,.67],[0,.67,0]],(e=t).push(),e.translate(64*(o+.5),64*(u+.5)),e.rotate(c*Math.PI/2),z(e),l=30>=l.U?0:1,o=0;2>o;++o)e.g(0,.33,0),D(e,2,0,26*o-14,36,14),e.g(...r[(o+l)%2]),D(e,2,0,26*o-14,24,10);e.pop()}else if(9==a)for(r=64*n,l=64*h,(e=t).g(.6,.05,.25),o=0;2>o;++o)for(u=0;2>=u;++u)D(e,0,r+24*u,l+56*o,16,8),D(e,0,r+56*o,l+24*u,8,16);else 11==a?N(i.b,t,n,h,!0,Ba):19==a&&N(i.b,t,n,h,!0,Ca);{var f;r=t,l=n,o=h,u=[1!=(e=i).J[o*e.i+(l-1)],1!=e.J[(o-1)*e.i+l],1!=e.J[o*e.i+(l+1)],1!=e.J[(o+1)*e.i+l]],r.g(0,0,0,.25),c=1==e.J[(o-1)*e.i+(l-1)];var p=f=0;u[0]?u[1]?c&&D(r,0,64*l,64*o,16,16):(u[0]&&!c&&(f=3),D(r,u[0]&&!c?1:0,64*l-f,3+64*o,-16,-13),D(r,0,64*(l+.25)-f,3+64*o,48+f,13)):(u[1]&&!c&&(p=1,f=3),D(r,0,3+64*l,64*(o+.25)-f,13,48+f),D(r,p,3+64*l,64*o-f,13,16),u[1]||D(r,0,64*(l+.25),64*o,48,16)),r.g(0,0,0),u[0]||D(r,0,64*l,64*o,3,64),u[1]||D(r,0,64*l,64*o,64,3),u[2]||D(r,0,64*(l+1)-3,64*o,3,64),u[3]||D(r,0,64*l,64*(o+1)-3,64,3),p=[0,1,1,0];const s=[0,0,1,1];for(let t=0;4>t;++t)f=p[t],c=s[t],u[t]&&u[(t+1)%4]&&1==e.J[(o-1+2*c)*e.i+(l-1+2*f)]&&D(r,0,64*l+61*f,64*o+61*c,3,3)}10==a?N(i.b,t,n,h,!1,Ba):18==a?N(i.b,t,n,h,!1,Ca):17==a&&wa(t,64*(n+.5),64*(h+.5),i.h+(n+h)*Math.PI*2/i.i)}if(this.h.u(t),y(t),x(t,t.i,t.l,720),z(t),this.a.u(t),this.a.active&&0<this.c){for(i=[88,72][this.c-1],s=[72,56][this.c-1],h=["STUCK","STAGE CLEAR"][this.c-1],n=[[1,.4,0],[1,1,.5]][this.c-1],a=t.viewport.y/2,e=t.viewport.x/2-(h.length-1)*s/2,H(t,!0),r=M(this.a),this.a.P&&(r=qa(this.a)),o=1/h.length,c=0;c<h.length;++c)l=(r-o*(this.a.P?c:h.length-1-c))/o,u=64*(l=Math.max(0,Math.min(l,1)))-64+-16*Math.sin(this.M+c*Math.PI*2/h.length),I(t,l),G(t,h.charAt(c),e+c*s,a-i/2+u,0,i,i,!0,null,null,null,8,.25,n);H(t,!1),I(t,1)}for(Z(t,0,0,128,this.s),Z(t,t.viewport.x,0,96,-this.s),Z(t,0,t.viewport.y,96,-this.s),Z(t,t.viewport.x,t.viewport.y,128,this.s),i=["STAGE "+String(Math.min(ua.length,this.id)),"Password: "+this.S],s=[64,48],h=[6,4],n=[Math.PI/3,Math.PI/6],a=[6,4],e=[1,1,.5],H(t,!0),o=0;2>o;++o)l=2==this.c&&this.a.active?Math.max(M(this.a),qa(this.a))*(h[o]+s[o]):0,r=0==o?36:t.viewport.y-4-32,r-=s[o]/2,r-=(1-2*o)*l,G(t,i[o],t.viewport.x/2,r,-16,s[o],s[o],!0,n[o],h[o],this.N,a[o],.25,e);if(s=t.viewport.y/3,(h=this.h.G.b)!=this.L&&0==this.j&&(this.j=h<this.L?-1:1,this.H=30),this.L=h,!(0>=h&&0==this.j)){for(-1==this.j&&++h,H(t,!1),i=1,0!=this.j&&(i=this.H/30,1==this.j&&(i=1-i)),n=0;n<h;++n)I(t,n==h-1?i:1),wa(t,64,s+128*n,0,2,2);I(t,1),H(t,!0)}this.C&&this.K.u(t,48,[.33,.67,1,.75]),0<this.b&&(s=1+3*(s=this.b/120),I(t,Math.max(0,Math.min(this.b/60,1))),G(t,"Save the unborn!",t.viewport.x/2,t.viewport.y/2-32*s/2,-24,32*s,32*s,!0,null,null,null,2*s,.25,[1,.75,.33]),I(t,1))}$(t){0==t?(this.b=120,t=1):this.b=0,Wa(this,t),this.C=!1,this.c=0,J(this.a,!1,1,...Y)}}class Ya{constructor(t){this.a=120,J(t.D,!1,1,0,0,0)}update(t){t.D.active||0>=(this.a-=t.step)&&J(t.D,!0,2,0,0,0,(()=>{t.R("title")}))}u(t){let i=t.viewport.x/2,s=t.viewport.y/2;t.clear(0,0,0),H(t,!0),y(t),t.translate(i,s),x(t,t.i,t.l,720),z(t),t.g(1,1,1),G(t,"Created by",0,-64,-20,32,32,!0),G(t,"Jani Nyk#nen",0,-32,-20,64,64,!0)}}function Za(t){let i=document.createElement("canvas");i.width=1024,i.height=256;var s=i.getContext("2d");s.font="bold 172px Arial",s.textAlign="center";for(let t=1;5>t;++t)s.fillStyle="rgb(170, 85, 0)",s.fillText("PUZZLEggs",512+2*t,128+2*t),s.fillRect(32+2*t,144+2*t,640,16);return s.fillStyle="rgb(255, 255, 85)",s.fillText("PUZZLEggs",512,128),s.fillRect(32,144,640,16),s=(t=t.m).createTexture(),t.bindTexture(t.TEXTURE_2D,s),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i),i.remove(),new aa(s,1024,256)}function $a(t,i){t.K=(t.K+.0125*i.step)%(2*Math.PI);let s,e,h,a=1;3==t.a&&(a=t.C/60);for(let n=0;n<t.c.length+1;++n)s=t.K+2*Math.PI/t.c.length*n,e=a/(t.c.length+3)*(n+3),e*=e,s*=1-n%2*2,h=n<t.c.length?t.c[n]:t.h,h.A=new w(360*Math.cos(s)*e,360*Math.sin(s)*e),h.scale=3.75*e,h.angle=(h.angle+.05*i.step*(n%2*2-1))%(2*Math.PI)}class ab{constructor(t,i){this.aa=new Ta,this.Z=new Ta,this.H=this.aa;let s=[new X("New Game",(()=>{this.a=3,this.C=60,this.j=0})),new X("Continue",(()=>{this.j=0,J(t.D,!0,2,...Y,(()=>{t.R("game")}))})),new X("Password",(()=>{this.b="",this.a=2}))];for(this.aa.b(s[0],s[2]),this.Z.b(s[0],s[1],s[2]),this.L=this.a=0,this.da=new Va,this.b="",this.N=this.s=this.C=this.j=0,this.scale=1,this.S=Za(i),this.c=Array(8),i=0;i<this.c.length;++i)this.c[i]=new Ha(0,0),this.c[i].scale=1,this.c[i].angle=0,this.c[i].v=1;this.K=0,this.h=new Ga(0,0),this.h.scale=1,this.M=this.w=this.h.angle=0}update(t){let i;if(this.scale=1,t.D.active){if($a(this,{step:0}),t.D.P&&3==this.a){var s=M(t.D);this.scale=1+9*s*s}}else{if(this.w+=t.step,this.s=this.s+=.0125*t.step,1<=this.s&&(--this.s,this.N=(this.N+1)%2),$a(this,t),0==this.a)2==t.input.getKey(13)&&++this.a,this.L+=.05*t.step;else if(1==this.a)this.H.update(t);else if(2==this.a){if(0<this.b.length&&2==t.input.getKey(8))this.b=this.b.substr(0,this.b.length-1);else if(5>this.b.length)for(s=48;57>=s;++s)2==t.input.getKey(s)&&(this.b+=String(s-48));2==t.input.getKey(13)&&(5==this.b.length?(i=Ua(this.da,this.b),-1==i?(this.a=1,this.j=120):J(t.D,!0,2,...Y,(()=>{t.R("game",i)}))):(this.a=1,this.j=120))}else 3==this.a&&0>=(this.C-=t.step)&&J(t.D,!0,.5,...Y,(()=>{t.D.speed=2,t.R("game",0)}));0<this.j&&(this.j-=t.step)}}u(t){t.clear(...Y);var i=t.viewport.x/2;let s=t.viewport.y/2;var e="";y(t),x(t,t.i,t.l,720),z(t),this.M=t.viewport.x,this.w%=this.M,H(t,!1);var h=t.viewport.x/2,a=t.viewport.y/2;for(t.push(),t.translate(h,a),z(t),a=0;8>a;++a)h=1-(.125*a+.125*this.s)%1,h*=h,t.push(),t.rotate(2*Math.PI*h*(0==this.N?1:-1)*(1-a%2*2)),t.scale(this.scale,this.scale),z(t),t.g(Y[0]*h,Y[1]*h,Y[2]*h),D(t,8,0,0,720*h,720*h),t.pop();for(var n of this.c)n.u(t,!0,n.angle,!0,n.scale,!0,!0);if(t.translate(this.h.A.x,this.h.A.y),t.rotate(this.h.angle),t.scale(this.h.scale,this.h.scale),z(t),this.h.u(t,!0),t.pop(),H(t,!0),t.translate(0,192),z(t),0==this.a)G(t,"Press Enter",i,s-32,-20,64,64,!0,2*Math.PI/6,8,this.L,8,.25,[1,1,.5]);else if(1==this.a)this.H.u(t,48),0<this.j&&(t.g(1,.5,0),G(t,"Incorrect password!",i,s-144,-20,32,32,!0));else if(2==this.a){for(n=0;5>n;++n)e+=n>=this.b.length?"_":this.b.charAt(n);G(t,"Enter password and press enter:",i,s-24,-24,32,32,!0,null,null,null,4,.25,[1,1,.5]),G(t,e,i,s-24+48,-20,48,48,!0,null,null,null,4,.25,[1,1,.5])}else 3==this.a&&I(t,this.C/60);for(y(t),z(t),G(t,"$2019 Jani Nyk#nen",i,t.viewport.y-32-8,-20,32,32,!0,null,null,null,4,.25,[1,1,1]),n=-4;4>=n;++n)for(h=-4;4>=h;++h)4>Math.abs(h)&&4>Math.abs(n)||(t.g(0,0,0),F(t,e=this.S,0,0,e.i,e.l,i-300+h,s+-224+n,600,360));for(t.g(1,1,1),F(t,e=this.S,0,0,e.i,e.l,i-300,s+-224,600,360),i=-1;1>=i;++i)G(t,"Press F to toggle fullscreen",-this.w+i*this.M,0,-24,32,32,!1,null,null,null,4,.25,[1,1,1]);I(t,1)}$(t){this.j=0,this.scale=1,null!=t&&(this.a=1,this.H=this.Z),this.H.a=null==t?0:1}}window.onload=()=>{let t=new ta;var i=new Xa(t.b);t.h.game=i,t.h.ending=new Ma(t.b),i=new ab(t.b,t.c),t.h.title=i,i=new Ya(t.b),t.h.intro=i,t.a=i,t.frameRate=60,t.b.step=60/t.frameRate,t.target=1e3/t.frameRate,t.w.remove(),t.c.a.hidden=!1,sa(t,0)}</script>