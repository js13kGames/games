<!doctypehtml><meta content="text/html;charset=utf-8"http-equiv=Content-Type><meta content="width=device-width,initial-scale=1,user-scalable=no"name=viewport><style>*{margin:0;padding:0;user-select:none;-moz-user-select:none;-webkit-user-select:none;font-family: 'Courier New', Courier, monospace;}body{overflow:hidden;background:hsl(205, 48%, 11%);transition:all 5s}#cnvs{pointer-events:none;image-rendering:pixelated;transition:filter 5s}#restart{opacity:0;position:absolute;bottom:0;padding:20px;color:white;width:100%;font-weight:bold;cursor:pointer;transition:5s;pointer-events:none}.gameover+#restart{opacity:1;pointer-events:all}</style><canvas id=cnvs></canvas><div id="restart" onclick="location.reload()">>> __HIGHEST: <span id="record"></span><br>>> CLICK TO RESTART &#9632;</div><script>const sprites=new Image;sprites.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANwAAABuCAMAAAB7ho3NAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAbdEVYdFNvZnR3YXJlAENlbHN5cyBTdHVkaW8gVG9vbMGn4XwAAAAJcEhZcwAACxIAAAsSAdLdfvwAAABmUExURUdwTP///////////////////////////////////////////////////////////15ocv///////////////15ockdSXXyDiy4zOV5ocgD/AP/XAAD/5nmNjlk1Jmx+kHRMO3uFj+Oq+O8AAAAWdFJOUwBaNVlGljYnG26DgqqXq0f+HG0mrP0844E0AAAI/UlEQVR42u2ciWLbNgxAuS1d263tsgsUeq7//5MTTxwED9mOkzilIguGKJlP4AmRcXjDwXXPeH/FZPgUlHgkwiE4v22+l45GBzFIqcgUBnH3X9vyDzJRJmccIYcvezgdzhs3hi1unktVpi1p8224tIeYYNQiC9MI379/X4YD76HD1tABbLhvMcFFqlrargeXCftlDgCX4VLqPZeqTNsV4L4twnVz69O03BcB920Px+Egljl4epbLcIHpZLhQFtvCqOtpUX3XMIp7PlzMietw/3bKIizHvT/w1I7cYXrfDHePDxPuz6Y9/w4Obzi4tp+VvutcXYqJpZ12QGZabwSjk6PKrOz51O8Ux7UNWvqu4UrSTC1rHkg+oAUj5CTyHyuNEab6GrhaHP0WO1juWBveiXsuXL9N5TVzgcOgZvaXbCHpPt3Y9YYBMBwcSLv60Fh5LQutp4zNWgW7G063ZXD1umATgxmhbZpcz1YwtKDKtMCikcy19n2K0i5z8VCL0ZbtWAW6Uj+0nM9PrS1VUrtws2zeGRxloHqMcD4VtUQBOutmZroaBrWl1iZbFYvRIzfSDkZGOVSGLXYymKh5fcmjVm7t1pZaK+HoZ3U2VmX7PDh2PTeYqBeL5VBYLuK7gxkRDJYB3EyJozInMixvIHVzAahz69EeygTugBGw46awnBILD93oHVyw+8UeLC/QZoIPaLvWNA1tRXXnJ4JKaeMKQl7v8UeBrE5TtqvDDl923/q7lKY2HDKqC90EUHscdUYphFbLz3hVoSPHoAFS0+JBaihAaDO3aR/kY9ux9UqUCOdNOG/C+TEc5+ApRd2lAFClkOUOgdFmSCl7NK0WdBEuNhINXPaXGFqv4HKKS3pF54bv43aP8mVjG22taSWbTiU4lIAZI43nDS3Hlt12WK5RjeqwWBoWUHDkyShqgmOAEq7VcmxmuQQHLRyMGhWdXTVcz0qGXqskXAGUcI1WYGO3fw6HGnUw4XTtOGBpnVUtHJpwaMKhCXeo/bYGIvqlxLRa7ER10VfXXnREe6kAejhnlD3betqZmAaT/sk7iJa6Ip2oN+79Or/7daJ20oU+pjXv6zA3yKHZqgJeQ9v3NTWn51rzvgHuYwpbkXTSuJbi8htHVb3DxuPmO2xSm25nwlmne3Dmr700yzU2GliuSXCyW4y7de4grPxxANe1XLaRiGv92guynLRRmzRb25Q5Kl1nwVmGDVdZ9jR/7eVY7obbufub7qE8Vp9wGuDs8Azgeo7NTmA59ipwA9jGVXIYTp+VcIBT/y40Pqkh1+PACa//SZZbGJ3md4QnBBsOrLcEfThZ5hY88zXKwtibDGIVviE2G1TP4Iy3DCYcLrx1gMNvoEZw4zrnsnArDpxa4uaWQ8Ny3I9zBE5lnDW4euYha0sLbsHl+APuceFuuvv1LOCOVJPaiahE39M1rxJZOycym544pt8Pqczq5EtQAOuVcIPQn/v/nOAsXQ+uTeEDwTVDtwncZJbBkZ7yOlzPMd7vfp0Gd2QAbL8Dsacyt91G7J2+LFz8dOfbaGk8NxniWWcVVtvMzUZ1lC3tEmeXRLvEoW05atAH44Dz4dR3CYdmVdmpQ82qcgi3NMgZwk3GP5Yl3fkt2iRbnuxyeBE+lDPh0tyPmAmZ/Xyax+vz33Ptfi3DTRyttnh8Jt5l4RgZTSPhZB7LwqoyuaaEvCKwiluAyFpIEctVUSsmT8oHcXHtsTKXMWjuF0AmCt8KUeXMX/Jn1e5HedDaT3totZ/3wLQpUr1DOisvceQhKZVu48Uij17CqPYjuLBqs8DxBBfTpadSJ3uow0NpnZrcJKfnY14dgGyVA+Y5NpgOBQPLmrgNSdvGfYzx3AE4lt6Cka7ZMtxGs43qZKN6v8coc9TF4VUaORK9J8vF9OZPgsucCXzLiyA3PpUqwQ3LnCg4qlhN4lol0ekZaWyOp9f2C0Vqz8vxyrx4td64FKkk+Vqz5ogU4eplbhVu4u23xQeZJ3agzAHPmwrOL74i+OH9eoS5X82OF9BaI/oF0XQENEsGRy/CSBtmM/hmxySF2uhToy2az1X7Wd3hU7tIfitdmJnYXsYC2BhgvjaEK8FtKBuIgSgvKw1JaVm9NZSM9sw+91Ktx+1KcHGJf23aR6KeZ4K6j+MTR8aAvF7Pp0V27FXwFeFkp2wgGpNokAyY4QjjScBd1nLUMj0FuCuUudw3KRP4rweXe89+QeSXeV1bpkrfbCDs2tInp5zY8QJa2xM2FSc+pl1rt36W9tZ7KOWhBKu3yyOkdmtCV/s04FpHq8eeljoF1oOAS/f/6wtydtiMYKs5HFtggtwFZiGjh1bLek/dped8Jo2tNV7risOpcGwEZ8z08nINM5CDyBTbRNJKSP1pL03vzyzzzUNDj0qfOs68M+5lKsX/OsgZEEpXFWS2LOeT/iGLElQ/K4pFpMCeVPxw2b9IGYgqCfZ/HErVUfMelJxZrAzV3HYnXS4NHmuHZS47DEAvy6fldxxOLY0na7DWtNiIWTWbuXyXej+YFQEw0w7LXIUzV1ACd3Y589+JmP+NICFXVPpXMyAqTbiKUwKwuzzUgFO1ZvvPVIpWLdb0zY/A5WrLGVjfcijhUHiGOto2dLWXqC3tMmfaS58CFOsKivdfJlhqr9xDscvcgmFzD+W2w39tWLjqyPvfUy9bVoqfEGxua7YFOg9Z2LPrTBRwH9798+5D3MoxJK5845ILaVZ72Ow/M3zdnNfb1wW4fEPvYCqyyxBfvd+3V/EzH0PpyN/fc8nt/Se9Y7ib+WfDtWy7zs1snx/XvsNUFHC//a63AEcySS7UCGrf4ex5C4csZw6PJFy2HkxFAff27V9v5R5uHaQkk7STNBmzbzlmABI7lnPb1u4KLn3AVBRwP/2itwBHMknOzJgdOPoHL1zslTkjT1zEcnd3d3/E7a7sISFZe8elmAed3LvZss7ydlzsWW4Od1qZ+/VnvQU4kknqlDnbcjl5LKURzrbcvEI5sbZ8HcPfr+kY4EgmqbUbHIVzX9vgFioUqEIVsSMKuDdv/nwj93DrICWZJGd667rZ0oD7H5AoZT+6YyPSAAAAAElFTkSuQmCC";let zzfxV=.3,zzfxX=new AudioContext,zzfx=($=1,_=.05,t=220,e=0,a=0,n=.1,h=0,l=1,s=0,o=0,c=0,g=0,r=0,d=0,f=0,m=0,v=0,x=1,p=0,y=0,b=0)=>{let w=Math,A=2*w.PI,u=44100,P=s*=500*A/u/u,F=t*=(1-_+2*_*w.random(_=[]))*A/u,H=0,z=0,S=0,V=1,k=0,E=0,I=0,R=b<0?-1:1,D=A*R*b*2/u,T=w.cos(D),X=w.sin,L=X(D)/4,O=1+L,C=-2*T/O,U=(1-L)/O,B=(1+R*T)/2/O,Z=-(R+T)/O,G=B,K=0,W=0,Y=0,q=0;for(e=u*e+9,p*=u,a*=u,n*=u,v*=u,o*=500*A/u**3,f*=A/u,c*=A/u,g*=u,r=u*r|0,$*=zzfxV,R=e+p+a+n+v|0;S<R;_[S++]=I*$)++E%(100*m|0)||(I=h?1<h?2<h?3<h?X(H**3):w.max(w.min(w.tan(H),1),-1):1-(2*H/A%2+2)%2:1-4*w.abs(w.round(H/A)-H/A):X(H),I=(r?1-y+y*X(A*S/r):1)*(I<0?-1:1)*w.abs(I)**l*(S<e?S/e:S<e+p?1-(S-e)/p*(1-x):S<e+p+a?x:S<R-v?(R-S-v)/n*x:0),I=v?I/2+(v>S?0:(S<R-v?1:(R-S)/v)*_[S-v|0]/2/$):I,b&&(I=q=G*K+Z*(K=W)+B*(W=I)-U*Y-C*(Y=q))),H+=(D=(t+=s+=o)*w.cos(f*z++))+D*d*X(S**5),V&&++V>g&&(t+=c,F+=c,V=0),!r||++k%r||(t=F,s=P,V=V||1);($=zzfxX.createBuffer(1,R,u)).getChannelData(0).set(_),(t=zzfxX.createBufferSource()).buffer=$,t.connect(zzfxX.destination),t.start()};const canvas=document.getElementById("cnvs"),ratio=Math.round(window.innerWidth/500);canvas.width=window.innerWidth/ratio,canvas.height=window.innerHeight/ratio,canvas.style.zoom=`calc(${ratio} * 100%)`;const ctx=canvas.getContext("2d");ctx.imageSmoothingEnabled=!1;const arc=($,_,t,e)=>{$.beginPath(),$.arc(_,t,e,0,2*Math.PI),$.fill(),$.closePath()},bg=document.createElement("canvas");bg.width=canvas.width,bg.height=canvas.height;const bgctx=bg.getContext("2d");bgctx.fillStyle="white";for(let i=0;i<canvas.width*canvas.height/2e3;i++){let $=1*Math.random()+1;bgctx.fillRect(Math.random()*canvas.width,Math.random()*canvas.height,$,$)}const dataURL=bg.toDataURL("image/png");canvas.style.backgroundImage=`url('${dataURL}')`;const fcanvas=document.createElement("canvas");fcanvas.width=fcanvas.height=14;const fctx=fcanvas.getContext("2d");fctx.fillStyle="#00aaFF55",fctx.arc(7,7,7,0,2*Math.PI),fctx.fill(),fctx.fillStyle="#0088DD",fctx.fillRect(3,3,8,8),fctx.fillStyle="#00aaFF",fctx.fillRect(3,3,8,1),fctx.fillRect(4,3,4,7),fctx.beginPath(),fctx.fillStyle="#FFFFFF",arc(fctx,7.5,8,1.5),fctx.fillRect(5,6,1,1),fctx.fillRect(7,5,1,1),fctx.fillRect(9,6,1,1),fctx.closePath();const foodDataURL=fcanvas.toDataURL("image/png"),food=new Image;food.src=foodDataURL;const PLATFORM_WIDTH=22,PLATFORM_HEIGHT=11;let globalAngle=0,globalVelocity=0,globalHeight=0,floorCollision,jumped=!1,cannotJump=!1,heightRecord=0,energy=100,message={text:"Reach the top!",transparency:255,warningDisplayed:!1},gameOver=!1;const markers=[{text:"0m",height:0},{text:"10m",height:1e3},{text:"100m",height:1e4},{text:"Eiffel Tower",height:33e3},{text:"Taipei 101",height:50800},{text:"Tokyo SKYTREE",height:63400},{text:"Burj Khalifa",height:82990},{text:"1km",height:1e5},{text:"Fuji",height:377624},];class Player{constructor(){this.height=canvas.height+platforms[5][0].height,this.velocity=1,this.inAir=!1,this.minHeight=this.height}jump(){!cannotJump&&(zzfx(1,.5,210,.01,0,.05,0,3.6,0,65,0,0,0,0,0,0,0,.53,.06,0,0),this.velocity=-9,this.inAir=!0)}stop(){this.velocity=1,this.inAir=!1}draw(){this.velocity+=1,this.velocity>3&&(this.velocity=3),this.height+=this.velocity,this.minHeight=floorCollision?canvas.height+globalHeight-floorCollision?.height-4:canvas.height+globalHeight-platforms[5][0].height-4,this.height>this.minHeight&&(this.height=this.minHeight,this.stop()),ctx.fillStyle="#FFFFFF11",arc(ctx,canvas.width/2,this.height,9),arc(ctx,canvas.width/2,this.height,12),arc(ctx,canvas.width/2,this.height,16),ctx.fillStyle="black",arc(ctx,canvas.width/2,this.height,4),ctx.save(),ctx.strokeStyle="black",ctx.lineWidth=5,ctx.lineCap="round",ctx.moveTo(canvas.width/2+6*Math.sin(globalAngle+2.5),this.height+6*Math.cos(globalAngle+2.5)),ctx.lineTo(canvas.width/2,this.height),ctx.lineTo(canvas.width/2+6*Math.sin(globalAngle+3.5),this.height+6*Math.cos(globalAngle+3.5)),ctx.stroke(),ctx.restore(),ctx.fillStyle=`hsl(${Math.round(energy)} 100% 50%)`,arc(ctx,canvas.width/2+3*Math.sin(globalAngle+2),this.height+3*Math.cos(globalAngle+2),1.5),arc(ctx,canvas.width/2+3*Math.sin(globalAngle+4),this.height+3*Math.cos(globalAngle+4),1.5)}}class Platform{constructor($,_,t){this.angle=$,this.height=_,this.isFront=!0,this.initPoint=this.getInitPoint(),this.faceInitPoint=this.getFaceInitPoint(),this.faceType=Math.floor(79.9*Math.random()),this.blink=!0,this.isBlink=.1>Math.random(),this.type=t,this.isFood=Math.round(Math.random()+globalHeight/1e4)}getInitPoint(){return canvas.width/2-11+100*Math.sin((this.angle+globalAngle)*Math.PI/180)}getFaceInitPoint(){return canvas.width/2+110*Math.sin((this.angle+globalAngle)*Math.PI/180)}draw(){if(0===this.height||this.height<globalHeight||this.height-11>canvas.height+globalHeight)return;100*Math.random()<1&&(this.blink=!this.blink);let $=Math.cos((this.angle+globalAngle)*Math.PI/180);this.isFront=$>0;let _=64*$+16;if(ctx.fillStyle=`rgb(${_},${_},${_})`,this.initPoint=this.getInitPoint(),this.faceInitPoint=this.getFaceInitPoint(),ctx.save(),"energy"===this.type){this.isFood&&message.warningDisplayed&&ctx.drawImage(food,0,0,14,14,this.initPoint+5,canvas.height+globalHeight-this.height,14,14);return}if(ctx.fillRect(this.initPoint,canvas.height+globalHeight-this.height,22,11.5),this.isFront&&(ctx.drawImage(sprites,Math.round(this.faceType)%10*22,11*Math.round(this.faceType/10),22,11,this.faceInitPoint-11*$-1,canvas.height+globalHeight-this.height,22*$+2,11),this.isBlink)){let t=this.faceInitPoint+this.faceType%10*$-1,e=canvas.height+globalHeight-this.height+this.faceType%8;ctx.fillStyle=this.blink?"#2F3338":message.warningDisplayed?"#FF0000":"#05ff00",ctx.fillRect(t,e,3,3),this.blink||(ctx.fillStyle+="55",arc(ctx,t+2,e+2,6))}this.faceType<10&&ctx.drawImage(sprites,Math.round(this.faceType)%10*22,99.5,22,10,this.faceInitPoint-11*$-1,canvas.height+globalHeight-this.height-11+1,22*$+1,10),ctx.restore()}}class Brick{constructor($,_){this.angle=$,this.height=_,this.isFront=!0,this.initPoint=this.getInitPoint()}getInitPoint(){return canvas.width/2+90*Math.sin((this.angle+globalAngle)*Math.PI/180)}draw(){let $=Math.cos((this.angle+globalAngle)*Math.PI/180);this.isFront=$>0,this.isFront&&0!==this.height&&!(this.height<globalHeight)&&!(this.height>canvas.height+globalHeight)&&(this.initPoint=this.getInitPoint(),ctx.fillStyle="#1a1a1a",ctx.fillRect(this.initPoint-1,canvas.height+globalHeight-this.height,22*$-1,11),ctx.beginPath(),ctx.strokeStyle="#000",ctx.moveTo(this.initPoint+11*$,canvas.height+globalHeight-this.height),ctx.lineTo(this.initPoint+11*$,canvas.height+globalHeight-this.height+5.5),ctx.strokeRect(this.initPoint-1,canvas.height+globalHeight-this.height+5.5,22*$,5.5),ctx.stroke(),ctx.closePath())}}const map=["000000000000000000000000000000","000000000000000000000000000000","000000000000000000000000000000","000000000000000000000000000000","000000000000000000000000000000","111111111111111111111111111111","000030030030030030030030030030",],mapSegments=[["0","021111110001111110000000002000","000000001110000001110000000000","000000000000000000001111000000","000111000000200000000000111111","111000111001110011100000000000","000000000010000030011111200000","100000000000000000000000011111",],["0","021001110000000011100000000010","000110001111111100011110011100","000000000000000000000000000000","000000200000000002002000000000","111111111111000111110000000111","000000000003000000000000000000","000000212000000000001111100000","001111000001111111000000000000","110000000000000000000000000000",],["0","001111111111220000221111111110","000000110001112222111000000000","000000000000011111100000000000","111100000000000000000000001111","000000000222222222222000000000","000000111111111111111111100000","000000000000030111000000000000","111000000000000000000000000111",],["0","000000000000000000000000000001","000000000000000000000000000010","000000000000000000000000000100","000000200002022000020000021000","000000000222220000222222210000","000022222222222222222222100000","000222222222222222222221000000","002222222222222222222210000000","000002222222222222222100000000","000022222222222222221000000000","000222222222222222210000000000","002222222222222222100000000000","000222222222222221000000000000","000022222222222210000000200000","000000222222222100000000000000","000022222222221000000000000200","000002222222210000000000000000","200000222222100000020000000022","220000222221000000000000002222","222000002210000000000002222222","222200022100000000000000022222","220000221000000000000002222222","222002210000000000022222222222","222002100000002000002222222222","220021000000000000022222222222","002210000000000022222222222222","022100000000000111122222222222","221000222222111222211111222222","210000000000000000000000111122","100000000000000000000000000011",],["0","000000000000000000000000000001","000000000000000000000000000010","000000000000000000000000000100","000000000000000000000000001000","000000000000000000000000210000","000000000000000000000000200000","000000000000000000000001000000","000000000000000000000010000000","000000000000000000002100000000","000000000000000000002000000000","000000000000000000010000000000","000000000000000000100000000000","000000000000000021000000000000","000000000000000020000000000000","000000000000000100000000000000","000000000000001000000000000000","000000000000210000000000000000","000000000000200000000000000000","000000000001000000000000000000","000000000010000000000000000000","000000000100000000000000000000","000000021000000000000000000000","000000020000000000000000000000","000000100000000000000000000000","000001000000000000000000000000","000010000000000000000000000000","000100000000000000000000000000","001000000000000000000000000000","010000000000000000000000000000","100000000000000000000000000011",],["0","000000000000000000000000000001","000000000000002000000000000010","000000000000010000000000000100","000000000000100000000000001000","000000000001000011112111110000","000000000010021100000000000000","000000000200003000000002000000","000000001000000000000020000000","000000010000000000002200000000","000000100000000000002000000000","000002000000000000010000000000","000010000000000000100000000000","002100000000000021002112100000","111000000000000020000000011211","000000000000000100000000000000","100000000000001000000000000000","000000000000210000000000000001","000000000000200000000000000010","000000000001000000000000000200","000000000010000000000000001000","000000000100000000000000020000","112111111000000000000000100000","000000000000000000000021002111","000000100000000000000010000000","000001000000000000000200000000","000010000000000000001000000000","000100000000000000010000000000","001000000000000000200000000000","010000000000000001000000000000","100000000000000000000000000011",],["0","010000000000000000000000000000","001220000000000000000000000000","000122000000000000000000000000","000012222222222222222222000000","000001222222222222222222200000","000000122222222222222222222000","000000012222222222222222200000","000000001222222222222222200000","000000000122222222222222000000","200000000012222222222222220000","000000000001222222222222200000","002000000000122222222222220000","000000000000012222222222200000","220002000000001222222222200000","000000000000000122222222220000","022200000000000012222222222200","002000200000000001222222222000","000000000000000000122222222200","000022222000000000012222222000","000000000222200000001222220000","002200022222200000000122200000","000000222222222200000012220000","000022222222222222000001220000","00022222222222222222000012200","002222222222222222222000012000","022222222222222222222200001200","022222222222220000000000000120","221111111122220002222220000012","200100000011111110000000000001","111000000000000000000000000000",],["0","010000000000000000000000000000","001000000000000000000000000000","000120000000000000000000000000","000020000000000000000000000000","000001000000000000000000000000","000000120000000000000000000000","000000020000000000000000000000","000000001000000000000000000000","000000000100000000000000000000","000000000010000000000000000000","000000000001200000000000000000","000000000000200000000000000000","000000000000010000000000000000","000000000000001000000000000000","000000000000000100000000000000","000000000000000012000000000000","000000000000000002000000000000","000000000000000000100000000000","000000000000000000010000000000","000000000000000000001000000000","000000000000000000000120000000","000000000000000000000020000000","000000000000000000000001000000","000000000000000000000000100000","000000000000000000000000010000","000000000000000000000000001000","000000000000000000000000000100","000000000000000000000000000010","000000000000000000000000000001","111000000000000000000000000000",],["0","010000000000000000000000000000","001000000000000001000000000000","000120000000000000100000000000","000020000000000000012000000000","000001000000000000002000000000","000000111111100000000100000000","000000000000011211120010000000","000000001000000000000001200000","000000000100000000000000200000","000000000010000000000000010000","000000000001200000000000001000","000000000000200000000000000100","000000000000010000000000000012","000000000000001000000000000002","100000000000000200000000000000","010000000000000012000000000000","001000000000000001000000000000","000111110000000000100000000000","000000001111100000010000000000","000001000030011112001000000000","000000100000000000000120000000","000000010000000000000020000000","000000001000000000000001000000","000000000100000000000000100000","000000000012000000000000010000","000000000002000000000000001000","000000000000100000000000000100","000000000000010000000000000010","000000000000001000000000000001","111000000000000000000000000000",],["0","001112000000000000000000000000","000001112200000000000000000000","000000001112222000000000000000","000000000001112222220000000000","000000000000001112222220000000","222200000000000001112222000000","002222222000000000001112220000","000002222220000000000301112220","000000000000000000000000001110","110000000000000000000000000001",],["0","000000000000000000000000001110","000000000000000000002221110000","000000000000000222221110000000","000000000002222221110000000000","000000002222221110300000000000","000000022221110000000000022222","000002221110000000000222222200","002221110000000022222222000000","001110000000000000000000000000","110000000000000000000000000001",],["0","001111220000000000000000000000","000000111122000000220000222200","000000000011112200000022000000","000000000003001111222000000000","00222000000000000111122000000","000022222000000000000011112200","000000002222000000000000001111","110000000000000000000000000000",],["0","000000000000000000000002211110","000022200002200000022111100000","002220000000000221111000000000","000000000002211110000000000000","000000022111100000000022220000","000221111000000000022222222000","211110030000000022222000220002","100000000000000000000000000001",],["0","001111111111111111111111111111","000000000000000000000300000000","000111111111111111110001111110","222122222222222222100012222212","222222222222222221000122222222","222222222222222210001222222222","222222222222222100012222222222","222222222222221000122222222222","222222222222210001222222222222","222222222222100012222222222222","222221111221000122211111122222","111111001110001111122222211111",],["0","001111111111111111111111111110","000122222222222222022222221221","100012222222222222022222221222","210001222222222222022222221222","221000122222222222022222221222","222100012222222222022222221222","222210031222222222022222221222","222221000122222222022222221222","222222100012222222022222221222","222222210001222222022222221222","211111221000122222022111111222","112221111100011111111122221111",],["0","001111111111111111111111111110","000000000000000000000000000011","100000000000000022222222220001","111111111111111112222222222000","100000000000000000000000000001","000222222222200000000000000011","002222222222111111111111111110","000000000000003000000000000011","100000000000000022222222220001","111111111111111112222222222000","100000000000000000000000000001","000222222222200000000000000011","002222222222111111111111111110","000000000000000000000000000011","000000000002222222222222220001","111111111111222222222222222000",],["0","001000000011100000111110000000","000122222100012221000001222222","100012221000001110000000122222","210001110000000300000000012222","221000000011100000111110001222","222100000122211111222221000122","222211111222222222222222100012","000000000000000000000001000001","110000000000000000000000000000",],["0","001000000011100000111110000000","000100000100010001000001000001","100010001000001110000000100000","010001110000000000000000010000","001000300011100000111110001000","000100000100011111000001000100","000011111000000000000000100010","000000000000000000000001000001","110000000000000000000000000000",],["0","000000000000000000000000000110","000000000000000000000000211000","000211111000001111000000000000","100000000000110000112000000011","011200000000000000000000000000","000000000011000000001110000000","000001111100002222000001111000","000000000000000000000000000000","000000000200000000002200000000","000000000011120000000000000000","000000000000002111120000000000","021111120000000000002111111110","000030000000000000000000000000","000000000002111111200000211200","000000000000000000000000000000","000000000000211122112211200000","000000111112000000000000000100","002112000000000000000000000010","110000000000000000000000000001",],["0","001000000000000000011110000010","012222222222222222100001222100","122222222211222221000000111000","222222222100122210000000000001","222222221000011100011110000012","222222210000003000122221000122","222222100011000001222222111222","222221000122100012222222212222","222210001222111222222222221222","222100012222222222222222222122","221000100000000000000000000012","210000010000000000000000000001","100000000000000000000000000000",],["0","001000000000000000011110000010","010000000000000000103001000100","100000000011000001000000111000","000000000100100010000000000001","000000001000011100011110000010","000000010000000000100001000100","000000100011000001000000111000","000001000100100010000000020000","000010001000011100000000001000","000100010000000000000000000100","001000100000000000000000000010","010000010000000000000000000001","100000000000000000000000000000",],["0","001111111111111111111111111110","000000000000000000000000000000","000000000000000000000000000000","112111121111111001112111112111","000000000000000000000000000000","000000000000000000000000000000","011122111121111112111112211110","000000000000000000000000000000","000000000000000000000000000000","111111122111001111112211111111","000000000000000003000000000000","000000000000000000000000000000","111122111111111122111112111100",],["0","001111111111111111111111111110","000000000000000000000000000000","000000000000000000000000000000","222201111222222222221112222222","000000300000000000000000000000","000000000000000000000000000000","222222220111122221110201112222","000000000000000000000000000000","000000000000000000000000000000","222222222222011110222222201112","000000000000000000000000000000","000000000000000000000000000000","110222222222222222222222222201",],["0","001001001001001001001001001001","000000000000000000000000000000","000000000000000000000000000000","100100100100100100100100100100","000000000000000300000000000000","000000000000000000000000000000","010010010010010010010010010010","000000000000000000000000000000","000000000000000000000000000000","100100000000000000000000000100",],["0","001111111111111111111111111110","000000000000000000020000000000","000000000000000000010000000000","111111111111111120010021111111","000000300000000000010000000000","000000000000000000010000000000","110002111111111111111111111111",],["0","001111111111111111111111111110","000000002000000000000000000000","000000001000000000000000000000","111112001002111111111111111111","000000001000000000000000000000","000000001000000000000000000000","111111111111111111111111112002","000000000000000000000020300000","000000000000000000000010000000","111111111111111111120011111111","000000000000002000000000000000","000000000000001000000000000000","110021111111111111111111111111",],["0","001100000000000000000000000110","000011000000000000000000011000","000000110000000000000001100000","111000001100000000000110000011","000110000011000000011000001100","000001100000110001100000110000","000000011000001110000011000000","000000000110000300001100000000","000000000001100000110000000000","000000000110000000001100000000","000000011000001110000011000000","000001100000110001100000110000","000110000011000000011000001100","011000001100000000000110000011","100000110000000000000001100000",],["0","001100000000000000000000000110","000011222222222222222222211000","000000112222222222222221100000","111000001122222222222110000011","222110000011222222211000001122","222221100000112221100000112222","222222211000001110000011222222","222222222110000300001122222222","222222222221100000112222222222","222222222110000000001122222222","222222211000001110000011222222","222221100000111111100000112222","222110000011222222211000001122","211000001122222222222110000011","100000112222222222222221100000",],["0","001111111111111111111111111110","000222222222222222222222222200","000000000000000000000000000000","111111111111111000111111111111","222222222222220000022222222222","000000000000000000000000000000","110001111111111111111111110001",],["0","001111111111111111111111111110","000222222222222222222222222200","000000000000000000000000000000","222222222222220000022222222222","111111111111111000111111111111","222222222222220000022222222222","000000000000000000000000000000","000000222222222222222222200000","110001111111111111111111110001",],];function createPlatform($,_){return $.split("").map(($,t)=>new Platform(12*t,("1"===$?1:"2"===$?Math.round(Math.random()):"3"===$?1:0)*_*11,"3"===$?"energy":"block"))}const platforms=map.map(($,_)=>createPlatform($,_)),bricks=map.map(($,_)=>$.split("").map(($,t)=>new Brick(12*t,("0"===$&&Math.random()>.5?1:0)*_*11))),player=new Player;function calculateCollisions($){let _=platforms[((canvas.height+globalHeight-$.height)/11).toFixed()]?.filter($=>$.isFront&&0!==$.height&&$.initPoint-4<canvas.width/2&&$.initPoint+22+4>canvas.width/2&&"energy"!==$.type);(floorCollision=_?.[0])&&(jumped=!1),heightRecord=Math.max(heightRecord,(floorCollision?.height||0)-50),message.warningDisplayed&&platforms[((canvas.height+globalHeight-$.height)/11+1).toFixed()]?.some($=>"energy"===$.type&&$.isFood&&$.height>0&&$.isFront&&$.initPoint+16>canvas.width/2&&$.initPoint+8<canvas.width/2)&&(platforms[((canvas.height+globalHeight-$.height)/11+1).toFixed()].find($=>"energy"===$.type&&$.isFood&&$.height>0&&$.isFront&&$.initPoint+16>canvas.width/2&&$.initPoint+8<canvas.width/2).height=0,zzfx(...[.7,,632,.07,.26,.3,,3.8,,74,471,.08,.04,,,,,.97,.18,,-713,]),(energy+=30)>100&&(energy=100)),platforms[((canvas.height+globalHeight-$.height+1)/11+1).toFixed()]?.filter($=>$.isFront&&"energy"!==$.type&&0!==$.height&&$.initPoint-4<canvas.width/2&&$.initPoint+22+4>canvas.width/2).length>0?($.velocity=3,cannotJump=!0):cannotJump=!1,platforms[((canvas.height+globalHeight-$.height)/11+1).toFixed()]?.some($=>$.isFront&&0!==$.height&&$.initPoint-5<canvas.width/2&&$.initPoint+22>canvas.width/2&&"energy"!==$.type)?(globalAngle+=.1,globalVelocity=0):platforms[((canvas.height+globalHeight-$.height)/11+1).toFixed()]?.some($=>$.isFront&&0!==$.height&&$.initPoint+22<canvas.width/2&&$.initPoint>canvas.width/2-22-5&&"energy"!==$.type)&&(globalAngle-=.1,globalVelocity=0)}const moveState={left:!1,right:!1};function rotate($){"ArrowLeft"===$||"A"===$||"a"===$?moveState.right=!0:"ArrowRight"===$||"D"===$||"d"===$?moveState.left=!0:("ArrowUp"===$||"W"===$||"w"===$||" "===$)&&(gameOver||jumped||player.inAir||player.jump(),jumped=!0)}function stop($){("ArrowUp"===$||"W"===$||"w"===$||" "===$)&&(jumped=!0),"ArrowLeft"===$||"A"===$||"a"===$?moveState.right=!1:("ArrowRight"===$||"D"===$||"d"===$)&&(moveState.left=!1)}const handleTouch=$=>{$.preventDefault(),$.isPrimary?$.clientX<document.body.offsetWidth/2?rotate("A"):rotate("D"):(jumped||player.inAir||player.jump(),jumped=!0)},handleTouchEnd=$=>{$.isPrimary&&(stop("D"),stop("A"),stop("W"))};function checkHeight(){globalHeight>1e3&&!message.warningDisplayed&&(message.text="HUNGRY!",message.transparency=255,message.warningDisplayed=!0),gameOver&&(document.body.style.backgroundColor="#000000",message.text="GAME OVER",message.transparency=255),player.height<canvas.height/2?globalHeight+=Math.abs(canvas.height/2-player.height)/30:player.height>canvas.height/3*2&&(globalHeight-=Math.abs(canvas.height/2-player.height)/30),11*map.length<globalHeight+canvas.height&&addMapRows()}function addMapRows(){let $=map.length,_=Math.floor(Math.random()*mapSegments.length);map.push(...mapSegments[_]);let t=mapSegments[_].map((_,t,e)=>createPlatform(_,t+$));platforms.push(...t);let e=mapSegments[_].map((_,t,e)=>_.split("").map((_,e)=>new Brick(12*e,("0"===_&&Math.random()>.5?1:0)*(t+$)*11,t%2==0)));bricks.push(...e)}function formatHeigh($){let _=Math.floor($/1e5),t=Math.floor($%1e5/100);return`${_?_+"km":""} ${t?t+"m":""} ${$%100+"cm"}`}function draw(){if(message.warningDisplayed&&(energy-=.016+globalHeight/1e6),energy<0&&(energy=0,gameOver=!0,canvas.style.filter="brightness(0)",canvas.classList.add("gameover"),localStorage.setItem("m_endless_tower",Math.max(localStorage.getItem("m_endless_tower"),heightRecord))),gameOver){let $=document.getElementById("record");$.innerText=formatHeigh(localStorage.getItem("m_endless_tower"))}calculateCollisions(player),globalAngle+=globalVelocity,globalAngle%=360,!gameOver&&(moveState.left?globalVelocity-=.3:moveState.right&&(globalVelocity+=.3)),globalVelocity>1&&(globalVelocity=1),globalVelocity<-1&&(globalVelocity=-1),.1>Math.abs(globalVelocity*=.9)&&(globalVelocity=0),checkHeight(),canvas.style.backgroundPosition=` ${-(10*globalAngle)}px ${globalHeight}px`,ctx.clearRect(0,0,canvas.width,canvas.height),platforms.forEach($=>$.filter($=>!$.isFront).forEach($=>$.draw())),ctx.fillStyle="#000",ctx.fillRect(canvas.width/2-90,0,180,canvas.height),bricks.forEach($=>$.forEach($=>$.draw())),player.draw(),platforms.toReversed().forEach($=>$.filter($=>$.isFront).toSorted(($,_)=>Math.abs(canvas.width/2-_.initPoint)-Math.abs(canvas.width/2-$.initPoint)).forEach($=>$.draw()));let _=canvas.height-50+globalHeight;markers.forEach($=>{ctx.fillStyle="#FFF",ctx.fillRect(0,_-$.height,canvas.width/2-120,1),ctx.textAlign="left",ctx.font="20px Courier New",ctx.fillText($.text,5,_-$.height-5)}),ctx.fillStyle="#10121c",ctx.fillRect(0,canvas.height+globalHeight-platforms[5][0].height+11,canvas.width,canvas.height-platforms[5][0].height),ctx.textAlign="left",ctx.font="20px Courier New",ctx.fillStyle="#000",ctx.fillText(formatHeigh(heightRecord),1,21),ctx.fillStyle="#FFF",ctx.fillText(formatHeigh(heightRecord),0,20),ctx.strokeStyle="#FFF",ctx.strokeRect(canvas.width-37,8,29,14),ctx.fillStyle=`hsl(${Math.round(energy)} 100% 50%)`,ctx.fillRect(canvas.width-35,10,Math.max(0,energy/4),10),message.text&&(ctx.textAlign="center",ctx.font=`bold calc(3vw + ${(255-message.transparency)/10}px) Courier New`,ctx.fillStyle="#FFFFFF"+message.transparency.toString(16),ctx.fillText(message.text,canvas.width/2,canvas.height/2),message.transparency-=1,message.transparency<17&&(message.text="")),requestAnimationFrame(draw)}document.addEventListener("keydown",$=>rotate($.key)),document.addEventListener("keyup",$=>stop($.key)),document.addEventListener("pointerdown",handleTouch),document.addEventListener("pointerup",handleTouchEnd),document.addEventListener("touchmove",$=>$.preventDefault()),draw();</script>