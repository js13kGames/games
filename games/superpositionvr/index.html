<!doctype html><script src=/2021/webxr/aframe.js></script><title>Superposition VR</title><script>let gamestarted=!1,amountofWinBoxes=Math.floor(420),amountofBadBoxes=Math.floor(340),score=0,totalTime=150,TimeDisplay=150;const winScore=100;let winScoreShown=!1;function beginGame(){gamestarted=!0,createWinBoxes(amountofWinBoxes),createBadBoxes(amountofBadBoxes),updateGameState(totalTime)}function updateGameState(t){setInterval((function(){0===--t&&restart(),score>=winScore&&0==winScoreShown&&(winMsg(),winScoreShown=!0)}),1e3)}function restart(){location.reload()}function getRandomInt(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}function winMsg(){let t=document.createElement("a-entity");t.setAttribute("position",{x:.6,y:0,z:-1}),t.setAttribute("text","value","YOU WON!","color","white","width","80"),document.getElementById("player").appendChild(t);document.querySelector("a-scene").pause(),setInterval((function(){restart()}),4e3)}function createWinBoxes(){let t;for(t=0;t<amountofWinBoxes;t++){let t=document.createElement("a-sphere"),e=getRandomInt(-400,400),o=getRandomInt(-550,500),n=getRandomInt(-400,450),a=getRandomInt(8,10),i=getRandomInt(-400,400),r=getRandomInt(-400,400),s=getRandomInt(1,450);t.setAttribute("position",{x:e,y:n,z:o}),t.object3D.scale.set(a,a,a),t.setAttribute("material","color","#ADD8E6"),t.setAttribute("name","winbox"),t.setAttribute("winbox",""),t.setAttribute("change-color-on-hover","color","green"),t.setAttribute("class","winbox"),t.setAttribute("animation","dur: 1200; easing: linear; loop: true; property: position; to:"+i,s,r),document.querySelector("a-scene").appendChild(t)}}function createBadBoxes(){let t;for(t=0;t<amountofBadBoxes;t++){let t=document.createElement("a-sphere"),e=getRandomInt(-400,400),o=getRandomInt(-550,500),n=getRandomInt(-400,450),a=getRandomInt(8,10),i=getRandomInt(-400,400),r=getRandomInt(-400,400),s=getRandomInt(1,450);t.setAttribute("position",{x:e,y:n,z:o}),t.object3D.scale.set(a,a,a),t.setAttribute("material","color","red"),t.setAttribute("name","badbox"),t.setAttribute("badbox",""),t.setAttribute("minus-score",""),t.setAttribute("class","badbox"),t.setAttribute("animation","dur: 1200; easing: linear; loop: true; property: position; to:"+i,s,r),document.querySelector("a-scene").appendChild(t)}}window.onload=function(){beginGame()},AFRAME.registerComponent("change-color-on-hover",{schema:{color:{default:"white"}},init:function(){var t=this.data,e=this.el,o=e.getAttribute("material").color;e.addEventListener("mouseenter",(function(){score++,document.getElementById("score").play(),e.setAttribute("color",t.color)})),e.addEventListener("mouseleave",(function(){e.setAttribute("color",o)}))}}),AFRAME.registerComponent("minus-score",{schema:{},init:function(){this.data;this.el.addEventListener("mouseenter",(function(){score--,document.getElementById("lose").play()}))}}),AFRAME.registerComponent("update-score-every-second",{init:function(){const t=this.el;setInterval((function(){t.setAttribute("text","value",score.toString())}),1e3)}}),AFRAME.registerComponent("update-time-every-second",{init:function(){const t=this.el;setInterval((function(){TimeDisplay--,t.setAttribute("text","value",TimeDisplay.toString())}),1e3)}})</script><audio id=score src=sound/score.mp3></audio><audio id=lose src=sound/lose.mp3></audio><a-scene fog="type: linear; color: #000000 density:0.10"><a-entity light="type: point; intensity: 6; distance:700; decay: 2; color: #FFFF99" position="0 50 -120"></a-entity><a-entity id=player camera="fov: 85" look-controls="" position="0 200 130" rotation="-2.062648062470959 -90.75651474872244 0" data-aframe-inspector-original-camera=""><a-cursor material="" raycaster="" cursor="" geometry=""></a-cursor><a-entity text="value: SCORE; color: white; width: 2" position="-0.5 -0.6 -1"></a-entity><a-entity update-score-every-second="" text="value: 0; color: white; width: 2" position="0.5 -0.6 -1"></a-entity><a-entity text="value: TIME REMAINING; color: white; width: 2" position="-0.5 -0.75 -1"></a-entity><a-entity update-time-every-second="" text="value: 150; color: white; width: 2" position="0.5 -0.73 -1"></a-entity></a-entity><a-sky color=#000></a-sky></a-scene>