<!doctype html><meta name=viewport content="width=device-width"><title>DarkLine-Paws - js13kGames 2025</title><style>#catEyesOverlay{position:fixed;top:0;left:0;width:100vw;height:100vh;pointer-events:none;z-index:9999;display:none;background:#000;mask-image:url(#catEyesMask);-webkit-mask-image:url(#catEyesMask);mask-repeat:no-repeat;-webkit-mask-repeat:no-repeat;mask-size:100vw 100vh;-webkit-mask-size:100vw 100vh;transition:mask-position .25s cubic-bezier(.4,2,.6,1)}.intro-screen{position:absolute;top:0;left:0;width:100vw;height:100vh;background:linear-gradient(135deg,#1a1a2e,#16213e,#0f3460);color:#fff;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:2000;font-family:Arial,sans-serif;text-align:center;animation:fadeIn 2s ease-in}.intro-title{font-size:4rem;font-weight:700;margin-bottom:1rem;text-shadow:3px 3px 6px rgba(0,0,0,.7);background:linear-gradient(45deg,#ff6b6b,#4ecdc4,#45b7d1);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.intro-subtitle{font-size:1.5rem;margin-bottom:2rem;opacity:.9;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.intro-story{max-width:600px;font-size:1.1rem;line-height:1.6;margin-bottom:2rem;opacity:.8;padding:0 20px}.intro-controls{background:rgba(255,255,255,.1);padding:20px;border-radius:15px;margin-bottom:2rem;backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2)}.intro-button{padding:15px 30px;font-size:1.2rem;background:linear-gradient(45deg,#ff6b6b,#4ecdc4);border:none;border-radius:25px;color:#fff;cursor:pointer;transition:transform .3s ease,box-shadow .3s ease;font-weight:700;text-transform:uppercase;letter-spacing:1px}.intro-button:hover{transform:translateY(-3px);box-shadow:0 10px 20px rgba(0,0,0,.3)}@keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.victory-screen{position:fixed;top:0;left:0;width:100vw;height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:3000;font-family:Arial,sans-serif;text-align:center;animation:victoryPulse 2s ease-in-out infinite}@keyframes victoryPulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}.victory-title{font-size:5rem;font-weight:700;margin-bottom:1rem;text-shadow:4px 4px 8px rgba(0,0,0,.7);color:gold}.victory-button{padding:15px 30px;font-size:1.2rem;background:linear-gradient(45deg,gold,#ffb347);border:none;border-radius:25px;color:#000;cursor:pointer;transition:transform .3s ease,box-shadow .3s ease;font-weight:700;text-transform:uppercase;letter-spacing:1px;margin:10px}.victory-button:hover{transform:translateY(-3px);box-shadow:0 10px 20px rgba(0,0,0,.3)}.hidden{display:none!important}body,html{margin:0;height:100%;background:#87ceeb;color:#333;font-family:sans-serif}#menu{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,.8);color:#fff;padding:30px 40px;border-radius:15px;text-align:center;z-index:1000;backdrop-filter:blur(10px);border:2px solid rgba(255,255,255,.2)}#menu h1{margin-bottom:20px;color:#4ecdc4;text-shadow:2px 2px 4px rgba(0,0,0,.5)}#menu button,#menu select{padding:12px 20px;font-size:16px;cursor:pointer;border-radius:8px;border:none;margin:5px}#menu button{background:linear-gradient(45deg,#ff6b6b,#4ecdc4);color:#fff;font-weight:700;transition:transform .2s ease}#menu button:hover{transform:scale(1.05)}#ui{position:fixed;left:12px;top:12px;z-index:10;background:rgba(255,255,255,.9);padding:15px;border-radius:12px;box-shadow:0 4px 8px rgba(0,0,0,.2)}#ui h1{font-size:18px;margin:0 0 10px;color:#2c3e50}#ui p{margin:6px 0;font-size:13px;opacity:.9}.health-bar{margin:10px 0}.health-fill{height:8px;background:linear-gradient(90deg,#e74c3c,#f39c12,#27ae60);border-radius:4px;transition:width .3s ease}.health-bg{height:8px;background:#ecf0f1;border-radius:4px;overflow:hidden}#msg{position:fixed;bottom:12px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,.8);color:#fff;padding:12px 20px;border-radius:10px;font-size:14px;font-weight:700;text-shadow:1px 1px 2px rgba(0,0,0,.7)}canvas{display:block;width:100vw;height:100vh;image-rendering:pixelated}.damage-flash{animation:damageFlash .3s ease-in-out}@keyframes damageFlash{0%{filter:hue-rotate(0deg) saturate(1)}50%{filter:hue-rotate(180deg) saturate(2)}100%{filter:hue-rotate(0deg) saturate(1)}}</style><body><svg width=0 height=0><mask id=catEyesMask><rect x=0 y=0 width=100vw height=100vh fill=white /><ellipse id=eyeLeft cx=25vw cy=50vh rx=28vw ry=48vh fill=black /><ellipse id=eyeRight cx=75vw cy=50vh rx=28vw ry=48vh fill=black /></mask></svg><div id=catEyesOverlay></div><div id=introScreen class=intro-screen><h1 class=intro-title>DARKLINE PAWS</h1><p class=intro-subtitle>ÍßÅìäàíÜúüêæDive Into A Mystical AdventureüêæíÜúìäâÍßÇ<div class=intro-story><p><b>In a world where shadows lurk and magic thrives,you are a mystical cat on a quest to find your way home.</b><h3>Your Journey Begins</h3></div><div class=intro-controls><h3>Controls</h3><p><strong>Move:</strong>W/S or ‚Üë/‚Üì |<strong>Strafe:</strong>A/D |<strong>Turn:</strong>‚Üê/‚Üí or Q/E<p><strong>Run:</strong>Shift |<strong>Blink:</strong>SpaceBar<strong>Menu:</strong>Escape</div><button class=intro-button onclick=showMenu()>BEGIN ADVENTURE</button></div><div id=victoryScreen class="victory-screen hidden"><h1 class=victory-title>üèÜ VICTORY! üèÜ</h1><p style=font-size:1.5rem;margin-bottom:2rem>You found the witch's house!</p><button class=victory-button onclick=restartGame()>Play Again</button></div><div id=menu class=hidden><h1>üêæ DarkLine Paws</h1><p>Select a level to begin your adventure:</p><select id=levelSelect><option value=1>Level 1 (Deadly Maze)<option value=2>Level 2 (Maze)<option value=index3.html>Level 3 (Cat Climber)<option value=index2.html>Level 4 [Tic-Tac-Toe (Vs Cat)]</select><br><br><button id=startBtn>Start Game</button></div><script>document.getElementById("levelSelect").addEventListener("change",(function(){"index2.html"===this.value&&(window.location.href="index2.html")})),document.getElementById("levelSelect").addEventListener("change",(function(){"index3.html"===this.value&&(window.location.href="index3.html")}))</script><br><br><script>const eyesOverlay=document.getElementById("catEyesOverlay");let blinkInterval;function showGameEyes(){eyesOverlay.style.display="block",clearInterval(blinkInterval),blinkInterval=setInterval((()=>blinkEyes()),1e4)}function blinkEyes(){const e=document.getElementById("eyeLeft"),t=document.getElementById("eyeRight");e.setAttribute("ry","2vh"),t.setAttribute("ry","2vh"),setTimeout((()=>{e.setAttribute("ry","55vh"),t.setAttribute("ry","55vh")}),250)}function hideGameEyes(){eyesOverlay.style.display="none",clearInterval(blinkInterval)}document.addEventListener("keydown",(e=>{"playing"===gameState&&"Space"===e.code&&(blinkEyes(),e.preventDefault())}))</script><div id=ui class=hidden><h1>üêæ DarkLine Paws</h1><p><b>Health:</b><div class=health-bar><div class=health-bg><div id=healthFill class=health-fill style=width:100%></div></div></div><p id=healthText><b>100/100 HP</b><p><b>Goal:</b>Find the magical portal home! üè†‚ú®<div id=blockLegend style=font-size:11px;margin-top:10px;opacity:.8><p><strong>üî¥ Red:</strong>Damage spikes |<strong>üíö Green:</strong>Healing |<strong>üè† House:</strong>Victory!</div></div><div id=msg class=hidden></div><canvas id=view class=hidden></canvas><script>const MAP_W=16,MAP_H=51;let gameState="intro",playerHealth=100,maxHealth=100,lastDamageTime=0,gameWon=!1;const MAP1=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,7,7,7,7,7,7,7,7,7,7,7,7,7,7,1,1,0,0,0,0,7,0,7,0,0,0,7,0,0,0,1,1,7,7,7,0,7,0,7,7,7,0,7,0,7,7,1,1,0,0,0,0,7,0,0,0,7,0,7,0,0,0,1,1,0,7,7,7,7,7,7,0,7,0,7,7,7,0,1,1,0,7,0,0,0,0,7,0,0,0,0,0,7,0,1,1,0,7,0,7,7,0,7,7,7,7,7,0,7,0,1,1,0,7,0,7,0,0,0,0,0,0,7,0,0,0,1,1,0,7,0,7,0,7,7,7,7,0,7,7,7,7,1,1,0,0,0,0,0,7,0,0,7,0,0,0,0,0,1,1,7,7,7,7,7,7,0,7,7,7,7,7,7,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,7,0,1,1,0,7,7,7,7,7,7,7,7,7,7,0,7,0,1,1,0,7,0,0,0,0,0,0,0,0,7,0,7,0,1,1,0,7,0,7,7,7,7,7,7,0,7,0,7,0,1,1,0,7,0,7,0,0,0,0,7,0,7,0,0,0,1,1,0,7,0,7,0,7,7,0,7,0,7,7,7,0,1,1,0,0,0,0,0,7,0,0,0,0,0,0,7,0,1,1,7,7,7,7,0,7,7,7,7,7,7,0,7,0,1,1,0,0,0,7,0,0,0,0,0,0,7,0,7,0,1,1,0,7,7,7,7,7,7,7,7,0,7,0,7,0,1,1,0,0,0,0,0,0,0,0,7,0,0,0,0,0,1,1,7,7,7,7,7,7,7,0,7,7,7,7,7,7,1,1,0,0,0,0,0,0,7,0,0,0,0,0,0,0,1,1,0,7,7,7,7,0,7,7,7,7,7,7,7,0,1,1,0,7,0,0,0,0,0,0,0,0,0,0,7,0,1,1,0,7,0,7,7,7,7,7,7,7,7,0,7,0,1,1,0,7,0,7,0,0,0,0,0,0,7,0,0,0,1,1,0,7,0,7,0,7,7,7,7,0,7,7,7,0,1,1,0,0,0,0,0,7,0,0,7,0,0,0,7,0,1,1,7,7,7,7,7,7,0,7,7,7,7,0,7,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,9,0,1,1,7,7,7,7,7,7,7,7,7,7,7,7,7,7,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],MAP2=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,2,0,0,0,0,0,3,0,0,0,0,1,1,3,0,0,2,0,3,3,3,0,3,0,4,4,0,1,1,0,2,0,0,0,0,0,3,0,0,0,0,4,3,1,1,4,2,2,2,5,5,0,3,4,4,4,7,4,0,1,1,0,0,0,0,0,5,0,0,0,0,0,0,4,0,1,1,3,3,3,5,0,5,0,2,2,2,6,0,4,0,1,1,0,0,0,0,0,5,0,2,0,0,0,0,0,0,1,1,0,4,4,6,0,0,0,2,0,3,3,3,6,8,1,1,0,0,0,4,0,2,7,0,0,3,0,0,0,0,1,1,5,5,0,4,0,2,2,2,0,3,0,4,4,4,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,7,6,6,0,3,3,0,4,4,0,5,5,7,0,1,1,4,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,2,0,5,5,0,3,0,4,4,0,6,0,2,1,1,2,2,7,0,0,0,3,0,0,0,0,6,0,0,1,1,4,2,0,4,4,0,3,0,5,5,8,6,0,3,1,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,3,3,6,0,2,0,4,0,5,5,6,7,0,1,1,2,0,0,0,0,2,0,4,0,0,0,0,0,0,1,1,4,4,0,5,0,0,0,0,0,3,0,2,2,0,1,1,0,4,0,5,8,6,6,6,0,3,0,0,2,0,1,1,7,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,5,0,2,2,3,0,4,4,6,0,3,0,5,1,1,7,0,0,0,0,0,0,0,0,0,0,0,5,0,1,1,6,0,0,0,0,0,0,0,0,0,0,0,5,4,1,1,0,0,0,2,0,0,0,0,0,3,0,0,0,0,1,1,6,0,0,2,0,0,0,0,0,3,0,0,0,3,1,1,5,7,0,2,0,3,3,3,0,3,0,4,4,4,1,1,0,2,0,0,0,0,0,3,0,0,0,0,4,0,1,1,4,2,2,2,5,5,0,3,4,4,4,7,4,0,1,1,0,0,0,0,0,5,0,0,0,0,0,0,4,2,1,1,3,3,3,5,0,5,0,2,2,2,6,0,4,0,1,1,0,0,0,0,0,5,0,2,0,0,0,0,0,0,1,1,0,4,4,6,0,0,0,2,0,3,3,3,6,6,1,1,0,0,0,4,0,2,7,0,0,3,0,0,0,0,1,1,5,5,0,4,0,2,2,2,0,3,0,4,4,4,1,1,7,0,0,0,0,0,0,0,0,0,0,0,0,7,1,1,0,6,6,0,3,3,0,4,4,0,5,5,7,0,1,1,4,0,0,0,0,0,0,0,0,0,0,0,0,8,1,1,0,2,0,5,5,0,3,0,4,4,0,6,0,2,1,1,4,2,7,0,0,0,3,0,0,0,0,6,0,0,1,1,0,2,0,4,4,0,3,0,5,5,8,6,0,3,1,1,2,0,0,0,0,0,0,0,0,0,0,0,0,7,1,1,7,3,3,6,0,2,0,4,0,5,5,6,7,0,1,1,0,0,0,0,0,2,0,4,0,0,0,0,0,0,1,1,0,4,0,5,0,0,0,0,0,3,0,2,2,0,1,1,0,4,0,5,8,6,6,6,0,3,0,0,2,0,1,1,7,0,7,0,7,0,6,7,4,0,5,0,0,5,1,1,0,5,0,2,2,3,0,4,4,6,0,3,0,5,1,1,5,2,0,5,3,0,0,0,6,0,0,3,9,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];let msgTimeout,MAP=[];function showMenu(){document.getElementById("introScreen").classList.add("hidden"),document.getElementById("menu").classList.remove("hidden"),gameState="menu",hideGameEyes()}function startGame(){const e=document.getElementById("levelSelect").value;"1"===e?MAP=[...MAP1]:"2"===e&&(MAP=[...MAP2]),playerHealth=maxHealth,gameWon=!1,window.gameEngine.resetPlayer(),document.getElementById("menu").classList.add("hidden"),document.getElementById("ui").classList.remove("hidden"),document.getElementById("view").classList.remove("hidden"),document.getElementById("msg").classList.remove("hidden"),gameState="playing",showGameEyes(),updateHealthDisplay(),showMessage("üêæ Adventure begins! Find the portal home!",3e3),requestAnimationFrame(window.gameEngine.loop)}function restartGame(){document.getElementById("victoryScreen").classList.add("hidden"),showMenu()}function showVictoryScreen(){document.getElementById("victoryScreen").classList.remove("hidden"),document.getElementById("ui").classList.add("hidden"),document.getElementById("view").classList.add("hidden"),document.getElementById("msg").classList.add("hidden"),gameState="victory",hideGameEyes()}function updateHealthDisplay(){const e=playerHealth/maxHealth*100;document.getElementById("healthFill").style.width=e+"%",document.getElementById("healthText").innerHTML=`<b>${playerHealth}/${maxHealth}HP</b>`}function takeDamage(e){const t=Date.now();t-lastDamageTime<1e3||(lastDamageTime=t,playerHealth=Math.max(0,playerHealth-e),updateHealthDisplay(),document.getElementById("view").classList.add("damage-flash"),setTimeout((()=>{document.getElementById("view").classList.remove("damage-flash")}),300),playerHealth<=0&&(showMessage("üíÄ You died! Respawning...",2e3),setTimeout((()=>{playerHealth=maxHealth,window.gameEngine.resetPlayer(),updateHealthDisplay()}),2e3)))}function heal(e){playerHealth=Math.min(maxHealth,playerHealth+e),updateHealthDisplay(),showMessage(`üíö +${e}HP restored!`,1500)}function showMessage(e,t=2e3){const l=document.getElementById("msg");l.textContent=e,l.style.display="block",clearTimeout(msgTimeout),msgTimeout=setTimeout((()=>{l.style.display="none"}),t)}document.getElementById("startBtn").addEventListener("click",startGame),document.addEventListener("keydown",(function(e){"Escape"===e.key&&"playing"===gameState&&(document.getElementById("menu").classList.remove("hidden"),document.getElementById("ui").classList.add("hidden"),document.getElementById("view").classList.add("hidden"),document.getElementById("msg").classList.add("hidden"),gameState="menu")})),window.gameEngine=function(){const e=document.getElementById("view"),t=e.getContext("2d");function l(){e.width=window.innerWidth/5,e.height=window.innerHeight/5,e.style.width=window.innerWidth+"px",e.style.height=window.innerHeight+"px"}function n(e,t){return e<0||t<0||e>=16||t>=51?1:MAP[16*t+e]}window.addEventListener("resize",l),l();let a=2.5,i=2.5,o=0,s=0,d=0;const h=Math.PI/3,c=new Set;function m(e){const t=64,l=document.createElement("canvas");l.width=l.height=t;const n=l.getContext("2d");if(1===e){n.fillStyle="#888888",n.fillRect(0,0,t,t),n.strokeStyle="#555555",n.lineWidth=1;for(let e=0;e<t;e+=8)for(let l=0;l<t;l+=16){const t=e/8%2==0?0:8;n.strokeRect(l+t,e,16,8)}}else if(2===e){n.fillStyle="#8B4513",n.fillRect(0,0,t,t),n.strokeStyle="#654321",n.lineWidth=1;for(let e=0;e<t;e+=4)n.beginPath(),n.moveTo(0,e),n.lineTo(t,e),n.stroke();for(let e=0;e<t;e+=16)n.strokeStyle="#5D3A1A",n.strokeRect(e,0,16,t)}else if(3===e)n.fillStyle="#666666",n.fillRect(0,0,t,t),n.strokeStyle="#444444",n.lineWidth=2,[{x:0,y:0,w:20,h:16},{x:20,y:0,w:16,h:12},{x:36,y:0,w:16,h:20},{x:52,y:0,w:12,h:24},{x:0,y:16,w:16,h:16},{x:16,y:12,w:20,h:20},{x:36,y:20,w:16,h:12},{x:52,y:24,w:12,h:16},{x:0,y:32,w:24,h:16},{x:24,y:32,w:16,h:12},{x:40,y:32,w:16,h:16},{x:0,y:48,w:20,h:16},{x:20,y:44,w:20,h:20},{x:40,y:48,w:24,h:16}].forEach((e=>{n.strokeRect(e.x,e.y,e.w,e.h)}));else if(4===e){n.fillStyle="#B22222",n.fillRect(0,0,t,t),n.strokeStyle="#8B0000",n.lineWidth=1;for(let e=0;e<t;e+=8)for(let l=0;l<t;l+=16){const t=e/8%2==0?0:8;n.strokeRect(l+t,e,16,8)}}else if(5===e){n.fillStyle="#F4A460",n.fillRect(0,0,t,t),n.strokeStyle="#DEB887",n.lineWidth=1;for(let e=0;e<t;e+=8)n.beginPath(),n.moveTo(0,e),n.lineTo(t,e),n.stroke()}else if(6===e){n.fillStyle="#CC5533",n.fillRect(0,0,t,t),n.strokeStyle="#992222",n.lineWidth=1;for(let e=0;e<t;e+=8)for(let l=0;l<t;l+=16){const t=e/8%2==0?0:8;n.fillStyle="#AA3311",n.fillRect(l+t,e,16,4),n.fillStyle="#CC5533",n.fillRect(l+t,e+4,16,4)}}else if(7===e){n.fillStyle="#FF0000",n.fillRect(0,0,t,t),n.fillStyle="#CC0000";for(let e=0;e<t;e+=8)n.beginPath(),n.moveTo(e,t),n.lineTo(e+4,0),n.lineTo(e+8,t),n.fill();n.strokeStyle="#FFFF00",n.lineWidth=2;for(let e=0;e<t;e+=16)n.strokeRect(e,e,16,16)}else if(8===e)n.fillStyle="#00FF00",n.fillRect(0,0,t,t),n.fillStyle="#00AA00",n.fillRect(28,0,8,t),n.fillRect(0,28,t,8),n.fillStyle="#FFFFFF",[[16,16],[48,16],[16,48],[48,48],[32,32]].forEach((([e,t])=>{n.fillRect(e-2,t-2,4,4)}));else if(9===e){n.fillStyle="#FFD700",n.fillRect(0,0,t,t),n.fillStyle="#B8860B",n.fillRect(16,16,32,32),n.fillStyle="#8B4513",n.fillRect(28,32,8,16),n.fillStyle="#FFFFFF";for(let e=0;e<10;e++){const e=Math.random()*t,l=Math.random()*t;n.fillRect(e,l,2,2)}}return l}window.addEventListener("keydown",(e=>{"playing"===gameState&&(e.preventDefault(),c.add(e.key.toLowerCase()),c.add(e.code))})),window.addEventListener("keyup",(e=>{"playing"===gameState&&(e.preventDefault(),c.delete(e.key.toLowerCase()),c.delete(e.code))}));const r={};for(let e=1;e<=9;e++)r[e]=m(e);function f(e){const t=(c.has("shift")||c.has("shiftleft")||c.has("shiftright")?3:1.8)*e,l=2.2*e;(c.has("arrowleft")||c.has("q"))&&(s-=l),(c.has("arrowright")||c.has("e"))&&(s+=l);const h=Math.cos(s),m=Math.sin(s);let r=0,f=0;(c.has("w")||c.has("arrowup"))&&(r+=h*t,f+=m*t),(c.has("s")||c.has("arrowdown"))&&(r-=h*t,f-=m*t),c.has("d")&&(r+=-m*t,f+=h*t),c.has("a")&&(r+=m*t,f+=-h*t),c.has(" ")&&0===o&&(d=6.5);const y=a+r,g=i+f,u=n(Math.floor(y),Math.floor(i));(0===u||u>=7)&&(a=y);const w=n(Math.floor(a),Math.floor(g));(0===w||w>=7)&&(i=g),d-=20*e,o+=d*e,o<0&&(o=0,d=0),function(){const e=n(Math.floor(a),Math.floor(i));if(7===e&&0===o)takeDamage(20);else if(8===e&&0===o){heal(15);const e=16*Math.floor(i)+Math.floor(a);8===MAP[e]&&(MAP[e]=0)}else 9===e&&(gameWon||(gameWon=!0,showMessage("üè† You found the witch's house! Victory!",3e3),setTimeout((()=>{showVictoryScreen()}),3e3)))}()}function y(l,n,a,i,s){e.width;const d=e.height;let h=Math.min(d,d/(n+1e-4)|0);h=Math.max(1,h-20*o);let c=(d-h)/2|0;if(t.fillStyle="#87CEEB",t.fillRect(l,0,1,c),r[a]){const e=r[a],o=e.width,d=Math.floor(s*o)%o;let m=1/(1+.1*n);i&&(m*=.8),7===a&&(m*=.8+.4*Math.sin(.01*Date.now())),8===a&&(m*=.9+.3*Math.sin(.008*Date.now())),9===a&&(m*=.9+.2*Math.sin(.005*Date.now()));const f=e.getContext("2d").getImageData(d,0,1,o),y=Math.max(1,Math.floor(h/o*.5));for(let e=c;e<c+h;e+=y){const n=Math.floor((e-c)/h*o)%o*4;let a=f.data[n]||128,i=f.data[n+1]||128,s=f.data[n+2]||128;a=Math.floor(a*m),i=Math.floor(i*m),s=Math.floor(s*m),t.fillStyle=`rgb(${a},${i},${s})`,t.fillRect(l,e,1,y)}}else{const e={1:"#888888",2:"#8B4513",3:"#666666",4:"#B22222",5:"#F4A460",6:"#CC5533",7:"#FF0000",8:"#00FF00",9:"#FFD700"};t.fillStyle=e[a]||"#888888",t.fillRect(l,c,1,h)}t.fillStyle="#228B22",t.fillRect(l,c+h,1,d-(c+h))}let g=0;return{loop:function t(l){if("playing"!==gameState)return;const o=Math.min(.05,(l-g)/1e3||.016);g=l,f(o),function(){const t=e.width;for(let e=0;e<t;e++){const l=s+(2*e/t-1)*h;let o=Math.cos(l),d=Math.sin(l),c=0|a,m=0|i;const r=Math.abs(1/(o||1e-6)),f=Math.abs(1/(d||1e-6));let g,u,w=o<0?-1:1,M=d<0?-1:1,E=(o<0?a-c:c+1-a)*r,S=(d<0?i-m:m+1-i)*f,B=0,p=0,F=0;for(;!B;)E<S?(E+=r,c+=w,p=0):(S+=f,m+=M,p=1),F=n(c,m),0!==F&&(B=1);0===p?(g=(c-a+(1-w)/2)/(o||1e-6),u=i+g*d):(g=(m-i+(1-M)/2)/(d||1e-6),u=a+g*o),u-=Math.floor(u),g=Math.max(1e-4,Math.abs(g)),y(e,g,F,p,u)}}(),requestAnimationFrame(t)},resetPlayer:function(){a=2.5,i=2.5,o=0,d=0,s=0}}}(),window.onload=function(){document.getElementById("introScreen").classList.remove("hidden"),document.getElementById("menu").classList.add("hidden"),document.getElementById("victoryScreen").classList.add("hidden"),document.getElementById("ui").classList.add("hidden"),document.getElementById("view").classList.add("hidden"),document.getElementById("msg").classList.add("hidden"),gameState="intro"}</script>