<!doctype html><meta name=viewport content="width=device-width"><title>Mor Chess 2 - js13kGames 2025</title><style>body,html{margin:0;padding:0;background:#1d2b53;width:100vw;height:100vh}#app,body{display:flex;justify-content:center;align-items:center}#app .content{position:relative;box-shadow:0 0 2px 2px #000;width:min(100vw,calc(100vh * 16/9));aspect-ratio:16/9;cursor:pointer;cursor:none}#app canvas{position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent}</style><div id=app></div><script type=module>function e(e,t){let[n,a,i,l]=e,[o,r,c,s]=t;return n<o+c&&n+i>o&&a<r+s&&a+l>r}let t=new AudioContext;const n=e=>Math.sin(e),a=e=>(e%6.28-3.14)/6.28;async function i(e,n){let a=t.sampleRate,i=t.createBuffer(1,a*e,a),l=i.getChannelData(0),o=i.length;for(let e=0;e<o;e++)l[e]=n(44100*e/a)*(1-e/o)*.4;return await async function(){return new Promise(e=>setTimeout(e,0))}(),i}function l(e){let n=t.createBufferSource();return n.buffer=e,n.connect(t.destination),n.start(),()=>{n.stop()}}async function o(){let e=await i(5,e=>function(e,t=44100){const n=e/t;let a=1800-200*n;const i=3.5-.8*n,l=30*Math.sin(2*Math.PI*i*n);return Math.min(n/.8,1)*Math.exp(2*-n)*(.7+.3*Math.sin(2*Math.PI*8*n))*Math.max(0,1-n/20)*.8*Math.sin(2*Math.PI*(a+l)*n)}(e)),t=await i(15,e=>.1*a(e/44100*2*Math.PI*420*(e=>{return t=1e3*Math.sin(e),Math.max(Math.min(t,1),-1);var t})(e/44100*2*Math.PI*240*e/100)*.1)),l=await i(.2,e=>.5*n(e/44100*2*Math.PI*133*e%1e4<5e3?2:a((e%600<100?1:2.22)*e/44100*2*Math.PI*15)));return{tactic:t,click:await i(.2,e=>(e*=-999)&&1.6*n(e/(100+n(e/220+n(e/440+n(e/222)))-e/400))),ring:l,no_tactics:e}}let r=100;const c=r++,s=r++,u=r++,p=r++,h=r++,f=r++,d=r++,_=r++,g=r++,w=r++,k=r++,m=r++,v=r++,b=r++,M=r++,y=r++,$=r++,C=r++,P=r++,R=r++,S=r++,x=r++,A=r++,F=r++,z=r++,I=r++,q=r++,E=r++,D=r++,L=r++,T=r++,V=r++,O=r++,B=r++,W=r++,H=r++,j=r++,G=r++,X=r++,Y=r++,J=r++,N=r++,U=r++,Z=r++,K=r++,Q=r++,ee=r++,te=r++,ne=r++,ae=r++,ie=r++,le=r++,oe=r++,re=r++,ce=r++,se=r++,ue=r++,pe=r++,he=r++,fe=r++,de=r++,_e=r++,ge=r++,we=r++,ke=r++,me=r++,ve=r++,be=r++,Me=r++,ye=r++,$e=r++,Ce=r++,Pe=r++,Re={p_knight_home:c,p_knight_flank:s,p_knight_natural:u,p_knight_center:p,p_knight_defend_king:h,p_knight_eye_king:f,p_knight_bother:d,p_knight_invade:_,p_knight_outpost:g,p_bishop_home:w,p_bishop_passive:k,p_bishop_active:m,p_bishop_pin:v,p_bishop_fianchetto:b,p_bishop_defend_king:M,p_bishop_eye_king:y,p_bishop_infiltrate:$,p_queen_home:C,p_queen_passive:P,p_queen_active:R,p_queen_centralized:S,p_queen_bishop_battery:x,p_queen_rook_battery:A,p_queen_infiltrate:F,p_queen_eye_king:z,p_rooks_home:I,p_rooks_connected:q,p_rooks_on_open_file:E,p_rooks_lift:D,p_rooks_on_the_7th:L,p_rooks_doubled:T,p_king_home:V,p_king_castled:O,p_king_weakened:B,p_king_exposed:W,p_king_running:H,p_pawn_home:j,p_pawn_center:G,p_pawn_tension:X,p_pawn_space:Y,p_pawn_extend:J,p_pawn_thorn:N,p_pawn_outpost:U,p_pawn_chain:Z,p_pawn_doubled_pawn:K,p_pawn_isolated_pawn:Q,p_pawn_backward_pawn:ee,p_pawn_passed_pawn:te,p_pawn_connected_passed_pawn:ne,p_pawn_advanced_passed_pawn:ae,p_phases_opening:ie,p_phases_middle_game:le,p_phases_endgame:oe,p_king_e_shelter:re,p_king_e_walk:ce,p_king_e_cut_off:se,p_king_e_center:ue,p_king_e_support_pawn:pe,t_trap_piece:he,t_knight_fork:fe,t_double_attack:de,t_skewer:_e,t_discovered_check:ge,t_backrank_mate:we,t_queen_checkmate:ke,t_smothered_mate:me,t_arabian_mate:ve,t_zugzwang:be,t_opposition:Me,t_pawn_grab:ye,t_stalemate:$e,t_lader_mate:Ce,t_promotion:Pe},Se=[[O,[-c,-w]],[x,[k]],[A,[-I]],[ce,[-se]],[g,[U]]],xe={1:[[C,[P,R]],[P,[S,x,A]],[R,[S,F,z]],[S,[]],[F,[]],[z,[]],[x,[]],[A,[]]],3:[[w,[k,v,b]],[k,[m,M]],[m,[k,v,$,y]],[v,[m,y]],[M,[m,k]],[y,[m,k]],[b,[y]],[$,[m,k]]],6:[[V,[O]],[re,[ce]],[ce,[ue]],[ue,[pe]]],5:[[j,[G,Y]],[G,[X,J]],[Y,[X,J]],[X,[J]],[J,[N,U]]],2:[[I,[q,E]],[q,[T,E]],[E,[D,L]],[D,[T,L]]],4:[[c,[s,u]],[s,[p,h,f,d]],[u,[p,h,d]],[p,[]],[h,[p,s]],[f,[p,s]],[d,[p,s,h]],[_,[p,s]],[g,[p,s]]]},Ae=[[[-1,[]],1800],[[he,[[[m],[],[],[3],10],[[v],[],[],[3],15],[[f],[],[],[4],10],[[d],[],[],[4],10],[[_],[],[],[4],20],[[z],[],[],[1],10],[[F],[],[],[1],10]]],25],[[fe,[[[d],[M],[],[3],10],[[d],[y],[],[3],20],[[d],[k],[],[3],5],[[s],[M],[],[3],7],[[s],[y],[],[3],17],[[s],[k],[],[3],7],[[_],[M],[],[3],7],[[_],[y],[],[3],13],[[_],[k],[],[3],17],[[g],[M],[],[3],30],[[g],[y],[],[3],40],[[g],[k],[],[3],20],[[d],[z],[],[1],17],[[d],[P],[],[1],21],[[s],[z],[],[1],13],[[s],[P],[],[1],7],[[_],[z],[],[1],17],[[_],[P],[],[1],13],[[g],[z],[],[1],37],[[g],[P],[],[1],21],[[d],[q],[],[2],13],[[d],[T],[],[2],17],[[d],[D],[],[2],17],[[d],[I],[],[2],11],[[d],[E],[],[2],15],[[d],[L],[],[2],31],[[s],[q],[],[2],10],[[s],[T],[],[2],13],[[s],[D],[],[2],14],[[s],[I],[],[2],18],[[s],[E],[],[2],16],[[s],[L],[],[2],15],[[_],[q],[],[2],21],[[_],[T],[],[2],27],[[_],[D],[],[2],31],[[_],[I],[],[2],21],[[_],[E],[],[2],11],[[_],[L],[],[2],21],[[g],[q],[],[2],31],[[g],[T],[],[2],36],[[g],[D],[],[2],37],[[g],[I],[],[2],39],[[g],[E],[],[2],38],[[g],[L],[],[2],38]]],20],[[_e,[[[m],[],[3],[2],10],[[m],[],[3],[1],10],[[k],[],[3],[2],5],[[k],[],[3],[1],5],[[y],[],[3],[2],30],[[y],[],[3],[1],30],[[b],[],[3],[2],25],[[b],[],[3],[1],25],[[$],[],[3],[2],17],[[$],[],[3],[1],17],[[v],[],[3],[2],18],[[v],[],[3],[1],18]]],15],[[ge,[[[y,f],[],[],[],30],[[y,_],[],[],[],20],[[y,g],[],[],[],50],[[z,f],[],[],[],60],[[z,_],[],[],[],50],[[z,g],[],[],[],70]]],10],[[ke,[[[z,f],[],[],[],30],[[z,y],[],[],[],25],[[z,L],[],[],[],40],[[z,E],[],[],[],35]]],16],[[me,[[[z,f],[],[],[],1]]],13],[[ve,[[[D,f],[],[],[],1],[[L,f],[],[],[],2]]],13],[[we,[[[E],[-I],[],[],1],[[T],[],[],[],5]]],15]],Fe=[[-1,8],[B,3],[W,2],[H,1]],ze=[[-1,8],[G,4],[X,3],[Z,2],[K,1],[Q,1],[ee,1],[te,1]];function Ie(e){let t=e.length;for(;0!=t;){let n=Math.floor(Math.random()*t);t--,[e[t],e[n]]=[e[n],e[t]]}return e}function qe(e,t,n){return{c:n,r:e,p:t,pos:[300*(e-1),400*(1-n)]}}function Ee(e){const t=e.reduce((e,[,t])=>e+t,0),n=Math.random()*t;let a=0;for(const[t,i]of e)if(a+=i,n<=a)return t;return e[e.length-1][0]}function De(e){for(let t of Object.keys(Re))if(Re[t]===e)return t.replace(/t_/,"").replace(/_/g," ").split(" ").map(e=>e[0].toUpperCase()+e.slice(1)).join(" ")}function Le(e){for(let t of Object.keys(Re))if(Re[t]===e)return t.includes("eye_king")?"eye king":t.replace(/p_/,"").replace(/_/g," ").replace(/pawn/,"").replace(/queen/,"").replace(/king/,"").replace(/bishop/,"").replace(/rooks/,"").replace(/knight/,"")}const Te=e=>(e.choices||(e.choices=function(e,t){let n=xe[e.r].find(t=>t[0]===e.p)?.[1];return 0===n?.length?Ie(xe[e.r].map(e=>e[0])).slice(0,3):n?.filter(e=>{let n=Se.find(t=>t[0]===e);if(n){for(let e of n[1])if(e<0){if(t.find(t=>t.p===-e))return!1}else if(!t.find(t=>t.p===e))return!1;return!0}return!0})}(e,Je.cards.filter(t=>t.c===e.c))),e.choices);function Ve(e){let t=e.cards.filter(e=>1===e.c);for(let e=0;e<3;e++){let n=Ie(t)[0],a=Te(n);if(dt.times[0]>.3&&dt.gauge<.2&&Math.random()<.8)return void bt(1e3);if(Oe>3e4&&dt.times[0]>.6&&Math.random()<.8)return void bt(5e3+8e3*Math.random());if(0===e&&Math.random()<.08)return void bt(8e3+8e3*Math.random());if(e>0&&Math.random()<.8)return void bt(5e3+12e3*Math.random());if(void 0!==a&&0!==a.length){Qe.push([n,Ie(a)[0]]),et=1e3;break}if(2===e)return et=1e3,void bt(4e3+15e3*Math.random())}}let Oe,Be,We,He,je,Ge,Xe,Ye,Je,Ne,Ue,Ze,Ke,Qe,et,tt,nt,at,it,lt,ot,rt,ct,st,ut,pt,ht,ft,dt,_t,gt,wt;function kt(){gt=0,_t=0,dt={times:[1,1],gauge:.5,mana:.5},ft=0,ht=0,pt=void 0,wt=()=>{},rt=0,ct=0,st=0,ut=0,lt=!1,it=[],ot=0,at=0,at=6e3,nt=0,Qe=[],et=0,Je={turn:0,cards:[qe(3,w,1),qe(4,c,1),qe(6,V,1),qe(2,I,1),qe(1,C,1),qe(5,j,1),qe(3,w,0),qe(4,c,0),qe(6,V,0),qe(2,I,0),qe(1,C,0),qe(5,j,0)]},Ne=void 0,Ue=-1,Ze=-1,Ke=0,Oe=0,Ye=!0,He=[960,540],je=[960,540,80,40],Ge=void 0,Xe=void 0,Be=1,We=1}function mt(t){if(dt.gauge+=.001*(dt.mana-.5),dt.gauge>1&&(dt.gauge=1),dt.gauge<0&&(dt.gauge=0),gt>0?(gt-=t,gt<=0&&(pt=void 0,Mt())):(dt.times[0]<0&&(gt=5e4),dt.times[1]<0&&(gt=5e4)),dt.times[0]>1&&(dt.times[0]=1),dt.times[1]>1&&(dt.times[1]=1),ft>0&&(ft-=t,ft<=0&&(pt=void 0,Mt())),ht>0&&(ht-=t,ht<=0&&(function(){let e=1===Je.turn?-1:1;dt.gauge+=e*Math.random()*.6,dt.mana+=e*Math.random()*.3,function(e){let t=e.cards.find(t=>t.c!==e.turn&&6===t.r),n=e.cards.find(t=>t.c!==e.turn&&5===t.r),a=Ee(Fe),i=Ee(ze);t.p=-1===a?t.p:a,n.p=-1===i?n.p:i}(Je)}(),pt=void 0,yt())),ct>0){if(ct-=t,ct%100<50){let e=1===Je.turn?0:1;dt.times[e]-=.001}ct<=0&&(l(Yt.no_tactics),st=2e3,wt(),wt=()=>{}),_t-=t,ct<rt-1600&&_t<=0&&(_t=100+300*Math.random(),void 0===pt&&(pt=function(e){let t=e.cards.filter(t=>t.c===e.turn),n=e.cards.filter(t=>t.c!==e.turn),[a,i]=Ee(Ae);if(-1===a)return;if(De(a).includes("ate")){let t=e.cards.find(t=>t.c!==e.turn&&6===t.r),n=e.cards.find(t=>t.c!==e.turn&&5===t.r),a=.5*function(e){return e===O?0:e===B?.3:e===W?.66:e===H?1:.1}(t.p),i=.5*function(e){return{[j]:0,[G]:0,[X]:.2,[Y]:.1,[J]:.3,[N]:0,[U]:0,[Z]:0,[K]:.4,[Q]:.5,[ee]:.3}[e]}(n.p);if(Math.random()>a+i)return}let l=i.filter(e=>e[0].every(e=>t.find(t=>t.p===e))&&e[1].every(e=>n.find(t=>t.p===e))).map(e=>[[e[2],e[3]],e[4]]);if(l=i.map(e=>[[e[2],e[3]],e[4]]),0===l.length)return;let[o,r]=Ee(l);return[a,o,r]}(Je),pt&&(De(pt[0]).includes("ate")?ft=5e4:ht=5e3,vt())))}if(st>0&&(st-=t,st<=0&&1===Je.turn&&Ve(Je)),Oe+=t,ot-=t,Ke>0&&(Ke-=t,Ke<0&&(Ke=0,Ne=void 0,Ze=-1)),et>0&&(et-=t,et<0&&(et=0,Qe.forEach(e=>{e[0].p=e[1]}),Je.cards.forEach(e=>{e.choices=void 0}),Qe=[],yt())),at+=t,1===Je.turn&&nt>0&&(nt-=t,nt<=0&&Ve(Je)),lt=0===Je.turn&&gt<=0&&ft<=0&&ht<=0&&st<=0&&at>5e3&&!Ye&&e(Rt,je),Be=Ge?.3:.6,Xe){if(ft>0&&ft<47e3)return void Mt();if(gt>0&&gt<47e3)return void Mt();if(Ye)return l(Yt.click),Ye=!1,void(at=0);if(void 0!==Ne){let t=Te(Ne);if(void 0!==t)for(let n=0;n<t.length;n++)if(e(At(Ne,n,t.length),je)){l(Yt.click),Ze=n,Ke=200;let e=[Ne,Te(Ne)[Ze]];Qe.push(e),et=800}}lt&&(l(Yt.click),bt())}if(Ye)return;let n=!!Ne&&e([(a=Ne).pos[0]-20,a.pos[1]-360,420,480],je);var a;for(let t of Je.cards)gt>0||ft>0||ht>0||st>0||ct>0||ot>0||et>0||at<=5e3||1===Je.turn?n=!0:1!==t.c&&e(St(t),je)&&(Ne!==t&&l(Yt.ring),Ne=t,ot=100,n=!0);if(n||(Ne=void 0,Ze=-1),Ue=-1,void 0!==Ne){let t=Te(Ne);if(void 0!==t)for(let n=0;n<t.length;n++)e(At(Ne,n,t.length),je)&&(Ue=n)}(je[0]!==He[0]||je[1]!==He[1])&&(Be=.4),We=function(e,t){return e<t?Math.min(e+.001,t):e>t?Math.max(e-.001,t):e}(We,Be);for(let e of Je.cards);0===Je.turn&&Math.random()<.3&&(it.length>8&&it.pop(),it.unshift([2800*Math.random()-500,2e3*Math.random()-400,80+130*Math.random(),Math.random()*Math.PI]))}function vt(){ct=0,wt(),wt=()=>{}}function bt(e=15e3){if(ut+=1,ct>0)return ct=0,st=2e3,wt(),wt=()=>{},void l(Yt.no_tactics);Ne=void 0,Ze=-1,ct=e,rt=e,wt=l(Yt.tactic),_t=0}function Mt(){kt()}function yt(){vt();let e=1===Je.turn?0:1;dt.times[e]+=.016,Je.turn=1===Je.turn?0:1,1===Je.turn&&(nt=1e3+2e3*Math.random(),tt=nt)}function $t(){Xt.clearRect(0,0,1920,1080),Ye?function(){Xt.fillStyle=Wt.gray,Xt.fillRect(0,0,1920,1080),Ct(Wt.lightgray,Wt.gray),Vt(600,0,180,.25*Et);let e=.1*Math.sin(.001*Oe),t=8*Math.sin(.001*Oe),n=4*Math.cos(.002*Oe);qt(300+t,500+n,200,Wt.blue),qt(700+t,500+n,200,Wt.darkred),qt(950+t,750+n,300,Wt.orange),Lt(Bt.king,200+t,400+n,200,{theta:.2+e}),Lt(Bt.bishop,600+t,400+n,200,{theta:.2+e}),Lt(Bt.knight,800+t,600+n,300,{theta:.2+e}),Lt(Bt.pawn,1e3,300,800),Gt(`~[${Wt.purple}]Mor[/] Chess [${Wt.red}]2[/]~`,380,300,180,{bold:!0,gap:-4,outline:18,wave:8}),Gt(`An [${Wt.darkred}]Abstract[/], [${Wt.lightgray}]shapeless[/] Form of Chess`,260,400,80,{bold:!0,shadow:4,wave:4}),Gt(`by [${Wt.blue}]eguneys`,100,800,60,{shadow:2,wave:2}),Gt("click anywhere to begin",100,900,60,{shadow:2,wave:1})}():function(){Ct(Wt.purple,Wt.darkred),function(){Pt(190,dt.times[0]),Gt(`[${Wt.black}]Cat time`,220,180,48,{bold:!0,outline:4}),Pt(590,dt.times[1]),Gt("You time",220,580,48,{bold:!0,outline:6});let e=.2*(dt.mana-.5);Xt.save(),Xt.translate(960,0),Xt.rotate(e+.01*Math.sin(.01*Oe)+.005*Math.sin(.03*Oe)),Xt.translate(-960,0),zt(0,396,1920,40,Wt.sand),zt(0,400,960,32,Wt.black),zt(960,400,960,32,Wt.white),function(e,t){t=1920*t-60;let n=200/300;Xt.save(),Xt.translate(t,340),Xt.scale(n,n),Xt.lineWidth=10,Xt.strokeStyle=Wt.black,Xt.stroke(Bt.yarn);for(let e=0;e<4;e++)Xt.translate(100,100),Xt.rotate(1.6*e),Xt.translate(-100,-100),Xt.stroke(Bt.yarn);Xt.restore()}(0,dt.gauge),Gt("evaluation",960,380,30,{bold:!0,shadow:2}),Xt.restore()}(),1===Je.turn&&function(){for(let e=0;e<it.length;e++)Vt(...it[e],2e3*(1-nt/tt),Wt.pink)}();for(let e of Je.cards)xt(e,ct>0);at<5e3?function(){let e=8*Math.sin(.002*Oe);at<2e3?Gt(`[${Wt.yellow}]3[/] [${Wt.red}]2[/] [${Wt.green}]1[/]...`,712-e,1e3,140,{gap:4+2*Math.sin(.002*Oe),outline:6,wave:6}):Gt(`Let's play [${Wt.blue}]chess!`,312-e,1e3,140,{gap:4+2*Math.sin(.002*Oe),outline:6,wave:6})}():gt>0?function(){Gt(`Out of [${Wt.yellow}]time[/]!`,200,880,110,{outline:8,wave:1});let e=1===Je.turn?"Player":`[${Wt.black}]Black Cat`;Gt("Game Over",100,500,300,{gap:20,outline:30+3*Math.sin(.01*Oe),wave:1}),Gt(`${e} [${Wt.blue}]wins[/].`,500,700,100,{gap:20,outline:10,wave:1}),gt<47e3&&Gt(`[${Wt.yellow}]Click[/] anywhere to [${Wt.green}]restart[/].`,100,1e3,60,{shadow:3,wave:2})}():ft>0?function(){let e=De(pt[0]);Gt(`A${"A"===e[0]?"n":""} [${Wt.purple}]${e}[/] found!`,200,880,110,{outline:8,wave:1});let t=0===Je.turn?"Player":`[${Wt.black}]Black Cat`;Gt("Game Over",100,500,300,{gap:20,outline:30+3*Math.sin(.01*Oe),wave:1}),Gt(`${t} [${Wt.blue}]wins[/].`,500,700,100,{gap:20,outline:10,wave:1}),ft<47e3&&Gt(`[${Wt.yellow}]Click[/] anywhere to [${Wt.green}]restart[/].`,100,1e3,60,{shadow:3,wave:2})}():ht>0?function(){let e=De(pt[0]);Gt(`A${"A"===e[0]?"n":""} [${Wt.purple}]${e}[/] found!`,200,880,110,{outline:8,wave:1}),Gt(`[${Wt.yellow}]~[/] Going down that line now. [${Wt.yellow}]~[/]`,500,980,80,{outline:8,wave:8})}():st>0?(Gt("No tactics found :|",500,880,110,{outline:8,wave:1}),Gt("In Chess, 80% of the tactics don't work!",300,980,60,{shadow:3})):ct>0?1===Je.turn?function(){let e=Oe%1e3<200?".  ":Oe%1e3<500?".. ":"...";Gt(`[${Wt.black}]Cat[/] is searching for [${Wt.purple}]tactics[/]${e}`,240,800,110,{outline:8,wave:8})}():function(){let e=Oe%1e3<200?".  ":Oe%1e3<500?".. ":"...";Gt(`[${Wt.yellow}]Hold on[/] Searching for [${Wt.purple}]tactics[/]${e}`,240,800,110,{outline:8,wave:8}),ut%4==0?Gt(`More [${Wt.yellow}]time[/], higher [${Wt.orange}]chances[/], but watch your [${Wt.yellow}]time`,100,900,80,{outline:6,wave:1}):ut%4==1?Gt(`An [${Wt.darkred}]exposed king[/] and [${Wt.darkred}]pawn weaknesses[/], increases your [${Wt.orange}]chances[/] to [${Wt.sand}]fall for tactics[/].`,60,900,50,{outline:6,wave:1}):ut%4==2?Gt(`A better [${Wt.yellow}]evaluation[/] increases your chances to find [${Wt.green}]checkmates[/].`,60,900,50,{outline:6,wave:1}):Gt(`[${Wt.green}]Activating[/] your pieces increases your [${Wt.orange}]chances[/] to [${Wt.pink}]find good tactics[/].`,100,900,60,{outline:6,wave:1}),Gt(`don't get [${Wt.red}]flagged`,100,1e3,60,{outline:6,wave:2}),zt(1322,932,560,136,Wt.black),zt(1330,940,544,120,lt?Wt.green:Wt.pink),Gt(`[${lt?Wt.black:Wt.white}]Stop Search[/]`,1400,1026,70,{gap:2,outline:6})}():0===Je.turn?function(){let e=8*Math.sin(.002*Oe);Gt(`[${Wt.yellow}]Select a[/] [${Wt.white}]piece action[/] [${Wt.yellow}]to play[/]`,112+e,800,110,{gap:12,outline:12,wave:2}),Gt("Your Turn",512-e,1e3,140,{gap:12+.5*e,outline:8,wave:1}),Gt("or",1550,910,80,{outline:8}),zt(1322,932,560,136,Wt.black),zt(1330,940,544,120,lt?Wt.green:Wt.pink),Gt(`[${lt?Wt.black:Wt.white}]Search[/] [${Wt.purple}]Tactics`,1360,1026,70,{gap:2,outline:6})}():function(){let e=8*Math.sin(.002*Oe);Gt(`[${Wt.black}]Cat[/]'[${Wt.black}]s[/] Turn`,512-e,1e3,140,{gap:12,outline:6,wave:6})}()}();let e=8*Math.sin(.001*Oe),t=4*Math.cos(.002*Oe);qt(je[0]+45+e,je[1]+45+t,void 0===Ge?70:67,void 0===Ge?Wt.white:Wt.yellow,We),function(e,t,n=80){let a=n/266;Xt.save(),Xt.translate(e,t),Xt.scale(a,a),Xt.fillStyle=Wt.blue,Xt.fill(Bt.cursor),Xt.strokeStyle="white",Xt.lineWidth=9,Xt.stroke(Bt.cursor),Xt.restore()}(je[0],je[1])}function Ct(e,t){Xt.fillStyle=e,Xt.fillRect(0,0,1920,1080),Xt.fillStyle=t,Xt.fillRect(0,0,1e3,1e3),Xt.fillRect(1e3,10,200,200),Xt.fillRect(880,450,200,200),Xt.fillRect(940,850,200,200),Xt.fillRect(1280,50,200,200),Xt.fillRect(1100,270,200,200),Xt.fillRect(1180,720,200,200),Xt.fillRect(1580,320,200,200),Xt.fillRect(1400,550,200,200),Xt.fillRect(1600,850,200,200),Xt.fillStyle=e,Xt.fillRect(50,0,200,200),Xt.fillRect(450,0,200,200),Xt.fillRect(850,0,200,200),Xt.fillRect(-150,200,200,200),Xt.fillRect(250,200,200,200),Xt.fillRect(650,200,200,200),Xt.fillRect(50,400,200,200),Xt.fillRect(450,400,200,200),Xt.fillRect(850,400,200,200),Xt.fillRect(-150,600,200,200),Xt.fillRect(250,600,200,200),Xt.fillRect(650,600,200,200),Xt.fillRect(50,800,200,200),Xt.fillRect(450,800,200,200),Xt.fillRect(850,800,200,200)}function Pt(e,t){zt(0,e,1920,80,Wt.black),zt(0,e+8,1920,64,Wt.red),zt(0,e+8,1920*t,64,Wt.yellow)}const Rt=[1322,932,544,120];function St(e){return[e.pos[0],e.pos[1],280,280]}function xt(e,t){let n=Ne===e,a=0===e.c?Wt.white:Wt.black,[i,l]=e.pos;i+=100,l+=100,n&&qt(i+30,l+100,230,jt[e.r]);let o=t?4:1,r=i+8*Math.sin(.002*Oe*o-.4*e.r+e.c*Math.PI*1),c=l+8*Math.cos(.002*Oe*o-.2*e.r+e.c*Math.PI*1);Lt(Ht[e.r],r,c,180,{color:a});let s=Qe.find(t=>t[0]===e);if(s){let e=Le(s[1]).length>7?i-80:i,t=et%350<200?Wt.white:Wt.purple;Gt(`[${t}]${Le(s[1])}[/]`,e,l,t===Wt.white?50:60,{shadow:4})}else{let t=Le(e.p).length>8?i-80:i;Gt(Le(e.p),t,l,50,{shadow:4})}if(n){!function(e,t,n,a){Xt.save(),Xt.beginPath(),Xt.ellipse(e,t,400,200,0,0,Dt),Xt.clip(),Xt.globalCompositeOperation="source-in",Xt.fillStyle=a,Xt.fillRect(0,0,1920,1080),Xt.restore(),Xt.globalCompositeOperation="source-over"}(i+100,l-300,0,Wt.darkred),l-=60,It(i+100,l-200,205,Wt.black),It(i+100,l-200,200,Wt.purple),Gt(`[${Wt.green}]select[/] an action`,i-55,l-380,42,{gap:4,outline:8,wave:3});let t=Te(e);if(void 0===t||0===t.length)Ft("no action available",i+102,l-200,40,!1);else{let n=t.map(e=>Le(e));for(let t=0;t<n.length;t++){if(Xt.save(),Ze===t&&Ke>0){let e=Math.max(1,1+.02*Ke/200);Xt.scale(e,e)}let[a,i,l,o]=At(e,t,n.length);zt(a,i,l,o,Wt.black),zt(a+4,i+4,l-8,o-8,Ue===t?Wt.green:Wt.pink),Ft(n[t],a+180,i+60,40,Ue===t),Xt.restore()}}}}function At(e,t,n){let[a,i]=e.pos;return a+=100,i+=100,i-=60,[a+90-180,i-60-(n<=2?250:290)+t*(n>=3?100:120),380,90]}function Ft(e,t,n,a,i){Xt.textAlign="center",Xt.font=`${a}px arial`,Xt.strokeStyle=i?Wt.white:Wt.black,Xt.lineWidth=5,Xt.font=`${a}px arial`,Xt.strokeText(e,t,n),Xt.fillStyle=i?Wt.black:Wt.white,Xt.fillText(e,t,n)}function zt(e,t,n,a,i){Xt.fillStyle=i,Xt.fillRect(e,t,n,a)}function It(e,t,n,a){Xt.fillStyle=a??Wt.black,Xt.beginPath(),Xt.arc(e,t,n,0,Dt),Xt.fill()}function qt(e,t,n,a,i=1){Xt.save(),Xt.beginPath(),Xt.arc(e,t,n,0,2*Math.PI),Xt.closePath(),Xt.clip(),Xt.fillStyle=a;let l=.2*n,o=Oe%(1e3*l)*.02*i%l;for(let a=-100;a<200;a++)for(let i=-100;i<200;i++){let r=a*l,c=i*l;r-=o,c-=o;let s=Math.sqrt((r-e)**2+(c-t)**2)/n,u=.5*l*Math.pow(1-s,1.8);u=Math.max(1,3*u),r+=2*u,1!==u&&(Xt.beginPath(),Xt.arc(r-u/2,c-u/2,u,0,Dt),Xt.fill())}Xt.restore()}const Et=Math.PI,Dt=2*Et;function Lt(e,t,n,a,i={}){let l=a/50;Xt.fillStyle=i.color??Wt.black,Xt.save(),Xt.translate(t,n),i.theta&&(Xt.translate(a/2,a/2),Xt.rotate(i.theta),Xt.translate(-a/2,-a/2)),Xt.scale(l,l),Xt.fill(e),Xt.strokeStyle=i.color===Wt.white?Wt.black:Wt.white,Xt.lineWidth=1,Xt.stroke(e),Xt.restore()}let Tt=[];for(let e=0;e<6;e++)Tt.push(Math.random());function Vt(e,t,n=280,a=0,i=Oe,l){Xt.save(),Xt.translate(e,t),Xt.rotate(a);let o=i%6e3/6e3*48;for(let e=0;e<6;e++)o<2*e||(Ot(-160-80*Tt[e],200-180*(e-2)+80*Tt[e],n,{color:l}),o-1<2*e||Ot(0+80*Tt[e],200-180*(e-2-.5),n,{color:l}));Xt.restore()}function Ot(e,t,n=280,a={}){let i=n/512;if(Xt.save(),Xt.translate(e,t),Xt.scale(i,i),a.theta){let e=n/1.6;Xt.translate(e,e),Xt.rotate(a.theta),Xt.translate(-e,-e)}Xt.fillStyle=a.color??Wt.black,Xt.fill(Bt.paw),Xt.beginPath(),Xt.ellipse(158,250,34,26,.3*Et,0,Dt),Xt.fill(),Xt.beginPath(),Xt.ellipse(216,190,38,29,.43*Et,0,Dt),Xt.fill(),Xt.beginPath(),Xt.ellipse(296,190,38,29,.43*-Et,0,Dt),Xt.fill(),Xt.beginPath(),Xt.ellipse(358,240,34,26,.3*-Et,0,Dt),Xt.fill(),Xt.fill(),Xt.strokeStyle=a.color===Wt.black?Wt.white:Wt.black,Xt.lineWidth=9,Xt.stroke(Bt.paw),Xt.beginPath(),Xt.ellipse(158,250,34,26,.3*Et,0,Dt),Xt.stroke(),Xt.beginPath(),Xt.ellipse(216,190,38,29,.43*Et,0,Dt),Xt.stroke(),Xt.beginPath(),Xt.ellipse(296,190,38,29,.43*-Et,0,Dt),Xt.stroke(),Xt.beginPath(),Xt.ellipse(358,240,34,26,.3*-Et,0,Dt),Xt.stroke(),Xt.restore()}let Bt={yarn:new Path2D("M150,150\nC130,120 100,130 90,160\nC80,190 110,210 140,200\nC170,190 180,160 160,140\nC140,120 110,110 100,130\nC90,150 120,170 150,160\nC180,150 190,120 170,100\nC150,80 120,90 110,120\nC100,150 130,180 160,170\nC190,160 200,130 180,110\nC160,90 130,100 120,130\nC110,160 140,190 170,180\nC200,170 210,140 190,120\nC170,100 140,110 130,140"),paw:new Path2D("M 324.5,282.26\nc -11.49-19.8-36.22-33.5-64.9-33.5\ns -53.41,13.7-64.9,33.5\nc -20.53,9.58-33.5,23.62-33.5,39.28,0,28.87,44.05,52.27,98.4,52.27\ns 98.4-23.4,98.4-52.27\nc 0-15.66-12.97-29.7-33.5-39.28\nZ"),cursor:new Path2D("m 150.036,266.494\nc -0.264,0 -0.517,-0.006 -0.792,-0.018 -6.102,-0.337 -11.332,-4.474 -13.046,-10.347\nL 110.131,167.102 14.928,148.235\nC 8.914,147.041 4.314,142.176 3.452,136.112 2.594,130.05 5.653,124.096 11.102,121.28\nL 242.143,1.617\nc 5.357,-2.792 11.914,-1.907 16.375,2.183 4.474,4.101 5.885,10.55 3.562,16.146\nl -98.743,237.655\nc -2.24,5.417 -7.501,8.893 -13.301,8.893\nz"),pawn:new Path2D("M 25,46.448\nH 11.606\nc -0.658745,-1.599443 -0.99518,-3.313221 -0.99,-5.043 0,-2.975 0.863,-5.644 2.598,-8.018 1.736,-2.365 3.971,-4.054 6.697,-5.067 -1.158016,-0.517874 -2.148758,-1.348283 -2.861,-2.398 -0.737,-1.071 -1.1,-2.283 -1.1,-3.634 0,-1.69 0.575,-3.156 1.735,-4.392 1.151,-1.244 2.574,-1.961 4.267,-2.15 -1.346,-0.981 -2.015,-2.283 -2.015,-3.89 0,-1.351 0.491,-2.513 1.482,-3.477 0.982,-0.964 2.176,-1.442 3.581,-1.442 1.389,0 0,39.511 0,39.511\nz"),queen:new Path2D("m 24.95,10.752\nc -0.94,0 -1.745,-0.33 -2.397,-0.99 -0.652,-0.66 -0.974,-1.465 -0.974,-2.405 0,-0.931 0.322,-1.727 0.974,-2.387 0.652,-0.66 1.456,-0.99 2.396,-0.99 4.457047,0 4.4506,6.772 0,6.772\nz\n\nM 25,46.448\nc -3.75,0 -7.053,-0.254 -9.898,-0.745 -2.844,-0.5 -4.64,-1.118 -5.384,-1.863\nL 11.284,37.888 10.59,33.993 8.405,30.2 6.297,14.774 7.507,14.3\nl 6.8,11.455 0.152,-13.64 1.685,-0.296 5.182,13.716 2.776,-14.757\nh 1.72\nc 0,0 2.861,35.67 -0.822,35.67\nz\n\nM 14.535,11.989\nc -0.948,0 -1.752,-0.322 -2.413,-0.974 -0.66,-0.652 -0.99,-1.456 -0.99,-2.396 0,-0.923 0.33,-1.719 0.99,-2.38 0.66,-0.661 1.465,-0.99 2.413,-0.99 0.923,0 1.719,0.33 2.38,0.99 0.661,0.66 0.99,1.457 0.99,2.38 0,0.94 -0.33,1.744 -0.99,2.396 -0.626755,0.636476 -1.486852,0.988465 -2.38,0.974\nz\n\nM 5.4,14.723\nc -0.94,0 -1.736,-0.33 -2.388,-0.982\nC 2.36,13.089 2.03,12.293 2.03,11.345 2.03,10.422 2.36,9.626 3.012,8.957 3.664,8.28 4.46,7.95 5.4,7.95\nc 0.948,0 1.744,0.33 2.413,1.007 0.66,0.67 0.99,1.465 0.99,2.388 0,0.948 -0.33,1.744 -0.99,2.396 -0.6371462,0.642122 -1.508534,0.996744 -2.413,0.982\nz"),rook:new Path2D("M 28.408,9.22 28.360227,46.509958 8.071,46.448\nV 40.52\nh 3.793\nv -5.08\nl 4.242,-4.216\nV 19.363\nL 10.602,15.121\nV 5.825\nh 6.774\nV 9.22\nh 4.242\nV 5.825\nh 6.79\nz"),knight:new Path2D("m 26.178,9.395\nc 3.717522,17.931492 -1.084802,22.136622 -1.084802,36.749211\nL 15.468,46.454\nc -0.152921,0.0049 -0.22,-0.407 -0.212,-1.21 0.009,-0.814 0.06,-1.466 0.16,-1.965 0.06,-0.398 0.221,-0.957 0.467,-1.685 0.254,-0.728 0.66,-1.609 1.244,-2.65 0.263,-0.534 0.89,-1.304 1.88,-2.32 0.999,-1.016 2.133,-2.201 3.429,-3.539 0.745,-0.762 1.32,-1.719 1.744,-2.879 0.423,-1.151 0.601,-2.201 0.533,-3.15 -0.608025,0.498896 -1.283334,0.909602 -2.006,1.22 -3.505,1.253 -6.045,3.073 -7.612,5.452 -0.118,0.153 -0.49,0.822 -1.117,2.015 -0.33,0.627 -0.618,1.059 -0.847,1.287 -0.313,0.314 -0.77,0.491 -1.363,0.525 -0.923,0.043 -1.643,-0.398 -2.16,-1.346\nC 8.915,36.412 8.296,36.497 7.746,36.463 6.823,36.116 6.154,35.743 5.74,35.346 4.893,34.499 4.351,33.661 4.089,32.814 3.8293557,31.928859 3.7009886,31.01041 3.708,30.088\nc 0,-1.389 0.855,-3.226 2.582,-5.512 2.015,-2.625 3.09,-4.631 3.217,-6.003 0,-0.593 0.06,-1.261 0.178,-2.007 0.107744,-0.531947 0.317618,-1.037953 0.618,-1.49 0.22,-0.33 0.364,-0.558 0.432,-0.677 0.076,-0.127 0.212,-0.313 0.415,-0.559 0.144,-0.203 0.27,-0.355 0.372,-0.457 0.093,-0.11 0.22,-0.254 0.373,-0.44 0.178,-0.212 0.406,-0.457 0.694,-0.745 -0.876289,-2.3839704 -1.23987,-4.9259689 -1.067,-7.46 3.285,1.169 6.054,3.015 8.28,5.53 0.551,-1.872 1.626,-3.387 3.226,-4.539 1.321,0.923 2.371,2.15 3.15,3.666\nz"),bishop:new Path2D("m 21.939789,10.038494\nc 0,-0.9319996 0.322,-1.7199996 0.974,-2.3879996 0.652,-0.66 1.456,-0.99 2.396,-0.99 0.923,0 1.719,0.33 2.38,0.99 0.66,0.669 0.99,1.456 0.99,2.3879996 0,1.354 -0.61,2.353 -1.83,2.997 0.893481,1.058851 1.867735,2.046813 2.914,2.955 1.00122,0.853917 2.031844,1.672746 3.09,2.455 1.236,0.94 2.083,2.015 2.523,3.209 0.449,1.202 0.694,2.294 0.72,3.285 0,0.567 -0.051,1.202 -0.17,1.913 -0.119,0.711 -0.38,1.448 -0.796,2.21 -0.327332,0.590922 -0.750791,1.123203 -1.253,1.575 -0.5,0.457 -1.388,1.05 -2.667,1.795\nl 2.583,6.4\nc -0.729,0.263 -1.55,0.517 -2.456,0.754 -0.914,0.246 -1.786,0.415 -2.633,0.508 0.381,0.517 0.77,0.906 1.168,1.169 0.398,0.262 0.695,0.448 0.898,0.55 0.347,0.195 1.016,0.296 2.007,0.296 0.896656,-0.134633 1.794001,-0.264635 2.692,-0.39 0.908227,-0.119978 1.814357,-0.255331 2.718,-0.406 0.44,0.051 0.889,0.068 1.346,0.051 0.468462,-0.01644 0.937467,-0.0078 1.405,0.026 1.063053,0.100956 2.101902,0.378073 3.074,0.82 0.296,0.145 0.567,0.289 0.804,0.416 0.246,0.135 0.508,0.364 0.804,0.694\nl -2.43,3.945\nc -0.296,-0.296 -0.71,-0.524 -1.253,-0.677 -0.533,-0.16 -0.965,-0.237 -1.295,-0.237 -0.22,0 -0.44,-0.017 -0.66,-0.05 -0.250179,-0.03407 -0.503821,-0.03407 -0.754,0\nl -6.95,0.964\nc -0.992,0.153 -1.914,0.085 -2.761,-0.194 -0.855,-0.28 -1.558,-0.652 -2.1,-1.118 -3.100162,-9.58848 -5.478,-34.544 -5.478,-35.915\nz"),king:new Path2D("m 25.821,12.022\nh -1.76\nV 8.772\nH 21.994\nC 21.436,8.772 21.156,8.5 21.156,7.95\nV 7.925\nc 0,-0.542 0.28,-0.813 0.838,-0.813\nH 24.06\nV 5.004\nc 0,-0.585 0.297,-0.872 0.89,-0.872 0.575,0 0.871,0.287 0.871,0.872\nv 2.108\nh 2.134\nc 0.542,0 0.813,0.27 0.813,0.813\nV 7.95\nc 0,0.55 -0.271,0.821 -0.813,0.821\nl -2.117,0.026\nz\n\nm -4.183,1.457\nc 0.914,-0.906 2.023,-1.372 3.31,-1.389 1.287,0 2.388,0.466 3.302,1.38 0.906,0.915 1.363,2.015 1.363,3.285 0,0.263 -0.034,0.61 -0.101,1.042 0.228,-0.144 0.457,-0.271 0.669,-0.373 0.762,-0.33 1.76,-0.72 3.005,-1.16 1.423,-0.482 2.701,-0.753 3.844,-0.821 2.921,-0.136 5.241,0.753 6.943,2.65 1.668,1.888 2.447,3.785 2.328,5.681 -0.127,1.973 -0.703,3.65 -1.71,5.038 -0.33,0.449 -0.703,0.863 -1.118,1.253 -0.539774,0.506071 -1.093315,0.997256 -1.66,1.473 -0.541,0.466 -1.007,0.796 -1.388,0.982 -0.38,0.186 -0.6,0.347 -0.669,0.457 -0.01253,0.02813 -0.0294,0.05411 -0.05,0.077 -0.017,0.017 -0.026,0.034 -0.026,0.05\nl -0.796,4.666 1.643,6.121\nc -0.83,0.745 -2.684,1.355 -5.554,1.837 -2.879,0.483 -6.206,0.72 -9.974,0.72 -3.835,0 -4.284,-32.055 -3.361,-32.969\nz")};const Wt={black:"#000000",darkred:"#7E2553",brown:"#AB5236",gray:"#5F574F",lightgray:"#C2C3C7",white:"#FFF1E8",red:"#FF004D",orange:"#FFA300",yellow:"#FFEC27",green:"#00E436",blue:"#29ADFF",purple:"#83769C",pink:"#FF77A8",sand:"#FFCCAA"},Ht={3:Bt.bishop,1:Bt.queen,2:Bt.rook,4:Bt.knight,6:Bt.king,5:Bt.pawn},jt={3:Wt.blue,1:Wt.yellow,2:Wt.brown,4:Wt.orange,6:Wt.red,5:Wt.sand};function Gt(e,t,n,a,i={}){Xt.textAlign="left";let l=i.bold?"bold ":"";const o=t=>Math.sin(.01*Oe+t*Math.PI*2*.2*e.length/50)*(i.wave??0);let r;Xt.font=`${l}${a}px arial`;let c=i.gap??0;for(let a=0;a<e.length;a++){if("["===e[a]){let t="";for(;"]"!==e[a];)a++,"]"!==e[a]&&(t+=e[a]);a++,r=r?void 0:t}if(void 0===e[a])break;i.outline&&(Xt.lineJoin="round",Xt.lineWidth=i.outline,Xt.strokeStyle=r===Wt.black?Wt.white:Wt.black,Xt.strokeText(e[a],t,n+o(a))),i.shadow&&(Xt.fillStyle=Wt.black,Xt.fillText(e[a],t-i.shadow,n+i.shadow+o(a))),Xt.fillStyle=r||Wt.white,Xt.fillText(e[a],t,n+o(a)),t+=Xt.measureText(e[a]).width+c}}let Xt,Yt;!async function(e){let t=function(){let e=document.createElement("canvas");return e.width=1920,e.height=1080,Xt=e.getContext("2d"),e}(),n=document.createElement("content");n.classList.add("content"),n.appendChild(t),e.appendChild(n),Yt=await o(),kt(),function(e,t){const n=e=>{let[t,n]=(e=>{if(e.clientX||0===e.clientX)return[e.clientX,e.clientY]})(e)??[0,0];return[(t-a.left)/a.width,(n-a.top)/a.height]};let a,i=e.getContext("2d");function l(){a=e.getBoundingClientRect(),i.imageSmoothingEnabled=!1}function o(){l()}l(),e.addEventListener("pointerdown",function(a){e.setPointerCapture(a.pointerId);let i=n(a);t.on_down(i)},{passive:!1}),e.addEventListener("pointermove",function(e){let a=n(e);t.on_move(a)},{passive:!1}),document.addEventListener("pointerup",function(e){let a=n(e);t.on_up(a)}),new ResizeObserver(l).observe(e),document.addEventListener("scroll",o,{capture:!0,passive:!0}),window.addEventListener("resize",o,{passive:!0})}(t,{on_up:function(e){Ge=void 0,Xe=e},on_down:function(e){Ge=e},on_move:function(e){je[0]=1920*e[0],je[1]=1080*e[1]}}),function(e,t){const n=1e3/60;let a=performance.now(),i=0;requestAnimationFrame(function l(o){requestAnimationFrame(l);let r=Math.min(o-a,250);for(a=o,i+=r;i>=n;)e(n),i-=n;t(i/n),Xe=void 0,He=[je[0],je[1]]})}(mt,$t)}(document.getElementById("app"))</script>