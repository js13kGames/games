<!doctype html><title>GalacticDiamond</title><script src=/2017/webxr/aframe.js></script><script>!function(e){function t(n){if(o[n])return o[n].exports;var r=o[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var o={};t.m=e,t.c=o,t.p="",t(0)}([function(e,t){var o=(0,AFRAME.utils.debug)("aframe-text-component:error"),n=new THREE.FontLoader;AFRAME.registerComponent("text-geometry",{schema:{bevelEnabled:{default:!1},bevelSize:{default:8,min:0},bevelThickness:{default:12,min:0},curveSegments:{default:12,min:0},font:{type:"asset",default:""},height:{default:.05,min:0},size:{default:.5,min:0},style:{default:"normal",oneOf:["normal","italics"]},weight:{default:"normal",oneOf:["normal","bold"]},value:{default:""}},update:function(e){var t=this.data,r=this.el.getOrCreateObject3D("mesh",THREE.Mesh);t.font.constructor===String?n.load(t.font,(function(e){var o=AFRAME.utils.clone(t);o.font=e,r.geometry=new THREE.TextGeometry(t.value,o)})):t.font.constructor===Object?r.geometry=new THREE.TextGeometry(t.value,t):o("Must provide `font` (typeface.json) or `fontPath` (string) to text component.")}})}])</script><script>AFRAME.registerComponent("scale-on-mouseenter",{schema:{to:{default:"2.5 2.5 2.5"}},init:function(){var t=this.data;this.el.addEventListener("mouseenter",(function(){this.setAttribute("scale",t.to)}))}}),AFRAME.registerComponent("scale-on-mouseleave",{schema:{to:{default:"1 1 1"}},init:function(){var t=this.data;this.el.addEventListener("mouseleave",(function(){this.setAttribute("scale",t.to)}))}}),AFRAME.registerComponent("follow",{schema:{speed:{default:"2"}},tick:function(t,e){var i=this.el.getAttribute("position"),s=i.x,o=i.y,n=i.z-.1;this.el.setAttribute("position",{x:s,y:o,z:n}),this.data.speed+=50}}),AFRAME.registerComponent("rotate",{schema:{speed:{default:"2"}},tick:function(t,e){var i=this.el.getAttribute("rotation"),s=i.x,o=i.y+1,n=i.z;this.el.setAttribute("rotation",{x:s,y:o,z:n})}})</script><body><a-scene><a-sky color="rgb(0, 0, 5)" id=mySky></a-sky><a-entity id=gameScene visible startgame><a-entity id=gameCamera position="0 3 10"><a-entity camera=active:true look-controls wasd-controls><a-entity id=score position="0 -15 -20" material=opacity:0;color:#a49a1e scale="5.021 4.475 1" geometry=primitive:plane text=value:;color:#018b88;align:center;height:25;varterSpacing:3;width:7></a-entity><a-entity position="0 0 -1" material="color:#708e8a; opacity:0.8; shader: flat" scale="1.4 1.4 1.4" geometry="primitive: ring; radiusOuter: 0.016; radiusInner: 0.01;" cursor="fuse:true; fuseTimeout: 1500"><a-animation attribute=scale dur=1700 to="0.5 0.5 0.5" from="1.4 1.4 1.4" begin=fusing easing=ease-in fill=backwards></a-animation></a-entity></a-entity></a-entity><a-entity id=portal position="0 0 -200" material=metalness:1;color:#207d68 scale="9.715 8.691 6.896" geometry=radiusTubular:0.1;primitive:torus><a-animation attribute=scale dur=4000 to="45 45 30" direction=alternate repeat=indefinite from="55 55 55"></a-animation></a-entity><a-entity id=display3dscore position="-19.352 56.702 -259.164" material=color:#796c33 scale="51.124 36.625 108.154" text-geometry="value: ; font:3dfont.json"></a-entity><a-entity id=display3dlvl position="-19.352 56.702 -259.164" material=color:#796c33 scale="51.124 36.625 108.154" text-geometry="value: ; font:3dfont.json"></a-entity><a-entity id=display3dtime position="-19.352 56.702 -259.164" material=color:#796c33 scale="51.124 36.625 108.154" text-geometry="value: ; font:3dfont.json"></a-entity></a-entity><a-entity id=start-menu visible><a-entity position="-0.186 7.075 -10.364" material=metalness:1;color:#207d68 scale="9.715 8.691 6.896" geometry=radiusTubular:0.1;primitive:torus><a-animation attribute=scale dur=4000 to="9 8 6" direction=alternate repeat=indefinite></a-animation></a-entity><a-entity id=start-button position="0.009 7.32 -7.976" material=color:#a49a1e scale="2.939 3.228 1" geometry=primitive:plane text=align:center;color:#b9ffef;height:25;varterSpacing:3;value:play;width:7></a-entity><a-box color=#c20752 metalness=0.5 position="-0.078 7.15 -10.716" rotation="0 -88.35 0" scale="4.994630333716146 5.986066272657369 1.028886577951257"><a-animation attribute=scale dur=4000 to="5 6 6" direction=alternate repeat=indefinite></a-animation></a-box><a-entity id=restart-info position="0.079 -1.926 -4.331" material=transparent:true;visible:false scale="11.686 3.228 1" geometry=primitive:plane text="align:center;color:#b9ffef;height:25;varterSpacing:3;value: ;width:7"></a-entity></a-entity><script>!function(t){function e(o){if(r[o])return r[o].exports;var i=r[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};e.m=t,e.c=r,e.d=function(t,r,o){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e){var r=document.getElementById("gameCamera"),o=document.getElementById("gameScene"),i=document.getElementById("portal"),a=document.createElement("a-octahedron"),s=["rgb(238, 244, 66)","rgb(32, 125, 104)","rgb(89, 24, 46)"],n=[],l=[],u=[],c=0,b=0,m=0,d=0,A=!1,p=0,v=document.getElementById("display3dscore"),y=document.getElementById("display3dlvl"),f=document.getElementById("display3dtime"),g=document.getElementById("restart-info"),x=t=>{for(var e=t,i=0,m=0,d=0;d<e;d++){var y,f=document.createElement("a-sphere"),g=document.createElement("a-sphere");u.push(g),l.push(f);var x=100*Math.cos(i),h=100*Math.sin(i),E=-67.131+m,I=s[d%3];g.setAttribute("position",{x:1.5*x,y:1.5*h,z:E}),g.setAttribute("material","metalness","0.1"),g.setAttribute("follow",""),o.appendChild(g),f.setAttribute("id","platform"+d),f.setAttribute("position",{x:x,y:h,z:E}),f.setAttribute("scale",{x:23.122,y:4.125,z:14.093}),f.setAttribute("scale-on-mouseenter","to:30 5 20"),f.setAttribute("scale-on-mouseleave","to:23.122, 4.125, 14.093"),f.setAttribute("material","color",I),f.setAttribute("material","metalness","0.5"),o.appendChild(f),d%10!=0&&d%15!=0||(b++,y=document.createElement("a-octahedron"),console.log(n),n.push(y),y.setAttribute("id","platform"+d),y.setAttribute("position",{x:x-8,y:h+10,z:E}),y.setAttribute("scale",{x:2,y:5,z:2}),y.setAttribute("material","color","#38e4be"),y.setAttribute("scale-on-mouseenter","to:3 6 3"),y.setAttribute("scale-on-mouseleave","to:2, 5, 2"),y.setAttribute("rotate",""),y.addEventListener("click",(function(t){A&&(c++,v.setAttribute("text-geometry","value",c+"/"+b),o.removeChild(this),n.splice(n.indexOf(this),1),console.log(c),c==b&&a.setAttribute("material","color",s[0]))})),o.appendChild(y)),f.addEventListener("click",(function(t){if(A){var e=this.getAttribute("position");r.setAttribute("position",{x:e.x,y:e.y+15,z:e.z})}})),i+=20,m+=-10,d==e-1&&(p=E,console.log("set portal position"),console.log(d),console.log(p))}},h=()=>{i.setAttribute("position",{x:0,y:0,z:p-100}),i.setAttribute("scale",{x:50,y:50,z:20}),a.setAttribute("position",{x:0,y:11,z:p-100}),a.setAttribute("scale",{x:8,y:15,z:8}),a.setAttribute("material","color",s[2]),v.setAttribute("position",{x:-30,y:80,z:p-100}),f.setAttribute("position",{x:-30,y:-95,z:p-100}),y.setAttribute("position",{x:-12,y:-28,z:p-100}),f.setAttribute("material","color",s[1]),y.setAttribute("material","color",s[2]),a.setAttribute("scale-on-mouseenter","to:10 18 10"),a.setAttribute("scale-on-mouseleave","to:8, 15, 8"),a.setAttribute("rotate",""),a.addEventListener("click",(function(t){A&&(c==b&&k(),console.log(c))}))};document.getElementById("start-button").addEventListener("click",(function(){A||(r.setAttribute("position","0 0 -60"),r.setAttribute("rotation","0 0 0"),v.setAttribute("text-geometry","value",c+"/"+b),y.setAttribute("text-geometry","value",m),A=!0,k())}));var E,I=t=>{d=t,E=setInterval((function(){d--,f.setAttribute("text-geometry","value","T "+d),0!=d&&-1!=d||(clearInterval(this),z())}),1e3)},z=()=>{m=0,c=0,b=0,A=!1,v.setAttribute("text-geometry","value"," "),y.setAttribute("text-geometry","value"," "),f.setAttribute("text-geometry","value"," "),g.setAttribute("text","value","BE FASTER"),w(),C(),M(m)},k=()=>{m++,c=0,b=0,w(),B(),M(m),v.setAttribute("text-geometry","value",c+"/"+b),y.setAttribute("text-geometry","value",m),f.setAttribute("text-geometry","value"," ")},B=()=>{r.setAttribute("position","0 0 -60"),r.setAttribute("rotation","0 0 0")},C=()=>{r.setAttribute("position","0 3 10"),r.setAttribute("rotation","0 0 0")},w=()=>{for(var t of n)o.removeChild(t);for(var e of l)o.removeChild(e);if(l=[],n=[],u.length>1e3)for(var r=0;r<500;r++)u.splice(u[r],1),o.removeChild(star[r])},M=t=>{switch(t){case 0:x(50),h();break;case 1:x(10),clearInterval(E),I(25),h();break;case 2:x(30),clearInterval(E),I(30),h();break;case 3:x(50),clearInterval(E),I(40),h();break;case 4:x(80),clearInterval(E),I(70),h();break;default:var e=t+Math.floor(200*Math.random()+100);x(e),clearInterval(E),I(2*e),h()}};window.onload=function(){M(0),o.appendChild(a)}}])</script></a-scene>