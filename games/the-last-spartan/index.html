<!doctype html><title>The Last Spartan - js13kGames 2020</title><meta name=viewport content="width=device-width"><style>*{box-sizing:border-box;user-select:none}body,html{width:100%;height:100%;margin:0;padding:0}html{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='64' height='128' viewBox='0 0 32 64' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 28h20V16h-4v8H4V4h28v28h-4V8H8v12h4v-8h12v20H0v-4zm12 8h20v4H16v24H0v-4h12V36zm16 12h-4v12h8v4H20V44h12v12h-4v-8zM0 36h8v20H0v-4h4V40H0v-4z' fill='%23d8b685' fill-rule='evenodd'/%3E%3C/svg%3E");background-color:#e0ddd5}body{padding-top:40px}#w{width:768px;margin:0 auto;position:relative;font-family:Herculanum;box-shadow:0 8px 8px 3px rgba(0,0,0,.5)}#w1{position:relative}#c,#w1{width:100%;height:432px}#c{transform:translateZ(0)}#c,#gg,#pz,#tt{position:absolute}#gg,#pz,#tt{width:100%;height:100%;padding:24px}#gg,#pz{display:none;background:rgb(0 0 0/80%);align-items:center;justify-content:center;text-align:center;color:#fff}#tt{text-align:right;display:flex;flex-direction:column;color:#fff}#t{font-size:80px;line-height:60px;flex-grow:1}#t2{font-size:32px}#t3{text-align:right;font-size:18px;margin-bottom:24px}#pz,#rty,#t4{font-size:32px;font-style:italic}#g{font-size:72px;color:#fff;margin:0}#i{font-family:monospace;background:#e0ddd5;color:#703529;font-weight:700;font-size:18px;padding:12px}#i>div{justify-content:space-evenly}#i>div,.m{display:flex}.m{justify-content:space-between;font-size:32px}#kr,#sr,.m{font-family:monospace}#kr,#sr{text-align:right;margin-bottom:16px}#z{font-size:12px;position:absolute;left:6px;bottom:6px}</style><div id=w><div id=w1><canvas id=c></canvas><div id=pz><div>[P] to Resume</div></div><div id=gg><div><h1 id=g>YOU DIED</h1><div>An honorable death.</div><br><br><div class=m><div>Kills</div><div id=k></div></div><div id=kr></div><div class=m><div>Survived</div><div id=s></div></div><div id=sr></div><div id=rty>[Enter] to Retry</div></div></div><div id=tt><div id=t>The Last<br>Spartan<div id=t2>404 B.C.</div></div><div id=t3>No retreat.<br>No surrender.<br>No way out alive.<br><br>Go down swinging.</div><div id=t4>[Enter] to Start</div><div id=z>by @ferronsays</div></div></div><div id=i><div><div>Move : WASD</div><div>Attack : J</div><div>Block : K</div><div>Jump : SPACE</div><div>Pause : P</div></div><div><div>Spartan Charge : K + J</div><div>Ground Pound : SPACE + J</div></div></div></div><script>(t=>{var s={};function i(h){if(s[h])return s[h].exports;var e=s[h]={i:h,l:!1,exports:{}};return t[h].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=t,i.c=s,i.d=(t,s,h)=>{i.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:h})},i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"u",{value:!0})},i.t=(t,s)=>{if(1&s&&(t=i(t)),8&s)return t;if(4&s&&"object"==typeof t&&t&&t.u)return t;var h=Object.create(null);if(i.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var e in t)i.d(h,e,(s=>t[s]).bind(null,e));return h},i.n=t=>{var s=t&&t.u?()=>t.default:()=>t;return i.d(s,"a",s),s},i.o=(t,s)=>({}.hasOwnProperty.call(t,s)),i.p="",i(i.s=3)})([function(t,s,i){window,t.exports=function(){var t={};function s(t,s,i){this.x=t,this.y=s,this.z=i}s.prototype._=function(t,s,i){return this.x*t+this.y*s+this.z*i};var i=[new s(1,1,0),new s(-1,1,0),new s(1,-1,0),new s(-1,-1,0),new s(1,0,1),new s(-1,0,1),new s(1,0,-1),new s(-1,0,-1),new s(0,1,1),new s(0,-1,1),new s(0,1,-1),new s(0,-1,-1)],h=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],e=Array(512),r=Array(512);t.v=t=>{t|=t<<8;for(var s=0;256>s;s++){var n;n=1&s?h[s]^255&t:h[s]^t>>8&255,e[s]=e[s+256]=n,r[s]=r[s+256]=i[n%12]}},t.v(0);var n=1/6;return t.M=(t,s,i)=>{var h,a,o,d,f,c,l=.3333333333333333*(t+s+i),w=Math.floor(t+l),p=Math.floor(s+l),x=Math.floor(i+l),u=(w+p+x)*n,y=t-w+u,v=s-p+u,m=i-x+u;v>y?m>v?(h=0,a=0,o=1,d=0,f=1,c=1):m>y?(h=0,a=1,o=0,d=0,f=1,c=1):(h=0,a=1,o=0,d=1,f=1,c=0):m>v?m>y?(h=0,a=0,o=1,d=1,f=0,c=1):(h=1,a=0,o=0,d=1,f=0,c=1):(h=1,a=0,o=0,d=1,f=1,c=0);var M=y-h+n,g=v-a+n,b=m-o+n,k=y-d+2*n,S=v-f+2*n,I=m-c+2*n,T=y-1+.5,P=v-1+.5,j=m-1+.5,H=r[(w&=255)+e[(p&=255)+e[x&=255]]],O=r[w+h+e[p+a+e[x+o]]],J=r[w+d+e[p+f+e[x+c]]],L=r[w+1+e[p+1+e[x+1]]],N=.6-y*y-v*v-m*m,A=.6-M*M-g*g-b*b,R=.6-k*k-S*S-I*I,E=.6-T*T-P*P-j*j;return 32*((0>N?0:(N*=N)*N*H._(y,v,m))+(0>A?0:(A*=A)*A*O._(M,g,b))+(0>R?0:(R*=R)*R*J._(k,S,I))+(0>E?0:(E*=E)*E*L._(T,P,j)))},t}()},function(t,s){var i=CanvasRenderingContext2D.prototype;i.s=i.save,i.r=i.restore,i.g=i.fillRect,i.k=i.lineTo,i.S=i.translate,i.A=i.beginPath,i.T=function(t){this.fillStyle=t}},(t,s,i)=>{},function(t,s,i){i.r(s);class h{constructor(t=0,s=0){this.x=t,this.y=s}static O(t,s){return new h(t.x+s.x,t.y+s.y)}static V(t,s){return new h(t.x-s.x,t.y-s.y)}static j(t,s){return s instanceof h?new h(t.x*s.x,t.y*s.y):new h(t.x*s,t.y*s)}static L(t,s){return Math.sqrt(Math.pow(s.x-t.x,2)+Math.pow(s.y-t.y,2))}static P(t){return new h(Math.cos(t),Math.sin(t))}static C(t,s){return new h(t.x*Math.cos(s)-t.y*Math.sin(s),t.x*Math.sin(s)+t.y*Math.cos(s))}R(){return new h(this.x,this.y)}K(){return Math.sqrt(this.x*this.x+this.y*this.y)}D(){var t=this.K();return t>0?this.j(1/t):this}F(t){return this.K()>t?(this.D(),this.j(t)):this}O(t){return this.x+=t.x,this.y+=t.y,this}V(t){return this.x-=t.x,this.y-=t.y,this}j(t){return this.x*=t,this.y*=t,this}B(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}J(){return this.x=0,this.y=0,this}}var e=h,r=768,n=432,a=new e(60,30),o=t=>{var s=new e(0,0);return s.x=(t.x-t.y)*a.x/2,s.y=(t.x+t.y)*a.y/2,s},d=t=>{var s=new e;return s.x=t.x/a.x+t.y/a.y,s.y=t.y/a.y-t.x/a.x,s},f=()=>2*Math.random()-1,c=(t,s)=>~~(Math.random()*(s-t+1)+t),l=(t,s,i)=>t>=s&&i>=t,w=t=>1>=t,p=t=>null!=t;class x{constructor(t,s,i,h){this.W=t||0,this.q=s||0,this.N=i||0,this.I=h||0,this.Y=this.W+this.N,this.Z=this.q+this.I}set(t,s,i,h){this.W=t,this.q=s,this.N=i||this.N,this.I=h||this.I,this.Y=this.W+this.N,this.Z=this.q+this.I}}class u{constructor(t,s){this.L=80,this.$=576,this.G=new e,this.H=Math.PI/4,this.U=new x(0,0,0,0),this.X=new e(1,1),this.tt=!0,this.st=.15,this.it=0,this.ht(),this.et=t,this.rt=s,this.at=t/s}nt(t){t.s(),this.j(t),this.S(t)}ot(t){t.r()}j(t){t.scale(this.X.x,this.X.y)}S(t){t.S(-this.U.W,-this.U.q)}ct(t){this.it=Math.max(this.it-t,0),this.ft(this.L+.05*(this.$-this.L))}ht(){this.U.set(this.G.x-this.U.N/2+(this.it?6*f():0),this.G.y-this.U.I/2+(this.it?6*f():0),this.L*Math.tan(this.H),this.U.N/this.at),this.X.x=this.et/this.U.N,this.X.y=this.rt/this.U.I}ft(t){this.L=t,this.ht()}ut(t,s){var i=new e(t,s);this.tt?this.G.V(e.V(this.G,i).j(this.st)):this.G=i.R(),this.ht()}}var y=class{constructor(){this.pt=[],this.dt=new e,this.wt=0,this._t=0,this.lt=0,this.vt=!0,this.Mt=Math.floor(9999*Math.random())}bt(){for(var t=this.dt.R(),s=this.gt;s;)(t=e.C(t,s._t)).O(s.dt),s=s.gt;return t}xt(){for(var t=this._t,s=this.gt;s;)t+=s._t,s=s.gt;return t}yt(){for(var t=this.wt,s=this.gt;s;)t+=s.wt,s=s.gt;return t}kt(t){t.gt=this,this.pt.push(t)}ct(t){this._t+=this.lt;for(var s=this.pt.length;s--;){var i=this.pt[s];i.ct(t),i.vt||this.pt.splice(s,1)}}St(t){var s=this.pt.length;if(0!==s){for(t.s(),t.S(this.dt.x,this.dt.y-this.wt),t.rotate(this._t);s--;)this.pt[s].St(t);t.r()}}},v=class{constructor(t){this.At=t,this.Tt={}}},m=class extends v{constructor(t,s=6,i=1,h=Math.PI/4){super(t),this.Tt={Ot:s,zt:i,Vt:h},this.jt=t._t}Lt(t){var s=this.At.Pt.R();s.D(),s.j(this.Tt.Ot);var i=new e(0,-1);i.j(t||this.Tt.zt);var h=i.K();return i.x=Math.cos(this.jt)*h,i.y=Math.sin(this.jt)*h,this.jt+=Math.random()*this.Tt.Vt-.5*this.Tt.Vt,e.O(s,i)}},M=class extends v{constructor(t){super(t),this.Tt={zt:2}}Lt(t,s){return e.V(t.dt,this.At.dt).D().j(s||this.Tt.zt)}},g=class extends M{constructor(t){super(t),this.Tt={zt:2}}Lt(t,s){return super.Lt(t,s).j(-1)}},b=class extends v{constructor(t){super(t),this.Tt={Ct:5,Rt:.75,Kt:75,Dt:300,zt:1}}Lt(t){return this.Ft(mt.Jt.Et.Bt).D().j(t||this.Tt.zt)}Ft(t){var s=this.Wt(t).j(this.Tt.Ct),i=this.qt(t).j(this.Tt.Rt);return s.O(i)}qt(t){var s=new e(0,0),i=0;t.forEach(t=>{var h=e.L(this.At.dt,t.dt);h>0&&h<this.Tt.Dt&&(s.O(t.dt),i++)}),i>0&&s.j(1/i);var h=e.V(s,this.At.dt),r=h.K();return 100>r&&h.j(r/100),h.D().F(.05)}Wt(t){var s=new e,i=0;return t.forEach(t=>{var h=e.L(this.At.dt,t.dt);h>0&&h<this.Tt.Kt&&(s.O(e.V(this.At.dt,t.dt).D().j(1/h)),i++)}),i>0&&s.j(1/i),s}},k=class extends y{constructor(t=new e){super(),this.Pt=new e,this.Nt=new e,this.It=0,this.Yt=.098,this.Zt=10,this.$t=100,this.Gt=1,this.Ht=1/0,this.Qt=-1,this.Ut=0,this.Xt=100,this.ts=0,this.ss=!0,this.hs=1,this.dt=t,this.es=new class{constructor(t){this.rs=new e,this.At=t,this.as=new m(t),this.ns=new M(t),this.os=new g(t),this.cs=new b(t)}fs(t){this.rs.O(this.as.Lt(t))}us(t,s){this.rs.O(this.ns.Lt(t,s))}ps(t,s){this.rs.O(this.os.Lt(t,s))}Ft(t){this.rs.O(this.cs.Lt(t))}}(this)}get ds(){return this.ts+this.wt}kt(t){t.gt=this,this.pt.push(t)}ws(){this.vt=!1,this._s&&this._s.ws(),this.gt=void 0}ct(t){if(this.vt)if(this.Ut+=t,0>=this.ls||this.Qt&&-1!==this.Qt&&this.Ut>=this.Qt)this.ws();else{var s=this.dt.R();this.Nt.O(this.es.rs.F(this.Gt)),this.Pt.O(this.Nt).F(this.$t*(t/1e3)),this.dt.O(this.Pt),this.Nt.J(),this.es.rs.J(),this.It-=this.Yt,this.wt=Math.max(0,this.wt+this.It),0===this.wt&&(this.It=0,this.lt=0),this.ss&&this.vs(s),this.Ms(),super.ct(t)}}ms(t){return mt.Jt.bs&&0!==mt.Jt.bs.gs.length&&60>t.x&&t.x>=0&&60>t.y&&t.y>=0?mt.Jt.bs.gs[t.y][t.x]:null}xs(){return e.L(this.dt,mt.Jt.ys.dt)}vs(t){var s=d(t),i=d(this.dt),h=this.ms(i.R().B());if(!h||!p(h.ks)){var r=s.R(),n=e.V(i,s),a=n.R();a.y=0;var f=this.ms(e.O(s,a).B());f&&p(f.ks)&&r.O(a);var c=n.R();c.x=0,(f=this.ms(e.O(s,c).B()))&&p(f.ks)&&r.O(c),this.dt=o(r)}}Ms(){var t=d(this.bt()).B(),s=this.ms(t);if(s){var i=s.I-this.ts;0>i&&p(s)&&(this.wt+=this.ts-s.I),this.ts=s.I,this.Ss=s.ks,this.As=s,i>0&&(this.wt=Math.max(0,this.wt-i))}}};class S extends y{Ts(t){return this.pt.filter(s=>this.Os(t,s))}Os(t,s){if(t!==s&&t.zs.Mt!==s.zs.Mt)return this.Vs(t,s)}Vs(t,s){return t.p.x<s.p.x+s.w&&t.p.x+t.w>s.p.x&&t.p.y<s.p.y+s.h&&t.p.y+t.h>s.p.y}}class I extends k{constructor(t,s,i,h,r=-1,n=!1){super(),this.w=i,this.h=h,this.zs=t,this.js=s||new e,this.ct(0),this.Qt=r,n&&mt.Jt.Ls.kt(this)}ct(t){super.ct(t),this.p=this.zs.dt.R().O(this.js).O(new e(0,-this.zs.wt))}}class T extends k{constructor(){super(),this.Ls=new S,this.Ps=new u(r,n),this.Ps.G=o(new e(5,5))}ct(t){this.Ps.ct(t),this.Ls.ct(t),super.ct(t)}Cs(t){this.kt(t)}Rs(t){return l(t.x,this.Ps.U.W-100,this.Ps.U.Y+100)&&l(t.y,this.Ps.U.q-100,this.Ps.U.Z+100)}}var P,j,H,O=new class{constructor(){var t=t=>s=>{switch(1===s.which?this.Ks=t:3===s.which&&(s.preventDefault(),this.Ds=t),s.code){case"KeyD":this.Fs=t;break;case"KeyS":this.Bs=t;break;case"KeyA":this.Es=t;break;case"KeyW":this.Js=t;break;case"Space":this.Ws=t;break;case"KeyJ":this.Ks=t;break;case"KeyK":this.Ds=t}};window.addEventListener("keydown",t(!0)),window.addEventListener("keyup",t(!1)),window.addEventListener("mousedown",t(!0)),window.addEventListener("mouseup",t(!1))}},J=class{constructor(t,s,i=!0){this.qs=0,this.Ns=[],this.Is=t,this.Ys=i,["body","head","sword","shield","legL","legR"].forEach(i=>{for(var h=s[i]||[{f:0},{f:t}],r=1;r<h.length;r++)for(var n=h[r-1],a=h[r],o=a.f-n.f,d=0;o>d;d++){var f=d/o,c=this.Ns[n.f+d],l=c||{},w={};if(n.hasOwnProperty("p")){var p=n.p[0]+(a.p[0]-n.p[0])*f,x=n.p[1]+(a.p[1]-n.p[1])*f;w.dt=new e(p,x)}else w.dt=new e(0,0);if(n.hasOwnProperty("r")){var u=n.r+(a.r-n.r)*f;w.r=u}else w.r=0;l[i]=w,c||this.Ns.push(l)}})}get Zs(){return this.Ns[this.qs]}get $s(){return!this.Ys&&this.qs===this.Is-1}ct(){this.qs+=1,this.qs>this.Is-1&&(this.qs=0)}},L=class extends k{constructor(t,s){super(t),this.Gs=!1,this.Hs=s,this.ss=!1}ct(t){0===this.wt&&(this.Pt.J(),this.Gs=!1);var s=this.Qt-this.Ut;-1!==this.Qt&&s<.1*this.Qt&&(this.hs=s/(.1*this.Qt)),super.ct(t)}Qs(t){t.T("rgba(0,0,0,0.5"),t.g(.4*-this.Hs.x,this.wt,.8*this.Hs.x,this.Hs.y/2)}},N=class extends k{constructor(t,s,i,h,e,r,n,a){super(t),this.wt=s,this.It=i,this.Pt=h,this.Hs=e,this.Us=r,this.Qt=n,this.Xs=a,this.Ms()}ct(t){super.ct(t),this.Hs+=this.Us*t}St(t){t.T("rgba(0,0,0,0.5"),t.g(this.dt.x-this.Hs/4,this.dt.y+this.Hs/4-this.ts,this.Hs/2,this.Hs/2),t.T(this.Xs),t.g(this.dt.x-this.Hs/2,this.dt.y-this.Hs/2-this.ds,this.Hs,this.Hs),super.St(t)}},A=class extends k{constructor(){super(...arguments),this.ti=new e,this.si=0,this.It=0,this.ii=0,this.hi=0,this.ei=0,this.Zt=0,this.ri=0,this.Hs=0,this.ai=0,this.ni=0,this.oi=0,this.ci=0,this.fi=0,this.Xs="#fff",this.ui=0,this.pi=0,this.di=-1,this.wi=!1,this._i=[]}ct(t){if(0===this.di)for(;this._i.length<this.ei;)this.emit();super.ct(t),this._i=this._i.filter(t=>t.vt);var s=this.ei/this.ci;if(this.vt&&s>0){var i=1/s;for(this.ui+=t;this._i.length<this.ei&&this.ui>i;)this.emit(),this.ui-=i;this.pi+=t,-1!==this.di&&this.di<this.pi&&this.ws()}}emit(){var t=this.ti.R().j(f());this.wi&&(t=e.C(t,this.xt()));var s=this.wi?this.bt():this.dt.R();s.x+=t.x,s.y+=t.y;var i=(this.wi?this.xt():this._t)+this.hi*f(),h=this.Zt+this.ri*f(),r=new e(Math.cos(i),Math.sin(i)).j(h),n=this.Hs+this.ai*f();n=0>n?0:~~n;var a=this.ni+this.oi*f();a=0>a?0:~~a;var o=this.It+this.ii*f();o=0>o?0:~~o;var d=this.ci+this.fi*f(),c=(a-n)/d,l=new N(s,this.si,o,r,n,c,d,this.Xs);void 0!==this.Yt&&(l.Yt=this.Yt),this.wi?(l.wt=this.yt(),mt.Jt.Cs(l)):this.kt(l),this._i.push(l)}},R=class extends L{constructor(t,s,i){super(t,s),this.li=i}vi(){var t=new A;Object.assign(t,{dt:new e(0,this.Hs.y/2),_t:Math.PI/2,wi:!0,Xs:"#db0000",ei:24,Hs:12,ci:2600,fi:800,Zt:.2,ri:.1,hi:.5,di:3200}),this.kt(t)}St(t,s={dt:new e,r:0},i){super.St(t),t.s(),t.S(this.dt.x+s.dt.x,this.dt.y+s.dt.y-this.ds),this.Gs&&this.Qs(t),t.rotate(s.r+this._t),this.li&&(t.T(i||"#900"),t.g(.7*-this.Hs.x,.7*-this.Hs.y,.8*this.Hs.x,this.Hs.y)),t.T(i||"#fbca03"),t.g(-this.Hs.x/2,-this.Hs.y/2,this.Hs.x,this.Hs.y),t.A(),t.strokeStyle=i||"#222",t.lineWidth=2,t.moveTo(0,0),t.k(this.Hs.x/2,0),t.stroke(),t.moveTo(this.Hs.x/3,0),t.k(this.Hs.x/3,this.Hs.y/2),t.stroke(),t.r()}},E=class extends L{St(t,s={dt:new e,r:0},i,h=!1){t.s(),t.lineWidth=1,t.globalAlpha=this.hs,t.S(this.dt.x+s.dt.x,this.dt.y+s.dt.y-this.ds-(h?6:0)),this.Gs&&this.Qs(t),t.rotate(s.r+this._t),t.T(i||"#963"),t.g(-6,-1,6,2),t.lineWidth=2,t.T(i||"#d8d8d8"),t.g(0,-2,this.Hs.x-6,this.Hs.y),t.r()}};P=(t=1,s=.05,i=220,h=0,e=0,r=.1,n=0,a=1,o=0,d=0,f=0,c=0,l=0,w=0,p=0,x=0,u=0,y=1,v=0,m=0)=>{var M,g,b=2*Math.PI,k=o*=500*b/H**2,S=(p>0?1:-1)*b/4,I=i*=(1+2*s*Math.random()-s)*b/H,T=[],P=0,O=0,J=0,L=1,N=0,A=0,R=0;for(d*=500*b/H**3,p*=b/H,f*=b/H,c*=H,l=H*l|0,g=(h=99+H*h)+(v*=H)+(e*=H)+(r*=H)+(u*=H)|0;g>J;T[J++]=R)++A%(100*x|0)||(R=n?n>1?n>2?n>3?Math.sin((P%b)**3):Math.max(Math.min(Math.tan(P),1),-1):1-(2*P/b%2+2)%2:1-4*Math.abs(Math.round(P/b)-P/b):Math.sin(P),R=(l?1-m+m*Math.sin(2*Math.PI*J/l):1)*(R>0?1:-1)*Math.abs(R)**a*t*.3*(h>J?J/h:h+v>J?1-(J-h)/v*(1-y):h+v+e>J?y:g-u>J?(g-J-u)/r*y:0),R=u?R/2+(u>J?0:(g-u>J?1:(g-J)/u)*T[J-u|0]/2):R),P+=(M=(i+=o+=d)*Math.sin(O*p-S))-M*w*(1-1e9*(Math.sin(J)+1)%2),O+=M-M*w*(1-1e9*(Math.sin(J)**2+1)%2),L&&++L>c&&(i+=f,I+=f,L=0),!l||++N%l||(i=I,o=k,L=L||1);return(t=j.createBuffer(1,g,H)).getChannelData(0).set(T),(i=j.createBufferSource()).buffer=t,i.connect(j.destination),i.start(),i},j=new(window.AudioContext||webkitAudioContext),H=44100;var K,_,D=P,X=(K=D,(...t)=>{var s=!_;clearTimeout(_),_=setTimeout(()=>{_=null},48),s&&K.apply(void 0,t)}),q=(t,s=!1)=>s?X(...t):D(...t),B={body:[{f:0,p:[0,0]},{f:10,p:[0,-1]},{f:20,p:[0,0]}],head:[{f:0,p:[0,0]},{f:5,p:[0,1]},{f:20,p:[0,0]}],sword:[{f:0,r:0},{f:10,r:-.045},{f:20,r:0}],shield:[{f:0,r:.14,p:[0,2.5]},{f:10,r:.16,p:[.5,3]},{f:20,r:.14,p:[0,2.5]}]},C={body:[{f:0,r:.1,p:[0,4]},{f:10,r:.1,p:[0,3.5]},{f:20,r:.1,p:[0,4]}],head:[{f:0,p:[0,5]},{f:5,p:[0,4.5]},{f:20,p:[0,5]}],sword:[{f:0,r:.25,p:[-6,2]},{f:10,r:.25,p:[-6,1.5]},{f:20,r:.25,p:[-6,2]}],shield:[{f:0,p:[8,1.5]},{f:0,p:[8.25,1.75]},{f:20,p:[8,1.5]}]},z={body:[{f:0,r:.2,p:[0,2]},{f:3,r:.2,p:[0,3]},{f:7,r:.2,p:[0,2]},{f:13,r:.2,p:[0,3]},{f:20,r:.2,p:[0,2]}],head:[{f:0,r:-.1,p:[1,4]},{f:3,r:-.1,p:[1,5]},{f:7,r:-.1,p:[1,4]},{f:13,r:-.1,p:[1,5]},{f:20,r:-.1,p:[1,4]}],sword:[{f:0,r:.2,p:[-3,1]},{f:10,r:.25,p:[-6,1]},{f:20,r:.2,p:[-3,1]}],shield:[{f:0,p:[13.5,-1.75]},{f:10,p:[14,-2]},{f:20,p:[13.5,-1.75]}],legL:[{f:0,r:1},{f:10,r:-1},{f:20,r:1}],legR:[{f:0,r:-1},{f:10,r:1},{f:20,r:-1}]},G={body:[{f:0,r:.1,p:[0,0]},{f:3,r:.1,p:[0,2]},{f:7,r:.1,p:[0,0]},{f:13,r:.1,p:[0,2]},{f:20,r:.1,p:[0,0]}],head:[{f:0,r:-.1,p:[0,0]},{f:3,r:-.1,p:[0,2]},{f:7,r:-.1,p:[0,0]},{f:13,r:-.1,p:[0,2]},{f:20,r:-.1,p:[0,0]}],sword:[{f:0,r:-.24,p:[3,-4]},{f:10,r:-.2,p:[0,-4]},{f:20,r:-.24,p:[3,-4]}],shield:[{f:0,r:.24,p:[0,0]},{f:10,r:.2,p:[3,0]},{f:20,r:.24,p:[0,0]}],legL:[{f:0,r:1.4},{f:10,r:-1.4},{f:20,r:1.4}],legR:[{f:0,r:-1.4},{f:10,r:1.4},{f:20,r:-1.4}]},F={body:[{f:0,r:.1},{f:16,r:.1}],sword:[{f:0,r:-1.5,p:[0,-8]},{f:2,r:-1.5,p:[0,-8]},{f:8,r:0,p:[18,-4]},{f:12,r:.25,p:[12,-4]},{f:16,r:0,p:[0,-4]}],shield:[{f:0,p:[0,0]},{f:16,p:[-8,0]}],legL:[{f:0,r:0},{f:8,r:1},{f:16,r:0}],legR:[{f:0,r:0},{f:8,r:-1},{f:16,r:0}]},V=Object.assign(Object.assign({},F),{body:[{f:0,r:.3,p:[0,2]},{f:16,r:.3,p:[0,2]}],head:[{f:0,r:-.1,p:[1,4]},{f:16,r:-.1,p:[1,4]}],sword:[{f:0,r:.2,p:[0,0]},{f:16,r:.2,p:[-8,0]}],shield:[{f:0,p:[14,0]},{f:4,p:[24,0]},{f:10,p:[24,0]},{f:16,p:[14,0]}]}),U={body:[{f:0,r:-.1,p:[0,0]},{f:6,r:-.1,p:[0,0]},{f:24,r:.5,p:[0,5]},{f:36,r:.5,p:[0,5]}],head:[{f:0,r:-.1,p:[0,0]},{f:6,r:-.1,p:[0,0]},{f:24,r:-.3,p:[0,5]},{f:36,r:-.3,p:[0,5]}],sword:[{f:0,r:-Math.PI/2,p:[0,-10]},{f:6,r:-Math.PI/2,p:[0,-10]},{f:20,r:-Math.PI/2,p:[10,10]},{f:36,r:-Math.PI/2,p:[10,10]}],shield:[{f:0,r:-.1,p:[10,-10]},{f:6,r:-.1,p:[10,-10]},{f:20,r:0,p:[16,12]},{f:36,r:0,p:[16,12]}],legL:[{f:0,r:1},{f:6,r:1.2},{f:24,r:.5},{f:36,r:.5}],legR:[{f:0,r:-1},{f:6,r:-1.2},{f:24,r:0},{f:36,r:0}]},Q=(t,s)=>{t=t.substr(1);var i=parseInt(t,16),h=Math.round(2.55*s),e=(i>>16)+h,r=(i>>8&255)+h,n=(255&i)+h;return"#"+(16777216+65536*(255>e?1>e?0:e:255)+256*(255>r?1>r?0:r:255)+(255>n?1>n?0:n:255)).toString(16).slice(1)},W=class extends k{constructor(t,s,i=0,h,r){super(),this.Mi=h,this.ks=r,this.mi=new e(t,s),this.dt=o(this.mi),this.I=this.bi=i}St(t){if(mt.Jt.Rs(this.dt)){var s=~~this.I;t.drawImage(this.Mi,Math.floor(this.ks*(a.x+1)),Math.floor(a.y*s+s*(s+1)/2-s),Math.floor(a.x),Math.floor(a.y+s),Math.floor(this.dt.x-a.x/2),Math.floor(this.dt.y-s),Math.floor(a.x),Math.floor(a.y+s))}super.St(t)}},Y=class extends k{constructor(t){super(t),this.gi=new e(16,18),this.xi=new e(12,18),this.yi=new e(40,4),this.ki=new e(20,20),this.Si=new e(4,8),this.Ai=100,this.Ti=0,this.Oi=350,this.zi=0,this.Vi=0,this.ji=0,this.Li=!1,this._s=new I(this,new e(-9,-35),18,45,-1,!0),this.Pi=500,this.Ci=0,this.Ri=500,this.Ki=0,this.Di=0,this.Fi=0,this.Zt=200,this.$t=200,this.Yt=.3,this.Bi=new J(20,B),this.Ei=new J(20,C),this.Ji=new J(20,z),this.Wi=new J(20,G),this.qi=new J(16,F,!1),this.Ni=this.Bi,this.Ii=!0,this.Yi(),this.Ms()}Yi(){this.Zi=new R(new e(0,-this.xi.y-this.gi.y/2*.8),this.gi,!1),this.$i=new E(new e(-4,-this.xi.y/2+4),this.yi),this.Zi.gt=this.$i.gt=this}Gi(){if(0>=this.zi&&this.vt&&0!=~~this.Ai){this.Hi(5,600),q([.1,1,1123,.15,,.03,4,.69,,-84.1,,.01,,.8,-4,-.1,,.32,.04,.01]),this.Ni=this.qi,this.qi.qs=0;var t=this.Ii?1:-1;mt.Jt.Ls.Ts(new I(this,new e(t*(this.xi.x/2+10+(this.Ii?0:36)),-30),36,20)).forEach(t=>{t.zs.Qi(this)}),this.zi=this.Oi}}Ui(t,s,i,h){t.Ms(),t.wt=s,t.It=i,t.Pt=e.P(Math.random()*Math.PI),t.lt=f()/h,t.Gs=!0}ws(){this._s.vt=!1;var t=new R(this.dt.R(),this.gi,!1);t.vi(),t.Qt=3e5;var s=new E(this.dt.R(),this.yi);s.Qt=3e4,this.Ui(s,40,c(.5,1.5),4),this.Ui(t,40,c(1,4),5),mt.Jt.Cs(t),mt.Jt.Cs(s),super.ws()}Qi(t,s,i=!1){var h=e.V(this.dt,t.dt).D().x;t instanceof it&&(mt.Jt.Ps.it=50);var r=s||i?t.Xi/3:t.Xi,n=!s&&!i;this.Li&&this.Ai>0&&(0>h&&this.Ii||h>0&&!this.Ii)&&(r=0,n=!1,this.Hi(1.5*t.Xi,1e3)),this.Nt.x+=this.Li?0:10*h,this.It+=i?5:3,this.ls=Math.max(0,this.ls-r),0===this.ls&&(t.Fi+=1),this.Vi=200,this.ji+=s?2e3:i?1200:0,q(r?[,1,287,,,.03,2,1.88,-6.4,-27,,,,,,,,.39,.04,.39]:[,,456,,,.14,,1.76,,6.5,,,,1.8,-.6,.3,.11,.53,.05,.23]);var a=new A;Object.assign(a,{dt:new e(0,-this.xi.y/2),wi:!0,Xs:n?"#db0000":"#FFDA00",It:n?1:3,ii:2,ei:n?12:4,Hs:12,ci:2e3,fi:1e3,Zt:n?.25:20,ri:n?.2:6,hi:2*Math.PI,di:0,si:this.xi.y}),this.kt(a)}th(){[this.sh,this.qi,this.ih].includes(this.Ni)&&!this.Ni.$s||(this.Pt.K()>.1?this.Li?this.Ni=this.Ji:this.Ni=this.Wi:this.Li?this.Ni=this.Ei:this.Ni=this.Bi)}Hi(t,s){this.Ai=Math.max(0,this.Ai-t),this.Ti=Math.max(this.Ti,s)}ct(t){if(this.Ti=Math.max(this.Ti-t,0),this.zi=Math.max(this.zi-t,0),this.Vi=Math.max(this.Vi-t,0),this.ji=Math.max(this.ji-t,0),0===this.Ti&&(this.Ai=Math.min(100,this.Ai+1)),super.ct(t),this.th(),this.Ni.ct(),this.Ni===this.Wi&&0>this.Di){var s=Math.max(0,1-e.V(this.dt,mt.Jt.ys.dt).K()/300),i=w(this.Ss);s>.2&&4>=this.wt&&q(i?[s,,60,.01,,.07,,2.47,-.4,50.8,100,.02,,-.2,.1,,.02,,.04,.29]:[s,.1,346,,,.06,,2.23,,-2.8,140,,.01,,,,.21,.25,,.04],!0),this.Di=160}this.Di-=t}St(t){if(mt.Jt.Rs(e.O(this.dt,new e(0,-this.ds)))){super.St(t);var s=this.Vi>0?"#fff":void 0,i=(s=Math.sin(.02*this.ji)>0?"#1520a6":s)||"#E0AC69",h=this.Ni.Zs;t.s(),t.lineWidth=1,this.hh&&this.hh.St(t,this.Xs);var r=w(this.Ss);t.S(this.dt.x,this.dt.y-(r?0:this.Si.y)-this.ds),r&&10>=this.wt||(t.T("rgba(0,0,0,0.5"),t.g(-this.gi.x/2,5+this.wt,this.gi.x,6)),this.Ii||t.scale(-1,1),t.s(),t.T(s||"#A87D37"),t.rotate(h.shield.r),t.g(-this.ki.x/2+4+h.shield.dt.x,-this.ki.y-.1*this.xi.y+h.shield.dt.y-(r?8:0),this.ki.x,this.ki.y),t.r(),t.T(s||"#D0814E"),r&&this.wt<=this.Si.y||(t.s(),t.S(-this.Si.x/2-this.xi.x/3,-2),t.rotate(h.legL.r),t.g(0,this.Si.y,this.Si.x,this.Si.y/3),t.r(),t.s(),t.S(-this.Si.x/2+this.xi.x/3,-2),t.rotate(h.legR.r),t.g(0,this.Si.y,this.Si.x,this.Si.y/3),t.r()),t.s(),t.rotate(h.body.r),t.T(i),t.g(-this.xi.x/2+h.body.dt.x,-this.xi.y+h.body.dt.y,this.xi.x,.6*this.xi.y),r&&this.wt<=.45*this.xi.y||(t.T(s||Q(this.Xs,10)),t.g(-this.xi.x/2+h.body.dt.x,.4*-this.xi.y+h.body.dt.y,this.xi.x,.45*this.xi.y)),this.Zi.St(t,h.head,s),t.r(),this.$i.St(t,h.sword,s,r),t.r()}}},Z=i(0),$=i.n(Z),tt=class{constructor(t,s,i=!1){this.Nt=new e,this.eh=1,this.dt=new e(t,s),this.rh=this.dt.R(),this.ah=i}ct(t){if(!this.ah){var s=this.dt.R();this.Nt.j(t*t),this.dt.j(1.985).V(this.rh.R().j(.985)).O(this.Nt),this.Nt.J(),this.rh=s}}nh(t){this.Nt.O(t)}},st=class{constructor(t,s){this.oh=t,this.fh=s,this.uh=.5,this.ph=e.L(t.dt,s.dt)}dh(){var t=this.oh.dt,s=this.fh.dt,i=e.V(t,s),h=i.K(),r=0===h?this.ph:(this.ph-h)/h,n=.5*this.uh,a=this.uh-n,o=e.j(i,n*r);this.oh.ah||(t.x+=o.x,t.y+=o.y);var d=e.j(i,a*r);return this.fh.ah||(s.x-=d.x,s.y-=d.y),h}},it=class extends Y{constructor(t){super(t),this.wh=0,this._h=0,this.Gt=4,this.Xi=25,this.Zi.li=!0,this.Xs="#990000",this.ls=this.Ht=100,this.hh=new class{constructor(t,s,i,h,r){this.lh=16,this.vh=5,this.Mh=new e(0,.25),this.mh=[],this.bh=[],this.gh=Math.ceil(h/r),this.xh=Math.ceil(i/r);for(var n=0;n<this.gh;n++)for(var a=0;a<this.xh;a++){var o=new tt(t+a*r,s+n*r,0===n);a&&this.bh.push(new st(o,this.mh[this.mh.length-1])),n&&this.bh.push(new st(o,this.mh[a+this.xh*(n-1)])),this.mh.push(o)}}ct(t,s,i){for(var h=Math.floor(t/this.lh),r=0;h>r;r++){for(var n=0;n<this.mh.length;n++){var a=this.mh[n];a.nh(this.Mh),a.ct(1/h)}for(var o=0;o<this.vh;o++)this.bh.forEach(t=>t.dh())}this.mh[0].dt=new e(s-5,i),this.mh[1].dt=new e(s+5,i);var d=$.a.M(s/1e3,(i-50)/1e3,performance.now()/2200)*Math.PI-Math.PI/2,f=new e(Math.cos(d),Math.sin(d)).D().j(.1);this.mh.map(t=>t.nh(f))}St(t,s){var i,h;for(h=1;h<this.gh;++h)for(i=1;i<this.xh;++i){t.A();var e=(h-1)*this.xh+i-1,r=h*this.xh+i;t.moveTo(this.mh[e].dt.x,this.mh[e].dt.y),t.k(this.mh[e+1].dt.x,this.mh[e+1].dt.y),t.k(this.mh[r].dt.x,this.mh[r].dt.y),t.k(this.mh[r-1].dt.x,this.mh[r-1].dt.y),t.T(s),t.fill()}}}(t.x,t.y-this.xi.y,26,37.5,13),this.sh=new J(16,V,!1),this.ih=new J(36,U,!1)}Qi(t,s){this.wh=1e3,super.Qi(t,s)}yh(){this._h>1e3||this.Ki>0||!this.vt||0==~~this.Ai||(this.Hi(50,600),this.$t=2e3,this.Gt=2e3,setTimeout(()=>{this.It=-14,mt.Jt.bs&&mt.Jt.bs.kh(this.As.mi),mt.Jt.Ls.Ts(new I(this,new e(-100,-100),200,200)).forEach(t=>{t.zs.Qi(this,!1,!0)}),mt.Jt.Ps.it=100,q([,,463,,,.45,2,.38,-3.9,,,,,1.2,,.1,.1,.72,.02])},200),this.Ni=this.ih,this.ih.qs=0,this.Ki=this.Ri,this.zi=this.Oi)}Sh(){if(0>=this.Ci&&this.vt&&0!=~~this.Ai){if(this.Hi(10,600),this.$t=2e3,this.Nt.x+=this.Ii?5:-5,q([,.5,310,.04,.01,.13,,.29,-3.2,,,,,,,,,.74,.02]),mt.Jt.bs){var t=new A;Object.assign(t,{_t:-Math.PI/2,wi:!0,Xs:"rgba(205,190,171,0.8)",ei:40,ni:12,oi:6,ci:600,fi:200,Yt:0,di:360}),this.kt(t)}this.Ni=this.sh,this.sh.qs=0;var s=this.Ii?1:-1;mt.Jt.Ls.Ts(new I(this,new e(s*(this.xi.x/2+10+(this.Ii?0:48)),-24),48,12)).forEach(t=>{t.zs.Qi(this,!0),t.zs instanceof Y&&this.Hi(10,600)}),this.Ci=this.Pi}}ct(t){this._h+=t,this.wh=Math.max(this.wh-t,0),this.Ci=Math.max(this.Ci-t,0),this.Ki=Math.max(this.Ki-t,0),0===this.wh&&100===this.Ai&&(this.ls=Math.min(this.Ht,this.ls+.2));var s=this.Ni===this.sh;s||(O.Js&&(this.Nt.y-=3),O.Es&&(this.Nt.x-=3,this.Ii=!1),O.Bs&&(this.Nt.y+=3),O.Fs&&(this.Nt.x+=3,this.Ii=!0),O.Ds?(this.Li=!0,this.Gt=2.5,O.Ks&&this.Sh()):(this.Li=!1,this.Gt=4,O.Ks&&(this.wt>20?this.yh():this.Gi()))),O.Ws&&this.Ai>0&&0===this.wt&&(this._h=0,this.It=6,this.Hi(5,600),q([.5,1,377,.03,.09,,,.86,2.7,,-50,,,,,,,.57,.06])),(s=this.Ni===this.sh)||(this.Pt.j(0),this.Nt.D().j(3),this.$t=this.Li?100:200,this.Yt=.3,this.Gt=4),this.hh.ct(t,this.dt.x,this.dt.y-this.xi.y-this.Si.y-this.ds),super.ct(t)}},ht=class extends k{constructor(t){super(),this.ys=t,this.Ah=new R(new e(750,34),new e(12,14),0)}Th(t,s,i,h){t.miterLimit=2,t.font="20px monospace",t.strokeStyle="#000",t.lineWidth=4,t.strokeText(s,i,h),t.T("#fff"),t.fillText(s,i,h)}St(t){t.T("#fff"),t.g(9,9,202,22),t.g(9,34,202,12),t.T("#d11141"),t.g(10,10,this.ys.ls/this.ys.Ht*200,20),t.T("#00aedb"),t.g(10,35,this.ys.Ai/100*200,10),t.textAlign="right",this.Th(t,(this.Ut/1e3).toFixed(2),762,20),this.Th(t,this.ys.Fi,762,40),this.Ah.St(t,{dt:new e(-12*(""+this.ys.Fi).length,0),r:0},0)}},et=class extends Y{constructor(t){super(t),this.Oh=0,this.zh=40,this.Zt=5,this.Gt=1,this.$t=3e3,this.Xt=550,this.Xi=7,this.ls=this.Ht=50,this.Xs="#84b9d1",this.es.as.Tt.Ot=.15}ct(t){if(this.ji>0||this.Vi>0)return this.wt>4||this.Pt.j(.5),void super.ct(t);var s=this.xs();this.Oh>0?(this.Oh-=t,this.es.ps(mt.Jt.ys,3)):(s<this.Xt?s<this.zh?(this.Gi(),setTimeout(()=>{this.Oh=600},260)):this.es.us(mt.Jt.ys,3):this.es.fs(.25),this.es.rs.x>0?this.Ii=!0:0>this.es.rs.x&&(this.Ii=!1)),this.es.Ft(),this.Pt.j(0),super.ct(t)}},rt=class extends et{constructor(t){super(t),this.Zt=3,this.Gt=.5,this.$t=1500,this.Xt=700,this.Xi=24,this.ls=this.Ht=200,this.zh=60,this.xi=new e(24,36),this.gi=new e(28,36),this.Si=new e(8,8),this.yi=new e(60,6),this.ki=new e(40,40),this.Yi()}},nt=()=>{for(var t=mt.Jt.bs.gs;;){var s=c(0,59),i=c(0,59),h=t[s][i].ks,r=o(new e(i,s));if(p(h)&&!w(h)&&!mt.Jt.Rs(r))return r}},at=class extends y{constructor(){super(...arguments),this.Vh=0,this.jh=40,this.Lh=3e3,this.Ph=3e3,this.Bt=[]}ct(t){this.Bt=this.Bt.filter(t=>t.vt),this.Ph<this.Lh||(this.Ph=0,this.Bt.length<this.jh&&(this.Vh++,this.Vh&&this.Vh%10==0?this.Ch(!0):this.Ch())),this.Ph+=t}Ch(t){this.Lh=Math.max(1e3,this.Lh-10);var s=nt(),i=t?new rt(s):new et(s);this.gt.kt(i),this.Bt.push(i)}},ot=class extends W{ct(t){mt.Jt.Rs(this.dt)&&(this.I=30*Math.abs($.a.M(this.dt.x/300,this.dt.y/300,performance.now()/2600)),this.ks=this.I>16?1:0)}},dt=["#e3fd98","#d9f669","#d4ee4b","#beea41","#a9ce21"],ft=class extends k{constructor(t){var s;super(t),this.Rh=0,this.Kh=c(24,38),this.Xs=(s=dt)[~~(Math.random()*s.length)],this._t=-Math.PI/2,this.Rh=0,this._s=new I(this,new e(-10,-this.Kh),20,this.Kh,null,!0),this.ss=!1,this.Yt=10}Qi(){q([.3,1,300,.04,,.08,2,2.6,-26,,-222,.02,,,-6,.1,,.47,.03]);var t=new A;Object.assign(t,{wi:!0,Xs:this.Xs,It:1,ii:.5,ei:1,Hs:14,ci:1200,fi:200,Zt:.4,ri:.2,hi:2*Math.PI,di:0,Yt:.02}),this.kt(t),setTimeout(()=>{this.ws()},10)}ct(t){mt.Jt.Rs(e.O(this.dt,new e(0,-this.ds-this.Kh)))&&(this.Rh=.5*$.a.M(this.dt.x/200,this.dt.y/200,performance.now()/2200),super.ct(t))}St(t){if(mt.Jt.Rs(e.O(this.dt,new e(0,-this.ds)))){t.s(),t.lineWidth=10,t.S(this.dt.x,this.dt.y-this.ds),t.A(),t.moveTo(0,0);var s=new e(Math.cos(this._t+this.Rh),Math.sin(this._t+this.Rh)).D().j(this.Kh);t.k(s.x,s.y),t.strokeStyle=this.Xs,t.stroke(),t.r(),super.St(t)}}},ct=class extends k{constructor(t){super(t),this.Kh=c(100,200),this.Hs=new e(.75,.5).j(this.Kh),this.Yt=10,this.ss=!1}St(t){if(mt.Jt.Rs(e.O(this.dt,new e(0,-this.ds-this.Kh/2)))){var s=$.a.M(this.dt.x/200,this.dt.y/200,performance.now()/2200)*Math.PI*2,i=new e(Math.cos(s),Math.sin(s)).D();t.s(),t.lineWidth=20,t.S(this.dt.x,this.dt.y-this.ds),t.A(),t.moveTo(0,0),t.k(0,-this.Kh),t.strokeStyle="#8b632f",t.stroke(),t.s(),t.globalAlpha=.9,t.transform(1+i.x/60,i.x/60,i.y/60,1+i.y/60,0,0),t.T("#a6da39"),t.g(-this.Hs.x/2,-this.Kh-this.Hs.y/2,this.Hs.x,this.Hs.y),t.r(),t.r(),super.St(t)}}},lt=class extends W{constructor(t,s,i,h,r,n){super(t,s,i,h,r);var a=Math.abs($.a.M(t/10,s/10,mt.v));if(a>.94){var d=o(new e(t+Math.random(),s+Math.random()));n.kt(new ct(d))}else if(a>.5)for(var f=~~((a-.5)/.45*8),c=0;f>c;c++)d=o(new e(t+Math.random(),s+Math.random())),n.kt(new ft(d))}},wt=(t,s,i,h,e)=>{for(var r=0,n=1,a=1,o=0,d=0;h>d;d++)r+=$.a.M(t*n,s*n,i*n)*a,o+=a,a*=e,n*=2;return r/o},pt=class extends k{constructor(t,s){super(),this.gs=[],this.Dh=0;for(var i=60;i--;){for(var h=[],e=60;e--;){var r,n=wt(i/85,e/85,mt.v,3,1),a=9;0>n?a=1:.05>n?a=2:.1>n?a=3:1>n&&(a=4),n=Math.abs(n),0===a||1===a?r=new ot(e,i,20,t,a):2===a||3===a?r=new W(e,i,20+200*n,t,a):4===a&&(r=new lt(e,i,Math.min(99,20+200*n),t,a,s)),this.kt(r),h.push(r)}this.gs.push(h.reverse())}this.gs.reverse()}kh(t){this.Fh=t,this.Bh=1,this.Dh=400}ct(t){if(this.Dh=Math.max(this.Dh-t,0),this.Bh+=.15,this.Fh&&20>this.Bh)for(var s=this.gs.length;s--;)for(var i=this.gs[s],h=i.length;h--;){var e=i[h],r=Math.sqrt(Math.pow(this.Fh.x-e.mi.x,2)+Math.pow(this.Fh.y-e.mi.y,2)),n=Math.abs(this.Bh-r);e.I=1>n?Math.min(119,e.bi+40*(1-n/1)*(this.Dh/400)):e.bi}super.ct(t)}},xt=class extends T{constructor(t){super(),setTimeout(()=>{this.Eh=new k,this.bs=new pt(t,this.Eh),this.kt(this.Eh),this.kt(this.bs),this.ys=new it(nt()),this.Ps.G=this.ys.dt.R(),this.Jh=new ht(this.ys),this.Eh.kt(this.ys),this.Et=new at,this.Eh.kt(this.Et)},10)}Cs(t){this.Eh.kt(t)}ct(t){this.Jh.ct(t),this.Eh.pt=this.Eh.pt.sort((t,s)=>s.dt.y-t.dt.y),0===this.ys.ls&&(this.Wh=!0),super.ct(t)}St(t){this.Ps.ut(this.ys.dt.x,this.ys.dt.y-this.ys.ds),this.Ps.nt(t),super.St(t),this.Ps.ot(t),this.Jh.St(t)}},ut=class extends T{constructor(){super(),this.Ps.G=new e(24,-22),this.Ps.$=this.Ps.L=106,setTimeout(()=>{this.ys=new it(new e),this.kt(this.ys)},0)}St(t){this.Ps.nt(t),super.St(t),this.Ps.ot(t)}},yt=(t,s,i,h,e)=>{var r=a.x/2,n=a.x/2,o=.5*r+.5*n;t.s(),t.A(),t.moveTo(s,i+o),t.k(s-r,i+o-.5*r),t.k(s-r,i+o-h-.5*r),t.k(s,i+o-1*h),t.closePath(),t.fillStyle=t.strokeStyle=Q(e,-20),t.stroke(),t.fill(),t.A(),t.moveTo(s,i+o),t.k(s+n,i+o-.5*n),t.k(s+n,i+o-h-.5*n),t.k(s,i+o-1*h),t.closePath(),t.fillStyle=t.strokeStyle=Q(e,-10),t.stroke(),t.fill(),t.A(),t.moveTo(s,i-h),t.k(s-r,i-h+.5*r),t.k(s-r+n,i-h+o),t.k(s+n,i-h+.5*n),t.closePath(),t.fillStyle=t.strokeStyle=e,t.strokeStyle=Q(e,-10),t.stroke(),t.fill(),t.r()},vt=(i(1),"mjf_tls"),mt=new class{constructor(){this.qh=!1,this.Nh=!1,this.Ih=window.localStorage,this.Yh=performance.now(),this.Zh=document.getElementById("c"),this.$h=this.Zh.getContext("2d"),this.Zh.width=r,this.Zh.height=n,this.Zh.oncontextmenu=()=>!1,this.Gh=document.getElementById("tt"),this.Hh=document.getElementById("pz"),this.Qh=document.getElementById("gg"),this.Uh=document.getElementById("k"),this.Xh=document.getElementById("s"),this.te=document.getElementById("kr"),this.se=document.getElementById("sr"),window.onblur=()=>this.ie(),window.onkeydown=t=>{switch(t.code){case"KeyP":if(this.Jt.Wh)return;this.Nh?this.he():this.ie();break;case"Enter":this.qh?this.Jt.Wh&&this.ee():(this.re(),this.qh=!0,this.ae(null,this.Gh),this.ee())}},this.ne=(()=>{var{tmpC:t,tmpCtx:s}=(()=>{var t=document.createElement("canvas"),s=t.getContext("2d");return{tmpC:t,tmpCtx:s}})(),i=["#1ba5e1","#1eb8fa","#e5d9c2","#564d40","#48893e"];t.width=(a.x+1)*i.length,t.height=120*a.y+7260;for(var h=0;i.length>h;h++)for(var e=i[h],r=h*(a.x+1)+(a.x+1)/2,n=0;120>n;n++){var o=n,d=a.y*n+n*(n+1)/2;yt(s,r,d,o,e)}return t})(),this.Jt=new ut,this.oe()}oe(){this.ce=requestAnimationFrame(this.fe.bind(this))}re(){cancelAnimationFrame(this.ce)}fe(t){this.ce=requestAnimationFrame(this.fe.bind(this));var s=Math.max(0,t-this.Yh);this.ct(s),this.Yh=t}ae(t,s){t&&(t.style.display="flex"),s&&(s.style.display="none")}ie(){this.qh&&(this.re(),this.ae(this.Hh),this.Nh=!0)}he(){this.Yh=performance.now(),this.oe(),this.ae(null,this.Hh),this.Nh=!1}ot(){this.re();var t=this.Jt.ys.Fi,s=this.Jt.Ut;this.Uh.innerText=t,this.Xh.innerText=(s/1e3).toFixed(0)+"s",this.ae(this.Qh,null);var i=JSON.parse(this.Ih.getItem(vt)||'{"kills": 0, "time": 0}');this.te.innerText="Record: "+i.kills,this.se.innerText=`Record: ${(i.time/1e3).toFixed(0)}s`,t>i.kills&&(i.kills=t),s>i.time&&(i.time=s),this.Ih.setItem(vt,JSON.stringify(i))}ee(){this.ae(null,this.Qh),this.v=c(0,99999),this.Jt=new xt(this.ne),setTimeout(()=>this.oe(),50)}ct(t){this.Jt.ct(t),this.Jt.Wh&&this.ot(),this.St()}St(){var{$h:t,Jt:s}=this;t.clearRect(0,0,r,n),t.T("rgba(0,0,0,0.85)"),t.g(0,0,r,n),t.s(),s.St(t),t.r()}};i(2)}])</script>