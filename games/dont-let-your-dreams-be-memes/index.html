<!doctype html><meta content="width=device-width,maximum-scale=1,user-scalable=no" name=viewport><title>Don't Let Your Dreams Be Memes</title><script src=/2017/webxr/aframe.js></script><script>"use strict";AFRAME.registerComponent("cursor-defuse",{schema:{default:""},init:function(){var e=this,t=function(){e.el.setAttribute("geometry","thetaLength",0)};this.el.addEventListener("click",t),this.el.addEventListener("mouseleave",t)}}),AFRAME.registerComponent("canvas-paint-wall",{schema:{default:""},init:function(){var e=document.getElementById(this.data).getContext("2d");e.fillStyle="#fdf4e3",e.fillRect(0,0,512,512),e.font="bold 48px 'Segoe UI','Helvetica Neue',sans-serif",e.textAlign="center",e.textBaseline="middle",e.fillStyle="#bdb7aa",e.fillText("NO ESCAPE",256,256)}}),AFRAME.registerComponent("canvas-paint-button",{schema:{default:""},init:function(){var e=document.getElementById(this.data).getContext("2d");e.fillStyle="#F50057",e.fillRect(0,0,256,128),e.font="bold 40px 'Segoe UI','Helvetica Neue',sans-serif",e.textAlign="center",e.textBaseline="middle",e.save(),e.translate(128,64),e.scale(.85,1),e.fillStyle="#fff",e.fillText("INSERT COIN",0,0),e.restore()}});var PICTURES=["üçå","üçá","üçí","üçã","üçì","üåü","üíé"],STATE_IDLE=0,STATE_SPINNING=1,MIN_SPEED=.3,FRICTION=.03;AFRAME.registerComponent("program",{schema:{default:""},init:function(){var e=this;this.money=10,this.pos=[200,200,200],this.speed=[0,0,0],this.target=[-1,-1,-1],this.state=STATE_IDLE;var t=document.getElementById("pointer"),s=document.getElementById("insert-coin");this.buttonEnable=function(){s.className="clickable",t.components.raycaster.refreshObjects()},this.buttonDisable=function(){s.className="",t.components.raycaster.refreshObjects()},s.addEventListener("click",(function(t){--e.money,e.speed=[3.5+Math.random(),4+.5*Math.random(),3+1.5*Math.random()],e.target=[-1,-1,-1],e.state=STATE_SPINNING,e.buttonDisable()}));var i=(this.reel=document.getElementById("canvas-reel")).getContext("2d");i.fillStyle="#fff",i.fillRect(0,0,200,1600),i.font="bold 80px 'Segoe UI','Helvetica Neue',sans-serif",i.textAlign="center",i.textBaseline="middle";for(var l=0;l<8;++l){var a=200*l;i.fillStyle="#ECEFF1",i.fillRect(20,20+a,160,160),i.fillStyle="#bdb7aa",i.fillText(PICTURES[l%7],100,100+a)}var n=this.canvas=document.getElementById(this.data).getContext("2d");n.font="bold 48px 'Segoe UI','Helvetica Neue',sans-serif",n.textAlign="center",n.textBaseline="middle",n.fillStyle="#fdf4e3",n.fillRect(0,0,800,450)},tick:function(e,t){if(this.state==STATE_SPINNING){for(var s=0;s<3;++s)0!=this.speed[s]&&((this.speed[s]-=FRICTION)<=MIN_SPEED&&(this.speed[s]=MIN_SPEED,-1==this.target[s]&&(this.target[s]=200*Math.floor(.005*this.pos[s]))),this.pos[s]-=this.speed[s]*t,-1!=this.target[s]&&this.pos[s]<=this.target[s]?(this.pos[s]=this.target[s],this.speed[s]=0,this.target[s]=-1):this.pos[s]<0&&(this.pos[s]+=1400));if(0==this.speed[0]&&0==this.speed[1]&&0==this.speed[2])if(this.pos[0]==this.pos[1]&&this.pos[1]==this.pos[2]&&(this.money+=10),this.state=STATE_IDLE,this.money>0)this.buttonEnable();else{var i=document.getElementById("canvas-button").getContext("2d");i.fillStyle="#fff",i.fillRect(10,61,236,6)}}var l=this.canvas;l.fillStyle="#fdf4e3",l.fillRect(0,0,800,450),l.fillStyle="#bdb7aa",l.fillText("SAVINGS: ‚Ç¨"+this.money,400,50),l.fillRect(0,120,800,5),l.fillRect(0,325,800,5),l.drawImage(this.reel,0,this.pos[0],200,200,50,125,200,200),l.drawImage(this.reel,0,this.pos[1],200,200,300,125,200,200),l.drawImage(this.reel,0,this.pos[2],200,200,550,125,200,200)}})</script><body><a-scene program=canvas-screen><a-assets><canvas crossorigin=anonymous height=512 id=canvas-wall width=512></canvas><canvas crossorigin=anonymous height=128 id=canvas-button width=256></canvas><canvas crossorigin=anonymous height=450 id=canvas-screen width=800></canvas><canvas crossorigin=anonymous height=1600 id=canvas-reel width=200></canvas></a-assets><a-camera wasd-controls-enabled=false><a-entity geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.015; thetaLength: 0" material="color: black; opacity: 0.5; shader: flat" position="0 0 -1" rotation="0 0 90" cursor="fuse: true; fuseTimeout: 600" cursor-defuse id=pointer raycaster="far: 64; objects: .clickable"><a-entity geometry="primitive: circle; radius: 0.005" material="color: black; opacity: 0.5; shader: flat" position="0 0 0"></a-entity><a-animation attribute=geometry.thetaLength begin=cursor-fusing dur=600 easing=ease-out-sine from=360 to=0 fill=backwards></a-animation></a-entity></a-camera><a-plane color=#fdf4e3 height=4 rotation="-90 0 0" width=4 metalness=0.32 roughness=0.24></a-plane><a-plane color=#fdf4e3 height=4 rotation="90 0 0" width=4 position="0 6 0"></a-plane><a-entity geometry="primitive: plane; width: 4; height: 6" material="src: #canvas-wall" position="0 3 -2" canvas-paint-wall=canvas-wall></a-entity><a-entity geometry="primitive: plane; width: 4; height: 6" material="src: #canvas-wall" position="2 3 0" rotation="0 -90 0" canvas-paint-wall=canvas-wall></a-entity><a-entity geometry="primitive: plane; width: 4; height: 6" material="src: #canvas-wall" position="-2 3 0" rotation="0 90 0" canvas-paint-wall=canvas-wall></a-entity><a-entity geometry="primitive: plane; width: 4; height: 6" material="src: #canvas-wall" position="0 3 2" rotation="0 180 0" canvas-paint-wall=canvas-wall></a-entity><a-entity geometry="primitive: plane; width: 2; height: 1.125" material="src: #canvas-screen; metalness: 0.1" position="0 1.48 -1.9" rotation="-5 0 0"><a-entity geometry="primitive: plane; width: 0.5; height: 0.25" material="src: #canvas-button" position="0 -0.4 0.2" id=insert-coin canvas-paint-button=canvas-button class=clickable><a-animation attribute=position begin=click dur=100 easing=ease-in-out from="0 -0.4 0.2" to="0 -0.4 0.15" direction=alternate repeat=1></a-animation></a-entity></a-entity><a-light color=#808080 type=ambient></a-light><a-light color=#fff type=point intensity=0.69 position="0 4 0"></a-light></a-scene>